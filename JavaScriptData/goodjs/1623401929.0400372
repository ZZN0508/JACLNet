(window["tmg.build"]=window["tmg.build"]||[]).push([[25,10,11,12,15,17,18,21,26,27,28],[,,function(h,l,a){function p(){for(var a=0,f={};a<arguments.length;a++){var e=arguments[a],c;for(c in e)f[c]=e[c]}return f}l.a=function e(a){function c(b,d,n){if(1<arguments.length){if("number"==typeof(n=p({path:"/"},c.defaults,n)).expires){var f=new Date;f.setMilliseconds(f.getMilliseconds()+864E5*n.expires);n.expires=f}try{var e=JSON.stringify(d);/^[\{\[]/.test(e)&&(d=e)}catch(H){}return d=(d=encodeURIComponent(String(d))).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,
decodeURIComponent),b=(b=(b=encodeURIComponent(String(b))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[b,"\x3d",d,n.expires&&"; expires\x3d"+n.expires.toUTCString(),n.path&&"; path\x3d"+n.path,n.domain&&"; domain\x3d"+n.domain,n.secure?"; secure":""].join("")}b||(e={});f=document.cookie?document.cookie.split("; "):[];for(var B=/(%[0-9A-Z]{2})+/g,v=0;v<f.length;v++){var t=f[v].split("\x3d"),h=t[0].replace(B,decodeURIComponent);t=t.slice(1).join("\x3d");
'"'===t.charAt(0)&&(t=t.slice(1,-1));try{if(t=a&&a(t,h)||t.replace(B,decodeURIComponent),this.json)try{t=JSON.parse(t)}catch(H){}if(b===h){e=t;break}b||(e[h]=t)}catch(H){}}return e}return c.get=c.set=c,c.getJSON=function(){return c.apply({json:!0},[].slice.call(arguments))},c.defaults={},c.remove=function(b,d){c(b,"",p(d,{expires:-1}))},c.withConverter=e,c}()},function(h,l,a){function p(a,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=
!0);Object.defineProperty(a,b.key,b)}}a.r(l);var u=a(0);h=a(1);a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;u.default.create("tmg.page");tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,getPageType:this.getPageType,getPageTitle:this.getPageTitle,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,
getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isPremium:this.isPremium,isApp:this.isApp.bind(this)}}var e;return e=[{key:"getPageType",value:function(){return window.dataLayer&&window.dataLayer.pageType}},{key:"getPageTitle",value:function(){return document.title}},{key:"getChannel",value:function(){return this.getMetaContent("tmgads.channel")}},{key:"getCategory",
value:function(){return this.getMetaContent("DCSext.Category")}},{key:"getBusinessSegment",value:function(){return this.getMetaContent("tmgads.businessSegment")}},{key:"getContentType",value:function(){return this.getMetaContent("DCSext.Content_Type")}},{key:"getArticleId",value:function(){return this.getMetaContent("tmgads.articleid")}},{key:"getPublishDate",value:function(){return this.getMetaContent("DCSext.articleFirstPublished")}},{key:"getKeywords",value:function(){return this.getMetaContent("keywords").split(",").map(function(c){return c.trim()})}},
{key:"getLocation",value:function(){return document.location}},{key:"getMetaContent",value:function(c){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"content",a=this.getMetaTag(c),n="generic";return a&&a.getAttribute(b)&&(n=a.getAttribute(b)),n}},{key:"getMetaTag",value:function(c){return document.querySelector("meta[name\x3d'".concat(c,"']"))}},{key:"isArticle",value:function(){var c=this,b=!1;return["articleRenderer","articleRenderer2","longFormRenderer"].forEach(function(a){c.getPageType()===
a&&(b=!0)}),b}},{key:"isGallery",value:function(){return"galleryRenderer"===this.getPageType()}},{key:"isSponsored",value:function(){return"sponsored"===this.getBusinessSegment()}},{key:"isPremium",value:function(){return"true"===this.getMetaContent("tmg.premium.state")}},{key:"isApp",value:function(){return"true"===this.getMetaContent("tmg.app")}},{key:"isAuthor",value:function(){return document.documentElement.hasAttribute("data-is-author")}},{key:"getLeadAssetLayout",value:function(){return this.isArticle()&&
document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}],p(a.prototype,e),a}();h.a.subscribe({topic:"tmg.page.ready",func:new a,runIfAlreadyPublished:!0});l.default=new a},function(h,l,a){h=a(7);h=a.n(h);a(0).default.create("tmg.store");tmg.store=h.a;l.a=h.a},function(h,l,a){a.r(l);h=a(0);a={};var p=function(a){var c={};return"string"==typeof a&&(c=u(a.replace(/'/g,'"'))),c},u=function(a,c){c=
c||{};var b=a,d=[],n=[],e=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,h=/^\s*{?\s*'|'\s*}?\s*$/i;if(!a)return c;if("[object Object]"===Object.prototype.toString.call(a))return a;if(f(b)||((b.match(e)||[]).forEach(function(c){if(c.includes('"label"')){var a=c.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),d=a.replace(/"/gi,'\\"');a=c.replace(a,d);b=b.replace(c,a)}}),d=b.replace(e,"").split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/)),d.forEach(function(b){b=
b.replace(/^\s*{|}\s*$/gi,"");f("{".concat(b,"}"))||n.push(b)}),n.forEach(function(c){var a=!1,d=c;!0===h.test(c)&&(d=c.replace(/^\s*'([^']+|\\')':/,'"$1":').replace(/:\s*('')\s*$/,': ""').replace(/:\s*'([^']+|\\')'\s*$/,': "$1"'),a=f("{".concat(d,"}")));a||!0!==/[^"']\w+[^"']:/.test(d)||(d=d.replace(/^\s*(.*?):/,'"$1":'),a=f("{".concat(d,"}")));a&&(b=b.replace(c,d))}),f(b))c=f(b);else try{JSON.parse(b)}catch(B){console.log("tmg.json.tryParse failed:",B)}return c},f=function(a){var c=!1;try{c=JSON.parse(a)}catch(b){}return c};
a={parseFromAem:p,tryParse:u,simpleTryParse:f};h.default.create("tmg.json");tmg.json=a;l.default=a;tmg.parseAemJson=p},function(h,l,a){a.r(l);var p=a(2),u=a(5);h=a(0);var f=a(4),e=a(3);a=a(1);var c={pId:"",firstName:"",lastName:"",username:"",email:"",readerType:"",subscriber:"",subButton:"",subscriptionType:""},b={livefyreToken:"livefyre-token",pianoRefToken:"user_ref_token",meterCount:"tmg_meter_count",personalisation:"tmg_p13n",publicId:"tmg_pid",registrationSuccess:"tmg_registration_success",
rememberMe:"tmg_rem",session:"tmg_session",refreshToken:"tmg_refresh",subscriptionConfirmation:"tmg_subscription_confirmation"},d=document.querySelector("html"),n={},z=function(){var b=document.querySelectorAll('[class*\x3d"'.concat("logged-in--",'"], [class*\x3d"').concat("is-subscriber--",'"], [class*\x3d"').concat("app-tmg-subscriber--",'"]'));(b=Array.prototype.slice.call(b)).forEach(function(b){r(b,!0)})},r=function(b,c){if(c||z(),b)return c="\\b(?:".concat("logged-in--","|").concat("is-subscriber--",
"|").concat("app-tmg-subscriber--",").+\\b"),b.className=b.className.replace(new RegExp(c,"g"),""),b.classList&&(b.classList.add("".concat("logged-in--").concat(v())),b.classList.add("".concat("is-subscriber--").concat(t())),b.classList.add("".concat("app-tmg-subscriber--").concat(y()))),b.classList},B=function(){var a=p.a.get(b.personalisation);return u.default.tryParse(a,c)},v=function(){return!!p.a.get(b.session)},t=function(){return"true"===n.subscriber},y=function(){try{var b=!!localStorage.getItem("ACCESS_TOKEN"),
c=localStorage.getItem("validAppUser")||"{}",a="TMG"===JSON.parse(c).subscriptionType;return b&&a}catch(A){return!1}},H=function(){return window.sessionStorage.removeItem("id_token"),window.sessionStorage.removeItem("access_token"),window.localStorage.removeItem("validAppUser"),window.localStorage.removeItem("ACCESS_TOKEN"),p.a.remove(b.session),E(),!0},E=function(){return n=B(),r(d),n},G={applyStatusCssClasses:r,clearAllData:function(){for(var c in H(),b)p.a.remove(b[c]);f.a.remove("fyre-auth");
f.a.remove("fyre-authentication-creds");f.a.remove("COMMENTING_TOKEN");E()},getLiveFyreToken:function(){return p.a.get(b.livefyreToken)||!1},getLiveFyreDetails:function(){var b=f.a.get("fyre-auth")||"{}";return u.default.tryParse(b)},getPianoRefToken:function(){return p.a.get(b.pianoRefToken)||!1},getMeterCount:function(){return!1},getMyTelegraphToken:function(){var b=f.a.storage.read("tmg.user.mytelegraph.token");return"undefined"!==b&&null!==b&&b},getProfile:B,getSessionId:function(){return p.a.get(b.session)||
""},getRefreshToken:function(){return p.a.get(b.refreshToken)||""},isLoggedIn:v,isRegistered:function(){return!!n.pId},isSubscriber:t,isAdLite:function(){return"true"===e.default.getMetaContent("tmg.isAdLite")},canComment:function(){return v()&&t()},canCommentInApp:function(){var c=!!localStorage.getItem("COMMENTING_TOKEN"),a=!!p.a.get(b.livefyreToken);return y()&&c&&a},isMyTelegraphOnboarded:function(){return!!f.a.storage.read("tmg.user.mytelegraph.onboarded.status")},login:function(){return E(),
!1},logout:H,setMyTelegraphToken:function(b){return f.a.storage.write("tmg.user.mytelegraph.token",b.token)},setMyTelegraphOnboarded:function(b){return f.a.storage.write("tmg.user.mytelegraph.onboarded.status",b.status)},updateState:E};h.default.create("tmg.user");window.tmg.user=G;n=E();a.a.publish({topic:"tmg.user.ready"});l.default=G},function(h,l,a){(function(a){h.exports=function b(a,e,c){function d(f,z){if(!e[f]){if(!a[f]){if(n)return n(f,!0);z=Error("Cannot find module '"+f+"'");throw z.code=
"MODULE_NOT_FOUND",z;}z=e[f]={exports:{}};a[f][0].call(z.exports,function(b){return d(a[f][1][b]||b)},z,z.exports,b,a,e,c)}return e[f].exports}for(var n=!1,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,e,c){c=a("../src/store-engine");a=[a("../storages/localStorage"),a("../storages/sessionStorage"),a("../storages/cookieStorage"),a("../storages/memoryStorage")];e.exports=c.createStore(a,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,
"../storages/sessionStorage":7}],2:[function(a,e,c){function b(b,a,c){c||(c="");b&&!v(b)&&(b=[b]);a&&!v(a)&&(a=[a]);var e=c?"__storejs_"+c+"_":"",z=c?new RegExp("^"+e):null;if(!/^[a-zA-Z0-9_\-]*$/.test(c))throw Error("store.js namespaces can only have alphanumerics + underscores and dashes");var r=B({_namespacePrefix:e,_namespaceRegexp:z,_testStorage:function(b){try{b.write("__storejs__test__","__storejs__test__");var a="__storejs__test__"===b.read("__storejs__test__");return b.remove("__storejs__test__"),
a}catch(x){return!1}},_assignPluginFnProp:function(b,a){var c=this[a];this[a]=function(){var a=d(arguments,0),n=this,e=[function(){if(c)return f(arguments,function(b,c){a[c]=b}),c.apply(n,a)}].concat(a);return b.apply(n,e)}},_serialize:function(b){return JSON.stringify(b)},_deserialize:function(b,a){if(!b)return a;var c="";try{c=JSON.parse(b)}catch(N){c=b}return void 0!==c?c:a},_addStorage:function(b){this.enabled||this._testStorage(b)&&(this.storage=b,this.enabled=!0)},_addPlugin:function(b){var a=
this;if(v(b))f(b,function(b){a._addPlugin(b)});else if(!n(this.plugins,function(a){return b===a})){if(this.plugins.push(b),!t(b))throw Error("Plugins must be function values that return objects");var c=b.call(this);if(!l(c))throw Error("Plugins must return an object of function properties");f(c,function(c,d){if(!t(c))throw Error("Bad plugin property: "+d+" from plugin "+b.name+". Plugins should only return functions.");a._assignPluginFnProp(c,d)})}},addStorage:function(b){(function(){var b="undefined"==
typeof console?null:console;b&&(b.warn?b.warn:b.log).apply(b,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])");this._addStorage(b)}},p,{plugins:[]});return r.raw={},f(r,function(b,a){t(b)&&(r.raw[a]=h(r,b))}),f(b,function(b){r._addStorage(b)}),f(a,function(b){r._addPlugin(b)}),r}a=a("./util");var d=a.slice,n=a.pluck,f=a.each,h=a.bind,B=a.create,v=a.isList,t=a.isFunction,l=a.isObject;e.exports={createStore:b};var p={version:"2.0.12",enabled:!1,get:function(b,a){b=
this.storage.read(this._namespacePrefix+b);return this._deserialize(b,a)},set:function(b,a){return void 0===a?this.remove(b):(this.storage.write(this._namespacePrefix+b,this._serialize(a)),a)},remove:function(b){this.storage.remove(this._namespacePrefix+b)},each:function(b){var a=this;this.storage.each(function(c,d){b.call(a,a._deserialize(c),(d||"").replace(a._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(b){return this._namespacePrefix=="__storejs_"+
b+"_"},createStore:function(){return b.apply(this,arguments)},addPlugin:function(b){this._addPlugin(b)},namespace:function(a){return b(this.storage,this.plugins,a)}}},{"./util":3}],3:[function(f,e,c){(function(b){function a(b,a){return Array.prototype.slice.call(b,a||0)}function c(b,a){f(b,function(b,c){return a(b,c),!1})}function f(b,a){if(h(b))for(var c=0;c<b.length;c++){if(a(b[c],c))return b[c]}else for(c in b)if(b.hasOwnProperty(c)&&a(b[c],c))return b[c]}function h(b){return null!=b&&"function"!=
typeof b&&"number"==typeof b.length}var l=Object.assign?Object.assign:function(b,a,d,n){for(var f=1;f<arguments.length;f++)c(Object(arguments[f]),function(a,c){b[c]=a});return b},v=function(){if(Object.create)return function(b,c,d,f){var n=a(arguments,1);return l.apply(this,[Object.create(b)].concat(n))};var b=function(){};return function(c,d,f,n){var e=a(arguments,1);return b.prototype=c,l.apply(this,[new b].concat(e))}}();e.exports={assign:l,create:v,trim:String.prototype.trim?function(b){return String.prototype.trim.call(b)}:
function(b){return b.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},bind:function(b,a){return function(){return a.apply(b,Array.prototype.slice.call(arguments,0))}},slice:a,each:c,map:function(b,a){var c=h(b)?[]:{};return f(b,function(b,d){return c[d]=a(b,d),!1}),c},pluck:f,isList:h,isFunction:function(b){return b&&"[object Function]"==={}.toString.call(b)},isObject:function(b){return b&&"[object Object]"==={}.toString.call(b)},Global:"undefined"!=typeof window?window:b}}).call(this,void 0!==a?
a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,e,c){function b(b){for(var a=h.cookie.split(/; ?/g),c=a.length-1;0<=c;c--)if(f(a[c])){var d=a[c].split("\x3d"),n=unescape(d[0]);b(unescape(d[1]),n)}}function d(b){b&&n(b)&&(h.cookie=escape(b)+"\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; path\x3d/")}function n(b){return(new RegExp("(?:^|;\\s*)"+escape(b).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d")).test(h.cookie)}a=a("../src/util");c=a.Global;var f=a.trim;
e.exports={name:"cookieStorage",read:function(b){if(!b||!n(b))return null;b="(?:^|.*;\\s*)"+escape(b).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d\\s*((?:[^;](?!;))*[^;]?).*";return unescape(h.cookie.replace(new RegExp(b),"$1"))},write:function(b,a){b&&(h.cookie=escape(b)+"\x3d"+escape(a)+"; expires\x3dTue, 19 Jan 2038 03:14:07 GMT; path\x3d/")},each:b,remove:d,clearAll:function(){b(function(b,a){d(a)})}};var h=c.document},{"../src/util":3}],5:[function(a,e,c){function b(b){return d.localStorage.getItem(b)}
var d=a("../src/util").Global;e.exports={name:"localStorage",read:b,write:function(b,a){return d.localStorage.setItem(b,a)},each:function(a){for(var c=d.localStorage.length-1;0<=c;c--){var n=d.localStorage.key(c);a(b(n),n)}},remove:function(b){return d.localStorage.removeItem(b)},clearAll:function(){return d.localStorage.clear()}}},{"../src/util":3}],6:[function(a,e,c){e.exports={name:"memoryStorage",read:function(a){return b[a]},write:function(a,c){b[a]=c},each:function(a){for(var c in b)b.hasOwnProperty(c)&&
a(b[c],c)},remove:function(a){delete b[a]},clearAll:function(a){b={}}};var b={}},{}],7:[function(a,e,c){function b(b){return d.sessionStorage.getItem(b)}var d=a("../src/util").Global;e.exports={name:"sessionStorage",read:b,write:function(b,a){return d.sessionStorage.setItem(b,a)},each:function(a){for(var c=d.sessionStorage.length-1;0<=c;c--){var f=d.sessionStorage.key(c);a(b(f),f)}},remove:function(b){return d.sessionStorage.removeItem(b)},clearAll:function(){return d.sessionStorage.clear()}}},{"../src/util":3}]},
{},[1])(1)}).call(this,a(13))},function(h,l,a){function p(a,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}a.r(l);var u=a(0);h=a(1);a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;u.default.create("tmg.utils");tmg.utils={injectScript:this.injectScript,getRandomInt:this.getRandomInteger}}var e;return e=[{key:"injectScript",value:function(a){var b=
!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(c,f){a?(f=document.createElement("script"),f.setAttribute("src",a),f.addEventListener("load",c,!1),b&&f.setAttribute("defer","true"),document.querySelector("head").appendChild(f)):f(Error("No src supplied"))})}},{key:"getRandomInteger",value:function(a,b){if(a&&b)return a=Math.ceil(a),Math.floor(Math.random()*(Math.floor(b)-a)+a)}}],p(a.prototype,e),a}();h.a.subscribe({topic:"tmg.page.ready",func:new a,runIfAlreadyPublished:!0});
l.default=a},function(h,l,a){a.r(l);var p;h=a(0);var u=a(3),f=new RegExp(/\?[^#]*|(?=#)|$/),e=(p={},function(b){return p[b]||(p[b]=new RegExp("([?\x26;]".concat(b,"(?\x3d[\x3d\x26;#]|$))\x3d?([^\x26;#]*)")))}),c=function(b,a){return(b=e(a).exec(b))&&decodeURIComponent(b[2])},b=function(b,a,d){var n,h,l;return void 0===b&&(b=u.default.getLocation().search),null===c(b,a)?(n="".concat(a,"\x3d").concat(encodeURIComponent(d)),h=f.exec(b)[0],l=b.replace(f,(h.length?h+"\x26":"?")+n)):l=b.replace(e(a),"$1\x3d".concat(encodeURIComponent(d))),
l};a=function(b,a){if(null!==c(a,b)){var d=a.split("?")[0];a=(-1!==a.indexOf("?")?a.split("?")[1]:"").split("\x26");for(var f=a.length-1;0<=f;--f)a[f].split("\x3d")[0]===b&&a.splice(f,1);return d+(0<a.length?"?":"")+a.join("\x26")}return a};var d=function(a,d){return null!==c(a,"redirectTo")?b(a,"redirectTo",d):a};h.default.create("tmg.GET_PARAM");tmg.getQuerystringParam=c;tmg.setQuerystringParam=b;tmg.removeQuerystringParam=a;tmg.updateRedirectParam=d;location.search.substr(1).split("\x26").forEach(function(b){b=
b.split("\x3d");1<b.length?tmg.GET_PARAM[b[0]]=decodeURIComponent(b[1]):tmg.GET_PARAM[b[0]]=""});l.default={matchParam:e,matchQuerystring:f,getQuerystringParam:c,removeQuerystringParam:a,setQuerystringParam:b,updateRedirectParam:d}},function(h,l,a){function p(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}a.r(l);var u=a(0);h=a(1);var f=a(2),e=a(6),c=a(3),b=a(9),d=a(5),n=function(){function a(){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");!0;u.default.create("tmg.dataLayerUtils");window.dataLayer=window.dataLayer||{};this.cookieStatus=this.getCookies();this.isPaymentRenderer=window.dataLayer.pageType&&"paymentRenderer"===window.dataLayer.pageType;this.listenerEvents=["click","input"];this.initListeners("[data-layer-event]");tmg.dataLayerUtils={cookieStatus:this.cookieStatus,update:this.update,isPaymentRenderer:this.isPaymentRenderer,onRegistrationSuccess:this.onRegistrationSuccess,
onRegistrationUpdate:this.onRegistrationUpdate,onSubscriptionConfirmation:this.onSubscriptionConfirmation,updateSubscription:this.updateSubscription,updateUserStatus:this.updateUserStatus,checkCookie:this.checkCookie,removeCookie:this.removeCookie,addPropertyValue:this.addPropertyValue};this.update()}var h,n;return n=[{key:"addPropertyValue",value:function(b,a){b&&a&&(window.dataLayer[b]=a)}}],h=[{key:"update",value:function(){this.cookieStatus.registrationSuccess.value?(this.onRegistrationSuccess(),
this.removeCookie(this.cookieStatus.registrationSuccess.name)):this.cookieStatus.registrationUpdate.value?(this.onRegistrationUpdate(),this.removeCookie(this.cookieStatus.registrationUpdate.name)):this.cookieStatus.subscriptionConfirmation.value?(this.onSubscriptionConfirmation(),this.removeCookie(this.cookieStatus.subscriptionConfirmation.name)):this.isPaymentRenderer&&this.updateSubscription();this.updateUserStatus()}},{key:"updateUserStatus",value:function(){e.default.isLoggedIn()?window.dataLayer.userStatus=
e.default.isSubscriber()?"subscribed":"registered":window.dataLayer.userStatus="anonymous"}},{key:"onRegistrationSuccess",value:function(){var b=this.checkCookie(this.cookieStatus.registrationSuccess,"success_facebook"),a=this.checkCookie(this.cookieStatus.registrationSuccess,"success_emailoffers-true");window.dataLayer.event=["registrationComplete"];window.dataLayer.registration={registrationType:b?"facebook":"email",emailOptIn:a?"true":"false"}}},{key:"onRegistrationUpdate",value:function(){"1"!==
this.cookieStatus.registrationUpdate.value?(window.dataLayer.event=["registrationUpdate","newsletterSignup"],window.dataLayer.newsletterType=this.cookieStatus.registrationUpdate.value):window.dataLayer.event=["registrationUpdate"];window.dataLayer.registration={registrationType:"email"}}},{key:"onSubscriptionConfirmation",value:function(){window.dataLayer.event=["subscriptionConfirmation"];window.dataLayer.subscription=d.default.tryParse(JSON.stringify(this.cookieStatus.subscriptionConfirmation.value))}},
{key:"updateSubscription",value:function(){window.dataLayer.event=["subscriptionCheckout"];window.dataLayer.subscription={productID:b.default.getQuerystringParam(c.default.getLocation().search,"productId")}}},{key:"checkCookie",value:function(b,a){return!(!b||!a)&&b.value===a}},{key:"removeCookie",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;b&&f.a.remove(b,{domain:".telegraph.co.uk"})}},{key:"initListeners",value:function(b){var a=this;(b=document.querySelectorAll(b))&&
b.forEach(function(b){return a.bindListeners(b)})}},{key:"bindListeners",value:function(b){var a=this;this.listenerEvents.forEach(function(c){b.addEventListener(c,function(b){a.addEvent(b.target.dataset.layerEvent)})})}},{key:"addEvent",value:function(b){window.dataLayer.event!==b&&(window.dataLayer.event=b)}},{key:"getCookies",value:function(){return{registrationSuccess:{name:"tmg_registration_success",value:f.a.get("tmg_registration_success")},registrationUpdate:{name:"tmg_registration_update",
value:f.a.get("tmg_registration_update")},subscriptionConfirmation:{name:"tmg_subscription_confirmation",value:f.a.get("tmg_subscription_confirmation")}}}}],p(a.prototype,h),n&&p(a,n),a}();h.a.subscribe({topic:"tmg.page.ready",func:function(){new n},runIfAlreadyPublished:!0});l.default=n},function(h,l,a){function p(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}a.r(l);h=a(1);var u=a(0),f=a(3);
a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params={local:"local",qa:"qa",ci:"ci",staging:"staging",prod:"prod"};this.currentEnv=this.determineEnvironment();u.default.create("tmg.environment");tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}var c;return c=
[{key:"determineEnvironment",value:function(){var b=f.default.getLocation().hostname.split(".");return b.some(function(b){return"local"===b||"127"===b||"localhost"===b})?this.getList().local:b.some(function(b){return/(^|-)ci[0-9]+(-app)?$/i.test(b)})?this.getList().ci:b.some(function(b){return/(^|-)qa[0-9]+(-app)?$/i.test(b)})?this.getList().qa:b.some(function(b){return/(^|-)staging(.*)$/i.test(b)})?this.getList().staging:this.getList().prod}},{key:"getList",value:function(){return this.params}},
{key:"getEnvironment",value:function(){return this.currentEnv}},{key:"getTld",value:function(){return"telegraph.co.uk"}},{key:"isCommentingTurnedOn",value:function(){var b=!1;try{void 0!==tmg.COMMENTING_STATUS&&(b=!!tmg.COMMENTING_STATUS)}catch(d){console.log(d)}return b}},{key:"isHttps",value:function(){return"https:"===f.default.getLocation().protocol||this.isLocal()}},{key:"isLocal",value:function(){return this.getEnvironment()===this.getList().local}},{key:"isProd",value:function(){return this.getEnvironment()===
this.getList().prod}}],p(a.prototype,c),a}();h.a.subscribe({topic:"tmg.page.ready",func:new a,runIfAlreadyPublished:!0});l.default=a},,function(h,l){l=function(){return this}();try{l=l||(new Function("return this"))()}catch(a){"object"==typeof window&&(l=window)}h.exports=l},,,,function(h,l,a){l.a={throttle:function(a,h){var f,e;return h=h||200,function(){var c=this,b=+new Date,d=arguments;f&&b<f+h?(clearTimeout(e),e=setTimeout(function(){f=b;a.apply(c,d)},h)):(f=b,a.apply(c,d))}}}},,,,,function(h,
l,a){function p(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}var u=a(0),f=a(9);h=a(1);a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.redirectSelector="[data-redirect-current]"}var c;return c=[{key:"init",value:function(){var b=document.querySelectorAll(this.redirectSelector);b.length&&this.setRedirects(b);u.default.create("tmg.redirect");
window.tmg.redirect={getAmendedHref:this.getAmendedHref}}},{key:"setRedirects",value:function(b){var a=this;b.forEach(function(b){var c=b.getAttribute("href");c&&b.setAttribute("href",a.getAmendedHref(c))})}},{key:"getAmendedHref",value:function(b){return-1<b.indexOf("redirectTo")?f.default.updateRedirectParam(b,window.location.href):f.default.setQuerystringParam(b,"redirectTo",window.location.href)}}],p(a.prototype,c),a}();h.a.subscribe({topic:"tmg.page.ready",func:(new a).init(),runIfAlreadyPublished:!0});
l.a=new a},,function(h,l,a){function p(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}a.r(l);h=a(1);var u=a(17),f=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({scrollableBarSelector:"[data-drag-scroll]",activeClass:"is-dragging",defaultPositionSelector:""},b);this.options={scrollableBar:document.querySelector(this.params.scrollableBarSelector),
isDragging:!1,startMousePosition:0,startScrollPosition:0,startScrollItem:null,endScrollItem:null}}var c;return c=[{key:"init",value:function(){this.options.scrollableBar&&(""!==this.params.defaultPositionSelector&&this.scrollToCurrentItem(),this.isTouchDevice()||this.bindListeners())}},{key:"bindListeners",value:function(){var b=this;this.options.scrollableBar.addEventListener("mousedown",function(a){b.onMouseDown(a)});window.addEventListener("mouseup",function(a){b.options.isDragging&&b.onMouseUp(a)});
window.addEventListener("mousemove",u.a.throttle(function(a){b.options.isDragging&&b.onDrag(a)},10));this.handleDragLinkClick()}},{key:"setStartPosition",value:function(b){this.options.startMousePosition=b.pageX-this.options.scrollableBar.offsetLeft;this.options.startScrollPosition=this.options.scrollableBar.scrollLeft}},{key:"onMouseDown",value:function(b){this.options.isDragging=!0;b.preventDefault();this.options.startScrollItem=b.target;this.options.endScrollItem=null;this.setStartPosition(b);
this.toggleActiveClass(!0)}},{key:"onMouseUp",value:function(b){this.options.isDragging=!1;this.toggleActiveClass(!1);this.options.endScrollItem=b.target}},{key:"onDrag",value:function(b){this.options.scrollableBar.scrollLeft=this.options.startScrollPosition-(b.pageX-this.options.scrollableBar.offsetLeft-this.options.startMousePosition)}},{key:"handleDragLinkClick",value:function(){var b=this;this.options.scrollableBar.querySelectorAll("a").forEach(function(a){a.addEventListener("click",function(a){b.hasScrolled()&&
b.options.startScrollItem===b.options.endScrollItem&&(a.preventDefault(),b.options.startScrollItem=null,b.options.endScrollItem=null)})})}},{key:"hasScrolled",value:function(){return this.options.startScrollPosition!==this.options.scrollableBar.scrollLeft}},{key:"scrollToCurrentItem",value:function(){var b=this.options.scrollableBar.querySelector(this.params.defaultPositionSelector);b&&b.offsetLeft>this.options.scrollableBar.offsetWidth-100&&(this.options.scrollableBar.scrollLeft=b.offsetLeft/2)}},
{key:"toggleActiveClass",value:function(b){(b&&!this.options.scrollableBar.classList.contains(this.params.activeClass)||!b&&this.options.scrollableBar.classList.contains(this.params.activeClass))&&this.options.scrollableBar.classList.toggle(this.params.activeClass)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}}],p(a.prototype,c),a}();h.a.subscribe({topic:"tmg.page.ready",func:function(){(new f({defaultPositionSelector:"[data-current-navigation-item]"})).init()},
runIfAlreadyPublished:!0});l.default=f},function(h,l,a){a.r(l);var p=a(0);h=function(){p.default.create("tmg.guid");window.tmg.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var f=16*Math.random()|0;return("x"===a?f:3&f|8).toString(16)})};a(1).a.subscribe({topic:"tmg.page.ready",func:h,runIfAlreadyPublished:!0});l.default={guid:h}},function(h,l,a){function p(a,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=
!0);Object.defineProperty(a,b.key,b)}}a.r(l);var u=a(21);h=function(){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({openTriggerSelector:"[data-modal-open-button]",contentUrl:"/all-sections.modal/"},c);this.openButton=document.querySelector(this.params.openTriggerSelector);this.modal="";this.keydownActions=this.keydownActions.bind(this);this.options={hasContent:!1,keyboardNavigation:!1,firstFocusableElement:"",lastFocusableElement:""}}
var e;return e=[{key:"init",value:function(){this.bindButtonClick(this.openButton)}},{key:"bindButtonClick",value:function(a){var b=this;a&&a.addEventListener("click",function(a){a.preventDefault();b.modal||b.createModalContainer();b.toggleModal()})}},{key:"createModalContainer",value:function(){var a=document.createElement("div");a.classList.add("all-sections-modal","all-sections-modal--hidden");a.setAttribute("aria-hidden","true");a.setAttribute("role","dialog");a.setAttribute("aria-label","Navigation modal containing links for all sections of the site");
a.setAttribute("data-all-sections-modal","");document.body.appendChild(a);this.modal=a}},{key:"toggleModal",value:function(){this.modal.classList.toggle("all-sections-modal--hidden");document.querySelector("html").classList.toggle("all-sections-modal--is-open");this.options.hasContent?this.toggleFocusableElement():(this.setModalHeaderContent(),this.setModalContentWrapper(),this.getModalContent());this.bindKeydownEventListeners();this.modal.classList.contains("all-sections-modal--hidden")?this.modal.setAttribute("aria-hidden",
!0):this.modal.setAttribute("aria-hidden",!1)}},{key:"bindKeydownEventListeners",value:function(){this.modal.classList.contains("all-sections-modal--hidden")?document.removeEventListener("keydown",this.keydownActions):document.addEventListener("keydown",this.keydownActions)}},{key:"setModalHeaderContent",value:function(){this.modal.insertAdjacentHTML("beforeend",'\n\t\t\t\x3cheader class\x3d"site-header all-sections-modal__header-wrapper"\x3e\n\t\t\t\t\x3cdiv class\x3d"site-header__container site-header__primary-content all-sections-modal__header-content"\x3e\n\n\t\t\t\t\t\x3cdiv class\x3d"site-header__logo"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"e-site-logo__award"\x3e\n\t\t\t\t\t\t\tNews website of the year\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3ca href\x3d"https://www.telegraph.co.uk" class\x3d"e-site-logo"\x3e\n\t\t\t\t\t\t\t\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\taria-labelledby\x3d"site-logo-title"\n\t\t\t\t\t\t\t\tclass\x3d"e-site-logo__image"\x3e\n\t\t\t\t\t\t\t\t\x3cuse xlink:href\x3d"#site-logo"\x3e\x3c/use\x3e\n\t\t\t\t\t\t\t\x3c/svg\x3e\n\t\t\t\t\t\t\t'.concat(this.hasPoppyLogo()?
this.getPoppyMarkup():"",'\n\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\t\x3cdiv class\x3d"all-sections-modal__button"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"e-site-header-button e-site-header-button--close"\x3e\n\t\t\t\t\t\t\t\x3ca href\x3d""\n\t\t\t\t\t\t\t\tclass\x3d"e-site-header-button__link"\n\t\t\t\t\t\t\t\taria-label\x3d"Close all sections navigation menu"\n\t\t\t\t\t\t\t\tdata-modal-close-button\x3e\n\t\t\t\t\t\t\t\t\x3cspan class\x3d"all-sections-modal__button-text"\x3eClose Menu\x3c/span\x3e\n\t\t\t\t\t\t\t\t\x3csvg id\x3d"global-close" class\x3d"e-site-header-button__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 1792 1792"\x3e\n\t\t\t\t\t\t\t\t\t\x3cpolygon points\x3d"1792,1712.8 975.2,896 1792,79.2 1712.8,0 896,816.8 79.2,0 0,79.2 816.8,896 0,1712.8 79.2,1792 896,975.2\n\t\t\t\t\t\t\t\t\t\t1712.8,1792"/\x3e\n\t\t\t\t\t\t\t\t\x3c/svg\x3e\n\t\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/header\x3e'));
this.bindButtonClick(document.querySelector("[data-modal-close-button]"))}},{key:"setModalContentWrapper",value:function(){this.modal.insertAdjacentHTML("beforeend",'\x3cdiv class\x3d"container all-sections__container" data-modal-content-wrapper\x3e\x3c/div\x3e')}},{key:"getModalContent",value:function(){var a=this;return fetch(this.params.contentUrl,{cache:"no-cache"}).then(function(b){if(b.ok)return b.text();throw Error("Please refresh and try again.");}).then(function(b){a.setModalContent(b);a.initAccordionForModal()}).catch(function(b){a.setModalContent('\n\t\t\t\t\t\x3cdiv class\x3d"all-sections-modal__error-message"\x3e\n\t\t\t\t\t\t\x3ch2 class\x3d"all-sections__main-heading u-heading-2"\x3eSomething went wrong\x3c/h2\x3e\n\t\t\t\t\t\t\x3cp class\x3d"all-sections__body-text"\x3e'.concat(b.message,
"\x3c/p\x3e\n\t\t\t\t\t\x3c/div\x3e"))})}},{key:"setModalContent",value:function(a){document.querySelector("[data-modal-content-wrapper]").insertAdjacentHTML("beforeend",a);this.defineFocusableElements();this.toggleFocusableElement();this.options.hasContent=!0}},{key:"keydownActions",value:function(a){this.bindEscapeKey(a);this.trapFocusWithinModal(a)}},{key:"bindEscapeKey",value:function(a){27===a.keyCode&&(this.resetScrollPosition(),this.toggleModal())}},{key:"trapFocusWithinModal",value:function(a){this.options.hasContent&&
(9===a.keyCode||a.shiftKey&&9===a.keyCode)&&(this.options.keyboardNavigation||this.setFocusPosition(a,!0,!0),a.shiftKey&&9===a.keyCode?a.target===this.options.firstFocusableElement&&this.setFocusPosition(a,!1):9===a.keyCode&&a.target===this.options.lastFocusableElement&&this.setFocusPosition(a,!0))}},{key:"setFocusPosition",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];a.preventDefault();c&&(this.options.keyboardNavigation=!0);b?this.options.firstFocusableElement.focus():
this.options.lastFocusableElement.focus()}},{key:"defineFocusableElements",value:function(){var a=this.modal.querySelectorAll("a, button");this.options.firstFocusableElement=a[0];this.options.lastFocusableElement=a[a.length-1]}},{key:"toggleFocusableElement",value:function(){this.options.keyboardNavigation&&(this.modal.classList.contains("all-sections-modal--hidden")?this.openButton.focus():this.options.firstFocusableElement.focus())}},{key:"resetScrollPosition",value:function(){this.modal.classList.contains("all-sections-modal--hidden")||
0===this.modal.scrollTop||(this.modal.scrollTop=0)}},{key:"initAccordionForModal",value:function(){(new u.default({accordionSelector:"[data-accordion-modal]",hideClasses:["accordion--is-collapsed","accordion--is-expanded"]})).init()}},{key:"hasPoppyLogo",value:function(){var a=document.querySelector("[data-has-poppy-logo]");return a&&"true"===a.getAttribute("data-has-poppy-logo")}},{key:"getPoppyMarkup",value:function(){return'\x3cdiv class\x3d"e-site-logo__poppy"\x3e\n\t\t\t\x3csvg viewbox\x3d"0 0 17 32"\x3e\n\t\t\t\t\x3cuse xlink:href\x3d"#poppy"\x3e\x3c/use\x3e\n\t\t\t\x3c/svg\x3e\n\t\t\x3c/div\x3e'}}],
p(a.prototype,e),a}();(new h).init();l.default=h},,function(h,l,a){function p(a){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var u;!function(f,e){var c=null;"object"===p(l)?h.exports=e(c):void 0===(u=function(b){try{c=a(29)("moment")}catch(d){}return e(c)}.call(l,a,l,h))||(h.exports=u)}(0,function(a){var f="function"==typeof a,c=
!!window.addEventListener,b=window.document,d=window.setTimeout,h=function(a,b,m,d){c?a.addEventListener(b,m,!!d):a.attachEvent("on"+b,m)},l=function(a,b,m,d){c?a.removeEventListener(b,m,!!d):a.detachEvent("on"+b,m)},r=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},u=function(a,b){r(a,b)||(a.className=""===a.className?b:a.className+" "+b)},v=function(a,b){var q;a.className=(q=(" "+a.className+" ").replace(" "+b+" "," ")).trim?q.trim():q.replace(/^\s+|\s+$/g,"")},t=function(a){return/Array/.test(Object.prototype.toString.call(a))},
y=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},H=function(a,b){return[31,0==a%4&&0!=a%100||0==a%400?29:28,31,30,31,30,31,31,30,31,30,31][b]},E=function(a){y(a)&&a.setHours(0,0,0,0)},G=function(a,b){return a.getTime()===b.getTime()},M=function w(a,b,c){var q,m;for(q in b)(m=void 0!==a[q])&&"object"===p(b[q])&&null!==b[q]&&void 0===b[q].nodeName?y(b[q])?c&&(a[q]=new Date(b[q].getTime())):t(b[q])?c&&(a[q]=b[q].slice(0)):a[q]=w({},b[q],c):!c&&m||(a[q]=b[q]);return a},
T=function(a,c,d){var q;b.createEvent?((q=b.createEvent("HTMLEvents")).initEvent(c,!0,!1),q=M(q,d),a.dispatchEvent(q)):b.createEventObject&&(q=b.createEventObject(),q=M(q,d),a.fireEvent("on"+c,q))},U=function(a){return 0>a.month&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12),11<a.month&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12),a},A={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,
defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:"January February March April May June July August September October November December".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},Z=function(a,b,c){for(b+=a.firstDay;7<=b;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},Q=function(a){var b=[],c="false";if(a.isEmpty){if(!a.showDaysInNextAndPreviousMonths)return'\x3ctd class\x3d"is-empty"\x3e\x3c/td\x3e';b.push("is-outside-current-month");a.enableSelectionDaysInNextAndPreviousMonths||
b.push("is-selection-disabled")}return a.isDisabled&&b.push("is-disabled"),a.isToday&&b.push("is-today"),a.isSelected&&(b.push("is-selected"),c="true"),a.hasEvent&&b.push("has-event"),a.isInRange&&b.push("is-inrange"),a.isStartRange&&b.push("is-startrange"),a.isEndRange&&b.push("is-endrange"),'\x3ctd data-day\x3d"'+a.day+'" class\x3d"'+b.join(" ")+'" aria-selected\x3d"'+c+'"\x3e\x3cbutton class\x3d"pika-button pika-day" type\x3d"button" data-pika-year\x3d"'+a.year+'" data-pika-month\x3d"'+a.month+
'" data-pika-day\x3d"'+a.day+'"\x3e'+a.day+"\x3c/button\x3e\x3c/td\x3e"},x=function(a,b,c,d){return'\x3ctr class\x3d"pika-row'+(c?" pick-whole-week":"")+(d?" is-selected":"")+'"\x3e'+(b?a.reverse():a).join("")+"\x3c/tr\x3e"},N=function(a,b,c,d,f,h){var q,m,w=a._o,e=c===w.minYear,l=c===w.maxYear,J='\x3cdiv id\x3d"'+h+'" class\x3d"pika-title" role\x3d"heading" aria-live\x3d"assertive"\x3e',n=!0,p=!0;var O=[];for(h=0;12>h;h++)O.push('\x3coption value\x3d"'+(c===f?h-b:12+h-b)+'"'+(h===d?' selected\x3d"selected"':
"")+(e&&h<w.minMonth||l&&h>w.maxMonth?'disabled\x3d"disabled"':"")+"\x3e"+w.i18n.months[h]+"\x3c/option\x3e");f='\x3cdiv class\x3d"pika-label"\x3e'+w.i18n.months[d]+'\x3cselect class\x3d"pika-select pika-select-month" tabindex\x3d"-1"\x3e'+O.join("")+"\x3c/select\x3e\x3c/div\x3e";t(w.yearRange)?(h=w.yearRange[0],q=w.yearRange[1]+1):(h=c-w.yearRange,q=1+c+w.yearRange);for(O=[];h<q&&h<=w.maxYear;h++)h>=w.minYear&&O.push('\x3coption value\x3d"'+h+'"'+(h===c?' selected\x3d"selected"':"")+"\x3e"+h+"\x3c/option\x3e");
return m='\x3cdiv class\x3d"pika-label"\x3e'+c+w.yearSuffix+'\x3cselect class\x3d"pika-select pika-select-year" tabindex\x3d"-1"\x3e'+O.join("")+"\x3c/select\x3e\x3c/div\x3e",w.showMonthAfterYear?J+=m+f:J+=f+m,e&&(0===d||w.minMonth>=d)&&(n=!1),l&&(11===d||w.maxMonth<=d)&&(p=!1),0===b&&(J+='\x3cbutton class\x3d"pika-prev'+(n?"":" is-disabled")+'" type\x3d"button"\x3e'+w.i18n.previousMonth+"\x3c/button\x3e"),b===a._o.numberOfMonths-1&&(J+='\x3cbutton class\x3d"pika-next'+(p?"":" is-disabled")+'" type\x3d"button"\x3e'+
w.i18n.nextMonth+"\x3c/button\x3e"),J+"\x3c/div\x3e"},I=function(q){var m=this,e=m.config(q);m._onMouseDown=function(a){if(m._v){var b=(a=a||window.event).target||a.srcElement;if(b)if(r(b,"is-disabled")||(!r(b,"pika-button")||r(b,"is-empty")||r(b.parentNode,"is-disabled")?r(b,"pika-prev")?m.prevMonth():r(b,"pika-next")&&m.nextMonth():(m.setDate(new Date(b.getAttribute("data-pika-year"),b.getAttribute("data-pika-month"),b.getAttribute("data-pika-day"))),e.bound&&d(function(){m.hide();e.blurFieldOnSelect&&
e.field&&e.field.blur()},100))),r(b,"pika-select"))m._c=!0;else{if(!a.preventDefault)return a.returnValue=!1,!1;a.preventDefault()}}};m._onChange=function(a){var b=(a=a||window.event).target||a.srcElement;b&&(r(b,"pika-select-month")?m.gotoMonth(b.value):r(b,"pika-select-year")&&m.gotoYear(b.value))};m._onKeyChange=function(a){if(a=a||window.event,m.isVisible())switch(a.keyCode){case 13:case 27:e.field&&e.field.blur();break;case 37:a.preventDefault();m.adjustDate("subtract",1);break;case 38:m.adjustDate("subtract",
7);break;case 39:m.adjustDate("add",1);break;case 40:m.adjustDate("add",7)}};m._onInputChange=function(b){var c;b.firedBy!==m&&(c=e.parse?e.parse(e.field.value,e.format):f?(c=a(e.field.value,e.format,e.formatStrict))&&c.isValid()?c.toDate():null:new Date(Date.parse(e.field.value)),y(c)&&m.setDate(c),m._v||m.show())};m._onInputFocus=function(){m.show()};m._onInputClick=function(){m.show()};m._onInputBlur=function(){var a=b.activeElement;do if(r(a,"pika-single"))return;while(a=a.parentNode);m._c||(m._b=
d(function(){m.hide()},50));m._c=!1};m._onClick=function(a){var b=(a=a||window.event).target||a.srcElement;if(a=b){!c&&r(b,"pika-select")&&(b.onchange||(b.setAttribute("onchange","return;"),h(b,"change",m._onChange)));do if(r(a,"pika-single")||a===e.trigger)return;while(a=a.parentNode);m._v&&b!==e.trigger&&a!==e.trigger&&m.hide()}};m.el=b.createElement("div");m.el.className="pika-single"+(e.isRTL?" is-rtl":"")+(e.theme?" "+e.theme:"");h(m.el,"mousedown",m._onMouseDown,!0);h(m.el,"touchend",m._onMouseDown,
!0);h(m.el,"change",m._onChange);e.keyboardInput&&h(b,"keydown",m._onKeyChange);e.field&&(e.container?e.container.appendChild(m.el):e.bound?b.body.appendChild(m.el):e.field.parentNode.insertBefore(m.el,e.field.nextSibling),h(e.field,"change",m._onInputChange),e.defaultDate||(f&&e.field.value?e.defaultDate=a(e.field.value,e.format).toDate():e.defaultDate=new Date(Date.parse(e.field.value)),e.setDefaultDate=!0));q=e.defaultDate;y(q)?e.setDefaultDate?m.setDate(q,!0):m.gotoDate(q):m.gotoDate(new Date);
e.bound?(this.hide(),m.el.className+=" is-bound",h(e.trigger,"click",m._onInputClick),h(e.trigger,"focus",m._onInputFocus),h(e.trigger,"blur",m._onInputBlur)):this.show()};return I.prototype={config:function(a){this._o||(this._o=M({},A,!0));a=M(this._o,a,!0);a.isRTL=!!a.isRTL;a.field=a.field&&a.field.nodeName?a.field:null;a.theme="string"==typeof a.theme&&a.theme?a.theme:null;a.bound=!!(void 0!==a.bound?a.field&&a.bound:a.field);a.trigger=a.trigger&&a.trigger.nodeName?a.trigger:a.field;a.disableWeekends=
!!a.disableWeekends;a.disableDayFn="function"==typeof a.disableDayFn?a.disableDayFn:null;var b=parseInt(a.numberOfMonths,10)||1;(a.numberOfMonths=4<b?4:b,y(a.minDate)||(a.minDate=!1),y(a.maxDate)||(a.maxDate=!1),a.minDate&&a.maxDate&&a.maxDate<a.minDate&&(a.maxDate=a.minDate=!1),a.minDate&&this.setMinDate(a.minDate),a.maxDate&&this.setMaxDate(a.maxDate),t(a.yearRange))?(b=(new Date).getFullYear()-10,a.yearRange[0]=parseInt(a.yearRange[0],10)||b,a.yearRange[1]=parseInt(a.yearRange[1],10)||b):(a.yearRange=
Math.abs(parseInt(a.yearRange,10))||A.yearRange,100<a.yearRange&&(a.yearRange=100));return a},toString:function(b){return b=b||this._o.format,y(this._d)?this._o.toString?this._o.toString(this._d,b):f?a(this._d).format(b):this._d.toDateString():""},getMoment:function(){return f?a(this._d):null},setMoment:function(b,c){f&&a.isMoment(b)&&this.setDate(b.toDate(),c)},getDate:function(){return y(this._d)?new Date(this._d.getTime()):null},setDate:function(a,b){if(!a)return this._d=null,this._o.field&&(this._o.field.value=
"",T(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),y(a)){var c=this._o.minDate,d=this._o.maxDate;y(c)&&a<c?a=c:y(d)&&a>d&&(a=d);this._d=new Date(a.getTime());E(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),T(this._o.field,"change",{firedBy:this}));b||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(a){var b=!0;if(y(a)){if(this.calendars){b=new Date(this.calendars[0].year,
this.calendars[0].month,1);var c=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),d=a.getTime();c.setMonth(c.getMonth()+1);c.setDate(c.getDate()-1);b=d<b.getTime()||c.getTime()<d}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustDate:function(a,b){var c,d=this.getDate()||new Date;b=864E5*parseInt(b);"add"===a?c=new Date(d.valueOf()+
b):"subtract"===a&&(c=new Date(d.valueOf()-b));this.setDate(c)},adjustCalendars:function(){this.calendars[0]=U(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++)this.calendars[a]=U({month:this.calendars[0].month+a,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;
this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){a instanceof Date?(E(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()):(this._o.minDate=A.minDate,this._o.minYear=A.minYear,this._o.minMonth=A.minMonth,this._o.startRange=A.startRange);this.draw()},setMaxDate:function(a){a instanceof Date?(E(a),this._o.maxDate=a,this._o.maxYear=a.getFullYear(),this._o.maxMonth=a.getMonth()):
(this._o.maxDate=A.maxDate,this._o.maxYear=A.maxYear,this._o.maxMonth=A.maxMonth,this._o.endRange=A.endRange);this.draw()},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(a){if(this._v||a){var b=this._o;var c=b.minYear;var e=b.maxYear,h=b.minMonth,f=b.maxMonth;a="";this._y<=c&&(this._y=c,!isNaN(h)&&this._m<h&&(this._m=h));this._y>=e&&(this._y=e,!isNaN(f)&&this._m>f&&(this._m=f));c="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,
"").substr(0,2);for(e=0;e<b.numberOfMonths;e++)a+='\x3cdiv class\x3d"pika-lendar"\x3e'+N(this,e,this.calendars[e].year,this.calendars[e].month,this.calendars[0].year,c)+this.render(this.calendars[e].year,this.calendars[e].month,c)+"\x3c/div\x3e";this.el.innerHTML=a;b.bound&&"hidden"!==b.field.type&&d(function(){b.trigger.focus()},1);"function"==typeof this._o.onDraw&&this._o.onDraw(this);b.bound&&b.field.setAttribute("aria-label",b.ariaLabel)}},adjustPosition:function(){var a,c,d,e,h,f,l,n,p;if(!this._o.container){if(this.el.style.position=
"absolute",c=a=this._o.trigger,d=this.el.offsetWidth,e=this.el.offsetHeight,h=window.innerWidth||b.documentElement.clientWidth,f=window.innerHeight||b.documentElement.clientHeight,l=window.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop,n=!0,p=!0,"function"==typeof a.getBoundingClientRect){var r=(c=a.getBoundingClientRect()).left+window.pageXOffset;var t=c.bottom+window.pageYOffset}else for(r=c.offsetLeft,t=c.offsetTop+c.offsetHeight;c=c.offsetParent;)r+=c.offsetLeft,t+=c.offsetTop;(this._o.reposition&&
r+d>h||-1<this._o.position.indexOf("right")&&0<r-d+a.offsetWidth)&&(r=r-d+a.offsetWidth,n=!1);(this._o.reposition&&t+e>f+l||-1<this._o.position.indexOf("top")&&0<t-e-a.offsetHeight)&&(t=t-e-a.offsetHeight,p=!1);this.el.style.left=r+"px";this.el.style.top=t+"px";u(this.el,n?"left-aligned":"right-aligned");u(this.el,p?"bottom-aligned":"top-aligned");v(this.el,n?"right-aligned":"left-aligned");v(this.el,p?"top-aligned":"bottom-aligned")}},render:function(a,b,c){var d=this._o,e=new Date,h=H(a,b),f=(new Date(a,
b,1)).getDay(),l=[],m=[];E(e);0<d.firstDay&&0>(f-=d.firstDay)&&(f+=7);for(var n=0===b?11:b-1,p=11===b?0:b+1,q=0===b?a-1:a,r=11===b?a+1:a,t=H(q,n),u=h+f,v=u;7<v;)v-=7;u+=7-v;var z,A,B,P;v=!1;for(var D=0,I=0;D<u;D++){var C=new Date(a,b,D-f+1),J=!!y(this._d)&&G(C,this._d),M=G(C,e),N=-1!==d.events.indexOf(C.toDateString()),W=D<f||D>=h+f,R=D-f+1,L=b,S=a,T=d.startRange&&G(d.startRange,C),U=d.endRange&&G(d.endRange,C),V=d.startRange&&d.endRange&&d.startRange<C&&C<d.endRange;W&&(D<f?(R=t+R,L=n,S=q):(R-=h,
L=p,S=r));var X=J,F;!(F=d.minDate&&C<d.minDate||d.maxDate&&C>d.maxDate)&&(F=d.disableWeekends)&&(F=C.getDay(),F=0===F||6===F);C={day:R,month:L,year:S,hasEvent:N,isSelected:X,isToday:M,isDisabled:F||d.disableDayFn&&d.disableDayFn(C),isEmpty:W,isStartRange:T,isEndRange:U,isInRange:V,showDaysInNextAndPreviousMonths:d.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:d.enableSelectionDaysInNextAndPreviousMonths};d.pickWholeWeek&&J&&(v=!0);m.push(Q(C));7==++I&&(d.showWeekNumber&&
m.unshift((z=D-f,A=b,B=a,P=void 0,P=new Date(B,0,1),'\x3ctd class\x3d"pika-week"\x3e'+Math.ceil(((new Date(B,A,z)-P)/864E5+P.getDay()+1)/7)+"\x3c/td\x3e")),l.push(x(m,d.isRTL,d.pickWholeWeek,v)),m=[],I=0,v=!1)}b=[];d.showWeekNumber&&b.push("\x3cth\x3e\x3c/th\x3e");for(a=0;7>a;a++)b.push('\x3cth scope\x3d"col"\x3e\x3cabbr title\x3d"'+Z(d,a)+'"\x3e'+Z(d,a,!0)+"\x3c/abbr\x3e\x3c/th\x3e");d="\x3cthead\x3e\x3ctr\x3e"+(d.isRTL?b.reverse():b).join("")+"\x3c/tr\x3e\x3c/thead\x3e";return'\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"pika-table" role\x3d"grid" aria-labelledby\x3d"'+
c+'"\x3e'+d+("\x3ctbody\x3e"+l.join("")+"\x3c/tbody\x3e\x3c/table\x3e")},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),v(this.el,"is-hidden"),this._o.bound&&(h(b,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var a=this._v;!1!==a&&(this._o.bound&&l(b,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",u(this.el,"is-hidden"),
this._v=!1,void 0!==a&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var a=this._o;this.hide();l(this.el,"mousedown",this._onMouseDown,!0);l(this.el,"touchend",this._onMouseDown,!0);l(this.el,"change",this._onChange);a.keyboardInput&&l(b,"keydown",this._onKeyChange);a.field&&(l(a.field,"change",this._onInputChange),a.bound&&(l(a.trigger,"click",this._onInputClick),l(a.trigger,"focus",this._onInputFocus),l(a.trigger,"blur",this._onInputBlur)));this.el.parentNode&&
this.el.parentNode.removeChild(this.el)}},I})},function(h,l){function a(a){a=Error("Cannot find module '"+a+"'");throw a.code="MODULE_NOT_FOUND",a;}a.keys=function(){return[]};a.resolve=a;h.exports=a;a.id=29},,,,,,function(h,l,a){function p(){this.setAttribute("aria-pressed","true"===this.getAttribute("aria-pressed")?"false":"true");this.setAttribute("aria-expanded","true"===this.getAttribute("aria-expanded")?"false":"true")}function u(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||
!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function f(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function e(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function c(a,b){var k,g=this;a.forEach(function(a){var b=g.sections.find(function(b){return b.identifier===
a.target.id});0<a.intersectionRatio?g.visibleElements.push(b):(b=g.visibleElements.indexOf(b),-1<b&&g.visibleElements.splice(b,1))});0!==this.visibleElements.length&&(k=1===this.visibleElements.length?this.visibleElements[0]:this.visibleElements.reduce(function(a,b){return a.index<b.index?a:b}),this.sections.map(function(a){a.identifier===k.identifier?a.navItem.classList.add("content-nav__item--selected"):a.navItem.classList.remove("content-nav__item--selected")}))}function b(a){a=a[0];1>a.intersectionRatio&&
0>a.boundingClientRect.y?this.elem.classList.add("".concat(this.className,"--sticky")):this.elem.classList.remove("".concat(this.className,"--sticky"))}function d(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function n(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function z(a,b){for(var k=
0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function r(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function B(a,b){var k="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!k){if(Array.isArray(a)||(k=function(a,b){if(a){if("string"==typeof a)return v(a,b);var k=Object.prototype.toString.call(a).slice(8,
-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return v(a,b)}}(a))||b&&a&&"number"==typeof a.length){k&&(a=k);var g=0;b=function(){};return{s:b,n:function(){return g>=a.length?{done:!0}:{done:!1,value:a[g++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var c,d=!0,sa=!1;return{s:function(){k=k.call(a)},n:function(){var a=k.next();return d=a.done,a},e:function(a){sa=!0;c=a},f:function(){try{d||null==k.return||k.return()}finally{if(sa)throw c;}}}}function v(a,b){(null==b||b>a.length)&&(b=a.length);for(var k=0,g=Array(b);k<b;k++)g[k]=a[k];return g}function t(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function y(a,b){for(var k=0;k<b.length;k++){var g=
b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function H(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function E(a){var b;(b=function(a){if(Array.isArray(a))return G(a)}(a))||(b="undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"]?Array.from(a):void 0);if(!(a=b||function(a,b){if(a){if("string"==typeof a)return G(a,
b);var k=Object.prototype.toString.call(a).slice(8,-1);"Object"===k&&a.constructor&&(k=a.constructor.name);if("Map"===k||"Set"===k)return Array.from(a);if("Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return G(a,b)}}(a)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function G(a,b){(null==b||b>a.length)&&(b=a.length);for(var k=0,g=Array(b);k<b;k++)g[k]=a[k];
return g}function M(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function T(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function U(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,
g)}}function A(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}function Z(a,b){for(var k=0;k<b.length;k++){var g=b[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}a.r(l);h=a(4);var Q=a(0),x=a(1),N=[],I=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ia();a=a.selector;return N=Array.from(document.querySelectorAll("".concat(void 0===
a?"":a,'.u-accordion__tab [type\x3d"checkbox"]')))},ia=function(){var a=document.querySelectorAll('[data-js\x3d"accordion-item"]');if(0<a.length)for(var b=0,k=a.length;b<k;b++)a[b].addEventListener("click",p)};var q={init:I,closeAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:N).forEach(function(a){a.checked=!1})},openAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:N).forEach(function(a){a.checked=!0})},selectItem:ia};Q.default.create("tmg.utils.accordion");
tmg.utils.accordion=q;x.a.subscribe({topic:"tmg.page.ready",func:I,runIfAlreadyPublished:!0});I=a(2);var m=a(5),J=a(22),w=a(17),O=a(9),ca=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({identifier:b.counter.getAttribute("data-counter-id"),max:b.counter.querySelector("[data-counter-max]").getAttribute("data-counter-max"),min:0,minusSelector:"[data-counter-minus]",plusSelector:"[data-counter-plus]",disabledSelector:"counter__button--disabled"},
b);this.event=document.createEvent("HTMLEvents");this.input=document.getElementById(this.params.identifier);this.minusBtn=this.params.counter.querySelector(this.params.minusSelector);this.plusBtn=this.params.counter.querySelector(this.params.plusSelector)}var b;return b=[{key:"init",value:function(){this.input&&(this.bindPlusCounter(),this.bindMinusCounter(),this.event.initEvent("change",!1,!0))}},{key:"bindPlusCounter",value:function(){var a=this;this.plusBtn.addEventListener("click",function(b){b.preventDefault();
a.addCounter()})}},{key:"bindMinusCounter",value:function(){var a=this;this.minusBtn.addEventListener("click",function(b){b.preventDefault();a.minusCounter()})}},{key:"minusCounter",value:function(){var a=parseInt(this.input.value,10)-1;this.updateValue(a,this.minusBtn,a<=this.params.min);this.plusBtn.classList.remove(this.params.disabledSelector)}},{key:"addCounter",value:function(){var a=parseInt(this.input.value,10)+1;this.updateValue(a,this.plusBtn,a>=this.params.max);this.minusBtn.classList.remove(this.params.disabledSelector)}},
{key:"updateValue",value:function(a,b){var k=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!b.classList.contains(this.params.disabledSelector)&&0<=a&&(this.input.value=a,this.input.dispatchEvent(this.event));b.classList.toggle(this.params.disabledSelector,k)}}],u(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-counter-id]").forEach(function(a){a&&(new ca({counter:a})).init()})},runIfAlreadyPublished:!0});var aa=a(28),ja=a.n(aa),
ka=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({occupancyContainer:'[data-js\x3d"calendar-availability__people-mix"]',occupancyInput:'[data-js\x3d"calendar-availability__occupancy"]',childSelector:'[data-js\x3d"calendar-availability__child-ages"]',childTarget:'[data-js\x3d"calendar-availability__child-ages-target"]',datepicker:"[data-datepicker]",clearPicker:"[data-datepicker-clear]",datesSelector:"[data-calendar-dates]",
months:"Jan Feb Mar Apr May June July Aug Sep Oct Nov Dec".split(" "),rooms:1,adults:2,children:0,childAges:{},checkInDate:new Date,checkOutDate:new Date},b);this.hasCalendar=this.params.partnerLinks&&0<this.params.partnerLinks.length;this.availabilityBanner=document.getElementById("calendar-availability-banner");this.hasCalendar&&this.setCalendarElements()}var b;return b=[{key:"init",value:function(){var a=this;this.hasCalendar&&(this.occupancyContainer.querySelectorAll("input").forEach(function(b){a.bindOccupancyInput(b);
a.setOccupancyToLocal(b)}),this.updateOccupancyValue(),this.buildDatePickers(),this.setTransactionId());this.params.bookingElement&&(this.observer=new IntersectionObserver(this.observerCallback.bind(this),{threshold:[.9,1]}),this.observer.observe(this.params.bookingElement))}},{key:"observerCallback",value:function(a){var b=a[0].boundingClientRect.y?0>a[0].boundingClientRect.y:!a[0].isIntersecting;1>a[0].intersectionRatio&&b?this.availabilityBanner.classList.remove("calendar-availability__banner--hidden"):
this.availabilityBanner.classList.add("calendar-availability__banner--hidden")}},{key:"setCalendarElements",value:function(){this.datepickerContainer=document.querySelector(this.params.datepicker);this.datepickerClear=document.querySelector(this.params.clearPicker);this.checkInInputs=document.querySelectorAll("[data-calendar-checkin]");this.checkOutInputs=document.querySelectorAll("[data-calendar-checkout]");this.childContainer=document.querySelector(this.params.childTarget);this.childWrapper=document.querySelector(this.params.childSelector);
this.occupancyInput=document.querySelector(this.params.occupancyInput);this.occupancyContainer=document.querySelector(this.params.occupancyContainer);this.product=document.querySelector('[data-js\x3d"package-json"]')?JSON.parse(document.querySelector('[data-js\x3d"package-json"]').dataset.options):{};this.providerProduct=this.product.hotel}},{key:"toggleRequiredValidation",value:function(a,b){a.forEach(function(a){b?a.setAttribute("data-required",""):a.removeAttribute("data-required")})}},{key:"setOccupancyToLocal",
value:function(a){a.value=localStorage.getItem(a.id)||a.value;this.updateOccupancyValues(a,!0)}},{key:"bindOccupancyInput",value:function(a){var b=this;a.addEventListener("change",function(){b.updateOccupancyValues(a)})}},{key:"updateOccupancyValues",value:function(a,b){switch(localStorage.setItem(a.id,a.value),a.id){case "numberOfRooms":this.params.rooms=parseInt(a.value,10);break;case "numberOfAdults":this.params.adults=parseInt(a.value,10);break;case "numberOfChildren":this.updateChildren(a,b);
this.params.children=parseInt(a.value,10);break;default:this.storeChildAges(a)}this.updateOccupancyValue();this.updateBookingReferences()}},{key:"updateOccupancyValue",value:function(){if(this.occupancyInput){var a="".concat(this.params.rooms," room(s), ").concat(this.params.adults," adult(s), ").concat(this.params.children," child(ren)");this.occupancyInput.value=a}}},{key:"storeChildAges",value:function(a){this.params.childAges[a.id]=a.value}},{key:"removeChildAge",value:function(a){delete this.params.childAges[a.id];
localStorage.removeItem(a.id)}},{key:"updateChildren",value:function(a,b){if(b)for(b=1;b<=a.value;b++)this.addChildElement(b,localStorage.getItem("child-".concat(b)));else this.params.children<parseInt(a.value,10)?this.addChildElement(a.value):this.removeChildElement(this.params.children)}},{key:"addChildElement",value:function(a,b){1===parseInt(a,10)&&(this.childWrapper.style.display="block");var k=document.createElement("div");k.classList.add("calendar-people__occupancy","u-separator-bottom");k.setAttribute("data-child-id",
a);k.innerHTML='\n\t\t\x3cdiv class\x3d"calendar-availability__occupany-title"\x3e\n\t\t\t\x3cspan class\x3d"calendar-people__mix-title"\x3eChild '.concat(a,'\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"calendar-people__mix calendar-availability__counter"\x3e\n\t\t\t\x3cdiv class\x3d"counter" data-counter-id\x3d"child-').concat(a,'"\x3e\n\t\t\t\t\x3ca class\x3d"counter__button" data-counter-minus\x3e\n\t\t\t\t\t\x3cspan class\x3d"counter__symbol counter__minus"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/a\x3e\n\t\t\t\t\x3cinput class\x3d"counter__input" name\x3d"child-').concat(a,
'" id\x3d"child-').concat(a,'" type\x3d"text" value\x3d"1"\x3e\n\t\t\t\t\x3ca class\x3d"counter__button" data-counter-plus data-counter-max\x3d"17"\x3e\n\t\t\t\t\t\x3cspan class\x3d"counter__symbol"\x3e+\x3c/span\x3e\n\t\t\t\t\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e');a=k.querySelector("input");this.childContainer.appendChild(k);this.bindOccupancyInput(a);a.value=b||0;this.storeChildAges(a);(new ca({counter:k.querySelector("[data-counter-id]")})).init()}},{key:"removeChildElement",value:function(a){1===
parseInt(a,10)&&(this.childWrapper.style.display="none");a=this.childContainer.querySelector('[data-child-id\x3d"'.concat(a,'"]'));this.childContainer.removeChild(a);a=a.querySelector("input");this.removeChildAge(a)}},{key:"buildDatePickers",value:function(){var a=this;if(this.datepickerContainer){var b=new Date;b.setHours(0,0,0,0);this.checkOutPicker=new ja.a({bound:!1,container:this.datepickerContainer,field:this.checkOutInputs[0],firstDay:1,theme:"date-picker__wrapper",minDate:b,onSelect:function(){a.updateCheckOutDate(a.checkOutPicker.getDate())}});
this.checkInPicker=new ja.a({bound:!1,container:this.datepickerContainer,field:this.checkInInputs[0],firstDay:1,minDate:b,theme:"date-picker__wrapper",onSelect:function(){a.updateCheckInDate(a.checkInPicker.getDate())}});var c=new Date(localStorage.getItem("checkInDate")||b);c<=b&&c.setDate(b.getDate()+1);var d=new Date(localStorage.getItem("checkOutDate")||b);d<=c&&d.setDate(b.getDate()+3);this.checkInPicker.setDate(c);this.checkOutPicker.setDate(d);this.bindDatePickerMoveEvent();this.bindDatePickerClear()}}},
{key:"updateCheckInDate",value:function(a){var b=this;this.params.checkInDate=a;localStorage.setItem("checkInDate",a);this.checkInInputs.forEach(function(a){a.value=b.buildDateString(b.params.checkInDate)});this.checkInPicker.hide();this.checkOutPicker.setMinDate(this.params.checkInDate);this.checkOutPicker.setStartRange(this.params.checkInDate);this.checkOutPicker.gotoDate(this.params.checkInDate);this.setEndRange(this.params.checkInDate);this.checkOutPicker.show();this.toggleRequiredValidation(this.checkInInputs,
!a)}},{key:"updateCheckOutDate",value:function(a){var b=this;this.params.checkOutDate=a;localStorage.setItem("checkOutDate",a);this.checkOutInputs.forEach(function(a){a.value=b.buildDateString(b.params.checkOutDate)});this.setEndRange(this.params.checkOutDate);this.toggleRequiredValidation(this.checkOutInputs,!a);this.updateBookingReferences();a&&(document.getElementById("modal-dropdown-datepicker").classList.add("modal-dropdown--hidden"),document.querySelector("[data-modal-dropdown-close]").classList.add("modal-dropdown--hidden"))}},
{key:"buildDateString",value:function(a){return a?"".concat(a.getDate()," ").concat(this.params.months[a.getMonth()]," ").concat(a.getFullYear()):null}},{key:"bindDatePickerMoveEvent",value:function(){var a=this,b=this.datepickerContainer.parentElement;this.target=!1;b.addEventListener("mousemove",function(b){b.target.classList.contains("pika-button")?(a.target=!0,a.setEndRangeToButton(b)):!0===a.target&&(a.target=!1,a.setEndRange(a.params.checkOutDate))})}},{key:"bindDatePickerClear",value:function(){var a=
this;this.datepickerClear.addEventListener("click",function(b){b.preventDefault();a.checkOutPicker.setDate(null);a.updateCheckOutDate(null);a.checkInPicker.setDate(null);a.updateCheckInDate(null);a.checkOutPicker.hide();a.checkInPicker.show()})}},{key:"setEndRangeToButton",value:function(a){a=a.target;a=new Date(a.getAttribute("data-pika-year"),a.getAttribute("data-pika-month"),a.getAttribute("data-pika-day"));this.setEndRange(a)}},{key:"setEndRange",value:function(a){a&&(this.checkOutPicker.setEndRange(a),
this.checkOutPicker.draw())}},{key:"setTransactionId",value:function(){var a=this;(new Promise(function(b,k){b(a.params.transactionId=a.generateTransactionId());k(Error("Failed to generate transactionID"))})).then(this.addIDToDataLayer(this.params.transactionId)).then(this.updateBookingReferences())}},{key:"generateTransactionId",value:function(){for(var a=(new Date).getTime(),b=[],c=0;32>c;c++){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);b.push(d.toString(16))}return"booking-".concat(b.join(""))}},
{key:"addIDToDataLayer",value:function(a){window.dataLayer.bookingTransactionId="".concat(a)}},{key:"buildBookingCta",value:function(){var a=this;if(!this.providerProduct||!this.providerProduct.source)return!1;var b=this.providerProduct.baseUrl.split(";")[0],c=Object.keys(this.params.childAges).map(function(b){return a.params.childAges[b]}),d=this.params.checkInDate?"".concat(this.params.checkInDate.getFullYear(),"-").concat(this.params.checkInDate.getMonth()+1,"-").concat(this.params.checkInDate.getDate()):
"",e=this.params.checkOutDate?"".concat(this.params.checkOutDate.getFullYear(),"-").concat(this.params.checkOutDate.getMonth()+1,"-").concat(this.params.checkOutDate.getDate()):"",f="";"Booking.com"===this.providerProduct.source?(c=c.length?"\x26age\x3d".concat(c.join("\x26age\x3d")):"",f="".concat(f,";checkin\x3d").concat(d,";checkout\x3d").concat(e,";no_rooms\x3d").concat(this.params.rooms,";group_adults\x3d").concat(this.params.adults,";group_children\x3d").concat(this.params.children+c)):"Expedia"===
this.providerProduct.source&&(c=c.length?"\x26".concat(c.join("\x26")):"",f="".concat(f).concat(d,"/").concat(e,"?FromAirport\x3d").concat(this.params.airport,"\x26Destination\x3d").concat(this.params.destination,"\x26NumRoom\x3d").concat(this.params.rooms,"\x26NumAdult\x3d").concat(this.params.adults,"\x26numChild\x3d").concat(this.params.children).concat(c,"\x26HotelID\x3d").concat(this.params.hotelId,"\x26siteid\x3d").concat(this.params.telegraphSiteId));return this.params.transactionId&&("Booking.com"===
this.providerProduct.source?b=b.concat(";label\x3d".concat(this.params.transactionId)):"Expedia"===this.providerProduct.source&&b.replace("TELEGRAPH_REF",this.params.transactionId)),b.concat(f)}},{key:"updateBookingReferences",value:function(){var a=this.buildBookingCta();a&&this.params.partnerLinks.forEach(function(b){b.href=a})}}],f(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector("[data-booking-availability]"),b=document.querySelectorAll('[data-js\x3d"calendar-availability"]');
a&&(new ka({partnerLinks:b,bookingElement:a})).init()},runIfAlreadyPublished:!0});var la=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.className="content-nav";this.elem=b;this.visibleElements=[];this.isOpen=this.elem.classList.contains("".concat(this.className,"--open"));this.sections=[];this.toggle=this.toggle.bind(this);this.observerSticky=this.observer=null}var d;return d=[{key:"init",value:function(){this.elem.addEventListener("click",
this.toggle);this.createObservers();this.addAnchorItems()}},{key:"createObservers",value:function(){this.observer=new IntersectionObserver(c.bind(this),{root:null,rootMargin:"-60px"});this.observerSticky=new IntersectionObserver(b.bind(this),{threshold:[.9,1]});this.observerSticky.observe(this.elem)}},{key:"addAnchorItems",value:function(){var a=this;Array.from(this.elem.getElementsByTagName("li")).forEach(function(b,c){a.addAnchorItem(b,c)})}},{key:"addAnchorItem",value:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,c=a.getElementsByTagName("a");0!==c.length&&(c=c[0].dataset.navitemId,b={identifier:c,index:b,navItem:a,target:document.getElementById(c),visible:!1},b.target&&(this.sections.push(b),this.observer.observe(b.target)))}},{key:"toggle",value:function(){(this.isOpen=!this.isOpen)?this.elem.classList.add("".concat(this.className,"--open")):this.elem.classList.remove("".concat(this.className,"--open"))}}],e(a.prototype,d),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=
document.querySelector('[data-js\x3d"content-nav"]');a&&(new la(a)).init()},runIfAlreadyPublished:!0});var ma=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.elementWidth=this.element.offsetWidth;this.thumbnailsContainer=this.element.querySelector('[data-js\x3d"carousel__thumbnails-container"]');this.itemViewport=this.element.querySelector('[data-js\x3d"carousel__viewport"]');this.itemWrapper=this.element.querySelector('[data-js\x3d"carousel__items"]');
this.item=Array.from(this.element.querySelectorAll('[data-js\x3d"carousel__item"]'));this.itemCount=this.item.length;this.controlForPrevious=this.element.querySelector('[data-js\x3d"carousel__control--previous"]');this.controlForNext=this.element.querySelector('[data-js\x3d"carousel__control--next"]');this.currentSlideIndex=0}var b;return b=[{key:"init",value:function(){1<this.itemCount&&(this.setItemSizes(),this.bindControls(),this.showControls(),this.updateCurrentThumbnail(this.currentSlideIndex));
this.setItemSizesOnResize()}},{key:"setItemSizesOnResize",value:function(){var a=this;["orientationchange","resize"].forEach(function(b){window.addEventListener(b,function(){a.elementWidth=a.element.offsetWidth;a.setItemSizes()},!1)})}},{key:"setItemSizes",value:function(){this.itemViewport.style.width=this.elementWidth+"px";this.itemWrapper.style.width=this.elementWidth*this.itemCount+"px";for(var a=0,b=this.itemCount;a<b;a++)this.item[a].style.width=this.elementWidth+"px"}},{key:"bindControls",
value:function(){this.controlForPrevious.addEventListener("click",this.goToPreviousSlide.bind(this));this.controlForNext.addEventListener("click",this.goToNextSlide.bind(this));this.thumbnailsContainer&&this.thumbnailsContainer.addEventListener("click",this.goToSelectedSlide.bind(this))}},{key:"showControls",value:function(){this.controlForPrevious.classList.add("carousel__control--visible");this.controlForNext.classList.add("carousel__control--visible")}},{key:"showSlide",value:function(a){this.itemWrapper.style.left=
-this.elementWidth*a+"px"}},{key:"goToPreviousSlide",value:function(){0>=this.currentSlideIndex||(this.currentSlideIndex--,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToNextSlide",value:function(){this.currentSlideIndex>=this.itemCount-1||(this.currentSlideIndex++,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToSelectedSlide",value:function(a){if(a=a.target.closest("li"))a=a.dataset.thumbnailId,
this.currentSlideIndex=0<a?a-1:1,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex)}},{key:"updateCurrentThumbnail",value:function(a){if(this.thumbnailsContainer){var b=this.thumbnailsContainer.getElementsByClassName("carousel__thumbnail--is-active"),c=Array.from(this.thumbnailsContainer.querySelectorAll('[data-js\x3d"carousel__thumbnail"]'));0<b.length&&(this.prevCurrentIndex=b[0].dataset.thumbnailId,b[0].classList.remove("carousel__thumbnail--is-active"));
c.forEach(function(b,c){c!==a||b.classList.contains("carousel__thumbnail--is-active")||b.classList.add("carousel__thumbnail--is-active")})}}}],d(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=Array.from(document.querySelectorAll('[data-js\x3d"carousel"]'));0<a.length&&a.forEach(function(a){(new ma(a)).init()})},runIfAlreadyPublished:!0});var Aa={className:"overlay-continuation",overlayTimeout:5E3},na=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=Object.assign(Aa,b);this.overlayClickElem=document.querySelector('[data-js\x3d"'.concat(this.options.className,'__handler"]'));this.overlayContainer=document.querySelector('[data-js\x3d"'.concat(this.options.className,'"]'));this.overlayClose=document.querySelector('[data-js\x3d"'.concat(this.options.className,'__close"]'));this.overlayTimeout=null;this.overlayClickElem&&(this.overlayAnchor=
this.overlayClickElem.href)}var b;return b=[{key:"hasAllHtmlElements",value:function(){return null!==this.overlayClickElem&&null!==this.overlayContainer&&null!==this.overlayClose}},{key:"init",value:function(){var a=this;this.hasAllHtmlElements()&&(this.overlayClickElem.addEventListener("click",function(b){b.preventDefault();a.showOverlay()},!1),this.overlayClose.addEventListener("click",function(){clearTimeout(a.overlayTimeout);a.overlayContainer.classList.remove("".concat(a.options.className,"__visible"))}))}},
{key:"showOverlay",value:function(){var a=this;void 0!==this.overlayContainer&&this.overlayContainer.classList.add("".concat(this.options.className,"__visible"));this.overlayTimeout=setTimeout(function(){a.closeAndRedirect()},this.options.overlayTimeout)}},{key:"closeAndRedirect",value:function(){window.location.href=this.overlayAnchor}}],n(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){(new na).init()},runIfAlreadyPublished:!0});var K,da,oa,pa,Ba={overlayContinuation:na},
ea=!1,P=!1,D=[],ba=function(){0<Array.from(document.querySelectorAll('[data-js\x3d"navigation"]')).length&&(D=q.init({selector:"".concat('[data-js\x3d"navigation"]'," ")}),K=document.querySelector('[data-js\x3d"navigation"]'),da=K.querySelector(".navigation__menu-control"),pa=K.querySelector(".navigation__item--more .navigation__label-text"),oa=K.querySelector(".navigation__menu--main"),K.setAttribute("data-js",K.getAttribute("data-js").replace("navigation","")),C(),K.classList.add("navigation--js-active"))},
C=function(){da.addEventListener("click",function(){ha();q.closeAll(D);event.preventDefault()});pa.addEventListener("click",function(a){"none"===window.getComputedStyle(da).display&&(ha(),a.preventDefault())});oa.addEventListener("mouseenter",function(){P=!1});K.addEventListener("mouseleave",function(a){P=!0;var b=setTimeout(function(){P&&fa();clearTimeout(b)},300)});document.addEventListener("keyup",function(a){"Escape"!==a.key&&27!==a.keyCode||fa()})},fa=function(){K.classList.remove("navigation--opened");
q.closeAll(D);ea=!1},ha=function(){ea?fa():(K.classList.add("navigation--opened"),q.openAll(D),ea=!0)};aa={initializeAfterContentExists:ba,toggleExpandedMenu:ha};Q.default.create("tmg.components.navigation");window.tmg.components.navigation=aa;x.a.subscribe({topic:"tmg.page.ready",func:ba,runIfAlreadyPublished:!0});var Ca=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b}var b;return b=[{key:"init",value:function(){this.hideOptions();
this.bindEvents()}},{key:"hideOptions",value:function(){this.element.classList.remove("product-sort--visible","product-sort--no-js")}},{key:"bindEvents",value:function(){var a=this;this.element.addEventListener("click",function(){a.element.classList.toggle("product-sort--visible")})}}],z(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector('[data-js\x3d"product-sort"]');a&&(new Ca(a)).init()},runIfAlreadyPublished:!0});var W=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({closeAttribute:"data-modal-dropdown-close",heading:b.modal.getAttribute("data-modal-dropdown"),id:b.modal.id,hidden:"modal-dropdown--hidden",save:"Save"},b);this.createModalBackground();this.createModalHeading();this.createModalSaveButton()}var b;return b=[{key:"init",value:function(){this.bindCloseButtons();this.bindOpenButtons()}},{key:"bindCloseButtons",value:function(){var a=this;document.querySelectorAll("[".concat(this.params.closeAttribute,
"]")).forEach(function(b){b.addEventListener("click",function(b){b.preventDefault();a.toggleModalDropdown(!0)})})}},{key:"bindOpenButtons",value:function(){var a=this;document.querySelectorAll("[data-modal-dropdown-open\x3d".concat(this.params.id,"]")).forEach(function(b){b.addEventListener("click",function(){a.toggleModalDropdown()})})}},{key:"toggleModalDropdown",value:function(a){this.params.modal.classList.toggle(this.params.hidden,a);this.background.classList.toggle(this.params.hidden,a)}},{key:"createModalBackground",
value:function(){var a=this;this.background=document.createElement("div");this.background.classList.add("modal-dropdown__background",this.params.hidden);this.background.setAttribute(this.params.closeAttribute,"");this.background.addEventListener("click",function(){a.toggleModalDropdown(!0)});this.params.modal.parentNode.insertBefore(this.background,this.params.modal.parentNode.childNodes[0])}},{key:"createModalHeading",value:function(){var a=document.createElement("h4");a.classList.add("modal-dropdown__heading",
"calendar-availability__hidden");a.setAttribute(this.params.closeAttribute,"");a.innerHTML=this.params.heading;this.params.modal.insertBefore(a,this.params.modal.firstChild)}},{key:"createModalSaveButton",value:function(){var a=document.createElement("a");a.classList.add("modal-dropdown__button","calendar-availability__hidden","call-to-action__link","call-to-action__link--full-width");a.setAttribute(this.params.closeAttribute,"");a.innerHTML=this.params.save;this.params.modal.appendChild(a)}}],r(a.prototype,
b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-modal-dropdown]").forEach(function(a){(new W({modal:a})).init()})},runIfAlreadyPublished:!0});var R=a(10);ba=a(11);var L=a(3),S=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({icidSelector:"[data-icid]",indexSelector:"data-track-index",destinationSelector:"data-track-destination",storageName:"tmgComponentTracking",trackingItems:[{type:"txt",
selector:"[data-track-txt]"},{type:"block",selector:"[data-track-block]"},{type:"img",selector:"[data-track-img]"}],wrapperSelector:"[data-track-wrapper]"},b)}var b;return b=[{key:"init",value:function(){var a=this;this.params.trackingItems.map(function(a){return a.selector}).forEach(function(b){a.setClickListener(b)});document.querySelectorAll(this.params.icidSelector).forEach(function(b){a.setICID(b)})}},{key:"setClickListener",value:function(a){var b=this;document.querySelectorAll(a).forEach(function(c){c.addEventListener("click",
function(){b.setLocalStorage(a,c)})})}},{key:"setLocalStorage",value:function(a,b){a=this.lookupTrackingItem(a);var c=this.getComponentName(b),k=b.getAttribute(this.params.indexSelector)||null;b=b.getAttribute(this.params.destinationSelector)||b.textContent;localStorage.setItem(this.params.storageName,JSON.stringify({componentName:c?this.cleanString(c):null,destination:this.cleanString(b),linkType:a?a.type:"",pageOfUse:this.getCurrentPagePath(),index:k}))}},{key:"getComponentName",value:function(a){if(a=
a.closest(this.params.wrapperSelector))return a.getAttribute(this.params.wrapperSelector.replace("[","").replace("]",""))}},{key:"getCurrentPagePath",value:function(){return document.location.pathname.replace(/\//g," ").trim().replace(/\s/g,"_")||"portal"}},{key:"lookupTrackingItem",value:function(a){var b,c=B(this.params.trackingItems);try{for(c.s();!(b=c.n()).done;){var k=b.value;if(k.selector===a)return k}}catch(Da){c.e(Da)}finally{c.f()}}},{key:"cleanString",value:function(a){return a.trim().replace(/[,\s]+/g,
"-").toLowerCase()}},{key:"getICIDValue",value:function(a){a=Object.assign({brand:L.default.getChannel(),product:"generic",mediaType:"generic",contentType:L.default.getContentType(),contentLocation:"generic"},a);return"".concat(a.brand,"_").concat(a.product,"_").concat(a.mediaType,"_").concat(a.contentType,"_").concat(a.contentLocation)}},{key:"setICID",value:function(a){var b=this.getICIDValue(m.default.tryParse(a.dataset.icid)),c=a.getAttribute("href");c&&a.setAttribute("href",O.default.setQuerystringParam(c,
"ICID",b))}}],t(a.prototype,b),a}();["tmg.page.ready","tmg.lightbox.ready"].forEach(function(a){x.a.subscribe({topic:a,func:function(){(new S).init()},runIfAlreadyPublished:!0})});var qa=a(8),ra=function(a){(a=/.*social-share_(\w*)/i.exec(a.target.className))&&0<a.length&&"_satellite"in window&&(_satellite.setVar("shareprovider",a[1]),_satellite.track("share"))},V=function(){var a=document.querySelectorAll("[class*\x3d'social-share_']");[].slice.call(a).forEach(function(a){a.addEventListener("click",
ra)})};x.a.subscribe({topic:"tmg.page.ready",func:V,runIfAlreadyPublished:!0});V={trackSocialShare:ra,attachSocialShareClicks:V};var X=a(6),F=function(){var a,b=document.body,c=".".concat("viewport--breakpoint");return!(!window.getComputedStyle||!b)&&((a=document.querySelector(c))||((a=document.createElement("div")).classList.add("viewport--breakpoint"),b.appendChild(a)),window.getComputedStyle(a,"::after").content.replace(/[^a-z]/gi,"")||"xs")},Y=function(a){return void 0===a&&(a=!0),a&&0<=document.documentElement.clientWidth?
document.documentElement.clientWidth:a&&document.body&&0<=document.body.clientWidth?document.body.clientWidth:0<=window.innerWidth?window.innerWidth:0},ta={getBreakpointLabel:F,getWidth:Y};Q.default.create("tmg.utils.viewport");tmg.utils.viewport=ta;tmg.getMediaQuery=F;tmg.getViewportWidth=Y;Q=a(24);F=a(25);a=a(26);Y=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({triggerSelector:'[data-js\x3d"caption-trigger"]',
imageSelector:'[data-js\x3d"article-body-image"]',captionSelector:'[data-js\x3d"caption"]',toggleClassName:"e-caption--visible",selectedClassName:"e-caption-trigger--selected"},b);this.captionTrigger=document.querySelectorAll(this.params.triggerSelector);this.captionTrigger.length&&this.activateCaptionTrigger()}var b;return b=[{key:"activateCaptionTrigger",value:function(){var a=this;this.captionTrigger.forEach(function(b){b.addEventListener("click",function(){a.toggleCaption(b)})})}},{key:"toggleCaption",
value:function(a){var b=a.closest(this.params.imageSelector).querySelector(this.params.captionSelector);b.classList.toggle(this.params.toggleClassName);this.toggleTriggerStyle(a);this.updateAriaLabel(a,b)}},{key:"updateAriaLabel",value:function(a,b){a.setAttribute("aria-label",b.classList.contains(this.params.toggleClassName)?a.dataset.ariaClose:a.dataset.ariaOpen)}},{key:"toggleTriggerStyle",value:function(a){a.classList.toggle(this.params.selectedClassName)}}],y(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",
func:new Y});var ua=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.userId=X.default.getProfile().pId;this.key="fb6cjraf9cejut2a";this.loadScript("liftigniter")}var b;return b=[{key:"loadScript",value:function(a){var b=this,c=new qa.default;window.$igniter_var=a;window[a]=window[a]||function(){(window[a].q=window[a].q||[]).push(arguments)};window[a].l=1*new Date;c.injectScript("//cdn.petametrics.com/".concat(this.key,".js")).then(function(){b.initialise();
x.a.publish({topic:"tmg.liftigniter.ready"})})}},{key:"getConfiguration",value:function(){return window.liftIgniterPageKeywords=tmg.page.getKeywords(),{inventory:{features:[this.getFeature("pageType","tmg.page.getPageType()"),this.getFeature("businessSegment","tmg.page.getBusinessSegment()"),this.getFeature("channel","tmg.page.getChannel()"),this.getFeature("keywords","window.liftIgniterPageKeywords"),this.getFeature("displayDate","tmg.page.getPublishDate()")]}}}},{key:"getFeature",value:function(a,
b){return{name:a,type:"var",variable:b}}},{key:"initialise",value:function(){liftigniter("init",this.key,{config:this.getConfiguration()});X.default.isLoggedIn()&&liftigniter("setUserId",this.userId);liftigniter("send","pageview")}}],H(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){L.default.isAuthor()||new ua},runIfAlreadyPublished:!0});var va=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.params=
c;this.register()}var b;return b=[{key:"register",value:function(){liftigniter("setRequestFields",["title","url","image"]);liftigniter("register",{max:this.params.maxStories,widget:this.params.widget,callback:this.parseData.bind(this)})}},{key:"parseData",value:function(a){var b="column"===this.params.layout;a.items.forEach(function(a,c){a.isRow=!b;a.image&&(a.image=a.image.replace("?impolicy\x3dlogo-overlay","?impolicy\x3dutilities-thumbnail"),a.image=a.image.replace("?imwidth\x3d1200","?impolicy\x3dutilities-thumbnail"),
a.image=a.image.replace("https://www.telegraph.co.uk",""));a.url&&(a.url=a.url.replace("https://www.telegraph.co.uk",""));a.className="u-separator-top";a.index=c;b&&(a.className="card--feature-switch grid-col grid-col-12 grid-col-sm-4 grid-col-md-2",a.image&&(a.image=a.image.replace("?impolicy\x3dutilities-thumbnail","?imwidth\x3d210")))});this.render(a)}},{key:"render",value:function(a){var b='\n\t\t\t{{#items}}\n\t\t\t\t\x3carticle class\x3d"card u-clickable-area {{className}}" data-card data-track-wrapper\x3d"'.concat(this.params.trackingName,
'"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"card__content"\x3e\n\t\t\t\t\t\t\x3ch3 class\x3d"list-headline u-heading-7"\x3e\n\t\t\t\t\t\t\t\x3ca class\x3d"list-headline__link u-clickable-area__link" href\x3d"{{url}}" data-track-txt data-track-index\x3d"{{index}}"\x3e\n\t\t\t\t\t\t\t\t\x3cspan class\x3d"list-headline__text"\x3e\n\t\t\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\t\x3c/h3\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t{{#image}}\n\t\t\t\t\t\t\x3cdiv class\x3d"card__thumbnail {{#isRow}}card__thumbnail--square{{/isRow}} u-order-first"\x3e\n\t\t\t\t\t\t\t\x3cfigure class\x3d"card__figure"\x3e\n\t\t\t\t\t\t\t\t\x3cimg src\x3d"{{image}}" class\x3d"card__image" alt\x3d"Image of {{title}}" /\x3e\n\t\t\t\t\t\t\t\x3c/figure\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t{{/image}}\n\t\t\t\t\x3c/article\x3e\n\t\t\t{{/items}}');
this.element.innerHTML=liftigniter("render",b,a);this.track()}},{key:"track",value:function(){liftigniter("track",{elements:this.element.querySelectorAll("[data-card]"),name:this.params.widget,source:"LI"});(new S).init()}}],M(a.prototype,b),a}();x.a.subscribe({topic:"tmg.liftigniter.ready",func:function(){L.default.isAuthor()||(E(document.querySelectorAll("[data-liftigniter]")).forEach(function(a){new va(a,m.default.tryParse(a.dataset.liftigniter))}),liftigniter("fetch"))},runIfAlreadyPublished:!0});
var wa=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.container=b;this.structure=["continent","country","city","poi"];this.currentLevel=0;this.currentList=null;this.addOpenButton();this.addBackButton();this.container.querySelectorAll("[data-has-children]").forEach(function(a){return c.attachDomEvents(a)})}var b;return b=[{key:"toggleList",value:function(){this.container.parentNode.classList.toggle("destinations-selector--open")}},
{key:"addOpenButton",value:function(){this.openButton=this.container.parentNode.querySelector("[data-button-open]");this.openButton.addEventListener("click",this.toggleList.bind(this))}},{key:"addBackButton",value:function(){this.backBt=this.container.parentNode.querySelector("[data-button-back]");this.backBt.addEventListener("click",function(){this.setCurrentLevel(this.currentLevel-1)}.bind(this))}},{key:"attachDomEvents",value:function(a){this.container.parentNode.querySelector("[data-selector-overlay]").addEventListener("click",
this.toggleList.bind(this));a.addEventListener("click",function(a){var b=this.structure.indexOf(a.target.dataset.childrenType);this.setCurrentLevel(b);this.currentList=a=document.getElementById(a.target.dataset.showChildren);a.classList.add("destinations__list--active")}.bind(this),!1)}},{key:"setCurrentLevel",value:function(a){if(0<a?(this.backBt.classList.remove("destinations-selector__back-bt--label-close"),this.backBt.classList.add("destinations-selector__back-bt--label-back")):(this.backBt.classList.add("destinations-selector__back-bt--label-close"),
this.backBt.classList.remove("destinations-selector__back-bt--label-back")),0>a)this.toggleList();else{this.currentLevel=a;for(var b=a+1;b<this.structure.length;b++){var c=document.querySelectorAll("#destination-".concat(this.structure[b]," .destinations__list--active"));0<c.length&&Array.from(c).forEach(function(a){setTimeout(function(){a.classList.remove("destinations__list--active")},500)})}this.container.style.transform="translateX(-".concat(100*a,"%)")}}}],T(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",
func:function(){var a=document.querySelector('[data-js\x3d"destinations-selector__container"]');a&&new wa(a)},runIfAlreadyPublished:!0});var xa=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b}var b;return b=[{key:"bindEvents",value:function(){var a=this;this.element.addEventListener("click",function(){a.addBackToTopEvent()})}},{key:"addBackToTopEvent",value:function(){R.default.addPropertyValue("event",["backToTheTop"])}}],
U(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector("[data-back-to-top-event]");a&&(new xa(a)).bindEvents()},runIfAlreadyPublished:!0});var ya=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.accessToken=sessionStorage.getItem("access_token");this.idToken=sessionStorage.getItem("id_token");this.host=location.host;this.apiHost=function(){return"secure.telegraph.co.uk"===
c.host?"api.telegraph.co.uk":"api-preprod.telegraph.co.uk"};this.proxyServletUrl="https://"+this.host+"/bin/core/proxyservlet";this.commonHeaderContent={access_token:this.accessToken,id_token:this.idToken,acccept:"application/json","api-auth":!0,"api-strip-cookies":!0,"content-type":"application/json","api-method":"GET","api-host":this.apiHost(),"api-protocol":"HTTPS",origin:"https://"+this.host,referer:"https://"+this.host+"/secure/personal/",dataType:"JSON","x-requested-with":"XMLHttpRequest"};
this.apiPathUrl=function(){return"secure.telegraph.co.uk"===c.host?"/commerce/":"secure-staging-ams64.telegraph.co.uk"===c.host?"/commerce-api-qa/commerce/":"/commerce-api-uat/commerce/"};this.subIdUrl="";this.disableSpinner=function(){var a=document.querySelector(".lds-spinner");return a?a.classList.add("hidden"):null}}var b;return b=[{key:"init",value:function(){this.checkUser()}},{key:"checkUser",value:function(){var a={"api-path":this.apiPathUrl()+"accounts/me?subscription\x3dtrue\x26paymentMethod\x3dtrue"};
a=Object.assign({},this.commonHeaderContent,a);a={method:"POST",headers:new Headers(a)};var b=this;this.accessToken&&this.idToken?fetch(this.proxyServletUrl,a).then(function(a){return a.json()}).then(function(a){a.subscriptions?(a=a.subscriptions.filter(function(a){return"Active"===a.status})[0])&&a["@id"]?b.getSubscriptions(a["@id"]):(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"):(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),
window.location.href="/secure/upgrade/error")}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"}):window.location.href="/secure/login/?redirect\x3d../upgrade"}},{key:"getSubscriptions",value:function(a){this.subIdUrl=a.slice(a.indexOf(".co.uk/")+7,a.length);a=Object.assign({},this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade-offers"});a={method:"POST",headers:new Headers(a)};var b=this;fetch(this.proxyServletUrl,
a).then(function(a){return a.json()}).then(function(a){b.prepareResponse(a)}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"})}},{key:"prepareResponse",value:function(a){if(a){var b=a.priceChange;if(1===b.length&&0===Object.keys(b[0]).length&&b[0].constructor===Object||!b[0].alternatives)sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error";else{b=document.querySelector("#entry-template").innerHTML;
b=Handlebars.compile(b)(a);var c=a["@id"],d=this,e=a.productFriendlyName,f=a.priceChange[0].number;document.querySelector(".subscription-list").innerHTML=b;d.disableSpinner();document.querySelector(".site-header-subs__subscription").innerHTML="You currently have ".concat("Annually"===a.frequencyDescription?"an annual":"Monthly"===a.frequencyDescription?"a monthly":"a periodic"," subscription to ").concat(e);document.querySelectorAll(".call-to-action").forEach(function(a){a.addEventListener("click",
function(b){b.preventDefault();var e=b.target.dataset.id;b=b.target.dataset.frequency;var g=a.querySelector("button"),k=a.closest(".subscription__options").dataset.productName;g.innerHTML="Loading...";g.setAttribute("disabled",!0);g.classList.add("call-to-action__link--disabled");d.upgradeSubscription(e,c,b,k,f)},!1)})}}else sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"}},{key:"upgradeSubscription",value:function(a,b,c,d,e){b=Object.assign({},
this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade","api-method":"POST"});b=new Headers(b);var g=(new Date).toISOString().slice(0,16)+"Z";a={body:JSON.stringify(e?{offerCode:a,priceChangeNumber:e,effectiveDate:g}:{offerCode:a}),method:"POST",headers:b};sessionStorage.setItem("productDetails",JSON.stringify({productName:d,frequency:c}));fetch(this.proxyServletUrl,a).then(function(a){308<a.status?(sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"):
(sessionStorage.removeItem("upgradeErrorType"),window.location.href="/secure/upgrade/"+("Premium"===d?"confirmation-premium":"confirmation-premium-digital"))}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"})}}],A(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelectorAll('[data-js\x3d"SubscriptionUpgrade"]');0<a.length&&(new ya(a)).init()},runIfAlreadyPublished:!0});var Ea={subscriptionUpgrade:ya},
za=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.accessToken=sessionStorage.getItem("access_token");this.idToken=sessionStorage.getItem("id_token")}var b;return b=[{key:"init",value:function(){sessionStorage.upgradeErrorType?this.errorPage():this.confirmationPage()}},{key:"confirmationPage",value:function(){var a=JSON.parse(sessionStorage.productDetails);document.querySelector(".site-header-subs__subscription").innerHTML=
"We have updated your subscription to ".concat(a.productName," [").concat(a.frequency,"]")}},{key:"errorPage",value:function(){var a=document.querySelector(".subscription--error"),b=a.querySelector(".subscription__title"),c=a.querySelector(".subscription__error-msg");a.removeAttribute("hidden");a.removeAttribute("aria-hidden");"error-technical"===sessionStorage.upgradeErrorType?(b.innerHTML="We're sorry, there seems to have been a technical error processing your upgrade.",c.innerHTML='To complete the transaction please contact our contact center \nUK calls: \x3ca href\x3d"tel:08003163500"\x3e0800 316 3500\x3c/a\x3e \nInternational calls: \x3ca href\x3d"tel:+441622335007"\x3e+44 (0) 1622 33 50 07\x3c/a\x3e'):
(b.innerHTML="We're sorry, we don't have an upgrade available for you at the moment.",c.innerHTML='To find more about your subscription or talk to one of our team members please call our contact center on \x3ca href\x3d"tel:08003163500"\x3e0800 316 3500\x3c/a\x3e and quote your subscriber number.');setTimeout(function(){sessionStorage.removeItem("upgradeErrorType")},1E3)}}],Z(a.prototype,b),a}();x.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelectorAll('[data-js\x3d"subscription-confirmation"]');
0<a.length&&(new za(a)).init()},runIfAlreadyPublished:!0});l.default={dataLayer:R.default,environment:ba.default,tracking:S,utils:qa.default,socialTracking:V,user:X.default,store:h.a,accordion:q,cookies:I.a,redirect:J.a,json:m.default,throttle:w.a,url:O.default,calendarAvail:ka,contentNav:la,counter:ca,carousel:ma,overlayContinuation:Ba,navigation:aa,page:L.default,productSort:void 0,modalDropdown:W,subscriptionUpgrade:Ea,subscriptionConfirmation:{subscriptionConfirmation:za},viewport:ta,dragScroll:Q.default,
guid:F.default,modal:a.default,captionTrigger:Y,liftIgniter:ua,moreStories:va,destinationsSelector:wa,siteFooter:xa}}],[[35,0,1]]]);