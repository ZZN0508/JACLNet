(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"01sJ":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommentNotificationsCount"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"notificationCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:85}};n.loc.source={body:"query CommentNotificationsCount {\n  currentUser {\n    id\n    notificationCount\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var o={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}})),e.exports=n,e.exports.CommentNotificationsCount=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=o[t]||new Set,c=new Set,a=new Set;for(r.forEach((function(e){a.add(e)}));a.size>0;){var u=a;a=new Set,u.forEach((function(e){c.has(e)||(c.add(e),(o[e]||new Set).forEach((function(e){a.add(e)})))}))}return c.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"CommentNotificationsCount"),n.documentId="cddf552f97cad3562d9f7e3b44b679a3c23ab59782a58d59cdc4b50c9731b30b"},"5Qfx":function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return E}));var r=n("ODXe"),o=n("rePB"),i=n("q1tI"),c=n.n(i),a=n("20a2"),u=n.n(a),s=n("VnKV"),f=n("eMNQ"),d=n("X8jo"),l=n("Y+p1"),v=n.n(l),b=function(e){var t=Object(i.useRef)([]),n=Object(i.useState)(!1),r=n[0],o=n[1];return Object(i.useEffect)((function(){var n=function(n){var r=n.key;t.current.length===e.length&&t.current.shift(),t.current.push(r),v()(t.current,e)?o(!0):o(!1)};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e]),r},O=c.a.createElement;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=c.a.createContext(),y=(w.Consumer,function(e,t){switch(t.type){case"addControl":case"resetControls":case"toggleControl":case"queryEnabled":return m(m({},e),{},{controls:h(e.controls,t)});case"toggleMaster":return m(m({},e),{},{master:t.target.checked});case"toggleEnabled":return m(m({},e),{},{enabled:!e.enabled});case"enable":return m(m({},e),{},{enabled:!0});case"disable":return m(m({},e),{},{enabled:!1});case"restoreFromLocalStorage":return m(m({},t.localStore),{},{controls:h(e.controls,t)});default:return e}}),h=function e(t,n){switch(n.type){case"addControl":var i=n.control,c=i.label,a=i.display,u=void 0!==a&&a,s=i.showInProduction,d=void 0!==s&&s,l=Object(f.Zb)(c),v=t[l],b=void 0===v?{key:l,label:c,display:u,showInProduction:d}:v;return m(m({},t),{},Object(o.a)({},l,m(m({},b),{},{inView:!0})));case"toggleControl":var O=n.target,p=O.name,w=O.checked,y=t[p];return m(m({},t),{},Object(o.a)({},p,m(m({},y),{},{display:w})));case"resetControls":case"queryEnabled":return Object.entries(t).reduce((function(e,t){var o=Object(r.a)(t,2),i=o[0],c=o[1];return e[i]=j(c,n),e}),{});case"restoreFromLocalStorage":var h=e(n.localStore.controls,{type:"resetControls"});return Object.entries(t).reduce((function(e,t){var n=Object(r.a)(t,2),o=n[0],i=n[1],c=e[o]||i,a=i.inView,u=i.label,s=i.showInProduction;return e[o]=m(m({},c),{},{inView:a,label:u,showInProduction:s}),e}),h);default:return t}},j=function(e,t){switch(t.type){case"resetControls":return m(m({},e),{},{inView:!1});case"queryEnabled":return t.key===e.key?m(m({},e),{},{display:!0}):e;default:return e}},E=function(e){var t=e.router,n=(t=void 0===t?{}:t).query,o=e.children,c=Object(i.useReducer)(y,{controls:{},enabled:!1,master:!0}),a=c[0],f=c[1],l=Object(d.a)("__sneak_peek__",a),v=Object(r.a)(l,2),p=v[0],h=v[1],j=b(s.KONAMI_CODE);return Object(i.useEffect)((function(){var e=function(){return f({type:"resetControls"})};return u.a.events.on("routeChangeStart",e),function(){u.a.events.off("routeChangeStart",e)}}),[]),Object(i.useEffect)((function(){f({type:"restoreFromLocalStorage",localStore:p}),"_sneak_peek"in n&&f({type:"enable"})}),[n]),Object(i.useEffect)((function(){j&&f({type:"enable"})}),[j]),Object(i.useEffect)((function(){h(a)}),[a,h]),Object(i.useEffect)((function(){Object.keys(n).forEach((function(e){f({type:"queryEnabled",key:e})}))}),[n]),O(w.Provider,{value:m(m({},a),{},{dispatch:f})},o)}},"E/qt":function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return I}));var r=n("o0o1"),o=n.n(r),i=n("HaE+"),c=n("q1tI"),a=n.n(c),u=n("01sJ"),s=n.n(u),f=n("VnKV"),d=n("rePB"),l="active",v="idle",b=l,O=["click","mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","focus"],p=["blur","visibilitychange"],m=["mousemove"],w=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.activityEvents,i=void 0===o?O:o,c=r.inactivityEvents,a=void 0===c?p:c,u=r.ignoredEventsWhenIdle,s=void 0===u?m:u,f=r.timeToIdle,w=void 0===f?3e4:f,y=r.initialState,h=void 0===y?b:y,j=r.autoInit,E=void 0===j||j;if("undefined"!==typeof document.hidden)t="hidden",n="visibilitychange";else for(var g=["webkit","moz","ms"],_=0;_<g.length;_++){var k=g[_];if("undefined"!==typeof document["".concat(k,"Hidden")]){t="".concat(k,"Hidden"),n="".concat(k,"visibilitychange");break}}var C,S,I=(e={},Object(d.a)(e,l,[]),Object(d.a)(e,v,[]),e),P=function e(t){clearTimeout(S),t===l&&(S=setTimeout((function(){return e(v)}),w)),C!==t&&I[C=t].forEach((function(e){return e()}))},N=function(e){(C===l||s.indexOf(e.type)<0)&&P(l)},T=function(){P(v)},x=function(){P(document[t]?v:l)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;P(e===l?l:v),i.forEach((function(e){return window.addEventListener(e,N)})),a.filter((function(e){return"visibilitychange"!==e})).forEach((function(e){return window.addEventListener(e,T)})),a.indexOf("visibilitychange")>=0&&n&&document.addEventListener(n,x)},L=function(e,t){I[e].push(t);return function(){var n=I[e].indexOf(t);n>=0&&I[e].splice(n,1)}},q=function(){I.active=[],I.idle=[],clearTimeout(S),i.forEach((function(e){return window.removeEventListener(e,N)})),a.forEach((function(e){return window.removeEventListener(e,T)})),n&&document.removeEventListener(n,x)};return E&&D(h),{on:L,stop:q,init:D}};var y=n("p5Ga"),h=n("MCvy"),j=n("re3D"),E=n("e1TJ"),g=a.a.createElement,_=n("NOtv")("kraken:components:contexts:NotificationsContext"),k=a.a.createContext({notificationCount:0}),C=(k.Consumer,{timeToIdle:12e4}),S=f.OPEN_WEB_ACTIVE?function(e){var t=e.children,n=Object(j.e)().loggedIn,r=Object(c.useRef)(),a=Object(c.useState)(0),u=a[0],s=a[1],f=Object(E.c)(),d=f.v3Id,l=f.id,v=f.slug;return Object(c.useEffect)((function(){var e=function(e){_("Openweb Notification: ",e),s(e)};if(n)return function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.b)((d||l||v||"notifications").toString(),e);case 2:r.current=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){_("Unsubscribing to notificatinos",r.current),r.current=void 0}}),[n,d,l,v]),g(k.Provider,{value:{notificationCount:u}},t)}:function(e){var t=e.children,n=Object(j.e)().loggedIn,r=function(e){var t=Object(c.useState)(!1),n=t[0],r=t[1];return Object(c.useEffect)((function(){var t=w(e);return t.on("idle",(function(){return r(!0)})),t.on("active",(function(){return r(!1)})),function(){return t.stop()}}),[e]),n}(C),o=Object(y.a)({dataPath:"currentUser",query:s.a,pollInterval:3e4,skip:!n}),i=o.data,a=o.startPolling,u=o.stopPolling,f=(null!==i&&void 0!==i?i:{}).notificationCount,d=void 0===f?0:f;return Object(c.useEffect)((function(){n&&(r?u():a(3e4))}),[n,r,a,u]),g(k.Provider,{value:{notificationCount:d}},t)},I=function(){return Object(c.useContext)(k)}},MCvy:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u}));var r=n("o0o1"),o=n.n(r),i=n("HaE+"),c=n("NOtv")("kraken:lib:openweb"),a=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("subscribing to notifications with",{assetId:t}),e.abrupt("return",new Promise((function(e){"function"===typeof window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__?e(window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__(t,n)):document.addEventListener("ow-notifications-sdk-ready",(function(){e(window.__OW_SUBSCRIBE_TO_NOTIFICATIONS__(t,n))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(e,t){c("opening to notifications with",{assetId:t});var n={postId:t||window.location.pathname,instanceId:e};"function"===typeof window.__OW_OPEN_NOTIFICATIONS__?window.__OW_OPEN_NOTIFICATIONS__(n):document.addEventListener("ow-notifications-sdk-ready",(function(){window.__OW_OPEN_NOTIFICATIONS__(n)}))}},Sf1j:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return b}));var r=n("rePB"),o=n("q1tI"),i=n.n(o),c=n("zlSC"),a=i.a.createElement;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=i.a.createContext({}),d=i.a.createContext({}),l=function(e){var t=e.children,n=Object(o.useState)(),r=n[0],i=n[1],u=Object(o.useState)("notice"),l=u[0],v=u[1],b=Object(c.a)(!0),O=b.display,p=b.show,m=b.hide,w=Object(o.useRef)(),y=function(){w.current&&clearTimeout(w.current),m(),setTimeout((function(){return i(void 0),void p()}),1e3)},h=function(e,t){var n=t.level,r=void 0===n?"notice":n,o=t.delay,c=void 0===o?5e3:o,a=t.sticky,u=void 0!==a&&a;i(e),v(r),w.current&&clearTimeout(w.current),u||(w.current=setTimeout((function(){return y()}),c))};return a(f.Provider,{value:{notify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(e,s(s({},t),{},{level:"notice"}))},alert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(e,s(s({},t),{},{level:"alert",sticky:!0}))},flash:h}},a(d.Provider,{value:{message:r,level:l,display:O,dismiss:y}},t))},v=function(){return Object(o.useContext)(f)||{}},b=function(){return Object(o.useContext)(d)||{}}}}]);
//# sourceMappingURL=bd1fe9762c5278860b4400747b6c1b70ac47f773.d271468d5f3189a60e66.js.map