define(["./../sg","local/common/components/nsglibCommon"],function(e,t){var n=!1;return{init:function(){if(!1!==n)return;function r(){e.onAd(function(e,n,r,l,o){"flat-search-json"===e?function(e,n){var a=document.getElementById("searchQuery");a&&n&&n.value&&(a.value=(r=n.value,(l=document.createElement("textarea")).innerHTML=r,r=l.innerHTML),t.domBuilder.addEvent(a,"click",function e(){a.value="";t.domBuilder.removeEvent(a,"click",e)}));var r,l}(0,r):/flat-link/.test(e)&&a(n,r)})}n=!0,setTimeout(function(){r()},0)},onAdLink:a};function a(e,n){var a="onet-ad-"+e.replace("-json",""),r=document.getElementById(a);if(r&&n&&n.url&&n.link){var l={href:n.url};n.blank&&"1"===n.blank&&(l.target="_blank");var o=t.domBuilder.createFragment(),d=o.create("a").setAttr(l);void 0!==n.html&&d.setHtml(n.html);var i=d.create("span").setAttr({class:"title"});i.createText(n.link+" "),r.parentNode.insertBefore(o.getDomElement(),r);var c=r.getAttribute("data-add-label");c&&"1"===c&&((o=t.domBuilder.createFragment()).create("span").createText("REKLAMA").addClass("newsAdd"),i.appendChild(o.getDomElement())),t.domBuilder.removeClass(r.parentNode,"hide")}}});