!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=171)}([function(t,i,e){"use strict";var s,n,r=e(59),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t}(),c.ProtoPlayerPlaybackModeEnum=(s={},(n=Object.create(s))[s[0]="Autoplay"]=0,n[s[1]="ScrollToPlay"]=1,n[s[2]="ClickToPlay"]=2,n),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoAdDomainBlockingResponse=function(){function t(t){if(this.domains=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.domains=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdDomainBlockingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.domains&&s.domains.length||(s.domains=[]),s.domains.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.domains=[]),t.domains&&t.domains.length){e.domains=[];for(var s=0;s<t.domains.length;++s)e.domains[s]=t.domains[s]}return e},t}(),c.ProtoCoreTamBidRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemId="",t.prototype.code="",t.prototype.metadata=null,t.prototype.exploration=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.lineItemId&&t.hasOwnProperty("lineItemId")&&i.uint32(10).string(t.lineItemId),null!=t.code&&t.hasOwnProperty("code")&&i.uint32(18).string(t.code),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(26).fork()).ldelim(),null!=t.exploration&&t.hasOwnProperty("exploration")&&i.uint32(32).bool(t.exploration),i},t.fromObject=function(t){if(t instanceof c.ProtoCoreTamBidRequest)return t;var i=new c.ProtoCoreTamBidRequest;if(null!=t.lineItemId&&(i.lineItemId=String(t.lineItemId)),null!=t.code&&(i.code=String(t.code)),null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoCoreTamBidRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}return null!=t.exploration&&(i.exploration=Boolean(t.exploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.MetadataModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.version=0,t.prototype.sessionId="",t.prototype.playerId="",t.prototype.userId="",t.prototype.browser=null,t.prototype.geo=null,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.pageUrl="",t.prototype.bundleId="",t.prototype.implementationType=0,t.prototype.trackAllRequests=!1,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.abTestId="",t.prototype.pageInFocus=!1,t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){return i||(i=a.create()),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(8).int32(t.version),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(18).string(t.sessionId),null!=t.playerId&&t.hasOwnProperty("playerId")&&i.uint32(26).string(t.playerId),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(34).string(t.userId),null!=t.browser&&t.hasOwnProperty("browser")&&c.Browser.encode(t.browser,i.uint32(42).fork()).ldelim(),null!=t.geo&&t.hasOwnProperty("geo")&&c.GeoLocation.encode(t.geo,i.uint32(50).fork()).ldelim(),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(56).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(64).int32(t.clientAb1),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&i.uint32(72).int32(t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&i.uint32(80).int32(t.serverAb1),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(122).string(t.pageUrl),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(138).string(t.bundleId),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(144).int32(t.implementationType),null!=t.trackAllRequests&&t.hasOwnProperty("trackAllRequests")&&i.uint32(152).bool(t.trackAllRequests),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(162).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(170).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(178).string(t.customParam3),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&i.uint32(194).string(t.abTestId),null!=t.pageInFocus&&t.hasOwnProperty("pageInFocus")&&i.uint32(200).bool(t.pageInFocus),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(210).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(218).string(t.customParam5),i},t.fromObject=function(t){if(t instanceof c.MetadataModel)return t;var i=new c.MetadataModel;if(null!=t.version&&(i.version=0|t.version),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.playerId&&(i.playerId=String(t.playerId)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.browser){if("object"!=typeof t.browser)throw TypeError(".MetadataModel.browser: object expected");i.browser=c.Browser.fromObject(t.browser)}if(null!=t.geo){if("object"!=typeof t.geo)throw TypeError(".MetadataModel.geo: object expected");i.geo=c.GeoLocation.fromObject(t.geo)}switch(null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.serverAb0&&(i.serverAb0=0|t.serverAb0),null!=t.serverAb1&&(i.serverAb1=0|t.serverAb1),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}return null!=t.trackAllRequests&&(i.trackAllRequests=Boolean(t.trackAllRequests)),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.abTestId&&(i.abTestId=String(t.abTestId)),null!=t.pageInFocus&&(i.pageInFocus=Boolean(t.pageInFocus)),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCoreTamBidResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.encryptedBidPrice="",t.prototype.ofskp=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.successRate=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCoreTamBidResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 10:s.encryptedBidPrice=t.string();break;case 12:s.ofskp=t.double();break;case 13:s.impressionTimeSpent=t.int32();break;case 14:s.bidRate=t.double();break;case 15:s.successRate=t.double();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.errorMessage="",e.encryptedBidPrice="",e.ofskp=0,e.impressionTimeSpent=0,e.bidRate=0,e.successRate=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),null!=t.encryptedBidPrice&&t.hasOwnProperty("encryptedBidPrice")&&(e.encryptedBidPrice=t.encryptedBidPrice),null!=t.ofskp&&t.hasOwnProperty("ofskp")&&(e.ofskp=i.json&&!isFinite(t.ofskp)?String(t.ofskp):t.ofskp),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),e},t}(),c.ProtoCookieSettings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.prototype.timestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.encode=function(t,i){return i||(i=a.create()),null!=t.name&&t.hasOwnProperty("name")&&i.uint32(10).string(t.name),null!=t.value&&t.hasOwnProperty("value")&&i.uint32(18).string(t.value),null!=t.timestamp&&t.hasOwnProperty("timestamp")&&i.uint32(24).int64(t.timestamp),i},t.fromObject=function(t){if(t instanceof c.ProtoCookieSettings)return t;var i=new c.ProtoCookieSettings;return null!=t.name&&(i.name=String(t.name)),null!=t.value&&(i.value=String(t.value)),null!=t.timestamp&&(o.Long?(i.timestamp=o.Long.fromValue(t.timestamp)).unsigned=!1:"string"==typeof t.timestamp?i.timestamp=parseInt(t.timestamp,10):"number"==typeof t.timestamp?i.timestamp=t.timestamp:"object"==typeof t.timestamp&&(i.timestamp=new o.LongBits(t.timestamp.low>>>0,t.timestamp.high>>>0).toNumber())),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoCookieSecureModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Secure"]=0,i[t[1]="Unsecure"]=1,i[t[2]="Auto"]=2,i}(),c.ProtoCookieSyncRequest=function(){function t(t){if(this.cookieList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.cookieList=o.emptyArray,t.prototype.secureMode=0,t.prototype.browserInfo=null,t.encode=function(t,i){if(i||(i=a.create()),null!=t.cookieList&&t.cookieList.length)for(var e=0;e<t.cookieList.length;++e)c.ProtoCookieSettings.encode(t.cookieList[e],i.uint32(10).fork()).ldelim();return null!=t.secureMode&&t.hasOwnProperty("secureMode")&&i.uint32(16).int32(t.secureMode),null!=t.browserInfo&&t.hasOwnProperty("browserInfo")&&c.Browser.encode(t.browserInfo,i.uint32(26).fork()).ldelim(),i},t.fromObject=function(t){if(t instanceof c.ProtoCookieSyncRequest)return t;var i=new c.ProtoCookieSyncRequest;if(t.cookieList){if(!Array.isArray(t.cookieList))throw TypeError(".ProtoCookieSyncRequest.cookieList: array expected");i.cookieList=[];for(var e=0;e<t.cookieList.length;++e){if("object"!=typeof t.cookieList[e])throw TypeError(".ProtoCookieSyncRequest.cookieList: object expected");i.cookieList[e]=c.ProtoCookieSettings.fromObject(t.cookieList[e])}}switch(t.secureMode){case"Secure":case 0:i.secureMode=0;break;case"Unsecure":case 1:i.secureMode=1;break;case"Auto":case 2:i.secureMode=2}if(null!=t.browserInfo){if("object"!=typeof t.browserInfo)throw TypeError(".ProtoCookieSyncRequest.browserInfo: object expected");i.browserInfo=c.Browser.fromObject(t.browserInfo)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i[t[8]="TamDeal"]=8,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.amazonDealId="",t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 48:s.amazonDealId=t.string();break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.amazonDealId="",e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.amazonDealId&&t.hasOwnProperty("amazonDealId")&&(e.amazonDealId=t.amazonDealId),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoLiveMediaMetadataResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.startDate="",t.prototype.outputUrl="",t.prototype.thumbnailUrl="",t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLiveMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.startDate=t.string();break;case 2:s.outputUrl=t.string();break;case 3:s.thumbnailUrl=t.string();break;case 4:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.startDate="",e.outputUrl="",e.thumbnailUrl="",e.altText=""),null!=t.startDate&&t.hasOwnProperty("startDate")&&(e.startDate=t.startDate),null!=t.outputUrl&&t.hasOwnProperty("outputUrl")&&(e.outputUrl=t.outputUrl),null!=t.thumbnailUrl&&t.hasOwnProperty("thumbnailUrl")&&(e.thumbnailUrl=t.thumbnailUrl),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoLoggingLevelEnum=function(){var t={},i=Object.create(t);return i[t[0]="FATAL"]=0,i[t[1]="WARNING"]=1,i[t[2]="INFO"]=2,i}(),c.ProtoLoggingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.message="",t.prototype.version=0,t.prototype.level=0,t.prototype.callStack="",t.prototype.pageUrl="",t.prototype.exception="",t.prototype.sessionId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.message&&t.hasOwnProperty("message")&&i.uint32(10).string(t.message),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(16).int32(t.version),null!=t.level&&t.hasOwnProperty("level")&&i.uint32(24).int32(t.level),null!=t.callStack&&t.hasOwnProperty("callStack")&&i.uint32(34).string(t.callStack),null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(42).string(t.pageUrl),null!=t.exception&&t.hasOwnProperty("exception")&&i.uint32(50).string(t.exception),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(58).string(t.sessionId),i},t.fromObject=function(t){if(t instanceof c.ProtoLoggingRequest)return t;var i=new c.ProtoLoggingRequest;switch(null!=t.message&&(i.message=String(t.message)),null!=t.version&&(i.version=0|t.version),t.level){case"FATAL":case 0:i.level=0;break;case"WARNING":case 1:i.level=1;break;case"INFO":case 2:i.level=2}return null!=t.callStack&&(i.callStack=String(t.callStack)),null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.exception&&(i.exception=String(t.exception)),null!=t.sessionId&&(i.sessionId=String(t.sessionId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSpriteSheet=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.prototype.height=0,t.prototype.count=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSpriteSheet;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;case 2:s.height=t.int32();break;case 3:s.count=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file="",e.height=0,e.count=0),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.count&&t.hasOwnProperty("count")&&(e.count=t.count),e},t}(),c.ProtoTrack=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrack;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.file=""),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoCustomField=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.name="",t.prototype.value="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoCustomField;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.name=t.string();break;case 2:s.value=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.name="",e.value=""),null!=t.name&&t.hasOwnProperty("name")&&(e.name=t.name),null!=t.value&&t.hasOwnProperty("value")&&(e.value=t.value),e},t}(),c.ProtoMediaMetadataResponse=function(){function t(t){if(this.keywordList=[],this.trackList=[],this.renditionList=[],this.customFields=[],this.videoIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.prototype.duration=0,t.prototype.clickUrl="",t.prototype.keywordList=o.emptyArray,t.prototype.trackList=o.emptyArray,t.prototype.spriteSheet=null,t.prototype.thumbnail="",t.prototype.renditionList=o.emptyArray,t.prototype.customFields=o.emptyArray,t.prototype.hlsFilePath="",t.prototype.languageId="",t.prototype.sourceItemId="",t.prototype.altText="",t.prototype.videoIndexes=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;case 3:s.duration=t.int32();break;case 4:s.clickUrl=t.string();break;case 5:s.keywordList&&s.keywordList.length||(s.keywordList=[]),s.keywordList.push(t.string());break;case 6:s.trackList&&s.trackList.length||(s.trackList=[]),s.trackList.push(c.ProtoTrack.decode(t,t.uint32()));break;case 7:s.spriteSheet=c.ProtoSpriteSheet.decode(t,t.uint32());break;case 8:s.thumbnail=t.string();break;case 9:s.renditionList&&s.renditionList.length||(s.renditionList=[]),s.renditionList.push(c.ProtoRendition.decode(t,t.uint32()));break;case 10:s.customFields&&s.customFields.length||(s.customFields=[]),s.customFields.push(c.ProtoCustomField.decode(t,t.uint32()));break;case 11:s.hlsFilePath=t.string();break;case 12:s.languageId=t.string();break;case 13:s.sourceItemId=t.string();break;case 14:s.altText=t.string();break;case 15:s.videoIndexes&&s.videoIndexes.length||(s.videoIndexes=[]),s.videoIndexes.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.keywordList=[],e.trackList=[],e.renditionList=[],e.customFields=[],e.videoIndexes=[]),i.defaults&&(e.title="",e.description="",e.duration=0,e.clickUrl="",e.spriteSheet=null,e.thumbnail="",e.hlsFilePath="",e.languageId="",e.sourceItemId="",e.altText=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),t.keywordList&&t.keywordList.length){e.keywordList=[];for(var s=0;s<t.keywordList.length;++s)e.keywordList[s]=t.keywordList[s]}if(t.trackList&&t.trackList.length){e.trackList=[];for(s=0;s<t.trackList.length;++s)e.trackList[s]=c.ProtoTrack.toObject(t.trackList[s],i)}if(null!=t.spriteSheet&&t.hasOwnProperty("spriteSheet")&&(e.spriteSheet=c.ProtoSpriteSheet.toObject(t.spriteSheet,i)),null!=t.thumbnail&&t.hasOwnProperty("thumbnail")&&(e.thumbnail=t.thumbnail),t.renditionList&&t.renditionList.length){e.renditionList=[];for(s=0;s<t.renditionList.length;++s)e.renditionList[s]=c.ProtoRendition.toObject(t.renditionList[s],i)}if(t.customFields&&t.customFields.length){e.customFields=[];for(s=0;s<t.customFields.length;++s)e.customFields[s]=c.ProtoCustomField.toObject(t.customFields[s],i)}if(null!=t.hlsFilePath&&t.hasOwnProperty("hlsFilePath")&&(e.hlsFilePath=t.hlsFilePath),null!=t.languageId&&t.hasOwnProperty("languageId")&&(e.languageId=t.languageId),null!=t.sourceItemId&&t.hasOwnProperty("sourceItemId")&&(e.sourceItemId=t.sourceItemId),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),t.videoIndexes&&t.videoIndexes.length){e.videoIndexes=[];for(s=0;s<t.videoIndexes.length;++s)e.videoIndexes[s]=t.videoIndexes[s]}return e},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoRtbRequest=function(){function t(t){if(this.lineItems={},this.customMacros={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.metadata=null,t.prototype.coppa=!1,t.prototype.refererUrl="",t.prototype.testMode=!1,t.prototype.videoWidth=0,t.prototype.videoHeight=0,t.prototype.gdprCompliant=!1,t.prototype.soundOn=!1,t.prototype.gdprConsentData="",t.prototype.explorationMode=!1,t.prototype.viewability=!1,t.prototype.outstream=!1,t.prototype.domainURL="",t.prototype.isClickToPlay=!1,t.prototype.appVersion="",t.prototype.deviceID="",t.prototype.lineItems=o.emptyObject,t.prototype.isCcpaBlockingUserInfo=!1,t.prototype.usPrivacyString="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.gdprConsentMode=0,t.prototype.maxAdDuration=180,t.prototype.customMacros=o.emptyObject,t.prototype.adsMustBeSkippableIfLongerThan=31,t.encode=function(t,i){if(i||(i=a.create()),null!=t.metadata&&t.hasOwnProperty("metadata")&&c.MetadataModel.encode(t.metadata,i.uint32(10).fork()).ldelim(),null!=t.coppa&&t.hasOwnProperty("coppa")&&i.uint32(32).bool(t.coppa),null!=t.refererUrl&&t.hasOwnProperty("refererUrl")&&i.uint32(42).string(t.refererUrl),null!=t.testMode&&t.hasOwnProperty("testMode")&&i.uint32(48).bool(t.testMode),null!=t.videoWidth&&t.hasOwnProperty("videoWidth")&&i.uint32(56).int32(t.videoWidth),null!=t.videoHeight&&t.hasOwnProperty("videoHeight")&&i.uint32(64).int32(t.videoHeight),null!=t.gdprCompliant&&t.hasOwnProperty("gdprCompliant")&&i.uint32(72).bool(t.gdprCompliant),null!=t.soundOn&&t.hasOwnProperty("soundOn")&&i.uint32(80).bool(t.soundOn),null!=t.gdprConsentData&&t.hasOwnProperty("gdprConsentData")&&i.uint32(90).string(t.gdprConsentData),null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&i.uint32(96).bool(t.explorationMode),null!=t.viewability&&t.hasOwnProperty("viewability")&&i.uint32(104).bool(t.viewability),null!=t.outstream&&t.hasOwnProperty("outstream")&&i.uint32(112).bool(t.outstream),null!=t.domainURL&&t.hasOwnProperty("domainURL")&&i.uint32(130).string(t.domainURL),null!=t.isClickToPlay&&t.hasOwnProperty("isClickToPlay")&&i.uint32(144).bool(t.isClickToPlay),null!=t.appVersion&&t.hasOwnProperty("appVersion")&&i.uint32(170).string(t.appVersion),null!=t.deviceID&&t.hasOwnProperty("deviceID")&&i.uint32(194).string(t.deviceID),null!=t.lineItems&&t.hasOwnProperty("lineItems"))for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s)i.uint32(202).fork().uint32(10).string(e[s]),c.ProtoRtbRequestLineItemEntry.encode(t.lineItems[e[s]],i.uint32(18).fork()).ldelim().ldelim();if(null!=t.isCcpaBlockingUserInfo&&t.hasOwnProperty("isCcpaBlockingUserInfo")&&i.uint32(208).bool(t.isCcpaBlockingUserInfo),null!=t.usPrivacyString&&t.hasOwnProperty("usPrivacyString")&&i.uint32(218).string(t.usPrivacyString),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&i.uint32(256).int32(t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&i.uint32(264).int32(t.skipAdAfter),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(288).int32(t.gdprConsentMode),null!=t.maxAdDuration&&t.hasOwnProperty("maxAdDuration")&&i.uint32(296).int32(t.maxAdDuration),null!=t.customMacros&&t.hasOwnProperty("customMacros"))for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.uint32(306).fork().uint32(10).string(e[s]).uint32(18).string(t.customMacros[e[s]]).ldelim();return null!=t.adsMustBeSkippableIfLongerThan&&t.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&i.uint32(320).int32(t.adsMustBeSkippableIfLongerThan),i},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequest)return t;var i=new c.ProtoRtbRequest;if(null!=t.metadata){if("object"!=typeof t.metadata)throw TypeError(".ProtoRtbRequest.metadata: object expected");i.metadata=c.MetadataModel.fromObject(t.metadata)}if(null!=t.coppa&&(i.coppa=Boolean(t.coppa)),null!=t.refererUrl&&(i.refererUrl=String(t.refererUrl)),null!=t.testMode&&(i.testMode=Boolean(t.testMode)),null!=t.videoWidth&&(i.videoWidth=0|t.videoWidth),null!=t.videoHeight&&(i.videoHeight=0|t.videoHeight),null!=t.gdprCompliant&&(i.gdprCompliant=Boolean(t.gdprCompliant)),null!=t.soundOn&&(i.soundOn=Boolean(t.soundOn)),null!=t.gdprConsentData&&(i.gdprConsentData=String(t.gdprConsentData)),null!=t.explorationMode&&(i.explorationMode=Boolean(t.explorationMode)),null!=t.viewability&&(i.viewability=Boolean(t.viewability)),null!=t.outstream&&(i.outstream=Boolean(t.outstream)),null!=t.domainURL&&(i.domainURL=String(t.domainURL)),null!=t.isClickToPlay&&(i.isClickToPlay=Boolean(t.isClickToPlay)),null!=t.appVersion&&(i.appVersion=String(t.appVersion)),null!=t.deviceID&&(i.deviceID=String(t.deviceID)),t.lineItems){if("object"!=typeof t.lineItems)throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems={};for(var e=Object.keys(t.lineItems),s=0;s<e.length;++s){if("object"!=typeof t.lineItems[e[s]])throw TypeError(".ProtoRtbRequest.lineItems: object expected");i.lineItems[e[s]]=c.ProtoRtbRequestLineItemEntry.fromObject(t.lineItems[e[s]])}}switch(null!=t.isCcpaBlockingUserInfo&&(i.isCcpaBlockingUserInfo=Boolean(t.isCcpaBlockingUserInfo)),null!=t.usPrivacyString&&(i.usPrivacyString=String(t.usPrivacyString)),t.adSkippability){case"IfLongerThan":case 0:i.adSkippability=0;break;case"Always":case 1:i.adSkippability=1;break;case"NoRestrictions":case 2:i.adSkippability=2}switch(null!=t.skipAdAfter&&(i.skipAdAfter=0|t.skipAdAfter),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}if(null!=t.maxAdDuration&&(i.maxAdDuration=0|t.maxAdDuration),t.customMacros){if("object"!=typeof t.customMacros)throw TypeError(".ProtoRtbRequest.customMacros: object expected");i.customMacros={};for(e=Object.keys(t.customMacros),s=0;s<e.length;++s)i.customMacros[e[s]]=String(t.customMacros[e[s]])}return null!=t.adsMustBeSkippableIfLongerThan&&(i.adsMustBeSkippableIfLongerThan=0|t.adsMustBeSkippableIfLongerThan),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbRequestLineItemEntry=function(){function t(t){if(this.ignoredFloorPriceFactorIndexes=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.availableRequests=0,t.prototype.cachedFloorPrice=0,t.prototype.ignoredFloorPriceFactorIndexes=o.emptyArray,t.prototype.gdprConsent=!1,t.prototype.publisherLineItemId="",t.prototype.slotWidth=0,t.prototype.slotHeight=0,t.encode=function(t,i){if(i||(i=a.create()),null!=t.availableRequests&&t.hasOwnProperty("availableRequests")&&i.uint32(8).int32(t.availableRequests),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&i.uint32(17).double(t.cachedFloorPrice),null!=t.ignoredFloorPriceFactorIndexes&&t.ignoredFloorPriceFactorIndexes.length){i.uint32(26).fork();for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.int32(t.ignoredFloorPriceFactorIndexes[e]);i.ldelim()}return null!=t.gdprConsent&&t.hasOwnProperty("gdprConsent")&&i.uint32(32).bool(t.gdprConsent),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.slotWidth&&t.hasOwnProperty("slotWidth")&&i.uint32(48).int32(t.slotWidth),null!=t.slotHeight&&t.hasOwnProperty("slotHeight")&&i.uint32(56).int32(t.slotHeight),i},t.fromObject=function(t){if(t instanceof c.ProtoRtbRequestLineItemEntry)return t;var i=new c.ProtoRtbRequestLineItemEntry;if(null!=t.availableRequests&&(i.availableRequests=0|t.availableRequests),null!=t.cachedFloorPrice&&(i.cachedFloorPrice=Number(t.cachedFloorPrice)),t.ignoredFloorPriceFactorIndexes){if(!Array.isArray(t.ignoredFloorPriceFactorIndexes))throw TypeError(".ProtoRtbRequestLineItemEntry.ignoredFloorPriceFactorIndexes: array expected");i.ignoredFloorPriceFactorIndexes=[];for(var e=0;e<t.ignoredFloorPriceFactorIndexes.length;++e)i.ignoredFloorPriceFactorIndexes[e]=0|t.ignoredFloorPriceFactorIndexes[e]}return null!=t.gdprConsent&&(i.gdprConsent=Boolean(t.gdprConsent)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.slotWidth&&(i.slotWidth=0|t.slotWidth),null!=t.slotHeight&&(i.slotHeight=0|t.slotHeight),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoRtbResponse=function(){function t(t){if(this.lineItemResponses=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.lineItemResponses=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 3:s.lineItemResponses&&s.lineItemResponses.length||(s.lineItemResponses=[]),s.lineItemResponses.push(c.ProtoRtbLineItem.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.lineItemResponses=[]),t.lineItemResponses&&t.lineItemResponses.length){e.lineItemResponses=[];for(var s=0;s<t.lineItemResponses.length;++s)e.lineItemResponses[s]=c.ProtoRtbLineItem.toObject(t.lineItemResponses[s],i)}return e},t}(),c.ProtoRtbBid=function(){function t(t){if(this.billingNoticeUrlList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.winNoticeUrl="",t.prototype.adQualityCheckUrl="",t.prototype.vastTag="",t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.seatId="",t.prototype.adomain="",t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.campaignId="",t.prototype.width=0,t.prototype.height=0,t.prototype.billingNoticeUrlList=o.emptyArray,t.prototype.mime="text/html",t.prototype.gtkpbp=0,t.prototype.successRate=0,t.prototype.impressionTimeSpent=0,t.prototype.bidRate=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.logAuctionInformation=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 2:s.winNoticeUrl=t.string();break;case 3:s.adQualityCheckUrl=t.string();break;case 4:s.vastTag=t.string();break;case 6:s.encryptedPrice=t.string();break;case 7:s.creativeId=t.string();break;case 8:s.seatId=t.string();break;case 9:s.adomain=t.string();break;case 10:s.syncedUser=t.bool();break;case 11:s.requestedFloorPrice=t.double();break;case 12:s.floorPriceFactorIndex=t.int32();break;case 13:s.campaignId=t.string();break;case 14:s.width=t.int32();break;case 15:s.height=t.int32();break;case 16:s.billingNoticeUrlList&&s.billingNoticeUrlList.length||(s.billingNoticeUrlList=[]),s.billingNoticeUrlList.push(t.string());break;case 17:s.mime=t.string();break;case 18:s.gtkpbp=t.double();break;case 19:s.successRate=t.double();break;case 20:s.impressionTimeSpent=t.int32();break;case 21:s.bidRate=t.double();break;case 22:s.dspId=t.string();break;case 23:s.cnxBidId=t.string();break;case 24:s.logAuctionInformation=t.bool();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.billingNoticeUrlList=[]),i.defaults&&(e.winNoticeUrl="",e.adQualityCheckUrl="",e.vastTag="",e.encryptedPrice="",e.creativeId="",e.seatId="",e.adomain="",e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.campaignId="",e.width=0,e.height=0,e.mime="text/html",e.gtkpbp=0,e.successRate=0,e.impressionTimeSpent=0,e.bidRate=0,e.dspId="",e.cnxBidId="",e.logAuctionInformation=!1),null!=t.winNoticeUrl&&t.hasOwnProperty("winNoticeUrl")&&(e.winNoticeUrl=t.winNoticeUrl),null!=t.adQualityCheckUrl&&t.hasOwnProperty("adQualityCheckUrl")&&(e.adQualityCheckUrl=t.adQualityCheckUrl),null!=t.vastTag&&t.hasOwnProperty("vastTag")&&(e.vastTag=t.vastTag),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&(e.encryptedPrice=t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&(e.creativeId=t.creativeId),null!=t.seatId&&t.hasOwnProperty("seatId")&&(e.seatId=t.seatId),null!=t.adomain&&t.hasOwnProperty("adomain")&&(e.adomain=t.adomain),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.campaignId&&t.hasOwnProperty("campaignId")&&(e.campaignId=t.campaignId),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),t.billingNoticeUrlList&&t.billingNoticeUrlList.length){e.billingNoticeUrlList=[];for(var s=0;s<t.billingNoticeUrlList.length;++s)e.billingNoticeUrlList[s]=t.billingNoticeUrlList[s]}return null!=t.mime&&t.hasOwnProperty("mime")&&(e.mime=t.mime),null!=t.gtkpbp&&t.hasOwnProperty("gtkpbp")&&(e.gtkpbp=i.json&&!isFinite(t.gtkpbp)?String(t.gtkpbp):t.gtkpbp),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.dspId&&t.hasOwnProperty("dspId")&&(e.dspId=t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&(e.cnxBidId=t.cnxBidId),null!=t.logAuctionInformation&&t.hasOwnProperty("logAuctionInformation")&&(e.logAuctionInformation=t.logAuctionInformation),e},t}(),c.ProtoRtbNoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.connatixReason=0,t.prototype.partnerReason=0,t.prototype.syncedUser=!1,t.prototype.requestedFloorPrice=0,t.prototype.floorPriceFactorIndex=0,t.prototype.partnerCustomHeaders="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbNoBid;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.connatixReason=t.int32();break;case 2:s.partnerReason=t.int32();break;case 3:s.syncedUser=t.bool();break;case 4:s.requestedFloorPrice=t.double();break;case 5:s.floorPriceFactorIndex=t.int32();break;case 6:s.partnerCustomHeaders=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.connatixReason=i.enums===String?"RequestException":0,e.partnerReason=i.enums===String?"Unknown":0,e.syncedUser=!1,e.requestedFloorPrice=0,e.floorPriceFactorIndex=0,e.partnerCustomHeaders=""),null!=t.connatixReason&&t.hasOwnProperty("connatixReason")&&(e.connatixReason=i.enums===String?c.ConnatixNoBidReasonEnum[t.connatixReason]:t.connatixReason),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&(e.partnerReason=i.enums===String?c.PartnerNoBidReasonEnum[t.partnerReason]:t.partnerReason),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&(e.syncedUser=t.syncedUser),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&(e.requestedFloorPrice=i.json&&!isFinite(t.requestedFloorPrice)?String(t.requestedFloorPrice):t.requestedFloorPrice),null!=t.floorPriceFactorIndex&&t.hasOwnProperty("floorPriceFactorIndex")&&(e.floorPriceFactorIndex=t.floorPriceFactorIndex),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&(e.partnerCustomHeaders=t.partnerCustomHeaders),e},t}(),c.ProtoRtbLineItem=function(){function t(t){if(this.bids=[],this.noBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.id="",t.prototype.cachedFloorPrice=0,t.prototype.bids=o.emptyArray,t.prototype.noBids=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRtbLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.id=t.string();break;case 2:s.cachedFloorPrice=t.double();break;case 3:s.bids&&s.bids.length||(s.bids=[]),s.bids.push(c.ProtoRtbBid.decode(t,t.uint32()));break;case 4:s.noBids&&s.noBids.length||(s.noBids=[]),s.noBids.push(c.ProtoRtbNoBid.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.bids=[],e.noBids=[]),i.defaults&&(e.id="",e.cachedFloorPrice=0),null!=t.id&&t.hasOwnProperty("id")&&(e.id=t.id),null!=t.cachedFloorPrice&&t.hasOwnProperty("cachedFloorPrice")&&(e.cachedFloorPrice=i.json&&!isFinite(t.cachedFloorPrice)?String(t.cachedFloorPrice):t.cachedFloorPrice),t.bids&&t.bids.length){e.bids=[];for(var s=0;s<t.bids.length;++s)e.bids[s]=c.ProtoRtbBid.toObject(t.bids[s],i)}if(t.noBids&&t.noBids.length){e.noBids=[];for(s=0;s<t.noBids.length;++s)e.noBids[s]=c.ProtoRtbNoBid.toObject(t.noBids[s],i)}return e},t}(),c.ConnatixNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="RequestException"]=0,i[t[1]="Timeout"]=1,i[t[2]="EmptyResponse"]=2,i[t[3]="InvalidResponse"]=3,i[t[4]="NoBid"]=4,i[t[5]="BidBelowFloor"]=5,i[t[6]="DealIdMismatch"]=6,i[t[7]="CsInvalidResponse"]=7,i[t[8]="CsRequestException"]=8,i[t[9]="CsEmptyResponse"]=9,i[t[11]="NoLibInPage"]=11,i}(),c.PartnerNoBidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="TechnicalError"]=1,i[t[2]="InvalidRequest"]=2,i[t[3]="KnownWebSpider"]=3,i[t[4]="SuspectedNonHumanTraffic"]=4,i[t[5]="CloudIP"]=5,i[t[6]="UnsupportedDevice"]=6,i[t[7]="BlockedPublisher"]=7,i[t[8]="UnmatchedUser"]=8,i[t[9]="DailyReaderCapMet"]=9,i[t[10]="DailyDomainCapMet"]=10,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoAdBlockDetectionTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Banner"]=0,i[t[1]="Network"]=1,i}(),c.ProtoAdClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.type=1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(26).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(34).string(t.advertiserLineItemId),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(40).int32(t.type),i},t.fromObject=function(t){if(t instanceof c.ProtoAdClickTrackingRequest)return t;var i=new c.ProtoAdClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.type){case"AdClick":case 1:i.type=1;break;case"AdClickThrough":case 2:i.type=2;break;case"AdSkipClick":case 3:i.type=3;break;case"VolumeClick":case 4:i.type=4;break;case"PauseClick":case 5:i.type=5;break;case"PlayClick":case 6:i.type=6;break;case"FullScreenClick":case 7:i.type=7;break;case"MuteClick":case 8:i.type=8;break;case"UnmuteClick":case 9:i.type=9}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="AdClick"]=1,i[t[2]="AdClickThrough"]=2,i[t[3]="AdSkipClick"]=3,i[t[4]="VolumeClick"]=4,i[t[5]="PauseClick"]=5,i[t[6]="PlayClick"]=6,i[t[7]="FullScreenClick"]=7,i[t[8]="MuteClick"]=8,i[t[9]="UnmuteClick"]=9,i}(),c.ProtoAdOpportunityRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sessionId="",t.prototype.trackingRequestMeta=null,t.prototype.adBreak=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&i.uint32(10).string(t.sessionId),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(18).fork()).ldelim(),null!=t.adBreak&&t.hasOwnProperty("adBreak")&&i.uint32(24).int32(t.adBreak),i},t.fromObject=function(t){if(t instanceof c.ProtoAdOpportunityRequest)return t;var i=new c.ProtoAdOpportunityRequest;if(null!=t.sessionId&&(i.sessionId=String(t.sessionId)),null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoAdOpportunityRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBreak){case"None":case 0:i.adBreak=0;break;case"PreRoll":case 1:i.adBreak=1;break;case"MidRoll":case 2:i.adBreak=2;break;case"PostRoll":case 3:i.adBreak=3}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAdsourceTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="Vpaid"]=1,i[t[2]="VastMedia"]=2,i[t[3]="CnxMedia"]=3,i[t[4]="Jw"]=4,i[t[5]="Ima"]=5,i[t[6]="AOL"]=6,i}(),c.ProtoAuctionLossReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="TargetingMismatch"]=0,i[t[1]="CompetitorPriority"]=1,i[t[2]="AdOpportunityEnd"]=2,i}(),c.ProtoAuctionInfoRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.cnxBidId="",t.prototype.auctionInformation=null,t.prototype.auctionLossReason=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(10).string(t.cnxBidId),null!=t.auctionInformation&&t.hasOwnProperty("auctionInformation")&&c.ProtoAuctionInformation.encode(t.auctionInformation,i.uint32(18).fork()).ldelim(),null!=t.auctionLossReason&&t.hasOwnProperty("auctionLossReason")&&i.uint32(24).int32(t.auctionLossReason),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAuctionInfoRequest;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.cnxBidId=t.string();break;case 2:s.auctionInformation=c.ProtoAuctionInformation.decode(t,t.uint32());break;case 3:s.auctionLossReason=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAuctionInfoRequest)return t;var i=new c.ProtoAuctionInfoRequest;if(null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.auctionInformation){if("object"!=typeof t.auctionInformation)throw TypeError(".ProtoAuctionInfoRequest.auctionInformation: object expected");i.auctionInformation=c.ProtoAuctionInformation.fromObject(t.auctionInformation)}switch(t.auctionLossReason){case"TargetingMismatch":case 0:i.auctionLossReason=0;break;case"CompetitorPriority":case 1:i.auctionLossReason=1;break;case"AdOpportunityEnd":case 2:i.auctionLossReason=2}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.cnxBidId="",e.auctionInformation=null,e.auctionLossReason=i.enums===String?"TargetingMismatch":0),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&(e.cnxBidId=t.cnxBidId),null!=t.auctionInformation&&t.hasOwnProperty("auctionInformation")&&(e.auctionInformation=c.ProtoAuctionInformation.toObject(t.auctionInformation,i)),null!=t.auctionLossReason&&t.hasOwnProperty("auctionLossReason")&&(e.auctionLossReason=i.enums===String?c.ProtoAuctionLossReasonEnum[t.auctionLossReason]:t.auctionLossReason),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoAuctionInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.highestObfuscatedBidPrice=0,t.prototype.secondHighestObfuscatedBidPrice=0,t.prototype.bidDensity=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.highestObfuscatedBidPrice&&t.hasOwnProperty("highestObfuscatedBidPrice")&&i.uint32(9).double(t.highestObfuscatedBidPrice),null!=t.secondHighestObfuscatedBidPrice&&t.hasOwnProperty("secondHighestObfuscatedBidPrice")&&i.uint32(17).double(t.secondHighestObfuscatedBidPrice),null!=t.bidDensity&&t.hasOwnProperty("bidDensity")&&i.uint32(24).int32(t.bidDensity),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAuctionInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.highestObfuscatedBidPrice=t.double();break;case 2:s.secondHighestObfuscatedBidPrice=t.double();break;case 3:s.bidDensity=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.ProtoAuctionInformation)return t;var i=new c.ProtoAuctionInformation;return null!=t.highestObfuscatedBidPrice&&(i.highestObfuscatedBidPrice=Number(t.highestObfuscatedBidPrice)),null!=t.secondHighestObfuscatedBidPrice&&(i.secondHighestObfuscatedBidPrice=Number(t.secondHighestObfuscatedBidPrice)),null!=t.bidDensity&&(i.bidDensity=0|t.bidDensity),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.highestObfuscatedBidPrice=0,e.secondHighestObfuscatedBidPrice=0,e.bidDensity=0),null!=t.highestObfuscatedBidPrice&&t.hasOwnProperty("highestObfuscatedBidPrice")&&(e.highestObfuscatedBidPrice=i.json&&!isFinite(t.highestObfuscatedBidPrice)?String(t.highestObfuscatedBidPrice):t.highestObfuscatedBidPrice),null!=t.secondHighestObfuscatedBidPrice&&t.hasOwnProperty("secondHighestObfuscatedBidPrice")&&(e.secondHighestObfuscatedBidPrice=i.json&&!isFinite(t.secondHighestObfuscatedBidPrice)?String(t.secondHighestObfuscatedBidPrice):t.secondHighestObfuscatedBidPrice),null!=t.bidDensity&&t.hasOwnProperty("bidDensity")&&(e.bidDensity=t.bidDensity),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoGdprConsentModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Unknown"]=0,i[t[1]="NoCmp"]=1,i[t[2]="NoConsent"]=2,i[t[3]="NoConnatixConsent"]=3,i[t[4]="NotAllDemandConsent"]=4,i[t[5]="AllGood"]=5,i}(),c.ProtoAuctionPostbidReasonEnum=function(){var t={},i=Object.create(t);return i[t[0]="CreativeError"]=0,i[t[1]="SDKFailure"]=1,i[t[2]="UnsupportedMedia"]=2,i[t[3]="TargetingMismatch"]=3,i[t[4]="PlayerError"]=4,i}(),c.ProtoPrebid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.reason=0,t.prototype.rtbRequestNumber=0,t.prototype.partnerReason=0,t.prototype.requestedFloorPrice=0,t.prototype.partnerCustomHeaders="",t.prototype.prebidJsBidderName="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.reason&&t.hasOwnProperty("reason")&&i.uint32(40).int32(t.reason),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(48).int32(t.rtbRequestNumber),null!=t.partnerReason&&t.hasOwnProperty("partnerReason")&&i.uint32(56).int32(t.partnerReason),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(65).double(t.requestedFloorPrice),null!=t.partnerCustomHeaders&&t.hasOwnProperty("partnerCustomHeaders")&&i.uint32(74).string(t.partnerCustomHeaders),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(98).string(t.prebidJsBidderName),i},t.fromObject=function(t){if(t instanceof c.ProtoPrebid)return t;var i=new c.ProtoPrebid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),t.reason){case"RequestException":case 0:i.reason=0;break;case"Timeout":case 1:i.reason=1;break;case"EmptyResponse":case 2:i.reason=2;break;case"InvalidResponse":case 3:i.reason=3;break;case"NoBid":case 4:i.reason=4;break;case"BidBelowFloor":case 5:i.reason=5;break;case"DealIdMismatch":case 6:i.reason=6;break;case"CsInvalidResponse":case 7:i.reason=7;break;case"CsRequestException":case 8:i.reason=8;break;case"CsEmptyResponse":case 9:i.reason=9;break;case"NoLibInPage":case 11:i.reason=11}switch(null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),t.partnerReason){case"Unknown":case 0:i.partnerReason=0;break;case"TechnicalError":case 1:i.partnerReason=1;break;case"InvalidRequest":case 2:i.partnerReason=2;break;case"KnownWebSpider":case 3:i.partnerReason=3;break;case"SuspectedNonHumanTraffic":case 4:i.partnerReason=4;break;case"CloudIP":case 5:i.partnerReason=5;break;case"UnsupportedDevice":case 6:i.partnerReason=6;break;case"BlockedPublisher":case 7:i.partnerReason=7;break;case"UnmatchedUser":case 8:i.partnerReason=8;break;case"DailyReaderCapMet":case 9:i.partnerReason=9;break;case"DailyDomainCapMet":case 10:i.partnerReason=10}return null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.partnerCustomHeaders&&(i.partnerCustomHeaders=String(t.partnerCustomHeaders)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.rtbRequestNumber=0,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.encryptedPrice="",t.prototype.requestedFloorPrice=0,t.prototype.prebidJsBidderName="",t.prototype.customClientPrice=0,t.prototype.dspId="",t.prototype.cnxBidId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.rtbRequestNumber&&t.hasOwnProperty("rtbRequestNumber")&&i.uint32(40).int32(t.rtbRequestNumber),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(50).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(58).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(66).string(t.rtbAdomain),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.requestedFloorPrice&&t.hasOwnProperty("requestedFloorPrice")&&i.uint32(81).double(t.requestedFloorPrice),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(113).double(t.customClientPrice),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(122).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(130).string(t.cnxBidId),i},t.fromObject=function(t){if(t instanceof c.ProtoBid)return t;var i=new c.ProtoBid;return null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.rtbRequestNumber&&(i.rtbRequestNumber=0|t.rtbRequestNumber),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.requestedFloorPrice&&(i.requestedFloorPrice=Number(t.requestedFloorPrice)),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPostBid=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.error="",t.prototype.loaded=!1,t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.prototype.auctionInformation=null,t.prototype.auctionPostbidReason=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(10).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(24).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(32).int32(t.timeSpent),null!=t.error&&t.hasOwnProperty("error")&&i.uint32(42).string(t.error),null!=t.loaded&&t.hasOwnProperty("loaded")&&i.uint32(48).bool(t.loaded),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(58).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(66).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(74).string(t.rtbAdomain),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(80).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(90).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(96).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(106).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(114).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(122).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(128).int32(t.winToAdLoadedTime),null!=t.auctionInformation&&t.hasOwnProperty("auctionInformation")&&c.ProtoAuctionInformation.encode(t.auctionInformation,i.uint32(146).fork()).ldelim(),null!=t.auctionPostbidReason&&t.hasOwnProperty("auctionPostbidReason")&&i.uint32(152).int32(t.auctionPostbidReason),i},t.fromObject=function(t){if(t instanceof c.ProtoPostBid)return t;var i=new c.ProtoPostBid;switch(null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.error&&(i.error=String(t.error)),null!=t.loaded&&(i.loaded=Boolean(t.loaded)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}if(null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),null!=t.auctionInformation){if("object"!=typeof t.auctionInformation)throw TypeError(".ProtoPostBid.auctionInformation: object expected");i.auctionInformation=c.ProtoAuctionInformation.fromObject(t.auctionInformation)}switch(t.auctionPostbidReason){case"CreativeError":case 0:i.auctionPostbidReason=0;break;case"SDKFailure":case 1:i.auctionPostbidReason=1;break;case"UnsupportedMedia":case 2:i.auctionPostbidReason=2;break;case"TargetingMismatch":case 3:i.auctionPostbidReason=3;break;case"PlayerError":case 4:i.auctionPostbidReason=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoBidTrackingsRequest=function(){function t(t){if(this.prebids=[],this.bids=[],this.postBids=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.prebids=o.emptyArray,t.prototype.bids=o.emptyArray,t.prototype.postBids=o.emptyArray,t.prototype.logEveryting=!1,t.prototype.hasGdprConsentPayload=!1,t.prototype.gdprConsentMode=0,t.prototype.useExploration=!1,t.encode=function(t,i){if(i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.prebids&&t.prebids.length)for(var e=0;e<t.prebids.length;++e)c.ProtoPrebid.encode(t.prebids[e],i.uint32(34).fork()).ldelim();if(null!=t.bids&&t.bids.length)for(e=0;e<t.bids.length;++e)c.ProtoBid.encode(t.bids[e],i.uint32(42).fork()).ldelim();if(null!=t.postBids&&t.postBids.length)for(e=0;e<t.postBids.length;++e)c.ProtoPostBid.encode(t.postBids[e],i.uint32(50).fork()).ldelim();return null!=t.logEveryting&&t.hasOwnProperty("logEveryting")&&i.uint32(56).bool(t.logEveryting),null!=t.hasGdprConsentPayload&&t.hasOwnProperty("hasGdprConsentPayload")&&i.uint32(80).bool(t.hasGdprConsentPayload),null!=t.gdprConsentMode&&t.hasOwnProperty("gdprConsentMode")&&i.uint32(88).int32(t.gdprConsentMode),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(96).bool(t.useExploration),i},t.fromObject=function(t){if(t instanceof c.ProtoBidTrackingsRequest)return t;var i=new c.ProtoBidTrackingsRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoBidTrackingsRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}if(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.prebids){if(!Array.isArray(t.prebids))throw TypeError(".ProtoBidTrackingsRequest.prebids: array expected");i.prebids=[];for(var e=0;e<t.prebids.length;++e){if("object"!=typeof t.prebids[e])throw TypeError(".ProtoBidTrackingsRequest.prebids: object expected");i.prebids[e]=c.ProtoPrebid.fromObject(t.prebids[e])}}if(t.bids){if(!Array.isArray(t.bids))throw TypeError(".ProtoBidTrackingsRequest.bids: array expected");i.bids=[];for(e=0;e<t.bids.length;++e){if("object"!=typeof t.bids[e])throw TypeError(".ProtoBidTrackingsRequest.bids: object expected");i.bids[e]=c.ProtoBid.fromObject(t.bids[e])}}if(t.postBids){if(!Array.isArray(t.postBids))throw TypeError(".ProtoBidTrackingsRequest.postBids: array expected");i.postBids=[];for(e=0;e<t.postBids.length;++e){if("object"!=typeof t.postBids[e])throw TypeError(".ProtoBidTrackingsRequest.postBids: object expected");i.postBids[e]=c.ProtoPostBid.fromObject(t.postBids[e])}}switch(null!=t.logEveryting&&(i.logEveryting=Boolean(t.logEveryting)),null!=t.hasGdprConsentPayload&&(i.hasGdprConsentPayload=Boolean(t.hasGdprConsentPayload)),t.gdprConsentMode){case"Unknown":case 0:i.gdprConsentMode=0;break;case"NoCmp":case 1:i.gdprConsentMode=1;break;case"NoConsent":case 2:i.gdprConsentMode=2;break;case"NoConnatixConsent":case 3:i.gdprConsentMode=3;break;case"NotAllDemandConsent":case 4:i.gdprConsentMode=4;break;case"AllGood":case 5:i.gdprConsentMode=5}return null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoHeavyAdBlockTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Global"]=0,i[t[1]="Script"]=1,i[t[2]="VpaidIframe"]=2,i[t[3]="OverlayIframe"]=3,i}(),c.ProtoHeavyAdTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.advertiserLineItemId="",t.prototype.heavyAdBlockTypeEnum=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(18).string(t.advertiserLineItemId),null!=t.heavyAdBlockTypeEnum&&t.hasOwnProperty("heavyAdBlockTypeEnum")&&i.uint32(24).int32(t.heavyAdBlockTypeEnum),i},t.fromObject=function(t){if(t instanceof c.ProtoHeavyAdTrackingRequest)return t;var i=new c.ProtoHeavyAdTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoHeavyAdTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.heavyAdBlockTypeEnum){case"Global":case 0:i.heavyAdBlockTypeEnum=0;break;case"Script":case 1:i.heavyAdBlockTypeEnum=1;break;case"VpaidIframe":case 2:i.heavyAdBlockTypeEnum=2;break;case"OverlayIframe":case 3:i.heavyAdBlockTypeEnum=3}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.type=0,t.prototype.clickUrl="",t.prototype.slideTitle="",t.prototype.slideNumber=0,t.prototype.slideMediaType=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.type&&t.hasOwnProperty("type")&&i.uint32(24).int32(t.type),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&i.uint32(34).string(t.clickUrl),null!=t.slideTitle&&t.hasOwnProperty("slideTitle")&&i.uint32(42).string(t.slideTitle),null!=t.slideNumber&&t.hasOwnProperty("slideNumber")&&i.uint32(48).int32(t.slideNumber),null!=t.slideMediaType&&t.hasOwnProperty("slideMediaType")&&i.uint32(56).int32(t.slideMediaType),i},t.fromObject=function(t){if(t instanceof c.ProtoMediaClickTrackingRequest)return t;var i=new c.ProtoMediaClickTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaClickTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.type){case"Click":case 0:i.type=0;break;case"UrlClick":case 1:i.type=1;break;case"VolumeClick":case 2:i.type=2;break;case"PlayClick":case 3:i.type=3;break;case"PauseClick":case 4:i.type=4;break;case"NextClick":case 5:i.type=5;break;case"PreviousClick":case 6:i.type=6;break;case"MuteClick":case 7:i.type=7;break;case"UnmuteClick":case 8:i.type=8;break;case"CloseClick":case 9:i.type=9;break;case"ScrollClick":case 10:i.type=10;break;case"GalleryClick":case 11:i.type=11;break;case"SubtitleClick":case 12:i.type=12;break;case"FullScreenClick":case 13:i.type=13;break;case"ExitFullScreenClick":case 14:i.type=14}switch(null!=t.clickUrl&&(i.clickUrl=String(t.clickUrl)),null!=t.slideTitle&&(i.slideTitle=String(t.slideTitle)),null!=t.slideNumber&&(i.slideNumber=0|t.slideNumber),t.slideMediaType){case"Image":case 0:i.slideMediaType=0;break;case"Video":case 1:i.slideMediaType=1}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoMediaClickTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Click"]=0,i[t[1]="UrlClick"]=1,i[t[2]="VolumeClick"]=2,i[t[3]="PlayClick"]=3,i[t[4]="PauseClick"]=4,i[t[5]="NextClick"]=5,i[t[6]="PreviousClick"]=6,i[t[7]="MuteClick"]=7,i[t[8]="UnmuteClick"]=8,i[t[9]="CloseClick"]=9,i[t[10]="ScrollClick"]=10,i[t[11]="GalleryClick"]=11,i[t[12]="SubtitleClick"]=12,i[t[13]="FullScreenClick"]=13,i[t[14]="ExitFullScreenClick"]=14,i}(),c.ProtoMediaTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(18).string(t.mediaGuid),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(32).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoMediaTrackingRequest)return t;var i=new c.ProtoMediaTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoMediaTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoQuartilesEnum=function(){var t={},i=Object.create(t);return i[t[0]="Start"]=0,i[t[1]="First"]=1,i[t[2]="Second"]=2,i[t[3]="Third"]=3,i[t[4]="Fourth"]=4,i}(),c.ProtoSessionAdBlockerRequest=function(){function t(t){if(this.dynamicElkFieldsValues={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.adBlockDetectionType=0,t.prototype.dynamicElkFieldsValues=o.emptyObject,t.encode=function(t,i){if(i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.adBlockDetectionType&&t.hasOwnProperty("adBlockDetectionType")&&i.uint32(16).int32(t.adBlockDetectionType),null!=t.dynamicElkFieldsValues&&t.hasOwnProperty("dynamicElkFieldsValues"))for(var e=Object.keys(t.dynamicElkFieldsValues),s=0;s<e.length;++s)i.uint32(802).fork().uint32(10).string(e[s]).uint32(18).string(t.dynamicElkFieldsValues[e[s]]).ldelim();return i},t.fromObject=function(t){if(t instanceof c.ProtoSessionAdBlockerRequest)return t;var i=new c.ProtoSessionAdBlockerRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionAdBlockerRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(t.adBlockDetectionType){case"Banner":case 0:i.adBlockDetectionType=0;break;case"Network":case 1:i.adBlockDetectionType=1}if(t.dynamicElkFieldsValues){if("object"!=typeof t.dynamicElkFieldsValues)throw TypeError(".ProtoSessionAdBlockerRequest.dynamicElkFieldsValues: object expected");i.dynamicElkFieldsValues={};for(var e=Object.keys(t.dynamicElkFieldsValues),s=0;s<e.length;++s)i.dynamicElkFieldsValues[e[s]]=String(t.dynamicElkFieldsValues[e[s]])}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSessionTimeTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.timePlayed=0,t.prototype.timePlayedInView=0,t.prototype.sessionTime=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.timePlayed&&t.hasOwnProperty("timePlayed")&&i.uint32(16).int32(t.timePlayed),null!=t.timePlayedInView&&t.hasOwnProperty("timePlayedInView")&&i.uint32(24).int32(t.timePlayedInView),null!=t.sessionTime&&t.hasOwnProperty("sessionTime")&&i.uint32(32).int32(t.sessionTime),i},t.fromObject=function(t){if(t instanceof c.ProtoSessionTimeTrackingRequest)return t;var i=new c.ProtoSessionTimeTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoSessionTimeTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.timePlayed&&(i.timePlayed=0|t.timePlayed),null!=t.timePlayedInView&&(i.timePlayedInView=0|t.timePlayedInView),null!=t.sessionTime&&(i.sessionTime=0|t.sessionTime),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.hasAdBlocker=!1,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.hasAdBlocker&&t.hasOwnProperty("hasAdBlocker")&&i.uint32(32).bool(t.hasAdBlocker),i},t.fromObject=function(t){if(t instanceof c.ProtoTrackingRequest)return t;var i=new c.ProtoTrackingRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoTrackingRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.hasAdBlocker&&(i.hasAdBlocker=Boolean(t.hasAdBlocker)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackingResponse=function(){function t(t){if(this.platformCappedLineItemIdList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.platformCappedLineItemIdList=o.emptyArray,t.prototype.impressionRevenue=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTrackingResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.errorMessage=t.string();break;case 2:s.platformCappedLineItemIdList&&s.platformCappedLineItemIdList.length||(s.platformCappedLineItemIdList=[]),s.platformCappedLineItemIdList.push(t.string());break;case 3:s.impressionRevenue=t.double();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.platformCappedLineItemIdList=[]),i.defaults&&(e.errorMessage="",e.impressionRevenue=0),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(e.errorMessage=t.errorMessage),t.platformCappedLineItemIdList&&t.platformCappedLineItemIdList.length){e.platformCappedLineItemIdList=[];for(var s=0;s<t.platformCappedLineItemIdList.length;++s)e.platformCappedLineItemIdList[s]=t.platformCappedLineItemIdList[s]}return null!=t.impressionRevenue&&t.hasOwnProperty("impressionRevenue")&&(e.impressionRevenue=i.json&&!isFinite(t.impressionRevenue)?String(t.impressionRevenue):t.impressionRevenue),e},t}(),c.ProtoVideoAdImpressionRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.syncedUser=!1,t.prototype.timeSpent=0,t.prototype.encryptedPrice="",t.prototype.creativeId="",t.prototype.rtbSeatId="",t.prototype.rtbAdomain="",t.prototype.customClientPrice=0,t.prototype.adsourceType=0,t.prototype.vastMediaType="",t.prototype.adPodSlotPosition=0,t.prototype.prebidJsBidderName="",t.prototype.dspId="",t.prototype.cnxBidId="",t.prototype.winToAdLoadedTime=0,t.prototype.startAdToImpressionTime=0,t.prototype.declaredDuration=0,t.prototype.impressionDuration=0,t.prototype.useExploration=!1,t.prototype.auctionInformation=null,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.syncedUser&&t.hasOwnProperty("syncedUser")&&i.uint32(56).bool(t.syncedUser),null!=t.timeSpent&&t.hasOwnProperty("timeSpent")&&i.uint32(64).int32(t.timeSpent),null!=t.encryptedPrice&&t.hasOwnProperty("encryptedPrice")&&i.uint32(74).string(t.encryptedPrice),null!=t.creativeId&&t.hasOwnProperty("creativeId")&&i.uint32(82).string(t.creativeId),null!=t.rtbSeatId&&t.hasOwnProperty("rtbSeatId")&&i.uint32(90).string(t.rtbSeatId),null!=t.rtbAdomain&&t.hasOwnProperty("rtbAdomain")&&i.uint32(98).string(t.rtbAdomain),null!=t.customClientPrice&&t.hasOwnProperty("customClientPrice")&&i.uint32(105).double(t.customClientPrice),null!=t.adsourceType&&t.hasOwnProperty("adsourceType")&&i.uint32(112).int32(t.adsourceType),null!=t.vastMediaType&&t.hasOwnProperty("vastMediaType")&&i.uint32(122).string(t.vastMediaType),null!=t.adPodSlotPosition&&t.hasOwnProperty("adPodSlotPosition")&&i.uint32(144).int32(t.adPodSlotPosition),null!=t.prebidJsBidderName&&t.hasOwnProperty("prebidJsBidderName")&&i.uint32(154).string(t.prebidJsBidderName),null!=t.dspId&&t.hasOwnProperty("dspId")&&i.uint32(162).string(t.dspId),null!=t.cnxBidId&&t.hasOwnProperty("cnxBidId")&&i.uint32(170).string(t.cnxBidId),null!=t.winToAdLoadedTime&&t.hasOwnProperty("winToAdLoadedTime")&&i.uint32(176).int32(t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&t.hasOwnProperty("startAdToImpressionTime")&&i.uint32(184).int32(t.startAdToImpressionTime),null!=t.declaredDuration&&t.hasOwnProperty("declaredDuration")&&i.uint32(193).double(t.declaredDuration),null!=t.impressionDuration&&t.hasOwnProperty("impressionDuration")&&i.uint32(201).double(t.impressionDuration),null!=t.useExploration&&t.hasOwnProperty("useExploration")&&i.uint32(208).bool(t.useExploration),null!=t.auctionInformation&&t.hasOwnProperty("auctionInformation")&&c.ProtoAuctionInformation.encode(t.auctionInformation,i.uint32(218).fork()).ldelim(),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionRequest)return t;var i=new c.ProtoVideoAdImpressionRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),null!=t.syncedUser&&(i.syncedUser=Boolean(t.syncedUser)),null!=t.timeSpent&&(i.timeSpent=0|t.timeSpent),null!=t.encryptedPrice&&(i.encryptedPrice=String(t.encryptedPrice)),null!=t.creativeId&&(i.creativeId=String(t.creativeId)),null!=t.rtbSeatId&&(i.rtbSeatId=String(t.rtbSeatId)),null!=t.rtbAdomain&&(i.rtbAdomain=String(t.rtbAdomain)),null!=t.customClientPrice&&(i.customClientPrice=Number(t.customClientPrice)),t.adsourceType){case"Unknown":case 0:i.adsourceType=0;break;case"Vpaid":case 1:i.adsourceType=1;break;case"VastMedia":case 2:i.adsourceType=2;break;case"CnxMedia":case 3:i.adsourceType=3;break;case"Jw":case 4:i.adsourceType=4;break;case"Ima":case 5:i.adsourceType=5;break;case"AOL":case 6:i.adsourceType=6}if(null!=t.vastMediaType&&(i.vastMediaType=String(t.vastMediaType)),null!=t.adPodSlotPosition&&(i.adPodSlotPosition=0|t.adPodSlotPosition),null!=t.prebidJsBidderName&&(i.prebidJsBidderName=String(t.prebidJsBidderName)),null!=t.dspId&&(i.dspId=String(t.dspId)),null!=t.cnxBidId&&(i.cnxBidId=String(t.cnxBidId)),null!=t.winToAdLoadedTime&&(i.winToAdLoadedTime=0|t.winToAdLoadedTime),null!=t.startAdToImpressionTime&&(i.startAdToImpressionTime=0|t.startAdToImpressionTime),null!=t.declaredDuration&&(i.declaredDuration=Number(t.declaredDuration)),null!=t.impressionDuration&&(i.impressionDuration=Number(t.impressionDuration)),null!=t.useExploration&&(i.useExploration=Boolean(t.useExploration)),null!=t.auctionInformation){if("object"!=typeof t.auctionInformation)throw TypeError(".ProtoVideoAdImpressionRequest.auctionInformation: object expected");i.auctionInformation=c.ProtoAuctionInformation.fromObject(t.auctionInformation)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdImpressionViewableRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdImpressionViewableRequest)return t;var i=new c.ProtoVideoAdImpressionViewableRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdImpressionViewableRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}return null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoVideoAdQuartilesRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.trackingRequestMeta=null,t.prototype.mediaGuid="",t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.quartile=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.trackingRequestMeta&&t.hasOwnProperty("trackingRequestMeta")&&c.MetadataModel.encode(t.trackingRequestMeta,i.uint32(10).fork()).ldelim(),null!=t.mediaGuid&&t.hasOwnProperty("mediaGuid")&&i.uint32(26).string(t.mediaGuid),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&i.uint32(42).string(t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&i.uint32(50).string(t.advertiserLineItemId),null!=t.quartile&&t.hasOwnProperty("quartile")&&i.uint32(56).int32(t.quartile),i},t.fromObject=function(t){if(t instanceof c.ProtoVideoAdQuartilesRequest)return t;var i=new c.ProtoVideoAdQuartilesRequest;if(null!=t.trackingRequestMeta){if("object"!=typeof t.trackingRequestMeta)throw TypeError(".ProtoVideoAdQuartilesRequest.trackingRequestMeta: object expected");i.trackingRequestMeta=c.MetadataModel.fromObject(t.trackingRequestMeta)}switch(null!=t.mediaGuid&&(i.mediaGuid=String(t.mediaGuid)),null!=t.publisherLineItemId&&(i.publisherLineItemId=String(t.publisherLineItemId)),null!=t.advertiserLineItemId&&(i.advertiserLineItemId=String(t.advertiserLineItemId)),t.quartile){case"Start":case 0:i.quartile=0;break;case"First":case 1:i.quartile=1;break;case"Second":case 2:i.quartile=2;break;case"Third":case 3:i.quartile=3;break;case"Fourth":case 4:i.quartile=4}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoUserSyncRequest=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.demandPartner=0,t.prototype.demandPartnerUserId="",t.encode=function(t,i){return i||(i=a.create()),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(10).string(t.userId),null!=t.demandPartner&&t.hasOwnProperty("demandPartner")&&i.uint32(16).int32(t.demandPartner),null!=t.demandPartnerUserId&&t.hasOwnProperty("demandPartnerUserId")&&i.uint32(26).string(t.demandPartnerUserId),i},t.fromObject=function(t){if(t instanceof c.ProtoUserSyncRequest)return t;var i=new c.ProtoUserSyncRequest;return null!=t.userId&&(i.userId=String(t.userId)),null!=t.demandPartner&&(i.demandPartner=0|t.demandPartner),null!=t.demandPartnerUserId&&(i.demandPartnerUserId=String(t.demandPartnerUserId)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),t.exports=c},function(t,i,e){"use strict";function s(t){return"string"==typeof t}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return n(t)&&t>0}function h(t){return s(t)&&t.length>0}function a(t){return void 0!==t}function o(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function u(t){try{if(t.contentWindow||t.contentDocument)return!0}catch(t){}return!1}e.d(i,"g",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"h",function(){return h}),e.d(i,"a",function(){return a}),e.d(i,"b",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"c",function(){return u})},function(t,i,e){"use strict";e.d(i,"v",function(){return f}),e.d(i,"R",function(){return p}),e.d(i,"Q",function(){return b}),e.d(i,"N",function(){return v}),e.d(i,"M",function(){return m}),e.d(i,"B",function(){return g}),e.d(i,"A",function(){return y}),e.d(i,"z",function(){return w}),e.d(i,"a",function(){return x}),e.d(i,"L",function(){return S}),e.d(i,"u",function(){return O}),e.d(i,"U",function(){return k}),e.d(i,"O",function(){return _}),e.d(i,"m",function(){return j}),e.d(i,"l",function(){return A}),e.d(i,"n",function(){return I}),e.d(i,"b",function(){return C}),e.d(i,"c",function(){return T}),e.d(i,"f",function(){return P}),e.d(i,"V",function(){return M}),e.d(i,"o",function(){return E}),e.d(i,"i",function(){return L}),e.d(i,"P",function(){return R}),e.d(i,"e",function(){return B}),e.d(i,"q",function(){return F}),e.d(i,"j",function(){return $}),e.d(i,"t",function(){return U}),e.d(i,"d",function(){return V}),e.d(i,"y",function(){return N}),e.d(i,"x",function(){return H}),e.d(i,"w",function(){return q}),e.d(i,"k",function(){return z}),e.d(i,"h",function(){return G}),e.d(i,"g",function(){return J}),e.d(i,"E",function(){return Q}),e.d(i,"J",function(){return X}),e.d(i,"T",function(){return Y}),e.d(i,"D",function(){return K}),e.d(i,"s",function(){return Z}),e.d(i,"r",function(){return tt}),e.d(i,"K",function(){return it}),e.d(i,"F",function(){return et}),e.d(i,"W",function(){return st}),e.d(i,"p",function(){return nt}),e.d(i,"G",function(){return rt}),e.d(i,"S",function(){return ht}),e.d(i,"H",function(){return at}),e.d(i,"C",function(){return ot}),e.d(i,"I",function(){return ct});var s=e(24),n=e(1),r=e(6),h=e(3),a=e(7),o=e(0),c=e(5);function u(t,i){t&&(t.style.display=i?"":"none")}function l(t,i){if(Object(n.a)(t.classList))return void t.classList.add(i);const e=`${t.getAttribute("class")} ${i}`;t.setAttribute("class",e)}function d(t,i){if(Object(n.a)(t.classList))return void t.classList.remove(i);const e=t.getAttribute("class").replace(i,"");t.setAttribute("class",e)}function f(t){u(t,!1)}function p(t){u(t,!0)}function b(t,i){for(const e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e])}function v(t,...i){i.forEach(i=>{t.style[i]=""})}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function g(t,i,e,s,r){if(i)try{const h=e.document.createElement("link");return h.id=t.id,h.type="text/css",h.rel="stylesheet",h.href=t.src,Object(n.b)(s)&&(h.onload=()=>{s()}),Object(n.b)(r)&&(h.onerror=t=>{i.removeChild(h),Object(n.g)(t)?r(`link_stylesheet_load_error_${t}`):r(`link_stylesheet_load_error_${function(t,i){const e=t.document.createElement("div");return e.appendChild(i),e.innerHTML}(e,h)}`)}),i.appendChild(h),h}catch(t){return null}}function y(t,i,e,s,r,h=!0,a){try{const u=e.document.createElement("script");return u.src=t.src,u.async=!0,u.type="text/javascript",t.id&&(u.id=t.id),Object(n.b)(s)&&(u.onload=()=>{s()}),u.onerror=e=>{i.removeChild(u),h&&Object(c.a)({message:a,exception:"script_load_error",callStack:t.src,level:o.ProtoLoggingLevelEnum.INFO,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r()},i.appendChild(u),u}catch(i){return h&&Object(c.a)({message:a,exception:`script_insert_error_${i.message}_${i.stack}`,callStack:t.src,level:o.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),Object(n.b)(r)&&r(),null}}function w(t,i,e){if(t)try{const s=i.document.createElement("script"),n=i.document.createTextNode(e);return s.appendChild(n),t.appendChild(s),s}catch(t){return null}}function x(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&l(t,i)})}function S(t,...i){t&&i.forEach(i=>{Object(n.h)(i)&&d(t,i)})}function O(t,i){return t&&t.classList.contains(i)}function k(t,i,e){return!!t&&(Object(n.a)(e)?e?(x(t,i),!0):(S(t,i),!1):t.classList.toggle(i))}function _(t,i,e,s=!1){t&&(d(t,i),s&&L(t),l(t,e))}const j=(t,i)=>i.document.getElementById(t),A=(t,i,e)=>i.getComputedStyle(t,e),I=(t,i)=>i.document.getElementsByClassName(t);function C(t,i="",e){const s=e.document.getElementsByTagName("head")[0],n=e.document.createElement("style");n.setAttribute("type","text/css"),n.id=i,n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.document.createTextNode(t)),s.appendChild(n)}function T(t,i){const e=i.document.getElementsByTagName("head")[0],s=i.document.createElement("link");s.setAttribute("rel","preconnect"),s.setAttribute("link",t),e.appendChild(s)}function P(t,i){const e=i.document.createElement("div");return e.innerHTML=t,e.firstElementChild}function M(t,i){i>0?(t.removeAttribute("muted"),t.muted=!1):(t.setAttribute("muted",""),t.muted=!0)}function E(t){return s.b.find(i=>{if(i.keys.fullscreenEnabled in t)return!0})}function L(t){t.getBoundingClientRect()}function R(t,i){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)})(i)}function B(t,i){return(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||function(t){return clearTimeout(t)})(i)}function D(t,i,e){const s=function(t,i){const e=function(t,i){let e=i;for(;e;){const i=e.parentNode;if(i){const e=t.reduce((t,e)=>t||i.querySelector(e),null);if(e)return e}e=i}return null}(t,i);return e?A(e,U(e)):null}(t,i);return s?function(t,i){return t.getPropertyValue(i)}(s,e):null}function F(t){const i=D(["h1","h2"],t,"font-family");return i||"inherit"}function $(t){const i=D(["p"],t,"font-family");return i||"inherit"}function U(t){try{return t.ownerDocument.defaultView}catch(t){return null}}function V(t,i){t&&i&&(Array.isArray(t)?t.forEach(t=>i.appendChild(t)):i.appendChild(t))}function N(t,i,e){let s=!1;const n=Object(r.c)(i.children);for(let i=0;i<n.length;i++)if(e-1===i||0===e){s=!0,Array.isArray(t)?H(n[i],...t):H(n[i],t);break}s||V(t,i)}function H(t,...i){if(t&&t.parentElement)for(let e=i.length;e--;)t.parentElement.insertBefore(i[e],t)}function q(t,...i){for(let e=i.length;e--;)t.parentNode.insertBefore(i[e],t.nextSibling)}function z(t,i){return Object(r.c)(i.children).indexOf(t)}function W(t){const i=U(t);if(!i)return;const{display:e}=A(t,i);"none"===e&&(t.style.display="block")}function G(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(S(t,h.n.FadeOutBase,h.n.FadeOut),i(),t.removeEventListener("transitionend",e))};x(t,h.n.FadeOutBase),W(t),L(t),t.addEventListener("transitionend",e),x(t,h.n.FadeOut)}function J(t,i=(()=>{})){const e=function(s){"opacity"===s.propertyName&&(S(t,h.n.FadeInBase,h.n.FadeIn),i(),t.removeEventListener("transitionend",e))};x(t,h.n.FadeInBase),W(t),L(t),t.addEventListener("transitionend",e),x(t,h.n.FadeIn)}function Q(t){const i=U(t);if(!i)return!0;const{display:e,opacity:s}=A(t,i);return"none"===e||"0"===s}function X(t,i){return null===t.firstChild?t.appendChild(i):t.insertBefore(i,t.firstChild)}function Y(t,i){const e=i.document.createElement("div");return e.innerHTML=t||"",e.innerText}function K(){const t=window.navigator&&window.navigator.doNotTrack||window.doNotTrack;return"1"===t||"yes"===t}function Z(t,i){const e=Object(a.f)(t).topFrame;return e[i]?e:null}function tt(t,i){let e=t,s=null;try{for(;!s;){try{e.frames[i]&&(s=e)}catch(t){}if(!t.top||t.top===e)break;e=e.parent}}catch(t){}return s}function it(t,i){let e=[];try{e=e.slice.call(i.document.querySelectorAll(t),0)}catch(t){}return e}function et(t){return-1!==Object(a.f)(t).topFrame.location.protocol.indexOf("https")}function st(t){if(!et(t))return;[window,t].forEach(t=>{if(null===t.document.querySelector("meta[content=upgrade-insecure-requests]")){const i=t.document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.content="upgrade-insecure-requests",t.document.head.appendChild(i)}})}function nt(t){return Object(a.f)(t).topFrame.document.referrer}function rt(t,i){const e=Object(a.f)(i).topFrame.location.hostname,s=Object(a.g)(t);return s&&s.hostname===e}function ht(t){t.removeAttribute("href"),t.removeAttribute("target"),t.removeAttribute("download"),t.removeAttribute("ping"),t.removeAttribute("rel"),t.removeAttribute("media"),t.removeAttribute("hreflang"),t.removeAttribute("type")}function at(t,i){try{t.onclick=t=>{const{tagName:e,className:s}=t.target;Object(c.a)({message:`${i} - click on tag:${e} class:${s}`,level:o.ProtoLoggingLevelEnum.INFO})}}catch(t){Object(c.a)({message:`${i}_Error - iframe click`,level:o.ProtoLoggingLevelEnum.WARNING,callStack:t.stack})}}function ot(t){t.currentTime=t.currentTime+.01}function ct(t,i){!function(t,i,e){const s=t.document.createElement("link");s.rel="preload",s.href=i,s.as=e,t.document.head.appendChild(s)}(i,t,"script")}},function(t,i,e){"use strict";var s,n,r;e.d(i,"h",function(){return s}),e.d(i,"g",function(){return n}),e.d(i,"j",function(){return r}),e.d(i,"t",function(){return h}),e.d(i,"p",function(){return a}),e.d(i,"i",function(){return o}),e.d(i,"k",function(){return c}),e.d(i,"f",function(){return u}),e.d(i,"m",function(){return l}),e.d(i,"l",function(){return d}),e.d(i,"e",function(){return f}),e.d(i,"o",function(){return p}),e.d(i,"n",function(){return b}),e.d(i,"r",function(){return v}),e.d(i,"s",function(){return m}),e.d(i,"b",function(){return y}),e.d(i,"c",function(){return w}),e.d(i,"d",function(){return x}),e.d(i,"q",function(){return S}),e.d(i,"a",function(){return O}),function(t){t.Invisible="cnx-mod-invisible",t.HoverStart="cnx-mod-hover-s",t.HoverEnd="cnx-mod-hover",t.HoverBoom="cnx-mod-boom",t.DisplayNone="cnx-mod-display-none",t.Active="cnx-mod-active",t.HideOnVolumeHover="cnx-hide-on-volume-hover",t.HideOnSingleVideo="cnx-hide-on-single-video",t.NoTransition="cnx-mod-no-transition",t.Collapsable="cnx-mod-collapsable",t.HasCustomScrollbar="cnx-mod-scrollbar",t.Show="cnx-mod-show",t.Hide="cnx-mod-hide",t.OnHold="cnx-mod-onhold",t.ForceLineBreak="cnx-mod-force-line-break",t.HideOnAdOverlay="cnx-mod-ad-overlay-none",t.HideOnPodLoadingScreen="cnx-mod-pod-loading-none"}(s||(s={})),function(t){t.Fullscreen="cnx-in-fullscreen",t.Ad="cnx-in-ad",t.AdOverlayType="cnx-in-ad-overlay",t.AdFullSize="cnx-in-ad-full",t.AdShowCard="cnx-ad-show-card",t.ShowControls="cnx-in-show-controls",t.Mobile="cnx-in-mobile",t.Desktop="cnx-in-desktop",t.Muted="cnx-in-mute",t.Collapsed="cnx-in-collapse",t.GalleryPortrait="cnx-in-g-portrait",t.GalleryLandscape="cnx-in-g-landscape",t.ContextController="cnx-context-controller",t.HideUI="cnx-in-hide-ui",t.PodLoadingScreen="cnx-in-pod-loading",t.CloseOn="cnx-close-on",t.CloseOff="cnx-close-off",t.CloseHover="cnx-close-hover",t.CloseFloatOn="cnx-close-float-on",t.CloseFloatOff="cnx-close-float-off",t.CloseFloatHover="cnx-close-float-hover",t.UiInView="cnx-ui-in-view"}(n||(n={})),function(t){t.Playing="cnx-is-playing",t.Paused="cnx-is-paused",t.Stopped="cnx-is-stopped",t.Preroll="cnx-is-preroll",t.Postroll="cnx-is-postroll",t.Loading="cnx-is-loading",t.LiveEnded="cnx-live-ended"}(r||(r={}));const h={Xxl:"cnx-bp-xxl-v",Xl:"cnx-bp-xl-v",Lg:"cnx-bp-lg-v",Md:"cnx-bp-md-v",Sm:"cnx-bp-sm-v",Xs:"cnx-bp-xs-v",Xxs:"cnx-bp-xxs-v"},a={Xxl:"cnx-bp-xxl-st",Xl:"cnx-bp-xl-st",Lg:"cnx-bp-lg-st",Md:"cnx-bp-md-st",Sm:"cnx-bp-sm-st",Xs:"cnx-bp-xs-st",Xxs:"cnx-bp-xxs-st"};var o,c,u,l,d,f,p;!function(t){t.Responsive="cnx-size-responsive",t.Fixed="cnx-size-fixed"}(o||(o={})),function(t){t.ClickOption="cnx-cm-item--click",t.ToggleOption="cnx-cm-item--toggle",t.SubmenuOption="cnx-cm-item--submenu",t.ItemIcon="cnx-cm-item__icon",t.ItemTitle="cnx-cm-item__title",t.ItemExtra="cnx-cm-item__extra",t.Items="cnx-cm-items",t.Container="cnx-cm-container"}(c||(c={})),function(t){t.Icons="cnx-color-icon",t.TooltipText="cnx-color-tt-text",t.TooltipBackground="cnx-color-tt-bg",t.AccentColor="cnx-color-accent",t.PrimaryColor="cnx-color-primary",t.SecondaryColor="cnx-color-secondary",t.TitleComponent="cnx-title-component",t.TitleLink="cnx-color-title-link",t.SlideProgressBar="cnx-slides-progress-bar",t.ProgressFill="cnx-progress-fill"}(u||(u={})),function(t){t.InheritTitleFontFamily="cnx-inherit-title-font-family",t.InheritBodyFontFamily="cnx-inherit-body-font-family"}(l||(l={})),function(t){t.Connatix="#0099FF",t.Icons="#FFFFFF",t.PrimaryBackground="#F1F1F1",t.PrimaryForeground="#000000",t.SecondaryBackground="#000000",t.SecondaryForeground="#F1F1F1",t.AccentForeground="#FFFFFF"}(d||(d={})),function(t){t.CaptionContainer="cnx-captions-text-holder"}(f||(f={})),function(t){t.MainClass="cnx-float",t.TransitionClass="cnx-float-transition"}(p||(p={}));const b={FadeOutBase:"cnx-fade-out-base",FadeOut:"cnx-fade-out",FadeInBase:"cnx-fade-in-base",FadeIn:"cnx-fade-in"};var v,m,g;!function(t){t.CurrentSlide="cnx-slide-current",t.NextSlide="cnx-slide-next",t.SlideLeft="cnx-slide-left",t.SlideRight="cnx-slide-right"}(v||(v={})),function(t){t.OpacityInTransition="cnx-tooltip-animation-in"}(m||(m={})),function(t){t.Card="cnx-g-card",t.CardSlot="cnx-g-card-slot",t.CardImage="cnx-g-card-image",t.CardText="cnx-g-card-text",t.CardTextContainer="cnx-g-card-text-container",t.CardPlaceholder="cnx-g-card-placeholder",t.CardRail="cnx-g-rail",t.StyleDetailed="cnx-g-style-detailed",t.StyleVisual="cnx-g-style-visual",t.ExploreMore="cnx-g-explore-more",t.FadeOut="cnx-g-fade-out"}(g||(g={}));const y={MainContainer:"cnx-main-container",MainContainerFlex:"cnx-main-container-flex",PlayerWrapper:"cnx-player-wrapper",ImagePlaceholder:"cnx-image-placeholder"},w="cnx-ratio",x="cnx-hide-video",S={Text:"cnx-skip-ad-text",Timer:"cnx-timer-loader",Icon:"cnx-skip-ad-icon",SkipAdButton:"cnx-skip-ad-button",InTimer:"cnx-skip-ad-in-timer"},O={Icon:"cnx-pod-open-new-icon",Button:"cnx-pod-read-more-btn",ButtonContainer:"cnx-pod-read-more-container",Wrapper:"cnx-pod-read-more-wrapper",BackgroundImg:"cnx-pod-loading-background",InfoContainer:"cnx-pod-loading-info",FallbackContainer:"cnx-pod-loading-fallback",SlotCountText:"cnx-pod-slot-count-text"}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),function(t){t.Fullscreen="fullscreen",t.Normal="normal",t.Thumbnail="thumbnail"}(s||(s={})),function(t){t.AdLoaded="AdLoaded",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdSkippableStateChange="AdSkippableStateChange",t.AdSizeChange="AdSizeChange",t.AdLinearChange="AdLinearChange",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdVolumeChange="AdVolumeChange",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoComplete="AdVideoComplete",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdUserAcceptInvitation="AdUserAcceptInvitation",t.AdUserMinimize="AdUserMinimize",t.AdUserClose="AdUserClose",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdLog="AdLog",t.AdError="AdError"}(n||(n={}))},function(t,i,e){"use strict";var s=e(18),n=e(25),r=e(0),h=e(13),a=e(31);const o=!0,c=30;var u=e(38);e.d(i,"a",function(){return b});var l=function(t,i){var e={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(e[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)i.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(e[s[n]]=t[s[n]])}return e};const d=500;let f=window.location&&window.location.href,p=!1;try{f=window.top.location.href}catch(t){}function b(t){var{throttle:i=c,sendMaxLog:e=!0,logJsonState:v=!1}=t,m=l(t,["throttle","sendMaxLog","logJsonState"]);if(!p)if(m.playerDestroyed&&(p=!0),m.sessionId=a.a.sessionId,o&&(a.a.incrementLogCount(m.message),a.a.isMaxLogOverflow(m.message)&&b({message:"Logging_max_log_overflow_1000",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,throttle:100,sessionId:a.a.sessionId}),a.a.isMaxLog(m.message,i)))e&&!a.a.isMaxLogSent(m.message)&&(a.a.setMaxLogSent(m.message),b({message:"Logging_max_log_sent",exception:m.message,callStack:m.callStack,level:r.ProtoLoggingLevelEnum.FATAL,sessionId:a.a.sessionId}));else{if(v&&(m.callStack=u.a.getJsonString()),void 0===m.callStack){const t=new Error(m.message);m.callStack=t.stack}if(m.callStack=m.callStack.substring(0,d),s.a.logToServer){m.pageUrl=f,m.version=s.a.version;const t={requestData:m,endpoint:h.a.endPoints.tracking.logging,ProtoRequest:r.ProtoLoggingRequest,logError:!0};m.sendBeacon?n.a.sendProtoBeaconRequest(t):n.a.sendProtoRequest(t).catch(t=>{})}s.a.logToConsole&&function(t){let i;switch(t.level){case r.ProtoLoggingLevelEnum.FATAL:i="#8B0000";break;case r.ProtoLoggingLevelEnum.WARNING:i="#FF8C00";break;case r.ProtoLoggingLevelEnum.INFO:i="#000000"}console.log(`%cConnatix Logging:\n   message: ${t.message}\n   exception: ${t.exception}\n   level: ${t.level}\n   version: ${t.version}\n   sessionId: ${t.sessionId}\n   callStack: ${t.callStack}`,`color:${i}`)}(m)}}},function(t,i,e){"use strict";e.d(i,"g",function(){return o}),e.d(i,"m",function(){return c}),e.d(i,"e",function(){return u}),e.d(i,"c",function(){return l}),e.d(i,"f",function(){return d}),e.d(i,"h",function(){return f}),e.d(i,"i",function(){return p}),e.d(i,"l",function(){return b}),e.d(i,"j",function(){return v}),e.d(i,"a",function(){return m}),e.d(i,"b",function(){return g}),e.d(i,"n",function(){return y}),e.d(i,"k",function(){return w}),e.d(i,"d",function(){return x});var s=e(32),n=e(7),r=e(1),h=e(5),a=e(0);function o(t,i){return i.indexOf(t)>-1}function c(t){return Array.isArray(t)?t:[t]}function u(t,i){const e=[],s=new Map;return i.forEach(i=>{s.has(i[t])||(s.set(i[t],!0),e.push(i))}),e}function l(t){return[].slice.call(t)}function d(t){const i=[];for(const e in t)e&&parseInt(e,10)>=0&&i.push(t[e]);return i}function f(t){return t&&t.length>0}function p(t){return t.every(t=>Object(r.d)(t))}function b(t){let i="[";for(let e=0;e<t.length;e++)i+=Object(s.c)(t[e])+(e===t.length-1?"":",");return i+="]"}function v(t,i){return!(!t||!i)&&(t.length===i.length&&(t===i||0===t.length&&0===i.length||t.every((t,e)=>Object(n.i)(t,i[e]))))}function m(t,i){return t.filter(t=>!i.includes(t))}function g(t,i){return t.filter(t=>i.includes(t))}function y(t){return t.filter((i,e)=>t.indexOf(i)===e)}function w(t,i){const e=t.indexOf(i);-1!==e?t.splice(e,1):Object(h.a)({message:"removeItemFromArray_error_item_not_found",exception:JSON.stringify(i),level:a.ProtoLoggingLevelEnum.WARNING})}function x(t){const i=[];return t.forEach(t=>i.push(t)),i}},function(t,i,e){"use strict";e.d(i,"c",function(){return a}),e.d(i,"d",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"g",function(){return u}),e.d(i,"f",function(){return l}),e.d(i,"m",function(){return d}),e.d(i,"l",function(){return f}),e.d(i,"b",function(){return p}),e.d(i,"a",function(){return b}),e.d(i,"i",function(){return v}),e.d(i,"h",function(){return m}),e.d(i,"j",function(){return g}),e.d(i,"k",function(){return y});var s=e(17),n=e(1),r=e(32),h=e(6);function a(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)})}function o(){return a().replace(/-/g,"")}function c(t,i){let e="";if(!t.err)try{e=t.topFrame.location.href}catch(t){}if(!e||0===e.length)try{e=i.top.location.href}catch(t){}if(!e||0===e.length)try{e=t.topFrame.document.referrer}catch(t){}return e}function u(t){try{const i=t.match(/^(https?:)\/\/(([^:\/?#]*)(?::([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return{href:t,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}}catch(t){return null}}function l(t){let i=t,e=null,s=!1;try{for(;i.parent.document!==i.document;){if(!i.parent.document){s=!0;break}e=i,i=i.parent}}catch(t){s=!0}return{topFrame:i,topChildFrame:e,err:s}}function d(t=[],i,e={}){t.forEach(t=>{Object(n.g)(t)&&((new i.Image).src=`${t}${Object(s.c)(t)}${function(t,i){const e=[];return Object.keys(t).forEach(s=>{const a=i?`${i}[${s}]`:s,o=t[s];if(Object(n.f)(o))e.push(`${encodeURIComponent(a)}=${Object(r.c)(o)}`);else if(Array.isArray(o))e.push(`${encodeURIComponent(a)}=${Object(h.l)(o)}`);else if(null!=o){const t=encodeURIComponent(o),i=encodeURIComponent(a);t&&i&&e.push(`${i}=${t}`)}}),e.join("&")}(e)}`)})}function f(t){const i=Math.floor(100*Math.random());let e=0,s=0;for(let n=0;n<t.length;n++)if(i<(s+=t[n])){e=n;break}return e}function p(){let t=!1;try{const i=document.createElement("audio");i.volume=1,i.muted=!1;const e=i.play();void 0!==e&&e.catch(()=>{}),t=!i.paused,i.pause()}catch(t){}return t}function b(t,i=0,...e){return setTimeout(()=>{t.apply(this,e)},i)}function v(t,i){return Object(n.f)(t)?Object(r.b)(t,i):Array.isArray(t)?Object(h.j)(t,i):t===i}function m(t,i,e){let s=0,n=t;for(;s<=e;){if(s++,n.classList.contains(i))return!0;if(!(n=n.parentElement))return!1}return!1}function g(t,i){try{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);let s=parseInt(e[1],16),n=parseInt(e[2],16),r=parseInt(e[3],16);s/=255,n/=255,r/=255;const h=Math.max(s,n,r),a=Math.min(s,n,r);let o,c,u=(h+a)/2;if(h===a)o=c=0;else{const t=h-a;switch(c=u>.5?t/(2-h-a):t/(h+a),h){case s:o=(n-r)/t+(n<r?6:0);break;case n:o=(r-s)/t+2;break;case r:o=(s-n)/t+4}o/=6}return o=Math.round(360*o),c=Math.round(100*c),u=Math.round(100*u),`hsl(${o},${c}%,${u+=i/100*(100-u)}%)`}catch(i){return t}}function y(t,i=5){return new Promise((e,s)=>{t().then(e).catch(n=>{1!==i?y(t,i-1).then(e,s):s(n)})})}},function(t,i,e){"use strict";var s;!function(t){t[t.HoldStart=0]="HoldStart",t[t.HoldEnd=1]="HoldEnd",t[t.TapLeft=2]="TapLeft",t[t.TapRight=3]="TapRight",t[t.SwipeEnd=4]="SwipeEnd",t[t.SwipeMove=5]="SwipeMove",t[t.Scroll=6]="Scroll",t[t.Click=7]="Click"}(s||(s={})),i.a=s},function(t,i,e){"use strict";var s,n,r=e(59),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoPlayspaceCodecEnum=(s={},(n=Object.create(s))[s[0]="h264"]=0,n[s[1]="hevc"]=1,n),c.ProtoPlayspaceVideoSlideRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.width=0,t.prototype.height=0,t.prototype.videoUrl="",t.prototype.codec=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSlideRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.width=t.int32();break;case 2:s.height=t.int32();break;case 3:s.videoUrl=t.string();break;case 4:s.codec=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.width=0,e.height=0,e.videoUrl="",e.codec=i.enums===String?"h264":0),null!=t.width&&t.hasOwnProperty("width")&&(e.width=t.width),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.videoUrl&&t.hasOwnProperty("videoUrl")&&(e.videoUrl=t.videoUrl),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=i.enums===String?c.ProtoPlayspaceCodecEnum[t.codec]:t.codec),e},t}(),c.ProtoPlayspaceVideoSettings=function(){function t(t){if(this.renditions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.renditions=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceVideoSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoPlayspaceVideoSlideRendition.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.renditions=[]),t.renditions&&t.renditions.length){e.renditions=[];for(var s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoPlayspaceVideoSlideRendition.toObject(t.renditions[s],i)}return e},t}(),c.ProtoPlayerOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Mixed"]=0,i[t[1]="Portrait"]=1,i[t[2]="Landscape"]=2,i}(),c.ProtoEndOfSlideCycleMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Stop"]=1,i}(),c.ProtoPlayspaceColorSchemeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Accent"]=1,i[t[2]="Primary"]=2,i[t[3]="Secondary"]=3,i}(),c.ProtoPlayspaceSlideTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Cover"]=1,i[t[2]="Description"]=2,i[t[3]="BulletList"]=3,i[t[4]="Stock"]=4,i[t[5]="Quote"]=5,i[t[6]="Instagram"]=6,i}(),c.ProtoPlayspaceSlideCapabilitiesEnum=function(){var t={},i=Object.create(t);return i[t[0]="VolumeControls"]=0,i[t[1]="PlaybackControls"]=1,i[t[2]="PlaylistControls"]=2,i[t[3]="CtaButton"]=3,i[t[4]="TopStoryTitle"]=4,i[t[5]="TopSlideTitle"]=5,i}(),c.ProtoMediaContextEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Logo"]=1,i}(),c.ProtoSlideCapabilityMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.label="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSlideCapabilityMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.label=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.label=""),null!=t.label&&t.hasOwnProperty("label")&&(e.label=t.label),e},t}(),c.ProtoPlayspaceSlideCapability=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.metadata=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideCapability;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.metadata=c.ProtoSlideCapabilityMetadata.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"VolumeControls":0,e.metadata=null),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideCapabilitiesEnum[t.type]:t.type),null!=t.metadata&&t.hasOwnProperty("metadata")&&(e.metadata=c.ProtoSlideCapabilityMetadata.toObject(t.metadata,i)),e},t}(),c.ProtoFallbackStoryResponse=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.storyId="",t.prototype.activeVersionId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoFallbackStoryResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.storyId=t.string();break;case 2:s.activeVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.storyId="",e.activeVersionId=""),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.activeVersionId&&t.hasOwnProperty("activeVersionId")&&(e.activeVersionId=t.activeVersionId),e},t}(),c.ProtoPlayspaceMediaMetadataResponse=function(){function t(t){if(this.slides=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.slides=o.emptyArray,t.prototype.storyTitle="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceMediaMetadataResponse;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.slides&&s.slides.length||(s.slides=[]),s.slides.push(c.ProtoPlayspaceSlideMetadata.decode(t,t.uint32()));break;case 2:s.storyTitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.slides=[]),i.defaults&&(e.storyTitle=""),t.slides&&t.slides.length){e.slides=[];for(var s=0;s<t.slides.length;++s)e.slides[s]=c.ProtoPlayspaceSlideMetadata.toObject(t.slides[s],i)}return null!=t.storyTitle&&t.hasOwnProperty("storyTitle")&&(e.storyTitle=t.storyTitle),e},t}(),c.ProtoPlayspaceSlideMetadata=function(){function t(t){if(this.capabilityList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaType=0,t.prototype.title="",t.prototype.clickUrl="",t.prototype.imageUrl="",t.prototype.slideDuration=0,t.prototype.videoRendition=null,t.prototype.type=0,t.prototype.coverMetadata=null,t.prototype.descriptionMetadata=null,t.prototype.bulletListMetadata=null,t.prototype.quoteMetadata=null,t.prototype.instagramMetadata=null,t.prototype.capabilityList=o.emptyArray,t.prototype.portraitImageUrl="",t.prototype.mediaContext=0,t.prototype.altText="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceSlideMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaType=t.int32();break;case 2:s.title=t.string();break;case 3:s.clickUrl=t.string();break;case 4:s.imageUrl=t.string();break;case 5:s.slideDuration=t.int32();break;case 6:s.videoRendition=c.ProtoPlayspaceVideoSettings.decode(t,t.uint32());break;case 7:s.type=t.int32();break;case 8:s.coverMetadata=c.ProtoPlayspaceCoverMetadata.decode(t,t.uint32());break;case 9:s.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.decode(t,t.uint32());break;case 10:s.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.decode(t,t.uint32());break;case 12:s.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.decode(t,t.uint32());break;case 16:s.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.decode(t,t.uint32());break;case 13:s.capabilityList&&s.capabilityList.length||(s.capabilityList=[]),s.capabilityList.push(c.ProtoPlayspaceSlideCapability.decode(t,t.uint32()));break;case 14:s.portraitImageUrl=t.string();break;case 15:s.mediaContext=t.int32();break;case 17:s.altText=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.capabilityList=[]),i.defaults&&(e.mediaType=i.enums===String?"Image":0,e.title="",e.clickUrl="",e.imageUrl="",e.slideDuration=0,e.videoRendition=null,e.type=i.enums===String?"Default":0,e.coverMetadata=null,e.descriptionMetadata=null,e.bulletListMetadata=null,e.quoteMetadata=null,e.portraitImageUrl="",e.mediaContext=i.enums===String?"None":0,e.instagramMetadata=null,e.altText=""),null!=t.mediaType&&t.hasOwnProperty("mediaType")&&(e.mediaType=i.enums===String?c.ProtoMediaTypeEnum[t.mediaType]:t.mediaType),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.clickUrl&&t.hasOwnProperty("clickUrl")&&(e.clickUrl=t.clickUrl),null!=t.imageUrl&&t.hasOwnProperty("imageUrl")&&(e.imageUrl=t.imageUrl),null!=t.slideDuration&&t.hasOwnProperty("slideDuration")&&(e.slideDuration=t.slideDuration),null!=t.videoRendition&&t.hasOwnProperty("videoRendition")&&(e.videoRendition=c.ProtoPlayspaceVideoSettings.toObject(t.videoRendition,i)),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoPlayspaceSlideTypeEnum[t.type]:t.type),null!=t.coverMetadata&&t.hasOwnProperty("coverMetadata")&&(e.coverMetadata=c.ProtoPlayspaceCoverMetadata.toObject(t.coverMetadata,i)),null!=t.descriptionMetadata&&t.hasOwnProperty("descriptionMetadata")&&(e.descriptionMetadata=c.ProtoPlayspaceDescriptionMetadata.toObject(t.descriptionMetadata,i)),null!=t.bulletListMetadata&&t.hasOwnProperty("bulletListMetadata")&&(e.bulletListMetadata=c.ProtoPlayspaceBulletListMetadata.toObject(t.bulletListMetadata,i)),null!=t.quoteMetadata&&t.hasOwnProperty("quoteMetadata")&&(e.quoteMetadata=c.ProtoPlayspaceQuoteMetadata.toObject(t.quoteMetadata,i)),t.capabilityList&&t.capabilityList.length){e.capabilityList=[];for(var s=0;s<t.capabilityList.length;++s)e.capabilityList[s]=c.ProtoPlayspaceSlideCapability.toObject(t.capabilityList[s],i)}return null!=t.portraitImageUrl&&t.hasOwnProperty("portraitImageUrl")&&(e.portraitImageUrl=t.portraitImageUrl),null!=t.mediaContext&&t.hasOwnProperty("mediaContext")&&(e.mediaContext=i.enums===String?c.ProtoMediaContextEnum[t.mediaContext]:t.mediaContext),null!=t.instagramMetadata&&t.hasOwnProperty("instagramMetadata")&&(e.instagramMetadata=c.ProtoPlayspaceInstagramMetadata.toObject(t.instagramMetadata,i)),null!=t.altText&&t.hasOwnProperty("altText")&&(e.altText=t.altText),e},t}(),c.ProtoPlayspaceCoverMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.subtitle="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceCoverMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.subtitle=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.subtitle=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.subtitle&&t.hasOwnProperty("subtitle")&&(e.subtitle=t.subtitle),e},t}(),c.ProtoPlayspaceDescriptionChunk=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.colorScheme=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionChunk;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.colorScheme=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.colorScheme=i.enums===String?"Default":0),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.colorScheme&&t.hasOwnProperty("colorScheme")&&(e.colorScheme=i.enums===String?c.ProtoPlayspaceColorSchemeEnum[t.colorScheme]:t.colorScheme),e},t}(),c.ProtoPlayspaceDescriptionMetadata=function(){function t(t){if(this.chunkList=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.chunkList=o.emptyArray,t.prototype.label=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceDescriptionMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.chunkList&&s.chunkList.length||(s.chunkList=[]),s.chunkList.push(c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32()));break;case 2:s.label=c.ProtoPlayspaceDescriptionChunk.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.chunkList=[]),i.defaults&&(e.label=null),t.chunkList&&t.chunkList.length){e.chunkList=[];for(var s=0;s<t.chunkList.length;++s)e.chunkList[s]=c.ProtoPlayspaceDescriptionChunk.toObject(t.chunkList[s],i)}return null!=t.label&&t.hasOwnProperty("label")&&(e.label=c.ProtoPlayspaceDescriptionChunk.toObject(t.label,i)),e},t}(),c.ProtoBulletOptions=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.description="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoBulletOptions;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.description=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.title="",e.description=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.description&&t.hasOwnProperty("description")&&(e.description=t.description),e},t}(),c.ProtoPlayspaceBulletListMetadata=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.title="",t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceBulletListMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.title=t.string();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(c.ProtoBulletOptions.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.title=""),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=c.ProtoBulletOptions.toObject(t.items[s],i)}return e},t}(),c.ProtoPlayspaceQuoteMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.text="",t.prototype.source="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceQuoteMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.text=t.string();break;case 2:s.source=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.text="",e.source=""),null!=t.text&&t.hasOwnProperty("text")&&(e.text=t.text),null!=t.source&&t.hasOwnProperty("source")&&(e.source=t.source),e},t}(),c.ProtoPlayspaceInstagramMetadata=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.handle="",t.prototype.createdDate="",t.prototype.likes="",t.prototype.comments="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceInstagramMetadata;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.handle=t.string();break;case 2:s.createdDate=t.string();break;case 3:s.likes=t.string();break;case 4:s.comments=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.handle="",e.createdDate="",e.likes="",e.comments=""),null!=t.handle&&t.hasOwnProperty("handle")&&(e.handle=t.handle),null!=t.createdDate&&t.hasOwnProperty("createdDate")&&(e.createdDate=t.createdDate),null!=t.likes&&t.hasOwnProperty("likes")&&(e.likes=t.likes),null!=t.comments&&t.hasOwnProperty("comments")&&(e.comments=t.comments),e},t}(),c.ProtoMediaTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Video"]=1,i}(),c.ProtoPlayspaceColorPrimary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#F1F1F1",t.prototype.foreground="#000000",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorPrimary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#F1F1F1",e.foreground="#000000"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorSecondary=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="#000000 ",t.prototype.foreground="#F1F1F1",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorSecondary;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="#000000 ",e.foreground="#F1F1F1"),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceColorAccent=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.background="",t.prototype.foreground="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspaceColorAccent;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.background=t.string();break;case 2:s.foreground=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.background="",e.foreground=""),null!=t.background&&t.hasOwnProperty("background")&&(e.background=t.background),null!=t.foreground&&t.hasOwnProperty("foreground")&&(e.foreground=t.foreground),e},t}(),c.ProtoPlayspaceRequest=function(){function t(t){if(this.tokens=[],this.forceLineItemIds=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forcePlayerId="",t.prototype.forceStoryId="",t.prototype.version=0,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.forceLineItemIds=o.emptyArray,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.disableTracking=!1,t.prototype.referrer="",t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceStoryId&&t.hasOwnProperty("forceStoryId")&&i.uint32(66).string(t.forceStoryId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(72).int32(t.version),null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(80).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(88).int32(t.clientAb1),null!=t.forceLineItemIds&&t.forceLineItemIds.length)for(e=0;e<t.forceLineItemIds.length;++e)i.uint32(98).string(t.forceLineItemIds[e]);if(null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(114).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(122).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(130).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(136).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(144).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(154).string(t.bundleId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(160).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(168).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(178).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(184).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(202).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(216).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(226).string(t.referrer),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(234).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(242).string(t.customParam5),i},t.fromObject=function(t){if(t instanceof c.ProtoPlayspaceRequest)return t;var i=new c.ProtoPlayspaceRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoPlayspaceRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}if(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceStoryId&&(i.forceStoryId=String(t.forceStoryId)),null!=t.version&&(i.version=0|t.version),null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),t.forceLineItemIds){if(!Array.isArray(t.forceLineItemIds))throw TypeError(".ProtoPlayspaceRequest.forceLineItemIds: array expected");i.forceLineItemIds=[];for(e=0;e<t.forceLineItemIds.length;++e)i.forceLineItemIds[e]=String(t.forceLineItemIds[e])}switch(null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoPlayspaceRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoPlayspaceRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoPlayspace=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.endOfCycleMode=0,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.slidesBetweenAds=0,t.prototype.minSlidesBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.html="",t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.orientation=0,t.prototype.orientationBreakpoint=0,t.prototype.activeVersion="",t.prototype.storyId="",t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.contentTitleTextColor="",t.prototype.useAccentColorForProgressBar=!1,t.prototype.primaryColorList=null,t.prototype.secondaryColorList=null,t.prototype.accentColorList=null,t.prototype.customJsCode="",t.prototype.initializationSettingsJson="",t.prototype.publisherName="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.limitClientSideApiUse=!1,t.prototype.abTestId="",t.prototype.adsMustBeSkippableIfLongerThan=31,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayspace;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.endOfCycleMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.slidesBetweenAds=t.int32();break;case 15:s.minSlidesBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.casting=t.bool();break;case 19:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 20:s.expandButton=t.bool();break;case 21:s.closeButtonMode=t.int32();break;case 22:s.floatingMode=t.int32();break;case 23:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 24:s.floatingCloseButtonMode=t.int32();break;case 25:s.floatingFixedPosition=t.int32();break;case 26:s.floatingPageElement=t.string();break;case 27:s.floatingUseElementWidth=t.bool();break;case 28:s.floatingScrollPosition=t.int32();break;case 29:s.floatingGutterX=t.int32();break;case 30:s.floatingGutterY=t.int32();break;case 31:s.floatingWidth=t.int32();break;case 35:s.html=t.string();break;case 36:s.logoUrl=t.string();break;case 37:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 38:s.adPlaybackMode=t.int32();break;case 39:s.css=t.string();break;case 40:s.sessionId=t.string();break;case 41:s.orientation=t.int32();break;case 42:s.orientationBreakpoint=t.int32();break;case 43:s.activeVersion=t.string();break;case 44:s.storyId=t.string();break;case 50:s.floatingAppendLocation=t.int32();break;case 51:s.floatingYAxisPadding=t.int32();break;case 57:s.contentTitleTextColor=t.string();break;case 58:s.useAccentColorForProgressBar=t.bool();break;case 59:s.primaryColorList=c.ProtoPlayspaceColorPrimary.decode(t,t.uint32());break;case 60:s.secondaryColorList=c.ProtoPlayspaceColorSecondary.decode(t,t.uint32());break;case 61:s.accentColorList=c.ProtoPlayspaceColorAccent.decode(t,t.uint32());break;case 62:s.customJsCode=t.string();break;case 63:s.initializationSettingsJson=t.string();break;case 64:s.publisherName=t.string();break;case 65:s.adSkippability=t.int32();break;case 66:s.skipAdAfter=t.int32();break;case 67:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 68:s.amazonTamSlotId=t.string();break;case 69:s.limitClientSideApiUse=t.bool();break;case 70:s.abTestId=t.string();break;case 71:s.adsMustBeSkippableIfLongerThan=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.endOfCycleMode=i.enums===String?"Loop":0,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.slidesBetweenAds=0,e.minSlidesBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.casting=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.html="",e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.orientation=i.enums===String?"Mixed":0,e.orientationBreakpoint=0,e.activeVersion="",e.storyId="",e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.contentTitleTextColor="",e.useAccentColorForProgressBar=!1,e.primaryColorList=null,e.secondaryColorList=null,e.accentColorList=null,e.customJsCode="",e.initializationSettingsJson="",e.publisherName="",e.adSkippability=i.enums===String?"IfLongerThan":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.limitClientSideApiUse=!1,e.abTestId="",e.adsMustBeSkippableIfLongerThan=31),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.endOfCycleMode&&t.hasOwnProperty("endOfCycleMode")&&(e.endOfCycleMode=i.enums===String?c.ProtoEndOfSlideCycleMode[t.endOfCycleMode]:t.endOfCycleMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.slidesBetweenAds&&t.hasOwnProperty("slidesBetweenAds")&&(e.slidesBetweenAds=t.slidesBetweenAds),null!=t.minSlidesBeforeFirstAd&&t.hasOwnProperty("minSlidesBeforeFirstAd")&&(e.minSlidesBeforeFirstAd=t.minSlidesBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.orientation&&t.hasOwnProperty("orientation")&&(e.orientation=i.enums===String?c.ProtoPlayerOrientationEnum[t.orientation]:t.orientation),null!=t.orientationBreakpoint&&t.hasOwnProperty("orientationBreakpoint")&&(e.orientationBreakpoint=t.orientationBreakpoint),null!=t.activeVersion&&t.hasOwnProperty("activeVersion")&&(e.activeVersion=t.activeVersion),null!=t.storyId&&t.hasOwnProperty("storyId")&&(e.storyId=t.storyId),null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.contentTitleTextColor&&t.hasOwnProperty("contentTitleTextColor")&&(e.contentTitleTextColor=t.contentTitleTextColor),null!=t.useAccentColorForProgressBar&&t.hasOwnProperty("useAccentColorForProgressBar")&&(e.useAccentColorForProgressBar=t.useAccentColorForProgressBar),null!=t.primaryColorList&&t.hasOwnProperty("primaryColorList")&&(e.primaryColorList=c.ProtoPlayspaceColorPrimary.toObject(t.primaryColorList,i)),null!=t.secondaryColorList&&t.hasOwnProperty("secondaryColorList")&&(e.secondaryColorList=c.ProtoPlayspaceColorSecondary.toObject(t.secondaryColorList,i)),null!=t.accentColorList&&t.hasOwnProperty("accentColorList")&&(e.accentColorList=c.ProtoPlayspaceColorAccent.toObject(t.accentColorList,i)),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.publisherName&&t.hasOwnProperty("publisherName")&&(e.publisherName=t.publisherName),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),null!=t.adsMustBeSkippableIfLongerThan&&t.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&(e.adsMustBeSkippableIfLongerThan=t.adsMustBeSkippableIfLongerThan),e},t}(),c.ProtoPlayspaceResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoPlayspaceResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoPlayspace.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoPlayspace.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i[t[8]="TamDeal"]=8,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.amazonDealId="",t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 48:s.amazonDealId=t.string();break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.amazonDealId="",e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.amazonDealId&&t.hasOwnProperty("amazonDealId")&&(e.amazonDealId=t.amazonDealId),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t}(),t.exports=c},function(t,i,e){"use strict";var s,n,r,h;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"b",function(){return h}),function(t){t[t.Idle=0]="Idle",t[t.Loading=1]="Loading",t[t.Ready=2]="Ready",t[t.Error=3]="Error",t[t.Capped=4]="Capped",t[t.InWin=5]="InWin",t[t.Consumed=6]="Consumed",t[t.InImpression=7]="InImpression"}(s||(s={})),function(t){t[t.Javascript=0]="Javascript",t[t.Video=1]="Video"}(n||(n={})),function(t){t.Timeout="timeout",t.TimeoutLoaded="timeout_loaded",t.ImaError="imaError",t.ImaScriptFailure="imaScriptFailure",t.ImaObjectNotFound="imaObjectNotFound",t.ImaManagerInit="imaManagerInit",t.ImaInitSdkError="initImasdkError",t.VastVideoTagEventError="vastVideoTagEventError",t.VastUnsupportedMedia="vastUnsupportedMedia",t.VastPlayPromiseReject="playPromiseReject",t.AdStopped="adStopped",t.MuteEnforce="muteEnforce",t.VpaidOnLoad="vpaidOnLoad",t.VpaidInvalid="vpaidInvalid",t.VpaidGetVpaidAdError="vpaidGetVpaidAdError",t.CnxMediaNoRenditions="noRenditions",t.CnxMediaSrcNotSupported="srcNotSupported",t.InvalidVpaidEvent="invalidVpaidEvent",t.AdxOverlayNoFill="adxOverlayNoFill",t.AdxOverlayGptScriptLoad="adxOverlayGptScriptLoad",t.DisplayIntegratorIframeLoad="displayIntegratorIframeLoad",t.EnforcementMalware="malwareDetected",t.EnforcementVolume="volumeDetected",t.Cancelled="adManagerRemoved",t.DomainBlocked="domainBlocked",t.AdaptorStartAdError="adaptorStartAdError",t.AdaptorInitAdError="adaptorInitAdError",t.WrapperStartAdError="wrapperStartAdError",t.WrapperInitAdError="wrapperInitAdError"}(r||(r={})),function(t){t.Html="text/html",t.Javascript="application/javascript"}(h||(h={}))},function(t,i,e){"use strict";e.d(i,"b",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"e",function(){return r}),e.d(i,"f",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"c",function(){return c});const s=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,n=36e5,r=6e4,h=1e3,a=60,o=864e5,c=60},function(t,i,e){"use strict";const s=e(4).b,n=Object.assign(Object.assign({},s),{AdBreakStart:"adBreakStart",AdComplete:"adComplete",AdBreakComplete:"adBreakComplete",Pause:"pause",AdPause:"adPause",Play:"play",AdPlay:"adPlay",ContentComplete:"contentComplete",SessionStart:"sessionStart",SessionEnd:"sessionEnd",PlayerResized:"playerStateResize",OnEnterFullscreen:"onEnterFullscreen",OnExitFullscreen:"onExitFullscreen",PlayerCollapsed:"playerCollapsed",PlayerExpanded:"playerExpanded",PlayError:"playError",RenderError:"renderError",AdStateChange:"adStateChange",VolumeChange:"volumeChange",Destroy:"destroy"});i.a=n},function(t,i,e){"use strict";var s=e(18);class n{constructor(t){this.base=t,this.api={pls:t.core+"core/pls",story:t.core+"core/story",rtb:t.core+"rtb/g",vpaid:t.core+"vpaid",syncUrls:t.core+"core/us",fallbackstory:t.core+"core/fallbackstory",cookie:t.core+"core/ck",tam:t.core+"core/atam"},this.tracking={session_rendered:t.tracking+"sr",session_view:t.tracking+"sv",session_time:t.tracking+"st",session_client_error:t.tracking+"e",media_quartile:t.tracking+"mq",media_click:t.tracking+"mc",ad_impression:t.tracking+"ai",bids:t.tracking+"abt",ad_impression_viewable:t.tracking+"av",ad_quartile:t.tracking+"aq",ad_click:t.tracking+"ac",contentLoad:t.tracking+"clr",noContent:t.tracking+"nc",eventService:t.tracking+"et",tracking:t.tracking+"tr",vastWin:t.tracking+"vw",rtb:t.tracking+"g",logging:t.tracking+"e",galleryCardClick:t.tracking+"cc",playerStart:t.tracking+"ps",adOpportunity:t.tracking+"ao",sessionAdBlocker:t.tracking+"sab",heavy_ad_intervention:t.tracking+"ha",auctionInformation:t.tracking+"aucinfo"},this.assets={css:{elements:`${this.$(t.assets)}connatix.player.css`,playspace:`${this.$(t.assets)}connatix.playspace.css`}}}$(t){return"development"===s.a.env?"//cd.connatix.com/":`${t}p/${s.a.version}/`}}var r=e(17),h=e(7);e.d(i,"a",function(){return a});class a{static Z(){const t=Object(r.b)("cnxEnv",Object(h.f)(window).topFrame.location.href);return t&&(s.a.domainPrefix=`-${t}`),Object.keys(this.tt).forEach(t=>{this.tt[t]=this.tt[t].replace("{{env}}",s.a.domainPrefix)}),new n(a.tt)}static get endPoints(){return null===a.it&&(a.it=a.Z()),a.it}}a.tt={a:"//a{{env}}.connatix.com/",video:"//vid.connatix.com/",image:"//img.connatix.com/",core:"https://capi{{env}}.connatix.com/",tracking:"//capi{{env}}.connatix.com/tr/",metadata:"//vid.connatix.com/",assets:"//cds{{env}}.connatix.com/",lineItems:"//lit.connatix.com/"},a.it=null},function(t,i,e){"use strict";e.d(i,"g",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"e",function(){return a}),e.d(i,"h",function(){return o}),e.d(i,"f",function(){return c}),e.d(i,"a",function(){return u}),e.d(i,"b",function(){return l});var s=e(1);function n(t,i,e,s,n){return e+(s-e)*function(t,i,e){return(e-t)/(i-t)}(t,i,n)}function r(t,i){return i.reduce((i,e)=>Math.abs(e-t)<=Math.abs(i-t)?e:i)}function h(t,i){let e=t,s=i;for(;0!==e&&0!==s;)e>s?e%=s:s%=e;return 0===e?s:e}function a(t,i){return i/100*t}function o(t,i){const e=Math.pow(10,i);return Math.round(t*e)/e}function c(t){return!Object(s.e)(t.width)||!Object(s.e)(t.height)}function u(t){const i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"}],e=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=i.length-1;s>0&&!(t>=i[s].value);s--);return t/i[s].value<i[s].value/10?(Math.floor(t/i[s].value*10)/10).toFixed(1).replace(e,"$1")+i[s].symbol:Math.floor(t/i[s].value).toFixed(0)+i[s].symbol}function l(t,i){for(let e=i;e>1;e--)t%e==0&&i%e==0&&(t/=e,i/=e);return{widthRatio:t,heightRatio:i}}},function(t,i,e){"undefined"!=typeof window&&(t.exports=function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"_",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t._)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=13)}([function(t,i,e){"use strict";e.d(i,"a",function(){return o}),e.d(i,"b",function(){return c});var s=e(5);function n(){}var r={trace:n,debug:n,log:n,warn:n,info:n,error:n},h=r,a=Object(s.a)(),o=function(t){if(a.console&&!0===t||"object"==typeof t){!function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];e.forEach(function(i){h[i]=t[i]?t[i].bind(t):function(t){var i=a.console[t];return i?function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];s[0]&&(s[0]=function(t,i){return i="["+t+"] > "+i}(t,s[0])),i.apply(a.console,s)}:n}(i)})}(t,"debug","log","info","warn","error");try{h.log()}catch(t){h=r}}else h=r},c=h},function(t,i,e){"use strict";i.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},function(t,i,e){"use strict";var s,n;e.d(i,"b",function(){return s}),e.d(i,"a",function(){return n}),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(s||(s={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(n||(n={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},function(t,i,e){"use strict";e.d(i,"b",function(){return a});var s,n=e(5),r=function(){function t(){}return t.isHeader=function(t,i){return i+10<=t.length&&73===t[i]&&68===t[i+1]&&51===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.isFooter=function(t,i){return i+10<=t.length&&51===t[i]&&68===t[i+1]&&73===t[i+2]&&t[i+3]<255&&t[i+4]<255&&t[i+6]<128&&t[i+7]<128&&t[i+8]<128&&t[i+9]<128},t.getID3Data=function(i,e){for(var s=e,n=0;t.isHeader(i,e);)n+=10,n+=t.et(i,e+6),t.isFooter(i,e+10)&&(n+=10),e+=n;if(n>0)return i.subarray(s,s+n)},t.et=function(t,i){var e=0;return e=(127&t[i])<<21,e|=(127&t[i+1])<<14,e|=(127&t[i+2])<<7,e|=127&t[i+3]},t.getTimeStamp=function(i){for(var e=t.getID3Frames(i),s=0;s<e.length;s++){var n=e[s];if(t.isTimeStampFrame(n))return t.st(n)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t.nt=function(i){var e=String.fromCharCode(i[0],i[1],i[2],i[3]),s=t.et(i,4);return{type:e,size:s,data:i.subarray(10,10+s)}},t.getID3Frames=function(i){for(var e=0,s=[];t.isHeader(i,e);){for(var n=t.et(i,e+6),r=(e+=10)+n;e+8<r;){var h=t.nt(i.subarray(e)),a=t.rt(h);a&&s.push(a),e+=h.size+10}t.isFooter(i,e)&&(e+=10)}return s},t.rt=function(i){return"PRIV"===i.type?t.ht(i):"T"===i.type[0]?t.at(i):"W"===i.type[0]?t.ot(i):void 0},t.st=function(t){if(8===t.data.byteLength){var i=new Uint8Array(t.data),e=1&i[3],s=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7];return s/=45,e&&(s+=47721858.84),Math.round(s)}},t.ht=function(i){if(!(i.size<2)){var e=t.ct(i.data,!0),s=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:s.buffer}}},t.at=function(i){if(!(i.size<2)){if("TXXX"===i.type){var e=1,s=t.ct(i.data.subarray(e),!0);e+=s.length+1;var n=t.ct(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.ct(i.data.subarray(1));return{key:i.type,data:r}}},t.ot=function(i){if("WXXX"===i.type){if(i.size<2)return;var e=1,s=t.ct(i.data.subarray(e));e+=s.length+1;var n=t.ct(i.data.subarray(e));return{key:i.type,info:s,data:n}}var r=t.ct(i.data);return{key:i.type,data:r}},t.ct=function(t,i){void 0===i&&(i=!1);var e=h();if(e){var s=e.decode(t);if(i){var n=s.indexOf("\0");return-1!==n?s.substring(0,n):s}return s.replace(/\0/g,"")}for(var r,a,o,c=t.length,u="",l=0;l<c;){if(0===(r=t[l++])&&i)return u;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(r);break;case 12:case 13:a=t[l++],u+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=t[l++],o=t[l++],u+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&o)<<0)}}return u},t}();function h(){var t=Object(n.a)();return s||void 0===t.TextDecoder||(s=new t.TextDecoder("utf-8")),s}var a=r.ct;i.a=r},function(t,i,e){"use strict";function s(){return"undefined"==typeof window?self:window.cnxRenderWindow?window.cnxRenderWindow:window}e.d(i,"a",function(){return s})},function(t,i){t.exports=void 0},function(t,i,e){var s,n,r,h,a;s=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,i,e){if(e=e||{},t=t.trim(),!(i=i.trim())){if(!e.alwaysNormalize)return t;var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return s.path=a.normalizePath(s.path),a.buildURLFromParts(s)}var r=a.parseURL(i);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return e.alwaysNormalize?(r.path=a.normalizePath(r.path),a.buildURLFromParts(r)):i;var h=a.parseURL(t);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var o=n.exec(h.path);h.netLoc=o[1],h.path=o[2]}h.netLoc&&!h.path&&(h.path="/");var c={scheme:h.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(c.netLoc=h.netLoc,"/"!==r.path[0]))if(r.path){var u=h.path,l=u.substring(0,u.lastIndexOf("/")+1)+r.path;c.path=a.normalizePath(l)}else c.path=h.path,r.params||(c.params=h.params,r.query||(c.query=h.query));return null===c.path&&(c.path=e.alwaysNormalize?a.normalizePath(r.path):r.path),a.buildURLFromParts(c)},parseURL:function(t){var i=s.exec(t);return i?{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(h,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=a},function(t,i,e){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function r(){}function h(t,i,e){this.fn=t,this.context=i,this.once=e||!1}function a(t,i,e,s,r){if("function"!=typeof e)throw new TypeError("The listener must be a function");var a=new h(e,s||t,r),o=n?n+i:i;return t.ut[o]?t.ut[o].fn?t.ut[o]=[t.ut[o],a]:t.ut[o].push(a):(t.ut[o]=a,t.lt++),t}function o(t,i){0==--t.lt?t.ut=new r:delete t.ut[i]}function c(){this.ut=new r,this.lt=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,i,e=[];if(0===this.lt)return e;for(i in t=this.ut)s.call(t,i)&&e.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(t){var i=n?n+t:t,e=this.ut[i];if(!e)return[];if(e.fn)return[e.fn];for(var s=0,r=e.length,h=new Array(r);s<r;s++)h[s]=e[s].fn;return h},c.prototype.listenerCount=function(t){var i=n?n+t:t,e=this.ut[i];return e?e.fn?1:e.length:0},c.prototype.emit=function(t,i,e,s,r,h){var a=n?n+t:t;if(!this.ut[a])return!1;var o,c,u=this.ut[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,i),!0;case 3:return u.fn.call(u.context,i,e),!0;case 4:return u.fn.call(u.context,i,e,s),!0;case 5:return u.fn.call(u.context,i,e,s,r),!0;case 6:return u.fn.call(u.context,i,e,s,r,h),!0}for(c=1,o=new Array(l-1);c<l;c++)o[c-1]=arguments[c];u.fn.apply(u.context,o)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),l){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,i);break;case 3:u[c].fn.call(u[c].context,i,e);break;case 4:u[c].fn.call(u[c].context,i,e,s);break;default:if(!o)for(d=1,o=new Array(l-1);d<l;d++)o[d-1]=arguments[d];u[c].fn.apply(u[c].context,o)}}return!0},c.prototype.on=function(t,i,e){return a(this,t,i,e,!1)},c.prototype.once=function(t,i,e){return a(this,t,i,e,!0)},c.prototype.removeListener=function(t,i,e,s){var r=n?n+t:t;if(!this.ut[r])return this;if(!i)return o(this,r),this;var h=this.ut[r];if(h.fn)h.fn!==i||s&&!h.once||e&&h.context!==e||o(this,r);else{for(var a=0,c=[],u=h.length;a<u;a++)(h[a].fn!==i||s&&!h[a].once||e&&h[a].context!==e)&&c.push(h[a]);c.length?this.ut[r]=1===c.length?c[0]:c:o(this,r)}return this},c.prototype.removeAllListeners=function(t){var i;return t?(i=n?n+t:t,this.ut[i]&&o(this,i)):(this.ut=new r,this.lt=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,i,e){"use strict";var s=e(1),n=e(2),r=function(){function t(t,i){this.subtle=t,this.aesIV=i}return t.prototype.decrypt=function(t,i){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,t)},t}(),h=function(){function t(t,i){this.subtle=t,this.key=i}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var i=t.prototype;return i.uint8ArrayToUint32Array_=function(t){for(var i=new DataView(t),e=new Uint32Array(4),s=0;s<4;s++)e[s]=i.getUint32(4*s);return e},i.initTable=function(){var t=this.sBox,i=this.invSBox,e=this.subMix,s=e[0],n=e[1],r=e[2],h=e[3],a=this.invSubMix,o=a[0],c=a[1],u=a[2],l=a[3],d=new Uint32Array(256),f=0,p=0,b=0;for(b=0;b<256;b++)d[b]=b<128?b<<1:b<<1^283;for(b=0;b<256;b++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,t[f]=v,i[v]=f;var m=d[f],g=d[m],y=d[g],w=257*d[v]^16843008*v;s[f]=w<<24|w>>>8,n[f]=w<<16|w>>>16,r[f]=w<<8|w>>>24,h[f]=w,w=16843009*y^65537*g^257*m^16843008*f,o[v]=w<<24|w>>>8,c[v]=w<<16|w>>>16,u[v]=w<<8|w>>>24,l[v]=w,f?(f=m^d[d[d[y^m]]],p^=d[d[p]]):f=p=1}},i.expandKey=function(t){for(var i=this.uint8ArrayToUint32Array_(t),e=!0,s=0;s<i.length&&e;)e=i[s]===this.key[s],s++;if(!e){this.key=i;var n=this.keySize=i.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var r,h,a,o,c=this.ksRows=4*(n+6+1),u=this.keySchedule=new Uint32Array(c),l=this.invKeySchedule=new Uint32Array(c),d=this.sBox,f=this.rcon,p=this.invSubMix,b=p[0],v=p[1],m=p[2],g=p[3];for(r=0;r<c;r++)r<n?a=u[r]=i[r]:(o=a,r%n==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=f[r/n|0]<<24):n>6&&r%n==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),u[r]=a=(u[r-n]^o)>>>0);for(h=0;h<c;h++)r=c-h,o=3&h?u[r]:u[r-4],l[h]=h<4||r<=4?o:b[d[o>>>24]]^v[d[o>>>16&255]]^m[d[o>>>8&255]]^g[d[255&o]],l[h]=l[h]>>>0}},i.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},i.decrypt=function(t,i,e,s){for(var n,r,h,a,o,c,u,l,d,f,p,b,v,m,g,y,w,x=this.keySize+6,S=this.invKeySchedule,O=this.invSBox,k=this.invSubMix,_=k[0],j=k[1],A=k[2],I=k[3],C=this.uint8ArrayToUint32Array_(e),T=C[0],P=C[1],M=C[2],E=C[3],L=new Int32Array(t),R=new Int32Array(L.length),B=this.networkToHostOrderSwap;i<L.length;){for(d=B(L[i]),f=B(L[i+1]),p=B(L[i+2]),b=B(L[i+3]),o=d^S[0],c=b^S[1],u=p^S[2],l=f^S[3],v=4,m=1;m<x;m++)n=_[o>>>24]^j[c>>16&255]^A[u>>8&255]^I[255&l]^S[v],r=_[c>>>24]^j[u>>16&255]^A[l>>8&255]^I[255&o]^S[v+1],h=_[u>>>24]^j[l>>16&255]^A[o>>8&255]^I[255&c]^S[v+2],a=_[l>>>24]^j[o>>16&255]^A[c>>8&255]^I[255&u]^S[v+3],o=n,c=r,u=h,l=a,v+=4;n=O[o>>>24]<<24^O[c>>16&255]<<16^O[u>>8&255]<<8^O[255&l]^S[v],r=O[c>>>24]<<24^O[u>>16&255]<<16^O[l>>8&255]<<8^O[255&o]^S[v+1],h=O[u>>>24]<<24^O[l>>16&255]<<16^O[o>>8&255]<<8^O[255&c]^S[v+2],a=O[l>>>24]<<24^O[o>>16&255]<<16^O[c>>8&255]<<8^O[255&u]^S[v+3],v+=3,R[i]=B(n^T),R[i+1]=B(a^P),R[i+2]=B(h^M),R[i+3]=B(r^E),T=d,P=f,M=p,E=b,i+=4}return s?(g=R.buffer,y=g.byteLength,(w=y&&new DataView(g).getUint8(y-1))?g.slice(0,y-w):g):R.buffer},i.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=e(0),c=e(5),u=function(){function t(t,i,e){var s=(void 0===e?{}:e).removePKCS7Padding,n=void 0===s||s;if(this.logEnabled=!0,this.observer=t,this.config=i,this.removePKCS7Padding=n,n)try{var r=Object(c.a)().crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var i=t.prototype;return i.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},i.decrypt=function(t,i,e,s){var n=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.b.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new a),c.expandKey(i),s(c.decrypt(t,0,e,this.removePKCS7Padding))}else{this.logEnabled&&(o.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==i&&(this.key=i,this.fastAesKey=new h(u,i)),this.fastAesKey.expandKey().then(function(h){new r(u,e).decrypt(t,h).catch(function(r){n.onWebCryptoError(r,t,i,e,s)}).then(function(t){s(t)})}).catch(function(r){n.onWebCryptoError(r,t,i,e,s)})}},i.onWebCryptoError=function(t,i,e,r,h){this.config.enableSoftwareAES?(o.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(i,e,r,h)):(o.b.error("decrypting error : "+t.message),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},i.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}(),l=e(3);function d(t,i){return 255===t[i]&&240==(246&t[i+1])}function f(t,i){return 1&t[i+1]?7:9}function p(t,i){return(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>>5}function b(t,i){return!!(i+1<t.length&&d(t,i))}function v(t,i){if(b(t,i)){var e=f(t,i);i+5<t.length&&(e=p(t,i));var s=i+e;if(s===t.length||s+1<t.length&&d(t,s))return!0}return!1}function m(t,i,e,r,h){if(!t.samplerate){var a=function(t,i,e,r){var h,a,c,u,l,d=navigator.userAgent.toLowerCase(),f=r,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(h=1+((192&i[e+2])>>>6),!((a=(60&i[e+2])>>>2)>p.length-1))return u=(1&i[e+2])<<2,u|=(192&i[e+3])>>>6,o.b.log("manifest codec:"+r+",ADTS data:type:"+h+",sampleingIndex:"+a+"["+p[a]+"Hz],channelConfig:"+u),/firefox/i.test(d)?a>=6?(h=5,l=new Array(4),c=a-3):(h=2,l=new Array(2),c=a):-1!==d.indexOf("android")?(h=2,l=new Array(2),c=a):(h=5,l=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&a>=6?c=a-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(a>=6&&1===u||/vivaldi/i.test(d))||!r&&1===u)&&(h=2,l=new Array(2)),c=a)),l[0]=h<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=u<<3,5===h&&(l[1]|=(14&c)>>1,l[2]=(1&c)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:p[a],channelCount:u,codec:"mp4a.40."+h,manifestCodec:f};t.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}(i,e,r,h);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,o.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function g(t){return 9216e4/t}function y(t,i,e,s,n){var r=function(t,i,e,s,n){var r,h,a=t.length;if(r=f(t,i),h=p(t,i),(h-=r)>0&&i+r+h<=a)return{headerLength:r,frameLength:h,stamp:e+s*n}}(i,e,s,n,g(t.samplerate));if(r){var h=r.stamp,a=r.headerLength,o=r.frameLength,c={unit:i.subarray(e+a,e+a+o),pts:h,dts:h};return t.samples.push(c),{sample:c,length:o+a}}}var w=e(4),x=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.dt={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var i=(w.a.getID3Data(t,0)||[]).length,e=t.length;i<e;i++)if(v(t,i))return o.b.log("ADTS sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=this.dt,r=w.a.getID3Data(t,0)||[],h=w.a.getTimeStamp(r),a=Object(l.a)(h)?90*h:9e4*i,c=0,u=a,d=t.length,f=r.length,p=[{pts:u,dts:u,data:r}];f<d-1;)if(b(t,f)&&f+5<d){m(n,this.observer,t,f,n.manifestCodec);var v=y(n,t,f,a,c);if(!v){o.b.log("Unable to parse AAC frame");break}f+=v.length,u=v.sample.pts,c++}else w.a.isHeader(t,f)?(r=w.a.getID3Data(t,f),p.push({pts:u,dts:u,data:r}),f+=r.length):f++;this.remuxer.remux(n,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),S=e(10),O={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,i,e,s,n){if(!(e+24>i.length)){var r=this.parseHeader(i,e);if(r&&e+r.frameLength<=i.length){var h=s+n*(9e4*r.samplesPerFrame/r.sampleRate),a={unit:i.subarray(e,e+r.frameLength),pts:h,dts:h};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(a),{sample:a,length:r.frameLength}}}},parseHeader:function(t,i){var e=t[i+1]>>3&3,s=t[i+1]>>1&3,n=t[i+2]>>4&15,r=t[i+2]>>2&3,h=t[i+2]>>1&1;if(1!==e&&0!==n&&15!==n&&3!==r){var a=3===e?3-s:3===s?3:4,o=1e3*O.BitratesMap[14*a+n-1],c=3===e?0:2===e?1:2,u=O.SamplingRateMap[3*c+r],l=t[i+3]>>6==3?1:2,d=O.SamplesCoefficients[e][s],f=O.BytesInSlot[s],p=8*d*f;return{sampleRate:u,channelCount:l,frameLength:parseInt(d*o/u+h,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,i){return 255===t[i]&&224==(224&t[i+1])&&0!=(6&t[i+1])},isHeader:function(t,i){return!!(i+1<t.length&&this.isHeaderPattern(t,i))},probe:function(t,i){if(i+1<t.length&&this.isHeaderPattern(t,i)){var e=this.parseHeader(t,i),s=4;e&&e.frameLength&&(s=e.frameLength);var n=i+s;if(n===t.length||n+1<t.length&&this.isHeaderPattern(t,n))return!0}return!1}},k=O,_=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var i=t.prototype;return i.loadWord=function(){var t=this.data,i=this.bytesAvailable,e=t.byteLength-i,s=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");s.set(t.subarray(e,e+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},i.skipBits=function(t){var i;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(i=t>>3)>>3,this.bytesAvailable-=i,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},i.readBits=function(t){var i=Math.min(this.bitsAvailable,t),e=this.word>>>32-i;return t>32&&o.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0?this.word<<=i:this.bytesAvailable>0&&this.loadWord(),(i=t-i)>0&&this.bitsAvailable?e<<i|this.readBits(i):e},i.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},i.skipUEG=function(){this.skipBits(1+this.skipLZ())},i.skipEG=function(){this.skipBits(1+this.skipLZ())},i.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},i.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},i.readBoolean=function(){return 1===this.readBits(1)},i.readUByte=function(){return this.readBits(8)},i.readUShort=function(){return this.readBits(16)},i.readUInt=function(){return this.readBits(32)},i.skipScalingList=function(t){var i,e=8,s=8;for(i=0;i<t;i++)0!==s&&(s=(e+this.readEG()+256)%256),e=0===s?e:s},i.readSPS=function(){var t,i,e,s,n,r,h,a=0,o=0,c=0,u=0,l=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),b=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);if(l(),t=l(),d(5),b(3),l(),m(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var y=f();if(3===y&&b(1),m(),m(),b(1),p())for(r=3!==y?8:12,h=0;h<r;h++)p()&&g(h<6?16:64)}m();var w=f();if(0===w)f();else if(1===w)for(b(1),v(),v(),i=f(),h=0;h<i;h++)v();m(),b(1),e=f(),s=f(),0===(n=d(1))&&b(1),b(1),p()&&(a=f(),o=f(),c=f(),u=f());var x=[1,1];if(p()&&p())switch(l()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[l()<<8|l(),l()<<8|l()]}return{width:Math.ceil(16*(e+1)-2*a-2*o),height:(2-n)*(s+1)*16-(n?2:4)*(c+u),pixelRatio:x}},i.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),j=function(){function t(t,i,e,s){this.decryptdata=e,this.discardEPB=s,this.decrypter=new u(t,i,{removePKCS7Padding:!1})}var i=t.prototype;return i.decryptBuffer=function(t,i){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,i)},i.decryptAacSample=function(t,i,e,s){var n=t[i].unit,r=n.subarray(16,n.length-n.length%16),h=r.buffer.slice(r.byteOffset,r.byteOffset+r.length),a=this;this.decryptBuffer(h,function(r){r=new Uint8Array(r),n.set(r,16),s||a.decryptAacSamples(t,i+1,e)})},i.decryptAacSamples=function(t,i,e){for(;;i++){if(i>=t.length)return void e();if(!(t[i].unit.length<32)){var s=this.decrypter.isSync();if(this.decryptAacSample(t,i,e,s),!s)return}}},i.getAvcEncryptedData=function(t){for(var i=16*Math.floor((t.length-48)/160)+16,e=new Int8Array(i),s=0,n=32;n<=t.length-16;n+=160,s+=16)e.set(t.subarray(n,n+16),s);return e},i.getAvcDecryptedUnit=function(t,i){i=new Uint8Array(i);for(var e=0,s=32;s<=t.length-16;s+=160,e+=16)t.set(i.subarray(e,e+16),s);return t},i.decryptAvcSample=function(t,i,e,s,n,r){var h=this.discardEPB(n.data),a=this.getAvcEncryptedData(h),o=this;this.decryptBuffer(a.buffer,function(a){n.data=o.getAvcDecryptedUnit(h,a),r||o.decryptAvcSamples(t,i,e+1,s)})},i.decryptAvcSamples=function(t,i,e,s){for(;;i++,e=0){if(i>=t.length)return void s();for(var n=t[i].units;!(e>=n.length);e++){var r=n[e];if(!(r.length<=48||1!==r.type&&5!==r.type)){var h=this.decrypter.isSync();if(this.decryptAvcSample(t,i,e,s,r,h),!h)return}}}},t}(),A={video:1,audio:2,id3:3,text:4},I=function(){function t(t,i,e,s){this.observer=t,this.config=e,this.typeSupported=s,this.remuxer=i,this.sampleAes=null}var i=t.prototype;return i.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new j(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(i){var e=t.ft(i);return!(e<0||(e&&o.b.warn("MPEG2-TS detected but first sync word found @ offset "+e+", junk ahead ?"),0))},t.ft=function(t){for(var i=Math.min(1e3,t.length-564),e=0;e<i;){if(71===t[e]&&71===t[e+188]&&71===t[e+376])return e;e++}return-1},t.createTrack=function(t,i){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:A[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?i:void 0}},i.resetInitSegment=function(i,e,s,n){this.pmtParsed=!1,this.pt=-1,this.bt=t.createTrack("video",n),this.dt=t.createTrack("audio",n),this.vt=t.createTrack("id3",n),this.gt=t.createTrack("text",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=s,this.yt=n},i.resetTimeStamp=function(){},i.append=function(i,e,r,h){var a,c,u,l,d,f=i.length,p=!1;this.contiguous=r;var b=this.pmtParsed,v=this.bt,m=this.dt,g=this.vt,y=v.pid,w=m.pid,x=g.pid,S=this.pt,O=v.pesData,k=m.pesData,_=g.pesData,j=this.wt,A=this.xt,I=this.St,C=this.Ot.bind(this),T=this.kt.bind(this),P=this._t.bind(this),M=this.jt.bind(this),E=t.ft(i);for(f-=(f+E)%188,a=E;a<f;a+=188)if(71===i[a]){if(c=!!(64&i[a+1]),u=((31&i[a+1])<<8)+i[a+2],(48&i[a+3])>>4>1){if((l=a+5+i[a+4])===a+188)continue}else l=a+4;switch(u){case y:c&&(O&&(d=I(O))&&C(d,!1),O={data:[],size:0}),O&&(O.data.push(i.subarray(l,a+188)),O.size+=a+188-l);break;case w:c&&(k&&(d=I(k))&&(m.isAAC?T(d):P(d)),k={data:[],size:0}),k&&(k.data.push(i.subarray(l,a+188)),k.size+=a+188-l);break;case x:c&&(_&&(d=I(_))&&M(d),_={data:[],size:0}),_&&(_.data.push(i.subarray(l,a+188)),_.size+=a+188-l);break;case 0:c&&(l+=i[l]+1),S=this.pt=j(i,l);break;case S:c&&(l+=i[l]+1);var L=A(i,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=L.avc)>0&&(v.pid=y),(w=L.audio)>0&&(m.pid=w,m.isAAC=L.isAAC),(x=L.id3)>0&&(g.pid=x),p&&!b&&(o.b.log("reparse from beginning"),p=!1,a=E-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});O&&(d=I(O))?(C(d,!0),v.pesData=null):v.pesData=O,k&&(d=I(k))?(m.isAAC?T(d):P(d),m.pesData=null):(k&&k.size&&o.b.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=k),_&&(d=I(_))?(M(d),g.pesData=null):g.pesData=_,null==this.sampleAes?this.remuxer.remux(m,v,g,this.gt,e,r,h):this.decryptAndRemux(m,v,g,this.gt,e,r,h)},i.decryptAndRemux=function(t,i,e,s,n,r,h){if(t.samples&&t.isAAC){var a=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){a.decryptAndRemuxAvc(t,i,e,s,n,r,h)})}else this.decryptAndRemuxAvc(t,i,e,s,n,r,h)},i.decryptAndRemuxAvc=function(t,i,e,s,n,r,h){if(i.samples){var a=this;this.sampleAes.decryptAvcSamples(i.samples,0,0,function(){a.remuxer.remux(t,i,e,s,n,r,h)})}else this.remuxer.remux(t,i,e,s,n,r,h)},i.destroy=function(){this.At=this.It=void 0,this.yt=0},i.wt=function(t,i){return(31&t[i+10])<<8|t[i+11]},i.xt=function(t,i,e,s){var n,r,h={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=i+3+((15&t[i+1])<<8|t[i+2])-4,i+=12+((15&t[i+10])<<8|t[i+11]);i<n;){switch(r=(31&t[i+1])<<8|t[i+2],t[i]){case 207:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 15:-1===h.audio&&(h.audio=r);break;case 21:-1===h.id3&&(h.id3=r);break;case 219:if(!s){o.b.log("unknown stream type:"+t[i]);break}case 27:-1===h.avc&&(h.avc=r);break;case 3:case 4:e?-1===h.audio&&(h.audio=r,h.isAAC=!1):o.b.log("MPEG audio found, not supported in this browser for now");break;case 36:o.b.warn("HEVC stream type found, not supported for now");break;default:o.b.log("unknown stream type:"+t[i])}i+=5+((15&t[i+3])<<8|t[i+4])}return h},i.St=function(t){var i,e,s,n,r,h,a,c,u=0,l=t.data;if(!t||0===t.size)return null;for(;l[0].length<19&&l.length>1;){var d=new Uint8Array(l[0].length+l[1].length);d.set(l[0]),d.set(l[1],l[0].length),l[0]=d,l.splice(1,1)}if(1===((i=l[0])[0]<<16)+(i[1]<<8)+i[2]){if((s=(i[4]<<8)+i[5])&&s>t.size-6)return null;if(192&(e=i[7])&&((h=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2)>4294967295&&(h-=8589934592),64&e?((a=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2)>4294967295&&(a-=8589934592),h-a>54e5&&(o.b.warn(Math.round((h-a)/9e4)+"s delta between PTS and DTS, align them"),h=a)):a=h),c=(n=i[8])+9,t.size<=c)return null;t.size-=c,r=new Uint8Array(t.size);for(var f=0,p=l.length;f<p;f++){var b=(i=l[f]).byteLength;if(c){if(c>b){c-=b;continue}i=i.subarray(c),b-=c,c=0}r.set(i,u),u+=b}return s&&(s-=n+3),{data:r,pts:h,dts:a,len:s}}return null},i.pushAccesUnit=function(t,i){if(t.units.length&&t.frame){var e=i.samples,s=e.length;if(isNaN(t.pts)){if(!s)return void i.dropped++;var n=e[s-1];t.pts=n.pts,t.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||i.sps&&(s||this.contiguous)?(t.id=s,e.push(t)):i.dropped++}t.debug.length&&o.b.log(t.pts+"/"+t.dts+":"+t.debug)},i.Ot=function(t,i){var e,s,n,r=this,h=this.bt,a=this.Ct(t.data),o=this.avcSample,c=!1,u=this.pushAccesUnit.bind(this),l=function(t,i,e,s){return{key:t,pts:i,dts:e,units:[],debug:s}};t.data=null,o&&a.length&&!h.audFound&&(u(o,h),o=this.avcSample=l(!1,t.pts,t.dts,"")),a.forEach(function(i){switch(i.type){case 1:s=!0,o||(o=r.avcSample=l(!0,t.pts,t.dts,"")),o.frame=!0;var a=i.data;if(c&&a.length>4){var d=new _(a).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(o.key=!0)}break;case 5:s=!0,o||(o=r.avcSample=l(!0,t.pts,t.dts,"")),o.key=!0,o.frame=!0;break;case 6:s=!0,(e=new _(r.discardEPB(i.data))).readUByte();for(var f=0,p=0,b=!1,v=0;!b&&e.bytesAvailable>1;){f=0;do{f+=v=e.readUByte()}while(255===v);p=0;do{p+=v=e.readUByte()}while(255===v);if(4===f&&0!==e.bytesAvailable){if(b=!0,181===e.readUByte()&&49===e.readUShort()&&1195456820===e.readUInt()&&3===e.readUByte()){var m=e.readUByte(),g=31&m,y=[m,e.readUByte()];for(n=0;n<g;n++)y.push(e.readUByte()),y.push(e.readUByte()),y.push(e.readUByte());r.Tt(r.gt.samples,{type:3,pts:t.pts,bytes:y})}}else if(5===f&&0!==e.bytesAvailable){if(b=!0,p>16){var x=[];for(n=0;n<16;n++)x.push(e.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||x.push("-");var S=p-16,O=new Uint8Array(S);for(n=0;n<S;n++)O[n]=e.readUByte();r.Tt(r.gt.samples,{pts:t.pts,payloadType:f,uuid:x.join(""),userDataBytes:O,userData:Object(w.b)(O.buffer)})}}else if(p<e.bytesAvailable)for(n=0;n<p;n++)e.readUByte()}break;case 7:if(s=!0,c=!0,!h.sps){var k=(e=new _(i.data)).readSPS();h.width=k.width,h.height=k.height,h.pixelRatio=k.pixelRatio,h.sps=[i.data],h.duration=r.yt;var j=i.data.subarray(1,4),A="avc1.";for(n=0;n<3;n++){var I=j[n].toString(16);I.length<2&&(I="0"+I),A+=I}h.codec=A}break;case 8:s=!0,h.pps||(h.pps=[i.data]);break;case 9:s=!1,h.audFound=!0,o&&u(o,h),o=r.avcSample=l(!1,t.pts,t.dts,"");break;case 12:s=!1;break;default:s=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&s&&o.units.push(i)}),i&&o&&(u(o,h),this.avcSample=null)},i.Tt=function(t,i){var e=t.length;if(e>0){if(i.pts>=t[e-1].pts)t.push(i);else for(var s=e-1;s>=0;s--)if(i.pts<t[s].pts){t.splice(s,0,i);break}}else t.push(i)},i.Pt=function(){var t,i=this.avcSample;if(!i||0===i.units.length){var e=this.bt.samples;i=e[e.length-1]}if(i){var s=i.units;t=s[s.length-1]}return t},i.Ct=function(t){var i,e,s,n,r=0,h=t.byteLength,a=this.bt,o=a.naluState||0,c=o,u=[],l=-1;for(-1===o&&(l=0,n=31&t[0],o=0,r=1);r<h;)if(i=t[r++],o)if(1!==o)if(i)if(1===i){if(l>=0)s={data:t.subarray(l,r-o-1),type:n},u.push(s);else{var d=this.Pt();if(d&&(c&&r<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(e=r-o-1)>0)){var f=new Uint8Array(d.data.byteLength+e);f.set(d.data,0),f.set(t.subarray(0,e),d.data.byteLength),d.data=f}}r<h?(l=r,n=31&t[r],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(l>=0&&o>=0&&(s={data:t.subarray(l,h),type:n,state:o},u.push(s)),0===u.length){var p=this.Pt();if(p){var b=new Uint8Array(p.data.byteLength+t.byteLength);b.set(p.data,0),b.set(t,p.data.byteLength),p.data=b}}return a.naluState=o,u},i.discardEPB=function(t){for(var i,e,s=t.byteLength,n=[],r=1;r<s-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return t;i=s-n.length,e=new Uint8Array(i);var h=0;for(r=0;r<i;h++,r++)h===n[0]&&(h++,n.shift()),e[r]=t[h];return e},i.kt=function(t){var i,e,r,h,a,c,u,l=this.dt,d=t.data,f=t.pts,p=this.aacOverFlow,v=this.aacLastPTS;if(p){var w=new Uint8Array(p.byteLength+d.byteLength);w.set(p,0),w.set(d,p.byteLength),d=w}for(r=0,a=d.length;r<a-1&&!b(d,r);r++);if(!r||(r<a-1?(c="AAC PES did not start with ADTS header,offset:"+r,u=!1):(c="no ADTS header found in AAC PES",u=!0),o.b.warn("parsing error:"+c),this.observer.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:u,reason:c}),!u)){if(m(l,this.observer,d,r,this.audioCodec),e=0,i=g(l.samplerate),p&&v){var x=v+i;Math.abs(x-f)>1&&(o.b.log("AAC: align PTS for overlapping frames by "+Math.round((x-f)/90)),f=x)}for(;r<a;){if(b(d,r)){if(r+5<a){var S=y(l,d,r,f,e);if(S){r+=S.length,h=S.sample.pts,e++;continue}}break}r++}p=r<a?d.subarray(r,a):null,this.aacOverFlow=p,this.aacLastPTS=h}},i._t=function(t){for(var i=t.data,e=i.length,s=0,n=0,r=t.pts;n<e;)if(k.isHeader(i,n)){var h=k.appendFrame(this.dt,i,n,r,s);if(!h)break;n+=h.length,s++}else n++},i.jt=function(t){this.vt.samples.push(t)},t}(),C=function(){function t(t,i,e){this.observer=t,this.config=e,this.remuxer=i}var i=t.prototype;return i.resetInitSegment=function(t,i,e,s){this.dt={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:i,duration:s,inputTimeScale:9e4}},i.resetTimeStamp=function(){},t.probe=function(t){var i,e,s=w.a.getID3Data(t,0);if(s&&void 0!==w.a.getTimeStamp(s))for(i=s.length,e=Math.min(t.length-1,i+100);i<e;i++)if(k.probe(t,i))return o.b.log("MPEG Audio sync word found !"),!0;return!1},i.append=function(t,i,e,s){for(var n=w.a.getID3Data(t,0),r=w.a.getTimeStamp(n),h=r?90*r:9e4*i,a=n.length,o=t.length,c=0,u=0,l=this.dt,d=[{pts:h,dts:h,data:n}];a<o;)if(k.isHeader(t,a)){var f=k.appendFrame(l,t,a,h,c);if(!f)break;a+=f.length,u=f.sample.pts,c++}else w.a.isHeader(t,a)?(n=w.a.getID3Data(t,a),d.push({pts:u,dts:u,data:n}),a+=n.length):a++;this.remuxer.remux(l,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},i,e,s)},i.destroy=function(){},t}(),T=function(){function t(){}return t.getSilentFrame=function(t,i){switch(t){case"mp4a.40.2":if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),P=Math.pow(2,32)-1,M=function(){function t(){}return t.init=function(){var i;for(i in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(i)&&(t.types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:e,audio:s};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=r,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var h=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,h,o,h,a),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var i,e=Array.prototype.slice.call(arguments,1),s=8,n=e.length,r=n;n--;)s+=e[n].byteLength;for((i=new Uint8Array(s))[0]=s>>24&255,i[1]=s>>16&255,i[2]=s>>8&255,i[3]=255&s,i.set(t,4),n=0,s=8;n<r;n++)i.set(e[n],s),s+=e[n].byteLength;return i},t.hdlr=function(i){return t.box(t.types.hdlr,t.HDLR_TYPES[i])},t.mdat=function(i){return t.box(t.types.mdat,i)},t.mdhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(i){return t.box(t.types.mdia,t.mdhd(i.timescale,i.duration),t.hdlr(i.type),t.minf(i))},t.mfhd=function(i){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]))},t.minf=function(i){return"audio"===i.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(i)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(i))},t.moof=function(i,e,s){return t.box(t.types.moof,t.mfhd(i),t.traf(s,e))},t.moov=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trak(i[e]);return t.box.apply(null,[t.types.moov,t.mvhd(i[0].timescale,i[0].duration)].concat(s).concat(t.mvex(i)))},t.mvex=function(i){for(var e=i.length,s=[];e--;)s[e]=t.trex(i[e]);return t.box.apply(null,[t.types.mvex].concat(s))},t.mvhd=function(i,e){e*=i;var s=Math.floor(e/(P+1)),n=Math.floor(e%(P+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)},t.sdtp=function(i){var e,s,n=i.samples||[],r=new Uint8Array(4+n.length);for(s=0;s<n.length;s++)e=n[s].flags,r[s+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return t.box(t.types.sdtp,r)},t.stbl=function(i){return t.box(t.types.stbl,t.stsd(i),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(i){var e,s,n,r=[],h=[];for(e=0;e<i.sps.length;e++)n=(s=i.sps[e]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(s));for(e=0;e<i.pps.length;e++)n=(s=i.pps[e]).byteLength,h.push(n>>>8&255),h.push(255&n),h=h.concat(Array.prototype.slice.call(s));var a=t.box(t.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|i.sps.length].concat(r).concat([i.pps.length]).concat(h))),o=i.width,c=i.height,u=i.pixelRatio[0],l=i.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,l>>24,l>>16&255,l>>8&255,255&l])))},t.esds=function(t){var i=t.config.length;return new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t.config).concat([6,1,2]))},t.mp4a=function(i){var e=i.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),t.box(t.types.esds,t.esds(i)))},t.mp3=function(i){var e=i.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},t.stsd=function(i){return"audio"===i.type?i.isAAC||"mp3"!==i.codec?t.box(t.types.stsd,t.STSD,t.mp4a(i)):t.box(t.types.stsd,t.STSD,t.mp3(i)):t.box(t.types.stsd,t.STSD,t.avc1(i))},t.tkhd=function(i){var e=i.id,s=i.duration*i.timescale,n=i.width,r=i.height,h=Math.floor(s/(P+1)),a=Math.floor(s%(P+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,h>>24,h>>16&255,h>>8&255,255&h,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]))},t.traf=function(i,e){var s=t.sdtp(i),n=i.id,r=Math.floor(e/(P+1)),h=Math.floor(e%(P+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,h>>24,h>>16&255,h>>8&255,255&h])),t.trun(i,s.length+16+20+8+16+8+8),s)},t.trak=function(i){return i.duration=i.duration||4294967295,t.box(t.types.trak,t.tkhd(i),t.mdia(i))},t.trex=function(i){var e=i.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(i,e){var s,n,r,h,a,o,c=i.samples||[],u=c.length,l=12+16*u,d=new Uint8Array(l);for(e+=8+l,d.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),s=0;s<u;s++)r=(n=c[s]).duration,h=n.size,a=n.flags,o=n.cts,d.set([r>>>24&255,r>>>16&255,r>>>8&255,255&r,h>>>24&255,h>>>16&255,h>>>8&255,255&h,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*s);return t.box(t.types.trun,d)},t.initSegment=function(i){t.types||t.init();var e,s=t.moov(i);return(e=new Uint8Array(t.FTYP.byteLength+s.byteLength)).set(t.FTYP),e.set(s,t.FTYP.byteLength),e},t}();function E(t,i,e,s){void 0===e&&(e=1),void 0===s&&(s=!1);var n=t*i*e;return s?Math.round(n):n}function L(t,i){return void 0===i&&(i=!1),E(t,1e3,1/9e4,i)}function R(t,i){return void 0===i&&(i=1),E(t,9e4,1/i)}var B,D=R(10),F=R(.2),$=function(){function t(t,i,e,s){this.observer=t,this.config=i,this.typeSupported=e;var n=navigator.userAgent;this.isSafari=s&&s.indexOf("Apple")>-1&&n&&!n.match("CriOS"),this.ISGenerated=!1}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(t){this.At=this.It=t},i.resetInitSegment=function(){this.ISGenerated=!1},i.remux=function(t,i,e,n,r,h,a){if(this.ISGenerated||this.generateIS(t,i,r),this.ISGenerated){var c=t.samples.length,u=i.samples.length,l=r,d=r;if(c&&u){var f=(t.samples[0].pts-i.samples[0].pts)/i.inputTimeScale;l+=Math.max(0,f),d+=Math.max(0,-f)}if(c){t.timescale||(o.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,i,r));var p,b=this.remuxAudio(t,l,h,a);u&&(b&&(p=b.endPTS-b.startPTS),i.timescale||(o.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,i,r)),this.remuxVideo(i,d,h,p,a))}else if(u){var v=this.remuxVideo(i,d,h,0,a);v&&t.codec&&this.remuxEmptyAudio(t,l,h,v)}}e.samples.length&&this.remuxID3(e,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(s.a.FRAG_PARSED)},i.generateIS=function(t,i,e){var r,h,a=this.observer,c=t.samples,u=i.samples,l=this.typeSupported,d="audio/mp4",f={},p={tracks:f},b=void 0===this.At;if(b&&(r=h=1/0),t.config&&c.length&&(t.timescale=t.samplerate,o.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(l.mpeg?(d="audio/mpeg",t.codec=""):l.mp3&&(t.codec="mp3")),f.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&l.mpeg?new Uint8Array:M.initSegment([t]),metadata:{channelCount:t.channelCount}},b&&(r=h=c[0].pts-t.inputTimeScale*e)),i.sps&&i.pps&&u.length){var v=i.inputTimeScale;i.timescale=v,f.video={container:"video/mp4",codec:i.codec,initSegment:M.initSegment([i]),metadata:{width:i.width,height:i.height}},b&&(r=Math.min(r,u[0].pts-v*e),h=Math.min(h,u[0].dts-v*e),this.observer.trigger(s.a.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(f).length?(a.trigger(s.a.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,b&&(this.At=r,this.It=h)):a.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},i.remuxVideo=function(t,i,e,r,h){var a,c,u,l,d,f,p,b=8,v=t.timescale,m=t.samples,g=[],y=m.length,w=this.Mt,x=this.At,S=this.nextAvcDts,O=this.isSafari;if(0!==y){O&&(e|=m.length&&S&&(h&&Math.abs(i-S/v)<.1||Math.abs(m[0].pts-S-x)<v/5)),e||(S=i*v),m.forEach(function(t){t.pts=w(t.pts-x,S),t.dts=w(t.dts-x,S)}),m.sort(function(t,i){var e=t.dts-i.dts,s=t.pts-i.pts;return e||s||t.id-i.id});var k=m.reduce(function(t,i){return Math.max(Math.min(t,i.pts-i.dts),-1*F)},0);if(k<0){o.b.warn("PTS < DTS detected in video samples, shifting DTS by "+L(k,!0)+" ms to overcome this issue");for(var _=0;_<m.length;_++)m[_].dts+=k}var j=m[0];d=Math.max(j.dts,0),l=Math.max(j.pts,0);var A=d-S;e&&A&&(A>1?o.b.log("AVC: "+L(A,!0)+" ms hole between fragments detected,filling it"):A<-1&&o.b.log("AVC: "+L(-A,!0)+" ms overlapping between fragments detected"),d=S,m[0].dts=d,l=Math.max(l-A,S),m[0].pts=l,o.b.log("Video: PTS/DTS adjusted: "+L(l,!0)+"/"+L(d,!0)+", delta: "+L(A,!0)+" ms")),j=m[m.length-1],p=Math.max(j.dts,0),f=Math.max(j.pts,0,p),O&&(a=Math.round((p-d)/(m.length-1)));for(var I=0,C=0,T=0;T<y;T++){for(var P=m[T],E=P.units,R=E.length,B=0,D=0;D<R;D++)B+=E[D].data.length;C+=B,I+=R,P.length=B,P.dts=O?d+T*a:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var $=C+4*I+8;try{c=new Uint8Array($)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:$,reason:"fail allocating video mdat "+$})}var U=new DataView(c.buffer);U.setUint32(0,$),c.set(M.types.mdat,4);for(var V=0;V<y;V++){for(var N=m[V],H=N.units,q=0,z=void 0,W=0,G=H.length;W<G;W++){var J=H[W],Q=J.data,X=J.data.byteLength;U.setUint32(b,X),b+=4,c.set(Q,b),b+=X,q+=4+X}if(O)z=Math.max(0,a*Math.round((N.pts-N.dts)/a));else{if(V<y-1)a=m[V+1].dts-N.dts;else{var Y=this.config,K=N.dts-m[V>0?V-1:V].dts;if(Y.stretchShortVideoTrack){var Z=Y.maxBufferHole,tt=Math.floor(Z*v),it=(r?l+r*v:this.nextAudioPts)-N.pts;it>tt?((a=it-K)<0&&(a=K),o.b.log("It is approximately "+L(it,!1)+" ms to the next segment; using duration "+L(a,!1)+" ms for the last video frame.")):a=K}else a=K}z=Math.round(N.pts-N.dts)}g.push({size:q,duration:a,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=p+a;var et=t.dropped;if(t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var st=g[0].flags;st.dependsOn=2,st.isNonSync=0}t.samples=g,u=M.moof(t.sequenceNumber++,d,t),t.samples=[];var nt={data1:u,data2:c,startPTS:l/v,endPTS:(f+a)/v,startDTS:d/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:et};return this.observer.trigger(s.a.FRAG_PARSING_DATA,nt),nt}},i.remuxAudio=function(t,i,e,r){var h,a,c,u,l,d,f=t.inputTimeScale,p=t.timescale,b=f/p,v=(t.isAAC?1024:1152)*b,m=this.Mt,g=this.At,y=!t.isAAC&&this.typeSupported.mpeg,w=y?0:8,x=t.samples,S=[],O=this.nextAudioPts;if(e|=x.length&&O&&(r&&Math.abs(i-O/f)<.1||Math.abs(x[0].pts-O-g)<20*v),x.forEach(function(t){t.pts=t.dts=m(t.pts-g,i*f)}),0!==(x=x.filter(function(t){return t.pts>=0})).length){if(e||(O=r?i*f:x[0].pts),t.isAAC)for(var k=this.config.maxAudioFramesDrift,_=0,j=O;_<x.length;){var A,I=x[_];if((A=I.pts-j)<=-k*v)o.b.warn("Dropping 1 audio frame @ "+L(j,!0)+" ms due to "+L(A,!0)+" ms overlap."),x.splice(_,1);else if(A>=k*v&&A<D&&j){var C=Math.round(A/v);o.b.warn("Injecting "+C+" audio frames @ "+L(j,!0)+" ms due to "+L(j,!0)+" ms gap.");for(var P=0;P<C;P++){var E=Math.max(j,0);(a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=I.unit.subarray()),x.splice(_,0,{unit:a,pts:E,dts:E}),j+=v,_++}I.pts=I.dts=j,j+=v,_++}else Math.abs(A),I.pts=I.dts=j,j+=v,_++}for(var R=x.length,B=0;R--;)B+=x[R].unit.byteLength;for(var F=0,$=x.length;F<$;F++){var U=x[F],V=U.unit,N=U.pts;if(void 0!==d)h.duration=Math.round((N-d)/b);else{var H=N-O,q=0;if(e&&t.isAAC&&H){if(H>0&&H<D)q=Math.round((N-O)/v),o.b.log(L(H,!0)+" ms hole between AAC samples detected,filling it"),q>0&&((a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=V.subarray()),B+=q*a.length);else if(H<-12){o.b.log("drop overlapping AAC sample, expected/parsed/delta: "+L(O,!0)+" ms / "+L(N,!0)+" ms / "+L(-H,!0)+" ms"),B-=V.byteLength;continue}N=O}if(l=N,!(B>0))return;B+=w;try{c=new Uint8Array(B)}catch(t){return void this.observer.trigger(s.a.ERROR,{type:n.b.MUX_ERROR,details:n.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}y||(new DataView(c.buffer).setUint32(0,B),c.set(M.types.mdat,4));for(var z=0;z<q;z++)(a=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=V.subarray()),c.set(a,w),w+=a.byteLength,h={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(h)}c.set(V,w);var W=V.byteLength;w+=W,h={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(h),d=N}var G=0;if((R=S.length)>=2&&(G=S[R-2].duration,h.duration=G),R){this.nextAudioPts=O=d+b*G,t.samples=S,u=y?new Uint8Array:M.moof(t.sequenceNumber++,l/b,t),t.samples=[];var J=l/f,Q=O/f,X={data1:u,data2:c,startPTS:J,endPTS:Q,startDTS:J,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:R};return this.observer.trigger(s.a.FRAG_PARSING_DATA,X),X}return null}},i.remuxEmptyAudio=function(t,i,e,s){var n=t.inputTimeScale,r=n/(t.samplerate?t.samplerate:n),h=this.nextAudioPts,a=(void 0!==h?h:s.startDTS*n)+this.It,c=s.endDTS*n+this.It,u=1024*r,l=Math.ceil((c-a)/u),d=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.b.warn("remux empty Audio"),d){for(var f=[],p=0;p<l;p++){var b=a+p*u;f.push({unit:d,pts:b,dts:b})}t.samples=f,this.remuxAudio(t,i,e)}else o.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},i.remuxID3=function(t){var i,e=t.samples.length,n=t.inputTimeScale,r=this.At,h=this.It;if(e){for(var a=0;a<e;a++)(i=t.samples[a]).pts=(i.pts-r)/n,i.dts=(i.dts-h)/n;this.observer.trigger(s.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},i.remuxText=function(t){t.samples.sort(function(t,i){return t.pts-i.pts});var i,e=t.samples.length,n=t.inputTimeScale,r=this.At;if(e){for(var h=0;h<e;h++)(i=t.samples[h]).pts=(i.pts-r)/n;this.observer.trigger(s.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},i.Mt=function(t,i){var e;if(void 0===i)return t;for(e=i<t?-8589934592:8589934592;Math.abs(t-i)>4294967296;)t+=e;return t},t}(),U=function(){function t(t){this.observer=t}var i=t.prototype;return i.destroy=function(){},i.resetTimeStamp=function(){},i.resetInitSegment=function(){},i.remux=function(t,i,e,n,r,h,a,o){var c=this.observer,u="";t&&(u+="audio"),i&&(u+="video"),c.trigger(s.a.FRAG_PARSING_DATA,{data1:o,startPTS:r,startDTS:r,type:u,hasAudio:!!t,hasVideo:!!i,nb:1,dropped:0}),c.trigger(s.a.FRAG_PARSED)},t}(),V=Object(c.a)();try{B=V.performance.now.bind(V.performance)}catch(t){o.b.debug("Unable to use Performance API on this environment"),B=V.Date.now}var N=function(){function t(t,i,e,s){this.observer=t,this.typeSupported=i,this.config=e,this.vendor=s}var i=t.prototype;return i.destroy=function(){var t=this.demuxer;t&&t.destroy()},i.push=function(t,i,e,n,r,h,a,o,c,l,d,f){var p=this;if(t.byteLength>0&&null!=i&&null!=i.key&&"AES-128"===i.method){var b=this.decrypter;null==b&&(b=this.decrypter=new u(this.observer,this.config));var v=B();b.decrypt(t,i.key.buffer,i.iv.buffer,function(t){var u=B();p.observer.trigger(s.a.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:u}}),p.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,l,d,f)})}else this.pushDecrypted(new Uint8Array(t),i,new Uint8Array(e),n,r,h,a,o,c,l,d,f)},i.pushDecrypted=function(t,i,e,r,h,a,o,c,u,l,d,f){var p=this.demuxer;if(!p||(o||c)&&!this.probe(t)){for(var b=this.observer,v=this.typeSupported,m=this.config,g=[{demux:I,remux:$},{demux:S.a,remux:U},{demux:x,remux:$},{demux:C,remux:$}],y=0,w=g.length;y<w;y++){var O=g[y],k=O.demux.probe;if(k(t)){var _=this.remuxer=new O.remux(b,m,v,this.vendor);p=new O.demux(b,_,m,v),this.probe=k;break}}if(!p)return void b.trigger(s.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var j=this.remuxer;(o||c)&&(p.resetInitSegment(e,r,h,l),j.resetInitSegment()),o&&(p.resetTimeStamp(f),j.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(i),p.append(t,a,u,d)},t}();i.a=N},function(t,i,e){"use strict";var s=e(0),n=e(1),r=Math.pow(2,32)-1,h=function(){function t(t,i){this.observer=t,this.remuxer=i}var i=t.prototype;return i.resetTimeStamp=function(t){this.initPTS=t},i.resetInitSegment=function(i,e,s,r){if(i&&i.byteLength){var h=this.initData=t.parseInitSegment(i);null==e&&(e="mp4a.40.5"),null==s&&(s="avc1.42e01e");var a={};h.audio&&h.video?a.audiovideo={container:"video/mp4",codec:e+","+s,initSegment:r?i:null}:(h.audio&&(a.audio={container:"audio/mp4",codec:e,initSegment:r?i:null}),h.video&&(a.video={container:"video/mp4",codec:s,initSegment:r?i:null})),this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else e&&(this.audioCodec=e),s&&(this.videoCodec=s)},t.probe=function(i){return t.findBox({data:i,start:0,end:Math.min(i.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<8|t[i+1];return e<0?65536+e:e},t.readUint32=function(t,i){t.data&&(i+=t.start,t=t.data);var e=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3];return e<0?4294967296+e:e},t.writeUint32=function(t,i,e){t.data&&(i+=t.start,t=t.data),t[i]=e>>24,t[i+1]=e>>16&255,t[i+2]=e>>8&255,t[i+3]=255&e},t.findBox=function(i,e){var s,n,r,h,a,o,c=[];if(i.data?(a=i.start,r=i.end,i=i.data):(a=0,r=i.byteLength),!e.length)return null;for(s=a;s<r;)o=(n=t.readUint32(i,s))>1?s+n:r,t.bin2str(i.subarray(s+4,s+8))===e[0]&&(1===e.length?c.push({data:i,start:s+8,end:o}):(h=t.findBox({data:i,start:s+8,end:o},e.slice(1))).length&&(c=c.concat(h))),s=o;return c},t.parseSegmentIndex=function(i){var e,s=t.findBox(i,["moov"])[0],n=s?s.end:null,r=0,h=t.findBox(i,["sidx"]);if(!h||!h[0])return null;e=[];var a=(h=h[0]).data[0];r=0===a?8:16;var o=t.readUint32(h,r);r+=4,r+=0===a?8:16,r+=2;var c=h.end+0,u=t.readUint16(h,r);r+=2;for(var l=0;l<u;l++){var d=r,f=t.readUint32(h,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var b=t.readUint32(h,d);d+=4,e.push({referenceSize:p,subsegmentDuration:b,info:{duration:b/o,start:c,end:c+p-1}}),c+=p,r=d+=4}return{earliestPresentationTime:0,timescale:o,version:a,referencesCount:u,references:e,moovEndOffset:n}},t.parseInitSegment=function(i){var e=[];return t.findBox(i,["moov","trak"]).forEach(function(i){var n=t.findBox(i,["tkhd"])[0];if(n){var r=n.data[n.start],h=0===r?12:20,a=t.readUint32(n,h),o=t.findBox(i,["mdia","mdhd"])[0];if(o){h=0===(r=o.data[o.start])?12:20;var c=t.readUint32(o,h),u=t.findBox(i,["mdia","hdlr"])[0];if(u){var l={soun:"audio",vide:"video"}[t.bin2str(u.data.subarray(u.start+8,u.start+12))];if(l){var d=t.findBox(i,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=t.bin2str(d.data.subarray(d.start+12,d.start+16));s.b.log("MP4Demuxer:"+l+":"+f+" found")}e[a]={timescale:c,type:l},e[l]={timescale:c,id:a}}}}}}),e},t.getStartDTS=function(i,e){var s,n,r;return s=t.findBox(e,["moof","traf"]),n=[].concat.apply([],s.map(function(e){return t.findBox(e,["tfhd"]).map(function(s){var n,r;return n=t.readUint32(s,4),r=i[n].timescale||9e4,t.findBox(e,["tfdt"]).map(function(i){var e,s;return e=i.data[i.start],s=t.readUint32(i,4),1===e&&(s*=Math.pow(2,32),s+=t.readUint32(i,8)),s})[0]/r})})),r=Math.min.apply(null,n),isFinite(r)?r:0},t.offsetStartDTS=function(i,e,s){t.findBox(e,["moof","traf"]).map(function(e){return t.findBox(e,["tfhd"]).map(function(n){var h=t.readUint32(n,4),a=i[h].timescale||9e4;t.findBox(e,["tfdt"]).map(function(i){var e=i.data[i.start],n=t.readUint32(i,4);if(0===e)t.writeUint32(i,4,n-s*a);else{n*=Math.pow(2,32),n+=t.readUint32(i,8),n-=s*a,n=Math.max(n,0);var h=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));t.writeUint32(i,4,h),t.writeUint32(i,8,o)}})})})},i.append=function(i,e,s,r){var h=this.initData;h||(this.resetInitSegment(i,this.audioCodec,this.videoCodec,!1),h=this.initData);var a,o=this.initPTS;if(void 0===o){var c=t.getStartDTS(h,i);this.initPTS=o=c-e,this.observer.trigger(n.a.INIT_PTS_FOUND,{initPTS:o})}t.offsetStartDTS(h,i,o),a=t.getStartDTS(h,i),this.remuxer.remux(h.audio,h.video,null,null,a,s,r,i)},i.destroy=function(){},t}();i.a=h},function(t,i,e){function s(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"_",{value:!0})},e.n=function(t){var i=t&&t._?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/",e.oe=function(t){throw console.error(t),t};var s=e(e.s=ENTRY_MODULE);return s.default||s}var n="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(t,i,s){var h={};h[s]=[];var a=i.toString(),o=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return h;for(var c,u=o[1],l=new RegExp("(\\\\n|\\W)"+r(u)+n,"g");c=l.exec(a);)"dll-reference"!==c[3]&&h[s].push(c[3]);for(l=new RegExp("\\("+r(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+n,"g");c=l.exec(a);)t[c[2]]||(h[s].push(c[1]),t[c[2]]=e(c[1]).m),h[c[2]]=h[c[2]]||[],h[c[2]].push(c[4]);for(var d,f=Object.keys(h),p=0;p<f.length;p++)for(var b=0;b<h[f[p]].length;b++)d=h[f[p]][b],isNaN(1*d)||(h[f[p]][b]=1*h[f[p]][b]);return h}function a(t){return Object.keys(t).reduce(function(i,e){return i||t[e].length>0},!1)}t.exports=function(t,i){i=i||{};var n={main:e.m},r=i.all?{main:Object.keys(n.main)}:function(t,i){for(var e={main:[i]},s={main:[]},n={main:{}};a(e);)for(var r=Object.keys(e),o=0;o<r.length;o++){var c=r[o],u=e[c].pop();if(n[c]=n[c]||{},!n[c][u]&&t[c][u]){n[c][u]=!0,s[c]=s[c]||[],s[c].push(u);for(var l=h(t,t[c][u],c),d=Object.keys(l),f=0;f<d.length;f++)e[d[f]]=e[d[f]]||[],e[d[f]]=e[d[f]].concat(l[d[f]])}}return s}(n,t),o="";Object.keys(r).filter(function(t){return"main"!==t}).forEach(function(t){for(var i=0;r[t][i];)i++;r[t].push(i),n[t][i]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(i))+")({"+r[t].map(function(i){return JSON.stringify(i)+": "+n[t][i].toString()}).join(",")+"});\n"}),o=o+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r.main.map(function(t){return JSON.stringify(t)+": "+n.main[t].toString()}).join(",")+"}))(self);";var c=new window.Blob([o],{type:"text/javascript"});if(i.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),l=new window.Worker(u);return l.objectURL=u,l}},function(t,i,e){"use strict";e.r(i);var s=e(9),n=e(1),r=e(0),h=e(8);i.default=function(t){var i=new h.EventEmitter;i.trigger=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.emit.apply(i,[t,t].concat(s))},i.off=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];i.removeListener.apply(i,[t].concat(s))};var e=function(i,e){t.postMessage({event:i,data:e})};t.addEventListener("message",function(n){var h=n.data;switch(h.cmd){case"init":var a=JSON.parse(h.config);t.demuxer=new s.a(i,h.typeSupported,a,h.vendor),Object(r.a)(a.debug),e("init",null);break;case"demux":t.demuxer.push(h.data,h.decryptdata,h.initSegment,h.audioCodec,h.videoCodec,h.timeOffset,h.discontinuity,h.trackSwitch,h.contiguous,h.duration,h.accurateTimeOffset,h.defaultInitPTS)}}),i.on(n.a.FRAG_DECRYPTED,e),i.on(n.a.FRAG_PARSING_INIT_SEGMENT,e),i.on(n.a.FRAG_PARSED,e),i.on(n.a.ERROR,e),i.on(n.a.FRAG_PARSING_METADATA,e),i.on(n.a.FRAG_PARSING_USERDATA,e),i.on(n.a.INIT_PTS_FOUND,e),i.on(n.a.FRAG_PARSING_DATA,function(i,e){var s=[],n={event:i,data:e};e.data1&&(n.data1=e.data1.buffer,s.push(e.data1.buffer),delete e.data1),e.data2&&(n.data2=e.data2.buffer,s.push(e.data2.buffer),delete e.data2),t.postMessage(n,s)})}},function(t,i,e){"use strict";e.r(i);var s,n,r=e(7),h=e(2),a=e(3),o=e(1),c=e(0),u={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},l=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}var i=t.prototype;return i.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},i.onHandlerDestroying=function(){},i.onHandlerDestroyed=function(){},i.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},i.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(u[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},i.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},i.onEvent=function(t,i){this.onEventGeneric(t,i)},i.onEventGeneric=function(t,i){try{(function(t,i){var e="on"+t.replace("hls","");if("function"!=typeof this[e])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+e+")");return this[e].bind(this,i)}).call(this,t,i).call()}catch(i){c.b.error("An internal error happened while handling event "+t+'. Error message: "'+i.message+'". Here is a stacktrace:',i),this.hls.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:i})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(s||(s={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}));var d=e(10);function f(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var p,b=function(){function t(t,i){this.Et=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=i}var i,e;return i=t,(e=[{key:"uri",get:function(){return!this.Et&&this.reluri&&(this.Et=Object(r.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this.Et}}])&&f(i.prototype,e),t}();function v(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(p||(p={}));var m=function(){function t(){var t;this.Lt=null,this.Rt=null,this.Bt=null,this.Dt=((t={})[p.AUDIO]=!1,t[p.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var i,e,s=t.prototype;return s.setByteRange=function(t,i){var e=t.split("@",2),s=[];1===e.length?s[0]=i?i.byteRangeEndOffset:0:s[0]=parseInt(e[1]),s[1]=parseInt(e[0])+s[0],this.Rt=s},s.addElementaryStream=function(t){this.Dt[t]=!0},s.hasElementaryStream=function(t){return!0===this.Dt[t]},s.createInitializationVector=function(t){for(var i=new Uint8Array(16),e=12;e<16;e++)i[e]=t>>8*(15-e)&255;return i},s.setDecryptDataFromLevelKey=function(t,i){var e=t;return t&&t.method&&t.uri&&!t.iv&&((e=new b(t.baseuri,t.reluri)).method=t.method,e.iv=this.createInitializationVector(i)),e},i=t,(e=[{key:"url",get:function(){return!this.Lt&&this.relurl&&(this.Lt=Object(r.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this.Lt},set:function(t){this.Lt=t}},{key:"byteRange",get:function(){return this.Rt?this.Rt:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this.Bt)return null;if(!this.Bt&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this.Bt=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this.Bt}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(a.a)(this.programDateTime))return null;var t=Object(a.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(i.prototype,e),t}();function g(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var y=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var i,e;return i=t,(e=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(a.a)(this.fragments[0].programDateTime))}}])&&g(i.prototype,e),t}(),w=/^(\d+)x(\d+)$/,x=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,S=function(){function t(i){for(var e in"string"==typeof i&&(i=t.parseAttrList(i)),i)i.hasOwnProperty(e)&&(this[e]=i[e])}var i=t.prototype;return i.decimalInteger=function(t){var i=parseInt(this[t],10);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.hexadecimalInteger=function(t){if(this[t]){var i=(this[t]||"0x").slice(2);i=(1&i.length?"0":"")+i;for(var e=new Uint8Array(i.length/2),s=0;s<i.length/2;s++)e[s]=parseInt(i.slice(2*s,2*s+2),16);return e}return null},i.hexadecimalIntegerAsNumber=function(t){var i=parseInt(this[t],16);return i>Number.MAX_SAFE_INTEGER?1/0:i},i.decimalFloatingPoint=function(t){return parseFloat(this[t])},i.enumeratedString=function(t){return this[t]},i.decimalResolution=function(t){var i=w.exec(this[t]);if(null!==i)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}},t.parseAttrList=function(t){var i,e={};for(x.lastIndex=0;null!==(i=x.exec(t));){var s=i[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),e[i[1]]=s}return e},t}(),O={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function k(t,i){return MediaSource.isTypeSupported((i||"video")+'/mp4;codecs="'+t+'"')}var _=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,j=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),I=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,T=function(){function t(){}return t.findGroup=function(t,i){for(var e=0;e<t.length;e++){var s=t[e];if(s.id===i)return s}},t.convertAVC1ToAVCOTI=function(t){var i,e=t.split(".");return e.length>2?(i=e.shift()+".",i+=parseInt(e.shift()).toString(16),i+=("000"+parseInt(e.shift()).toString(16)).substr(-4)):i=t,i},t.resolve=function(t,i){return r.buildAbsoluteURL(i,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(i,e){var s,n=[];function r(t,i){["video","audio"].forEach(function(e){var s=t.filter(function(t){return function(t,i){var e=O[i];return!!e&&!0===e[t.slice(0,4)]}(t,e)});if(s.length){var n=s.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});i[e+"Codec"]=n.length>0?n[0]:s[0],t=t.filter(function(t){return-1===s.indexOf(t)})}}),i.unknownCodecs=t}for(_.lastIndex=0;null!=(s=_.exec(i));){var h={},a=h.attrs=new S(s[1]);h.url=t.resolve(s[2],e);var o=a.decimalResolution("RESOLUTION");o&&(h.width=o.width,h.height=o.height),h.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),h.name=a.NAME,r([].concat((a.CODECS||"").split(/[ ,]+/)),h),h.videoCodec&&-1!==h.videoCodec.indexOf("avc1")&&(h.videoCodec=t.convertAVC1ToAVCOTI(h.videoCodec)),n.push(h)}return n},t.parseMasterPlaylistMedia=function(i,e,s,n){var r;void 0===n&&(n=[]);var h=[],a=0;for(j.lastIndex=0;null!==(r=j.exec(i));){var o=new S(r[1]);if(o.TYPE===s){var c={id:a++,groupId:o["GROUP-ID"],name:o.NAME||o.LANGUAGE,type:s,default:"YES"===o.DEFAULT,autoselect:"YES"===o.AUTOSELECT,forced:"YES"===o.FORCED,lang:o.LANGUAGE};if(o.URI&&(c.url=t.resolve(o.URI,e)),n.length){var u=t.findGroup(n,c.groupId);c.audioCodec=u?u.codec:n[0].codec}h.push(c)}}return h},t.parseLevelPlaylist=function(t,i,e,s,n){var r,h,o,u=0,l=0,d=new y(i),f=0,p=null,v=new m,g=null;for(A.lastIndex=0;null!==(r=A.exec(t));){var w=r[1];if(w){v.duration=parseFloat(w);var x=(" "+r[2]).slice(1);v.title=x||null,v.tagList.push(x?["INF",w,x]:["INF",w])}else if(r[3]){if(Object(a.a)(v.duration)){var O=u++;v.type=s,v.start=l,o&&(v.levelkey=o),v.sn=O,v.level=e,v.cc=f,v.urlId=n,v.baseurl=i,v.relurl=(" "+r[3]).slice(1),P(v,p),d.fragments.push(v),p=v,l+=v.duration,v=new m}}else if(r[4]){var k=(" "+r[4]).slice(1);p?v.setByteRange(k,p):v.setByteRange(k)}else if(r[5])v.rawProgramDateTime=(" "+r[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),null===g&&(g=d.fragments.length);else{if(!(r=r[0].match(I))){c.b.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<r.length&&void 0===r[h];h++);var _=(" "+r[h+1]).slice(1),j=(" "+r[h+2]).slice(1);switch(r[h]){case"#":v.tagList.push(j?[_,j]:[_]);break;case"PLAYLIST-TYPE":d.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":u=d.startSN=parseInt(_);break;case"TARGETDURATION":d.targetduration=parseFloat(_);break;case"VERSION":d.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,v.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(_);break;case"KEY":var T=new S(_),M=T.enumeratedString("METHOD"),E=T.URI,L=T.hexadecimalInteger("IV");M&&(o=new b(i,E),E&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(o.method=M,o.key=null,o.iv=L));break;case"START":var R=new S(_).decimalFloatingPoint("TIME-OFFSET");Object(a.a)(R)&&(d.startTimeOffset=R);break;case"MAP":var B=new S(_);v.relurl=B.URI,B.BYTERANGE&&v.setByteRange(B.BYTERANGE),v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,(v=new m).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:c.b.warn("line parsed but not handled: "+r)}}}return(v=p)&&!v.relurl&&(d.fragments.pop(),l-=v.duration),d.totalduration=l,d.averagetargetduration=l/d.fragments.length,d.endSN=u-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=f,!d.initSegment&&d.fragments.length&&d.fragments.every(function(t){return C.test(t.relurl)})&&(c.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(v=new m).relurl=d.fragments[0].relurl,v.baseurl=i,v.level=e,v.type=s,v.sn="initSegment",d.initSegment=v,d.needSidxRanges=!0),g&&function(t,i){for(var e=t[i],s=i-1;s>=0;s--){var n=t[s];n.programDateTime=e.programDateTime-1e3*n.duration,e=n}}(d.fragments,g),d},t}();function P(t,i){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):i&&i.programDateTime&&(t.programDateTime=i.endProgramDateTime),Object(a.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var M=window.performance,E=function(t){var i,e;function r(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADING,o.a.LEVEL_LOADING,o.a.AUDIO_TRACK_LOADING,o.a.SUBTITLE_TRACK_LOADING)||this).loaders={},e}e=t,(i=r).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,r.canHaveQualityLevels=function(t){return t!==s.AUDIO_TRACK&&t!==s.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case s.AUDIO_TRACK:return n.AUDIO;case s.SUBTITLE_TRACK:return n.SUBTITLE;default:return n.MAIN}},r.getResponseUrl=function(t,i){var e=t.url;return void 0!==e&&0!==e.indexOf("data:")||(e=i.url),e};var u=r.prototype;return u.createInternalLoader=function(t){var i=this.hls.config,e=i.pLoader,s=i.loader,n=new(e||s)(i);return t.loader=n,this.loaders[t.type]=n,n},u.getInternalLoader=function(t){return this.loaders[t.type]},u.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},u.destroyInternalLoaders=function(){for(var t in this.loaders){var i=this.loaders[t];i&&i.destroy(),this.resetInternalLoader(t)}},u.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},u.onManifestLoading=function(t){this.load({url:t.url,type:s.MANIFEST,level:0,id:null,responseType:"text"})},u.onLevelLoading=function(t){this.load({url:t.url,type:s.LEVEL,level:t.level,id:t.id,responseType:"text"})},u.onAudioTrackLoading=function(t){this.load({url:t.url,type:s.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},u.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:s.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},u.load=function(t){var i=this.hls.config;c.b.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var e,n,r,h,a=this.getInternalLoader(t);if(a){var o=a.context;if(o&&o.url===t.url)return c.b.trace("playlist request ongoing"),!1;c.b.warn("aborting previous loader for type: "+t.type),a.abort()}switch(t.type){case s.MANIFEST:e=i.manifestLoadingMaxRetry,n=i.manifestLoadingTimeOut,r=i.manifestLoadingRetryDelay,h=i.manifestLoadingMaxRetryTimeout;break;case s.LEVEL:e=0,h=0,r=0,n=i.levelLoadingTimeOut;break;default:e=i.levelLoadingMaxRetry,n=i.levelLoadingTimeOut,r=i.levelLoadingRetryDelay,h=i.levelLoadingMaxRetryTimeout}a=this.createInternalLoader(t);var u={timeout:n,maxRetry:e,retryDelay:r,maxRetryDelay:h},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.b.debug("Calling internal loader delegate for URL: "+t.url),a.load(t,u,l),!0},u.loadsuccess=function(t,i,e,s){if(void 0===s&&(s=null),e.isSidxRequest)return this.Ft(t,e),void this.$t(t,i,e,s);if(this.resetInternalLoader(e.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var n=t.data;i.tload=M.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.Ut(t,i,e,s):this.Vt(t,i,e,s):this.Nt(t,e,"no EXTM3U delimiter",s)},u.loaderror=function(t,i,e){void 0===e&&(e=null),this.Ht(i,e,!1,t)},u.loadtimeout=function(t,i,e){void 0===e&&(e=null),this.Ht(i,e,!0)},u.Vt=function(t,i,e,s){var n=this.hls,h=t.data,a=r.getResponseUrl(t,e),u=T.parseMasterPlaylist(h,a);if(u.length){var l=u.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),d=T.parseMasterPlaylistMedia(h,a,"AUDIO",l),f=T.parseMasterPlaylistMedia(h,a,"SUBTITLES");if(d.length){var p=!1;d.forEach(function(t){t.url||(p=!0)}),!1===p&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(c.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}n.trigger(o.a.MANIFEST_LOADED,{levels:u,audioTracks:d,subtitles:f,url:a,stats:i,networkDetails:s})}else this.Nt(t,e,"no level found in manifest",s)},u.Ut=function(t,i,e,n){var h=this.hls,c=e.id,u=e.level,l=e.type,d=r.getResponseUrl(t,e),f=Object(a.a)(c)?c:0,p=Object(a.a)(u)?u:f,b=r.mapContextToLevelType(e),v=T.parseLevelPlaylist(t.data,d,p,b,f);if(v.tload=i.tload,l===s.MANIFEST){var m={url:d,details:v};h.trigger(o.a.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:d,stats:i,networkDetails:n})}if(i.tparsed=M.now(),v.needSidxRanges){var g=v.initSegment.url;this.load({url:g,isSidxRequest:!0,type:l,level:u,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else e.levelDetails=v,this.$t(t,i,e,n)},u.Ft=function(t,i){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var e=d.a.parseSegmentIndex(new Uint8Array(t.data));if(e){var s=e.references,n=i.levelDetails;s.forEach(function(t,i){var e=t.info;if(n){var s=n.fragments[i];0===s.byteRange.length&&s.setByteRange(String(1+e.end-e.start)+"@"+String(e.start))}}),n&&n.initSegment.setByteRange(String(e.moovEndOffset)+"@0")}},u.Nt=function(t,i,e,s){this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:e,networkDetails:s})},u.Ht=function(t,i,e,n){var r,a;void 0===e&&(e=!1),void 0===n&&(n=null),c.b.info("A network error occured while loading a "+t.type+"-type playlist");var u=this.getInternalLoader(t);switch(t.type){case s.MANIFEST:r=e?h.a.MANIFEST_LOAD_TIMEOUT:h.a.MANIFEST_LOAD_ERROR,a=!0;break;case s.LEVEL:r=e?h.a.LEVEL_LOAD_TIMEOUT:h.a.LEVEL_LOAD_ERROR,a=!1;break;case s.AUDIO_TRACK:r=e?h.a.AUDIO_TRACK_LOAD_TIMEOUT:h.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}u&&(u.abort(),this.resetInternalLoader(t.type));var l={type:h.b.NETWORK_ERROR,details:r,fatal:a,url:t.url,loader:u,context:t,networkDetails:i};n&&(l.response=n),this.hls.trigger(o.a.ERROR,l)},u.$t=function(t,i,e,n){var h=e.type,a=e.level,c=e.id,u=e.levelDetails;if(u&&u.targetduration)if(r.canHaveQualityLevels(e.type))this.hls.trigger(o.a.LEVEL_LOADED,{details:u,level:a||0,id:c||0,stats:i,networkDetails:n});else switch(h){case s.AUDIO_TRACK:this.hls.trigger(o.a.AUDIO_TRACK_LOADED,{details:u,id:c,stats:i,networkDetails:n});break;case s.SUBTITLE_TRACK:this.hls.trigger(o.a.SUBTITLE_TRACK_LOADED,{details:u,id:c,stats:i,networkDetails:n})}else this.Nt(t,e,"invalid target duration",n)},r}(l),L=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING)||this).loaders={},e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){var i=this.loaders;for(var e in i){var s=i[e];s&&s.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var i=t.frag,e=i.type,s=this.loaders,n=this.hls.config,r=n.fLoader,h=n.loader;i.loaded=0;var o,u,l,d=s[e];d&&(c.b.warn("abort previous fragment loader for type: "+e),d.abort()),d=s[e]=i.loader=n.fLoader?new r(n):new h(n),o={url:i.url,frag:i,responseType:"arraybuffer",progressData:!1};var f=i.byteRangeStartOffset,p=i.byteRangeEndOffset;Object(a.a)(f)&&Object(a.a)(p)&&(o.rangeStart=f,o.rangeEnd=p),u={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(o,u,l)},n.loadsuccess=function(t,i,e,s){void 0===s&&(s=null);var n=t.data,r=e.frag;r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:n,frag:r,stats:i,networkDetails:s})},n.loaderror=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_ERROR,fatal:!1,frag:i.frag,response:t,networkDetails:e})},n.loadtimeout=function(t,i,e){void 0===e&&(e=null);var s=i.frag,n=s.loader;n&&n.abort(),this.loaders[s.type]=void 0,this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:i.frag,networkDetails:e})},n.loadprogress=function(t,i,e,s){void 0===s&&(s=null);var n=i.frag;n.loaded=t.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:n,stats:t,networkDetails:s})},s}(l),R=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.KEY_LOADING)||this).loaders={},e.decryptkey=null,e.decrypturl=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){for(var i in this.loaders){var e=this.loaders[i];e&&e.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var i=t.frag,e=i.type,s=this.loaders[e];if(i.decryptdata){var n=i.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var r=this.hls.config;if(s&&(c.b.warn("abort previous key loader for type:"+e),s.abort()),!n)return void c.b.warn("key uri is falsy");i.loader=this.loaders[e]=new r.loader(r),this.decrypturl=n,this.decryptkey=null;var h={url:n,frag:i,responseType:"arraybuffer"},a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};i.loader.load(h,a,u)}else this.decryptkey&&(i.decryptdata.key=this.decryptkey,this.hls.trigger(o.a.KEY_LOADED,{frag:i}))}else c.b.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,i,e){var s=e.frag;s.decryptdata?(this.decryptkey=s.decryptdata.key=new Uint8Array(t.data),s.loader=void 0,delete this.loaders[s.type],this.hls.trigger(o.a.KEY_LOADED,{frag:s})):c.b.error("after key load, decryptdata unset")},n.loaderror=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_ERROR,fatal:!1,frag:e,response:t})},n.loadtimeout=function(t,i){var e=i.frag,s=e.loader;s&&s.abort(),delete this.loaders[e.type],this.hls.trigger(o.a.ERROR,{type:h.b.NETWORK_ERROR,details:h.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:e})},s}(l),B="NOT_LOADED",D="APPENDING",F="PARTIAL",$=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.BUFFER_APPENDED,o.a.FRAG_BUFFERED,o.a.FRAG_LOADED)||this).bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,l.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,i){var e=this.fragments,s=Object.keys(e).filter(function(s){var n=e[s];if(n.body.type!==i)return!1;if(!n.buffered)return!1;var r=n.body;return r.startPTS<=t&&t<=r.endPTS});if(0===s.length)return null;var n=s.pop();return e[n].body},n.detectEvictedFragments=function(t,i){var e,s,n=this;Object.keys(this.fragments).forEach(function(r){var h=n.fragments[r];if(!0===h.buffered){var a=h.range[t];if(a){e=a.time;for(var o=0;o<e.length;o++)if(s=e[o],!1===n.isTimeBuffered(s.startPTS,s.endPTS,i)){n.removeFragment(h.body);break}}}})},n.detectPartialFragments=function(t){var i=this,e=this.getFragmentKey(t),s=this.fragments[e];s&&(s.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(t.hasElementaryStream(e)){var n=i.timeRanges[e];s.range[e]=i.getBufferedTimes(t.startPTS,t.endPTS,n)}}))},n.getBufferedTimes=function(t,i,e){for(var s,n,r=[],h=!1,a=0;a<e.length;a++){if(s=e.start(a)-this.bufferPadding,n=e.end(a)+this.bufferPadding,t>=s&&i<=n){r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))});break}if(t<n&&i>s)r.push({startPTS:Math.max(t,e.start(a)),endPTS:Math.min(i,e.end(a))}),h=!0;else if(i<=s)break}return{time:r,partial:h}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var i,e,s,n=this,r=null,h=0;return Object.keys(this.fragments).forEach(function(a){var o=n.fragments[a];n.isPartial(o)&&(e=o.body.startPTS-n.bufferPadding,s=o.body.endPTS+n.bufferPadding,t>=e&&t<=s&&(i=Math.min(t-e,s-t),h<=i&&(r=o.body,h=i)))}),r},n.getState=function(t){var i=this.getFragmentKey(t),e=this.fragments[i],s=B;return void 0!==e&&(s=e.buffered?!0===this.isPartial(e)?F:"OK":D),s},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,i,e){for(var s,n,r=0;r<e.length;r++){if(s=e.start(r)-this.bufferPadding,n=e.end(r)+this.bufferPadding,t>=s&&i<=n)return!0;if(i<=s)return!1}return!1},n.onFragLoaded=function(t){var i=t.frag;Object(a.a)(i.sn)&&!i.bitrateTest&&(this.fragments[this.getFragmentKey(i)]={body:i,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var i=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var e=i.timeRanges[t];i.detectEvictedFragments(t,e)})},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var i=this.getFragmentKey(t);return void 0!==this.fragments[i]},n.removeFragment=function(t){var i=this.getFragmentKey(t);delete this.fragments[i]},n.removeAllFragments=function(){this.fragments=Object.create(null)},s}(l),U={search:function(t,i){for(var e=0,s=t.length-1,n=null,r=null;e<=s;){var h=i(r=t[n=(e+s)/2|0]);if(h>0)e=n+1;else{if(!(h<0))return r;s=n-1}}return null}},V=function(){function t(){}return t.isBuffered=function(t,i){try{if(t)for(var e=t.buffered,s=0;s<e.length;s++)if(i>=e.start(s)&&i<=e.end(s))return!0}catch(t){}return!1},t.bufferInfo=function(t,i,e){try{if(t){var s,n=t.buffered,r=[];for(s=0;s<n.length;s++)r.push({start:n.start(s),end:n.end(s)});return this.bufferedInfo(r,i,e)}}catch(t){}return{len:0,start:i,end:i,nextStart:void 0}},t.bufferedInfo=function(t,i,e){t.sort(function(t,i){var e=t.start-i.start;return e||i.end-t.end});var s=[];if(e)for(var n=0;n<t.length;n++){var r=s.length;if(r){var h=s[r-1].end;t[n].start-h<e?t[n].end>h&&(s[r-1].end=t[n].end):s.push(t[n])}else s.push(t[n])}else s=t;for(var a,o=0,c=i,u=i,l=0;l<s.length;l++){var d=s[l].start,f=s[l].end;if(i+e>=d&&i<f)c=d,o=(u=f)-i;else if(i+e<d){a=d;break}}return{len:o,start:c,end:u,nextStart:a}},t}(),N=e(8),H=e(11),q=e(9);function z(){return window.MediaSource||window.WebKitMediaSource}var W=e(5),G=function(t){var i,e;function s(){return t.apply(this,arguments)||this}return e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.prototype.trigger=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.emit.apply(this,[t,t].concat(e))},s}(N.EventEmitter),J=z()||{isTypeSupported:function(){return!1}},Q=function(){function t(t,i){var e=this;this.hls=t,this.id=i;var s=this.observer=new G,n=t.config,r=function(i,s){(s=s||{}).frag=e.frag,s.id=e.id,t.trigger(i,s)};s.on(o.a.FRAG_DECRYPTED,r),s.on(o.a.FRAG_PARSING_INIT_SEGMENT,r),s.on(o.a.FRAG_PARSING_DATA,r),s.on(o.a.FRAG_PARSED,r),s.on(o.a.ERROR,r),s.on(o.a.FRAG_PARSING_METADATA,r),s.on(o.a.FRAG_PARSING_USERDATA,r),s.on(o.a.INIT_PTS_FOUND,r);var a={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(n.enableWorker&&"undefined"!=typeof Worker){var l;c.b.log("demuxing in webworker");try{l=this.w=H(12),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(i){t.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:i.message+" ("+i.filename+":"+i.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:a,vendor:u,id:i,config:JSON.stringify(n)})}catch(t){c.b.warn("Error in worker:",t),c.b.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&Object(W.a)().URL.revokeObjectURL(l.objectURL),this.demuxer=new q.a(s,a,n,u),this.w=void 0}}else this.demuxer=new q.a(s,a,n,u)}var i=t.prototype;return i.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var i=this.demuxer;i&&(i.destroy(),this.demuxer=null)}var e=this.observer;e&&(e.removeAllListeners(),this.observer=null)},i.push=function(t,i,e,s,n,r,h,o){var u=this.w,l=Object(a.a)(n.startPTS)?n.startPTS:n.start,d=n.decryptdata,f=this.frag,p=!(f&&n.cc===f.cc),b=!(f&&n.level===f.level),v=f&&n.sn===f.sn+1,m=!b&&v;if(p&&c.b.log(this.id+":discontinuity detected"),b&&c.b.log(this.id+":switch detected"),this.frag=n,u)u.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:i,audioCodec:e,videoCodec:s,timeOffset:l,discontinuity:p,trackSwitch:b,contiguous:m,duration:r,accurateTimeOffset:h,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,d,i,e,s,l,p,b,m,r,h,o)}},i.onWorkerMessage=function(t){var i=t.data,e=this.hls;switch(i.event){case"init":Object(W.a)().URL.revokeObjectURL(this.w.objectURL);break;case o.a.FRAG_PARSING_DATA:i.data.data1=new Uint8Array(i.data1),i.data2&&(i.data.data2=new Uint8Array(i.data2));default:i.data=i.data||{},i.data.frag=this.frag,i.data.id=this.id,e.trigger(i.event,i.data)}},t}();function X(t,i,e){switch(i){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(e);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(e)}}function Y(t,i,e){var s=t[i],n=t[e],r=n.startPTS;Object(a.a)(r)?e>i?(s.duration=r-s.start,s.duration<0&&c.b.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(n.duration=s.start-r,n.duration<0&&c.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):n.start=e>i?s.start+s.duration:Math.max(s.start-n.duration,0)}function K(t,i,e,s,n,r){var h=e;if(Object(a.a)(i.startPTS)){var o=Math.abs(i.startPTS-e);Object(a.a)(i.deltaPTS)?i.deltaPTS=Math.max(o,i.deltaPTS):i.deltaPTS=o,h=Math.max(e,i.startPTS),e=Math.min(e,i.startPTS),s=Math.max(s,i.endPTS),n=Math.min(n,i.startDTS),r=Math.max(r,i.endDTS)}var c=e-i.start;i.start=i.startPTS=e,i.maxStartPTS=h,i.endPTS=s,i.startDTS=n,i.endDTS=r,i.duration=s-e;var u,l,d,f=i.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(u=f-t.startSN,(l=t.fragments)[u]=i,d=u;d>0;d--)Y(l,d,d-1);for(d=u;d<l.length-1;d++)Y(l,d,d+1);return t.PTSKnown=!0,c}var Z={toString:function(t){for(var i="",e=t.length,s=0;s<e;s++)i+="["+t.start(s).toFixed(3)+","+t.end(s).toFixed(3)+"]";return i}};function tt(t,i){i.fragments.forEach(function(i){if(i){var e=i.start+t;i.start=i.startPTS=e,i.endPTS=e+i.duration}}),i.PTSKnown=!0}function it(t,i,e){!function(t,i,e){if(function(t,i,e){var s=!1;return i&&i.details&&e&&(e.endCC>e.startCC||t&&t.cc<e.startCC)&&(s=!0),s}(t,e,i)){var s=function(t,i){var e=t.fragments,s=i.fragments;if(s.length&&e.length){var n=function(t,i){for(var e=null,s=0;s<t.length;s+=1){var n=t[s];if(n&&n.cc===i){e=n;break}}return e}(e,s[0].cc);if(n&&(!n||n.startPTS))return n;c.b.log("No frag in previous level to align on")}else c.b.log("No fragments to align")}(e.details,i);s&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),tt(s.start,i))}}(t,e,i),!e.PTSKnown&&i&&function(t,i){if(i&&i.fragments.length){if(!t.hasProgramDateTime||!i.hasProgramDateTime)return;var e=i.fragments[0].programDateTime,s=(t.fragments[0].programDateTime-e)/1e3+i.fragments[0].start;Object(a.a)(s)&&(c.b.log("adjusting PTS using programDateTime delta, sliding:"+s.toFixed(3)),tt(s,t))}}(e,i.details)}function et(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0);var s=Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-s<=t?1:e.start-s>t&&e.start?-1:0}function st(t,i,e){var s=1e3*Math.min(i,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-s>t}var nt=function(){function t(t,i,e,s){this.config=t,this.media=i,this.fragmentTracker=e,this.hls=s,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var i=t.prototype;return i.poll=function(t){var i=this.config,e=this.media,s=this.stalled,n=e.currentTime,r=e.seeking,h=this.seeking&&!r,a=!this.seeking&&r;if(this.seeking=r,n===t){if((a||h)&&(this.stalled=null),!e.paused&&!e.ended&&0!==e.playbackRate&&e.buffered.length){var o=V.bufferInfo(e,n,0),u=o.len>0,l=o.nextStart||0;if(u||l){if(r){if(o.len>2||!l||l-n>2)return;this.moved=!1}if(!this.moved&&this.stalled){var d=Math.max(l,o.start||0)-n;if(d>0&&d<=2)return void this.qt(null)}var f=self.performance.now();if(null!==s){var p=f-s;!r&&p>=250&&this.zt(o.len);var b=V.bufferInfo(e,n,i.maxBufferHole);this.Wt(b,p)}else this.stalled=f}}}else if(this.moved=!0,null!==s){if(this.stallReported){var v=self.performance.now()-s;c.b.warn("playback not stuck anymore @"+n+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},i.Wt=function(t,i){var e=this.config,s=this.fragmentTracker,n=this.media.currentTime,r=s.getPartialFragment(n);r&&this.qt(r)||t.len>e.maxBufferHole&&i>1e3*e.highBufferWatchdogPeriod&&(c.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this.Gt())},i.zt=function(t){var i=this.hls,e=this.media;this.stallReported||(this.stallReported=!0,c.b.warn("Playback stalling at @"+e.currentTime+" due to low buffer"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},i.qt=function(t){for(var i=this.config,e=this.hls,s=this.media,n=s.currentTime,r=0,a=0;a<s.buffered.length;a++){var u=s.buffered.start(a);if(n+i.maxBufferHole>=r&&n<u){var l=Math.max(u+.05,s.currentTime+.1);return c.b.warn("skipping hole, adjusting currentTime from "+n+" to "+l),this.moved=!0,this.stalled=null,s.currentTime=l,t&&e.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+l,frag:t}),l}r=s.buffered.end(a)}return 0},i.Gt=function(){var t=this.config,i=this.hls,e=this.media,s=e.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var r=s+n*t.nudgeOffset;c.b.warn("Nudging 'currentTime' from "+s+" to "+r),e.currentTime=r,i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.b.error("Playhead still not moving while enough data buffered @"+s+" after "+t.nudgeMaxRetry+" nudges"),i.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_STALLED_ERROR,fatal:!0})},t}(),rt="STOPPED",ht="IDLE",at="KEY_LOADING",ot="FRAG_LOADING",ct="FRAG_LOADING_WAITING_RETRY",ut="PARSING",lt="PARSED",dt="BUFFER_FLUSHING",ft="ERROR",pt="WAITING_LEVEL";function bt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var vt=function(t){var i,e;function s(i,e){var s;return(s=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.MANIFEST_LOADING,o.a.MANIFEST_PARSED,o.a.LEVEL_LOADED,o.a.KEY_LOADED,o.a.FRAG_LOADED,o.a.FRAG_LOAD_EMERGENCY_ABORTED,o.a.FRAG_PARSING_INIT_SEGMENT,o.a.FRAG_PARSING_DATA,o.a.FRAG_PARSED,o.a.ERROR,o.a.AUDIO_TRACK_SWITCHING,o.a.AUDIO_TRACK_SWITCHED,o.a.BUFFER_CREATED,o.a.BUFFER_APPENDED,o.a.BUFFER_FLUSHED)||this).fragmentTracker=e,s.config=i.config,s.audioCodecSwap=!1,s.Jt=rt,s.stallReported=!1,s.gapController=null,s.altAudio=!1,s}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var r,u,l=s.prototype;return l.startLoad=function(t){if(this.levels){var i=this.lastCurrentTime,e=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var s=e.startLevel;-1===s&&(s=0,this.bitrateTest=!0),this.level=e.nextLoadLevel=s,this.loadedmetadata=!1}i>0&&-1===t&&(c.b.log("override startPosition with lastCurrentTime @"+i.toFixed(3)),t=i),this.state=ht,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=rt},l.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},l.doTick=function(){switch(this.state){case dt:this.fragLoadError=0;break;case ht:this.Qt();break;case pt:var t=this.levels[this.level];t&&t.details&&(this.state=ht);break;case ct:var i=window.performance.now(),e=this.retryDate;(!e||i>=e||this.media&&this.media.seeking)&&(c.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ht)}this.Xt(),this.Yt()},l.Qt=function(){var t=this.hls,i=t.config,e=this.media;if(void 0!==this.levelLastLoaded&&(e||!this.startFragRequested&&i.startFragPrefetch)){var s;s=this.loadedmetadata?e.currentTime:this.nextLoadPosition;var n=t.nextLoadLevel,r=this.levels[n];if(r){var h,a=r.bitrate;h=a?Math.max(8*i.maxBufferSize/a,i.maxBufferLength):i.maxBufferLength,h=Math.min(h,i.maxMaxBufferLength);var u=V.bufferInfo(this.mediaBuffer?this.mediaBuffer:e,s,i.maxBufferHole),l=u.len;if(!(l>=h)){c.b.trace("buffer length of "+l.toFixed(3)+" is below max of "+h.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=n;var d=r.details;if(!d||d.live&&this.levelLastLoaded!==n)this.state=pt;else{if(this.Kt(u,d)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(o.a.BUFFER_EOS,f),void(this.state="ENDED")}this.Zt(s,u,d)}}}}},l.Zt=function(t,i,e){var s=this.fragPrevious,n=this.level,r=e.fragments,h=r.length;if(0!==h){var a,o=r[0].start,u=r[h-1].start+r[h-1].duration,l=i.end;if(e.initSegment&&!e.initSegment.data)a=e.initSegment;else if(e.live){var d=this.config.initialLiveManifestSize;if(h<d)return void c.b.warn("Can not start playback of a level, reason: not enough fragments "+h+" < "+d);if(null===(a=this.ti(e,l,o,u,s,r,h)))return}else l<o&&(a=r[0]);a||(a=this.ii(o,s,h,r,l,u,e)),a&&(a.encrypted?(c.b.log("Loading key for "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n),this.ei(a)):(c.b.log("Loading "+a.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+n+", currentTime:"+t.toFixed(3)+",bufferEnd:"+l.toFixed(3)),this.si(a)))}},l.ti=function(t,i,e,s,n,r,h){var o,u=this.hls.config,l=this.media,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(i<Math.max(e-u.maxFragLookUpTolerance,s-d)){var f=this.liveSyncPosition=this.computeLivePosition(e,t);i=f,l&&!l.paused&&l.readyState&&l.duration>f&&f>l.currentTime&&(c.b.log("buffer end: "+i.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),l.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&i>s&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(n)if(t.hasProgramDateTime)c.b.log("live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),o=function(t,i,e){if(null===i||!Array.isArray(t)||!t.length||!Object(a.a)(i))return null;if(i<(t[0].programDateTime||0))return null;if(i>=(t[t.length-1].endProgramDateTime||0))return null;e=e||0;for(var s=0;s<t.length;++s){var n=t[s];if(st(i,e,n))return n}return null}(r,n.endProgramDateTime,u.maxFragLookUpTolerance);else{var p=n.sn+1;if(p>=t.startSN&&p<=t.endSN){var b=r[p-t.startSN];n.cc===b.cc&&(o=b,c.b.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=U.search(r,function(t){return n.cc-t.cc}))&&c.b.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}o||(o=r[Math.min(h-1,Math.round(h/2))],c.b.log("live playlist, switching playlist, unknown, load middle frag : "+o.sn))}return o},l.ii=function(t,i,e,s,n,r,h){var a,o=this.hls.config;if(a=n<r?function(t,i,e,s){void 0===e&&(e=0),void 0===s&&(s=0);var n=t?i[t.sn-i[0].sn+1]:null;return n&&!et(e,s,n)?n:U.search(i,et.bind(null,e,s))}(i,s,n,n>r-o.maxFragLookUpTolerance?0:o.maxFragLookUpTolerance):s[e-1]){var u=a.sn-h.startSN,l=i&&a.level===i.level,d=s[u-1],f=s[u+1];if(i&&a.sn===i.sn)if(l&&!a.backtracked)if(a.sn<h.endSN){var p=i.deltaPTS;p&&p>o.maxBufferHole&&i.dropped&&u?(a=d,c.b.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(a=f,c.b.log("Re-loading fragment with SN: "+a.sn))}else a=null;else a.backtracked&&(f&&f.backtracked?(c.b.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+a.sn+". Loading fragment "+f.sn),a=f):(c.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),a.dropped=0,d?(a=d).backtracked=!0:u&&(a=null)))}return a},l.ei=function(t){this.state=at,this.hls.trigger(o.a.KEY_LOADING,{frag:t})},l.si=function(t){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(a.a)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||i===B||i===F?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(o.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Q(this.hls,"main")),this.state=ot):i===D&&this.ni(t.duration)&&this.fragmentTracker.removeFragment(t)},l.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,n.MAIN)},l.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},l.Yt=function(){var t,i,e=this.media;if(e&&e.readyState&&!1===e.seeking&&((i=e.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=i),V.isBuffered(e,i)?t=this.getBufferedFrag(i):V.isBuffered(e,i+.1)&&(t=this.getBufferedFrag(i+.1)),t)){var s=t;if(s!==this.fragPlaying){this.hls.trigger(o.a.FRAG_CHANGED,{frag:s});var n=s.level;this.fragPlaying&&this.fragPlaying.level===n||this.hls.trigger(o.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=s}}},l.immediateLevelSwitch=function(){if(c.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,i=this.media;i?(t=i.paused,i.pause()):t=!0,this.previouslyPaused=t}var e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},l.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,V.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},l.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var i,e,s;if((e=this.getBufferedFrag(t.currentTime))&&e.startPTS>1&&this.flushMainBuffer(0,e.startPTS-1),t.paused)i=0;else{var n=this.hls.nextLoadLevel,r=this.levels[n],h=this.fragLastKbps;i=h&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*h)+1:0}if((s=this.getBufferedFrag(t.currentTime+i))&&(s=this.followingBufferedFrag(s))){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(s.maxStartPTS,Number.POSITIVE_INFINITY)}}},l.flushMainBuffer=function(t,i){this.state=dt;var e={startOffset:t,endOffset:i};this.altAudio&&(e.type="video"),this.hls.trigger(o.a.BUFFER_FLUSHING,e)},l.onMediaAttached=function(t){var i=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("seeked",this.onvseeked),i.addEventListener("ended",this.onvended);var e=this.config;this.levels&&e.autoStartLoad&&this.hls.startLoad(e.startPosition),this.gapController=new nt(e,i,this.fragmentTracker,this.hls)},l.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var i=this.levels;i&&i.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},l.onMediaSeeked=function(){var t=this.media,i=t?t.currentTime:void 0;Object(a.a)(i)&&c.b.log("media seeked to "+i.toFixed(3)),this.tick()},l.onManifestLoading=function(){c.b.log("trigger BUFFER_RESET"),this.hls.trigger(o.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},l.onManifestParsed=function(t){var i,e=!1,s=!1;t.levels.forEach(function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(e=!0),-1!==i.indexOf("mp4a.40.5")&&(s=!0))}),this.audioCodecSwitch=e&&s,this.audioCodecSwitch&&c.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},l.onLevelLoaded=function(t){var i=t.details,e=t.level,s=this.levels[this.levelLastLoaded],n=this.levels[e],r=i.totalduration,h=0;if(c.b.log("level "+e+" loaded ["+i.startSN+","+i.endSN+"],duration:"+r),i.live){var u=n.details;u&&i.fragments.length>0?(function(t,i){i.initSegment&&t.initSegment&&(i.initSegment=t.initSegment);var e,s=0;if(function(t,i,e){if(t&&i)for(var s=Math.max(t.startSN,i.startSN)-i.startSN,n=Math.min(t.endSN,i.endSN)-i.startSN,r=i.startSN-t.startSN,h=s;h<=n;h++){var a=t.fragments[r+h],o=i.fragments[h];if(!a||!o)break;e(a,o,h)}}(t,i,function(t,n){s=t.cc-n.cc,Object(a.a)(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,e=n),i.PTSKnown=!0}),i.PTSKnown){if(s){c.b.log("discontinuity sliding from playlist, take drift into account");for(var n=i.fragments,r=0;r<n.length;r++)n[r].cc+=s}e?K(i,e,e.startPTS,e.endPTS,e.startDTS,e.endDTS):function(t,i){var e=i.startSN-t.startSN,s=t.fragments,n=i.fragments;if(!(e<0||e>s.length))for(var r=0;r<n.length;r++)n[r].start+=s[e].start}(t,i),i.PTSKnown=t.PTSKnown}}(u,i),h=i.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(h,u),i.PTSKnown&&Object(a.a)(h)?c.b.log("live playlist sliding:"+h.toFixed(3)):(c.b.log("live playlist - outdated PTS, unknown sliding"),it(this.fragPrevious,s,i))):(c.b.log("live playlist - first load, unknown sliding"),i.PTSKnown=!1,it(this.fragPrevious,s,i))}else i.PTSKnown=!1;if(n.details=i,this.levelLastLoaded=e,this.hls.trigger(o.a.LEVEL_UPDATED,{details:i,level:e}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=i.startTimeOffset;Object(a.a)(l)?(l<0&&(c.b.log("negative start time offset "+l+", count from end of last fragment"),l=h+r+l),c.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):i.live?(this.startPosition=this.computeLivePosition(h,i),c.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===pt&&(this.state=ht),this.tick()},l.onKeyLoaded=function(){this.state===at&&(this.state=ht,this.tick())},l.onFragLoaded=function(t){var i=this.fragCurrent,e=this.hls,s=this.levels,n=this.media,r=t.frag;if(this.state===ot&&i&&"main"===r.type&&r.level===i.level&&r.sn===i.sn){var h=t.stats,a=s[i.level],u=a.details;if(this.bitrateTest=!1,this.stats=h,c.b.log("Loaded "+i.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+i.level),r.bitrateTest&&e.nextLoadLevel)this.state=ht,this.startFragRequested=!1,h.tparsed=h.tbuffered=window.performance.now(),e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=ht,h.tparsed=h.tbuffered=window.performance.now(),u.initSegment.data=t.payload,e.trigger(o.a.FRAG_BUFFERED,{stats:h,frag:i,id:"main"}),this.tick();else{c.b.log("Parsing "+i.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+i.level+", cc "+i.cc),this.state=ut,this.pendingBuffering=!0,this.appended=!1,r.bitrateTest&&(r.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:r}));var l=!(n&&n.seeking)&&(u.PTSKnown||!u.live),d=u.initSegment?u.initSegment.data:[],f=this.ri(a);(this.demuxer=this.demuxer||new Q(this.hls,"main")).push(t.payload,d,f,a.videoCodec,i,u.totalduration,l)}}this.fragLoadError=0},l.onFragParsingInitSegment=function(t){var i=this.fragCurrent,e=t.frag;if(i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===ut){var s,n,r=t.tracks;if(r.audio&&this.altAudio&&delete r.audio,n=r.audio){var h=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();h&&this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),h=-1!==h.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===a.indexOf("firefox")&&(h="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==n.container&&(h="mp4a.40.2",c.b.log("Android: force audio codec to "+h)),n.levelCodec=h,n.id=t.id}for(s in(n=r.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),this.hls.trigger(o.a.BUFFER_CODECS,r),r){n=r[s],c.b.log("main track:"+s+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var u=n.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(o.a.BUFFER_APPENDING,{type:s,data:u,parent:"main",content:"initSegment"}))}this.tick()}},l.onFragParsingData=function(t){var i=this,e=this.fragCurrent,s=t.frag;if(e&&"main"===t.id&&s.sn===e.sn&&s.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===ut){var n=this.levels[this.level],r=e;if(Object(a.a)(t.endPTS)||(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&r.addElementaryStream(p.AUDIO),!0===t.hasVideo&&r.addElementaryStream(p.VIDEO),c.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(r.dropped=t.dropped,r.dropped)if(r.backtracked)c.b.warn("Already backtracked on this fragment, appending with the gap",r.sn);else{var h=n.details;if(!h||r.sn!==h.startSN)return c.b.warn("missing video frame(s), backtracking fragment",r.sn),this.fragmentTracker.removeFragment(r),r.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ht,this.fragPrevious=r,void this.tick();c.b.warn("missing video frame(s) on first frag, appending with gap",r.sn)}else r.backtracked=!1;var u=K(n.details,r,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(o.a.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&i.state===ut&&(i.appended=!0,i.pendingBuffering=!0,l.trigger(o.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},l.onFragParsed=function(t){var i=this.fragCurrent,e=t.frag;i&&"main"===t.id&&e.sn===i.sn&&e.level===i.level&&this.state===ut&&(this.stats.tparsed=window.performance.now(),this.state=lt,this.ai())},l.onAudioTrackSwitching=function(t){var i=!!t.url,e=t.id;if(!i){if(this.mediaBuffer!==this.media){c.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;s.loader&&(c.b.log("switching to main audio track, cancel main fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ht}var n=this.hls;n.trigger(o.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(o.a.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},l.onAudioTrackSwitched=function(t){var i=t.id,e=!!this.hls.audioTracks[i].url;if(e){var s=this.videoBuffer;s&&this.mediaBuffer!==s&&(c.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=e,this.tick()},l.onBufferCreated=function(t){var i,e,s=t.tracks,n=!1;for(var r in s){var h=s[r];"main"===h.id?(e=r,i=h,"video"===r&&(this.videoBuffer=s[r].buffer)):n=!0}n&&i?(c.b.log("alternate track found, use "+e+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},l.onBufferAppended=function(t){if("main"===t.parent){var i=this.state;i!==ut&&i!==lt||(this.pendingBuffering=t.pending>0,this.ai())}},l.ai=function(){if(!(this.state!==lt||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var i=this.mediaBuffer?this.mediaBuffer:this.media;c.b.log("main buffered : "+Z.toString(i.buffered)),this.fragPrevious=t;var e=this.stats;e.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(o.a.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state=ht}this.tick()}},l.onError=function(t){var i=t.frag||this.fragCurrent;if(!i||"main"===i.type){var e=!!this.media&&V.isBuffered(this.media,this.media.currentTime)&&V.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var s=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.b.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=window.performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ct}else c.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ft;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:this.state!==ft&&(t.fatal?(this.state=ft,c.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==pt||(this.state=ht));break;case h.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ut&&this.state!==lt||(e?(this.ni(this.config.maxBufferLength),this.state=ht):(c.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},l.ni=function(t){var i=this.config;return i.maxMaxBufferLength>=t&&(i.maxMaxBufferLength/=2,c.b.warn("main:reduce max buffer length to "+i.maxMaxBufferLength+"s"),!0)},l.Xt=function(){var t=this.media;if(t&&0!==t.readyState){var i=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&i.length?(this.loadedmetadata=!0,this.oi()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,i)}},l.onFragLoadEmergencyAborted=function(){this.state=ht,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},l.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,t.buffered),this.state=ht,this.fragPrevious=null},l.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},l.oi=function(){var t=this.media,i=t.currentTime,e=t.seeking?i:this.startPosition;i!==e&&e>=0&&(c.b.log("target start position not buffered, seek to buffered.start(0) "+e+" from current time "+i+" "),t.currentTime=e)},l.ri=function(t){var i=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.b.log("swapping playlist audio codec"),i&&(i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),i},r=s,(u=[{key:"state",set:function(t){if(this.state!==t){var i=this.state;this.Jt=t,c.b.log("main stream-controller: "+i+"->"+t),this.hls.trigger(o.a.STREAM_STATE_TRANSITION,{previousState:i,nextState:t})}},get:function(){return this.Jt}},{key:"currentLevel",get:function(){var t=this.media;if(t){var i=this.getBufferedFrag(t.currentTime);if(i)return i.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this.ci},set:function(t){this.ci=t}}])&&bt(r.prototype,u),s}(function(t){var i,e;function s(){return t.apply(this,arguments)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=rt},n.Kt=function(t,i){var e=this.fragCurrent,s=this.fragmentTracker;if(!i.live&&e&&!e.backtracked&&e.sn===i.endSN&&!t.nextStart){var n=s.getState(e);return n===F||"OK"===n}return!1},n.onMediaSeeking=function(){var t=this.config,i=this.media,e=this.mediaBuffer,s=this.state,n=i?i.currentTime:null,r=V.bufferInfo(e||i,n,this.config.maxBufferHole);if(Object(a.a)(n)&&c.b.log("media seeking to "+n.toFixed(3)),s===ot){var h=this.fragCurrent;if(0===r.len&&h){var o=t.maxFragLookUpTolerance,u=h.start-o,l=h.start+h.duration+o;n<u||n>l?(h.loader&&(c.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),h.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ht):c.b.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===s&&(0===r.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ht);i&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=rt,this.fragmentTracker=null},n.computeLivePosition=function(t,i){var e=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*i.targetduration;return t+Math.max(0,i.totalduration-e)},s}(function(t){var i,e;function s(i){for(var e,s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return(e=t.call.apply(t,[this,i].concat(n))||this).ui=void 0,e.li=null,e.di=null,e.fi=0,e.ui=e.tick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this.di},n.hasNextTick=function(){return!!this.li},n.setInterval=function(t){return!this.di&&(this.di=self.setInterval(this.ui,t),!0)},n.clearInterval=function(){return!!this.di&&(self.clearInterval(this.di),this.di=null,!0)},n.clearNextTick=function(){return!!this.li&&(self.clearTimeout(this.li),this.li=null,!0)},n.tick=function(){this.fi++,1===this.fi&&(this.doTick(),this.fi>1&&(this.clearNextTick(),this.li=self.setTimeout(this.ui,0)),this.fi=0)},n.doTick=function(){},s}(l)));function mt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}window.performance;var gt,yt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MANIFEST_LOADED,o.a.LEVEL_LOADED,o.a.AUDIO_TRACK_SWITCHED,o.a.FRAG_LOADED,o.a.ERROR)||this).canload=!1,e.currentLevelIndex=null,e.manualLevelIndex=-1,e.timer=null,gt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,a=s.prototype;return a.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},a.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},a.startLoad=function(){var t=this.pi;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var i=t.details;i&&i.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},a.stopLoad=function(){this.canload=!1},a.onManifestLoaded=function(t){var i,e=[],s=[],n={},r=null,a=!1,u=!1;if(t.levels.forEach(function(t){var i=t.attrs;t.loadError=0,t.fragmentError=!1,a=a||!!t.videoCodec,u=u||!!t.audioCodec,gt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(r=n[t.bitrate])?r.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,e.push(t)),i&&(i.AUDIO&&(u=!0,X(r||t,"audio",i.AUDIO)),i.SUBTITLES&&X(r||t,"text",i.SUBTITLES))}),a&&u&&(e=e.filter(function(t){return!!t.videoCodec})),e=e.filter(function(t){var i=t.audioCodec,e=t.videoCodec;return(!i||k(i,"audio"))&&(!e||k(e,"video"))}),t.audioTracks&&(s=t.audioTracks.filter(function(t){return!t.audioCodec||k(t.audioCodec,"audio")})).forEach(function(t,i){t.id=i}),e.length>0){i=e[0].bitrate,e.sort(function(t,i){return t.bitrate-i.bitrate}),this.pi=e;for(var l=0;l<e.length;l++)if(e[l].bitrate===i){this.bi=l,c.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+i);break}this.hls.trigger(o.a.MANIFEST_PARSED,{levels:e,audioTracks:s,firstLevel:this.bi,stats:t.stats,audio:u,video:a,altAudio:s.some(function(t){return!!t.url})})}else this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},a.setLevelInternal=function(t){var i=this.pi,e=this.hls;if(t>=0&&t<i.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.b.log("switching to level "+t),this.currentLevelIndex=t;var s=i[t];s.level=t,e.trigger(o.a.LEVEL_SWITCHING,s)}var n=i[t],r=n.details;if(!r||r.live){var a=n.urlId;e.trigger(o.a.LEVEL_LOADING,{url:n.url[a],level:t,id:a})}}else e.trigger(o.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},a.onError=function(t){if(t.fatal)t.type===h.b.NETWORK_ERROR&&this.clearTimer();else{var i,e=!1,s=!1;switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:case h.a.KEY_LOAD_ERROR:case h.a.KEY_LOAD_TIMEOUT:i=t.frag.level,s=!0;break;case h.a.LEVEL_LOAD_ERROR:case h.a.LEVEL_LOAD_TIMEOUT:i=t.context.level,e=!0;break;case h.a.REMUX_ALLOC_ERROR:i=t.level,e=!0}void 0!==i&&this.recoverLevel(t,i,e,s)}},a.recoverLevel=function(t,i,e,s){var n,r,h,a=this,o=this.hls.config,u=t.details,l=this.pi[i];if(l.loadError++,l.fragmentError=s,e){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);r=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return a.loadLevel()},r),t.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+u+", retry in "+r+" ms, current retry count is "+this.levelRetryCount)}(e||s)&&((n=l.url.length)>1&&l.loadError<n?(l.urlId=(l.urlId+1)%n,l.details=void 0,c.b.warn("level controller, "+u+" for level "+i+": switching to redundant URL-id "+l.urlId)):-1===this.manualLevelIndex?(h=0===i?this.pi.length-1:i-1,c.b.warn("level controller, "+u+": switch to "+h),this.hls.nextAutoLevel=this.currentLevelIndex=h):s&&(c.b.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},a.onFragLoaded=function(t){var i=t.frag;if(void 0!==i&&"main"===i.type){var e=this.pi[i.level];void 0!==e&&(e.fragmentError=!1,e.loadError=0,this.levelRetryCount=0)}},a.onLevelLoaded=function(t){var i=this,e=t.level,s=t.details;if(e===this.currentLevelIndex){var n=this.pi[e];if(n.fragmentError||(n.loadError=0,this.levelRetryCount=0),s.live){var r=function(t,i,e){var s=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),n=s/2;return t&&i.endSN===t.endSN&&(s=n),e&&(s=Math.max(n,s-(window.performance.now()-e))),Math.round(s)}(n.details,s,t.stats.trequest);c.b.log("live playlist, reload in "+Math.round(r)+" ms"),this.timer=setTimeout(function(){return i.loadLevel()},r)}else this.clearTimer()}},a.onAudioTrackSwitched=function(t){var i=this.hls.audioTracks[t.id].groupId,e=this.hls.levels[this.currentLevelIndex];if(e&&e.audioGroupIds){for(var s=-1,n=0;n<e.audioGroupIds.length;n++)if(e.audioGroupIds[n]===i){s=n;break}s!==e.urlId&&(e.urlId=s,this.startLoad())}},a.loadLevel=function(){if(c.b.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this.pi[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var i=this.currentLevelIndex,e=t.urlId,s=t.url[e];c.b.log("Attempt loading level index "+i+" with URL-id "+e),this.hls.trigger(o.a.LEVEL_LOADING,{url:s,level:i,id:e})}}},n=s,(r=[{key:"levels",get:function(){return this.pi}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var i=this.pi;i&&(t=Math.min(t,i.length-1),this.currentLevelIndex===t&&i[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this.vi&&(this.vi=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this.bi},set:function(t){this.bi=t}},{key:"startLevel",get:function(){if(void 0===this.vi){var t=this.hls.config.startLevel;return void 0!==t?t:this.bi}return this.vi},set:function(t){this.vi=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&mt(n.prototype,r),s}(l),wt=e(4);function xt(t,i){var e;try{e=new Event("addtrack")}catch(t){(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=t,i.dispatchEvent(e)}var St=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHED,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_METADATA,o.a.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,e.media=void 0,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){l.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){!function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var i=0;i<t.length;i++){var e=t[i];if("metadata"===e.kind&&"id3"===e.label)return xt(e,this.media),e}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var i=t.frag,e=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var s=this.hls.config.cnxRenderWindow.WebKitDataCue||his.hls.config.cnxRenderWindow.VTTCue||his.hls.config.cnxRenderWindow.TextTrackCue,n=0;n<e.length;n++){var r=wt.a.getID3Frames(e[n].data);if(r){var h=e[n].pts,a=n<e.length-1?e[n+1].pts:i.endPTS;h===a?a+=1e-4:h>a&&(c.b.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),a=h+.25);for(var o=0;o<r.length;o++){var u=r[o];if(!wt.a.isTimeStampFrame(u)){var l=new s(h,a,"");l.value=u,this.id3Track.addCue(l)}}}}},n.onLiveBackBufferReached=function(t){var i=t.bufferEnd,e=this.id3Track;if(e&&e.cues&&e.cues.length){var s=function(t,i){if(i<t[0].endTime)return t[0];if(i>t[t.length-1].endTime)return t[t.length-1];for(var e=0,s=t.length-1;e<=s;){var n=Math.floor((s+e)/2);if(i<t[n].endTime)s=n-1;else{if(!(i>t[n].endTime))return t[n];e=n+1}}return t[e].endTime-i<i-t[s].endTime?t[e]:t[s]}(e.cues,i);if(s)for(;e.cues[0]!==s;)e.removeCue(e.cues[0])}},s}(l),Ot=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var i=t.prototype;return i.sample=function(t,i){var e=Math.pow(this.alpha_,t);this.estimate_=i*(1-e)+e*this.estimate_,this.totalWeight_+=t},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),kt=function(){function t(t,i,e,s){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ot(i),this.fast_=new Ot(e)}var i=t.prototype;return i.sample=function(t,i){var e=(t=Math.max(t,this.minDelayMs_))/1e3,s=8*i/e;this.fast_.sample(e,s),this.slow_.sample(e,s)},i.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},i.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.destroy=function(){},t}();function _t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var jt=window.performance,At=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FRAG_LOADING,o.a.FRAG_LOADED,o.a.FRAG_BUFFERED,o.a.ERROR)||this).lastLoadedFragLevel=0,e.mi=-1,e.hls=i,e.timer=null,e.bwEstimator=null,e.onCheck=e.gi.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)),e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,u=s.prototype;return u.destroy=function(){this.clearTimer(),l.prototype.destroy.call(this)},u.onFragLoading=function(t){var i=t.frag;if("main"===i.type&&(this.timer||(this.fragCurrent=i,this.timer=setInterval(this.onCheck,100)),!this.bwEstimator)){var e,s,n=this.hls,r=n.config,h=i.level;n.levels[h].details.live?(e=r.abrEwmaFastLive,s=r.abrEwmaSlowLive):(e=r.abrEwmaFastVoD,s=r.abrEwmaSlowVoD),this.bwEstimator=new kt(n,s,e,r.abrEwmaDefaultEstimate)}},u.gi=function(){var t=this.hls,i=t.media,e=this.fragCurrent;if(e){var s=e.loader,n=t.minAutoLevel;if(!s||s.stats&&s.stats.aborted)return c.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this.mi=-1);var r=s.stats;if(i&&r&&(!i.paused&&0!==i.playbackRate||!i.readyState)&&e.autoLevel&&e.level){var h=jt.now()-r.trequest,a=Math.abs(i.playbackRate);if(h>500*e.duration/a){var u=t.levels,l=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/h),d=u[e.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=r.total?r.total:Math.max(r.loaded,Math.round(e.duration*f/8)),b=i.currentTime,v=(p-r.loaded)/l,m=(V.bufferInfo(i,b,t.config.maxBufferHole).end-b)/a;if(m<2*e.duration/a&&v>m){var g;for(g=e.level-1;g>n;g--){var y=u[g].realBitrate?Math.max(u[g].realBitrate,u[g].bitrate):u[g].bitrate;if(e.duration*y/(6.4*l)<m)break}void 0<v&&(c.b.warn("loading too slow, abort fragment loading and switch to level "+g+":fragLoadedDelay["+g+"]<fragLoadedDelay["+(e.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+v.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=g,this.bwEstimator.sample(h,r.loaded),s.abort(),this.clearTimer(),t.trigger(o.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,stats:r}))}}}}},u.onFragLoaded=function(t){var i=t.frag;if("main"===i.type&&Object(a.a)(i.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this.mi=-1,this.hls.config.abrMaxWithRealBitrate){var e=this.hls.levels[i.level],s=(e.loaded?e.loaded.bytes:0)+t.stats.loaded,n=(e.loaded?e.loaded.duration:0)+t.frag.duration;e.loaded={bytes:s,duration:n},e.realBitrate=Math.round(8*s/n)}if(t.frag.bitrateTest){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},u.onFragBuffered=function(t){var i=t.stats,e=t.frag;if(!0!==i.aborted&&"main"===e.type&&Object(a.a)(e.sn)&&(!e.bitrateTest||i.tload===i.tbuffered)){var s=i.tparsed-i.trequest;c.b.log("latency/loading/parsing/append/kbps:"+Math.round(i.tfirst-i.trequest)+"/"+Math.round(i.tload-i.tfirst)+"/"+Math.round(i.tparsed-i.tload)+"/"+Math.round(i.tbuffered-i.tparsed)+"/"+Math.round(8*i.loaded/(i.tbuffered-i.trequest))),this.bwEstimator.sample(s,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),e.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},u.onError=function(t){switch(t.details){case h.a.FRAG_LOAD_ERROR:case h.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},u.clearTimer=function(){clearInterval(this.timer),this.timer=null},u.yi=function(t,i,e,s,n,r,h,a,o){for(var u=n;u>=s;u--){var l=o[u];if(l){var d=l.details,f=d?d.totalduration/d.fragments.length:i,p=!!d&&d.live,b=void 0;b=u<=t?h*e:a*e;var v=o[u].realBitrate?Math.max(o[u].realBitrate,o[u].bitrate):o[u].bitrate,m=v*f/b;if(c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(b)+"/"+v+"/"+f+"/"+r+"/"+m),b>v&&(!m||p&&!this.bitrateTestDelay||m<r))return u}}return-1},n=s,(r=[{key:"nextAutoLevel",get:function(){var t=this.mi,i=this.bwEstimator;if(!(-1===t||i&&i.canEstimate()))return t;var e=this.nextABRAutoLevel;return-1!==t&&(e=Math.min(t,e)),e},set:function(t){this.mi=t}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,i=t.maxAutoLevel,e=t.levels,s=t.config,n=t.minAutoLevel,r=t.media,h=this.lastLoadedFragLevel,a=this.fragCurrent?this.fragCurrent.duration:0,o=r?r.currentTime:0,u=r&&0!==r.playbackRate?Math.abs(r.playbackRate):1,l=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,d=(V.bufferInfo(r,o,s.maxBufferHole).end-o)/u,f=this.yi(h,a,l,n,i,d,s.abrBandWidthFactor,s.abrBandWidthUpFactor,e);if(f>=0)return f;c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay,b=s.abrBandWidthFactor,v=s.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(p=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-m,c.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),b=v=1)}return f=this.yi(h,a,l,n,i,d+p,b,v,e),Math.max(f,0)}}])&&_t(n.prototype,r),s}(l),It=z(),Ct=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_RESET,o.a.BUFFER_APPENDING,o.a.BUFFER_CODECS,o.a.BUFFER_EOS,o.a.BUFFER_FLUSHING,o.a.LEVEL_PTS_UPDATED,o.a.LEVEL_UPDATED)||this).wi=null,e.xi=null,e.Si=10,e.Oi=null,e.ki=null,e._i=!1,e.ji=!1,e.config=void 0,e.audioTimestampOffset=void 0,e.bufferCodecEventsExpected=0,e.Ai=0,e.media=null,e.mediaSource=null,e.segments=[],e.parent=void 0,e.appending=!1,e.appended=0,e.appendError=0,e.flushBufferCounter=0,e.tracks={},e.pendingTracks={},e.sourceBuffer={},e.flushRange=[],e.Ii=function(){c.b.log("media source opened"),e.hls.trigger(o.a.MEDIA_ATTACHED,{media:e.media});var t=e.mediaSource;t&&t.removeEventListener("sourceopen",e.Ii),e.checkPendingTracks()},e.Ci=function(){c.b.log("media source closed")},e.Ti=function(){c.b.log("media source ended")},e.Pi=function(){if(e.audioTimestampOffset&&e.sourceBuffer.audio){var t=e.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+e.audioTimestampOffset),t.timestampOffset=e.audioTimestampOffset,delete e.audioTimestampOffset}e._i&&e.doFlush(),e.ji&&e.checkEos(),e.appending=!1;var i=e.parent,s=e.segments.reduce(function(t,e){return e.parent===i?t+1:t},0),n={},r=e.sourceBuffer;for(var h in r){var a=r[h];if(!a)throw Error("handling source buffer update end error: source buffer for "+h+" uninitilized and unable to update buffered TimeRanges.");n[h]=a.buffered}e.hls.trigger(o.a.BUFFER_APPENDED,{parent:i,pending:s,timeRanges:n}),e._i||e.doAppending(),e.updateMediaElementDuration(),0===s&&e.flushLiveBackBuffer()},e.Mi=function(t){c.b.error("sourceBuffer error:",t),e.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.config=i.config,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){l.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var i=t.type,e=this.tracks.audio;if("audio"===i&&e&&"audio/mpeg"===e.container){var s=this.sourceBuffer.audio;if(!s)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(s.timestampOffset-t.start)>.1){var n=s.updating;try{s.abort()}catch(t){c.b.warn("can not abort audio buffer: "+t)}n?this.audioTimestampOffset=t.start:(c.b.warn("change mpeg audio timestamp offset from "+s.timestampOffset+" to "+t.start),s.timestampOffset=t.start)}}},n.onManifestParsed=function(t){this.bufferCodecEventsExpected=this.Ai=t.altAudio?2:1,c.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var i=this.media=t.media;if(i&&It){var e=this.mediaSource=new It;e.addEventListener("sourceopen",this.Ii),e.addEventListener("sourceended",this.Ti),e.addEventListener("sourceclose",this.Ci),i.src=window.URL.createObjectURL(e),this.ki=i.src}},n.onMediaDetaching=function(){c.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.b.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.Ii),t.removeEventListener("sourceended",this.Ti),t.removeEventListener("sourceclose",this.Ci),this.media&&(this.ki&&this.hls.config.cnxRenderWindow.URL.revokeObjectURL(this.ki),this.media.src===this.ki?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this.ki=null,this.bufferCodecEventsExpected=this.Ai,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(o.a.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,i=this.pendingTracks,e=Object.keys(i).length;(e&&!t||2===e)&&(this.createSourceBuffers(i),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var i in t){var e=t[i];try{e&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(e),e.removeEventListener("updateend",this.Pi),e.removeEventListener("error",this.Mi))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var i=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(e){i.pendingTracks[e]=t[e]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var i=this.sourceBuffer,e=this.mediaSource;if(!e)throw Error("createSourceBuffers called when mediaSource was null");for(var s in t)if(!i[s]){var n=t[s];if(!n)throw Error("source buffer exists for track "+s+", however track does not");var r=n.levelCodec||n.codec,a=n.container+";codecs="+r;c.b.log("creating sourceBuffer("+a+")");try{var u=i[s]=e.addSourceBuffer(a);u.addEventListener("updateend",this.Pi),u.addEventListener("error",this.Mi),this.tracks[s]={buffer:u,codec:r,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(t){c.b.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(o.a.ERROR,{type:h.b.MEDIA_ERROR,details:h.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(o.a.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this._i||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var i in this.sourceBuffer)if(!t.type||t.type===i){var e=this.sourceBuffer[i];e&&!e.ended&&(e.ended=!0,c.b.log(i+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,i=this.mediaSource;if(i&&"open"===i.readyState){for(var e in t){var s=t[e];if(s){if(!s.ended)return;if(s.updating)return void(this.ji=!0)}}c.b.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{i.endOfStream()}catch(t){c.b.warn("exception while calling mediaSource.endOfStream()")}this.ji=!1}else this.ji=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this.Oi){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var i=this.media.currentTime,e=this.sourceBuffer,s=Object.keys(e),n=i-Math.max(t,this.Si),r=s.length-1;r>=0;r--){var h=s[r],a=e[h];if(a){var u=a.buffered;u.length>0&&n>u.start(0)&&this.removeBufferRange(h,a,0,n)&&this.hls.trigger(o.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}}else c.b.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(t){var i=t.details;i.fragments.length>0&&(this.xi=i.totalduration+i.fragments[0].start,this.Si=i.averagetargetduration||i.targetduration||10,this.Oi=i.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,i=this.config;if(null!==this.xi&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var e in this.sourceBuffer){var s=this.sourceBuffer[e];if(s&&!0===s.updating)return}t=this.media.duration,null===this.wi&&(this.wi=this.mediaSource.duration),!0===this.Oi&&!0===i.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this.wi=this.mediaSource.duration=1/0):(this.xi>this.wi&&this.xi>t||!Object(a.a)(t))&&(c.b.log("Updating Media Source duration to "+this.xi.toFixed(3)),this.wi=this.mediaSource.duration=this.xi)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._i=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._i=!1;var i=0,e=this.sourceBuffer;try{for(var s in e){var n=e[s];n&&(i+=n.buffered.length)}}catch(t){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=i,this.hls.trigger(o.a.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,i=this.hls,e=this.segments,s=this.sourceBuffer;if(Object.keys(s).length){if(!this.media||this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var n=e.shift();if(n)try{var r=s[n.type];if(!r)return void this.Pi();if(r.updating)return void e.unshift(n);r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(s){c.b.error("error while trying to append buffer:"+s.message),e.unshift(n);var a={type:h.b.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===s.code?(this.segments=[],a.details=h.a.BUFFER_FULL_ERROR):(this.appendError++,a.details=h.a.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.b.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),i.trigger(o.a.ERROR,a)}}}},n.flushBuffer=function(t,i,e){var s=this.sourceBuffer;if(!Object.keys(s).length)return!0;var n="null";if(this.media&&(n=this.media.currentTime.toFixed(3)),c.b.log("flushBuffer,pos/start/end: "+n+"/"+t+"/"+i),this.flushBufferCounter>=this.appended)return c.b.warn("abort flushing too many retries"),!0;var r=s[e];if(r){if(r.ended=!1,r.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(e,r,t,i))return this.flushBufferCounter++,!1}return c.b.log("buffer flushed"),!0},n.removeBufferRange=function(t,i,e,s){try{for(var n=0;n<i.buffered.length;n++){var r=i.buffered.start(n),h=i.buffered.end(n),a=Math.max(r,e),o=Math.min(h,s);if(Math.min(o,h)-a>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.b.log("sb remove "+t+" ["+a+","+o+"], of ["+r+","+h+"], pos:"+u),i.remove(a,o),!0}}}catch(t){c.b.warn("removeBufferRange failed",t)}return!1},s}(l);function Tt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Pt,Mt=function(t){var i,e;function s(i){var e;return(e=t.call(this,i,o.a.FPS_DROP_LEVEL_CAPPING,o.a.MEDIA_ATTACHING,o.a.MANIFEST_PARSED,o.a.BUFFER_CODECS,o.a.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,e.firstLevel=null,e.levels=[],e.media=null,e.restrictedLevels=[],e.timer=null,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n,r,h,a=s.prototype;return a.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},a.onFpsDropLevelCapping=function(t){s.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},a.onMediaAttaching=function(t){this.media=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null},a.onManifestParsed=function(t){var i=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},a.onLevelsUpdated=function(t){this.levels=t.levels},a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var i=this.hls;i.autoLevelCapping=this.getMaxLevel(t-1),i.autoLevelCapping>this.autoLevelCapping&&i.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}},a.getMaxLevel=function(t){var i=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,n){return s.isLevelAllowed(n,i.restrictedLevels)&&n<=t});return s.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},a.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},a.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.isLevelAllowed=function(t,i){return void 0===i&&(i=[]),-1===i.indexOf(t)},s.getMaxLevelByMediaSize=function(t,i,e){if(!t||t&&!t.length)return-1;for(var s,n,r=t.length-1,h=0;h<t.length;h+=1){var a=t[h];if((a.width>=i||a.height>=e)&&(s=a,!(n=t[h+1])||s.width!==n.width||s.height!==n.height)){r=h;break}}return r},n=s,h=[{key:"contentScaleFactor",get:function(){return 1}}],(r=[{key:"mediaWidth",get:function(){var t,i=this.media;return i&&(t=i.width||i.clientWidth||i.offsetWidth,t*=s.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,i=this.media;return i&&(t=i.height||i.clientHeight||i.offsetHeight,t*=s.contentScaleFactor),t}}])&&Tt(n.prototype,r),h&&Tt(n,h),s}(l),Et=window.performance,Lt=function(t){var i,e;function s(i){return t.call(this,i,o.a.MEDIA_ATTACHING)||this}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=s.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var i=this.hls.config;i.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof this.hls.config.cnxRenderWindow.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,i,e){var s=Et.now();if(i){if(this.lastTime){var n=s-this.lastTime,r=e-this.lastDroppedFrames,h=i-this.lastDecodedFrames,a=1e3*r/n,u=this.hls;if(u.trigger(o.a.FPS_DROP,{currentDropped:r,currentDecoded:h,totalDroppedFrames:e}),a>0&&r>u.config.fpsDroppedMonitoringThreshold*h){var l=u.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=l)&&(l-=1,u.trigger(o.a.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,u.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=e,this.lastDecodedFrames=i}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var i=t.getVideoPlaybackQuality();this.checkFPS(t,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},s}(l),Rt=window,Bt=Rt.performance,Dt=Rt.XMLHttpRequest,Ft=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var i=t.prototype;return i.destroy=function(){this.abort(),this.loader=null},i.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},i.load=function(t,i,e){this.context=t,this.config=i,this.callbacks=e,this.stats={trequest:Bt.now(),retry:0},this.retryDelay=i.retryDelay,this.loadInternal()},i.loadInternal=function(){var t,i=this.context;t=this.loader=new Dt;var e=this.stats;e.tfirst=0,e.loaded=0;var s=this.xhrSetup;try{if(s)try{s(t,i.url)}catch(e){t.open("GET",i.url,!0),s(t,i.url)}t.readyState||t.open("GET",i.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},i,t)}i.rangeEnd&&t.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=i.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},i.readystatechange=function(t){var i=t.currentTarget,e=i.readyState,s=this.stats,n=this.context,r=this.config;if(!s.aborted&&e>=2)if(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(Bt.now(),s.trequest)),4===e){var h=i.status;if(h>=200&&h<300){var a,o;s.tload=Math.max(s.tfirst,Bt.now()),o="arraybuffer"===n.responseType?(a=i.response).byteLength:(a=i.responseText).length,s.loaded=s.total=o;var u={url:i.responseURL,data:a};this.callbacks.onSuccess(u,s,n,i)}else s.retry>=r.maxRetry||h>=400&&h<499?(c.b.error(h+" while loading "+n.url),this.callbacks.onError({code:h,text:i.statusText},n,i)):(c.b.warn(h+" while loading "+n.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),s.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),r.timeout)},i.loadtimeout=function(){c.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},i.loadprogress=function(t){var i=t.currentTarget,e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var s=this.callbacks.onProgress;s&&s(e,this.context,null,i)},t}();e(6),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Pt||(Pt={}));var $t=function(){var t=window.cnxRenderWindow;return void 0!==t&&t.navigator&&t.navigator.requestMediaKeySystemAccess?t.navigator.requestMediaKeySystemAccess.bind(t.navigator):null}();function Ut(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var Vt=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Ut(t,i,e[i])})}return t}({cnxRenderWindow:window,autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ft,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:At,bufferController:Ct,capLevelController:Mt,fpsController:Lt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:$t},{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function Nt(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function zt(t,i,e){return i&&qt(t.prototype,i),e&&qt(t,e),t}e.d(i,"default",function(){return Wt});var Wt=function(t){var i,e;function s(i){var e;void 0===i&&(i={}),(e=t.call(this)||this).config=void 0,e.Ei=void 0,e.abrController=void 0,e.capLevelController=void 0,e.levelController=void 0,e.streamController=void 0,e.networkControllers=void 0,e.audioTrackController=void 0,e.subtitleTrackController=void 0,e.emeController=void 0,e.coreComponents=void 0,e.media=null,e.url=null;var n=s.DefaultConfig;if((i.liveSyncDurationCount||i.liveMaxLatencyDurationCount)&&(i.liveSyncDuration||i.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");e.config=function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){Nt(t,i,e[i])})}return t}({},n,i),window.cnxRenderWindow=e.config.cnxRenderWindow;var r=Ht(e).config;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.a)(r.debug),e.Ei=-1;var h=e.abrController=new r.abrController(Ht(e)),a=new r.bufferController(Ht(e)),o=e.capLevelController=new r.capLevelController(Ht(e)),u=new r.fpsController(Ht(e)),l=new E(Ht(e)),d=new L(Ht(e)),f=new R(Ht(e)),p=new St(Ht(e)),b=e.levelController=new yt(Ht(e)),v=new $(Ht(e)),m=[b,e.streamController=new vt(Ht(e),v)],g=r.audioStreamController;g&&m.push(new g(Ht(e),v)),e.networkControllers=m;var y=[l,d,f,h,a,o,u,p,v];if(g=r.audioTrackController){var w=new g(Ht(e));e.audioTrackController=w,y.push(w)}if(g=r.subtitleTrackController){var x=new g(Ht(e));e.subtitleTrackController=x,m.push(x)}if(g=r.emeController){var S=new g(Ht(e));e.emeController=S,y.push(S)}return(g=r.subtitleStreamController)&&m.push(new g(Ht(e),v)),(g=r.timelineController)&&y.push(new g(Ht(e))),e.coreComponents=y,e}e=t,(i=s).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,s.isSupported=function(){return function(){var t=z();if(!t)return!1;var i=self.SourceBuffer||self.WebKitSourceBuffer,e=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!e&&!!s}()},zt(s,null,[{key:"version",get:function(){}},{key:"Events",get:function(){return o.a}},{key:"ErrorTypes",get:function(){return h.b}},{key:"ErrorDetails",get:function(){return h.a}},{key:"DefaultConfig",get:function(){return s.defaultConfig?s.defaultConfig:Vt},set:function(t){s.defaultConfig=t}}]);var n=s.prototype;return n.destroy=function(){c.b.log("destroy"),this.trigger(o.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this.Ei=-1},n.attachMedia=function(t){c.b.log("attachMedia"),this.media=t,this.trigger(o.a.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){c.b.log("detachMedia"),this.trigger(o.a.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=r.buildAbsoluteURL(this.config.cnxRenderWindow.location.href,t,{alwaysNormalize:!0}),c.b.log("loadSource:"+t),this.url=t,this.trigger(o.a.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),c.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(i){i.startLoad(t)})},n.stopLoad=function(){c.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},n.swapAudioCodec=function(){c.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){c.b.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},zt(s,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var i=!!t;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}},{key:"autoLevelCapping",get:function(){return this.Ei},set:function(t){c.b.log("set autoLevelCapping:"+t),this.Ei=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,i=this.config.minAutoBitrate,e=t?t.length:0,s=0;s<e;s++)if((t[s].realBitrate?Math.max(t[s].realBitrate,t[s].bitrate):t[s].bitrate)>i)return s;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,i=this.autoLevelCapping;return-1===i&&t&&t.length?t.length-1:i}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var i=this.audioTrackController;i&&(i.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var i=this.subtitleTrackController;i&&(i.subtitleDisplay=t)}}]),s}(G);Wt.defaultConfig=void 0}]).default)},function(t,i,e){"use strict";e.d(i,"c",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"a",function(){return h});const s={FullscreenChanged:"fullscreenChanged",PlayerFloatChanged:"playerFloatChanged"},n={OmidViewabilityThreshold:"OmidViewabilityThreshold"},r=Object.assign(Object.assign(Object.assign(Object.assign({Ready:"ready",Removed:"removed",SetupError:"setupError",IsViewable:"isViewable",SizeChanged:"sizeChanged",BrandingClicked:"brandingClicked",ImpressionPrice:"impressionPrice"},{Play:"play",Pause:"pause",QualityChanged:"qualityChanged",PlayError:"playError",VolumeChanged:"volumeChanged"}),s),n),{AdClick:"adClick",AdPlay:"adPlay",AdPause:"adPause",AdImpression:"adImpression",AdCompleted25:"adCompleted25",AdCompleted50:"adCompleted50",AdCompleted75:"adCompleted75",AdCompleted100:"adCompleted100",AdSkipped:"adSkipped",AdError:"adError",AdStopped:"adStopped",AdCompanion:"adCompanion"});var h;!function(t){t.SetupError="SetupError",t.NoPlayer="NoPlayer",t.RenderError="RenderError"}(h||(h={}))},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"e",function(){return h}),e.d(i,"c",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"d",function(){return u});var s=e(1);const n=".cdn.ampproject.org";function r(t,i){i||(i=location.search),t=t.replace(/\[/,"\\[").replace(/]/,"\\]");const e=new RegExp(`[\\?&]${t}=([^&#]*)`,"i").exec(i);return null===e?null:decodeURIComponent(e[1])}function h(t,i,e){const s=new RegExp(`([?&])${i}=.*?(&|$)`,"i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(s)?e?t.replace(s,`$1${i}=${e}$2`):t.replace(s,"$1"):`${t}${n}${i}=${e}`}function a(t){return t.indexOf("?")>-1?"&":"?"}function o(t){if(Object(s.h)(t))return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]}function c(t,i){return`${"http"+(/(\/s\/)+/.test(t.replace(i,""))?"s":"")}://${i}`}function u(t,i=!0){return t=function(t){return-1===t.indexOf(n)?t:(t=(t=(t=(t=(t=(t=(t=t.replace(n,"")).replace("www-","www.")).replace("amp-","amp.")).cnx_replaceAll("--","=")).cnx_replaceAll("-",".")).cnx_replaceAll("=","-")).replace("www.","amp.")).indexOf("amp.")>-1?t:t=(t=t.replace("http://","http://amp.")).replace("https://","https://amp.")}(t=function(t){const i=/^https:\/\/www.google\..*?\/amp\/s*\/*/.exec(t);if(null!==i){const e=t.replace(i[0],"");return c(t,e)}return t}(t=function(t){if(t.indexOf(n)>-1){t=t.replace("https://","");const i=/^[^\/]+(\/[a-z]+\/)+s*\/*/,e=i.test(t)?t.replace(i.exec(t)[0],""):t;return c(t,e)}return t}(t))),i&&(t=function(t){if(-1===t.indexOf("#origin-")&&-1===t.indexOf("viewerUrl-"))return t;const i=t.split("#origin-")[1].split("viewerUrl-");return u(t=decodeURIComponent(i[1]),!1)}(t)),t}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s=JSON.parse('{"version":120359,"domainPrefix":"","logToConsole":false,"logToServer":true,"env":"production"}'),n=!0},function(t,i,e){"use strict";e.d(i,"a",function(){return n});var s=e(6);class n{constructor(){this.Li={}}subscribe(t,i,e){this.Li[t]||(this.Li[t]=[]),this.Li[t].push({context:i,func:e})}unsubscribe(t,i,e){this.Li[t]&&(this.Li[t]=this.Li[t].filter(t=>!(t.context===i&&(t.func===e||!e))))}unsubscribeAll(t){Object.keys(this.Li).forEach(i=>{this.Li[i]=this.Li[i].filter(i=>i.context!==t)})}publish(t,i,e={payload:void 0}){Object.prototype.hasOwnProperty.call(this.Li,i)&&this.Li[i].forEach(i=>{i.context===t&&i.func(e)})}relay(t,i,e,n){Object(s.m)(t).forEach(t=>{this.subscribe(t,i,i=>{n.publish(e,t,i)})})}relayBulk(t,i,e){t.forEach(t=>{this.relay(t.channel,t.source,i,e)})}}},function(t,i,e){"use strict";var s,n,r,h;e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n}),e.d(i,"c",function(){return r}),e.d(i,"d",function(){return h}),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(s||(s={})),function(t){t.Click="click",t.InteractionStart="interactionstart",t.Interaction="interaction",t.InteractionEnd="interactionend"}(n||(n={})),function(t){t[t.Swipe=0]="Swipe",t[t.Hold=1]="Hold"}(r||(r={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(h||(h={}))},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"b",function(){return n}),e.d(i,"a",function(){return r}),function(t){t.SessionRendered="rendered",t.SessionView="enter_view"}(s||(s={}));const n={UserInteraction:"userInteraction",GeneralUserInteraction:"generalUserInteraction",CanStart:"canStart",Destroy:"destroy"},r={StateChanged:"stateChanged"}},function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r});var s=e(0);const n=[s.ProtoDeviceType.Smartphone,s.ProtoDeviceType.Tablet];var r;!function(t){t.Ios="ios",t.Android="android",t.Mac="macos",t.Windows="windows",t.Linux="linux"}(r||(r={}))},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.CmpApi=0]="CmpApi",t[t.TcfApi=1]="TcfApi"}(s||(s={}))},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return s}),e.d(i,"d",function(){return n}),e.d(i,"b",function(){return r}),e.d(i,"c",function(){return h}),function(t){t.Chrome="chrome",t.Firefox="firefox",t.Edge="edge",t.Safari="safari",t.Opera="opera",t.Samsung="samsung",t.Facebook="facebook",t.InternetExplorer="ie"}(s||(s={})),function(t){t.Standard="standard",t.Webkit="webkit",t.Moz="moz",t.Ms="ms",t.O="o"}(n||(n={}));const r=[{name:n.Standard,keys:{fullscreenEnabled:"fullscreenEnabled",fullscreenElement:"fullscreenElement",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitFullscreenEnabled",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Webkit,keys:{fullscreenEnabled:"webkitSupportsFullscreen",fullscreenElement:"webkitFullscreenElement",requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"}},{name:n.Moz,keys:{fullscreenEnabled:"mozFullScreenEnabled",fullscreenElement:"mozFullScreenElement",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"}},{name:n.Ms,keys:{fullscreenEnabled:"msFullscreenEnabled",fullscreenElement:"msFullscreenElement",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}}];var h;!function(t){t.Self="_self",t.Blank="_blank",t.Parent="_parent",t.Top="_top"}(h||(h={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(5),r=e(0),h=e(7),a=e(1),o=e(17);!function(t){const i=3e4;function e(t,e){const s=function({requestUrl:t,requestType:e="POST",contentType:s="",responseType:n="",withCredentials:r=!1}){const h=new XMLHttpRequest;return h.open(e,t,!0),s.length>0&&h.setRequestHeader("Content-Type",s),n.length>0&&(h.responseType=n),h.timeout=i,h.withCredentials=r,h}(t),n=new Date;return new Promise((t,i)=>{s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200===s.status)t(s.response);else{let t="";try{t=s.responseText}catch(t){}const e=(new Date).getTime()-n.getTime();i(new Error(`Request fail. status:${s.status}, readyState:${s.readyState}, response:${t}, time:${e}`))}},s.ontimeout=()=>{const t=(new Date).getTime()-n.getTime();i(new Error(`Request timeout status:${s.status}. time:${t}`))},s.send(e)})}function s(t,i,e){try{const s=Object(h.l)([95,5]);!s||i&&0!==Object.keys(i).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_function_argument",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const a=t.fromObject(i);!s||a&&0!==Object.keys(a).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_fromObject_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1});const o=t.encode(a).finish();return!s||o&&0!==Object.keys(o).length||Object(n.a)({message:"empty_proto_request",callStack:"empty_encode_result",exception:e,level:r.ProtoLoggingLevelEnum.INFO,sendMaxLog:!1}),o}catch(t){throw Object(n.a)({throttle:10,sendMaxLog:!0,exception:e,level:r.ProtoLoggingLevelEnum.FATAL,callStack:JSON.stringify(i),message:"Protobuf_encode"}),Error()}}function c(t,i,s="POST",h,a){return function(t,i,e){return new Promise((s,h)=>{i.then(i=>{if(t){let a=null;try{const s=i?new Uint8Array(i):new Uint8Array;a=t.toObject(t.decode(s),{defaults:!0,arrays:!0,objects:!0})}catch(t){Object(n.a)({exception:`${e}__${t.message}`,message:"Protobuf_decode",callStack:t.stack,level:r.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0,throttle:100})}a&&a.errorMessage&&"500"===a.errorMessage&&h(a.errorMessage),s(a)}}).catch(t=>{h(t)})})}(t,e({requestUrl:i,requestType:s,withCredentials:a,contentType:"POST"===s?"multipart/form-data":"",responseType:"arraybuffer"},h),i)}t.fetchXMLRequest=function(t,i=!0){const s=e({requestUrl:t,requestType:"GET",withCredentials:i});return new Promise((t,i)=>{s.then(i=>{t(i)}).catch(t=>{i(t)})})},t.sendProtoRequest=function({ProtoResponse:t,ProtoRequest:i,requestData:e,endpoint:u,requestType:l,withCredentials:d,queryParams:f,logError:p}){const b=e?s(i,e,u):null;return c(t,u=function(t,i){return Object(a.f)(i)?(Object.keys(i).forEach(e=>t=Object(o.e)(t,e,i[e])),t):t}(u,f),l,b,d).catch(t=>{throw p&&Object(h.l)([95,5])&&Object(n.a)({message:"Xhr_error",exception:u,callStack:`${t}`,level:r.ProtoLoggingLevelEnum.INFO}),new Error(t)})},t.sendProtoBeaconRequest=function({ProtoRequest:t,requestData:i,endpoint:e}){const n=i?s(t,i,e):null;return navigator.sendBeacon(e,n)},t.trackPixel=function(t){try{(new Image).src=t}catch(t){Object(n.a)({message:"Xhr_trackPixel",exception:t.message,callStack:t.stack,level:r.ProtoLoggingLevelEnum.FATAL})}}}(s||(s={}))},function(t,i,e){"use strict";var s,n,r=e(59),h=r.Reader,a=r.Writer,o=r.util,c=r.roots.default||(r.roots.default={});c.ProtoElementsRequest=function(){function t(t){if(this.tokens=[],this.forceLineItemIds=[],this.queryJsTargeting={},this.reloadedPlayers={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.tokens=o.emptyArray,t.prototype.pageUrl="",t.prototype.userId="",t.prototype.forcePlayerId="",t.prototype.forceMediaId="",t.prototype.forcePlaylistId="",t.prototype.version=0,t.prototype.forceLineItemIds=o.emptyArray,t.prototype.clientAb0=0,t.prototype.clientAb1=0,t.prototype.customParam1="",t.prototype.customParam2="",t.prototype.customParam3="",t.prototype.forceExploration=!1,t.prototype.es6=!1,t.prototype.bundleId="",t.prototype.forceSourceItemId="",t.prototype.parseDomain=!1,t.prototype.implementationType=0,t.prototype.queryJsTargeting=o.emptyObject,t.prototype.isConsentConnatix=!0,t.prototype.reloadedPlayers=o.emptyObject,t.prototype.disableTracking=!1,t.prototype.referrer="",t.prototype.localTimestamp=o.Long?o.Long.fromBits(0,0,!1):0,t.prototype.customParam4="",t.prototype.customParam5="",t.encode=function(t,i){if(i||(i=a.create()),null!=t.tokens&&t.tokens.length)for(var e=0;e<t.tokens.length;++e)i.uint32(10).string(t.tokens[e]);if(null!=t.pageUrl&&t.hasOwnProperty("pageUrl")&&i.uint32(26).string(t.pageUrl),null!=t.userId&&t.hasOwnProperty("userId")&&i.uint32(42).string(t.userId),null!=t.forcePlayerId&&t.hasOwnProperty("forcePlayerId")&&i.uint32(58).string(t.forcePlayerId),null!=t.forceMediaId&&t.hasOwnProperty("forceMediaId")&&i.uint32(66).string(t.forceMediaId),null!=t.forcePlaylistId&&t.hasOwnProperty("forcePlaylistId")&&i.uint32(74).string(t.forcePlaylistId),null!=t.version&&t.hasOwnProperty("version")&&i.uint32(80).int32(t.version),null!=t.forceLineItemIds&&t.forceLineItemIds.length)for(e=0;e<t.forceLineItemIds.length;++e)i.uint32(90).string(t.forceLineItemIds[e]);if(null!=t.clientAb0&&t.hasOwnProperty("clientAb0")&&i.uint32(96).int32(t.clientAb0),null!=t.clientAb1&&t.hasOwnProperty("clientAb1")&&i.uint32(104).int32(t.clientAb1),null!=t.customParam1&&t.hasOwnProperty("customParam1")&&i.uint32(130).string(t.customParam1),null!=t.customParam2&&t.hasOwnProperty("customParam2")&&i.uint32(138).string(t.customParam2),null!=t.customParam3&&t.hasOwnProperty("customParam3")&&i.uint32(146).string(t.customParam3),null!=t.forceExploration&&t.hasOwnProperty("forceExploration")&&i.uint32(160).bool(t.forceExploration),null!=t.es6&&t.hasOwnProperty("es6")&&i.uint32(168).bool(t.es6),null!=t.bundleId&&t.hasOwnProperty("bundleId")&&i.uint32(178).string(t.bundleId),null!=t.forceSourceItemId&&t.hasOwnProperty("forceSourceItemId")&&i.uint32(186).string(t.forceSourceItemId),null!=t.parseDomain&&t.hasOwnProperty("parseDomain")&&i.uint32(192).bool(t.parseDomain),null!=t.implementationType&&t.hasOwnProperty("implementationType")&&i.uint32(200).int32(t.implementationType),null!=t.queryJsTargeting&&t.hasOwnProperty("queryJsTargeting")){var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.uint32(210).fork().uint32(10).string(s[e]).uint32(18).string(t.queryJsTargeting[s[e]]).ldelim()}if(null!=t.isConsentConnatix&&t.hasOwnProperty("isConsentConnatix")&&i.uint32(216).bool(t.isConsentConnatix),null!=t.reloadedPlayers&&t.hasOwnProperty("reloadedPlayers"))for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.uint32(234).fork().uint32(10).string(s[e]).uint32(18).string(t.reloadedPlayers[s[e]]).ldelim();return null!=t.disableTracking&&t.hasOwnProperty("disableTracking")&&i.uint32(248).bool(t.disableTracking),null!=t.referrer&&t.hasOwnProperty("referrer")&&i.uint32(258).string(t.referrer),null!=t.localTimestamp&&t.hasOwnProperty("localTimestamp")&&i.uint32(264).int64(t.localTimestamp),null!=t.customParam4&&t.hasOwnProperty("customParam4")&&i.uint32(274).string(t.customParam4),null!=t.customParam5&&t.hasOwnProperty("customParam5")&&i.uint32(282).string(t.customParam5),i},t.fromObject=function(t){if(t instanceof c.ProtoElementsRequest)return t;var i=new c.ProtoElementsRequest;if(t.tokens){if(!Array.isArray(t.tokens))throw TypeError(".ProtoElementsRequest.tokens: array expected");i.tokens=[];for(var e=0;e<t.tokens.length;++e)i.tokens[e]=String(t.tokens[e])}if(null!=t.pageUrl&&(i.pageUrl=String(t.pageUrl)),null!=t.userId&&(i.userId=String(t.userId)),null!=t.forcePlayerId&&(i.forcePlayerId=String(t.forcePlayerId)),null!=t.forceMediaId&&(i.forceMediaId=String(t.forceMediaId)),null!=t.forcePlaylistId&&(i.forcePlaylistId=String(t.forcePlaylistId)),null!=t.version&&(i.version=0|t.version),t.forceLineItemIds){if(!Array.isArray(t.forceLineItemIds))throw TypeError(".ProtoElementsRequest.forceLineItemIds: array expected");i.forceLineItemIds=[];for(e=0;e<t.forceLineItemIds.length;++e)i.forceLineItemIds[e]=String(t.forceLineItemIds[e])}switch(null!=t.clientAb0&&(i.clientAb0=0|t.clientAb0),null!=t.clientAb1&&(i.clientAb1=0|t.clientAb1),null!=t.customParam1&&(i.customParam1=String(t.customParam1)),null!=t.customParam2&&(i.customParam2=String(t.customParam2)),null!=t.customParam3&&(i.customParam3=String(t.customParam3)),null!=t.forceExploration&&(i.forceExploration=Boolean(t.forceExploration)),null!=t.es6&&(i.es6=Boolean(t.es6)),null!=t.bundleId&&(i.bundleId=String(t.bundleId)),null!=t.forceSourceItemId&&(i.forceSourceItemId=String(t.forceSourceItemId)),null!=t.parseDomain&&(i.parseDomain=Boolean(t.parseDomain)),t.implementationType){case"Web":case 0:i.implementationType=0;break;case"Amp":case 1:i.implementationType=1}if(t.queryJsTargeting){if("object"!=typeof t.queryJsTargeting)throw TypeError(".ProtoElementsRequest.queryJsTargeting: object expected");i.queryJsTargeting={};var s=Object.keys(t.queryJsTargeting);for(e=0;e<s.length;++e)i.queryJsTargeting[s[e]]=String(t.queryJsTargeting[s[e]])}if(null!=t.isConsentConnatix&&(i.isConsentConnatix=Boolean(t.isConsentConnatix)),t.reloadedPlayers){if("object"!=typeof t.reloadedPlayers)throw TypeError(".ProtoElementsRequest.reloadedPlayers: object expected");i.reloadedPlayers={};for(s=Object.keys(t.reloadedPlayers),e=0;e<s.length;++e)i.reloadedPlayers[s[e]]=String(t.reloadedPlayers[s[e]])}return null!=t.disableTracking&&(i.disableTracking=Boolean(t.disableTracking)),null!=t.referrer&&(i.referrer=String(t.referrer)),null!=t.localTimestamp&&(o.Long?(i.localTimestamp=o.Long.fromValue(t.localTimestamp)).unsigned=!1:"string"==typeof t.localTimestamp?i.localTimestamp=parseInt(t.localTimestamp,10):"number"==typeof t.localTimestamp?i.localTimestamp=t.localTimestamp:"object"==typeof t.localTimestamp&&(i.localTimestamp=new o.LongBits(t.localTimestamp.low>>>0,t.localTimestamp.high>>>0).toNumber())),null!=t.customParam4&&(i.customParam4=String(t.customParam4)),null!=t.customParam5&&(i.customParam5=String(t.customParam5)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoOutstreamInitialRenderingEnum=(s={},(n=Object.create(s))[s[0]="ExpandWithAd"]=0,n[s[1]="FullyRendered"]=1,n),c.ProtoOutstreamEndAdBreakPolicyEnum=function(){var t={},i=Object.create(t);return i[t[0]="Hide"]=0,i[t[1]="HouseScreen"]=1,i[t[2]="Loop"]=2,i}(),c.ProtoGalleryStyleMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="Detailed"]=1,i[t[2]="Visual"]=2,i}(),c.ProtoLogoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="ControlBar"]=1,i[t[2]="BottomRight"]=2,i[t[3]="BottomLeft"]=3,i[t[4]="TopRight"]=4,i[t[5]="TopLeft"]=5,i[t[6]="Center"]=6,i}(),c.ProtoGalleryOrientationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Landscape"]=0,i[t[1]="Portrait"]=1,i}(),c.ProtoElementsTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="InStream"]=0,i[t[1]="OutStream"]=1,i[t[2]="InStreamInApp"]=2,i[t[3]="Live"]=3,i}(),c.ProtoPlayerUpNextMode=function(){var t={},i=Object.create(t);return i[t[0]="Loop"]=0,i[t[1]="Next"]=1,i[t[2]="Stop"]=2,i}(),c.ProtoPlaylistItem=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.mediaId="",t.prototype.revisionNumber=0,t.prototype.mediaContentVersionId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlaylistItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.mediaId=t.string();break;case 2:s.revisionNumber=t.int32();break;case 3:s.mediaContentVersionId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.mediaId="",e.revisionNumber=0,e.mediaContentVersionId=""),null!=t.mediaId&&t.hasOwnProperty("mediaId")&&(e.mediaId=t.mediaId),null!=t.revisionNumber&&t.hasOwnProperty("revisionNumber")&&(e.revisionNumber=t.revisionNumber),null!=t.mediaContentVersionId&&t.hasOwnProperty("mediaContentVersionId")&&(e.mediaContentVersionId=t.mediaContentVersionId),e},t}(),c.ProtoElements=function(){function t(t){if(this.sharingDestinations=[],this.floatingDeviceMode=[],this.lineItems=[],this.playlist=[],this.adBreaks=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.playerId="",t.prototype.playbackMode=0,t.prototype.soundMode=0,t.prototype.upNextMode=1,t.prototype.containerSelector="",t.prototype.position=0,t.prototype.insertPosition=0,t.prototype.forceInsertPath=!1,t.prototype.renderInFrame=!1,t.prototype.scrollHijackingProtection=!1,t.prototype.preRollBreak=0,t.prototype.postRollBreak=0,t.prototype.midRollNumber=-1,t.prototype.timeBetweenAds=0,t.prototype.minTimeBeforeFirstAd=0,t.prototype.adViewabilityPolicy=0,t.prototype.responsive=!1,t.prototype.ratioWidth=0,t.prototype.ratioHeight=0,t.prototype.fixedWidth=0,t.prototype.fixedHeight=0,t.prototype.casting=!1,t.prototype.sharingDestinations=o.emptyArray,t.prototype.closedCaption=!1,t.prototype.muteWatermark=!1,t.prototype.expandButton=!1,t.prototype.closeButtonMode=0,t.prototype.floatingMode=0,t.prototype.floatingDeviceMode=o.emptyArray,t.prototype.floatingCloseButtonMode=0,t.prototype.floatingFixedPosition=0,t.prototype.floatingPageElement="",t.prototype.floatingUseElementWidth=!1,t.prototype.floatingScrollPosition=0,t.prototype.floatingGutterX=0,t.prototype.floatingGutterY=0,t.prototype.floatingWidth=0,t.prototype.iconsColor="",t.prototype.accentColor="",t.prototype.tooltipTextColor="",t.prototype.tooltipBackgroundColor="",t.prototype.html="",t.prototype.galleryStyle=0,t.prototype.logoPosition=0,t.prototype.logoUrl="",t.prototype.lineItems=o.emptyArray,t.prototype.adPlaybackMode=0,t.prototype.css="",t.prototype.sessionId="",t.prototype.playlistId="",t.prototype.playerType=0,t.prototype.outstreamInitialRendering=0,t.prototype.outstreamHouseBackgroundColor="",t.prototype.outstreamTotalAdBreakLength=0,t.prototype.outstreamEndAdBreakPolicy=0,t.prototype.galleryOrientation=0,t.prototype.playlist=o.emptyArray,t.prototype.floatingAppendLocation=0,t.prototype.floatingYAxisPadding=0,t.prototype.customJsCode="",t.prototype.videoQuality=0,t.prototype.initializationSettingsJson="",t.prototype.adSkippability=0,t.prototype.skipAdAfter=5,t.prototype.adBreaks=o.emptyArray,t.prototype.amazonTamSlotId="",t.prototype.midRollOnlyOnLongContent=!0,t.prototype.limitClientSideApiUse=!1,t.prototype.abTestId="",t.prototype.adsMustBeSkippableIfLongerThan=31,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoElements;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.playerId=t.string();break;case 2:s.playbackMode=t.int32();break;case 3:s.soundMode=t.int32();break;case 4:s.upNextMode=t.int32();break;case 5:s.containerSelector=t.string();break;case 6:s.position=t.int32();break;case 7:s.insertPosition=t.int32();break;case 8:s.forceInsertPath=t.bool();break;case 9:s.renderInFrame=t.bool();break;case 10:s.scrollHijackingProtection=t.bool();break;case 11:s.preRollBreak=t.int32();break;case 12:s.postRollBreak=t.int32();break;case 13:s.midRollNumber=t.int32();break;case 14:s.timeBetweenAds=t.int32();break;case 15:s.minTimeBeforeFirstAd=t.int32();break;case 16:s.adViewabilityPolicy=t.int32();break;case 18:s.responsive=t.bool();break;case 19:s.ratioWidth=t.int32();break;case 20:s.ratioHeight=t.int32();break;case 21:s.fixedWidth=t.int32();break;case 22:s.fixedHeight=t.int32();break;case 23:s.casting=t.bool();break;case 24:if(s.sharingDestinations&&s.sharingDestinations.length||(s.sharingDestinations=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.sharingDestinations.push(t.int32());else s.sharingDestinations.push(t.int32());break;case 25:s.closedCaption=t.bool();break;case 26:s.muteWatermark=t.bool();break;case 27:s.expandButton=t.bool();break;case 28:s.closeButtonMode=t.int32();break;case 29:s.floatingMode=t.int32();break;case 30:if(s.floatingDeviceMode&&s.floatingDeviceMode.length||(s.floatingDeviceMode=[]),2==(7&n))for(r=t.uint32()+t.pos;t.pos<r;)s.floatingDeviceMode.push(t.int32());else s.floatingDeviceMode.push(t.int32());break;case 31:s.floatingCloseButtonMode=t.int32();break;case 32:s.floatingFixedPosition=t.int32();break;case 33:s.floatingPageElement=t.string();break;case 34:s.floatingUseElementWidth=t.bool();break;case 35:s.floatingScrollPosition=t.int32();break;case 36:s.floatingGutterX=t.int32();break;case 37:s.floatingGutterY=t.int32();break;case 38:s.floatingWidth=t.int32();break;case 39:s.iconsColor=t.string();break;case 40:s.accentColor=t.string();break;case 41:s.tooltipTextColor=t.string();break;case 42:s.tooltipBackgroundColor=t.string();break;case 43:s.html=t.string();break;case 45:s.galleryStyle=t.int32();break;case 46:s.logoPosition=t.int32();break;case 47:s.logoUrl=t.string();break;case 49:s.lineItems&&s.lineItems.length||(s.lineItems=[]),s.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 50:s.adPlaybackMode=t.int32();break;case 51:s.css=t.string();break;case 52:s.sessionId=t.string();break;case 53:s.playlistId=t.string();break;case 54:s.playerType=t.int32();break;case 55:s.outstreamInitialRendering=t.int32();break;case 56:s.outstreamHouseBackgroundColor=t.string();break;case 57:s.outstreamTotalAdBreakLength=t.int32();break;case 58:s.outstreamEndAdBreakPolicy=t.int32();break;case 59:s.galleryOrientation=t.int32();break;case 60:s.playlist&&s.playlist.length||(s.playlist=[]),s.playlist.push(c.ProtoPlaylistItem.decode(t,t.uint32()));break;case 61:s.floatingAppendLocation=t.int32();break;case 62:s.floatingYAxisPadding=t.int32();break;case 63:s.customJsCode=t.string();break;case 64:s.videoQuality=t.int32();break;case 65:s.initializationSettingsJson=t.string();break;case 66:s.adSkippability=t.int32();break;case 67:s.skipAdAfter=t.int32();break;case 68:s.adBreaks&&s.adBreaks.length||(s.adBreaks=[]),s.adBreaks.push(c.ProtoAdBreak.decode(t,t.uint32()));break;case 69:s.amazonTamSlotId=t.string();break;case 70:s.midRollOnlyOnLongContent=t.bool();break;case 71:s.limitClientSideApiUse=t.bool();break;case 72:s.abTestId=t.string();break;case 73:s.adsMustBeSkippableIfLongerThan=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.sharingDestinations=[],e.floatingDeviceMode=[],e.lineItems=[],e.playlist=[],e.adBreaks=[]),i.defaults&&(e.playerId="",e.playbackMode=i.enums===String?"Autoplay":0,e.soundMode=i.enums===String?"Mute":0,e.upNextMode=i.enums===String?"Next":1,e.containerSelector="",e.position=0,e.insertPosition=i.enums===String?"WithinContainer":0,e.forceInsertPath=!1,e.renderInFrame=!1,e.scrollHijackingProtection=!1,e.preRollBreak=0,e.postRollBreak=0,e.midRollNumber=-1,e.timeBetweenAds=0,e.minTimeBeforeFirstAd=0,e.adViewabilityPolicy=i.enums===String?"Default":0,e.responsive=!1,e.ratioWidth=0,e.ratioHeight=0,e.fixedWidth=0,e.fixedHeight=0,e.casting=!1,e.closedCaption=!1,e.muteWatermark=!1,e.expandButton=!1,e.closeButtonMode=i.enums===String?"Off":0,e.floatingMode=i.enums===String?"Off":0,e.floatingCloseButtonMode=i.enums===String?"Off":0,e.floatingFixedPosition=i.enums===String?"Page":0,e.floatingPageElement="",e.floatingUseElementWidth=!1,e.floatingScrollPosition=i.enums===String?"BottomRight":0,e.floatingGutterX=0,e.floatingGutterY=0,e.floatingWidth=0,e.iconsColor="",e.accentColor="",e.tooltipTextColor="",e.tooltipBackgroundColor="",e.html="",e.galleryStyle=i.enums===String?"None":0,e.logoPosition=i.enums===String?"None":0,e.logoUrl="",e.adPlaybackMode=i.enums===String?"Autoplay":0,e.css="",e.sessionId="",e.playlistId="",e.playerType=i.enums===String?"InStream":0,e.outstreamInitialRendering=i.enums===String?"ExpandWithAd":0,e.outstreamHouseBackgroundColor="",e.outstreamTotalAdBreakLength=0,e.outstreamEndAdBreakPolicy=i.enums===String?"Hide":0,e.galleryOrientation=i.enums===String?"Landscape":0,e.floatingAppendLocation=i.enums===String?"Above":0,e.floatingYAxisPadding=0,e.customJsCode="",e.videoQuality=i.enums===String?"Auto":0,e.initializationSettingsJson="",e.adSkippability=i.enums===String?"IfLongerThan":0,e.skipAdAfter=5,e.amazonTamSlotId="",e.midRollOnlyOnLongContent=!0,e.limitClientSideApiUse=!1,e.abTestId="",e.adsMustBeSkippableIfLongerThan=31),null!=t.playerId&&t.hasOwnProperty("playerId")&&(e.playerId=t.playerId),null!=t.playbackMode&&t.hasOwnProperty("playbackMode")&&(e.playbackMode=i.enums===String?c.ProtoPlayerPlaybackModeEnum[t.playbackMode]:t.playbackMode),null!=t.soundMode&&t.hasOwnProperty("soundMode")&&(e.soundMode=i.enums===String?c.ProtoPlayerSoundMode[t.soundMode]:t.soundMode),null!=t.upNextMode&&t.hasOwnProperty("upNextMode")&&(e.upNextMode=i.enums===String?c.ProtoPlayerUpNextMode[t.upNextMode]:t.upNextMode),null!=t.containerSelector&&t.hasOwnProperty("containerSelector")&&(e.containerSelector=t.containerSelector),null!=t.position&&t.hasOwnProperty("position")&&(e.position=t.position),null!=t.insertPosition&&t.hasOwnProperty("insertPosition")&&(e.insertPosition=i.enums===String?c.ProtoPlayerInsertMode[t.insertPosition]:t.insertPosition),null!=t.forceInsertPath&&t.hasOwnProperty("forceInsertPath")&&(e.forceInsertPath=t.forceInsertPath),null!=t.renderInFrame&&t.hasOwnProperty("renderInFrame")&&(e.renderInFrame=t.renderInFrame),null!=t.scrollHijackingProtection&&t.hasOwnProperty("scrollHijackingProtection")&&(e.scrollHijackingProtection=t.scrollHijackingProtection),null!=t.preRollBreak&&t.hasOwnProperty("preRollBreak")&&(e.preRollBreak=t.preRollBreak),null!=t.postRollBreak&&t.hasOwnProperty("postRollBreak")&&(e.postRollBreak=t.postRollBreak),null!=t.midRollNumber&&t.hasOwnProperty("midRollNumber")&&(e.midRollNumber=t.midRollNumber),null!=t.timeBetweenAds&&t.hasOwnProperty("timeBetweenAds")&&(e.timeBetweenAds=t.timeBetweenAds),null!=t.minTimeBeforeFirstAd&&t.hasOwnProperty("minTimeBeforeFirstAd")&&(e.minTimeBeforeFirstAd=t.minTimeBeforeFirstAd),null!=t.adViewabilityPolicy&&t.hasOwnProperty("adViewabilityPolicy")&&(e.adViewabilityPolicy=i.enums===String?c.ProtoAdViewabilityPolicy[t.adViewabilityPolicy]:t.adViewabilityPolicy),null!=t.responsive&&t.hasOwnProperty("responsive")&&(e.responsive=t.responsive),null!=t.ratioWidth&&t.hasOwnProperty("ratioWidth")&&(e.ratioWidth=t.ratioWidth),null!=t.ratioHeight&&t.hasOwnProperty("ratioHeight")&&(e.ratioHeight=t.ratioHeight),null!=t.fixedWidth&&t.hasOwnProperty("fixedWidth")&&(e.fixedWidth=t.fixedWidth),null!=t.fixedHeight&&t.hasOwnProperty("fixedHeight")&&(e.fixedHeight=t.fixedHeight),null!=t.casting&&t.hasOwnProperty("casting")&&(e.casting=t.casting),t.sharingDestinations&&t.sharingDestinations.length){e.sharingDestinations=[];for(var s=0;s<t.sharingDestinations.length;++s)e.sharingDestinations[s]=i.enums===String?c.ProtoSharingDestination[t.sharingDestinations[s]]:t.sharingDestinations[s]}if(null!=t.closedCaption&&t.hasOwnProperty("closedCaption")&&(e.closedCaption=t.closedCaption),null!=t.muteWatermark&&t.hasOwnProperty("muteWatermark")&&(e.muteWatermark=t.muteWatermark),null!=t.expandButton&&t.hasOwnProperty("expandButton")&&(e.expandButton=t.expandButton),null!=t.closeButtonMode&&t.hasOwnProperty("closeButtonMode")&&(e.closeButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.closeButtonMode]:t.closeButtonMode),null!=t.floatingMode&&t.hasOwnProperty("floatingMode")&&(e.floatingMode=i.enums===String?c.ProtoPlayerFloatingMode[t.floatingMode]:t.floatingMode),t.floatingDeviceMode&&t.floatingDeviceMode.length){e.floatingDeviceMode=[];for(s=0;s<t.floatingDeviceMode.length;++s)e.floatingDeviceMode[s]=i.enums===String?c.ProtoDeviceType[t.floatingDeviceMode[s]]:t.floatingDeviceMode[s]}if(null!=t.floatingCloseButtonMode&&t.hasOwnProperty("floatingCloseButtonMode")&&(e.floatingCloseButtonMode=i.enums===String?c.ProtoPlayerCloseButtonMode[t.floatingCloseButtonMode]:t.floatingCloseButtonMode),null!=t.floatingFixedPosition&&t.hasOwnProperty("floatingFixedPosition")&&(e.floatingFixedPosition=i.enums===String?c.ProtoFloatingFixedPositionMode[t.floatingFixedPosition]:t.floatingFixedPosition),null!=t.floatingPageElement&&t.hasOwnProperty("floatingPageElement")&&(e.floatingPageElement=t.floatingPageElement),null!=t.floatingUseElementWidth&&t.hasOwnProperty("floatingUseElementWidth")&&(e.floatingUseElementWidth=t.floatingUseElementWidth),null!=t.floatingScrollPosition&&t.hasOwnProperty("floatingScrollPosition")&&(e.floatingScrollPosition=i.enums===String?c.ProtoPositionMode[t.floatingScrollPosition]:t.floatingScrollPosition),null!=t.floatingGutterX&&t.hasOwnProperty("floatingGutterX")&&(e.floatingGutterX=t.floatingGutterX),null!=t.floatingGutterY&&t.hasOwnProperty("floatingGutterY")&&(e.floatingGutterY=t.floatingGutterY),null!=t.floatingWidth&&t.hasOwnProperty("floatingWidth")&&(e.floatingWidth=t.floatingWidth),null!=t.iconsColor&&t.hasOwnProperty("iconsColor")&&(e.iconsColor=t.iconsColor),null!=t.accentColor&&t.hasOwnProperty("accentColor")&&(e.accentColor=t.accentColor),null!=t.tooltipTextColor&&t.hasOwnProperty("tooltipTextColor")&&(e.tooltipTextColor=t.tooltipTextColor),null!=t.tooltipBackgroundColor&&t.hasOwnProperty("tooltipBackgroundColor")&&(e.tooltipBackgroundColor=t.tooltipBackgroundColor),null!=t.html&&t.hasOwnProperty("html")&&(e.html=t.html),null!=t.galleryStyle&&t.hasOwnProperty("galleryStyle")&&(e.galleryStyle=i.enums===String?c.ProtoGalleryStyleMode[t.galleryStyle]:t.galleryStyle),null!=t.logoPosition&&t.hasOwnProperty("logoPosition")&&(e.logoPosition=i.enums===String?c.ProtoLogoPositionMode[t.logoPosition]:t.logoPosition),null!=t.logoUrl&&t.hasOwnProperty("logoUrl")&&(e.logoUrl=t.logoUrl),t.lineItems&&t.lineItems.length){e.lineItems=[];for(s=0;s<t.lineItems.length;++s)e.lineItems[s]=c.ProtoLineItem.toObject(t.lineItems[s],i)}if(null!=t.adPlaybackMode&&t.hasOwnProperty("adPlaybackMode")&&(e.adPlaybackMode=i.enums===String?c.ProtoAdPlaybackMode[t.adPlaybackMode]:t.adPlaybackMode),null!=t.css&&t.hasOwnProperty("css")&&(e.css=t.css),null!=t.sessionId&&t.hasOwnProperty("sessionId")&&(e.sessionId=t.sessionId),null!=t.playlistId&&t.hasOwnProperty("playlistId")&&(e.playlistId=t.playlistId),null!=t.playerType&&t.hasOwnProperty("playerType")&&(e.playerType=i.enums===String?c.ProtoElementsTypeEnum[t.playerType]:t.playerType),null!=t.outstreamInitialRendering&&t.hasOwnProperty("outstreamInitialRendering")&&(e.outstreamInitialRendering=i.enums===String?c.ProtoOutstreamInitialRenderingEnum[t.outstreamInitialRendering]:t.outstreamInitialRendering),null!=t.outstreamHouseBackgroundColor&&t.hasOwnProperty("outstreamHouseBackgroundColor")&&(e.outstreamHouseBackgroundColor=t.outstreamHouseBackgroundColor),null!=t.outstreamTotalAdBreakLength&&t.hasOwnProperty("outstreamTotalAdBreakLength")&&(e.outstreamTotalAdBreakLength=t.outstreamTotalAdBreakLength),null!=t.outstreamEndAdBreakPolicy&&t.hasOwnProperty("outstreamEndAdBreakPolicy")&&(e.outstreamEndAdBreakPolicy=i.enums===String?c.ProtoOutstreamEndAdBreakPolicyEnum[t.outstreamEndAdBreakPolicy]:t.outstreamEndAdBreakPolicy),null!=t.galleryOrientation&&t.hasOwnProperty("galleryOrientation")&&(e.galleryOrientation=i.enums===String?c.ProtoGalleryOrientationEnum[t.galleryOrientation]:t.galleryOrientation),t.playlist&&t.playlist.length){e.playlist=[];for(s=0;s<t.playlist.length;++s)e.playlist[s]=c.ProtoPlaylistItem.toObject(t.playlist[s],i)}if(null!=t.floatingAppendLocation&&t.hasOwnProperty("floatingAppendLocation")&&(e.floatingAppendLocation=i.enums===String?c.ProtoFloatingAppendLocationEnum[t.floatingAppendLocation]:t.floatingAppendLocation),null!=t.floatingYAxisPadding&&t.hasOwnProperty("floatingYAxisPadding")&&(e.floatingYAxisPadding=t.floatingYAxisPadding),null!=t.customJsCode&&t.hasOwnProperty("customJsCode")&&(e.customJsCode=t.customJsCode),null!=t.videoQuality&&t.hasOwnProperty("videoQuality")&&(e.videoQuality=i.enums===String?c.ProtoVideoQuality[t.videoQuality]:t.videoQuality),null!=t.initializationSettingsJson&&t.hasOwnProperty("initializationSettingsJson")&&(e.initializationSettingsJson=t.initializationSettingsJson),null!=t.adSkippability&&t.hasOwnProperty("adSkippability")&&(e.adSkippability=i.enums===String?c.ProtoPlayerAdSkippability[t.adSkippability]:t.adSkippability),null!=t.skipAdAfter&&t.hasOwnProperty("skipAdAfter")&&(e.skipAdAfter=t.skipAdAfter),t.adBreaks&&t.adBreaks.length){e.adBreaks=[];for(s=0;s<t.adBreaks.length;++s)e.adBreaks[s]=c.ProtoAdBreak.toObject(t.adBreaks[s],i)}return null!=t.amazonTamSlotId&&t.hasOwnProperty("amazonTamSlotId")&&(e.amazonTamSlotId=t.amazonTamSlotId),null!=t.midRollOnlyOnLongContent&&t.hasOwnProperty("midRollOnlyOnLongContent")&&(e.midRollOnlyOnLongContent=t.midRollOnlyOnLongContent),null!=t.limitClientSideApiUse&&t.hasOwnProperty("limitClientSideApiUse")&&(e.limitClientSideApiUse=t.limitClientSideApiUse),null!=t.abTestId&&t.hasOwnProperty("abTestId")&&(e.abTestId=t.abTestId),null!=t.adsMustBeSkippableIfLongerThan&&t.hasOwnProperty("adsMustBeSkippableIfLongerThan")&&(e.adsMustBeSkippableIfLongerThan=t.adsMustBeSkippableIfLongerThan),e},t}(),c.ProtoElementsResponse=function(){function t(t){if(this.players=[],this.lineItems=[],this.cookieSyncUrls={},t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.errorMessage="",t.prototype.players=o.emptyArray,t.prototype.browser=null,t.prototype.geoLocation=null,t.prototype.lineItems=o.emptyArray,t.prototype.cookieSyncUrls=o.emptyObject,t.prototype.explorationMode=!1,t.prototype.supplyChain=null,t.prototype.secondLevelDomain="",t.prototype.userInformation=null,t.prototype.serverAb0=0,t.prototype.serverAb1=0,t.prototype.isSeoTraffic=!1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e,s=void 0===i?t.len:t.pos+i,n=new c.ProtoElementsResponse;t.pos<s;){var r=t.uint32();switch(r>>>3){case 1:n.errorMessage=t.string();break;case 10:n.players&&n.players.length||(n.players=[]),n.players.push(c.ProtoElements.decode(t,t.uint32()));break;case 11:n.browser=c.Browser.decode(t,t.uint32());break;case 12:n.geoLocation=c.GeoLocation.decode(t,t.uint32());break;case 13:n.lineItems&&n.lineItems.length||(n.lineItems=[]),n.lineItems.push(c.ProtoLineItem.decode(t,t.uint32()));break;case 14:t.skip().pos++,n.cookieSyncUrls===o.emptyObject&&(n.cookieSyncUrls={}),e=t.int32(),t.pos++,n.cookieSyncUrls[e]=t.string();break;case 15:n.explorationMode=t.bool();break;case 17:n.supplyChain=c.ProtoSupplyChain.decode(t,t.uint32());break;case 18:n.secondLevelDomain=t.string();break;case 20:n.userInformation=c.ProtoUserInformation.decode(t,t.uint32());break;case 21:n.serverAb0=t.int32();break;case 22:n.serverAb1=t.int32();break;case 23:n.isSeoTraffic=t.bool();break;default:t.skipType(7&r)}}return n},t.toObject=function(t,i){i||(i={});var e,s={};if((i.arrays||i.defaults)&&(s.players=[],s.lineItems=[]),(i.objects||i.defaults)&&(s.cookieSyncUrls={}),i.defaults&&(s.errorMessage="",s.browser=null,s.geoLocation=null,s.explorationMode=!1,s.supplyChain=null,s.secondLevelDomain="",s.userInformation=null,s.serverAb0=0,s.serverAb1=0,s.isSeoTraffic=!1),null!=t.errorMessage&&t.hasOwnProperty("errorMessage")&&(s.errorMessage=t.errorMessage),t.players&&t.players.length){s.players=[];for(var n=0;n<t.players.length;++n)s.players[n]=c.ProtoElements.toObject(t.players[n],i)}if(null!=t.browser&&t.hasOwnProperty("browser")&&(s.browser=c.Browser.toObject(t.browser,i)),null!=t.geoLocation&&t.hasOwnProperty("geoLocation")&&(s.geoLocation=c.GeoLocation.toObject(t.geoLocation,i)),t.lineItems&&t.lineItems.length){s.lineItems=[];for(n=0;n<t.lineItems.length;++n)s.lineItems[n]=c.ProtoLineItem.toObject(t.lineItems[n],i)}if(t.cookieSyncUrls&&(e=Object.keys(t.cookieSyncUrls)).length){s.cookieSyncUrls={};for(n=0;n<e.length;++n)s.cookieSyncUrls[e[n]]=t.cookieSyncUrls[e[n]]}return null!=t.explorationMode&&t.hasOwnProperty("explorationMode")&&(s.explorationMode=t.explorationMode),null!=t.supplyChain&&t.hasOwnProperty("supplyChain")&&(s.supplyChain=c.ProtoSupplyChain.toObject(t.supplyChain,i)),null!=t.secondLevelDomain&&t.hasOwnProperty("secondLevelDomain")&&(s.secondLevelDomain=t.secondLevelDomain),null!=t.userInformation&&t.hasOwnProperty("userInformation")&&(s.userInformation=c.ProtoUserInformation.toObject(t.userInformation,i)),null!=t.serverAb0&&t.hasOwnProperty("serverAb0")&&(s.serverAb0=t.serverAb0),null!=t.serverAb1&&t.hasOwnProperty("serverAb1")&&(s.serverAb1=t.serverAb1),null!=t.isSeoTraffic&&t.hasOwnProperty("isSeoTraffic")&&(s.isSeoTraffic=t.isSeoTraffic),s},t}(),c.ProtoCreativeTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="ThirdParty"]=0,i[t[1]="MediaFile"]=1,i[t[2]="Rtb"]=2,i[t[3]="External"]=3,i[t[4]="HeaderBidder"]=4,i[t[7]="Tam"]=7,i[t[8]="TamDeal"]=8,i}(),c.ProtoResetCapTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="TimeCapping"]=0,i[t[1]="ContentCapping"]=1,i[t[2]="OpportunityCapping"]=2,i}(),c.ProtoAdSlotsEnum=function(){var t={},i=Object.create(t);return i[t[0]="PreRoll"]=0,i[t[1]="MidRoll"]=1,i[t[2]="PostRoll"]=2,i}(),c.ProtoLineItemPriority=function(){var t={},i=Object.create(t);return i[t[0]="House"]=0,i[t[1]="Default"]=1,i[t[2]="Preferred"]=2,i[t[3]="Top"]=3,i}(),c.ProtoAdSkipMode=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan31Sec"]=0,i[t[1]="Always"]=1,i[t[2]="Never"]=2,i[t[3]="NotAplicable"]=3,i}(),c.ProtoAdType=function(){var t={},i=Object.create(t);return i[t[0]="Video"]=0,i[t[1]="Overlay"]=1,i}(),c.ProtoChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="All"]=1,i[t[2]="SingleAd"]=2,i[t[3]="AdPod"]=3,i}(),c.ProtoLineItemTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Only"]=0,i[t[1]="Except"]=1,i}(),c.ProtoLineItemAdSlotTargetingTypeEnum=function(){var t={},i=Object.create(t);return i[t[1]="SpecificSlots"]=1,i[t[2]="Interval"]=2,i}(),c.ProtoLineItemPauseAdOutOfViewEnum=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoLineItemContextualTargetingEnum=function(){var t={},i=Object.create(t);return i[t[0]="IncludeAny"]=0,i[t[1]="IncludeAll"]=1,i[t[2]="ExcludeAny"]=2,i[t[3]="ExcludeAll"]=3,i}(),c.ProtoSizeChoiceCriteriaEnum=function(){var t={},i=Object.create(t);return i[t[0]="GreaterThan"]=0,i[t[1]="SmallerThan"]=1,i[t[2]="Between"]=2,i}(),c.ProtoLineItemAdBreakTargeting=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adRollType=0,t.prototype.adBreakTypeEnum=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adRollType=t.int32();break;case 2:s.adBreakTypeEnum=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.adRollType=i.enums===String?"None":0,e.adBreakTypeEnum=i.enums===String?"All":1),null!=t.adRollType&&t.hasOwnProperty("adRollType")&&(e.adRollType=i.enums===String?c.ProtoAdBreakTypeEnum[t.adRollType]:t.adRollType),null!=t.adBreakTypeEnum&&t.hasOwnProperty("adBreakTypeEnum")&&(e.adBreakTypeEnum=i.enums===String?c.ProtoLineItemAdBreakTypeEnum[t.adBreakTypeEnum]:t.adBreakTypeEnum),e},t}(),c.ProtoLineItemAdPodTargeting=function(){function t(t){if(this.adSlotPositions=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.targetingType=0,t.prototype.adSlotTargetingType=1,t.prototype.adSlotPositions=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdPodTargeting;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.targetingType=t.int32();break;case 2:s.adSlotTargetingType=t.int32();break;case 3:if(s.adSlotPositions&&s.adSlotPositions.length||(s.adSlotPositions=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.adSlotPositions.push(t.int32());else s.adSlotPositions.push(t.int32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adSlotPositions=[]),i.defaults&&(e.targetingType=i.enums===String?"Only":0,e.adSlotTargetingType=i.enums===String?"SpecificSlots":1),null!=t.targetingType&&t.hasOwnProperty("targetingType")&&(e.targetingType=i.enums===String?c.ProtoLineItemTargetingTypeEnum[t.targetingType]:t.targetingType),null!=t.adSlotTargetingType&&t.hasOwnProperty("adSlotTargetingType")&&(e.adSlotTargetingType=i.enums===String?c.ProtoLineItemAdSlotTargetingTypeEnum[t.adSlotTargetingType]:t.adSlotTargetingType),t.adSlotPositions&&t.adSlotPositions.length){e.adSlotPositions=[];for(var s=0;s<t.adSlotPositions.length;++s)e.adSlotPositions[s]=t.adSlotPositions[s]}return e},t}(),c.ProtoLineItemAdBreakSettings=function(){function t(t){if(this.adBreakTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.adBreakTargeting=o.emptyArray,t.prototype.adPodTargeting=null,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItemAdBreakSettings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.adBreakTargeting&&s.adBreakTargeting.length||(s.adBreakTargeting=[]),s.adBreakTargeting.push(c.ProtoLineItemAdBreakTargeting.decode(t,t.uint32()));break;case 2:s.adPodTargeting=c.ProtoLineItemAdPodTargeting.decode(t,t.uint32());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.adBreakTargeting=[]),i.defaults&&(e.adPodTargeting=null),t.adBreakTargeting&&t.adBreakTargeting.length){e.adBreakTargeting=[];for(var s=0;s<t.adBreakTargeting.length;++s)e.adBreakTargeting[s]=c.ProtoLineItemAdBreakTargeting.toObject(t.adBreakTargeting[s],i)}return null!=t.adPodTargeting&&t.hasOwnProperty("adPodTargeting")&&(e.adPodTargeting=c.ProtoLineItemAdPodTargeting.toObject(t.adPodTargeting,i)),e},t}(),c.ProtoLineItem=function(){function t(t){if(this.trackers=[],this.renditions=[],this.floorPrices=[],this.advertiserContextualTargeting=[],this.publisherContextualTargeting=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.publisherLineItemId="",t.prototype.advertiserLineItemId="",t.prototype.adTag="",t.prototype.creativeType=0,t.prototype.sound=!1,t.prototype.viewability=!1,t.prototype.impressionTimeSpent=0,t.prototype.vendorId="",t.prototype.trackers=o.emptyArray,t.prototype.duration=0,t.prototype.renditions=o.emptyArray,t.prototype.mediaCreativeId="",t.prototype.ignoreFilledRequests=!1,t.prototype.requestCap=3,t.prototype.impressionCap=0,t.prototype.successRate=0,t.prototype.lineItemPriority=0,t.prototype.headerBidderBids="",t.prototype.headerBidderTimeout=0,t.prototype.mediaCreativeClickUrl="",t.prototype.resetRequestsCapTime=60,t.prototype.resetImpressionsCapTime=60,t.prototype.resetCapType=0,t.prototype.creativeHlsFileName="",t.prototype.timeBetweenRequests=0,t.prototype.skipMode=0,t.prototype.mediaIdTargeting=null,t.prototype.mediaKeywordsTargeting=null,t.prototype.mediaLanguageTargeting=null,t.prototype.adType=0,t.prototype.overlayTime=30,t.prototype.floorPrice=0,t.prototype.adBreakSettings=null,t.prototype.floorPrices=o.emptyArray,t.prototype.bidRate=0,t.prototype.pauseAdOutOfView=0,t.prototype.moatTrackingEnabled=!1,t.prototype.cnxCreativeId="",t.prototype.blockedDomainsRevisionNumber=0,t.prototype.advertiserContextualTargeting=o.emptyArray,t.prototype.publisherContextualTargeting=o.emptyArray,t.prototype.amazonDealId="",t.prototype.playerSizeTargetings=null,t.prototype.playerSize="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoLineItem;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.publisherLineItemId=t.string();break;case 2:s.advertiserLineItemId=t.string();break;case 3:s.adTag=t.string();break;case 4:s.creativeType=t.int32();break;case 6:s.sound=t.bool();break;case 7:s.viewability=t.bool();break;case 9:s.impressionTimeSpent=t.int32();break;case 10:s.vendorId=t.string();break;case 12:s.trackers&&s.trackers.length||(s.trackers=[]),s.trackers.push(c.CreativeTrackerViewModel.decode(t,t.uint32()));break;case 13:s.duration=t.int32();break;case 14:s.renditions&&s.renditions.length||(s.renditions=[]),s.renditions.push(c.ProtoRendition.decode(t,t.uint32()));break;case 15:s.mediaCreativeId=t.string();break;case 16:s.ignoreFilledRequests=t.bool();break;case 17:s.requestCap=t.int32();break;case 18:s.impressionCap=t.int32();break;case 19:s.successRate=t.double();break;case 20:s.lineItemPriority=t.int32();break;case 21:s.headerBidderBids=t.string();break;case 22:s.headerBidderTimeout=t.int32();break;case 23:s.mediaCreativeClickUrl=t.string();break;case 24:s.resetRequestsCapTime=t.int32();break;case 25:s.resetImpressionsCapTime=t.int32();break;case 26:s.resetCapType=t.int32();break;case 27:s.creativeHlsFileName=t.string();break;case 28:s.timeBetweenRequests=t.int32();break;case 29:s.skipMode=t.int32();break;case 30:s.mediaIdTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 31:s.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 32:s.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.decode(t,t.uint32());break;case 33:s.adType=t.int32();break;case 34:s.overlayTime=t.int32();break;case 35:s.floorPrice=t.double();break;case 36:s.adBreakSettings=c.ProtoLineItemAdBreakSettings.decode(t,t.uint32());break;case 38:if(s.floorPrices&&s.floorPrices.length||(s.floorPrices=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.floorPrices.push(t.double());else s.floorPrices.push(t.double());break;case 39:s.bidRate=t.double();break;case 40:s.pauseAdOutOfView=t.int32();break;case 41:s.moatTrackingEnabled=t.bool();break;case 42:s.cnxCreativeId=t.string();break;case 44:s.blockedDomainsRevisionNumber=t.int32();break;case 45:s.advertiserContextualTargeting&&s.advertiserContextualTargeting.length||(s.advertiserContextualTargeting=[]),s.advertiserContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 46:s.publisherContextualTargeting&&s.publisherContextualTargeting.length||(s.publisherContextualTargeting=[]),s.publisherContextualTargeting.push(c.ProtoContextualTargetingCaseModel.decode(t,t.uint32()));break;case 48:s.amazonDealId=t.string();break;case 47:s.playerSizeTargetings=c.ProtoPlayerSizeTargetings.decode(t,t.uint32());break;case 101:s.playerSize=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.trackers=[],e.renditions=[],e.floorPrices=[],e.advertiserContextualTargeting=[],e.publisherContextualTargeting=[]),i.defaults&&(e.publisherLineItemId="",e.advertiserLineItemId="",e.adTag="",e.creativeType=i.enums===String?"ThirdParty":0,e.sound=!1,e.viewability=!1,e.impressionTimeSpent=0,e.vendorId="",e.duration=0,e.mediaCreativeId="",e.ignoreFilledRequests=!1,e.requestCap=3,e.impressionCap=0,e.successRate=0,e.lineItemPriority=i.enums===String?"House":0,e.headerBidderBids="",e.headerBidderTimeout=0,e.mediaCreativeClickUrl="",e.resetRequestsCapTime=60,e.resetImpressionsCapTime=60,e.resetCapType=i.enums===String?"TimeCapping":0,e.creativeHlsFileName="",e.timeBetweenRequests=0,e.skipMode=i.enums===String?"IfLongerThan31Sec":0,e.mediaIdTargeting=null,e.mediaKeywordsTargeting=null,e.mediaLanguageTargeting=null,e.adType=i.enums===String?"Video":0,e.overlayTime=30,e.floorPrice=0,e.adBreakSettings=null,e.bidRate=0,e.pauseAdOutOfView=i.enums===String?"Default":0,e.moatTrackingEnabled=!1,e.cnxCreativeId="",e.blockedDomainsRevisionNumber=0,e.playerSizeTargetings=null,e.amazonDealId="",e.playerSize=""),null!=t.publisherLineItemId&&t.hasOwnProperty("publisherLineItemId")&&(e.publisherLineItemId=t.publisherLineItemId),null!=t.advertiserLineItemId&&t.hasOwnProperty("advertiserLineItemId")&&(e.advertiserLineItemId=t.advertiserLineItemId),null!=t.adTag&&t.hasOwnProperty("adTag")&&(e.adTag=t.adTag),null!=t.creativeType&&t.hasOwnProperty("creativeType")&&(e.creativeType=i.enums===String?c.ProtoCreativeTypeEnum[t.creativeType]:t.creativeType),null!=t.sound&&t.hasOwnProperty("sound")&&(e.sound=t.sound),null!=t.viewability&&t.hasOwnProperty("viewability")&&(e.viewability=t.viewability),null!=t.impressionTimeSpent&&t.hasOwnProperty("impressionTimeSpent")&&(e.impressionTimeSpent=t.impressionTimeSpent),null!=t.vendorId&&t.hasOwnProperty("vendorId")&&(e.vendorId=t.vendorId),t.trackers&&t.trackers.length){e.trackers=[];for(var s=0;s<t.trackers.length;++s)e.trackers[s]=c.CreativeTrackerViewModel.toObject(t.trackers[s],i)}if(null!=t.duration&&t.hasOwnProperty("duration")&&(e.duration=t.duration),t.renditions&&t.renditions.length){e.renditions=[];for(s=0;s<t.renditions.length;++s)e.renditions[s]=c.ProtoRendition.toObject(t.renditions[s],i)}if(null!=t.mediaCreativeId&&t.hasOwnProperty("mediaCreativeId")&&(e.mediaCreativeId=t.mediaCreativeId),null!=t.ignoreFilledRequests&&t.hasOwnProperty("ignoreFilledRequests")&&(e.ignoreFilledRequests=t.ignoreFilledRequests),null!=t.requestCap&&t.hasOwnProperty("requestCap")&&(e.requestCap=t.requestCap),null!=t.impressionCap&&t.hasOwnProperty("impressionCap")&&(e.impressionCap=t.impressionCap),null!=t.successRate&&t.hasOwnProperty("successRate")&&(e.successRate=i.json&&!isFinite(t.successRate)?String(t.successRate):t.successRate),null!=t.lineItemPriority&&t.hasOwnProperty("lineItemPriority")&&(e.lineItemPriority=i.enums===String?c.ProtoLineItemPriority[t.lineItemPriority]:t.lineItemPriority),null!=t.headerBidderBids&&t.hasOwnProperty("headerBidderBids")&&(e.headerBidderBids=t.headerBidderBids),null!=t.headerBidderTimeout&&t.hasOwnProperty("headerBidderTimeout")&&(e.headerBidderTimeout=t.headerBidderTimeout),null!=t.mediaCreativeClickUrl&&t.hasOwnProperty("mediaCreativeClickUrl")&&(e.mediaCreativeClickUrl=t.mediaCreativeClickUrl),null!=t.resetRequestsCapTime&&t.hasOwnProperty("resetRequestsCapTime")&&(e.resetRequestsCapTime=t.resetRequestsCapTime),null!=t.resetImpressionsCapTime&&t.hasOwnProperty("resetImpressionsCapTime")&&(e.resetImpressionsCapTime=t.resetImpressionsCapTime),null!=t.resetCapType&&t.hasOwnProperty("resetCapType")&&(e.resetCapType=i.enums===String?c.ProtoResetCapTypeEnum[t.resetCapType]:t.resetCapType),null!=t.creativeHlsFileName&&t.hasOwnProperty("creativeHlsFileName")&&(e.creativeHlsFileName=t.creativeHlsFileName),null!=t.timeBetweenRequests&&t.hasOwnProperty("timeBetweenRequests")&&(e.timeBetweenRequests=t.timeBetweenRequests),null!=t.skipMode&&t.hasOwnProperty("skipMode")&&(e.skipMode=i.enums===String?c.ProtoAdSkipMode[t.skipMode]:t.skipMode),null!=t.mediaIdTargeting&&t.hasOwnProperty("mediaIdTargeting")&&(e.mediaIdTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaIdTargeting,i)),null!=t.mediaKeywordsTargeting&&t.hasOwnProperty("mediaKeywordsTargeting")&&(e.mediaKeywordsTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaKeywordsTargeting,i)),null!=t.mediaLanguageTargeting&&t.hasOwnProperty("mediaLanguageTargeting")&&(e.mediaLanguageTargeting=c.ProtoTargetingChoiceModel.toObject(t.mediaLanguageTargeting,i)),null!=t.adType&&t.hasOwnProperty("adType")&&(e.adType=i.enums===String?c.ProtoAdType[t.adType]:t.adType),null!=t.overlayTime&&t.hasOwnProperty("overlayTime")&&(e.overlayTime=t.overlayTime),null!=t.floorPrice&&t.hasOwnProperty("floorPrice")&&(e.floorPrice=i.json&&!isFinite(t.floorPrice)?String(t.floorPrice):t.floorPrice),null!=t.adBreakSettings&&t.hasOwnProperty("adBreakSettings")&&(e.adBreakSettings=c.ProtoLineItemAdBreakSettings.toObject(t.adBreakSettings,i)),t.floorPrices&&t.floorPrices.length){e.floorPrices=[];for(s=0;s<t.floorPrices.length;++s)e.floorPrices[s]=i.json&&!isFinite(t.floorPrices[s])?String(t.floorPrices[s]):t.floorPrices[s]}if(null!=t.bidRate&&t.hasOwnProperty("bidRate")&&(e.bidRate=i.json&&!isFinite(t.bidRate)?String(t.bidRate):t.bidRate),null!=t.pauseAdOutOfView&&t.hasOwnProperty("pauseAdOutOfView")&&(e.pauseAdOutOfView=i.enums===String?c.ProtoLineItemPauseAdOutOfViewEnum[t.pauseAdOutOfView]:t.pauseAdOutOfView),null!=t.moatTrackingEnabled&&t.hasOwnProperty("moatTrackingEnabled")&&(e.moatTrackingEnabled=t.moatTrackingEnabled),null!=t.cnxCreativeId&&t.hasOwnProperty("cnxCreativeId")&&(e.cnxCreativeId=t.cnxCreativeId),null!=t.blockedDomainsRevisionNumber&&t.hasOwnProperty("blockedDomainsRevisionNumber")&&(e.blockedDomainsRevisionNumber=t.blockedDomainsRevisionNumber),t.advertiserContextualTargeting&&t.advertiserContextualTargeting.length){e.advertiserContextualTargeting=[];for(s=0;s<t.advertiserContextualTargeting.length;++s)e.advertiserContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.advertiserContextualTargeting[s],i)}if(t.publisherContextualTargeting&&t.publisherContextualTargeting.length){e.publisherContextualTargeting=[];for(s=0;s<t.publisherContextualTargeting.length;++s)e.publisherContextualTargeting[s]=c.ProtoContextualTargetingCaseModel.toObject(t.publisherContextualTargeting[s],i)}return null!=t.playerSizeTargetings&&t.hasOwnProperty("playerSizeTargetings")&&(e.playerSizeTargetings=c.ProtoPlayerSizeTargetings.toObject(t.playerSizeTargetings,i)),null!=t.amazonDealId&&t.hasOwnProperty("amazonDealId")&&(e.amazonDealId=t.amazonDealId),null!=t.playerSize&&t.hasOwnProperty("playerSize")&&(e.playerSize=t.playerSize),e},t}(),c.ProtoTargetingChoiceModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.choiceCriteria=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoTargetingChoiceModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.choiceCriteria=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.choiceCriteria=i.enums===String?"Only":0),null!=t.choiceCriteria&&t.hasOwnProperty("choiceCriteria")&&(e.choiceCriteria=i.enums===String?c.ProtoChoiceCriteriaEnum[t.choiceCriteria]:t.choiceCriteria),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoContextualTargetingCaseModel=function(){function t(t){if(this.filters=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.filters=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingCaseModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.filters&&s.filters.length||(s.filters=[]),s.filters.push(c.ProtoContextualTargetingFilterModel.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.filters=[]),t.filters&&t.filters.length){e.filters=[];for(var s=0;s<t.filters.length;++s)e.filters[s]=c.ProtoContextualTargetingFilterModel.toObject(t.filters[s],i)}return e},t}(),c.ProtoContextualTargetingFilterModel=function(){function t(t){if(this.items=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.items=o.emptyArray,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoContextualTargetingFilterModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.items&&s.items.length||(s.items=[]),s.items.push(t.string());break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.items=[]),i.defaults&&(e.type=i.enums===String?"IncludeAny":0),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoLineItemContextualTargetingEnum[t.type]:t.type),t.items&&t.items.length){e.items=[];for(var s=0;s<t.items.length;++s)e.items[s]=t.items[s]}return e},t}(),c.ProtoPlayerSizeTargetings=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.sizeChoiceCriteria=0,t.prototype.minWidth=0,t.prototype.maxWidth=0,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoPlayerSizeTargetings;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.sizeChoiceCriteria=t.int32();break;case 2:s.minWidth=t.int32();break;case 3:s.maxWidth=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.sizeChoiceCriteria=i.enums===String?"GreaterThan":0,e.minWidth=0,e.maxWidth=0),null!=t.sizeChoiceCriteria&&t.hasOwnProperty("sizeChoiceCriteria")&&(e.sizeChoiceCriteria=i.enums===String?c.ProtoSizeChoiceCriteriaEnum[t.sizeChoiceCriteria]:t.sizeChoiceCriteria),null!=t.minWidth&&t.hasOwnProperty("minWidth")&&(e.minWidth=t.minWidth),null!=t.maxWidth&&t.hasOwnProperty("maxWidth")&&(e.maxWidth=t.maxWidth),e},t}(),c.ProtoTrackerType=function(){var t={},i=Object.create(t);return i[t[0]="Image"]=0,i[t[1]="Javascript"]=1,i}(),c.ProtoTrackerTriggerType=function(){var t={},i=Object.create(t);return i[t[0]="Impression"]=0,i[t[1]="Complete25Pc"]=1,i[t[2]="Complete50Pc"]=2,i[t[3]="Complete75Pc"]=3,i[t[4]="ViewCompletion"]=4,i[t[5]="VideoClick"]=5,i[t[6]="Pause"]=6,i[t[7]="Resume"]=7,i[t[8]="Mute"]=8,i[t[9]="Unmute"]=9,i}(),c.CreativeTrackerViewModel=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.type=0,t.prototype.trigger=0,t.prototype.url="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.CreativeTrackerViewModel;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.type=t.int32();break;case 2:s.trigger=t.int32();break;case 3:s.url=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.type=i.enums===String?"Image":0,e.trigger=i.enums===String?"Impression":0,e.url=""),null!=t.type&&t.hasOwnProperty("type")&&(e.type=i.enums===String?c.ProtoTrackerType[t.type]:t.type),null!=t.trigger&&t.hasOwnProperty("trigger")&&(e.trigger=i.enums===String?c.ProtoTrackerTriggerType[t.trigger]:t.trigger),null!=t.url&&t.hasOwnProperty("url")&&(e.url=t.url),e},t}(),c.ProtoRendition=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.height=0,t.prototype.codec="",t.prototype.file="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoRendition;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.height=t.int32();break;case 2:s.codec=t.string();break;case 3:s.file=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.height=0,e.codec="",e.file=""),null!=t.height&&t.hasOwnProperty("height")&&(e.height=t.height),null!=t.codec&&t.hasOwnProperty("codec")&&(e.codec=t.codec),null!=t.file&&t.hasOwnProperty("file")&&(e.file=t.file),e},t}(),c.ProtoPlayerPlaybackModeEnum=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i[t[2]="ClickToPlay"]=2,i}(),c.ProtoPlayerCloseButtonMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnHover"]=1,i[t[2]="OnHoverAfterFirstAd"]=2,i[t[3]="AlwaysOn"]=3,i}(),c.ProtoPlayerFloatingMode=function(){var t={},i=Object.create(t);return i[t[0]="Off"]=0,i[t[1]="OnPageLoad"]=1,i[t[2]="AfterInView"]=2,i[t[3]="Always"]=3,i}(),c.ProtoPlayerSoundMode=function(){var t={},i=Object.create(t);return i[t[0]="Mute"]=0,i[t[1]="On"]=1,i[t[2]="Hover"]=2,i}(),c.ProtoPlayerInsertMode=function(){var t={},i=Object.create(t);return i[t[0]="WithinContainer"]=0,i[t[1]="BeforeContainer"]=1,i[t[2]="AfterContainer"]=2,i[t[3]="ReplaceContainer"]=3,i[t[4]="HideContainer"]=4,i}(),c.ProtoAdViewabilityPolicy=function(){var t={},i=Object.create(t);return i[t[0]="Default"]=0,i[t[1]="Strict"]=1,i}(),c.ProtoSharingDestination=function(){var t={},i=Object.create(t);return i[t[0]="Facebook"]=0,i[t[1]="Twitter"]=1,i[t[2]="LinkedIn"]=2,i}(),c.ProtoFloatingFixedPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="Page"]=0,i[t[1]="Element"]=1,i}(),c.ProtoPositionMode=function(){var t={},i=Object.create(t);return i[t[0]="BottomRight"]=0,i[t[1]="BottomLeft"]=1,i[t[2]="TopRight"]=2,i[t[3]="TopLeft"]=3,i}(),c.ProtoAdPlaybackMode=function(){var t={},i=Object.create(t);return i[t[0]="Autoplay"]=0,i[t[1]="ScrollToPlay"]=1,i}(),c.ProtoFloatingAppendLocationEnum=function(){var t={},i=Object.create(t);return i[t[0]="Above"]=0,i[t[1]="Below"]=1,i[t[2]="Within"]=2,i}(),c.ProtoPlayerAdSkippability=function(){var t={},i=Object.create(t);return i[t[0]="IfLongerThan"]=0,i[t[1]="Always"]=1,i[t[2]="NoRestrictions"]=2,i}(),c.ProtoVideoQuality=function(){var t={},i=Object.create(t);return i[t[0]="Auto"]=0,i[t[1]="High1080p"]=1,i[t[2]="High720p"]=2,i[t[3]="Medium360p"]=3,i}(),c.ProtoImplementationType=function(){var t={},i=Object.create(t);return i[t[0]="Web"]=0,i[t[1]="Amp"]=1,i}(),c.ProtoAdBreakTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="None"]=0,i[t[1]="PreRoll"]=1,i[t[2]="MidRoll"]=2,i[t[3]="PostRoll"]=3,i}(),c.ProtoAdSlotAdTypeEnum=function(){var t={},i=Object.create(t);return i[t[0]="SingleAd"]=0,i[t[1]="AdPod"]=1,i}(),c.ProtoDeviceType=function(){var t={},i=Object.create(t);return i[t[0]="Desktop"]=0,i[t[1]="Smartphone"]=1,i[t[2]="Tablet"]=2,i[t[3]="GameConsole"]=3,i[t[4]="SmartTV"]=4,i[t[5]="WearableComputer"]=5,i[t[6]="PDA"]=6,i[t[7]="Unrecognized"]=7,i}(),c.Browser=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.browserVersion="",t.prototype.browserType="",t.prototype.osCode="",t.prototype.device=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&i.uint32(10).string(t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&i.uint32(18).string(t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&i.uint32(26).string(t.osCode),null!=t.device&&t.hasOwnProperty("device")&&i.uint32(32).int32(t.device),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.Browser;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.browserVersion=t.string();break;case 2:s.browserType=t.string();break;case 3:s.osCode=t.string();break;case 4:s.device=t.int32();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.Browser)return t;var i=new c.Browser;switch(null!=t.browserVersion&&(i.browserVersion=String(t.browserVersion)),null!=t.browserType&&(i.browserType=String(t.browserType)),null!=t.osCode&&(i.osCode=String(t.osCode)),t.device){case"Desktop":case 0:i.device=0;break;case"Smartphone":case 1:i.device=1;break;case"Tablet":case 2:i.device=2;break;case"GameConsole":case 3:i.device=3;break;case"SmartTV":case 4:i.device=4;break;case"WearableComputer":case 5:i.device=5;break;case"PDA":case 6:i.device=6;break;case"Unrecognized":case 7:i.device=7}return i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.browserVersion="",e.browserType="",e.osCode="",e.device=i.enums===String?"Desktop":0),null!=t.browserVersion&&t.hasOwnProperty("browserVersion")&&(e.browserVersion=t.browserVersion),null!=t.browserType&&t.hasOwnProperty("browserType")&&(e.browserType=t.browserType),null!=t.osCode&&t.hasOwnProperty("osCode")&&(e.osCode=t.osCode),null!=t.device&&t.hasOwnProperty("device")&&(e.device=i.enums===String?c.ProtoDeviceType[t.device]:t.device),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.GeoLocation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.countryGeoId=0,t.prototype.cityId=0,t.prototype.subdivisionId=0,t.prototype.dmaId=0,t.prototype.ip="",t.prototype.lat=0,t.prototype.lon=0,t.encode=function(t,i){return i||(i=a.create()),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&i.uint32(8).int32(t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&i.uint32(16).int32(t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&i.uint32(24).int32(t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&i.uint32(32).int32(t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&i.uint32(42).string(t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&i.uint32(49).double(t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&i.uint32(57).double(t.lon),i},t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.GeoLocation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.countryGeoId=t.int32();break;case 2:s.cityId=t.int32();break;case 3:s.subdivisionId=t.int32();break;case 4:s.dmaId=t.int32();break;case 5:s.ip=t.string();break;case 6:s.lat=t.double();break;case 7:s.lon=t.double();break;default:t.skipType(7&n)}}return s},t.fromObject=function(t){if(t instanceof c.GeoLocation)return t;var i=new c.GeoLocation;return null!=t.countryGeoId&&(i.countryGeoId=0|t.countryGeoId),null!=t.cityId&&(i.cityId=0|t.cityId),null!=t.subdivisionId&&(i.subdivisionId=0|t.subdivisionId),null!=t.dmaId&&(i.dmaId=0|t.dmaId),null!=t.ip&&(i.ip=String(t.ip)),null!=t.lat&&(i.lat=Number(t.lat)),null!=t.lon&&(i.lon=Number(t.lon)),i},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.countryGeoId=0,e.cityId=0,e.subdivisionId=0,e.dmaId=0,e.ip="",e.lat=0,e.lon=0),null!=t.countryGeoId&&t.hasOwnProperty("countryGeoId")&&(e.countryGeoId=t.countryGeoId),null!=t.cityId&&t.hasOwnProperty("cityId")&&(e.cityId=t.cityId),null!=t.subdivisionId&&t.hasOwnProperty("subdivisionId")&&(e.subdivisionId=t.subdivisionId),null!=t.dmaId&&t.hasOwnProperty("dmaId")&&(e.dmaId=t.dmaId),null!=t.ip&&t.hasOwnProperty("ip")&&(e.ip=t.ip),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=i.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lon&&t.hasOwnProperty("lon")&&(e.lon=i.json&&!isFinite(t.lon)?String(t.lon):t.lon),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}(),c.ProtoSupplyChain=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.businessDomain="",t.prototype.supplyChainId="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoSupplyChain;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.businessDomain=t.string();break;case 3:s.supplyChainId=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.businessDomain="",e.supplyChainId=""),null!=t.businessDomain&&t.hasOwnProperty("businessDomain")&&(e.businessDomain=t.businessDomain),null!=t.supplyChainId&&t.hasOwnProperty("supplyChainId")&&(e.supplyChainId=t.supplyChainId),e},t}(),c.ProtoUserInformation=function(){function t(t){if(t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.userId="",t.prototype.lookupId="",t.prototype.lookupResponseCode=0,t.prototype.callFraudSensor=!1,t.prototype.publisherAdsTxt="",t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoUserInformation;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:s.userId=t.string();break;case 3:s.lookupId=t.string();break;case 4:s.lookupResponseCode=t.int32();break;case 5:s.callFraudSensor=t.bool();break;case 6:s.publisherAdsTxt=t.string();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};return i.defaults&&(e.userId="",e.lookupId="",e.lookupResponseCode=0,e.callFraudSensor=!1,e.publisherAdsTxt=""),null!=t.userId&&t.hasOwnProperty("userId")&&(e.userId=t.userId),null!=t.lookupId&&t.hasOwnProperty("lookupId")&&(e.lookupId=t.lookupId),null!=t.lookupResponseCode&&t.hasOwnProperty("lookupResponseCode")&&(e.lookupResponseCode=t.lookupResponseCode),null!=t.callFraudSensor&&t.hasOwnProperty("callFraudSensor")&&(e.callFraudSensor=t.callFraudSensor),null!=t.publisherAdsTxt&&t.hasOwnProperty("publisherAdsTxt")&&(e.publisherAdsTxt=t.publisherAdsTxt),e},t}(),c.ProtoAdBreak=function(){function t(t){if(this.types=[],t)for(var i=Object.keys(t),e=0;e<i.length;++e)null!=t[i[e]]&&(this[i[e]]=t[i[e]])}return t.prototype.types=o.emptyArray,t.prototype.maxAdPodDuration=0,t.prototype.maxAdSlotDuration=180,t.prototype.numberOfAdSlots=1,t.decode=function(t,i){t instanceof h||(t=h.create(t));for(var e=void 0===i?t.len:t.pos+i,s=new c.ProtoAdBreak;t.pos<e;){var n=t.uint32();switch(n>>>3){case 1:if(s.types&&s.types.length||(s.types=[]),2==(7&n))for(var r=t.uint32()+t.pos;t.pos<r;)s.types.push(t.int32());else s.types.push(t.int32());break;case 2:s.maxAdPodDuration=t.int32();break;case 3:s.maxAdSlotDuration=t.int32();break;case 4:s.numberOfAdSlots=t.int32();break;default:t.skipType(7&n)}}return s},t.toObject=function(t,i){i||(i={});var e={};if((i.arrays||i.defaults)&&(e.types=[]),i.defaults&&(e.maxAdPodDuration=0,e.maxAdSlotDuration=180,e.numberOfAdSlots=1),t.types&&t.types.length){e.types=[];for(var s=0;s<t.types.length;++s)e.types[s]=i.enums===String?c.ProtoAdBreakTypeEnum[t.types[s]]:t.types[s]}return null!=t.maxAdPodDuration&&t.hasOwnProperty("maxAdPodDuration")&&(e.maxAdPodDuration=t.maxAdPodDuration),null!=t.maxAdSlotDuration&&t.hasOwnProperty("maxAdSlotDuration")&&(e.maxAdSlotDuration=t.maxAdSlotDuration),null!=t.numberOfAdSlots&&t.hasOwnProperty("numberOfAdSlots")&&(e.numberOfAdSlots=t.numberOfAdSlots),e},t}(),t.exports=c},function(t,i,e){"use strict";e.d(i,"j",function(){return s}),e.d(i,"k",function(){return n}),e.d(i,"i",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"g",function(){return a}),e.d(i,"h",function(){return o}),e.d(i,"b",function(){return c}),e.d(i,"f",function(){return u}),e.d(i,"c",function(){return l}),e.d(i,"e",function(){return d}),e.d(i,"a",function(){return f});const s="1.3.13-iab2343",n="1.3.13-iab2343",r="Connatix";var h,a,o,c,u,l,d,f;!function(t){t.Generic="generic",t.Video="video"}(h||(h={})),function(t){t.Click="click",t.InvitationAccept="invitationAccept"}(a||(a={})),function(t){t.PreRoll="preroll",t.MidRoll="midroll",t.PostRoll="postroll",t.Standalone="standalone"}(o||(o={})),function(t){t.SessionStart="sessionStart",t.SessionError="sessionError",t.SessionFinish="sessionFinish"}(c||(c={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.BeginToRender="beginToRender"}(u||(u={})),function(t){t.DefinedByJavascript="definedByJavaScript",t.Video="video"}(l||(l={})),function(t){t.sessionError="sessionError",t.geometryChange="geometryChange"}(d||(d={})),function(t){t.backgrounded="backgrounded",t.notFound="notFound"}(f||(f={}))},function(t,i,e){"use strict";e.d(i,"f",function(){return s}),e.d(i,"g",function(){return n}),e.d(i,"h",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"b",function(){return a}),e.d(i,"a",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"c",function(){return u});const s=200,n=.9,r=1.1,h=31,a=2e3,o=1e3,c=.5,u="connatix.com"},function(t,i,e){"use strict";var s;e.d(i,"c",function(){return s}),e.d(i,"a",function(){return n}),e.d(i,"b",function(){return r}),function(t){t.Connatix="143",t.AppNexus="32",t.DistrictM="144",t.IndexExchange="10",t.Lkqd="237",t.OneVideo="25",t.Openx="69",t.Pubmatic="76",t.RhythmOne="36",t.Rubicon="52",t.Spotx="165",t.Telaria="202",t.MediaNet="142",t.AdMan="149",t.IronSource="",t.Undertone="677",t.SynacorMedia="",t.AmxRTB="737",t.Smaato="82"}(s||(s={}));const n="cnx_usr_storage",r=["1YNY"]},,function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{}s.MaxLogOverflow=1e3,s.maxLogOverflowCount={},s.logCount={},s.maxLogSent={},s.sessionId="",s.pageFocus=!1,s.incrementLogCount=t=>{s.logCount[t]?(++s.maxLogOverflowCount[t],++s.logCount[t]):(s.logCount[t]=1,s.maxLogOverflowCount[t]=1)},s.isMaxLog=(t,i)=>!!(s.logCount[t]&&s.logCount[t]>i),s.isMaxLogOverflow=t=>s.maxLogOverflowCount[t]>s.MaxLogOverflow&&(s.maxLogOverflowCount[t]=1,!0),s.setMaxLogSent=t=>{s.maxLogSent[t]=!0},s.isMaxLogSent=t=>!!s.maxLogSent[t]},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"c",function(){return h}),e.d(i,"b",function(){return a});var s=e(7),n=e(1);const r=t=>Object.keys(t).map(i=>t[i]);function h(t){for(const i in t)t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=`%22${encodeURIComponent(t[i])}%22`);return JSON.stringify(t).cnx_replaceAll('"',"")}function a(t,i){if(!Object(n.f)(t)||!Object(n.f)(i))return!1;const e=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i);return e.length===r.length&&e.every(e=>Object(s.i)(t[e],i[e]))}},function(t,i,e){"use strict";e.d(i,"a",function(){return r}),e.d(i,"d",function(){return h}),e.d(i,"b",function(){return a}),e.d(i,"f",function(){return o}),e.d(i,"e",function(){return c}),e.d(i,"c",function(){return u});var s=e(1),n=e(11);function r(t){let i,e;return Object(s.g)(t)&&(i=t.match(n.b))&&(e=parseInt(i[1],10)*n.d+parseInt(i[2],10)*n.e+parseInt(i[3],10)*n.f+parseInt(i[5]||0,10)),isNaN(e)?null:e}function h(t,i){return/^\d+(\.\d+)?%$/g.test(t)?i?i*parseFloat(t.replace("%",""))/100:null:r(t)}function a(t){return Date.now()+t*n.a}function o(t,i=":"){const e=t=>t>=10?t:`0${t}`;return`${e(Math.floor(t/60))}${i}${e(Math.floor(t%60))}`}function c(t){const i=Date.parse(t+" GMT");if(!Object(s.d)(i))return;const e=Math.floor((Date.parse(new Date(Date.now()).toUTCString())-i)/1e3);if(!Object(s.e)(e))return"just now";const n=[{value:1,symbol:"s"},{value:60,symbol:"m"},{value:3599,symbol:"h"},{value:86399,symbol:"d"}];let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return Math.floor(e/n[r].value).toFixed(0)+n[r].symbol+" ago"}function u(t,i){const e=Date.now();return!(e<t||e>i)}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return n});const s="https://connatix.com/privacy-policy/",n="v"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(149)),s(e(150)),s(e(151)),s(e(152))},function(t,i,e){"use strict";e.d(i,"b",function(){return r}),e.d(i,"a",function(){return h});class s{}s.clientAb0=0,s.clientAb1=0;class n{}var r;n.clientAb0=0,n.clientAb1=0,function(t){t[t.ElementsABService=0]="ElementsABService",t[t.PlayspaceABService=1]="PlayspaceABService"}(r||(r={}));class h{static get clientAb0(){return this.getABValueForKey("clientAb0")}static get clientAb1(){return this.getABValueForKey("clientAb1")}static getABValueForKey(t){switch(this.abServiceType){case r.PlayspaceABService:return n[t];default:return s[t]}}}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(73)),s(e(153)),s(e(74)),s(e(75)),s(e(154)),s(e(61)),s(e(76)),s(e(155)),s(e(156))},function(t,i,e){"use strict";e.d(i,"a",function(){return h});var s=e(10),n=e(4),r=e(26);class h{static Ri(){const t=h.Bi;return h.Bi++,t}static Di(t){return h.Fi[t]}static $i(t){t.forEach(t=>{h.Fi[t.advertiserLineItemId]&&h.addCustomHistoryLine("duplicate",{id:t.advertiserLineItemId}),h.Fi[t.advertiserLineItemId]=h.Ri()})}static Ui(t){return t.map(t=>({advertiserLineItemId:t.advertiserLineItemId,creativeType:t.creativeType,impressionTimeout:t.impressionTimeSpent,lineItemPriority:t.lineItemPriority,playerSize:t.playerSize,requestCap:t.requestCap,sound:t.sound,viewability:t.viewability}))}static setClientSideAdList(t){h.Vi&&(h.Ni=h.Ui(JSON.parse(JSON.stringify(t))),h.$i(h.Ni))}static setRtbAdList(t){h.Vi&&(h.Hi=h.Ui(JSON.parse(JSON.stringify(t))),h.$i(h.Hi))}static setHeaderBidderAdList(t){h.Vi&&(h.qi=h.Ui(JSON.parse(JSON.stringify(t))),h.$i(h.qi))}static setTamAdList(t){h.Vi&&(h.zi=h.Ui(JSON.parse(JSON.stringify(t))),h.$i(h.zi))}static setLineItemStatus(t,i){if(!h.Vi)return;const e=h.Di(t);h.Wi.push({type:"status",id:e,status:s.a[i]})}static setVpaidEvent(t,i){if(h.Vi)try{const e=h.Di(t);switch(i){case n.b.AdLoaded:case n.b.AdStarted:case n.b.AdError:case n.b.AdSkipped:case n.b.AdStopped:case n.b.AdPaused:case n.b.AdPlaying:case n.b.AdImpression:h.Wi.push({type:"vpaid",id:e,event:i})}}catch(t){}}static setViewabilityState(t){h.Vi&&h.Wi.push({type:"view",inView:t})}static setFocusState(t){h.Vi&&h.Wi.push({type:"focus",inView:t})}static setAdState(t){h.Vi&&h.Wi.push({type:"adState",state:r.ProtoAdSlotsEnum[t]})}static enforcerAction(t){h.Vi&&h.Wi.push({type:"enforcer",action:t})}static addCustomHistoryLine(t,i){h.Vi&&h.Wi.push(Object.assign({type:t},i))}static getJsonString(){return h.Vi?JSON.stringify({clientAdList:h.Ni,rtbAdList:h.Hi,headerBidderAdList:h.qi,mappedAdList:h.Fi,history:h.Wi}).substring(0,h.Gi):""}static playerDestroyed(){this.Ji=!0}static isPlayerDestroyed(){return this.Ji}}h.Vi=Date.now()-1581093917537<0,h.Gi=5e4,h.Bi=0,h.Fi={},h.Ni=[],h.Hi=[],h.qi=[],h.zi=[],h.Wi=[],h.Ji=!1},function(t,i,e){"use strict";var s;e.d(i,"a",function(){return s}),function(t){t[t.P1=1]="P1",t[t.P2=2]="P2",t[t.P3=3]="P3",t[t.P4=4]="P4",t[t.P5=5]="P5",t[t.P6=6]="P6",t[t.P7=7]="P7",t[t.P8=8]="P8",t[t.P9=9]="P9",t[t.P10=10]="P10"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{constructor(){this.Qi=!1,this.promise=new Promise((t,i)=>{this.Xi=t,this.Yi=i})}Ki(){this.Qi||(this.Qi=!0)}resolve(t){this.Ki(),this.Xi(t)}reject(t){this.Ki(),this.Yi(t)}get isPending(){return!this.Qi}}},function(t,i,e){"use strict";(function(t){var s=i;function n(t,i,e){for(var s=Object.keys(i),n=0;n<s.length;++n)void 0!==t[s[n]]&&e||(t[s[n]]=i[s[n]]);return t}function r(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}s.asPromise=e(136),s.base64=e(137),s.EventEmitter=e(138),s.float=e(139),s.inquire=e(140),s.utf8=e(141),s.pool=e(142),s.LongBits=e(143),s.global="undefined"!=typeof window&&window||void 0!==t&&t||"undefined"!=typeof self&&self||this,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isNode=Boolean(s.global.process&&s.global.process.versions&&s.global.process.versions.node),s.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isObject=function(t){return t&&"object"==typeof t},s.isset=s.isSet=function(t,i){var e=t[i];return!(null==e||!t.hasOwnProperty(i))&&("object"!=typeof e||(Array.isArray(e)?e.length:Object.keys(e).length)>0)},s.Buffer=function(){try{var t=s.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),s.Zi=null,s.te=null,s.newBuffer=function(t){return"number"==typeof t?s.Buffer?s.te(t):new s.Array(t):s.Buffer?s.Zi(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},s.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(t){return t?s.LongBits.from(t).toHash():s.LongBits.zeroHash},s.longFromHash=function(t,i){var e=s.LongBits.fromHash(t);return s.Long?s.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},s.merge=n,s.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},s.newError=r,s.ProtocolError=r("ProtocolError"),s.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;e>-1;--e)if(1===i[t[e]]&&void 0!==this[t[e]]&&null!==this[t[e]])return t[e]}},s.oneOfSetter=function(t){return function(i){for(var e=0;e<t.length;++e)t[e]!==i&&delete this[t[e]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s.ie=function(){var t=s.Buffer;t?(s.Zi=t.from!==Uint8Array.from&&t.from||function(i,e){return new t(i,e)},s.te=t.allocUnsafe||function(i){return new t(i)}):s.Zi=s.te=null}}).call(this,e(69))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=function(){function t(){}return t.encode=function(t,i){var e;if("string"==typeof t&&(t=parseInt(t,10)),(e=t.toString(2)).length>i||t<0)throw new s.EncodingError(t+" too large to encode into "+i);return e.length<i&&(e="0".repeat(i-e.length)+e),e},t.decode=function(t,i){if(i!==t.length)throw new s.DecodingError("invalid bit length");return parseInt(t,2)},t}();i.IntEncoder=n},function(t,i,e){"use strict";var s=this&&this.ee||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var n=function(){function t(){}return t.prototype.clone=function(){var t=this,i=new this.constructor;return Object.keys(this).forEach(function(e){var s=t.deepClone(t[e]);void 0!==s&&(i[e]=s)}),i},t.prototype.deepClone=function(t){var i,e,n=typeof t;if("number"===n||"string"===n||"boolean"===n)return t;if(null!==t&&"object"===n){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){var r=[];try{for(var h=s(t),a=h.next();!a.done;a=h.next()){var o=a.value;r.push(this.deepClone(o))}}catch(t){i={error:t}}finally{try{a&&!a.done&&(e=h.return)&&e.call(h)}finally{if(i)throw i.error}}return t instanceof Array?r:new t.constructor(r)}var c={};for(var u in t)t.hasOwnProperty(u)&&(c[u]=this.deepClone(t[u]));return c}},t}();i.Cloneable=n},function(t,i,e){"use strict";var s;!function(t){t.prebid="prebid",t.bid="bid",t.win="win",t.impression="impression",t.viewableImpression="viewableImpression",t.postbid="postbid",t.initAd="initAd",t.request="request"}(s||(s={}))},function(t,i,e){"use strict";e.d(i,"a",function(){return d}),e.d(i,"b",function(){return f});var s=e(53),n=e(0),r=e(13),h=e(1),a=e(5);const o=new s.a(n.ProtoAdDomainBlockingResponse,"AdDomainBlockingService"),c=2;let u;const l=new Map;function d(t){u||(u=new Promise(i=>{const e=t.find(t=>t.blockedDomainsRevisionNumber);if(!e)return void i();const{publisherLineItemId:s,blockedDomainsRevisionNumber:h}=e,u=`${r.a.endPoints.base.lineItems}${s}/blockedDomains_${h}.bin`;o.fetchMetadata(u,c).then(t=>{l.set(s,t.domains),i()}).catch(()=>{Object(a.a)({message:"AdDomainBlockingService_fetchBlockedDomains_endpoint_unavailable",level:n.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),i()})}))}function f(t,i){return new Promise(e=>{Object(h.h)(i)?u.then(()=>{l.has(t)&&l.get(t).some(t=>i.includes(t))?e(!0):e(!1)}):e(!1)})}},function(t,i){t.exports='<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"><path d="M5 21.453c2.022 1.627 4.6 2.602 7.387 2.602 3.973 0 7.485-1.967 9.622-4.977l-4.596-3.34a3.87 3.87 0 0 0-4.548 0L5 21.453zM22 4.977A11.75 11.75 0 0 0 12.387 0 11.74 11.74 0 0 0 5 2.602l7.9 5.74a3.81 3.81 0 0 0 4.479 0l4.63-3.364zm1.563 11.395c.494-1.3.767-2.712.767-4.186S24.057 9.3 23.563 8l-3.858 2.803a1.71 1.71 0 0 0 0 2.766l3.858 2.803z" fill="#fff"></path><path d="M2.378 5c-.024-.017-.057-.012-.074.01A11.74 11.74 0 0 0 0 12.025a11.74 11.74 0 0 0 2.304 7.004c.017.023.05.028.074.01l8.013-5.822c.81-.59.81-1.797 0-2.386L2.378 5z" fill="#09f"></path></svg>'},function(t,i){t.exports="<cnx class=cnx-ui-progress-label> <cnx-span></cnx-span> </cnx> "},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.encode=function(t){return+t+""},t.decode=function(t){return"1"===t},t}();i.BooleanEncoder=s},function(t,i,e){"use strict";e.d(i,"a",function(){return s});var s,n=e(54),r=e(2),h=e(7);!function(t){const i=["adBanner","banner-search","abc_banner","Banner_Top","ad_container","pub_300x250","pub_300x250m","pub_728x90","text-ad","text_ad","textAd","text-ad-links","text_ads","text-ads","text-ad-links"],e="cnxtestadblock",s=function(){const t=i.join(" ");return`<style>.adBanner{background-color: transparent; height: 1px !important; width: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important; display:block !important; }</style><div id="${e}" class="${t}"></div>`},a={src:n.a};t.detectUsingCSS=function(t){try{let i=!1;t.document.body.insertAdjacentHTML("beforeend",s());const n=t.document.getElementById(e);return 0!==n.getBoundingClientRect().height&&0!==n.getBoundingClientRect().width||(i=!0),t.document.body.removeChild(n),i}catch(t){return!1}},t.detectUsingScript=function(){return new Promise(t=>{const i=Object(h.f)(window).topFrame;i.googletag&&t(!1),Object(r.A)(a,i.document.head,i,()=>i.googletag?t(!1):t(!0),()=>t(!0))})}}(s||(s={}))},function(t,i,e){"use strict";var s=e(7),n=e(29),r=e(25),h=e(0),a=e(13),o=e(1),c=e(34),u=e(18);class l{constructor(t){this.se=t,this.ne=!0,this.re="",this.he=!1,this.ae=[]}static getInstance(t){const i=n.a,e=Object(s.f)(t).topFrame;return e[i]||(e[i]=new l(e)),e[i]}get userId(){if(Object(o.h)(this.ce))return this.ce.split("_")[0]}set userId(t){this.ce=t}get isCcpaApplicable(){return this.ne}set isCcpaApplicable(t){this.ne=t}get usPrivacyString(){return this.re}set usPrivacyString(t){this.re=t}get consentPayload(){return this.ue}set consentPayload(t){this.ue||(this.ue=t)}getScope(){return this.se}syncDemandPartner(t){if(this.userId){const i={userId:this.userId,demandPartner:parseInt(t.demandPartner,10),demandPartnerUserId:t.demandPartnerUserId};r.a.sendProtoRequest({ProtoRequest:h.ProtoUserSyncRequest,endpoint:a.a.endPoints.api.syncUrls,requestData:i,queryParams:{[c.b]:u.a.version},logError:!0}).then(t=>{}).catch(t=>{})}}registerPlsCall(t){return this.he?(this.ae.push(t),()=>{}):this.userId?(t(),()=>{}):(this.he=!0,t(),()=>{this.he=!1,this.ae.forEach(t=>t()),this.ae=[]})}}var d,f=e(33),p=e(5),b=e(6);!function(t){t.USER_ID="cnx_userId"}(d||(d={}));class v{constructor(t,i){this.le=t,this.de=i,this.fe={[d.USER_ID]:30},this.pe=["Facebook App","Google App","Flipboard App","Instagram App","Pinterest App"],this.be=!1}ve({name:t,value:i}){t===d.USER_ID&&(this.le.userId=this.me(i))}ge(t){let i="";const e=this.fe[t.name];if(e){i=`; expires=${new Date(Object(f.b)(e)).toUTCString()}`}this.de.document.cookie=`${t.name}=${t.value}${i}; path=/`}ye(t,i){if(!Object(b.h)(t))return;const e={cookieList:t,secureMode:i?h.ProtoCookieSecureModeEnum.Unsecure:h.ProtoCookieSecureModeEnum.Auto,browserInfo:this.we};return r.a.sendProtoRequest({requestData:e,ProtoRequest:h.ProtoCookieSyncRequest,endpoint:a.a.endPoints.api.cookie,withCredentials:!0,queryParams:{[c.b]:u.a.version},logError:!1}).catch(t=>Object(p.a)({message:"UserCookieManager_setThirdPartyCookie",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))}me(t){return t.split("_")[0]}xe(t){try{const i=t+"=",e=decodeURIComponent(this.de.document.cookie).split(";");for(let t of e){for(;" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return this.me(t.substring(i.length,t.length))}}catch(t){}return""}getUserId(){return this.le.userId}syncFirstPartyCookie(t){const i={name:t,value:"",timestamp:Object(f.b)(this.fe[t])};t===d.USER_ID&&(i.value=this.le.userId),Object(o.h)(i.value)&&this.ge(i)}syncThirdPartyCookieList(t){const i=[d.USER_ID],e=[];i.forEach(t=>{t===d.USER_ID&&Object(o.h)(this.le.userId)&&e.push({name:d.USER_ID,value:this.le.userId,timestamp:Object(f.b)(this.fe[d.USER_ID])})}),this.ye(e,t)}setBrowserInfo(t,i){this.we=t,this.be=this.pe.includes(t.browserType),this.be&&i&&this.syncThirdPartyCookieList(this.be)}setUserInformation(t){t&&this.ve({name:d.USER_ID,value:t.userId})}fetchCookies(){[d.USER_ID].map(t=>({name:t,value:this.xe(t)})).filter(({value:t})=>Object(o.h)(t)).forEach(t=>this.ve(t))}get unsecuredCookieSync(){return this.be}}var m=e(23);const g={[m.a.CmpApi]:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},[m.a.TcfApi]:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}};class y{constructor(t,i){this.Se=t,this.Oe=i,this.apiType=m.a.CmpApi,this.ke={},this.ue=null,this._e=t=>new Promise((i,e)=>{try{const s="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof s&&s.je)if(s.je.callId===this.Ae){const t=s.je.returnValue&&s.je.returnValue.vendorConsents;this.Ie(t).then(()=>i(this.Ae))}else if(s.je.callId===this.Ce){const t=s.je.returnValue&&s.je.returnValue.consentData;this.Te(t).then(()=>i(this.Ce))}}catch(t){e()}})}isApiOnPage(){return null!==this.Se||null!==this.Oe}bindToApi(){return null!==this.Se?new Promise((t,i)=>{this.Pe(this.Se).then(()=>t()).catch(t=>i(t))}):null!==this.Oe?this.Me(this.Oe):Promise.reject()}isConsentForVendor(t){return!!this.ke[t]}getConsentPayload(){return this.ue}setInAppConsentData(t){this.Ie(t),this.Te(t.consentString)}hasIvtConsent(){return this.isConsentForVendor(n.c.Connatix)}isConsentForPurposes(t){return!0}Me(t){this.Ce=Object(s.c)(),this.Ae=Object(s.c)();const i={};return new Promise(e=>{const s=t=>{this._e(t).then(t=>{i[t]=!0,i[this.Ce]&&i[this.Ae]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.CmpApi].getVendorConsentDataMethodName,r=g[m.a.CmpApi].getConsentDataMethodName;t.postMessage({Ee:{command:n,parameter:null,callId:this.Ae}},"*"),t.postMessage({Ee:{command:r,parameter:null,callId:this.Ce}},"*")})}Pe(t){const i=g[m.a.CmpApi].windowPropertyName,e=g[m.a.CmpApi].getVendorConsentDataMethodName,s=g[m.a.CmpApi].getConsentDataMethodName;if(t&&t[i]){const n=new Promise(s=>{t[i](e,null,(t,i)=>{if(i){const{vendorConsents:i}=t;this.Ie(i).then(()=>s())}})}),r=new Promise(e=>{t[i](s,null,(t,i)=>{if(i){const{consentData:i}=t;this.Te(i).then(()=>e())}})});return Promise.all([n,r])}return Promise.reject()}Ie(t){return Object(o.f)(t)?(this.ke=t,Promise.resolve()):Promise.reject()}Te(t){return Object(o.g)(t)?(this.ue=t,Promise.resolve()):Promise.reject()}}var w=e(2),x=e(84),S=e(85);const O=(t,i)=>{const e=g[i].windowPropertyName;return Object(w.s)(t,e)},k=(t,i)=>{const e=g[i].framePropertyName;return Object(w.r)(t,e)},_=(t,i)=>null!==O(t,i)||null!==k(t,i),j=t=>{const i=x.TCString.decode(t),e={},s={};return i.vendorConsents.forEach((t,i)=>e[i]=t),i.purposeConsents.forEach((t,i)=>s[i]=t),{vendorConsents:e,purposeConsents:s,tcString:t}},A=t=>{const i=S.decodeConsentString(t);let e="";const s=i.maxVendorId;for(let t=1;t<=s;t++)e+="0";const n=e.split("");return i.allowedVendorIds.forEach(t=>{n[t-1]="1"}),(t=>{const i={consentString:t};for(let e=0;e<t.length;e++)i[e+1]="1"===t[e];return i})(n.join(""))},I=(t,i,e)=>{let s;try{s=i(t)}catch(t){}if(Object(o.f)(s))return s;try{s=e(t)}catch(t){}return s},C=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.tcString)},T=t=>{var i;return Object(o.h)(null===(i=t)||void 0===i?void 0:i.consentString)},P=({cmpEncodedString:t,tcfEncodedString:i})=>{if(!Object(o.h)(t)&&!Object(o.h)(i))return null;let e=null;return Object(o.h)(i)&&(e=I(i,j,A)),Object(o.f)(e)?e:Object(o.h)(t)?(e=I(t,A,j),Object(o.f)(e)?e:(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:i}),level:h.ProtoLoggingLevelEnum.FATAL}),null)):(Object(p.a)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:i}),level:h.ProtoLoggingLevelEnum.FATAL}),null)},M="useractioncomplete",E="tcloaded";class L{constructor(t,i){this.Le=t,this.Re=i,this.apiType=m.a.TcfApi,this.Be=t=>new Promise((i,e)=>{try{let s=t.data;if("string"==typeof t.data)try{s=JSON.parse(t.data)}catch(t){s=void 0}if("object"==typeof s&&s.De&&s.De.callId===this.Fe){const t=s.De.returnValue.tcString;this.Ie(t).then(()=>i(this.Fe)).catch(t=>e())}}catch(t){e()}})}isApiOnPage(){return null!==this.Le||null!==this.Re}bindToApi(){return null!==this.Le?new Promise((t,i)=>{this.Pe(this.Le).then(()=>t()).catch(t=>i(t))}):null!==this.Re?this.Me(this.Re):Promise.reject()}isConsentForVendor(t){var i,e;return!(null===(i=this.$e)||void 0===i||!i.vendorConsents)&&!!(null===(e=this.$e)||void 0===e?void 0:e.vendorConsents[t])}getConsentPayload(){var t;return null===(t=this.$e)||void 0===t?void 0:t.tcString}setInAppConsentData(t){this.$e=Object.assign(Object.assign({},this.$e),t)}hasIvtConsent(){return!0}isConsentForPurposes(t){var i;return!(null===(i=this.$e)||void 0===i||!i.purposeConsents)&&t.every(t=>!!this.$e.purposeConsents[t])}Me(t){this.Fe=Object(s.c)();const i={};return new Promise(e=>{const s=t=>{this.Be(t).then(t=>{i[t]=!0,i[this.Fe]&&(window.removeEventListener("message",s,!1),e())}).catch(t=>{})};window.addEventListener("message",s,!1);const n=g[m.a.TcfApi].getVendorConsentDataMethodName;t.postMessage({Ue:{command:n,parameter:null,callId:this.Fe}},"*")})}Pe(t){const i=g[m.a.TcfApi].windowPropertyName,e=g[m.a.TcfApi].consentUpdateMethodName,s=g[m.a.TcfApi].removeUpdateListenerMethodName;return t&&t[i]?new Promise(t=>{this.Le[i](e,2,(e,n)=>{if(n&&(e.eventStatus===M||e.eventStatus===E)){const n=e.tcString;this.Ie(n).then(()=>t()),this.Le[i](s,2,()=>void 0,e.listenerId)}})}):Promise.reject()}Ie(t){const i=P({tcfEncodedString:t});return C(i)?(this.$e=i,Promise.resolve()):Promise.reject()}}var R=e(39);const B=[R.a.P1,R.a.P2,R.a.P4,R.a.P7,R.a.P8];class D{constructor(t,i,e={}){var s,n;this.Ve=t,this.de=i;const r=P({cmpEncodedString:null===(s=e.cmp)||void 0===s?void 0:s.consentString,tcfEncodedString:null===(n=e.tcf)||void 0===n?void 0:n.tcString}),a=this.Ne(r);null!==a?(this.He(a),(C(r)||T(r))&&this.qe.setInAppConsentData(r)):Object(p.a)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:e}),level:h.ProtoLoggingLevelEnum.FATAL})}setPageUrl(t){this.ze=t}setAmpUserConsent(t){var i,e;if(!this.isConsentRequired())return;const s=t.consentStringTypeEnum.US_PRIVACY_STRING,n=null===(i=t.consentMetadata)||void 0===i?void 0:i.consentStringType,r=t.encodeConsentString||(null===(e=t.consentMetadata)||void 0===e?void 0:e.additionalConsent);let a;if(!Object(o.h)(r))return void Object(p.a)({level:h.ProtoLoggingLevelEnum.INFO,message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.ze});if(n===s)return void Object(p.a)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL_${this.ze}`,throttle:2,sendMaxLog:!1});const c=P({tcfEncodedString:r,cmpEncodedString:r});C(c)?a=new L(null,null):T(c)&&(a=new y(null,null)),a?a?(this.qe=a,this.qe.setInAppConsentData(c)):Object(p.a)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1}):Object(p.a)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp",level:h.ProtoLoggingLevelEnum.WARNING,callStack:r,exception:`${JSON.stringify(t)}__pageURL__${this.ze}`,throttle:2,sendMaxLog:!1})}isConsentRequired(){return this.Ve}isConsent(t,i=[]){if(this.isConsentRequired()){return this.qe.isConsentForVendor(t)&&this.qe.isConsentForPurposes(i)}return!0}isConsentConnatix(){return this.isConsent(n.c.Connatix,B)}getConsentDataPayload(){return this.qe.getConsentPayload()}bindToConsentApi(){return this.qe.bindToApi()}isConsentApiOnPage(){return this.qe.isApiOnPage()}hasIVTConsent(){return this.qe.hasIvtConsent()}getConsentApiType(){return this.qe.apiType}He(t){const i=O(this.de,t),e=k(this.de,t);t===m.a.TcfApi?this.qe=new L(i,e):this.qe=new y(i,e)}Ne(t){if(C(t))return m.a.TcfApi;if(T(t))return m.a.CmpApi;return _(this.de,m.a.TcfApi)?m.a.TcfApi:_(this.de,m.a.CmpApi)?m.a.CmpApi:m.a.TcfApi}}var F=e(17);const $="UserThirdPartySyncManager_Pubmatic",U="CookieSync_syncScript_not_properly_loaded",V="CookieSync_param_not_parsed_properly",N=(t,i,e)=>new Promise((s,n)=>{const r=Object(F.b)("p",t),h=Object(F.b)("predirect",t);if(window.PubMaticSync){if(!H(r,h))return void n();q(r,h,i,e),s(!0)}else Object(w.A)({src:"//ads.pubmatic.com/AdServer/js/userSync.js"},window.document.head,window,()=>{H(r,h)?(q(r,h,i,e),s(!0)):n()},()=>{n()},!0,$)}),H=(t,i)=>{if(!window.PubMaticSync)return z(U,"PUBMATIC"),!1;const e=Number.parseInt(t,10);return Object(o.d)(e)?!!Object(o.h)(i)||(z(V,"PUBMATIC","predirect"),!1):(z(V,"PUBMATIC","p"),!1)},q=(t,i,e,s)=>{const n={pubId:Number.parseInt(t,10),url:i};e&&(n.delay=1e3,n.gdpr=1,n.gdprConsent=s),window.PubMaticSync.sync(n)},z=(t,i,e="")=>{Object(p.a)({message:t,callStack:i,exception:e,level:h.ProtoLoggingLevelEnum.FATAL,throttle:1,sendMaxLog:!1})},W="yellowblue.io";class G{constructor(t,i){this.We=t,this.Ve=i,this.Ge=[]}replaceuserIdMacros(t,i){let e=t;return e=(e=(e=e.replace("%5BuserId%5D",i)).replace("[userId]",i)).replace("%7bUSER_ID%7d",i)}Je(t,i){try{if(this.Qe(t)){const e=i.document.createElement("iframe");e.setAttribute("style","width:1px;height:1px;border:0px;margin:0px;padding:0px"),e.src=t.url,i.document.body.appendChild(e)}else Object(w.A)({src:t.url},i.document.head,i,null,null,1===Object(s.l)([95,5]),"UserManager_unable_to_insert_sync_url_script");return!0}catch(t){return!1}}Qe(t){switch(t.vendorId){case n.c.Rubicon:case n.c.Pubmatic:return!0;default:return t.url.indexOf(W)>-1}}syncUrls(t,i){this.Ge.forEach(e=>{if(this.We.isConsent(e.vendorId)&&!e.synced){if(e.vendorId===n.c.Pubmatic)return void N(e.url,this.We.isConsentRequired(),this.We.getConsentDataPayload()).then(()=>{e.synced=!0});if(-1!==e.url.indexOf("openx.net"))return e.url=`${e.url.split("r=")[0]}&r=\n                        ${encodeURIComponent(`https://capi.connatix.com/core/us?DemandPartner=8&UserId=${t}&DemandPartnerUserId=`)}`,e.url=this.replaceuserIdMacros(e.url,t),r.a.trackPixel(e.url),void(e.synced=!0);if(e.url.indexOf("pixel.advertising.com")>-1&&(e.url=e.url.replace("gdpr=",`gdpr=${this.We.isConsentRequired()?1:0}`),e.url=e.url.replace("gdpr_consent=","gdpr_consent=0")),e.url=this.replaceuserIdMacros(e.url,t),this.Ve){e.url=Object(F.e)(e.url,"gdpr","1");const t=this.We.getConsentDataPayload();e.url=Object(F.e)(e.url,"gdpr_consent",t)}this.Je(e,i)&&(e.synced=!0)}})}setSyncUrls(t={}){return!(this.Ge.length>0)&&(this.Ge=[],Object.keys(t).forEach(i=>{this.Ge.push({vendorId:i,url:t[i],synced:!1})}),!0)}}var J=e(40);const Q={subdivision:{California:5332921},country:{US:6252001}};class X{constructor(t,i){this.le=t,this.Xe=1,this.Ye="__uspapi",this.Ke="getUSPData",this.Ze(i)}getUsPrivacyString(){if(this.le.usPrivacyString||this.le.isCcpaApplicable)return this.le.usPrivacyString}isCcpaApplicable(){return this.le.isCcpaApplicable}isSellUserAllowed(){return!this.le.isCcpaApplicable||this.ts()}setGeoLocation(t){this.es=t,t.subdivisionId!==Q.subdivision.California&&(this.le.isCcpaApplicable=!1)}fetchUsPrivacyString(){return this.ss()&&this.ns(),this.isCcpaApplicable()?new Promise(t=>{this.getUsPrivacyString()?t():t(this.rs())}):Promise.resolve()}rs(){return new Promise((t,i)=>{const e=this.le.getScope()[this.Ye];e?e(this.Ke,this.Xe,(e,s)=>{s?(this.Ze(e.uspString),t()):i()}):i()})}ts(){return!this.le.usPrivacyString||Object(b.g)(this.le.usPrivacyString,n.b)}Ze(t){this.le.usPrivacyString=t}ss(){if(!Object(s.l)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),i=new Date(2020,10,17,12,0,0).getTime();return Object(f.c)(t,i)}ns(){const{countryGeoId:t,subdivisionId:i}=this.es;t===Q.country.US&&Object(p.a)({message:"UserCcpaManager_logCCPA",level:h.ProtoLoggingLevelEnum.INFO,callStack:JSON.stringify(i),exception:this.le.usPrivacyString})}}var Y,K;e.d(i,"a",function(){return Y}),e.d(i,"b",function(){return Z}),function(t){t.CCPA_INFO_RECEIVED="ccpaInfoReceived",t.CONSENT_DATA_UPDATE="consentDataUpdate"}(Y||(Y={})),function(t){t.SYNC_URLS_RECEIVED="thirdPartySyncUrlsReceived",t.USER_INFO_RECEIVED="userInfoReceived"}(K||(K={}));class Z{constructor(t,i,e,s={}){this.hs=i,this.cs=e,this._appSettings=s,this.gdprConsentMode=h.ProtoGdprConsentModeEnum.Unknown,this.us={},this.ls="",this.ds=!1,this.fs=()=>{!this.We.isConsentRequired()||this.hs?this.resolveEvent(Y.CONSENT_DATA_UPDATE):(this.gdprConsentMode=this.We.isConsentApiOnPage()||this.cs?h.ProtoGdprConsentModeEnum.NoConsent:h.ProtoGdprConsentModeEnum.NoCmp,this.We.bindToConsentApi().then(()=>{this.isConsentConnatix()||(this.gdprConsentMode=h.ProtoGdprConsentModeEnum.NoConnatixConsent),this.resolveEvent(Y.CONSENT_DATA_UPDATE)}).catch(t=>{}))},this.ps=()=>{this.isConsentConnatix()&&(this.onEvent([K.USER_INFO_RECEIVED]).then(()=>{this.ds&&(this.bs.syncThirdPartyCookieList(),this.bs.unsecuredCookieSync&&this.bs.syncThirdPartyCookieList(this.bs.unsecuredCookieSync),this.bs.syncFirstPartyCookie(d.USER_ID))}),this.onEvent([K.SYNC_URLS_RECEIVED,Y.CONSENT_DATA_UPDATE,Y.CCPA_INFO_RECEIVED]).then(()=>{if(this.isConsentConnatix()&&this.vs.isSellUserAllowed())try{this.ms.syncUrls(this.le.userId,this.le.getScope())}catch(t){Object(p.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"UserManager_syncUrls",exception:t.message,callStack:t.stack})}}))};try{this.le=l.getInstance(t),this.hs||(this.bs=new v(this.le,t));const{cmp:i,tcf:e}=this._appSettings;this.We=new D(!!this.ls,t,{cmp:i,tcf:e}),this.ms=new G(this.We,this.isGDPR()),this.vs=new X(this.le,this._appSettings.usPrivacyString),this.gs()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_constructor",level:h.ProtoLoggingLevelEnum.FATAL})}}gs(){this.bs&&this.bs.fetchCookies(),this.fs(),this.onEvent([Y.CONSENT_DATA_UPDATE]).then(()=>{setTimeout(()=>{try{if(this.hs)return;this.ps()}catch(t){Object(p.a)({callStack:t.stack,exception:t.message,message:"UserManager_consent_data_received",level:h.ProtoLoggingLevelEnum.FATAL})}},0)})}ys(t){return void 0===this.us[t]&&(this.us[t]=new J.a,this.us[t].promise.catch(()=>this.us[t].reject())),this.us[t]}resolveEvent(t,i){this.ys(t).resolve(i)}setAmpUserConsent(t){this.We.setAmpUserConsent(t),this.resolveEvent(Y.CONSENT_DATA_UPDATE)}setPageUrl(t){this.We&&this.We.setPageUrl(t)}onEvent(t){const i=t.map(t=>this.ys(t).promise);return Promise.all(i)}isConsent(t,i){return this.We.isConsent(t,i)}isConsentConnatix(){return this.We.isConsentConnatix()}getConsentPayload(){return this.We.getConsentDataPayload()}isConsentRequired(){return this.We.isConsentRequired()}setThirdPartySyncUrls(t){this.hs||this.ms.setSyncUrls(t)&&this.resolveEvent(K.SYNC_URLS_RECEIVED)}setGeoLocation(t){this.vs.setGeoLocation(t),this.vs.fetchUsPrivacyString().then(()=>{this.resolveEvent(Y.CCPA_INFO_RECEIVED)}).catch(()=>{this.resolveEvent(Y.CCPA_INFO_RECEIVED)})}getUserId(){if(this.isConsentConnatix()&&this.bs)return this.bs.getUserId()}ws(){return this.bs&&this.bs.getUserId()}setUserInformation(t){this.bs&&(this.bs.setUserInformation(t),this.resolveEvent(K.USER_INFO_RECEIVED),!this.hs&&this.isConsentConnatix()&&this.bs.syncFirstPartyCookie(d.USER_ID))}isGDPR(){return!!this.ls}getUsPrivacyString(){return this.vs.getUsPrivacyString()}isCcpaApplicable(){return this.vs.isCcpaApplicable()}isSellUserAllowed(){return this.hs||this.vs.isSellUserAllowed()}getDeviceId(){if(this.isConsentConnatix())return this._appSettings.deviceID}Ss(){return this._appSettings.deviceID}getTrackableUser(){return this.hs?this.getDeviceId():this.getUserId()}getForcedTrackableUser(){return this.hs?this.Ss():this.ws()}registerPlsCall(t){return this.isConsentConnatix()||(this.ds=!0),this.le.registerPlsCall(t)}setBrowserInfo(t){this.bs&&this.bs.setBrowserInfo(t,this.isConsentConnatix())}getGdprConsentApiType(){return this.We.getConsentApiType()}}},function(t,i,e){"use strict";var s,n;e.d(i,"a",function(){return r}),function(t){t.hidden="hidden",t.msHidden="msHidden",t.webkitHidden="webkitHidden"}(s||(s={})),function(t){t.visibilitychange="visibilitychange",t.msvisibilitychange="msvisibilitychange",t.webkitvisibilitychange="webkitvisibilitychange"}(n||(n={}));class r{constructor(t){this.Os=t,this.ks=[],this._s(),this.js()}on(t){this.ks.push(t),t(this.isDocumentVisible())}off(t){this.ks=this.ks.filter(i=>i!==t)}_s(){void 0!==this.Os.getDocumentProperty(s.hidden)?(this.As=s.hidden,this.Is=n.visibilitychange):void 0!==this.Os.getDocumentProperty(s.msHidden)?(this.As=s.msHidden,this.Is=n.msvisibilitychange):void 0!==this.Os.getDocumentProperty(s.webkitHidden)&&(this.As=s.webkitHidden,this.Is=n.webkitvisibilitychange)}js(){this.Os.addEventListenerOnGlobal(this.Is,()=>{this.ks.forEach(t=>{t(this.isDocumentVisible())})},!0,!1)}isDocumentVisible(){return!this.Os.getDocumentProperty(this.As)}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return r});var s,n=e(0);!function(t){t[t.PreRoll=0]="PreRoll",t[t.MidRoll=1]="MidRoll",t[t.PostRoll=2]="PostRoll",t[t.Standalone=3]="Standalone"}(s||(s={}));const r={[n.ProtoAdSlotsEnum.PreRoll]:s.PreRoll,[n.ProtoAdSlotsEnum.MidRoll]:s.MidRoll,[n.ProtoAdSlotsEnum.PostRoll]:s.PostRoll}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(0),n=e(7),r=e(5),h=e(1),a=e(25);class o{constructor(t,i){this.Cs=t,this.Ts=i,this.Ps=t=>new Promise((i,e)=>{a.a.sendProtoRequest({ProtoResponse:this.Cs,endpoint:t,requestType:"GET",logError:!0}).then(t=>{i(t)}).catch(t=>{e(t)})})}fetchMetadata(t,i=5){return new Promise((e,s)=>{Object(n.k)(()=>this.Ps(t),i).then(i=>{if(Object(h.f)(i))return e(i);const n=new Error("invalid metadata");return this.Es({url:t,metadata:i,e:n}),s(n)}).catch(i=>{this.Es({url:t,e:i}),s(i)})})}Es(t){var i;const e=Object(h.h)(null===(i=t.e)||void 0===i?void 0:i.message)?t.e.message:"";-1===e.indexOf("XhrUtils_XMLHttpRequest_error")&&Object(r.a)({message:"MediaMetadataHandler_fetchMetadata",exception:`${this.Ts}_${e}:${JSON.stringify(t)}`,callStack:t.e&&t.e.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});const s="//securepubads.g.doubleclick.net/tag/js/gpt.js"},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-settings cnx-context-controller cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-settings-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink viewBox="0 0 22 22"><path d="M18.454 5.847l-2.642 1.05-1.03-.784c-.444-.338-.904-.603-1.39-.8l-1.205-.488-.404-2.786h-1.563l-.404 2.786-1.205.488c-.465.188-.93.46-1.413.817L6.17 6.9 3.546 5.847l-.783 1.34 2.232 1.727-.16 1.266c-.042.33-.062.59-.062.82s.02.49.062.82l.16 1.266-2.233 1.727.783 1.34 2.642-1.05 1.03.784c.444.338.904.603 1.39.8l1.205.488.404 2.786h1.563l.404-2.786 1.205-.488c.465-.188.93-.46 1.413-.817l1.025-.76 2.625 1.043.783-1.34-2.233-1.727.16-1.266c.043-.337.062-.584.062-.82s-.02-.483-.062-.82l-.16-1.266 2.233-1.727-.783-1.34zm.71 6.227l2.32 1.81c.21.164.264.46.132.702l-2.198 3.793c-.132.24-.418.34-.67.24l-2.736-1.096c-.57.427-1.187.8-1.857 1.074l-.418 2.905c-.033.263-.264.46-.538.46H8.802c-.275 0-.506-.197-.538-.46l-.418-2.905c-.67-.274-1.286-.636-1.857-1.074l-2.736 1.096c-.242.088-.538 0-.67-.24L.385 14.584c-.132-.24-.077-.537.132-.702l2.32-1.81A8.67 8.67 0 0 1 2.758 11a8.67 8.67 0 0 1 .077-1.074l-2.32-1.81a.54.54 0 0 1-.132-.702l2.198-3.793c.132-.24.418-.34.67-.24L5.99 4.478c.57-.427 1.187-.8 1.857-1.074L8.264.5c.033-.263.264-.46.538-.46h4.396c.275 0 .506.197.538.46l.418 2.905c.67.274 1.286.636 1.857 1.074l2.736-1.096c.242-.088.538 0 .67.24l2.198 3.793c.132.24.077.537-.132.702l-2.32 1.81A8.52 8.52 0 0 1 19.242 11a8.52 8.52 0 0 1-.077 1.074zM11 14.256A3.26 3.26 0 0 0 14.256 11 3.26 3.26 0 0 0 11 7.744 3.26 3.26 0 0 0 7.744 11 3.26 3.26 0 0 0 11 14.256zm0-2A1.26 1.26 0 0 1 9.744 11 1.26 1.26 0 0 1 11 9.744 1.26 1.26 0 0 1 12.256 11 1.26 1.26 0 0 1 11 12.256z"/></svg> </cnx> <cnx class=cnx-hd-flag> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 17 11"><g fill=none><rect class=cnx-color-accent width=17 height=11 rx=2 fill=#09F /><path class=cnx-color-icon d="M8 9L6.9 9 6.9 5.9 4.1 5.9 4.1 9 3 9 3 2 4.1 2 4.1 4.9 6.9 4.9 6.9 2 8 2 8 9ZM10 9L10 2 12 2C12.6 2 13.1 2.2 13.6 2.4 14 2.7 14.4 3.1 14.6 3.6 14.9 4.1 15 4.7 15 5.3L15 5.7C15 6.4 14.9 6.9 14.6 7.4 14.4 7.9 14 8.3 13.5 8.6 13.1 8.9 12.5 9 11.9 9L10 9ZM11 3L11 8 12.2 8C12.8 8 13.2 7.8 13.5 7.4 13.8 7 14 6.4 14 5.7L14 5.3C14 4.6 13.8 4 13.5 3.6 13.2 3.2 12.8 3 12.2 3L11 3Z"/></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-button-caption cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-caption-off-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M20.556 5H3.444C3.163 5 3 5.15 3 5.25v13.5c0 .1.163.25.444.25h17.11c.275 0 .444-.156.444-.25V5.25c0-.094-.17-.25-.444-.25zm0-2C21.9 3 23 4.013 23 5.25v13.5c0 1.238-1.1 2.25-2.444 2.25H3.444C2.088 21 1 19.988 1 18.75V5.25C1 4.013 2.088 3 3.444 3h17.11zM11 11H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-caption-on-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><g fill=none><path d="M20.6 3C21.9 3 23 4 23 5.3L23 18.8C23 20 21.9 21 20.6 21L3.4 21C2.1 21 1 20 1 18.8L1 5.3C1 4 2.1 3 3.4 3L20.6 3Z" class=cnx-color-accent /><path d="M11 11L9.5 11 9.5 10.5 7.5 10.5 7.5 13.5 9.5 13.5 9.5 13 11 13 11 14C11 14.6 10.6 15 10 15L7 15C6.5 15 6 14.6 6 14L6 10C6 9.5 6.5 9 7 9L10 9C10.6 9 11 9.5 11 10L11 11ZM18 11L16.5 11 16.5 10.5 14.5 10.5 14.5 13.5 16.5 13.5 16.5 13 18 13 18 14C18 14.6 17.6 15 17 15L14 15C13.5 15 13 14.6 13 14L13 10C13 9.5 13.5 9 14 9L17 9C17.6 9 18 9.5 18 10L18 11Z" class=cnx-color-icon /></g></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-progress-bar cnx-video-progress"> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-accent"></cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports='<cnx class=cnx-ui-loader> <svg class=cnx-color-accent version=1.1 viewBox="0 0 79 90" xmlns=http://www.w3.org/2000/svg><polygon points="21 73.322 11 79 11 12 21 17.678" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="27 70 27 21 38 27.267 38 63.733" fill=transparent stroke-linecap=round stroke-linejoin=round /><polygon points="44 61 44 31 54 36.769 54 55.231" fill=none stroke-linecap=round stroke-linejoin=round /><polygon points="60 51 60 40 70 45.5" fill=none stroke-linecap=round stroke-linejoin=round /></svg> </cnx> '},function(t,i,e){"use strict";t.exports=e(135)},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=function(){function t(){}var i,e,n,r,h,a,o,c,u,l,d,f,p,b,v,m,g,y;return i=s.Fields.cmpId,e=s.Fields.cmpVersion,n=s.Fields.consentLanguage,r=s.Fields.consentScreen,h=s.Fields.created,a=s.Fields.isServiceSpecific,o=s.Fields.lastUpdated,c=s.Fields.policyVersion,u=s.Fields.publisherCountryCode,l=s.Fields.publisherLegitimateInterests,d=s.Fields.publisherConsents,f=s.Fields.purposeConsents,p=s.Fields.purposeLegitimateInterests,b=s.Fields.purposeOneTreatment,v=s.Fields.specialFeatureOptins,m=s.Fields.useNonStandardStacks,g=s.Fields.vendorListVersion,y=s.Fields.version,t[i]=12,t[e]=12,t[n]=12,t[r]=6,t[h]=36,t[a]=1,t[o]=36,t[c]=6,t[u]=12,t[l]=24,t[d]=24,t[f]=24,t[p]=24,t[b]=1,t[v]=12,t[m]=1,t[g]=12,t[y]=6,t.anyBoolean=1,t.encodingType=1,t.maxId=16,t.numCustomPurposes=6,t.numEntries=12,t.numRestrictions=12,t.purposeId=6,t.restrictionType=2,t.segmentType=3,t.singleOrRange=1,t.vendorId=16,t}();i.BitLength=n},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.RestrictionType||(i.RestrictionType={}))[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(48),n=e(35),r=e(37),h=function(){function t(){}return t.encode=function(t,i){for(var e="",n=1;n<=i;n++)e+=s.BooleanEncoder.encode(t.has(n));return e},t.decode=function(t,i){if(t.length!==i)throw new n.DecodingError("bitfield encoding length mismatch");for(var e=new r.Vector,h=1;h<=i;h++)s.BooleanEncoder.decode(t[h-1])&&e.set(h);return e.bitLength=t.length,e},t}();i.FixedVectorEncoder=h},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><path d="M8.6 16.6l4.58-4.6L8.6 7.4 10 6l6 6-6 6-1.4-1.4z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg"><g stroke-width="3" viewBox="0 0 32 32"><circle class="cnx-svg-circle-stroke" cx="16" cy="17" r="14"></circle></g></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" class="cnx-color-accent cnx-quote-icon" viewBox="0 0 13 10"><path d="M7 6.9C7 6.2 7.1 5.5 7.3 4.7 7.5 4 7.9 3.4 8.4 2.8 8.8 2.2 9.5 1.7 10.2 1.2 11 0.7 11.9 0.3 13 0L13 1.5C11.8 1.9 10.9 2.3 10.4 2.8 9.8 3.4 9.5 4 9.5 4.7 9.5 4.9 9.6 5.1 9.7 5.2 9.9 5.4 10 5.5 10.2 5.7 10.4 5.8 10.6 5.9 10.9 6 11.1 6.1 11.3 6.3 11.5 6.4 11.7 6.6 11.9 6.8 12 7 12.1 7.3 12.2 7.6 12.2 7.9 12.2 8.6 12 9.1 11.5 9.5 11.1 9.8 10.5 10 9.8 10 9.5 10 9.1 9.9 8.8 9.8 8.4 9.7 8.1 9.5 7.8 9.2 7.6 9 7.4 8.6 7.2 8.2 7.1 7.9 7 7.4 7 6.9ZM0 6.9C0 6.2 0.1 5.5 0.3 4.7 0.5 4 0.9 3.4 1.4 2.8 1.8 2.2 2.5 1.7 3.2 1.2 4 0.7 4.9 0.3 6 0L6 1.5C4.8 1.9 3.9 2.3 3.4 2.8 2.8 3.4 2.5 4 2.5 4.7 2.5 4.9 2.6 5.1 2.7 5.2 2.8 5.4 3 5.5 3.2 5.7 3.4 5.8 3.6 5.9 3.9 6 4.1 6.1 4.3 6.3 4.5 6.4 4.7 6.6 4.9 6.8 5 7 5.1 7.3 5.2 7.6 5.2 7.9 5.2 8.6 5 9.1 4.5 9.5 4.1 9.8 3.5 10 2.8 10 2.4 10 2.1 9.9 1.7 9.8 1.4 9.7 1.1 9.5 0.8 9.2 0.6 9 0.4 8.6 0.2 8.2 0.1 7.9 0 7.4 0 6.9Z"></path></svg>'},function(t,i,e){"use strict";t.exports=l;var s,n=e(41),r=n.LongBits,h=n.base64,a=n.utf8;function o(t,i,e){this.fn=t,this.len=i,this.next=void 0,this.val=e}function c(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new o(c,0,0),this.tail=this.head,this.states=null}function d(t,i,e){i[e]=255&t}function f(t,i){this.len=t,this.next=void 0,this.val=i}function p(t,i,e){for(;t.hi;)i[e++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)i[e++]=127&t.lo|128,t.lo=t.lo>>>7;i[e++]=t.lo}function b(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}l.create=n.Buffer?function(){return(l.create=function(){return new s})()}:function(){return new l},l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype.Ls=function(t,i,e){return this.tail=this.tail.next=new o(t,i,e),this.len+=i,this},f.prototype=Object.create(o.prototype),f.prototype.fn=function(t,i,e){for(;t>127;)i[e++]=127&t|128,t>>>=7;i[e]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.Ls(p,10,r.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var i=r.from(t);return this.Ls(p,i.length(),i)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var i=r.from(t).zzEncode();return this.Ls(p,i.length(),i)},l.prototype.bool=function(t){return this.Ls(d,1,t?1:0)},l.prototype.fixed32=function(t){return this.Ls(b,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var i=r.from(t);return this.Ls(b,4,i.lo).Ls(b,4,i.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this.Ls(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.Ls(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,i,e){i.set(t,e)}:function(t,i,e){for(var s=0;s<t.length;++s)i[e+s]=t[s]};l.prototype.bytes=function(t){var i=t.length>>>0;if(!i)return this.Ls(d,1,0);if(n.isString(t)){var e=l.alloc(i=h.length(t));h.decode(t,e,0),t=e}return this.uint32(i).Ls(v,i,t)},l.prototype.string=function(t){var i=a.length(t);return i?this.uint32(i).Ls(a.write,i,t):this.Ls(d,1,0)},l.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new o(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,i=this.tail,e=this.len;return this.reset().uint32(e),e&&(this.tail.next=t.next,this.tail=i,this.len+=e),this},l.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),e=0;t;)t.fn(t.val,i,e),e+=t.len,t=t.next;return i},l.ie=function(t){s=t}},function(t,i){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,i,e){"use strict";t.exports=o;var s,n=e(41),r=n.LongBits,h=n.utf8;function a(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function o(t){this.buf=t,this.pos=0,this.len=t.length}var c,u="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new o(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new o(t);throw Error("illegal buffer")};function l(){var t=new r(0,0),i=0;if(!(this.len-this.pos>4)){for(;i<3;++i){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,this.len-this.pos>4){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}o.create=n.Buffer?function(t){return(o.create=function(t){return n.Buffer.isBuffer(t)?new s(t):u(t)})(t)}:u,o.prototype.Rs=n.Array.prototype.subarray||n.Array.prototype.slice,o.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},o.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},o.prototype.bytes=function(){var t=this.uint32(),i=this.pos,e=this.pos+t;if(e>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,e):i===e?new this.buf.constructor(0):this.Rs.call(this.buf,i,e)},o.prototype.string=function(){var t=this.bytes();return h.read(t,0,t.length)},o.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},o.ie=function(t){s=t;var i=n.Long?"toLong":"toNumber";n.merge(o.prototype,{int64:function(){return l.call(this)[i](!1)},uint64:function(){return l.call(this)[i](!0)},sint64:function(){return l.call(this).zzDecode()[i](!1)},fixed64:function(){return f.call(this)[i](!0)},sfixed64:function(){return f.call(this)[i](!1)}})}},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(72)),s(e(60)),s(e(157)),s(e(161)),s(e(77)),s(e(83))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(35),n=function(){function t(){}return t.encode=function(t){if(!/^[0-1]+$/.test(t))throw new s.EncodingError("Invalid bitField");var i=t.length%this.LCM;t+=i?"0".repeat(this.LCM-i):"";for(var e="",n=0;n<t.length;n+=this.BASIS)e+=this.DICT[parseInt(t.substr(n,this.BASIS),2)];return e},t.decode=function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new s.DecodingError("Invalidly encoded Base64URL string");for(var i="",e=0;e<t.length;e++){var n=this.REVERSE_DICT.get(t[e]).toString(2);i+="0".repeat(this.BASIS-n.length)+n}return i},t.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",t.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),t.BASIS=6,t.LCM=24,t}();i.Base64Url=n},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.root=null,i}return n(i,t),i.prototype.isEmpty=function(){return!this.root},i.prototype.add=function(t){var i,e={value:t,left:null,right:null};if(this.isEmpty())this.root=e;else for(i=this.root;;)if(t<i.value){if(null===i.left){i.left=e;break}i=i.left}else{if(!(t>i.value))break;if(null===i.right){i.right=e;break}i=i.right}},i.prototype.get=function(){for(var t=[],i=this.root;i;)if(i.left){for(var e=i.left;e.right&&e.right!=i;)e=e.right;e.right==i?(e.right=null,t.push(i.value),i=i.right):(e.right=i,i=i.left)}else t.push(i.value),i=i.right;return t},i.prototype.contains=function(t){for(var i=!1,e=this.root;e;){if(e.value===t){i=!0;break}t>e.value?e=e.right:t<e.value&&(e=e.left)}return i},i.prototype.min=function(t){var i;for(void 0===t&&(t=this.root);t;)t.left?t=t.left:(i=t.value,t=null);return i},i.prototype.max=function(t){var i;for(void 0===t&&(t=this.root);t;)t.right?t=t.right:(i=t.value,t=null);return i},i.prototype.remove=function(t,i){void 0===i&&(i=this.root);for(var e=null,s="left";i;)if(t<i.value)e=i,i=i.left,s="left";else if(t>i.value)e=i,i=i.right,s="right";else{if(i.left||i.right)if(i.left)if(i.right){var n=this.min(i.right);this.remove(n,i.right),i.value=n}else e?e[s]=i.left:this.root=i.left;else e?e[s]=i.right:this.root=i.right;else e?e[s]=null:this.root=null;i=null}},i}(e(43).Cloneable);i.BinarySearchTree=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.cmpId="cmpId",t.cmpVersion="cmpVersion",t.consentLanguage="consentLanguage",t.consentScreen="consentScreen",t.created="created",t.supportOOB="supportOOB",t.isServiceSpecific="isServiceSpecific",t.lastUpdated="lastUpdated",t.numCustomPurposes="numCustomPurposes",t.policyVersion="policyVersion",t.publisherCountryCode="publisherCountryCode",t.publisherCustomConsents="publisherCustomConsents",t.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",t.publisherLegitimateInterests="publisherLegitimateInterests",t.publisherConsents="publisherConsents",t.publisherRestrictions="publisherRestrictions",t.purposeConsents="purposeConsents",t.purposeLegitimateInterests="purposeLegitimateInterests",t.purposeOneTreatment="purposeOneTreatment",t.specialFeatureOptins="specialFeatureOptins",t.useNonStandardStacks="useNonStandardStacks",t.vendorConsents="vendorConsents",t.vendorLegitimateInterests="vendorLegitimateInterests",t.vendorListVersion="vendorListVersion",t.vendorsAllowed="vendorsAllowed",t.vendorsDisclosed="vendorsDisclosed",t.version="version",t}();i.Fields=s},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(43),h=e(35),a=e(61),o=function(t){function i(i,e){var s=t.call(this)||this;return void 0!==i&&(s.purposeId=i),void 0!==e&&(s.restrictionType=e),s}return n(i,t),i.unHash=function(t){var e=t.split(this.hashSeparator),s=new i;if(2!==e.length)throw new h.TCModelError("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s},Object.defineProperty(i.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+i.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(t){this.purposeId_=t},enumerable:!0,configurable:!0}),i.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===a.RestrictionType.NOT_ALLOWED||this.restrictionType===a.RestrictionType.REQUIRE_CONSENT||this.restrictionType===a.RestrictionType.REQUIRE_LI)},i.prototype.isSameAs=function(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType},i.hashSeparator="-",i}(r.Cloneable);i.PurposeRestriction=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.Segment||(i.Segment={})).CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(48)),s(e(78)),s(e(158)),s(e(62)),s(e(42)),s(e(79)),s(e(80)),s(e(82)),s(e(81))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(42),n=e(35),r=function(){function t(){}return t.encode=function(t,i){return s.IntEncoder.encode(Math.round(t.getTime()/100),i)},t.decode=function(t,i){if(i!==t.length)throw new n.DecodingError("invalid bit length");var e=new Date;return e.setTime(100*s.IntEncoder.decode(t,i)),e},t}();i.DateEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(42),n=e(35),r=function(){function t(){}return t.encode=function(t,i){var e=(t=t.toUpperCase()).charCodeAt(0)-65,r=t.charCodeAt(1)-65;if(e<0||e>25||r<0||r>25)throw new n.EncodingError("invalid language code: "+t);if(i%2==1)throw new n.EncodingError("numBits must be even, "+i+" is not valid");return i/=2,s.IntEncoder.encode(e,i)+s.IntEncoder.encode(r,i)},t.decode=function(t,i){if(i!==t.length||t.length%2)throw new n.DecodingError("invalid bit length for language");var e=t.length/2,r=s.IntEncoder.decode(t.slice(0,e),e)+65,h=s.IntEncoder.decode(t.slice(e),e)+65;return String.fromCharCode(r)+String.fromCharCode(h)},t}();i.LangEncoder=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(60),n=e(48),r=e(35),h=e(42),a=e(37),o=function(){function t(){}return t.encode=function(t){var i=h.IntEncoder.encode(t.numRestrictions,s.BitLength.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach(function(e){i+=h.IntEncoder.encode(e.purposeId,s.BitLength.purposeId),i+=h.IntEncoder.encode(e.restrictionType,s.BitLength.restrictionType);for(var r=t.getVendors(e),a=r.length,o=0,c=0,u="",l=0;l<a;l++){var d=r[l];if(0===c&&(o++,c=d),l===a-1||r[l+1]>d+1){var f=!(d===c);u+=n.BooleanEncoder.encode(f),u+=h.IntEncoder.encode(c,s.BitLength.vendorId),f&&(u+=h.IntEncoder.encode(d,s.BitLength.vendorId)),c=0}}i+=h.IntEncoder.encode(o,s.BitLength.numEntries),i+=u}),i},t.decode=function(t){var i=0,e=new a.PurposeRestrictionVector,o=h.IntEncoder.decode(t.substr(i,s.BitLength.numRestrictions),s.BitLength.numRestrictions);i+=s.BitLength.numRestrictions;for(var c=0;c<o;c++){var u=h.IntEncoder.decode(t.substr(i,s.BitLength.purposeId),s.BitLength.purposeId);i+=s.BitLength.purposeId;var l=h.IntEncoder.decode(t.substr(i,s.BitLength.restrictionType),s.BitLength.restrictionType);i+=s.BitLength.restrictionType;var d=new a.PurposeRestriction(u,l),f=h.IntEncoder.decode(t.substr(i,s.BitLength.numEntries),s.BitLength.numEntries);i+=s.BitLength.numEntries;for(var p=0;p<f;p++){var b=n.BooleanEncoder.decode(t.substr(i,s.BitLength.anyBoolean));i+=s.BitLength.anyBoolean;var v=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,b){var m=h.IntEncoder.decode(t.substr(i,s.BitLength.vendorId),s.BitLength.vendorId);if(i+=s.BitLength.vendorId,m<v)throw new r.DecodingError("Invalid RangeEntry: endVendorId "+m+" is less than "+v);for(var g=v;g<=m;g++)e.add(g,d)}else e.add(v,d)}}return e.bitLength=i,e},t}();i.PurposeRestrictionVectorEncoder=o},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=e(71),r=e(42),h=e(48),a=e(62),o=e(82),c=e(35),u=function(){function t(){}return t.encode=function(t){var i,e=[],s=[],a=r.IntEncoder.encode(t.maxId,n.BitLength.maxId),c="",u=n.BitLength.maxId+n.BitLength.encodingType,l=u+t.maxId,d=2*n.BitLength.vendorId+n.BitLength.singleOrRange+n.BitLength.numEntries,f=u+n.BitLength.numEntries;return t.forEach(function(r,a){c+=h.BooleanEncoder.encode(r),(i=t.maxId>d&&f<l)&&r&&(t.has(a+1)?0===s.length&&(s.push(a),f+=n.BitLength.singleOrRange,f+=n.BitLength.vendorId):(s.push(a),f+=n.BitLength.vendorId,e.push(s),s=[]))}),i?(a+=o.VectorEncodingType.RANGE+"",a+=this.buildRangeEncoding(e)):(a+=o.VectorEncodingType.FIELD+"",a+=c),a},t.decode=function(t,i){var e,u=0,l=r.IntEncoder.decode(t.substr(u,n.BitLength.maxId),n.BitLength.maxId);u+=n.BitLength.maxId;var d=r.IntEncoder.decode(t.charAt(u),n.BitLength.encodingType);if(u+=n.BitLength.encodingType,d===o.VectorEncodingType.RANGE){if(e=new s.Vector,1===i){if("1"===t.substr(u,1))throw new c.DecodingError("Unable to decode default consent=1");u++}var f=r.IntEncoder.decode(t.substr(u,n.BitLength.numEntries),n.BitLength.numEntries);u+=n.BitLength.numEntries;for(var p=0;p<f;p++){var b=h.BooleanEncoder.decode(t.charAt(u));u+=n.BitLength.singleOrRange;var v=r.IntEncoder.decode(t.substr(u,n.BitLength.vendorId),n.BitLength.vendorId);if(u+=n.BitLength.vendorId,b){var m=r.IntEncoder.decode(t.substr(u,n.BitLength.vendorId),n.BitLength.vendorId);u+=n.BitLength.vendorId;for(var g=v;g<=m;g++)e.set(g)}else e.set(v)}}else{var y=t.substr(u,l);u+=l,e=a.FixedVectorEncoder.decode(y,l)}return e.bitLength=u,e},t.buildRangeEncoding=function(t){var i=t.length,e=r.IntEncoder.encode(i,n.BitLength.numEntries);return t.forEach(function(t){var i=1===t.length;e+=h.BooleanEncoder.encode(!i),e+=r.IntEncoder.encode(t[0],n.BitLength.vendorId),i||(e+=r.IntEncoder.encode(t[1],n.BitLength.vendorId))}),e},t}();i.VendorVectorEncoder=u},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0}),(s=i.VectorEncodingType||(i.VectorEncodingType={}))[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"},function(t,i,e){"use strict";function s(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"_",{value:!0}),s(e(159)),s(e(160))},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(71),n=e(37),r=e(42),h=e(162),a=function(){function t(){}return t.encode=function(t,i){var e,n,r="";return t=s.SemanticPreEncoder.process(t,i),(n=Array.isArray(null===(e=i)||void 0===e?void 0:e.segments)?i.segments:new s.SegmentSequence(t,i)[""+t.version]).forEach(function(i,e){var h="";e<n.length-1&&(h="."),r+=s.SegmentEncoder.encode(t,i)+h}),r},t.decode=function(t,i){var e=t.split("."),a=e.length;i||(i=new h.TCModel);for(var o=0;o<a;o++){var c=e[o],u=s.Base64Url.decode(c.charAt(0)).substr(0,s.BitLength.segmentType),l=n.SegmentIDs.ID_TO_KEY[r.IntEncoder.decode(u,s.BitLength.segmentType).toString()];s.SegmentEncoder.decode(c,i,l)}return i},t}();i.TCString=a},function(t,i,e){"use strict";var s=e(165).decodeConsentString;t.exports={decodeConsentString:s}},function(t,i,e){"use strict";e.d(i,"a",function(){return D});var s=e(0),n=e.n(s),r=e(5),h=e(7),a=e(2),o=e(133),c=e(129),u=e(87),l=e(88),d=e(17),f=e(18),p=e(31),b=e(1),v=e(6),m=e(16),g=e(51),y=e(36),w=e(50),x=e(89),S=e(131),O=e(130),k=e(27),_=e(24),j=e(90),A=e(19),I=e(21),C=e(3),T=e(91),P=e(132),M=e(134),E=e(45),L=e(49);const R="player_instance",B=",";class D extends A.a{constructor(t,i,e,s,n,r){super(),this.services=t,this.GLOBAL=i,this.hs=e,this.cs=s,this.Ds=n,this.readyCallback=r,this.Fs={},this.$s="<cnx-placeholder></cnx-placeholder>",this.Us=100,this.Vs=1e3,this.isServerlessMode=!1,this.Ns=!1,this.Hs=[],this.qs="{{omidVerificationClient}}",this.hs&&this.zs(),this.Ws=L.a.detectUsingCSS(this.GLOBAL),this.Gs=Object(a.p)(this.GLOBAL)}Js(){const t={playerId:this.externalAttributes.playerId,_appSettings:this.externalAttributes._appSettings,settings:{_connatixInternals:this.externalAttributes.settings._connatixInternals,advertising:{},customization:{},rendering:{},plugins:{}}};this.externalAttributes.customParam1&&(t.customParam1=this.externalAttributes.customParam1),this.externalAttributes.customParam2&&(t.customParam2=this.externalAttributes.customParam2),this.externalAttributes.customParam3&&(t.customParam3=this.externalAttributes.customParam3),this.externalAttributes.customParam4&&(t.customParam4=this.externalAttributes.customParam4),this.externalAttributes.customParam5&&(t.customParam5=this.externalAttributes.customParam5),this.externalAttributes.settings.useExternalViewabilityService&&(t.settings.useExternalViewabilityService=this.externalAttributes.settings.useExternalViewabilityService),this.externalAttributes=t}Qs(t){const i=this.GLOBAL.frameElement;if(!Object(a.E)(i))return;let e=!0;i&&t&&(e=!1),e?Object(a.v)(i):Object(a.R)(i)}Ys(t,i){try{return this.Ks(t,i)}catch(t){return null}}Zs(t){let i;try{i=eval(t)}catch(e){i=t.replace(/\[(\d+)]/g,":nth-child($1)")}return i}tn(t,i){const e=this.Ys(t,i);return null===e?new Promise(e=>{setTimeout(()=>{e(this.tn(t,i))},this.Us)}):Promise.resolve(e)}in(t,i){const e=this.Zs(t);return Promise.resolve(this.tn(e,i))}Ks(t,i){let e;return t.split(/(\.cnxEq\(\d+\))/).filter(t=>t).forEach(t=>{e=-1===t.indexOf("cnxEq")?e?e.querySelectorAll(t):Object(a.K)(t,i):this.en(e,t)}),e?(e.hasOwnProperty("length")&&(e=e.length>0?e[0]:null),e):null}en(t,i){const e=/\d+/g.exec(i),s=parseInt(e[0],10);return s>t.length?Object(v.c)(t)[t.length-1]:Object(v.c)(t)[s]}nn(){return this.cs?s.ProtoImplementationType.Amp:s.ProtoImplementationType.Web}rn(t,i){const e=Object(h.f)(this.GLOBAL);let s;return s=Object(b.a)(this.externalAttributes.settings.rendering.forceInsertPath)?this.externalAttributes.settings.rendering.forceInsertPath:i.forceInsertPath,new Promise((n,r)=>{let h=Object(a.f)(this.$s,this.GLOBAL);if(s||t.tag.parentNode===this.GLOBAL.document.head&&(!e.topChildFrame||i.renderInFrame)){let t,s,r;e.topChildFrame&&Object(a.L)(e.topChildFrame.frameElement,C.h.DisplayNone),t=Object(b.h)(this.externalAttributes.settings.rendering.containerSelector)?this.externalAttributes.settings.rendering.containerSelector:i.containerSelector,s=Object(b.a)(this.externalAttributes.settings.rendering.insertPosition)?this.externalAttributes.settings.rendering.insertPosition:i.insertPosition,r=Object(b.a)(this.externalAttributes.settings.rendering.position)?this.externalAttributes.settings.rendering.position:i.position,this.in(t,e.topFrame).then(t=>{this.hn(t,h,s,r),n({insertContainer:h,insertWindow:e.topFrame})})}else e.topChildFrame&&!i.renderInFrame?(h=Object(a.f)(this.$s,e.topFrame),e.topChildFrame.frameElement.parentNode.insertBefore(h,e.topChildFrame.frameElement),Object(a.a)(e.topChildFrame.frameElement,C.h.DisplayNone),n({insertContainer:h,insertWindow:e.topFrame})):(t.tag.parentNode.insertBefore(h,t.tag),n({insertContainer:h}))})}an(t,i,e){Object(a.y)(i,t,e)}cn(t,i,e){switch(e){case s.ProtoPlayerInsertMode.BeforeContainer:t.parentElement.insertBefore(i,t);break;case s.ProtoPlayerInsertMode.ReplaceContainer:t.parentElement.insertBefore(i,t),Object(a.M)(t);break;case s.ProtoPlayerInsertMode.HideContainer:t.parentElement.insertBefore(i,t),Object(a.v)(t);break;case s.ProtoPlayerInsertMode.AfterContainer:t.nextElementSibling?t.parentElement.insertBefore(i,t.nextElementSibling):t.parentElement.appendChild(i)}}hn(t,i,e,n){e===s.ProtoPlayerInsertMode.WithinContainer?this.an(t,i,n):this.cn(t,i,e)}un(t,i=[]){t.lineItems=[...t.lineItems,...i];const e=t.lineItems.length;t.lineItems=Object(v.e)("advertiserLineItemId",t.lineItems),e!==t.lineItems.length&&Object(r.a)({level:s.ProtoLoggingLevelEnum.WARNING,message:"Loader_duplicated_adsources",callStack:"_"})}ln(t,i){const e=t.players[i],{playerModel:n,globalDomUtilsService:h}=this.Fs[i];if(this.Ws||this.services.UserManagerService.setThirdPartySyncUrls(t.cookieSyncUrls),this.services.UserManagerService.setGeoLocation(t.geoLocation),p.a.sessionId=e.sessionId,this.dn.addPlayerSession(e.playerId,e.sessionId),!n)return void this.registerApiError(m.a.SetupError,"No playlist was provided!");const a=new l.a({browser:t.browser,geoLocation:t.geoLocation,pageUrl:this.pageUrl,playerId:n.playerId,explorationMode:t.explorationMode,bundleID:this.externalAttributes._appSettings.bundleID,appID:this.externalAttributes._appSettings.appID,domainURL:this.externalAttributes._appSettings.domainURL,storeURL:this.externalAttributes._appSettings.storeURL,appCategories:this.externalAttributes._appSettings.appCategories,appIsPaid:this.externalAttributes._appSettings.appIsPaid,appName:this.externalAttributes._appSettings.appName,appPrivacyPolicy:this.externalAttributes._appSettings.appPrivacyPolicy,appVersion:this.externalAttributes._appSettings.appVersion,deviceId:this.externalAttributes._appSettings.deviceID,isRecyclerViewIntegration:this.externalAttributes._appSettings.isRecyclerViewIntegration,appPageURL:this.externalAttributes._appSettings.appPageURL}),o=a.browser.browserType===_.a.InternetExplorer,d=new g.a(h),f=this.getViewabilityService(n,d,o),v=this.Ws;this.Ws=L.a.detectUsingCSS(n.global),v!==this.Ws&&Object(r.a)({message:"Loader_adBlockerDetection_changed_after_new_global",throttle:2,sendMaxLog:!1,level:s.ProtoLoggingLevelEnum.INFO,exception:`${v}`});const y=new u.a(n,t.geoLocation,a.pageUrl,a.pageDomain,this.externalAttributes._appSettings,this.Gs),x={services:{GlobalDomUtilsService:h,ViewabilityService:f,TrackingService:this.pn(n,t,i),ResizeObserver:new c.a(n.global),UserManagerService:this.services.UserManagerService,MacrosService:y,EventsStorageService:this.services.EventsStorageService,PageFocusService:d,InteractionService:new M.a(n.global,a.isMobile)},config:a};this.Ws&&x.services.TrackingService.trackSessionAdBlocker(s.ProtoAdBlockDetectionTypeEnum.Banner),x.services.UserManagerService.setPageUrl(x.config.pageUrl);const S=this.nn();x.services.TrackingService.setImplementationTypeOnMeta(S),n.externalMacros&&x.services.MacrosService.addExtraMacros(n.externalMacros),x.services.UserManagerService.onEvent([w.a.CCPA_INFO_RECEIVED]).then(()=>{x.services.MacrosService.setUsPrivacyString(x.services.UserManagerService.getUsPrivacyString())}),x.services.UserManagerService.onEvent([w.a.CONSENT_DATA_UPDATE]).then(()=>{x.services.TrackingService.updateMetadataModel({userId:x.services.UserManagerService.getTrackableUser()});const t=x.services.UserManagerService.getConsentPayload();if(x.services.TrackingService.hasGdprConsentPayload=Object(b.h)(t),this.services.UserManagerService.gdprConsentMode===s.ProtoGdprConsentModeEnum.NoConsent||this.hs){const t=n.lineItemSettings.lineItems.filter(t=>Object(b.h)(t.vendorId)).every(t=>this.services.UserManagerService.isConsent(t.vendorId));this.services.UserManagerService.gdprConsentMode=t?s.ProtoGdprConsentModeEnum.AllGood:s.ProtoGdprConsentModeEnum.NotAllDemandConsent}});const O={wasPlayerReloaded:this.dn.wasPlayerReloaded(e.playerId),wasPlayerInView:this.dn.getSessionInView(e.playerId)};this.renderer=this.getRendererInstance(n,x,this.Ws,O,this.externalAttributes._appSettings),this.subscribe(I.c.SessionView,this.renderer,()=>{this.dn.addSessionInView(e.playerId)}),this.subscribe(I.c.SessionRendered,this.renderer,()=>{if(this.bn){const t=this.services.UserManagerService.getUserId();new P.a(y,h,this.bn,t).addFraudSensorScript()}});const k=this.renderer.init(),j=Object.assign({configEnums:this.getApiConfigEnums(),configEvents:this.getApiConfigEvents()},this.renderer.getApiMethods());let A=e.customJsCode;if(A){const t=`${R}_${x.config.appId}`;this.GLOBAL[t]=j,A=A.cnx_replaceAll(`"{{${R}}}"`,`window.${t}`)}k?this.registerApiSuccess(j,A):this.registerApiError(m.a.RenderError,"Player size under supported value")}pn(t,i,e){return t.disableTracking?new x.a:new o.a({userManagerService:this.services.UserManagerService,browser:i.browser,geoLocation:i.geoLocation,playerId:t.playerId,userId:this.services.UserManagerService.getTrackableUser(),sessionId:i.players[e].sessionId,pageUrl:this.pageUrl,bundleId:this.externalAttributes._appSettings.bundleID,customParam1:this.externalAttributes.customParam1,customParam2:this.externalAttributes.customParam2,customParam3:this.externalAttributes.customParam3,customParam4:this.externalAttributes.customParam4,customParam5:this.externalAttributes.customParam5,abTestId:i.players[e].abTestId,explorationMode:i.explorationMode})}vn(t,i={useSafeMode:!0}){if(!t)return;const{global:e,useSafeMode:s}=i,n=e||this.GLOBAL;let r;r=s?`\n        (function() {\n            "use strict";\n            try {\n                ${t}\n            }catch(e){\n                console.warn('---CnxCustomApiError---');\n                console.warn(e.message);\n            }\n          })()\n        `:t,Object(a.z)(n.document.head,n,r.trim())}zs(){if(this.qs.includes("{{omidVerificationClient"))return;const t={useSafeMode:!1,global:window};this.vn(decodeURI(this.qs),t)}mn(){const{playerId:t,parseDomain:i}=this.gn;return this.yn(t,i).catch(t=>{const i=new Error(t);throw Object(r.a)({callStack:i.stack,level:s.ProtoLoggingLevelEnum.FATAL,exception:i.message,message:"Prerender_Loader_player_id_call_get_pls",throttle:1e3}),this.registerApiError(m.a.SetupError,"player data call error"),this.wn(),i})}xn(t){const{browser:i,userInformation:e}=t;if(this.services.UserManagerService.setUserInformation(e),this.services.UserManagerService.setBrowserInfo(i),e&&e.callFraudSensor){const{lookupId:t,lookupResponseCode:s,publisherAdsTxt:n}=e;this.bn={lookupId:t,lookupResponseCode:s,publisherAdsTxt:n,deviceType:i.device}}y.a.serverAb0=t.serverAb0,y.a.serverAb1=t.serverAb1,Object(v.h)(t.players)?(t.players.length>1&&(this.Js(),this.Ns=!0),Object.keys(t.players).forEach(i=>{this.Sn(t,this.gn,i)})):this.registerApiError(m.a.NoPlayer,`No player available for given player id:${this.gn.playerId}`),this.wn()}wn(){this.kn(),this._n()}_n(){setTimeout(()=>{if(!this.Ns){const t=this.Hs[0];this.readyCallback&&this.readyCallback(t.apiErrorObj,t.apiConfigObj)}this.jn()})}jn(){this.Hs.filter(t=>t.apiErrorObj).forEach(()=>{this.services.EventsStorageService.emitRenderError()}),this.Hs.filter(t=>t.customJs).forEach(t=>{this.vn(t.customJs)})}Sn(t,i,e){const s=t.players[e],{playerModel:n}=this.Fs[e];this.Qs(s.renderInFrame),this.ln(t,e),this.An(n,this.renderer.playerContainer)}yn(t,i=!1){let e={parseDomain:i,referrer:this.Gs,pageUrl:this.pageUrl,tokens:[t]};e.bundleId=this.externalAttributes._appSettings.bundleID,this.queryParams.cnxLineItemId&&(e.forceLineItemIds=this.queryParams.cnxLineItemId.split(B).filter(t=>Object(b.h)(t))),this.queryParams.cnxPlayerId?e.forcePlayerId=this.queryParams.cnxPlayerId:this.externalAttributes.settings._connatixInternals.skipServingRules&&(e.forcePlayerId=t),this.queryParams.cnxExplorationMode&&(e.forceExploration=!0);const{queryJsTargeting:s}=this.externalAttributes.settings;return Object(b.f)(s)&&Object.keys(s).length>0&&(e.queryJsTargeting=Object.keys(s).reduce((t,i)=>Object.assign(Object.assign({},t),{[i]:`${s[i]}`}),{})),e.customParam1=this.externalAttributes.customParam1,e.customParam2=this.externalAttributes.customParam2,e.customParam3=this.externalAttributes.customParam3,e.customParam4=this.externalAttributes.customParam4,e.customParam5=this.externalAttributes.customParam5,e.disableTracking=this.externalAttributes.settings._connatixInternals.disableTracking,e.version=f.a.version,e.es6=f.b,e.userId=this.services.UserManagerService.getForcedTrackableUser(),e.isConsentConnatix=this.services.UserManagerService.isConsentConnatix(),e.clientAb0=y.a.clientAb0,e.clientAb1=y.a.clientAb1,e.implementationType=this.nn(),e.reloadedPlayers=this.dn.getCookiePlayersSession(),e=Object.assign(Object.assign({},e),this.getSpecificRequestData()),this.gn.playerId?this.getPlayerResponse(e,this.gn.playerId||"serverless"):new Promise((t,i)=>{this.isServerlessMode=!0,t(this.defaultInitFromProto())})}In(){const t=Object(d.b)("cnxVideoPosition",this.pageUrl),i=parseInt(Object(d.b)("cnxStoryPosition",this.pageUrl),10);return{cnxStoryId:Object(d.b)("cnxStoryId",this.pageUrl),cnxLineItemId:Object(d.b)("cnxLineItemId",this.pageUrl),cnxPlayerId:Object(d.b)("cnxPlayerId",this.pageUrl),cnxMediaId:Object(d.b)("cnxMediaId",this.pageUrl),cnxPlaylistId:Object(d.b)("cnxPlaylistId",this.pageUrl),cnxVideoPosition:t?parseInt(t,10):null,cnxExplorationMode:"true"===Object(d.b)("cnxExplorationMode",this.pageUrl),cnxStoryPosition:Object(b.e)(i)?i:null,cnxSkipAdsFlag:"true"===Object(d.b)("cnxSkipAdsFlag",this.pageUrl),cnxReloadTime:parseInt(Object(d.b)("cnxReloadTime",this.pageUrl),10),cnxOverrideLineitems:"true"===Object(d.b)("cnxOverrideLineitems",this.pageUrl),cnxIsSeoTraffic:"true"===Object(d.b)("cnxIsSeoTraffic",this.pageUrl)}}An(t,i){const e=this.getDelegateHandler();new S.a(this.GLOBAL,this.services.EventsStorageService,e,t,i).start()}Cn(){const t=this.GLOBAL.OmidSessionClient&&this.GLOBAL.OmidSessionClient[k.j];t?this.Tn=new O.a(t,this.services.EventsStorageService,this.externalAttributes._appSettings.sdkVersion):Object(r.a)({message:"OmidSessionClient not found.",level:s.ProtoLoggingLevelEnum.FATAL})}Pn(t){const i=()=>new Promise((i,e)=>{const s=this.Mn();t.addCssStylesheetToHead(s,()=>i(),t=>e(t))});return Object(h.k)(()=>i()).catch(t=>{throw Object(r.a)({message:"Loader_add_css_link",exception:t,level:s.ProtoLoggingLevelEnum.INFO}),new Error(t)})}updateQueryParams(){this.queryParams=this.In()}loadScriptTag(t,i){let e;if(this.externalAttributes=t,i&&(e=this.GLOBAL.document.getElementById(i)),!e)return Object(r.a)({message:"Loader_no_script_id",exception:`${t.playerId}`,level:s.ProtoLoggingLevelEnum.WARNING}),this.registerApiError(m.a.SetupError,"Could not locate any script tag ids in the page"),!1;const n=Object(b.f)(t.settings.plugins.adobeAnalyticsSettings);return this.Ds&&this.Cn(),this.gn={parseDomain:n,playerId:t.playerId,tag:e},!0}insertRenderer(){try{this.dn=new j.a(this.queryParams.cnxReloadTime),this.Qs();const t=()=>{try{this.mn().then(t=>{const i=[];t.players.forEach((e,n)=>{t.players[n].limitClientSideApiUse&&this.Js();const h=this.rn(this.gn,e).then(i=>{this.un(e,t.lineItems);const s=this.getPlayerModel(i,t,n.toString()),r=new T.a(s.global);return Object(E.a)(s.lineItemSettings.lineItems),this.Fs[n]={playerModel:s,globalDomUtilsService:r},this.Pn(r)}).catch(t=>{this.registerApiError(m.a.SetupError,"rendering error"),Object(r.a)({message:"Loader_send_data_to_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})});i.push(h)}),Promise.all(i).then(()=>this.xn(t))})}catch(t){Object(r.a)({message:"Prerender_Loader_do_player_call",callStack:t.stack,exception:t.message,throttle:1e3})}};this.kn=this.services.UserManagerService.registerPlsCall(t)}catch(t){Object(r.a)({message:"Prerender_Loader_insert_renderer",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL})}}findPageUrl(t,i,e=!1){if(t.cnx_page_url)this.pageUrl=t.cnx_page_url;else try{t["cnxAmpAd)"]?this.pageUrl=t.context.sourceUrl||t.context.location.href:this.pageUrl=i||Object(h.e)(Object(h.f)(this.GLOBAL),this.GLOBAL)}catch(t){}if(!this.pageUrl||0===this.pageUrl.length)return e||Object(r.a)({message:"Prerender_Loader_find_page_url",level:s.ProtoLoggingLevelEnum.INFO,throttle:1e3}),new Promise(e=>{setTimeout(()=>{this.findPageUrl(t,i,!0).then(()=>e())},this.Vs)});try{return this.pageUrl=Object(d.d)(this.pageUrl),Promise.resolve()}catch(t){return Object(r.a)({message:"Loader_find_page_url",exception:t.message,callStack:t.stack,level:s.ProtoLoggingLevelEnum.FATAL}),Promise.reject()}}registerApiError(t=m.a.SetupError,i=""){this.Hs.push({apiErrorObj:{type:t,message:i}})}registerApiSuccess(t,i){this.Hs.push({apiConfigObj:t,customJs:i})}destroy(){this.renderer&&this.renderer.destroy()}}},function(t,i,e){"use strict";e.d(i,"a",function(){return u});var s,n=e(0),r=e(7),h=e(2),a=e(32),o=e(28),c=e(1);!function(t){t.AppUrl="APP_URL",t.AppBundle="APP_BUNDLE",t.AppName="APP_NAME",t.Uuid="UUID",t.PageUrl="PAGE_URL",t.AdPosition="AD_POSITION",t.VideoTitle="VIDEO_TITLE",t.MediaTitle="MEDIA_TITLE",t.VideoDuration="VIDEO_DURATION",t.ContentLength="CONTENT_LENGTH",t.VideoDescription="VIDEO_DESCRIPTION",t.VideoUrl="VIDEO_URL",t.VideoId="VIDEO_ID",t.VideoTime="VIDEO_TIME",t.DescriptionUrl="DESCRIPTION_URL",t.VideoKeywords="VIDEO_KEYWORDS",t.Autoplay="AUTOPLAY",t.UserAgent="UA",t.Ip="IP",t.CashBuster="CB",t.Width="WIDTH",t.Height="HEIGHT",t.Domain="DOMAIN",t.SourceReferrer="SOURCE_REFERRER",t.Gdpr="GDPR",t.GdprConsent="GDPR_CONSENT",t.Consent="CONSENT",t.Ctd="CTD",t.Publisher="PUBLISHER",t.Random="RAND",t.Site="SITE",t.SubId="SUB_ID",t.Url="URL",t.UserLat="USER_LAT",t.UserLong="USER_LONG",t.UsPrivacyString="US_PRIVACY",t.DoNotTrack="DNT",t.FraudSensorUserId="FS_USER_ID",t.PublisherId="PUBLISHER_ID",t.SessionId="SESSION_ID",t.FraudSensorDeviceType="FS_DEVICE_TYPE",t.FraudSensorLookupId="MGID",t.FraudSensorLookupResponseCode="MGTO",t.FraudSensorMediaType="FS_MEDIA_TYPE",t.CnxSupplierId="CNX_SUPPLIER_ID"}(s||(s={}));class u{constructor(t,i,e,r,h,a){this.En=new Map,this.Ln="[",this.Rn="]",this.En.set(s.Autoplay,t.playbackMode===n.ProtoPlayerPlaybackModeEnum.Autoplay),this.En.set(s.UserAgent,navigator.userAgent),this.En.set(s.UserLong,i.lon),this.En.set(s.UserLat,i.lat),this.En.set(s.Ip,i.ip),this.Bn(h),this.Dn(a),this.Fn(e),this.$n(),this.En.set(s.Domain,r),this.En.set(s.CnxSupplierId,o.c),this.En.set(s.SessionId,t.sessionId)}Bn(t){this.En.set(s.AppBundle,t.bundleID),this.En.set(s.AppName,t.appName),this.En.set(s.AppUrl,t.storeURL)}Dn(t){this.En.set(s.SourceReferrer,t)}$n(){const t=Object(h.D)()?1:0;this.En.set(s.DoNotTrack,t)}Fn(t){this.En.set(s.PageUrl,t),this.En.set(s.Url,t),this.En.set(s.Publisher,t),this.En.set(s.Site,t),this.En.set(s.DescriptionUrl,t)}Un(){const t=Object(r.c)();this.En.set(s.CashBuster,t),this.En.set(s.Random,t),this.En.set(s.Ctd,t)}Vn(t){return t.split("?")[0]}Nn(t){return t.split("?").slice(1).join("?")}Hn(t,i,e){return 0===t.indexOf(i)&&t.indexOf(e,e.length)===t.length-i.length}qn(t,i){const e=this.Vn(t),s=this.zn(this.Nn(t),i);return`${e}${s?`?${s}`:""}`}zn(t,i,e=!1){let s=t;return s.split("&").forEach(t=>{const n=t.split("=");if(n[1])if(this.Hn(n[1],this.Ln,this.Rn))s=s.replace(n[1],this.Wn(n[1].toLowerCase(),i,e));else if(decodeURIComponent(n[1]).split("=").length>1){const t=this.zn(decodeURIComponent(n[1]),i,!0);s=s.replace(n[1],encodeURIComponent(t))}}),this.Gn(s)}Gn(t){return t.indexOf(this.Ln)>-1&&(t=t.cnx_replaceAll(this.Ln,encodeURIComponent(this.Ln))),t.indexOf(this.Rn)>-1&&(t=t.cnx_replaceAll(this.Rn,encodeURIComponent(this.Rn))),t}Wn(t,i,e){let s,n=t;return i.forEach((t,i)=>{for(;n.indexOf(this.Ln+i.toLowerCase()+this.Rn)>-1;)s=e?t:encodeURIComponent(t),n=n.replace(this.Ln+i.toLowerCase()+this.Rn,s)}),n}setAdWidth(t){this.En.set(s.Width,Math.floor(t))}setAdHeight(t){this.En.set(s.Height,Math.floor(t))}setSubId(t){this.En.set(s.SubId,t)}setGDPR(t){this.En.set(s.Gdpr,t)}setUUID(t){this.En.set(s.Uuid,t)}setGDPRConsent(t){this.En.set(s.GdprConsent,t)}setConsent(t){this.En.set(s.Consent,t)}setVideoId(t){this.En.set(s.VideoId,t)}setVideoTime(t){this.En.set(s.VideoTime,Math.floor(t))}setVideoUrl(t){this.En.set(s.VideoUrl,t)}setVideoDescription(t){this.En.set(s.VideoDescription,t)}setVideoDuration(t){this.En.set(s.VideoDuration,t),this.En.set(s.ContentLength,t)}setVideoTitle(t){let i;this.En.set(s.VideoTitle,t),this.En.set(s.MediaTitle,t),t&&(i=t.split(" ").join(",")),this.En.set(s.VideoKeywords,i)}setAdPosition(t="midRoll"){this.En.set(s.AdPosition,t)}setupMacros(t){return this.Un(),this.qn(t,this.En)}addExtraMacros(t){const i=Object(a.a)(s);Object.keys(t).filter(t=>!i.includes(t.toUpperCase())).forEach(i=>{this.En.set(i,t[i])})}getExtraMacros(){const t=Object(a.a)(s),i={};return this.En.forEach((e,s)=>{t.includes(s)||null==e||(i[s]=Object(c.h)(e)?e:JSON.stringify(e))}),i}setUsPrivacyString(t){const i=t||"";this.En.set(s.UsPrivacyString,i)}setUserId(t){this.En.set(s.FraudSensorUserId,t)}setPublisherId(t){this.En.set(s.PublisherId,t)}setFraudSensorMacros(t){this.En.set(s.FraudSensorDeviceType,t.deviceType),this.En.set(s.FraudSensorLookupId,t.lookupId),this.En.set(s.FraudSensorLookupResponseCode,t.lookupResponseCode),this.En.set(s.FraudSensorMediaType,t.mediaType)}destroy(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return o});var s=e(22),n=e(7),r=e(24),h=e(17),a=e(1);class o{constructor(t){this.Jn=t,this.Qn=100,this.Xn=Object(n.f)(window).topFrame,this.Yn=s.a.indexOf(this.Jn.browser.device)>-1,this.Kn=Object(n.d)(),this.Zn={browserType:this.tr(),browserVersion:this.Jn.browser.browserVersion},this.ir=this.er(),this.sr=this.pageUrl.substr(0,this.Qn),this.nr=Object(h.a)(this.sr)}tr(){let t;return Object.keys(r.a).forEach(i=>{this.Jn.browser.browserType.toLowerCase().indexOf(r.a[i])>-1&&(t=r.a[i])}),t}er(){let t,i=0;const e=this.Jn.browser.osCode.split("_"),n=e[0].toLowerCase();return Object.keys(s.b).forEach(i=>{n.indexOf(s.b[i])>-1&&(t=s.b[i])}),e.length>1&&(i=parseFloat(`${e[1]||0}.${e[2]||0}`)),{os:t,osVersion:i}}get device(){return this.Jn.browser.device}get browser(){return this.Zn}get os(){return this.ir}get geoLocation(){return this.Jn.geoLocation}get pageUrl(){return this.Jn.pageUrl||""}get pageUrlTrunc(){return this.sr}get pageDomain(){return this.nr}get isMobile(){return this.Yn}get isInApp(){return Object(a.h)(this.Jn.bundleID)}get isInAppAndroid(){return this.isInApp&&this.os.os===s.b.Android}get playerId(){return this.Jn.playerId}get appId(){return this.Kn}get bundleID(){return this.Jn.bundleID}get iOSAppID(){return this.Jn.appID}get domainURL(){return this.Jn.domainURL}get storeURL(){return this.Jn.storeURL}get explorationMode(){return this.Jn.explorationMode}get appName(){return this.Jn.appName}get appCategories(){return this.Jn.appCategories}get appVersion(){return this.Jn.appVersion}get appPrivacyPolicy(){return this.Jn.appPrivacyPolicy}get appIsPaid(){return this.Jn.appIsPaid}get deviceId(){return this.Jn.deviceId}get topWindow(){return this.Xn}get isRecyclerViewIntegration(){return this.Jn.isRecyclerViewIntegration}get appPageURL(){return this.Jn.appPageURL}}},function(t,i,e){"use strict";e.d(i,"a",function(){return s});class s{setNewMedia(){}updateMediaMetadata(){}setMediaStart(){}setContentStart(){}setSessionPlayback(){}setSessionViewability(){}trackSessionRendered(){}trackSessionViewability(){}trackMediaQuartile(){}trackMediaClick(){}setAdStart(){}startBidRequests(){}addPrebid(){}addPostBid(){}addBid(){}trackAuctionInfoForBid(){}trackVideoAdImpression(){}trackVideoAdImpressionViewable(){}trackVideoAdQuartile(){}trackAdClick(){}trackAdOpportunity(){}trackSessionAdBlocker(){}getMetadataModel(){}updateMetadataModel(){}setIsConsentPayload(){}destroy(){}publish(){}setImplementationTypeOnMeta(){}addPlatformCappedLineItemSubscriber(){}removePlatformCappedLineItemSubscriber(){}setImpressionRevenueSubscriber(){}unsubscribeToImpressionRevenue(){}trackHeavyAdIntervention(){}}},function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e(7),n=e(5),r=e(0),h=e(11);class a{constructor(t){this.RELOAD_TIME=h.a,this.RELOAD_COOKIES="cnx_player_reload",this.SESSION_IN_VIEW_FLAG="_sessionWasViewed",this.rr={},this.hr={},this.ar={},this.Xn=Object(s.f)(window).topFrame,this.or(t);try{this.cr()}catch(t){Object(n.a)({message:"PlayerReloader_cookie_fetch_failed",level:r.ProtoLoggingLevelEnum.WARNING,exception:t})}}wasPlayerReloaded(t){return!!this.rr[t]}addPlayerSession(t,i){this.hr[t]=i}getCookiePlayersSession(){return this.rr}addSessionInView(t){this.hr[t]+=this.SESSION_IN_VIEW_FLAG}getSessionInView(t){return this.ar[t]}or(t){setTimeout(()=>{this.ur(),this.Xn.location.reload()},t||this.RELOAD_TIME)}cr(){decodeURIComponent(this.Xn.document.cookie).split(";").forEach(t=>{const i=t.split("=");i[0].indexOf(this.RELOAD_COOKIES)>-1&&(this.rr=JSON.parse(i[1]))}),this.lr(),this.dr()}lr(){Object.keys(this.rr).forEach(t=>{const i=this.rr[t].indexOf(this.SESSION_IN_VIEW_FLAG);i>-1&&(this.rr[t]=this.rr[t].substr(0,i),this.ar[t]=!0)})}dr(){this.Xn.document.cookie=`${this.RELOAD_COOKIES}=; expires = Thu, 01 Jan 1970 00:00:00 GMT; path=/`}ur(){Object.keys(this.ar).forEach(t=>{-1===this.hr[t].indexOf(this.SESSION_IN_VIEW_FLAG)&&this.addSessionInView(t)});const t=new Date;let i=t.getTime();i+=h.g*h.f,t.setTime(i),this.Xn.document.cookie=`${this.RELOAD_COOKIES}=${JSON.stringify(this.hr)}; expires=${t.toUTCString()}; path=/`}}},function(t,i,e){"use strict";e.d(i,"a",function(){return l});var s=e(7),n=e(2),r=e(13),h=e(6),a=e(5),o=e(0),c=e(15),u=e(1);class l{constructor(t){this.createElement=(t,i=this.de)=>i.document.createElement(t),this.de=t,this.addPreconnect()}initHls(t){return t.cnxRenderWindow=this.de,new c(t)}addCssString(t,i=""){return Object(n.b)(t,i,this.de)}addPreconnect(){Object(n.c)(r.a.endPoints.base.video,this.de),Object(n.c)(r.a.endPoints.base.core,this.de),Object(n.c)(r.a.endPoints.base.image,this.de)}getLineHeightPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("line-height")}getFontSizePropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("font-size")}getFontWeightPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("font-weight")}getTransformPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("transform")}getPaddingTopPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("padding-top")}getPaddingBottomPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("padding-bottom")}getMarginTopPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("margin-top")}getMarginBottomPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("margin-bottom")}getMarginLeftPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("margin-left")}getMarginRightPropertyValue(t){return Object(n.l)(t,this.de).getPropertyValue("margin-right")}createElementByString(t,i=this.de){return Object(n.f)(t,i)}createDocumentFragment(t=this.de){return t.document.createDocumentFragment()}isHttpsProtocolUsed(){return Object(n.F)(this.de)}isURLSameDomainToTop(t){return Object(n.G)(t,this.de)}isDetachedFromDOM(t){let i=t;for(;i.parentNode;)if((i=i.parentNode)===this.de.document.body)return!1;return!0}querySelector(t,i=this.de){let e;try{e=i.document.querySelector(t)}catch(t){}return e}addCssStylesheetToHead(t,i,e){const s=this.de.document;s.getElementById(t.id)?Object(u.b)(i)&&i():Object(n.B)(t,s.head,this.de,i,e)}getFullscreenKeys(t){return Object(n.o)(t||this.de.document)}exitFullscreen(t,i){(i||this.de.document)[t]()}getDocumentProperty(t){return this.de.document[t]}addEventListenerOnGlobal(t,i,e,s=!1){(e?this.de.document:this.de).addEventListener(t,i,s)}removeEventListenerOnGlobal(t,i,e,s=!1){(e?this.de.document:this.de).removeEventListener(t,i,s)}trackWithImages(t,i){Object(s.m)(t,this.de,i)}getElementCoordinates(t){let{top:i,left:e}=t.getBoundingClientRect();const{width:s,height:n}=t.getBoundingClientRect(),r=this.de.pageYOffset;return{clientX:e+=this.de.pageXOffset,clientY:i+=r,width:s,height:n}}requestAnimationFrameHelper(t){return Object(n.P)(this.de,t)}cancelRequestAnimationFrame(t){return Object(n.e)(this.de,t)}getGlobalLocationProperties(){const t=this.de.location;return{hostname:t.hostname,pathname:t.pathname,href:t.href,protocol:t.protocol,host:t.host,port:t.port,search:t.search,hash:t.hash}}open(t,i){this.de.open(t,i)}getComputedTranslateX(t){let i=0;const e=Object(n.l)(t,this.de).getPropertyValue("transform").match(/^matrix\((.+)\)$/);return Object(h.h)(e)&&(i=parseFloat(e[1].split(", ")[4])),i}getBodyDimensions(){try{const t=Object(s.f)(this.de).topFrame.document.body;let{offsetWidth:i,offsetHeight:e}=t;const r=Object(n.l)(t,this.de);return{width:i+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),height:e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}}catch(t){return Object(a.a)({message:"DomUtils_error_getting_body_dimensions",exception:t.message,callStack:t.stack,level:o.ProtoLoggingLevelEnum.FATAL}),{width:0,height:0}}}getViewportWidth(){return Object(s.f)(this.de).topFrame.innerWidth}getViewportHeight(){return Object(s.f)(this.de).topFrame.innerHeight}getGlobalClosestTop(){return Object(s.f)(this.de)}stripHtmlTags(t){return Object(n.T)(t,this.de)}getComputedStyle(t,i){return Object(n.l)(t,this.de,i)}getElementById(t){return Object(n.m)(t,this.de)}getElementsByClassName(t){return Object(n.n)(t,this.de)}insertScript(t,i,e){this.de.document.getElementById(t.id)?Object(u.b)(i)&&i():Object(n.A)(t,this.de.document.head,this.de,i,null,!0,e)}destroy(){}}},function(t,i){t.exports='<cnx class="cnx-tooltip-holder cnx-color-tt-bg"> <cnx class="cnx-tooltip-text cnx-color-tt-text">TEST</cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-up-next-container cnx-hide-on-single-video"> <cnx class=cnx-up-next-box> <cnx class=cnx-up-next-box-image> <img/> </cnx> <cnx class=cnx-up-next-box-gradient></cnx> <cnx class=cnx-up-next-box-text></cnx> <cnx class=cnx-up-next-box-button> <cnx class=cnx-up-next-box-button-text>NEXT</cnx> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-context"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-captions> <cnx class=cnx-captions-container> <cnx-span class=cnx-captions-text-holder></cnx-span> </cnx> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 21H3V3h6v18zm12 0h-6V3h6v18z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-icon"></cnx> </cnx> <cnx class="cnx-progress-handle cnx-color-icon"></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-expand-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M4.6 3H10v2H5v5H3V4.6A1.58 1.58 0 0 1 4.6 3zM5 14v5h5v2H4.6A1.58 1.58 0 0 1 3 19.4V14h2zM19.4 3A1.58 1.58 0 0 1 21 4.6V10h-2V5h-5V3h5.4zM19 14h2v5.4a1.58 1.58 0 0 1-1.6 1.6H14v-2h5v-5z" fill-rule=evenodd /></svg> </cnx> <cnx class=cnx-collapse-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" fill-rule=evenodd><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-quality"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 22 22" class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M18 5.4L16.6 4 11 9.6 5.4 4 4 5.4 9.6 11 4 16.6 5.4 18l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 22 22"><path d="M11 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ad-skip-button cnx-ui-btn"> <cnx class=cnx-icon-button> <cnx class=cnx-skip-ad-text> Skip <cnx-span></cnx-span> </cnx> <cnx class=cnx-skip-ad-icon> <svg markup-inline viewBox="0 0 24 24" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z" fill-rule=evenodd /></svg> </cnx> </cnx> <cnx class=cnx-timer-loader> <svg markup-inline xmlns=http://www.w3.org/2000/svg width=36 height=36 viewBox="0 0 36 36"><circle class=cnx-svg-circle-stroke cx=18 cy=18 r=17 /></svg> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20"><path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7h-2v7z"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-pod-loading-screen-container> <img alt="Loading Pods" class=cnx-pod-loading-background /> <cnx class=cnx-pod-loading-info> <cnx class=cnx-pod-open-new-icon> </cnx> <cnx class=cnx-pod-visit-website-text> <cnx-span>Visit Advertiser website</cnx-span> </cnx> <cnx class=cnx-pod-read-more-container> <cnx-span class=cnx-pod-read-more-btn>GO TO PAGE</cnx-span> </cnx> </cnx> <cnx class=cnx-pod-loading-fallback> <cnx class=cnx-pod-loading-spinner></cnx> <cnx-span class=cnx-pod-slot-count-text></cnx-span> </cnx> </cnx>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.9 12.7c.05-.23.1-.46.1-.7s-.04-.47-.1-.7l7.05-4.1c.54.5 1.25.8 2.04.8 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.1.7L8.04 9.8C7.5 9.3 6.8 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.8 0 1.5-.3 2.04-.8l7.12 4.16a2.82 2.82 0 0 0-.08.65c0 1.6 1.3 2.92 2.92 2.92s2.92-1.3 2.92-2.92-1.3-2.92-2.92-2.92z" fill-rule="evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-icon-button> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="nonzero"><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill="#FFF"></path><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill="#FF4047"></path><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill="#FFF"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill="#FFF" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="#FFF" fill-rule="evenodd"><rect class="cnx-live-icon-svg-rectangle" transform="rotate(90 22.06 21.43)" x="20.059" y="15.929"></rect><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5"></path><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule="nonzero" opacity=".5" transform="matrix(-1 0 0 1 12.626 0)"></path></g></svg>'},function(t,i){t.exports='<cnx class="cnx-live-poster cnx-mod-active"> <cnx class=cnx-live-broadcast> <cnx class=cnx-live-icon> <svg class=cnx-live-icon-starting markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=none fill-rule=nonzero><path d="M22 15.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13z" fill=#FFF /><path d="M22 18a4 4 0 110 8 4 4 0 010-8z" fill=#FF4047 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill=#FFF /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill=#FFF transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> <svg class=cnx-live-icon-ended markup-inline viewBox="0 0 44 44" xmlns=http://www.w3.org/2000/svg><g fill=#FFF fill-rule=evenodd><rect class=cnx-live-icon-svg-rectangle transform="rotate(90 22.06 21.43)" x=20.059 y=15.929 /><path d="M37.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L31 29.206c3.515-3.989 3.583-10.465.203-14.55L31 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 /><path d="M6.598 7.541c7.955 7.972 8.036 20.846.243 28.918l-.243.248-1.77-1.765c6.985-7 7.062-18.302.233-25.397l-.233-.238 1.77-1.766zm-4.722 5.225c4.34 4.926 4.415 12.803.224 17.831l-.224.262L0 29.206c3.515-3.989 3.583-10.465.203-14.55L0 14.42l1.876-1.653z" fill-rule=nonzero opacity=.5 transform="matrix(-1 0 0 1 12.626 0)"/></g></svg> </cnx> <cnx class=cnx-live-message> <cnx-span></cnx-span> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-ui-live-badge-wrapper cnx-d-md-none"> <cnx class=cnx-ui-live-badge> <svg markup-inline xmlns=http://www.w3.org/2000/svg viewBox="0 0 37 9" fill-rule=nonzero><path d="M15.223 9V7.816H11.35V.47H9.868V9h5.356zm3.7 0V.47h-1.477V9h1.477zm6.555 0L28.55.47h-1.63l-2.168 6.674L22.608.47h-1.623L24.043 9h1.436zm10.6 0V7.816h-4.096V5.2h3.504V4.02h-3.504V1.664h4.055V.47H30.5V9h5.578zM3 2a3 3 0 1 0 0 6 3 3 0 1 0 0-6z" fill=#fff /><path d="M3 3a2 2 0 1 1 0 4 2 2 0 1 1 0-4z" fill=#ff4047 /></svg> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 22"><path d="M26,22H0V0H31.93L32,16A6,6,0,0,1,26,22Z" style="fill:#ffc800;fill-rule:evenodd"></path><path d="M12,5.29h0L16.45,16.7H14.83l-1.06-2.85H8.86l-1,2.85H6.21L10.6,5.31h0Zm5.89,11.42V5.29h3.63A5.52,5.52,0,0,1,26.65,11a5.33,5.33,0,0,1-4.93,5.7H17.89Zm1.46-1.36h2.17c1.77,0,3.7-1.49,3.7-4.35s-1.93-4.28-3.7-4.28H19.35Zm-8-8.16-2,5.24h3.86Z" style="fill-rule:evenodd"></path></svg>'},function(t,i){t.exports='<cnx class=cnx-progress-bar> <cnx class=cnx-progress-rail-container> <cnx class=cnx-progress-rail></cnx> <cnx class="cnx-progress-fill cnx-color-accent"></cnx> <cnx class=cnx-progress-follow></cnx> </cnx> <cnx class=cnx-progress-hitarea></cnx> </cnx> '},function(t,i){t.exports="<cnx class=cnx-slides-progress-bar> </cnx> "},function(t,i){t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill-rule="evenodd"><path d="M16.6 15a1.58 1.58 0 0 0-1.6 1.6V22h2v-5h5v-2h-5.4zM17 2h-2v5.4A1.58 1.58 0 0 0 16.6 9H22V7h-5V2zM7.4 15A1.58 1.58 0 0 1 9 16.6V22H7v-5H2v-2h5.4zM7 2h2v5.4A1.58 1.58 0 0 1 7.4 9H2V7h5V2z"></path></svg>'},function(t,i){t.exports='<cnx class="cnx-ui-cm cnx-ui-cm-settings"> <cnx class=cnx-cm-container></cnx> </cnx> '},function(t,i){t.exports='<cnx class="cnx-icon-button cnx-ui-btn-hoverable"> <cnx class=cnx-btn-container> <cnx class=cnx-unmute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M0 7.913v7.913h4.946l5.935 5.045V1.978L4.946 7.913zm16.815 3.957c.03-2.078-1.12-3.994-2.967-4.946v9.9c1.847-.952 2.997-2.867 2.967-4.945zM13.848 0v2.077a10.39 10.39 0 0 1 0 19.585v2.077a12.05 12.05 0 0 0 8.9-11.87A12.05 12.05 0 0 0 13.848 0z"/></svg> </cnx> <cnx class=cnx-mute-icon> <svg markup-inline class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><path d="M11 2L8.25 4.25 11 7zM0 7v9h5l6 5v-6.5L3.85 7zm17 4.5c0-1.965-1.2-3.735-3-4.5v3l2.8 2.8a3.73 3.73 0 0 0 .2-1.3zm3.4 7.45l-1.85-1.85-2.65-2.6-1.9-1.95-3-3-4.15-4.1-4.95-5L1.45 0 0 1.45 17.15 18.6 19 20.4l3.55 3.6L24 22.55zM14 23a11.83 11.83 0 0 0 3.65-1.55l-1.25-1.3c-.747.498-1.553.902-2.4 1.2V23zm9-11.5A11.77 11.77 0 0 0 14 0v1.6A10.53 10.53 0 0 1 20 16l1.45 1.45A11.99 11.99 0 0 0 23 11.5z"/></svg> </cnx> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M14.2,0A5.8,5.8,0,0,1,20,5.8v8.4A5.8,5.8,0,0,1,14.2,20H5.8A5.8,5.8,0,0,1,0,14.2V5.8A5.8,5.8,0,0,1,5.8,0ZM2,5.6v8.8A3.59,3.59,0,0,0,5.6,18h8.8A3.59,3.59,0,0,0,18,14.4V5.6A3.59,3.59,0,0,0,14.4,2H5.6A3.59,3.59,0,0,0,2,5.6Zm14.5-.8a1.3,1.3,0,1,1-1.3-1.3A1.32,1.32,0,0,1,16.5,4.8ZM15,10a5,5,0,1,1-5-5A5,5,0,0,1,15,10ZM10,7a3,3,0,0,0-3,3,3,3,0,0,0,3,3,3,3,0,0,0,3-3A3,3,0,0,0,10,7Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 12"><polygon points="0 5 16.17 5 12.59 1.41 14 0 20 6 14 12 12.59 10.59 16.17 7 0 7 0 5"></polygon></svg>'},function(t,i){t.exports='<cnx class=cnx-ui-click-to-play-btn> <cnx class=cnx-ui-click-to-play-btn-content> <svg markup-inline class="cnx-click-to-play-btn-icon cnx-color-accent" class=cnx-color-icon xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"><polygon points="5 1 5 23 23 11.9165764"></polygon></svg> <cnx class=cnx-onion-ring></cnx> <cnx-span class=cnx-click-to-play-btn-text>PLAY</cnx-span> </cnx> </cnx> '},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M5.55,9.4h0C2.85,6.8,1.15,5,1.15,3.3a2,2,0,0,1,1.9-2.1,2.28,2.28,0,0,1,2,1.4h1a2.17,2.17,0,0,1,2-1.4A2,2,0,0,1,10,3.3c0,1.7-1.8,3.4-4.4,6.1ZM8,0a3.34,3.34,0,0,0-2.5,1.2A3.13,3.13,0,0,0,3.05,0a3.09,3.09,0,0,0-3,3.3c0,2.3,1.9,4.1,4.7,6.9l.8.8.8-.8c2.8-2.8,4.7-4.7,4.7-6.9A3.16,3.16,0,0,0,8,0Z" style="fill:#a0a0a0;opacity:0.8598999977111816"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M3.85,11a.58.58,0,0,1-.6-.6V8.8H1.05A1.11,1.11,0,0,1,0,7.7V1.1A1.11,1.11,0,0,1,1.05,0h8.8A1.11,1.11,0,0,1,11,1.1V7.7a1.11,1.11,0,0,1-1.1,1.1H6.45l-2,2a.52.52,0,0,1-.4.2h-.2m.6-3.3V9.4l1.7-1.7H10V1.1H1.15V7.7h3.3M2.25,2.8h6.6V3.9H2.25V2.8m0,2.1h4.9V6H2.25Z"></path></svg>'},function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path style="opacity:0.8598999977111816;fill:#a0a0a0" d="M6.05,11a5,5,0,0,0,5-5,5,5,0,0,0-5-5,5,5,0,0,0-5,5,5,5,0,0,0,5,5m0-11a5.6,5.6,0,0,1,4.2,1.8A6.37,6.37,0,0,1,12.05,6a6,6,0,0,1-12,0,6,6,0,0,1,6-6m0,3V5.9l3,1.5-.5.6L5.05,6.3V3Z"></path></svg>'},function(t,i){t.exports=" <cnx class=cnx-button-text-label>1 min. story</cnx> "},function(t,i){t.exports='<cnx class="cnx-ui-ps-image-container cnx-ui-ps-image-background"> </cnx>'},function(t,i){t.exports="<cnx class=cnx-ui-ps-video-container></cnx> "},function(t,i,e){"use strict";var s,n=e(5),r=e(0),h=e(2),a=[],o="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(s||(s={}));var c,u=function(){function t(t,i,e,s){return this.x=t,this.y=i,this.width=e,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(i){return new t(i.x,i.y,i.width,i.height)},t}(),l=function(t){return t instanceof SVGElement&&"getBBox"in t},d=function(t){if(l(t)){var i=t.getBBox(),e=i.width,s=i.height;return!e&&!s}var n=t,r=n.offsetWidth,h=n.offsetHeight;return!(r||h||t.getClientRects().length)},f=function(t){var i,e,s=null===(e=null===(i=t)||void 0===i?void 0:i.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(s&&t instanceof s.Element)},p="undefined"!=typeof window?window:{},b=new WeakMap,v=/auto|scroll/,m=/^tb|vertical/,g=/msie|trident/i.test(p.navigator&&p.navigator.userAgent),y=function(t){return parseFloat(t||"0")},w=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=!1),Object.freeze({inlineSize:(e?i:t)||0,blockSize:(e?t:i)||0})},x=Object.freeze({devicePixelContentBoxSize:w(),borderBoxSize:w(),contentBoxSize:w(),contentRect:new u(0,0,0,0)}),S=function(t,i){if(void 0===i&&(i=!1),b.has(t)&&!i)return b.get(t);if(d(t))return b.set(t,x),x;var e=getComputedStyle(t),s=l(t)&&t.ownerSVGElement&&t.getBBox(),n=!g&&"border-box"===e.boxSizing,r=m.test(e.writingMode||""),h=!s&&v.test(e.overflowY||""),a=!s&&v.test(e.overflowX||""),o=s?0:y(e.paddingTop),c=s?0:y(e.paddingRight),f=s?0:y(e.paddingBottom),p=s?0:y(e.paddingLeft),S=s?0:y(e.borderTopWidth),O=s?0:y(e.borderRightWidth),k=s?0:y(e.borderBottomWidth),_=p+c,j=o+f,A=(s?0:y(e.borderLeftWidth))+O,I=S+k,C=a?t.offsetHeight-I-t.clientHeight:0,T=h?t.offsetWidth-A-t.clientWidth:0,P=n?_+A:0,M=n?j+I:0,E=s?s.width:y(e.width)-P-T,L=s?s.height:y(e.height)-M-C,R=E+_+T+A,B=L+j+C+I,D=Object.freeze({devicePixelContentBoxSize:w(Math.round(E*devicePixelRatio),Math.round(L*devicePixelRatio),r),borderBoxSize:w(R,B,r),contentBoxSize:w(E,L,r),contentRect:new u(p,o,E,L)});return b.set(t,D),D},O=function(t,i,e){var n=S(t,e),r=n.borderBoxSize,h=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(i){case s.DEVICE_PIXEL_CONTENT_BOX:return a;case s.BORDER_BOX:return r;default:return h}},k=function(){return function(t){var i=S(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=[i.borderBoxSize],this.contentBoxSize=[i.contentBoxSize],this.devicePixelContentBoxSize=[i.devicePixelContentBoxSize]}}(),_=function(t){if(d(t))return 1/0;for(var i=0,e=t.parentNode;e;)i+=1,e=e.parentNode;return i},j=function(){var t=1/0,i=[];a.forEach(function(e){if(0!==e.activeTargets.length){var s=[];e.activeTargets.forEach(function(i){var e=new k(i.target),n=_(i.target);s.push(e),i.lastReportedSize=O(i.target,i.observedBox),n<t&&(t=n)}),i.push(function(){e.callback.call(e.observer,s,e.observer)}),e.activeTargets.splice(0,e.activeTargets.length)}});for(var e=0,s=i;e<s.length;e++){(0,s[e])()}return t},A=function(t){a.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(e){e.isActive()&&(_(e.target)>t?i.activeTargets.push(e):i.skippedTargets.push(e))})})},I=function(){var t,i=0;for(A(i);a.some(function(t){return t.activeTargets.length>0});)i=j(),A(i);return a.some(function(t){return t.skippedTargets.length>0})&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:o}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=o),window.dispatchEvent(t)),i>0},C=[],T=function(t){if(!c){var i=0,e=document.createTextNode("");new MutationObserver(function(){return C.splice(0).forEach(function(t){return t()})}).observe(e,{characterData:!0}),c=function(){e.textContent=""+(i?i--:i++)}}C.push(t),c()},P=0,M={attributes:!0,characterData:!0,childList:!0,subtree:!0},E=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],L=function(t){return void 0===t&&(t=0),Date.now()+t},R=!1,B=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var i=this;if(void 0===t&&(t=250),!R){R=!0;var e,s=L(t);e=function(){var e=!1;try{e=I()}finally{if(R=!1,t=s-L(),!P)return;e?i.run(1e3):t>0?i.run(t):i.start()}},T(function(){requestAnimationFrame(e)})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,M)};document.body?i():p.addEventListener("DOMContentLoaded",i)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),E.forEach(function(i){return p.addEventListener(i,t.listener,!0)}))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),E.forEach(function(i){return p.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},t}()),D=function(t){!P&&t>0&&B.start(),!(P+=t)&&B.stop()},F=function(){function t(t,i){this.target=t,this.observedBox=i||s.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,i=O(this.target,this.observedBox,!0);return t=this.target,l(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=i),this.lastReportedSize.inlineSize!==i.inlineSize||this.lastReportedSize.blockSize!==i.blockSize},t}(),$=function(){return function(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}}(),U=new WeakMap,V=function(t,i){for(var e=0;e<t.length;e+=1)if(t[e].target===i)return e;return-1},N=function(){function t(){}return t.connect=function(t,i){var e=new $(t,i);U.set(t,e)},t.observe=function(t,i,e){var s=U.get(t),n=0===s.observationTargets.length;V(s.observationTargets,i)<0&&(n&&a.push(s),s.observationTargets.push(new F(i,e&&e.box)),D(1),B.schedule())},t.unobserve=function(t,i){var e=U.get(t),s=V(e.observationTargets,i),n=1===e.observationTargets.length;s>=0&&(n&&a.splice(a.indexOf(e),1),e.observationTargets.splice(s,1),D(-1))},t.disconnect=function(t){var i=this,e=U.get(t);e.observationTargets.slice().forEach(function(e){return i.unobserve(t,e.target)}),e.activeTargets.splice(0,e.activeTargets.length)},t}(),H=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");N.connect(this,t)}return t.prototype.observe=function(t,i){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");N.observe(this,t,i)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!f(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");N.unobserve(this,t)},t.prototype.disconnect=function(){N.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();e.d(i,"a",function(){return q});class q{constructor(t){this.pr=[],this.br=(t,i)=>{t.forEach(t=>{this.vr(t.target).forEach(t=>{t&&(Object(h.i)(t.element),t.callback(t.element))})})};try{const i=t.ResizeObserver||H;this.mr=new i(this.br)}catch(t){Object(n.a)({message:"ResizeObserver_constructor",callStack:t.stack,exception:t.message,level:r.ProtoLoggingLevelEnum.FATAL})}}on(t,i){this.gr(t,i)||(this.pr.push({element:t,callback:i}),this.mr.observe(t))}off(t,i){const e=this.gr(t,i);if(!e)return;this.mr.unobserve(e.element);const s=this.pr.indexOf(e);s>=0&&this.pr.splice(s,1)}destroy(){if(this.pr)for(;this.pr.length>0;)this.pr.pop();this.mr.disconnect()}vr(t){return this.pr.filter(i=>i.element===t)}gr(t,i){return this.pr.find(e=>e.element===t&&e.callback===i)}}},function(t,i,e){"use strict";var s,n,r=e(27),h=e(12),a=e(52);!function(t){t.Minimized="minimized",t.Collapsed="collapsed",t.Normal="normal",t.Expanded="expanded",t.Fullscreen="fullscreen"}(s||(s={})),function(t){t.StateChanged="stateChanged"}(n||(n={}));class o{constructor(t){this.mediator=t}computeState(t){const i=this.yr(t);this.wr&&this.wr.name===i||this.mediator.publish(this,n.StateChanged,{payload:{state:i}}),this.wr={dimensions:t,name:i},this.xr||i!==s.Normal||(this.xr=Object.assign({},this.wr))}setPlayerState(t){this.wr&&this.wr.name===t||this.mediator.publish(this,n.StateChanged,{payload:{state:t}}),this.wr={name:t},this.xr||t!==s.Normal||(this.xr=Object.assign({},this.wr))}get currentState(){return this.wr&&this.wr.name}yr(t){if(!this.xr)return s.Normal;const{width:i,height:e}=this.xr.dimensions,n=i*e,r=t.width*t.height;switch(!0){case n<r:return s.Expanded;case n>r:return s.Collapsed;default:return s.Normal}}}var c=e(19),u=e(5),l=e(0);e.d(i,"a",function(){return d});class d extends c.a{constructor(t,i,e){super(),this.Sr=t,this.Or=i,this.kr=new o(this),this._r=!1,this.jr={[h.a.AdError]:()=>this.Ar(),[h.a.PlayError]:()=>this.Ir(),[h.a.RenderError]:()=>this.Cr(),[h.a.AdImpression]:()=>this.Tr(),[h.a.AdComplete]:()=>this.Pr(),[h.a.AdVideoStart]:({adVideoStartMetadata:t})=>this.Mr(t),[h.a.AdVideoFirstQuartile]:()=>this.Er(),[h.a.AdVideoMidpoint]:()=>this.Lr(),[h.a.AdVideoThirdQuartile]:()=>this.Rr(),[h.a.AdVideoComplete]:()=>this.Br(),[h.a.VolumeChange]:({volume:t})=>this.Dr(t),[h.a.AdPause]:()=>this.Fr(),[h.a.AdPlay]:()=>this.$r(),[h.a.AdSkipped]:()=>this.Ur(),[h.a.AdClickThru]:()=>this.Vr(),[h.a.AdInteraction]:()=>this.Nr(),[h.a.AdLoaded]:({adLoadedMetadata:t})=>this.Hr(t),[h.a.AdStateChange]:({adStateChangedMetadata:t})=>this.qr(t),[h.a.PlayerResized]:({playerDimensionsMetadata:t})=>this.zr(t),[h.a.OnEnterFullscreen]:()=>this.Wr(),[h.a.PlayerCollapsed]:()=>this.Gr(),[h.a.PlayerExpanded]:()=>this.Jr(),[h.a.Destroy]:()=>this.unsubscribeAll(this.kr)},this.Qr=t=>{try{const i=this.jr[t.name];if(!i)return;i(t.metadata)}catch(t){Object(u.a)({message:"SessionClientWrapper_omsdk__onEventStorageEvent",exception:t.message,callStack:t.callStack,level:l.ProtoLoggingLevelEnum.WARNING})}};try{const{AdSession:t,AdEvents:i,MediaEvents:s}=this.Sr,r=this.Xr(e);this.Yr=new t(r),this.Kr=new i(this.Yr),this.Zr=new s(this.Yr),this.Or.subscribe(this.Qr),this.subscribe(n.StateChanged,this.kr,({payload:{state:t}})=>{this.th(t)}),this.ih()}catch(t){Object(u.a)({message:"SessionClientWrapper_omsdk_classes_init_err",exception:t.message,callStack:t.callStack,level:l.ProtoLoggingLevelEnum.WARNING})}}Ar(){this.Yr.error(r.d.Video,h.a.AdError)}Ir(){this.Yr.error(r.d.Video,h.a.PlayError)}Cr(){this.Yr.error(r.d.Generic,h.a.RenderError)}Xr(t){const{Partner:i,Context:e}=this.Sr;return new e(new i(r.i,t))}Tr(){this._r=!0,this.Kr.impressionOccurred();const t=this.kr.currentState;t!==s.Normal&&this.th(t)}Pr(){this._r=!1}Mr(t){const{duration:i,mediaPlayerVolume:e}=t;this.Zr.start(i,e)}Er(){this.Zr.firstQuartile()}Lr(){this.Zr.midpoint()}Rr(){this.Zr.thirdQuartile()}Br(){this.Zr.complete()}Dr(t){this._r&&this.Zr.volumeChange(t)}Fr(){this.Zr.pause()}$r(){this.Zr.resume()}Ur(){this.Zr.skipped()}Vr(){this.Zr.adUserInteraction(r.g.Click)}Nr(){this.Zr.adUserInteraction(r.g.InvitationAccept)}Hr(t){const{isSkippable:i,skipOffset:e,isAutoPlay:s}=t,{VastProperties:n}=this.Sr,r=new n(i,e,s,this.eh);this.Kr.loaded(r)}qr({state:t}){this.eh=r.h[a.a[t]]}th(t){t&&this.Zr.playerStateChange(t)}sh(t){this.kr.computeState(t)}nh(t){this.kr.setPlayerState(t)}zr(t){this.sh(t)}Wr(){this.nh(s.Fullscreen)}Gr(){this.nh(s.Minimized)}Jr(){this.nh(s.Normal)}ih(){this.Yr.registerSessionObserver(t=>{t.type===r.b.SessionStart?this.rh(t):t.type===r.b.SessionError&&Object(u.a)({message:"SessionClientWrapper_omsdk_session_error",exception:t.type,callStack:JSON.stringify(t),level:l.ProtoLoggingLevelEnum.WARNING,throttle:1,sendMaxLog:!1})})}rh(t){t.data.creativeType===r.c.DefinedByJavascript&&this.Yr.setCreativeType(r.c.Video),t.data.impressionType===r.f.DefinedByJavascript&&this.Yr.setImpressionType(r.f.BeginToRender)}}},function(t,i,e){"use strict";var s,n=e(2);class r{constructor(t){this.hh=[],this.ah=t=>{this.hh.push(t)},this.oh=t.subscribe(this.ah)}get cachedEvents(){return this.hh}destroy(){this.hh=null,this.oh()}}!function(t){t.AdobeAnalytics="AdobeAnalytics",t.MoatAnalytics="MoatAnalytics"}(s||(s={}));const h={AdobeAnalytics:{id:"cnx-adobe-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.external.measurement.js"},MoatAnalytics:{id:"cnx-moat-analytics-plugin",src:"//cds.connatix.com/p/plugins/connatix.moat.plugin.js"}};var a=e(1),o=e(5),c=e(0),u=e(6),l=e(32),d=e(7),f=e(17),p=e(18);e.d(i,"a",function(){return b});class b{constructor(t,i,e,s,n){this.Or=i,this.uh=e,this.lh=s,this.dh=n,this.fh=[],this.ph=t=>{try{this.bh(t);const i=this.fh.find(i=>i.name===t.type);let e;if(i&&!i.started){i.started=!0;const t=i.eventsCacheHandler;e=t.cachedEvents,t.destroy()}const{adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r}=this.lh.apiConfig.settings.plugins,{secondLevelDomain:h,playerId:a}=this.lh,u={cachedEvents:e,adobeAnalyticsSettings:s,moatAnalyticsSettings:n,_debugLogging:r,secondLevelDomain:h,playerId:a,pageName:this.vh,pageUrl:this.ze,version:p.a.version,delegateHandlers:this.uh,playerContainer:this.dh,playerWindow:window};t.getInstance().start(this.Or,u)}catch(t){Object(o.a)({callStack:t.stack,exception:t.message,level:c.ProtoLoggingLevelEnum.FATAL,message:"PluginsHandler_initPlugin"})}};const r=Object(d.f)(t);this.de=r.topFrame,this.ze=Object(d.e)(r,this.de),this.ze=Object(f.d)(this.ze),this.vh=Object(f.a)(this.ze)}start(){this.mh(),this.gh(),this.de.cnxPlugins.pluginsHandlers.push(this.ph)}mh(){let t=[];Array.isArray(this.de.cnxPlugins)&&this.de.cnxPlugins.length>0&&(t=this.de.cnxPlugins).forEach(t=>this.ph(t)),Object(a.f)(this.de.cnxPlugins)||this.yh(t)}gh(){const t=this.wh();Object(u.h)(t)&&this.xh(t)}Sh(t){const i=this.de.cnxPlugins.cachedPlugins;if(Object(u.h)(i))return i.find(i=>i.type===t)}bh(t){this.Sh(t.type)||this.de.cnxPlugins.cachedPlugins.push(t)}yh(t){this.de.cnxPlugins={cachedPlugins:t,pluginsHandlers:[],push:function(t){this.pluginsHandlers.forEach(i=>{i(t)})}}}xh(t){t.forEach(t=>{this.Sh(t)||this.fh.push({name:t,started:!1,eventsCacheHandler:new r(this.Or)})}),this.fh.forEach(({name:t})=>this.Oh(t))}kh(t){return Object(l.a)(t).every(t=>Object(a.h)(t))}wh(){const t=[];return this.lh.apiConfig.settings.plugins.adobeAnalyticsSettings&&this.kh(this.lh.apiConfig.settings.plugins.adobeAnalyticsSettings)&&t.push(s.AdobeAnalytics),this.lh.moatTrackingEnabled&&t.push(s.MoatAnalytics),t}Oh(t){const i=h[t];this.de.document.getElementById(i.id)||Object(n.A)(i,this.de.document.head,this.de,null,null,!0,"PluginsHandler_unable_to_insert_plugin_script")}}},function(t,i,e){"use strict";var s,n=e(1),r=e(0);!function(t){t[t.Desktop=2]="Desktop",t[t.SmartTV=3]="SmartTV",t[t.Smartphone=4]="Smartphone",t[t.Tablet=5]="Tablet",t[t.GameConsole=6]="GameConsole",t[t.Unrecognized=7]="Unrecognized"}(s||(s={}));const h={[r.ProtoDeviceType.Desktop]:s.Desktop,[r.ProtoDeviceType.Smartphone]:s.Smartphone,[r.ProtoDeviceType.Tablet]:s.Tablet,[r.ProtoDeviceType.GameConsole]:s.GameConsole,[r.ProtoDeviceType.SmartTV]:s.SmartTV,[r.ProtoDeviceType.WearableComputer]:s.Unrecognized,[r.ProtoDeviceType.PDA]:s.Unrecognized,[r.ProtoDeviceType.Unrecognized]:s.Unrecognized},a="https://s.srvsynd.com/2/234175/analytics.js?dt=2341751597675869250012&di=[DOMAIN]&ui=[FS_USER_ID]&md=[FS_MEDIA_TYPE]&ap=[APP_BUNDLE]&sr=[CNX_SUPPLIER_ID]&pp=[PUBLISHER_ID]&ti=[SESSION_ID]&de=[FS_DEVICE_TYPE]&to=[MGTO]&pv=[MGID]",o="cnx_fraud_sensor",c="00000000-0000-0000-0000-000000000000",u=2;e.d(i,"a",function(){return l});class l{constructor(t,i,e,s){this._h=t,this.jh=i,this.bn=e,this.Ah(s)}addFraudSensorScript(){if(this.jh.getElementById(o))return;const t={id:o,src:this._h.setupMacros(a)};this.jh.insertScript(t,null,"FraudSensor_script_error")}Ah(t){t=Object(n.h)(t)?t:c;const{lookupId:i,lookupResponseCode:e,publisherAdsTxt:s}=this.bn,r=h[this.bn.deviceType];this._h.setPublisherId(s),this._h.setUserId(t),this._h.setFraudSensorMacros({lookupId:i,lookupResponseCode:e,deviceType:r,mediaType:u})}}},function(t,i,e){"use strict";var s=e(25),n=e(0),r=e(18),h=e(13),a=e(11);class o{constructor(){this.Ih=null,this.Ch=0}Th(){if(null===this.Ih)return;const t=(new Date).getTime();this.Ch=t-this.Ih}startCountingTime(){this.Ih=(new Date).getTime()}stopCountingTime(){this.Th(),this.Ih=null}fetchTime(t){this.Th();const i=Math.round(this.Ch/a.f);return this.Ch=0,null!==this.Ih&&this.startCountingTime(),i>t?t:i}}var c=e(19),u=e(1),l=e(36),d=e(34),f=e(7),p=e(6),b=e(31);e(44);e.d(i,"a",function(){return m});const v=500;class m extends c.a{constructor({userId:t,playerId:i,geoLocation:e,browser:s,sessionId:n,pageUrl:h,bundleId:a,Ph:c,userManagerService:u,customParam1:d,customParam2:b,customParam3:v,customParam4:m,customParam5:g,abTestId:y,explorationMode:w}){super(),this.hasGdprConsentPayload=!1,this.Mh={},this.Eh={},this.Lh=!1,this.Rh=!1,this.Bh=!1,this.Dh=!1,this.Fh=[],this.$h=[],this.Uh=[],this.Vh=5e3,this.Nh=!1,this.Ph=!1,this.Hh=[{delay:7,timesRepeatDelay:1},{delay:8,timesRepeatDelay:1},{delay:15,timesRepeatDelay:3},{delay:30,timesRepeatDelay:2},{delay:60,timesRepeatDelay:1},{delay:120,timesRepeatDelay:1},{delay:300,timesRepeatDelay:8},{delay:600,timesRepeatDelay:13},{delay:1800}],this.qh=0,this.zh=[];Object(p.g)(i,["47286b3d-90c5-4634-ac87-0061769d15a8","2a9c6007-6213-4187-9b0d-1a6e9d7826f0","dac6e2fc-472a-46e6-8a6b-b5bea57a50bc","112cdb88-91ea-452d-990c-03a7d3118d2c","075127fa-fec9-4ee7-9a4c-bfb4478a4412","2febda63-6ec9-4951-9c07-5939376b8226","55ca7ad7-f311-4854-b29a-a2d590760493","62bbbcda-024e-4769-968a-db84830f65cc","648d8d4d-fa41-496c-8415-26f3ad2d1989","6fdffbf5-b899-44ac-96a6-4eab50497b5b","b6094ff6-54a0-4ddd-b799-66193f8346c7","c81bb1f8-de80-428b-ae42-1ce0e75d3998","ddbadb2c-9e78-442a-b757-a49113a791ed","20d71b12-41ce-45db-8135-1a3cd111b25d","13e4ee65-6bed-40e6-8e41-4ef9087c294b","62d76d13-cd32-4021-a243-98b2444cd14d","b1c78103-4bb7-47ac-9cfe-dcd9b603e8a2","77a7ef56-c608-456d-8ff9-a382d139ff95","5d8eeea7-4ee0-4ad7-9023-97fbc8d97fa7","ed379095-5f46-4c1c-917d-ad063d84eaf1","0527ea2b-cb60-408e-85c1-e500bee128c3","148a0193-55d6-47a1-8a33-2c4ba9c97b5e","27937f13-f008-457b-938c-87c9fe447de8","4c2b6243-5715-4651-a27e-f6052b61af80","10efae62-af17-4d47-a65e-baabc2b60496","65d7cfb4-70a5-480a-95a7-25a713d61695","6e3ef6a1-2ccf-48b3-973c-55244487dc38","13426e00-211b-4c70-981e-d71a622543cf","728b020d-aa32-4009-ad0d-9c1b6b57b3c9","77e6bf0d-befe-4364-9f95-df37d478f297","19e14bfd-d5ef-4f82-8c9d-ea19512d0793","8c175c10-202a-4275-9e10-5ab9b216a61d","9429315c-a644-4fbf-938f-30cd23f2b098","a1bf91f8-98cb-4642-a2ec-2124782bf273","3025741e-c645-46ee-93db-c6b1c5cdb842","c32f1fb1-68d7-41cc-9a33-5f541d5b0cfd","c92ebcd4-b4c1-449e-809a-6744a0cd21d1","d0ad8360-284d-47d3-861d-6be5b09619e1","9b3b0ce6-cae5-43e0-b669-023c76e9127f","bbb6ab44-3b47-44d8-990c-642de4bb12ba","eeb97179-3486-4ca8-968c-c18f49e3be4a","ffc13c6a-6d6b-48dc-9965-d5a5adfea0f1","a8ec4044-50c7-46b1-8e8a-4da98ff95aed","ce2e36d0-8e66-4433-bb3c-47e78ad6f250","079b7e9c-6d8f-4772-b5d7-579c6f5f873b","04f884af-47ec-4754-a913-b38823f701a5","2e7b1501-840a-46f0-a3ae-015008b666d8","2ea0b3ba-66c9-46f4-a4a3-300f1bb36a93","3e1fcf24-0e7a-4aeb-9dce-a98d552dd7c7","5156a44c-a3d9-40ad-a592-b6ffb8019b2a","6b55d261-63c7-4349-804f-3d9bbd7aac85","8d95a3a5-ffa0-4932-8208-e06a8f659b55","a49d8dbb-b91f-41a3-b5a8-8a5b053af776","a585524a-2784-4b2d-924b-d872994cb7a8","225f96d6-6d58-483b-8856-ddffd61bac40","ad5efc62-db13-40f2-a76e-df9b90a2687b","08b46451-1849-433c-9019-85b2aeca87d1","bb5ad3b4-8fcd-4cb8-af70-383839db3712","e68c7376-e6c7-44ff-ad65-775691372f19","f5a3920b-15fc-4b52-8586-16091b9bedde","0c83603a-5d0c-4b62-a613-5f2db36510d3","0f3c7056-05d4-46fe-824c-32df48115369","81329826-a1f3-4f0b-86e1-2c1fb58cac85","a7b4eaad-8dea-41d5-8bd0-c8f13cd84296","c1282781-f75a-46b7-b774-5695e0a74c3d","d47819ae-be18-4054-8ffd-dc86eb6fdb5a"])?this.Mh.trackAllRequests=!0:this.Mh.trackAllRequests=1===Object(f.l)([99,1]),this.Wh=u,this.Mh.userId=t,this.Mh.playerId=i,this.Mh.geo=e,this.Mh.browser=s,this.Mh.version=r.a.version,this.Mh.sessionId=n,this.Mh.clientAb0=l.a.clientAb0,this.Mh.clientAb1=l.a.clientAb1,this.Mh.serverAb0=l.a.serverAb0,this.Mh.serverAb1=l.a.serverAb1,this.Mh.pageUrl=h,this.Mh.bundleId=a,this.Mh.customParam1=d,this.Mh.customParam2=b,this.Mh.customParam3=v,this.Mh.customParam4=m,this.Mh.customParam5=g,this.Mh.abTestId=y,this.Gh=new o,this.Jh=new o,this.Qh=w}Xh(t,i=n.ProtoTrackingRequest,e,r=!0){return this.Mh.pageInFocus=b.a.pageFocus,s.a.sendProtoBeaconRequest({endpoint:t,ProtoRequest:i,requestData:Object.assign({trackingRequestMeta:r?this.Mh:void 0},e),logError:!1})}Yh(t,i=n.ProtoTrackingRequest,e,h=!0){this.Mh.pageInFocus=b.a.pageFocus;const a=s.a.sendProtoRequest({endpoint:t,ProtoRequest:i,ProtoResponse:n.ProtoTrackingResponse,requestData:Object.assign({trackingRequestMeta:h?this.Mh:void 0},e),queryParams:{[d.b]:r.a.version},withCredentials:!0,logError:!0});return a.then(t=>{const i=t.platformCappedLineItemIdList;Object(p.h)(i)&&this.zh.forEach(t=>{t.setPlatformCappedLineItemIdList(i)}),Object(u.e)(t.impressionRevenue)&&this.Kh&&this.Kh.notifyImpressionRevenue(t.impressionRevenue)}).catch(t=>{}),a}addPlatformCappedLineItemSubscriber(t){this.zh.push(t)}removePlatformCappedLineItemSubscriber(t){const i=this.zh.indexOf(t);i>=0&&this.zh.splice(i,1)}setImpressionRevenueSubscriber(t){this.Kh=t}unsubscribeToImpressionRevenue(t){this.Kh!==t&&(this.Kh=void 0)}Zh(t,i,e=n.ProtoMediaTrackingRequest){const s=Object.assign({},i);Object(u.h)(this.Eh.mediaId)&&(s.mediaGuid=this.Eh.mediaId),this.Yh(t,e,s)}ta(){this.Nh||(this.Nh=!0,this.Yh(h.a.endPoints.tracking.playerStart,n.ProtoTrackingRequest))}ia(t,i,e=n.ProtoMediaTrackingRequest){return this.Yh(t,e,Object.assign({mediaGuid:this.Eh.mediaId},i))}ea(t){this.Zh(h.a.endPoints.tracking.media_quartile,{baseMeta:this.Eh,mediaId:this.Eh.mediaId,quartile:t})}sa(){this.na(this.$h,this.Fh,this.Uh),this.$h=[],this.Fh=[],this.Uh=[]}na(t,i,e){if(0===t.length&&0===i.length&&0===e.length)return;e.forEach(t=>{t.error&&t.error.length>0&&(t.error=t.error.substring(0,v))});const s={mediaGuid:this.Eh.mediaId,prebids:t,bids:i,postBids:e,logEveryting:this.Ph,hasGdprConsentPayload:this.hasGdprConsentPayload,gdprConsentMode:this.Wh.gdprConsentMode,useExploration:this.Qh};this.Yh(h.a.endPoints.tracking.bids,n.ProtoBidTrackingsRequest,s)}ra(t){this.Yh(h.a.endPoints.tracking.ad_click,n.ProtoAdClickTrackingRequest,Object.assign({mediaGuid:this.Eh.mediaId},t))}ha(t){this.Xh(h.a.endPoints.tracking.heavy_ad_intervention,n.ProtoHeavyAdTrackingRequest,t)}aa(){const t=this.Hh[this.qh];clearTimeout(this.oa),this.oa=setTimeout(()=>{this.ca(t.delay),Object(u.e)(t.timesRepeatDelay)&&t.timesRepeatDelay--,0===t.timesRepeatDelay&&this.qh++,this.aa()},1e3*t.delay)}ca(t){this.Yh(h.a.endPoints.tracking.session_time,n.ProtoSessionTimeTrackingRequest,{trackingRequestMeta:this.Mh,sessionTime:t,timePlayed:this.Gh.fetchTime(t),timePlayedInView:this.Jh.fetchTime(t)})}ua(t){const{sessionId:i}=this.Mh;this.Yh(h.a.endPoints.tracking.adOpportunity,n.ProtoAdOpportunityRequest,{sessionId:i,adBreak:t.adBreakType})}setNewMedia(t){this.Eh=t}updateMediaMetadata(t){this.Eh=t}setImplementationTypeOnMeta(t){this.Mh.implementationType=t}setMediaStart(){this.ea(n.ProtoQuartilesEnum.Start)}setContentStart(){this.ta()}setSessionPlayback(t){this.Bh!==t&&(this.Bh=t,this.Dh&&this.Bh&&this.Jh.startCountingTime(),this.Bh?this.Gh.startCountingTime():(this.Gh.stopCountingTime(),this.Jh.stopCountingTime()))}setSessionViewability(t){this.Dh!==t&&(this.Dh=t,this.Dh&&this.Bh?this.Jh.startCountingTime():this.Dh||this.Jh.stopCountingTime())}trackSessionRendered(t){this.Lh||(this.Yh(h.a.endPoints.tracking.session_rendered,n.ProtoTrackingRequest,{hasAdBlocker:t}),this.Lh=!0,this.aa())}trackSessionViewability(){!this.Rh&&this.Nh&&(this.Yh(h.a.endPoints.tracking.session_view),this.Rh=!0)}trackMediaQuartile(t){this.ea(t)}trackMediaClick(t=n.ProtoMediaClickTypeEnum.Click){const i={type:t,clickUrl:t===n.ProtoMediaClickTypeEnum.UrlClick?this.Eh.clickUrl:void 0,slideTitle:this.Eh.slideTitle,slideNumber:this.Eh.slideNumber,slideMediaType:this.Eh.slideMediaType};this.Zh(h.a.endPoints.tracking.media_click,i,n.ProtoMediaClickTrackingRequest)}setAdStart(){this.ta()}startBidRequests(){this.la=setInterval(()=>{this.sa()},this.Vh)}addPrebid(t){this.$h.push(t)}addPostBid(t){Object(u.g)(t.error)||(t.error=JSON.stringify(t.error)),this.Uh.push(t)}addBid(t){this.Fh.push(t)}trackAuctionInfoForBid(t){this.Yh(h.a.endPoints.tracking.auctionInformation,n.ProtoAuctionInfoRequest,t)}trackVideoAdImpression(t){return this.ia(h.a.endPoints.tracking.ad_impression,t,n.ProtoVideoAdImpressionRequest)}trackVideoAdImpressionViewable(t){return this.ia(h.a.endPoints.tracking.ad_impression_viewable,t,n.ProtoVideoAdImpressionViewableRequest)}trackVideoAdQuartile(t){this.Zh(h.a.endPoints.tracking.ad_quartile,t,n.ProtoVideoAdQuartilesRequest)}trackAdClick(t){this.ra(t)}trackAdOpportunity(t){this.ua(t)}trackSessionAdBlocker(t){this.Yh(h.a.endPoints.tracking.sessionAdBlocker,n.ProtoSessionAdBlockerRequest,{trackingRequestMeta:this.Mh,adBlockDetectionType:t,dynamicElkFieldsValues:{0:"12"}})}getMetadataModel(){return this.Mh}updateMetadataModel(t){this.Mh=Object.assign(Object.assign({},this.Mh),t)}trackHeavyAdIntervention(t){this.ha(t)}destroy(){clearInterval(this.oa),clearInterval(this.la)}}},function(t,i,e){"use strict";var s=e(3),n=e(8),r=e(20),h=e(6),a=e(2);const o={MAIN:0,AUXILIARY:1,SECONDARY:2,FOURTH:3,FIFTH:4};function c(t){return t.button===o.MAIN}var u=e(14),l=e(1);e.d(i,"a",function(){return b});const d=25,f=250,p=30;class b{constructor(t,i,e){this.da=t,this.Yn=i,this.mediator=null,this.fa=p,this.pa=f,this.ba=d,this.va=[],this.ma={},this.ga=0,this.ya=0,this.wa=!0,this.xa=null,this.Sa=!1,this.Oa=!1,this.ka=!1,this._a=!1,this.ja=0,this.Aa=0,this.Ia=null,this.Ca=null,this.Ta=null,this.Pa=!0,this.Ma=t=>{this.Yn?(t.element.addEventListener("touchstart",this.Ea),t.element.addEventListener("touchmove",this.La),t.element.addEventListener("touchend",this.Ra),t.element.addEventListener("touchcancel",this.Ba)):(t.element.addEventListener("mousedown",this.Da),t.element.addEventListener("mouseup",this.Fa))},this.$a=t=>{this.Yn?(t.element.removeEventListener("touchstart",this.Ea),t.element.removeEventListener("touchmove",this.La),t.element.removeEventListener("touchend",this.Ra),t.element.removeEventListener("touchcancel",this.Ba)):(t.element.removeEventListener("mousedown",this.Da),t.element.removeEventListener("mouseup",this.Fa))},this.Ea=t=>{t.stopPropagation();const i=this.Ua(t);this.Ta=i,this.Oa=!1,this.Va(i,r.c.Hold)&&this.Na(t);const e=this.Ha(t);this.ya=e.eventX,this.ga=e.eventY,this.qa(t,i,r.b.InteractionStart),this.wa=!0},this.La=t=>{t.stopPropagation();const i=this.Ua(t),e=this.Ha(t);if(this.wa&&(Math.abs(e.deltaXFromStart)>this.ba||Math.abs(e.deltaYFromStart)>this.ba)&&(this.wa=!1),this.Sa||this.Va(i,r.c.Swipe)){if(null===this.Ia&&this.za(i,e),this.Ia===r.a.Y)return;t.preventDefault(),null===this.Ca&&(this.Ca=Object(a.P)(this.da,()=>{this.Ca=null,this.Wa(e.deltaXFromStart),i.mediator.publish(i.context,n.a[n.a.SwipeMove],{payload:e.deltaXFromStart})}))}},this.Ra=t=>{const i=this.Ua(t);if(this.Ta===i){const e=this.Ha(t);t.cancelable&&this.Va(i,r.c.Hold)&&Math.abs(e.deltaXFromStart)<this.ba&&Math.abs(e.deltaYFromStart)<this.ba&&t.preventDefault(),this.Ga(t,i,e),this.Ja(e)===r.a.Y&&Math.abs(e.deltaYFromStart)>=this.ba?this.Pa&&i.mediator.publish(i.context,n.a[n.a.Scroll]):!this.wa||this.ka||this.Oa||i.mediator.publish(i.context,n.a[n.a.Click])}this.Ta=null},this.Ba=t=>{const i=this.Ua(t);this.Ga(t,i),this.Ta=null},this.Da=t=>{if(!c(t))return void this.Qa(r.b.InteractionStart,t);const i=this.Ua(t);this.Ta=i,t.stopPropagation(),t.preventDefault(),this.Va(i,r.c.Hold)&&this.Na(t),this.qa(t,i,r.b.InteractionStart)},this.Fa=t=>{if(!c(t)||!this.Ta)return this.Qa(r.b.Interaction,t),void this.Qa(r.b.InteractionEnd,t);const i=this.Ua(t);t.stopPropagation(),t.preventDefault(),this.qa(t,this.Ta,r.b.Interaction),this.qa(t,this.Ta,r.b.InteractionEnd),(this.Sa||this.Va(i,r.c.Hold))&&this.Xa(t),this.Ta===i&&(this.qa(t,i,r.b.Click),i.mediator.publish(i.context,n.a[n.a.Click])),this.Ta=null},this.Ya=t=>{if(!c(t))return this.Qa(r.b.Interaction,t),void this.Qa(r.b.InteractionEnd,t);this.Ta=null},this.Ka=t=>{if(!c(t)||!this.Ta)return this.Qa(r.b.Interaction,t),void this.Qa(r.b.InteractionEnd,t);this.qa(t,this.Ta,r.b.Interaction),this.qa(t,this.Ta,r.b.InteractionEnd),(this.Sa||this.Va(this.Ta,r.c.Hold))&&this.Xa(t),this.Ta=null};const{leftTapSizeThreshold:s,holdTriggerDuration:h,scrollThreshold:o}=Object.assign({},e);this.fa=s||this.fa,this.pa=h||this.pa,this.ba=o||this.ba,this.da.document.addEventListener("mousedown",this.Ya),this.da.document.addEventListener("mouseup",this.Ka)}register(t,i,e,s={},n=[]){const r={element:t,mediator:i,context:e,callbacks:s||{},allowedSpecialInteractions:n,disabledSpecialInteractions:[]};this.va.push(r),this.Ma(r)}unregister(t){const i=this.va.find(i=>i.element===t);i&&(this.va=this.va.filter(i=>i.element!==t),this.$a(i))}unregisterAll(t){const i=this.va.filter(i=>i.mediator===t);i.forEach(this.$a),this.va=Object(h.a)(this.va,i)}addGlobalActions(t,i){Object.keys(Object.assign({},i)).forEach(e=>{this.ma[e]=this.ma[e]||[],this.ma[e].push({initiator:t,action:i[e]})})}removeGlobalActions(t){Object.keys(this.ma).forEach(i=>{this.ma[i].some(i=>i.initiator===t)&&(this.ma[i]=this.ma[i].filter(i=>i.initiator!==t))})}disableSpecialInteractions(t){const i=this.Za(t);i.disabledSpecialInteractions=Object(h.n)(i.allowedSpecialInteractions)}enableSpecialInteractions(t){this.Za(t).disabledSpecialInteractions=[]}getNonInterruptibleInteractions(){return[n.a.HoldStart,n.a.HoldEnd,n.a.SwipeMove,n.a.SwipeEnd,n.a.Scroll]}disableScrollEvent(){this.Pa=!1}enableScrollEvent(){this.Pa=!0}destroy(){clearTimeout(this.xa),this.va.forEach(this.$a),this.da.document.removeEventListener("mousedown",this.Ya),this.da.document.removeEventListener("mouseup",this.Ka)}to(t){const i=this.Ua(t),e=i.element.getBoundingClientRect(),s=this.io(t),n=e.width,r=Object(u.g)(0,n,0,100,s);this.eo(i,this.fa,r)}eo(t,i,e){e<i?t.mediator.publish(t.context,n.a[n.a.TapLeft]):t.mediator.publish(t.context,n.a[n.a.TapRight])}Na(t){clearTimeout(this.xa),this.Sa=!1,this.ka=!1;const i=this.Ua(t);Object(a.a)(i.element,s.h.OnHold),this.xa=setTimeout(()=>{this.Sa=!0,this.wa&&(this.ka=!0,i.mediator.publish(i.context,n.a[n.a.HoldStart]))},this.pa)}Xa(t){clearTimeout(this.xa);const i=this.Ua(t);Object(a.L)(i.element,s.h.OnHold),this.Sa?(this.Sa=!1,this.ka&&(this.ka=!1,i.mediator.publish(i.context,n.a[n.a.HoldEnd]))):(this.Oa=!0,this.to(t))}Ga(t,i,e){e=e||this.Ha(t),t.stopPropagation(),this.qa(t,i,r.b.Interaction),this.qa(t,i,r.b.InteractionEnd),(this.Sa||this._a||this.wa&&this.Va(i,r.c.Hold))&&this.Xa(t),(this._a||this.Va(i,r.c.Swipe))&&this.so(i,e)}za(t,i){this.Ia=this.Ja(i),this.Ia===r.a.X&&(this._a=!0,this.Sa||(clearTimeout(this.xa),this.xa=null,this.Sa=!0,t.mediator.publish(t.context,n.a[n.a.HoldStart])))}so(t,i){if(this._a){const e=this.no(i);t.mediator.publish(t.context,n.a[n.a.SwipeEnd],{payload:e})}Object(a.e)(this.da,this.Ca),this.Ca=null,this._a=!1,this.ya=null,this.ga=null,this.Ia=null,this.ja=0,this.Aa=0}Wa(t){this.Aa<this.ba?this.Aa++:(this.ja=t,this.Aa=0)}Ja(t){return Math.abs(t.deltaXFromStart)>=Math.abs(t.deltaYFromStart)?r.a.X:r.a.Y}no(t){return t.deltaXFromStart-this.ja<0?r.d.Left:r.d.Right}Ha(t){const i=t.changedTouches[0];return{deltaXFromStart:i.clientX-this.ya,deltaYFromStart:i.clientY-this.ga,eventX:i.clientX,eventY:i.clientY}}Ua(t){return this.Ta||this.Za(t.currentTarget)}Za(t){return this.va.find(i=>i.element===t)}io(t){const i=this.Ua(t);if(this.Yn){return t.changedTouches[0].clientX-i.element.getBoundingClientRect().left}return t.offsetX}Va(t,i){return t.allowedSpecialInteractions.includes(i)&&!t.disabledSpecialInteractions.includes(i)}qa(t,i,e){const s=i.callbacks[e];Object(l.b)(s)&&s(t),this.Qa(e,t)}Qa(t,i){var e;null===(e=this.ma[t])||void 0===e||e.forEach(t=>{t.action(i)})}}},function(t,i,e){"use strict";var s=i;function n(){s.Reader.ie(s.BufferReader),s.util.ie()}s.build="minimal",s.Writer=e(68),s.BufferWriter=e(144),s.Reader=e(70),s.BufferReader=e(145),s.util=e(41),s.rpc=e(146),s.roots=e(148),s.configure=n,s.Writer.ie(s.BufferWriter),n()},function(t,i,e){"use strict";t.exports=function(t,i){var e=new Array(arguments.length-1),s=0,n=2,r=!0;for(;n<arguments.length;)e[s++]=arguments[n++];return new Promise(function(n,h){e[s]=function(t){if(r)if(r=!1,t)h(t);else{for(var i=new Array(arguments.length-1),e=0;e<i.length;)i[e++]=arguments[e];n.apply(null,i)}};try{t.apply(i||null,e)}catch(t){r&&(r=!1,h(t))}})}},function(t,i,e){"use strict";var s=i;s.length=function(t){var i=t.length;if(!i)return 0;for(var e=0;--i%4>1&&"="===t.charAt(i);)++e;return Math.ceil(3*t.length)/4-e};for(var n=new Array(64),r=new Array(123),h=0;h<64;)r[n[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function(t,i,e){for(var s,r=null,h=[],a=0,o=0;i<e;){var c=t[i++];switch(o){case 0:h[a++]=n[c>>2],s=(3&c)<<4,o=1;break;case 1:h[a++]=n[s|c>>4],s=(15&c)<<2,o=2;break;case 2:h[a++]=n[s|c>>6],h[a++]=n[63&c],o=0}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,h)),a=0)}return o&&(h[a++]=n[s],h[a++]=61,1===o&&(h[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,h.slice(0,a))),r.join("")):String.fromCharCode.apply(String,h.slice(0,a))};s.decode=function(t,i,e){for(var s,n=e,h=0,a=0;a<t.length;){var o=t.charCodeAt(a++);if(61===o&&h>1)break;if(void 0===(o=r[o]))throw Error("invalid encoding");switch(h){case 0:s=o,h=1;break;case 1:i[e++]=s<<2|(48&o)>>4,s=o,h=2;break;case 2:i[e++]=(15&s)<<4|(60&o)>>2,s=o,h=3;break;case 3:i[e++]=(3&s)<<6|o,h=0}}if(1===h)throw Error("invalid encoding");return e-n},s.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},function(t,i,e){"use strict";function s(){this.ro={}}t.exports=s,s.prototype.on=function(t,i,e){return(this.ro[t]||(this.ro[t]=[])).push({fn:i,ctx:e||this}),this},s.prototype.off=function(t,i){if(void 0===t)this.ro={};else if(void 0===i)this.ro[t]=[];else for(var e=this.ro[t],s=0;s<e.length;)e[s].fn===i?e.splice(s,1):++s;return this},s.prototype.emit=function(t){var i=this.ro[t];if(i){for(var e=[],s=1;s<arguments.length;)e.push(arguments[s++]);for(s=0;s<i.length;)i[s].fn.apply(i[s++].ctx,e)}return this}},function(t,i,e){"use strict";function s(t){return"undefined"!=typeof Float32Array?function(){var i=new Float32Array([-0]),e=new Uint8Array(i.buffer),s=128===e[3];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3]}function r(t,s,n){i[0]=t,s[n]=e[3],s[n+1]=e[2],s[n+2]=e[1],s[n+3]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i[0]}function a(t,s){return e[3]=t[s],e[2]=t[s+1],e[1]=t[s+2],e[0]=t[s+3],i[0]}t.writeFloatLE=s?n:r,t.writeFloatBE=s?r:n,t.readFloatLE=s?h:a,t.readFloatBE=s?a:h}():function(){function i(t,i,e,s){var n=i<0?1:0;if(n&&(i=-i),0===i)t(1/i>0?0:2147483648,e,s);else if(isNaN(i))t(2143289344,e,s);else if(i>3.4028234663852886e38)t((n<<31|2139095040)>>>0,e,s);else if(i<1.1754943508222875e-38)t((n<<31|Math.round(i/1.401298464324817e-45))>>>0,e,s);else{var r=Math.floor(Math.log(i)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(i*Math.pow(2,-r)*8388608))>>>0,e,s)}}function e(t,i,e){var s=t(i,e),n=2*(s>>31)+1,r=s>>>23&255,h=8388607&s;return 255===r?h?NaN:n*(1/0):0===r?1.401298464324817e-45*n*h:n*Math.pow(2,r-150)*(h+8388608)}t.writeFloatLE=i.bind(null,n),t.writeFloatBE=i.bind(null,r),t.readFloatLE=e.bind(null,h),t.readFloatBE=e.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var i=new Float64Array([-0]),e=new Uint8Array(i.buffer),s=128===e[7];function n(t,s,n){i[0]=t,s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=e[3],s[n+4]=e[4],s[n+5]=e[5],s[n+6]=e[6],s[n+7]=e[7]}function r(t,s,n){i[0]=t,s[n]=e[7],s[n+1]=e[6],s[n+2]=e[5],s[n+3]=e[4],s[n+4]=e[3],s[n+5]=e[2],s[n+6]=e[1],s[n+7]=e[0]}function h(t,s){return e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],e[4]=t[s+4],e[5]=t[s+5],e[6]=t[s+6],e[7]=t[s+7],i[0]}function a(t,s){return e[7]=t[s],e[6]=t[s+1],e[5]=t[s+2],e[4]=t[s+3],e[3]=t[s+4],e[2]=t[s+5],e[1]=t[s+6],e[0]=t[s+7],i[0]}t.writeDoubleLE=s?n:r,t.writeDoubleBE=s?r:n,t.readDoubleLE=s?h:a,t.readDoubleBE=s?a:h}():function(){function i(t,i,e,s,n,r){var h=s<0?1:0;if(h&&(s=-s),0===s)t(0,n,r+i),t(1/s>0?0:2147483648,n,r+e);else if(isNaN(s))t(0,n,r+i),t(2146959360,n,r+e);else if(s>1.7976931348623157e308)t(0,n,r+i),t((h<<31|2146435072)>>>0,n,r+e);else{var a;if(s<2.2250738585072014e-308)t((a=s/5e-324)>>>0,n,r+i),t((h<<31|a/4294967296)>>>0,n,r+e);else{var o=Math.floor(Math.log(s)/Math.LN2);1024===o&&(o=1023),t(4503599627370496*(a=s*Math.pow(2,-o))>>>0,n,r+i),t((h<<31|o+1023<<20|1048576*a&1048575)>>>0,n,r+e)}}}function e(t,i,e,s,n){var r=t(s,n+i),h=t(s,n+e),a=2*(h>>31)+1,o=h>>>20&2047,c=4294967296*(1048575&h)+r;return 2047===o?c?NaN:a*(1/0):0===o?5e-324*a*c:a*Math.pow(2,o-1075)*(c+4503599627370496)}t.writeDoubleLE=i.bind(null,n,0,4),t.writeDoubleBE=i.bind(null,r,4,0),t.readDoubleLE=e.bind(null,h,0,4),t.readDoubleBE=e.bind(null,a,4,0)}(),t}function n(t,i,e){i[e]=255&t,i[e+1]=t>>>8&255,i[e+2]=t>>>16&255,i[e+3]=t>>>24}function r(t,i,e){i[e]=t>>>24,i[e+1]=t>>>16&255,i[e+2]=t>>>8&255,i[e+3]=255&t}function h(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function a(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=s(s)},function(t,i,e){"use strict";function s(t){try{var i=eval("quire".replace(/^/,"re"))(t);if(i&&(i.length||Object.keys(i).length))return i}catch(t){}return null}t.exports=s},function(t,i,e){"use strict";var s=i;s.length=function(t){for(var i=0,e=0,s=0;s<t.length;++s)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(s+1))?(++s,i+=4):i+=3;return i},s.read=function(t,i,e){if(e-i<1)return"";for(var s,n=null,r=[],h=0;i<e;)(s=t[i++])<128?r[h++]=s:s>191&&s<224?r[h++]=(31&s)<<6|63&t[i++]:s>239&&s<365?(s=((7&s)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,r[h++]=55296+(s>>10),r[h++]=56320+(1023&s)):r[h++]=(15&s)<<12|(63&t[i++])<<6|63&t[i++],h>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),h=0);return n?(h&&n.push(String.fromCharCode.apply(String,r.slice(0,h))),n.join("")):String.fromCharCode.apply(String,r.slice(0,h))},s.write=function(t,i,e){for(var s,n,r=e,h=0;h<t.length;++h)(s=t.charCodeAt(h))<128?i[e++]=s:s<2048?(i[e++]=s>>6|192,i[e++]=63&s|128):55296==(64512&s)&&56320==(64512&(n=t.charCodeAt(h+1)))?(s=65536+((1023&s)<<10)+(1023&n),++h,i[e++]=s>>18|240,i[e++]=s>>12&63|128,i[e++]=s>>6&63|128,i[e++]=63&s|128):(i[e++]=s>>12|224,i[e++]=s>>6&63|128,i[e++]=63&s|128);return e-r}},function(t,i,e){"use strict";t.exports=function(t,i,e){var s=e||8192,n=s>>>1,r=null,h=s;return function(e){if(e<1||e>n)return t(e);h+e>s&&(r=t(s),h=0);var a=i.call(r,h,h+=e);return 7&h&&(h=1+(7|h)),a}}},function(t,i,e){"use strict";t.exports=n;var s=e(41);function n(t,i){this.lo=t>>>0,this.hi=i>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var h=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return r;var i=t<0;i&&(t=-t);var e=t>>>0,s=(t-e)/4294967296>>>0;return i&&(s=~s>>>0,e=~e>>>0,++e>4294967295&&(e=0,++s>4294967295&&(s=0))),new n(e,s)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(s.isString(t)){if(!s.Long)return n.fromNumber(parseInt(t,10));t=s.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var i=1+~this.lo>>>0,e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return s.Long?new s.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===h?r:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,e=this.hi>>>24;return 0===e?0===i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:e<128?9:10}},function(t,i,e){"use strict";t.exports=h;var s=e(68);(h.prototype=Object.create(s.prototype)).constructor=h;var n=e(41),r=n.Buffer;function h(){s.call(this)}h.alloc=function(t){return(h.alloc=n.te)(t)};var a=r&&r.prototype instanceof Uint8Array&&"set"===r.prototype.set.name?function(t,i,e){i.set(t,e)}:function(t,i,e){if(t.copy)t.copy(i,e,0,t.length);else for(var s=0;s<t.length;)i[e++]=t[s++]};function o(t,i,e){t.length<40?n.utf8.write(t,i,e):i.utf8Write(t,e)}h.prototype.bytes=function(t){n.isString(t)&&(t=n.Zi(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this.Ls(a,i,t),this},h.prototype.string=function(t){var i=r.byteLength(t);return this.uint32(i),i&&this.Ls(o,i,t),this}},function(t,i,e){"use strict";t.exports=r;var s=e(70);(r.prototype=Object.create(s.prototype)).constructor=r;var n=e(41);function r(t){s.call(this,t)}n.Buffer&&(r.prototype.Rs=n.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,i,e){"use strict";i.Service=e(147)},function(t,i,e){"use strict";t.exports=n;var s=e(41);function n(t,i,e){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");s.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(e)}(n.prototype=Object.create(s.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(i,e,n,r,h){if(!r)throw TypeError("request must be specified");var a=this;if(!h)return s.asPromise(t,a,i,e,n,r);if(a.rpcImpl)try{return a.rpcImpl(i,e[a.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(t,e){if(t)return a.emit("error",t,i),h(t);if(null!==e){if(!(e instanceof n))try{e=n[a.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return a.emit("error",t,i),h(t)}return a.emit("data",e,i),h(null,e)}a.end(!0)})}catch(t){return a.emit("error",t,i),void setTimeout(function(){h(t)},0)}else setTimeout(function(){h(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,e){"use strict";t.exports={}},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="DecodingError",e}return n(i,t),i}(Error);i.DecodingError=r},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="EncodingError",e}return n(i,t),i}(Error);i.EncodingError=r},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i){var e=t.call(this,i)||this;return e.name="GVLError",e}return n(i,t),i}(Error);i.GVLError=r},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=function(t){function i(i,e,s){void 0===s&&(s="");var n=t.call(this,"invalid value "+e+" passed for "+i+" "+s)||this;return n.name="TCModelError",n}return n(i,t),i}(Error);i.TCModelError=r},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.prototype.has=function(i){return t.langSet.has(i)},t.prototype.forEach=function(i){t.langSet.forEach(i)},Object.defineProperty(t.prototype,"size",{get:function(){return t.langSet.size},enumerable:!0,configurable:!0}),t.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","ZH"]),t}();i.ConsentLanguages=s},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(75),h=e(73),a=e(61),o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.map=new Map,i}return n(i,t),i.prototype.has=function(t){return this.map.has(t)},i.prototype.isOkToHave=function(t,i,e){var s,n=!0;if(null===(s=this.gvl)||void 0===s?void 0:s.vendors){var r=this.gvl.vendors[e];if(r)if(t===a.RestrictionType.NOT_ALLOWED)n=r.legIntPurposes.includes(i)||r.purposes.includes(i);else if(r.flexiblePurposes.length)switch(t){case a.RestrictionType.REQUIRE_CONSENT:n=r.flexiblePurposes.includes(i)&&r.legIntPurposes.includes(i);break;case a.RestrictionType.REQUIRE_LI:n=r.flexiblePurposes.includes(i)&&r.purposes.includes(i)}else n=!1;else n=!1}return n},i.prototype.add=function(t,i){if(this.isOkToHave(i.restrictionType,i.purposeId,t)){var e=i.hash;this.has(e)||(this.map.set(e,new h.BinarySearchTree),this.bitLength=0),this.map.get(e).add(t)}},i.prototype.getVendors=function(t){var i=[];if(t){var e=t.hash;this.has(e)&&(i=this.map.get(e).get())}else{var s=new Set;this.map.forEach(function(t){t.get().forEach(function(t){s.add(t)})}),i=Array.from(s)}return i},i.prototype.getRestrictionType=function(t,i){var e;return this.getRestrictions(t).forEach(function(t){t.purposeId===i&&(void 0===e||e>t.restrictionType)&&(e=t.restrictionType)}),e},i.prototype.vendorHasRestriction=function(t,i){for(var e=!1,s=this.getRestrictions(t),n=0;n<s.length&&!e;n++)e=i.isSameAs(s[n]);return e},i.prototype.getMaxVendorId=function(){var t=0;return this.map.forEach(function(i){t=Math.max(i.max(),t)}),t},i.prototype.getRestrictions=function(t){var i=[];return this.map.forEach(function(e,s){t?e.contains(t)&&i.push(r.PurposeRestriction.unHash(s)):i.push(r.PurposeRestriction.unHash(s))}),i},i.prototype.getPurposes=function(){var t=new Set;return this.map.forEach(function(i,e){t.add(r.PurposeRestriction.unHash(e).purposeId)}),Array.from(t)},i.prototype.remove=function(t,i){var e=i.hash,s=this.map.get(e);s&&(s.remove(t),s.isEmpty()&&(this.map.delete(e),this.bitLength=0))},Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){var i=this;this.gvl_||(this.gvl_=t,this.map.forEach(function(t,e){var s=r.PurposeRestriction.unHash(e);t.get().forEach(function(e){i.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)})}))},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(i.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),i}(e(43).Cloneable);i.PurposeRestrictionVector=o},function(t,i,e){"use strict";var s;Object.defineProperty(i,"_",{value:!0});var n=e(76),r=function(){function t(){}return t.ID_TO_KEY=[n.Segment.CORE,n.Segment.VENDORS_DISCLOSED,n.Segment.VENDORS_ALLOWED,n.Segment.PUBLISHER_TC],t.KEY_TO_ID=((s={})[n.Segment.CORE]=0,s[n.Segment.VENDORS_DISCLOSED]=1,s[n.Segment.VENDORS_ALLOWED]=2,s[n.Segment.PUBLISHER_TC]=3,s),t}();i.SegmentIDs=r},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.ho||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},h=this&&this.ee||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"_",{value:!0});var a=e(43),o=e(35),c=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.bitLength=0,i.maxId_=0,i.set_=new Set,i}return n(i,t),i.prototype[Symbol.iterator]=function(){var t;return r(this,function(i){switch(i.label){case 0:t=1,i.label=1;case 1:return t<=this.maxId?[4,[t,this.has(t)]]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){return this.set_.values()},Object.defineProperty(i.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this.set_.has(t)},i.prototype.unset=function(t){var i=this;Array.isArray(t)?t.forEach(function(t){return i.unset(t)}):"object"==typeof t?this.unset(Object.keys(t).map(function(t){return+t})):(this.set_.delete(t),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach(function(t){i.maxId_=Math.max(i.maxId,t)})))},i.prototype.isIntMap=function(t){var i=this,e="object"==typeof t;return e&&Object.keys(t).every(function(e){var s=Number.isInteger(parseInt(e,10));return(s=s&&i.isValidNumber(t[e].id))&&void 0!==t[e].name})},i.prototype.isValidNumber=function(t){return parseInt(t,10)>0},i.prototype.isSet=function(t){var i=!1;return t instanceof Set&&(i=Array.from(t).every(this.isValidNumber)),i},i.prototype.set=function(t){var i=this;if(Array.isArray(t))t.forEach(function(t){return i.set(t)});else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map(function(t){return+t}));else{if(!this.isValidNumber(t))throw new o.TCModelError("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}},i.prototype.empty=function(){this.set_=new Set},i.prototype.forEach=function(t){var i,e;try{for(var s=h(this),n=s.next();!n.done;n=s.next()){var r=n.value;t(r[1],r[0])}}catch(t){i={error:t}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(i)throw i.error}}},Object.defineProperty(i.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),i.prototype.setAll=function(t){this.set(t)},i}(a.Cloneable);i.Vector=c},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(72),n=e(60),r=e(77),h=e(83),a=e(35),o=e(74),c=e(37),u=function(){function t(){}return t.encode=function(t,i){var e,h=this;try{e=this.fieldSequence[""+t.version][i]}catch(e){throw new a.EncodingError("Unable to encode version: "+t.version+", segment: "+i)}var u="";return i!==c.Segment.CORE&&(u=r.IntEncoder.encode(c.SegmentIDs.KEY_TO_ID[i],n.BitLength.segmentType)),e.forEach(function(e){var s=t[e],c=r.FieldEncoderMap[e],l=n.BitLength[e];void 0===l&&h.isPublisherCustom(e)&&(l=+t[o.Fields.numCustomPurposes]);try{u+=c.encode(s,l)}catch(t){throw new a.EncodingError("Error encoding "+i+"->"+e+": "+t.message)}}),s.Base64Url.encode(u)},t.decode=function(t,i,e){var h=this,u=s.Base64Url.decode(t),l=0;return e===c.Segment.CORE&&(i.version=r.IntEncoder.decode(u.substr(l,n.BitLength[o.Fields.version]),n.BitLength[o.Fields.version])),e!==c.Segment.CORE&&(l+=n.BitLength.segmentType),this.fieldSequence[""+i.version][e].forEach(function(t){var e=r.FieldEncoderMap[t],s=n.BitLength[t];if(void 0===s&&h.isPublisherCustom(t)&&(s=+i[o.Fields.numCustomPurposes]),0!==s){var c=u.substr(l,s);if(e===r.VendorVectorEncoder?i[t]=e.decode(c,i.version):i[t]=e.decode(c,s),Number.isInteger(s))l+=s;else{if(!Number.isInteger(i[t].bitLength))throw new a.DecodingError(t);l+=i[t].bitLength}}}),i},t.isPublisherCustom=function(t){return 0===t.indexOf("publisherCustom")},t.fieldSequence=new h.FieldSequence,t}();i.SegmentEncoder=u},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37),n=e(48),r=e(78),h=e(62),a=e(42),o=e(79),c=e(80),u=e(81),l=function(){function t(){}var i,e,l,d,f,p,b,v,m,g,y,w,x,S,O,k,_,j,A,I,C,T,P,M,E,L;return i=s.Fields.version,e=s.Fields.created,l=s.Fields.lastUpdated,d=s.Fields.cmpId,f=s.Fields.cmpVersion,p=s.Fields.consentScreen,b=s.Fields.consentLanguage,v=s.Fields.vendorListVersion,m=s.Fields.policyVersion,g=s.Fields.isServiceSpecific,y=s.Fields.useNonStandardStacks,w=s.Fields.specialFeatureOptins,x=s.Fields.purposeConsents,S=s.Fields.purposeLegitimateInterests,O=s.Fields.purposeOneTreatment,k=s.Fields.publisherCountryCode,_=s.Fields.vendorConsents,j=s.Fields.vendorLegitimateInterests,A=s.Fields.publisherRestrictions,I=s.Fields.vendorsDisclosed,C=s.Fields.vendorsAllowed,T=s.Fields.publisherConsents,P=s.Fields.publisherLegitimateInterests,M=s.Fields.numCustomPurposes,E=s.Fields.publisherCustomConsents,L=s.Fields.publisherCustomLegitimateInterests,t[i]=a.IntEncoder,t[e]=r.DateEncoder,t[l]=r.DateEncoder,t[d]=a.IntEncoder,t[f]=a.IntEncoder,t[p]=a.IntEncoder,t[b]=o.LangEncoder,t[v]=a.IntEncoder,t[m]=a.IntEncoder,t[g]=n.BooleanEncoder,t[y]=n.BooleanEncoder,t[w]=h.FixedVectorEncoder,t[x]=h.FixedVectorEncoder,t[S]=h.FixedVectorEncoder,t[O]=n.BooleanEncoder,t[k]=o.LangEncoder,t[_]=u.VendorVectorEncoder,t[j]=u.VendorVectorEncoder,t[A]=c.PurposeRestrictionVectorEncoder,t.segmentType=a.IntEncoder,t[I]=u.VendorVectorEncoder,t[C]=u.VendorVectorEncoder,t[T]=h.FixedVectorEncoder,t[P]=h.FixedVectorEncoder,t[M]=a.IntEncoder,t[E]=h.FixedVectorEncoder,t[L]=h.FixedVectorEncoder,t}();i.FieldEncoderMap=l},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37);i.FieldSequence=function(){var t,i;this[1]=((t={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.purposeConsents,s.Fields.vendorConsents],t),this[2]=((i={})[s.Segment.CORE]=[s.Fields.version,s.Fields.created,s.Fields.lastUpdated,s.Fields.cmpId,s.Fields.cmpVersion,s.Fields.consentScreen,s.Fields.consentLanguage,s.Fields.vendorListVersion,s.Fields.policyVersion,s.Fields.isServiceSpecific,s.Fields.useNonStandardStacks,s.Fields.specialFeatureOptins,s.Fields.purposeConsents,s.Fields.purposeLegitimateInterests,s.Fields.purposeOneTreatment,s.Fields.publisherCountryCode,s.Fields.vendorConsents,s.Fields.vendorLegitimateInterests,s.Fields.publisherRestrictions],i[s.Segment.PUBLISHER_TC]=[s.Fields.publisherConsents,s.Fields.publisherLegitimateInterests,s.Fields.numCustomPurposes,s.Fields.publisherCustomConsents,s.Fields.publisherCustomLegitimateInterests],i[s.Segment.VENDORS_ALLOWED]=[s.Fields.vendorsAllowed],i[s.Segment.VENDORS_DISCLOSED]=[s.Fields.vendorsDisclosed],i)}},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=e(37);i.SegmentSequence=function(t,i){if(this[1]=[s.Segment.CORE],this[2]=[s.Segment.CORE],2===t.version)if(t.isServiceSpecific)this[2].push(s.Segment.PUBLISHER_TC);else{var e=!(!i||!i.isForVendors);e&&!0!==t[s.Fields.supportOOB]||this[2].push(s.Segment.VENDORS_DISCLOSED),e&&(t[s.Fields.supportOOB]&&t[s.Fields.vendorsAllowed].size>0&&this[2].push(s.Segment.VENDORS_ALLOWED),this[2].push(s.Segment.PUBLISHER_TC))}}},function(t,i,e){"use strict";var s=this&&this.ee||function(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.ao||function(t,i){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var s,n,r=e.call(t),h=[];try{for(;(void 0===i||i-- >0)&&!(s=r.next()).done;)h.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}return h};Object.defineProperty(i,"_",{value:!0});var r=e(35),h=e(37),a=function(){function t(){}return t.process=function(t,i){var e,s,n=t.gvl;if(!n)throw new r.EncodingError("Unable to encode TCModel without a GVL");if(!n.isReady)throw new r.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=n.language.toUpperCase(),(null===(e=i)||void 0===e?void 0:e.version)>0&&(null===(s=i)||void 0===s?void 0:s.version)<=this.processor.length?t.version=i.version:t.version=this.processor.length;var h=t.version-1;if(!this.processor[h])throw new r.EncodingError("Invalid version: "+t.version);return this.processor[h](t,n)},t.processor=[function(t){return t},function(t,i){var e,r,a,o;t.publisherRestrictions.gvl=i,t.purposeLegitimateInterests.unset(1);var c=new Map;c.set("legIntPurposes",t.vendorLegitimateInterests),c.set("purposes",t.vendorConsents);try{for(var u=s(c),l=u.next();!l.done;l=u.next()){var d=n(l.value,2),f=d[0],p=d[1];try{for(var b=(a=void 0,s(p.values())),v=b.next();!v.done;v=b.next()){var m=v.value,g=i.vendors[m];if(!g||g.deletedDate)p.unset(m);else if(0===g[f].length)if(t.isServiceSpecific)if(0===g.flexiblePurposes.length)p.unset(m);else{for(var y=t.publisherRestrictions.getRestrictions(m),w=!1,x=0,S=y.length;x<S&&!w;x++)w=y[x].restrictionType===h.RestrictionType.REQUIRE_CONSENT&&"purposes"===f||y[x].restrictionType===h.RestrictionType.REQUIRE_LI&&"legIntPurposes"===f;w||p.unset(m)}else p.unset(m)}}catch(t){a={error:t}}finally{try{v&&!v.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return t.vendorsDisclosed.set(i.vendors),t}],t}();i.SemanticPreEncoder=a},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});Object.defineProperty(i,"_",{value:!0});var r=e(43),h=e(35),a=e(163),o=e(37),c=function(t){function i(i){var e=t.call(this)||this;return e.isServiceSpecific_=!1,e.supportOOB_=!0,e.useNonStandardStacks_=!1,e.purposeOneTreatment_=!1,e.publisherCountryCode_="AA",e.version_=2,e.consentScreen_=0,e.policyVersion_=2,e.consentLanguage_="EN",e.cmpId_=0,e.cmpVersion_=0,e.vendorListVersion_=0,e.numCustomPurposes_=0,e.specialFeatureOptins=new o.Vector,e.purposeConsents=new o.Vector,e.purposeLegitimateInterests=new o.Vector,e.publisherConsents=new o.Vector,e.publisherLegitimateInterests=new o.Vector,e.publisherCustomConsents=new o.Vector,e.publisherCustomLegitimateInterests=new o.Vector,e.vendorConsents=new o.Vector,e.vendorLegitimateInterests=new o.Vector,e.vendorsDisclosed=new o.Vector,e.vendorsAllowed=new o.Vector,e.publisherRestrictions=new o.PurposeRestrictionVector,i&&(e.gvl=i),e.created=new Date,e.updated(),e}return n(i,t),Object.defineProperty(i.prototype,"gvl",{get:function(){return this.gvl_},set:function(t){a.GVL.isInstanceOf(t)||(t=new a.GVL(t)),this.gvl_=t,this.publisherRestrictions.gvl=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(t){if(!(Number.isInteger(+t)&&t>1))throw new h.TCModelError("cmpId",t);this.cmpId_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("cmpVersion",t);this.cmpVersion_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(t){if(!(Number.isInteger(+t)&&t>-1))throw new h.TCModelError("consentScreen",t);this.consentScreen_=+t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(t){this.consentLanguage_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(t){if(!/^([A-z]){2}$/.test(t))throw new h.TCModelError("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(t){if((t=+t>>0)<0)throw new h.TCModelError("vendorListVersion",t);this.vendorListVersion_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new h.TCModelError("policyVersion",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this.version_},set:function(t){this.version_=parseInt(t,10)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(t){this.isServiceSpecific_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(t){this.useNonStandardStacks_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(t){this.supportOOB_=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(t){this.purposeOneTreatment_=t},enumerable:!0,configurable:!0}),i.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},i.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},i.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},i.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},i.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},i.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},i.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},i.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},i.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},i.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},i.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},i.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},i.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},i.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},i.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(i.prototype,"numCustomPurposes",{get:function(){var t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var i=Object.keys(this.customPurposes).sort(function(t,i){return+t-+i});t=parseInt(i.pop(),10)}return t},set:function(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new h.TCModelError("numCustomPurposes",t)},enumerable:!0,configurable:!0}),i.prototype.updated=function(){this.lastUpdated=new Date},i.consentLanguages=a.GVL.consentLanguages,i}(r.Cloneable);i.TCModel=c},function(t,i,e){"use strict";var s,n=this&&this.Bs||(s=function(t,i){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}s(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),r=this&&this.oo||function(t,i,e,s){return new(e||(e=Promise))(function(n,r){function h(t){try{o(s.next(t))}catch(t){r(t)}}function a(t){try{o(s.throw(t))}catch(t){r(t)}}function o(t){var i;t.done?n(t.value):(i=t.value,i instanceof e?i:new e(function(t){t(i)})).then(h,a)}o((s=s.apply(t,i||[])).next())})},h=this&&this.ho||function(t,i){var e,s,n,r,h={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;h;)try{if(e=1,s&&(n=2&r[0]?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,s=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(!(n=(n=h.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){h.label=r[1];break}if(6===r[0]&&h.label<n[1]){h.label=n[1],n=r;break}if(n&&h.label<n[2]){h.label=n[2],h.ops.push(r);break}n[2]&&h.ops.pop(),h.trys.pop();continue}r=i.call(t,h)}catch(t){r=[6,t],s=0}finally{e=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(i,"_",{value:!0});var a=e(43),o=e(35),c=e(164),u=e(37),l=function(t){function i(e){var s=t.call(this)||this;s.isReady_=!1,s.isLatest=!1;var n=i.baseUrl;if(s.lang_=i.DEFAULT_LANGUAGE,s.isVendorList(e))s.populate(e),s.readyPromise=Promise.resolve();else{if(!n)throw new o.GVLError("must specify GVL.baseUrl before loading GVL json");if(e>0){var r=e;i.CACHE.has(r)?(s.populate(i.CACHE.get(r)),s.readyPromise=Promise.resolve()):(n+=i.versionedFilename.replace("[VERSION]",r+""),s.readyPromise=s.fetchJson(n))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(s.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),s.readyPromise=Promise.resolve()):(s.isLatest=!0,s.readyPromise=s.fetchJson(n+i.latestFilename))}return s}return n(i,t),Object.defineProperty(i,"baseUrl",{get:function(){return this.baseUrl_},set:function(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new o.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t},enumerable:!0,configurable:!0}),i.emptyLanguageCache=function(t){var e=!1;return void 0===t&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(i.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e},i.emptyCache=function(t){var e=!1;return Number.isInteger(t)&&t>=0?(i.CACHE.delete(t),e=!0):void 0===t&&(i.CACHE=new Map,e=!0),e},i.prototype.cacheLanguage=function(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},i.prototype.fetchJson=function(t){return r(this,void 0,void 0,function(){var i,e;return h(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),i=this.populate,[4,c.Json.fetch(t)];case 1:return i.apply(this,[s.sent()]),[3,3];case 2:throw e=s.sent(),new o.GVLError(e.message);case 3:return[2]}})})},i.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},i.prototype.changeLanguage=function(t){return r(this,void 0,void 0,function(){var e,s,n,r,a;return h(this,function(h){switch(h.label){case 0:if(e=t.toUpperCase(),!i.consentLanguages.has(e))return[3,6];if(e===this.lang_)return[3,5];if(this.lang_=e,!i.LANGUAGE_CACHE.has(e))return[3,1];for(n in s=i.LANGUAGE_CACHE.get(e))s.hasOwnProperty(n)&&(this[n]=s[n]);return[3,5];case 1:r=i.baseUrl+i.languageFilename.replace("[LANG]",t),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,this.fetchJson(r)];case 3:return h.sent(),this.cacheLanguage(),[3,5];case 4:throw a=h.sent(),new o.GVLError("unable to load language: "+a.message);case 5:return[3,7];case 6:throw new o.GVLError("unsupported language "+t);case 7:return[2]}})})},Object.defineProperty(i.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),i.prototype.isVendorList=function(t){return void 0!==t&&void 0!==t.vendors},i.prototype.populate=function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},i.prototype.mapVendors=function(t){var i=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){i.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){i.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){i.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){i.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(t),this.vendors_=t.reduce(function(t,e){var s=i.vendors_[""+e];return s&&void 0===s.deletedDate&&(s.purposes.forEach(function(t){i.byPurposeVendorMap[t+""].consent.add(e)}),s.specialPurposes.forEach(function(t){i.bySpecialPurposeVendorMap[t+""].add(e)}),s.legIntPurposes.forEach(function(t){i.byPurposeVendorMap[t+""].legInt.add(e)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(t){i.byPurposeVendorMap[t+""].flexible.add(e)}),s.features.forEach(function(t){i.byFeatureVendorMap[t+""].add(e)}),s.specialFeatures.forEach(function(t){i.bySpecialFeatureVendorMap[t+""].add(e)}),t[e]=s),t},{})},i.prototype.getFilteredVendors=function(t,i,e,s){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1),h={};return("purpose"===t&&e?this["by"+r+"VendorMap"][i+""][e]:this["by"+(s?"Special":"")+r+"VendorMap"][i+""]).forEach(function(t){h[t+""]=n.vendors[t+""]}),h},i.prototype.getVendorsWithConsentPurpose=function(t){return this.getFilteredVendors("purpose",t,"consent")},i.prototype.getVendorsWithLegIntPurpose=function(t){return this.getFilteredVendors("purpose",t,"legInt")},i.prototype.getVendorsWithFlexiblePurpose=function(t){return this.getFilteredVendors("purpose",t,"flexible")},i.prototype.getVendorsWithSpecialPurpose=function(t){return this.getFilteredVendors("purpose",t,void 0,!0)},i.prototype.getVendorsWithFeature=function(t){return this.getFilteredVendors("feature",t)},i.prototype.getVendorsWithSpecialFeature=function(t){return this.getFilteredVendors("feature",t,void 0,!0)},Object.defineProperty(i.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),i.prototype.narrowVendorsTo=function(t){this.mapVendors(t)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this.getJson())},i.isInstanceOf=function(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo},i.LANGUAGE_CACHE=new Map,i.CACHE=new Map,i.LATEST_CACHE_KEY=0,i.DEFAULT_LANGUAGE="EN",i.consentLanguages=new u.ConsentLanguages,i.latestFilename="vendor-list.json",i.versionedFilename="archives/vendor-list-v[VERSION].json",i.languageFilename="purposes-[LANG].json",i}(a.Cloneable);i.GVL=l},function(t,i,e){"use strict";Object.defineProperty(i,"_",{value:!0});var s=function(){function t(){}return t.absCall=function(t,i,e,s){return new Promise(function(n,r){var h=new XMLHttpRequest;h.withCredentials=e,h.addEventListener("load",function(){if(h.readyState==XMLHttpRequest.DONE)if(h.status>=200&&h.status<300){var t=h.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error("HTTP Status: "+h.status+" response type: "+h.responseType))}),h.addEventListener("error",function(){r(new Error("error"))}),h.addEventListener("abort",function(){r(new Error("aborted"))}),null===i?h.open("GET",t,!0):h.open("POST",t,!0),h.responseType="json",h.timeout=s,h.ontimeout=function(){r(new Error("Timeout "+s+"ms "+t))},h.send(i)})},t.post=function(t,i,e,s){return void 0===e&&(e=!1),void 0===s&&(s=0),this.absCall(t,JSON.stringify(i),e,s)},t.fetch=function(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=0),this.absCall(t,null,i,e)},t}();i.Json=s},function(t,i,e){"use strict";var s=e(166),n=s.decodeBitsToIds,r=s.decodeFromBase64;t.exports={decodeConsentString:function(t){var i=r(t),e=i.version,s=i.cmpId,h=i.vendorListVersion,a=i.purposeIdBitString,o=i.maxVendorId,c=i.created,u=i.lastUpdated,l=i.isRange,d=i.defaultConsent,f=i.vendorIdBitString,p=i.vendorRangeList,b=i.cmpVersion,v=i.consentScreen,m=i.consentLanguage,g={version:e,cmpId:s,vendorListVersion:h,allowedPurposeIds:n(a),maxVendorId:o,created:c,lastUpdated:u,cmpVersion:b,consentScreen:v,consentLanguage:m};if(l){var y=p.reduce(function(t,i){for(var e=i.isRange,s=i.startVendorId,n=i.endVendorId,r=e?n:s,h=s;h<=r;h+=1)t[h]=!0;return t},{});g.allowedVendorIds=[];for(var w=1;w<=o;w+=1)(d&&!y[w]||!d&&y[w])&&-1===g.allowedVendorIds.indexOf(w)&&g.allowedVendorIds.push(w)}else g.allowedVendorIds=n(f);return g}}},function(t,i,e){"use strict";var s=e(167),n=e(169),r=n.versionNumBits,h=n.vendorVersionMap;function a(t,i,e){return parseInt(t.substr(i,e),2)}function o(t,i,e){return new Date(100*a(t,i,e))}function c(t){var i=a(t);return String.fromCharCode(i+65).toLowerCase()}function u(t,i,e){var s=t.substr(i,e);return c(s.slice(0,e/2))+c(s.slice(e/2))}function l(t){var i=t.input,e=t.output,s=t.startPosition,n=t.field,r=n.type,h=n.numBits,c=n.decoder,l=n.validator,f=n.listCount;if("function"==typeof l&&!l(e))return{newPosition:s};if("function"==typeof c)return c(i,e,s);var p,b,v="function"==typeof h?h(e):h;switch(r){case"int":return{fieldValue:a(i,s,v)};case"bool":return{fieldValue:(p=i,b=s,1===parseInt(p.substr(b,1),2))};case"date":return{fieldValue:o(i,s,v)};case"bits":return{fieldValue:i.substr(s,v)};case"list":return function(t,i,e,s,n){var r=0;"function"==typeof n?r=n(i):"number"==typeof n&&(r=n);for(var h=e,a=[],o=0;o<r;o+=1){var c=d({input:t,fields:s.fields,startPosition:h});h=c.newPosition,a.push(c.decodedObject)}return{fieldValue:a,newPosition:h}}(i,e,s,n,f);case"language":return{fieldValue:u(i,s,v)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var i=t.input,e=t.fields,s=t.startPosition,n=void 0===s?0:s;return{decodedObject:e.reduce(function(t,e){var s=e.name,r=e.numBits,h=l({input:i,output:t,startPosition:n,field:e}),a=h.fieldValue,o=h.newPosition;return void 0!==a&&(t[s]=a),void 0!==o?n=o:"number"==typeof r&&(n+=r),t},{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce(function(t,i,e){return"1"===i&&-1===t.indexOf(e+1)&&t.push(e+1),t},[])},decodeFromBase64:function(t,i){for(var e=t;e.length%4!=0;)e+="=";e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n,o,c=s.decode(e),u="",l=0;l<c.length;l+=1){var f=c.charCodeAt(l).toString(2);u+=(n=f,o=8-f.length,function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",e="",s=0;s<t;s+=1)e+=i;return e}(Math.max(0,o))+n)}return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,e=a(t,0,r);if("number"!=typeof e)throw new Error("ConsentString - Unknown version number in the string to decode");if(!h[e])throw new Error("ConsentString - Unsupported version "+e+" in the string to decode");return d({input:t,fields:i[e].fields}).decodedObject}(u,i)}}},function(t,i,e){(function(t,s){var n;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(r){var h=i,a=(t&&t.exports,"object"==typeof s&&s);a.global!==a&&a.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var c=function(t){throw new o(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,d={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var i,e,s,n,r=t.length%3,h="",a=-1,o=t.length-r;++a<o;)i=t.charCodeAt(a)<<16,e=t.charCodeAt(++a)<<8,s=t.charCodeAt(++a),h+=u.charAt((n=i+e+s)>>18&63)+u.charAt(n>>12&63)+u.charAt(n>>6&63)+u.charAt(63&n);return 2==r?(i=t.charCodeAt(a)<<8,e=t.charCodeAt(++a),h+=u.charAt((n=i+e)>>10)+u.charAt(n>>4&63)+u.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(a),h+=u.charAt(n>>2)+u.charAt(n<<4&63)+"=="),h},decode:function(t){var i=(t=String(t).replace(l,"")).length;i%4==0&&(i=(t=t.replace(/==?$/,"")).length),(i%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var e,s,n=0,r="",h=-1;++h<i;)s=u.indexOf(t.charAt(h)),e=n%4?64*e+s:s,n++%4&&(r+=String.fromCharCode(255&e>>(-2*n&6)));return r},version:"0.1.0"};void 0===(n=function(){return d}.call(i,e,i,t))||(t.exports=n)}()}).call(this,e(168)(t),e(69))},function(t,i){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,i,e){"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},function(t,i){String.prototype.cnx_replaceAll=function(t,i){return this.split(t).join(i)}},function(t,i,e){"use strict";e.r(i);var s,n=e(5),r=e(50),h=(e(170),e(0)),a=e(86),o=e(19),c=e(21),u=e(32),l=e(6),d=e(3),f=e(38);!function(t){t.Deprecation="deprecation",t.Intervention="intervention",t.Crash="crash"}(s||(s={}));const p="HeavyAdIntervention";class b{constructor(t,i,e){this.de=t,this.co=i,this.uo=e,this.do=!1,this.fo=()=>{"hidden"===this.de.document.visibilityState&&this.po()},this.po=()=>{if(this.do||!this.bo)return;const t=this.bo.takeRecords();this.vo(t),this.do=!0},this.vo=t=>{t.filter(({body:t})=>{var i;return(null===(i=t)||void 0===i?void 0:i.id)===p}).forEach(()=>{this.co.trackHeavyAdIntervention(this.uo)})},this.mo()&&this.gs()}destroy(){this.de.removeEventListener("pagehide",this.po),this.de.removeEventListener("visibilitychange",this.fo)}mo(){return!!this.de.ReportingObserver}gs(){this.bo=new this.de.ReportingObserver(t=>{this.vo(t)},{buffered:!0,types:[s.Intervention]}),this.bo.observe(),this.de.addEventListener("pagehide",this.po),this.de.addEventListener("visibilitychange",this.fo)}}class v extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.playerModel=i,this.app=e,this.Ws=s,this.yo=n,this._appSettings=r,this.macroElements={player:[]},this.wo=!1,this.xo={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.So=null,this.Oo=500,this.createExperience(i,r),this.ko=new b(i.global,this.app.services.TrackingService,{heavyAdBlockTypeEnum:h.ProtoHeavyAdBlockTypeEnum.Global}),this._o=new b(window,this.app.services.TrackingService,{heavyAdBlockTypeEnum:h.ProtoHeavyAdBlockTypeEnum.Script})}subscribeToEvents(){this.subscribe(c.b.Destroy,this.experience,()=>{this.destroy()}),this.subscribe(c.b.CanStart,this.experience,()=>{this.experience.start()}),this.subscribe(c.c.SessionRendered,this.experience,()=>{this.yo.wasPlayerReloaded||this.app.services.TrackingService.trackSessionRendered(this.Ws),this.mediator.publish(this,c.c.SessionRendered)}),this.subscribe(c.c.SessionView,this.experience,()=>{this.yo.wasPlayerInView||(this.app.services.TrackingService.trackSessionViewability(),this.mediator.publish(this,c.c.SessionView))}),Object(u.a)(this.experience.events).forEach(t=>{this.subscribe(t,this.experience,i=>{this.experienceApi.trigger(t,i.payload)})})}updateMacroContent(t,i){t&&t.forEach(t=>{t.textContent=i})}Pn(){this.playerModel.css&&this.app.services.GlobalDomUtilsService.addCssString(this.playerModel.css,`cnx-custom-css-${this.app.config.appId}`)}jo(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}Ao(){if(this.experienceContainer=this.Io(),this.playerModel.html){const t=this.app.services.GlobalDomUtilsService.createElementByString(this.jo(this.playerModel.html));this.Co(t);const i=this.macroElements.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.experienceContainer,i),i.parentNode.removeChild(i),Object(l.c)(t.children).forEach(t=>{this.playerModel.targetContainer.parentNode.insertBefore(t,this.playerModel.targetContainer)})}else this.playerModel.targetContainer.parentNode.insertBefore(this.experienceContainer,this.playerModel.targetContainer);this.playerModel.targetContainer.parentElement.removeChild(this.playerModel.targetContainer)}Io(){const t=this.app.config.isMobile?d.g.Mobile:d.g.Desktop;return this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.MainContainer} ${t} ${this.To}"></cnx>`)}Co(t){Object(l.c)(t.children).forEach(t=>{t.children.length>0&&this.Co(t),Object.keys(this.xo).forEach(i=>{const e=this.xo[i];t.textContent.indexOf(e)>-1&&this.Po(i,t)})})}Po(t,i){this.macroElements[t]||(this.macroElements[t]=[]),this.macroElements[t].push(i),i.textContent=""}Mo(){null!==this.So&&(clearInterval(this.So),this.So=null)}init(){this.Pn(),this.Ao();const t=this.app.config.device;return this.isSupportedBreakpoint(t)?(this.subscribeToEvents(),this.experience.Eo(this.playerModel,this.app,this.experienceContainer),this.So=setInterval(()=>{this.wo?this.Mo():this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.experienceContainer)&&(this.destroy(),Object(n.a)({message:"player_removed_from_DOM",level:h.ProtoLoggingLevelEnum.INFO}))},this.Oo),!0):(this.destroy(),!1)}getApiMethods(){return this.experienceApi.getApiMethods()}get playerContainer(){return this.experienceContainer}destroy(){try{f.a.playerDestroyed(),this.wo=!0,this.Mo(),this.app.services.TrackingService.destroy(),this.app.services.ResizeObserver.destroy(),this.app.services.ViewabilityService.destroy(),this.app.services.InteractionService.destroy(),this.experienceApi.setDestroyed(),this.unsubscribeAll(this.experience),this.experience&&(this.experience.destroy(),this.experience=null),this.experienceContainer.parentNode&&this.experienceContainer.parentNode.removeChild(this.experienceContainer),this.ko.destroy(),this._o.destroy()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING,message:"Renderer_destroy",exception:t.message})}}}var m,g,y,w=e(4);!function(t){t.EnterStart="enterStart",t.EnterStop="enterStop",t.ExitStart="exitStart",t.ExitStop="exitStop"}(m||(m={})),function(t){t[t.DirectionIn=0]="DirectionIn",t[t.DirectionOut=1]="DirectionOut",t[t.FadeIn=2]="FadeIn"}(g||(g={})),function(t){t.Float="float",t.Embed="embed"}(y||(y={}));const x=400,S=1e3,O=20,k=.5;var _,j=e(2);class A{constructor(t,i,e,s,n,r=0){this.Lo=t,this.Jn=i,this.Ro=e,this.Bo=s,this.Os=n,this.Do=r,this.Fo=0,this.$o=void 0,this.Uo=null,this.Vo=!1,this.No=500,this.Ho=()=>{this.$o&&this.qo()},this.zo=()=>{if(this.Jn.width=this.Wo.clientWidth,this.Go(),this.$o){const t=!1;this.Jo(t)}},this.Go=()=>{this.Qo()?!this.Xo||this.$o||this.Vo?this.Yo():this.Ko():this.$o&&this.Zo()},this.tc=t=>{if(this.ic(t.propertyName))switch(this.transitionState){case g.DirectionIn:this.transitionState=void 0,this.ec();break;case g.DirectionOut:this.transitionState=void 0,this.sc();break;case g.FadeIn:this.transitionState=void 0,this.nc()}},this.rc()}get transitionState(){return this.hc}set transitionState(t){this.hc===g.FadeIn&&this.ac(d.n.FadeInBase,d.n.FadeIn),this.hc=t}oc(...t){Object(j.a)(this.Ro,...t)}ac(...t){Object(j.L)(this.Ro,...t)}Yo(){this.Bo!==h.ProtoDeviceType.Smartphone&&(this.Ro.style.width=`${this.Jn.width}px`);const t=this.Ro.getBoundingClientRect().width;this.Ro.style.height=this.Jn.getHeight(t)}uc(){return Object(l.g)(this.Bo,this.Jn.floatingDeviceMode)}lc(){this.Os.addEventListenerOnGlobal("scroll",this.Ho)}qo(){this.Wo&&(this.dc(),this.fc<this.Jn.floatingGutterY?this.pc(this.Jn.floatingGutterY):this.pc(this.fc))}bc(){this.Wo=this.Os.querySelector(this.Jn.pageElement),this.Wo&&(clearInterval(this.Uo),this.Jn.width=this.Wo.clientWidth,this.Go(),this.Lo.on(this.Wo,this.zo),this.Lo.on(this.Os.getGlobalClosestTop().topFrame.document.body,this.zo))}dc(){switch(this.Jn.appendLocation){case h.ProtoFloatingAppendLocationEnum.Above:this.fc=this.Wo.getBoundingClientRect().top-this.Ro.offsetHeight-this.Jn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Below:this.fc=this.Wo.getBoundingClientRect().top+this.Wo.offsetHeight+this.Jn.floatingYAxisPadding;break;case h.ProtoFloatingAppendLocationEnum.Within:this.fc=this.Wo.getBoundingClientRect().top}}vc(){this.Uo=setInterval(()=>{this.bc()},this.No),this.bc()}mc(){return this.Jn.floatingPosition===h.ProtoFloatingFixedPositionMode.Element}ic(t){switch(this.transitionState){case g.DirectionIn:case g.DirectionOut:if("right"===t||"left"===t)return!0;break;case g.FadeIn:if("opacity"===t)return!0}return!1}gc(){this.Ro.style.top="",this.Ro.style.bottom="",this.Ro.style.left="",this.Ro.style.right="",this.Ro.style.width="",this.Ro.style.height="",this.Ro.style.transform=""}sc(){this.$o=!1,this.ac(d.o.MainClass,d.o.TransitionClass,this.Jn.positionClass),this.gc(),this.yc()}wc(){this.Jn.isPositionedTop?(this.Ro.style.top=`${this.Jn.floatingGutterY}px`,this.Ro.style.bottom="auto"):this.Jn.isPositionedBottom&&(this.Ro.style.top="auto",this.Ro.style.bottom=`${this.Jn.floatingGutterY}px`)}pc(t){this.Ro.style.transform=`translateY(${t}px)`}xc(t){t?this.oc(d.o.TransitionClass):this.ac(d.o.TransitionClass)}Sc(t,i=!1,e=!1){this.xc(i),e||this.Jn.isPositionedLeft?(this.Ro.style.left=`${t}px`,this.Ro.style.right="auto"):(this.Ro.style.left="auto",this.Ro.style.right=`${t}px`)}Qo(){return Object(j.t)(this.Ro).document.body.getBoundingClientRect().width>=this.Do}Ko(){if(this.Qo()&&(!this.mc()||this.Wo&&(!this.Wo||0!==this.Wo.clientWidth)))if(this.$o=!0,this.transitionState=g.DirectionIn,this.oc(d.o.MainClass,this.Jn.positionClass),this.Go(),this.mc()?(this.Ro.style.top="0px",this.Oc(),this.Sc(this.Fo,!1,!0),this.qo()):(this.wc(),this.Sc(this.Fo)),this.kc(),Object(j.i)(this.Ro),this.Wo){const t=!0;this.Jo(t)}else this.Sc(this.Jn.floatingGutterX,!0)}Oc(){this.Wo&&(this.Os.getElementCoordinates(this.Wo).clientX<this.Os.getBodyDimensions().width/2?(this.Jn.isPositionedLeft=!0,this.Jn.isPositionedRight=!1):(this.Jn.isPositionedLeft=!1,this.Jn.isPositionedRight=!0),this.rc())}rc(){this.mc()&&this.Jn.isPositionedRight?this.Fo=this.Os.getBodyDimensions().width+(this.Jn.floatingWidth||S)+O:this.Fo=-((this.Jn.floatingWidth||S)+O)}Jo(t){let i;this.Oc(),i=this.Os.getElementCoordinates(this.Wo).clientX,this.Jn.isPositionedLeft?i+=this.Jn.floatingGutterX:i-=this.Jn.floatingGutterX,this.Sc(i,t,!0)}Zo(t=!0){let i;t&&(this.transitionState=g.DirectionOut),this._c(),i=this.mc(),this.Sc(this.Fo,t,i),t||this.sc()}jc(){this.Ro.addEventListener("transitionend",this.tc),this.Lo.on(this.Ro,this.Go),this.mc()&&(this.vc(),this.lc())}Ac(){this.Lo.off(this.Ro,this.Go),this.Ro.removeEventListener("transitionend",this.tc),this.Wo&&(this.Lo.off(this.Wo,this.zo),this.Lo.off(this.Os.getGlobalClosestTop().topFrame.document.body,this.zo),this.Os.removeEventListenerOnGlobal("scroll",this.Ho),clearInterval(this.Uo))}get isInFloating(){return this.$o}}class I extends A{constructor(t,i,e,s,n,r,a,o=0){super(e,n,s,r,a,o),this.mediator=t,this.Ic=i,this.Cc=!0,this.Tc=!0,this.Pc=!1,this.Xo=!1,this.Mc=t=>{const i=this.Ic.getIsTabInFocus();t&&this.isInFloating&&(this.Xo=!1,this.Zo()),this.Cc&&this.Jn.floatingMode===h.ProtoPlayerFloatingMode.AfterInView&&t&&(this.Cc=!1),!t&&!this.Cc&&this.Tc&&i&&(this.Xo=!0,super.Ko())},this.Yo=()=>{this.isInFloating&&super.Yo()}}Zo(){const t=!this.Pc;super.Zo(t)}_c(){this.mediator.publish(this,m.ExitStart)}yc(){this.Ec()}kc(){this.mediator.publish(this,m.EnterStart)}Ec(){this.transitionState=g.FadeIn,this.ac(d.n.FadeIn),this.oc(d.n.FadeInBase),Object(j.i)(this.Ro),this.oc(d.n.FadeIn)}ec(){this.mediator.publish(this,m.EnterStop)}nc(){this.ac(d.n.FadeInBase,d.n.FadeIn),this.mediator.publish(this,m.ExitStop),this.Vo&&super.Ac()}Lc(){this.Ic.on(this.Ro.parentElement,this.Mc,{threshold:k})}Rc(){this.Ic.off(this.Ro.parentElement,this.Mc)}start(){this.uc()&&(super.jc(),this.Jn.floatingMode===h.ProtoPlayerFloatingMode.OnPageLoad&&(this.Cc=!1),this.Lc(),this.Mc(this.Ic.check({element:this.Ro.parentElement,threshold:k})))}canFloat(){return this.uc()&&this.Jn.floatingMode!==h.ProtoPlayerFloatingMode.Off}destroy(){this.isInFloating?(this.sc(),this.Vo=!0):super.Ac(),this.Rc()}get enabled(){return this.Tc}set enabled(t){this.Tc=t}fullscreenStateChange(t){this.Pc=t,t?this.Rc():this.Lc(),this.Mc(t)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Replay=2]="Replay",t[t.Volume=3]="Volume",t[t.Mute=4]="Mute",t[t.Unmute=5]="Unmute",t[t.Seek=6]="Seek",t[t.DraggingStart=7]="DraggingStart",t[t.DraggingStopped=8]="DraggingStopped",t[t.SeekingStart=9]="SeekingStart",t[t.SeekingStopped=10]="SeekingStopped",t[t.Expand=11]="Expand",t[t.Collapse=12]="Collapse",t[t.Quality=13]="Quality",t[t.Close=14]="Close",t[t.Next=15]="Next",t[t.Prev=16]="Prev",t[t.Settings=17]="Settings",t[t.CaptionOn=18]="CaptionOn",t[t.CaptionOff=19]="CaptionOff",t[t.CaptionUpdate=20]="CaptionUpdate",t[t.VolumeHoverStart=21]="VolumeHoverStart",t[t.VolumeHoverStopped=22]="VolumeHoverStopped",t[t.OverlayClick=23]="OverlayClick",t[t.UIHideStart=24]="UIHideStart",t[t.UIShowStart=25]="UIShowStart",t[t.UIEndShowHide=26]="UIEndShowHide",t[t.AboutClick=27]="AboutClick",t[t.ContextClick=28]="ContextClick",t[t.SettingsMenu=29]="SettingsMenu",t[t.HoverStart=30]="HoverStart",t[t.HoverEnd=31]="HoverEnd",t[t.StateChanged=32]="StateChanged",t[t.RebindComponent=33]="RebindComponent",t[t.SkipAd=34]="SkipAd",t[t.LogoClicked=35]="LogoClicked",t[t.ContextMenuOpen=36]="ContextMenuOpen",t[t.ContextMenuClose=37]="ContextMenuClose"}(_||(_={}));var C=e(1),T=e(16);class P extends A{constructor(t,i,e,s,n,r,h=0){super(i,s,e,n,r,h),this.mediator=t,this.Xo=!0}kc(){}ec(){this.mediator.publish(this,m.EnterStop)}_c(){}yc(){}nc(){}start(){this.uc()&&(super.jc(),super.Ko())}}const M={DetachedFromDom:"detachedFromDom",AdSlotResized:"adSlotResized"},E={DetachedFromDom:"detachedFromDom",AdsEnabled:"adsEnabled"};class L{constructor(t,i,e,s){this.Ro=t,this.Bc=s,this.Dc=this.Fc(e,i)}Fc(t,i){return Object.assign({},t[i]||t[h.ProtoDeviceType.Smartphone])}updateWidth(t){const i=this.$c(t);i!==this.currentBreakpointClass&&(Object(j.L)(this.Ro,this.currentBreakpointClass),Object(j.a)(this.Ro,i),this.currentBreakpointClass=i)}$c(t){switch(!0){case t>=this.Dc.xxl:return this.Bc.Xxl;case t>=this.Dc.xl:return this.Bc.Xl;case t>=this.Dc.lg:return this.Bc.Lg;case t>=this.Dc.md:return this.Bc.Md;case t>=this.Dc.sm:return this.Bc.Sm;case t>=this.Dc.xs:return this.Bc.Xs;default:return this.Bc.Xxs}}}var R=e(26);const B={MidRollCapped:"midRollCapped",TotalAdBreakLengthExpired:"totalAdBreakLengthExpired",EnableAds:"enableAds",DisableAds:"disableAds",ForceStopAdSlot:"ForceStopAdSlot",ForceStopAdPod:"ForceStopAdPod",AdOpportunity:"adOpportunity",AdPodRemainingTime:"AdPodRemainingTime"};var D,F=e(28),$=e(11);!function(t){t[t.FirstQuartile=0]="FirstQuartile",t[t.SecondQuartile=1]="SecondQuartile",t[t.ThirdQuartile=2]="ThirdQuartile",t[t.FourthQuartile=3]="FourthQuartile"}(D||(D={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var U=function(t,i){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function V(t,i){function e(){this.constructor=t}U(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function N(t){return"function"==typeof t}var H=!1,q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;H=t},get useDeprecatedSynchronousErrorHandling(){return H}};function z(t){setTimeout(function(){throw t},0)}var W={closed:!0,next:function(t){},error:function(t){if(q.useDeprecatedSynchronousErrorHandling)throw t;z(t)},complete:function(){}},G=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function J(t){return null!==t&&"object"==typeof t}var Q=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,i){return i+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),X=function(){function t(t){this.closed=!1,this.Uc=null,this.Vc=null,t&&(this.Nc=!0,this.oh=t)}return t.prototype.unsubscribe=function(){var i;if(!this.closed){var e=this.Uc,s=this.Nc,n=this.oh,r=this.Vc;if(this.closed=!0,this.Uc=null,this.Vc=null,e instanceof t)e.remove(this);else if(null!==e)for(var h=0;h<e.length;++h){e[h].remove(this)}if(N(n)){s&&(this.oh=void 0);try{n.call(this)}catch(t){i=t instanceof Q?Y(t.errors):[t]}}if(G(r)){h=-1;for(var a=r.length;++h<a;){var o=r[h];if(J(o))try{o.unsubscribe()}catch(t){i=i||[],t instanceof Q?i=i.concat(Y(t.errors)):i.push(t)}}}if(i)throw new Q(i)}},t.prototype.add=function(i){var e=i;if(!i)return t.EMPTY;switch(typeof i){case"function":e=new t(i);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var s=e;(e=new t).Vc=[s]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}var n=e.Uc;if(null===n)e.Uc=this;else if(n instanceof t){if(n===this)return e;e.Uc=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}var r=this.Vc;return null===r?this.Vc=[e]:r.push(e),e},t.prototype.remove=function(t){var i=this.Vc;if(i){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Y(t){return t.reduce(function(t,i){return t.concat(i instanceof Q?i.errors:i)},[])}var K=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Z=function(t){function i(e,s,n){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=W;break;case 1:if(!e){r.destination=W;break}if("object"==typeof e){e instanceof i?(r.syncErrorThrowable=e.syncErrorThrowable,r.destination=e,e.add(r)):(r.syncErrorThrowable=!0,r.destination=new tt(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new tt(r,e,s,n)}return r}return V(i,t),i.prototype[K]=function(){return this},i.create=function(t,e,s){var n=new i(t,e,s);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this.Hc(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this.qc(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this.zc())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},i.prototype.Hc=function(t){this.destination.next(t)},i.prototype.qc=function(t){this.destination.error(t),this.unsubscribe()},i.prototype.zc=function(){this.destination.complete(),this.unsubscribe()},i.prototype.Wc=function(){var t=this.Uc;return this.Uc=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this.Uc=t,this},i}(X),tt=function(t){function i(i,e,s,n){var r,h=t.call(this)||this;h.Gc=i;var a=h;return N(e)?r=e:e&&(r=e.next,s=e.error,n=e.complete,e!==W&&(N((a=Object.create(e)).unsubscribe)&&h.add(a.unsubscribe.bind(a)),a.unsubscribe=h.unsubscribe.bind(h))),h.Jc=a,h.Hc=r,h.qc=s,h.zc=n,h}return V(i,t),i.prototype.next=function(t){if(!this.isStopped&&this.Hc){var i=this.Gc;q.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?this.Qc(i,this.Hc,t)&&this.unsubscribe():this.Xc(this.Hc,t)}},i.prototype.error=function(t){if(!this.isStopped){var i=this.Gc,e=q.useDeprecatedSynchronousErrorHandling;if(this.qc)e&&i.syncErrorThrowable?(this.Qc(i,this.qc,t),this.unsubscribe()):(this.Xc(this.qc,t),this.unsubscribe());else if(i.syncErrorThrowable)e?(i.syncErrorValue=t,i.syncErrorThrown=!0):z(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;z(t)}}},i.prototype.complete=function(){var t=this;if(!this.isStopped){var i=this.Gc;if(this.zc){var e=function(){return t.zc.call(t.Jc)};q.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable?(this.Qc(i,e),this.unsubscribe()):(this.Xc(e),this.unsubscribe())}else this.unsubscribe()}},i.prototype.Xc=function(t,i){try{t.call(this.Jc,i)}catch(t){if(this.unsubscribe(),q.useDeprecatedSynchronousErrorHandling)throw t;z(t)}},i.prototype.Qc=function(t,i,e){if(!q.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this.Jc,e)}catch(i){return q.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(z(i),!0)}return!1},i.prototype.oh=function(){var t=this.Gc;this.Jc=null,this.Gc=null,t.unsubscribe()},i}(Z);var it=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function et(t){return t}function st(t){return 0===t.length?et:1===t.length?t[0]:function(i){return t.reduce(function(t,i){return i(t)},i)}}var nt=function(){function t(t){this.Yc=!1,t&&(this.Kc=t)}return t.prototype.lift=function(i){var e=new t;return e.source=this,e.operator=i,e},t.prototype.subscribe=function(t,i,e){var s=this.operator,n=function(t,i,e){if(t){if(t instanceof Z)return t;if(t[K])return t[K]()}return t||i||e?new Z(t,i,e):new Z(W)}(t,i,e);if(s?n.add(s.call(n,this.source)):n.add(this.source||q.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this.Kc(n):this.Zc(n)),q.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},t.prototype.Zc=function(t){try{return this.Kc(t)}catch(i){q.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=i),!function(t){for(;t;){var i=t,e=i.closed,s=i.destination,n=i.isStopped;if(e||n)return!1;t=s&&s instanceof Z?s:null}return!0}(t)?console.warn(i):t.error(i)}},t.prototype.forEach=function(t,i){var e=this;return new(i=rt(i))(function(i,s){var n;n=e.subscribe(function(i){try{t(i)}catch(t){s(t),n&&n.unsubscribe()}},s,i)})},t.prototype.Kc=function(t){var i=this.source;return i&&i.subscribe(t)},t.prototype[it]=function(){return this},t.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return 0===t.length?this:st(t)(this)},t.prototype.toPromise=function(t){var i=this;return new(t=rt(t))(function(t,e){var s;i.subscribe(function(t){return s=t},function(t){return e(t)},function(){return t(s)})})},t.create=function(i){return new t(i)},t}();function rt(t){if(t||(t=q.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var ht=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.scheduler=i,s.work=e,s.pending=!1,s}return V(i,t),i.prototype.schedule=function(t,i){if(void 0===i&&(i=0),this.closed)return this;this.state=t;var e=this.id,s=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(s,e,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(s,this.id,i),this},i.prototype.requestAsyncId=function(t,i,e){return void 0===e&&(e=0),setInterval(t.flush.bind(t,this),e)},i.prototype.recycleAsyncId=function(t,i,e){if(void 0===e&&(e=0),null!==e&&this.delay===e&&!1===this.pending)return i;clearInterval(i)},i.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this.tu(t,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype.tu=function(t,i){var e=!1,s=void 0;try{this.work(t)}catch(t){e=!0,s=!!t&&t||new Error(t)}if(e)return this.unsubscribe(),s},i.prototype.oh=function(){var t=this.id,i=this.scheduler,e=i.actions,s=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&e.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null},i}(function(t){function i(i,e){return t.call(this)||this}return V(i,t),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),this},i}(X)),at=function(){function t(i,e){void 0===e&&(e=t.now),this.SchedulerAction=i,this.now=e}return t.prototype.schedule=function(t,i,e){return void 0===i&&(i=0),new this.SchedulerAction(this,t).schedule(e,i)},t.now=function(){return Date.now()},t}(),ot=new(function(t){function i(e,s){void 0===s&&(s=at.now);var n=t.call(this,e,function(){return i.delegate&&i.delegate!==n?i.delegate.now():s()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return V(i,t),i.prototype.schedule=function(e,s,n){return void 0===s&&(s=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,s,n):t.prototype.schedule.call(this,e,s,n)},i.prototype.flush=function(t){var i=this.actions;if(this.active)i.push(t);else{var e;this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=i.shift());if(this.active=!1,e){for(;t=i.shift();)t.unsubscribe();throw e}}},i}(at))(ht);function ct(t,i){var e;return void 0===t&&(t=0),void 0===i&&(i=ot),(G(e=t)||!(e-parseFloat(e)+1>=0)||t<0)&&(t=0),i&&"function"==typeof i.schedule||(i=ot),new nt(function(e){return e.add(i.schedule(ut,t,{subscriber:e,counter:0,period:t})),e})}function ut(t){var i=t.subscriber,e=t.counter,s=t.period;i.next(e),this.schedule({subscriber:i,counter:e+1,period:s},s)}const lt=100;class dt{static setTimeout(t,i=0){return this.iu||this.eu(),this.su(t,i,!0)}static setInterval(t,i=0){return this.iu||this.eu(),this.su(t,i,!1)}static clearTimeout(t){this.nu.delete(t)}static clearInterval(t){this.nu.delete(t)}static eu(){this.iu=ct(lt),this.iu.subscribe(()=>this.ru())}static hu(t){try{t.callback()}catch(t){Object(n.a)({message:"TimerService_error",callStack:t.stack,exception:t.message,throttle:1,level:h.ProtoLoggingLevelEnum.INFO})}}static ru(){const t=(new Date).getTime(),i=[];for(const[e,s]of this.nu)t-s.startTime<s.duration*(s.intervalTimesCalled+1)||(this.hu(s),s.isTimeout?i.push(e):s.intervalTimesCalled++);for(const t of i)this.nu.delete(t)}static su(t,i,e){const s=++this.au;return this.nu.set(s,{startTime:(new Date).getTime(),isTimeout:e,callback:t,duration:i,intervalTimesCalled:0}),s}}dt.nu=new Map,dt.au=0;var ft,pt,bt=e(14),vt=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),mt=function(t){function i(i,e){var s=t.call(this)||this;return s.subject=i,s.subscriber=e,s.closed=!1,s}return V(i,t),i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,i=t.observers;if(this.subject=null,i&&0!==i.length&&!t.isStopped&&!t.closed){var e=i.indexOf(this.subscriber);-1!==e&&i.splice(e,1)}}},i}(X),gt=function(t){function i(i){var e=t.call(this,i)||this;return e.destination=i,e}return V(i,t),i}(Z),yt=function(t){function i(){var i=t.call(this)||this;return i.observers=[],i.closed=!1,i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return V(i,t),i.prototype[K]=function(){return new gt(this)},i.prototype.lift=function(t){var i=new wt(this,this);return i.operator=t,i},i.prototype.next=function(t){if(this.closed)throw new vt;if(!this.isStopped)for(var i=this.observers,e=i.length,s=i.slice(),n=0;n<e;n++)s[n].next(t)},i.prototype.error=function(t){if(this.closed)throw new vt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var i=this.observers,e=i.length,s=i.slice(),n=0;n<e;n++)s[n].error(t);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new vt;this.isStopped=!0;for(var t=this.observers,i=t.length,e=t.slice(),s=0;s<i;s++)e[s].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype.Zc=function(i){if(this.closed)throw new vt;return t.prototype.Zc.call(this,i)},i.prototype.Kc=function(t){if(this.closed)throw new vt;return this.hasError?(t.error(this.thrownError),X.EMPTY):this.isStopped?(t.complete(),X.EMPTY):(this.observers.push(t),new mt(this,t))},i.prototype.asObservable=function(){var t=new nt;return t.source=this,t},i.create=function(t,i){return new wt(t,i)},i}(nt),wt=function(t){function i(i,e){var s=t.call(this)||this;return s.destination=i,s.source=e,s}return V(i,t),i.prototype.next=function(t){var i=this.destination;i&&i.next&&i.next(t)},i.prototype.error=function(t){var i=this.destination;i&&i.error&&this.destination.error(t)},i.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},i.prototype.Kc=function(t){return this.source?this.source.subscribe(t):X.EMPTY},i}(yt);class xt{constructor(t=0,i=1e3,e=1){this.timerDuration=t,this.ou=i,this.cu=e,this.uu=0,this.lu=null,this.du=!1,this.fu=!1,this.pu=new yt,this.bu=new yt,this.vu=new yt,this.mu=[{event:D.FirstQuartile,quartile:1},{event:D.SecondQuartile,quartile:2},{event:D.ThirdQuartile,quartile:3},{event:D.FourthQuartile,quartile:4}],this.gu=null,this.yu=()=>{this.wu(),this.pu.next(),this.xu(),this.Su=(new Date).getTime()},t||this.disable()}start(){this.fu=!0,null===this.lu&&this.Ou()}stop(){this.fu=!1,null!==this.lu&&(this.wu(),this.ku())}reset(t){t&&(this.timerDuration=t),this.uu=0,this.du=!1,this.gu=null,(null!==this.lu||this.fu)&&(this.ku(),this.Ou())}get timeElapsed(){return this.uu}get timeRemaining(){return this.timerDuration-this.uu}disable(){this.du=!0,this.ku()}get onTimeUpdate(){return this.pu.asObservable()}get onTimeElapsed(){return this.bu.asObservable()}get onQuartile(){return this.vu.asObservable()}wu(){this.uu+=(new Date).getTime()-this.Su}Ou(){this.du||(this.xu(),this.Su=(new Date).getTime(),this.lu=dt.setInterval(this.yu,this.ou))}ku(){dt.clearInterval(this.lu),this.lu=null}_u(){this.disable(),this.bu.next(),this.ju(this.uu,this.timerDuration,this.cu),this.uu=0}xu(){this.uu/$.f>=this.timerDuration/$.f&&this._u()}ju(t,i,e){const s=Object(bt.h)(t/$.f,e);this.Au(s,i)}Au(t,i){const e=Math.floor(Object(bt.g)(0,i,0,4,t));this.gu<=e&&(this.mu.forEach(({event:t,quartile:i})=>{i===e&&this.vu.next(t)}),this.gu++)}}function St(t=[]){t.forEach(t=>t.unsubscribe())}!function(t){t[t.Unknown=0]="Unknown",t[t.TimeoutBetweenAds=1]="TimeoutBetweenAds"}(ft||(ft={}));class Ot extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.controlData=e,this.app=s,this.Iu=0,this.Cu=0,this.Tu=null,this.Pu=new Map,this.currentPlayerAdSlot=R.ProtoAdSlotsEnum.PreRoll,this.Mu={stopped:!1,viewability:!1,inImpression:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,inAppRecyclerViewViewability:!1},this.firstAdBreakStarted=!1,this.Eu=!1,this.viewabilityStateChanged(i),this.onResize(this.controlData.playerDimensions.width,this.controlData.playerDimensions.height),this.controlData.totalAdBreakLength&&(this.Lu=new xt(this.controlData.totalAdBreakLength),this.Pu.set(this.Lu,[this.Lu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,B.TotalAdBreakLengthExpired)})]))}Ru(){return this.Cu>=this.controlData.numberOfMidRolls&&-1!==this.controlData.numberOfMidRolls}Bu(t){if(t)return t.stop(),St(this.Pu.get(t)),this.Pu.delete(t),null}Du(){if(this.Eu){this.Eu=!1;const t={[h.ProtoAdSlotsEnum.PreRoll]:h.ProtoAdBreakTypeEnum.PreRoll,[h.ProtoAdSlotsEnum.MidRoll]:h.ProtoAdBreakTypeEnum.MidRoll,[h.ProtoAdSlotsEnum.PostRoll]:h.ProtoAdBreakTypeEnum.PostRoll};this.mediator.publish(this,B.AdOpportunity,{payload:{adBreakType:t[this.currentPlayerAdSlot]}})}this.mediator.publish(this,B.EnableAds),this.Lu&&this.Lu.start()}canEnableAds(){return this.Mu.stopped||this.Mu.viewability||this.Mu.inImpression||this.Mu.forceDisable||this.Mu.zeroDimension||this.Mu.isAppBackgrounded||this.Mu.inAppRecyclerViewViewability?{enableAds:!1,disableReason:ft.Unknown}:this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll&&this.Ru()?{enableAds:!1,disableReason:ft.Unknown}:this.currentPlayerAdSlot!==R.ProtoAdSlotsEnum.MidRoll&&this.Iu>0?{enableAds:!1,disableReason:ft.Unknown}:{enableAds:!0,disableReason:ft.Unknown}}toggleEnableAds(){const t=this.canEnableAds();t.enableAds?this.Du():(this.mediator.publish(this,B.DisableAds,{payload:t.disableReason}),this.Lu&&!this.Mu.inImpression&&this.Lu.stop())}startAds(){this.Mu.stopped=!1,this.toggleEnableAds()}forceRecheck(){this.toggleEnableAds()}onAdImpression(t){this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll&&(this.firstAdBreakStarted||(this.firstAdBreakStarted=!0)),this.Mu.inImpression=!0,this.toggleEnableAds(),this.Fu(),this.$u();const i=this.Uu(t.payload.adSkipMode,t.payload.adDuration);i>0&&(this.Tu=setTimeout(()=>{this.mediator.publish(this,B.ForceStopAdSlot)},i*$.f))}$u(){this.controlData.maxAdPodDuration&&!this.Vu&&(this.Vu=new xt(this.controlData.maxAdPodDuration),this.Vu.start(),this.Pu.set(this.Vu,[this.Vu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,B.ForceStopAdPod)}),this.Vu.onTimeUpdate.subscribe(()=>{const t=this.Vu.timeRemaining;this.mediator.publish(this,B.AdPodRemainingTime,{payload:{remainingTime:t}})})]))}Fu(){this.controlData.maxAdSlotDuration&&!this.Nu&&(this.Nu=new xt(this.controlData.maxAdSlotDuration),this.Nu.start(),this.Pu.set(this.Nu,[this.Nu.onTimeElapsed.subscribe(()=>{this.mediator.publish(this,B.ForceStopAdSlot)})]))}Uu(t,i){switch(this.controlData.playerAdsSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan:if((t===h.ProtoAdSkipMode.Never||t===h.ProtoAdSkipMode.IfLongerThan31Sec)&&!i)return this.controlData.adsMustBeSkippableIfLongerThan;if(t===h.ProtoAdSkipMode.Never&&i>this.controlData.adsMustBeSkippableIfLongerThan)return this.controlData.adsMustBeSkippableIfLongerThan;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t===h.ProtoAdSkipMode.IfLongerThan31Sec&&!i)return F.d}return 0}onAdFinished(t,i=!1){this.Nu=this.Bu(this.Nu),i||(this.Vu=this.Bu(this.Vu),this.currentPlayerAdSlot===R.ProtoAdSlotsEnum.MidRoll?this.Cu++:this.Iu++),this.Ru()&&!i&&this.mediator.publish(this,B.MidRollCapped),t&&(this.Eu=!0),this.Mu.inImpression=!1,i?this.Du():this.toggleEnableAds(),clearTimeout(this.Tu)}onAdPause(){this.Vu&&this.Vu.stop(),this.Nu&&this.Nu.stop(),this.Lu&&this.Lu.stop()}onAdPlay(){this.Vu&&this.Vu.start(),this.Nu&&this.Nu.start(),this.Lu&&this.Lu.start()}onStop(){this.currentPlayerAdSlot=null,this.Mu.stopped=!0,this.toggleEnableAds()}onAdStateChange(t,i,e){this.controlData.maxAdSlotDuration=i.maxAdSlotDuration,this.controlData.maxAdPodDuration=i.maxAdPodDuration,t===this.currentPlayerAdSlot&&t===R.ProtoAdSlotsEnum.MidRoll||(null===t&&this.Hu===R.ProtoAdSlotsEnum.MidRoll||(this.Eu=!0),t!==R.ProtoAdSlotsEnum.MidRoll&&(this.Iu=0,this.firstAdBreakStarted=!1),this.currentPlayerAdSlot=t,this.Hu=t,this.startAds())}contentChanged(){this.Cu=0,this.firstAdBreakStarted=!1,this.toggleEnableAds()}viewabilityStateChanged(t,i=!1,e=!1){this.qu=t,this.controlData.viewabilityPolicy===R.ProtoAdViewabilityPolicy.Strict&&(this.Mu.viewability=!t),e||this.toggleEnableAds()}setToggleAdsReason(t){this.Mu.isAppBackgrounded=t.isAppBackgrounded,this.Mu.inAppRecyclerViewViewability=t.inAppRecyclerViewViewability,this.toggleEnableAds()}disableAdvertising(){this.Mu.forceDisable=!0,this.toggleEnableAds()}enableAdvertising(){this.Mu.forceDisable=!1,this.toggleEnableAds()}destroy(){this.Lu&&this.Lu.disable(),clearTimeout(this.Tu),this.Nu=this.Bu(this.Nu),this.Vu=this.Bu(this.Vu)}get inView(){return this.qu}onResize(t,i){this.Mu.zeroDimension=0===t||0===i,this.toggleEnableAds()}}!function(t){t[t.Portrait=0]="Portrait",t[t.Landscape=1]="Landscape"}(pt||(pt={}));var kt=pt;const _t=1.3;class jt{constructor(){this.zu={},this.Wu=[]}getImage(t,i,e,s,n="",r=!1){return this.Gu=t,this.Ju=Object(C.h)(i)?i:"",this.Qu=e,this.Xu=s,this.Yu=n,this.Ku=r,this.Zu()}Zu(){const t=this.tl();if(t)return t;const i=this.Gu+this.Yu,e=new Image;return e.src=i,e.alt=this.Ju,this.zu[this.Gu]=this.zu[this.Gu]||{},this.zu[this.Gu][this.Qu]=this.zu[this.Gu][this.Qu]||{},this.zu[this.Gu][this.Qu][this.Xu]=this.zu[this.Gu][this.Qu][this.Xu]||{},this.zu[this.Gu][this.Qu][this.Xu][this.Yu]=e,e}tl(){const t=this.il();if(t)return t;if(!this.Ku)return;this.el();const i=this.sl();if(i)return i;const e=this.nl();return e||void 0}el(){const t=[];if(!this.zu[this.Gu])return void(this.Wu=[]);const i=this.zu[this.Gu],e=this.Qu>this.Xu?kt.Landscape:kt.Portrait;Object.keys(i).forEach(s=>{const n=parseInt(s,10);Object.keys(i[s]).filter(t=>!!i[s][t]).forEach(i=>{const s=parseInt(i,10);if((n>s?kt.Landscape:kt.Portrait)!==e)return;const r={area:n*s,img:this.rl(this.Gu,n,s)};t.push(r)})}),this.Wu=[...t]}rl(t,i,e){if(this.zu[t]&&this.zu[t][i]&&this.zu[t][i][e])return this.zu[t][i][e][Object.keys(this.zu[t][i][e])[0]]}il(){return this.zu[this.Gu]&&this.zu[this.Gu][this.Qu]&&this.zu[this.Gu][this.Qu][this.Xu]&&this.zu[this.Gu][this.Qu][this.Xu][this.Yu]}sl(){if(0===this.Wu.length)return;const t=this.Qu*this.Xu,i=this.Wu.filter(({area:i})=>i>t).sort((t,i)=>t.area-i.area);return 0!==i.length?i[0].img:void 0}nl(){if(0===this.Wu.length)return;const t=this.Qu*this.Xu,i=this.Wu.filter(({area:i})=>i<t&&t/i<=_t).sort((t,i)=>i.area-t.area);return 0!==i.length?i[0].img:void 0}}var At=e(52);const It={Play:"play",Pause:"pause",Mute:"mute",Unmute:"unmute",Canplay:"canplay",Ended:"ended",Timeupdate:"timeupdate",Seeking:"seeking",Seeked:"seeked",Volumechange:"volumechange",Durationchange:"durationchange",Fullscreen:"fullscreen",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Error:"error"};var Ct,Tt,Pt;!function(t){t[t.Auto=0]="Auto",t[t.Strict=1]="Strict"}(Ct||(Ct={})),function(t){t[t.PlayingState=0]="PlayingState",t[t.PausedState=1]="PausedState",t[t.PrerollState=2]="PrerollState",t[t.PostrollState=3]="PostrollState",t[t.StoppedState=4]="StoppedState",t[t.ReplayState=5]="ReplayState",t[t.HiddenState=6]="HiddenState",t[t.BufferingState=7]="BufferingState",t[t.LiveStreamStarting=8]="LiveStreamStarting",t[t.LiveStreamEnded=9]="LiveStreamEnded",t[t.LiveStreamStopped=10]="LiveStreamStopped",t[t.LiveStreamNotSupported=11]="LiveStreamNotSupported"}(Tt||(Tt={})),function(t){t.H264="h264",t.Hevc="hevc"}(Pt||(Pt={}));const Mt={PlayError:"playError",NewVideo:"newVideo",Buffering:"buffering",Buffered:"buffered",LevelSwitching:"levelSwitching",EndOfStream:"endOfStream",LiveStreamNotPlayable:"liveNotPlayable"},Et={Change:"VideoQualityChanged",CurrentQuality:"CurrentQuality",Loaded:"QualityListLoaded"};var Lt;!function(t){t[t.Low144p=144]="Low144p",t[t.Low240p=240]="Low240p",t[t.Medium360p=360]="Medium360p",t[t.Medium480p=480]="Medium480p",t[t.High720p=720]="High720p",t[t.High1080p=1080]="High1080p"}(Lt||(Lt={}));const Rt=720,Bt=5e3;function Dt(t,i){const e=t.length-1;return{currentIndex:i,nextIndex:i===e?0:i+1,prevIndex:0===i?e:i-1,firstIndex:0,lastIndex:e}}class Ft{constructor(t){this.hl=t,this.al={breakType:h.ProtoAdBreakTypeEnum.None,currentPodNumber:0,maxAdSlotDuration:0,maxAdPodDuration:0,totalNumberOfAdSlots:0},this.ol=null}setNewBreak(t){this.hl.forEach(i=>{i.types.forEach(e=>{(function(t,i){let e=!1;switch(t){case h.ProtoAdBreakTypeEnum.PreRoll:e=i===h.ProtoAdSlotsEnum.PreRoll;break;case h.ProtoAdBreakTypeEnum.MidRoll:e=i===h.ProtoAdSlotsEnum.MidRoll;break;case h.ProtoAdBreakTypeEnum.PostRoll:e=i===h.ProtoAdSlotsEnum.PostRoll}return e})(e,t)&&(this.al.currentPodNumber=i.numberOfAdSlots,this.al.maxAdSlotDuration=i.maxAdSlotDuration,this.al.maxAdPodDuration=i.maxAdPodDuration,this.al.totalNumberOfAdSlots=i.numberOfAdSlots)})})}adStarted(){this.cl(),0===this.al.currentPodNumber&&(this.al.currentPodNumber=this.al.totalNumberOfAdSlots),this.al.currentPodNumber--}endPod(){this.cl(),this.al.currentPodNumber=0}enterPodTimeout(t){this.cl(),this.ol=setTimeout(()=>{this.cl(),t()},Bt)}isInAdPod(){return this.al.currentPodNumber>0}isCurrentBreakInPod(){return this.al.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.al.maxAdSlotDuration}getMaxAdPodDuration(){return this.al.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.hl.length;i++){if(0===this.hl[i].maxAdSlotDuration)return 0;t=Math.max(t,this.hl[i].maxAdSlotDuration)}return t}getCurrentSlotIndex(){return this.al.totalNumberOfAdSlots-this.al.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.al.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.al.totalNumberOfAdSlots}isInPodTimeout(){return!!this.ol}cl(){clearTimeout(this.ol),this.ol=null}}var $t=e(7),Ut=e(49),Vt=e(22);const Nt=["com.accuweather.android"],Ht=.05*$.f;class qt extends o.a{constructor(t,i,e){super(),this.mediator=t,this.Ws=i,this._appSettings=e,this.ul=.01,this.ll=.5,this.dl=2e3,this.fl=0,this.pl=!1,this.bl=!1,this.vl=!1,this.ml=!1,this.gl=!1,this.yl=!1,this.qu=!1,this.eh=h.ProtoAdSlotsEnum.PreRoll,this.wl=!1,this.Sl=!1,this.Ol=!1,this.kl=!1,this._l=!1,this.jl=!1,this.Al=!1,this.Il={[w.b.AdRemainingTimeChange]:t=>{var i;this._l&&this.app.config.isInAppAndroid&&(null===(i=this.adHandler)||void 0===i||i.pause())},[w.b.AdImpression]:t=>{this.Cl.onAdImpression(t),this.Tl(),this.mediator.publish(this,T.b.AdImpression,t);const{adSourceData:i,customAdData:e}=t.payload;this.Pl(i,e)},[w.b.AdStopped]:t=>{this.mediator.publish(this,T.b.AdStopped,t),this.Ml(),this.El(),this.app.services.EventsStorageService.emitAdStopped(),this.qu&&this.Ll()},[w.b.AdError]:t=>{this.adHandler.inImpression&&this.Ml(),this.mediator.publish(this,T.b.AdError,t),this.app.services.EventsStorageService.emitAdError()},[w.b.AdSkipped]:t=>{this.mediator.publish(this,T.b.AdSkipped,t),this.app.services.EventsStorageService.emitAdSkipped();this.floatingModule&&(this.floatingModule.enabled=!0),this.Ml(!0),this.El(),this.qu&&this.Ll()},[w.b.AdPaused]:t=>{this.Cl.onAdPause(),this.app.services.TrackingService.setSessionPlayback(!1),this.app.services.EventsStorageService.emitAdPaused(),this.mediator.publish(this,T.b.AdPause,t)},[w.b.AdPlaying]:t=>{this.Cl.onAdPlay(),this.app.services.TrackingService.setSessionPlayback(!0),this.app.services.EventsStorageService.emitAdPlaying(),this.mediator.publish(this,T.b.AdPlay,t)},[w.b.AdVideoFirstQuartile]:t=>{this.mediator.publish(this,T.b.AdCompleted25,t),this.app.services.EventsStorageService.emitAdVideoFirstQuartile()},[w.b.AdVideoMidpoint]:t=>{this.mediator.publish(this,T.b.AdCompleted50,t),this.app.services.EventsStorageService.emitAdVideoMidpoint()},[w.b.AdVideoThirdQuartile]:t=>{this.mediator.publish(this,T.b.AdCompleted75,t),this.app.services.EventsStorageService.emitAdVideoThirdQuartile()},[w.b.AdVideoComplete]:t=>{this.mediator.publish(this,T.b.AdCompleted100,t),this.app.services.EventsStorageService.emitAdVideoComplete()},[w.b.AdClickThru]:t=>{this.mediator.publish(this,T.b.AdClick,t),this.app.services.EventsStorageService.emitAdClickThru()},[w.b.AdInteraction]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserAcceptInvitation]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserClose]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdUserMinimize]:()=>{this.app.services.EventsStorageService.emitAdInteraction()},[w.b.AdVideoStart]:t=>{const{adSourceData:i}=t.payload,e={duration:i&&i.length,mediaPlayerVolume:this.getVolume()};this.app.services.EventsStorageService.emitAdVideoStart(e)},[w.b.AdLoaded]:t=>{var i;const{adLoadedData:e}=t.payload;(null===(i=e)||void 0===i?void 0:i.skipOffset)<0&&(e.skipOffset=void 0);const s=this.Rl(e);this.app.services.EventsStorageService.emitAdLoaded(s)},[w.b.AdVolumeChange]:()=>{this.app.services.EventsStorageService.emitAdVolumeChange()}},this.Bl=t=>i=>{const e=this.Il[t];e&&e(i)},this.Dl=t=>{this.Sl=t,t&&(this.app.services.ViewabilityService.off(this.$playerContainer,this.Dl),this.Fl())},this.$l=t=>{t&&this.adHandler&&!this.kl&&setTimeout(()=>{this.adHandler.resumeWithoutUserInteraction()},Ht)},this.Ul=()=>{!this.bl&&this.Vl()&&(this.mediator.publish(this,c.b.CanStart),this.app.services.ResizeObserver.off(this.$experienceContainer,this.Ul))},this.Nl=({payload:{playback:t,isFullscreenClose:i}})=>{this.floatingModule&&Object(C.a)(t)&&!i&&(this.floatingModule.enabled=t)},this.Hl=()=>{this.ql(1)},this.zl=()=>{this.ql(0)},this.Wl=t=>{this.Nl(t);const{playback:i}=t.payload;Object(C.a)(i)&&(i?(this.app.services.EventsStorageService.emitAdPlay(),this.kl=!1):(this.app.services.EventsStorageService.emitAdPause(),this.kl=!0))},this.Gl=new jt}Jl(){}Pl(t,i){this.app.services.EventsStorageService.emitAdImpression(t,i)}El(){this.app.services.EventsStorageService.emitAdComplete()}Ql(){}Ll(){}Yl(){}Kl(){}Zl(){}td(){}ed(){}sd(t){const i={state:t};this.app.services.EventsStorageService.emitAdStateChange(i)}nd(){const{clientWidth:t,clientHeight:i}=this.$playerContainer,e={width:t,height:i};this.app.services.EventsStorageService.emitPlayerResized(e)}rd(){this.app.services.EventsStorageService.emitOnEnterFullscreen()}hd(){this.app.services.EventsStorageService.emitOnExitFullscreen()}od(){this.app.services.EventsStorageService.emitOnPlayerCollapsed()}ud(){this.app.services.EventsStorageService.emitOnPlayerExpanded()}ld(t){this.dd(t),this.fd(t),this.pd(t),this.eh=t,this.bd(t)}fd(t){this.adHandler&&this.adHandler.adStateChange(t,this.vd.getMaxAdSlotDuration())}pd(t){this.Cl.onAdStateChange(t,{maxAdPodDuration:this.vd.getMaxAdPodDuration(),maxAdSlotDuration:this.vd.getMaxAdSlotDuration()})}dd(t){this.vd.setNewBreak(t)}bd(t){this.sd(At.b[t])}gd(){this.adHandler&&this.adHandler.contentChanged(),this.Cl.contentChanged()}yd(){this.adHandler=this.wd(),this.xd(),this.relay(T.b.ImpressionPrice,this.adHandler,this,this.mediator),this.subscribe(c.b.UserInteraction,this.adHandler,this.Wl),this.subscribe(M.DetachedFromDom,this.adHandler,()=>{this.app.services.GlobalDomUtilsService.isDetachedFromDOM(this.$experienceContainer)?this.triggerDestroy():(this.unsubscribeAll(this.adHandler),this.adHandler.destroy(),this.adHandler=null,Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"only_adHandler_destroyed",sendMaxLog:!1,throttle:1}))});const t=()=>{this.app.services.TrackingService.setAdStart(),this.Ol=!0,this.kl=!1,this.Fl(),this.unsubscribe(E.AdsEnabled,this.adHandler,t)};this.subscribe(E.AdsEnabled,this.adHandler,t),this.subscribe(M.AdSlotResized,this.adHandler,({payload:{width:t,height:i}})=>{this.Cl.onResize(t,i)})}xd(){Object.keys(w.b).forEach(t=>{this.subscribe(w.b[t],this.adHandler,i=>{const e=w.b[t];this.Bl(e)(i),this.mediator.publish(this,e,i)})})}Ml(t=!1){let i=this.vd.isInAdPod();t&&(i=!1,this.vd.endPod()),this.Cl.onAdFinished(this.adHandler.inImpression,i),this.Sd(),this.Od.isCloseButton&&this.adHandler&&this.adHandler.firstAdShown&&(this.Od.closeButtonMode!==h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||Object(j.u)(this.$playerContainer,d.g.CloseHover)||Object(j.a)(this.$playerContainer,d.g.CloseHover),this.Od.floatingSettings.floatingCloseButtonMode!==h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd||Object(j.u)(this.$playerContainer,d.g.CloseFloatHover)||Object(j.a)(this.$playerContainer,d.g.CloseFloatHover))}Tl(){this.vd.adStarted(),this.adHandler.show()}Sd(){this.adHandler.hide()}kd(t){this.adHandler.enterAdPodLoadingState(),this.vd.enterPodTimeout(()=>{this.vd.endPod(),t()})}_d(){Object(j.i)(this.$playerContainer),this.Cl=this.jd(),this.subscribe(B.EnableAds,this.Cl,()=>{this.adHandler&&this.adHandler.enableAds()}),this.subscribe(B.DisableAds,this.Cl,t=>{this.adHandler&&this.adHandler.disableAds(t.payload)}),this.subscribe(B.ForceStopAdSlot,this.Cl,()=>{this.adHandler&&this.adHandler.stopAd("forceStopAdSlot")}),this.subscribe(B.ForceStopAdPod,this.Cl,()=>{if(this.adHandler)if(this.adHandler.inImpression)this.vd.endPod(),this.adHandler.stopAd("forceStopAdPod");else{const t=!0;this.Ml(t)}}),this.subscribe(B.AdPodRemainingTime,this.Cl,t=>{this.adHandler&&this.adHandler.updatePodRemainingTime(t.payload.remainingTime)}),this.subscribe(B.AdOpportunity,this.Cl,t=>{const i=t.payload;this.app.services.TrackingService.trackAdOpportunity(i),this.adHandler&&this.adHandler.newAdOpportunity()})}Id(){this.app.services.ViewabilityService.on(this.$playerContainer,this.Dl,{threshold:this.ll,callbackDelay:this.dl}),this.app.services.ViewabilityService.on(this.$playerContainer,(t,i)=>this.Mc(t,i),{threshold:this.ul}),this.app.services.ViewabilityService.subscribe(T.d.OmidViewabilityThreshold,t=>{this.mediator.publish(this,T.d.OmidViewabilityThreshold,{payload:{threshold:t}})}),this.app.config.os.os===Vt.b.Ios&&this.app.services.PageFocusService.on(this.$l)}Fl(){this.Sl&&this.Ol&&this.mediator.publish(this,c.c.SessionView)}Mc(t,i=!1){var e;const{isRecyclerViewIntegration:s}=this.app.config;this.Cl.setToggleAdsReason({isAppBackgrounded:i,inAppRecyclerViewViewability:s&&!t}),this.app.config.isInApp&&(i?(this._l=!0,this.Al?this.jl=!0:this.jl=!1,this.Cd=this.getVolume(),this.setVolume(0),null===(e=this.adHandler)||void 0===e||e.disableAds(ft.Unknown),this.pause()):(this.Cd&&(this.setVolume(this.Cd),this.Cd=null),this._l&&(this._l=!1,this.jl||this.play()))),this.qu=t,this.mediator.publish(this,T.b.IsViewable,{payload:t}),this.Cl.viewabilityStateChanged(this.checkFloatingViewability(t),this.vd.isInAdPod(),this.vd.isInPodTimeout()),this.app.services.TrackingService.setSessionViewability(t)}checkFloatingViewability(t){const i=this.app.services.ViewabilityService.getIsTabInFocus();return!(t||!this.floatingModule||!this.floatingModule.isInFloating||!i)||t}zr(){const t=this.$playerContainer.clientWidth,i=this.$playerContainer.clientHeight;if(this.adHandler){const e=this.wl?w.a.Fullscreen:w.a.Normal;this.adHandler.resizeAd(t,i,e)}else this.Cl.onResize(t,i);this.breakPointsHandler.updateWidth(t),setTimeout(()=>{this.mediator.publish(this,T.b.SizeChanged,{payload:{width:t,height:i}}),this.Td()})}Td(){this.wl||this.nd()}Pd(){this.app.services.ResizeObserver.on(this.$playerContainer,()=>{this.zr()})}Ed(){this.wl=!0,this.app.services.InteractionService.disableScrollEvent(),this.rd(),this.adHandler&&this.adHandler.setVastViewMode(w.a.Fullscreen)}Ld(){this.wl=!1,this.app.services.InteractionService.enableScrollEvent(),this.hd(),this.adHandler&&this.adHandler.setVastViewMode(w.a.Normal)}Rd(){const t=`<cnx class='${d.c}'></cnx>`,i=this.app.services.GlobalDomUtilsService.createElementByString(t);return this.Bd(i),i}Bd(t){Object(j.Q)(t,{"padding-bottom":`${this.Dd()}%`})}Dd(){return this.Od.playerSize.ratioHeight/this.Od.playerSize.ratioWidth*100}Fd(){this.subscribe(m.EnterStart,this.floatingModule,()=>{this.mediator.publish(this,T.c.PlayerFloatChanged,{payload:y.Float})}),this.subscribe(m.ExitStop,this.floatingModule,()=>{this.mediator.publish(this,T.c.PlayerFloatChanged,{payload:y.Embed})}),this.subscribe(m.EnterStop,this.floatingModule,()=>{this.Mc(!0)})}$d(){this.floatingModule=new I(this,this.app.services.ViewabilityService,this.app.services.ResizeObserver,this.$playerContainer,this.Od.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService,this.Ud),this.Fd(),this.floatingModule.start()}Vd(){const t=new P(this,this.app.services.ResizeObserver,this.$experienceContainer,this.Od.floatingSettings,this.app.config.device,this.app.services.GlobalDomUtilsService);this.subscribe(m.EnterStop,t,()=>{this.app.services.ViewabilityService.triggerRecheck(this.$playerContainer)}),t.start()}setNewVolume(t){this.adHandler&&this.adHandler.setVolume(t)}Nd(){this.Hd(),this.adHandler&&this.qd(this.adHandler)}qd(t){this.subscribe(c.b.UserInteraction,t,({payload:{volume:t}})=>{t&&this.zd()})}Dr(t){this.mediator.publish(this,T.b.VolumeChanged,{payload:t}),this.app.services.EventsStorageService.emitVolumeChange(t)}ql(t){this.getVolume()!==t&&this.setNewVolume(t)}Hd(){this.pl=!0,this.$playerContainer.addEventListener("mouseover",this.Hl),this.$playerContainer.addEventListener("mouseout",this.zl)}zd(){this.pl&&(this.pl=!1,this.$playerContainer.removeEventListener("mouseover",this.Hl),this.$playerContainer.removeEventListener("mouseout",this.zl))}Wd(){this.breakPointsHandler=new L(this.$playerContainer,this.app.config.device,this.Gd,this.Jd),this.breakPointsHandler.updateWidth(this.$playerContainer.clientWidth)}Qd(){if(this.Od.isCloseButton){switch(this.subscribe(_[_.Close],this.adHandler,()=>{this.handleClose()}),this.Od.closeButtonMode){case h.ProtoPlayerCloseButtonMode.AlwaysOn:Object(j.a)(this.$playerContainer,d.g.CloseOn);break;case h.ProtoPlayerCloseButtonMode.Off:Object(j.a)(this.$playerContainer,d.g.CloseOff);break;case h.ProtoPlayerCloseButtonMode.OnHover:Object(j.a)(this.$playerContainer,d.g.CloseHover)}switch(this.Od.floatingSettings.floatingCloseButtonMode){case h.ProtoPlayerCloseButtonMode.AlwaysOn:Object(j.a)(this.$playerContainer,d.g.CloseFloatOn);break;case h.ProtoPlayerCloseButtonMode.Off:Object(j.a)(this.$playerContainer,d.g.CloseFloatOff);break;case h.ProtoPlayerCloseButtonMode.OnHover:Object(j.a)(this.$playerContainer,d.g.CloseFloatHover)}}}Rl(t){const{skipOffset:i}=t;return{isAutoPlay:this.Od.playbackMode===h.ProtoPlayerPlaybackModeEnum.Autoplay,skipOffset:i,isSkippable:Object(C.d)(i)}}Xd(){this.Ol=!0,this.app.services.TrackingService.setContentStart(),this.Fl()}Vl(){const{clientWidth:t,clientHeight:i}=this.$experienceContainer;return!Object(bt.f)({width:t,height:i})||this.Yd()}Yd(){return Nt.includes(this.app.config.bundleID)}Kd(t){try{const{display:i,width:e,height:s,flex:n,maxWidth:r,minWidth:h}=this.app.services.GlobalDomUtilsService.getComputedStyle(t),{width:a,height:o}=t.getBoundingClientRect(),c={display:i,compWidth:e,boundWidth:a,compHeight:s,boundHeight:o,flex:n,maxWidth:r,minWidth:h};return{type:t.nodeName,styles:JSON.stringify(c)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}Zd(){if(!Object($t.l)([95,5]))return;const t={parent:this.Kd(this.$experienceContainer.parentElement),main:this.Kd(this.$experienceContainer)};Object(n.a)({message:"BaseExperience_invalid_dimensions",level:h.ProtoLoggingLevelEnum.INFO,exception:JSON.stringify(t)})}tf(){this.vd=new Ft(this.Od.adBreaks)}Eo(t,i,e){this.Od=t,this.app=i,this.$experienceContainer=e,this.Jl(),this.app.services.ViewabilityService.setViewableThreshold(this.fl),this.generateHTML(),this.tf(),this.app.services.ResizeObserver.on(this.$experienceContainer,this.Ul),this.Vl()?this.mediator.publish(this,c.b.CanStart):this.Zd()}start(){this.bl=!0,Object(j.a)(this.$experienceContainer,d.b.MainContainerFlex),this.mediator.publish(this,c.c.SessionRendered),this.Wd(),this.Pd(),this.Od.floatingSettings.floatingMode===h.ProtoPlayerFloatingMode.Always?this.Vd():(this.nd(),this.$d()),this.Id(),this.Od.lineItemSettings.lineItems.length>0&&!this.Od.disableAdvertising&&!this.Ws&&this.yd(),this.app.config.isMobile||this.Od.soundMode!==h.ProtoPlayerSoundMode.Hover||this.Nd(),this.Od.isCloseButton&&this.Qd(),this._d(),this.Ws||Ut.a.detectUsingScript().then(t=>{t&&(this.app.services.TrackingService.trackSessionAdBlocker(h.ProtoAdBlockDetectionTypeEnum.Network),this.Cl.disableAdvertising())})}play(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.play()}pause(){this.adHandler&&this.adHandler.inImpression&&this.adHandler.pause()}setVolume(t){this.setNewVolume(t),this.zd()}getSize(){return{width:this.$experienceContainer.clientWidth,height:this.$experienceContainer.clientHeight}}setSize(t,i){Object(bt.f)({width:t,height:i})||Object(j.Q)(this.$experienceContainer,{width:`${t}px`,height:`${i}px`})}setCustomMacros(t){this.app.services.MacrosService.addExtraMacros(t)}isViewable(){return this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.ul})}setViewableThreshold(t){this.app?this.app.services.ViewabilityService.setViewableThreshold(t):this.fl=t}setAmpUserConsent(t){this.app.services.UserManagerService.setAmpUserConsent(t)}triggerDestroy(){this.app.services.EventsStorageService.destroy(),this.mediator.publish(this,c.b.Destroy)}disableAdvertising(){this.Cl.disableAdvertising()}enableAdvertising(){this.Cl.enableAdvertising()}destroy(){this.adHandler&&this.adHandler.destroy(),this.Cl&&this.Cl.destroy(),this.floatingModule&&(this.floatingModule.destroy(),this.floatingModule=null)}}var zt=e(13);const Wt=140,Gt=80;class Jt{static getScaledImageUrl(t,i,e,s){if(t&&!Object(bt.f)({width:i,height:e}))return Object(C.e)(s)&&(i=Object(bt.e)(i,s),e=Object(bt.e)(e,s)),`${t}${Jt.getScaledImageQueryParams(i,e)}`.trim()}static getScaledImageQueryParams(t,i){return Object(bt.f)({width:t,height:i})?"":`?width=${t}&height=${i}&fit=bounds`}static getSmartCroppedImageUrl(t,i,e){return Object(C.h)(t)||(t=zt.a.endPoints.base.image),Object(bt.f)({width:i,height:e})&&(i=Wt,e=Gt),`${t}${Jt.getSmartCroppedImageQueryParams(i,e)}`}static getSmartCroppedImageQueryParams(t,i){return Object(bt.f)({width:t,height:i})?"":`?crop=${t}:${i},smart&width=${t}&height=${i}&format=jpeg&quality=60&fit=crop`}}class Qt{constructor(t){this.context=t}onClick(){}canTransitionToState(t){return!0}enterState(){this.initState(),this.context.currentState=this}}var Xt,Yt;function Kt(t,i,e,s){t.style.top=`${function(t,i,e,s,n){let r=i-s.clientY;const h=s.clientY+s.height-i;n.alignTop&&r>t.offsetHeight?r-=t.offsetHeight:!n.alignTop&&h<t.offsetHeight?r-=t.offsetHeight-h:(r+=e)+t.offsetHeight>s.height&&(r=s.height-t.offsetHeight);return r}(t,i.clientY,i.height,e,s)}px`,t.style.left=`${function(t,i,e,s){const n=s.distanceFromMargin?s.distanceFromMargin:0;let r=Math.ceil(i)-Math.ceil(e.clientX),h=i,a=h+t.offsetWidth;const o=e.clientX+e.width;if(s.alignMiddle){const i=t.offsetWidth/2;r-=Math.ceil(i),h-=i,a-=i}if(s.alignMiddle||s.forceRight)return e.clientX>h?r=0+n:o<a&&(r-=Math.ceil(a)-Math.ceil(o)+n),r;a>o&&(r-=t.offsetWidth);return r}(t,i.clientX,e,s)}px`}!function(t){t[t.PlayButton=0]="PlayButton",t[t.BigPlayButton=1]="BigPlayButton",t[t.VolumeButton=2]="VolumeButton",t[t.VolumeProgress=3]="VolumeProgress",t[t.VolumeControls=4]="VolumeControls",t[t.ExpandButton=5]="ExpandButton",t[t.SettingsButton=6]="SettingsButton",t[t.CaptionButton=7]="CaptionButton",t[t.CaptionComponent=8]="CaptionComponent",t[t.CastButton=9]="CastButton",t[t.ShareButton=10]="ShareButton",t[t.UpNextButton=11]="UpNextButton",t[t.UpNextBox=12]="UpNextBox",t[t.PreviousButton=13]="PreviousButton",t[t.LogoComponent=14]="LogoComponent",t[t.LogoOutstream=15]="LogoOutstream",t[t.MoreButton=16]="MoreButton",t[t.ElapsedTimeLabel=17]="ElapsedTimeLabel",t[t.TotalDurationLabel=18]="TotalDurationLabel",t[t.ProgressBar=19]="ProgressBar",t[t.QualityMenu=20]="QualityMenu",t[t.QueStateOverlay=21]="QueStateOverlay",t[t.Loader=22]="Loader",t[t.ContextMenu=23]="ContextMenu",t[t.ElementsSettingsMenu=24]="ElementsSettingsMenu",t[t.CloseButton=25]="CloseButton",t[t.SkipAdButton=26]="SkipAdButton",t[t.AdLoadingScreen=27]="AdLoadingScreen",t[t.CtaButton=28]="CtaButton",t[t.PlayspaceProgressBar=29]="PlayspaceProgressBar",t[t.PlayspaceSettingsMenu=30]="PlayspaceSettingsMenu",t[t.ClickToPlayButton=31]="ClickToPlayButton",t[t.SlideTitle=32]="SlideTitle",t[t.SkipAd=33]="SkipAd",t[t.TopTitle=34]="TopTitle",t[t.TopLogo=35]="TopLogo",t[t.TopSlideTitle=36]="TopSlideTitle",t[t.TopStoryTitle=37]="TopStoryTitle",t[t.TextLabel=38]="TextLabel",t[t.LivePoster=39]="LivePoster",t[t.LiveIcon=40]="LiveIcon"}(Xt||(Xt={})),function(t){t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Right=4]="Right",t[t.Left=8]="Left",t[t.Middle=16]="Middle"}(Yt||(Yt={}));class Zt extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Os=i,this.if=e,this.Yn=n,this.ef=i.createElementByString(s)}getContainer(){return this.ef}getCoordinates(t){const i=this.Os.getElementCoordinates(this.ef);return this.Yn&&t?((t&Yt.Top)===Yt.Top&&(i.clientY-=this.ef.clientHeight),(t&Yt.Right)===Yt.Right&&(i.clientX+=this.ef.clientWidth)):i.clientX+=i.width/2,i}showComponent(t=!1){if(!this.ef||!this.ef.parentElement)return;const i=Object(j.u)(this.ef.parentElement,"cnx-ui-btn")?this.ef.parentElement:this.ef;t&&Object(j.E)(i)?Object(j.g)(i):Object(j.R)(i)}hideComponent(t=!1){if(!this.ef||!this.ef.parentElement)return;const i=Object(j.u)(this.ef.parentElement,"cnx-ui-btn")?this.ef.parentElement:this.ef;t&&!Object(j.E)(i)?Object(j.h)(i,()=>Object(j.v)(i)):Object(j.v)(i)}destroy(){this.ef.innerHTML="",this.ef.style.display="none",this.if.unregisterAll(this)}}var ti,ii=e(8);class ei extends Zt{constructor(t,i,e,s,n){super(t,i,e,s,n),this.eventList=[ii.a[ii.a.Scroll],ii.a[ii.a.Click]],this.sf=t=>{this.onInteractionHandler(t)},this.onBeforeClick=t=>{t.stopPropagation()},this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(t)}}onInteractionHandler(t){t.stopPropagation()}onClickHandler(t){}initComponent(){const t={interactionstart:this.onBeforeClick,interaction:this.sf,click:this.onClick};this.if.register(this.ef,this,this.if,t),this.Yn&&(this.subscribe(ii.a[ii.a.Click],this.if,()=>{this.onClickHandler()}),this.relay(ii.a[ii.a.Scroll],this.if,this,this.mediator))}destroy(){this.unsubscribeAll(this.if),super.destroy()}}class si extends ei{constructor(){super(...arguments),this.onClick=t=>{this.onInteractionHandler(t),this.onClickHandler(),this.addBoomEffect()}}addBoomEffect(){Object(j.a)(this.ef,"cnx-boom"),this.ef.getClientRects(),Object(j.a)(this.ef,"cnx-boom-anim");const t=i=>{"transform"===i.propertyName&&(Object(j.L)(this.ef,"cnx-boom"),Object(j.L)(this.ef,"cnx-boom-anim"),this.ef.removeEventListener("transitionend",t))};this.ef.addEventListener("transitionend",t)}initComponent(){super.initComponent(),this.ef.appendChild(this.Os.createElementByString('<cnx class="cnx-boom-elem"></cnx>'))}}class ni extends si{constructor(){super(...arguments),this.eventList=[_[_.HoverStart],_[_.HoverEnd],...this.eventList],this.onStartHover=()=>{Object(j.a)(this.ef,d.h.HoverStart),Object(j.a)(this.ef,d.h.HoverEnd),this.mediator.publish(this,_[_.HoverStart])},this.onEndHover=()=>{Object(j.L)(this.ef,d.h.HoverEnd),this.mediator.publish(this,_[_.HoverEnd])}}initComponent(){super.initComponent(),this.Yn?(this.ef.addEventListener("touchstart",this.onStartHover),this.ef.addEventListener("touchend",this.onEndHover),this.ef.addEventListener("touchcancel",this.onEndHover)):(this.ef.addEventListener("mouseenter",this.onStartHover),this.ef.addEventListener("mouseleave",this.onEndHover))}destroy(){this.Yn?(this.ef.removeEventListener("touchstart",this.onStartHover),this.ef.removeEventListener("touchend",this.onEndHover),this.ef.removeEventListener("touchcancel",this.onEndHover)):(this.ef.removeEventListener("mouseenter",this.onStartHover),this.ef.removeEventListener("mouseleave",this.onEndHover)),super.destroy()}onInteractionHandler(t){this.onEndHoverClick()}onEndHoverClick(){Object(j.L)(this.ef,d.h.HoverEnd),Object(j.L)(this.ef,d.h.HoverStart)}}!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(ti||(ti={}));class ri extends ni{constructor(t,i,e,s,n){super(t,i,e,s,n),this.nf=!1,this.eventList=[_[_.Play],_[_.Pause],_[_.Replay],_[_.StateChanged],...this.eventList],this.rf="Play",this.hf="Pause",this.setState(ti.Pause)}onClickHandler(){this.Jt===ti.Pause?this.mediator.publish(this,_[_.Pause]):this.nf?this.mediator.publish(this,_[_.Replay]):this.mediator.publish(this,_[_.Play])}af(){}toggleReplay(t){this.nf=t}setState(t){this.Jt!==t&&(this.Jt=t,this.af(),this.mediator.publish(this,_[_.StateChanged]))}get tooltip(){return this.Jt===ti.Play?this.rf:this.hf}}class hi extends Qt{initState(){this.context.$uiContainer.classList.add(d.j.Playing);const t=this.context.getComponent(Xt.PlayButton);t&&t.setState(ti.Pause);const i=this.context.getComponent(Xt.BigPlayButton);i&&i.setState(ti.Pause)}exitState(){this.context.$uiContainer.classList.remove(d.j.Playing)}}class ai extends hi{constructor(){super(...arguments),this.cf=100}uf(){if(this.elapsedTimeoutId||!this.context.duration)return;const t=Date.now();this.elapsedTimeoutId=setTimeout(()=>{this.context.elapsedTime+=(Date.now()-t)/1e3;const i=this.context.getComponent(Xt.ProgressBar);i&&i.setProgress(Object(bt.g)(0,this.context.duration,0,100,this.context.elapsedTime)),this.elapsedTimeoutId=null,this.uf()},this.cf)}initState(){super.initState(),this.context.duration&&this.uf()}exitState(){super.exitState(),this.context.duration&&(clearTimeout(this.elapsedTimeoutId),this.elapsedTimeoutId=null)}}class oi extends Qt{initState(){this.context.$uiContainer.classList.add(d.j.Paused);const t=this.context.getComponent(Xt.PlayButton);t&&t.setState(ti.Play);const i=this.context.getComponent(Xt.BigPlayButton);i&&i.setState(ti.Play)}exitState(){this.context.$uiContainer.classList.remove(d.j.Paused)}}class ci extends oi{initState(){super.initState()}exitState(){super.exitState()}}class ui{constructor(t,i){this.lf=t,this.Os=i,this.df=/\[\[([0-9]+)]]/g,this.ff=[],this.pf=[],this.bf=this.Os.createElementByString(this.vf(this.lf))}mf(t){return`<cnx class="pl_${t}"></cnx>`}vf(t){return t.replace(this.df,(t,i)=>(this.ff.push(parseInt(i,10)),this.mf(i)))}gf(t,i){return this.pf.some(i=>i.slotName===t)?null:this.pf.some(t=>t.component===i)?null:this.bf.getElementsByClassName(`pl_${t}`)[0]}getComponentList(){return this.ff}getRenderedDom(){return this.bf}registerSlot(t,i){const e=this.gf(t,i);if(null!==e){const s=i.getContainer();return e.parentNode.replaceChild(s,e),this.pf.push({component:i,slotName:t}),!0}return!1}initComponents(){this.pf.forEach(t=>t.component.initComponent())}}class li extends o.a{constructor(t,i,e){super(),this.globalDomUtilsService=t,this.templateString=i,this.componentFactory=e,this.yf={},this.wf=new ui(i,t),this.addComponents()}addComponents(){this.wf.getComponentList().forEach(t=>{const i=this.componentFactory.createComponent(t,this);this.registerComponent(t,i)})}registerComponent(t,i){this.wf.registerSlot(t,i),this.yf[t]=i,this.xf(i)}xf(t){t.eventList.forEach(i=>{this.subscribe(i,t,e=>{i===_[_.RebindComponent]&&this.rebindComponentEvents(t),this.handleComponentEvent(i,e,t)})})}rebindComponentEvents(t){t&&(this.unsubscribeAll(t),this.xf(t))}getComponent(t){return this.yf[t]}destroy(){Object.keys(this.yf).forEach(t=>{this.yf[t].destroy()})}}class di extends li{constructor(t,i,e,s,n){super(e,s,n),this.mediator=t,this.$container=i,this.componentFactory=n,this.$uiContainer=this.wf.getRenderedDom(),i.appendChild(this.$uiContainer),this.wf.initComponents()}changeState(t){const i=this.Sf[t];i!==this.currentState&&this.currentState.canTransitionToState(i)&&(this.currentState.exitState(i),i.enterState())}hide(){Object(j.a)(this.$uiContainer,d.h.DisplayNone)}show(){Object(j.L)(this.$uiContainer,d.h.DisplayNone)}destroy(){super.destroy(),this.$uiContainer.parentNode.removeChild(this.$uiContainer)}}var fi,pi=e(92),bi=e.n(pi);class vi{constructor(t,i){this.Of=t,this.Os=i,this.kf=[],this._f={top:12,bottom:24,margin:4},this.jf=!1}Af(){this.If=this.Os.getElementCoordinates(this.Of.parentElement)}Cf(t,i){t.getElementsByClassName("cnx-tooltip-text")[0].innerHTML=i}Tf(t){if(!t||!t.tooltip||this.jf)return;if(this.kf.find(i=>i.component===t))return;const i=this.Os.createElementByString(bi.a);this.Cf(i,t.tooltip),this.Af();const e=t.getCoordinates();let s=!1;const{clientY:n,height:r}=e,{clientY:h,height:a}=this.Os.getElementCoordinates(this.Of);n<=h+a/2-r?e.clientY+=this._f.top:(e.clientY-=this._f.bottom,s=!0),this.Of.appendChild(i),Kt(i,e,this.If,{alignMiddle:!0,alignTop:s,forceRight:!0,distanceFromMargin:this._f.margin}),Object(j.i)(i),Object(j.a)(i,d.s.OpacityInTransition),this.kf.push({component:t,domElement:i})}Pf(t){if(!t.tooltip)return;const i=this.kf.find(i=>i.component===t);if(!i)return;const e=i.domElement;this.Of.removeChild(e),this.kf=this.kf.filter(i=>i.component!==t)}Mf(t){if(!t.tooltip)return;const i=this.kf.find(t=>t.component===this.Ef);i&&this.Cf(i.domElement,t.tooltip)}Lf(){this.Ef=null,this.kf.forEach(t=>this.Pf(t.component))}setDistanceValues(t){this._f=Object.assign(Object.assign({},this._f),t)}hoverStart(t){this.Ef=t,this.Tf(t)}hoverEnd(t){this.Ef=null,this.Pf(t)}stateChanged(t){this.Ef===t&&this.Mf(t)}disableTooltips(){this.jf=!0,this.Lf()}enableTooltips(){this.jf=!1,this.Tf(this.Ef)}}!function(t){t[t.expand=0]="expand",t[t.collapse=1]="collapse"}(fi||(fi={}));class mi extends ni{constructor(){super(...arguments),this.eventList=[_[_.Expand],_[_.Collapse],...this.eventList],this.Rf="Full Screen",this.Bf="Exit Full Screen"}onClickHandler(){switch(this.Jt){case fi.collapse:this.mediator.publish(this,_[_.Expand]);break;case fi.expand:this.mediator.publish(this,_[_.Collapse]);break;default:this.mediator.publish(this,_[_.Expand])}}af(){this.ef&&(this.Jt===fi.expand?this.ef.classList.add(d.h.Active):this.ef.classList.remove(d.h.Active))}setState(t){this.Jt!==t&&(this.Jt=t,this.af())}get tooltip(){return this.Jt===fi.expand?this.Bf:this.Rf}}class gi extends di{constructor(t,i,e,s,n){super(t,i,e,s,n),this.Df=new vi(this.$uiContainer,e)}handleComponentEvent(t,i,e){let s=e;switch(i.payload&&i.payload.targetComponent&&(s=i.payload.targetComponent),t){case _[_.HoverStart]:this.Df.hoverStart(s);break;case _[_.HoverEnd]:this.Df.hoverEnd(s);break;case _[_.StateChanged]:this.Df.stateChanged(s)}}updateDuration(t,i){if(!Object(j.u)(this.$uiContainer,d.g.ShowControls))return;const e=this.getComponent(Xt.ElapsedTimeLabel),s=this.getComponent(Xt.TotalDurationLabel),n=this.getComponent(Xt.ProgressBar);if(e&&e.setTime(t),s&&s.setTime(i),n){const e=0,s=i,r=0,h=100;n.setProgress(Object(bt.g)(e,s,r,h,t))}}updateVolume(t){}expand(){this.getComponent(Xt.ExpandButton).setState(fi.expand)}collapse(){this.getComponent(Xt.ExpandButton).setState(fi.collapse)}}class yi extends ni{constructor(){super(...arguments),this.eventList=[_[_.Settings],...this.eventList],this.Ff="Settings"}onClickHandler(){this.mediator.publish(this,_[_.Settings])}toggleHDFlag(t){t?Object(j.a)(this.ef,d.h.Active):Object(j.L)(this.ef,d.h.Active)}get tooltip(){return this.Ff}}var wi=e(55),xi=e.n(wi);class Si extends ni{constructor(t,i,e,s,n,r=!1,h){super(t,i,e,s,h),this.$f=n,this.isActive=r}onClickHandler(){this.isActive=!this.isActive,this.onStateChange()}get isActive(){return this.Jt}set isActive(t){this.Jt=t,this.Jt?Object(j.a)(this.ef,this.$f):Object(j.L)(this.ef,this.$f)}}class Oi extends Si{constructor(){super(...arguments),this.eventList=[_[_.CaptionOn],_[_.CaptionOff],_[_.StateChanged],...this.eventList],this.Uf="Subtitles On",this.Vf="Subtitles Off"}onStateChange(){this.mediator.publish(this,this.isActive?_[_.CaptionOn]:_[_.CaptionOff]),this.mediator.publish(this,_[_.StateChanged])}get tooltip(){return this.isActive?this.Vf:this.Uf}}var ki=e(56),_i=e.n(ki),ji=e(93),Ai=e.n(ji);class Ii extends ei{constructor(){super(...arguments),this.qu=!1,this.eventList=[_[_.Next]]}onClickHandler(){this.mediator.publish(this,_[_.Next])}show(){this.qu=!0,this.ef.classList.add("cnx-fade-in-up-next")}hide(){this.qu=!1,this.ef.classList.remove("cnx-fade-in-up-next")}isInView(){return this.qu}updateCard(t,i){const e=this.ef.getElementsByTagName("img")[0];e.setAttribute("src",t),e.style.display="none",e.onload=()=>{e.style.display="block"},this.ef.getElementsByClassName("cnx-up-next-box-text")[0].innerHTML=Object(C.h)(i)?i:""}}class Ci extends Zt{constructor(t,i,e,s,n){super(t,i,e,s),this.settings=n,this.eventList=[],this.Nf=144,this.Hf=36}createLogo(){let t=this.Os.createElement("img");t.onload=()=>{t=this.resizeLogo(t),this.ef.appendChild(t)},t.src=this.settings.logoUrl,t.alt=""}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;if(!i||!e)return t;if(this.settings.logoPosition===R.ProtoLogoPositionMode.ControlBar)t.style.setProperty("height",`${this.Hf}px`,"important"),t.style.setProperty("width",`${this.Hf}px`,"important");else{const s=i/e;this.Hf*s>this.Nf?(t.style.setProperty("width",`${this.Nf}px`,"important"),t.style.setProperty("height","auto","important")):(t.style.setProperty("width","auto","important"),t.style.setProperty("height",`${this.Hf}px`,"important"))}return t}initComponent(){try{this.createLogo()}catch(t){Object(n.a)({message:"LogoComponent_createLogo",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}}var Ti=e(33);class Pi extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.qf=this.ef.getElementsByTagName("cnx-span")[0]}setTime(t){isNaN(t)||"number"!=typeof t?Object(j.a)(this.ef,d.h.Invisible):(this.qf.innerHTML=Object(Ti.f)(t),Object(j.L)(this.ef,d.h.Invisible))}}var Mi=e(47),Ei=e.n(Mi);class Li extends Zt{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.zf=0,this.Wf=null,this.Gf=0,this.Jf=0,this.Qf=100,this.cacheDomElements()}cacheDomElements(){this.Xf=this.ef.getElementsByClassName("cnx-progress-fill")[0],this.Yf=this.ef.getElementsByClassName("cnx-progress-rail")[0]}cacheWidths(){this.zf=this.fixedRailWidth?this.fixedRailWidth:this.Yf.getBoundingClientRect().width,this.Wf=this.Yf.getBoundingClientRect().left}updateUi(t){const i=this.getComputedTranslation(t);this.Gf=i,this.Xf.style.transform=`translateX(${i}px)`}isValidTranslation(){return this.Gf>=0&&this.Gf<=this.zf}getComputedTranslation(t){return t<0?0:t>this.zf?this.zf:t}setProgress(t){this.cacheWidths();const i=this.getComputedTranslation(Object(bt.g)(0,100,0,this.zf,t));this.updateUi(i)}disableTransition(){Object(j.a)(this.ef,d.h.NoTransition)}enableTransition(){Object(j.L)(this.ef,d.h.NoTransition)}Kf(t){this.disableTransition(),this.setProgress(t),Object(j.i)(this.Xf),this.enableTransition()}forceStartState(){this.Kf(this.Jf)}forceEndState(){this.Kf(this.Qf)}initComponent(){this.cacheWidths()}destroy(){super.destroy()}}class Ri extends Li{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.Zf=0,this.Ca=null,this.tp=!1,this.eventList=[_[_.DraggingStart],_[_.DraggingStopped]],this.ep=t=>{this.cacheWidths(),this.sp(this.np(t)),this.Yn?this.ef.addEventListener(this.rp,this.ap):this.Os.addEventListenerOnGlobal(this.rp,this.ap),this.onDragStart()},this.ap=t=>{null===this.Ca&&(this.tp||(this.tp=!0,this.disableTransition()),this.Ca=this.Os.requestAnimationFrameHelper(()=>{const i=this.op+(this.np(t)-this.cp);this.isValidTranslation()&&this.up(i),this.Ca=null}))},this.lp=t=>{t.stopPropagation(),this.Yn?this.ef.removeEventListener(this.rp,this.ap):this.Os.removeEventListenerOnGlobal(this.rp,this.ap),this.tp=!1,this.enableTransition(),this.onDragEnd()},this.rp=n?"touchmove":"mousemove"}cacheDomElements(){super.cacheDomElements(),this.dp=this.ef.getElementsByClassName("cnx-progress-handle")[0]}cacheWidths(){super.cacheWidths(),this.Zf=this.dp.getBoundingClientRect().width/2}updateUi(t){super.updateUi(t);const i=this.getComputedTranslation(t);this.dp.style.transform=`translateX(${i-this.Zf}px)`}onDragEnd(){this.mediator.publish(this,_[_.DraggingStopped])}onDragStart(){this.mediator.publish(this,_[_.DraggingStart])}np(t){return this.Yn?t.touches.item(0).clientX:t.clientX}sp(t){this.op=t-this.Wf,this.cp=t,this.up(this.op)}up(t){if(this.isValidTranslation()){const i=this.getComputedTranslation(t),e=0,s=this.zf,n=0,r=100;this.updateUi(i),this.onProgressChange(Object(bt.g)(e,s,n,r,i))}}setProgress(t){super.setProgress(t)}initComponent(){super.initComponent();const t={interactionstart:this.ep,interactionend:this.lp};this.if.register(this.ef,this,this.if,t)}destroy(){super.destroy()}}class Bi extends Ri{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.fp=!1,this.pp=t=>{Object(j.a)(this.ef,d.h.HoverEnd),this.fp=!0},this.bp=t=>{const i=this.getComputedTranslation(t.clientX-this.Wf);this.vp.style.transform=`translateX(${i}px)`},this.mp=t=>{this.vp.style.transform="translateX(0)",this.fp=!1,this.gp()},this.eventList=this.eventList.concat([_[_.Seek],_[_.SeekingStart],_[_.SeekingStopped]])}onProgressChange(t){this.mediator.publish(this,_[_.Seek],{payload:t-.1})}onDragEnd(){super.onDragEnd(),this.mediator.publish(this,_[_.SeekingStopped]),this.gp()}onDragStart(){super.onDragStart(),this.mediator.publish(this,_[_.SeekingStart])}gp(){this.fp||this.tp||Object(j.L)(this.ef,d.h.HoverEnd)}initComponent(){super.initComponent(),this.ef.addEventListener("mousemove",this.bp),this.ef.addEventListener("mouseenter",this.pp),this.ef.addEventListener("mouseleave",this.mp),this.vp=this.ef.getElementsByClassName("cnx-progress-follow")[0]}hide(){Object(j.v)(this.ef)}show(){Object(j.R)(this.ef)}destroy(){super.destroy(),this.ef.removeEventListener("mousemove",this.bp),this.ef.removeEventListener("mouseenter",this.pp),this.ef.removeEventListener("mouseleave",this.mp)}}var Di=e(57),Fi=e.n(Di);class $i extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(j.R)(this.ef)}hide(){Object(j.v)(this.ef)}}var Ui,Vi=e(94),Ni=e.n(Vi),Hi=e(58),qi=e.n(Hi),zi=e(95),Wi=e.n(zi);!function(t){t[t.SimpleMenuItem=0]="SimpleMenuItem",t[t.ToggleMenuItem=1]="ToggleMenuItem",t[t.SubmenuMenuItem=2]="SubmenuMenuItem"}(Ui||(Ui={}));class Gi extends Zt{constructor(t,i,e,s,n,r,h,a){super(t,i,e,s,a),this.eventName=n,this.yp=r,this.wp=h,this.xp=[],this.eventList=[_[_.RebindComponent],ii.a[ii.a.HoldStart],ii.a[ii.a.HoldEnd],_[_.ContextMenuOpen],_[_.ContextMenuClose]],this.Sp=!1,this.Op=10,this.kp=t=>{this._p.removeChild(t.target),this._p.style.width=`${this.ef.clientWidth}px`},this.close=t=>{t&&Object($t.h)(t.target,d.g.ContextController,this.Op)||!1!==this.isOpen&&(this.Sp&&(this.mediator.publish(this,ii.a[ii.a.HoldEnd]),Object(j.L)(this.wp,d.h.OnHold),this.Sp=!1),this.isOpen=!1,this.mediator.publish(this,_[_.ContextMenuClose]),Object(j.a)(this.ef,d.h.Invisible),this.if.removeGlobalActions(this.ef),this.closeAllSubmenuItems())},this.close(),this.cacheCoordinates(),this.eventList.push(this.eventName),this._p=this.ef.getElementsByClassName(d.k.Container)[0],this.jp=this.Os.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this._p.appendChild(this.jp),Object(j.a)(this._p,d.g.ContextController)}addNewItemsEvent(t){const i=t.filter(t=>!Object(l.g)(t,this.eventList));i.length>0&&(this.eventList=[...this.eventList,...i],this.mediator.publish(this,_[_.RebindComponent],{payload:this.yp}))}cacheCoordinates(){this.If=this.Os.getElementCoordinates(this.wp)}positionContextMenu(t){this.cacheCoordinates(),Kt(this.ef,t,this.If,{alignMiddle:this.alignMiddle,alignTop:this.alignTop,forceRight:this.forceRight})}Ap(t){switch(t.type){case Ui.SimpleMenuItem:this.close();break;case Ui.SubmenuMenuItem:this.Cp(t)}}sendEvent(t,i){this.mediator.publish(this,t,i)}Cp(t){const i=this.ef.clientWidth;t.isOpen?(t.$menuContainer.addEventListener("transitionend",this.kp),this.jp.style.left="0px",t.$menuContainer.style.left="0px"):(t.$menuContainer.removeEventListener("transitionend",this.kp),this._p.style.width=`${2*i}px`,this._p.appendChild(t.$menuContainer),Object(j.i)(this._p),this.jp.style.left=`${-i}px`,t.$menuContainer.style.left=`${-i}px`),t.isOpen=!t.isOpen}closeAllSubmenuItems(){this.xp.forEach(t=>{t.type===Ui.SubmenuMenuItem&&t.isOpen&&this.Cp(t)})}buildContextMenu(t){let i=[];this.jp.innerHTML="",this._p.style.width=`${this.ef.clientWidth}px`,this.xp.forEach(t=>this.unsubscribeAll(t)),this.xp=t,this.xp.forEach(t=>{i=[...i,...t.eventList],t.eventList.forEach(i=>this.subscribe(i,t,e=>{this.Ap(t),this.sendEvent(i,e)})),t.initComponent(),this.jp.appendChild(t.getContainer())}),this.addNewItemsEvent(i)}getAnchorCoordinatesTo(t){var i;return null===(i=t)||void 0===i?void 0:i.getCoordinates()}open(t,i=!1){i&&(this.Sp=i,this.mediator.publish(this,ii.a[ii.a.HoldStart]),Object(j.a)(this.wp,d.h.OnHold)),this.isOpen=!0,this.mediator.publish(this,_[_.ContextMenuOpen]),this.positionContextMenu(t);const e={interactionend:this.close};this.if.addGlobalActions(this.ef,e),Object(j.L)(this.ef,d.h.Invisible)}}class Ji extends ei{constructor(t,i,e,s,n){super(t,i,e,Ji.getTemplate(n),s),this.mediator=t,this.Tp=!1,this.type=Ui.SimpleMenuItem,this.eventList=[],this.event=n.activeEvent,this.name=n.name,n.eventList?this.eventList=n.eventList:this.eventList.push(this.event),this.Pp=this.ef.getElementsByClassName(d.k.ItemTitle)[0],this.Mp=this.ef.getElementsByClassName(d.k.ItemIcon)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`,e=`<cnx class="${d.k.ItemExtra}">${t.label}</cnx>`;return`<cnx class="${d.k.ClickOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    ${t.label?e:""}\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}changeItemName(t){this.Pp.innerHTML=t}changeItemIcon(t){this.Mp.innerHTML=t}get isActive(){return this.Tp}set isActive(t){this.Tp=t,this.Tp?Object(j.a)(this.ef,d.h.Active,d.f.AccentColor):Object(j.L)(this.ef,d.h.Active,d.f.AccentColor)}}var Qi=e(46),Xi=e.n(Qi),Yi=e(18);class Ki extends Gi{constructor(){super(...arguments),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!0}Ep(){const t=Yi.a.version?`V${Yi.a.version}`:"dev",i=[new Ji(this,this.Os,this.if,this.Yn,{activeEvent:_[_.AboutClick],name:"About Connatix",icon:Xi.a,label:t})];this.buildContextMenu(i)}initComponent(){this.Ep()}onResize(){this.cacheCoordinates(),this.close()}}class Zi extends Si{constructor(t,i,e,s,n){super(t,i,e,Zi.getTemplate(n),d.h.Active,n.defaultState,s),this.mediator=t,this.eventList=[],this.type=Ui.ToggleMenuItem,({eventOn:this.Lp,eventOff:this.Rp}=n),this.eventList.push(this.Lp,this.Rp)}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.ToggleOption} ${t.defaultState?d.h.Active:""}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra}">\n                        <cnx class="cnx-cm-toggle-switch">\n                            <cnx class="cnx-cm-slider ${d.f.AccentColor}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>`}onStateChange(){this.mediator.publish(this,this.isActive?this.Lp:this.Rp)}get tooltip(){return""}}const te={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextCaption:"Closed Caption"};class ie extends Gi{constructor(t,i,e,s,n,r,h,a,o,c=!0){super(t,i,e,s,n,r,h,o),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1,this.Bp=[new Ji(this,this.Os,this.if,this.Yn,{activeEvent:_[_.AboutClick],name:te.ContextAbout,icon:Xi.a,label:Yi.a.version?`V${Yi.a.version}`:"dev"})],this.Dp=new Zi(this,this.Os,this.if,this.Yn,{eventOff:_[_.CaptionOff],eventOn:_[_.CaptionOn],defaultState:c,name:te.ContextCaption,icon:_i.a}),this.Fp=[this.Dp],this.$p=a}Up(){let t=this.Bp;this.$p===d.t.Lg&&(t=[...this.Fp,...this.Bp]),this.buildContextMenu(t)}initComponent(){this.Up()}onResize(t,i){this.isOpen&&this.positionContextMenu(t),this.$p!==i?(this.$p=i,this.closeAllSubmenuItems(),this.Up()):this.$p=i}toggleCaptionState(t){this.Dp.isActive!==t&&(this.Dp.isActive=t)}hideCaptionOption(){this.Dp.hideComponent()}showCaptionOption(){this.Dp.showComponent()}getAnchorCoordinatesTo(t){let i=Yt.Right;return this.$p!==d.t.Xl&&this.$p!==d.t.Xxl&&(i|=Yt.Top),t.getCoordinates(i)}}function ee(t){return t.replace(/[-â€”]/g,"&#x2011;")}function se(t){try{return Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(C.h)(t[e])&&t[e].includes("%%")?void 0:t[e]}),{})}catch(i){return Object(n.a)({message:"sanitizeDfpMacros_error",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING}),Object.keys(t).reduce((i,e)=>Object.assign(Object.assign({},i),{[e]:Object(C.h)(t[e])&&t[e].indexOf("%%")>-1?void 0:t[e]}),{})}}function ne(t){return/<[a-z\/][\s\S]*>/i.test(t)}class re extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.Vp=this.ef.getElementsByClassName(d.e.CaptionContainer)[0]}updateCaptions(t){var i,e;this.Vp.innerHTML=t&&t.text?(i=t.text,e="<br>",i.replace(/(?:\r\n|\r|\n)/g,e)):""}}var he=e(96),ae=e.n(he);class oe extends Ci{constructor(){super(...arguments),this.Np="cnx-logo-height",this.Hp="cnx-logo-width"}createLogo(){this.ef.onload=()=>{this.ef.style.visibility="visible",this.resizeLogo(this.ef)},this.ef.style.visibility="hidden",this.ef.src=this.settings.logoUrl}resizeLogo(t){const i=t.naturalWidth,e=t.naturalHeight;return i&&e?(i>e?Object(j.a)(t,this.Hp):Object(j.a)(t,this.Np),t):t}}var ce=e(97),ue=e.n(ce),le=e(98),de=e.n(le);class fe extends Ri{constructor(t,i,e,s,n=!1){super(t,i,e,s,n),this.qp=80,this.fixedRailWidth=this.qp,this.eventList.push(_[_.Volume])}onProgressChange(t){this.mediator.publish(this,_[_.Volume],{payload:t})}}var pe=e(99),be=e.n(pe),ve=e(100),me=e.n(ve);function ge(t,i,e){const s=e?Ct[Ct.Auto]:i.height.toString();t.forEach(t=>t.name.indexOf(s)>-1?t.isActive=!0:t.isActive=!1);const n=t.find(t=>Ct[t.event]===Ct.Auto);if(e){const e=t.find(t=>t.event===i.height.toString());if(e){const t=`${n.name} (${e.name})`;n.changeItemName(t)}}else n.changeItemName(n.name)}class ye extends Gi{constructor(){super(...arguments),this.alignMiddle=!0,this.alignTop=!0,this.forceRight=!1,this.zp=[],this.Wp={height:360,quality:Ct.Auto},this.Gp=!0}sendEvent(t){this.Gp=Ct[t]===Ct.Auto,this.mediator.publish(this,this.eventName,{payload:{height:this.Gp?this.Wp.height:parseInt(t,10),quality:this.Gp?Ct.Auto:Ct.Strict}})}initComponent(){}createQualityMenu(t){this.zp=[],this.Jp=t,this.Jp.forEach(t=>{this.zp.push(new Ji(this,this.Os,this.if,this.Yn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0}))}),this.zp.push(new Ji(this,this.Os,this.if,this.Yn,{name:Ct[Ct.Auto],activeEvent:Ct[Ct.Auto]})),ge(this.zp,this.Wp,this.Gp),this.buildContextMenu(this.zp)}onResize(t){this.cacheCoordinates(),this.isOpen&&this.positionContextMenu(t)}updateQuality(t){Object(l.h)(this.Jp)&&(this.Gp=t.quality===Ct.Auto,this.Wp.quality=t.quality,this.Wp.height=Object(bt.c)(t.height,this.Jp.map(t=>t.videoHeight)),ge(this.zp,this.Wp,this.Gp))}}var we=e(101),xe=e.n(we);class Se extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hide()}show(){Object(j.R)(this.ef),Object(j.i)(this.ef),Object(j.a)(this.ef,d.h.Active)}hide(){Object(j.L)(this.ef,d.h.Active),Object(j.v)(this.ef)}}class Oe extends ni{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.Qp=Xt[r],this.eventList.push(this.Qp)}onClickHandler(){this.mediator.publish(this,this.Qp)}}class ke extends ei{constructor(t,i,e,s,n,r,h){super(t,i,e,s,n),this.tooltip=h,this.eventList=[],this.Qp=Xt[r],this.eventList.push(this.Qp)}onClickHandler(){this.mediator.publish(this,this.Qp)}}class _e{constructor(t,i,e,s){this.Os=t,this.if=i,this.Yn=e,this.Xp=new Map,Object.keys(s).forEach(t=>this.Yp(Xt[t],s[t]))}getButton(t,i){const{isHoverable:e,template:s,tooltip:n}=this.Kp(t);return e?new Oe(i,this.Os,this.if,s,this.Yn,t,n):new ke(i,this.Os,this.if,s,this.Yn,t,n)}isGeneralComponent(t){return this.Xp.has(t)}Kp(t){return this.Xp.get(t)}Yp(t,i){this.Xp.set(t,i)}}var je=e(102),Ae=e.n(je);function Ie(t,i,e=!0){return e?`\n            <cnx class="cnx-icon-button cnx-button-${Xt[t].toLowerCase()} cnx-ui-btn-hoverable">\n                <cnx class="cnx-btn-container">\n                    ${i}\n                </cnx>\n            </cnx>\n        `.trim():`<cnx class="cnx-button-${Xt[t].toLowerCase()}">${i}</cnx>`}var Ce=e(63),Te=e.n(Ce),Pe=e(103),Me=e.n(Pe);var Ee={[Xt[Xt.MoreButton]]:{template:Ie(Xt.MoreButton,Me.a),tooltip:"More",isHoverable:!0},[Xt[Xt.CloseButton]]:{template:Ie(Xt.CloseButton,Ae.a),tooltip:"Close Player",isHoverable:!0},[Xt[Xt.UpNextButton]]:{template:Ie(Xt.UpNextButton,Te.a),tooltip:"Next",isHoverable:!0},[Xt[Xt.PreviousButton]]:{template:Ie(Xt.PreviousButton,Te.a),tooltip:"Previous",isHoverable:!0}};const Le="Ad";class Re extends ni{constructor(){super(...arguments),this.eventList=[_[_.SkipAd],...this.eventList],this.Zp=-1,this.tb=-1}initComponent(){super.initComponent(),this.hideComponent(),this.ib=this.ef.getElementsByTagName("cnx-span")[0],this.ib.innerHTML=Le,this.eb=this.ef.querySelectorAll(`.${d.q.Timer} svg`)[0]}setSecondsUntilSkip(t){this.Zp=Math.ceil(t),this.tb=-1,this.Zp>0&&Object(j.Q)(this.eb,{"animation-duration":this.Zp+"s"})}tickDown(t){const i=this.Zp-Math.floor(t);if(i<0||0===this.tb)return;const e=Object(j.u)(this.ef,d.q.InTimer);this.tb=i,0===this.tb?(e&&Object(j.L)(this.ef,d.q.InTimer),this.ib.innerHTML=Le):(e||Object(j.a)(this.ef,d.q.InTimer),this.ib.innerHTML=`in ${this.tb}s`)}get tooltip(){}onClickHandler(){0===this.tb&&this.mediator.publish(this,_[_.SkipAd])}}var Be=e(104),De=e.n(Be),Fe=e(105),$e=e.n(Fe),Ue=e(24);const Ve="Loading ad";class Ne extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.sb=this.ef.getElementsByClassName(d.a.BackgroundImg)[0],this.rb=this.ef.getElementsByClassName(d.a.Icon)[0],this.rb.innerHTML=$e.a,this.hb=this.ef.getElementsByClassName(d.a.ButtonContainer)[0];const t=this.ef.getElementsByClassName(d.a.Button)[0];this.ab=this.Os.createElementByString(`<a class="${d.a.Wrapper}" href="#">`),this.ab.target=Ue.c.Blank,this.ab.appendChild(t),this.hb.innerHTML="",this.hb.appendChild(this.ab),this.ob=this.ef.getElementsByClassName(d.a.InfoContainer)[0],this.cb=this.ef.getElementsByClassName(d.a.FallbackContainer)[0],this.ub=this.ef.getElementsByClassName(d.a.SlotCountText)[0]}setBackgroundImg(t){Object(C.h)(t)?(Object(j.L)(this.sb,d.h.DisplayNone),this.sb.src=t):Object(j.a)(this.sb,d.h.DisplayNone)}setClickUrl(t){if(!Object(C.h)(t))return Object(j.R)(this.cb),void Object(j.v)(this.ob);Object(j.R)(this.ob),Object(j.v)(this.cb),this.ab.href=t}setFallbackText(t,i){const e=t||1,s=i||1;this.ub.innerHTML=`${Ve} ${e}/${s}`}}var He,qe=e(106),ze=e.n(qe);class We{constructor(t,i,e,s={},n={}){this.Os=t,this.if=i,this.ef=e,this.Jn=s,this.lb={[Xt.PlayButton]:t=>this.fb(!1,t),[Xt.BigPlayButton]:t=>this.fb(!0,t),[Xt.VolumeProgress]:t=>new fe(t,this.Os,this.if,be.a),[Xt.ExpandButton]:t=>new mi(t,this.Os,this.if,me.a,this.Jn.isMobile),[Xt.QualityMenu]:t=>new ye(t,this.Os,this.if,xe.a,_[_.Quality],Xt.QualityMenu,this.ef,this.Jn.isMobile),[Xt.Loader]:t=>new Se(t,this.Os,this.if,qi.a),[Xt.SkipAdButton]:t=>new Re(t,this.Os,this.if,De.a,this.Jn.isMobile),[Xt.AdLoadingScreen]:t=>new Ne(t,this.Os,this.if,ze.a)},this.fb=(t,i)=>new ri(i,this.Os,this.if,function(t=!1){return`\n    <cnx class="cnx-icon-button cnx-ui-btn-hoverable ${t?"cnx-button-big-play":""}">\n        <cnx class="cnx-btn-container">\n            <cnx class="cnx-play-icon">${ue.a}</cnx>\n            <cnx class="cnx-pause-icon">${de.a}</cnx>\n        </cnx>\n    </cnx>\n`.trim()}(t),this.Jn.isMobile),this.pb=t=>i=>{const e=this.lb[t];if(e)return e(i)},this.bb=new _e(this.Os,this.if,this.Jn.isMobile,Object.assign(Object.assign({},Ee),n))}createComponent(t,i){const e=this.pb(t)(i);return e||(this.bb.isGeneralComponent(t)?this.bb.getButton(t,i):void 0)}}!function(t){t[t.Mute=0]="Mute",t[t.Unmute=1]="Unmute"}(He||(He={}));class Ge extends ni{constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.eventList=[_[_.Mute],_[_.Unmute],_[_.StateChanged],...this.eventList],this.vb="Mute",this.mb="Unmute",this.Jt=n}onClickHandler(){this.Jt===He.Mute?(this.mediator.publish(this,_[_.Unmute]),this.setState(He.Unmute)):(this.mediator.publish(this,_[_.Mute]),this.setState(He.Mute))}af(){this.Jt===He.Mute?Object(j.O)(this.ef,"cnx-sound-on","cnx-sound-off"):Object(j.O)(this.ef,"cnx-sound-off","cnx-sound-on")}get tooltip(){return this.Jt===He.Mute?this.mb:this.vb}initComponent(){super.initComponent(),this.af()}setState(t){this.Jt!==t&&(this.Jt=t,this.af(),this.mediator.publish(this,_[_.StateChanged]))}setVolume(t){t>0?this.setState(He.Unmute):this.setState(He.Mute)}}class Je extends li{constructor(t,i,e,s){super(i,e,s),this.mediator=t,this.ef=this.wf.getRenderedDom()}getContainer(){return this.ef}initComponent(){this.wf.initComponents()}showComponent(){Object(j.R)(this.ef)}hideComponent(){Object(j.v)(this.ef)}}class Qe extends Je{constructor(t,i,e,s){super(t,i,e,s),this.gb=null,this.eventList=[_[_.Volume],_[_.VolumeHoverStart],_[_.VolumeHoverStopped],_[_.DraggingStopped],_[_.DraggingStart],_[_.HoverStart],_[_.HoverEnd],_[_.StateChanged]],this.yb=.2,this.wb=600,this.xb=!1,this.Sb=t=>{clearTimeout(this.gb),Object(j.a)(this.ef,"cnx-mod-hover"),this.mediator.publish(this,_[_.VolumeHoverStart])},this.Ob=()=>{this.xb||(null!==this.gb&&clearTimeout(this.gb),this.gb=setTimeout(()=>{Object(j.L)(this.ef,"cnx-mod-hover"),this.mediator.publish(this,_[_.VolumeHoverStopped])},this.wb))},this.kb=this.yb,this._b=this.getComponent(Xt.VolumeButton),this.jb=this.getComponent(Xt.VolumeProgress)}handleComponentEvent(t,i,e){let s;switch(t){case _[_.Volume]:s=i.payload/100,this.Ab(s),this.Ib(i.payload);break;case _[_.Mute]:s=0,this.setVolumeProgress(0);break;case _[_.Unmute]:s=this.kb,this.setVolumeProgress(100*this.kb);break;case _[_.DraggingStopped]:this.xb=!1,this.mediator.publish(this,_[_.DraggingStopped]),this.Ob();break;case _[_.DraggingStart]:this.xb=!0,this.mediator.publish(this,_[_.DraggingStart]);break;case _[_.HoverStart]:this.mediator.publish(this,_[_.HoverStart],{payload:{targetComponent:e}});break;case _[_.HoverEnd]:this.mediator.publish(this,_[_.HoverEnd],{payload:{targetComponent:e}});break;case _[_.StateChanged]:this.mediator.publish(this,_[_.StateChanged],{payload:{targetComponent:e}})}void 0!==s&&this.Cb(s)}Ab(t){t<this.yb?this.kb=this.yb:this.kb=t}Cb(t){this.mediator.publish(this,_[_.Volume],{payload:t})}Ib(t){0===t?this._b.setState(He.Mute):this._b.setState(He.Unmute)}setVolumeProgress(t){this.jb.setProgress(t)}initComponent(){super.initComponent(),this.ef.addEventListener("mouseenter",this.Sb),this.ef.addEventListener("mouseleave",this.Ob)}setVolume(t){const i=100*t;this.Ib(i),this.setVolumeProgress(i)}destroy(){super.destroy(),this.ef.removeEventListener("mouseenter",this.Sb),this.ef.removeEventListener("mouseleave",this.Ob)}}var Xe=`\n    <cnx class="cnx-volume-container">\n        <cnx class="cnx-ui-btn cnx-volume-btn">\n            [[${Xt.VolumeButton}]]\n        </cnx>\n        <cnx class="cnx-volume-bar">\n            [[${Xt.VolumeProgress}]]\n        </cnx>\n    </cnx>\n`.trim(),Ye=e(107),Ke=e.n(Ye),Ze=e(108),ts=e.n(Ze);var is={[Xt[Xt.ShareButton]]:{template:Ie(Xt.ShareButton,ts.a),tooltip:"Share",isHoverable:!0},[Xt[Xt.CastButton]]:{template:Ie(Xt.CastButton,Ke.a),tooltip:"Cast",isHoverable:!0}},es=e(109),ss=e.n(es),ns=e(110),rs=e.n(ns),hs=e(111),as=e.n(hs);const os=90*$.g,cs="This live stream will start shortly",us="This live stream is not currently available. Please check again shortly",ls="Live stream not supported by browser";class ds extends Zt{constructor(){super(...arguments),this.eventList=[],this.Tb=null}initComponent(){this.Pb=this.Os.createElementByString("<img/>"),this.ef.appendChild(this.Pb),this.Mb=this.ef.getElementsByTagName("cnx-span")[0],this.Eb=this.ef.getElementsByClassName("cnx-live-message")[0],this.Lb=this.ef.getElementsByClassName("cnx-live-icon")[0]}setPosterSrc(t){Object(C.h)(t)&&(this.Pb.src=t)}setPosterAltText(t){this.Pb.alt=t}setIconToStarting(){this.Lb.innerHTML=`${rs.a}`}setIconToEnded(){this.Lb.innerHTML=`${as.a}`}setMessageToStarting(){this.Rb(cs)}setMessageToEnded(){this.Rb(us)}setMessageToNotSupported(){this.Rb(ls)}handleDelayedStart(t){Object(C.e)(Date.parse(t))&&(this.Bb=new Date(t),this.Db()>0&&(this.Fb(),clearInterval(this.Tb),this.Tb=setInterval(()=>{this.Fb()},$.f*$.g)))}showMessage(){Object(j.R)(this.Lb),Object(j.R)(this.Eb)}hideMessage(){Object(j.v)(this.Lb),Object(j.v)(this.Eb)}show(){Object(j.R)(this.ef),Object(j.a)(this.ef,d.h.Active)}hide(){Object(j.L)(this.ef,d.h.Active),Object(j.v)(this.ef)}destroy(){super.destroy(),clearInterval(this.Tb)}Fb(){const t=this.Db();if(t>0){const i=this.$b(t);this.Rb(`Live in ${i}`)}else this.Rb(cs),clearInterval(this.Tb),this.Tb=null}Db(){return(Math.max(this.Bb.getTime(),Date.now())-Date.now())/$.f}$b(t){const i=t>=os?Math.round(t/($.g*$.c)):Math.ceil(t/$.g);return`${i} ${t>=os?"hours":`minute${1===i?"":"s"}`}`}Rb(t){this.Mb.innerHTML=t}}var fs=e(112),ps=e.n(fs);class bs extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){this.hideComponent()}}var vs,ms=e(113),gs=e.n(ms);class ys extends We{constructor(t,i,e,s,n){super(t,i,e,s,is),this.Os=t,this.ef=e,this.Jn=s,this.Ub=n,this.Vb={[Xt.VolumeControls]:t=>new Qe(t,this.Os,Xe,this),[Xt.VolumeButton]:t=>new Ge(t,this.Os,this.if,ss.a,He.Mute,this.Jn.isMobile),[Xt.SettingsButton]:t=>new yi(t,this.Os,this.if,xi.a,this.Jn.isMobile),[Xt.CaptionButton]:t=>new Oi(t,this.Os,this.if,_i.a,d.h.Active,this.Jn.closedCaptionDefault,this.Jn.isMobile),[Xt.UpNextBox]:t=>new Ii(t,this.Os,this.if,Ai.a,this.Jn.isMobile),[Xt.LogoComponent]:t=>{if(!Object(C.a)(this.Jn.logoUrl)&&!Object(C.a)(this.Jn.logoPosition))throw new Error("custom logo is undefined");return new Ci(t,this.Os,this.if,'<cnx class="cnx-logo"></cnx>',{logoUrl:this.Jn.logoUrl,logoPosition:this.Jn.logoPosition})},[Xt.LogoOutstream]:t=>{if(!Object(C.a)(this.Jn.logoUrl)&&!Object(C.a)(this.Jn.logoPosition))throw new Error("outstream logo undefined");return new oe(t,this.Os,this.if,'<img class="cnx-home-screen-logo" />',{logoUrl:this.Jn.logoUrl})},[Xt.LivePoster]:t=>new ds(t,this.Os,this.if,ps.a),[Xt.LiveIcon]:t=>new bs(t,this.Os,this.if,gs.a),[Xt.ElapsedTimeLabel]:t=>new Pi(t,this.Os,this.if,Ei.a),[Xt.TotalDurationLabel]:t=>new Pi(t,this.Os,this.if,Ei.a),[Xt.ProgressBar]:t=>new Bi(t,this.Os,this.if,Fi.a,this.Jn.isMobile),[Xt.QueStateOverlay]:t=>new $i(t,this.Os,this.if,qi.a),[Xt.ContextMenu]:t=>new Ki(t,this.Os,this.if,Ni.a,_[_.ContextClick],Xt.ContextMenu,this.ef,this.Jn.isMobile),[Xt.ElementsSettingsMenu]:t=>new ie(t,this.Os,this.if,Wi.a,_[_.SettingsMenu],Xt.ElementsSettingsMenu,this.ef,this.Ub,this.Jn.isMobile,this.Jn.closedCaptionDefault),[Xt.CaptionComponent]:t=>new re(t,this.Os,this.if,ae.a)},this.Nb=t=>i=>{const e=this.Vb[t];if(e)return e(i)}}createComponent(t,i){return this.Nb(t)(i)||super.createComponent(t,i)}}!function(t){t.InPod="cnx-ad-in-pod",t.AdMarkerInPodTextContainer="cnx-ad-marker-text",t.CardImage="cnx-ad-card-image",t.CardTitle="cnx-ad-card-title",t.AdUiContent="cnx-ui-ad-content"}(vs||(vs={}));class ws extends gi{constructor(t,i,e,s,n,r,h={},a){super(t,n,i,r,a||new ys(i,s,n,h)),this.mediator=t,this.globalDomUtilsService=i,this.Ic=e,this.$container=n,this.settings=h,this.Sf={[Tt.PlayingState]:new ai(this),[Tt.PausedState]:new ci(this)},this.Hb=0,this.Ca=null,this.qb=t=>{Object(j.U)(this.$uiContainer,d.g.UiInView,t)},this.Df.setDistanceValues({top:4,bottom:4}),this.Sf[Tt.PausedState].enterState(),this.zb=this.$container.querySelector(`.${vs.CardImage}`),this.Wb=this.$container.querySelector(`.${vs.CardTitle}`),this.Gb=this.$container.querySelector(`.${vs.AdUiContent}`)}handleComponentEvent(t,i,e){switch(super.handleComponentEvent(t,i,e),t){case _[_.Volume]:this.mediator.publish(this,_[_.Volume],i);break;case _[_.Mute]:this.mediator.publish(this,_[_.Mute]);break;case _[_.Unmute]:this.mediator.publish(this,_[_.Unmute]);break;case Xt[Xt.CloseButton]:this.mediator.publish(this,_[_.Close]);break;case _[_.Expand]:this.mediator.publish(this,_[_.Expand]);break;case _[_.Collapse]:this.mediator.publish(this,_[_.Collapse]);break;default:this.mediator.publish(this,t,i)}}updateDuration(t){const i=this.getComponent(Xt.ProgressBar),e=this.getComponent(Xt.TotalDurationLabel),s=this.getComponent(Xt.SkipAdButton);!t&&s&&(s.setSecondsUntilSkip(0),s.tickDown(0)),t||!i?(this.elapsedTime=0,this.duration=t,i&&i.setProgress(Object(bt.g)(0,t,0,100,0)),e&&e.setTime(t),this.Jb(this.Hb)):i.setProgress(100)}updateVolume(t){const i=this.getComponent(Xt.VolumeControls),e=this.getComponent(Xt.VolumeButton);i&&i.setVolume(t),e&&e.setVolume(t)}get elapsedTime(){return this.Hb}set elapsedTime(t){this.Hb=t,this.Jb(this.Hb)}showSkipAdButton(t){const i=this.getComponent(Xt.SkipAdButton);i&&(i.showComponent(),i.setSecondsUntilSkip(t))}hideSkipAdButton(){const t=this.getComponent(Xt.SkipAdButton);t&&t.hideComponent()}addPodAdMarker(t,i){Object(j.a)(this.$uiContainer,vs.InPod),Object(l.c)(this.$uiContainer.getElementsByClassName(vs.AdMarkerInPodTextContainer)).forEach(e=>{e.innerHTML=`${t+1}/${i}`})}removeAddPodAdMarker(){Object(j.L)(this.$uiContainer,vs.InPod)}Jb(t){const i=this.getComponent(Xt.ElapsedTimeLabel);i&&i.setTime(t);const e=this.getComponent(Xt.SkipAdButton);e&&e.tickDown(t)}hideAdLoadingScreen(){const t=this.getComponent(Xt.AdLoadingScreen);t&&t.hideComponent(),Object(j.L)(this.$container,d.g.PodLoadingScreen)}showAdLoadingScreen(t,i,e,s){const n=this.getComponent(Xt.AdLoadingScreen);n&&(n.showComponent(),n.setBackgroundImg(t),n.setClickUrl(i),n.setFallbackText(e,s),Object(j.a)(this.$container,d.g.PodLoadingScreen))}hideAdMarker(){const t=this.$container.querySelector(".cnx-ad-marker");Object(j.v)(t)}hideProgressBar(){this.getComponent(Xt.ProgressBar).hideComponent()}setContinueReadingCard(t){this.zb.style.backgroundImage=`url("${t.imageSrc}")`,this.Wb.innerHTML=t.title}cardHasData(){return Object(C.h)(this.zb.style.backgroundImage)&&Object(C.h)(this.Wb.innerHTML)}showContinueReadingCard(t){Object(j.a)(this.$container,d.g.AdShowCard),null===this.Ca&&(this.Ca=this.globalDomUtilsService.requestAnimationFrameHelper(()=>{this.Ca=null,Object(j.Q)(t,{height:`${this.Gb.clientHeight}px`})}))}hideContinueReadingCard(t){Object(j.L)(this.$container,d.g.AdShowCard),Object(j.N)(t,"height")}show(){super.show(),this.Ic.on(this.$uiContainer,this.qb,{threshold:.5})}hide(){super.hide();Object(j.U)(this.$uiContainer,d.g.UiInView,!1),this.Ic.off(this.$uiContainer,this.qb)}expand(){this.getComponent(Xt.ExpandButton).setState(fi.expand)}collapse(){this.getComponent(Xt.ExpandButton).setState(fi.collapse)}}var xs=e(114),Ss=e.n(xs);class Os{constructor(t){this.showExpandButton=t}get template(){return`\n            <cnx class="cnx-ui cnx-ui-ad">\n                <cnx class="cnx-ui-ad-content ${this.showExpandButton?"cnx-ad-fs":""}">\n                    <cnx class="cnx-ad-marker">\n                        <cnx class="cnx-ad-marker-svg">${Ss.a}</cnx>\n                        <cnx class="cnx-ad-marker-text">1/1</cnx>\n                    </cnx>\n                    <cnx class="cnx-ad-close-button cnx-ui-btn">[[${Xt.CloseButton}]]</cnx>\n                    <cnx class="cnx-ad-buttons">\n                        <cnx class="cnx-ad-play-button cnx-ui-btn">[[${Xt.PlayButton}]]</cnx>\n                        <cnx class="cnx-ad-volume-controls">[[${Xt.VolumeControls}]]</cnx>\n                        <cnx class="cnx-ad-volume-button cnx-ui-btn">[[${Xt.VolumeButton}]]</cnx>\n                    </cnx>\n                    [[${Xt.SkipAdButton}]]\n                    ${this.getExpandTemplate()}\n                    <cnx class="cnx-ad-progress-bar">[[${Xt.ProgressBar}]]</cnx>\n                </cnx>\n                <cnx class="cnx-ad-card">\n                    <svg class="${vs.CardImage}" viewBox="0 0 16 9" />\n                    <cnx class="cnx-ad-card-text">\n                        <cnx>Continue watching</cnx>\n                        <cnx class="${vs.CardTitle}"></cnx>\n                        <cnx>after the ad</cnx>\n                    </cnx>\n                </cnx>\n                [[${Xt.AdLoadingScreen}]]\n            </cnx>\n        `.trim()}getExpandTemplate(){return this.showExpandButton?`<cnx class="cnx-ad-expand-button cnx-ui-btn cnx-hide-on-volume-hover cnx-d-sm-none">[[${Xt.ExpandButton}]]</cnx>`:""}}var ks=e(17);const _s=72,js=4,As=150,Is=270;class Cs extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.lh=i,this.Qb=e,this.Xb=s,this.Yb=n,this.Kb=r,this.Zb=[],this.firstAdShown=!1,this._r=!1,this.tv=0,this.ev=!0,this.sv=!1,this.nv=!1,this.rv=w.a.Normal,this.hv=this.getNewAdManager(),this.subscribe(E.AdsEnabled,this.hv,()=>{this.mediator.publish(this,E.AdsEnabled)})}av(t,i,e){this.hv.initAd(t,i,this.rv,1,e,[{container:this.ov,width:t,height:i,type:h.ProtoAdType.Video}])}cv(){this.uv.showSkipAdButton(this.lh.skipAdAfter)}lv(t){const i=this.hv.getCurrentAdClickTrackingProperties();i&&this.Kb.services.TrackingService.trackAdClick(Object.assign(Object.assign({},i),{type:t}))}dv(t){if(t.payload.adLoadedData.skipOffset&&t.payload.adLoadedData.skipOffset>=0)return!1;const i=this.hv.getAdDuration();switch(this.lh.adSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan:if(t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec&&(i<this.lh.adsMustBeSkippableIfLongerThan||!i)||t.payload.adSkipMode===h.ProtoAdSkipMode.Never)return!1;break;case h.ProtoPlayerAdSkippability.NoRestrictions:if(t.payload.adSkipMode===h.ProtoAdSkipMode.Never||t.payload.adSkipMode===h.ProtoAdSkipMode.IfLongerThan31Sec&&(i<F.d||!i))return!1}return!0}fv(t){this.Zb.filter(i=>i!==t).forEach(t=>{Object(j.a)(t,d.h.Hide)})}pv(){this.Zb.forEach(t=>{Object(j.L)(t,d.h.Hide)})}updateFilterConfig(t){this.hv.updateFilterConfig(t)}bv(){this.nv=!1,this.uv.hideAdLoadingScreen()}vv(){this.uv.hideSkipAdButton()}mv(){let t;Object.keys(w.b).forEach(i=>{this.subscribe(w.b[i],this.hv,e=>{switch(t=!1,w.b[i]){case w.b.AdLoaded:const s=e;this.sv=this.dv(e),this.sv&&(s.payload.adLoadedData.skipOffset=this.lh.skipAdAfter);break;case w.b.AdPaused:this.uv.changeState(Tt.PausedState);break;case w.b.AdPlaying:this.uv.changeState(Tt.PlayingState);break;case w.b.AdImpression:this.gv(e);break;case w.b.AdSkipped:this.lv(h.ProtoAdClickTypeEnum.AdSkipClick),this.pv(),t=!0;break;case w.b.AdStopped:case w.b.AdError:this.pv(),t=!0;break;case w.b.AdClickThru:this.lv(h.ProtoAdClickTypeEnum.AdClickThrough)}this.ev&&this.mediator.publish(this,w.b[i],e),this.ev=!0,t&&(this._r=!1,this.uv.changeState(Tt.PausedState))})}),this.subscribe(_[_.Volume],this.uv,({payload:t})=>{this.setVolume(t),this.lv(h.ProtoAdClickTypeEnum.VolumeClick)}),this.subscribe(_[_.Play],this.uv,()=>{this.lv(h.ProtoAdClickTypeEnum.PlayClick),this.play()}),this.subscribe(_[_.Pause],this.uv,()=>{this.lv(h.ProtoAdClickTypeEnum.PauseClick),this.pause()}),this.subscribe(_[_.Close],this.uv,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,_[_.Close])}),this.subscribe(_[_.Mute],this.uv,()=>{this.setVolume(0),this.lv(h.ProtoAdClickTypeEnum.MuteClick)}),this.subscribe(_[_.Unmute],this.uv,()=>{this.setVolume(1),this.lv(h.ProtoAdClickTypeEnum.UnmuteClick)}),this.subscribe(E.DetachedFromDom,this.hv,()=>{this.mediator.publish(this,M.DetachedFromDom)}),this.relay(T.b.ImpressionPrice,this.hv,this,this.mediator)}gv(t){this.vv(),this.updateContinueReadingCard(),t.payload.adDuration=this.hv.getAdDuration(),t.payload.adDuration||this.firstAdShown||this.show(),this.firstAdShown=!0,this._r=!0,this.sv&&this.cv(),this.uv.updateDuration(t.payload.adDuration),this.uv.changeState(Tt.PlayingState),this.yv=t.payload.clickThroughUrl,this.fv(t.payload.selectedAdSlot),this.Yb.getTotalNumberOfSlots()>1?this.uv.addPodAdMarker(this.Yb.getCurrentSlotIndex(),this.Yb.getTotalNumberOfSlots()):this.uv.removeAddPodAdMarker()}wv(t){this.Qb.appendChild(t)}xv(t=""){return this.Kb.services.GlobalDomUtilsService.createElementByString(`<div class= "cnx-ad-container cnx-full-height ${t}"></div>`)}Sv(){this.ov=this.xv(),this.wv(this.ov),this.Zb.push(this.ov)}Ov(t=!1){const i=(e=this.lh,s=this.Kb.config,{logoUrl:e.logoUrl,isMobile:s.isMobile,closeButtonMode:e.closeButtonMode,floatingCloseButtonMode:e.floatingSettings.floatingCloseButtonMode,isCloseButton:e.isCloseButton,uiComponentsVisibility:e.uiComponentsVisibility,sharingDestinations:e.sharingDestinations});var e,s;this.uv=new ws(this,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ViewabilityService,this.Kb.services.InteractionService,this.Qb,new Os(t).template,i),this.uv.hide()}start(t,i,e,s=!1){try{this.Ov(s),this.Sv(),this.av(t,i,e),this.setVolume(e),this.mv()}catch(t){Object(n.a)({callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL,exception:t.message,message:"adhandler_start"})}}getVolume(){return this.tv}hide(){Object(j.L)(this.Qb,d.g.Ad,d.g.AdOverlayType),this.uv.hide()}show(){const t=[d.g.Ad],i=this.hv.getCurrentAdType();i===h.ProtoAdType.Overlay&&t.push(d.g.AdOverlayType),this.kv=i,Object(j.a)(this.Qb,...t),this.uv.show(),this.uv.updateVolume(this.tv),this.bv()}setVolume(t){this.tv=t,this.hv.setAdVolume(t),this.uv&&this.uv.updateVolume(t),this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,_[_.Volume],{payload:{volume:t}})}resizeAd(t,i,e){this.setVastViewMode(e),this.updateContinueReadingCard(),this.mediator.publish(this,M.AdSlotResized,{payload:{width:t,height:i}})}adStateChange(t,i){this.hv.onAdStateChange(t,i)}contentChanged(){this.hv.onContentChange()}get inImpression(){return this._r}get adInWin(){return this.hv.adInWin}get inAdPodLoadingState(){return this.nv}resumeWithoutUserInteraction(){this.hv.resumeAd(!1)}play(){this.hv.resumeAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}})}_v(t){if(Object(ks.b)("cnxShowAdCard",this.Kb.config.pageUrl))return!0;let i=!1;if(t.adType===h.ProtoAdType.Video){const e=this.Qb.clientWidth*(t.heightRatio/t.widthRatio);i=this.Qb.clientHeight-e>=_s+js}return t.adType===h.ProtoAdType.Overlay&&(i=this.Qb.clientHeight-t.height>=_s+js),i}updateContinueReadingCard(){const t=this.hv.getAdMediaSize();Object(C.a)(t)&&(this._v(this.hv.getAdMediaSize())?this.uv.showContinueReadingCard(this.ov):this.uv.hideContinueReadingCard(this.ov))}setContinueReadingCard(t){this.uv.setContinueReadingCard({imageSrc:Jt.getSmartCroppedImageUrl(t.imageSrc,Is,As),title:t.title})}pause(){this.hv.pauseAd(!0),this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}})}stopAd(t){const i=()=>{this.mediator.publish(this,w.b.AdStopped),this.ev=!1};this.hv&&this.inImpression?(i(),this.hv.stopAd(t)):this.inAdPodLoadingState&&i()}skipAd(){this.hv&&this.inImpression?this.hv.skipAd():this.nv&&(this.mediator.publish(this,w.b.AdSkipped),this.bv())}userInteraction(t){this.hv.userInteraction(t)}enableAds(){this.hv.enableAds()}enterAdPodLoadingState(){this.nv=!0;const{width:t,height:i}=this.hv.getLastAdSlot(this.kv);this.uv.showAdLoadingScreen(Jt.getSmartCroppedImageUrl(this.jv,t,i),this.yv,this.Yb.getNextSlotIndex(),this.Yb.getTotalNumberOfSlots())}setAdLoadingBackgroundUrl(t){this.jv=t}updatePodRemainingTime(t){this.hv.updatePodRemainingTime(t)}newAdOpportunity(){this.hv.newAdOpportunity()}disableAds(t){this.hv.disableAds(t)}setVastViewMode(t){this.rv=t,this.hv.setVastViewMode(t)}destroy(){var t,i,e;null===(t=this.hv)||void 0===t||t.disableAds(ft.Unknown),null===(i=this.uv)||void 0===i||i.destroy(),null===(e=this.hv)||void 0===e||e.destroy()}}var Ts,Ps=e(29);!function(t){t.AppNexus="appnexus",t.DistrictM="districtm",t.IndexExchange="ix",t.Lkqd="lkqd",t.OneVideo="oneVideo",t.OpenX="openx",t.Pubmatic="pubmatic",t.RhythmOne="rhythmone",t.Rubicon="rubicon",t.SpotX="spotx",t.Telaria="telaria",t.MediaNet="medianet",t.Adman="adman",t.IronSource="ironsource",t.Undertone="undertone",t.SynacorMedia="synacormedia",t.AmxRTB="amx",t.Smaato="smaato",t.SmartAdServer="smartadserver"}(Ts||(Ts={}));const Ms={[Ts.Lkqd]:Ps.c.Lkqd,[Ts.RhythmOne]:Ps.c.RhythmOne,[Ts.Telaria]:Ps.c.Telaria,[Ts.IronSource]:Ps.c.IronSource,[Ts.Undertone]:Ps.c.Undertone,[Ts.SynacorMedia]:Ps.c.SynacorMedia},Es=[Ts.AppNexus,Ts.DistrictM,Ts.IndexExchange,Ts.OneVideo,Ts.OpenX,Ts.Pubmatic,Ts.RhythmOne,Ts.Rubicon,Ts.SpotX,Ts.Telaria,Ts.MediaNet,Ts.Adman,Ts.IronSource,Ts.Undertone,Ts.AmxRTB,Ts.Smaato,Ts.SmartAdServer],Ls=[Ts.AppNexus,Ts.DistrictM,Ts.IndexExchange,Ts.OneVideo,Ts.OpenX,Ts.Pubmatic,Ts.RhythmOne,Ts.Rubicon,Ts.SpotX,Ts.Telaria,Ts.MediaNet,Ts.Adman,Ts.AmxRTB,Ts.Smaato,Ts.SmartAdServer],Rs=[Ts.OneVideo,Ts.IndexExchange,Ts.Rubicon,Ts.Pubmatic,Ts.SpotX,Ts.AppNexus,Ts.DistrictM,Ts.OpenX,Ts.MediaNet,Ts.Adman,Ts.IronSource,Ts.Undertone,Ts.SynacorMedia,Ts.AmxRTB,Ts.Smaato,Ts.SmartAdServer],Bs="https://prebid.adnxs.com/pbc/v1/cache",Ds=180,Fs="//cds.connatix.com/p/plugins/prebid4.36.0-2.js",$s=["video/mp4","video/webm","application/javascript","video/ogg","video/mpeg"],Us={VAST_1:1,VAST_2:2,VAST_3:3,VAST_1_WRAPPER:4,VAST_2_WRAPPER:5,VAST_3_WRAPPER:6,VAST_4:7,VAST_4_WRAPPER:8},Vs=1,Ns={VPAID_1:1,VPAID_2:2},Hs=2,qs=41;function zs(t){return(t+qs)*Hs}function Ws(t){return t/Hs-qs}class Gs{constructor(){this.Av=Date.now(),this.Iv={advertiser:{}}}addPrebid(t){Object(C.a)(this.Iv.advertiser[t])||this.Cv(t),this.Iv.advertiser[t].prebidData.push({timestamp:Date.now()})}addBid(t,i){Object(C.a)(this.Iv.advertiser[t])||this.Cv(t),this.Iv.advertiser[t].bidsFloorPriceList.push({timestamp:Date.now(),floorPrice:i})}addImpression(t,i){Object(C.a)(this.Iv.advertiser[t])||this.Cv(t),this.Iv.advertiser[t].impressionRevenueList.push({timestamp:Date.now(),obfuscatedPrice:i})}shouldRequestLineItem(t){const i=Date.now();return!(this.Tv(i,3)&&this.Pv(t,i,5)<-.5&&this.Mv(t,i,3)>=11.5&&this.Ev(t,i,10,.1)<.35)}Tv(t,i){return t-this.Av>=i*$.e}Pv(t,i,e){const s=this.Iv.advertiser[t];if(!Object(C.a)(s))return-1;const n=this.Lv(s.impressionRevenueList,i,e).map(t=>t.obfuscatedPrice);let r=0;return Object(l.h)(n)&&(r=n.reduce((t,i)=>t+zs(i))),this.Rv(r)}Mv(t,i,e){const s=this.Iv.advertiser[t];if(!Object(C.a)(s))return-1;const n=this.Lv(s.prebidData,i,e).length;return this.Rv(n)}Ev(t,i,e,s){const n=this.Iv.advertiser[t];if(!Object(C.a)(n))return-1;const r=this.Lv(n.impressionRevenueList,i,e).map(t=>t.floorPrice),h=this.Bv(r,s);return this.Rv(h)}Lv(t,i,e){const s=i-$.f,n=i-e*$.e,r=[];for(let i=t.length-1;i>=0&&t[i].timestamp>=n;i--)t[i].timestamp<=s&&r.push(t[i]);return r}Rv(t){return 0===t?-1:t}Cv(t){this.Iv.advertiser[t]={prebidData:[],bidsFloorPriceList:[],impressionRevenueList:[]}}Bv(t,i){if(0===t.length)return 0;if(i<=0)return t[0];if(i>=1)return t[t.length-1];const e=((t=t.sort((t,i)=>t-i)).length-1)*i,s=Math.floor(e),n=s+1,r=e%1;return n>=t.length?t[s]:t[s]*(1-r)+t[n]*r}}class Js{constructor(){this.Dv=new Set}addPlatformCappedLineItemIdList(t){t.forEach(t=>{this.Dv.add(t)})}isLineItemPlatformCapped(t){return this.Dv.has(t)}}class Qs{constructor(){this.Fv=new yt,this.$v=new yt,this.Uv=new yt,this.Vv=new yt,this.Nv=new yt,this.Hv=new yt,this.callingLineItems=[],this.bids=[],this.bidsLoading=[],this.bidsReady=[],this.bidStarted=null}get onBid(){return this.Fv.asObservable()}get onBidConsumed(){return this.$v.asObservable()}get onBidLoadingConsumed(){return this.Uv.asObservable()}get onBidReady(){return this.Vv.asObservable()}get onBidStarted(){return this.Nv.asObservable()}get onBidReadyConsumed(){return this.Hv.asObservable()}getAllBids(){const t=this.bidStarted?[this.bidStarted]:[];return[...this.bids,...this.bidsLoading,...this.bidsReady,...t]}addBid(t){this.bids.push(t),this.Fv.next(t)}moveBidToLoading(t){this.bidsLoading.push(t),this.consumeBid(t)}moveBidToReady(t){this.bidsReady.push(t),this.consumeBidLoading(t),this.Vv.next(t)}moveBidToStarted(t){this.bidStarted=t,this.consumeBidReady(t),this.Nv.next(t)}consumeBid(t){Object(l.k)(this.bids,t),this.$v.next(t)}consumeBidLoading(t){Object(l.k)(this.bidsLoading,t),this.Uv.next(t)}consumeBidReady(t){Object(l.k)(this.bidsReady,t)}consumeBidStarted(t){this.bidStarted=null,this.Hv.next(t)}}class Xs{constructor(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.impression=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.close=[],this.closeLinear=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.skip=[],this.progress=[],this.playerExpand=[],this.playerCollapse=[],this.adExpand=[],this.adCollapse=[],this.fullScreen=[],this.canPlayThrough=[],this.stalled=[],this.waiting=[],this.otherAdInteraction=[]}}class Ys{constructor(t){this.clickTrackings=[],this.customClicks=[],this.errorUrls=[],this.impressions=[],this.trackingEvents=new Xs,t.inLine?this.qv(t.inLine):this.zv(t.wrapper)}qv(t){this.Wv(t.errors),this.Gv(t.impressions),this.Jv(t.creatives)}zv(t){this.Wv(t.errors),this.Gv(t.impressions),this.Jv(t.creatives)}Qv(t){this.Xv(t.trackingEvents),this.Yv(t.videoClicks)}Yv(t){t&&(this.Kv(t.clickTrackings),this.Zv(t.customClicks))}Kv(t){this.clickTrackings.push(...t)}Zv(t){this.customClicks.push(...t)}Xv(t){t.forEach(t=>{try{this.trackingEvents[t.name].push(t.uri)}catch(i){Object(n.a)({message:"AdManager_VastResponse_tracker",exception:`${t.name}`,callStack:i.stack,level:h.ProtoLoggingLevelEnum.INFO})}})}Jv(t){t.forEach(t=>{t.linear&&this.Qv(t.linear)})}Wv(t){this.errorUrls.push(...t)}Gv(t){this.impressions.push(...t)}}const Ks={[h.ProtoTrackerTriggerType.Impression]:"adImpression",[h.ProtoTrackerTriggerType.Complete25Pc]:"adQuartileFirst",[h.ProtoTrackerTriggerType.Complete50Pc]:"adQuartileSecond",[h.ProtoTrackerTriggerType.Complete75Pc]:"adQuartileThird",[h.ProtoTrackerTriggerType.ViewCompletion]:"adQuartileFourth",[h.ProtoTrackerTriggerType.VideoClick]:"adClick",[h.ProtoTrackerTriggerType.Pause]:"adPause",[h.ProtoTrackerTriggerType.Resume]:"adResume",[h.ProtoTrackerTriggerType.Mute]:"adMute",[h.ProtoTrackerTriggerType.Unmute]:"adUnmute"};class Zs{constructor(){this.adError=[],this.adWin=[],this.adImpression=[],this.adStarted=[],this.adVideoStart=[],this.adQuartileFirst=[],this.adQuartileSecond=[],this.adQuartileThird=[],this.adQuartileFourth=[],this.adClick=[],this.adPause=[],this.adResume=[],this.adSkip=[],this.adMute=[],this.adUnmute=[],this.adUserClose=[],this.adUserAcceptInvitation=[],this.adUserMinimize=[]}static track(t,i,e,s){if(!Array.isArray(t))return;const{width:n,height:r}=s.adContainerState.get(e.adType),{adBreakType:a}=s.adBreakState,{mediaDescription:o,mediaDuration:c,mediaId:u,mediaUrl:l,mediaTitle:d}=s.media;t.forEach(t=>{if(t.url)try{const s=i.replace(t.url,e.vendorId,{adMacros:{adWidth:n,adHeight:r,adPostion:a},mediaMacros:{mediaDescription:o,mediaDuration:c,mediaId:u,mediaUrl:l,mediaTitle:d}});switch(t.type){case h.ProtoTrackerType.Image:Object($t.m)([s],window);break;case h.ProtoTrackerType.Javascript:Object(j.A)({src:s},window.document.head,window)}}catch(t){}})}}function tn(t,i){t.forEach(t=>(function(t,i){(function(t,i){return i[Ks[t]]})(t.trigger,i).push({type:t.type,url:t.url})})(t,i))}function en(t){return{type:h.ProtoTrackerType.Image,url:t}}function sn(t){return t.map(t=>en(t))}var nn;!function(t){t[t.HandlingSdkUrl=0]="HandlingSdkUrl",t[t.NetworkRequestUrl=1]="NetworkRequestUrl",t[t.XmlInvalidString=2]="XmlInvalidString",t[t.XmlParseGeneral=3]="XmlParseGeneral",t[t.XmlInvalidTree=4]="XmlInvalidTree",t[t.XmlInvalidAd=5]="XmlInvalidAd",t[t.XmlAdaptorWrapperLimit=6]="XmlAdaptorWrapperLimit",t[t.HTMLUnknownMimeType=7]="HTMLUnknownMimeType",t[t.ImaAdsManagerInit=8]="ImaAdsManagerInit",t[t.ImaVastEmptyResponse=9]="ImaVastEmptyResponse",t[t.ImaRequestException=10]="ImaRequestException",t[t.ImaTimeout=11]="ImaTimeout",t[t.ImaInvalidResponse=12]="ImaInvalidResponse"}(nn||(nn={}));const rn={[nn.HandlingSdkUrl]:h.ConnatixNoBidReasonEnum.CsRequestException,[nn.NetworkRequestUrl]:h.ConnatixNoBidReasonEnum.CsRequestException,[nn.XmlInvalidString]:h.ConnatixNoBidReasonEnum.CsEmptyResponse,[nn.XmlParseGeneral]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.XmlInvalidTree]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.XmlInvalidAd]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.XmlAdaptorWrapperLimit]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.HTMLUnknownMimeType]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.ImaAdsManagerInit]:h.ConnatixNoBidReasonEnum.CsRequestException,[nn.ImaVastEmptyResponse]:h.ConnatixNoBidReasonEnum.CsInvalidResponse,[nn.ImaRequestException]:h.ConnatixNoBidReasonEnum.CsRequestException,[nn.ImaTimeout]:h.ConnatixNoBidReasonEnum.Timeout,[nn.ImaInvalidResponse]:h.ConnatixNoBidReasonEnum.CsInvalidResponse};var hn,an,on=e(10);!function(t){t.VOLUME_DETECTED="volume_detected",t.MALWARE_DETECTED="malware_detected",t.BADURI_DETECTED="baduri_detected"}(hn||(hn={})),function(t){t[t.None=0]="None",t[t.Mute=1]="Mute",t[t.ScrollHijack=2]="ScrollHijack",t[t.MemoryLeak=4]="MemoryLeak",t[t.Malware=8]="Malware",t[t.All=15]="All"}(an||(an={}));const cn="2.0";class un{constructor(){this.tm=new yt}get onVpaidEvent(){return this.tm.asObservable()}handshakeVersion(t=cn){return"2.0"}}var ln,dn;!function(t){t[t.Win=0]="Win",t[t.AdLoaded=1]="AdLoaded",t[t.AdStarted=2]="AdStarted",t[t.AdImpression=3]="AdImpression"}(ln||(ln={}));class fn{constructor(t){this.im=t,this.em=new Map,Object(C.a)(this.im.settings.bidLifecycle)||(this.im.settings.bidLifecycle={})}onTrackingLifecycleEvent(t){switch(this.em.set(t,Date.now()),t){case ln.AdLoaded:this.nm();break;case ln.AdImpression:this.rm()}}nm(){this.im.settings.bidLifecycle.winToAdLoadedTime=this.hm}rm(){this.im.settings.bidLifecycle.startAdToImpressionTime=this.am}get am(){return this.em.get(ln.AdImpression)&&this.em.get(ln.AdStarted)?this.em.get(ln.AdImpression)-this.em.get(ln.AdStarted):0}get hm(){return this.em.get(ln.AdLoaded)&&this.em.get(ln.Win)?this.em.get(ln.AdLoaded)-this.em.get(ln.Win):0}}!function(t){t.IMPRESSION_TIMEOUT="IMPRESSION_TIMEOUT",t.VIEWABLE_IMPRESSION_TIMEOUT="VIEWABLE_IMPRESSION_TIMEOUT",t.SKIP_AD_TIMEOUT="SKIP_AD_TIMEOUT",t.STOP_AD_TIMEOUT="STOP_AD_TIMEOUT",t.AD_LOADED_TIMEOUT="AD_LOADED_TIMEOUT"}(dn||(dn={}));const pn=500,bn="cnx-ad-bid-slot-selected",vn="Connatix Ad";class mn extends un{constructor(t){super(),this.settings=t,this.om=null,this.cm=null,this.um=null,this.lm=null,this.dm=void 0,this.fm=!1,this.Vo=!1,this.pm=!1,this.bm=!1,this.vm=null,this.Vc=[],this.mm=new yt,this.gm=()=>{this.ym({type:w.b.AdError,payload:{errorMessage:on.c.Timeout}}),this.wm()},this.xm=()=>{this.Om(),this.km(dn.VIEWABLE_IMPRESSION_TIMEOUT).clearTimeout(),this.settings.viewabilityService.off(this.om,this._m)},this._m=t=>{const i=this.km(dn.VIEWABLE_IMPRESSION_TIMEOUT);t?i.timeoutHandle.timeoutId||i.setTimeout():i.clearTimeout()},this.jm=()=>{this.ym({type:w.b.AdSkipped}),this.wm()},this.Am=()=>{this.ym({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}}),this.wm()},this.Im=()=>{this.ym({type:w.b.AdError,payload:{errorMessage:on.c.TimeoutLoaded}}),this.wm()},this.km=t=>{const i=this.Cm[t];return{timeoutHandle:i,setTimeout:()=>{i.timeoutId=dt.setTimeout(()=>{i.callback()},i.timeout)},clearTimeout:()=>{null!==i.timeoutId&&(dt.clearTimeout(i.timeoutId),i.timeoutId=null)}}},this.creativeId=this.settings.externalCreativeId,this.Tm=`cnx-ad-bid-slot-id-${this.settings.requestMetadata.data.cnxBidId}`,this.Pm=`cnx-ad-slot-${this.settings.id}`;const{adType:i}=this.settings.adManagerLineItem.protoLineItem;this.Cm={[dn.IMPRESSION_TIMEOUT]:{callback:this.gm,timeout:25e3,timeoutId:null},[dn.VIEWABLE_IMPRESSION_TIMEOUT]:{callback:this.xm,timeout:i===R.ProtoAdType.Video?F.b:F.a,timeoutId:null},[dn.SKIP_AD_TIMEOUT]:{callback:this.jm,timeout:500,timeoutId:null},[dn.STOP_AD_TIMEOUT]:{callback:this.Am,timeout:500,timeoutId:null},[dn.AD_LOADED_TIMEOUT]:{callback:this.Im,timeout:25e3,timeoutId:null}}}skipAd(){this.km(dn.SKIP_AD_TIMEOUT).setTimeout()}stopAd(t){this.km(dn.STOP_AD_TIMEOUT).setTimeout()}startAd(){this.bm&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"startAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Pm}`,level:h.ProtoLoggingLevelEnum.FATAL}),this.bm=!0,this.km(dn.IMPRESSION_TIMEOUT).setTimeout()}initAd(t,i,e,s,r,a,o){this.pm&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_samebid",exception:"initAd",callStack:`adv:${this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId} bidid: ${this.Pm}`,level:h.ProtoLoggingLevelEnum.FATAL}),this.pm=!0,this.km(dn.AD_LOADED_TIMEOUT).setTimeout(),this.Mm(o),this.Em=new fn(this),this.Em.onTrackingLifecycleEvent(ln.Win)}setAdVolume(t){this.cm.volume=t,Object(j.V)(this.cm,t),t<=0?this.settings.adEnforcer.start(an.Mute):this.settings.adEnforcer.stop(an.Mute)}get impressionStarted(){return this.fm}get creativeId(){return this.dm}set creativeId(t){Object(C.h)(this.creativeId)||(this.dm=t)}get onAdViewableImpression(){return this.mm.asObservable()}Lm(t){let i;Object(C.d)(t.payload.skipOffset)&&(i=t.payload.skipOffset);const e={type:w.b.AdLoaded,payload:{adLoadedData:{skipOffset:i},adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode}};return this.settings.adLoadedPayload=e,e}Rm(t){return{type:w.b.AdImpression,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),adVideoUrl:this.adVideoUrl,name:vn},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}Bm(t){return{type:w.b.AdVideoStart,payload:{adSkipMode:this.settings.adManagerLineItem.protoLineItem.skipMode,adSourceData:{moatTrackingEnabled:this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled,creativeId:this.settings.adManagerLineItem.protoLineItem.cnxCreativeId,adId:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,length:this.getAdDuration(),name:vn},customAdData:{ADVERTISER:this.settings.requestMetadata.data.rtbAdomain,CREATIVE_ID:this.creativeId,CAMPAIGN_ID:this.settings.requestMetadata.data.rtbCampainId}}}}ym(t){if(this.Dm(t))switch(t.type){case w.b.AdLoaded:this.Em.onTrackingLifecycleEvent(ln.AdLoaded),this.km(dn.AD_LOADED_TIMEOUT).clearTimeout(),this.tm.next(this.Lm(t));break;case w.b.AdImpression:this.Em.onTrackingLifecycleEvent(ln.AdImpression),this.km(dn.IMPRESSION_TIMEOUT).clearTimeout(),this.Fm(),Object(j.a)(this.um,bn),this.tm.next(this.Rm(t)),this.fm=!0;break;case w.b.AdVideoStart:this.Em.onTrackingLifecycleEvent(ln.AdStarted),this.tm.next(this.Bm(t));break;case w.b.AdStopped:case w.b.AdSkipped:case w.b.AdError:this.Vo&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_double_destroy",exception:this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,level:h.ProtoLoggingLevelEnum.WARNING}),this.Ac(),this.tm.next(t);break;default:this.tm.next(t)}else this.ym({type:w.b.AdError,payload:{errorMessage:on.c.InvalidVpaidEvent}})}Mm(t){this.lm=this.$m(),this.um=this.lm.slotsContainer,Object(j.a)(this.um,this.Tm),this.om=this.lm.adSlot,this.om.id=this.Pm,this.um.id=this.settings.bidSlotId,this.cm=this.lm.videoSlot,this.cm.volume=t,Object(j.V)(this.cm,t),this.settings.adEnforcer.registerContainer(this.um,this.Pm),this.Vc.push(this.settings.adEnforcer.onEnforcerEvent.subscribe(t=>{this.Um(t)})),this.settings.adEnforcer.start(an.All)}$m(){return this.settings.adSlotContainerRecycler.requestAdSlot(this.settings.adContainer)}Ac(){this.Vo=!0,Object(j.L)(this.um,bn),Object(j.L)(this.um,this.Tm),this.om.removeAttribute("id"),this.um.removeAttribute("id"),St(this.Vc),this.wm(),this.settings.adEnforcer.deregisterContainer(this.um),this.settings.viewabilityService.off(this.om,this._m),null!==this.vm&&dt.clearTimeout(this.vm),this.Vm()}Vm(){this.vm=dt.setTimeout(()=>{this.settings.adSlotContainerRecycler.destroyAdSlot(this.lm)},pn)}Om(){const{advertiserLineItemId:t,publisherLineItemId:i}=this.settings.adManagerLineItem.protoLineItem;this.mm.next({advertiserLineItemId:t,publisherLineItemId:i})}Fm(){const t=F.e,i=this.om;this.settings.viewabilityService.on(i,this._m,{threshold:t}),this._m(this.settings.viewabilityService.check({threshold:t,element:i}))}wm(){Object.keys(this.Cm).forEach(t=>{this.km(t).clearTimeout()})}Dm(t){return!(!this.fm&&(t.type===w.b.AdStopped||t.type===w.b.AdSkipped))}Um(t){if(t.detectedContainer!==this.um)return;let i;switch(t.type){case hn.BADURI_DETECTED:i="AdManager_enforcer_BadUri";break;case hn.MALWARE_DETECTED:i="AdManager_enforcer_malware",this.ym({type:w.b.AdError,payload:{errorMessage:on.c.EnforcementMalware}});break;case hn.VOLUME_DETECTED:i="AdManager_enforcer_soundBlock",this.ym({type:w.b.AdError,payload:{errorMessage:on.c.EnforcementVolume}})}Object(n.a)({message:i,exception:t.message,level:h.ProtoLoggingLevelEnum.WARNING})}Nm(t,i,e){var s,r;const a=this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,o=this.creativeId;Object(n.a)({message:`AdManager_${t}_${i}`,exception:`advertiserLineItemId:${a}_creativeId:${o}_errorMessage:${null===(s=e)||void 0===s?void 0:s.message}`,callStack:null===(r=e)||void 0===r?void 0:r.stack,throttle:5,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0})}}var gn=e(45);class yn extends un{constructor(t,i,e,s,n,r,h){super(),this.Hm=t,this.ir=i,this.qm=e,this.zm=s,this.Wm=n,this.Gm=r,this.Jm=h,this.Qm=new yt,this.Xm=t=>{if(!this.Ym(t))return;let i="";try{i=t.getError().getMessage()+"_"+t.getError().getErrorCode()+"_"+t.getError().getVastErrorCode()}catch(t){}this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.ImaError+"_"+i}})},this.Km=t=>{const i=this.Hm.AdEvent.Type;switch(t.type){case i.CLICK:this.tm.next({type:w.b.AdClickThru,payload:{}});break;case i.LOADED:this.Hr(t);break;case i.IMPRESSION:const e={adsManager:this.Wm,adContainer:this.Zm,viewMode:this.tg(this.ig),adTag:this.zm};this.tm.next({type:w.b.AdVideoStart}),this.tm.next({type:w.b.AdImpression,payload:{imaMetadata:e}});break;case i.STARTED:this.tm.next({type:w.b.AdStarted});break;case i.FIRST_QUARTILE:this.tm.next({type:w.b.AdVideoFirstQuartile});break;case i.MIDPOINT:this.tm.next({type:w.b.AdVideoMidpoint});break;case i.THIRD_QUARTILE:this.tm.next({type:w.b.AdVideoThirdQuartile});break;case i.COMPLETE:this.tm.next({type:w.b.AdVideoComplete}),this.tm.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}});break;case i.ALL_ADS_COMPLETED:break;case i.DURATION_CHANGE:this.tm.next({type:w.b.AdDurationChange});break;case i.PAUSED:this.tm.next({type:w.b.AdPaused});break;case i.RESUMED:this.tm.next({type:w.b.AdPlaying});break;case i.LINEAR_CHANGED:this.tm.next({type:w.b.AdLinearChange});break;case i.SKIPPABLE_STATE_CHANGED:this.tm.next({type:w.b.AdSkippableStateChange});break;case i.SKIPPED:this.tm.next({type:w.b.AdSkipped});break;case i.VOLUME_CHANGED:this.tm.next({type:w.b.AdVolumeChange});break;case i.USER_CLOSE:this.tm.next({type:w.b.AdUserClose});break;case i.LOG:this.tm.next({type:w.b.AdLog})}},this.eg()}get onCreativeReceived(){return this.Qm.asObservable()}initAd(t,i,e,s,n,r){this.Zm=r.slot,this.sg=r.videoSlot,this.ig=e||w.a.Normal;try{this.Wm.setVolume(0),this.Wm.init(t,i,this.tg(this.ig))}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.ImaManagerInit}})}}startAd(){try{this.Wm.start()}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.Wm.stop(),this.tm.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){this.Wm.resize(t,i,this.tg(e))}pauseAd(){this.Wm.pause()}resumeAd(){this.Wm.resume(),this.ir===Vt.b.Ios&&Object(j.C)(this.sg)}expandAd(){this.Wm.expand()}collapseAd(){this.Wm.collapse()}skipAd(){this.Wm.skip()}getAdRemainingTime(){return this.Wm.getRemainingTime()||0}getAdDuration(){return this.ng?this.ng.getDuration():0}getAdVolume(){return this.Wm.getVolume()}getAdMediaWidth(){return this.ng?this.ng.getVastMediaWidth():0}getAdMediaHeight(){return this.ng?this.ng.getVastMediaHeight():0}setAdVolume(t){this.Wm.setVolume(t)}getMediaFile(){return this.ng?this.ng.getMediaUrl():void 0}eg(){this.qm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),this.Wm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),Object.keys(this.Hm.AdEvent.Type).forEach(t=>{this.Wm.addEventListener(this.Hm.AdEvent.Type[t],this.Km,!1)})}rg(){this.qm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),this.Wm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm),Object.keys(this.Hm.AdEvent.Type).forEach(t=>{this.Wm.removeEventListener(this.Hm.AdEvent.Type[t],this.Km,!1)})}tg(t){return t===w.a.Fullscreen?this.Hm.ViewMode.FULLSCREEN:this.Hm.ViewMode.NORMAL}Ym(t){const i=t.getUserRequestContext();return!i||i.id===this.Gm.id}Hr(t){this.ng=t.getAd(),this.Qm.next(this.ng.getCreativeId());let i=-1,e="";try{i=this.ng.getSkipTimeOffset();const s=t.getAdData().clickThroughUrl;e=Object(C.h)(s)?s:void 0}catch(t){}Object(gn.b)(this.Jm,e).then(t=>{t?this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.DomainBlocked}}):this.tm.next({type:w.b.AdLoaded,payload:{skipOffset:i}})})}destroy(){try{this.rg(),setTimeout(()=>{this.Wm.destroy()})}catch(t){}}}const wn={ImaObjectNotFound:on.c.ImaObjectNotFound,ImaScriptFailure:on.c.ImaScriptFailure},xn="//imasdk.googleapis.com/js/sdkloader/ima3.js";class Sn{static preloadImaSdk(t){Object(j.I)(xn,t)}static fetchImaSdk(t,i){return new Promise((e,s)=>{const r=Sn.hg(t);if(r)return void e(r);const a=i&&1===Object($t.l)([95,5]);Object(j.A)({src:xn},t.document.head,t,()=>{const i=Sn.hg(t);i?e(i):(a&&Object(n.a)({message:"AdManager_ImaIntegrator_no_image_object_found_after_loading_script",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1}),s(wn.ImaObjectNotFound))},()=>{s(wn.ImaScriptFailure)},a,"AdManager_ImaIntegrator_unable_to_insert_ima_sdk_script")})}static hg(t){return t.google&&t.google.ima}}class On extends mn{constructor(t){super(t),this.settings=t,this.lm=null,this.adMediaType="ima",this.adSourceType=h.ProtoAdsourceTypeEnum.Ima,this.ag=[],this.lm=this.settings.imaAdSlotContainer,this.og=new yn(this.settings.imaSdk,this.settings.os,this.settings.imaAdsLoader,this.settings.url,this.settings.imaAdsManager,this.settings.requestAdsContext,this.settings.adManagerLineItem.protoLineItem.publisherLineItemId)}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled&&this.cg(),this.ag.push(this.og.onVpaidEvent.subscribe(t=>{this.ym(t)}),this.og.onCreativeReceived.subscribe(t=>{this.creativeId=t})),this.og.initAd(t,i,e,s,n,{slot:this.om,videoSlot:this.cm})}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.og.startAd()}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.og.stopAd(t)}catch(t){this.Nm("ImaBidAdaptor","stopAd",t)}}resizeAd(t,i,e){try{this.og.resizeAd(t,i,e)}catch(t){this.Nm("ImaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.og.pauseAd()}catch(t){this.Nm("ImaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.og.resumeAd()}catch(t){this.Nm("ImaBidAdaptor","resumeAd",t)}}expandAd(){try{this.og.expandAd()}catch(t){this.Nm("ImaBidAdaptor","expandAd",t)}}collapseAd(){try{this.og.collapseAd()}catch(t){this.Nm("ImaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.og.skipAd()}catch(t){this.Nm("ImaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.og.getAdRemainingTime()}catch(t){return this.Nm("ImaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.og&&this.og.getAdDuration()||this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.Nm("ImaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.og.getAdVolume()}catch(t){return this.Nm("ImaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.og.getAdMediaWidth(),height:this.og.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.og.setAdVolume(t)}catch(t){this.Nm("ImaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.og.getMediaFile()}get declaredDurationInSeconds(){return this.og.getAdDuration()}Rm(t){const i=super.Rm(t);return i.payload.adSourceData.imaMetadata=t.payload.imaMetadata,i}$m(){return this.lm}Vm(){this.settings.adSlotContainerRecycler.recycleAdSlot(this.lm)}cg(){Sn.fetchImaSdk(this.settings.globalDomUtilsService.getGlobalClosestTop().topFrame,!1)}Ac(){try{super.Ac(),St(this.ag),this.og.destroy()}catch(t){this.Nm("ImaBidAdaptor","_destroy",t)}}}const kn=25;class _n{constructor(t,i,e,s,n,r,h){this.Hm=t,this.qm=i,this.Qu=e,this.Xu=s,this.zm=n,this.sg=r,this.ze=h,this.ug=new yt,this.dg=new yt,this.fg={id:Object($t.c)()},this.Wm=null,this.Xm=t=>{if(!this.Ym(t))return;switch(t.getError().getErrorCode()){case this.Hm.AdError.ErrorCode.VAST_EMPTY_RESPONSE:this.pg(nn.ImaVastEmptyResponse);break;case this.Hm.AdError.ErrorCode.VAST_WRAPPER_ERROR:case this.Hm.AdError.ErrorCode.VAST_MALFORMED_RESPONSE:this.pg(nn.ImaInvalidResponse);break;default:this.pg(nn.ImaRequestException)}},this.bg=t=>{this.Ym(t)&&(this.Wm=t.getAdsManager(this.sg,{loadVideoTimeout:kn*$.f}),this.vg(),this.ug.next({imaAdsManager:this.Wm,requestAdsContext:this.fg}))},this.qm.addEventListener(this.Hm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.bg),this.qm.addEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm)}get onSuccess(){return this.ug.asObservable()}get onError(){return this.dg.asObservable()}loadAd(){const t=new this.Hm.AdsRequest;t.adTagUrl=this.zm,t.linearAdSlotWidth=t.nonLinearAdSlotWidth=this.Qu,t.linearAdSlotHeight=t.nonLinearAdSlotHeight=this.Xu,t.pageUrl=this.ze,this.qm.requestAds(t,this.fg)}pg(t){this.dg.next(t)}vg(){this.qm.removeEventListener(this.Hm.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.bg),this.qm.removeEventListener(this.Hm.AdErrorEvent.Type.AD_ERROR,this.Xm)}Ym(t){const i=t.getUserRequestContext();return!i||i.id===this.fg.id}destroy(){var t;try{this.vg(),null===(t=this.Wm)||void 0===t||t.destroy()}catch(t){}}}const jn=25e3;class An{constructor(t){this.settings=t,this.mg=!1,this.gg=[],this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime(),this.yg=this.settings.adSlotContainerRecycler.requestAdSlotIma(this.settings.adContainer);const t=new Promise((t,i)=>{setTimeout(()=>{i(nn.ImaTimeout)},jn)}),i=this.wg(this.yg);return Promise.race([i,t]).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),this.mg=!0,this.xg&&St(this.gg),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),this.mg=!0,this.xg&&(St(this.gg),this.xg.destroy(),this.settings.adSlotContainerRecycler.recycleAdSlot(this.yg)),t})}wg(t){return t.fetchImaDependencies().then(t=>(this.Sg=t,this.Og(t))).then(t=>this.kg(t)).catch(t=>{throw Object(C.a)(t)?t:nn.ImaRequestException})}Og(t){return this.mg?Promise.reject():new Promise((i,e)=>{const s=this._g();this.xg=new _n(t.imaSdk,t.imaAdsLoader,s.width,s.height,this.settings.url,this.yg.videoSlot,this.settings.pageUrl),this.gg.push(this.xg.onSuccess.subscribe(t=>{i(t)}),this.xg.onError.subscribe(t=>{e(t)})),this.xg.loadAd()})}_g(){return this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType)}kg(t){return new On({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,url:this.settings.url,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,imaSdk:this.Sg.imaSdk,imaAdsLoader:this.Sg.imaAdsLoader,imaAdsManager:t.imaAdsManager,requestAdsContext:t.requestAdsContext,imaAdSlotContainer:this.yg,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl})}}function In(t,i){t.sort((t,i)=>t.width===i.width?t.bitrate-i.bitrate:t.width-i.width);for(let e=0;e<t.length;e++)if(t[e].width>=i)return t[e-1]||t[e];return t[t.length-1]}const Cn=()=>`cnx_bid_slot_${Object($t.c)()}`;var Tn=e(15);const Pn=Tn&&Tn.isSupported(),Mn=t=>t.canPlayType("application/vnd.apple.mpegurl"),En={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Ln{constructor(t,i,e,s=!1){this.jg=t,this.Ag=i,this.Ig=e,this.Cg=s,this.Tg=(t,i)=>{if(i.fatal)switch(i.type){case Tn.ErrorTypes.NETWORK_ERROR:if(i.details===Tn.ErrorDetails.MANIFEST_PARSING_ERROR||i.details===Tn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.Pg();this.Mg.startLoad();break;case Tn.ErrorTypes.MEDIA_ERROR:this.Mg.recoverMediaError();break;default:this.Pg()}},this.Eg=()=>{this.Mg.off(Tn.Events.MEDIA_ATTACHED,this.Eg),this.Mg.loadSource(this.jg),this.Mg.once(Tn.Events.MANIFEST_PARSED,this.Rg)},this.Rg=()=>{this.Mg.off(Tn.Events.MANIFEST_PARSED,this.Rg),this.Cg&&this.Bg(),this.Dg()}}start(t,i){this.Dg=t,this.Pg=i,Pn?(this.Mg=this.Ig.initHls(En),this.Fg()):this.Pg()}destroy(){this.Mg&&(this.Mg.destroy(),this.Mg=null)}Fg(){this.Mg.on(Tn.Events.ERROR,this.Tg),this.Mg.attachMedia(this.Ag),this.Mg.once(Tn.Events.MEDIA_ATTACHED,this.Eg)}Bg(){this.Mg.currentLevel=this.Mg.levels.length-1}}var Rn,Bn=e(51);class Dn extends un{constructor(t,i,e,s,r,a,o,c,l=!1){super(),this.Os=t,this.$g=i,this.sg=e,this.ir=s,this.Ug=r,this.Vg=a,this.Ng=o,this.Hg=c,this.qg=l,this.zg=!1,this.pageFocus=new Bn.a(this.Os),this.Wg=Object(u.a)(It),this.Gg=!1,this.Jg=!0,this.Qg=!1,this.Xg=[{event:w.b.AdVideoStart,position:0},{event:w.b.AdVideoFirstQuartile,position:25},{event:w.b.AdVideoMidpoint,position:50},{event:w.b.AdVideoThirdQuartile,position:75},{event:w.b.AdVideoComplete,position:100}],this.Yg=this.Xg[0],this.Kg=t=>{try{switch(t.type){case It.Pause:if(this.Vg&&!this.Jg)return void(this.Jg=!0);this.Gg=!1;break;case It.Play:if(!this.Gg&&this.qg)return void this.sg.pause();break;case It.Canplay:case It.Durationchange:this.Zg();break;case It.Timeupdate:this.ty();break;case It.Error:this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VastVideoTagEventError}});break;case"click":this.tm.next({type:w.b.AdClickThru,payload:{}})}}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,message:"AdManager_VastIntegrator_onVideoEvent",exception:t.message,throttle:10,sendMaxLog:!1})}}}initAd(t,i,e,s,n,r){try{this.sg=r.videoSlot,this.width=t,this.height=i,this.iy(this.Ug,this.sg.parentElement),this.resizeAd(t,i,e),this.addVideoEvents(this.sg),this.Hg&&Pn?this.ey():(this.sg.setAttribute("src",this.$g),this.sg.setAttribute("preload","metadata"),this.sg.load()),this.pageFocus.isDocumentVisible()||this.Zg()}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.WrapperInitAdError+`_${t.message}`}})}}startAd(){try{Object(j.a)(this.sg,"cnx-ad-video-slot"),this.Gg=!0,this.pageFocus.isDocumentVisible()?this.sg.play().then(()=>{this.tm.next({type:w.b.AdStarted}),this.tm.next({type:w.b.AdImpression,payload:{}})}).catch(t=>{this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VastPlayPromiseReject}})}):(this.tm.next({type:w.b.AdStarted}),this.tm.next({type:w.b.AdImpression,payload:{}}),this.sg.play())}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.WrapperStartAdError+`_${t.message}`}})}}stopAd(t){this.qg&&this.sg.pause(),"videoComplete"===t&&this.Vg?this.tm.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!1}}):this.tm.next({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}resizeAd(t,i,e){Object(j.Q)(this.sg,{width:`${t}px`,height:`${i}px`}),this.tm.next({type:w.b.AdSizeChange})}pauseAd(){this.Gg=!1,this.Ng&&void 0===this.Yg&&(this.Yg=this.Xg[0]),this.sg.pause(),this.tm.next({type:w.b.AdPaused})}resumeAd(){this.Vg&&void 0===this.Yg&&(this.Yg=this.Xg[0]),this.Gg=!0,this.sg.play(),this.ir===Vt.b.Ios&&Object(j.C)(this.sg),this.tm.next({type:w.b.AdPlaying})}expandAd(){}collapseAd(){}skipAd(){this.tm.next({type:w.b.AdSkipped})}getAdRemainingTime(){return this.sg.duration-this.sg.currentTime}getAdDuration(){return this.sg.duration?this.sg.duration:0}getAdVolume(){return this.sg.volume}setAdVolume(t){this.sg.volume=t}getAdMediaWidth(){return this.sg.videoWidth}getAdMediaHeight(){return this.sg.videoHeight}destroy(){if(!this.Ng&&!this.Vg)try{Object(j.L)(this.sg,"cnx-ad-video-slot"),this.sy(this.sg),this.sg.removeAttribute("src"),this.ny&&(this.ny.destroy(),this.ny=null)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_VastIntegrator_destroyAd",exception:t.message,callStack:t.stack})}}ey(){this.ny=new Ln(this.$g,this.sg,this.Os,!0),this.ny.start(()=>{this.Zg()},()=>{this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.CnxMediaSrcNotSupported}})})}iy(t,i){this.hy=this.Os.createElement("a"),t&&(this.hy.href=t,this.hy.target="_blank"),Object(j.a)(this.hy,"cnx-ad-slot"),i.appendChild(this.hy),this.hy.addEventListener("click",this.Kg)}addVideoEvents(t){this.Wg.forEach(i=>{t.addEventListener(i,this.Kg)}),this.hy&&this.hy.addEventListener("click",this.Kg)}sy(t){this.Wg.forEach(i=>{t.removeEventListener(i,this.Kg)}),this.hy&&this.hy.removeEventListener("click",this.Kg)}Zg(){this.zg||(this.zg=!0,this.tm.next({type:w.b.AdLoaded,payload:{}}))}ty(){this.tm.next({type:w.b.AdRemainingTimeChange});const t=Object(bt.g)(0,this.sg.duration,0,100,this.sg.currentTime);if(this.Yg&&t>=this.Yg.position){this.Qg||this.tm.next({type:this.Yg.event});const t=this.Yg;this.Yg=this.Xg[this.Xg.indexOf(this.Yg)+1],t.event===w.b.AdVideoComplete&&(this.Jg=!1,this.stopAd("videoComplete"),this.Qg=!0)}}}!function(t){t.errorIframe="Error creating iframe"}(Rn||(Rn={}));const Fn="cnxProxyTask",$n=`\n    window.${Fn} = function(task) {\n        setTimeout(function(){\n            task();\n        }, 0);\n    }\n`;class Un{static executeAsync(t,i){this.ay(t)(i)}static oy(t){return!!t[Fn]}static ay(t){return this.oy(t)||this.uy(t),t[Fn]}static uy(t){const i=t.document.head;Object(j.z)(i,t,$n)}}class Vn{constructor(t,i,e){this.Os=t,this.co=i,this.da=e}ly(t,i,e){let s=!1;return n=>{n.contentWindow&&!s&&(s=!0,this.py(n,this.by(t,i),e))}}vy(t,i,e,s,n){return this.my(t,this.ly(i,e,s),n)}my(t,i,e){const s=this.Os.createElement("iframe",e);return s.allow="autoplay",s.src="javascript:false",s.srcdoc="",s.width="100%",s.height="100%",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.margin="0px",s.style.padding="0px",s.style.border="0px",s.style.width="100%",s.style.height="100%",s.setAttribute("SCROLLING","NO"),s.onload=()=>{i(s)},t.appendChild(s),i(s),s}py(t,i,e){const s=Object(j.t)(t);Un.executeAsync(s,()=>{try{const e=t.contentWindow&&t.contentWindow.document;e.open(),e.write(i)}catch(i){this.gy(t,i),t=null}e(t)})}by(t,i){return Object.keys(i).forEach(function(e){let s;s="object"==typeof s?JSON.stringify(i[e]):i[e],t=t.replace(new RegExp(`{{${e}}}`,"g"),s)}),t}loadIframe(t){const i='<!DOCTYPE html><html lang="en"><head>'+(t.customHead?t.customHead:"")+'<meta charset="UTF-8"></head><body style="margin:0;padding:0">'+(t.customHtml?t.customHtml:"")+'<script type="text/javascript">window.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'*\');<\/script></body></html>',e="cnx-iframe_"+Object($t.c)();return new Promise((s,n)=>{this.yy=this.vy(t.container,i,{iframeID:e},i=>{if(null===i)return void n(Rn.errorIframe);const r=t=>{let h;try{h=JSON.parse(t.data)}catch(t){return}h.id===e&&(i.contentWindow?(i.contentWindow.document.close(),i.contentWindow.removeEventListener("message",r),s({iframe:i})):n("The Iframe is no longer in the DOM"))};try{i.contentWindow.addEventListener("message",r);const{advertiserLineItemId:e,heavyAdBlockTypeEnum:s}=t.customReportingLog;this.wy=new b(this.yy.contentWindow,this.co,{advertiserLineItemId:e,heavyAdBlockTypeEnum:s})}catch(t){this.gy(i,t),n("Iframe callback error")}},this.da)})}get iframe(){return this.yy}destroy(){this.wy.destroy(),this.yy=null}gy(t,i){this.Os.isDetachedFromDOM(t)?Object(n.a)({message:"iframeLoader_(inDom_false)",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:1}):Object(n.a)({message:"iframeLoader_(inDom_true)",exception:i.message,callStack:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,logJsonState:!0,sendMaxLog:!1,throttle:1}),Object(j.M)(t)}}class Nn{constructor(t,i,e,s,n){this.xy=t,this.Os=i,this.co=e,this.Kn=s,this.Sy=n,this.Oy={bodyTamplate:`<div class="ad-element" id="cnx-ad-element"></div><script type="text/javascript" src="${this.xy}"><\/script>'\n        <script type="text/javascript">\n            window.Object.defineProperty(Object.prototype, 'cnxInnerTag', { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            window.Object.defineProperty(Function.prototype, 'cnxInnerTag',\n            { enumerable: !1, writable: !0, value: '${this.Kn}' });\n            cnxtimeouts = [];\n            cnxintervals = [];\n            oldSetTimeout = setTimeout;\n            setTimeout = function (e, t) { var n = oldSetTimeout.apply(null, arguments); return cnxtimeouts.push(n), n };\n            oldSetInterval = setInterval;\n            setInterval = function (e, t) { var n = oldSetInterval.apply(null, arguments); return cnxintervals.push(n), n };\n            clearAll = function () {\n                setTimeout = function () { };\n                setInterval = function () { };\n                for (var e = 0; e < cnxtimeouts.length; e++) {\n                    clearTimeout(cnxtimeouts[e]);\n                }\n                for (e = 0; e < cnxintervals.length; e++) {\n                    clearInterval(cnxintervals[e]);\n                }\n            };\n        <\/script>`,headTamplate:" <style>\n            html,\n            body,\n            .ad-element {\n                width: 100%;\n                height: 100%;\n            }\n            </style>"},this.ky=new Vn(this.Os,this.co)}_y(t){return this.ky.loadIframe({customHead:this.Oy.headTamplate,customHtml:this.Oy.bodyTamplate,container:t,customReportingLog:{heavyAdBlockTypeEnum:h.ProtoHeavyAdBlockTypeEnum.VpaidIframe,advertiserLineItemId:this.Sy}})}loadAdUnitIframe(t){return new Promise((i,e)=>{this._y(t).then(t=>{t.adContainer=t.iframe.contentWindow.document.querySelector(".ad-element"),i(t)}).catch(t=>{e(t)})})}destroyAdUnit(){var t,i;try{const e=this.ky.iframe.contentWindow.clearAll;e&&e()}catch(e){Object(n.a)({message:"AdManager_VPAIClient_destroyAdUnit",exception:null===(t=e)||void 0===t?void 0:t.message,callStack:null===(i=e)||void 0===i?void 0:i.stack,level:h.ProtoLoggingLevelEnum.WARNING,throttle:2,sendMaxLog:!0})}this.ky.destroy(),this.ky=null}}var Hn;!function(t){t[t.handshakeVersion=0]="handshakeVersion",t[t.initAd=1]="initAd",t[t.startAd=2]="startAd",t[t.stopAd=3]="stopAd",t[t.skipAd=4]="skipAd",t[t.resizeAd=5]="resizeAd",t[t.pauseAd=6]="pauseAd",t[t.resumeAd=7]="resumeAd",t[t.expandAd=8]="expandAd",t[t.collapseAd=9]="collapseAd",t[t.subscribe=10]="subscribe",t[t.unsubscribe=11]="unsubscribe"}(Hn||(Hn={}));class qn extends un{constructor(t,i,e,s,r,a,o){super(),this.$g=t,this.Os=i,this.co=e,this.jy=s,this.Sy=r,this.dm=a,this.ir=o,this.Ay=[],this.Iy=new Set,this.Cy=new Set,this.Ty=(t,i,e)=>{const s={url:t,playerHandles:e};this.Py(w.b.AdClickThru,s)},this.Py=(t,i)=>{if(this.Cy.add(t),!this.Iy.has(t))return t!==w.b.AdImpression||this.Cy.has(w.b.AdLoaded)?void this.My(t,i):(Object(n.a)({message:"AdManager_AdVpaidWrapper_ImpressionBeforeAdLoaded",exception:`advertiserLineItemId:${this.Sy}_creativeId:${this.dm}_vpaidSrc:${this.$g}`,callStack:JSON.stringify(Object(l.d)(this.Cy)),throttle:1e3,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Iy.add(w.b.AdLoaded),void this.My(w.b.AdLoaded,i))},this.My=(t,i)=>{switch(t){case w.b.AdError:this.tm.next({type:w.b.AdError,payload:{errorMessage:Object(C.g)(i)?i:JSON.stringify(i)}});break;case w.b.AdLoaded:this.tm.next({type:w.b.AdLoaded,payload:{skipOffset:Object(C.f)(i)?i.skipOffset:void 0}});break;case w.b.AdImpression:this.tm.next({type:w.b.AdImpression,payload:{}});break;case w.b.AdClickThru:this.tm.next({type:w.b.AdClickThru,payload:Object(C.f)(i)?i:{}});break;default:this.tm.next({type:w.b[t]})}}}initAd(t,i,e,s,n,r){try{this.Qu=t,this.Xu=i,this.ig=e,this.Ey=s,this.Ly=n,this.Ry=r,this.By=new Nn(this.$g,this.Os,this.co,this.jy,this.Sy),this.Dy=this.By.loadAdUnitIframe(r.slot).then(t=>{this.Fy(t)}).catch(t=>{this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VpaidOnLoad}})})}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VpaidOnLoad}})}}startAd(){try{this.Cy.has(w.b.AdImpression)&&!this.Iy.has(w.b.AdImpression)&&(Object(n.a)({message:"AdManager_AdVpaidWrapper_brokenImpressionHandle",exception:`advertiserLineItemId:${this.Sy}_creativeId:${this.dm}_vpaidSrc:${this.$g}`,callStack:JSON.stringify(Object(l.d)(this.Cy)),throttle:1e3,level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!0}),this.Iy.add(w.b.AdImpression),this.tm.next({type:w.b.AdImpression,payload:{}})),this.$y.startAd()}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.WrapperStartAdError}})}}stopAd(t){var i;null===(i=this.Dy)||void 0===i||i.then(()=>{this.$y?this.$y.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})})}resizeAd(t,i,e){this.$y.resizeAd(t,i,e)}pauseAd(){this.$y.pauseAd()}resumeAd(){this.$y.resumeAd(),this.ir===Vt.b.Ios&&Object(j.C)(this.Ry.videoSlot)}expandAd(){this.$y.expandAd()}collapseAd(){this.$y.collapseAd()}skipAd(){this.$y.skipAd()}getAdRemainingTime(){return this.$y.getAdRemainingTime()}getAdDuration(){var t;return null===(t=this.$y)||void 0===t?void 0:t.getAdDuration()}getAdVolume(){return this.$y.getAdVolume()}setAdVolume(t){this.$y.setAdVolume(t)}destroy(){var t;this.Uy(),this.Ay.length=0,this.$y=null,null===(t=this.By)||void 0===t||t.destroyAdUnit()}Fy(t){const i=t.iframe.contentWindow.getVPAIDAd;if("function"==typeof i){const e=i();this.$y=e,this.xd(),this.Vy(e)?e.initAd(this.Qu,this.Xu,this.ig,this.Ey,this.Ly,{slot:t.adContainer,videoSlot:this.Ry.videoSlot}):this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VpaidInvalid}})}else this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.VpaidGetVpaidAdError}})}xd(){Object.keys(w.b).forEach(t=>{let i=this.Py.bind(this,w.b[t]);w.b[t]===w.b.AdClickThru&&(i=this.Ty),this.Ay.push({handler:i,event:t}),this.$y.subscribe(i,t)})}Uy(){this.Ay.forEach(t=>{this.$y.unsubscribe(t.handler,t.event)})}Vy(t){return Object.keys(Object(l.f)(Hn)).every(i=>Object(C.b)(t[Hn[i]]))}}const zn="video/mp4";class Wn extends mn{constructor(t){super(t),this.settings=t,this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.Ny=[],this.creativeId=t.vastResponse.creativeId}initAd(t,i,e,s,n,r,a){try{super.initAd(t,i,e,s,n,r,a),Object(gn.b)(this.settings.adManagerLineItem.protoLineItem.publisherLineItemId,this.settings.vastResponse.clickThrough).then(n=>{if(n)return void this.ym({type:w.b.AdError,payload:{errorMessage:on.c.DomainBlocked}});if(this.Hy=this.qy(t,this.cm),null===this.Hy)return void this.ym({type:w.b.AdError,payload:{errorMessage:on.c.VastUnsupportedMedia}});this.adMediaType=this.Hy.type,this.Hy.getMediaFileType()===on.d.Video?(this.zy=new Dn(this.settings.globalDomUtilsService,this.Hy.src,this.cm,this.settings.os,this.settings.vastResponse.clickThrough,this.settings.loopAdWhenFinished),this.adSourceType=h.ProtoAdsourceTypeEnum.VastMedia):(this.zy=new qn(this.Hy.src,this.settings.globalDomUtilsService,this.settings.trackingService,this.Pm,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.creativeId,this.settings.os),this.adSourceType=h.ProtoAdsourceTypeEnum.Vpaid),this.Ny.push(this.zy.onVpaidEvent.subscribe(t=>{if(t.type===w.b.AdLoaded&&(t.payload.skipOffset=this.settings.vastResponse.skipoffset),t.type===w.b.AdClickThru){this.Wy=t.payload.url;const i=t.payload.url||this.settings.vastResponse.clickThrough;i&&t.payload.playerHandles&&this.settings.globalDomUtilsService.open(i,Ue.c.Blank)}this.ym(t)}));const r={AdParameters:this.settings.vastResponse.adParameters,adParameters:this.settings.vastResponse.adParameters};this.zy.initAd(t,i,e,s,r,{slot:this.om,videoSlot:this.cm})}).catch(t=>this.Gy(t))}catch(t){this.Gy(t)}}startAd(){try{super.startAd(),this.zy.startAd()}catch(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.zy?this.zy.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.zy.resizeAd(t,i,e)}catch(t){this.Nm("VastBidAdaptor","resizeAd",t)}}pauseAd(){try{this.zy.pauseAd()}catch(t){this.Nm("VastBidAdaptor","pauseAd",t)}}resumeAd(){try{this.zy.resumeAd()}catch(t){this.Nm("VastBidAdaptor","resumeAd",t)}}expandAd(){try{this.zy.expandAd()}catch(t){this.Nm("VastBidAdaptor","expandAd",t)}}collapseAd(){try{this.zy.collapseAd()}catch(t){this.Nm("VastBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.zy.skipAd()}catch(t){this.Nm("VastBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.zy.getAdRemainingTime()}catch(t){return this.Nm("VastBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.zy&&this.zy.getAdDuration()||Math.round(this.settings.vastResponse.duration/$.f)}catch(t){return this.Nm("VastBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.zy.getAdVolume()}catch(t){return this.Nm("VastBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){let t=0,i=0;return this.zy instanceof Dn?(t=this.zy.getAdMediaWidth(),i=this.zy.getAdMediaHeight()):(t=this.Hy.width,i=this.Hy.height),{width:t,height:i}}setAdVolume(t){try{super.setAdVolume(t),this.zy.setAdVolume(t)}catch(t){this.Nm("VastBidAdaptor","setAdVolume",t)}}get adVideoUrl(){var t;return null===(t=this.Hy)||void 0===t?void 0:t.src}get declaredDurationInSeconds(){return this.settings.vastResponse.duration/$.f}Bm(t){const i=super.Bm(t);return this.Jy(i)}Rm(t){const i=super.Rm(t);return this.Jy(i)}Ac(){var t;if(!this.settings.loopAdWhenFinished)try{super.Ac(),St(this.Ny),null===(t=this.zy)||void 0===t||t.destroy()}catch(t){this.Nm("VastBidAdaptor","_destroy",t)}}Jy(t){var i;return t.payload.adSourceData.name=null===(i=this.settings.vastResponse)||void 0===i?void 0:i.adTitle,t.payload.clickThroughUrl=this.Wy||this.settings.vastResponse.clickThrough,t}Qy(t,i){return t.filter(t=>t.getMediaFileType()===on.d.Video&&i.canPlayType(t.type))}qy(t,i){const e=this.Qy(this.settings.vastResponse.mediaFiles,i),s=e.filter(t=>t.type===zn);if(s.length)return In(s,t);if(e.length)return In(e,t);const n=this.settings.vastResponse.mediaFiles.filter(t=>t.getMediaFileType()===on.d.Javascript);return n.length?In(n,t):null}Gy(t){this.tm.next({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorInitAdError+`_${t.message}`}})}}var Gn,Jn;!function(t){function i(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):isFinite(Date.parse(t))?new Date(t):"string"==typeof t?t.trim():t}t.JXONTree=function t(e){let s=0,n="";if(this.keyAttributes||(this.keyAttributes={}),e.hasChildNodes()){for(let i,s,r,h=0;h<e.childNodes.length;h++)((i=e.childNodes.item(h)).nodeType-1|1)===Node.TEXT_NODE?n+=i.nodeType===Node.TEXT_NODE?i.nodeValue.trim():i.nodeValue:1!==i.nodeType||i.prefix||(s=i.nodeName.toLowerCase(),r=new t(i),this.hasOwnProperty(s)?(this[s].constructor!==Array&&(this[s]=[this[s]]),this[s].push(r)):this[s]=r);this.keyValue=n?i(n):null}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes()){let t;for(;s<e.attributes.length;s++)t=e.attributes.item(s),this.keyAttributes[t.name.toLowerCase()]=i(t.value.trim())}},t.getKeyValue=function(t){if(t&&t.keyValue)return t.keyValue},t.decodeXMLText=function(t){if("string"==typeof t)return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}(Gn||(Gn={}));class Qn{constructor(t){this.Xy=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],this.Yy="VPAID",this.delivery=void 0,this.type=void 0,this.width=0,this.height=0,this.codec=void 0,this.id=void 0,this.bitrate=void 0,this.minBitrate=void 0,this.maxBitrate=void 0,this.scalable=void 0,this.maintainAspectRatio=void 0,this.apiFramework=void 0,this.src=void 0,this.delivery=t.keyAttributes.delivery,this.type=t.keyAttributes.type,this.width=t.keyAttributes.width,this.height=t.keyAttributes.height,this.codec=t.keyAttributes.codec,this.id=t.keyAttributes.id,this.bitrate=t.keyAttributes.bitrate,this.minBitrate=t.keyAttributes.minbitrate,this.maxBitrate=t.keyAttributes.maxbitrate,this.scalable=t.keyAttributes.scalable,this.maintainAspectRatio=t.keyAttributes.maintainaspectratio,this.apiFramework=t.keyAttributes.apiframework,this.src=Gn.getKeyValue(t)}isSupported(){return!("application/x-shockwave-flash"===this.type||"video/x-flv"===this.type)}getMediaFileType(){return this.apiFramework===this.Yy||Object(l.g)(this.type,this.Xy)?on.d.Javascript:on.d.Video}}class Xn{constructor(t,i){this.name=t.keyAttributes.event,this.uri=Gn.getKeyValue(t),"progress"===this.name&&(this.offset=Object(Ti.d)(t.keyAttributes.offset,i))}}class Yn{constructor(t){this.clickThrough=void 0,this.clickTrackings=[],this.customClicks=[],this.clickThrough=Gn.getKeyValue(t.clickthrough),this.clickTrackings=this.Ky(Object(l.m)(t.clicktracking)),this.customClicks=this.Ky(Object(l.m)(t.customclick))}Ky(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Gn.getKeyValue(t))}),i}}class Kn{constructor(t){this.duration=void 0,this.mediaFiles=[],this.trackingEvents=[],this.skipoffset=void 0,this.videoClicks=void 0,this.duration=Object(Ti.a)(Gn.getKeyValue(t.duration)),this.skipoffset=Object(Ti.d)(t.keyAttributes.skipoffset,this.duration),t.mediafiles&&(this.mediaFiles=this.Zy(Object(l.m)(t.mediafiles.mediafile))),t.trackingevents&&(this.trackingEvents=this.tw(Object(l.m)(t.trackingevents.tracking))),t.videoclicks&&(this.videoClicks=new Yn(t.videoclicks)),t.adparameters&&(this.adParameters=Gn.getKeyValue(t.adparameters),t.adparameters["@xmlEncoded"]&&(this.adParameters=Gn.decodeXMLText(this.adParameters)))}tw(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(new Xn(t,this.duration))}),i}Zy(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{const e=new Qn(t);e.isSupported()&&i.push(e)}),i}isSupported(){return!0}}class Zn{constructor(t){this.id=void 0,this.sequence=void 0,this.adId=void 0,this.linear=void 0,this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,this.adId=t.keyAttributes.adid,t.linear&&(this.linear=new Kn(t.linear))}isSupported(){return!0}}!function(t){function i(t){const i=[];return void 0!==t[0]&&t.forEach(t=>{i.push(Gn.getKeyValue(t))}),i}t.parseImpressions=function(t){return i(t)},t.parseCretives=function(t){const i=[];return t.forEach(t=>{i.push(new Zn(t))}),i},t.parseErrors=function(t){return i(t)}}(Jn||(Jn={}));class tr{constructor(t){this.description=void 0,this.advertiser=void 0,this.surveys=void 0,this.errors=void 0,this.pricing=void 0,this.extensions=void 0,this.adTitle=Gn.getKeyValue(t.adtitle),this.adSystem=Gn.getKeyValue(t.adsystem),this.impressions=Jn.parseImpressions(Object(l.m)(t.impression)),this.creatives=Jn.parseCretives(Object(l.m)(t.creatives.creative)),this.description=Gn.getKeyValue(t.description),this.advertiser=Gn.getKeyValue(t.advertiser),this.surveys=Gn.getKeyValue(t.survey),this.errors=Jn.parseErrors(Object(l.m)(t.error)),this.pricing=Gn.getKeyValue(t.pricing),this.extensions=Gn.getKeyValue(t.extensions)}isSupported(){return!0}}class ir{constructor(t){this.adSystem=void 0,this.impressions=[],this.VASTAdTagURI=void 0,this.creatives=[],this.errors=void 0,this.extensions=void 0,this.fallowAdditionalWrappers=void 0,this.allowMultipleAds=void 0,this.fallbackOnNoAd=void 0,this.adSystem=Gn.getKeyValue(t.adSystem),this.impressions=Jn.parseImpressions(Object(l.m)(t.impression)),this.VASTAdTagURI=Gn.getKeyValue(t.vastadtaguri),this.creatives=t.creatives.creative?Jn.parseCretives(Object(l.m)(t.creatives.creative)):[],this.errors=Jn.parseErrors(Object(l.m)(t.error)),this.extensions=t.extensions,this.fallowAdditionalWrappers=!t.keyAttributes.followadditionalwrappers||t.keyAttributes.followadditionalwrappers,this.allowMultipleAds=t.keyAttributes.allowmultipleads,this.fallbackOnNoAd=t.keyAttributes.fallbackonnoad}}class er{constructor(t){Array.isArray(t)?this.iw(t):this.ew(t)}isSupported(){return!0}ew(t){this.id=t.keyAttributes.id,this.sequence=t.keyAttributes.sequence,t.inline?this.inLine=new tr(t.inline):t.wrapper&&(this.wrapper=new ir(t.wrapper))}iw(t){const i=t.filter(t=>{const i=this.sw(t).filter(t=>t.linear);return!!Object(l.h)(i)});Object(l.h)(i)&&this.ew(i[0])}sw(t){return t.inline?Object(l.m)(t.inline.creatives.creative):t.wrapper?Object(l.m)(t.wrapper.creatives.creative):[]}}class sr{constructor(t=2){this.nw=t}parseVastXml(t){try{if(!this.rw(t))return{error:!0,errorReason:nn.XmlInvalidString};const i=(new DOMParser).parseFromString(t,"application/xml"),e=new Gn.JXONTree(i.documentElement);if(!this.hw(e,this.nw))return{error:!0,errorReason:nn.XmlInvalidTree};const s=new er(e.ad);return this.aw(s)?{error:!1,result:s}:{error:!0,errorReason:nn.XmlInvalidAd}}catch(t){return{error:!0,errorReason:nn.XmlParseGeneral}}}rw(t){return Object(C.h)(t)}hw(t,i){if(!t.ad)return!1;const e=parseInt(t.keyAttributes.version,10);return!(e&&e<i)}aw(t){const i=t.wrapper,e=t.inLine;if(!e&&!i)return!1;if(i&&!i.VASTAdTagURI)return!1;if(!i){if(![...e.creatives].filter(t=>{var i,e;return null===(e=null===(i=t)||void 0===i?void 0:i.linear)||void 0===e?void 0:e.mediaFiles.length}).length)return!1}return!0}}class nr{constructor(t){this.mediaFiles=[],this.adTitle=void 0,this.adParameters=void 0,this.clickThrough=void 0,this.creativeId=void 0,t.forEach(t=>{t.inLine?(this.adTitle=t.inLine.adTitle,this.Jv(t.inLine.creatives)):t.wrapper&&this.Jv(t.wrapper.creatives)})}Qv(t){this.duration=t.duration,this.ow(t.mediaFiles),this.cw(t.skipoffset),this.uw(t.adParameters),t.videoClicks&&t.videoClicks.clickThrough&&this.iy(t.videoClicks.clickThrough)}uw(t){this.adParameters=t}cw(t){this.skipoffset=t}ow(t){this.mediaFiles=[...this.mediaFiles,...t]}iy(t){this.clickThrough=t}Jv(t){t.forEach(t=>{t.linear&&(this.creativeId=t.id,this.Qv(t.linear))})}}const rr=2,hr=10;class ar{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()},this.settings.vastAdsChain||(this.settings.vastAdsChain=[]),void 0===this.settings.maxWrapperLimit&&(this.settings.maxWrapperLimit=hr)}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.lw(this.settings.xml).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}lw(t){return new Promise((i,e)=>{const s=new sr(rr).parseVastXml(t);!0!==s.error?(this.dw(s.result),i(this.fw(s.result))):e(s.errorReason)})}fw(t){return new Promise((i,e)=>{if(t.wrapper){this.settings.maxWrapperLimit<=0&&e(nn.XmlAdaptorWrapperLimit);const s=this.settings.maxWrapperLimit-1;i(new dr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,maxWrapperLimit:s,url:t.wrapper.VASTAdTagURI,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}).fetchBid())}else{i(new Wn({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,vastResponse:new nr(this.settings.vastAdsChain),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished}))}})}dw(t){!function(t,i){const e=new Ys(t);i.adError.push(...sn(e.errorUrls)),i.adImpression.push(...sn(e.impressions)),i.adClick.push(...sn(e.clickTrackings)),i.adMute.push(...sn(e.trackingEvents.mute)),i.adPause.push(...sn(e.trackingEvents.pause)),i.adQuartileFirst.push(...sn(e.trackingEvents.firstQuartile)),i.adQuartileSecond.push(...sn(e.trackingEvents.midpoint)),i.adQuartileThird.push(...sn(e.trackingEvents.thirdQuartile)),i.adQuartileFourth.push(...sn(e.trackingEvents.complete)),i.adResume.push(...sn(e.trackingEvents.resume)),i.adSkip.push(...sn(e.trackingEvents.skip)),i.adStarted.push(...sn(e.trackingEvents.creativeView)),i.adVideoStart.push(...sn([...e.trackingEvents.start])),i.adUnmute.push(...i.adUnmute,...sn(e.trackingEvents.unmute)),i.adUserAcceptInvitation.push(...sn([...e.trackingEvents.acceptInvitation,...e.trackingEvents.acceptInvitationLinear])),i.adUserClose.push(...sn(e.trackingEvents.close)),i.adUserMinimize.push(...i.adUserMinimize,...sn([...e.trackingEvents.collapse,...e.trackingEvents.playerCollapse,...e.trackingEvents.adCollapse]))}(t,this.settings.trackersInformation),this.settings.vastAdsChain.push(t)}}var or,cr=e(25);!function(t){t[t.None=0]="None",t[t.Ima=1]="Ima"}(or||(or={}));const ur={[or.Ima]:".g.doubleclick.net"},lr=!0;class dr{constructor(t){this.settings=t,void 0===this.settings.requestWithCredentials&&(this.settings.requestWithCredentials=lr),this.metrics={created:(new Date).getTime()}}fetchBid(){return this.metrics.fetchStart=(new Date).getTime(),this.pw(this.settings.url).then(t=>t.fetchBid()).then(t=>(this.metrics.fetchEnd=(new Date).getTime(),t)).catch(t=>{throw this.metrics.fetchEnd=(new Date).getTime(),t})}vw(t){let i=or.None;return Object.keys(ur).forEach(e=>{-1!==t.indexOf(ur[e])&&(i=parseInt(e,10))}),i}pw(t){const i=this.mw(t);switch(this.vw(t)){case or.None:return this.gw(i);case or.Ima:return this.yw(i);default:return Promise.reject(nn.HandlingSdkUrl)}}yw(t){return Promise.resolve(new An({url:t,id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,pageUrl:this.settings.pageUrl}))}gw(t){return cr.a.fetchXMLRequest(t,this.settings.requestWithCredentials).catch(t=>Promise.reject(nn.NetworkRequestUrl)).then(t=>new ar({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackersInformation:this.settings.trackersInformation,vastAdsChain:this.settings.vastAdsChain,xml:t,replaceTrackingMacros:!1,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,adMacroReplacer:this.settings.adMacroReplacer,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,trackingService:this.settings.trackingService,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,requestWithCredentials:this.settings.requestWithCredentials,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,creativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.pageUrl}))}mw(t){const{width:i,height:e}=this.settings.callingState.adContainerState.get(this.settings.adManagerLineItem.protoLineItem.adType),s={adHeight:e,adWidth:i,adPostion:this.settings.callingState.adBreakState.adBreakType},n={mediaDescription:this.settings.callingState.media.mediaDescription,mediaDuration:this.settings.callingState.media.mediaDuration,mediaId:this.settings.callingState.media.mediaId,mediaTitle:this.settings.callingState.media.mediaTitle,mediaUrl:this.settings.callingState.media.mediaUrl};return this.settings.adMacroReplacer.replace(t,this.settings.adManagerLineItem.protoLineItem.vendorId,{adMacros:s,mediaMacros:n})}}class fr{constructor(t={}){this.data=t,Object(C.h)(this.data.cnxBidId)||(this.data.cnxBidId=Object($t.c)())}}var pr=e(34);function br(t,i){return t.find(t=>t.adManagerLineItem.protoLineItem.advertiserLineItemId===i).adManagerLineItem}function vr(t){const i=[];return t.callers.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(l.g)(e,i)||i.push(e)}),t.bids.forEach(t=>{const e=t.settings.requestMetadata.data.requestedFloorPriceIndex;void 0===e||Object(l.g)(e,i)||i.push(e)}),i}function mr(t){return[h.ProtoCreativeTypeEnum.Tam,h.ProtoCreativeTypeEnum.TamDeal,h.ProtoCreativeTypeEnum.Rtb,h.ProtoCreativeTypeEnum.HeaderBidder].includes(t)}class gr{constructor(t,i,e,s,n){this.ww=t,this.xw=i,this.Sy=e,this.Os=s,this.co=n,this.Sw="div-cnx-display",this.Ow=new yt,this.dg=new yt}get onDisplayAd(){return this.Ow.asObservable()}get onError(){return this.dg.asObservable()}initializeAd(t,i){try{this.om=t,this.ky=new Vn(this.Os,this.co);let e="";this.ww===on.b.Html&&(e=this.xw);const s=this.kw(this.om,i);this.ky.loadIframe({customHead:"<style>html, body {position:relative;width:100%;height:100%}#"+this.Sw+"{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}#"+this.Sw+"{border:3px solid white}#"+this.Sw+" iframe{display:block}</style>",customHtml:'<div id="'+this.Sw+'">'+e+"</div>",container:s,customReportingLog:{heavyAdBlockTypeEnum:h.ProtoHeavyAdBlockTypeEnum.OverlayIframe,advertiserLineItemId:this.Sy}}).then(t=>{this._w=t.iframe;const i=this._w.contentWindow;if(this.jw=i.document.getElementById(this.Sw),this.ww===on.b.Javascript&&Object(j.z)(this.jw,i,this.xw),""===this._w.contentWindow.document.head.innerHTML){const t="html, body {position:relative;width:100%;height:100%;margin:0;border:0}";this.Aw(t)}Object(j.H)(this._w.contentWindow,"AdHtmlWrapper"),this.Ow.next()}).catch(t=>{this.dg.next(on.c.DisplayIntegratorIframeLoad)})}catch(t){this.dg.next(on.c.WrapperInitAdError)}}getAdMediaWidth(){return this.jw.clientWidth}getAdMediaHeight(){return this.jw.clientHeight}destroy(){this._w&&this.om&&Object(j.M)(this._w),this.ky&&(this.ky.destroy(),this.ky=null)}kw(t,i){if(!i.width||!i.height)return t;const e=this.Os.createElementByString(`<div class="cnx-iframe-container" style="width: ${i.width}px; height: ${i.height}px"></div>`);return this.om.appendChild(e),e}Aw(t){const i=this._w.contentWindow.document.createElement("style"),e=this._w.contentWindow.document.createTextNode(t);i.appendChild(e),this._w.contentWindow.document.head.appendChild(i)}}const yr={[D.FirstQuartile]:w.b.AdVideoFirstQuartile,[D.SecondQuartile]:w.b.AdVideoMidpoint,[D.ThirdQuartile]:w.b.AdVideoThirdQuartile,[D.FourthQuartile]:w.b.AdVideoComplete};class wr extends mn{constructor(t){super(t),this.settings=t,this.adMediaType="displayHtml",this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.Iw="html",this.ou=500,this.cu=1,this.Cw=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*$.f;this.Tw=new xt(i,this.ou,this.cu),this.Cw.push(this.Tw.onTimeUpdate.subscribe(()=>{this.ym({type:w.b.AdRemainingTimeChange})}),this.Tw.onTimeElapsed.subscribe(()=>{this.stopAd("htmlTimerElapsed")}),this.Tw.onQuartile.subscribe(t=>{this.ym({type:yr[t],payload:{}})}))}get adVideoUrl(){return this.Iw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.overlayTime}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.Qu=t,this.Xu=i,this.ym({type:w.b.AdLoaded,payload:{}})}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.Tw.start(),this.Pw=new gr(this.settings.mime,this.settings.html,this.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,this.settings.globalDomUtilsService,this.settings.trackingService),this.Cw.push(this.Pw.onDisplayAd.subscribe(()=>{this.ym({type:w.b.AdStarted}),this.ym({type:w.b.AdVideoStart}),this.ym({type:w.b.AdImpression,payload:{}})}),this.Pw.onError.subscribe(t=>{this.ym({type:w.b.AdError,payload:{errorMessage:t}}),this.Tw.stop()})),this.Pw.initializeAd(this.om,{width:this.Qu,height:this.Xu})}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){try{super.stopAd(t),this.Tw.stop(),this.ym({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.Nm("HtmlBidAdaptor","stopAd",t)}}skipAd(){try{super.skipAd(),this.ym({type:w.b.AdSkipped})}catch(t){this.Nm("HtmlBidAdaptor","skipAd",t)}}pauseAd(){try{this.Tw.stop(),this.ym({type:w.b.AdPaused})}catch(t){this.Nm("HtmlBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Tw.start(),this.ym({type:w.b.AdPlaying})}catch(t){this.Nm("HtmlBidAdaptor","resumeAd",t)}}collapseAd(){}expandAd(){}getAdDuration(){return this.Tw.timerDuration/$.f}getAdRemainingTime(){return this.Tw.timeRemaining/$.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.Pw.getAdMediaWidth(),height:this.Pw.getAdMediaHeight()}}setAdVolume(t){}resizeAd(t,i,e){this.Qu=t,this.Xu=i}Ac(){var t;try{super.Ac(),this.Tw.stop(),St(this.Cw),null===(t=this.Pw)||void 0===t||t.destroy()}catch(t){this.Nm("HtmlBidAdaptor","_destroy",t)}}}class xr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){if(this.metrics.fetchStart=(new Date).getTime(),!this.Mw(this.settings.mime))return Promise.reject(nn.HTMLUnknownMimeType);const t=new wr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,html:this.settings.html,mime:this.settings.mime,minDimensions:this.settings.dimensions,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,trackingService:this.settings.trackingService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,successRate:this.settings.successRate,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,externalCreativeId:this.settings.creativeId,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}Mw(t){return Object.keys(on.b).some(i=>on.b[i]===t)}}const Sr="cnxRtbTest";class Or{constructor(t,i,e,s,n,r,h,a){this.Ew=t,this.Lw=i,this.Kb=e,this.Rw=s,this.Bw=n,this.Dw=r,this.Fw=h,this.$w=a,this.Uw=0,this.Vw=new Map}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=this.Nw(i,e),r=this.Hw(t);return!s||Object.keys(r.lineItems).length<=0?Promise.resolve({bids:[],noBids:[]}):this.qw(r).then(i=>this.zw(i,t)).catch(t=>(Object(n.a)({message:"RtbCallAggregator",exception:t.message,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),{bids:[],noBids:[]}))}destroy(){}zw(t,i){const e={bids:[],noBids:[]};return t.lineItemResponses.forEach(s=>{const n=br(i.lineItemRequestDataList,s.id);Object(C.d)(s.cachedFloorPrice)&&this.Vw.set(s.id,s.cachedFloorPrice),s.bids.forEach(s=>{const r=this.Ww(s,n,t,i.callingState);r&&e.bids.push(r)}),s.noBids.forEach(i=>{e.noBids.push(this.Gw(i,n,t))})}),e}Gw(t,i,e){return{lineItem:i,requestMetadata:new fr({requestedFloorPrice:t.requestedFloorPrice,requestedFloorPriceIndex:t.floorPriceFactorIndex,rtbRequestNumber:this.Uw,syncedUser:t.syncedUser,partnerCustomHeaders:t.partnerCustomHeaders,partnerReason:t.partnerReason,requestTrackingHandledByServer:!0}),reason:t.connatixReason}}Ww(t,i,e,s){let n=t;const r=this.Jw(n,i),a=new fr({requestedFloorPrice:n.requestedFloorPrice,requestedFloorPriceIndex:n.floorPriceFactorIndex,syncedUser:n.syncedUser,rtbRequestNumber:this.Uw,encryptedPrice:n.encryptedPrice,dspId:n.dspId,rtbAdomain:n.adomain,rtbSeatId:n.seatId,rtbCampainId:n.campaignId,cnxBidId:n.cnxBidId,requestTrackingHandledByServer:!0,logAuctionInformation:n.logAuctionInformation}),o=Cn();switch(i.protoLineItem.adType){case h.ProtoAdType.Video:return new ar({id:Object($t.c)(),adManagerLineItem:i,replaceTrackingMacros:!0,trackersInformation:r,xml:n.vastTag,bidSlotId:o,requestMetadata:a,callingState:s,adMacroReplacer:this.Rw,adContainer:this.Bw.get(i.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,obfuscatedPrice:n.gtkpbp,adEnforcer:this.Fw,creativeId:n.creativeId,successRate:n.successRate,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,pageUrl:this.Kb.config.pageUrl});case h.ProtoAdType.Overlay:return new xr({id:Object($t.c)(),adManagerLineItem:i,dimensions:{width:n.width,height:n.height},html:n.vastTag,mime:n.mime,bidSlotId:o,replaceTrackingMacros:!0,requestMetadata:a,trackersInformation:r,callingState:s,adContainer:this.Bw.get(i.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,obfuscatedPrice:n.gtkpbp,adEnforcer:this.Fw,creativeId:n.creativeId,successRate:n.successRate,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w})}}Jw(t,i){const e=new Zs;tn(i.protoLineItem.trackers,e);const s=[...t.billingNoticeUrlList,t.adQualityCheckUrl].filter(t=>Object(C.h)(t)).map(t=>en(t));return e.adImpression.push(...s),Object(C.h)(t.winNoticeUrl)&&e.adWin.push(en(t.winNoticeUrl)),e}Qw(t,i){if(t.protoLineItem.adType===h.ProtoAdType.Overlay){const e=i.adContainerState.get(h.ProtoAdType.Video),s=i.adContainerState.get(t.protoLineItem.adType);if(e.height!==s.height||e.width!==s.width)return{width:s.width,height:s.height}}return null}Xw(t,i){const e={};return t.filter(t=>this.Dw.shouldRequestLineItem(t.adManagerLineItem.protoLineItem.advertiserLineItemId)).forEach(t=>{var s,n;const r=t.adManagerLineItem,h=this.Qw(r,i),a=this.Vw.get(r.protoLineItem.advertiserLineItemId);e[r.protoLineItem.advertiserLineItemId]={availableRequests:t.maxAvailableRequests,gdprConsent:this.Kb.services.UserManagerService.isConsent(r.protoLineItem.vendorId),cachedFloorPrice:a||void 0,ignoredFloorPriceFactorIndexes:vr(r),publisherLineItemId:r.protoLineItem.publisherLineItemId,slotHeight:null===(s=h)||void 0===s?void 0:s.height,slotWidth:null===(n=h)||void 0===n?void 0:n.width}}),e}Hw(t){const{width:i,height:e,viewability:s}=t.callingState.adContainerState.get(h.ProtoAdType.Video);return{metadata:this.Kb.services.TrackingService.getMetadataModel(),gdprCompliant:this.Kb.services.UserManagerService.isGDPR(),gdprConsentData:this.Kb.services.UserManagerService.getConsentPayload(),soundOn:t.callingState.sound,videoHeight:e,videoWidth:i,testMode:"true"===Object(ks.b)(Sr,this.Kb.config.pageUrl),explorationMode:this.Kb.config.explorationMode,viewability:s,outstream:this.Ew,domainURL:this.Kb.config.domainURL,isClickToPlay:t.callingState.clickToPlay,appVersion:this.Kb.config.appVersion,deviceID:this.Kb.services.UserManagerService.getDeviceId(),isCcpaBlockingUserInfo:!this.Kb.services.UserManagerService.isSellUserAllowed(),usPrivacyString:this.Kb.services.UserManagerService.getUsPrivacyString(),adSkippability:this.Lw.adSkippability,skipAdAfter:this.Lw.skipAdAfter,gdprConsentMode:this.Kb.services.UserManagerService.gdprConsentMode,customMacros:this.Kb.services.MacrosService.getExtraMacros(),maxAdDuration:t.maxAdDuration,lineItems:this.Xw(t.lineItemRequestDataList,t.callingState),adsMustBeSkippableIfLongerThan:this.Lw.adsMustBeSkippableIfLongerThan}}qw(t){return this.Uw++,cr.a.sendProtoRequest({endpoint:zt.a.endPoints.api.rtb,ProtoRequest:h.ProtoRtbRequest,ProtoResponse:h.ProtoRtbResponse,requestData:t,queryParams:{[pr.b]:Yi.a.version},logError:!1})}Nw(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_BidderCaller_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}var kr=e(23),_r=e(39);const jr=[_r.a.P1,_r.a.P2,_r.a.P4,_r.a.P7,_r.a.P8];class Ar{constructor(t){this.Wh=t}Yw(t,i){let e=[];switch(i){case kr.a.CmpApi:e=Es;break;case kr.a.TcfApi:e=Ls}return Object(l.g)(t,e)}Kw(t){const i=this.Wh.getGdprConsentApiType();if(this.Yw(t,i))return!0;const e=Ms[t]||"";return this.Wh.isConsent(e,jr)}Zw(t){return!!Object(l.g)(t,Rs)||!!this.Wh.isSellUserAllowed()}isBidderCallable(t){return this.Wh.isGDPR()?this.Kw(t):!this.Wh.isCcpaApplicable()||this.Zw(t)}}const Ir=(t,i,e,s)=>{const n=(()=>({usePrebidCache:!0,cache:{url:Bs},userSync:{iframeEnabled:!0,filterSettings:{iframe:{bidders:"*",filter:"include"}}},ix:{timeout:900}}))();return e&&(n.schain=(t=>({validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:t.businessDomain,hp:1,sid:t.supplyChainId?t.supplyChainId:null}]}}))(e)),(t||i)&&(n.consentManagement=((t,i)=>t?{gdpr:{cmpApi:"iab",timeout:2e3,defaultGdprScope:!0,allowAuctionWithoutConsent:!1,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0}]}}:i?{usp:{cmpApi:"iab",timeout:2e3}}:{})(t,i)),Object(C.h)(s)&&(n.pageUrl=s),n},Cr=[...$s],Tr=[Us.VAST_2_WRAPPER,Us.VAST_2,Us.VAST_3,Us.VAST_3_WRAPPER],Pr=[Ns.VPAID_1,Ns.VPAID_2],Mr=(t,i,e,s,n)=>{const r={code:Object($t.c)(),mediaTypes:{video:{playerSize:[Math.floor(t),Math.floor(i)],context:e?"outstream":"instream",mimes:Cr,protocols:Tr,linearity:Vs,api:Pr,frameworks:[Ns.VPAID_1,Ns.VPAID_2],maxduration:s,minDuration:0}},bids:[]};return Object(C.e)(n)&&(r.floors=(t=>({currency:"USD",schema:{fields:["mediaType"]},values:{video:t}}))(n)),r},Er={[Ts.Telaria]:(t,i)=>{const e=Object.assign({},t);return t.srcPageUrl||(e.srcPageUrl=i.pageUrl),e},[Ts.OneVideo]:(t,i)=>{Object(C.h)(t.pubId)||Object(n.a)({message:"AdManager_HeaderBidder_OneVideo_pubId_missing",level:h.ProtoLoggingLevelEnum.FATAL,throttle:2,sendMaxLog:!1});const e=Object.assign(Object.assign({},t),{pubId:t.pubId,video:{playerWidth:Math.floor(i.playerWidth),playerHeight:Math.floor(i.playerHeight),mimes:Cr,protocols:Tr,api:Pr},site:{page:i.pageUrl}}),s=i.floorPrice;return Object(C.e)(s)&&(e.bidfloor=s),e},[Ts.IndexExchange]:(t,i)=>{const e=t.siteId;if(!Object(C.h)(e))return void Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IX_adapter_missing_siteId",callStack:i.lineItemId});const s=Object.keys(Us).map(t=>Us[t]),r={siteId:e,size:[Math.floor(i.playerWidth),Math.floor(i.playerHeight)],video:{mimes:$s,minduration:0,maxduration:i.maxDuration,protocols:s}};Object(C.d)(t.minduration)&&(r.video.minduration=t.minduration),Object(C.d)(t.maxduration)&&t.maxduration<=i.maxDuration&&(r.video.maxduration=t.maxduration),Object(C.h)(t.id)&&(r.id=t.id);const a=i.floorPrice;return Object(C.e)(a)&&(r.bidFloor=a,r.bidFloorCur="USD"),r},[Ts.Rubicon]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(C.e)(s)&&(e.floor=s),e},[Ts.RhythmOne]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(C.e)(s)&&(e.floor=s),e},[Ts.Pubmatic]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(C.e)(s)&&(e.kadfloor=String(s)),e},[Ts.SpotX]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(C.e)(s)&&(e.price_floor=s),i.isOutstream&&(e.outstream_options={slot:i.bidSlotId}),e},[Ts.MediaNet]:(t,i)=>{const e=Object.assign({},t);Object(C.h)(e.cid)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_cid",callStack:i.lineItemId}),Object(C.h)(e.crid)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_MediaNet_adapter_missing_crid",callStack:i.lineItemId});const s=i.floorPrice;return Object(C.e)(s)&&(e.bidFloor=s),e.video={api:Object.keys(Ns).map(t=>Ns[t]),mimes:Object.keys($s).map(t=>$s[t]),protocols:Object.keys(Us).map(t=>Us[t]),maxDuration:i.maxDuration,w:i.playerWidth,h:i.playerHeight},e},[Ts.Adman]:(t,i)=>{const e=Object.assign({},t);return Object(C.h)(e.placementId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Adman_adapter_missing_placementId",callStack:i.lineItemId}),e},[Ts.IronSource]:(t,i)=>{const e=Object.assign({},t);Object(C.h)(e.isOrg)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_IronSource_adapter_missing_isOrg_string",callStack:i.lineItemId});const{floorPrice:s}=i;return Object(C.e)(s)&&(e.floorPrice=s),e},[Ts.Undertone]:(t,i)=>{const e=Object.assign({},t);return Object(C.h)(e.placementId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_placementId",callStack:i.lineItemId}),Object(C.d)(e.publisherId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Undertone_adapter_missing_publisherId",callStack:i.lineItemId}),e},[Ts.SynacorMedia]:(t,i)=>{const e=Object.assign({},t);Object(C.h)(e.seatId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_seatId",callStack:i.lineItemId}),Object(C.h)(e.tagId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SynacorMedia_adapter_missing_tagId",callStack:i.lineItemId});const s=i.floorPrice;return Object(C.e)(s)&&(e.bidfloor=s),e.video={api:Object.keys(Ns).map(t=>Ns[t]),mimes:Object.keys($s).map(t=>$s[t]),protocols:Object.keys(Us).map(t=>Us[t]),maxduration:i.maxDuration},e},[Ts.AmxRTB]:(t,i)=>{const e=Object.assign({},t),s=i.floorPrice;return Object(C.e)(s)&&(e.floor=s),e},[Ts.Smaato]:(t,i)=>{const e=Object.assign({},t);return Object(C.h)(e.publisherId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_publisherId",callStack:i.lineItemId}),Object(C.h)(e.adspaceId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_Smaato_adapter_missing_adspaceId",callStack:i.lineItemId}),e},[Ts.SmartAdServer]:(t,i)=>{const e=Object.assign({},t),{floorPrice:s}=i;Object(C.e)(s)&&(e.bidfloor=s);const r=Object.assign(Object.assign({},t.video),{protocol:Us.VAST_3_WRAPPER});return e.video=r,Object(C.e)(e.networkId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_networkId_integer",callStack:i.lineItemId}),Object(C.e)(e.formatId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_formatId_integer",callStack:i.lineItemId}),Object(C.e)(e.pageId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_pageId_integer",callStack:i.lineItemId}),Object(C.e)(e.siteId)||Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PrebidJS_SmartAdServer_adapter_missing_siteId_integer",callStack:i.lineItemId}),e}},Lr=(t,i)=>{try{const e=JSON.parse(t);return e.length>1&&Object(n.a)({message:"AdManager_AdSourceWrappe_multiple_bidders",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:1,sendMaxLog:!1}),e[0].bidder}catch(e){Object(n.a)({message:"AdManager_AdSourceWrapper_cannot_get_bidder",level:h.ProtoLoggingLevelEnum.WARNING,callStack:i,exception:t,throttle:2,sendMaxLog:!1})}};class Rr{constructor(t,i,e,s,n){this.tx=t,this.ze=i,this.Ew=e,this.ex=s,this.sx=n}requestHeaderBidder(t,i,e){return new Promise((s,n)=>{this.nx().then(()=>{const n=t.map(t=>this.hx(t,i,e).then(t=>t));Promise.all(n).then(t=>{s(t)})}).catch(t=>{n(h.ConnatixNoBidReasonEnum.NoBid)})})}hx(t,i,e){return new Promise(s=>{let n=[];const r=t.lineItem.floorPrices;if(Object(l.h)(r)){n=this.ax(r,t.ignoredFloorPriceIndexes,t.availableRequests).map(s=>this.ox(t.lineItem,s.floorPrice,s.floorPriceIndex,i,e,r,t.maxAdDuration))}else if(!Object(l.h)(t.ignoredFloorPriceIndexes)&&t.availableRequests>0){const s=0,h=this.ox(t.lineItem,t.lineItem.floorPrice,s,i,e,r,t.maxAdDuration);n.push(h)}Promise.all(n).then(i=>{const e=[],n=[],r=t.lineItem.advertiserLineItemId;i.forEach(t=>{t.reason?n.push(t):e.push(t)}),s({bids:e,noBids:n,lineItemId:r})})})}ox(t,i,e,s,n,r,h){return new Promise(a=>{this.ux(t,i,e,s,n,r,h).then(t=>{a(t)}).catch(t=>{a(t)})})}nx(){return new Promise((t,i)=>{window.pbjs?(this.lx=window.pbjs,t()):Object(j.A)({src:Fs},window.document.head,window,()=>{this.lx=window.pbjs,this.px(),t()},()=>{i(h.ConnatixNoBidReasonEnum.NoBid)},!0,"AdManager_HeaderBidder_unable_to_insert_prebidJs_script")})}px(){const t=Ir(this.ex,this.sx,this.tx,this.ze);window.pbjs.setConfig(t)}ux(t,i,e,s,r,a,o){return new Promise((c,u)=>{const l=Mr(s,r,this.Ew,o,i);try{const s=t.headerBidderBids;l.bids=JSON.parse(s)}catch(t){return Object(n.a)({message:"AdManager_HeaderBidder_unable_to_parse_header_bidder",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING}),void u({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}const d=Cn();l.bids.forEach(e=>this.bx(e,s,r,i,t.advertiserLineItemId,o,d)),this.lx.que.push(()=>{this.lx.addAdUnits(l);const s={timeout:t.headerBidderTimeout,adUnits:[l],bidsBackHandler:()=>{try{let s;if(!(s=this.lx.getHighestCpmBids(l.code)[0]))return void u({reason:h.ConnatixNoBidReasonEnum.CsEmptyResponse,floorPrice:i,floorPriceIndex:e});if(!this.vx(s))return Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_no_content",exception:JSON.stringify(s)}),void u({reason:h.ConnatixNoBidReasonEnum.CsInvalidResponse,floorPrice:i,floorPriceIndex:e});const r=this.mx(s),o=s.cpm||s.adResponse.ad.cpm,{advertiserLineItemId:f}=t,p={adTag:r,lineItemId:f,floorPrice:i,floorPriceIndex:e,cpm:o,slotId:d};Object(C.e)(i)&&o<i&&Object(n.a)({message:"AdManager_HeaderBidderRequester_cpm_lower_than_floorprice",level:h.ProtoLoggingLevelEnum.WARNING,sendMaxLog:!1,throttle:5,exception:`floorPrices_${a}_index_${e}_cpm_${o}_li_${t.advertiserLineItemId}`,callStack:Lr(t.headerBidderBids,t.advertiserLineItemId)}),c(p)}catch(t){Object(n.a)({level:h.ProtoLoggingLevelEnum.WARNING,message:"AdManager_HeaderBidder_Prebidjs_error",exception:t.message,callStack:t.stack}),u({reason:h.ConnatixNoBidReasonEnum.NoBid,floorPrice:i,floorPriceIndex:e})}}};this.lx.requestBids(s)})})}bx(t,i,e,s,n,r,h){const a=Er[t.bidder];a&&(t.params=a(t.params,{playerWidth:i,playerHeight:e,maxDuration:r,pageUrl:this.ze,floorPrice:s,lineItemId:n,isOutstream:this.Ew,bidSlotId:h}))}vx(t){return t.adserverTargeting&&Object(C.h)(t.adserverTargeting.hb_cache_id)}mx(t){return`${Bs}?uuid=${t.adserverTargeting.hb_cache_id}`}ax(t,i,e){const s=[];let n=0;for(let r=0;r<t.length;r++)-1===i.indexOf(r)&&n<e&&(s.push({floorPrice:t[r],floorPriceIndex:r}),n++);return s}}class Br{constructor(t,i,e,s,n,r,h,a){this.Ew=t,this.tx=i,this.Kb=e,this.Rw=s,this.Bw=n,this.Fw=r,this.$w=h,this.Vg=a,this.gx=new Map,this.yx=new Rr(this.tx,this.Kb.config.pageUrl,this.Ew,this.Kb.services.UserManagerService.isGDPR(),this.Kb.services.UserManagerService.isCcpaApplicable()),this.wx=new Ar(this.Kb.services.UserManagerService)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=this.Nw(i,e),n=this.xx(t.lineItemRequestDataList);return Object(l.h)(n)&&s?(t.lineItemRequestDataList=n,this.Sx(t).then(i=>Promise.resolve(this.Ox(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]}))):Promise.resolve({bids:[],noBids:[]})}destroy(){}Ox(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=br(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new Zs,r=new fr({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex,prebidJsBidderName:this.kx(s)});tn(s.protoLineItem.trackers,n),e.bids.push(new dr({id:Object($t.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.adTag,callingState:i.callingState,adMacroReplacer:this.Rw,adContainer:this.Bw.get(s.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,cpm:t.cpm,adEnforcer:this.Fw,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,bidSlotId:t.slotId,loopAdWhenFinished:this.Vg,pageUrl:this.Kb.config.pageUrl}))}),t.noBids.forEach(t=>{const i=new fr({requestedFloorPrice:t.floorPrice,requestedFloorPriceIndex:t.floorPriceIndex});e.noBids.push({lineItem:s,requestMetadata:i,reason:t.reason})})}),e}Sx(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video),s=t.lineItemRequestDataList.map(i=>this._x(i,t.maxAdDuration));return this.yx.requestHeaderBidder(s,i,e)}_x(t,i){const e=t.adManagerLineItem;return{availableRequests:t.maxAvailableRequests,lineItem:e.protoLineItem,ignoredFloorPriceIndexes:vr(e),maxAdDuration:i}}xx(t){return t.filter(t=>{const i=this.kx(t.adManagerLineItem);return this.jx(i)})}Nw(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}jx(t){return this.wx.isBidderCallable(t)}kx(t){const i=this.gx.get(t);return Object(C.h)(i)?i:Lr(t.protoLineItem.headerBidderBids,t.protoLineItem.advertiserLineItemId)||""}}const Dr={libPropertyName:"apstag",mediaType:"video"},Fr="https://aax.amazon-adsystem.com/e/dtb/vast",$r="load";class Ur{constructor(t,i){this.Kb=t,this.Ax=i,this.Ix=()=>{this.Cx||this.Tx(),this.Px&&clearInterval(this.Px),this.Cx||Object(n.a)({message:"TamRequester_TAM_lib_not_found_on_page_loaded",level:h.ProtoLoggingLevelEnum.WARNING})};const e=this.Kb.config.topWindow;this.Mx=Object($t.f)(e).topFrame,this.Tx()}requestBids(t){const i=t.map(t=>this.Ex(t));return Promise.all(i)}destroy(){this.Px&&clearInterval(this.Px),this.Mx.removeEventListener($r,this.Ix)}Ex(t){return this.Lx(this.Ax,Dr.mediaType,t.amazonDealId).then(i=>t.amazonDealId?this.Rx(t,i):this.Bx(t,i)).then(i=>({bids:[i],lineItemId:t.advertiserLineItemId,noBids:[]})).catch(i=>({bids:[],lineItemId:t.advertiserLineItemId,noBids:[{reason:i}]}))}Lx(t,i,e){return new Promise((s,n)=>{this.Cx?this.Cx.fetchBids({slots:[{slotID:t,mediaType:i}]},t=>{Object(l.h)(t)?Object(C.h)(e)?s(this.Dx(t,e)):s(this.Fx(t)):n(h.ConnatixNoBidReasonEnum.EmptyResponse)}):n(h.ConnatixNoBidReasonEnum.NoLibInPage)})}Fx(t){return new Promise((i,e)=>{const s=this.$x(t);if(!Object(l.h)(s))return this.Ux(),void e(h.ConnatixNoBidReasonEnum.InvalidResponse);i(s[0])})}Dx(t,i){return new Promise((e,s)=>{const n=this.Vx(t);if(!Object(l.h)(n))return this.Ux(),void s(h.ConnatixNoBidReasonEnum.InvalidResponse);const r=t.find(t=>t.targeting.amzndeals.includes(i));r?e(r):s(h.ConnatixNoBidReasonEnum.DealIdMismatch)})}$x(t){return t.filter(t=>{var i;return!!(t.amznbid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid))})}Vx(t){return t.filter(t=>{var i;return Object(l.h)(null===(i=t.targeting)||void 0===i?void 0:i.amzndeals)})}Ux(){Object(n.a)({message:"TamRequester_FetchBids_CreativeType_Mismatch",throttle:1,level:h.ProtoLoggingLevelEnum.FATAL})}Bx(t,i){var e;const s={lineItemId:t.advertiserLineItemId,code:i.amznbid||(null===(e=i.targeting)||void 0===e?void 0:e.amznbid),metadata:this.Kb.services.TrackingService.getMetadataModel(),exploration:this.Kb.config.explorationMode};return new Promise((t,e)=>{cr.a.sendProtoRequest({endpoint:zt.a.endPoints.api.tam,ProtoRequest:h.ProtoCoreTamBidRequest,ProtoResponse:h.ProtoCoreTamBidResponse,requestData:s,queryParams:{[pr.b]:Yi.a.version},logError:!0}).then(s=>{Object(C.h)(s.errorMessage)?e(h.ConnatixNoBidReasonEnum.RequestException):s.encryptedBidPrice?t({encryptedPrice:s.encryptedBidPrice,vastTag:this.Nx(i),ofskp:s.ofskp,successRate:s.successRate,slotId:Cn()}):e(h.ConnatixNoBidReasonEnum.InvalidResponse)}).catch(()=>{e(h.ConnatixNoBidReasonEnum.RequestException)})})}Rx(t,i){return{encryptedPrice:null,vastTag:this.Hx(i),ofskp:Ws(t.floorPrice),successRate:t.successRate,slotId:Cn()}}Nx(t){var i,e;const s=t.amzniid||(null===(i=t.targeting)||void 0===i?void 0:i.amzniid),n=t.amznbid||(null===(e=t.targeting)||void 0===e?void 0:e.amznbid);return`${Fr}?b=${s}&pp=${n}&rnd=${Object($t.c)()}`}Hx(t){const i=t.helpers.targetingKeys[0];return`${Fr}?b=${t.targeting[i]}&rnd=${Object($t.c)()}`}Tx(){this.Mx[Dr.libPropertyName]?this.Cx=this.Mx[Dr.libPropertyName]:this.Px||"complete"!==this.Mx.document.readyState&&(this.Mx.addEventListener($r,this.Ix),this.Px=setInterval(()=>{this.Tx()},$.f)),this.Cx&&clearInterval(this.Px)}}class Vr{constructor(t,i,e,s,n,r){this.Kb=t,this.qx=i,this.Rw=e,this.Bw=s,this.Fw=n,this.$w=r,this.zx=new Ur(this.Kb,this.qx)}request(t){const{width:i,height:e}=t.callingState.adContainerState.get(h.ProtoAdType.Video);return this.Nw(i,e)?this.Wx(t).then(i=>Promise.resolve(this.Gx(i,t))).catch(()=>Promise.resolve({bids:[],noBids:[]})):Promise.resolve({bids:[],noBids:[]})}destroy(){this.zx.destroy()}Wx(t){const i=t.lineItemRequestDataList.map(t=>t.adManagerLineItem.protoLineItem);return this.zx.requestBids(i)}Gx(t,i){const e={bids:[],noBids:[]};return t.forEach(t=>{const s=br(i.lineItemRequestDataList,t.lineItemId);t.bids.forEach(t=>{const n=new Zs,r=new fr({encryptedPrice:t.encryptedPrice});tn(s.protoLineItem.trackers,n),e.bids.push(new dr({id:Object($t.c)(),adManagerLineItem:s,replaceTrackingMacros:!0,requestMetadata:r,trackersInformation:n,url:t.vastTag,bidSlotId:t.slotId,callingState:i.callingState,adMacroReplacer:this.Rw,adContainer:this.Bw.get(s.protoLineItem.adType),globalDomUtilsService:this.Kb.services.GlobalDomUtilsService,viewabilityService:this.Kb.services.ViewabilityService,trackingService:this.Kb.services.TrackingService,adEnforcer:this.Fw,requestWithCredentials:!1,successRate:t.successRate,obfuscatedPrice:t.ofskp,os:this.Kb.config.os.os,adSlotContainerRecycler:this.$w,pageUrl:this.Kb.config.pageUrl}))}),t.noBids.forEach(t=>{e.noBids.push({lineItem:s,requestMetadata:new fr,reason:t.reason})})}),e}Nw(t,i){return 0!==t&&0!==i||(Object(n.a)({message:"AdManager_PrebidAggregator_dimensions",exception:`width:${t}_height:${i}_destroyed:${f.a.isPlayerDestroyed()}`,throttle:5,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),!1)}}const Nr=[[88,31],[120,20],[120,30],[120,60],[120,90],[125,125],[168,28],[168,42],[180,150],[200,200],[200,446],[216,36],[216,54],[220,90],[234,60],[240,133],[250,250],[250,360],[292,30],[300,31],[300,50],[300,75],[300,100],[300,250],[320,50],[320,100],[320,240],[336,280],[400,350],[468,60],[480,320]],Hr="domains";class qr{constructor(t,i,e){this.Jx=t,this.Qx=i,this.Xx=e,this.Sw=`div-gpt-ad-1589549806211-${Object($t.c)()}`,this.Ow=new yt,this.dg=new yt,this.Qm=new yt}get onCreativeReceived(){return this.Qm.asObservable()}get onDisplayAd(){return this.Ow.asObservable()}get onError(){return this.dg.asObservable()}getAdMediaHeight(){return this.Yx?this.Yx.clientHeight:0}getAdMediaWidth(){return this.Yx?this.Yx.clientWidth:0}initializeAd(t,i){try{this.Kx=t,this.Mm(t);const e=this.Zx(i.width,i.height);this.Jx.cmd.push(()=>{this.tS=this.Jx.defineSlot(this.Xx,e,this.Sw).addService(this.Jx.pubads()).setTargeting(Hr,this.Qx),this.Jx.enableServices(),this.iS(this.tS),this.Jx.pubads().isInitialLoadDisabled()&&this.Jx.pubads().refresh([this.tS]),this.Jx.display(this.Sw)})}catch(t){this.dg.next(on.c.WrapperInitAdError)}}destroy(){this.Jx.cmd.push(()=>{this.Jx.destroySlots&&this.tS&&this.Jx.destroySlots([this.tS])})}iS(t){this.Jx.pubads().addEventListener("slotOnload",i=>{var e,s,r;if(i.slot===t){try{const t=null===(r=null===(s=null===(e=i)||void 0===e?void 0:e.slot)||void 0===s?void 0:s.getResponseInformation())||void 0===r?void 0:r.creativeId;t&&this.Qm.next(t.toString())}catch(t){Object(n.a)({message:"AdManager_GptWrapper_creativeId",level:h.ProtoLoggingLevelEnum.WARNING,exception:t.message,callStack:t.stack})}this.Ow.next()}}),this.Jx.pubads().addEventListener("slotRenderEnded",t=>{var i;if(t.slot===this.tS){try{this.Yx=null===(i=this.Kx)||void 0===i?void 0:i.getElementsByTagName("iframe")[0],Object(C.a)(this.tS)&&Object(j.H)(this.Yx.contentWindow,"GPTWrapper")}catch(t){}t.isEmpty&&this.dg.next(on.c.AdxOverlayNoFill)}})}Mm(t){t.id=this.Sw}Zx(t,i){return Nr.filter(e=>!Array.isArray(e)||!Object(l.i)(e)||Object(l.h)(e)&&e[0]<=t&&e[1]<=i)}}var zr=e(54);const Wr=500;class Gr extends mn{constructor(t){super(t),this.settings=t,this.adMediaType="displayAdx",this.adSourceType=h.ProtoAdsourceTypeEnum.Unknown,this.Iw="adx",this.eS={[D.FirstQuartile]:w.b.AdVideoFirstQuartile,[D.SecondQuartile]:w.b.AdVideoMidpoint,[D.ThirdQuartile]:w.b.AdVideoThirdQuartile,[D.FourthQuartile]:w.b.AdVideoComplete},this.sS=[];const i=this.settings.adManagerLineItem.protoLineItem.overlayTime*$.f;this.Tw=new xt(i,Wr),this.sS.push(this.Tw.onTimeUpdate.subscribe(()=>{this.ym({type:w.b.AdRemainingTimeChange})}),this.Tw.onTimeElapsed.subscribe(()=>{this.stopAd("adxTimerElapsed")}),this.Tw.onQuartile.subscribe(t=>{this.ym({type:this.eS[t],payload:{}})}))}initAd(t,i,e,s,n,r,h){try{super.initAd(t,i,e,s,n,r,h),this.nS={width:t,height:i},this.rS().then(t=>{this.hS=new qr(t,this.settings.domain,this.settings.adxAdUnitPath),this.sS.push(this.hS.onCreativeReceived.subscribe(t=>{this.creativeId=t})),this.ym({type:w.b.AdLoaded,payload:{skipOffset:0}})}).catch(t=>{this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdxOverlayGptScriptLoad+`_${t.message}`}})})}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.sS.push(this.hS.onDisplayAd.subscribe(()=>{this.ym({type:w.b.AdStarted}),this.ym({type:w.b.AdVideoStart}),this.ym({type:w.b.AdImpression,payload:{}}),this.Tw.start()}),this.hS.onError.subscribe(t=>{this.ym({type:w.b.AdError,payload:{errorMessage:t}}),this.Tw.stop()})),this.hS.initializeAd(this.om,this.nS)}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorStartAdError+`_${t.exception}`}})}}stopAd(t){try{super.stopAd(t),this.Tw.stop(),this.ym({type:w.b.AdStopped,payload:{shouldTrackPostBid:!0}})}catch(t){this.Nm("AdxBidAdaptor","stopAd",t)}}resizeAd(t,i,e){this.nS&&(this.nS.width=t,this.nS.height=i)}pauseAd(){try{this.Tw.stop(),this.ym({type:w.b.AdPaused})}catch(t){this.Nm("AdxBidAdaptor","pauseAd",t)}}resumeAd(){try{this.Tw.start(),this.ym({type:w.b.AdPlaying})}catch(t){this.Nm("AdxBidAdaptor","resumeAd",t)}}expandAd(){}collapseAd(){}skipAd(){try{super.skipAd(),this.ym({type:w.b.AdSkipped})}catch(t){this.Nm("AdxBidAdaptor","skipAd",t)}}getAdRemainingTime(){return this.Tw.timeRemaining/$.f}getAdDuration(){return this.Tw.timerDuration/$.f}getAdVolume(){return 0}getAdMediaSize(){return{width:this.hS.getAdMediaWidth(),height:this.hS.getAdMediaHeight()}}setAdVolume(t){}get adVideoUrl(){return this.Iw}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}rS(){const t=Object($t.f)(window).topFrame;if(t.googletag)return Promise.resolve(t.googletag);{const i={cmd:[]};return t.googletag=window.googletag||i,new Promise((i,e)=>{Object(j.A)({src:zr.a},t.document.head,t,()=>{i(t.googletag)},()=>{e()})})}}Ac(){var t;try{super.Ac(),this.Tw.stop(),St(this.sS),null===(t=this.hS)||void 0===t||t.destroy()}catch(t){this.Nm("AdxBidAdaptor","_destroy",t)}}}const Jr="https://adx.connatix.com";class Qr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new Gr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,adxAdUnitPath:this.aS(this.settings.url),requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,domain:this.settings.pageDomain,adContainer:this.settings.adContainer,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,cpm:this.settings.cpm,successRate:this.settings.successRate,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}aS(t){return t.substr(Jr.length)}}class Xr extends mn{constructor(t){super(t),this.settings=t,this.adMediaType="cnxMedia",this.adSourceType=h.ProtoAdsourceTypeEnum.CnxMedia,this.oS=[]}initAd(t,i,e,s,n,r,h){try{let a;super.initAd(t,i,e,s,n,r,h);let o=!1;if(Object(C.h)(this.settings.externalMediaFile))a=this.settings.externalMediaFile;else if(Object(C.h)(this.settings.externalHlsFile))a=this.settings.externalHlsFile,o=!0;else{if(!Object(l.h)(this.settings.renditions))return void this.ym({type:w.b.AdError,payload:{errorMessage:on.c.CnxMediaNoRenditions}});a=this.cS(this.settings.renditions,i,this.settings.mediaId)}this.uS=a,this.lS=new Dn(this.settings.globalDomUtilsService,this.uS,this.cm,this.settings.os,this.settings.clickUrl,this.settings.loopAdWhenFinished,this.settings.pauseAdWhenFinished,o,this.settings.inApp),this.oS.push(this.lS.onVpaidEvent.subscribe(t=>{this.ym(t)})),this.lS.initAd(t,i,e,s,n,{slot:this.om,videoSlot:this.cm})}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorInitAdError+`_${t.message}`}})}}startAd(){try{super.startAd(),this.lS.startAd()}catch(t){this.ym({type:w.b.AdError,payload:{errorMessage:on.c.AdaptorStartAdError+`_${t.message}`}})}}stopAd(t){super.stopAd(t),this.lS?this.lS.stopAd(t):Object(n.a)({message:"stopAd",exception:t,level:h.ProtoLoggingLevelEnum.WARNING})}resizeAd(t,i,e){try{this.lS.resizeAd(t,i,e)}catch(t){this.Nm("CnxMediaBidAdaptor","resizeAd",t)}}pauseAd(){try{this.lS.pauseAd()}catch(t){this.Nm("CnxMediaBidAdaptor","pauseAd",t)}}resumeAd(){try{this.lS.resumeAd()}catch(t){this.Nm("CnxMediaBidAdaptor","resumeAd",t)}}expandAd(){try{this.lS.expandAd()}catch(t){this.Nm("CnxMediaBidAdaptor","expandAd",t)}}collapseAd(){try{this.lS.collapseAd()}catch(t){this.Nm("CnxMediaBidAdaptor","collapseAd",t)}}skipAd(){try{super.skipAd(),this.lS.skipAd()}catch(t){this.Nm("CnxMediaBidAdaptor","skipAd",t)}}getAdRemainingTime(){try{return this.lS.getAdRemainingTime()}catch(t){return this.Nm("CnxMediaBidAdaptor","getAdRemainingTime",t),0}}getAdDuration(){try{return this.lS?this.lS.getAdDuration():this.settings.adManagerLineItem.protoLineItem.duration}catch(t){return this.Nm("CnxMediaBidAdaptor","getAdDuration",t),0}}getAdVolume(){try{return this.lS.getAdVolume()}catch(t){return this.Nm("CnxMediaBidAdaptor","getAdVolume",t),0}}getAdMediaSize(){return{width:this.lS.getAdMediaWidth(),height:this.lS.getAdMediaHeight()}}setAdVolume(t){try{super.setAdVolume(t),this.lS.setAdVolume(t)}catch(t){this.Nm("CnxMediaBidAdaptor","setAdVolume",t)}}get adVideoUrl(){return this.uS}get declaredDurationInSeconds(){return this.settings.adManagerLineItem.protoLineItem.duration}Ac(){var t;if(!this.settings.pauseAdWhenFinished&&!this.settings.loopAdWhenFinished)try{super.Ac(),St(this.oS),null===(t=this.lS)||void 0===t||t.destroy()}catch(t){this.Nm("CnxMediaBidAdaptor","_destroy",t)}}cS(t,i,e){let s,n;return n=t.filter(t=>t.codec===Pt.H264),s=Object(bt.c)(i,n.map(t=>t.height)),(n=n.filter(t=>t.height===s)).length>0?`${zt.a.endPoints.base.video}${e}/${n[0].file}`:null}}class Yr{constructor(t){this.settings=t,this.metrics={created:(new Date).getTime()}}fetchBid(){this.metrics.fetchStart=(new Date).getTime();const t=new Xr({id:this.settings.id,adManagerLineItem:this.settings.adManagerLineItem,trackers:this.settings.trackersInformation,mediaId:this.settings.mediaId,renditions:this.settings.renditions,clickUrl:this.settings.clickUrl,requestMetadata:this.settings.requestMetadata,callingState:this.settings.callingState,globalDomUtilsService:this.settings.globalDomUtilsService,viewabilityService:this.settings.viewabilityService,adContainer:this.settings.adContainer,cpm:this.settings.cpm,obfuscatedPrice:this.settings.obfuscatedPrice,adEnforcer:this.settings.adEnforcer,externalMediaFile:this.settings.adManagerLineItem.protoLineItem.externalMediaFile,externalHlsFile:this.settings.adManagerLineItem.protoLineItem.externalHlsFile,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.inApp,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:this.settings.bidSlotId});return this.metrics.fetchEnd=(new Date).getTime(),Promise.resolve(t)}}var Kr;!function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.STOPPING=2]="STOPPING"}(Kr||(Kr={}));class Zr{constructor(t){this.dS=t,this.Jt=Kr.IDLE,this.fS=Promise.resolve()}start(){this.Jt===Kr.IDLE?(this.Jt=Kr.RUNNING,this.pS()):this.Jt===Kr.STOPPING&&(this.Jt=Kr.RUNNING,this.pS())}stop(){this.Jt=Kr.STOPPING}setPromiseNotifier(t){return this.bS=t,this}setIdleNotifier(t){return this.vS=t,this}getState(){return this.Jt}mS(){const t=this.dS();void 0!==t?this.fS=t.then(t=>{this.bS&&this.bS(t)}).then(()=>{this.Jt===Kr.STOPPING&&(this.Jt=Kr.IDLE)}):this.Jt=Kr.IDLE}pS(){this.Jt===Kr.IDLE?this.vS&&this.vS():this.Jt===Kr.RUNNING&&(this.mS(),this.fS.then(()=>{this.pS()}))}}class th{constructor(t,i=1){this.dS=t,this.gS=i,this.yS=[],this.wS(i)}start(){return this.yS.forEach(t=>{t.start()}),this}stop(){return this.yS.forEach(t=>{t.stop()}),this}setPromiseNotifier(t){return this.yS.forEach(i=>{i.setPromiseNotifier(t)}),this}setAllThreadsIdleNotifier(t){return this.xS=t,this.SS(),this}setNumberOfThreads(t){if(t<=0)return;this.gS=t;const i=t-this.gS;i>0?this.wS(i):i<0&&this.OS(i)}getState(){return this.yS.reduce((t,i)=>(t[i.getState()]++,t),{[Kr.IDLE]:0,[Kr.RUNNING]:0,[Kr.STOPPING]:0})}wS(t){for(let i=0;i<t;i++){const t=new Zr(this.dS).setPromiseNotifier(this.bS);this.yS.push(t)}}OS(t){t=Math.min(t,this.yS.length);for(let i=0;i<t;i++)this.yS.pop().stop()}SS(){const t=()=>{this.getState()[Kr.IDLE]===this.yS.length&&this.xS()};this.yS.forEach(i=>{i.setIdleNotifier(t)})}}class ih{constructor(){this.kS=[]}canCall(t,i){return this.kS.every(e=>e.canCall(t,i))}registerRequestForLineItem(t,i){return this.kS.forEach(e=>{e.registerRequestForLineItem(t,i)}),this}registerImpressionForLineItem(t,i){return this.kS.forEach(e=>{e.registerImpressionForLineItem(t,i)}),this}registerCallingValidator(t){return this.kS.push(t),this}registerCallingValidators(t){return t.forEach(t=>{this.registerCallingValidator(t)}),this}destroy(){this.kS.forEach(t=>{t.destroy()})}}e(44);class eh{constructor(){this.initialized=!1,this.logged=!1,this.startTime=0,this.winIds=[]}}class sh{constructor(){this.adSlotType=h.ProtoAdBreakTypeEnum[h.ProtoAdBreakTypeEnum.PreRoll],this.timeToFirstBid=-1,this.timeToFirstWin=-1,this.timeToFirstStartAd=-1,this.timeToFirstAdImpression=-1,this.numberOfBids=0,this.numberOfWins=0,this.numberOfPostBids=0,this.indexOfWinThatGaveImpression=-1}}class nh{constructor(){this.metadata=new eh,this.metrics=new sh}}const rh=new Map;function hh(t){return rh.has(t)||rh.set(t,new nh),rh.get(t)}var ah;!function(t){function i(t){if(!rh.has(t))return;if(!Object($t.l)([95,5]))return;const i=rh.get(t);i.metadata.initialized&&!i.metadata.logged&&(i.metadata.logged=!0,Object(n.a)({message:"Preroll_Problem_Logs",exception:JSON.stringify(i.metrics),level:h.ProtoLoggingLevelEnum.INFO}))}t.initialize=function(t){const i=hh(t);i.metadata.initialized=!0,i.metadata.startTime=(new Date).getTime()},t.log=i,t.trackBid=function(t){const i=hh(t);0===i.metrics.numberOfBids&&(i.metrics.timeToFirstBid=(new Date).getTime()-i.metadata.startTime),i.metrics.numberOfBids++},t.trackStartAd=function(t){const i=hh(t);-1===i.metrics.timeToFirstStartAd&&(i.metrics.timeToFirstStartAd=(new Date).getTime()-i.metadata.startTime)},t.trackAdImpression=function(t,e){const s=hh(t);-1===s.metrics.timeToFirstAdImpression&&(s.metrics.timeToFirstAdImpression=(new Date).getTime()-s.metadata.startTime),s.metrics.indexOfWinThatGaveImpression=s.metadata.winIds.indexOf(e.settings.id),i(t)},t.trackPostBid=function(t){hh(t).metrics.numberOfPostBids++},t.trackWin=function(t,i){const e=hh(t);e.metadata.winIds.push(i.settings.id),0===e.metrics.numberOfWins&&(e.metrics.timeToFirstWin=(new Date).getTime()-e.metadata.startTime),e.metrics.numberOfWins++}}(ah||(ah={}));const oh=4;var ch;!function(t){t[t.Rtb=1]="Rtb",t[t.HeaderBidder=2]="HeaderBidder",t[t.Tam=3]="Tam"}(ch||(ch={}));const uh={[h.ProtoCreativeTypeEnum.Rtb]:ch.Rtb,[h.ProtoCreativeTypeEnum.HeaderBidder]:ch.HeaderBidder,[h.ProtoCreativeTypeEnum.Tam]:ch.Tam,[h.ProtoCreativeTypeEnum.TamDeal]:ch.Tam};class lh{constructor(t){this.settings=t,this._S=new Map,this.Vc=[],this.jS=!1,this.AS=new yt,this.IS=()=>{const t=this.CS();if(t)return this.TS(t.lineItemList),this.PS(t.lineItemList,t.state).then(()=>{this.MS(t.lineItemList),this.ES()}).catch(()=>{this.MS(t.lineItemList),this.ES()})},this.LS=(t,i)=>{return this.settings.adCallerYo.getWinningYoScore(i.settings.id)-this.settings.adCallerYo.getWinningYoScore(t.settings.id)},this.settings.lineItemList.forEach(t=>{mr(t.protoLineItem.creativeType)?t.protoLineItem.timeBetweenRequests=10:t.protoLineItem.timeBetweenRequests=6}),this.Vc.push(this.settings.lineItemServices.lineItemServicesTimer.onTimer().subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidConsumed.subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidLoadingConsumed.subscribe(()=>{this.RS()}),this.settings.adBidPool.onBidReadyConsumed.subscribe(()=>{this.RS()})),this.BS=(new ih).registerCallingValidators([this.settings.lineItemServices.requestCapsService,this.settings.lineItemServices.impressionCapsService,this.settings.lineItemServices.timeBetweenRequestsService]),this.DS=new th(this.IS,oh),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.Rtb)&&this._S.set(ch.Rtb,{auctionPending:!1,caller:new Or(this.settings.isOutstream,this.settings.skipAdSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adRequestGatekeeper,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.HeaderBidder)&&this._S.set(ch.HeaderBidder,{auctionPending:!1,caller:new Br(this.settings.isOutstream,this.settings.schainSettings,this.settings.app,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler,this.settings.loopAdWhenFinished)}),this.settings.lineItemList.find(t=>t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.Tam||t.protoLineItem.creativeType===h.ProtoCreativeTypeEnum.TamDeal)&&this._S.set(ch.Tam,{auctionPending:!1,caller:new Vr(this.settings.app,this.settings.amazonSlotId,this.settings.adMacroReplacer,this.settings.adContainerMap,this.settings.adEnforcer,this.settings.adSlotContainerRecycler)}),this.DS.setAllThreadsIdleNotifier(()=>{this.settings.lineItemServices.lineItemServicesTimer.start()})}get onFirstAggregatedBatchFinished(){return this.AS.asObservable()}call(t){this.DS.setNumberOfThreads(t.maxParallelCalls),this.FS=t,this.jS=!0,this.RS()}stop(){this.jS=!1,this.DS.stop()}destroy(){this.stop(),this.BS.destroy(),this._S.forEach(t=>{t.caller.destroy()}),St(this.Vc)}ES(){let t=!0;this._S.forEach(i=>{i.auctionPending&&(t=!1)}),t&&this.AS.next()}$S(t){return t.filter(t=>!(t.aggregators.size>0)&&(!(!mr(t.protoLineItem.creativeType)&&(t.bids.size>0||t.callers.size>0))&&this.BS.canCall(t,this.VS()))).filter(t=>!this.settings.platformCappedLineItemRepo.isLineItemPlatformCapped(t.protoLineItem.advertiserLineItemId))}RS(){this.jS&&this.DS.start()}CS(){const t=this.$S(this.settings.lineItemList),i=this.settings.adCallerYo.getBestCallable(t,this.FS.stateSettings);if(i&&this.NS(i.lineItemList[0],i.state))return i}NS(t,i){if(mr(t.protoLineItem.creativeType))return!0;const e=this.settings.adBidPool.bids.filter(t=>this.settings.adCallerYo.isBidTargetingAllowed(t,i,this.settings.lineItemServices.impressionCapsService,this.settings.platformCappedLineItemRepo)),s=this.settings.adBidPool.callingLineItems,n=[...e.map(t=>this.settings.adCallerYo.getWinningYoScore(t.settings.id)),...s.map(t=>this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId))],r=this.settings.adCallerYo.getCallingYoScore(t.protoLineItem.advertiserLineItemId);for(let t=0;t<n.length;t++)if(r<n[t])return!1;return!0}TS(t){this.settings.adBidPool.callingLineItems=[...this.settings.adBidPool.callingLineItems,...t]}MS(t){this.settings.adBidPool.callingLineItems=this.settings.adBidPool.callingLineItems.filter(i=>!Object(l.g)(i,t))}PS(t,i){return mr(t[0].protoLineItem.creativeType)?this.HS(t,i):this.qS(t[0],i)}qS(t,i){this.BS.registerRequestForLineItem(t,this.VS());const e=this.zS(t,i);return this.WS(e),this.GS(e)}HS(t,i){const e=this._S.get(uh[t[0].protoLineItem.creativeType]);t.forEach(t=>t.aggregators.add(e.caller)),e.auctionPending=!0;const s={lineItemRequestDataList:t.map(t=>({adManagerLineItem:t,maxAvailableRequests:this.settings.lineItemServices.requestCapsService.getAvailableRequestsForLineItem(t,this.VS())})),callingState:i,maxAdDuration:i.adBreakState.maxAdDuration};return e.caller.request(s).then(s=>{s.bids.length||s.noBids.length||t.forEach(t=>{this.BS.registerRequestForLineItem(t,this.VS())}),t.forEach(t=>t.aggregators.delete(e.caller)),s.noBids.forEach(t=>{this.BS.registerRequestForLineItem(t.lineItem,this.VS()),this.JS(i,t.lineItem,t.reason,t.requestMetadata)}),s.bids.forEach(t=>this.WS(t)),s.bids.sort(this.LS);const n=s.bids.map(t=>(this.BS.registerRequestForLineItem(t.settings.adManagerLineItem,this.VS()),this.GS(t)));return Promise.all(n)}).catch().then(()=>{e.auctionPending=!1})}GS(t){return t.settings.adManagerLineItem.callers.add(t),t.fetchBid().catch(i=>{t.settings.adManagerLineItem.callers.delete(t),this.settings.adCallerYo.registerPreBid(t.settings.id);const e=rn[i]?rn[i]:h.ConnatixNoBidReasonEnum.RequestException;return this.JS(t.settings.callingState,t.settings.adManagerLineItem,e,t.settings.requestMetadata,t.settings.trackersInformation,Date.now()-t.metrics.fetchStart),Promise.reject()}).then(i=>{t.settings.adManagerLineItem.callers.delete(t),this.QS(i,Date.now()-t.metrics.fetchStart)}).catch(t=>{void 0!==t&&Object(n.a)({message:"AdManager_AdCallerController_handleCallAdaptorRequest",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL,throttle:5,sendMaxLog:!0})})}QS(t,i){const e=t.settings.adManagerLineItem,s=t.settings.requestMetadata;if(t.settings.requestMetadata.data.requestTrackingHandledByServer||this.settings.trackingService.addBid({advertiserLineItemId:e.protoLineItem.advertiserLineItemId,publisherLineItemId:e.protoLineItem.publisherLineItemId,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,customClientPrice:t.settings.cpm,timeSpent:i,dspId:s.data.dspId,encryptedPrice:s.data.encryptedPrice,rtbAdomain:s.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:s.data.rtbSeatId,cnxBidId:t.settings.requestMetadata.data.cnxBidId}),this.settings.adRequestGatekeeper.addBid(e.protoLineItem.advertiserLineItemId,s.data.requestedFloorPrice),!this.settings.adCallerYo.isBidTargetingAllowedEverInSession(t,t.settings.callingState))return this.settings.adCallerYo.registerPreBid(t.settings.id),void this.settings.auctionInfoLogging.bidIsNotWinnableEverInSession(t);ah.trackBid(this.settings.app.config.playerId),t.settings.adManagerLineItem.bids.add(t),this.settings.adBidPool.addBid(t)}JS(t,i,e,s,n,r){n&&Zs.track(n.adError,this.settings.adMacroReplacer,i.protoLineItem,t),s.data.requestTrackingHandledByServer||this.settings.trackingService.addPrebid({advertiserLineItemId:i.protoLineItem.advertiserLineItemId,publisherLineItemId:i.protoLineItem.publisherLineItemId,partnerCustomHeaders:s.data.partnerCustomHeaders,partnerReason:s.data.partnerReason,requestedFloorPrice:s.data.requestedFloorPrice,rtbRequestNumber:s.data.rtbRequestNumber,syncedUser:s.data.syncedUser,prebidJsBidderName:s.data.prebidJsBidderName,reason:e,timeSpent:r}),this.settings.adRequestGatekeeper.addPrebid(i.protoLineItem.advertiserLineItemId)}zS(t,i){const e=new Zs;tn(t.protoLineItem.trackers,e);const s={id:Object($t.c)(),adManagerLineItem:t,replaceTrackingMacros:!0,requestMetadata:new fr,trackersInformation:e,callingState:i,adContainer:this.settings.adContainerMap.get(t.protoLineItem.adType),globalDomUtilsService:this.settings.app.services.GlobalDomUtilsService,viewabilityService:this.settings.app.services.ViewabilityService,cpm:t.protoLineItem.floorPrice||t.protoLineItem.customCpm,adEnforcer:this.settings.adEnforcer,os:this.settings.os,adSlotContainerRecycler:this.settings.adSlotContainerRecycler,bidSlotId:Cn()};switch(t.protoLineItem.creativeType){case h.ProtoCreativeTypeEnum.External:case h.ProtoCreativeTypeEnum.ThirdParty:return t.protoLineItem.adType===h.ProtoAdType.Overlay?new Qr(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,pageDomain:this.settings.app.config.pageDomain})):new dr(Object.assign(Object.assign({},s),{url:t.protoLineItem.adTag,adMacroReplacer:this.settings.adMacroReplacer,trackingService:this.settings.trackingService,loopAdWhenFinished:this.settings.loopAdWhenFinished,pageUrl:this.settings.app.config.pageUrl}));case h.ProtoCreativeTypeEnum.MediaFile:return new Yr(Object.assign(Object.assign({},s),{clickUrl:t.protoLineItem.mediaCreativeClickUrl,mediaId:t.protoLineItem.mediaCreativeId,renditions:t.protoLineItem.renditions,pauseAdWhenFinished:this.settings.pauseAdWhenFinished,loopAdWhenFinished:this.settings.loopAdWhenFinished,inApp:this.settings.app.config.isInApp}))}}WS(t){const{creativeType:i,floorPrice:e,successRate:s,advertiserLineItemId:n,lineItemPriority:r}=t.settings.adManagerLineItem.protoLineItem;this.settings.adCallerYo.registerBiddingInformation({creativeType:i,floorPrice:e,lineItemId:n,priority:r,bidId:t.settings.id,cpm:t.settings.cpm,obfuscatedPrice:t.settings.obfuscatedPrice,successRate:t.settings.successRate||s})}VS(){return(this.FS.stateSettings.currentState||this.FS.stateSettings.predictedState).adOpportunity.id}}const dh="uncategorized";class fh{resetCapsBasedOnExternalEvent(t){const i=this.XS.keys();for(const e of i)this.YS(e,t)&&this.KS(e,dh)}YS(t,i){return t.protoLineItem.resetCapType===i}ZS(t){return this.YS(t,h.ProtoResetCapTypeEnum.TimeCapping)&&this.tO(t)>0}}class ph{constructor(t){this.iO=t,this.eO=new Map}setNumberOfImpressions({value:t,categoryId:i}){Object(C.a)(i)&&this.iO===h.ProtoResetCapTypeEnum.OpportunityCapping||(i=dh),this.eO.set(i,t)}getNumberOfImpressions({categoryId:t}){return Object(C.a)(t)&&this.iO===h.ProtoResetCapTypeEnum.OpportunityCapping||(t=dh),this.eO.get(t)||0}}class bh extends fh{constructor(t=Date.now()){super(),this.sO=t,this.XS=new Map}canCall(t,i){this.nO(t);const e=this.XS.get(t);return void 0===e||(0===t.protoLineItem.impressionCap||e.getNumberOfImpressions({categoryId:i})<t.protoLineItem.impressionCap)}registerImpressionForLineItem(t,i){let e=this.XS.get(t);return void 0===e&&(this.XS.set(t,new ph(t.protoLineItem.resetCapType)),e=this.XS.get(t),this.ZS(t)&&(e.nextImpressionCapResetTimestamp=this.rO(this.tO(t)))),e.setNumberOfImpressions({value:e.getNumberOfImpressions({categoryId:i})+1,categoryId:i}),this}registerRequestForLineItem(t,i){return this}destroy(){this.XS.clear()}KS(t,i){this.XS.get(t).setNumberOfImpressions({value:0,categoryId:i})}tO(t){return t.protoLineItem.resetImpressionsCapTime*$.f}nO(t,i=Date.now()){if(!this.ZS(t))return;const e=this.XS.get(t);void 0!==e&&this.hO(t,i)&&(e.setNumberOfImpressions({value:0}),e.nextImpressionCapResetTimestamp=this.rO(this.tO(t),i))}hO(t,i){return i>=this.XS.get(t).nextImpressionCapResetTimestamp}rO(t,i=Date.now()){const e=Math.ceil((i-this.sO)/t)*t;return this.sO+e}}class vh{constructor(t){this.iO=t,this.aO=new Map}setNumberOfRequests({value:t,categoryId:i}){Object(C.a)(i)&&this.iO===h.ProtoResetCapTypeEnum.OpportunityCapping||(i=dh),this.aO.set(i,t)}getNumberOfRequests({categoryId:t}){return Object(C.a)(t)&&this.iO===h.ProtoResetCapTypeEnum.OpportunityCapping||(t=dh),this.aO.get(t)||0}}class mh extends fh{constructor(t=Date.now()){super(),this.sO=t,this.allowResetOnTime=!0,this.XS=new Map}canCall(t,i){this.nO(t);const e=this.XS.get(t);return void 0===e||(0===t.protoLineItem.requestCap||e.getNumberOfRequests({categoryId:i})<t.protoLineItem.requestCap)}registerRequestForLineItem(t,i,e=Date.now()){let s=this.XS.get(t);return void 0===s&&(this.XS.set(t,new vh(t.protoLineItem.resetCapType)),s=this.XS.get(t),this.ZS(t)&&(s.nextRequestCapResetTimestamp=this.rO(this.tO(t)))),s.setNumberOfRequests({value:s.getNumberOfRequests({categoryId:i})+1,categoryId:i}),this}registerImpressionForLineItem(t){return this}getAvailableRequestsForLineItem(t,i){const e=this.XS.get(t);return void 0===e?t.protoLineItem.requestCap:t.protoLineItem.requestCap-e.getNumberOfRequests({categoryId:i})}restoreOneCapForLineItem(t,i){if(t.protoLineItem.ignoreFilledRequests){const e=this.XS.get(t);if(void 0===e)return;const s=e.getNumberOfRequests({categoryId:i});s>0&&e.setNumberOfRequests({value:s-1,categoryId:i})}}destroy(){this.XS.clear()}KS(t,i){this.XS.get(t).setNumberOfRequests({value:0,categoryId:i})}tO(t){return t.protoLineItem.resetRequestsCapTime*$.f}nO(t,i=Date.now()){if(!this.ZS(t))return;const e=this.XS.get(t);void 0!==e&&this.hO(t,i)&&(e.setNumberOfRequests({value:0}),e.nextRequestCapResetTimestamp=this.rO(this.tO(t),i))}hO(t,i){return i>=this.XS.get(t).nextRequestCapResetTimestamp&&this.allowResetOnTime}rO(t,i=Date.now()){const e=Math.ceil((i-this.sO)/t)*t;return this.sO+e}}class gh{constructor(){this.XS=new Map}registerRequestForLineItem(t,i,e=Date.now()){let s=this.XS.get(t);return void 0===s&&(this.XS.set(t,{}),s=this.XS.get(t)),s.lastRequestTimestamp=e,this}registerImpressionForLineItem(t){return this}canCall(t,i,e=Date.now()){const s=this.XS.get(t);return void 0===s||(0===t.protoLineItem.timeBetweenRequests||e>=s.lastRequestTimestamp+t.protoLineItem.timeBetweenRequests*$.f)}destroy(){this.XS.clear()}}const yh=500;class wh{constructor(){this.oO=null,this.cO=new yt}start(){return this.uO(),this}stop(){return this.lO(),this}onTimer(){return this.cO.asObservable()}destroy(){this.lO()}uO(){null===this.oO&&(this.oO=dt.setInterval(()=>{this.cO.next()},yh))}lO(){dt.clearInterval(this.oO),this.oO=null}}class xh extends o.a{constructor(t,i,e,s){super(),this.dO=t,this.fO=i,this.Ic=e,this.pO=s,this.bO=new yt,this.forceTriggerUpdateState=()=>{[...this.dO.keys()].forEach(t=>this.vO(t))},this.vO=(t,i)=>{this.mO.set(t,this.gO(this.dO.get(t),i))},this.yO=t=>{this.wO([h.ProtoAdType.Video],t)},this.xO=t=>{this.wO([h.ProtoAdType.Overlay],t)},this.br=()=>{this.wO([h.ProtoAdType.Overlay,h.ProtoAdType.Video])},this.wO=(t,i)=>{t.forEach(t=>this.vO(t,i)),this.bO.next()},this.mO=new Map,this.SO={[h.ProtoAdType.Video]:this.yO,[h.ProtoAdType.Overlay]:this.xO},this.forceTriggerUpdateState(),this.dO.forEach((t,i)=>{this.fO.on(t,this.br),this.Ic.on(t,this.SO[i],{threshold:this.pO})})}get onContainerStateUpdate(){return this.bO.asObservable()}getContainerMap(){return this.dO}getContainerStateMap(){return this.mO}destroy(){this.dO.forEach((t,i)=>{this.fO.off(t,this.br),this.Ic.off(t,this.SO[i])})}gO(t,i){let e=i;return void 0===e&&(e=this.Ic.check({element:t,threshold:this.pO})),{width:t.clientWidth,height:t.clientHeight,viewability:e}}}const Sh="cnxpl-vl",Oh="cnxpl-rf";class kh{constructor(){this.OO=!0,this.kO=new yt,this._O=[],this.jO=t=>{if(this.OO)return;const i=t.target;if(i.volume>0&&(i.volume=0,!i.paused)){const t=i.getAttribute(Oh);this.kO.next(t)}t.preventDefault?t.preventDefault():t.returnValue=!1}}get onVolumeDetected(){return this.kO.asObservable()}enforce(t,i){let e=t;Object(C.c)(t)&&(e=t.contentDocument||t.contentWindow.document),this.OO=!1,Object(l.c)(e.getElementsByTagName("video")).forEach(t=>{this.AO(t,i)})}stopEnforce(){this.OO=!0}clearEnforce(t){try{const i=[];this._O=this._O.filter(e=>e.getAttribute(Oh)!==t||(i.push(e),!1)),i.forEach(t=>{t.removeAttribute(Sh),t.removeAttribute(Oh),t.removeEventListener("volumechange",this.jO)})}catch(t){}}AO(t,i){t&&!t.getAttribute("cnxpl-vl")&&(t.volume=0,t.setAttribute(Sh,"true"),t.setAttribute(Oh,i),t.addEventListener("volumechange",this.jO),this._O.push(t))}}class _h{constructor(){}IO(t){const i=function(){};t.Element.prototype.scrollIntoView=i,t.Element.prototype.scrollIntoViewIfNeeded=i,t.scroll=i,t.scrollTo=i,t.scrollBy=i}enforce(t){Object(C.c)(t)&&this.IO(t.contentWindow)}stopEnforce(){}clearEnforce(){}}class jh{constructor(t){this.CO=t=>t.cnxEnfStorage?t.cnxEnfStorage:null,this.de=t;try{this.CO(this.de)||this.TO(this.de)}catch(t){Object(n.a)({message:"AdManager_EnforcerMemory_bind_enforcement",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}TO(t){Object(j.z)(t.document.head,t,'!function(){function n(n){window["cnx"+n]||(window["cnx"+n]=window[n],window[n]=function(e){var t="";try{e&&(t=function n(e,t){try{if(!e)return"";if(e.cnxInnerTag)return e.cnxInnerTag;if(t<2){var r=t+1;return n(e.caller,r)}}catch(n){return""}return""}(e))}catch(n){}var r=window["cnx"+n].apply(null,arguments);if(t){var i=window.cnxEnfStorage;i[n][t]=i[n][t]||[],i[n][t].push(r)}return r})}window.cnxEnfStorage={setTimeout:{},setInterval:{},eventListeners:{},errors:[]};var e=window.location.hostname.split("."),t=window.btoa(e[e.length-2]+"."+e[e.length-1]);-1===["dG16LmNvbQ==","YmlsbGJvYXJkLmNvbQ==","aG9sbHl3b29kcmVwb3J0ZXIuY29t","dmliZS5jb20=","aG9yb3Njb3BlLmNvbQ==","YXN0cm9sb2d5LmNvbQ==","YWhvcmFtaXNtby5jb20="].indexOf(t)&&(!function(){const n=window.EventTarget?window.EventTarget.prototype:window.document;n.cnxAddEventListener||(n.cnxAddEventListener=n.addEventListener,n.addEventListener=function(n,e,t){var r=this||window;if(e&&e.cnxInnerTag){var i=window.cnxEnfStorage;i.eventListeners[e.cnxInnerTag]=i.eventListeners[e.cnxInnerTag]||[],i.eventListeners[e.cnxInnerTag].push({element:r,type:n,handler:e,options:t})}try{r.cnxAddEventListener(n,e,t)}catch(n){n.message="adlstn_"+n.message,i.errors.push(n)}})}(),n("setTimeout"),n("setInterval"))}();')}enforce(t,i){if(Object(C.c)(t))try{t.contentWindow.self===top||t.contentWindow.Function.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Function.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i}),t.contentWindow.self===top||t.contentWindow.Object.prototype.cnxInnerTag||t.contentWindow.Object.defineProperty(t.contentWindow.Object.prototype,"cnxInnerTag",{enumerable:!1,writable:!0,value:i})}catch(t){}}stopEnforce(){}clearEnforce(t){try{const i=this.CO(this.de);i.eventListeners[t]&&(i.eventListeners[t].forEach(t=>{t.element.removeEventListener(t.type,t.handler,t.options)}),i.eventListeners[t]=[]),i.setInterval[t]&&(i.setInterval[t].forEach(t=>this.de.clearInterval(t)),i.setInterval[t]=[]),i.setTimeout[t]&&(i.setTimeout[t].forEach(t=>this.de.clearTimeout(t)),i.setTimeout[t]=[])}catch(t){}}}class Ah{constructor(){this.PO=["viralgains","serving-sys.com","commercialadsdistributor"],this.MO=["beachfrontmedia","commercialadsdistributor"],this.EO=["commercialadsdistributor"],this.LO=["pixel.clearstream.tv","pixel.clrstm.com"],this.RO=new yt,this.BO=new yt}get onMalwareDetected(){return this.RO.asObservable()}get onBadUriDetected(){return this.BO.asObservable()}enforce(t,i){if(Object(C.c)(t)){this.DO=i;try{this.FO(t),this.$O(t),this.UO(t),this.VO(t)}catch(t){}}}stopEnforce(){}clearEnforce(){}NO(t,i,e,s){t.every(t=>-1===e.indexOf(t))&&!i.getAttribute("cnx")&&(i.setAttribute("cnx","true"),this.BO.next({referenceId:this.DO,enforcementMessage:`${s}-${i}`}))}FO(t){const i=t.getAttribute("src");i&&(this.PO.forEach(t=>{i.indexOf(t)>-1&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${t}`})}),this.NO(["//","about:blank","about:self","javascript:"],t,i,"iframe"))}$O(t){Object(l.c)(t.contentDocument.getElementsByTagName("script")).forEach(t=>{const i=t.getAttribute("src");i&&(this.MO.forEach(t=>{i.indexOf(t)>-1&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${t}`})}),this.NO(["//"],t,i,"script"))})}UO(t){Object(l.c)(t.contentDocument.getElementsByTagName("a")).forEach(t=>{const i=t.getAttribute("href");i&&this.EO.forEach(t=>{i.indexOf(t)>-1&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${t}`})})})}VO(t){Object(l.c)(t.contentDocument.getElementsByTagName("img")).forEach(t=>{const i=t.getAttribute("src");i&&this.LO.forEach(t=>{i.indexOf(t)>-1&&this.RO.next({referenceId:this.DO,enforcementMessage:`malware-${t}`})})})}}class Ih{constructor(t,i,e){if(this.HO=e,this.qO=null,this.zO=new Map,this.WO=an.None,this.GO=300,this.Vc=[],this.JO=new Map,this.Um=new yt,this.zO.set(an.MemoryLeak,new jh(i)),e||this.zO.set(an.ScrollHijack,new _h),!t){const t=new kh;this.zO.set(an.Mute,t),this.Vc.push(t.onVolumeDetected.subscribe(t=>{this.QO(hn.VOLUME_DETECTED,t,"")}))}const s=new Ah;this.Vc.push(s.onBadUriDetected.subscribe(t=>{this.QO(hn.BADURI_DETECTED,t.referenceId,t.enforcementMessage)}),s.onMalwareDetected.subscribe(t=>{this.QO(hn.MALWARE_DETECTED,t.referenceId,t.enforcementMessage)})),this.zO.set(an.Malware,s)}get onEnforcerEvent(){return this.Um.asObservable()}registerContainer(t,i){this.JO.get(t)||this.JO.set(t,i)}deregisterContainer(t){this.JO.get(t)&&(this.zO.forEach(i=>{i.clearEnforce(this.JO.get(t))}),this.JO.delete(t),this.JO.size||this.stop(an.All))}start(t){this.HO&&(t^=an.ScrollHijack),this.WO|=t,null===this.qO&&(this.qO=setInterval(()=>{try{this.JO.forEach((t,i)=>{this.XO(i,t)})}catch(t){}},this.GO))}stop(t){this.WO&=~t,this.WO===an.None&&(clearInterval(this.qO),this.qO=null),this.zO.forEach((i,e)=>{t&e&&i.stopEnforce()})}destroy(){this.stop(an.All),St(this.Vc),this.JO.forEach((t,i)=>{this.deregisterContainer(i)})}XO(t,i){Object(l.c)(t.getElementsByTagName("iframe")).forEach(t=>{try{this.XO(t,i)}catch(t){}}),this.zO.forEach((e,s)=>{this.WO&s&&e.enforce(t,i)})}QO(t,i,e){let s;this.JO.forEach((t,e)=>{t===i&&(s=e)}),this.Um.next({message:e,type:t,detectedContainer:s})}}class Ch{constructor(t){this.Jn=t,this.YO=!1,this.KO=void 0,this.ZO=[],this.Vc=[],this.tk=!1,this.ik=new yt,this.ek=new yt,this.sk=[],this.Vc.push(this.Jn.adBidPool.onBidReady.subscribe(()=>{this.nk()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.nk()}))}get onAdSelected(){return this.ik.asObservable()}get onAdFinished(){return this.ek.asObservable()}start(t){this.rk=t,this.YO=!0,this.nk()}stop(){this.YO=!1}destroy(){this.stop(),St(this.Vc),this.KO||this.hk()}nk(){if(!this.YO||this.tk)return;const t=this.ak(this.rk);if(!t)return;const i=this.ck(t);this.KO&&this.Jn.removeBidIfHigherYoScore&&i?(this.hk(),this.KO.stopAd("removeStartedBid"),this.uk(t)):this.KO||this.uk(t)}uk(t){this.KO=t,this.sk=[],this.Jn.adBidPool.moveBidToStarted(t),this.ik.next(t),this.lk(t),ah.trackStartAd(this.Jn.playerId),t.startAd()}hk(){this.KO&&(St(this.ZO),this.ZO=[],this.Jn.adBidPool.consumeBidStarted(this.KO),this.KO=void 0,this.sk=[])}dk(t){const i=t.settings.adManagerLineItem;return this.Jn.impressionCapsService.canCall(i,this.rk.adOpportunity.id)}ak(t){const i=this.Jn.adBidPool.bidsReady.filter(t=>this.dk(t));return this.Jn.adImpressionerYo.getBestBid(i,t)}ck(t){return!!this.KO&&this.Jn.adImpressionerYo.getBetterBid(t,this.KO)!==this.KO}fk(t,i){this.tk&&Object(n.a)({message:"AdManager_ABaseBidAdaptor_multipleImpressions",exception:`advertiserLineItemId:${t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId}_creativeId:${t.creativeId}`,callStack:`${t.adMediaType}`,throttle:1e3,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!0}),this.Jn.adImpressionerYo.registerImpression(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType),ah.trackAdImpression(this.Jn.playerId,t),this.tk=!0,this.Jn.adRequestGatekeeper.addImpression(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,t.settings.obfuscatedPrice),this.Jn.impressionCapsService.registerImpressionForLineItem(t.settings.adManagerLineItem,this.rk.adOpportunity.id),this.Jn.requestCapsService.restoreOneCapForLineItem(t.settings.adManagerLineItem,this.rk.adOpportunity.id),t.settings.adManagerLineItem.bids.delete(t);const e=this.Jn.auctionInfoLogging.onImpression(t);this.pk(t,i,e)}bk(t,i,e,s=!0){this.vk(t,i,e,s),this.Jn.loopAdWhenFinished?t.resumeAd():this.Jn.pauseAdWhenFinished?t.pauseAd():(this.ek.next(t),this.hk(),this.nk())}vk(t,i,e,s=!0){if(this.tk)return void(this.tk=!1);if(!s)return;this.Jn.adImpressionerYo.registerPostBid(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType,e);const n=this.Jn.auctionInfoLogging.onPostBid(t);this.mk(t,e,i,n),t.settings.adManagerLineItem.bids.delete(t)}pk(t,i,e){var s,n;const r=this.rk.adBreakState,h=Object(C.d)(Object(bt.h)(t.getAdDuration(),2))?Object(bt.h)(t.getAdDuration(),2):0,a=Object(C.d)(Object(bt.h)(t.declaredDurationInSeconds,2))?Object(bt.h)(t.declaredDurationInSeconds,2):0,o=h-a,c={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,customClientPrice:t.settings.cpm,encryptedPrice:t.settings.requestMetadata.data.encryptedPrice,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,syncedUser:t.settings.requestMetadata.data.syncedUser,timeSpent:i,vastMediaType:t.adMediaType,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(s=t.settings.bidLifecycle)||void 0===s?void 0:s.winToAdLoadedTime,startAdToImpressionTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.startAdToImpressionTime,impressionDuration:o,declaredDuration:a,useExploration:this.Jn.explorationMode};Object(C.a)(e)&&(c.auctionInformation=e),this.Jn.trackingService.trackVideoAdImpression(c)}mk(t,i,e,s){var n;const r=this.rk.adBreakState;ah.trackPostBid(this.Jn.playerId);const h={adPodSlotPosition:r.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:i,loaded:!0,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:e,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(n=t.settings.bidLifecycle)||void 0===n?void 0:n.winToAdLoadedTime};Object(C.a)(s)&&(h.auctionInformation=s,h.auctionPostbidReason=this.Jn.auctionInfoLogging.getGeneralPostbidReason(i)),this.Jn.trackingService.addPostBid(h)}gk(t,i){this.sk.indexOf(i)>=0&&!(this.Jn.pauseAdWhenFinished||this.Jn.loopAdWhenFinished)?1===Object($t.l)([99,1])&&Object(n.a)({message:"AdManager_AdImpressionerController_handleQuartilesTracking_track_same_quartile_twice",level:h.ProtoLoggingLevelEnum.WARNING,exception:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,callStack:t.adMediaType}):(this.sk.push(i),this.Jn.trackingService.trackVideoAdQuartile({advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,quartile:i}))}lk(t){const i=Date.now();this.ZO.push(t.onVpaidEvent.subscribe(e=>{var s;const r=function(t,i){switch(t){case w.b.AdImpression:return i.adImpression;case w.b.AdClickThru:return i.adClick;case w.b.AdStarted:return i.adStarted;case w.b.AdVideoStart:return i.adVideoStart;case w.b.AdVideoFirstQuartile:return i.adQuartileFirst;case w.b.AdVideoMidpoint:return i.adQuartileSecond;case w.b.AdVideoThirdQuartile:return i.adQuartileThird;case w.b.AdVideoComplete:return i.adQuartileFourth;case w.b.AdPaused:return i.adPause;case w.b.AdPlaying:return i.adResume;case w.b.AdSkipped:return i.adSkip;case w.b.AdUserClose:return i.adUserClose;case w.b.AdUserAcceptInvitation:return i.adUserAcceptInvitation;case w.b.AdUserMinimize:return i.adUserMinimize;case w.b.AdError:return i.adError}}(e.type,t.settings.trackers),a=Date.now()-i;switch(r||e.type!==w.b.AdImpression||(this.yk("AdManager_AdImpressionController_tracker_impression_not_found"),Object(n.a)({sendMaxLog:!1,message:"AdManager_AdImpressionController_tracker_impression_not_found",level:h.ProtoLoggingLevelEnum.FATAL})),Zs.track(r,this.Jn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),e.type){case w.b.AdError:this.bk(t,a,e.payload.errorMessage);break;case w.b.AdSkipped:this.bk(t,a,on.c.AdStopped);break;case w.b.AdStopped:this.bk(t,a,on.c.AdStopped,null===(s=e.payload)||void 0===s?void 0:s.shouldTrackPostBid);break;case w.b.AdImpression:this.fk(t,a);break;case w.b.AdVideoFirstQuartile:this.gk(t,h.ProtoQuartilesEnum.First);break;case w.b.AdVideoMidpoint:this.gk(t,h.ProtoQuartilesEnum.Second);break;case w.b.AdVideoThirdQuartile:this.gk(t,h.ProtoQuartilesEnum.Third);break;case w.b.AdVideoComplete:this.gk(t,h.ProtoQuartilesEnum.Fourth)}})),this.ZO.push(t.onAdViewableImpression.subscribe(t=>{this.Jn.trackingService.trackVideoAdImpressionViewable(t)}))}yk(t,i){var e,s;Object(n.a)({message:t,level:h.ProtoLoggingLevelEnum.FATAL,sendMaxLog:!1,exception:null===(e=i)||void 0===e?void 0:e.message,callStack:null===(s=i)||void 0===s?void 0:s.stack})}}const Th={[h.ProtoAdBreakTypeEnum.PreRoll]:"preRoll",[h.ProtoAdBreakTypeEnum.MidRoll]:"midRoll",[h.ProtoAdBreakTypeEnum.PostRoll]:"postRoll"};class Ph{constructor(t,i){this.wk=t,this.Wh=i}replace(t,i,e){this.wk.setAdWidth(e.adMacros.adWidth),this.wk.setAdHeight(e.adMacros.adHeight),this.wk.setAdPosition(Th[e.adMacros.adPostion]),e.mediaMacros.mediaDescription&&this.wk.setVideoDescription(e.mediaMacros.mediaDescription),e.mediaMacros.mediaDuration&&this.wk.setVideoDuration(e.mediaMacros.mediaDuration),e.mediaMacros.mediaId&&this.wk.setVideoId(e.mediaMacros.mediaId),e.mediaMacros.mediaTitle&&this.wk.setVideoTitle(e.mediaMacros.mediaTitle),e.mediaMacros.mediaUrl&&this.wk.setVideoUrl(e.mediaMacros.mediaUrl);const s=this.Wh.isConsent(i);this.wk.setGDPR(this.Wh.isConsentRequired()?1:0),this.wk.setConsent(s?1:0),this.wk.setGDPRConsent(this.Wh.getConsentPayload());const n=this.Wh.getTrackableUser(),r=this.Wh.isConsentConnatix()&&s?n:void 0;return this.wk.setUUID(r),this.wk.setupMacros(t)}}const Mh=30*$.f;class Eh{constructor(){this.xk=null}onAdRemoved(){this.xk=null,this.Sk()}pauseViaUserInteraction(){this.xk&&(this.xk.pausedWithUserInteraction=!0)}resumeViaUserInteraction(){this.xk&&(this.xk.pausedWithUserInteraction=!1,this.Sk())}Ok(t){this.xk={currentAd:t,isPaused:!1,pausedWithUserInteraction:!1,remainingTimeForAdToBePaused:Mh,lastAdPausedStartedTimestamp:void 0},this.Sk()}checkPauseAd(t,i){t&&(null===this.xk&&this.Ok(t),i?this.kk(t):this._k(t))}_k(t){this.jk(t)&&(this.xk.isPaused=!0,this.xk.lastAdPausedStartedTimestamp=Date.now(),t.pauseAd(),this.Sk(),this.Ak=setTimeout(()=>{t.stopAd("pauseOutOfView"),this.xk=null,this.Sk()},this.xk.remainingTimeForAdToBePaused))}kk(t){t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&this.xk.isPaused&&!this.xk.pausedWithUserInteraction&&(this.Sk(),this.xk.isPaused=!1,this.xk.remainingTimeForAdToBePaused=this.xk.remainingTimeForAdToBePaused-(Date.now()-this.xk.lastAdPausedStartedTimestamp),t.resumeAd())}Sk(){clearTimeout(this.Ak),this.Ak=void 0}jk(t){return t.settings.adManagerLineItem.protoLineItem.pauseAdOutOfView&&t.impressionStarted&&!this.xk.isPaused&&!this.xk.pausedWithUserInteraction}}function Lh(t,i){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Rh(t,i))}}var Rh=function(){function t(t,i){this.project=t,this.thisArg=i}return t.prototype.call=function(t,i){return i.subscribe(new Bh(t,this.project,this.thisArg))},t}(),Bh=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.project=e,n.count=0,n.thisArg=s||n,n}return V(i,t),i.prototype.Hc=function(t){var i;try{i=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(i)},i}(Z),Dh=function(t){return function(i){for(var e=0,s=t.length;e<s&&!i.closed;e++)i.next(t[e]);i.complete()}};function Fh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var $h=Fh(),Uh=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Vh(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Nh=function(t){if(t&&"function"==typeof t[it])return s=t,function(t){var i=s[it]();if("function"!=typeof i.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return i.subscribe(t)};if(Uh(t))return Dh(t);if(Vh(t))return e=t,function(t){return e.then(function(i){t.closed||(t.next(i),t.complete())},function(i){return t.error(i)}).then(null,z),t};if(t&&"function"==typeof t[$h])return i=t,function(t){for(var e=i[$h]();;){var s=void 0;try{s=e.next()}catch(i){return t.error(i),t}if(s.done){t.complete();break}if(t.next(s.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var i,e,s,n=J(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Hh(t,i){return new nt(function(e){var s=new X,n=0;return s.add(i.schedule(function(){n!==t.length?(e.next(t[n++]),e.closed||s.add(this.schedule())):e.complete()})),s})}function qh(t,i){if(null!=t){if(function(t){return t&&"function"==typeof t[it]}(t))return function(t,i){return new nt(function(e){var s=new X;return s.add(i.schedule(function(){var n=t[it]();s.add(n.subscribe({next:function(t){s.add(i.schedule(function(){return e.next(t)}))},error:function(t){s.add(i.schedule(function(){return e.error(t)}))},complete:function(){s.add(i.schedule(function(){return e.complete()}))}}))})),s})}(t,i);if(Vh(t))return function(t,i){return new nt(function(e){var s=new X;return s.add(i.schedule(function(){return t.then(function(t){s.add(i.schedule(function(){e.next(t),s.add(i.schedule(function(){return e.complete()}))}))},function(t){s.add(i.schedule(function(){return e.error(t)}))})})),s})}(t,i);if(Uh(t))return Hh(t,i);if(function(t){return t&&"function"==typeof t[$h]}(t)||"string"==typeof t)return function(t,i){if(!t)throw new Error("Iterable cannot be null");return new nt(function(e){var s,n=new X;return n.add(function(){s&&"function"==typeof s.return&&s.return()}),n.add(i.schedule(function(){s=t[$h](),n.add(i.schedule(function(){if(!e.closed){var t,i;try{var n=s.next();t=n.value,i=n.done}catch(t){return void e.error(t)}i?e.complete():(e.next(t),this.schedule())}}))})),n})}(t,i)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var zh=function(t){function i(i){var e=t.call(this)||this;return e.parent=i,e}return V(i,t),i.prototype.Hc=function(t){this.parent.notifyNext(t)},i.prototype.qc=function(t){this.parent.notifyError(t),this.unsubscribe()},i.prototype.zc=function(){this.parent.notifyComplete(),this.unsubscribe()},i}(Z),Wh=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return V(i,t),i.prototype.notifyNext=function(t){this.destination.next(t)},i.prototype.notifyError=function(t){this.destination.error(t)},i.prototype.notifyComplete=function(){this.destination.complete()},i}(Z);function Gh(t,i,e){return void 0===e&&(e=Number.POSITIVE_INFINITY),"function"==typeof i?function(s){return s.pipe(Gh(function(e,s){return(n=t(e,s),r?qh(n,r):n instanceof nt?n:new nt(Nh(n))).pipe(Lh(function(t,n){return i(e,t,s,n)}));var n,r},e))}:("number"==typeof i&&(e=i),function(i){return i.lift(new Jh(t,e))})}var Jh=function(){function t(t,i){void 0===i&&(i=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=i}return t.prototype.call=function(t,i){return i.subscribe(new Qh(t,this.project,this.concurrent))},t}(),Qh=function(t){function i(i,e,s){void 0===s&&(s=Number.POSITIVE_INFINITY);var n=t.call(this,i)||this;return n.project=e,n.concurrent=s,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return V(i,t),i.prototype.Hc=function(t){this.active<this.concurrent?this.Ik(t):this.buffer.push(t)},i.prototype.Ik=function(t){var i,e=this.index++;try{i=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this.Ck(i)},i.prototype.Ck=function(t){var i=new zh(this),e=this.destination;e.add(i);var s=function(t,i){if(!i.closed)return t instanceof nt?t.subscribe(i):Nh(t)(i)}(t,i);s!==i&&e.add(s)},i.prototype.zc=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},i.prototype.notifyNext=function(t){this.destination.next(t)},i.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this.Hc(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},i}(Wh);function Xh(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e,s=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return(e=r)&&"function"==typeof e.schedule?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof r&&(s=t.pop()),null===n&&1===t.length&&t[0]instanceof nt?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Gh(et,t)}(s)(function(t,i){return i?Hh(t,i):new nt(Dh(t))}(t,n))}function Yh(t,i){return function(e){return e.lift(new Kh(t,i))}}var Kh=function(){function t(t,i){this.predicate=t,this.thisArg=i}return t.prototype.call=function(t,i){return i.subscribe(new Zh(t,this.predicate,this.thisArg))},t}(),Zh=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.predicate=e,n.thisArg=s,n.count=0,n}return V(i,t),i.prototype.Hc=function(t){var i;try{i=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}i&&this.destination.next(t)},i}(Z);function ta(t,i){return void 0===i&&(i=!1),function(e){return e.lift(new ia(t,i))}}var ia=function(){function t(t,i){this.predicate=t,this.inclusive=i}return t.prototype.call=function(t,i){return i.subscribe(new ea(t,this.predicate,this.inclusive))},t}(),ea=function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.predicate=e,n.inclusive=s,n.index=0,n}return V(i,t),i.prototype.Hc=function(t){var i,e=this.destination;try{i=this.predicate(t,this.index++)}catch(t){return void e.error(t)}this.nextOrComplete(t,i)},i.prototype.nextOrComplete=function(t,i){var e=this.destination;Boolean(i)?e.next(t):(this.inclusive&&e.next(t),e.complete())},i}(Z);function sa(){}function na(t,i,e){return function(s){return s.lift(new ra(t,i,e))}}var ra=function(){function t(t,i,e){this.nextOrObserver=t,this.error=i,this.complete=e}return t.prototype.call=function(t,i){return i.subscribe(new ha(t,this.nextOrObserver,this.error,this.complete))},t}(),ha=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.Tk=sa,r.Pk=sa,r.Mk=sa,r.Pk=s||sa,r.Mk=n||sa,N(e)?(r.Jc=r,r.Tk=e):e&&(r.Jc=e,r.Tk=e.next||sa,r.Pk=e.error||sa,r.Mk=e.complete||sa),r}return V(i,t),i.prototype.Hc=function(t){try{this.Tk.call(this.Jc,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},i.prototype.qc=function(t){try{this.Pk.call(this.Jc,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},i.prototype.zc=function(){try{this.Mk.call(this.Jc)}catch(t){return void this.destination.error(t)}return this.destination.complete()},i}(Z);class aa{constructor(t){this.bid=t,this.cancelled=!1,this.Ek=new yt,this.Lk=!1,this.ug=this.bid.onVpaidEvent.pipe(Yh(t=>t.type===w.b.AdLoaded),ta(()=>!this.Lk),na(()=>{this.Lk=!0})),this.dg=this.bid.onVpaidEvent.pipe(Yh(t=>t.type===w.b.AdError),Lh(t=>t.payload.errorMessage),ta(()=>!this.Lk),na(()=>{this.Lk=!0}))}get onSuccess(){return this.ug}get onFailure(){return Xh(this.Ek,this.dg)}loadBid(t,i,e,s,n){this.bid.initAd(t,i,e,s,void 0,void 0,n)}}const oa=1;class ca{constructor(t){this.Jn=t,this.Rk=new Set,this.Bk=new Map,this.Vc=[],this.Tc=!1,this.Dk=()=>{if(this.Fk())return;const t=this.$k();if(!t.selectedBid)return;const i=Date.now();return this.Jn.auctionInfoLogging.winBid(t.selectedBid),this.Uk(t,this.Vk.vastViewMode).catch(e=>{const{selectedBid:s}=t,n=this.Jn.auctionInfoLogging.onPostBid(t.selectedBid);throw this.Nk(s,i,e,n),this.Hk(),t}).then(()=>{this.Hk()}).catch(i=>{if(i===t)return;let e="";try{e=JSON.stringify(i)}catch(t){}Object(n.a)({message:"AdManager_winBid_failed",level:h.ProtoLoggingLevelEnum.FATAL,exception:i,callStack:e,throttle:3,sendMaxLog:!1})})},this.DS=new th(this.Dk,oa),this.Vc.push(this.Jn.adBidPool.onBid.subscribe(t=>{const i=this.$k();this.Jn.auctionInfoLogging.newBidAdded(t,i),this.Hk()}),this.Jn.adBidPool.onBidStarted.subscribe(()=>{this.Hk()}),this.Jn.adBidPool.onBidReadyConsumed.subscribe(()=>{this.Hk()}),this.Jn.impressionCapsTimer.onTimer().subscribe(()=>{this.Hk()}))}isLoadingBids(){return this.Rk.size>0}win(t){this.Vk=t,this.DS.setNumberOfThreads(t.maxParallelWins),this.Tc=!0,this.Hk()}stop(){this.Tc=!1,this.DS.stop()}destroy(){this.stop(),St(this.Vc),this.Bk.forEach(t=>t())}Hk(){this.Tc&&this.DS.start()}$k(){const t=this.qk(),i=this.zk();return this.Wk(t,i)}Wk(t,i){const e=Object.assign({},t);return t.selectedBid&&i.selectedBid?(this.Gk(i.selectedBid,t.selectedBid)&&(e.selectedBid=void 0,e.unselectedBidList.push({bid:t.selectedBid,lossReason:h.ProtoAuctionLossReasonEnum.CompetitorPriority})),e):e}Fk(){if(-1===this.Jn.maxNumberOfWins)return!1;return this.Jn.adBidPool.bidsReady.length+this.Rk.size+(this.Jn.adBidPool.bidStarted?1:0)>=this.Jn.maxNumberOfWins}qk(){return this.Jk(this.Jn.adBidPool.bids)}zk(){const t=[...Object(l.d)(this.Rk).map(t=>t.bid),...this.Jn.adBidPool.bidsReady];return this.Jk(t)}Jk(t){return this.Jn.adWinnerYo.selectBestBid(t,this.Vk.stateSettings,this.Jn.impressionCapsService,this.Jn.platformCappedLineItemRepo)}Gk(t,i){return!(this.Jn.adWinnerYo.getWinningYoScore(t.settings.id)<=this.Jn.adWinnerYo.getWinningYoScore(i.settings.id))}Uk(t,i){return new Promise((e,s)=>{const{selectedBid:n,state:r}=t,h=new aa(n);this.Rk.add(h),this.Jn.adBidPool.moveBidToLoading(n),h.onSuccess.subscribe(()=>{this.Rk.delete(h),this.Jn.adBidPool.moveBidToReady(n),e()}),h.onFailure.subscribe(i=>{this.Rk.delete(h),this.Jn.adBidPool.consumeBidLoading(n),t.selectedBid.settings.adManagerLineItem.bids.delete(n),s(i)});const{width:a,height:o}=r.adContainerState.get(n.settings.adManagerLineItem.protoLineItem.adType);h.loadBid(a,o,i,this.Jn.desiredBitRateForWins,r.soundValue),Zs.track(n.settings.trackers.adWin,this.Jn.adMacroReplacer,n.settings.adManagerLineItem.protoLineItem,r),ah.trackWin(this.Jn.playerId,n)})}Nk(t,i,e,s){this.Qk(t,Date.now()-i,e,s),this.Jn.adWinnerYo.registerPostBid(t.settings.id,t.settings.adManagerLineItem.protoLineItem.creativeType,e)}Qk(t,i,e,s){var n,r,h,a,o;const c=(null===(r=null===(n=this.Vk.stateSettings)||void 0===n?void 0:n.currentState)||void 0===r?void 0:r.adBreakState)||(null===(a=null===(h=this.Vk.stateSettings)||void 0===h?void 0:h.predictedState)||void 0===a?void 0:a.adBreakState);Zs.track(t.settings.trackers.adError,this.Jn.adMacroReplacer,t.settings.adManagerLineItem.protoLineItem,t.settings.callingState),ah.trackPostBid(this.Jn.playerId);const u={adPodSlotPosition:c.adPodSlotIndex,adsourceType:t.adSourceType,advertiserLineItemId:t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:t.settings.adManagerLineItem.protoLineItem.publisherLineItemId,error:e,loaded:!1,prebidJsBidderName:t.settings.requestMetadata.data.prebidJsBidderName,vastMediaType:t.adMediaType,syncedUser:t.settings.requestMetadata.data.syncedUser,rtbSeatId:t.settings.requestMetadata.data.rtbSeatId,rtbAdomain:t.settings.requestMetadata.data.rtbAdomain,creativeId:t.creativeId,timeSpent:i,dspId:t.settings.requestMetadata.data.dspId,cnxBidId:t.settings.requestMetadata.data.cnxBidId,winToAdLoadedTime:null===(o=t.settings.bidLifecycle)||void 0===o?void 0:o.winToAdLoadedTime};Object(C.a)(s)&&(u.auctionInformation=s,u.auctionPostbidReason=this.Jn.auctionInfoLogging.getGeneralPostbidReason(e)),this.Jn.trackingService.addPostBid(u)}}var ua;!function(t){function i(t,i){if(Object(l.h)(i.items)&&Array.isArray(t)){const e=Object(l.b)(t,i.items).length;return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e>0:0===e}const e=Object(l.g)(t,i.items);return i.choiceCriteria===h.ProtoChoiceCriteriaEnum.Only?e:!e}function e(t,i){return t.some(t=>(function(t,i){for(let e=0;e<t.filters.length;e++){const s=t.filters[e],n=i.filter(t=>s.items.includes(t)).length;switch(s.type){case h.ProtoLineItemContextualTargetingEnum.IncludeAny:if(0===n)return!1;break;case h.ProtoLineItemContextualTargetingEnum.IncludeAll:if(n!==s.items.length)return!1;break;case h.ProtoLineItemContextualTargetingEnum.ExcludeAny:if(n>0)return!1;break;case h.ProtoLineItemContextualTargetingEnum.ExcludeAll:if(n===s.items.length)return!1}}return!0})(t,i))}t.isAllowedBySound=function(t,i){return!t.protoLineItem.sound||i.sound},t.isAllowedByViewability=function(t,i){const e=i.adContainerState.get(t.protoLineItem.adType).viewability;return!t.protoLineItem.viewability||e},t.isAllowedByAdBreakType=function(t,i){return!t.protoLineItem.adBreakSettings||t.protoLineItem.adBreakSettings.adBreakTargeting.some(t=>{if(t.adRollType===i.adBreakState.adBreakType)return function(t,i){switch(t){case h.ProtoLineItemAdBreakTypeEnum.All:return!0;case h.ProtoLineItemAdBreakTypeEnum.AdPod:return i;case h.ProtoLineItemAdBreakTypeEnum.SingleAd:return!i}}(t.adBreakTypeEnum,i.adBreakState.isAdPodBreak)})},t.isAllowedByMediaTargeting=function(t,e){return!(t.protoLineItem.mediaIdTargeting&&!i(e.media.mediaId,t.protoLineItem.mediaIdTargeting)||t.protoLineItem.mediaKeywordsTargeting&&!i(e.media.mediaKeywords,t.protoLineItem.mediaKeywordsTargeting)||t.protoLineItem.mediaLanguageTargeting&&!i(e.media.mediaLanguage,t.protoLineItem.mediaLanguageTargeting))},t.isAllowedByContextualTargeting=function(t,i){const{advertiserContextualTargeting:s,publisherContextualTargeting:n}=t.protoLineItem,r=i.media.videoIndexes||[];return!(Object(l.h)(s)&&!e(s,r)||Object(l.h)(n)&&!e(n,r))},t.isAllowedByPlayerSizeTargeting=function(t,i){const{playerSizeTargetings:e}=t.protoLineItem,{width:s}=i.adContainerState.get(t.protoLineItem.adType);return!Object(C.f)(e)||!Object(C.d)(s)||(e.sizeChoiceCriteria===h.ProtoSizeChoiceCriteriaEnum.GreaterThan?!Object(C.d)(e.minWidth)||s>=e.minWidth:e.sizeChoiceCriteria===h.ProtoSizeChoiceCriteriaEnum.SmallerThan?!Object(C.d)(e.maxWidth)||s<=e.maxWidth:e.sizeChoiceCriteria!==h.ProtoSizeChoiceCriteriaEnum.Between||!Object(C.d)(e.maxWidth)||!Object(C.d)(e.minWidth)||s>=e.minWidth&&s<=e.maxWidth)},t.isAllowedByPodTargeting=function(t,i){var e;const s=null===(e=t.protoLineItem.adBreakSettings)||void 0===e?void 0:e.adPodTargeting;if(!s)return!0;if(!i.adBreakState.isAdPodBreak)return!0;const n=i.adBreakState.adPodSlotIndex;let r=!0;switch(s.adSlotTargetingType){case h.ProtoLineItemAdSlotTargetingTypeEnum.Interval:(n<s.adSlotPositions[0]||n>s.adSlotPositions[1])&&(r=!1);break;case h.ProtoLineItemAdSlotTargetingTypeEnum.SpecificSlots:-1===s.adSlotPositions.indexOf(n)&&(r=!1)}return s.targetingType===h.ProtoLineItemTargetingTypeEnum.Except&&(r=!r),r},t.isAllowedRegardingDuration=function(t,i){return!t||0===i||t<=i},t.isAllowedRegardingSkippability=function(t,i,e){switch(e.adSkippability){case h.ProtoPlayerAdSkippability.IfLongerThan:if(i===h.ProtoAdSkipMode.Never&&t>e.adsMustBeSkippableIfLongerThan||i===h.ProtoAdSkipMode.IfLongerThan31Sec&&t<F.d&&t>e.adsMustBeSkippableIfLongerThan||i===h.ProtoAdSkipMode.Always&&t<e.adsMustBeSkippableIfLongerThan)return!1;break;case h.ProtoPlayerAdSkippability.Always:if(i===h.ProtoAdSkipMode.IfLongerThan31Sec&&t&&t<F.d)return!1}return!0}}(ua||(ua={}));class la{constructor(t,i){this.Xk=t,this.Yk=i}getCallingYoScore(t){return this.Xk.getCallingYoScore(t)}getWinningYoScore(t){return this.Xk.getWinningYoScore(t)}getImpressionYoScore(t){return this.Xk.getImpressionYoScore(t)}registerBiddingInformation(t){this.Xk.registerBiddingInformation(t)}registerPreBid(t){this.Xk.registerPreBid(t)}registerImpression(t,i){this.Xk.registerImpression(t,i)}registerPostBid(t,i,e){this.Xk.registerPostBid(t,i,e)}Kk(t,i){return ua.isAllowedByViewability(t,i)&&ua.isAllowedBySound(t,i)&&ua.isAllowedByAdBreakType(t,i)&&ua.isAllowedByMediaTargeting(t,i)&&ua.isAllowedByPodTargeting(t,i)&&ua.isAllowedByContextualTargeting(t,i)&&ua.isAllowedByPlayerSizeTargeting(t,i)}Zk(t,i){const e=t.getAdDuration(),s=t.settings.adManagerLineItem.protoLineItem.skipMode,n=i.adBreakState.sessionMaxAdDuration;return ua.isAllowedRegardingDuration(e,n)&&ua.isAllowedRegardingSkippability(e,s,this.Yk)}t_(t,i){const e=t.getAdDuration(),s=i.adBreakState.remainingAdDuration;return ua.isAllowedRegardingDuration(e,s)}i_(t,i,e,s){return!s.isLineItemPlatformCapped(t.settings.adManagerLineItem.protoLineItem.advertiserLineItemId)&&e.canCall(t.settings.adManagerLineItem,i.adOpportunity.id)&&this.Kk(t.settings.adManagerLineItem,i)&&this.Zk(t,i)&&this.t_(t,i)}}class da extends la{getBestCallable(t,i){return this.e_(t,i.currentState||i.predictedState)}isBidTargetingAllowed(t,i,e,s){return this.i_(t,i,e,s)}isBidTargetingAllowedEverInSession(t,i){return this.Zk(t,i)}e_(t,i){if(!i)return;const e=this.s_(t,i),s=this.n_(e);return s?{state:i,lineItemList:this.r_(s,e)}:void 0}n_(t){let i=t;return t.some(t=>mr(t.protoLineItem.creativeType))&&(i=i.filter(t=>mr(t.protoLineItem.creativeType))),this.h_(i)[0]}h_(t=[]){return t.sort((t,i)=>this.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.getCallingYoScore(t.protoLineItem.advertiserLineItemId))}s_(t,i){return t.filter(t=>this.Kk(t,i))}r_(t,i){const{creativeType:e}=t.protoLineItem;return mr(e)?this.h_(i.filter(t=>e===t.protoLineItem.creativeType)):[t]}}class fa extends la{getBestBid(t,i){return this.a_(t,i)}getBetterBid(t,i){return this.getImpressionYoScore(t.settings.id)>this.getImpressionYoScore(i.settings.id)?t:i}a_(t,i){return[...t].sort((t,i)=>this.getImpressionYoScore(i.settings.id)-this.getImpressionYoScore(t.settings.id))[0]}}class pa extends la{constructor(){super(...arguments),this.o_=(t,i,e,s)=>{const n=[],r=[];for(const h of t){this.i_(h,i.currentState||i.predictedState,e,s)?n.push(h):r.push(h)}return{allowedBidList:n,notAllowedBidList:r}}}selectBestBid(t,i,e,s){const n=this.o_(t,i,e,s),{allowedBidList:r,notAllowedBidList:a}=n,o=i.currentState||i.predictedState,c=this.c_(r),u=a.map(t=>({bid:t,lossReason:this.u_(t,o)})),l=r.filter(t=>t!==c).map(t=>({bid:t,lossReason:h.ProtoAuctionLossReasonEnum.CompetitorPriority}));return{state:o,selectedBid:c,unselectedBidList:[...u,...l]}}isBetterBid(t,i){return this.getWinningYoScore(t.settings.id)>this.getWinningYoScore(i.settings.id)}c_(t){if(Object(l.h)(t))return[...t].sort((t,i)=>this.getWinningYoScore(i.settings.id)-this.getWinningYoScore(t.settings.id))[0]}u_(t,i){return this.t_(t,i)?h.ProtoAuctionLossReasonEnum.AdOpportunityEnd:h.ProtoAuctionLossReasonEnum.TargetingMismatch}}class ba{constructor(t){this.Jn=t,this.l_=new yt,this.d_=!1,this.f_=!1,this.p_=null,this.b_=!1,this.v_=(t,i)=>{return this.Jn.yoScoreManager.getCallingYoScore(i.protoLineItem.advertiserLineItemId)-this.Jn.yoScoreManager.getCallingYoScore(t.protoLineItem.advertiserLineItemId)},this.d_=t.locked,t.adBidPool.onBid.subscribe(()=>{this.d_||this.m_()})}get onAuctionEnd(){return this.l_.asObservable()}startAuction(t){this.f_=!1,0!==t||this.d_||null!==this.p_?this.m_()||(this.b_=!1,this.g_(),this.p_=setTimeout(()=>{this.b_=!0,this.d_||this.l_.next()},t)):this.l_.next()}lock(){this.d_=!0}unlock(){this.d_=!1,this.f_||(this.b_?this.l_.next():this.m_())}cancel(){this.f_=!0,this.g_()}g_(){clearTimeout(this.p_),this.p_=null}m_(){var t;if(this.f_)return!1;this.Jn.adBidPool.bids.sort((t,i)=>this.Jn.yoScoreManager.getWinningYoScore(i.settings.id)-this.Jn.yoScoreManager.getWinningYoScore(t.settings.id));const i=this.Jn.adBidPool.bids[0];if(!i)return!1;this.Jn.adBidPool.callingLineItems.sort(this.v_);const e=this.Jn.adBidPool.callingLineItems[0],s=this.Jn.yoScoreManager.getWinningYoScore(i.settings.id),n=this.Jn.yoScoreManager.getCallingYoScore(null===(t=e)||void 0===t?void 0:t.protoLineItem.advertiserLineItemId);return(!e||s>=n)&&(this.l_.next(),this.g_(),!0)}}class va{constructor(t){this.protoLineItem=t,this.allowedSlots=[],this.bids=new Set,this.callers=new Set,this.aggregators=new Set}}const ma="cnx-ad-bid-slot",ga="cnx-ad-slot",ya="cnx-ad-video-slot";class wa{constructor(t,i){this.parentContainer=t,this.Ig=i,this.isImaSlot=!1,this.slotsContainer=this.Ig.createElementByString(`<div class= "${ma}"></div>`),this.adSlot=this.Ig.createElementByString(`<div class="${ga}"></div>`),this.videoSlot=this.Ig.createElementByString(`<video class="${ga} ${ya}"></video>`),this.videoSlot.setAttribute("playsinline",""),this.videoSlot.setAttribute("webkit-playsinline",""),this.slotsContainer.appendChild(this.videoSlot),this.slotsContainer.appendChild(this.adSlot),this.parentContainer.appendChild(this.slotsContainer)}destroy(){this.parentContainer.removeChild(this.slotsContainer)}sanitize(){}}class xa extends wa{constructor(){super(...arguments),this.isImaSlot=!0,this.y_=!1,this.w_={imaAdDisplayContainer:void 0,imaAdsLoader:void 0,imaSdk:void 0}}fetchImaDependencies(){return Sn.fetchImaSdk(window,!0).then(t=>this.x_(t))}destroy(){this.w_.imaAdsLoader&&this.w_.imaAdsLoader.destroy(),this.w_.imaAdDisplayContainer&&this.w_.imaAdDisplayContainer.destroy(),super.destroy()}sanitize(){this.w_.imaAdsLoader.contentComplete(),super.sanitize()}x_(t){if(this.y_)return this.w_;t.settings.setDisableCustomPlaybackForIOS10Plus(!0);const i=this.S_(t),e=this.O_(t,i);return this.w_={imaSdk:t,imaAdDisplayContainer:i,imaAdsLoader:e},this.y_=!0,this.w_}S_(t){const i=new t.AdDisplayContainer(this.adSlot,this.videoSlot);return i.initialize(),i}O_(t,i){const e=new t.AdsLoader(i);return e.getSettings().setVpaidMode(t.ImaSdkSettings.VpaidMode.INSECURE),e}}const Sa=3;class Oa{constructor(t){this.settings=t,this.k_=new Set,this.__=new Set,this.j_=[10,15,20],this.A_=0,Sn.preloadImaSdk(window);for(let i=1;i<=Sa;i++){const i=new xa(t.slot,this.settings.globalDomUtilsService);i.fetchImaDependencies(),this.k_.add(i)}}requestAdSlot(t){const i=new wa(t,this.settings.globalDomUtilsService);return this.I_(i),this.C_(),i}requestAdSlotIma(t){let i=this.T_();return i||(i=new xa(t,this.settings.globalDomUtilsService)),this.I_(i),this.C_(),i}destroyAdSlot(t){this.__.delete(t),t.destroy()}recycleAdSlot(t){this.__.delete(t),this.P_(t)?(t.sanitize(),this.k_.add(t)):this.destroyAdSlot(t)}P_(t){return t.isImaSlot}T_(){let t=null;return this.k_.forEach(i=>{this.P_(i)&&null===t&&(t=i)}),t}I_(t){this.k_.delete(t),this.__.add(t)}C_(){const t=this.k_.size+this.__.size;t===this.j_[this.A_]&&(this.M_(this.j_[this.A_]),t===this.j_[this.j_.length-1]&&this.j_.push(this.j_[this.j_.length-1]+20),this.A_++)}M_(t){Object(n.a)({message:"AdSlotContainerRecycler_slotcount",exception:`${t}`,callStack:"",level:h.ProtoLoggingLevelEnum.INFO,throttle:20,sendMaxLog:!0})}}function ka(t){return[t-(t-t%100),t-t%100]}function _a(t,i=!1){if(i)return Math.random();const{successRate:e,cpm:s,priority:n}=t;let r=0===e?Math.random():e;return r=1,1*s+F.f*n}class ja{constructor(t,i){this.E_=i,this.L_=this.R_(t)}registerBiddingInformation(t){const i=function(t){switch(t.creativeType){case h.ProtoCreativeTypeEnum.Tam:case h.ProtoCreativeTypeEnum.TamDeal:case h.ProtoCreativeTypeEnum.Rtb:return zs(t.obfuscatedPrice);case h.ProtoCreativeTypeEnum.HeaderBidder:return t.cpm;default:return t.floorPrice}}(t),{priority:e,successRate:s,lineItemId:n,bidId:r}=t;let a=0;a=mr(t.creativeType)?_a({cpm:i,priority:e,successRate:s},this.E_):this.getCallingYoScore(t.lineItemId),this.B_(n,r,a)}registerPreBid(t){this.D_(t)}registerImpression(t,i){this.D_(t),mr(i)||this.F_(t)}registerPostBid(t,i,e){this.D_(t),mr(i)||e===on.c.Cancelled||this.U_(t)}getCallingYoScore(t){const i=this.V_(t);return i?i.yoScore:0}getWinningYoScore(t){const i=this.N_(t);return i?i.bidMap.get(t):(Object(n.a)({message:"YoScoreManager_getWinningYoScore_error",exception:`bid was not yet registered: ${t}`,level:h.ProtoLoggingLevelEnum.WARNING}),0)}getImpressionYoScore(t){return this.getWinningYoScore(t)}U_(t){const i=this.N_(t);if(!i)return;const e=function(t){const i=ka(t);return i[1]+i[0]*F.g}(i.yoScore);this.H_(i,e)}F_(t){const i=this.N_(t);if(!i)return;const e=function(t){const i=ka(t);return i[1]+i[0]*F.h}(i.yoScore);this.H_(i,e)}H_(t,i){t&&(t.yoScore=i)}B_(t,i,e){const s=this.V_(t);if(!s)return;const n=this.q_(s);!this.E_||s.bidMap.has(i)||-1===n?this.z_(s,i)&&s.bidMap.set(i,e):s.bidMap.set(i,n)}q_(t){const i=[...t.bidMap.values()];return Object(l.h)(i)?i[0]:-1}z_(t,i){return!this.E_||!t.bidMap.has(i)}R_(t){return t.map(t=>{const{floorPrice:i,lineItemPriority:e,successRate:s,advertiserLineItemId:n,creativeType:r}=t;let h;return{lineItemId:n,yoScore:h=mr(r)?Math.random():_a({cpm:i,priority:e,successRate:s},this.E_),bidMap:new Map}})}V_(t){return this.L_.find(i=>i.lineItemId===t)}N_(t){return this.L_.find(i=>i.bidMap.has(t))}D_(t){if(!t)return;const i=this.N_(t);i&&0!==i.bidMap.size&&i.bidMap.delete(t)}}var Aa;!function(t){t[t.Default=0]="Default",t[t.Prefetch=1]="Prefetch"}(Aa||(Aa={}));class Ia{constructor(t,i){this.W_=t,this.co=i,this.G_=new Map}bidIsNotWinnableEverInSession(t){if(!this.J_(t))return;const i=[...this.Q_(),this.X_(t)],e=this.Y_(i);this.K_(t.settings.requestMetadata.data.cnxBidId,e,h.ProtoAuctionLossReasonEnum.TargetingMismatch)}newBidAdded(t,i){this.J_(t)&&(i.selectedBid?i.selectedBid!==t?this.Z_(t,i):this.tj(t):this.Z_(t,i))}winBid(t){if(!this.J_(t))return;const i=this.Q_(),e=this.Y_(i);this.G_.set(t,e)}onPostBid(t){return this.ij(t)}onImpression(t){return this.ij(t)}J_(t){return t.settings.requestMetadata.data.logAuctionInformation}tj(t){const{cnxBidId:i}=t.settings.requestMetadata.data,e=this.Q_(),s=this.Y_(e);this.K_(i,s,h.ProtoAuctionLossReasonEnum.CompetitorPriority)}ij(t){const i=this.ej(t);return this.sj(t),i}Z_(t,i){var e,s,n,r;const{cnxBidId:h}=t.settings.requestMetadata.data,a=this.Q_(),o=this.nj(t,i),c=this.Y_(a);Object(C.a)(o)?this.K_(h,c,o):this.rj("AdManager_AuctionInfoLogging_lossReason_cannot_be_found",t.settings.requestMetadata.data.cnxBidId,null===(r=null===(n=null===(s=null===(e=i.selectedBid)||void 0===e?void 0:e.settings)||void 0===s?void 0:s.requestMetadata)||void 0===n?void 0:n.data)||void 0===r?void 0:r.cnxBidId)}ej(t){if(this.G_.has(t))return this.G_.get(t);this.J_(t)&&this.rj("AdManager_AuctionInfoLogging_cannot_find_win_bid_snapshot",t.settings.requestMetadata.data.cnxBidId)}sj(t){this.G_.has(t)&&this.G_.delete(t)}nj(t,i){var e;return null===(e=i.unselectedBidList.find(i=>i.bid===t))||void 0===e?void 0:e.lossReason}getGeneralPostbidReason(t){switch(t){case on.c.ImaScriptFailure:case on.c.ImaObjectNotFound:case on.c.ImaManagerInit:case on.c.ImaInitSdkError:case on.c.AdxOverlayGptScriptLoad:case on.c.DisplayIntegratorIframeLoad:return h.ProtoAuctionPostbidReasonEnum.SDKFailure;case on.c.VastUnsupportedMedia:case on.c.CnxMediaSrcNotSupported:return h.ProtoAuctionPostbidReasonEnum.UnsupportedMedia;case on.c.DomainBlocked:return h.ProtoAuctionPostbidReasonEnum.TargetingMismatch;case on.c.AdaptorInitAdError:case on.c.AdaptorStartAdError:case on.c.WrapperInitAdError:case on.c.WrapperStartAdError:return h.ProtoAuctionPostbidReasonEnum.TargetingMismatch;default:return h.ProtoAuctionPostbidReasonEnum.CreativeError}}Q_(){return this.W_.getAllBids().map(t=>this.X_(t)).sort((t,i)=>i-t)}X_(t){switch(t.settings.adManagerLineItem.protoLineItem.creativeType){case h.ProtoCreativeTypeEnum.Rtb:case h.ProtoCreativeTypeEnum.Tam:case h.ProtoCreativeTypeEnum.TamDeal:return zs(t.settings.obfuscatedPrice);case h.ProtoCreativeTypeEnum.HeaderBidder:return t.settings.cpm;default:return t.settings.adManagerLineItem.protoLineItem.floorPrice||t.settings.adManagerLineItem.protoLineItem.customCpm}}Y_(t){const i=t[0]?Ws(t[0]):void 0,e=t[1]?Ws(t[1]):void 0;return i||this.rj("AdManager_AuctionInfoLogging_highestBidPrice_missing",`${i}`),{bidDensity:t.length,highestObfuscatedBidPrice:i,secondHighestObfuscatedBidPrice:e}}K_(t,i,e){this.co.trackAuctionInfoForBid({cnxBidId:t,auctionInformation:i,auctionLossReason:e})}rj(t,i="",e=""){Object(n.a)({message:t,level:h.ProtoLoggingLevelEnum.FATAL,throttle:5,callStack:i,exception:e})}}const Ca=0,Ta=5,Pa=10,Ma=-1,Ea=1,La=!1;class Ra{constructor(t){this.Jn=t,this.hj=!1,this.aj=!1,this.Vc=[],this.oj=null,this.cj=!1,this.tm=new yt,this.uj=new yt,this.lj=!1,this.dj=new Js,this.fj=new Eh,this.Jn.app.services.TrackingService.addPlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.setImpressionRevenueSubscriber(this),this.Jn.app.services.TrackingService.startBidRequests();const i=this.Jn.lineItemList.map(t=>new va(t)),e=new ja(this.Jn.lineItemList,this.Jn.app.config.explorationMode);this.pj=new wh,this.bj=new bh,this.vj=new mh,this.mj=new gh,this.ov=new xh(this.Jn.adContainerMap,this.Jn.app.services.ResizeObserver,this.Jn.app.services.ViewabilityService,F.e);const s=new Oa({globalDomUtilsService:this.Jn.app.services.GlobalDomUtilsService,recycleAdSlots:!0,slot:this.ov.getContainerMap().get(h.ProtoAdType.Video)});this.W_=new Qs,this.gj=new Ia(this.W_,this.Jn.app.services.TrackingService),this.yj=new ba({adBidPool:this.W_,locked:!0,yoScoreManager:e}),this.Dw=new Gs,this.Rw=new Ph(this.Jn.app.services.MacrosService,this.Jn.app.services.UserManagerService),this.wj=new lh({adBidPool:this.W_,adCallerYo:new da(e,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,adContainerMap:this.ov.getContainerMap(),adMacroReplacer:this.Rw,amazonSlotId:this.Jn.amazonTamSlotId,app:this.Jn.app,isOutstream:this.Jn.outstream,lineItemList:i,schainSettings:this.Jn.pbjsSchainSettings,skipAdSettings:this.Jn.skipPlayerSettings,trackingService:this.Jn.app.services.TrackingService,lineItemServices:{impressionCapsService:this.bj,lineItemServicesTimer:this.pj,requestCapsService:this.vj,timeBetweenRequestsService:this.mj},adRequestGatekeeper:this.Dw,platformCappedLineItemRepo:this.dj,adEnforcer:new Ih(this.Jn.app.config.isMobile,Object(j.t)(this.Jn.adContainerMap.get(h.ProtoAdType.Video)),this.Jn.disableScrollHijackEnforcement),pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,os:this.Jn.app.config.os.os,adSlotContainerRecycler:s}),this.xj=new ca({adBidPool:this.W_,adWinnerYo:new pa(e,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,desiredBitRateForWins:Ea,maxNumberOfWins:Ma,trackingService:this.Jn.app.services.TrackingService,impressionCapsService:this.bj,impressionCapsTimer:this.pj,platformCappedLineItemRepo:this.dj,adMacroReplacer:this.Rw,playerId:this.Jn.app.config.playerId}),this.Sj=new Ch({adBidPool:this.W_,adImpressionerYo:new fa(e,this.Jn.skipPlayerSettings),auctionInfoLogging:this.gj,impressionCapsService:this.bj,impressionCapsTimer:this.pj,requestCapsService:this.vj,playerSkippability:this.Jn.skipPlayerSettings.adSkippability,removeBidIfHigherYoScore:La,trackingService:this.Jn.app.services.TrackingService,adRequestGatekeeper:this.Dw,pauseAdWhenFinished:this.Jn.pauseAdWhenFinished,loopAdWhenFinished:this.Jn.loopAdWhenFinished,adMacroReplacer:this.Rw,explorationMode:this.Jn.app.config.explorationMode,playerId:this.Jn.app.config.playerId}),this.Vc.push(this.yj.onAuctionEnd.subscribe(()=>{this.hj=!0,this.Oj()}),this.ov.onContainerStateUpdate.subscribe(()=>{if(this.oj){const{width:t,height:i,viewability:e}=this.kj();this._j(e),this.oj.resizeAd(t,i,this.jj)}this.aj&&this.Aj(),this.hj&&this.Oj()}),this.Sj.onAdSelected.subscribe(t=>{this.oj=t,this.Ij(),t.setAdVolume(this.Cj.sound)}),this.Sj.onAdFinished.subscribe(t=>{this.Tj()}),this.W_.onBidReady.subscribe(t=>{this.lj&&(this.wj.stop(),this.aj=!1)}));const n=this.wj.onFirstAggregatedBatchFinished.subscribe(()=>{this.yj.unlock(),n.unsubscribe()})}get onVpaidEvent(){return this.tm.asObservable()}get onImpressionRevenueEvent(){return this.uj.asObservable()}setAdVolume(t){this.oj&&(this.Pj(t),this.oj.setAdVolume(t))}setAdViewMode(t){if(this.oj){this.jj=t;const{width:i,height:e}=this.kj();this.oj.resizeAd(i,e,t)}}stopAd(t){this.oj&&this.oj.stopAd(t)}pauseAd(t){this.oj&&this.oj.pauseAd(),t&&this.fj.pauseViaUserInteraction()}resumeAd(t){this.oj&&this.oj.resumeAd(),t&&this.fj.resumeViaUserInteraction()}skipAd(){this.oj&&(this.oj.setAdVolume(0),this.oj.skipAd())}getCurrentAdMetadata(){if(this.oj)return{advertiserLineItemId:this.oj.settings.adManagerLineItem.protoLineItem.advertiserLineItemId,publisherLineItemId:this.oj.settings.adManagerLineItem.protoLineItem.publisherLineItemId,adType:this.oj.settings.adManagerLineItem.protoLineItem.adType,duration:this.oj.getAdDuration(),adSkipMode:this.oj.settings.adManagerLineItem.protoLineItem.skipMode,moatTrackingEnabled:this.oj.settings.adManagerLineItem.protoLineItem.moatTrackingEnabled}}enableImpressions(t){this.disablePredict(),this.lj=!1,this.Mj(t),this.Cj=t,this.Ej||(this.Ej=this.Cj),this.vj.allowResetOnTime=!0,this.ov.forceTriggerUpdateState(),this.Lj(t),this.aj=!0,this.Aj(),t.adOpportunity&&!t.adOpportunity.startedAuctionWithTimeout?(t.adOpportunity.startAuctionWithTimeout(),this.yj.startAuction(Ca)):this.yj.startAuction(0)}disableImpressions(){this.hj&&(this.yj.cancel(),this.Sj.stop(),this.wj.stop(),this.hj=!1,this.aj=!1,this.oj&&!this.cj&&this.Jn.app.config.isInApp&&this.oj.stopAd("inApp_disable"))}enablePredict(t,i){if(!(this.W_.bidsReady.length>0)){switch(this.Cj=null,this.lj=!0,this.Ej=t,this.Ej.predictType=i,i){case Aa.Prefetch:this.vj.allowResetOnTime=!1;break;case Aa.Default:this.vj.allowResetOnTime=!0}this.aj=!0,this.Aj()}}disablePredict(){this.lj&&(this.wj.stop(),this.aj=!1)}setPlatformCappedLineItemIdList(t){this.dj.addPlatformCappedLineItemIdList(t)}notifyImpressionRevenue(t){this.uj.next(t)}getAdMediaSize(){if(this.oj){const t=this.oj.getAdMediaSize().width,i=this.oj.getAdMediaSize().height,{widthRatio:e,heightRatio:s}=Object(bt.b)(t,i);return{width:t,height:i,widthRatio:e,heightRatio:s,adType:this.oj.settings.adManagerLineItem.protoLineItem.adType}}}destroy(){this.disableImpressions(),St(this.Vc),this.wj.destroy(),this.xj.destroy(),this.Sj.destroy(),this.pj.destroy(),this.oj&&(this.Rj(),this.oj.stopAd("adManagerDestroy"),this.Tj()),this.Jn.app.services.TrackingService.removePlatformCappedLineItemSubscriber(this),this.Jn.app.services.TrackingService.unsubscribeToImpressionRevenue(this)}isLoadingAds(){return!!this.oj||!!this.xj.isLoadingBids()}Oj(){(this.Cj||this.Ej)&&this.Cj&&this.Sj.start(this.Bj(this.Cj))}Aj(){this.wj.call(this.Dj()),this.xj.win(this.Fj())}Dj(){return{maxParallelCalls:Ta,stateSettings:{currentState:this.Bj(this.Cj),predictedState:this.$j(this.Ej)}}}Fj(){return{desiredBitRate:Ea,maxParallelWins:Pa,vastViewMode:this.Cj?this.Cj.vastViewMode:this.Ej.vastViewMode,stateSettings:{currentState:this.Bj(this.Cj),predictedState:this.$j(this.Ej)}}}$j(t){if(!t)return;let i;return t.predictType===Aa.Prefetch?(i=new Map,this.ov.getContainerStateMap().forEach((t,e)=>{i.set(e,Object.assign(Object.assign({},t),{viewability:!0}))})):i=this.ov.getContainerStateMap(),{clickToPlay:t.clickToPlay,media:t.mediaMetada,sound:!!t.sound,soundValue:t.sound,adContainerState:i,adBreakState:t.adBreakState,adOpportunity:t.adOpportunity}}Bj(t){if(t)return{clickToPlay:t.clickToPlay,media:t.mediaMetada,sound:!!t.sound,soundValue:t.sound,adContainerState:this.ov.getContainerStateMap(),adBreakState:t.adBreakState,adOpportunity:t.adOpportunity}}Ij(){var t;this.tm.next({type:w.b.AdLoaded,payload:null===(t=this.oj.settings.adLoadedPayload)||void 0===t?void 0:t.payload}),this.Uj=this.oj.onVpaidEvent.subscribe(t=>{if(t.type===w.b.AdImpression){this.cj=!0;const{viewability:t}=this.kj();this._j(t)}this.tm.next(t)})}kj(){return this.ov.getContainerStateMap().get(this.oj.settings.adManagerLineItem.protoLineItem.adType)}Rj(){this.Uj&&(this.Uj.unsubscribe(),this.Uj=null)}Tj(){this.cj=!1,this.fj.onAdRemoved(),this.oj=null,this.Rj()}_j(t){this.fj.checkPauseAd(this.oj,t)}Lj(t){const i=[this.bj,this.vj];t.newContent&&i.forEach(t=>{t.resetCapsBasedOnExternalEvent(h.ProtoResetCapTypeEnum.ContentCapping)})}Pj(t){const i=this.oj.getAdVolume();let e=null;0===i&&t>0?e=this.oj.settings.trackers.adUnmute:i>0&&0===t&&(e=this.oj.settings.trackers.adMute),e&&Zs.track(e,this.Rw,this.oj.settings.adManagerLineItem.protoLineItem,this.Bj(this.Cj||this.Ej))}Mj(t){const{playerId:i}=this.Jn.app.config,{adOpportunity:e}=t,{adBreakType:s}=t.adBreakState;e&&s===h.ProtoAdBreakTypeEnum.PreRoll&&ah.initialize(i),s!==h.ProtoAdBreakTypeEnum.PreRoll&&ah.log(i)}}class Ba{constructor(){this.Vj=Object($t.c)(),this.Nj=!1}get id(){return this.Vj}get startedAuctionWithTimeout(){return this.Nj}startAuctionWithTimeout(){this.Nj=!0}}const Da={[h.ProtoAdSlotsEnum.PreRoll]:h.ProtoAdBreakTypeEnum.PreRoll,[h.ProtoAdSlotsEnum.MidRoll]:h.ProtoAdBreakTypeEnum.MidRoll,[h.ProtoAdSlotsEnum.PostRoll]:h.ProtoAdBreakTypeEnum.PostRoll};class Fa extends o.a{constructor(t,i,e,s,n,r=!1,a,o,c,u,l,d,f,p,b){super(),this.mediator=t,this.Hj=i,this.qj=e,this.Yk=s,this.Kb=n,this.zj=r,this.Yb=o,this.Ax=c,this.Wj=l,this.Ng=d,this.Gj=f,this.hl=p,this.Vg=b,this.Vc=[],this.Jj=!1,this.Qj=!1,this.Bw=new Map,this.Xj=!1;let v=h.ProtoAdBreakTypeEnum.MidRoll;this.hl.forEach(t=>{t.types.some(t=>t===h.ProtoAdBreakTypeEnum.PreRoll)&&(v=h.ProtoAdBreakTypeEnum.PreRoll)});const m=this.Yj(this.Yb.getMaxAdSlotDuration(),v);this.Cj={mediaMetada:{},clickToPlay:!1,adOpportunity:new Ba,newContent:!1,sound:0,vastViewMode:w.a.Normal,adBreakState:m}}get adInWin(){return this.hv.isLoadingAds()}enableAds(){this.Jj=!0,this.Kj(),this.mediator.publish(this,E.AdsEnabled)}disableAds(t){this.Jj=!1,this.hv&&(this.hv.disableImpressions(),this.Xj||t!==ft.TimeoutBetweenAds||this.hv.enablePredict(this.Cj,Aa.Default))}updateFilterConfig(t){this.Cj.mediaMetada.mediaId=t.mediaId,this.Cj.mediaMetada.mediaLanguage=t.mediaLanguage,this.Cj.mediaMetada.mediaKeywords=t.mediaKeywords;const i=Object.assign(this.Cj.mediaMetada,t);this.Kj({mediaMetada:i})}userInteraction(t){this.Kj({clickToPlay:!0})}newAdOpportunity(){this.Kj({adOpportunity:this.Xj?this.Cj.adOpportunity:new Ba}),this.Zj()}initAd(t,i,e,s,n,r){r.forEach(t=>{this.Bw.set(t.type,t.container),this.Bw.get(h.ProtoAdType.Overlay)||this.Bw.set(h.ProtoAdType.Overlay,this.Bw.get(h.ProtoAdType.Video))}),this.av(),this.Qj=!0,this.Kj({sound:n})}setAdVolume(t){var i;null===(i=this.hv)||void 0===i||i.setAdVolume(t),this.Kj({sound:t})}resizeAd(t,i,e){var s;this.tA!==e&&(this.setVastViewMode(e),null===(s=this.hv)||void 0===s||s.setAdViewMode(e))}stopAd(t){var i;null===(i=this.hv)||void 0===i||i.stopAd(t)}pauseAd(t){var i;null===(i=this.hv)||void 0===i||i.pauseAd(t)}resumeAd(t){var i;null===(i=this.hv)||void 0===i||i.resumeAd(t)}skipAd(){var t;null===(t=this.hv)||void 0===t||t.skipAd()}getAdMediaSize(){var t;return null===(t=this.hv)||void 0===t?void 0:t.getAdMediaSize()}getCurrentAdClickTrackingProperties(){var t;const{publisherLineItemId:i,advertiserLineItemId:e}=null===(t=this.hv)||void 0===t?void 0:t.getCurrentAdMetadata();return{publisherLineItemId:i,advertiserLineItemId:e}}getAdDuration(){return this.hv.getCurrentAdMetadata().duration}getCurrentAdType(){return this.hv.getCurrentAdMetadata().adType}getLastAdSlot(t){const i=this.Bw.get(t);return{height:i.clientHeight,width:i.clientWidth}}updatePodRemainingTime(t){if(t<=0)return;const i=this.Cj.adBreakState;Math.round(t/$.f)>i.remainingAdDuration||this.Kj({adBreakState:this.Yj(t,i.adBreakType)})}onAdStateChange(t,i){const e=Da[t];this.Kj({adBreakState:this.Yj(i,e)})}onContentChange(){this.Kj({newContent:!0})}setVastViewMode(t){this.tA=t,this.iA({vastViewMode:t})}destroy(){St(this.Vc)}Kj(t){this.iA(t),this.Jj&&this.Qj&&(this.hv.enableImpressions(this.Cj),this.eA())}iA(t){Object.assign(this.Cj,t),this.Cj.adBreakState=this.Yj(this.Cj.adBreakState.remainingAdDuration,this.Cj.adBreakState.adBreakType)}eA(){this.iA({clickToPlay:!1,newContent:!1})}Yj(t,i){return{isAdPodBreak:this.Yb.isCurrentBreakInPod(),adPodSlotIndex:this.Yb.isCurrentBreakInPod()?this.Yb.getNextSlotIndex():0,maxAdDuration:Math.round(this.Yb.getMaxAdSlotDuration()/$.f||Ds),remainingAdDuration:Math.round(t/$.f),sessionMaxAdDuration:Math.round(this.Yb.getMaxAdSlotPossibleDuration()/$.f),adBreakType:i}}av(){this.hv=new Ra({adBreakHelper:this.Yb,adContainerMap:this.Bw,amazonTamSlotId:this.Ax,app:this.Kb,lineItemList:this.Hj.lineItems,outstream:this.zj,pbjsSchainSettings:this.qj,prerollTimeMs:this.Wj,skipPlayerSettings:this.Yk,disableScrollHijackEnforcement:!this.Hj.disableScrollHijackEnforcement,pauseAdWhenFinished:this.Ng,loopAdWhenFinished:this.Vg}),this.Vc.push(this.hv.onVpaidEvent.subscribe(t=>{switch(t.type){case w.b.AdLoaded:this.sA(t);break;case w.b.AdImpression:this.nA(t);break;case w.b.AdVideoStart:case w.b.AdError:this.mediator.publish(this,t.type,{payload:t.payload});break;default:{const i={payload:{}};this.mediator.publish(this,t.type,i)}}})),this.hv.onImpressionRevenueEvent.subscribe(t=>{this.mediator.publish(this,T.b.ImpressionPrice,{payload:t})}),this.Gj===h.ProtoAdPlaybackMode.ScrollToPlay&&this.rA()}rA(){this.Xj=!0,this.hv.enablePredict(this.Cj,Aa.Prefetch)}Zj(){this.Xj=!1}sA(t){const i={payload:{adSkipMode:t.payload.adSkipMode,adLoadedData:{skipOffset:t.payload.adLoadedData.skipOffset}}};this.mediator.publish(this,t.type,i)}nA(t){var i,e;const{adId:s,adVideoUrl:n,creativeId:r,name:h,length:a,imaMetadata:o,moatTrackingEnabled:c}=t.payload.adSourceData,u=this.hv.getCurrentAdMetadata(),l={payload:{adSkipMode:t.payload.adSkipMode,adSourceData:{moatTrackingEnabled:c,adId:s,length:a,imaMetadata:o,adVideoUrl:n,creativeId:r,name:h},clickThroughUrl:t.payload.clickThroughUrl,customAdData:{ADVERTISER:null===(i=t.payload.customAdData)||void 0===i?void 0:i.ADVERTISER,CAMPAIGN_ID:null===(e=t.payload.customAdData)||void 0===e?void 0:e.CAMPAIGN_ID,CREATIVE_ID:t.payload.customAdData.CREATIVE_ID},adDuration:t.payload.adSourceData.length,selectedAdSlot:this.Bw.get(u.adType)}};this.mediator.publish(this,t.type,l)}}const $a={OrientationPortrait:"cnx-in-ps-portrait",OrientationLandscape:"cnx-in-ps-landscape"},Ua={Container:"cnx-playspace-container",Content:"cnx-playspace-content",Footer:"cnx-playspace-footer",Slider:"cnx-playspace-slider",Slide:"cnx-playspace-slide-container",Overlay:"cnx-ui-click-to-play-overlay",ImageWrapper:"cnx-ui-ps-image-wrapper",ImageBackground:"cnx-ui-ps-image-background",MediaLogo:"cnx-is-media-logo"},Va={VideoSizeSlot:"cnx-ad-video-size-slot"},Na={Main:"cnx-top-title",LogoContainer:"cnx-top-title-logo-container",Logo:"cnx-top-title-logo",LogoPortrait:"cnx-top-title-logo-portrait",LogoLandscape:"cnx-top-title-logo-landscape",LogoAnimation:"cnx-top-title-logo-animation",TitlesContainer:"cnx-top-title-text-container",TopStoryTitle:"cnx-top-title-story-text",TopSlideTitle:"cnx-top-title-slide-text",TextPlaceholder:"cnx-top-title-highlight-text-placeholder",Text:"cnx-top-title-highlight-text",TextOuterContainer:"cnx-top-title-highlight-text-outer-container",TextInnerContainer:"cnx-top-title-highlight-text-inner-container",SlideIn:"cnx-top-title-slide-in",SlideOut:"cnx-top-title-slide-out",SlideDown:"cnx-top-title-slide-down",SlideInitial:"cnx-top-title-slide-initial"};class Ha extends Cs{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}getNewAdManager(){const t={adSkippability:this.lh.adSkippability,skipAdAfter:this.lh.skipAdAfter,adsMustBeSkippableIfLongerThan:this.lh.adsMustBeSkippableIfLongerThan};return new Fa(this,this.lh.lineItemSettings,this.lh.supplyChainSettings,t,this.Kb,!1,this.lh.adSkippability,this.Yb,this.lh.amazonTamSlotId,this.lh.global,this.lh.preRollBreak,this.lh.pauseAdWhenFinished,this.lh.adPlaybackMode,this.lh.adBreaks,this.lh.loopAdWhenFinished)}av(t,i,e){this.hv.initAd(t,i,this.rv,1,e,[{container:this.ov,width:this.ov.offsetWidth,height:this.ov.offsetHeight,type:h.ProtoAdType.Overlay},{container:this.hA,width:this.hA.offsetWidth,height:this.hA.offsetHeight,type:h.ProtoAdType.Video}])}Ov(){this.uv=new ws(this,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ViewabilityService,this.Kb.services.InteractionService,this.Qb,(new Os).template),this.uv.hide()}aA(){this.hA=this.xv(Va.VideoSizeSlot),this.wv(this.hA),this.Zb.push(this.hA)}Sv(){super.Sv(),this.aA()}fv(t){super.fv(t),t===this.hA&&Object(j.a)(this.Qb,d.g.AdFullSize)}mv(){super.mv(),this.subscribe(_[_.SkipAd],this.uv,()=>this.oA())}oA(){this.skipAd(),this.userInteraction(!0)}updateContinueReadingCard(){const t=this.hv.getAdMediaSize();Object(C.a)(t)&&(this._v(this.hv.getAdMediaSize())?this.uv.showContinueReadingCard(this.ov):this.uv.hideContinueReadingCard(this.ov))}}const qa={ProgressBarItemClicked:"progressBarItemClicked",CallToAction:"callToAction",CloseButtonClicked:"closeButtonClicked",GeneralClickInteraction:"generalClickInteraction"},za={ChangeSlide:"changeSlide",ContentStart:"contentStart",ContentComplete:"contentComplete",LayoutChanged:"layoutChanged"},Wa=Object.assign(Object.assign({},c.a),{ContentHandlerReady:"contentHandlerReady",NewStory:"newStory",ContentStart:"ContentStart",ContentEnd:"ContentEnd"}),Ga={SlideTransitionStart:"slideTransitionStart",SlideChanged:"slideChanged",SlideTransitionEnd:"slideTransitionEnd",SlideTimeUpdate:"slideTimeUpdate",SlideCycleEnd:"slideCycleEnd"},Ja=Object.assign(Object.assign({},za),qa),Qa=0,Xa=2,Ya=100,Ka=72;class Za{constructor(t,i=Qa){this.cA=t,this.setCurrentSlide(i)}uA(t=this.cA.indexOf(this.lA)){return Dt(this.cA,t)}get currentSlide(){return this.lA}getCurrentThumbnailUrlParams(t,i){return this.lA.media.getThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.lA.metadata}setCurrentSlide(t){this.lA=this.cA[t]}get currentSlideIndex(){return this.uA().currentIndex}get nextSlideIndex(){return this.uA().nextIndex}get prevSlideIndex(){return this.uA().prevIndex}get firstSlideIndex(){return this.uA().firstIndex}get lastSlideIndex(){return this.uA().lastIndex}get slides(){return this.cA}get nextSlide(){return this.slides[this.nextSlideIndex]}get prevSlide(){return this.slides[this.prevSlideIndex]}getAdjacentSlides(t=this.uA().currentIndex){const i=[];for(let e=0,s=t,n=t;e<Xa;e++)s=this.uA(s).nextIndex,n=this.uA(n).prevIndex,i.push(this.cA[n],this.cA[s]);return Object(l.n)(i)}}var to;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(to||(to={}));class io extends o.a{constructor(t,i){super(),this.mediator=t,this.dA=i,this.inTransition=!1,this.fA=0,this.pA=null,this.bA=!1,this.vA=400,this.mA=!0,this.gA=()=>{clearTimeout(this.pA),this.pA=null,this.bA=!1,this.yA(),this.fA=this.wA(this.xA),this.mediator.publish(this,Ga.SlideTransitionEnd),this.SA()},this.OA=t=>{t.stopPropagation(),t.target.parentElement===this.dA&&this.kA()&&(this.pA=setTimeout(()=>{this.bA&&this._A()},this.vA))},this.jA=t=>{t.stopPropagation(),t.target.parentElement===this.dA&&this.inTransition&&this.bA&&this.kA()&&this._A()},this.AA=Object(l.c)(this.dA.childNodes),this.dA.addEventListener("transitionstart",this.OA),this.dA.addEventListener("transitionend",this.jA)}destroy(){clearTimeout(this.pA),this.pA=null,this.dA.removeEventListener("transitionend",this.jA),this.dA.removeEventListener("transitionstart",this.OA)}setCurrentSlide(t,i,e=!0){this.xA=t,this.mA||(e=!1),e&&!this.IA(this.xA)&&this.CA()&&this.mA?this.inTransition||(this.fA<this.wA(this.xA)?this.TA(i):this.TA(to.Left)):this.PA()}offsetSlides(t,i){this.inTransition||(Object(j.a)(i,d.r.NextSlide),this.yA(),this.MA(t))}removeNextClass(t){t.forEach(t=>{Object(j.L)(t,d.r.NextSlide)})}cleanLastSlide(t,i){Object(j.N)(t,"transform"),Object(j.L)(i,d.r.NextSlide)}setAnimationAllowed(t){this.mA=t}MA(t){Object(j.Q)(this.EA(),{transform:`translate(${t}px)`})}PA(){Object(j.L)(this.EA(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),this.LA(this.wA(this.xA)),Object(j.a)(this.xA,d.r.CurrentSlide),this.gA()}TA(t){this.LA(this.wA(this.xA)),this.RA(),Object(j.a)(this.xA,d.r.NextSlide),t===to.Right?(Object(j.a)(this.xA,d.r.CurrentSlide),Object(j.a)(this.EA(),d.r.SlideLeft)):t===to.Left&&(Object(j.a)(this.xA,d.r.CurrentSlide),Object(j.a)(this.EA(),d.r.SlideRight)),Object(j.N)(this.EA(),"transform")}IA(t){return t===this.EA()}SA(){this.mediator.publish(this,Ga.SlideChanged)}LA(t){this.bA=!0,this.mediator.publish(this,Ga.SlideTransitionStart,{payload:{nextIndex:t}})}CA(){return Object(C.a)(this.EA())}wA(t){return Object(j.k)(t,this.dA)}EA(){return this.AA[this.fA]}RA(){this.BA(),this.DA()}yA(){this.FA(),this.$A()}$A(){Object(j.a)(this.dA,d.h.NoTransition)}BA(){Object(j.L)(this.dA,d.h.NoTransition)}FA(){this.inTransition=!1}DA(){this.inTransition=!0}UA(){Object(j.L)(this.EA(),d.r.CurrentSlide,d.r.SlideLeft,d.r.SlideRight),Object(j.O)(this.xA,d.r.NextSlide,d.r.CurrentSlide)}_A(){this.UA(),this.gA()}kA(){return Object(j.u)(this.EA(),d.r.SlideLeft)||Object(j.u)(this.EA(),d.r.SlideRight)}}const eo=1;class so extends o.a{constructor(t,i,e,s,n,r){super(),this.mediator=t,this.Ig=i,this.VA=e,this.NA=s,this.HA=n,this.qA=r,this.zA=!1,this.WA=[],this.GA=!1,this.JA=()=>{this.goToNextSlide()},this.QA=()=>{this.mediator.publish(this,Ga.SlideTimeUpdate,{payload:{elapsedTime:this.Tw.timeElapsed,duration:this.XA.currentSlide.media.duration}})},this.YA=this.Ig.createElementByString(`<cnx class="${Ua.Slider}"></cnx>`),this.NA.appendChild(this.YA),this.KA()}ZA(){this.VA.on(t=>{this.GA=t,this.tI.setAnimationAllowed(t)})}iI(t=to.Right){this.tI.setCurrentSlide(this.XA.currentSlide.$container,t)}eI(){let t;this.XA.currentSlide.load(),(t=this.qA?[...this.XA.slides]:[...this.XA.getAdjacentSlides()]).forEach(t=>t.load())}sI(){this.tI=new io(this,this.YA),this.subscribe(Ga.SlideTransitionStart,this.tI,({payload:{nextIndex:t}})=>{this.GA&&this.Tw.disable(),this.mediator.publish(this,Ga.SlideTransitionStart,{payload:{nextSlide:this.XA.slides[t]}})}),this.subscribe(Ga.SlideChanged,this.tI,()=>{this.Tw.reset(this.XA.currentSlide.media.duration),this.XA.slides.forEach(t=>t.media.reset());const t={payload:{index:this.XA.currentSlideIndex}};this.mediator.publish(this,Ga.SlideChanged,t),this.zA?this.XA.currentSlide.media.play():this.pause()}),this.subscribe(Ga.SlideTransitionEnd,this.tI,()=>{this.mediator.publish(this,Ga.SlideTransitionEnd)})}KA(){this.Tw=new xt(0,Ya),this.Tw.onTimeElapsed.subscribe(this.JA),this.Tw.onTimeUpdate.subscribe(this.QA)}nI(t){this.WA=t;const i=this.rI(t),e=t.map(t=>{const e=this.HA.getSlide(t,this,i);return this.subscribe(qa.CallToAction,e,()=>{this.mediator.publish(this,qa.CallToAction)}),this.relay(qa.GeneralClickInteraction,e,this,this.mediator),this.subscribe(_[_.Next],e,()=>{this.mediator.publish(this,_[_.Next])}),e});this.XA=new Za(e),this.Tw.reset(this.XA.currentSlide.media.duration),this.YA.innerHTML="",this.XA.slides.forEach(t=>{Object(j.d)(t.$container,this.YA),this.relay(Et.Change,t.media,this,this.mediator)})}rI(t){const i=t.map(t=>t.slideDuration).reduce((t,i)=>t+i,0);return Object(C.e)(i)?Math.ceil(i/$.g):eo}hI(){const t=this.XA.getAdjacentSlides().map(t=>t.$container);this.tI.removeNextClass(t)}aI(t){return(t>0?this.XA.prevSlide:this.XA.nextSlide).$container}getNextSlide(){return this.XA.nextSlide}setCurrentSlide(t,i){this.tI.inTransition||(this.XA.currentSlide&&this.XA.currentSlide.media.pause(),this.XA.setCurrentSlide(t),this.eI(),this.iI(i))}getCurrentSlide(){if(this.XA)return this.XA.currentSlide}getCurrentThumbnailUrlParams(t,i){if(this.XA)return this.XA.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){if(this.XA)return this.XA.getCurrentMetadata()}goToNextSlide(){if(this.XA.currentSlideIndex===this.XA.lastSlideIndex)return this.tI.cleanLastSlide(this.getCurrentSlide().$container,this.getNextSlide().$container),void this.mediator.publish(this,Ga.SlideCycleEnd);this.setCurrentSlide(this.XA.nextSlideIndex,to.Right)}goToPrevSlide(){this.setCurrentSlide(this.XA.prevSlideIndex,to.Left)}resetSlider(){this.setCurrentSlide(this.XA.firstSlideIndex)}setVolume(t){this.XA&&this.XA.slides.forEach(i=>{i.media.type===h.ProtoMediaTypeEnum.Video&&(i.media.volume=t)})}play(){this.zA=!0,this.Tw.start(),this.XA.currentSlide.media.play()}pause(){this.zA=!1,this.Tw.stop(),this.XA.currentSlide.media.pause()}stop(){this.XA.setCurrentSlide(this.XA.firstSlideIndex),this.eI(),this.pause(),this.tI.setCurrentSlide(this.XA.currentSlide.$container,null,!1)}get remainingTime(){return this.Tw.timeRemaining}setQuality(t){this.XA.slides.forEach(i=>{if(i.media.type===h.ProtoMediaTypeEnum.Video){const e={height:i.media.getClosestSourceQuality(t.height).videoHeight,quality:t.quality};i.media.setQuality(e)}})}getQuality(){const{currentSlide:t}=this.XA;if(t.media.type===h.ProtoMediaTypeEnum.Image)return;const{getClosestSourceQuality:i,currentQuality:e}=t.media;return i(e.height).videoHeight}start(t){try{this.nI(t),this.sI(),this.ZA()}catch(t){Object(n.a)({message:"SlidesManager_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}offsetSlides(t){if(this.hI(),0===t)return;const i=this.aI(t);this.tI.offsetSlides(t,i)}destroy(){this.Tw.disable(),this.tI&&this.tI.destroy()}get isPlaying(){return this.zA}onPlayerContainerResize(){Object(C.a)(this.XA)&&Object(l.h)(this.XA.slides)&&this.XA.slides.forEach(t=>t.media.onSlideResizeCallback())}get slides(){return Object(C.a)(this.XA)&&Object(l.h)(this.XA.slides)?this.XA.slides:[]}get currentSlideIndex(){return Object(C.a)(this.XA)?this.XA.currentSlideIndex:0}updateCapabilityMetadata(t,i){if(!Object(C.a)(this.XA)||!Object(l.h)(this.XA.slides))return;const e=this.XA.slides[t];e&&e.updateCapabilityMetadata(i)}get slidesMetadata(){return this.WA}}var no=e(9);class ro{constructor(t){this.oI=t}get template(){return`\n        <cnx class="cnx-ui cnx-ui-ps">\n            <cnx class="cnx-ui-click-to-play-overlay"></cnx>\n            <cnx class="${Ua.Content}">\n                [[${Xt.ClickToPlayButton}]]\n                <cnx class="cnx-ui-ratio-container">\n                    <cnx class="cnx-ui-ps-head">\n                    <cnx class="cnx-ui-ps-nav">\n                        ${this.cI()}\n                    </cnx>\n                    <cnx class="cnx-ui-ps-subhead cnx-ui-ps-side-mg">\n                        <cnx class="cnx-ui-ps-branding">\n                            [[${Xt.TopTitle}]]\n                        </cnx>\n                        <cnx class="cnx-ui-ps-btns">\n                            <cnx class="cnx-ui-btn ${d.g.ContextController}">[[${Xt.MoreButton}]]</cnx>\n                            <cnx class="cnx-ui-btn cnx-close-button">[[${Xt.CloseButton}]]</cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-controls--wrapper cnx-ui-ps-side-mg">\n                    <cnx class="cnx-ui-ps-controls">\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${Xt.PreviousButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${Xt.PlayButton}]]</cnx>\n                        <cnx class="cnx-ui-btn cnx-ui-ps-nav-btn">[[${Xt.UpNextButton}]]</cnx>\n                        <cnx class="cnx-ui-btn">[[${Xt.VolumeButton}]]</cnx>\n                    </cnx>\n                </cnx>\n                <cnx class="cnx-ui-ps-footer cnx-ui-ps-side-mg"></cnx>\n                [[${Xt.PlayspaceSettingsMenu}]]\n                </cnx>\n            </cnx>\n            <cnx class="${Ua.Footer}">\n                <cnx class="cnx-ui-ps-content cnx-ui-ps-side-mg">\n                    ${this.uI()}\n                </cnx>\n            </cnx>\n            [[${Xt.Loader}]]\n        </cnx>\n        `.trim()}cI(){return this.oI.disableStoryProgressBarRendering?"":`[[${Xt.PlayspaceProgressBar}]]`}uI(){return this.oI.disableTitleRendering?"":`[[${Xt.SlideTitle}]]`}}class ho extends Li{constructor(){super(...arguments),this.lI=100,this.eventList=[ii.a[ii.a.Scroll]],this.isEndState=!1,this.dI=()=>{this.mediator.publish(this,qa.ProgressBarItemClicked,{payload:this.ef})},this.fI=t=>{t.stopPropagation()}}pI(){const t=this.Os.getComputedTranslateX(this.Xf),i=this.zf;return Object(bt.g)(0,i,0,100,t)}bI(t){Object(j.Q)(this.Xf,{transition:`transform ${t}ms linear`})}vI(){Object(j.Q)(this.Xf,{transition:"none"})}startProgress(t){this.bI(t),this.setProgress(this.lI)}pauseProgress(){this.setProgress(this.pI()),this.vI()}forceEndState(){this.vI(),super.forceEndState(),this.isEndState=!0}forceStartState(){this.vI(),super.forceStartState(),this.isEndState=!1}initComponent(){super.initComponent();const t={click:this.dI,interactionstart:this.fI};this.if.register(this.ef,this,this.if,t),this.Yn&&(this.subscribe(ii.a[ii.a.Click],this.if,()=>{this.dI()}),this.relay(ii.a[ii.a.Scroll],this.if,this,this.mediator))}destroy(){super.destroy()}onResize(t,i){this.setProgress(this.pI()),this.vI(),i&&(this.setProgress(this.lI),this.bI(t))}}var ao=e(115),oo=e.n(ao);class co extends Zt{constructor(){super(...arguments),this.eventList=[qa.ProgressBarItemClicked,ii.a[ii.a.Scroll]],this.cA=[],this.mI=({payload:t})=>{const i=Object(j.k)(t,this.ef);this.mediator.publish(this,qa.ProgressBarItemClicked,{payload:i})}}gI(t){const i=this.cA[t];i.forceStartState(),i.startProgress(this.yt)}startProgress(){if(Object(C.a)(this.fA)){for(let t=0;t<this.cA.length;t++)t<this.fA?this.cA[t].forceEndState():(t!==this.fA||this.cA[t].isEndState)&&this.cA[t].forceStartState();this.cA[this.fA].startProgress(this.yt)}}pauseProgress(){this.cA[this.fA]&&this.cA[this.fA].pauseProgress()}resetProgress(){Object(C.a)(this.fA)&&this.cA.forEach(t=>t.forceStartState())}setSlides(t){if(!t)throw new Error("PlayspaceProgressBar: no slides provided");for(let i=0;i<t;i++){const t=new ho(this,this.Os,this.if,oo.a,this.Yn);this.subscribe(qa.ProgressBarItemClicked,t,this.mI),this.relay(ii.a[ii.a.Scroll],t,this,this.mediator),this.cA.push(t),t.initComponent(),this.ef.appendChild(t.getContainer())}}setDuration(t){this.yt=t}setCurrentIndex(t){t===this.fA&&this.gI(t),this.fA=t}initComponent(){}destroy(){super.destroy(),this.cA.forEach(t=>t.destroy())}resizeProgressBar(t,i){this.cA.forEach((e,s)=>{s<this.fA&&e.forceEndState(),s===this.fA&&e.onResize(t,i)})}}var uo=e(116),lo=e.n(uo),fo=e(64),po=e.n(fo);class bo extends ei{constructor(t,i,e,s,n){super(t,i,e,bo.getTemplate(n),s),this.mediator=t,this.xp=[],this.Tp=!1,this.type=Ui.SubmenuMenuItem,this.eventList=[],this.isOpen=!1,this.event=n.event,this.eventList.push(this.event),this.yI=new Ji(this,i,e,s,{activeEvent:n.event,name:n.name.toUpperCase(),icon:""}),this.$menuContainer=this.Os.createElementByString(`<cnx class="${d.k.Items}"></cnx>`),this.wI=this.ef.getElementsByClassName(d.k.ItemExtra)[0]}static getTemplate(t){const i=`<cnx class="${d.k.ItemIcon}">${t.icon}</cnx>`;return`<cnx class="${d.k.SubmenuOption}">\n                    ${t.icon?i:""}\n                    <cnx class="${d.k.ItemTitle}">${t.name}</cnx>\n                    <cnx class="${d.k.ItemExtra} ${d.f.AccentColor}">${t.label?t.label:""}${po.a}</cnx>\n                </cnx>`}onClickHandler(t){this.mediator.publish(this,this.event)}handleItemsEvents(t){this.mediator.publish(this,this.event,{payload:t===this.event?void 0:t})}buildContextMenu(t){this.$menuContainer.innerHTML="",this.xp.forEach(t=>this.unsubscribeAll(t)),this.xp=[this.yI,...t],this.xp.forEach(t=>{t.eventList.forEach(i=>this.subscribe(i,t,()=>this.handleItemsEvents(i))),t.initComponent(),this.$menuContainer.appendChild(t.getContainer())})}changeLabel(t){this.wI.innerHTML=`${t}${po.a}`}get isActive(){return this.Tp}set isActive(t){this.Tp=t,this.Tp?Object(j.a)(this.ef,d.h.Active):Object(j.L)(this.ef,d.h.Active)}}class vo extends bo{constructor(t,i,e,s,n){super(t,i,e,s,{event:_[_.Quality],name:n,icon:xi.a,options:[]}),this.mediator=t,this.Wp={height:360,quality:Ct.Auto},this.Gp=!0}handleItemsEvents(t){if(t===_[_.Quality])return;this.Gp=t===Ct[Ct.Auto];const i={height:this.Gp?this.Wp.height:parseInt(t,10),quality:this.Gp?Ct.Auto:Ct.Strict};this.mediator.publish(this,this.event,{payload:i})}xI(){let t=null;if(this.Gp)t=Ct[Ct.Auto];else{const i=this.SI.find(t=>t.event===this.Wp.height.toString());i&&(t=i.name)}t&&this.changeLabel(t)}updateQuality(t,i=!1){Object(l.h)(this.Jp)&&(this.Gp=t.quality===Ct.Auto,this.Wp.quality=t.quality,this.Wp.height=Object(bt.c)(t.height,this.Jp.map(t=>t.videoHeight)),this.xI(),ge(this.SI,this.Wp,this.Gp),this.isActive=i)}updateAvailableQualities(t){this.SI=[],this.Jp=t,this.SI=this.Jp.map(t=>new Ji(this,this.Os,this.if,this.Yn,{name:`${t.videoHeight}p`,activeEvent:t.videoHeight.toString(),label:t.isHD?"HD":void 0})),this.SI.push(new Ji(this,this.Os,this.if,this.Yn,{name:Ct[Ct.Auto],activeEvent:Ct[Ct.Auto]})),this.xI(),ge(this.SI,this.Wp,this.Gp),this.buildContextMenu(this.SI)}}var mo=e(65),go=e.n(mo),yo=e(117),wo=e.n(yo);const xo={ContextAbout:"About Connatix",ContextQuality:"Video Settings",ContextExpand:"Full Screen"};class So extends Gi{constructor(t,i,e,s,n,r,h,a){super(t,i,e,s,n,r,h,a),this.alignMiddle=!1,this.alignTop=!1,this.forceRight=!1}initComponent(){this.OI=new Ji(this,this.Os,this.if,this.Yn,{activeEvent:_[_.Expand],eventList:[_[_.Expand],_[_.Collapse]],icon:go.a,name:xo.ContextExpand}),this.kI=new vo(this,this.Os,this.if,this.Yn,xo.ContextQuality),this.buildContextMenu([this.kI,this.OI,new Ji(this,this.Os,this.if,this.Yn,{activeEvent:_[_.AboutClick],name:xo.ContextAbout,icon:Xi.a,label:Yi.a.version?`V${Yi.a.version}`:"dev"})])}setExpand(){this.OI.event=_[_.Collapse],this.OI.changeItemIcon(wo.a)}setCollapse(){this.OI.event=_[_.Expand],this.OI.changeItemIcon(go.a)}showExpandButton(){this.OI.showComponent()}hideExpandButton(){this.OI.hideComponent()}updateQualityMenu(t){Object(l.h)(t)?(this.kI.updateAvailableQualities(t),this.kI.showComponent()):this.kI.hideComponent()}updateQuality(t,i=!1){this.kI.updateQuality(t,i)}}var Oo,ko,_o=e(118),jo=e.n(_o),Ao=e(119),Io=e.n(Ao);!function(t){t[t.VolumeControls=0]="VolumeControls",t[t.PlaybackControls=1]="PlaybackControls",t[t.PlaylistControls=2]="PlaylistControls",t[t.CtaButton=3]="CtaButton",t[t.SlideTitle=4]="SlideTitle",t[t.TopLogo=5]="TopLogo",t[t.TopStoryTitle=6]="TopStoryTitle",t[t.TopSlideTitle=7]="TopSlideTitle",t[t.TextLabel=8]="TextLabel"}(Oo||(Oo={})),function(t){t[t.Default=0]="Default",t[t.Description=1]="Description",t[t.Quote=2]="Quote",t[t.Bullet=3]="Bullet",t[t.Cover=4]="Cover",t[t.Instagram=5]="Instagram"}(ko||(ko={}));const Co={TimerLabel:"cnx-cta-btn-timer-label",TimerLoader:"cnx-svg-circle-stroke",TextLabel:"cnx-cta-btn-text",TextContainer:"cnx-cta-btn-content",AlignWithContent:"cnx-cta-align-with-content"},To=16;class Po extends ei{constructor(t,i,e,s,n,r,h){super(t,i,e,n.template,r),this.mr=s,this._I=n,this.jI=h,this.eventList=[qa.CallToAction,ii.a[ii.a.Scroll]],this.AI=!1,this.II=!1,this.CI=!1,this.br=()=>{this.TI()},this.pu=()=>{const t=Math.round(this.Tw.timeRemaining/$.f);this.MI(t.toString())},this.EI=this.ef.querySelector(".cnx-ui-ps-cta")}startProgress(){this.AI=!0,this.Tw&&(this.Tw.start(),this.pu())}pauseProgress(){this.AI=!1,this.Tw&&(this.Tw.stop(),this.pu())}changeLabel(t){Object(C.h)(t)&&(this.qf.innerHTML=t.substring(0,To))}initComponent(){super.initComponent(),this.qf=this.ef.querySelector(`.${Co.TextLabel}`),this.wI=this.ef.querySelector(`.${Co.TextContainer}`)}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){if(!Object(l.h)(t))return;const i=t.find(({type:t})=>t===Oo.CtaButton);if(!i||!i.metadata)return;const{url:e,label:s,duration:n,ctaAlignToContent:r,ctaAlignToFooter:h,title:a}=i.metadata;this.II=h,this.LI(e,a),this.changeLabel(s);const o=Object(C.e)(n);this.RI(o),this.BI(o,n),this.DI(r),this.FI()}setFooterElement(t){this.$I=t,this.FI()}handleCapabilities(t){this.onSlideTransitionStart(t)}hideComponent(){super.hideComponent(),this.UI()}DI(t){t?Object(j.a)(this.EI,Co.AlignWithContent):Object(j.L)(this.EI,Co.AlignWithContent)}onClickHandler(){const t={payload:null};Object(C.h)(this.Lt)&&(t.payload=this.Lt),this.mediator.publish(this,qa.CallToAction,t)}FI(){this.CI||this.$I&&this.II&&(this.mr.on(this.$I,this.br),this.CI=!0)}TI(){if(!this.$I)return void Object(j.N)(this.ef,"bottom");const t=(this.$I.clientHeight-this.ef.clientHeight)/2*-1;Object(j.Q)(this.ef,{bottom:`${t}px`})}RI(t){t?this.VI||this.NI():this.HI()}NI(){this.VI=this.Os.createElementByString(this._I.getTimerTemplate()),Object(j.x)(this.wI,this.VI),this.qI(this.VI)}qI(t){this.zI=t.querySelector(`.${Co.TimerLabel}`),this.WI=t.querySelector(`.${Co.TimerLoader}`)}HI(){Object(j.M)(this.VI),this.VI=null,this.zI=null,this.WI=null}BI(t,i){t?(this.GI(),this.Tw.reset(i*$.f),this.MI(i.toString()),this.AI&&this.Tw.start(),this.JI(),Object(j.Q)(this.WI,{"animation-duration":`${i}s`})):this.UI()}GI(){this.Tw||(this.Tw=new xt,this.QI=this.Tw.onTimeUpdate.subscribe(this.pu))}UI(){this.Tw&&(this.QI.unsubscribe(),this.Tw.disable(),this.Tw=null)}JI(){Object(j.O)(this.WI,Co.TimerLoader,Co.TimerLoader,!0)}MI(t){this.zI&&Object(C.h)(t)&&(this.zI.innerText=t)}LI(t,i){if(this.Lt=t,t&&(this.EI.title=i,!this.jI)){this.EI.href=t;const i=this.Os.isURLSameDomainToTop(t);this.EI.target=i?Ue.c.Top:Ue.c.Blank,this.EI.rel="nofollow"}}}var Mo=e(66),Eo=e.n(Mo),Lo=e(120),Ro=e.n(Lo),Bo=e(121),Do=e.n(Bo);class Fo{get template(){return`\n        <cnx class="cnx-ui-ps-cta-placeholder">\n            <a class="cnx-ui-ps-cta">\n                <cnx class="cnx-cta-btn cnx-color-accent">\n                    <cnx class="cnx-cta-btn-container">\n                        <cnx class="cnx-cta-btn-content">\n                            <cnx-span class="cnx-cta-btn-instagram">\n                                ${Ro.a}\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-text">\n                                READ MORE\n                            </cnx-span>\n                            <cnx-span class="cnx-cta-btn-arrow">\n                                ${Do.a}\n                            </cnx-span>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </a>\n        </cnx>\n        `.trim()}getTimerTemplate(){return`\n            <cnx class="cnx-cta-btn-timer-container">\n                <cnx class="cnx-cta-btn-timer-loader-wrapper">\n                    ${Eo.a}\n                    ${Eo.a}\n                </cnx>\n                <cnx class="cnx-cta-btn-timer-label-wrapper">\n                    <cnx class="${Co.TimerLabel}">\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class $o extends ei{constructor(){super(...arguments),this.eventList=[_[_.Play]]}onClickHandler(){this.mediator.publish(this,_[_.Play])}}var Uo,Vo=e(122),No=e.n(Vo);!function(t){t[t.TopLogo=0]="TopLogo",t[t.TopSlideTitle=1]="TopSlideTitle",t[t.TopStoryTitle=2]="TopStoryTitle"}(Uo||(Uo={}));const Ho={[Oo.TopLogo]:Uo.TopLogo,[Oo.TopSlideTitle]:Uo.TopSlideTitle,[Oo.TopStoryTitle]:Uo.TopStoryTitle},qo={[Uo.TopLogo]:Oo.TopLogo,[Uo.TopSlideTitle]:Oo.TopSlideTitle,[Uo.TopStoryTitle]:Oo.TopStoryTitle},zo=36,Wo="Top Articles",Go=[Uo.TopLogo,Uo.TopStoryTitle,Uo.TopSlideTitle];class Jo extends Je{constructor(t,i,e,s){super(t,i,e,s),this.eventList=[_[_.LogoClicked],ii.a[ii.a.Scroll]],this.XI=[],this.YI={},this.KI=this.ef.querySelector(`.${Na.TitlesContainer}`)}triggerLogoAnimation(){const t=this.getComponent(Xt.TopLogo);t&&t.triggerLogoAnimation()}onSlideTransitionStart(t){const i=this.ZI(t);this.YI=Object.assign({},i),this.tC(t)}onSlideTransitionEnd(){}onSlideTimeUpdate(t,i){}handleComponentEvent(t,i,e){this.mediator.publish(this,t,i)}iC(t){return t.map(({type:t})=>Ho[t]).filter(t=>Object(C.a)(t))}ZI(t){return t.reduce((t,{type:i,metadata:e})=>{switch(i){case qo[Uo.TopStoryTitle]:if(!e.label&&!e.useFallbackLabel)return t;const s=e.label||Wo;return Object.assign(Object.assign({},t),{[Uo[Uo.TopStoryTitle]]:this.eC(s,e.useTransition)});case qo[Uo.TopSlideTitle]:return Object.assign(Object.assign({},t),{[Uo[Uo.TopSlideTitle]]:this.eC(e.label,e.useTransition)});case qo[Uo.TopLogo]:return Object.assign(Object.assign({},t),{[Uo[Uo.TopLogo]]:Object.assign({},e)});default:return t}},{})}eC(t,i=!1){return{useTransition:i,label:this.sC(t)}}sC(t){if(t)return t.length>zo?`${t.substring(0,zo)}...`:t}tC(t,i=!1){const e=this.iC(t),s=Object(l.a)(Go,e),n=Object(l.a)(e,this.XI),r=Object(l.b)(e,this.XI);this.XI=e,this.nC(e),Object(j.i)(this.KI),s.forEach(t=>this.rC(t,i)),n.forEach(t=>this.hC(t,i)),r.forEach(t=>this.aC(t,i))}nC(t){switch(!0){case this.oC(t):this.cC();break;case this.uC(t):this.lC();break;default:this.dC()}}oC(t){return t.includes(Uo.TopSlideTitle)&&t.includes(Uo.TopStoryTitle)}uC(t){const i=t.includes(Uo.TopSlideTitle)&&!t.includes(Uo.TopStoryTitle),e=!t.includes(Uo.TopSlideTitle)&&t.includes(Uo.TopStoryTitle);return i||e}cC(){Object(j.L)(this.KI,Na.SlideDown),Object(j.a)(this.KI,Na.SlideInitial)}lC(){Object(j.L)(this.KI,Na.SlideInitial),Object(j.a)(this.KI,Na.SlideDown)}dC(){Object(j.L)(this.KI,Na.SlideInitial,Na.SlideDown)}rC(t,i=!1){const e=this.fC(t);if(!e)return;const s=this.pC(t);i&&(s.useTransition=!1),e.hide(s)}hC(t,i=!1){const e=this.fC(t);if(!e)return;const s=this.pC(t);i&&(s.useTransition=!1),e.show(s)}aC(t,i=!1){const e=this.fC(t);if(!e)return;const s=this.pC(t);i&&(s.useTransition=!1),e.update(s)}fC(t){return this.getComponent(Xt[Uo[t]])}pC(t){return this.YI[Uo[t]]||{}}}var Qo,Xo,Yo;!function(t){t.Wrapper="cnx-ui-ps__wrapper",t.Container="cnx-ui-ps__container",t.Placeholder="cnx-ui-ps__placeholder",t.Text="cnx-ui__span--text",t.Label="cnx-ui__span--label",t.Title="cnx-ui__span--title",t.VerticalLine="cnx-ui-ps__vertical-line",t.Instagram="cnx-ui-ps__slide--instagram",t.Cover="cnx-ui-ps__slide--cover",t.HighlightInner="cnx-top-title-highlight-text-inner-container",t.HighlightText="cnx-ui-ps-highlight-text"}(Qo||(Qo={})),function(t){t.Default="cnx-ui-ps__sliding--default",t.Basic="cnx-ui-ps__sliding--basic",t.Cover="cnx-ui-ps__sliding--cover",t.SlideIn="cnx-title-slide-in",t.SlideOut="cnx-title-slide-out"}(Xo||(Xo={})),function(t){t.Cover="cnx-ui-ps__title--cover",t.Quote="cnx-ui-ps__title--quote",t.Bullet="cnx-ui-ps__title--bullet",t.Default="cnx-ui-ps__title--default",t.Description="cnx-ui-ps__title--description",t.Instagram="cnx-ui-ps__title--instagram"}(Yo||(Yo={}));const Ko="em",Zo=0,tc=!0;class ic{constructor(t,i=Zo,e=tc){if(this.bC=t,this.vC=e,!Object(l.h)(this.bC))throw new Error("PlaylistManager: list was not supplied");this.setCurrentItem(i)}setCurrentItem(t){this.mC=this.bC[t]}get currentItem(){return this.mC}goToNextItem(){this.uA().nextIndex===this.uA().firstIndex&&this.vC?this.setCurrentItem(this.uA().firstIndex):this.setCurrentItem(this.uA().nextIndex)}get listLength(){return this.bC.length}get previousItem(){return this.bC[this.uA().prevIndex]}get currentItemIndex(){return this.uA().currentIndex}uA(t=this.bC.indexOf(this.mC)){return Dt(this.bC,t)}}const ec=250,sc=15,nc=10,rc="cnx-aux",hc="cnx-aux-container",ac="cnx-ui-lines";class oc{constructor(t){this.Os=t}gC(t,i){const{maxLineWidth:e,maxLines:s,minLines:r}=i,a=[...t],o=[];if(!a.length||!Object(C.e)(e))return o;let c=0,u=-1,l=0;for(;a.length>0;){if(c=0,o[++u]=[],++l>=ec){Object(n.a)({message:"Split text base line wrap infinite loop",level:h.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}for(;a[0]&&c+a[0].width<=e;)if(c+=a[0].width,o[u].push(a.shift()),++l>=ec){Object(n.a)({message:"Split text base line wrap infinite loop",level:h.ProtoLoggingLevelEnum.INFO,throttle:1,sendMaxLog:!1});break}if(a[0]&&o.length>=s){o[u].push(...a);break}}return o.length<r&&o[0].length>4&&(o[1]=o[0].splice(-2,2)),o[u].length<2&&o.length>1&&o[u].unshift(o[u-1].pop()),o}yC(t){return t.map(t=>({innerHTML:t.nodeName.toLowerCase()===rc?t.innerHTML:t.outerHTML,width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().height}))}getWordsHtml(t){if(!Object(C.h)(t))return"";let i=[];if(ne(t))try{i=function(t){const i=document.createElement("cnx");i.innerHTML=t;const e=[];return Object(l.c)(i.childNodes).forEach(t=>{t.outerHTML?e.push(t.outerHTML):" "===t.nodeValue?e.push(" "):t.nodeValue.split(" ").forEach(t=>e.push(t))}),e}(t.trim())}catch(i){return Object(n.a)({message:"MultilinePadded_getRows_html_split",exception:i.message,level:h.ProtoLoggingLevelEnum.INFO,callStack:i.stack,throttle:1,sendMaxLog:!1}),t}else i=t.trim().split(" ");return i.map(t=>{let i=" ";return ne(t)?i="":" "===t&&(i=""),`<${rc}>${t}${i}</${rc}>`}).join("")}wC(t,i){const e=t.querySelectorAll(i),s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width;Object(l.c)(e).forEach(t=>{const i=Object(l.c)(t.querySelectorAll(rc)),e=t.parentElement;if(!i.length||t.nodeType!==Node.ELEMENT_NODE)return;const n=this.Os.getComputedStyle(t),r=parseInt(this.Os.getComputedStyle(t,"before").getPropertyValue("width"),10),h=parseInt(n.getPropertyValue("--max-title-lines"),10),a=parseInt(n.getPropertyValue("--min-title-lines"),10),o=parseInt(n.getPropertyValue("font-size"),10),c={maxLineWidth:r||t.getBoundingClientRect().width-2*nc,maxLines:h||sc,minLines:a||1},u=this.yC(i),d=this.gC(u,c),f=this.Os.createElementByString(`<cnx class='${ac}'></cnx>`);f.dataset.split=s.toString(),f.dataset.split+=","+o,d.forEach(i=>{const e=t.cloneNode();Object(j.L)(e,hc);const s=i.map(t=>t.innerHTML.trim());e.innerHTML+=this.xC(s).replace(/\s\s+/g," "),f.dataset.split+=","+i.length,Object(j.d)(e,f)}),this.SC(f).lines!==this.SC(e).lines?t.classList.contains(hc)?this.Os.requestAnimationFrameHelper(()=>{null!==e.parentNode&&Object(j.w)(e,f),Object(j.M)(e)}):this.Os.requestAnimationFrameHelper(()=>{null!==t.parentNode&&Object(j.w)(t,f),Object(j.M)(t)}):Object(j.M)(t)})}brakeLongLines(t,i){const e=t.querySelectorAll(i);if(!e.length)return;const s=t.clientWidth?t.clientWidth:t.getBoundingClientRect().width,n=this.SC(e[0].parentElement);if(isNaN(n.width))return void this.wC(t,i);if(n.width&&0===Math.abs(n.width-s))return;const r=t.querySelectorAll(`.${ac}[data-split]`);Object(l.c)(r).forEach(t=>{const e=t.querySelectorAll(i),s=e[0].cloneNode(!1),n=Object(l.c)(e).map(t=>t.innerHTML).join("");s.innerHTML=this.getWordsHtml(n),Object(j.a)(s,hc),t.prepend(s)}),this.wC(t,i)}SC(t){const i=t.dataset.split?t.dataset.split.split(","):[],e=i.shift();return{width:parseInt(e,10),lines:i.join("")}}xC(t){return t.reduce((t,i,e)=>Object(l.g)("<",i)&&ne(i)?t+i:" "===t?t:t+`${i} `,"")}}class cc extends ei{constructor(t,i,e,s,n,r){super(t,i,e,r.template,n),this.mediator=t,this.Os=i,this.mr=s,this.Yn=n,this.OC=r,this.splitTextSelector=`.${Qo.Text}`,this.br=()=>{this.Os.requestAnimationFrameHelper(()=>{this.kC.brakeLongLines(this.ef,this.splitTextSelector)})},this._C=i.createDocumentFragment(),this.kC=new oc(i)}get $templateFragment(){return this._C}jC(t,i){const e=this.OC.titleTemplate(t,i);return this.Os.createElementByString(e)}AC(t,i){const e=this.OC.labelTemplate(t,i);return this.Os.createElementByString(e)}IC(t,i){const e=this.OC.textTemplate(t,i);return this.Os.createElementByString(e)}CC(){const t=this.OC.placeholderTemplate();return this.Os.createElementByString(t)}TI(){}TC(){this.resetAnimation(),Object(j.a)(this.ef,Xo.SlideIn)}PC(){this.resetAnimation(),Object(j.a)(this.ef,Xo.SlideOut)}onSlideTransitionStart(t){this.MC(t),this.resetAnimation(),this.render()}onSlideTransitionEnd(){this.TC()}onSlideTimeUpdate(t,i){}resetAnimation(){const t=[Xo.SlideIn,Xo.SlideOut];Object(j.L)(this.ef,...t)}initComponent(t){super.initComponent(),this.EC=t,this.mr.on(this.EC,this.br)}render(){Object(j.J)(this.ef,this._C),Object(j.d)(this.ef,this.EC)}setFooterElement(t){return this.$I=t,this.TI(),this.$I}destroy(){this.mr.off(this.EC,this.br),Object(j.M)(this.ef),this.ef=this.Os.createElementByString(this.OC.template),this.unsubscribeAll(this.if),this.if.unregisterAll(this)}}function uc(t,i){return function(t,i){const e=i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`<${e}>(.*?)</${e}>`,"g");return t.replace(s,(t,e)=>e.split(" ").map(t=>`<${i}>${t}</${i}>`).join(" "))}(ee(t),i)}const lc={[no.ProtoPlayspaceColorSchemeEnum.Accent]:d.f.AccentColor,[no.ProtoPlayspaceColorSchemeEnum.Primary]:d.f.PrimaryColor,[no.ProtoPlayspaceColorSchemeEnum.Secondary]:d.f.SecondaryColor};class dc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.eventList=[],this.className=Yo.Description}LC(t){return t/this.RC.listLength*(this.RC.currentItemIndex+1)}BC(t){const i=t.map((t,i)=>{const e=this.DC(t);return Object(j.d)(e,this.$templateFragment),0===i&&Object(j.a)(e,"active"),Object.assign(Object.assign({},t),{shown:!1,element:e})});this.RC=new ic(i)}FC(t){return this.AC(t.text,lc[t.colorScheme])}DC(t){return this.IC(this.kC.getWordsHtml(uc(t.text,Ko)),lc[t.colorScheme])}MC(t){const{descriptionChunkList:i,label:e,labelColorScheme:s}=t,n={text:e,colorScheme:s};Object(C.h)(n.text)&&Object(j.d)(this.FC(n),this.$templateFragment),Object(l.h)(i)&&this.BC(i)}$C(){this.RC.currentItem.shown=!0,Object(j.L)(this.RC.currentItem.element,"active"),this.RC.goToNextItem(),this.Os.requestAnimationFrameHelper(()=>{this.resetAnimation(),this.Os.requestAnimationFrameHelper(()=>{Object(j.a)(this.RC.currentItem.element,"active"),this.TC()})})}onSlideTimeUpdate(t,i){t>=i||t>=this.LC(i)&&!this.RC.currentItem.shown&&this.$C()}}class fc{get template(){return`<cnx class="${d.f.TitleComponent}"></cnx>`}titleTemplate(t,i){return`<cnx class="${Qo.Title} ${i}">${t}</cnx>`}labelTemplate(t,i){return`<cnx class="${Qo.Label} ${i} ">${t}</cnx>`}textTemplate(t,i){return`<cnx class="${Qo.Text} ${i}">${t}</cnx>`}containerTemplate(){return`<cnx class="${Qo.Container}"></cnx>`}placeholderTemplate(){return`<cnx class="${Qo.Placeholder}"></cnx>`}wrapeprTemplate(){return`<cnx class="${Qo.Wrapper}"></cnx>`}}class pc extends fc{get template(){return`<cnx class="${Xo.Basic} ${d.f.TitleComponent}"></cnx>`}textTemplate(t,i){return`<cnx class="${Qo.Placeholder}">\n            <cnx class="${Qo.Text} ${i}">${t}</cnx>\n        </cnx>`}}class bc extends fc{get template(){return`<cnx class="${Xo.Default} ${d.f.TitleComponent}">\n            <cnx class="${Qo.VerticalLine} ${d.f.AccentColor}"></cnx>\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${d.m.InheritBodyFontFamily} ${Qo.Text} ${d.f.PrimaryColor} ${Qo.HighlightInner} ${Qo.HighlightText}">${t}</cnx>`.trim()}}const vc=1200;class mc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.className=Yo.Default,this.UC=!0,this.eventList=[...this.eventList,qa.CallToAction]}MC(t){const{url:i,label:e}=t;if(i?(this.ef.setAttribute("title",i),Object(j.a)(this.ef,d.f.TitleLink)):(this.ef.removeAttribute("title"),Object(j.L)(this.ef,d.f.TitleLink)),Object(C.h)(e)){const t=this.kC.getWordsHtml(uc(e,Ko));Object(j.d)(this.IC(t),this.$templateFragment)}}onClickHandler(){this.mediator.publish(this,qa.CallToAction)}onSlideTransitionEnd(){super.onSlideTransitionEnd(),this.UC=!0}onSlideTimeUpdate(t,i){this.UC&&i-t<vc&&(this.PC(),this.UC=!1)}destroy(){super.destroy(),this.unsubscribeAll(this.if),this.if.unregisterAll(this)}}const gc=3;class yc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.eventList=[],this.className=Yo.Bullet}BC(t){const i=t.map(t=>{if(!Object(C.h)(t.title))return;const i=this.VC(t);return Object(j.d)(i,this.$templateFragment),Object.assign(Object.assign({},t),{activated:!1,element:i,titleElement:i.firstChild,containerElement:i.querySelector(`.${Qo.Container}`)})});this.NC=new ic(i)}HC(t){const i=t.element.querySelector(`.${Qo.Container}`),e=i.querySelectorAll(`.${Qo.Text}`),s=Object(C.a)(e)?e.length:0,n=Object(C.a)(e[0])?e[0].clientHeight:0;Object(j.Q)(i,{"max-height":`${s*n}px`}),t.activated=!0,Object(j.O)(t.titleElement,d.f.PrimaryColor,d.f.SecondaryColor),Object(j.a)(t.element,"active")}qC(t){const i=t.element.querySelector(`.${Qo.Container}`);Object(j.N)(i,"max-height"),Object(j.O)(t.titleElement,d.f.SecondaryColor,d.f.PrimaryColor),Object(j.L)(t.element,"active")}zC(t){const i=this.OC.labelTemplate(t);return this.Os.createElementByString(i)}VC(t){const i=this.zC(t.title),e=this.IC(this.kC.getWordsHtml(t.description)),s=this.CC();return Object(j.d)([i,e],s),s}MC(t){const{label:i,bulletChunkList:e}=t;Object(C.h)(i)&&Object(j.d)(this.jC(i),this.$templateFragment),Object(l.h)(e)&&this.BC(e.slice(0,gc))}onSlideTimeUpdate(t,i){const e=this.NC;e&&!e.currentItem.activated&&(0===e.currentItemIndex?t>=1e3&&(this.HC(e.currentItem),e.goToNextItem()):(i-1e3)/e.listLength*e.currentItemIndex+1e3<t&&(this.qC(e.previousItem),this.HC(e.currentItem),e.goToNextItem()))}}class wc extends fc{get template(){return`<cnx class="${Xo.Basic} ${d.f.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Qo.Title} ${d.f.AccentColor}">${t}</cnx>`}labelTemplate(t){return`<cnx class="${Qo.Label} ${d.f.PrimaryColor}">\n            <cnx class="${Qo.VerticalLine} ${d.f.AccentColor}"></cnx>\n            ${t}\n        </cnx>`.trim()}textTemplate(t){return`<cnx class="${Qo.Container}">\n                    <cnx class="${Qo.Text}  ${d.f.SecondaryColor}">${t}</cnx>\n                </cnx>\n        `.trim()}}class xc extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.eventList=[],this.className=Yo.Cover,this.splitTextSelector=`.${Qo.Text}, .${Qo.Title}`,this.br=()=>{this.Os.requestAnimationFrameHelper(()=>{if(this.kC.brakeLongLines(this.ef,this.splitTextSelector),this.$I){const t=this.$I.clientHeight/2*-1;Object(j.Q)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}})}}MC(t){let{coverChunk:{title:i,subtitle:e}}=t;const{label:s}=t;if(Object(C.h)(i)&&(i=uc(i,Ko),Object(j.d)(this.jC(this.kC.getWordsHtml(i)),this.$templateFragment)),Object(C.h)(e)&&(e=uc(e,Ko),Object(j.d)(this.IC(this.kC.getWordsHtml(e)),this.$templateFragment)),Object(C.h)(s)){if(this.labelElement=this.AC(s),this.$I){const t=(this.$I.clientHeight-this.ef.clientHeight)/2*-1;Object(j.Q)(this.labelElement,{bottom:`${t}px`,position:"absolute"})}Object(j.d)(this.labelElement,this.$templateFragment)}}}class Sc extends fc{get template(){return`<cnx class="${Xo.Cover} ${d.f.TitleComponent}"></cnx>`}titleTemplate(t){return`<cnx class="${Qo.Placeholder}">\n            <cnx class="${Qo.Title} ${d.f.PrimaryColor}">${t}</cnx>\n        </cnx>`}textTemplate(t){return`<cnx class="${Qo.Placeholder}">\n            <cnx class="${Qo.Text} ${d.f.SecondaryColor}">${t}</cnx>\n        </cnx>`}labelTemplate(t){return`<cnx class="${Qo.Placeholder}">\n            <cnx class="${Qo.Label}">${t}</cnx>\n        </cnx>`}}var Oc=e(67),kc=e.n(Oc);class _c extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.eventList=[],this.className=Yo.Quote}MC(t){const{quote:i,source:e}=t;if(Object(C.h)(i)){const t=this.kC.getWordsHtml(`${kc.a}${ee(i)}${kc.a}`);Object(j.d)(this.IC(t),this.$templateFragment)}Object(C.h)(e)&&Object(j.d)(this.AC(e),this.$templateFragment)}}class jc extends fc{get template(){return`\n            <cnx class="${Xo.Basic} ${d.f.TitleComponent}"></cnx>\n        `.trim()}textTemplate(t){return`\n        <cnx class="${Qo.Text} ${d.f.PrimaryColor}"> ${t}</cnx>`.trim()}labelTemplate(t){return`<cnx class="${Qo.Label}">${t}</cnx>`.trim()}}class Ac extends cc{constructor(t,i,e,s,n,r){super(t,i,e,s,n,r),this.mediator=t,this.Os=i,this.Yn=n,this.OC=r,this.eventList=[],this.className=Yo.Instagram}MC(t){const{instagramMetadata:{createdDate:i,comments:e,likes:s},label:n}=t;this.WC({createdDate:i,comments:e,likes:s}),Object(C.h)(n)&&Object(j.d)(this.jC(n),this.$templateFragment)}WC(t){const{createdDate:i,comments:e,likes:s}=t,n=this.Os.createElementByString(this.OC.instagramMetaTemplate(i,s,e));if(this.GC(e)&&this.GC(s)){const t=n.querySelector(`.${Qo.Instagram}-date cnx-span`);Object(j.a)(t,d.h.Show)}Object(j.d)(n,this.$templateFragment)}GC(t){return!Object(C.h)(t)||"0"===t}}var Ic=e(123),Cc=e.n(Ic),Tc=e(124),Pc=e.n(Tc),Mc=e(125),Ec=e.n(Mc);class Lc extends fc{get template(){return`<cnx class="${Xo.Basic} ${d.f.TitleComponent}"></cnx>`.trim()}instagramMetaTemplate(t,i,e){const s=Object(C.h)(t)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-date ${d.m.InheritBodyFontFamily}">\n                ${Ec.a}\n                <cnx-span class="cnx-date-label ${d.m.InheritBodyFontFamily}">Posted </cnx-span>${Object(Ti.e)(t)}\n            </cnx-span>`.trim():"",n=Object(C.h)(i)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-likes ${d.m.InheritBodyFontFamily}">\n                ${Cc.a} ${Object(bt.a)(parseInt(i,10))}\n            </cnx-span>`.trim():"",r=Object(C.h)(e)?`\n            <cnx-span class="cnx-ui-ps-instagram-title-comments ${d.m.InheritBodyFontFamily}">\n                ${Pc.a} ${Object(bt.a)(parseInt(e,10))}\n            </cnx-span>`.trim():"";return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${d.m.InheritBodyFontFamily}">\n                ${s}\n                ${n}\n                ${r}\n            </cnx>\n        `.trim()}titleTemplate(t){return`\n            <cnx class="cnx-ui-ps-instagram-title-row ${Qo.Instagram}-title ${d.m.InheritBodyFontFamily}">\n                ${t}\n            </cnx>\n        `.trim()}}class Rc extends Zt{constructor(t,i,e,s,n,r,h){super(t,i,e,s,r),this.mediator=t,this.Os=i,this.mr=n,this.Yn=r,this.jI=h,this.eventList=[],this.JC=new Map,this.QC()}setFooterElement(t){this.JC.forEach(i=>{i.setFooterElement(t)})}onSlideTransitionStart(t){Object(j.S)(this.ef),this.ef.removeAttribute("title");const i=t.find(({type:t})=>t===Oo.SlideTitle),e=t.find(({type:t})=>t===Oo.CtaButton);if(e&&e.metadata&&e.metadata.url){if(this.XC=e.metadata.url,!this.jI){this.ef.href=this.XC;const t=this.Os.isURLSameDomainToTop(this.XC);this.ef.target=t?Ue.c.Top:Ue.c.Blank}this.ef.title=i.metadata.label,e.metadata.title=i.metadata.label}if(!Object(C.f)(i)||!Object(C.f)(i.metadata))return;const s=this.JC.get(i.metadata.titleType);s&&(this.YC(s),this.KC.onSlideTransitionStart(i.metadata))}onSlideTransitionEnd(){this.KC&&this.KC.onSlideTransitionEnd()}onSlideTimeUpdate(t,i){this.KC&&this.KC.onSlideTimeUpdate(t,i)}initComponent(){}YC(t){this.KC?(this.KC.destroy(),Object(j.O)(this.ef,this.ZC,t.className)):Object(j.a)(this.ef,t.className),this.ZC=t.className,this.ef.innerHTML="",this.KC=t,this.KC.initComponent(this.ef)}QC(){this.JC.set(ko.Default,new mc(this,this.Os,this.if,this.mr,this.Yn,new bc)),this.JC.set(ko.Description,new dc(this,this.Os,this.if,this.mr,this.Yn,new pc)),this.JC.set(ko.Quote,new _c(this,this.Os,this.if,this.mr,this.Yn,new jc)),this.JC.set(ko.Bullet,new yc(this,this.Os,this.if,this.mr,this.Yn,new wc)),this.JC.set(ko.Cover,new xc(this,this.Os,this.if,this.mr,this.Yn,new Sc)),this.JC.set(ko.Instagram,new Ac(this,this.Os,this.if,this.mr,this.Yn,new Lc)),this.JC.forEach(t=>{t.eventList.forEach(i=>{this.subscribe(i,t,()=>{const t={payload:null};i===qa.CallToAction&&(t.payload=this.XC),this.mediator.publish(this,i,t)})})})}destroy(){super.destroy(),this.KC&&this.KC.destroy()}}var Bc={[Xt[Xt.SkipAd]]:{template:Ie(Xt.SkipAd,"Skip Ad",!1),tooltip:"Skip Ad",isHoverable:!1}};class Dc{constructor(t){this.tT=t}get template(){return`\n            <cnx class="${Na.Main}">\n                ${this.iT()}\n                <cnx class="${Na.TitlesContainer}">\n                    [[${Xt.TopStoryTitle}]]\n                    [[${Xt.TopSlideTitle}]]\n                </cnx>\n            </cnx>\n        `.trim()}iT(){return this.tT?`[[${Xt.TopLogo}]]`:""}}class Fc{get template(){return`<a class="${Qo.Wrapper}"></a>`}}const $c=.8,Uc=.8;class Vc extends ei{constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.mediator=t,this.Yn=n,this.eventList=[...this.eventList,_[_.LogoClicked]],this.hideComponent(!1),this.eT=this.ef.querySelector(`.${Na.Logo}`),this.eT.src=`${r}`,this.eT.alt="",this.eT.onload=()=>{this.sT()}}show(t){this.showComponent(t.useTransition)}hide(t){this.hideComponent(t.useTransition)}update(t){this.showComponent(t.useTransition)}triggerLogoAnimation(){Object(j.a)(this.ef,Na.LogoAnimation)}onClickHandler(){this.mediator.publish(this,_[_.LogoClicked])}sT(){this.eT.naturalHeight>this.eT.naturalWidth?this.eT.naturalWidth>this.eT.parentElement.clientWidth&&this.eT.naturalWidth/this.eT.naturalHeight>=$c?Object(j.a)(this.eT,Na.LogoLandscape):Object(j.a)(this.eT,Na.LogoPortrait):this.eT.naturalHeight>this.eT.parentElement.clientHeight&&this.eT.naturalHeight/this.eT.naturalWidth>=Uc?Object(j.a)(this.eT,Na.LogoPortrait):Object(j.a)(this.eT,Na.LogoLandscape)}}class Nc{get template(){return`\n            <cnx class="${Na.LogoContainer}">\n                <img class="${Na.Logo}" />\n            </cnx>\n        `.trim()}}class Hc{get template(){return`\n            <cnx class="${Na.TopSlideTitle} ${d.m.InheritTitleFontFamily}">\n                <cnx class="${Na.TextPlaceholder}">\n                    <cnx class="${Na.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Na.TextOuterContainer}">\n                            <cnx class="${Na.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}class qc{get template(){return`\n            <cnx class="${Na.TopStoryTitle} ${d.m.InheritTitleFontFamily}">\n                <cnx class="${Na.TextPlaceholder}">\n                    <cnx class="${Na.Text} ${d.f.SecondaryColor}">\n                        <cnx class="${Na.TextOuterContainer}">\n                            <cnx class="${Na.TextInnerContainer}"></cnx>\n                        </cnx>\n                    </cnx>\n                </cnx>\n            </cnx>\n        `.trim()}}const zc=600;class Wc extends Zt{constructor(t,i,e,s,n){super(t,i,e,s,n),this.mediator=t,this.eventList=[],this.nT=this.ef.querySelector(`.${Na.TextInnerContainer}`)}show(t){if(!this.nT)return;const{label:i,useTransition:e}=t;Object(C.h)(i)&&i!==this.FC&&(clearTimeout(this.rT),this.FC=i,this.hT(i),this.TC(e))}initComponent(){}hide(t){const{useTransition:i}=t;clearTimeout(this.rT),this.PC(i),this.FC=null}update(t){if(!this.nT)return;const{label:i,useTransition:e}=t;Object(C.h)(i)&&i!==this.FC&&(clearTimeout(this.rT),this.PC(e),this.FC=i,this.rT=setTimeout(()=>{this.hT(i),this.TC(e)},zc))}hT(t){this.nT.innerHTML=t}TC(t=!1){if(t){if(Object(j.u)(this.ef,Na.SlideIn))return;this.aT(),Object(j.L)(this.ef,d.h.Hide,d.h.Active),Object(j.i)(this.ef),Object(j.O)(this.ef,Na.SlideOut,Na.SlideIn)}else Object(j.O)(this.ef,d.h.Hide,d.h.Active),Object(j.L)(this.ef,Na.SlideIn,Na.SlideOut)}PC(t=!1){t?(Object(j.L)(this.ef,d.h.Hide,d.h.Active),Object(j.O)(this.ef,Na.SlideIn,Na.SlideOut)):(Object(j.O)(this.ef,d.h.Active,d.h.Hide),Object(j.L)(this.ef,Na.SlideIn,Na.SlideOut))}aT(){const t=[Na.SlideIn,Na.SlideOut];Object(j.L)(this.nT,...t),Object(j.i)(this.nT)}}class Gc extends Zt{constructor(){super(...arguments),this.eventList=[]}initComponent(){}onSlideTimeUpdate(){}onSlideTransitionEnd(){}onSlideTransitionStart(t){const i=this.oT(t);i&&this.cT(i.metadata.label)}oT(t){return t.find(({type:t,metadata:i})=>t===Oo.TextLabel&&Object(C.f)(i))}cT(t){Object(C.h)(t)&&(this.ef.innerText=t)}}var Jc=e(126),Qc=e.n(Jc);class Xc extends We{constructor(t,i,e,s,n){super(t,i,s,n,Bc),this.Os=t,this.if=i,this.Lo=e,this.ef=s,this.Jn=n,this.Vb={[Xt.VolumeButton]:t=>new Ge(t,this.Os,this.if,Io.a,He.Mute,this.Jn.isMobile),[Xt.PlayspaceProgressBar]:t=>new co(t,this.Os,this.if,lo.a,this.Jn.isMobile),[Xt.PlayspaceSettingsMenu]:t=>new So(t,this.Os,this.if,jo.a,_[_.SettingsMenu],Xt.PlayspaceSettingsMenu,this.ef,this.Jn.isMobile),[Xt.CtaButton]:t=>new Po(t,this.Os,this.if,this.Lo,new Fo,this.Jn.isMobile,this.Jn.disableClickUrl),[Xt.ClickToPlayButton]:t=>new $o(t,this.Os,this.if,No.a,this.Jn.isMobile),[Xt.TopTitle]:t=>new Jo(t,this.Os,new Dc(this.Jn.logoUrl).template,this),[Xt.TopLogo]:t=>new Vc(t,this.Os,this.if,(new Nc).template,this.Jn.isMobile,this.Jn.logoUrl),[Xt.TopSlideTitle]:t=>new Wc(t,this.Os,this.if,(new Hc).template,this.Jn.isMobile),[Xt.TopStoryTitle]:t=>new Wc(t,this.Os,this.if,(new qc).template,this.Jn.isMobile),[Xt.SlideTitle]:t=>new Rc(t,this.Os,this.if,(new Fc).template,this.Lo,this.Jn.isMobile,this.Jn.disableClickUrl),[Xt.ElapsedTimeLabel]:t=>new Pi(t,this.Os,this.if,Ei.a),[Xt.TotalDurationLabel]:t=>new Pi(t,this.Os,this.if,Ei.a),[Xt.VolumeControls]:t=>new Qe(t,this.Os,Xe,this),[Xt.ProgressBar]:t=>new Bi(t,this.Os,this.if,Fi.a,this.Jn.isMobile),[Xt.TextLabel]:t=>new Gc(t,this.Os,this.if,Qc.a)},this.Nb=t=>i=>{const e=this.Vb[t];if(e)return e(i)}}createComponent(t,i){return this.Nb(t)(i)||super.createComponent(t,i)}}class Yc{constructor(t){this.uT=t}lT(t){return this.uT.filter(i=>t.instance!==i.instance)}dT(t){return this.uT.find(({name:i})=>t===i)}fT(t){t.forEach(({instance:t})=>{t.isOpen&&t.close()})}toggleContextMenu(t,i={}){const e=this.dT(t);if(e.instance.isOpen)return e.instance.close(),!1;{const{targetCoordinates:t,holdPause:s}=i,n=t||e.instance.getAnchorCoordinatesTo(e.linkedComponent);return e.instance.open(n,s),this.fT(this.lT(e)),!0}}isAnyContextMenuOpen(){return!!this.uT.find(({instance:t})=>t.isOpen)}closeContextMenu(t){const i=this.dT(t).instance;i.isOpen&&i.close()}closeAllContextMenus(){this.fT(this.uT)}}class Kc extends hi{enterState(){super.enterState();const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(Xt.CtaButton);i&&i.startProgress(),this.context.interactionService.enableSpecialInteractions(this.context.$container),this.context.autoHideHandler&&this.context.autoHideHandler.startAutoHide()}exitState(){super.exitState(),this.context.autoHideHandler&&this.context.autoHideHandler.showUi()}updateDuration(){const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.startProgress()}}class Zc extends oi{enterState(){super.enterState();const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(Xt.CtaButton);i&&i.pauseProgress(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){}}class tu extends Zc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}}class iu extends Zc{enterState(){super.enterState(),Object(j.a)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(Xt.Loader);t&&t.show(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState(),Object(j.L)(this.context.$uiContainer,d.j.Preroll);const t=this.context.getComponent(Xt.Loader);t&&t.hide()}}class eu extends Zc{enterState(){super.enterState(),this.context.interactionService.disableSpecialInteractions(this.context.$container)}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.resetProgress()}}var su={[Oo.PlaybackControls]:[Xt.PlayButton],[Oo.VolumeControls]:[Xt.VolumeButton],[Oo.CtaButton]:[Xt.CtaButton],[Oo.PlaylistControls]:[Xt.UpNextButton,Xt.PreviousButton],[Oo.SlideTitle]:[Xt.SlideTitle],[Oo.TextLabel]:[Xt.TextLabel]};class nu{constructor(){this.pT=Object.keys(su).reduce((t,i)=>[...t,...su[i]],[])}setCapabilityList(t){this.bT=t.map(t=>su[t.type]).filter(t=>Array.isArray(t)).reduce((t,i)=>[...t,...i],[])}getComponentList(){return{excludedComponents:Object(l.a)(this.pT,this.bT),includedComponents:Object(l.b)(this.pT,this.bT)}}}const ru=3e3;class hu{constructor(t){this.ef=t,this.vT=!1}isUIHidden(){return this.vT}startAutoHide(){this.mT=setTimeout(()=>{this.gT()},ru)}showUi(){clearTimeout(this.mT),this.yT()}resetAutoHideTimer(){clearTimeout(this.mT),this.yT(),this.startAutoHide()}gT(){Object(j.a)(this.ef,d.g.HideUI),this.vT=!0}yT(){Object(j.L)(this.ef,d.g.HideUI),this.vT=!1}}var au=e(20);class ou extends di{constructor(t,i,e,s,n,r,h,a,o){super(t,i,e,n,new Xc(e,o,s,i,r)),this.mediator=t,this.$container=i,this.globalDomUtilsService=e,this.settings=r,this.Kn=h,this.interactionService=o,this.wT=80,this.xT=[Xt.SlideTitle,Xt.CtaButton,Xt.TopTitle,Xt.TextLabel],this.Sf={[Tt.PlayingState]:new Kc(this),[Tt.PausedState]:new Zc(this),[Tt.StoppedState]:new tu(this),[Tt.HiddenState]:new eu(this),[Tt.PrerollState]:new iu(this),[Tt.PostrollState]:new iu(this)},this.ST=new nu,this.OT=()=>{this.mediator.publish(this,_[_.Play]),this.kT(_[_.Play])},this.$I=this.$container.querySelector(`.${Ua.Footer}`),this._T(),this.jT(),this.AT(),this.IT(),this.Sf[a].enterState(),this.CT(),this.TT(!1),this.PT(),this.MT=this.$uiContainer.querySelector(`.${Ua.Content}`),this.ET=this.$uiContainer.querySelector(`.${Ua.Overlay}`),this.interactionService.register(this.ET,this,this.interactionService),this.subscribe(ii.a[ii.a.Click],this.interactionService,()=>{this.OT()})}_T(){const t=this.getComponent(Xt.SlideTitle);t&&t.setFooterElement(this.footer)}LT(t,i){const e=this.getComponent(Xt.PlayspaceProgressBar);e&&e.resizeProgressBar(t,i)}handleComponentEvent(t,i,e){switch(this.kT(t),t){case _[_.Mute]:this.mediator.publish(this,_[_.Volume],{payload:0});break;case _[_.Unmute]:this.mediator.publish(this,_[_.Volume],{payload:1});break;case Xt[Xt.CloseButton]:this.mediator.publish(this,_[_.Close]);break;case Xt[Xt.MoreButton]:const e={holdPause:!0};this.RT.toggleContextMenu(Xt.PlayspaceSettingsMenu,e);break;case _[_.AboutClick]:this.globalDomUtilsService.open(pr.a,Ue.c.Blank);break;case _[_.Quality]:i.payload&&this.mediator.publish(this,_[_.Quality],{payload:i.payload});break;case Xt[Xt.UpNextButton]:this.mediator.publish(this,_[_.Next]);break;case Xt[Xt.PreviousButton]:this.mediator.publish(this,_[_.Prev]);break;case qa.CallToAction:Object(C.h)(i.payload)?this.mediator.publish(this,qa.CallToAction,i):this.mediator.publish(this,_[_.Next]);break;default:this.mediator.publish(this,t,i)}}kT(t){switch(t){case qa.CallToAction:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UrlClick});break;case ii.a[ii.a.Scroll]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.ScrollClick});break;case Xt[Xt.VolumeButton]:case Xt[Xt.VolumeProgress]:case Xt[Xt.VolumeControls]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.VolumeClick});break;case Xt[Xt.PlayButton]:case Xt[Xt.BigPlayButton]:case Xt[Xt.ClickToPlayButton]:case _[_.Play]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PlayClick});break;case _[_.Pause]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PauseClick});break;case _[_.Next]:case Xt[Xt.UpNextButton]:case Xt[Xt.UpNextBox]:case ii.a[ii.a.TapRight]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.NextClick});break;case _[_.Prev]:case Xt[Xt.PreviousButton]:case ii.a[ii.a.TapLeft]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.PreviousClick});break;case _[_.Mute]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.MuteClick});break;case _[_.Unmute]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UnmuteClick});break;case _[_.Close]:case Xt[Xt.CloseButton]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.CloseClick})}}AT(){const t=[],i=this.BT();i&&t.push({instance:i,linkedComponent:this.getComponent(Xt.MoreButton),name:Xt.PlayspaceSettingsMenu}),this.RT=new Yc(t)}IT(){this.settings.isMobile&&this.DT(),this.interactionService.register(this.$container,this,this.interactionService,{},[au.c.Hold,au.c.Swipe]);const t=this.interactionService.getNonInterruptibleInteractions();Object.keys(ii.a).filter(t=>isNaN(parseInt(t,10))).forEach(i=>{this.subscribe(i,this.interactionService,e=>{const s=!t.includes(ii.a[i]);if(this.autoHideHandler&&s){if(this.autoHideHandler.isUIHidden())return void this.autoHideHandler.resetAutoHideTimer();this.autoHideHandler.resetAutoHideTimer()}this.kT(i),this.mediator.publish(this,i,e)})})}DT(){this.autoHideHandler=new hu(this.$container)}jT(){const t=`id_${this.Kn}`;this.$uiContainer.id=t;const{bodyFontFamily:i,titleFontFamily:e}=this.FT(),s=`\n            #${t} .${d.f.AccentColor} {\n                fill: ${this.settings.accentColorList.background};\n                background-color: ${this.settings.accentColorList.background};\n                color: ${this.settings.accentColorList.foreground};\n                stroke: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.f.AccentColor} .cnx-cta-btn-arrow svg{\n                fill: ${this.settings.accentColorList.foreground};\n            }\n            @keyframes ${t}-bar {\n                1% {\n                  fill: transparent; transform: scaleY(1)\n                }\n                30% {fill: ${this.settings.accentColorList.background}; transform: scaleY(1.1)}\n                60% {fill: transparent; transform: scaleY(1)}\n                100% {fill: transparent; transform: scaleY(1)}\n            }\n            #${t} .cnx-ui-loader polygon {\n                animation-name: ${t}-bar;\n            }\n            #${t} .${d.f.PrimaryColor} {\n                background: ${this.settings.primaryColorList.background};\n                color: ${this.settings.primaryColorList.foreground};\n            }\n            #${t} .${d.f.SecondaryColor} {\n                background: ${this.settings.secondaryColorList.background};\n                color: ${this.settings.secondaryColorList.foreground};\n            }\n            #${t} .${d.f.TitleComponent}.${d.f.TitleLink}:${this.settings.isMobile?"active":"hover"} .${Qo.Text} {\n                background-color: ${Object($t.j)(this.settings.accentColorList.background,this.wT)}\n            }\n            #${t} .${d.f.SlideProgressBar} .${d.f.ProgressFill}.${d.f.AccentColor} {\n                background-color: ${this.settings.useAccentColorForProgressBar?this.settings.accentColorList.background:d.l.Icons}\n            }\n            #${t} em {\n                color: ${this.settings.accentColorList.background};\n            }\n            #${t} .${d.m.InheritTitleFontFamily} {\n                font-family: ${e} !important;\n            }\n            #${t} .${d.m.InheritBodyFontFamily} {\n                font-family: ${i} !important;\n            }\n        `.trim();this.globalDomUtilsService.addCssString(s)}FT(){const{bodyFontFamily:t,titleFontFamily:i}=this.settings.fontFamilySettings;return Object(C.h)(t)&&Object(C.h)(i)?this.settings.fontFamilySettings:{titleFontFamily:Object(j.q)(this.$container),bodyFontFamily:Object(j.j)(this.$container)}}PT(){this.$T()&&this.hideExpandButton()}$T(){return this.UT()||!this.VT()}UT(){return this.settings.os===Vt.b.Ios}VT(){return!0===this.settings.expandButtonEnabled}NT(t={}){const i=this.getComponent(Xt.CtaButton);i&&Object(C.h)(t.label)&&i.changeLabel(t.label)}hideExpandButton(){this.BT().hideExpandButton()}showExpandButton(){this.BT().showExpandButton()}BT(){return this.getComponent(Xt.PlayspaceSettingsMenu)}CT(t=[]){this.ST.setCapabilityList(t)}TT(t=!0){const{excludedComponents:i,includedComponents:e}=this.ST.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}updateQualityMenu(t){const i=this.getComponent(Xt.PlayspaceSettingsMenu);i&&i.updateQualityMenu(t)}updateQuality(t){const i=this.getComponent(Xt.PlayspaceSettingsMenu);i&&i.updateQuality(t)}setTotalSlides(t){const i=this.getComponent(Xt.PlayspaceProgressBar);i&&i.setSlides(t)}setDuration(t){const i=this.getComponent(Xt.PlayspaceProgressBar);i&&(i.setDuration(t),this.currentState.updateDuration())}setCurrentIndex(t){const i=this.getComponent(Xt.PlayspaceProgressBar);i&&i.setCurrentIndex(t)}updateVolume(t){const i=this.getComponent(Xt.VolumeButton);i&&i.setState(t>0?He.Unmute:He.Mute)}expand(){this.BT().setExpand()}collapse(){this.BT().setCollapse()}onResizeUi(t,i){this.RT.closeAllContextMenus(),this.LT(t,i)}onFirstTimeInView(){const t=this.getComponent(Xt.TopTitle);t&&t.triggerLogoAnimation()}hide(){super.hide()}setMediaContainerRatio(t){Object(j.J)(this.MT,t)}get $mediaContainer(){return this.MT}onSlideTransitionStart(t){const i=this.getComponent(Xt.PlayspaceProgressBar);i&&i.pauseProgress(),this.CT(t),this.TT(),this.xT.forEach(i=>{const e=this.getComponent(i);e&&e.onSlideTransitionStart&&e.onSlideTransitionStart(t)})}onSlideTransitionEnd(){this.xT.forEach(t=>{const i=this.getComponent(t);i&&i.onSlideTransitionEnd&&i.onSlideTransitionEnd()})}onSlideTimeUpdate(t,i){this.xT.forEach(e=>{const s=this.getComponent(e);s&&s.onSlideTimeUpdate&&s.onSlideTimeUpdate(t,i)})}updateCapabilityMetadata(t){switch(t.type){case Oo.CtaButton:this.NT(t.metadata)}}get footer(){return this.$I}destroy(){this.interactionService.unregisterAll(this),this.unsubscribeAll(this),super.destroy()}}const cu={StateChanged:"stateChanged",ContentReset:"contentReset",ContentStart:"contentStart",ContentEnd:"contentEnd"};class uu{constructor(t,i,e,s,n,r,h){this.mediator=t,this.HT=i,this.qT=e,this.zT=s,this.WT=n,this.GT=r,this.JT=h,this.QT=!1,this.XT=!1,this.YT=!1,this.qu=!1,this.KT=!1,this.ZT=!0,this.tP=()=>{this.QT=!0,this.iP===Tt.PlayingState?this.play(!1):this.pause(!1)},this.eP=()=>{switch(this.XT=!0,this.GT){case no.ProtoEndOfSlideCycleMode.Loop:this.reset();break;case no.ProtoEndOfSlideCycleMode.Stop:this.stop()}},this.sP=null,this.nP=null,this.JT&&(this.QT=!0)}rP(t){this.sP!==t&&(this.nP=this.sP,this.sP=t,this.mediator.publish(this,cu.StateChanged,{payload:this.sP}))}hP(t){return this.sP===t}resume(){this.nP&&this.rP(this.nP)}stop(){this.HT.stop(),this.rP(Tt.StoppedState)}handleSlidesEnd(){this.aP()}oP(){this.rP(Tt.PrerollState)}aP(){this.mediator.publish(this,Wa.ContentEnd),this.WT?this.rP(Tt.PostrollState):this.eP()}cP(t){return t===Tt.PrerollState||t===Tt.PostrollState}uP(t){return t===Tt.PrerollState&&this.QT||t===Tt.PostrollState&&this.XT}setViewabilityState(t){this.qu=t}play(t){if(this.iP=Tt.PlayingState,!(this.hP(Tt.PlayingState)||this.hP(Tt.HiddenState)&&this.YT||this.cP(this.sP)&&!this.uP(this.sP)||this.hP(Tt.StoppedState)&&!t))if(!this.zT||this.QT){if(this.hP(Tt.StoppedState))return this.QT=!1,void this.reset();this.qT.setDuration(this.HT.remainingTime),this.HT.play(),this.rP(Tt.PlayingState),this.ZT&&(this.ZT=!1,this.mediator.publish(this,Wa.ContentStart))}else this.oP()}reset(){this.mediator.publish(this,cu.ContentReset),this.sP=null,this.XT=!1,this.ZT=!0,this.HT.resetSlider(),this.play(!1)}pause(t){this.iP=Tt.PausedState,this.hP(Tt.PausedState)||this.hP(Tt.HiddenState)||this.cP(this.sP)&&!this.uP(this.sP)||this.hP(Tt.StoppedState)&&!t||(this.HT.pause(),this.rP(Tt.PausedState))}pauseToggle(){if(this.hP(Tt.PausedState)||this.hP(Tt.PlayingState))return this.hP(Tt.PausedState)&&this.KT?(this.KT=!1,void this.play(!1)):this.hP(Tt.PlayingState)?(this.KT=!0,void this.pause(!1)):void 0}hide(){this.HT.pause(),this.YT=!0,this.rP(Tt.HiddenState)}show(){this.hP(Tt.HiddenState)&&(this.YT=!1,this.nP!==Tt.PostrollState?this.nP!==Tt.PrerollState?this.qu?this.goToNextSlide():this.iP===Tt.PlayingState?this.play(!1):this.pause(!1):this.tP():this.eP())}setCurrentSlide(t){this.cP(this.sP)&&!this.uP(this.sP)||this.HT.setCurrentSlide(t)}goToNextSlide(){this.cP(this.sP)&&!this.uP(this.sP)||(this.HT.goToNextSlide(),this.hP(Tt.StoppedState)||this.play(!1))}goToPrevSlide(){this.cP(this.sP)||(this.play(!1),this.HT.goToPrevSlide())}exitRollBreak(){this.sP!==Tt.PostrollState?this.tP():this.eP()}}class lu extends o.a{constructor(t,i,e,s){super(),this.mediator=t,this.lP=i,this.Ig=e,this.Lo=s,this.Tp=!1,this.dP=!1,Object(C.h)(i.imageUrl)||(i.imageUrl=zt.a.endPoints.base.image),this.Gl=new jt,this.MT=this.Ig.createElementByString(this.fP()),this.pP()}set isLoaded(t){this.dP=t}get isLoaded(){return this.dP}bP(t,i){const e=t>i?kt.Landscape:kt.Portrait;return{imageUrl:this.vP[e],altText:Object(C.a)(this.lP.altText)?this.lP.altText:"",queryParams:this.lP.mediaContext===no.ProtoMediaContextEnum.Logo?Jt.getScaledImageQueryParams(t,i):Jt.getSmartCroppedImageQueryParams(t,i),width:t,height:i}}pP(){const{imageUrl:t,portraitImageUrl:i}=this.lP;this.vP={[kt.Landscape]:t,[kt.Portrait]:Object(C.h)(i)?i:t}}get duration(){return this.lP.slideDuration*$.f}getThumbnailUrlParams(t,i){return this.bP(t,i)}destroy(){}}var du=e(127),fu=e.n(du);class pu extends lu{constructor(t,i,e,s){super(t,i,e,s),this.type=h.ProtoMediaTypeEnum.Image,this.mP=t=>{t.preventDefault()},this.gP()}gP(){this.lP.mediaContext===no.ProtoMediaContextEnum.Logo&&Object(j.a)(this.MT,Ua.MediaLogo)}yP(){this.wP=this.MT.clientWidth,this.xP=this.MT.clientHeight}SP(){this.OP=setTimeout(()=>{const{clientWidth:t,clientHeight:i}=this.MT.parentElement,{imageUrl:e,altText:s,width:n,height:r,queryParams:h}=this.bP(t,i),a=this.Gl.getImage(e,s,n,r,h,!0);this.Pb&&this.MT.removeChild(this.Pb),a&&(this.MT.appendChild(a),this.Pb=a,this.kP(this.Pb))},0)}_P(){this.Pb&&Object(C.h)(this.lP.imageUrl)&&this.SP()}jP(){return Object(C.a)(this.MT)&&Object(C.a)(this.wP)&&Object(C.a)(this.xP)}AP(t){return!!this.jP()&&Math.abs(this.wP-this.MT.clientWidth)>=this.wP/t}IP(t){return!!this.jP()&&Math.abs(this.xP-this.MT.clientHeight)>=this.xP/t}kP(t){t.addEventListener("mousedown",this.mP)}CP(t){t.removeEventListener("mousedown",this.mP)}fP(){return fu.a}reset(){this.isLoaded&&(this.MT.style.transitionDuration="",this.MT.style.transform="matrix(1.1, 0, 0, 1.1, 0, 0)")}onSlideResizeCallback(){(this.AP(10)||this.IP(10))&&(this._P(),this.yP())}play(){this.isLoaded&&(this.MT.style.transform="",this.MT.style.transitionDuration=`${this.lP.slideDuration}s`,Object(j.O)(this.MT,d.j.Paused,d.j.Playing))}pause(){this.isLoaded&&(this.MT.style.transitionDuration="",this.MT.style.transform=this.Ig.getTransformPropertyValue(this.MT),Object(j.O)(this.MT,d.j.Playing,d.j.Paused))}load(t){this.isLoaded||(this.isLoaded=!0,t.appendChild(this.MT),this.yP(),this.pause(),this.SP())}destroy(){this.Pb&&this.CP(this.Pb),clearTimeout(this.OP),super.destroy()}}var bu=e(128),vu=e.n(bu);class mu{constructor(t){this.TP=[{id:Pt.H264,extension:"mp4",type:"video/mp4"},{id:Pt.Hevc,extension:"mp4",type:"video/mp4"}],this.PP=this.TP.find(i=>i.id===t)}get type(){const t=this.PP.codecs?`codecs=${this.PP.codecs}`:"";return`${this.PP.type}; ${t}`}get id(){return this.PP.id}}class gu{constructor(t,i,e){this.mediator=t,this.Lo=i,this.MP=e,this.EP={quality:Ct.Auto,height:360},this.resizeObserverBinded=!1,this.LP=30,this.Go=()=>{const t=this.MP.clientHeight;if(this.RP(t)&&this.currentQualitySettings.quality===Ct.Auto){const i={height:t,quality:Ct.Auto};this.setCurrentQualitySettings(i),this.mediator.publish(this,Et.CurrentQuality,{payload:i})}}}setCurrentQualitySettings(t){this.EP.quality=t.quality,this.EP.height!==t.height&&(this.EP.height=t.height,this.mediator.publish(this,Et.Change))}RP(t){return!this.EP.height||t/this.EP.height*100-100>this.LP}addResizeObserver(){this.resizeObserverBinded=!0,this.Lo.on(this.MP,this.Go)}removeResizeObserver(){this.resizeObserverBinded=!1,this.Lo.off(this.MP,this.Go)}setQuality(t){t.quality===Ct.Auto?this.resizeObserverBinded||(this.setCurrentQualitySettings({height:t.height,quality:t.quality}),this.addResizeObserver(),this.Go()):(this.resizeObserverBinded&&this.removeResizeObserver(),this.setCurrentQualitySettings(t)),this.mediator.publish(this,Et.CurrentQuality,{payload:this.EP})}get currentQualitySettings(){return this.EP}destroy(){this.removeResizeObserver()}}const yu={TrackLoaded:"trackLoaded"},wu={height:0,quality:Ct.Auto},xu="en",Su="subtitle";class Ou extends o.a{constructor(t,i,e){super(),this.mediator=t,this.Ig=i,this.Ag=e,this.BP=[],this.DP=()=>{this.mediator.publish(this,yu.TrackLoaded)}}FP(t){this.$P=t,this.UP()}VP(t){this.Ag.innerHTML="",t.forEach(t=>{this.Ag.appendChild(t)})}NP(){return this.BP}UP(){if(this.BP=[],this.$P&&this.$P.subtitle){const t=this.Ig.createElement("track");t.src=this.$P.subtitle,t.srclang=xu,t.kind=Su,t.default=!0,t.addEventListener("load",this.DP,!1),t.addEventListener("loaded",this.DP,!1),this.BP.push(t)}}}class ku extends Ou{constructor(t,i,e,s,n,r={},h){super(t,i,n),this.Lo=e,this.Qb=s,this.HP=h,this.qP=null,this.zP=10.13,this.WP=this.GP(r)}start(){try{this.JP=new gu(this,this.Lo,this.Qb),this.QP(),this.setQuality(this.HP)}catch(t){Object(n.a)({message:"Mp4SourceHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.FP(t),this.XP(this.YP(),i)}setQuality(t){this.JP.setQuality(t)}get currentQualitySettings(){return this.JP.currentQualitySettings}attachMedia(){return new Promise(t=>{this.KP(),t()})}detachMedia(){this.Ag.removeAttribute("src"),this.XP(null)}destroy(){this.JP.destroy()}QP(){this.relay(Et.CurrentQuality,this.JP,this,this.mediator),this.subscribe(Et.Change,this.JP,()=>{this.ZP()})}ZP(){this.XP(this.YP()),this.mediator.publish(this,Et.Change,{payload:this.JP.currentQualitySettings.height})}tM(t){this.VP(t),this.Ag.load()}YP(){return[...this.iM(),...this.NP()]}iM(){if(!this.Ag||!this.$P)return[];const t=[];return this.$P.getSources(this.JP.currentQualitySettings.height,this.WP).forEach(i=>{const e=this.Ig.createElement("source");e.src=i.src,e.type=i.type,t.push(e)}),t}KP(){this.qP&&(this.tM(this.qP),this.qP=null)}XP(t,i=!1){this.qP=t,i&&this.KP()}GP(t){let i;switch(t.os){case Vt.b.Ios:i=[Pt.Hevc,Pt.H264];break;case Vt.b.Mac:i=t.osVersion>this.zP&&t.browser===Ue.a.Safari?[Pt.Hevc,Pt.H264]:[Pt.H264];break;default:i=[Pt.H264]}return i.map(t=>new mu(t))}}const _u={UnexpectedError:"unexpectedError",BufferingError:"bufferingError",FragBuffered:"fragBuffered",ManifestLoaded:"manifestLoaded",LevelSwitching:"levelSwitching",StreamEnded:"streamEnded"};var ju;!function(t){t.Http="http",t.Https="https"}(ju||(ju={}));var Au=e(40);const Iu={enableWorker:!1,capLevelToPlayerSize:!0,cnxRenderWindow:window,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:0};class Cu extends Ou{constructor(t,i,e,s,n,r){super(t,i,e),this.eM=s,this.HP=n,this.sM=r,this.nM=[],this.rM=Ct.Auto,this.hM=320,this.aM=!1,this.oM=!1,this.cM=!1,this.Eg=()=>{this.Mg.off(Tn.Events.MEDIA_ATTACHED,this.Eg);const t=this.uM(this.lM);this.Mg.loadSource(t),this.Mg.once(Tn.Events.MANIFEST_PARSED,this.Rg)},this.Rg=()=>{this.Mg.off(Tn.Events.MANIFEST_PARSED,this.Rg),this.Mg.on(Tn.Events.LEVEL_SWITCHING,this.dM),this.Mg.on(Tn.Events.LEVEL_SWITCHED,this.fM),this.Mg.on(Tn.Events.FRAG_BUFFERED,this.pM),this.Mg.on(Tn.Events.FRAG_LOADING,this.bM),this.Mg.on(Tn.Events.FRAG_LOADED,this.vM),this.Mg.on(Tn.Events.BUFFER_APPENDING,this.mM),this.Mg.on(Tn.Events.BUFFER_APPENDED,this.gM),this.Mg.on(Tn.Events.BUFFER_EOS,this.yM),this.lM=null,this.wM(),this.xM(),this.SM(),this.OM.resolve()},this.kM=()=>{this.lM=null,this.Ag.removeEventListener(It.LoadedMetadata,this.kM),this._M.resolve()},this.xM=()=>{const t=this.nM.map(t=>({videoHeight:t.height,isHD:t.height>=Rt,label:t.level.toString()}));this.mediator.publish(this,_u.ManifestLoaded,{payload:{qualityList:t}})},this.pM=()=>{this.mediator.publish(this,_u.FragBuffered)},this.bM=()=>{this.aM=!0},this.vM=()=>{this.aM=!1},this.mM=()=>{this.oM=!0},this.gM=()=>{this.oM=!1},this.yM=()=>{this.mediator.publish(this,_u.StreamEnded)},this.Tg=(t,i)=>{if(i.details===Tn.ErrorDetails.BUFFER_STALLED_ERROR&&(this.aM||this.oM?this.mediator.publish(this,_u.BufferingError):(this.cM||(this.Mg.recoverMediaError(),this.Ag.play().then(()=>{this.cM=!1}).catch(()=>{this.cM=!1})),this.cM=!0)),i.fatal)switch(i.type){case Tn.ErrorTypes.NETWORK_ERROR:if(i.details===Tn.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.jM("hls_network_error_manifest_parsing_error_FATAL");if(i.details===Tn.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.mediator.publish(this,_u.UnexpectedError);this.Mg.startLoad();break;case Tn.ErrorTypes.MEDIA_ERROR:this.Mg.recoverMediaError();break;default:this.jM("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===Tn.ErrorTypes.MEDIA_ERROR&&i.details===Tn.ErrorDetails.BUFFER_APPENDING_ERROR&&this.jM("hls_media_error_buffer_appending_error"),i.type===Tn.ErrorTypes.NETWORK_ERROR&&i.details===Tn.ErrorDetails.MANIFEST_PARSING_ERROR&&this.jM("hls_network_error_manifest_parsing_error")},this.AM=()=>{this.jM("hls_video_tag_error",`code_${this.Ag.error.code}_message_${this.Ag.error.message}`)},this.fM=(t,i)=>{this.hM=this.nM.find(t=>t.level===i.level).height,this.mediator.publish(this,Et.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,Et.CurrentQuality,{payload:this.currentQualitySettings})},this.dM=()=>{this.mediator.publish(this,_u.LevelSwitching)},Pn&&(this.Mg=this.Ig.initHls(Iu),this.sM&&(this.Mg.autoLevelCapping=1)),this.hM=this.HP.height,this.rM=this.HP.quality}start(){}get liveSyncPosition(){if(this.Mg)return this.Mg.liveSyncPosition}setSource(t,i=!1){this.IM=t.id,this.FP(t),this.lM=t,i&&this.attachMedia()}attachMedia(){return new Promise(t=>{if(this.Mg?this.Mg.on(Tn.Events.ERROR,this.Tg):this.Ag.addEventListener(It.Error,this.AM),this.lM){const i=this.NP();this.VP(i),this.Mg?this.CM().then(()=>{t()}):this.TM().then(()=>{t()})}else t()})}detachMedia(){this.nM=[],this.Mg?(this.Mg.detachMedia(),this.PM()):(this.Ag.removeAttribute("src"),this.Ag.removeEventListener(It.LoadedMetadata,this.kM),this.Ag.removeEventListener(It.Error,this.AM))}setQuality(t){this.rM=t.quality,this.hM=t.height,this.Mg&&this.SM(),this.mediator.publish(this,Et.Change,{payload:this.currentQualitySettings.height}),this.mediator.publish(this,Et.CurrentQuality,{payload:this.currentQualitySettings})}get currentQualitySettings(){return{quality:this.rM,height:this.hM}}onQualityChanged(){return new Promise(()=>{})}destroy(){this.Mg?(this.PM(),this.Mg.destroy(),this.Mg=null):(this.Ag.removeEventListener(It.LoadedMetadata,this.kM),this.Ag.removeEventListener(It.Error,this.AM))}CM(){return this.OM=new Au.a,this.Mg.attachMedia(this.Ag),this.Mg.once(Tn.Events.MEDIA_ATTACHED,this.Eg),this.OM.promise}TM(){return this._M=new Au.a,this.Ag.src=this.uM(this.lM),this.Ag.addEventListener(It.LoadedMetadata,this.kM),this._M.promise}PM(){this.Mg.off(Tn.Events.MEDIA_ATTACHED,this.Eg),this.Mg.off(Tn.Events.MANIFEST_PARSED,this.Rg),this.Mg.off(Tn.Events.ERROR,this.Tg),this.Mg.off(Tn.Events.LEVEL_SWITCHING,this.dM),this.Mg.off(Tn.Events.LEVEL_SWITCHED,this.fM),this.Mg.off(Tn.Events.FRAG_BUFFERED,this.pM),this.Mg.off(Tn.Events.FRAG_LOADING,this.bM),this.Mg.off(Tn.Events.FRAG_LOADED,this.vM),this.Mg.off(Tn.Events.BUFFER_APPENDING,this.mM),this.Mg.off(Tn.Events.BUFFER_APPENDED,this.gM),this.Mg.off(Tn.Events.BUFFER_EOS,this.yM)}wM(){this.Mg.levels.forEach((t,i)=>{this.sM&&i>1||this.nM.push({level:i,height:t.height})})}jM(t,i){Object(n.a)({message:t,exception:this.IM,level:h.ProtoLoggingLevelEnum.WARNING,callStack:i}),this.mediator.publish(this,_u.UnexpectedError)}SM(){if(this.rM===Ct.Auto)this.Mg.currentLevel=-1;else try{this.Mg.currentLevel=this.nM.find(t=>t.height===this.hM).level}catch(t){Object(n.a)({message:"HlsSourceHandler_quality_not_present_in_hls_manifest",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}uM(t){try{const i=t.getHlsSource(),e=Object($t.g)(i);return e&&e.protocol?i:`${this.eM}:${i}`}catch(t){Object(n.a)({exception:t.message,message:"HlsSourceHandler_undefined_sourceMeta",level:h.ProtoLoggingLevelEnum.FATAL,callStack:t.stack,throttle:5,sendMaxLog:!1})}}}var Tu;!function(t){t.Disabled="disabled",t.Hidden="hidden",t.Showing="showing"}(Tu||(Tu={}));class Pu{constructor(t,i,e,s,n){this.mediator=t,this.Ag=i,this.Wg=e,this.Kb=n,this.MM=!1,this.EM=!1,this.LM=Tu.Hidden,this.RM=0,this.Gg=!1,this.BM=null,this.DM=t=>{switch(t.type){case It.Play:if(!this.Gg&&this.Kb.config.isInAppAndroid)return void this.pause();this.MM=!0;break;case It.Timeupdate:this.mediator.publish(this,t.type,{payload:this.MM});break;case It.Error:const i=this.Ag.error?this.Ag.error.message:"";this.mediator.publish(this,Mt.PlayError,{payload:i});break;case It.LoadedMetadata:this.EM=!0,Object(C.d)(this.FM)&&(this.currentTime=this.FM,this.FM=null),this.mediator.publish(this,t.type);break;default:this.mediator.publish(this,t.type)}},this.play=()=>(this.Gg=!0,this.BM=this.Ag.play(),null!==this.BM?(this.RM++,this.BM.then(()=>{this.MM=!0,this.Kb.config.os.os===Vt.b.Ios&&Object(j.C)(this.Ag),this.RM--,this.$M(),this.BM=null}).catch(t=>{throw this.mediator.publish(this,Mt.PlayError,{payload:t}),this.MM=!1,this.RM--,this.BM=null,t})):Promise.resolve()),this.pause=()=>{null!==this.BM?this.BM.then(this.UM).catch(this.UM):this.VM()},this.UM=()=>{this.RM>1||this.VM()},this.volume=s,this.QP()}QP(){this.Wg.forEach(t=>{this.Ag.addEventListener(t,this.DM)})}$M(){this.Ag.textTracks&&0!==this.Ag.textTracks.length&&Object.keys(this.Ag.textTracks).forEach(t=>{this.Ag.textTracks[t].mode=this.LM})}set poster(t){Object(C.h)(t)&&(this.Ag.poster=t)}get poster(){return this.Ag.poster}VM(){this.Ag.pause(),this.MM=!1,this.Gg=!1}get volume(){return this.Cd}set volume(t){this.Cd=t<=1?t:t/100,this.Ag.volume=this.Cd,Object(j.V)(this.Ag,this.Cd)}get currentTime(){return this.Ag.currentTime}set currentTime(t){this.EM?this.Ag.currentTime=t:this.FM=t}get duration(){return this.Ag.duration}get playing(){return this.MM}destroy(){this.Wg.forEach(t=>{this.Ag.removeEventListener(t,this.DM)})}setTrackModes(t){this.LM=t,this.$M()}setMetaLoaded(t){this.EM=t}setCrossOriginAttribute(){this.Ag.getAttribute("crossorigin")||this.Ag.setAttribute("crossorigin","anonymous")}setPoster(t){this.poster=t.getThumbnailUrl(this.Ag.clientWidth,this.Ag.clientHeight)}getCurrentTrack(){return this.Ag.textTracks&&0!==this.Ag.textTracks.length?this.Ag.textTracks[0]:null}isPlayPending(){return this.RM>0}}class Mu extends o.a{constructor(t,i,e,s,r,a,o={},c,u){if(super(),this.mediator=t,this.Kb=i,this.Ig=e,this.Qb=s,this.Lo=r,this.NM=a,this.PP=o,this.HM=c,this.HP=u,this.qM=!0,this.zM=!1,this.WM=!1,this.GM=()=>{let t;this.currentTrack.activeCues&&this.currentTrack.activeCues.length>0&&(t=this.currentTrack.activeCues[0]),this.mediator.publish(this,_[_.CaptionUpdate],{payload:t})},this.DP=()=>{this.currentTrack&&(this.currentTrack.mode=this.JM?Tu.Hidden:Tu.Disabled,this.currentTrack.oncuechange=this.GM)},this.QM(),this.XM.appendChild(this.Ag),this.Qb.appendChild(this.XM),this.HP=this.HP||wu,this.YM=new ku(this,e,this.Lo,this.Qb,this.Ag,this.PP,this.HP),Pn||Mn(this.Ag)){const t=this.Ig.isHttpsProtocolUsed()?ju.Https:ju.Http,i=Object(C.h)(this.Kb.config.bundleID);this.ny=new Cu(this,this.Ig,this.Ag,t,this.HP,i),this.KM()}else this.qM=!1,Object(n.a)({message:"Hls_not_supported",level:h.ProtoLoggingLevelEnum.INFO})}start(){try{this.Wg=Object(u.a)(It),this.ZM=new Pu(this,this.Ag,this.Wg,this.NM,this.Kb),this.tE(),this.iE(),this.eE()}catch(t){Object(n.a)({message:"VideoHandler_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}sE(){const t=this.currentTime;this.setSource(this.nE,!0,this.YM),this.rE.attachMedia().then(()=>{this.ZM.play().then(()=>{this.WM=!1,this.hE.resolve(),this.ZM.currentTime=t}).catch(t=>{this.hE&&this.hE.isPending&&(this.WM=!1,this.hE.reject(),Object(n.a)({message:"VideoHandler_hls_error_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.hE&&this.hE.isPending&&(this.WM=!1,this.hE.reject()),Object(n.a)({message:"VideoHandler_hls_error_attach_media",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})})}KM(){this.subscribe(_u.UnexpectedError,this.ny,()=>{this.WM=!0,this.sE()}),this.subscribe(_u.ManifestLoaded,this.ny,({payload:t})=>{this.mediator.publish(this,Et.Loaded,{payload:{qualityList:t,videoMeta:this.nE}}),this.ZM.setMetaLoaded(!0)}),this.subscribe(_u.BufferingError,this.ny,()=>{this.mediator.publish(this,Mt.Buffering)}),this.subscribe(_u.FragBuffered,this.ny,()=>{this.mediator.publish(this,Mt.Buffered)}),this.subscribe(_u.StreamEnded,this.ny,()=>{this.mediator.publish(this,Mt.EndOfStream)}),this.subscribe(_u.LevelSwitching,this.ny,()=>{this.mediator.publish(this,Mt.LevelSwitching)})}tE(){this.aE(this.YM)}iE(){this.ny&&this.aE(this.ny)}aE(t){t.start(),this.oE(t)}eE(){this.Wg.forEach(t=>{this.subscribe(t,this.ZM,i=>{t===It.Canplay&&this.HM&&(this.currentTime=this.HM,this.HM=null),this.mediator.publish(this,t,i)})}),this.relay(Mt.PlayError,this.ZM,this,this.mediator)}oE(t){this.relay([Et.CurrentQuality,Mt.NewVideo],t,this,this.mediator),this.subscribe(Et.Change,t,({payload:t})=>{this.onQualityChanged(t)}),this.subscribe(yu.TrackLoaded,t,()=>{this.DP()})}get width(){return this.XM.getBoundingClientRect().width}get height(){return this.XM.getBoundingClientRect().height}get currentTime(){return this.ZM.currentTime}set currentTime(t){this.ZM.currentTime=t}forceCurrentTime(t){this.ZM.currentTime=t,this.HM=t}get duration(){return this.ZM.duration}get volume(){return this.ZM.volume}set volume(t){this.ZM.volume=t}get playing(){return this.ZM.playing}get isIosFullscreen(){return this.zM}set isIosFullscreen(t){this.zM=t,this.zM&&this.JM?this.cE():this.uE()}get currentQualitySettings(){return this.rE.currentQualitySettings}hide(){Object(j.a)(this.XM,d.d)}show(){Object(j.L)(this.XM,d.d)}setSource(t,i=!1,e){return this.HM=null,new Promise((s,r)=>{try{this.nE=t,this.rE&&this.rE.detachMedia(),e?this.lE(e):Object(C.h)(t.hlsFilePath)&&this.ny?this.rE=this.ny:this.lE(this.YM),t&&t.subtitle&&this.ZM.setCrossOriginAttribute(),this.ZM.setPoster(t),this.ZM.setTrackModes(this.JM?Tu.Hidden:Tu.Disabled),i&&this.ZM.setMetaLoaded(!1),this.rE.setSource(t,i),this.mediator.publish(this,Mt.NewVideo),s()}catch(t){Object(n.a)({message:"VideoHandler_set_video_source",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL}),r()}})}setQuality(t){this.rE.setQuality(t)}pause(){this.ZM.pause()}play(){return this.hE=new Au.a,this.rE.attachMedia().then(()=>{this.ZM.play().then(()=>{this.hE.resolve()}).catch(t=>{!this.WM&&this.hE&&this.hE.isPending&&(this.hE.reject(),Object(n.a)({message:"VideoHandler_public_play_content_player_play",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL}))})}).catch(t=>{this.hE&&this.hE.isPending&&this.hE.reject(t),Object(n.a)({message:"VideoHandler_public_play_attach_media_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}),this.hE.promise}isPlayPending(){return this.ZM.isPlayPending()}showCaptions(){this.JM=!0,this.ZM.setTrackModes(Tu.Hidden)}hideCaptions(){this.JM=!1,this.ZM.setTrackModes(Tu.Disabled),this.currentTrack&&this.mediator.publish(this,_[_.CaptionUpdate])}destroy(){this.rE.destroy(),this.XM.parentNode.removeChild(this.XM)}QM(){this.XM=this.Ig.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.Ag=this.Ig.createElementByString('<video class="cnx-video-tag"></video>'),this.PP.os===Vt.b.Ios&&(this.Ag.setAttribute("playsinline",""),this.Ag.setAttribute("webkit-playsinline",""))}lE(t){this.rE=t,this.rE.setQuality({quality:Ct.Auto,height:0})}onQualityChanged(t){const i=this.ZM.playing;this.HM=this.currentTime,i&&this.rE.onQualityChanged&&this.rE.onQualityChanged().then(()=>{this.ZM.setMetaLoaded(!1),this.ZM.play().catch(t=>{Object(n.a)({message:"VideoHandler_quality_changed",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})})}),this.mediator.publish(this,Et.Change,{payload:t})}get currentTrack(){return this.ZM.getCurrentTrack()}cE(){this.currentTrack&&(this.currentTrack.oncuechange=null,this.mediator.publish(this,_[_.CaptionUpdate]),this.currentTrack.mode=Tu.Showing)}uE(){if(this.currentTrack){switch(this.currentTrack.mode){case Tu.Showing:case Tu.Hidden:this.JM=!0;break;case Tu.Disabled:this.JM=!1}this.mediator.publish(this,this.JM?_[_.CaptionOn]:_[_.CaptionOff])}this.DP()}}class Eu{constructor(t,i,e){this.Vj=t,this.dE=i,this.fE=[],this.pE=[],this.bE=[],this.vE=[],this.mE=[],this.Jp=[],this.gE=e.title,this.Ju=e.altText,this.yE=e.description,this.Ug=e.clickUrl,this.fE=e.keywordList,this.wE=e.languageId,this.pE=e.trackList,this.xE=e.thumbnail,this.yt=e.duration,this.vE=e.customFields,this.SE=e.hlsFilePath,this.OE=e.sourceItemId,this.mE=e.videoIndexes,Object(l.h)(e.renditionList)&&(this.bE=this.kE(e.renditionList),this._E(e.renditionList))}kE(t){return t.sort((t,i)=>t.height-i.height)}setAvailableQualities(t){this.Jp=t}_E(t){Object(l.e)("height",t).forEach((t,i)=>{this.Jp.push({videoHeight:t.height,label:`${t.height}p`,isHD:t.height>=Rt})})}jE(t,i){return this.bE.find(e=>e.codec===t&&e.height===i)}AE(t,i){let e=`${t}${this.Vj}/`;return Object(C.h)(this.dE)?e+=`${this.dE}/${i}`:e+=i,e}IE(t,i){const e=Object(bt.c)(t,this.Jp.map(t=>t.videoHeight));return this.jE(i,e)}get hlsFilePath(){return this.SE}getAvailableQualities(){return this.Jp}getClosestSourceQuality(t){let i;const e=Object(bt.c)(t,this.Jp.map(t=>t.videoHeight));return this.Jp.forEach(t=>{t.videoHeight===e&&(i=t)}),i}getSources(t,i){const e=[];return i.forEach(i=>{const s=this.IE(t,i.id);Object(l.h)(e)||s&&e.push({src:this.AE(zt.a.endPoints.base.video,s.file),type:i.type})}),e}getHlsSource(){return this.AE(zt.a.endPoints.base.video,this.SE)}getThumbnailUrl(t,i){const e=this.AE(zt.a.endPoints.base.image,this.xE);return Jt.getSmartCroppedImageUrl(e,t,i)}get title(){return this.gE}get altText(){return Object(C.a)(this.Ju)?this.Ju:""}get description(){return this.yE}get clickUrl(){return this.Ug}get keywords(){return this.fE}get languageId(){return this.wE}get sourceItemId(){return this.OE}get subtitle(){if(this.pE&&this.pE[0])return this.AE(zt.a.endPoints.base.video,this.pE[0].file)}get spriteSheet(){return this.CE}get duration(){return this.yt}get id(){return this.Vj}get customFields(){return this.vE}get videoIndexes(){return this.mE}}class Lu extends Eu{constructor(t){super(null,null,t)}getSources(t,i){return i.map(({id:i,type:e})=>{const s=this.IE(t,i);if(s)return{type:e,src:`${s.file}`}}).filter(t=>t)}getThumbnailUrl(t,i){return Jt.getSmartCroppedImageUrl(this.xE,t,i)}}class Ru extends lu{constructor(t,i,e,s,n,r=0,a={}){super(t,i,s,n),this.Kb=e,this.NM=r,this.PP=a,this.TE=.1,this.type=h.ProtoMediaTypeEnum.Video,this.PE={[kt.Landscape]:{renditionList:[],videoSourceMeta:void 0},[kt.Portrait]:{renditionList:[],videoSourceMeta:void 0}},this.ME=null,this.getClosestSourceQuality=t=>(this.EE||this.LE(),this.PE[this.EE].videoSourceMeta.getClosestSourceQuality(t)),this.RE(),this.BE()}RE(){this.lP.videoRendition.renditions.forEach(({codec:t,height:i,width:e,videoUrl:s})=>{const n={codec:no.ProtoPlayspaceCodecEnum[t],height:i,file:s};i<e?this.PE[kt.Landscape].renditionList.push(n):this.PE[kt.Portrait].renditionList.push(n)});const t=this.PE[kt.Landscape].renditionList,i=this.PE[kt.Portrait].renditionList;Object(l.h)(t)||Object(l.h)(i)?(Object(l.h)(t)||(this.PE[kt.Landscape].renditionList=i),Object(l.h)(i)||(this.PE[kt.Portrait].renditionList=t)):Object(n.a)({message:"SlideVideo_no_renditions",level:h.ProtoLoggingLevelEnum.FATAL})}BE(){Object.keys(this.PE).forEach(t=>{const i=this.PE[t];i.videoSourceMeta=new Lu({title:this.lP.title,altText:this.lP.altText,clickUrl:this.lP.clickUrl,renditionList:i.renditionList,thumbnail:this.lP.imageUrl})})}DE(t){this.FE=new Mu(this,this.Kb,this.Ig,t,this.Lo,this.NM,this.PP,this.TE)}$E(){this.subscribe(Et.Change,this.FE,({payload:t})=>{const i=this.getClosestSourceQuality(t);this.mediator.publish(this,Et.Change,{payload:i.videoHeight})})}LE(){const{clientHeight:t,clientWidth:i}=this.MT;this.EE=t<i?kt.Landscape:kt.Portrait}UE(t){let i;this.FE&&(t&&(i=this.FE.currentTime),this.FE.setSource(this.PE[this.EE].videoSourceMeta,!0).then(()=>{t&&this.FE.forceCurrentTime(i),this.FE.playing&&this.VE()}))}fP(){return vu.a}VE(){this.FE.play().catch(()=>{})}play(){this.isLoaded&&this.VE()}pause(){this.isLoaded&&this.FE.pause()}reset(){this.dP&&(this.FE.currentTime=this.TE)}load(t){this.isLoaded||(t.appendChild(this.MT),this.isLoaded=!0,this.DE(this.MT),this.$E(),this.FE.start(),this.LE(),this.UE(),this.ME&&this.setQuality(this.ME),this.pause())}getAvailableQualities(){return this.PE[this.EE].videoSourceMeta.getAvailableQualities()}get currentQuality(){return this.FE.currentQualitySettings}get volume(){return this.isLoaded?this.FE.volume:this.NM}set volume(t){this.isLoaded?this.FE.volume=t:this.NM=t}setQuality(t){this.FE?this.FE.setQuality(t):this.ME=t}onSlideResizeCallback(){const t=this.EE;this.Ig.cancelRequestAnimationFrame(this.NE),this.NE=this.Ig.requestAnimationFrameHelper(()=>{if(this.LE(),t!==this.EE){const t=!0;this.UE(t)}})}}class Bu{constructor(t){this.oI=t}get template(){return`\n        <cnx class="cnx-ui-ps-slide-wrapper">\n            <cnx class="cnx-ui-ps-slide"></cnx>\n            <cnx class="cnx-ui-ps-slide-bg"></cnx>\n            <cnx class="cnx-ui-ps-cta-wrapper">\n                ${this.HE()}\n            </cnx>\n        </cnx>\n        `.trim()}HE(){return this.oI.disableCTARendering?"":`[[${Xt.CtaButton}]]`}}class Du extends hi{enterState(){super.enterState();const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.startProgress();const i=this.context.getComponent(Xt.CtaButton);i&&i.startProgress()}exitState(){super.exitState()}updateDuration(){const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.startProgress()}}class Fu extends oi{enterState(){super.enterState();const t=this.context.getComponent(Xt.PlayspaceProgressBar);t&&t.pauseProgress();const i=this.context.getComponent(Xt.CtaButton);i&&i.pauseProgress()}exitState(){super.exitState()}updateDuration(){}}class $u extends Fu{enterState(){super.enterState()}exitState(){super.exitState()}}class Uu extends Fu{enterState(){super.enterState()}exitState(){super.exitState()}}class Vu extends Fu{enterState(){super.enterState()}exitState(){super.exitState()}}class Nu extends di{constructor(t,i,e,s,n,r,h,a,o){super(t,i,e,n,new Xc(e,o,s,i,{isMobile:r})),this.mediator=t,this.$container=i,this.Ig=e,this.$I=h,this.pT=[Xt.CtaButton],this.ST=new nu,this.Sf={[Tt.PlayingState]:new Du(this),[Tt.PausedState]:new Fu(this),[Tt.StoppedState]:new $u(this),[Tt.HiddenState]:new Uu(this),[Tt.PrerollState]:new Vu(this),[Tt.PostrollState]:new Vu(this)},this.qE(),this.Sf[a].enterState(),this.CT(),this.TT(!1)}qE(){const t=this.getComponent(Xt.CtaButton);t&&t.setFooterElement(this.$I)}CT(t=[]){this.ST.setCapabilityList(t)}TT(t=!0){const{excludedComponents:i,includedComponents:e}=this.ST.getComponentList();i.map(t=>this.getComponent(t)).forEach(i=>i&&i.hideComponent(t)),e.map(t=>this.getComponent(t)).forEach(i=>i&&i.showComponent(t))}kT(t){switch(t){case qa.CallToAction:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.UrlClick});break;case ii.a[ii.a.Scroll]:this.mediator.publish(this,qa.GeneralClickInteraction,{payload:h.ProtoMediaClickTypeEnum.ScrollClick})}}handleComponentEvent(t,i,e){this.kT(t),t===qa.CallToAction?Object(C.h)(i.payload)?this.mediator.publish(this,qa.CallToAction,i):this.mediator.publish(this,_[_.Next]):this.mediator.publish(this,t,i)}handleCapabilityList(t){this.CT(t),this.TT(),this.pT.forEach(i=>{const e=this.getComponent(i);e&&e.handleCapabilities(t)})}}const Hu="cnx-ui-ps-slide";class qu extends o.a{constructor(t,i,e,s,n,r,h,a,o,c){super(),this.mediator=t,this.lP=i,this.Ig=e,this.if=s,this.Lo=n,this.zE=r,this.Yn=h,this.oI=a,this.$I=o,this.Od=c,this.WE=[{type:Oo.TopLogo,metadata:{}}],this.ef=this.Ig.createElementByString(`<cnx class="${Ua.Slide}"></cnx>`),this.GE(),this.JE=this.ef.querySelector(`.${Hu}`)}get $container(){return this.ef}get slideCapabilityList(){return this.WE}get metadata(){return this.lP}get media(){return this.zE}load(){this.zE.load(this.JE)}get clickUrl(){return this.lP.clickUrl}updateCapabilityMetadata(t){if(!Object(l.h)(this.WE))return;const i=this.WE.find(({type:i})=>i===t.type);i&&(i.metadata=Object.assign(Object.assign({},i.metadata),t.metadata))}changeState(t){this.qT.changeState(t)}GE(){this.qT=new Nu(this,this.ef,this.Ig,this.Lo,this.fP(),this.Yn,this.$I,this.Od.playbackMode===no.ProtoPlayerPlaybackModeEnum.ClickToPlay?Tt.StoppedState:Tt.PausedState,this.if),this.subscribe(qa.CallToAction,this.qT,({payload:t})=>{this.mediator.publish(this,qa.CallToAction)}),this.relay(qa.GeneralClickInteraction,this.qT,this,this.mediator),this.subscribe(_[_.Next],this.qT,()=>{this.mediator.publish(this,_[_.Next])})}fP(){return new Bu(this.oI).template}QE(t,i){this.WE.push({type:t,metadata:i})}XE(){const t=this.YE(this.lP);if(!t)return;const i={label:t,useTransition:!0};this.QE(Oo.TopSlideTitle,i)}YE(t){const i=t.publisherName||t.title,e=this.Ig.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}onSlideTransitionStart(t){this.qT&&this.qT.handleCapabilityList(t)}}const zu=4;class Wu extends qu{constructor(t,i,e,s,r,a,o,c,u,d){super(t,i,e,s,r,a,o,c,u,d),this.type=no.ProtoPlayspaceSlideTypeEnum.BulletList,Object(C.f)(i.bulletListMetadata)&&Object(l.h)(this.metadata.bulletListMetadata.items)?(this.KE(),this.onSlideTransitionStart(this.WE)):Object(n.a)({message:"BulletSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}KE(){this.ZE(),this.XE(),this.tL()}ZE(){const{title:t,items:i}=this.lP.bulletListMetadata;i.length>zu&&(i.length=zu);const e=Oo.SlideTitle,s={bulletChunkList:i,titleType:ko.Bullet};Object(C.h)(t)&&(s.label=t),this.QE(e,s)}tL(){const t={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(Oo.TopStoryTitle,t)}}class Gu extends qu{constructor(t,i,e,s,r,a,o,c,u,d){super(t,i,e,s,r,a,o,c,u,d),this.type=no.ProtoPlayspaceSlideTypeEnum.Description,Object(C.f)(i.descriptionMetadata)&&Object(l.h)(this.metadata.descriptionMetadata.chunkList)?(this.iL(),this.eL(),this.onSlideTransitionStart(this.WE)):Object(n.a)({message:"DescriptionSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}iL(){const{chunkList:t,label:i}=this.lP.descriptionMetadata;let e=!1;const s=t=>Object(C.e)(t);Object(C.f)(i)&&Object(C.h)(i.text)&&(e=!0,i.colorScheme=s(i.colorScheme)?i.colorScheme:no.ProtoPlayspaceColorSchemeEnum.Primary),Object(l.h)(t)&&t.forEach((t,i)=>{t.colorScheme=0!==i||e?s(t.colorScheme)?t.colorScheme:no.ProtoPlayspaceColorSchemeEnum.Secondary:s(t.colorScheme)?t.colorScheme:no.ProtoPlayspaceColorSchemeEnum.Primary})}eL(){this.sL(),this.tL(),this.XE()}sL(){const{chunkList:t,label:i}=this.lP.descriptionMetadata,e=Oo.SlideTitle,s={descriptionChunkList:t,titleType:ko.Description};Object(C.f)(i)&&(s.label=i.text,s.labelColorScheme=i.colorScheme),this.QE(e,s)}tL(){const t={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(Oo.TopStoryTitle,t)}}const Ju={[h.ProtoMediaTypeEnum.Image]:"Read more",[h.ProtoMediaTypeEnum.Video]:"Continue video"};class Qu extends qu{constructor(t,i,e,s,n,r,h,a,o,c){super(t,i,e,s,n,r,h,a,o,c),this.type=no.ProtoPlayspaceSlideTypeEnum.Default,this.eL(),this.onSlideTransitionStart(this.WE)}eL(){this.nL(),this.rL(),this.hL(),this.aL(),this.oL(),this.tL(),this.lP.publisherName&&this.XE()}nL(){const{clickUrl:t,title:i}=this.lP,e={url:t,label:i,titleType:ko.Default};this.QE(Oo.SlideTitle,e)}rL(){this.QE(Oo.PlaybackControls)}hL(){this.QE(Oo.PlaylistControls)}oL(){const{clickUrl:t,title:i}=this.lP;if(!Object(C.h)(t))return;const e={url:t,label:this.cL(this.lP),title:i,ctaAlignToContent:!0};this.QE(Oo.CtaButton,e)}aL(){this.lP.mediaType===h.ProtoMediaTypeEnum.Video&&this.QE(Oo.VolumeControls)}tL(){const t=this.Ig.stripHtmlTags(this.lP.storyTitle).trim();if(!t)return;const i={label:t,useFallbackLabel:!0};this.QE(Oo.TopStoryTitle,i)}cL(t){const{capabilityList:i,mediaType:e}=t;if(!Object(l.h)(i))return Ju[e];const s=i.find(({type:t})=>t===no.ProtoPlayspaceSlideCapabilitiesEnum.CtaButton);return s&&s.metadata?s.metadata.label:Ju[e]}}const Xu="START";class Yu extends qu{constructor(t,i,e,s,n,r,h,a,o,c,u){super(t,i,e,s,n,r,a,o,c,u),this.uL=h,this.type=no.ProtoPlayspaceSlideTypeEnum.Cover,this.lL(),this.eL(),this.onSlideTransitionStart(this.WE)}lL(){Object(j.a)(this.ef,Qo.Cover)}eL(){this.nL(),this.oL()}nL(){const t=Oo.SlideTitle,i={titleType:ko.Cover,coverChunk:this.lP.coverMetadata,label:`${this.uL} min. story`};this.QE(t,i)}oL(){const t={label:Xu,duration:this.lP.slideDuration,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.QE(Oo.CtaButton,t)}}class Ku extends qu{constructor(t,i,e,s,r,a,o,c,u,l){super(t,i,e,s,r,a,o,c,u,l),this.type=no.ProtoPlayspaceSlideTypeEnum.Quote,Object(C.f)(i.quoteMetadata)?(this.eL(),this.onSlideTransitionStart(this.WE)):Object(n.a)({message:"QuoteSlide_no_metadata",level:h.ProtoLoggingLevelEnum.FATAL})}eL(){this.tL(),this.XE(),this.dL()}tL(){const t={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(Oo.TopStoryTitle,t)}dL(){const{text:t,source:i}=this.lP.quoteMetadata,e=Oo.SlideTitle,s={quote:t,source:i,titleType:ko.Quote};this.QE(e,s)}}const Zu="VISIT POST";class tl extends qu{constructor(t,i,e,s,n,r,h,a,o,c){super(t,i,e,s,n,r,h,a,o,c),this.type=no.ProtoPlayspaceSlideTypeEnum.Instagram,this.lL(),this.eL(),this.onSlideTransitionStart(this.WE)}lL(){Object(j.a)(this.ef,Qo.Instagram)}eL(){this.fL(),this.tL(),this.XE(),this.oL()}fL(){const{createdDate:t,comments:i,likes:e}=this.lP.instagramMetadata,s={label:this.lP.title,instagramMetadata:{createdDate:t,comments:i,likes:e},titleType:ko.Instagram};this.QE(Oo.SlideTitle,s)}tL(){const t={label:this.lP.storyTitle,useFallbackLabel:!0};this.QE(Oo.TopStoryTitle,t)}oL(){const{clickUrl:t,title:i}=this.lP;if(!Object(C.h)(t))return;const e={url:t,label:Zu,title:i,ctaAlignToContent:!1,ctaAlignToFooter:!0};this.QE(Oo.CtaButton,e)}pL(t){const i=this.metadata.instagramMetadata.handle||t.publisherName,e=this.Ig.stripHtmlTags(i).trim();return t.publisherName?`by <em>${e}</em>`:e}XE(){const t=this.pL(this.lP);if(!t)return;const i={label:t,useTransition:!0};this.QE(Oo.TopSlideTitle,i)}}class il{constructor(t,i,e,s,n,r,h,a,o,c){this.Kb=t,this.Ig=i,this.if=e,this.Lo=s,this.NM=n,this.PP=r,this.Yn=h,this.bL=a,this.$I=o,this.Od=c,this.vL={[no.ProtoPlayspaceSlideTypeEnum.Description]:Gu,[no.ProtoPlayspaceSlideTypeEnum.Default]:Qu,[no.ProtoPlayspaceSlideTypeEnum.Quote]:Ku,[no.ProtoPlayspaceSlideTypeEnum.BulletList]:Wu,[no.ProtoPlayspaceSlideTypeEnum.Instagram]:tl}}getSlide(t,i,e){const s=this.vL[t.type]||Qu,n=this.mL(t,i);switch(t.type){case no.ProtoPlayspaceSlideTypeEnum.Cover:return new Yu(i,t,this.Ig,this.if,this.Lo,n,e,this.Yn,this.bL,this.$I,this.Od);default:return new s(i,t,this.Ig,this.if,this.Lo,n,this.Yn,this.bL,this.$I,this.Od)}}mL(t,i){if(t.mediaType===h.ProtoMediaTypeEnum.Video)return new Ru(i,t,this.Kb,this.Ig,this.Lo,this.NM,this.PP);if(t.mediaType===h.ProtoMediaTypeEnum.Image)return new pu(i,t,this.Ig,this.Lo);throw new Error("Slide not found")}}var el=e(53);const sl="00000000-0000-0000-0000-000000000002",nl="PlayspaceContentHandler";class rl extends o.a{constructor(t,i,e,s,n,r,a){super(),this.mediator=t,this.Ig=i,this.Lo=e,this.Od=s,this.Kb=n,this.NA=r,this.gL=a,this.yL=new el.a(no.ProtoPlayspaceMediaMetadataResponse,nl),this.wL=0,this.xL=!1,this.SL=t=>{t&&(this.qT.onFirstTimeInView(),this.Kb.services.ViewabilityService.off(this.NA,this.SL))},this.OL(),this.GE(),this.kL(),this._L(),this.volume=this.Od.soundMode===h.ProtoPlayerSoundMode.On?1:0,this.mv(),this.Kb.services.ViewabilityService.on(this.NA,this.SL,{threshold:.5})}jL(t){return new Promise((i,e)=>{this.yL.fetchMetadata(t).then(t=>{if(window.parent.cnx_ps_slide_list&&Object(ks.b)("cnx_ps_slide_list",this.Kb.config.pageUrl)&&(t.slides=[...window.parent.cnx_ps_slide_list,...t.slides]),t.slides=this.AL(t.slides),t.slides=this.IL(t.slides),t.slides.length>=2)i(t);else{if(this.xL)return void e({message:"fallbackstory_already_used"});this.xL=!0,this.CL().then(t=>{const e=`${zt.a.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`;i(this.jL(e))}).catch(t=>{Object(n.a)({level:h.ProtoLoggingLevelEnum.FATAL,message:"PlayspaceContentH_error_getting_default_story"}),e(t)})}}).catch(t=>{e(t)})})}CL(){return new Promise((t,i)=>{cr.a.sendProtoRequest({ProtoResponse:no.ProtoFallbackStoryResponse,endpoint:zt.a.endPoints.api.fallbackstory,logError:!0}).then(i=>{t(i)}).catch(t=>{i(t)})})}AL(t){let i;if(Object(C.h)(this.Kb.config.appPageURL)){const{hostname:t,pathname:e}=Object($t.g)(this.Kb.config.appPageURL);i=`${t}${e}`}else{const{hostname:t,pathname:e}=this.Ig.getGlobalLocationProperties();i=`${t}${e}`}return t.filter(t=>{const e=Object($t.g)(t.clickUrl);return!(e&&e.hostname+e.pathname===i)})}IL(t){return t.filter(t=>t.type!==no.ProtoPlayspaceSlideTypeEnum.Stock)}kL(){const{browserType:t}=this.Kb.config.browser,{os:i,osVersion:e}=this.Kb.config.os,s={disableCTARendering:this.Od.disableCTARendering};this.HT=new so(this,this.Ig,this.Kb.services.PageFocusService,this.qT.$mediaContainer,new il(this.Kb,this.Ig,this.Kb.services.InteractionService,this.Lo,this.Od.soundMode===h.ProtoPlayerSoundMode.On?1:0,{browser:t,os:i,osVersion:e},this.Kb.config.isMobile,s,this.qT.footer,this.Od),this.Od.isSeoTraffic)}OL(){this.TL={logoUrl:this.Od.logoUrl,isMobile:this.Kb.config.isMobile,closeButtonMode:this.Od.closeButtonMode,floatingCloseButtonMode:this.Od.floatingSettings.floatingCloseButtonMode,isCloseButton:this.Od.isCloseButton,sharingDestinations:this.Od.sharingDestinations,os:this.Kb.config.os.os,expandButtonEnabled:this.Od.uiComponentsVisibility.expandButton,primaryColorList:{background:this.Od.primaryColorList.background||d.l.PrimaryBackground,foreground:this.Od.primaryColorList.foreground||d.l.PrimaryForeground},secondaryColorList:{background:this.Od.secondaryColorList.background||d.l.SecondaryBackground,foreground:this.Od.secondaryColorList.foreground||d.l.SecondaryForeground},accentColorList:{background:this.Od.accentColorList.background,foreground:this.Od.accentColorList.foreground||d.l.AccentForeground},useAccentColorForProgressBar:this.Od.useAccentColorForProgressBar,disableClickUrl:this.Od.disableClickUrl,fontFamilySettings:this.Od.fontFamilySettings}}GE(){const t=new ro({disableStoryProgressBarRendering:this.Od.disableStoryProgressBarRendering,disableTitleRendering:this.Od.disableTitleRendering});this.qT=new ou(this,this.NA,this.Kb.services.GlobalDomUtilsService,this.Kb.services.ResizeObserver,t.template,this.TL,this.Kb.config.appId,this.Od.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay?Tt.StoppedState:Tt.PausedState,this.Kb.services.InteractionService),this.qT.setMediaContainerRatio(this.gL.getContentRatioContainer()),this.qT.show()}mv(){this.subscribe(Ga.SlideTransitionStart,this.HT,({payload:{nextSlide:t}})=>{const i=t;let e=[];i.media.type===h.ProtoMediaTypeEnum.Video&&(e=i.media.getAvailableQualities(),this.qT.updateQuality(i.media.currentQuality)),this.qT.updateQualityMenu(e),this.qT.onSlideTransitionStart(i.slideCapabilityList),i.onSlideTransitionStart(i.slideCapabilityList)}),this.subscribe(Ga.SlideTransitionEnd,this.HT,()=>{this.qT.onSlideTransitionEnd()}),this.subscribe(Ga.SlideTimeUpdate,this.HT,({payload:{elapsedTime:t,duration:i}})=>{this.qT.onSlideTimeUpdate(t,i)}),this.subscribe(Ga.SlideChanged,this.HT,({payload:{index:t}})=>{this.qT.setCurrentIndex(t),this.qT.setDuration(this.HT.remainingTime),this.mediator.publish(this,za.ChangeSlide)}),this.subscribe(Ga.SlideCycleEnd,this.HT,()=>{this.PL.handleSlidesEnd()}),this.subscribe(Et.Change,this.HT,({payload:t})=>{const i=this.HT.getCurrentSlide();i&&i.media.type===h.ProtoMediaTypeEnum.Video&&this.qT.updateQuality(i.media.currentQuality),this.mediator.publish(this,Et.Change,{payload:t})}),this.subscribe(_[_.Play],this.qT,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}});this.play(!0)}),this.subscribe(_[_.Pause],this.qT,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}});this.pause(!0)}),this.subscribe(_[_.Volume],this.qT,({payload:t})=>{this.volume=t,this.mediator.publish(this,c.b.UserInteraction,{payload:{volume:!0}}),this.mediator.publish(this,_[_.Volume],{payload:{volume:t}})}),this.subscribe(_[_.Close],this.qT,()=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!1}}),this.mediator.publish(this,_[_.Close])}),this.subscribe(_[_.LogoClicked],this.qT,()=>{this.mediator.publish(this,_[_.LogoClicked])}),this.subscribe(qa.ProgressBarItemClicked,this.qT,({payload:t})=>{this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}}),this.setSlide(t),this.mediator.publish(this,qa.ProgressBarItemClicked,{payload:t})}),this.subscribe(qa.CallToAction,this.HT,()=>{this.mediator.publish(this,qa.CallToAction)}),this.subscribe(_[_.Expand],this.qT,()=>{this.mediator.publish(this,_[_.Expand])}),this.subscribe(_[_.Collapse],this.qT,()=>{this.mediator.publish(this,_[_.Collapse])}),this.subscribe(ii.a[ii.a.HoldStart],this.qT,()=>{this.PL.pauseToggle()}),this.subscribe(ii.a[ii.a.HoldEnd],this.qT,()=>{this.PL.pauseToggle()}),this.subscribe(ii.a[ii.a.TapLeft],this.qT,()=>{this.ML(),this.goToPrevSlide()}),this.subscribe(ii.a[ii.a.TapRight],this.qT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(ii.a[ii.a.SwipeEnd],this.qT,({payload:t})=>{t===au.d.Left?this.PL.goToNextSlide():this.PL.goToPrevSlide()}),this.subscribe(ii.a[ii.a.SwipeMove],this.qT,({payload:t})=>{this.HT.offsetSlides(t)}),this.subscribe(_[_.Quality],this.qT,({payload:t})=>{this.HT.setQuality(t)}),this.subscribe(_[_.Next],this.qT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(_[_.Next],this.HT,()=>{this.ML(),this.goToNextSlide()}),this.subscribe(_[_.Prev],this.qT,()=>{this.ML(),this.goToPrevSlide()}),this.relay(qa.GeneralClickInteraction,this.qT,this,this.mediator),this.relay(qa.GeneralClickInteraction,this.HT,this,this.mediator)}EL(){if(Object(C.a)(this.Od.storyMetadata)){const t=this.Od.storyMetadata;this.LL(t)}else{let{storyId:t,activeVersion:i}=this.Od;const e=Object(ks.b)("cnx_force_fallback",this.Kb.config.pageUrl);e&&(t=sl,i=e);const s=`${zt.a.endPoints.base.metadata}${t}/${i}.bin`;if(!Object(C.h)(i))return void this.RL();this.jL(s).then(t=>{this.LL(t)}).catch(()=>{this.RL()})}}RL(){this.CL().then(t=>{const i=`${zt.a.endPoints.base.metadata}${t.storyId}/${t.activeVersionId}.bin`;return this.jL(i)}).then(t=>{this.LL(t)})}LL(t){t.slides=t.slides.map(i=>Object.assign(Object.assign({},i),{storyTitle:t.storyTitle,publisherName:this.Od.publisherName})),this.HT.start(t.slides),this.qT.setTotalSlides(t.slides.length);const i=this.Od.storyPosition&&this.Od.storyPosition<t.slides.length?this.Od.storyPosition:Qa;this.HT.setCurrentSlide(i),this.mediator.publish(this,Wa.ContentHandlerReady)}_L(){const{preRollBreak:t,postRollBreak:i}=this.Od,e=Object(C.e)(t),s=Object(C.e)(i);this.PL=new uu(this,this.HT,this.qT,e,s,this.Od.endOfSlideCycleMode,null!==this.Od.storyPosition),this.BL()}BL(){this.subscribe(cu.StateChanged,this.PL,({payload:t})=>{this.qT.changeState(t);const i=this.HT.getCurrentSlide();i&&i.changeState(t),this.mediator.publish(this,Wa.StateChanged,{payload:t})}),this.subscribe(cu.ContentReset,this.PL,()=>{this.mediator.publish(this,Wa.NewStory)}),this.relay([Wa.ContentStart,Wa.ContentEnd],this.PL,this,this.mediator)}ML(){this.mediator.publish(this,c.b.UserInteraction,{payload:{playback:!0}})}setViewabilityState(t){this.PL.setViewabilityState(t)}goToNextSlide(){this.PL.goToNextSlide()}goToPrevSlide(){this.PL.goToPrevSlide()}getNextSlide(){return this.HT.getNextSlide()}getCurrentThumbnailUrlParams(t,i){return this.HT.getCurrentThumbnailUrlParams(t,i)}getCurrentMetadata(){return this.HT.getCurrentMetadata()}start(){this.EL()}get volume(){return this.wL}set volume(t){this.wL=t,this.HT.setVolume(t),this.qT.updateVolume(t)}play(t){this.PL.play(t)}pause(t){this.PL.pause(t)}show(){this.PL.show()}hide(){this.PL.hide()}enterFullscreen(){this.qT.expand()}exitFullscreen(){this.qT.collapse()}setSlide(t){this.play(!1),this.PL.setCurrentSlide(t)}onResize(){this.HT.onPlayerContainerResize(),this.qT.onResizeUi(this.HT.remainingTime,this.HT.isPlaying)}get currentSlideIndex(){return this.HT.currentSlideIndex}get slides(){return this.HT.slides}updateCtaLabel(t,i){const e={type:Oo.CtaButton,metadata:{label:i}};this.HT.updateCapabilityMetadata(t,e),t===this.HT.currentSlideIndex&&this.qT.updateCapabilityMetadata(e)}get slidesMetadata(){return this.HT.slidesMetadata}toggleExpandButton(t){t?this.qT.showExpandButton():this.qT.hideExpandButton()}getQuality(){return this.HT.getQuality()}setQuality(t){const i={height:t,quality:Ct.Strict};this.HT.setQuality(i)}stop(){this.PL&&this.PL.stop()}resume(){this.PL&&this.PL.resume()}startContent(){this.PL.exitRollBreak()}destroy(){this.HT&&this.HT.destroy(),this.qT&&this.qT.destroy()}}const hl={lg:630,md:400,sm:320,xs:0},al={[h.ProtoDeviceType.Desktop]:Object.assign({},hl),[h.ProtoDeviceType.Tablet]:Object.assign({},hl),[h.ProtoDeviceType.Smartphone]:Object.assign({},hl)},ol=288;var cl,ul;!function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause"}(cl||(cl={}));class ll{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.DL=!1,this.FL=!1,this.$L=()=>{},i){case h.ProtoPlayerPlaybackModeEnum.Autoplay:this.UL(this.VL);break;case h.ProtoPlayerPlaybackModeEnum.ClickToPlay:this.UL(this.NL);break;case h.ProtoPlayerPlaybackModeEnum.ScrollToPlay:this.UL(this.HL)}}UL(t){this.$L=()=>{this.DL||t.call(this)}}VL(){!this.FL&&this.inView&&(this.FL=!0,this.mediator.publish(this,cl[cl.Play]))}HL(){this.inView?this.mediator.publish(this,cl[cl.Play]):this.mediator.publish(this,cl[cl.Pause])}NL(){}setViewability(t){this.inView=t,this.$L()}setUserPlayback(t){!this.FL&&t&&(this.FL=t),this.DL=!t}}!function(t){t.enter="enterFullscreen",t.exit="exitFullscreen"}(ul||(ul={}));class dl{constructor(t,i,e,s){if(this.mediator=t,this.Ig=i,this.ir=s,this.qL=!1,this.zL=1e3,this.WL=!0,this.wl=!1,this.GL=()=>{this.qL&&this.JL()},this.QL=t=>{this.qL?null!==this.fullscreenElement?this.JL():this.XL():this.mediator.publish(this,ul.exit)},this.XL=()=>{this.wl=!1,this.YL.reject(),this.qL=!1,clearTimeout(this.KL)},this.MP=s&&s===Vt.b.Ios?e.getElementsByTagName("video")[0]:e,!this.MP)throw new Error("element is missing");try{const t=this.ZL();if(null==t)return void(this.WL=!1);this.tR=t.keys,this.iR=t.name,this.QP()}catch(t){this.WL=!1,Object(n.a)({message:"Fullscreen init failed",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}ZL(){let t;return t=this.ir===Vt.b.Ios?this.Ig.getFullscreenKeys(this.MP):this.Ig.getFullscreenKeys()}get fullscreenElement(){return this.Ig.getDocumentProperty(this.tR.fullscreenElement)}get fullscreenEnabled(){return this.Ig.getDocumentProperty(this.tR.fullscreenEnabled)}enterFullScreen(){if(this.WL){this.YL=new Au.a,this.qL=!0,clearTimeout(this.KL),this.KL=setTimeout(this.XL,this.zL);try{this.MP[this.tR.requestFullscreen]()}catch(t){this.XL()}return this.YL.promise}}exitFullScreen(){try{this.Ig.exitFullscreen(this.tR.exitFullscreen,this.ir===Vt.b.Ios?this.MP:void 0)}catch(t){Object(n.a)({message:"fullscreen_exit",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.WARNING})}this.wl=!1}QP(){this.iR===Ue.d.Moz||this.iR===Ue.d.Ms?(this.Ig.addEventListenerOnGlobal(this.tR.fullscreenchange,this.QL),this.Ig.addEventListenerOnGlobal(this.tR.fullscreenerror,this.XL)):(this.MP.addEventListener(this.tR.fullscreenchange,this.QL),this.MP.addEventListener(this.tR.fullscreenerror,this.XL)),this.ir===Vt.b.Ios&&(this.MP.addEventListener("webkitbeginfullscreen",this.GL),this.MP.addEventListener("webkitendfullscreen",this.QL))}eR(){this.iR===Ue.d.Moz||this.iR===Ue.d.Ms?(this.Ig.removeEventListenerOnGlobal(this.tR.fullscreenchange,this.QL),this.Ig.removeEventListenerOnGlobal(this.tR.fullscreenerror,this.XL)):(this.MP.removeEventListener(this.tR.fullscreenchange,this.QL),this.MP.removeEventListener(this.tR.fullscreenerror,this.XL)),this.ir===Vt.b.Ios&&(this.MP.removeEventListener("webkitbeginfullscreen",this.GL),this.MP.removeEventListener("webkitendfullscreen",this.QL))}JL(){this.wl=!0,this.mediator.publish(this,ul.enter),this.YL.resolve(),this.qL=!1,clearTimeout(this.KL)}get isFullscreen(){return this.wl}destroy(){this.isFullscreen&&this.exitFullScreen(),this.eR(),this.YL&&this.YL.isPending&&this.YL.reject()}}const fl={xl:720,lg:320,md:204,sm:142,xs:0},pl={[h.ProtoDeviceType.Desktop]:{xl:468,lg:388,md:248,sm:142,xs:0},[h.ProtoDeviceType.Tablet]:Object.assign({},fl),[h.ProtoDeviceType.Smartphone]:Object.assign({},fl)},bl={xl:720,lg:320,md:204,sm:142,xs:0},vl=(Object.assign({},bl),Object.assign({},bl),176),ml=160,gl=144,yl=112,wl={xl:bl.xl+vl,lg:bl.lg+ml,md:bl.md+gl,sm:bl.sm+yl},xl=(Object.assign({},wl),Object.assign({},wl),{lg:320,md:204,sm:0}),Sl=(Object.assign({},xl),Object.assign({},xl),{xxl:1080,xl:0}),Ol=(Object.assign({},Sl),Object.assign({},Sl),Object.assign(Object.assign({},T.b),Ja));var kl;!function(t){t[t.PlayerOrientationChange=0]="PlayerOrientationChange",t[t.MainOrientationChange=1]="MainOrientationChange"}(kl||(kl={}));class _l{constructor(t,i,e,s){this.mediator=t,this.Jn=i,this.sR=e,this.Os=s,this.nR={current:null,previous:null},this.rR={current:null,previous:null},this.hR=!1}setFloatingModule(t){this.aR=t}start(t){this.dh=t,this.oR(this.Jn.orientation),this.cR(this.Jn.orientation)}forceOrientation(t){this.hR=!1,this.setMainOrientation(t),this.setPlayerClassByOrientation(t),this.hR=!0}setPlayerClassByOrientation(t=this.Jn.orientation){this.oR(t),this.nR.previous&&this.nR.current===this.nR.previous||(this.uR(this.sR),this.nR.previous=this.nR.current,this.mediator.publish(this,kl[kl.PlayerOrientationChange],{payload:this.nR.current}))}setMainOrientation(t=this.Jn.orientation){this.cR(t),this.rR.previous&&this.rR.previous===this.rR.current||(this.rR.previous=this.rR.current,this.mediator.publish(this,kl[kl.MainOrientationChange],{payload:this.rR.current}))}get playerOrientation(){return this.nR.current}get mainOrientation(){return this.rR.current}shouldChangeMainOrientation(){return!this.$o()}oR(t){this.nR.current=this.lR(t)}cR(t){this.rR.current=this.dR(t)}lR(t){if(this.$o())return no.ProtoPlayerOrientationEnum.Landscape;if(this.hR)return this.rR.current;switch(t){case no.ProtoPlayerOrientationEnum.Mixed:return this.fR();default:return t}}dR(t){if(this.hR)return this.rR.current;switch(t){case no.ProtoPlayerOrientationEnum.Mixed:return this.fR();default:return t}}$o(){return this.aR&&this.aR.isInFloating}fR(){return this.Os.getViewportWidth()<this.Jn.orientationBreakpoint?no.ProtoPlayerOrientationEnum.Portrait:no.ProtoPlayerOrientationEnum.Landscape}uR(t){this.nR.previous?Object(j.O)(this.dh,t(this.nR.previous),t(this.nR.current)):Object(j.a)(this.dh,t(this.nR.current))}}class jl{constructor(t){this.Ig=t,this.pR=[]}createRatioContainer(t){const i=this.bR();return this.pR.push(i),this.setRatio(t),i}setRatio(t){this.vR=t,this.mR()}bR(){return this.Ig.createElementByString(`<cnx class='${d.c}'></cnx>`)}mR(){this.pR.forEach(t=>{Object(j.Q)(t,{"padding-bottom":`${this.vR}%`})})}}class Al{constructor(t,i){this.gR={width:1,height:1},this.yR=t,this.wR=i}start(t){this.xR(t)}getComputedPlayspaceRatio(t){return this.SR(t)/this.OR(t)*100}getComputedContentRatio(t){return this.kR(t)/this._R(t)*100}xR(t){this.jR=t}OR(t){if(t===no.ProtoPlayerOrientationEnum.Landscape){if(!this.jR.clientWidth)return this.yR.width;const t=this.AR();return this.jR.clientWidth/t}return this.wR.width}SR(t){if(t===no.ProtoPlayerOrientationEnum.Landscape){if(!this.jR.clientWidth)return this.yR.height;return this.IR()/this.AR()}return this.wR.height}IR(){return this.yR.height/this.yR.width*this.jR.clientWidth+Ka}AR(){const t=this.IR();return Object(bt.d)(this.jR.clientWidth,t)}_R(t){return t===no.ProtoPlayerOrientationEnum.Landscape?this.yR.width:this.gR.width}kR(t){return t===no.ProtoPlayerOrientationEnum.Landscape?this.yR.height:this.gR.height}}class Il extends o.a{constructor(t,i,e,s,n){super(),this.mediator=t,this.Jn=i,this.Ig=n,this.CR(),this.TR=new Al(e,s),this.PR=new jl(n),this.MR=new jl(n)}setFloatingModule(t){this.ER.setFloatingModule(t),this.setRatio()}start(t,i){this.ER.start(t),this.TR.start(i)}getPlayspaceRatioContainer(){return this.PR.createRatioContainer(this.LR())}getContentRatioContainer(){return this.MR.createRatioContainer(this.RR())}setRatio(t=!1){this.ER.setPlayerClassByOrientation(),(t||this.ER.shouldChangeMainOrientation())&&(this.ER.setMainOrientation(),this.PR.setRatio(this.LR())),this.MR.setRatio(this.RR())}getOrientation(){return this.ER.playerOrientation}setOrientation(t){this.ER.forceOrientation(t),this.PR.setRatio(this.LR()),this.MR.setRatio(this.RR())}CR(){this.ER=new _l(this,this.Jn,this.sR,this.Ig),this.subscribe(kl[kl.PlayerOrientationChange],this.ER,({payload:t})=>{this.mediator.publish(this,kl[kl.PlayerOrientationChange],{payload:t})}),this.subscribe(kl[kl.MainOrientationChange],this.ER,({payload:t})=>{this.mediator.publish(this,kl[kl.MainOrientationChange],{payload:t})})}LR(){const t=this.ER.mainOrientation;return this.TR.getComputedPlayspaceRatio(t)}RR(){const t=this.ER.playerOrientation;return this.TR.getComputedContentRatio(t)}sR(t){return t===no.ProtoPlayerOrientationEnum.Portrait?$a.OrientationPortrait:$a.OrientationLandscape}}const Cl={PlaybackModeEnum:{AutoPlay:h.ProtoPlayerPlaybackModeEnum.Autoplay,ScrollToPlay:h.ProtoPlayerPlaybackModeEnum.ScrollToPlay,ClickToPlay:h.ProtoPlayerPlaybackModeEnum.ClickToPlay},DefaultSoundModeEnum:{On:h.ProtoPlayerSoundMode.On,Off:h.ProtoPlayerSoundMode.Mute,OnHover:h.ProtoPlayerSoundMode.Hover},InsertPositionEnum:{WithinContainer:h.ProtoPlayerInsertMode.WithinContainer,BeforeContainer:h.ProtoPlayerInsertMode.BeforeContainer,AfterContainer:h.ProtoPlayerInsertMode.AfterContainer,ReplaceContainer:h.ProtoPlayerInsertMode.ReplaceContainer,HideContainer:h.ProtoPlayerInsertMode.HideContainer},CloseButtonModeEnum:{Off:h.ProtoPlayerCloseButtonMode.Off,On:h.ProtoPlayerCloseButtonMode.OnHover,OnAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,OnHover:h.ProtoPlayerCloseButtonMode.OnHover,OnHoverAfterFirstAd:h.ProtoPlayerCloseButtonMode.OnHoverAfterFirstAd,AlwaysOn:h.ProtoPlayerCloseButtonMode.AlwaysOn},QualityEnum:Lt,LineItemExcludedSlotsEnum:{PreRoll:h.ProtoAdSlotsEnum.PreRoll,MidRoll:h.ProtoAdSlotsEnum.MidRoll,PostRoll:h.ProtoAdSlotsEnum.PostRoll},ErrorTypesEnum:{SetupError:T.a.SetupError,NoPlayer:T.a.NoPlayer},FloatingModeEnum:{Off:h.ProtoPlayerFloatingMode.Off,OnPageLoad:h.ProtoPlayerFloatingMode.OnPageLoad,AfterInView:h.ProtoPlayerFloatingMode.AfterInView,Always:h.ProtoPlayerFloatingMode.Always},FloatingDevicesEnum:{Desktop:h.ProtoDeviceType.Desktop,Smartphone:h.ProtoDeviceType.Smartphone,Tablet:h.ProtoDeviceType.Tablet,Other:h.ProtoDeviceType.GameConsole},FloatingFixedPositionModeEnum:{Page:h.ProtoFloatingFixedPositionMode.Page,Element:h.ProtoFloatingFixedPositionMode.Element},FloatingScrollPositionEnum:{BottomRight:h.ProtoPositionMode.BottomRight,BottomLeft:h.ProtoPositionMode.BottomLeft,TopRight:h.ProtoPositionMode.TopRight,TopLeft:h.ProtoPositionMode.TopLeft},FloatingStatesEnum:{Float:y.Float,Embed:y.Embed},ImplementationTypeEnum:{Amp:h.ProtoImplementationType.Amp,Web:h.ProtoImplementationType.Web}},Tl=Object.assign(Object.assign({},Cl),{EndOfSlideCycleEnum:{Loop:no.ProtoEndOfSlideCycleMode.Loop,Stop:no.ProtoEndOfSlideCycleMode.Stop},LayoutEnum:{Portrait:kt.Portrait,Landscape:kt.Landscape},OrientationEnum:{Mixed:no.ProtoPlayerOrientationEnum.Mixed,Portrait:no.ProtoPlayerOrientationEnum.Portrait,Landscape:no.ProtoPlayerOrientationEnum.Landscape}});class Pl extends Ot{constructor(t,i,e,s){super(t,i,e,s),this.mediator=t,this.controlData=e,this.BR=0,this.DR=0,this.onStop(),this.Mu.slides=!1,this.FR()}$R(){this.controlData.minSlidesBeforeFirstAd&&this.DR<=this.controlData.minSlidesBeforeFirstAd&&(this.Mu.slides=!0)}UR(){this.controlData.slidesBetweenAds&&this.BR<=this.controlData.slidesBetweenAds&&(this.Mu.slides=!0)}FR(){this.Mu.slides=!1,this.firstAdBreakStarted?this.UR():this.$R(),this.toggleEnableAds()}canEnableAds(){const t=super.canEnableAds();return t.enableAds&&this.currentPlayerAdSlot===h.ProtoAdSlotsEnum.MidRoll&&this.Mu.slides&&this.qu?{enableAds:!1,disableReason:ft.TimeoutBetweenAds}:t}contentPlaybackStateChanged(t){}slideChanged(){this.BR++,this.DR++,this.FR()}onAdImpression(t){this.BR=0,super.onAdImpression(t)}onAdFinished(t,i=!1){i||this.FR(),super.onAdFinished(t,i)}contentChanged(){this.FR(),super.contentChanged()}}const Ml=1200;class El{constructor(t,i,e,s,n=Ml){this.VR=t,this.NR=i,this.HR=e,this.qR=s,this.zR=n,this.WR=null,this.GR=!1,this.JR=()=>{if(this.g_(),!this.GR&&this.NR&&this.NR.adInWin)return this.GR=!0,void this.QR(this.zR);this.VR.startContent()}}destroy(){this.g_()}changeState(t){switch(t){case Tt.PrerollState:this.GR=!1,this.QR(this.HR);break;case Tt.PostrollState:this.GR=!1,this.QR(this.qR);break;default:this.WR&&this.g_()}}g_(){clearTimeout(this.WR),this.WR=null}QR(t){this.g_(),this.WR=setTimeout(this.JR,t)}}const Ll=300,Rl=250;class Bl extends qt{constructor(){super(...arguments),this.Gd=al,this.Jd=d.p,this.Ud=ol,this.yR={width:16,height:9},this.wR={width:4,height:5},this.events=Object.assign({},Ol),this.XR=()=>{this.YR(),this.KR(),this.Od.adPlaybackMode===no.ProtoAdPlaybackMode.Autoplay&&this.Od.playbackMode!==no.ProtoPlayerPlaybackModeEnum.ClickToPlay&&0===this.Od.preRollBreak&&this.ld(no.ProtoAdSlotsEnum.MidRoll),this.mediator.publish(this,Ol.Ready)},this.ZR=()=>{this.tB.enterFullScreen().then(()=>{this.iB()}).catch(()=>{Object(n.a)({message:"PlayspaceExperience_enterFullscreen",level:h.ProtoLoggingLevelEnum.WARNING})})},this.Ld=()=>{this.VR.exitFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!1),this.mediator.publish(this,Ol.FullscreenChanged,{payload:!1}),super.Ld()},this.Ed=()=>{this.mediator.publish(this,Ol.FullscreenChanged,{payload:!0}),super.Ed()}}Jl(){const t={orientation:this.Od.orientation,orientationBreakpoint:this.Od.orientationBreakpoint};this.eB=new Il(this,t,this.yR,this.wR,this.app.services.GlobalDomUtilsService),this.subscribe(kl[kl.PlayerOrientationChange],this.eB,({payload:t})=>{this.mediator.publish(this,Ol.LayoutChanged,{payload:Tl.LayoutEnum[no.ProtoPlayerOrientationEnum[t]]})}),this.subscribe(kl[kl.MainOrientationChange],this.eB,({payload:t})=>{switch(t){case no.ProtoPlayerOrientationEnum.Landscape:Object(j.N)(this.$experienceContainer,"maxWidth");break;case no.ProtoPlayerOrientationEnum.Portrait:Object(j.Q)(this.$experienceContainer,{maxWidth:`${al[this.app.config.device].lg-1}px`})}})}sB(t){this.eB.setFloatingModule(t)}generateHTML(){this.$playerWrapper=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.b.PlayerWrapper}"></cnx>`),this.$playerContainer=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Ua.Container}"></cnx>`),this.eB.start(this.$playerContainer,this.$playerWrapper),this.addPlayerSize(),this.$experienceContainer.appendChild(this.$playerWrapper),this.$playerWrapper.appendChild(this.$playerContainer),this.eB.setRatio(),this.nB()}nB(){this.rB=this.app.services.GlobalDomUtilsService.createElementByString(`<cnx class="${Ua.ImageWrapper} ${Ua.ImageBackground}"></cnx>`),this.$playerWrapper.appendChild(this.rB)}hB(){return this.VR.getCurrentThumbnailUrlParams(this.$experienceContainer.clientWidth,this.$experienceContainer.clientHeight)}aB(){const t=this.hB();if(!t)return;const{imageUrl:i,altText:e,width:s,height:n,queryParams:r}=t,h=this.Gl.getImage(i,e,s,n,r,!0);h&&(h.className=d.b.ImagePlaceholder,this.oB&&this.rB.removeChild(this.oB),this.rB.appendChild(h),this.oB=h,this.adHandler&&this.adHandler.setAdLoadingBackgroundUrl(i))}cB(){this.floatingModule&&this.floatingModule.canFloat()&&this.aB()}uB(t=!1){this.rB&&(t?Object(j.a)(this.rB,Ua.MediaLogo):Object(j.L)(this.rB,Ua.MediaLogo))}addPlayerSize(){const t=this.eB.getPlayspaceRatioContainer();this.$playerWrapper.appendChild(t),Object(j.a)(this.$playerWrapper,d.i.Responsive)}handleClose(){this.mediator.publish(this,Ol.CloseButtonClicked),this.$o()?(this.floatingModule.destroy(),this.pause()):this.tB&&this.tB.isFullscreen?this.tB.exitFullScreen():this.triggerDestroy()}getVolume(){return this.VR.volume}setNewVolume(t){super.setNewVolume(t),this.VR.volume=t,this.Dr(t)}destroy(){var t;super.destroy(),null===(t=this.lB)||void 0===t||t.destroy(),this.VR&&this.VR.destroy(),this.tB&&this.tB.destroy()}dB(){this.VR=new rl(this,this.app.services.GlobalDomUtilsService,this.app.services.ResizeObserver,this.Od,this.app,this.$playerContainer,this.eB),this.subscribe(Wa.ContentHandlerReady,this.VR,this.XR),this.Od.isCloseButton&&this.subscribe(_[_.Close],this.VR,()=>this.handleClose()),this.subscribe(_[_.Volume],this.VR,({payload:{volume:t}})=>{this.Dr(t),this.adHandler&&this.adHandler.setVolume(t)}),this.subscribe(Wa.StateChanged,this.VR,({payload:t})=>{var i;null===(i=this.lB)||void 0===i||i.changeState(t),this.fB(t),t===Tt.PlayingState&&this.Xd(),this.pB(t)}),this.subscribe(za.ChangeSlide,this.VR,()=>{this.Cl.slideChanged();const t=this.bB();if(this.aB(),this.floatingModule&&this.floatingModule.canFloat()){const i=t&&t.mediaContext===no.ProtoMediaContextEnum.Logo;this.uB(i)}this.app.services.TrackingService.updateMediaMetadata(this.vB()),this.mediator.publish(this,Ol.ChangeSlide,{payload:t})}),this.subscribe(Wa.NewStory,this.VR,()=>{this.gd(),this.YR()}),this.subscribe(Wa.ContentStart,this.VR,()=>{this.app.services.TrackingService.setMediaStart(),this.mediator.publish(this,Ol.ContentStart,{payload:this.getStoryMetadata()})}),this.subscribe(Wa.ContentEnd,this.VR,()=>{this.app.services.TrackingService.trackMediaQuartile(h.ProtoQuartilesEnum.Fourth),this.mediator.publish(this,Ol.ContentComplete,{payload:this.getStoryMetadata()})}),this.floatingModule&&this.subscribe(c.b.UserInteraction,this.VR,this.Nl),this.subscribe(qa.ProgressBarItemClicked,this.VR,({payload:t})=>{this.mediator.publish(this,Ol.ProgressBarItemClicked,{payload:this.mB(t)})}),this.subscribe(_[_.Volume],this.adHandler,({payload:{volume:t}})=>{this.Dr(t),this.VR.volume=t}),this.subscribe(qa.CallToAction,this.VR,()=>{this.mediator.publish(this,Ol.CallToAction,{payload:this.bB()})}),this.subscribe(_[_.LogoClicked],this.VR,()=>{this.mediator.publish(this,Ol.BrandingClicked)}),this.subscribe(Et.Change,this.VR,({payload:t})=>{this.ME!==t&&(this.ME=t,this.mediator.publish(this,Ol.QualityChanged,{payload:t}))}),this.subscribe(qa.GeneralClickInteraction,this.VR,({payload:t})=>{this.app.services.TrackingService.trackMediaClick(t)}),this.VR.start()}gB(t,i){const{preRollBreak:e,postRollBreak:s}=this.Od;this.lB=new El(t,i,e,s)}fB(t){switch(t){case Tt.PlayingState:this.ld(no.ProtoAdSlotsEnum.MidRoll);break;case Tt.PrerollState:this.ld(no.ProtoAdSlotsEnum.PreRoll);break;case Tt.PostrollState:this.ld(no.ProtoAdSlotsEnum.PostRoll);break;case Tt.PausedState:this.Od.adViewabilityPolicy===h.ProtoAdViewabilityPolicy.Default&&!this.yB.inView||this.Cl.onStop();break;case Tt.StoppedState:this.Cl.onStop()}}pB(t){switch(t){case Tt.PlayingState:this.app.services.TrackingService.setSessionPlayback(!0),this.mediator.publish(this,Ol.Play,{payload:this.bB()});break;case Tt.PausedState:this.mediator.publish(this,Ol.Pause,{payload:this.bB()}),this.app.services.TrackingService.setSessionPlayback(!1);break;case Tt.StoppedState:this.mediator.publish(this,Ol.ContentComplete,{payload:this.getStoryMetadata()}),this.app.services.TrackingService.setSessionPlayback(!1);break;default:this.app.services.TrackingService.setSessionPlayback(!0)}}KR(){this.yB=new ll(this,this.Od.playbackMode),this.subscribe(cl[cl.Play],this.yB,()=>{this.VR.play(!1)}),this.subscribe(cl[cl.Pause],this.yB,()=>{this.VR.pause(!1)}),this.subscribe(c.b.UserInteraction,this.VR,({payload:{playback:t}})=>{Object(C.a)(t)&&this.yB.setUserPlayback(t)}),this.yB.setViewability(this.app.services.ViewabilityService.check({element:this.$playerContainer,threshold:this.ul}))}wB(){this.adHandler&&(this.adHandler.start(this.$playerContainer.clientWidth,this.$playerContainer.clientHeight,this.Od.soundMode===no.ProtoPlayerSoundMode.On?1:0),this.Cl.forceRecheck())}Tl(){const t=this.getNextSlide();this.adHandler.setContinueReadingCard({imageSrc:t.metadata.imageUrl,title:t.metadata.title}),super.Tl(),this.VR.hide()}Sd(){this.vd.isInAdPod()?this.kd(()=>{this.Cl.onAdFinished(this.adHandler.inImpression,this.vd.isInAdPod()),super.Sd(),this.VR.show()}):(super.Sd(),this.VR.show())}wd(){return new Ha(this,this.Od,this.$playerContainer,this.checkFloatingViewability(this.isViewable()),this.vd,this.app)}jd(){return new Pl(this,this.isViewable(),{minSlidesBeforeFirstAd:this.Od.minSlidesBeforeFirstAd,slidesBetweenAds:this.Od.slidesBetweenAds,numberOfMidRolls:this.Od.midRollNumber,viewabilityPolicy:this.Od.adViewabilityPolicy,maxAdSlotDuration:this.vd.getMaxAdSlotDuration(),maxAdPodDuration:this.vd.getMaxAdPodDuration(),playerDimensions:{width:this.$playerContainer.offsetWidth,height:this.$playerContainer.offsetHeight},playerAdsSkippability:this.Od.adSkippability,adsMustBeSkippableIfLongerThan:this.Od.adsMustBeSkippableIfLongerThan},this.app)}zr(){super.zr(),this.VR&&this.VR.onResize(),this.eB.setRatio(),this.cB(),this.xB.updateWidth(this.$playerContainer.clientWidth)}$o(){return this.floatingModule&&this.floatingModule.isInFloating}Mc(t,i=!1){super.Mc(t,i),this.yB&&this.yB.setViewability(t),this.VR&&this.VR.setViewabilityState(t)}SB(){const t=this.app.services.GlobalDomUtilsService.getGlobalClosestTop().topFrame.document.body;this.app.services.ResizeObserver.on(t,()=>{this.eB.setRatio(!0)})}Rl(){return{isAutoPlay:this.Od.playbackMode===no.ProtoPlayerPlaybackModeEnum.Autoplay,isSkippable:!0,skipOffset:0}}start(){try{super.start(),this.sB(this.floatingModule),this.dB(),this.wB(),this.gB(this.VR,this.adHandler),this.qd(this.VR),this.OB(),this.SB(),this.xB=new L(this.$playerContainer,this.app.config.device,pl,d.t),this.kB(this.$playerContainer)}catch(t){Object(n.a)({message:"PlayspaceExperience_start",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.FATAL})}}setSlide(t){this.VR.setSlide(t)}getNextSlide(){return this.VR.getNextSlide()}play(){super.play();this.VR.play(!1)}pause(){super.pause();this.VR.pause(!1)}getStoryId(){return this.Od.storyId}getStoryPosition(){return this.VR.currentSlideIndex}getStoryTimeline(){return this.VR.slides.map(t=>t.media.duration/$.f)}updateCtaLabel(t,i){Object(C.d)(t)&&Object(C.h)(i)&&this.VR.updateCtaLabel(t,i)}getStoryMetadata(){return this.VR.slidesMetadata.map(({title:t,clickUrl:i,slideDuration:e})=>({title:t,clickUrl:i,duration:e}))}toggleFullscreenButton(t){this.VR.toggleExpandButton(t)}toggleFullscreen(t){Object(C.a)(t)||(t=!this.tB.isFullscreen),this.tB.isFullscreen!==t&&(t?this.ZR():this.tB.exitFullScreen())}getQuality(){return this.VR.getQuality()}setQuality(t){this.VR.setQuality(t)}getOrientation(){return this.eB.getOrientation()}setOrientation(t){this.eB.setOrientation(t)}OB(){this.app.config.os.os!==Vt.b.Ios&&(this.tB=new dl(this,this.app.services.GlobalDomUtilsService,this.$playerContainer,this.app.config.os.os),this._B())}_B(){this.subscribe(_[_.Expand],this.VR,this.ZR),this.subscribe(_[_.Collapse],this.VR,()=>this.tB.exitFullScreen()),this.subscribe(ul.exit,this.tB,this.Ld),this.subscribe(ul.enter,this.tB,this.Ed)}iB(){this.VR.enterFullscreen(),this.floatingModule&&this.floatingModule.fullscreenStateChange(!0)}bB(){return this.VR.getCurrentMetadata()}mB(t){if(!(t<0||this.VR.slidesMetadata.length<t))return this.VR.slidesMetadata[t]}YR(){this.app.services.TrackingService.setNewMedia(this.vB())}vB(){const t=this.VR.getCurrentMetadata(),i=t.title||t.coverMetadata&&t.coverMetadata.title;return{mediaId:this.Od.storyId,clickUrl:t.clickUrl,slideTitle:i,slideNumber:this.VR.currentSlideIndex+1,slideMediaType:t.mediaType}}kB(t){if(!Object(C.h)(this.Od.sdkVersion)&&Object(C.h)(this.app.config.bundleID)){const i=this.app.services.GlobalDomUtilsService.querySelector("body");Object(j.Q)(i,{margin:"0"}),t.clientWidth>=Ll&&(Object(j.Q)(t,{"min-height":`${Rl}px`}),Object(j.i)(t)),Object($t.l)([95,5])&&Object(n.a)({message:"PlayspaceExperience_start",exception:"IN_APP_RENDER_PLAYER_SIZE",callStack:`width: ${this.$playerContainer.clientWidth}: height: ${this.$playerContainer.clientHeight} `,level:h.ProtoLoggingLevelEnum.INFO})}}jB(){}}class Dl{constructor(){this.Vc={}}on(t,i){if(this.Vc[t]=this.Vc[t]||[],!Object(C.b)(i))throw new Error(`${t} event callback is not a function`);return this.Vc[t].push(i),()=>this.Vc[t]=this.Vc[t].filter(t=>t!==i)}once(t,i){const e=this.on(t,t=>{try{i(t)}catch(t){}e()})}remove(t,i){this.Vc[t]&&(this.Vc[t]=this.Vc[t].filter(t=>t!==i))}removeAll(){this.Vc={}}trigger(t,i){this.Vc[t]&&this.Vc[t].forEach(t=>{try{t(i)}catch(t){}})}}class Fl{constructor(t){this.experience=t,this.AB=(t,i)=>this.bo.on(t,i),this.IB=(t,i)=>{this.bo.remove(t,i)},this.CB=()=>{this.bo.removeAll()},this.TB=(t,i)=>{this.bo.once(t,i)},this.PB=()=>this.experience.isViewable(),this.MB=t=>{this.experience.setViewableThreshold(t)},this.EB=()=>{this.experience.play()},this.LB=()=>{this.experience.pause()},this.RB=()=>this.experience.getVolume(),this.BB=t=>{this.experience.setVolume(t)},this.Ac=()=>{this.experience.triggerDestroy()},this.DB=()=>{this.experience.disableAdvertising()},this.FB=()=>{this.experience.enableAdvertising()},this.$B=t=>{this.experience.setCustomMacros(t)},this.UB=t=>{this.experience.setAmpUserConsent(t)},this.bo=new Dl}trigger(t,i){this.bo.trigger(t,i)}setDestroyed(){this.trigger(T.b.Removed)}getApiMethods(){return{on:this.AB,remove:this.IB,removeAll:this.CB,once:this.TB,isViewable:this.PB,setViewableThreshold:this.MB,play:this.EB,pause:this.LB,getVolume:this.RB,setVolume:this.BB,disableAdvertising:this.DB,enableAdvertising:this.FB,setMacros:this.$B,setAmpUserConsent:this.UB,destroy:this.Ac}}}class $l extends Fl{constructor(){super(...arguments),this.VB=()=>this.experience.getStoryPosition(),this.NB=()=>this.experience.getStoryId(),this.HB=()=>this.experience.getStoryTimeline(),this.qB=t=>{this.experience.setSlide(t)},this.zB=(t,i)=>{this.experience.updateCtaLabel(t,i)},this.WB=()=>this.experience.getStoryMetadata(),this.GB=t=>{this.experience.toggleFullscreenButton(t)},this.JB=t=>{this.experience.toggleFullscreen(t)},this.QB=()=>this.experience.getQuality(),this.XB=t=>{this.experience.setQuality(t)},this.YB=()=>{const t=this.experience.getOrientation();return Tl.LayoutEnum[no.ProtoPlayerOrientationEnum[t]]},this.KB=t=>{const i=Object.keys(Tl.LayoutEnum).find(i=>Tl.LayoutEnum[i]===t);i&&no.ProtoPlayerOrientationEnum[i]&&this.experience.setOrientation(no.ProtoPlayerOrientationEnum[i])},this.ZB=()=>this.experience.getSize()}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getStoryPosition:this.VB,setStoryPosition:this.qB,getStoryId:this.NB,getStoryTimeline:this.HB,setCtaLabel:this.zB,getStoryMetadata:this.WB,toggleFullscreen:this.JB,toggleFullscreenButton:this.GB,getQuality:this.QB,setQuality:this.XB,getLayout:this.YB,setLayout:this.KB,getPlayerSize:this.ZB})}}class Ul extends v{constructor(){super(...arguments),this.To="cnx-ps"}createExperience(t,i){this.experience=new Bl(this,this.Ws,i),this.experienceApi=new $l(this.experience)}getApiMethods(){return this.experienceApi.getApiMethods()}isSupportedBreakpoint(t){return!(this.experienceContainer.clientWidth<al[t].xs)}}var Vl,Nl,Hl=e(31);!function(t){t[t.none=0]="none",t[t.friendly=1]="friendly",t[t.safe=2]="safe"}(Vl||(Vl={}));class ql{constructor(t,i,e){this.de=t,this.VA=i,this.tD=[],this.iD=Vl.none,this.eD={intersectionObserver:!1,fallbackImplementation:!1},this.sD=null,this.nD=[0,.01,.1,.2,.5],this.rD=250,this.hD=!1,this.aD=t=>{this.hD=t,this.oD(),f.a.setFocusState(t),Hl.a.pageFocus=t},this.oD=()=>{this.tD.forEach(t=>{const i=this.cD(t.element);this.onViewHandle(t,i)})},this.uD=()=>{null===this.sD&&(this.sD=setTimeout(()=>{this.oD(),clearTimeout(this.sD),this.sD=null},this.rD))},this.lD(e),this.dD(),this.fD()}fD(){this.VA.on(this.aD),Hl.a.pageFocus=this.VA.isDocumentVisible()}lD(t){this.de.IntersectionObserver&&!t?this.eD.intersectionObserver=!0:this.eD.fallbackImplementation=!0,this.de.self!==this.de.top?(this.pD=this.bD(this.de),null!==this.pD?this.iD=Vl.friendly:this.iD=Vl.safe):this.pD=this.de.frameElement}bD(t){let i;try{if((i=t.parent)===this.de.top)return t.frameElement}catch(t){return null}return this.bD(i)}dD(){this.eD.intersectionObserver?this.vD=new this.de.IntersectionObserver(this.onObserverEnter.bind(this),{root:null,rootMargin:"0px",threshold:this.nD}):(this.de.addEventListener("scroll",this.uD),this.de.addEventListener("load",this.oD),this.de.addEventListener("resize",this.oD))}mD(t){return this.tD.find(i=>i.element===t)}cD(t){if(this.iD===Vl.safe){const i=this.mD(t);return i?i.cachedPercentInView:0}let i=1;const e=t.getBoundingClientRect(),s={bottomRatio:e.bottom/e.height,topRatio:(this.de.top.innerHeight-e.top)/e.height,leftRatio:(this.de.top.innerWidth-e.left)/e.width,rightRatio:e.right/e.width};return Object.keys(s).forEach(t=>{s[t]<=0&&(i=0),s[t]>0&&s[t]<1&&(i*=s[t])}),i}onObserverEnter(t){t.forEach(t=>{this.tD.filter(i=>i.element===t.target).forEach(i=>{this.onViewHandle(i,t.intersectionRatio)})})}onViewHandle(t,i){t.cachedPercentInView=i,t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i&&this.hD?(t.callbackSent=!0,t.timeout=Object($t.a)(t.callback,t.callbackDelay,!0)):t.callbackSent&&(t.threshold>i||!this.hD)&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object($t.a)(t.callback,0,!1))})}on(t,i,e={}){let s=!1;if(this.eD.fallbackImplementation)if(this.iD===Vl.friendly&&t.ownerDocument.defaultView!==this.de.top)t=this.pD;else if(this.iD===Vl.safe)return void Object($t.a)(i,0,!1);let n=this.tD.find(i=>i.element===t);n?s=!0:(n={element:t,list:[],cachedPercentInView:0},this.tD.push(n)),n.list.push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.eD.intersectionObserver?(s&&this.vD.unobserve(t),this.vD.observe(t)):this.eD.fallbackImplementation&&this.oD()}off(t,i){const e=this.tD.find(i=>i.element===t);if(e){let s=e.list.length;for(;s;)s--,e.list[s].callback===i&&e.list.splice(s,1);0===e.list.length&&(this.vD&&this.vD.unobserve(t),this.tD.splice(this.tD.indexOf(e),1))}}check(t={threshold:.1}){if(!t.element)return!1;let i=t.element;return this.iD===Vl.friendly&&(i=this.pD),this.cD(i)>=t.threshold&&this.hD}triggerRecheck(t){this.eD.fallbackImplementation&&t&&this.tD.forEach(i=>{if(i.element===t){const t=this.cD(i.element);this.onViewHandle(i,t)}})}setViewableThreshold(t){}getIsTabInFocus(){return this.hD}subscribe(t,i){}destroy(){this.de.removeEventListener("scroll",this.uD),this.de.removeEventListener("load",this.oD),this.de.removeEventListener("resize",this.oD),[].slice.call(this.tD).forEach(t=>{[].slice.call(t.list).forEach(i=>{this.off(t.element,i.callback),this.de.clearTimeout(i.timeout)})}),this.VA.off(this.aD),clearTimeout(this.sD)}}class zl{constructor(){this.tD=[],this.cD=0,this.gD=!1,this.oD=t=>{this.tD.forEach(i=>{t&&t!==i.element||this.yD(i,this.cD)})}}wD(t){let i=this.tD.find(i=>i.element===t);return i||(i={element:t,list:[],cachedPercentInView:0},this.tD.push(i)),i.list}yD(t,i){t.list.forEach(t=>{!t.callbackSent&&t.threshold<=i?(t.callbackSent=!0,t.timeout=Object($t.a)(t.callback,t.callbackDelay,!0,this.gD)):t.callbackSent&&t.threshold>i&&(t.callbackSent=!1,clearTimeout(t.timeout),t.timeout=Object($t.a)(t.callback,0,!1,this.gD))})}on(t,i,e){this.wD(t).push({threshold:e.threshold,callbackSent:!1,callbackDelay:e.callbackDelay,timeout:null,callback:i}),this.oD()}off(t,i){const e=this.tD.find(i=>i.element===t);if(e){for(let t=e.list.length;t--;)e.list[t].callback===i&&e.list.splice(t,1);0===e.list.length&&this.tD.splice(this.tD.indexOf(e))}}check(t={threshold:.1}){return this.cD>=t.threshold}triggerRecheck(t){this.oD(t)}xD(t){this.gD=t}setViewableThreshold(t){this.cD=t,this.triggerRecheck()}getIsTabInFocus(){return!0}subscribe(t,i){}destroy(){for(let t=this.tD.length;t--;){const i=this.tD[t];for(let t=i.list.length;t--;)clearTimeout(i.list[t].timeout),this.off(i.element,i.list[t].callback)}}}class Wl{constructor(t=0){this.SD=t,this.OD=16,this.kD=9}getHeightByRatio(t){return Math.round(t/this.OD*this.kD)+this.SD}}class Gl{constructor(t,i,e={}){this.floatingMode=Object(C.a)(e.mode)?e.mode:t.floatingMode,Object(l.h)(e.devices)?this.floatingDeviceMode=e.devices:this.floatingDeviceMode=Object(l.h)(t.floatingDeviceMode)?t.floatingDeviceMode:[h.ProtoDeviceType.Desktop],Object(C.a)(e.closeButton)?this.floatingCloseButtonMode=e.closeButton:Object(C.a)(t.floatingCloseButtonMode)?this.floatingCloseButtonMode=t.floatingCloseButtonMode:this.floatingCloseButtonMode=h.ProtoPlayerCloseButtonMode.OnHover,this.floatingPosition=Object(C.a)(e.fixedPosition)?e.fixedPosition:t.floatingFixedPosition,this.floatingScrollPosition=Object(C.a)(e.scrollPosition)?e.scrollPosition:t.floatingScrollPosition,this.floatingWidth=Object(C.a)(e.floatingWidth)?e.floatingWidth:t.floatingWidth||x,this.floatingGutterX=Object(C.a)(e.floatingGutterX)?e.floatingGutterX:t.floatingGutterX,this.floatingGutterY=Object(C.a)(e.floatingGutterY)?e.floatingGutterY:t.floatingGutterY,this.pageElement=t.floatingPageElement,this.appendLocation=t.floatingAppendLocation,this.floatingYAxisPadding=t.floatingYAxisPadding,this._D=this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopLeft,this.jD=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.AD=this.floatingScrollPosition===h.ProtoPositionMode.TopLeft||this.floatingScrollPosition===h.ProtoPositionMode.TopRight,this.ID=this.floatingScrollPosition===h.ProtoPositionMode.BottomRight||this.floatingScrollPosition===h.ProtoPositionMode.BottomLeft,this.CD=new Wl(i)}get isPositionedLeft(){return this._D}get isPositionedRight(){return this.jD}get isPositionedTop(){return this.AD}get isPositionedBottom(){return this.ID}set isPositionedLeft(t){this._D=t}set isPositionedRight(t){this.jD=t}set isPositionedBottom(t){this.ID=t}get positionClass(){switch(this.floatingScrollPosition){case h.ProtoPositionMode.BottomLeft:return"bottom-left";case h.ProtoPositionMode.TopLeft:return"top-left";case h.ProtoPositionMode.TopRight:return"top-right";default:return"bottom-right"}}set width(t){this.floatingWidth=t}get width(){return this.floatingWidth}getHeight(t){return`${this.CD.getHeightByRatio(t)}px`}}function Jl(t){return Object(C.f)(t)&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function Ql(t){return Jl(t)?Xl({},t):t}function Xl(t,i){return function(t,i){const e={};return Jl(t)&&Object.keys(t).forEach(i=>{e[i]=Ql(t[i])}),Object.keys(i).forEach(s=>{Jl(i[s])&&t[s]?e[s]=Xl(t[s],i[s]):e[s]=Ql(i[s])}),e}(t,i)}!function(t){t[t.Normal=0]="Normal",t[t.Buzzfeed=1]="Buzzfeed"}(Nl||(Nl={}));class Yl{constructor(t,i,e,s,r,a,o,c,u,d,f=0){if(this.global=t,this.targetContainer=i,this.TD=e,this.Bo=s,this.secondLevelDomain=r,this.apiConfig=a,this.supplyChainSettings=c,this.isSeoTraffic=u,this.videoPosition=d,this.sharingDestinations=[],this.disableAdvertising=!1,this.adBreaks=[],this.disableClickUrl=!1,this.moatTrackingEnabled=!1,this.pauseAdWhenFinished=!1,this.loopAdWhenFinished=!1,this.adsMustBeSkippableIfLongerThan=F.d,Object(C.h)(e.initializationSettingsJson))try{const t=JSON.parse(e.initializationSettingsJson);this.apiConfig=Xl(this.apiConfig,t)}catch(t){Object(n.a)({message:"invalid_init_json",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL})}(this.apiConfig.playerMode===Nl.Buzzfeed||this.apiConfig.settings.pauseAdWhenFinished)&&(this.pauseAdWhenFinished=!0),this.PD(this.TD.lineItems);const p=[];this.soundMode=Object(C.a)(this.apiConfig.settings.defaultSoundMode)?this.apiConfig.settings.defaultSoundMode:e.soundMode,this.playbackMode=Object(C.a)(this.apiConfig.settings.playbackMode)?this.apiConfig.settings.playbackMode:e.playbackMode,this.playbackMode===h.ProtoPlayerPlaybackModeEnum.ClickToPlay||this.soundMode===h.ProtoPlayerSoundMode.Mute||Object($t.b)()||(this.soundMode=h.ProtoPlayerSoundMode.Mute),this.html=e.html,this.css=e.css,this.floatingSettings=new Gl(e,f,this.apiConfig.settings.customization.floating),this.logoUrl=Object(C.h)(this.apiConfig.settings.customization.logoUrl)?this.apiConfig.settings.customization.logoUrl:e.logoUrl;const b=e.amazonTamSlotId;if(Object(C.h)(b)&&(this.amazonTamSlotId=b),Object(C.a)(this.apiConfig.settings.advertising.macros)&&(this.externalMacros=this.apiConfig.settings.advertising.macros),Object(C.a)(this.apiConfig.settings.disableAdvertising)&&(this.disableAdvertising=this.apiConfig.settings.disableAdvertising),this.MD(),this.ED(),Object(l.h)(this.apiConfig.settings.advertising.lineItems)){const t=e.lineItems.filter(t=>t.creativeType===h.ProtoCreativeTypeEnum.External);this.apiConfig.settings.advertising.lineItems.forEach(i=>{if(this.LD(i),o){const t=this.RD(),e=this.BD(i,t);p.push(e)}else t.forEach(t=>{if(i.id===t.advertiserLineItemId&&(i.url||i.headerBidderBids||i.externalMediaFile||i.externalHlsFile)){const e=this.BD(i,t);p.push(e)}})})}!0!==this.apiConfig.settings.advertising.blockConnatixDemand&&p.push(...e.lineItems.filter(t=>t.creativeType!==h.ProtoCreativeTypeEnum.External)),p.forEach(t=>{t.creativeType===h.ProtoCreativeTypeEnum.External&&(t.headerBidderBids&&"[]"!==t.headerBidderBids?t.creativeType=h.ProtoCreativeTypeEnum.HeaderBidder:t.externalMediaFile||t.externalHlsFile?t.creativeType=h.ProtoCreativeTypeEnum.MediaFile:t.creativeType=h.ProtoCreativeTypeEnum.ThirdParty)});const v=this.DD(p),m=Object(C.a)(this.apiConfig.settings.rendering.scrollHijackingProtection)?this.apiConfig.settings.rendering.scrollHijackingProtection:e.scrollHijackingProtection;this.lineItemSettings={lineItems:v,disableScrollHijackEnforcement:m},this.midRollNumber=Object(C.a)(this.apiConfig.settings.advertising.maxNumberOfMidRolls)?this.apiConfig.settings.advertising.maxNumberOfMidRolls:e.midRollNumber,this.adViewabilityPolicy=e.adViewabilityPolicy,this.preRollBreak=(Object(C.a)(this.apiConfig.settings.advertising.preRollBreak)?this.apiConfig.settings.advertising.preRollBreak:e.preRollBreak)*$.f,this.postRollBreak=(Object(C.a)(this.apiConfig.settings.advertising.postRollBreak)?this.apiConfig.settings.advertising.postRollBreak:e.postRollBreak)*$.f,this.playerId=e.playerId,this.floatingSettings.floatingMode===h.ProtoPlayerFloatingMode.Always?this.closeButtonMode=this.floatingSettings.floatingCloseButtonMode:this.closeButtonMode=Object(C.a)(this.apiConfig.settings.customization.closeButtonMode)?this.apiConfig.settings.customization.closeButtonMode:e.closeButtonMode,this.isCloseButton=!!this.closeButtonMode||!!this.floatingSettings.floatingCloseButtonMode,this.uiComponentsVisibility={casting:!1,expandButton:Object(C.a)(this.apiConfig.settings.customization.showExpandButton)?this.apiConfig.settings.customization.showExpandButton:e.expandButton},this.sharingDestinations=void 0,this.adPlaybackMode=e.adPlaybackMode,Object(C.a)(this.apiConfig.settings.disableClickUrl)&&(this.disableClickUrl=this.apiConfig.settings.disableClickUrl);const{skipAdAfter:g}=a.settings.advertising.skipAdSettings||{},{adSkippability:y}=a.settings.advertising.skipAdSettings||{},{adsMustBeSkippableIfLongerThan:w}=a.settings.advertising.skipAdSettings||{};this.skipAdAfter=Object(C.a)(g)?g:e.skipAdAfter,this.adSkippability=Object(C.a)(y)?y:e.adSkippability,Object(C.a)(w)?w>0&&w<=F.d&&(this.adsMustBeSkippableIfLongerThan=w):Object(C.a)(y)||e.adsMustBeSkippableIfLongerThan&&(this.adsMustBeSkippableIfLongerThan=e.adsMustBeSkippableIfLongerThan);const{disableTracking:x}=a.settings._connatixInternals;(x||o||this.isSeoTraffic)&&(this.disableTracking=!0),this.sessionId=this.TD.sessionId,this.moatTrackingEnabled=this.lineItemSettings.lineItems.some(t=>t.moatTrackingEnabled)}FD(t,i){i.adTag=Object(C.a)(t.url)?t.url:i.adTag,i.requestCap=Object(C.a)(t.contentRequestCap)?t.contentRequestCap:i.requestCap,i.impressionCap=Object(C.a)(t.contentImpressionCap)?t.contentImpressionCap:i.impressionCap,i.viewability=Object(C.a)(t.viewability)?t.viewability:i.viewability,i.sound=Object(C.a)(t.sound)?t.sound:i.sound,i.ignoreFilledRequests=Object(C.a)(t.ignoreFilledRequests)?t.ignoreFilledRequests:i.ignoreFilledRequests,i.headerBidderBids=Object(C.a)(t.headerBidderBids)?t.headerBidderBids:i.headerBidderBids,i.headerBidderTimeout=Object(C.a)(t.headerBidderTimeout)?t.headerBidderTimeout:i.headerBidderTimeout,i.resetRequestsCapTime=Object(C.a)(t.resetRequestsCapTime)?t.resetRequestsCapTime:i.resetRequestsCapTime,i.resetImpressionsCapTime=Object(C.a)(t.resetImpressionsCapTime)?t.resetImpressionsCapTime:i.resetImpressionsCapTime,i.resetCapType=Object(C.a)(t.resetCapType)?t.resetCapType:i.resetCapType,i.timeBetweenRequests=Object(C.a)(t.timeBetweenRequests)?t.timeBetweenRequests:i.timeBetweenRequests,i.skipMode=Object(C.a)(t.skipMode)?t.skipMode:i.skipMode,i.floorPrice=Object(C.a)(t.floorPrice)?t.floorPrice:i.floorPrice,i.adBreakSettings=Object(C.a)(t.adBreakSettings)?t.adBreakSettings:i.adBreakSettings,i.pauseAdOutOfView=Object(C.a)(t.pauseAdOutOfView)?t.pauseAdOutOfView:i.pauseAdOutOfView}MD(){this.$D(this.apiConfig.settings.advertising.preRollBreak,h.ProtoAdBreakTypeEnum.PreRoll),this.$D(this.apiConfig.settings.advertising.postRollBreak,h.ProtoAdBreakTypeEnum.PostRoll),this.$D(this.apiConfig.settings.advertising.maxNumberOfMidRolls,h.ProtoAdBreakTypeEnum.MidRoll)}$D(t,i){const e=this.UD(this.apiConfig.settings.advertising.adBreaks,i),s=this.UD(this.TD.adBreaks,i),n={maxAdPodDuration:0,maxAdSlotDuration:0,numberOfAdSlots:1,types:[i]};e?this.adBreaks.push(e):!Object(C.a)(t)||e||s?!e&&s&&this.adBreaks.push(s):this.adBreaks.push(n)}UD(t,i){if(!t)return;let e;return t.forEach(t=>{t.types.includes(i)&&((e=Object.assign({},t)).types=[i])}),e}DD(t){const{adBreaks:i}=this;let e=t;const s=[];return i.forEach(t=>{t.types.forEach(i=>s.push(Object.assign(Object.assign({},t),{types:[i]})))}),s.forEach(t=>{e=this.removeCompatibleLineItems(t,e)}),t.filter(t=>!e.includes(t))}removeCompatibleLineItems(t,i){const e=t.types[0],s=t.numberOfAdSlots>1?h.ProtoLineItemAdBreakTypeEnum.AdPod:h.ProtoLineItemAdBreakTypeEnum.SingleAd;return i.filter(t=>!t.adBreakSettings.adBreakTargeting.some(t=>t.adRollType===e&&(t.adBreakTypeEnum===h.ProtoLineItemAdBreakTypeEnum.All||t.adBreakTypeEnum===s)))}PD(t){t.forEach(t=>{t.adBreakSettings||this.VD(t),this.LD(t)})}VD(t){t.adBreakSettings={adBreakTargeting:[{adRollType:h.ProtoAdBreakTypeEnum.PreRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.MidRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All},{adRollType:h.ProtoAdBreakTypeEnum.PostRoll,adBreakTypeEnum:h.ProtoLineItemAdBreakTypeEnum.All}]}}LD(t){0===t.requestCap&&(t.requestCap=20)}ED(){this.adBreaks.forEach(t=>{t.maxAdSlotDuration*=$.f,t.maxAdPodDuration*=$.f,t.numberOfAdSlots<=1?t.maxAdPodDuration=0:t.maxAdSlotDuration>t.maxAdPodDuration&&(t.maxAdSlotDuration=t.maxAdPodDuration)})}BD(t,i){const e=Object.assign({},i);return this.FD(t,e),Object(C.a)(t.externalMediaFile)&&(e.externalMediaFile=t.externalMediaFile),Object(C.a)(t.externalHlsFile)&&(e.externalHlsFile=t.externalHlsFile),e.customCpm=t.cpm,e}RD(){return h.ProtoLineItem.toObject(h.ProtoLineItem.fromObject({}),{defaults:!0,arrays:!0,objects:!0})}}class Kl extends Yl{constructor(t,i,e,s,n,r,h,a,o,c,u){super(t,i,e,s,n,r,h,a,u,o,Ka),this.global=t,this.targetContainer=i,this.TD=e,this.videoPosition=o,this.storyPosition=c,this.fontFamilySettings={},this.primaryColorList={},this.secondaryColorList={},this.accentColorList={},this.disableCTARendering=!1,this.disableStoryProgressBarRendering=!1,this.disableTitleRendering=!1,this.activeVersion=this.TD.activeVersion,this.storyId=this.TD.storyId,this.storyMetadata=this.apiConfig.settings.story,this.sdkVersion=this.apiConfig._appSettings.sdkVersion,this.minSlidesBeforeFirstAd=Object(C.a)(this.apiConfig.settings.advertising.slidesBeforeFirstAd)?this.apiConfig.settings.advertising.slidesBeforeFirstAd:this.TD.minSlidesBeforeFirstAd,this.slidesBetweenAds=Object(C.a)(this.apiConfig.settings.advertising.slidesBetweenAds)?this.apiConfig.settings.advertising.slidesBetweenAds:this.TD.slidesBetweenAds,this.TD.floatingMode===no.ProtoPlayerFloatingMode.Always?this.orientation=no.ProtoPlayerOrientationEnum.Landscape:this.orientation=Object(C.a)(this.apiConfig.settings.customization.orientation)?this.apiConfig.settings.customization.orientation:this.TD.orientation,this.orientationBreakpoint=Object(C.a)(this.apiConfig.settings.customization.orientationBreakpoint)?this.apiConfig.settings.customization.orientationBreakpoint:this.TD.orientationBreakpoint,Object(C.f)(this.apiConfig.settings.customization.fontFamilySettings)&&(this.fontFamilySettings=this.apiConfig.settings.customization.fontFamilySettings),this.ND(),this.HD(),this.qD(),this.zD(),this.WD(),this.GD(),this.useAccentColorForProgressBar=Object(C.a)(this.apiConfig.settings.customization.useAccentColorForProgressBar)?this.apiConfig.settings.customization.useAccentColorForProgressBar:this.TD.useAccentColorForProgressBar,this.endOfSlideCycleMode=Object(C.a)(this.apiConfig.settings.endOfSlideCycleMode)?this.apiConfig.settings.endOfSlideCycleMode:this.TD.endOfCycleMode,this.uiComponentsVisibility.expandButton=!1,this.disableCTARendering=Object(C.a)(this.apiConfig.settings.disableCTARendering)&&this.apiConfig.settings.disableCTARendering,this.disableStoryProgressBarRendering=Object(C.a)(this.apiConfig.settings.disableStoryProgressBarRendering)&&this.apiConfig.settings.disableStoryProgressBarRendering,this.disableTitleRendering=Object(C.a)(this.apiConfig.settings.disableTitleRendering)&&this.apiConfig.settings.disableTitleRendering,this.publisherName=Object(C.h)(this.apiConfig.settings.customization.publisherName)?this.apiConfig.settings.customization.publisherName:this.TD.publisherName}ND(){this.apiConfig.settings.customization.primaryColorList&&Object(C.h)(this.apiConfig.settings.customization.primaryColorList.background)?this.primaryColorList.background=this.apiConfig.settings.customization.primaryColorList.background:this.TD.primaryColorList&&Object(C.h)(this.TD.primaryColorList.background)&&(this.primaryColorList.background=this.TD.primaryColorList.background)}HD(){this.apiConfig.settings.customization.primaryColorList&&Object(C.h)(this.apiConfig.settings.customization.primaryColorList.foreground)?this.primaryColorList.foreground=this.apiConfig.settings.customization.primaryColorList.foreground:this.TD.primaryColorList&&Object(C.h)(this.TD.primaryColorList.foreground)&&(this.primaryColorList.foreground=this.TD.primaryColorList.foreground)}qD(){this.apiConfig.settings.customization.secondaryColorList&&Object(C.h)(this.apiConfig.settings.customization.secondaryColorList.background)?this.secondaryColorList.background=this.apiConfig.settings.customization.secondaryColorList.background:this.TD.secondaryColorList&&Object(C.h)(this.TD.secondaryColorList.background)&&(this.secondaryColorList.background=this.TD.secondaryColorList.background)}zD(){this.apiConfig.settings.customization.secondaryColorList&&Object(C.h)(this.apiConfig.settings.customization.secondaryColorList.foreground)?this.secondaryColorList.foreground=this.apiConfig.settings.customization.secondaryColorList.foreground:this.TD.secondaryColorList&&Object(C.h)(this.TD.secondaryColorList.foreground)&&(this.secondaryColorList.foreground=this.TD.secondaryColorList.foreground)}WD(){this.apiConfig.settings.customization.accentColorList&&Object(C.h)(this.apiConfig.settings.customization.accentColorList.background)?this.accentColorList.background=this.apiConfig.settings.customization.accentColorList.background:this.TD.accentColorList&&Object(C.h)(this.TD.accentColorList.background)&&(this.accentColorList.background=this.TD.accentColorList.background)}GD(){this.apiConfig.settings.customization.accentColorList&&Object(C.h)(this.apiConfig.settings.customization.accentColorList.foreground)?this.accentColorList.foreground=this.apiConfig.settings.customization.accentColorList.foreground:this.TD.accentColorList&&Object(C.h)(this.TD.accentColorList.foreground)&&(this.accentColorList.foreground=this.TD.accentColorList.foreground)}}function Zl(t,i){const e=t.toObject({},{defaults:!0,arrays:!0,objects:!0}),s=function(t){return t.toObject({},{defaults:!0,arrays:!0,objects:!0})}(i);return e.players.push(s),e.browser=h.Browser.toObject(h.Browser.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e.geoLocation=h.GeoLocation.toObject(h.GeoLocation.fromObject({}),{defaults:!0,arrays:!0,objects:!0}),e}var td=e(27);class id extends zl{constructor(t,i){super(),this.de=t;try{this.bo=new Dl,this.gs()}catch(t){Object(n.a)({message:"omid_verification_client_error",exception:t.message,callStack:t.callStack,level:i?h.ProtoLoggingLevelEnum.FATAL:h.ProtoLoggingLevelEnum.INFO})}}subscribe(t,i){return this.bo.on(t,i)}gs(){const t=this.JD();if(this.QD=new t,!this.QD.isSupported())throw new Error("omid_not_implemented");this.XD(),this.mv()}JD(){if(!this.de.OmidVerificationClient)throw new Error("omid_verification_client_not_found");if(!this.de.OmidVerificationClient[td.k])throw new Error("omid_verification_client_wrong_version");return this.de.OmidVerificationClient[td.k]}XD(){this.QD.registerSessionObserver(t=>{t&&t.type===td.e.sessionError&&Object(n.a)({message:"omid_verification_client_session_error",exception:t.data.message,level:h.ProtoLoggingLevelEnum.WARNING})})}mv(){this.QD.addEventListener(td.e.geometryChange,t=>{try{const{percentageInView:i,reasons:e}=t.data.adView,s=[td.a.backgrounded,td.a.notFound].some(t=>e.includes(t));this.xD(s);const r=i/100;this.setViewableThreshold(r),this.bo.trigger(T.d.OmidViewabilityThreshold,r)}catch(t){Object(n.a)({message:"omid_verification_client_geometry_change_error",exception:t.message,callStack:t.callStack,level:h.ProtoLoggingLevelEnum.FATAL,throttle:1})}})}}const ed=`cnx-playspace-css-${Yi.a.version}`,sd={src:zt.a.endPoints.assets.css.playspace,id:ed};class nd extends a.a{Mn(){return sd}getDelegateHandler(){return{getCurrentVolume:()=>{return this.renderer.getApiMethods().getVolume()}}}getRendererInstance(t,i,e,s,n){return new Ul(this,t,i,e,s,n)}getViewabilityService(t,i,e=!1){return this.externalAttributes.settings.useExternalViewabilityService?new zl:this.hs?new id(window,this.Ds):new ql(t.global,i,e)}getPlayerResponse(t,i){return new Promise((i,e)=>{cr.a.sendProtoRequest({ProtoResponse:no.ProtoPlayspaceResponse,ProtoRequest:no.ProtoPlayspaceRequest,requestData:t,endpoint:zt.a.endPoints.api.story,withCredentials:!0,queryParams:{[pr.b]:Yi.a.version},logError:!0}).then(t=>{window.parent.connatixDummy&&Object(ks.b)("connatixDummy",this.pageUrl)&&(t.players[0]=Object.assign(Object.assign({},t.players[0]),window.parent.connatixDummy)),i(t)}).catch(t=>{this.GLOBAL.cnxDummyResponse?i(this.GLOBAL.cnxDummyResponse):e(t)})})}getPlayerModel(t,i,e){return new Kl(t.insertWindow?t.insertWindow:this.GLOBAL,t.insertContainer,i.players[e],i.browser.device,i.secondLevelDomain,this.externalAttributes,this.isServerlessMode,i.supplyChain,this.queryParams.cnxVideoPosition,this.queryParams.cnxStoryPosition,i.isSeoTraffic||this.queryParams.cnxIsSeoTraffic)}getApiConfigEnums(){return Tl}getApiConfigEvents(){return Ol}getSpecificRequestData(){const t={};return this.queryParams.cnxStoryId?t.forceStoryId=this.queryParams.cnxStoryId:this.externalAttributes.storyId&&(t.forceStoryId=this.externalAttributes.storyId),t}defaultInitFromProto(){return Zl(no.ProtoPlayspaceResponse,no.ProtoPlayspace)}Js(){super.Js(),this.externalAttributes.settings.story=void 0}}var rd=e(36),hd=e(12);class ad{constructor(t=!1){this._debugLogging=t,this.YD="eventEmitted",this.bo=new Dl}subscribe(t){return this.bo.on(this.YD,t)}unsubscribe(t){this.bo.remove(this.YD,t)}emitSessionStart(t){const i={videoMetadata:t};this.KD({metadata:i,name:hd.a.SessionStart})}emitContentComplete(){this.KD({name:hd.a.ContentComplete})}emitSessionEnd(){this.KD({name:hd.a.SessionEnd})}emitPlay(){this.KD({name:hd.a.Play})}emitPause(){this.KD({name:hd.a.Pause})}emitAdPlay(){this.KD({name:hd.a.AdPlay})}emitAdPause(){this.KD({name:hd.a.AdPause})}emitAdPlaying(){this.KD({name:hd.a.AdPlaying})}emitAdPaused(){this.KD({name:hd.a.AdPaused})}emitAdImpression(t,i){const e={adMetadata:t,customAdMetadata:i};this.KD({metadata:e,name:hd.a.AdImpression})}emitAdComplete(){this.KD({name:hd.a.AdComplete})}emitAdStopped(){this.KD({name:hd.a.AdStopped})}emitAdBreakStart(t){const i={adBreakMetadata:t};this.KD({metadata:i,name:hd.a.AdBreakStart})}emitAdBreakComplete(){this.KD({name:hd.a.AdBreakComplete})}emitPlayerResized(t){const i={playerDimensionsMetadata:t};this.KD({metadata:i,name:hd.a.PlayerResized})}emitOnEnterFullscreen(){this.KD({name:hd.a.OnEnterFullscreen})}emitOnExitFullscreen(){this.KD({name:hd.a.OnExitFullscreen})}emitOnPlayerCollapsed(){this.KD({name:hd.a.PlayerCollapsed})}emitOnPlayerExpanded(){this.KD({name:hd.a.PlayerExpanded})}emitAdError(){this.KD({name:hd.a.AdError})}emitPlayError(){this.KD({name:hd.a.PlayError})}emitRenderError(){this.KD({name:hd.a.RenderError})}emitAdClickThru(){this.KD({name:hd.a.AdClickThru})}emitAdInteraction(){this.KD({name:hd.a.AdInteraction})}emitAdVideoStart(t){const i={adVideoStartMetadata:t};this.KD({metadata:i,name:hd.a.AdVideoStart})}emitAdLoaded(t){const i={adLoadedMetadata:t};this.KD({metadata:i,name:hd.a.AdLoaded})}emitAdStateChange(t){const i={adStateChangedMetadata:t};this.KD({metadata:i,name:hd.a.AdStateChange})}emitAdVideoFirstQuartile(){this.KD({name:hd.a.AdVideoFirstQuartile})}emitAdVideoMidpoint(){this.KD({name:hd.a.AdVideoMidpoint})}emitAdVideoThirdQuartile(){this.KD({name:hd.a.AdVideoThirdQuartile})}emitAdVideoComplete(){this.KD({name:hd.a.AdVideoComplete})}emitVolumeChange(t){this.KD({name:hd.a.VolumeChange,metadata:{volume:t}})}emitAdVolumeChange(){this.KD({name:hd.a.AdVolumeChange})}emitAdSkipped(){this.KD({name:hd.a.AdSkipped})}KD(t){this._debugLogging&&console.log("Connatix Player Elements debugging: ",t),this.bo.trigger(this.YD,t)}destroy(){this.KD({name:hd.a.Destroy}),this.bo.removeAll()}}const od=window.parent,cd=[];window.addEventListener("unload",function(t){cd.forEach(t=>t.destroy())});const ud=Object($t.f)(od).topFrame;rd.a.abServiceType=rd.b.PlayspaceABService;const ld=function(t,i,e){var s,a;const o=Object(C.h)(t._appSettings.bundleID),c=Object(C.h)(t._appSettings.sdkVersion);if(c){const i=parseInt(t._appSettings.sdkVersion.substr(0,1),10);t.settings.useExternalViewabilityService=!(i>=3)}const{cmp:u,tcf:l,usPrivacyString:d,deviceID:f}=t._appSettings,p=((t,i)=>i.AMP_CONTEXT_DATA||t.settings.implementationType===h.ProtoImplementationType.Amp)(t,od),b={UserManagerService:new r.b(od,o,p,{cmp:u,tcf:l,usPrivacyString:d,deviceID:f}),EventsStorageService:new ad(t.settings.plugins._debugLogging)},v=new nd(b,od,o,p,c,e);cd.push(v);const m=function(){Object($t.k)(()=>new Promise((t,i)=>{if(Object(j.m)(sd.id,ud))return t();Object(j.B)(sd,ud.document.head,ud,()=>t(),t=>i(t))||i()})).catch(t=>{throw Object(n.a)({message:"Prerender_Playspace_Loader_add_css_link",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3}),t}).then(()=>{try{Object(j.W)(od),v.updateQueryParams(),v.loadScriptTag(t,i)?v.insertRenderer():Object(n.a)({message:"Prerender_Playspace_main_no_script_tag",level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3})}catch(t){Object(n.a)({message:"Prerender_Playspace_main_insertRenderer",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}).catch(()=>{})};o?m():v.findPageUrl(od,null===(a=null===(s=t)||void 0===s?void 0:s.settings)||void 0===a?void 0:a.ampUrl).then(()=>m()).catch(t=>{Object(n.a)({message:"Prerender_Playspace_main_init",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3}),v.registerApiError()})},dd=t=>{var i,e,s,n,r;const h=Object.assign({},t),a=null===(i=h._appSettings)||void 0===i?void 0:i.cmp;(Object(C.h)(null===(e=h._appSettings)||void 0===e?void 0:e.gdprConsentString)||Object(C.h)(null===(s=h._appSettings)||void 0===s?void 0:s.gdprParsedVendorString))&&(h._appSettings.cmp={consentString:Object(C.h)(null===(n=a)||void 0===n?void 0:n.consentString)?a.consentString:h._appSettings.gdprConsentString,parsedVendorConsents:Object(C.h)(null===(r=a)||void 0===r?void 0:r.parsedVendorConsents)?a.parsedVendorConsents:h._appSettings.gdprParsedVendorString});const o=Object.assign({},se(Object.assign({},h._appSettings.cmp))),c=Object.assign({},se(Object.assign({},h._appSettings.tcf))),{usPrivacyString:u,deviceID:l,appPageURL:d}=se({usPrivacyString:h._appSettings.usPrivacyString,deviceID:h._appSettings.deviceID,appPageURL:h._appSettings.appPageURL});return h._appSettings=Object.assign(Object.assign({},h._appSettings),{cmp:o,tcf:c,usPrivacyString:u,deviceID:l,appPageURL:d}),h};try{!function(){if(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))return void Object(n.a)({message:"Prerender_Playspace_main_IE_check",level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3});let t=[];od.cnxps&&(t=od.cnxps.cmd),od.cnxps=function(){function t(t){var i,e;t.settings=t.settings||{},t._appSettings=t._appSettings||{},t._appSettings.cmp=t._appSettings.cmp||{},t._appSettings.tcf=t._appSettings.tcf||{},t.settings.customization=t.settings.customization||{},t.settings.rendering=t.settings.rendering||{},t.settings.advertising=t.settings.advertising||{},t.settings._connatixInternals=t.settings._connatixInternals||{},t.settings.plugins=t.settings.plugins||{},t.settings.advertising.skipAdSettings=t.settings.advertising.skipAdSettings||{};return["602660809","com.thomsonreuters.reuters","12345","com.cnx.androidsdkapp"].includes(null===(e=null===(i=t)||void 0===i?void 0:i._appSettings)||void 0===e?void 0:e.bundleID)&&Object(n.a)({level:h.ProtoLoggingLevelEnum.INFO,message:"CNX_REUTERS_APPSETTINGS",exception:JSON.stringify(t._appSettings)}),t=dd(t),{render:function(i,e){try{ld(t,i,e)}catch(t){Object(n.a)({message:"Prerender_Playspace_main_initPlayer",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}}}return t.cmd={push:function(t){try{t()}catch(t){Object(n.a)({message:"Prerender_Playspace_main_push_callback",level:h.ProtoLoggingLevelEnum.INFO,exception:t.message,callStack:t.stack,throttle:1e3})}}},t.configEnums=Tl,t.configEvents=Ol,t}(),t.forEach(t=>{try{t()}catch(t){Object(n.a)({message:"Prerender_Playspace_main_commands_callback",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3})}})}()}catch(t){Object(n.a)({message:"Prerender_Playspace_main",exception:t.message,callStack:t.stack,level:h.ProtoLoggingLevelEnum.INFO,throttle:1e3})}}]);