YUI.add("af-applets",function(e,t){"use strict";var l=e.Lang.isFunction;function o(){var e=this;YUI.Env.Af=YUI.Env.Af||{},YUI.Env.Af.Applets=e,e.applets={},e._firstControllerNode=null,l(e.after)&&e.after("*:appletdestroyed",function(t){var l=t.applet||{},o=e.applets[l.guid];o&&l.clientId===o.clientId&&delete e.applets[l.guid]})}o.prototype={addController:function(e){if(!e||!e.name||"function"!=typeof e.execute)return!1;if(!this._firstControllerNode)return this._firstControllerNode={controller:e,next:null},!0;for(var t,l=this._firstControllerNode;l;){if(l.controller.name===e.name)return l.controller=e,!0;t=l,l=l.next}return t.next={controller:e,next:null},!0},execControllers:function(e){e&&e.action&&this._firstControllerNode&&this._execController(e,this._firstControllerNode)},_execController:function(e,t){if(e&&e.action&&t&&t.controller){var l=this;t.controller.execute(this,e,function(o){o||l._execController(e,t.next)})}},initializer:function(t){t=t||{};var l=e.Af,o="aptsInitializer",n=this;l.Utils.perfStart(o),n.addController(new l.AppletInit),n.addController(new l.AppletLoad),n.addController(new l.AppletAdd),n.addController(new l.AppletRemote),n.addController(new l.AppletRemove),n.addController(new l.AppletMove),n.addController(new l.AppletAction),n.addController(new l.AppletShowView),n.addController(new l.AppletCloseView),n.addController(new l.AppletRefreshView),n.addController(new l.AppletSaveSettings),e.Array.forEach(t.controllers,function(e){n.addController(e)}),n.execControllers({action:"page.init"}),l.Utils.perfStop(o)},getAppletLayout:function(){return e.Af.AppletDom.getLayout()},addApplet:function(e,t,l,o,n){var r={type:e,config:t,settings:l,location:o};this.execControllers({action:"applet.add",params:r,callback:n})},initApplet:function(e,t,o){l(t)&&(o=t,t=!1);var n={replace:!!t};"string"==typeof e?n.guid=e:n.node=e,this.execControllers({action:"applet.init",params:n,callback:o})},loadApplet:function(e,t){var l={};"string"==typeof e?l.guid=e:l.node=e,this.execControllers({action:"applet.load",params:l,callback:t})},moveApplet:function(t,o,n,r,a){l(r)&&(a=r,r={});var p={action:"applet.move",params:e.merge({guid:t,from:o,to:n},r),callback:a};this.execControllers(p)},removeApplet:function(t,o,n){l(o)&&(n=o,o={});var r={action:"applet.remove",params:e.merge({guid:t},o),callback:n};this.execControllers(r)}},e.namespace("Af").Applets=o,e.Af.getApplet=function(t){return e.Af.Utils.objectGetValue(YUI.Env.Af,"Applets.applets."+t)||null}},"@VERSION@",{requires:["af-applet-action","af-applet-init","af-applet-load","af-applet-mgr","af-applet-savesettings","af-applet-viewmgr","af-dom","af-utils"]});