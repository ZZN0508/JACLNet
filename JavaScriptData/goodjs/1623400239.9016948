(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{369:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return F}));n(43),n(100);var r,o=n(113),c=n(17),l=n(18),d=n(9),f=(n(46),n(29),n(54),n(38),n(910),n(1)),v=(n(6),n(13),n(53),n(11),n(22),n(25),n(26),n(4),n(8)),h=n(12);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}!function(t){t.EVENT_TRACKED="eventTracked",t.EVENT_REGISTERED="eventRegistered"}(r||(r={}));var m=function(){function t(){Object(v.a)(this,t)}return Object(h.a)(t,[{key:"log",value:function(t,data){var e=new CustomEvent(t.toString(),{detail:{data:data}});document.dispatchEvent(e)}}]),t}(),y=function(){function t(){Object(v.a)(this,t),this.subscribers={}}return Object(h.a)(t,[{key:"publish",value:function(t){if(this.subscribers[t.type])return this.subscribers[t.type].forEach((function(e){return e.handle(t)})),this}},{key:"subscribe",value:function(t,e){return this.subscribers[e]||(this.subscribers[e]=[]),-1===this.subscribers[e].indexOf(t)&&this.subscribers[e].push(t),this}}]),t}(),w=function(){function t(){Object(v.a)(this,t)}return Object(h.a)(t,[{key:"handle",value:function(t){this.bus&&this.isHandleable(t)&&this.bus.publish(this.getEvent(t))}}]),t}(),E=function(){function t(e){Object(v.a)(this,t),this.userContext=e}return Object(h.a)(t,[{key:"getCookie",value:function(t){var e=document.cookie.split(/;\s*/).map((function(t){return t.split("=",2)})).filter((function(e){return e[0]===t}));return e.length?decodeURI(e[0][1]):null}},{key:"isTouchScreen",value:function(){return!!("ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch)}},{key:"getBrowserPayload",value:function(){return{recognized:this.getCookie("recognized"),touch_screen:this.isTouchScreen()}}},{key:"getUserContextData",value:function(){return this.userContext}},{key:"getBackendPayload",value:function(){return window.Applet&&window.Applet.getVar("event_data")||{}}},{key:"getData",value:function(data){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return Object.assign({},e.reduce((function(data,t){return Object.assign(data,t)}),{}),data)}},{key:"merge",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Object.assign.apply(null,e.concat([{}]).reverse());return Object.keys(r).reduce((function(t,n){return Object.assign(t,Object(f.a)({},n,e.reduce((function(t,e){return e&&void 0!==e[n]?e[n]:t}),r[n])))}),{})}},{key:"handle",value:function(t){var e=this.getBackendPayload(),n=this.getBrowserPayload(),r=this.getUserContextData();this.send(this.merge(e,t,{data:this.getData(t.data,n,r,e.data)}))}}]),t}();var O,_=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||t.trackers.indexOf("gtm")>-1)}},{key:"getEvent",value:function(t){return{type:"gtm",gtmEvent:t.gtmEvent,event:t.event,sublocation:t.sublocation,label:t.label||t.element,value:t.value,data:t.data}}}]),n}(w),x=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return t.trackingEvent&&(1==+t.trackingGtm||!t.hasOwnProperty("trackingGtm"))}},{key:"getEvent",value:function(t){return{type:"gtm",gtmEvent:t.trackingGtmEvent,event:t.trackingEventAlias||t.trackingEvent,sublocation:t.trackingSublocation,label:t.trackingLabel||t.trackingElement,value:t.trackingValue,data:t.trackingData}}}]),n}(w),j=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"normalize",value:function(t){return Object.assign({},t.data,{event:t.gtmEvent||"ga",eventAction:t.event||" ",eventCategory:t.sublocation||" ",eventLabel:t.label||" ",eventValue:t.value||" "})}},{key:"send",value:function(t){var e=window.dataLayer;e&&e.push(this.normalize(t))}}]),n}(E),R=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||t.trackers.indexOf("olog")>-1)}},{key:"getEvent",value:function(t){return{type:"olog",event:t.event,location:t.location,locationDefault:t.locationDefault,sublocation:t.sublocation,label:t.label||t.element,data:t.data}}}]),n}(w),A=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return!!t.ologEvent||t.trackingEvent&&(1==+t.trackingOlog||!t.hasOwnProperty("trackingOlog"))}},{key:"getEvent",value:function(t){return{type:"olog",event:t.ologEvent||t.trackingEventAlias||t.trackingEvent,location:t.ologLocation||t.trackingLocation,locationDefault:t.trackingLocationDefault,sublocation:t.ologSublocation||t.trackingSublocation,label:t.trackingLabel||t.trackingElement,referrer:t.ologReferrer,data:t.ologData||t.trackingData}}}]),n}(w),D=function(t){Object(c.a)(n,t);var e=k(n);function n(t,r){var o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return Object(v.a)(this,n),(o=e.call(this,{user_uid:t.config.userUid,organization_uid:t.config.organizationUid,visitor_id:t.config.visitorId,organization_type_title:t.config.organizationTypeTitle})).olog=t,o.oLogEvent=r,o.pageLocation=c,o}return Object(h.a)(n,[{key:"getBrowserPayload",value:function(){return Object.assign(Object(o.a)(Object(d.a)(n.prototype),"getBrowserPayload",this).call(this),{userAgent:window.navigator.userAgent,language:window.navigator.language||window.navigator.userLanguage,platform:window.navigator.platform})}},{key:"getData",value:function(data){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return(Array.isArray(data)&&data.length?data:[data]).map((function(data){return Object.assign({},e.reduce((function(data,t){return Object.assign(data,t)}),{}),data)}))}},{key:"send",value:function(t){var e=new this.oLogEvent({event:t.event,location:t.location||t.locationDefault||this.pageLocation(),referrer:t.referrer,sublocation:t.sublocation,data:t.data.map((function(data){return Object.assign({event_label:t.label},data)})),timestamp:+new Date});return this.olog.sendEvent(e)}}]),n}(E),T=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return t.event&&(!Array.isArray(t.trackers)||!t.trackers.length||t.trackers.indexOf("snowplow")>-1)}},{key:"getEvent",value:function(t){return{type:"snowplow",event:t.event,event_label:t.label||t.element,location:t.location,locationDefault:t.locationDefault,sublocation:t.sublocation,value:t.value,data:t.data}}}]),n}(w),P=function(t){Object(c.a)(n,t);var e=k(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"isHandleable",value:function(t){return t.trackingEvent&&(1==+t.trackingSnowplow||!t.hasOwnProperty("trackingSnowplow"))}},{key:"getEvent",value:function(t){return{type:"snowplow",event:t.trackingEventAlias||t.trackingEvent,event_label:t.trackingLabel||t.trackingElement,location:t.trackingLocation,locationDefault:t.trackingLocationDefault,sublocation:t.trackingSublocation,value:t.trackingValue,data:t.trackingData}}}]),n}(w),L=function(t){Object(c.a)(n,t);var e=k(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return Object(v.a)(this,n),(r=e.call(this,t)).userContext=t,r.pageLocation=o,r}return Object(h.a)(n,[{key:"getPayload",value:function(t){var e=["type","data","locationDefault"];return this.merge({location:t.locationDefault},Object.assign(Object.keys(t).filter((function(t){return-1===e.indexOf(t)})).reduce((function(e,n){return Object.assign(e,Object(f.a)({},n,t[n]))}),{}),t.data))}},{key:"send",value:function(t){var e=window.dataLayer,n=this.getPayload(t);n.location=n.location||this.pageLocation(),n.location&&!n.location.startsWith("widget_")||console.warn("location is invalid",n),e?e.push({event_payload:void 0},{event:"snowplow",event_payload:n}):console.warn("dataLayer is not available, unable to send payload",n)}}]),n}(E),z=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;Object(v.a)(this,t),this.bus=e,this.logger=n,this.config=r,this.publishers=[],this.subscribers={},this.config.upTracking=this.config.upTracking||{}}return Object(h.a)(t,[{key:"addPublisher",value:function(t){return t.bus=this.bus,this.publishers.push(t),this}},{key:"addSubscriber",value:function(t,e){var n=this;return e.forEach((function(e){n.subscribers[e]||(n.subscribers[e]=[]),-1===n.subscribers[e].indexOf(t)&&(n.subscribers[e].push(t),n.bus.subscribe(t,e))})),this}},{key:"getLocation",value:function(t){var e=t.location||t.trackingLocation,n=this.config.upTracking&&this.config.upTracking.location,r=(this.config.Applet&&this.config.Applet.getVar("event_data")||{}).location,o=t.locationDefault||t.trackingLocationDefault;return e||n||r||o}},{key:"track",value:function(t){var e=this;t["trackingEvent"in t?"trackingLocation":"location"]=this.getLocation(t);var n=this.modifyEvent(t);return new Promise((function(t){e.publishers.forEach((function(t){t.handle(n)})),e.logger.log(r.EVENT_TRACKED,n),t()}))}},{key:"setLocation",value:function(t){this.config.upTracking.location=t}},{key:"modifyEvent",value:function(t){return this.config.upTracking?(this.config.upTracking.eventModifiers||[]).reduce((function(t,e){return e instanceof Function?e(t):t}),t):t}},{key:"pageView",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["snowplow"];this.config.upTracking.pageViewSent||(this.config.upTracking.pageViewSent=!0,this.track({trackers:t,event:"impression",sublocation:"page",label:"general_pv"}))}},{key:"addEventModifier",value:function(t){this.config.upTracking.eventModifiers||(this.config.upTracking.eventModifiers=[]),"function"==typeof t&&this.config.upTracking.eventModifiers.push(t)}}]),t}(),S=/bot|googlebot|crawler|spider|robot|crawling/i,W=(n(41),n(84),[{name:"xs",minWidth:0,maxWidth:480},{name:"sm",minWidth:480,maxWidth:768},{name:"md",minWidth:768,maxWidth:992},{name:"lg",minWidth:992,maxWidth:1200},{name:"xl",minWidth:1200,maxWidth:Number.MAX_VALUE}]),C=function(t){var e=t.innerWidth;return W.find((function(t){var n=t.minWidth,r=t.maxWidth;return e>=n&&e<r})).name};!function(t){t.IOS_APP_REFERRER="mobile_app_ios",t.ANDROID_APP_REFERRER="mobile_app_android",t.MOBILE_WEB_IOS_REFERRER="mobile_web_ios",t.MOBILE_WEB_ANDROID_REFERRER="mobile_web_android",t.MOBILE_WEB_OTHER_REFERRER="mobile_web_other",t.DESKTOP_REFERRER="desktop"}(O||(O={}));var I,B=function(t,e){var n,r=O.DESKTOP_REFERRER;return e&&e.platform?r="android"===(n=e.platform)?O.ANDROID_APP_REFERRER:"ios"===n?O.IOS_APP_REFERRER:void 0:function(t){var a,e=!1;return a=t.navigator.userAgent||t.navigator.vendor||t.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0,4)))&&(e=!0),e}(t)&&(r=function(t){var e=O.MOBILE_WEB_OTHER_REFERRER;return/Android/.test(t)?e=O.MOBILE_WEB_ANDROID_REFERRER:/iPad|iPhone|iPod/.test(t)&&(e=O.MOBILE_WEB_IOS_REFERRER),e}(t.navigator.userAgent)),r},N=function(){function t(t){this.config=t;var e=this.config,n=e.userNid,r=e.visitorId;n||r||console.warn("Unable to identify user, check olog configuration")}return t.prototype.setApi=function(t){this.api=t},t.prototype.sendEvent=function(t,e){if(void 0===e&&(e={}),n=window.navigator.userAgent,S.test(n))return Promise.reject();var n,r=this.config,o=r.userNid,c=r.visitorId,l=r.organizationUid,d=r.mobileNativeApp,f=r.organizationTypeTitle;"page"===t.event&&(I="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})));var v={log_guid:I,screensize:C(window),referrer:B(window,d),organization_uid:l,organization_type_title:f};e.eventContext&&Object.assign(v,e.eventContext),t.screensize=v.screensize,t.referrer=v.referrer,Array.isArray(t.data)&&t.data.forEach((function(t){Object.assign(t,v)}));var h={id:o||c,data:t};h.data=JSON.stringify(t);var k="/api/o2/v1/logging/:id.json".replace(":id",h.id);return this.api.url(k).options({}).headers(this.getHeaders(e)).json(h).post()},t.prototype.getHeaders=function(t){var e=this.config,n=e.XOdeskReferrer,r=e.userNid,o=e.visitorId,c=e.visitorApiKey,l={"X-Odesk-Referrer":n||"desktop"};return!r&&o&&c&&(l["X-Odesk-Visitor"]=c),t&&t.headers&&Array.isArray(t.headers)&&t.headers.forEach((function(t){Object.assign(l,t)})),l},t}(),V=function(t){var e=this;this.data=[{}],this.timestamp=t.timestamp||Date.now(),Object.keys(t).map((function(n){e[n]=t[n]}))};function F(t){var e=t.store,n=t.$http,r=t.app;function o(){var t=e.state.user,n=e.state.orgs&&e.state.orgs.current,o=e.state.visitor;return{olog:{userUid:t&&t.id,userNid:t&&t.nid,organizationUid:n&&n.id,organizationTypeTitle:n&&n.typeTitle,visitorId:o.id,visitorApiKey:e.state.tracking.visitorApiKey,mobileNativeApp:r.$isNativeApp},userContext:{user_uid:t&&t.id,organization_uid:n&&n.id,organization_type_title:n&&n.typeTitle,visitor_id:o.id}}}var c=o(),l=c.olog,d=c.userContext,f=new N(l);f.api=n({auth:e.getters["context/isUser"],handleApiErrors:!1,csrf:!1});var v=function(){return e.state.tracking&&e.state.tracking.location},h=new j(d),k=new L(d,v),w=new m,E=new z(new y,w);return E.addPublisher(new _).addPublisher(new x).addSubscriber(h,["gtm"]).addPublisher(new T).addPublisher(new P).addSubscriber(k,["snowplow"]).addPublisher(new R).addPublisher(new A).addSubscriber(new D(f,V,v),["olog"]),E.pageView(),E.setUserConfig=function(){var t=o();f.config=t.olog,h.userContext=t.userContext,k.userContext=t.userContext},E}},910:function(t,e,n){"use strict";var r=n(911),o=n(124);n(161)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,"WeakSet"),t,!0)}},r,!1,!0)},911:function(t,e,n){"use strict";var r=n(127),o=n(101).getWeak,c=n(35),l=n(39),d=n(125),f=n(126),v=n(102),h=n(60),k=n(124),m=v(5),y=v(6),w=0,E=function(t){return t._l||(t._l=new O)},O=function(){this.a=[]},_=function(t,e){return m(t.a,(function(t){return t[0]===e}))};O.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var n=_(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=y(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,c){var v=t((function(t,r){d(t,v,e,"_i"),t._t=e,t._i=w++,t._l=void 0,null!=r&&f(r,n,t[c],t)}));return r(v.prototype,{delete:function(t){if(!l(t))return!1;var data=o(t);return!0===data?E(k(this,e)).delete(t):data&&h(data,this._i)&&delete data[this._i]},has:function(t){if(!l(t))return!1;var data=o(t);return!0===data?E(k(this,e)).has(t):data&&h(data,this._i)}}),v},def:function(t,e,n){var data=o(c(e),!0);return!0===data?E(t).set(e,n):data[t._i]=n,t},ufstore:E}}}]);