System.register(["./common-chunks.system.1976d2aa.js","./client-fetch.system.4a2fccca.js"],(function(e,a){"use strict";var t,o,d,l,n,i,r,c,s,u,f,b,m,g,h,v,k,S,M,p,B;return{setters:[function(e){t=e.j,o=e.D,d=e.B,l=e.t,n=e.S,i=e.a0,r=e.e,c=e.F,s=e.a1,u=e.d,f=e.g,b=e.U,m=e.V,g=e.a2,h=e.C,v=e.a3,k=e.R,S=e.z,M=e.a4,p=e.T},function(e){B=e.c}],execute:function(){void 0===window.postal&&(window.postal=k);var y,R=document.querySelector(".js-footer"),w=function(){R&&!y&&a.import("./index.system.ed52a784.js").then((function(e){var a=e.default;y=a.create().render()}))},E=e("onDOMContentLoaded",(function(){var e;(e={feedbackText:"",feedbackRating:"",beacon:t("Feedback"),render:function(){e.dom=o.create(),e.getElements(),e.bodyScroll=d.getDefaultInstance(),e.screenWidth=e.dom.getWindow().innerWidth,e.isMobile="small"===l.getBreakpoint(e.screenWidth)||"medium"===l.getBreakpoint(e.screenWidth)||!1},getElements:function(){e.feedbackBubble=e.dom.getById("hf-feedback-bubble-fixed-link"),e.modal=e.dom.getById("hf-feedback-bubble-modal"),null!==e.feedbackBubble&&null!==!e.modal&&(e.cancelButton=e.dom.getById("hf-feedback-bubble-cancel"),e.closeButton=e.dom.getById("hf-feedback-bubble-close-btn"),e.label=e.dom.getById("hf-feedback-bubble-textarea-lbl"),e.textAreaHolder=e.dom.getById("hf-fb-textarea-holder"),e.ratingScale=e.dom.getById("hf-feedback-bubble-rating-scale"),e.submitButton=e.dom.getById("hf-feedback-bubble-submit"),e.failureModal=e.dom.getById("hf-feedback-failure-modal"),e.failureModalClose=e.dom.getById("hf-feedback-failure-close-btn"),e.failureModalOK=e.dom.getById("hf-feedback-failure-modal-ok"),e.tabText=e.dom.getById("hf-feedback-tab-text"),e.feedbackModalHelp=e.dom.querySelector("#hf-feedback-disclaimer a"),e.successSnackBar=e.dom.getById("feedbackSuccessSnackBar"),e.feedbackFooterLink=e.dom.getById("hf-feedback-fixed-link"),e.ratingLabels=e.ratingScale&&e.ratingScale.querySelectorAll("button"),e.textArea=e.textAreaHolder&&e.textAreaHolder.querySelector("textarea"),e.feedbackBubble.addEventListener("click",e.showModal),e.feedbackFooterLink&&e.feedbackFooterLink.addEventListener("click",e.showModal),n.get("isFeedbackTabCollapsed")&&e.tabText&&e.tabText.remove(),e.feedbackModalHelp&&e.feedbackModalHelp.addEventListener("click",e.handleFeedbackModalHelpClick))},handleFeedbackModalHelpClick:function(a){a.preventDefault();var t=a.target.href;e.beacon.tagAction(i()),window.location.href=t},showModal:function(a){a.stopPropagation(),e.removeEscHandler=r(e.modal,e.hideModal),e.bodyScroll.lock(),e.setupModalHandlers(),e.modal.removeAttribute("hidden"),e.focusTrap=c.create(e.modal.querySelector("[role=dialog]")),e.removeCloseOnDialogModal=s(e.hideModal)},setupModalHandlers:function(){e.ratingScale&&e.ratingScale.hasChildNodes()&&(e.ratingScale.addEventListener("click",e.handleRatingSelect),e.ratingScale.addEventListener("mouseover",e.handleRatingPreview),e.ratingScale.addEventListener("mouseout",e.handleResetPreview)),e.cancelButton&&e.cancelButton.addEventListener("click",e.hideModal),e.closeButton&&e.closeButton.addEventListener("click",e.hideModal),e.submitButton&&e.submitButton.addEventListener("click",e.handleSubmit)},hideModal:function(){e.focusTrap(),e.removeEscHandler(),e.bodyScroll.unlock(),e.removeModalHandlers(),e.modal.setAttribute("hidden","hidden"),e.feedbackBubble.focus(),e.resetForm(),!n.get("isFeedbackTabCollapsed")&&e.tabText&&(n.set("isFeedbackTabCollapsed",!0),e.tabText.remove()),e.removeCloseOnDialogModal()},removeModalHandlers:function(){e.cancelButton.removeEventListener("click",e.hideModal),e.closeButton.removeEventListener("click",e.hideModal),e.ratingScale.removeEventListener("change",e.handleRatingSelect),e.ratingScale.removeEventListener("mouseover",e.handleRatingPreview),e.ratingScale.removeEventListener("mouseout",e.handleResetPreview),e.submitButton.removeEventListener("click",e.handleSubmit)},resetButtonSelectionAria:function(){e.ratingLabels.forEach((function(e){u(e,{"aria-pressed":!1})}))},resetRatingScale:function(){e.resetButtonSelectionAria(),e.feedbackRating=""},handleRatingSelect:function(a){var t=a.target;t&&t.value&&(e.feedbackRating=t.value,e.selectRating(t.value),e.resetButtonSelectionAria(),u(t,{"aria-pressed":!0}),e.submitButton.removeAttribute("disabled"))},resetForm:function(){e.resetRatingScale(),e.resetRating(),e.textArea&&(e.textArea.value="")},handleSubmit:function(a){a.preventDefault();var t=f(b,"ccm.header-footer-app.feedbackApi.fixedFeedbackSubmitUrl","/customer-survey/submit");if(null!==(t=m(t))){var o={payload:{comment:e.textArea.value,context:g("RightRail"),pageType:"globalpage",submitDate:new Date,survey:{"How was your experience with this page?":e.feedbackRating},surveyId:"3653b924-5a52-4c45-98c7-d7ed5fe2a5af"}},d=h.get("vtc");d&&""!==d&&(o.payload.visitorId=d),B.fetchJSON(t,{enablePerimeterX:v(),statusCodeFlag:!0,method:"POST",format:"json",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)}).then((function(){e.showSuccessSnackBar()})).catch((function(a){a&&a.response&&412===a.response.status||e.showFailureModal()})),e.hideModal()}else e.handleSubmitError()},showSuccessSnackBar:function(){var a=f(b,"ccm.header-footer-app.feedback.feedbackSnackbarDuration",3e3);e.dom.removeClass(e.successSnackBar,"visibilityHidden"),e.dom.removeClass(e.successSnackBar,"displayHidden"),setTimeout((function(){e.dom.addClass(e.successSnackBar,"visibilityHidden"),e.dom.addClass(e.successSnackBar,"displayHidden")}),a)},showFailureModal:function(){e.removeEscHandler=r(e.failureModal,e.hideFailureModal),e.bodyScroll.lock(),e.failureModal.removeAttribute("hidden"),e.failureModalFocusTrap=c.create(e.failureModal.querySelector("[role=dialog]")),e.failureModalClose&&e.failureModalClose.addEventListener("click",e.hideFailureModal),e.failureModalOK&&e.failureModalOK.addEventListener("click",e.hideFailureModal),e.removeCloseOnDialogModal=s(e.hideFailureModal)},hideFailureModal:function(a){a.preventDefault(),e.removeEscHandler(),e.bodyScroll.unlock(),e.failureModal.setAttribute("hidden","hidden"),e.feedbackBubble.focus(),e.failureModalClose.removeEventListener("click",e.hideFailureModal),e.failureModalOK.removeEventListener("click",e.hideFailureModal),"function"==typeof e.failureModalFocusTrap&&e.failureModalFocusTrap(),e.removeCloseOnDialogModal()},resetRating:function(){u(e.submitButton,{disabled:"disabled"}),e.initStarRatingView(0)},selectRating:function(a){a&&e.initStarRatingView(a)},handleRatingPreview:function(a){var t=a.target?a.target.value:"";!t||e.feedbackRating>0||e.initStarRatingView(t)},initStarRatingView:function(a){e.ratingLabels.forEach((function(t,o){0===a||o>a-1?(e.dom.addClass(t,"unselected"),e.dom.removeClass(t,"selected")):(e.dom.addClass(t,"selected"),e.dom.removeClass(t,"unselected"))}))},handleResetPreview:function(){e.feedbackRating||e.resetRating()}},e).render(),S()?M(R,w):w()}));p({onDOMContentLoaded:E})}}}));