System.register(["./common-chunks.system.1976d2aa.js"],(function(t){"use strict";var e,i,o,r,n,s,a,d,l,h,c,u,m,p,f,b,g,v,E,S,y;return{setters:[function(t){e=t.D,i=t.j,o=t.B,r=t.t,n=t.a7,s=t.g,a=t.U,d=t.V,l=t.a8,h=t.Z,c=t.a9,u=t.r,m=t.F,p=t.e,f=t.a1,b=t.d,g=t.aa,v=t.u,E=t.ab,S=t.ac,y=t.C}],execute:function(){var A="bk_e",k={api:"/account/electrode/account/api/subscribe",render:function(){this.dom=e.create(),this.beacon=i("Footer"),this.bodyScroll=o.getDefaultInstance(),this.getElements(),this.handleSubmit=this.handleSubmit.bind(this),this.handleSubmitSuccess=this.handleSubmitSuccess.bind(this),this.handleSubmitError=this.handleSubmitError.bind(this),this.handleModalClose=this.handleModalClose.bind(this),this.screenWidth=this.dom.getWindow().innerWidth,this.isMobile="small"===r.getBreakpoint(this.screenWidth)||!1,this.input&&(this.isMobile&&(this.input.placeholder="Email address"),this.input.addEventListener("change",this.removeErrorAttributes)),this.form&&this.form.addEventListener("submit",this.handleSubmit)},getElements:function(){this.button=this.dom.getById("hf-email-signup-btn"),this.errorWrapper=this.dom.getById("hf-email-input-error"),this.form=this.dom.getById("hf-email-signup-form"),this.input=this.dom.getById("hf-email-input"),this.modal=this.dom.getById("hf-email-modal"),this.modalClose=this.dom.getById("hf-email-close-btn"),this.modalEmail=this.dom.getById("hf-email-modal-email-id"),this.animatedField=n.create(this.input)},handleSubmit:function(t){t.preventDefault(),this.email=this.input.value,this.hideError();var e=s(a,"ccm.header-footer-app.emailSignupApi.emailSignupUrl",this.api),i=d(e);l.validate(this.email)?(this.input.disabled=!0,h.fetch(i+"?email="+this.email,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},format:"json",onSuccess:this.handleSubmitSuccess,onError:this.handleSubmitError})):this.showError()},handleSubmitSuccess:function(){this.hideError(),this.showModal(),this.input.value="",this.input.disabled=!1;var t=this.dom.getDataAttributes(this.form,["campaign-id"]);this.beacon.tagAction(c({campaignId:t.campaignId}))},handleSubmitError:function(){this.showError(),this.input.disabled=!1},showModal:function(){u(this.modal,["hidden"]),this.modalEmail.innerHTML=this.email,this.modalClose.addEventListener("click",this.handleModalClose),this.focusTrap=m.create(this.modal.querySelector("[role=dialog]")),this.bodyScroll.lock(),this.removeEscHandler=p(this.dom.getDocument(),this.handleModalClose),this.removeCloseOnDialogModal=f(this.handleModalClose)},handleModalClose:function(){this.focusTrap(),b(this.modal,{hidden:"hidden"}),this.button.focus(),this.bodyScroll.unlock(),this.removeEscHandler&&(this.removeEscHandler(),this.removeEscHandler=null),this.removeCloseOnDialogModal()},showError:function(){this.input.focus(),this.animatedField.showError(),this.dom.addClass(this.input,A),u(this.errorWrapper,["hidden"]),b(this.errorWrapper,{role:"alert"}),b(this.input,{"aria-invalid":!0})},removeErrorAttributes:function(){u(this.input,["aria-invalid"]),u(this.errorWrapper,["role"])},hideError:function(){this.animatedField.hideError(),this.dom.removeClass(this.input,A),b(this.errorWrapper,{hidden:"hidden"}),this.removeErrorAttributes()}},C="bq_c";var B="bp_e",I="bp_f";t("default",{create:function(t){var o={};return o.dom=s(t,"dom",e.create()),o.beacon=s(t,"beacon",i("Footer")),o.screenWidth=o.dom.getWindow().innerWidth,o.isMobile="small"===r.getBreakpoint(o.screenWidth)||"medium"===r.getBreakpoint(o.screenWidth)||!1,o.footerWrapper=o.dom.getById("js-global-footer-wrapper")||o.dom.querySelector(".js-footer"),o.setupFooterLinksAnalytics=function(){o.dom.querySelectorAll(".hf-footer-links-list").forEach((function(t){var e=o.dom.getDataAttributes(t,["module-id","module-type","module-version","module-published-date","module-name","module-zone"]),i=v({dom:o.dom,beacon:o.beacon,moduleInfo:e});t.querySelectorAll(".hf-footer-link").forEach((function(t){if(t.dataset.tlId){var e=t.dataset.tlId.replace(/-link-\d\-+/g,"");t.setAttribute("data-section-title","Footer - "+o.dom.querySelector("[data-tl-id="+e+"]").innerText)}i(t)}))}))},o.setUpSisterBrandsAnalytics=function(){o.dom.getById("hf-sister-brands-links-list").addEventListener("click",(function(t){var e=t.target.parentNode;o.beacon.tagAction(E({uid:e.getAttribute("data-uid"),name:e.getAttribute("title")}))}))},o.loadSisterBrandImages=function(){var t=o.dom.querySelectorAll("."+B);t&&o.dom.getWindow().addEventListener("scroll",(function e(){o.dom.getWindow().removeEventListener("scroll",e),t.forEach((function(t){var e=o.dom.getDataAttributes(t,["src"]);b(t,e),o.dom.removeClass(t,I)}))}))},o.updateCopyrightReferenceNumber=function(){o.dom.getById("copyright-reference-id").innerText=S(y.get("bstc"))},o.render=function(){o.footerWrapper&&(k.render(),function(t){var o={beacon:(t=Object.assign({},{beacon:i("Footer")},t)).beacon};return o.dom=e.create(),o.links=o.dom.querySelectorAll(".".concat(C)),o.setupBeaconClickHandler=function(t){t.addEventListener("click",o.handleLinkClicks.bind(this,t))},o.handleLinkClicks=function(t){o.beacon.tagAction(g({uid:t.getAttribute("data-uid"),name:t.getAttribute("title")}))},o.setupAnalytics=function(){o.links.forEach(o.setupBeaconClickHandler)},o}().setupAnalytics(),o.setupFooterLinksAnalytics(),o.setUpSisterBrandsAnalytics(),o.loadSisterBrandImages(),o.updateCopyrightReferenceNumber())},o}})}}}));