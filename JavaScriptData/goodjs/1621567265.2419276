/*! Built by pcw player group @5/19/2021, 9:58:13 AM */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],s=0,u=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={8:0,7:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({0:"pako_deflate",4:"vendors~crypto",5:"vendors~jszip",6:"vendors~kiwi.mat",7:"vendors~pako_deflate"}[e]||e)+".96a4ce86.js"}(e);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}r[e]=undefined}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="//static.iqiyi.com/js/player_v2/",i.oe=function(e){throw console.error(e),e};var a=window.iqiyiPlayerJSONPCallback=window.iqiyiPlayerJSONPCallback||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var c=o;i(i.s=588)}([function(e,t,n){"use strict";t.a={Status_Idle:"idle",Status_Ready:"ready",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadedMetaData:"loadedmetadata",Status_StartPlay:"startplay",Status_EveryStartPlay:"everystartplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Stoped:"stoped",Status_End_Play:"endplay",Status_PlayError:"error",Status_PatchStartplay:"patchstartplay",Status_MiddStoped:"middstoped",Status_AdLoaded:"adloaded",Status_AdInit:"adinit",Status_AdLoadstart:"adloadstart",Status_AdStartPlay:"adstartplay",Status_ADEveryStartPlay:"adeverystartplay",Status_AdPlaying:"adplaying",Status_AdPaused:"adpaused",Status_AdWillPlayEnded:"adwillended",Status_AdPlayEnded:"adended",Status_AdError:"aderror",Status_AdStalled:"adstalled",Status_AdWaiting:"adwaiting",Status_AresPlay:"aresplay",Status_AresEnded:"aresended",Status_AresNoticeInfo:"aresnoticeinfo",Status_ADLoadedMetaData:"adloadedmetadata",Status_Error:"ntferror",Status_Destroy:"ntfdestroy",NTF_StatusChanged:"statusChanged",NTF_Error:"engineError",NTF_SRC_Attaching:"srcAttaching",NTF_VideoRefresh:"videorefresh",NTF_VideoChange:"videochange",NTF_VideoChanged:"videochanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_KeyVolumeChange:"keyvolumechange",NTF_DurationChanged:"durationchange",NTF_VRSStart:"vrsstart",NTF_VRSReady:"vrsready",NTF_VRSDone:"vrsdone",NTF_VRSPreloaded:"vrspreloaded",NTF_VDChangeFail:"ntfvdchangefail",NTF_AUDChanged:"ntfaudchange",NTF_AUDChangeFail:"ntfaudchangefail",NTF_ARES_Info:"ntfaresinfo",NTF_DefinitionSwitching:"definitionswitch",NTF_DefinitionSwitched:"definitionswitched",NTF_AudioSwitching:"aduioswitching",NTF_AudioSwitched:"aduioswitched",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_Before_Seeking:"beforeSeeking",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_Recharge:"recharge",NTF_BuyPlay:"buyPlay",NTF_SkipHook:"skiphook",NTF_FollowUpNextLoad:"followUpNextLoad",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",NTF_MutedStartPlay:"mutedStartPlay",NTF_PlayingFailByAutoPlay:"playingFailByAutoPlay",NTF_DelayToPlay:"delaytoplay",NTF_DelayToPlay_End:"delaytoplayend",NTF_Get_Record:"getrecord",NTF_AD_Showtips:"adshowtips",NTF_PLAY_MUTED:"playfailmuted",NTF_FPS_REPORT:"playFPSReport",NTF_IVPACKAGEPARSE_Failed:"IVPackageParse_Failed",NTF_IVPACKAGEPARSE_Finished:"IVPackageParse_Finished",NTF_AD_CanPlayThrough:"adcanplaythrough",NTF_AD_VolumeChanged:"advolumechanged",NTF_AD_DurationChanged:"addurationchange",NTF_AD_TimeUpdate:"adtimeupdate",NTF_AD_Progress:"adprogress",NTF_AD_Seeking:"adseeking",NTF_AD_Seeked:"adseeked",NTF_AD_NotifyManager:"jsNotifyAdManager",NTF_AD_Start:"jsNotifyAdStart",NTF_AD_End:"jsNotifyAdEnd",NTF_AD_CloudPlay:"adcloudplay",NTF_AD_CloudPlayEnd:"adcloudplayend",NTF_AD_BLOCK:"adblock",NTF_ARES_Load:"aresload",NTF_Show_VIPPay:"showVIPPay",NTF_PREVIEW_END:"previewEnd",NTF_TW_BLOCK:"twBlock",Evt_StartFromHistory:"playStartFromHistory",Evt_SkipHeader:"playSkipHeader",Evt_SkipTailer:"playSkipTailer",Evt_StartShareTime:"playShareTime",Evt_PreloadAD:"playPreloadAD",ERROR_HttpFailed:"P00001",ERROR_AnalyzFailed:"P00002",Enjoy_Evt_PlayEnd:"enjoy_play_end",Enjoy_Evt_PanleShow:"enjoy_panle_show",HTTP_ENGINE:"HTTP",ENGINE_TYPE:"KIWI",CDN_LOADERMODE:"CDN",P2P_LOADERMODE:"P2P"}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(221);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(32)["default"],i=n(38);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=0,i="ntf_";t.a={NTF_PLG_Enable:i+r++,NTF_PLG_Disable:i+r++,NTF_HOTKEY_ControlbarShow:i+r++,NTF_Play:i+r++,NTF_Pause:i+r++,NTF_Replay:i+r++,NTF_ChangeVolume:i+r++,NTF_PlayerSmallWindowStatus:i+r++,NTF_AllPluginsLoaded:i+r++,NTF_ControlbarShow:i+r++,NTF_ControlbarHide:i+r++,NTF_DefinitionBtnClick:i+r++,NTF_DefinitionBtnMouseEnter:i+r++,NTF_DefinitionBtnMouseLeave:i+r++,NTF_DefinitionListShow:i+r++,NTF_DefinitionListhide:i+r++,NTF_DefinitionADShow:i+r++,NTF_DefinitionADClick:i+r++,NTF_DefinitionUpdateText:i+r++,NTF_FullScreen:i+r++,NTF_WebFullScreen:i+r++,NTF_SetDownLoad:i+r++,NTF_BarrageSelfSend:i+r++,NTF_BarrageSettingChange:i+r++,NTF_HIDE_BOTTOM_TOP:i+r++,NTF_SHOW_BOTTOM_TOP:i+r++,NTF_BOTTOM_MUTUAL_EXCLUSION:i+r++,NTF_SHOW_VIDEOLIST:i+r++,NTF_HIDE_VIDEOLIST:i+r++,NTF_VIDEOLIST_CHANGED:i+r++,NTF_HIDE_TOPBAR:i+r++,NTF_SHOW_TOPBAR:i+r++,NTF_CLICK_PLAYLIST_BTN:i+r++,NTF_SHOW_PLAYLIST_BTN:i+r++,NTF_HIDE_PLAYLIST_BTN:i+r++,NTF_SHOW_CONTROLBAR_PINGBACK:i+r++,NTF_SEEKBAR_HOVER:i+r++,NTF_SHOW_HEATMAP:i+r++,NTF_HIDE_CONTROLBAR_VIDEOTIP:i+r++,NTF_SHOW_TOAST:i+r++,NTF_SHOW_SETTING_BOX:i+r++,NTF_SUBTITLES_REGISTER_DOM:i+r++,NTF_USERSET_SKIP_BTN:i+r++,NTF_PROGRESS_SKIP_BTN:i+r++,NTF_KeyVolumeChange:i+r++,NTF_SHOW_LOGIN_PANEL:i+r++,NTF_SHOW_RECOMMEND_PANEL:i+r++,NTF_HIDE_RECOMMEND_PANEL:i+r++,NTF_VideoListChanged:"videolistchanged",NTF_ADDVideoList:"addvideolist",NTF_REMOVEVideoList:"removevideolist",NTF_ClientInstallChecked:"clientinstallchecked",NTF_IV_SWITCH_FromStoryLine:"ivswitchfromstoryline",NTF_IV_REPLAY:"ivreplay",NTF_IV_PLAYEND:"ivplayend",NTF_IV_INTERACTIONSTART:"ivinteractionstart",NTF_IV_INTERACTIONEND:"ivinteractionend",NTF_IV_SHOWSTROYGUIDE:"ivshowstoryguide",NTF_IV_SHOWSTROYLIST:"ivshowstorylinelist",NTF_BACKTO_IVMAIN:"ivbacktomain",NTF_FOLLOW_SET_INFO:"followsetinfo",NTF_FOLLOW_CHANGE_STATE:"followchangestate",NTF_GESTURE_ASYNC_CONTROLS:i+r++,NTF_USER_SEEK:i+r++,NTF_BanTipHide:i+r++,NTF_WebFullScreen_BeforeChange:i+r++,NTF_WebFullScreen_AfterChange:i+r++,NTF_WebFullScreen_SetSwitch:i+r++,NTF_FullScreen_BeforeChange:i+r++,NTF_FullScreen_AfterChange:i+r++,NTF_ScoreTask_ScoreChange:i+r++,NTF_FullScreen_SetSwitch:i+r++,NTF_VideoPercent_Changed:i+r++,NTF_RIGHTBAR_STATUS_CHANGED:i+r++,NTF_EXPANDSCREEN_STATUS_CHANGED:i+r++,NTF_Barrage_SetConfigInfo:i+r++,NTF_Barrage_SetChannelConfigInfo:i+r++,NTF_Barrage_SetSwitch:i+r++,NTF_Barrage_ShowLike:i+r++,NTF_Barrage_ShowMoreLike:i+r++,NTF_Barrage_ShowReport:i+r++,NTF_Barrage_EnsureReport:i+r++,NTF_Barrage_ShowRulePage:i+r++,NTF_Barrage_NotifyBarrageData:i+r++,NTF_Barrage_ClearBanWord:i+r++,NTF_Barrage_AddBanWord:i+r++,NTF_Barrage_RemoveBanWord:i+r++,NTF_Barrage_CatchSystemBarrage:i+r++,NTF_Barrage_NotifyGiftInfo:i+r++,NTF_Barrage_ShowSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrage:i+r++,NTF_Barrage_ClickSystemBarrageButton:i+r++,NTF_Barrage_RequestBarrageData:i+r++,NTF_Subtitles_Changing:i+r++,NTF_Subtitles_Changed:i+r++,NTF_Subtitles_ChangeFailed:i+r++,NTF_FeedBack_Show:i+r++,NTF_FeedBack_Hide:i+r++,NTF_FeedBack_Panel_show:i+r++,NTF_FeedBack_getInfo:i+r++,NTF_TO_DIVERSION:i+r++,NTF_AIView_ItemClick:i+r++,NTF_AIView_AIResult:i+r++,NTF_AIView_AIFeedback:i+r++,NTF_AIView_CLOSE:i+r++,NTF_AIView_BAIKE_CLOSE:i+r++,NTF_AIView_BAIKE_STATECHANGE:i+r++,NTF_IVOS_DATA_COMPLETE:i+r++,NTF_IVOS_REQUEST_IN:i+r++,NTF_IVOS_PREVIEW_CLOSE:i+r++,NTF_IVOS_PREVIEW_STARTPLAY:i+r++,NTF_IVOS_STATE_CHANGED:i+r++,NTF_SVP_POINTSREFRESH:i+r++,NTF_Voice_Change:i+r++,NTF_CTXMenu_Copied:i+r++,NTF_Hotkey_Percent_Seek:i+r++,NTF_Hotkey_Playback_Rate:i+r++,MINI_NTF_PLAY_END:i+r++,MINI_NTF_POSTER_SHOW:i+r++,MINI_NTF_POSTER_HIDE:i+r++,Type_Play:"play",Type_Pause:"pause",Type_Replay:"replay",Type_ExitPic:"exitpicinpic",Type_SEEK_DRAGSTART:"seekdragstart",Type_SEEK_DRAGEND:"seekdragend"}},function(e,t,n){"use strict";var r=n(32),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=(n(10),n(82),n(26),n(17),n(110),n(19),n(37),n(168),n(27),n(25),n(90),n(48),n(21)),d=document,l=window,f=/^-ms-/,h=/-([a-z])/g,p=Object.prototype.toString,_=Array.prototype.slice;function v(e){return e.replace(f,"ms-").replace(h,(function(e,t){return t.toUpperCase()}))}function g(e,t){return e.className&&e.className.baseVal!==undefined?new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.getAttribute("class")):(" "+e.className+" ").indexOf(" "+t+" ")>=0}function y(e,t){var n=e.className&&e.className.baseVal!==undefined;g(e,t)||(n?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=(e.className?" ":"")+t)}function m(e,t){if(e.className&&e.className.baseVal!==undefined){var n=e.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");g(e,t)&&e.setAttribute("class",n)}else{for(var r=" "+e.className+" ";r.indexOf(" "+t+" ")>=0;)r=r.replace(" "+t+" "," ");e.className="function"==typeof r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}}var b=function(){function e(t){o()(this,e);var n=!1;try{addEventListener("test",null,Object.defineProperties({},{passive:{get:function(){n=!0},configurable:!0,enumerable:!0}}))}catch(r){}return this._supportOptions=n,this._query.call(this,t)}return c()(e,[{key:"find",value:function(t){return this._query(t,new e)}},{key:"_query",value:function(e,t){var n,r=this,i=[];if(!e)return this;if("[object nodelist]"===p.call(e).toLowerCase())i=e;else if(e.nodeType)i.push(e);else if(t)for(n=0;n<r.length;n++)i=i.concat(_.call(r[n].querySelectorAll(e)));else i=e.__$__&&"length"in e?_.call(e):d.querySelectorAll(e);for(t=t||r,n=0;n<i.length;n++)t[n]=i[n];return t.__$__=!0,t.length=i.length,t}},{key:"_each",value:function(e){for(var t=this,n=0;n<t.length&&!1!==e.call(t[n],n,t[n]);n++);return t}},{key:"addClass",value:function(e){return this._each((function(t,n){y(n,e)}))}},{key:"removeClass",value:function(e){return this._each((function(t,n){m(n,e)}))}},{key:"replaceClass",value:function(e){return this._each((function(t,n){!function(e,t){var n=t;e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(n,e)}))}},{key:"toggleClass",value:function(e){return this._each((function(t,n){!function(e,t){g(e,t)?m(e,t):y(e,t)}(n,e)}))}},{key:"hasClass",value:function(e){return g(this[0],e)}},{key:"css",value:function(e,t){if("object"!==i()(e))return t!==undefined?this._each((function(n,r){r.style[v(e)]=t})):(this.length>0&&(t=getComputedStyle(this[0])[v(e)]),t);for(var n in e)this.css(n,e[n])}},{key:"show",value:function(){return this.css("display","")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"attr",value:function(e,t){return t!==undefined?this._each((function(n,r){r.setAttribute(e,t)})):(this.length>0&&(t=this[0].getAttribute(e)),t)}},{key:"removeAttr",value:function(e){this._each((function(t,n){1===n.nodeType&&n.removeAttribute(e)}))}},{key:"children",value:function(){var e,t=[],n=this[0];if(n)for(e=n.firstChild;e;)1===e.nodeType&&t.push(e),e=e.nextSibling;return t}},{key:"html",value:function(e){if("string"==typeof e)this._each((function(t,n){n.innerHTML=e}));else if(this[0])return this[0].innerHTML}},{key:"append",value:function(e){var t,n,r=this,i=r[0];return i?("string"==typeof e&&(t=d.createDocumentFragment(),n=d.createElement("iqpdiv"),t.appendChild(n),n.innerHTML=e,e=n.firstChild),i.appendChild(e),n=null,r):r}},{key:"remove",value:function(){return this._each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)}))}},{key:"offset",value:function(){var e,t=d.documentElement,n=this[0];return n?{top:(e=n.getBoundingClientRect()).top+(l.pageYOffset||t.scrollTop)-(t.clientTop||0),left:e.left+(l.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}:{top:0,left:0}}},{key:"width",value:function(e){var t=this[0];if(!t)return 0;if(e!==undefined)return this.css("width",isNaN(e)?e:e+"px");var n=this.css("width");if(n=parseInt("100%"===n?0:n),isNaN(n)){var r=t.offsetWidth;r<=0||null==r||(n=r)}return n}},{key:"height",value:function(e){return this[0]?e!==undefined?this.css("height",isNaN(e)?e:e+"px"):parseInt(this.css("height")):0}},{key:"contains",value:function(e){var t,n=this[0];return e&&(e.nodeType?t=e:e.__$__&&(t=e[0])),!(!n||!t)&&n.contains(t)}},{key:"on",value:function(e,t,n){var r=this,i=this._events=this._events||[],a=i[e];return n=Object(u.a)({capture:!1,passive:!1,once:!1},n||{},!0),a||(a=i[e]=[]),a.push(t),this._each((function(i,a){a.addEventListener(e,t,r._supportOptions?n:n.capture)}))}},{key:"un",value:function(e,t){var n=this._events||[],r=n[e];return r||(r=n[e]=[]),this._each((function(n,i){var a;if(t){for(;(a=r.indexOf(t))>-1;)r.splice(a,1);i.removeEventListener(e,t)}else r.length>0&&(r.forEach((function(t){i.removeEventListener(e,t)})),r.splice(0,r.length))}))}},{key:"fire",value:function(e,t){var n=this,r=n._events=n._events||[],i=r[e];i||(i=r[e]=[]),t.data=t.data||{},n._each((function(e,n){i.forEach((function(e){e.call(n,t)}))}))}}]),e}();t.a=function(e){return new b(e)}},function(e,t,n){"use strict";n(146),n(17),n(26),n(25),n(125);t.a=function(){var e="",t={},n={},r=navigator,i=r.platform,a=r.userAgent.toLowerCase(),o=a.match(/rtrident/),s=!o&&a.match(/(ipad).*os\s([\d_]+)/),c=!o&&!s&&a.match(/(iphone\sos)\s([\d_]+)/),u=a.match(/Android\s+([\d.]+)/i),d=a.match(/(?:redmi|hm) ([\w ]+) build/i),l="",f="";if(f=navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:(f=a.match(/NetType\/\w+/)?a.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/",""),n.userAgent=a,n.IE11=/rv\:11/.test(a),n.IE=/msie/.test(a)||n.IE11,n.IE6=/msie 6/.test(a),n.IE7=/msie 7/.test(a),n.IE8=/msie 8/.test(a),n.IE9=/msie 9/.test(a),n.IE10=/msie 10/.test(a),n.EDGE=/edge/.test(a),n.iPhone=/iphone os/.test(a)&&!o,n.iPhone4=/iphone os [45]_/.test(a)&&!o,n.iPad=/ipad/.test(a)&&!o,n.iPod=/iPod/i.test(a)&&!o,n.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,n.CHROMEIOS=/crios/.test(a),n.CHROME=/chrome/.test(a)&&!n.EDGE,n.SAFARI=/safari/.test(a)&&!/chrome/.test(a),n.FIREFOX=/firefox/.test(a),n.mobile=/mobile/gi.test(a),n.mobileSafari=n.iPhone||n.iPhone||n.iPad,n.QQ=/QQBrowser/gi.test(a),n.WECHAT=/(wechat)|(micromessenger)/gi.test(a),n.SmartTV=/SMART-TV/gi.test(a),n.CHROME){var h=/chrome\/([\d\.]+) /gi.exec(a);n.version=h?parseInt(h[1],10):0}if(n.EDGE){var p=/edge\/([\d\.]+)/gi.exec(a);n.version=p?parseInt(p[1],10):0}d&&(n.redmi=d);var _=/mac/i.test(i),v="X11"==i&&!_,g=/win/i.test(i)&&!v,y=/android/.test(a);t.unix=v,t.win=g,t.mac=_,t.android=y,t.androidMobile=y&&n.mobile,t.androidTablet=y&&(!n.mobile||/pad/i.test(a)),u&&(t.version=u[1]),t.ios=!1,c&&(t.ios=!0,t.version=c[2].replace(/_/g,".")),s&&(t.ios=!0,t.version=s[2].replace(/_/g,".")),n.iPod&&(t.ios=!0),e=n.iPad?"b85da1cf3ae44351":"b6c13e26323c537d";var m=function(e){return l||function(e){var r="01";(n.iPhone||t.android)&&(r="02"),(n.iPad||t.androidTablet)&&(r="03");var i="01";return t.android&&(i="02"),t.mac&&(i="08"),t.ios&&(i="03"),r+i+"00310100"+(e?"10":"00")+"000000"}(e)},b=a.match(/miuivideo\//i)||t.android&&parseInt(t.version)>4&&a.match(/MiuiBrowser/i),k=n.iPad||n.iPhone||t.android&&parseFloat(t.version)>4||b?"m3u8":"mp4";return/__pmode__=m3u8/.test(window.location.href)?k="m3u8":/__pmode__=mp4/.test(window.location.href)&&(k="mp4"),{browser:n,os:t,code:e,getPtid:m,setPtid:function(e){l=e},getAgentType:function(e){var t=1;switch(m(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t},browserName:function(){var e="";return n.CHROME?e="CHROME":n.SAFARI?e="SAFARI":n.FIREFOX?e="FIREFOX":n.QQ?e="QQ":n.WECHAT?e="WECHAT":n.IE?e="IE":n.IE6?e="IE6":n.IE7?e="IE7":n.IE8?e="IE8":n.IE9?e="IE9":n.IE10?e="IE10":n.EDGE?e="EDGE":n.mobileSafari?e="mobileSafari":t.ios||t.ios?e="ios":t.androidMobile?e="androidMobile":t.androidTablet&&(e="androidTablet"),e},network:f,playerMode:k}}()},function(e,t,n){var r=n(22),i=n(105),a=n(103),o=n(35),s=n(39),c=n(122),u=n(220),d=n(23),l=i("Reflect","construct"),f=d((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!d((function(){l((function(){}))})),p=f||h;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){a(e),o(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,d=c(s(i)?i:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,n){var r=n(167),i=n(85),a=n(237);r||i(Object.prototype,"toString",a,{unsafe:!0})},function(e,t,n){"use strict";t.a={M4S:"m4s",TS:"ts",FTS:"fts",DASH:"dash",VP9:"vp9",AV1:"AV1"}},function(e,t,n){"use strict";n(10),n(19);var r=null;function i(){var e=new Date;return(e.getHours()>=10?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>=10?e.getMinutes().toString():"0"+e.getMinutes())+":"+(e.getSeconds()>=10?e.getSeconds().toString():"0"+e.getSeconds())}t.a=Object.defineProperties({debug:function(e){r?r.debug("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},log:function(e){r?r.log("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},info:function(e){r?r.info("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},warn:function(e){r?r.warn("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)},error:function(e){r?r.error("__PB__ "+e):console.log("__PB__"+i()+"__ "+e)}},{logTarget:{set:function(e){r=e},configurable:!0,enumerable:!0}})},function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"k",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return h}));n(25),n(235),n(10),n(97),n(29),n(92);var r={mobile:!1,upLoad:!0,limitP2P:"",onP2P:!0,trackerVersion:3,tracker:[],stun:[],aidList:[],defaultTracker:[],getPeerIDStep:3e4,weedOutPeerStep:3e4,connectPeerStep:2e3,NATTimeoutStep:15e3,connectMax:8,passiveMax:10,RTCMax:1500,RTCPoolSize:50,coolDownTime:3e5,switchPage:!1,closeP2PVidList:[],closeP2PNetList:[],closeP2PFileTypeList:[]},i={dispatchCfg:[8e3,8e3,8e3,8e3],TTFBCfg:[8e3,8e3,8e3,8e3],rcvCfg:[8e3,8e3,8e3,8e3],reLoadCfg:[500,2e3,4e3,6e3],maxBuff:30},a={subPieceSize:1024,chunkSize:1048576,videoDataSize:0,videoMaxSize:134217728},o={cityList:[],netList:[],cookie:1},s=50,c=localStorage.getItem("cdnbuffer")?parseInt(localStorage.getItem("cdnbuffer")):20,u=new Map,d=25,l=601,f="tpa-hcdn.iqiyi.com",h={CDN:"cdn",DCACHE:"dcache"};t.l={version:"1.0.0"}},function(e,t,n){"use strict";n(110),n(17),n(19);var r=n(21),i={},a={get:function(e,t){var n="";if((t=Object(r.a)({memory:!1},t,!0)).memory&&Object.prototype.hasOwnProperty.call(i,e))n=i[e];else{if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var a=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);a&&(n=a[2]||"")}"string"==typeof n&&(n=decodeURIComponent(n)),t.memory&&(i[e]=n)}return n},set:function(e,t,n){n=n||{},t=encodeURIComponent(t);var r=n.expires;"number"==typeof n.expires&&(r=n.expires<=0?new Date(0):new Date).setTime(r.getTime()+n.expires),delete i[e],document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(r?"; expires="+r.toUTCString():"")+(n.domain?"; domain="+n.domain:"")},remove:function(e,t){(t=t||{}).expires=-1,this.set(e,"",t)}};t.a=a},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=function(){function e(t){return i()(this,e),new(0,e.PlayerLogger)(t)}return o()(e,null,[{key:"PlayerLogger",get:function(){return window.QiyiPlayerLoader.logger()}},{key:"levels",get:function(){return e.PlayerLogger.Levels}},{key:"stringify",value:function(e){var t="";try{t=JSON.stringify(e)}catch(n){}return t}},{key:"setLevel",value:function(t){e.PlayerLogger.setLevel(t)}},{key:"getLevel",value:function(){return e.PlayerLogger.getLevel()}},{key:"getLog",value:function(){return e.PlayerLogger.getLog()}},{key:"saveImmediately",value:function(){e.PlayerLogger.saveImmediately()}}]),e}();t.a=s},function(e,t,n){"use strict";n(25),n(10),n(19);var r=0,i=0,a=32,o=0,s=32,c="",u="",d=!1,l=localStorage.getItem("absDoMain");localStorage.getItem("onP2PLog")&&(d=!0);var f=parseInt(localStorage.getItem("downTime"));f&&Date.now()-f<864e5&&(a=parseInt(localStorage.getItem("downMax")));var h=parseInt(localStorage.getItem("upTime"));h&&Date.now()-h<864e5&&(s=parseInt(localStorage.getItem("upMax")));var p=Object.defineProperties({aid:0,MixWaterMark:!1,trackerStatus:0,platform:0,p2pLog:"",onLog:d,bitrate:0,absOpen:!0,getBufferFunc:null,switchAutoDef:null,canSwitchVd:null,startPlayed:null,getReBufTimeFunc:null,sendPingBack:null,getUserInfoFunc:null,noticeDataArrived:null,checkIsMobius:null,noticeRefreshMovieData:null,playDuration:0,tvId:"",trackerIP:"",absStatus:0,cdnLoadDoMain:"",lastReadSegIndex:0,lastReadTvID:0,fileType:"",pcwBuffer:0,cdnSize:0,cdnCostTime:0,openDache:!0},{bid:{get:function(){return localStorage.getItem("bid")},configurable:!0,enumerable:!0},downMax:{get:function(){return a},configurable:!0,enumerable:!0},cdnSpeed:{get:function(){return r},set:function(e){!function(e){(r=e)+i>a&&(a=r+i,localStorage.setItem("downMax",a.toString()),localStorage.setItem("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},downSpeed:{get:function(){return i},set:function(e){!function(e){r+(i=e)>a&&(a=r+i,localStorage.setItem("downMax",a.toString()),localStorage.setItem("downTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},upMax:{get:function(){return s},configurable:!0,enumerable:!0},upSpeed:{get:function(){return o},set:function(e){!function(e){(o=e)>s&&(s=o,localStorage.setItem("upMax",s.toString()),localStorage.setItem("upTime",Date.now().toString()))}(e)},configurable:!0,enumerable:!0},bgpIP_1:{get:function(){return c},set:function(e){c=e},configurable:!0,enumerable:!0},bgpIP_2:{get:function(){return u},set:function(e){u=e},configurable:!0,enumerable:!0},bgpIP:{get:function(){return""===c?"access.if.iqiyi.com/3eb/":c+"/3eb/"},configurable:!0,enumerable:!0},bgpIP2:{get:function(){return""===u?"":u+"/3eb/"},configurable:!0,enumerable:!0},absDoMain:{get:function(){return l},configurable:!0,enumerable:!0}});t.a=p},function(e,t,n){"use strict";var r=n(22),i=n(132);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var p=function(e){c()(n,e);var t=h(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this)).view=r,o.engine=r.engine,o.name=e,o.visable=!1,o.enabled=!0,a&&(o.parent=a,o.plugin=a.querySelector('[data-player-hook="'.concat(e,'"]')),o.cache="plgcontainer"===a.getAttribute("data-player-hook")),o.cacheFragment=document.createDocumentFragment(),o}return o()(n,[{key:"_onBeforeEnableAction",value:function(){}},{key:"enable",value:function(){this.enabled||(this._onBeforeEnableAction(),this.enabled=!0,this.cache&&this.plugin&&this.parent.appendChild(this.plugin),this._onAfterEnableAction(),this.rollType=null,this.seekable=!1)}},{key:"_onAfterEnableAction",value:function(){}},{key:"_onBeforeDisableAction",value:function(){}},{key:"disable",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e&&this.rollType&&this.rollType!==e.rollType&&(this.enabled=!0),this.enabled&&(this.rollType=e.rollType,this.seekable=e.seekable,this._onBeforeDisableAction(),this.enabled=!1,this.cache&&this.plugin&&this.cacheFragment.appendChild(this.plugin),this._onAfterDisableAction())}},{key:"_onAfterDisableAction",value:function(){}},{key:"show",value:function(){this.visable=!0,this.plugin.style.display=""}},{key:"hide",value:function(){this.visable=!1,this.plugin.style.display="none"}},{key:"toggle",value:function(){this.visable?this.hide():this.show()}},{key:"destroy",value:function(){this.plugin&&this.plugin.parentNode&&this.plugin.parentNode.removeChild(this.plugin)}},{key:"fire",value:function(e,t){this.view.emit(e,t)}}],[{key:"css",value:function(){return""}},{key:"html",value:function(){return""}},{key:"padCss",value:function(){return this.css()}},{key:"padHtml",value:function(){return this.html()}},{key:"mobileCss",value:function(){return this.css()}},{key:"mobileHtml",value:function(){return this.html()}}]),n}(n(40).a);t.a=p},function(e,t,n){"use strict";var r=n(85),i=n(35),a=n(23),o=n(156),s="toString",c=RegExp.prototype,u=c.toString,d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=s;(d||l)&&r(RegExp.prototype,s,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(n===undefined&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";n(82),n(146),n(17),n(25),n(10),n(19),n(45),n(110),n(43),n(37),n(334),n(125),n(115);var r=n(16),i=n(13),a=o("QC005");function o(e){var t="";if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)").exec(document.cookie);n&&(t=n[2]||"")}return"string"==typeof t&&(t=decodeURIComponent(t)),t}function s(){var e=o("QP0022");if(!e)return{};var t=e.split("|");return{userInfo:t[0]+"|"+t[1],idc:t[2],userNetType:t[0],userArea:t[1].split("-")[0],userIP:t[1].split("-")[1]}}t.a={fireUrl:function(e,t){if("string"==typeof t&&e){var n=new Image;n.onload=n.onerror=n.onabort=function(){n.onload=n.onerror=n.onabort=null,n=null};var r=[];for(var i in e.dur=+new Date,e)e.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(e[i]));n.src=t+"?"+r.join("&")}},accSub:function(e,t){var n,r,i,a;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{r=t.toString().split(".")[1].length}catch(o){r=0}return i=Math.pow(10,Math.max(n,r)),a=n>=r?n:r,parseFloat((Math.round(e*i-t*i)/i).toFixed(a))},accAdd:function(e,t){var n,r,i;try{n=e.toString().split(".")[1].length}catch(a){n=0}try{r=t.toString().split(".")[1].length}catch(a){r=0}return i=Math.pow(10,Math.max(n,r)),Math.round(e*i+t*i)/i},trimNumber:function(e,t){t||(t=1e4);var n=t.toString().substr(1),r=Math.ceil(e);return r>0&&(n=(r+=t).toString().substr(1)),n},getCookie:o,setCookie:function(e,t){t=encodeURIComponent(t),document.cookie=e+"="+t},searchPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r])return r;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i]&&(e<t[i+1]||i===t.length-1))return i;e<t[i]?r=i-1:n=i+1}return-1},searchTSPosIndex:function(e,t){if(e<0)return!1;var n=0,r=t.length-1;if(e>=t[r].ePos)return t.length;for(;n<=r;){var i=Math.floor((n+r)/2);if(e>=t[i].sPos&&e<t[i].ePos)return i;e<t[i].sPos?r=i-1:n=i+1}return-1},getUserInfoFromCookie:s,strToNumber:function(e){var t,n=0;t=e.length>8?e.slice(0,8):e;for(var r=0;r<t.length;r++)switch(r){case 0:n+=72057594037927940*("0x"+t[r]);break;case 1:n+=281474976710656*("0x"+t[r]);break;case 2:n+=1099511627776*("0x"+t[r]);break;case 3:n+=4294967296*("0x"+t[r]);break;case 4:n+=16777216*("0x"+t[r]);break;case 5:n+=65536*("0x"+t[r]);break;case 6:n+=256*("0x"+t[r]);break;case 7:n+=1*("0x"+t[r])}return n},getQueryString:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),r=e.split("?")[1].match(n);return null!=r?decodeURIComponent(r[2]):null},sliceStr:function(e,t){var n="";if(e.length<=t){for(n=e;n.length<t;)n+="0";return n}var r=Math.floor(e.length/t);(t-1)*(r+1)+1<=e.length&&(r+=1);for(var i=0;n.length<t;)n+=e[i],i+=r;return n},getPureIP:function(e){var t=e.match(/(\w+):\/\/([^/:]+):?(\d*)((?:\/|$)[^?#]*)/);return t?t[2]:""},parseURL:function(e){return e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/)},isDomain:function(e){var t=e.match(/[a-z|A-Z]/g);return!!(t&&t.length>0)},shuffle:function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},ArrayBufferToStr:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=(a<16?"0"+a.toString(16):a.toString(16))+"-"}return r},ArrayBufferTo10Str:function(e,t,n){for(var r="",i=0;i<n;i++){var a=parseInt(e[t+i]);if(a===undefined)break;r+=a.toString(10)+"-"}return r},setStringToData:function(e,t,n,r){for(var i=0;i<r;i++)i>=n.length?e[t+i]=0:e[t+i]=n.charCodeAt(i)},setNumberToData:function c(e,t,n,r){for(var i=n,a=t,o=r;o>4;)c(e,a,Math.floor(i/4294967296),o-4),i%=4294967296,a+=o-4,o-=o-4;for(var s=0;s<o;)e[a+s]=i/(1<<8*(o-s-1)),s++},getFileNameFromUrl:function(e){var t=e.indexOf(".ts");t<0&&(t=e.indexOf(".m4s")),t<0&&(t=e.indexOf(".webm")),t<0&&(t=e.indexOf(".mp4"));var n=e.lastIndexOf("/",t);return e.slice(n+1,t)},getTrackerIP:function(e,t,n,a){if(i.j.aidList.indexOf(r.a.aid)>=0&&i.j.defaultTracker.length>0)return i.j.defaultTracker[Math.floor(Math.random()*(i.j.defaultTracker.length-1))];for(var o="",s=0;s<t.length;s++)if(e===t[s].key||"*"===t[s].key){var c=t[s].value;c&&c.length>0&&(o=c[((n-1+1)%c.length+(a||0))%c.length]);break}return o},isHit:function(){var e=a,t=s();return!!(parseInt(e.substring(0,1))<3||t&&t.userInfo.indexOf("OVERSEA")>=0)},isOpenDcache:function(e,t){return(i.e.netList.indexOf("*")>=0||i.e.netList.indexOf(e.toLowerCase())>=0)&&(i.e.cityList.indexOf("*")>=0||i.e.cityList.indexOf(t.split("_")[0].toLowerCase()))>=0&&(!i.e.cookie||parseInt(a.substring(0,1))<i.e.cookie)},QC005:a}},function(e,t,n){"use strict";t.a=function r(e,t,n,i){function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return t&&function(e,t){var n;for(n in e)if(a(e,n)&&t(e[n],n))break}(t,(function(t,o){!n&&a(e,o)||(i&&"string"!=typeof t&&"boolean"!=typeof t?(e[o]||(e[o]={}),r(e[o],t,n,i)):e[o]=t)})),e}},function(e,t,n){var r=n(24),i=n(111).f,a=n(88),o=n(85),s=n(161),c=n(219),u=n(142);e.exports=function(e,t){var n,d,l,f,h,p=e.target,_=e.global,v=e.stat;if(n=_?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(d in t){if(f=t[d],l=e.noTargetGet?(h=i(n,d))&&h.value:n[d],!u(_?d:p+(v?".":"#")+d,e.forced)&&l!==undefined){if(typeof f==typeof l)continue;c(f,l)}(e.sham||l&&l.sham)&&a(f,"sham",!0),o(n,d,f,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(203))},function(e,t,n){var r=n(22),i=n(232);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(e,t,n){"use strict";var r=n(149),i=n(35),a=n(44),o=n(93),s=n(89),c=n(166),u=n(233),d=n(150),l=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,_=h?"$":"$0";return[function(n,r){var i=s(this),a=n==undefined?undefined:n[e];return a!==undefined?a.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!h&&p||"string"==typeof r&&-1===r.indexOf(_)){var s=n(t,e,this,r);if(s.done)return s.value}var v=i(e),g=String(this),y="function"==typeof r;y||(r=String(r));var m=v.global;if(m){var b=v.unicode;v.lastIndex=0}for(var k=[];;){var x=d(v,g);if(null===x)break;if(k.push(x),!m)break;""===String(x[0])&&(v.lastIndex=c(g,a(v.lastIndex),b))}for(var S,T="",P=0,I=0;I<k.length;I++){x=k[I];for(var w=String(x[0]),A=l(f(o(x.index),g.length),0),E=[],D=1;D<x.length;D++)E.push((S=x[D])===undefined?S:String(S));var q=x.groups;if(y){var O=[w].concat(E,A,g);q!==undefined&&O.push(q);var R=String(r.apply(undefined,O))}else R=u(w,g,A,E,q,r);A>=P&&(T+=g.slice(P,A)+R,P=A+w.length)}return T+g.slice(P)}]}))},function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(143),o=n(39),s=n(81),c=n(44),u=n(144),d=n(164),l=n(130),f=n(31),h=n(165),p=f("isConcatSpreadable"),_=9007199254740991,v="Maximum allowed index exceeded",g=h>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),y=l("concat"),m=function(e){if(!o(e))return!1;var t=e[p];return t!==undefined?!!t:a(e)};r({target:"Array",proto:!0,forced:!g||!y},{concat:function(e){var t,n,r,i,a,o=s(this),l=d(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(m(a=-1===t?o:arguments[t])){if(f+(i=c(a.length))>_)throw TypeError(v);for(n=0;n<i;n++,f++)n in a&&u(l,f,a[n])}else{if(f>=_)throw TypeError(v);u(l,f++,a)}return l.length=f,l}})},function(e,t,n){"use strict";n(10),n(19),n(25),n(43),n(17),n(45);var r=n(14),i=n(84),a=(n(86),0),o=undefined,s="",c=window.webEventID||"",u=function(){c=window.webEventID||""},d=function(){return Object(i.a)(window.navigator.userAgent+document.cookie+Math.random()+(new Date).getTime()*a++)},l=function(e,t,n){r.a.set(e,t,{expires:n||31536e6,path:"/",domain:"iqiyi.com"})},f=function(){var e="QC006",t=r.a.get(e);return t||(window.QiyiPlayerIsNewUser=!0,t=d(),l(e,t)),t},h=function(){var e="QC005",t=r.a.get(e);return t||(t=d(),l(e,t,283824e7)),t},p={createUUID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1).toUpperCase()}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getQtsid:function(){var e,t=function(){return parseInt(new Date/1e3,10).toString()};if(e=r.a.get("QC008"),r.a.get("QC010")&&e)return e;if(/^\d{10}\.\d{10}\.\d{10}\.\d+$/.test(e))(e=e.split("."))[1]=e[2],e[2]=t(),e[3]=parseInt(e[3],10)+1;else{var n=t();e=[n,n,n,"1"]}return e.join("."),e},getJsuid:f,getFluid:function(){return h()},getWeid:function(){return c||(c=window.webEventID||Object(i.a)(f()+"weid"+ +new Date)),c},getEid:function(){var e="";return s||(e=f(),s=Object(i.a)(e+"veid"+1*new Date)),s},getIsNewUser:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(!e&&o===undefined){var t="QP0030",n=parseInt(r.a.get(t),10);1===n?o=!1:(o=!0,l(t,1,283824e7))}return window.QiyiPlayerIsNewUser===undefined&&(window.QiyiPlayerIsNewUser=!1,f()),window.QiyiPlayerIsNewUser},init:function(){try{window.addEventListener("unload",u),window.addEventListener("beforeunload",u),window.addEventListener("pagehide",u)}catch(e){}}};t.a=p},function(e,t,n){"use strict";var r=n(102),i=n(190),a=n(178),o=n(109),s=n(236),c="Array Iterator",u=o.set,d=o.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=undefined,{value:undefined,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";var r=n(32),i=n.n(r),a=(n(26),n(17),n(45),n(145),n(21)),o=n(84),s=n(33),c=document,u=function(){},d={},l={"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},f={"*":null,text:null,html:null,xml:null,json:function(e){var t={},n=window.JSON?JSON.parse:function(){return{}};try{t=n(e)}catch(r){}return t}},h={method:"get",dataType:"*",timeout:1e4,charset:"utf-8",cache:!0,withCredentials:!0,jsonpCallback:"callback",complete:u,success:u,failure:u},p=function(e){var t=[];if("object"==i()(e))for(var n in e)t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t.join("&").replace(/%20/g,"+")},_=function(e){e=e||{},Object(a.a)(e,h);var t=e.url,n=e.dataType,r=e.params||{},i=e.success,o=e.failure;if(t){!function(){var a={},c=e.headers,u=e.data||null,d=p(r);a.params=r,a.url=t+(d.length>0?(/\?/i.test(t)?"&":"?")+d:""),"function"==typeof e.beforeSend&&(a=e.beforeSend(a));var h="",_=!1,v=new XMLHttpRequest;if(v.withCredentials=e.withCredentials,v.onreadystatechange=function(){var r;if(h+=", readyState = "+v.readyState,4==v.readyState)if(r=f[n]?f[n](v.responseText):v.responseText,h+=", status = "+v.status+", statusText = "+v.statusText,200==v.status){if("json"===n&&"string"==typeof r)try{r=JSON.parse(r)}catch(c){console.error("res is not comfortable, ".concat(t),c)}i(r)}else if(!_){_=!0;var s="";try{s=JSON.stringify(r)}catch(c){s=" json error"}h+=", data = "+s+"url = "+a.url,o("xhr error, time = "+e.timeout+h)}},v.ontimeout=function(t){if(!_){_=!0;var n="xhr timeout, time = "+e.timeout+", readyState = "+v.readyState+", status = "+v.status+", data = "+JSON.stringify(t)+"url = "+a.url;o(n)}},v.open(e.method,a.url,!0),v.timeout=e.timeout,v.setRequestHeader("Accept",l[n]),s.a.isObject(c))for(var g in c)v.setRequestHeader(g,c[g]);v.send(u)}()}};t.a={serializeParam:p,ajax:_,json:function(e){e=e||{},Object(a.a)(e,h),e.dataType="json",_(e)},jsonp:function(e){e=e||{},Object(a.a)(e,h);var t=e.url,n=e.params||{},r=p(n),i=t+(r.length>0?(/\?/i.test(t)?"&":"?")+r:""),s=e.complete,u=e.success,l=e.failure,f=(e.callbackhead?e.callbackhead:"Q")+Object(o.a)(e.fixedCallback||i),_=!!e.memory,v=Object(o.a)(i),g=d[v];if(i){if(!(_&&g&&u)){var y,m=function(e,t,n){switch(b(),e){case"success":_&&(d[v]=n),u(n);break;case"fail":l(n,t)}s(n)},b=function(){if(window[f]){window[f]=undefined;try{delete window[f]}catch(e){}}};window[f]=function(e){b(),setTimeout((function(){m("success","200",e)}),0)};var k={},x=c.createElement("script");x.async=!0,x.type="text/javascript",x.charset=e.charset;var S=function(){if(x)try{x.onload(null,!0)}catch(e){}};x.abort=S,x.onload=x.onreadystatechange=function(e,t){(t||!x.readyState||/loaded|complete/.test(x.readyState))&&(x.onload=x.onreadystatechange=null,x.parentNode&&x.parentNode.removeChild(x),x=null,clearTimeout(y))},x.onerror=function(){m("fail",null),S()},y=setTimeout((function(){m("fail",408),S()}),e.timeout);var T={};if(T[e.jsonpCallback]=f,Object(a.a)(n,T,!0),e.isSort&&1==e.isSort){var P=[],I="";for(var w in e.params)P.push(w+"="+e.params[w]);P.sort();for(var A=0;A<P.length;A++)A===P.length-1?I+=P[A]:I+=P[A]+"&";k.url=t+(/\?/i.test(t)?"&":"?")+I}else k.url=i+(/\?/i.test(i)?"&":"?")+p(T);return k.params=n,"function"==typeof e.beforeSend&&(k=e.beforeSend(k)||k),x.src=k.url,c.getElementsByTagName("head")[0].appendChild(x),x}u(g)}},beacon:function(e,t,n){if("string"==typeof t){var r=n===undefined||n;if(e){var i=[];for(var a in r&&(e._=+new Date),e)i.push(a+"="+encodeURIComponent(e[a]));var o=t+"?"+i.join("&"),s=new Image;s.onload=s.onerror=s.onabort=function(){s.onload=s.onerror=s.onabort=null,s=null},s.src=o}}}}},function(e,t,n){var r=n(24),i=n(186),a=n(76),o=n(172),s=n(187),c=n(222),u=i("wks"),d=r.Symbol,l=c?d:d&&d.withoutSetter||o;e.exports=function(e){return a(u,e)||(s&&a(d,e)?u[e]=d[e]:u[e]=l("Symbol."+e)),u[e]}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n(10),n(25),n(26),n(17),n(45);t.a={isBool:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isArray:function(e){return Array.isArray?Array.isArray(e):"[object array]"===Object.prototype.toString.call(e).toLowerCase()},isObject:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},formatMilliseconds:function(e){if(isNaN(e))return"00:00:00";var t=(e=Math.round(e))>=3600?Math.floor(e/3600):0,n=e%3600>=60?Math.floor(e%3600/60):0;return n=n>=10?n:"0"+n,e=(e=parseInt(n,10)>=0?e%3600%60:e)>=10?e:"0"+e,t>0?(t>9?t:"0"+t)+":"+n+":"+e:n+":"+e},protocolRevise:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return e.replace("http://","//").replace("https://","//").replace(".qiyipic",".iqiyipic")},hex2rgba:function(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,n=[],r=1;r<e.length;){var i=e.substring(r,r+2);n.push(parseInt(i,16)),r+=2}return n.push(t),"rgba(".concat(n.join(","),")")}}},function(e,t,n){"use strict";t.a={PlayerType_Html5VOD:"h5_VOD",PlayerType_FlashVOD:"flash_VOD",PlayerType_Null:"null",SkinType_pc:"pc",SkinType_mobile:"mobile",SkinType_mini:"mini",QYPLAYER_STATUS_LOAD_MOVIE:"loadmovie",QYPLAYER_STATUS_DATA_READY:"dataready",QYPLAYER_STATUS_AD_START_PLAY:"adstartplay",QYPLAYER_STATUS_AD_PLAYING:"adplaying",QYPLAYER_STATUS_AD_PAUSED:"adpaused",QYPLAYER_STATUS_AD_RESUMED:"adresumed",QYPLAYER_STATUS_READY:"ready",QYPLAYER_STATUS_START_PLAY:"startplay",QYPLAYER_STATUS_SEEKING:"seeking",QYPLAYER_STATUS_WAITING:"waiting",QYPLAYER_STATUS_PAUSED:"paused",QYPLAYER_STATUS_PLAYING:"playing",QYPLAYER_STATUS_STOPED:"stoped",QYPLAYER_STATUS_ERROR:"error",QYPLAYER_STATUS_END_PLAY:"endplay",QYPLAYER_LOAD_COMPLETE:"loadcomplete",QYPLAYER_LOAD_SUCCESS:"playerLoadSuccess",QYPLAYER_STATE_CHANGE:"playerStateChange",QYPLAYER_VIDEO_CHANGE:"videoChanged",QYPLAYER_VID_CHANGE:"vidChanged",QYPLAYER_NEXT_VIDEO:"playnextvideo",QYPLAYER_SET_LIGHT:"setLight",QYPLAYER_MOVETO_QITAN:"moveToQitan",QYPLAYER_SHOW_LOGIN_PANEL:"showLoginPanel",QYPLAYER_EXPAND:"expand",QYPLAYER_AUTHENTICATION_RESULE:"authenticationResult",QYPLAYER_RECHARGE:"recharge",QYPLAYER_SUBSCRIBE:"subscribe",QYPLAYER_REFRESH_PAGE:"refreshPage",QYPLAYER_DOWNLOAD:"download",QYPLAYER_REQUEST_VIDEOLIST:"requestVideoList",QYPLAYER_REQUEST_VIDEOLIST_BY_PAGE:"requestVideoListByPage",QYPLAYER_REQUEST_CHANGE_VIDEO:"requestChangeVideo",QYPLAYER_SWITCH_FULL_SCREEN:"switchFullScreen",QYPLAYER_ADD_TO_TABLE:"addToTable",QYPLAYER_FOCUS_TIPS:"focusTips",QYPLAYER_FOCUS_UPLOADER:"focusUploader",QYPLAYER_FIND_GOODS:"findGoods",QYPLAYER_PGC_FOLLOW:"pgcFollow",QYPLAYER_SHOW_DOWNLOAD_APPPOP:"showDownLoadAppPop",QYPLAYER_CHECK_CLIENT_INSTALL:"checkClientInstall",QYPLAYER_REQUEST_SEND_PINGBACK:"requestJSSendPB",QYPLAYER_DOSOMETHING:"setJsDoSomething",QYPLAYER_FOLLOW_UPNEXT_LOAD:"followUpNextLoad",QYPLAYER_USER_CLICK_SCORE:"userClickScore",QYPLAYER_BARRAGE_REPLAY:"barrageReply",QYPLAYER_BARRAGE_RECEIVE_DATA:"barrageReceiveData",QYPLAYER_SET_BARRAGE_INTERACT_INFO:"setBarrageInteractInfo",QYPLAYER_NOTIFY_BARRAGE_DATA:"notifyBarrageData",QYPLAYER_SET_BARRAGE_CONFIG_INFO:"setHasBarrageConfigInfo",QYPLAYER_SET_BARRAGE_CHANNEL_CONFIG_INFO:"setHasBarrageChannelConfigInfo",QYPLAYER_BARRAGE_STATE_CHANGE:"barrageStateChange",QYPLAYER_BARRAGE_ALLOWED:"barrageAllowed",QYPLAYER_REQUEST_REWARD:"requestReward",QYPLAYER_COMMENT_ALLOWED:"commentAllowed",QYPLAYER_GET_PLAYER_LOG:"getQiyiPlayerLog",QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE:"beforeWebFullScreenChange",QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE:"afterWebFullScreenChange",QYPLAYER_FULLSCREEN_BEFORE_CHANGE:"beforeFullScreenChange",QYPLAYER_FULLSCREEN_AFTER_CHANGE:"afterFullScreenChange",QYPLAYER_NOTIFY_GIFT_INFO:"notifyGiftInfo",QYPLAYER_NOTIFY_WRITE_FLASH_LOG:"writeFlashLog",QYPLAYER_SWITCH_PLAYER:"switchPlayer",QYPLAYER_NOTIFY_AD_START:"ADStart",QYPLAYER_NOTIFY_AD_END:"ADEnd",QYPLAYER_NOTIFY_AD_NOTIFY_INFO:"adnotifyinfo",QYPLAYER_NOTIFY_AD_BLOCK:"adblock",QYPLAYER_NOTIFY_TIMEUPDATE:"timeUpdate",QYPLAYER_NOTIFY_SCORECHANGE:"scoreTaskChange",QYPLAYER_NOTIFY_FEEDBACK_SHOW:"feedbackShow",QYPLAYER_NOTIFY_FEEDBACK_HIDE:"feedbackHide",QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW:"feedbackPanelShow",QYPLAYER_NOTIFY_USER_SEEK:"userSeek",QYPLAYER_BuyPlay:"buyPlay",QYPLAYER_NOTIFY_TO_DIVERSION:"todiversion",QYPLAYER_NOTIFY_AI_STAR_INFO:"aistarinfo",QYPLAYER_NOTIFY_AI_FEEDBACK:"aifeedback",QYPLAYER_NOTIFY_AI_STAR_CLOSE:"aistarclose",QYPLAYER_NOTIFY_SHOW_VIDEOLIST:"showvideolist",QYPLAYER_NOTIFY_FOLLOW_CLICK:"followbtnclick",QYPLAYER_NOTIFY_INTERACTION_START:"interactionstart",QYPLAYER_NOTIFY_INTERACTION_END:"interactionend",QYPLAYER_H5_VIDEO_LOADSTART:"h5videoloadstart",QYPLAYER_H5_VIDEO_LOADEDMETADATA:"h5videoloadedmetadata",QYPLAYER_H5_DURATION_CHANGED:"h5durationchanged",QYPLAYER_H5_VOLUME_CHANGED:"h5volumechanged",QYPLAYER_H5_SEEK_DRAGSTART:"h5seekdragstart",QYPLAYER_H5_SEEK_DRAGEND:"h5seekdragend"}},function(e,t,n){var r=n(39);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){"use strict";var r=n(22),i=n(159).indexOf,a=n(116),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:s||!c},{indexOf:function(e){return s?o.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,i=n(32),a=n.n(i),o=n(2),s=n.n(o),c=n(3),u=n.n(c),d=(n(177),Object.create||function(e){var t=function(){};return t.prototype=e,new t}),l=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},f=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}},h=20,p=function(){function e(){s()(this,e),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=d(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}return u()(e,[{key:"setMaxListeners",value:function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this}},{key:"getMaxListeners",value:function(){return v(this)}},{key:"emit",value:function(e){var t,n,r,i,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:g(n,u,this);break;case 2:y(n,u,this,arguments[1]);break;case 3:m(n,u,this,arguments[1],arguments[2]);break;case 4:b(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];k(n,u,this,i)}return!0}},{key:"on",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{highPriority:!1};return"object"!=a()(n)&&(n={}),x(this,e,t,n)}},{key:"once",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},i=f.call(T,r);return i.listener=n,r.wrapFn=i,i}(this,e,t)),this}},{key:"off",value:function(e,t){return S.call(this,e,t)}},{key:"un",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){var t,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=d(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=d(null):delete n[e]),this;if(0===arguments.length){var i,a=l(n);for(r=0;r<a.length;++r)"off"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=d(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.off(e,t[r]);return this}},{key:"listeners",value:function(e){return P(this,e,!0)}},{key:"rawListeners",value:function(e){return P(this,e,!1)}},{key:"listenerCount",value:function(){return e.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):I.call(e,t)}}]),e}();try{var _={};Object.defineProperty&&Object.defineProperty(_,"x",{value:0}),r=0===_.x}catch(A){r=!1}function v(e){return e._maxListeners===undefined?p.defaultMaxListeners:e._maxListeners}function g(e,t,n){if(t)e.call(n);else for(var r=e.length,i=w(e,r),a=0;a<r;++a)try{i[a].call(n)}catch(o){console.error(o)}}function y(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=w(e,i),o=0;o<i;++o)try{a[o].call(n,r)}catch(s){console.error(s)}}function m(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=w(e,a),s=0;s<a;++s)try{o[s].call(n,r,i)}catch(c){console.error(c)}}function b(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=w(e,o),c=0;c<o;++c)try{s[c].call(n,r,i,a)}catch(u){console.error(u)}}function k(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=w(e,i),o=0;o<i;++o)try{a[o].apply(n,r)}catch(s){console.error(s)}}function x(e,t,n){var r,i,o,s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},c={highPriority:!!s.highPriority};if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]):(i=e._events=d(null),e._eventsCount=0),o){if("function"==typeof o?o=i[t]=[o,n]:c.highPriority?o.shift(n):o.push(n),!o.warned&&(r=v(e))&&r>0&&o.length>r){o.warned=!0;var u=new Error("Possible Dispatcher memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,"object"===("undefined"==typeof console?"undefined":a()(console))&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else o=i[t]=n,++e._eventsCount;return e}function S(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=d(null):(delete r[e],r.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.off&&this.emit("off",e,o||t)}return this}function T(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function P(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):w(i,i.length):[]}function I(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function w(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}r?Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');h=e}}):p.defaultMaxListeners=h},function(e,t,n){"use strict";var r=n(22),i=n(104).find,a=n(190),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a(o)},function(e,t,n){var r=n(246);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},e.exports["default"]=e.exports,e.exports.__esModule=!0),i(t,n,a||t)}e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(149),i=n(189),a=n(35),o=n(89),s=n(138),c=n(166),u=n(44),d=n(150),l=n(132),f=n(23),h=[].push,p=Math.min,_=4294967295,v=!f((function(){return!RegExp(_,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),a=n===undefined?_:n>>>0;if(0===a)return[];if(e===undefined)return[r];if(!i(e))return t.call(r,e,a);for(var s,c,u,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,f+"g");(s=l.call(v,r))&&!((c=v.lastIndex)>p&&(d.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&h.apply(d,s.slice(1)),u=s[0].length,p=c,d.length>=a));)v.lastIndex===s.index&&v.lastIndex++;return p===r.length?!u&&v.test("")||d.push(""):d.push(r.slice(p)),d.length>a?d.slice(0,a):d}:"0".split(undefined,0).length?function(e,n){return e===undefined&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=o(this),a=t==undefined?undefined:t[e];return a!==undefined?a.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var l=a(e),f=String(this),h=s(l,RegExp),g=l.unicode,y=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),m=new h(v?l:"^(?:"+l.source+")",y),b=i===undefined?_:i>>>0;if(0===b)return[];if(0===f.length)return null===d(m,f)?[f]:[];for(var k=0,x=0,S=[];x<f.length;){m.lastIndex=v?x:0;var T,P=d(m,v?f:f.slice(x));if(null===P||(T=p(u(m.lastIndex+(v?0:x)),f.length))===k)x=c(f,x,g);else{if(S.push(f.slice(k,x)),S.length===b)return S;for(var I=1;I<=P.length-1;I++)if(S.push(P[I]),S.length===b)return S;x=k=T}}return S.push(f.slice(k)),S}]}),!v)},function(e,t,n){var r=n(93),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(22),i=n(134),a=n(102),o=n(116),s=[].join,c=i!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(a(this),e===undefined?",":e)}})},function(e,t,n){"use strict";var r=n(22),i=n(23),a=n(257),o=n(35),s=n(119),c=n(44),u=n(138),d=a.ArrayBuffer,l=a.DataView,f=d.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new d(2).slice(1,undefined).byteLength}))},{slice:function(e,t){if(f!==undefined&&t===undefined)return f.call(o(this),e);for(var n=o(this).byteLength,r=s(e,n),i=s(t===undefined?n:t,n),a=new(u(this,d))(c(i-r)),h=new l(this),p=new l(a),_=0;r<i;)p.setUint8(_++,h.getUint8(r++));return a}})},function(e,t,n){var r=n(23);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(24),i=n(209),a=n(225),o=n(88);for(var s in i){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(d){u.forEach=a}}},,function(e,t,n){var r=n(47),i=n(191),a=n(35),o=n(121),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=o(t,!0),a(n),i)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x}));n(9);var r=n(101),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(1),p=n.n(h),_=(n(45),n(82),n(27),n(94)),v=n(254),g=n(152);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=v.a.console,b=">>>",k=new(function(e){d()(n,e);var t=y(n);function n(){var e;return o()(this,n),(e=t.call(this)).enable=!0,e.MSG_NAME="__log__",e}return c()(n,[{key:"info",value:function(){this.log.apply(this,arguments)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"log",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.log).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"debug",Array.prototype.slice.call(arguments).join("")):this.enable&&m.debug&&(r=m.debug).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"assert",value:function(e){if(this.enable&&m.assert){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=Array.prototype.slice.call(r,1);o.unshift(b),(t=m.assert).call.apply(t,[m,e].concat(i()(o)))}}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"warn",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.warn).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;g.l?k.emit(this.MSG_NAME,"error",Array.prototype.slice.call(arguments).join("")):this.enable&&(r=m.error).call.apply(r,[m,b].concat(Array.prototype.slice.call(arguments)))}}]),n}(_.EventEmitter));function x(e){m=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o}));var r="iqp-big-mode",i="iqp-btn-disable",a="volumeup",o="volumedown"},function(e,t,n){"use strict";var r=n(80),i=n(356),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(a(this),e,t,arguments.length>2?arguments[2]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(244),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).filter,a=n(357),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=i(o(this),e,arguments.length>1?arguments[1]:undefined);return a(this,t)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(159).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(159).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(24),i=n(80),a=n(29),o=n(31)("iterator"),s=r.Uint8Array,c=a.values,u=a.keys,d=a.entries,l=i.aTypedArray,f=i.exportTypedArrayMethod,h=s&&s.prototype[o],p=!!h&&("values"==h.name||h.name==undefined),_=function(){return c.call(l(this))};f("entries",(function(){return d.call(l(this))})),f("keys",(function(){return u.call(l(this))})),f("values",_,!p),f(o,_,!p)},function(e,t,n){"use strict";var r=n(80),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].join;a("join",(function(e){return o.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(80),i=n(269),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(a(this),arguments)}))},function(e,t,n){"use strict";var r=n(80),i=n(104).map,a=n(138),o=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:undefined,(function(e,t){return new(s(a(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(80),i=n(258).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=n(258).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(a(this),e,arguments.length,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var e,t=this,n=i(t).length,r=o(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}))},function(e,t,n){"use strict";var r=n(80),i=n(44),a=n(277),o=n(81),s=n(23),c=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(e){c(this);var t=a(arguments.length>1?arguments[1]:undefined,1),n=this.length,r=o(e),s=i(r.length),u=0;if(s+t>n)throw RangeError("Wrong length");for(;u<s;)this[t+u]=r[u++]}),s((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var r=n(80),i=n(138),a=n(23),o=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice;c("slice",(function(e,t){for(var n=u.call(o(this),e,t),r=i(this,this.constructor),a=0,c=n.length,d=new(s(r))(c);c>a;)d[a]=n[a++];return d}),a((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(80),i=n(104).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:undefined)}))},function(e,t,n){"use strict";var r=n(80),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=[].sort;a("sort",(function(e){return o.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(80),i=n(44),a=n(119),o=n(138),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length,c=a(e,r);return new(o(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,i((t===undefined?r:a(t,r))-c))}))},function(e,t,n){"use strict";var r=n(24),i=n(80),a=n(23),o=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,d=[].slice,l=!!o&&a((function(){u.call(new o(1))}));c("toLocaleString",(function(){return u.apply(l?d.call(s(this)):s(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!a((function(){o.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(80).exportTypedArrayMethod,i=n(23),a=n(24).Uint8Array,o=a&&a.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var u=o.toString!=s;r("toString",s,u)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){n(275)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";t.a={DASH:"DASH",CKNSP:"CKNSP",KIWI:"KIWI",KIWIR:"KIWIR",AD:"AD",IVG:"IVG",P00001:"P00001",P00002:"P00002",P00003:"P00003",P00004:"P00004",P00005:"P00005",P00006:"P00006",P00007:"P00007",P07001:"P07001",IV0001:"IV0001",dataKeyMap:{A00001:2,A00101:2,A00302:32,A00301:31,U00001:22,P00001:101,P00002:102,P00007:12,304:10,401:10,405:10,406:10,493:10,411:9,491:9,501:12,502:13,505:15,506:15,601:14,602:14,701:14,702:14,706:14,711:14,Q00312:22,Q00311:22,Q00501:22,P00005:21,P07001:7001},keyMap:{1:{title:"error_code_title1",desc:"error_code_desc1"},2:"error_code_desc2",6:"error_code_desc6",7:"error_code_desc7",9:{title:"error_code_title9",desc:"&nbsp;"},10:{title:"error_code_title10",desc:"&nbsp;"},11:"error_code_desc11",12:{title:"error_code_title12",desc:"error_code_desc12"},13:{title:"error_code_title13",desc:"error_code_desc12"},14:{title:"error_code_title14",desc:"&nbsp;"},15:{title:"",desc:"&nbsp;"},21:"error_code_desc21",22:{title:"error_code_desc22",desc:"&nbsp;"},31:{title:"error_private_selfsee",desc:"&nbsp;"},32:{title:"error_private_video",desc:"&nbsp;"},101:"error_code_desc_http",102:"error_code_desc_http",3e3:{title:"error_code_title301",desc:"&nbsp;"},3302:{title:"error_code_vda_err",desc:"&nbsp;"},3303:{title:"error_code_audio_err",desc:"&nbsp;"},7001:"error_code_desc_ad"}}},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(90),n(82),n(48),n(16)),c=[],u=function(){function e(){i()(this,e),this._events={}}return o()(e,[{key:"on",value:function(e,t,n){var r=[];return this._events||(this._events={}),n&&this._events[e]&&(r=this._events[e]),r.push(t),this._events[e]=r,this}},{key:"off",value:function(e,t){if(this._events){var n=this._events[e];if(!t||Array.isArray(n)&&n.length<1)delete this._events[e];else for(var r=n?n.length:0;r--;)n[r]===t&&n.splice(r,1);return this}}},{key:"emit",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],a=[].slice.call(n,1),o=this._events[i];return o&&o.forEach((function(t){return t.apply(e,a)})),this}},{key:"once",value:function(e,t){var n=this;return this.on(e,(function r(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t.apply(n,a),n.off(e,r)})),this}},{key:"clear",value:function(){delete this._events}}]),e}();t.a={getEvent:function(){return c[s.a.tvId]},newEvent:function(){return c[s.a.tvId]=new u,c[s.a.tvId]},clearEvent:function(e){c[e]&&c[e].clear()}}},function(e,t,n){"use strict";var r,i=n(266),a=n(47),o=n(24),s=n(39),c=n(76),u=n(170),d=n(88),l=n(85),f=n(50).f,h=n(179),p=n(158),_=n(31),v=n(172),g=o.Int8Array,y=g&&g.prototype,m=o.Uint8ClampedArray,b=m&&m.prototype,k=g&&h(g),x=y&&h(y),S=Object.prototype,T=S.isPrototypeOf,P=_("toStringTag"),I=v("TYPED_ARRAY_TAG"),w=i&&!!p&&"Opera"!==u(o.opera),A=!1,E={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},q=function(e){if(!s(e))return!1;var t=u(e);return c(E,t)||c(D,t)};for(r in E)o[r]||(w=!1);if((!w||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},w))for(r in E)o[r]&&p(o[r],k);if((!w||!x||x===S)&&(x=k.prototype,w))for(r in E)o[r]&&p(o[r].prototype,x);if(w&&h(b)!==x&&p(b,x),a&&!c(x,P))for(r in A=!0,f(x,P,{get:function(){return s(this)?this[I]:undefined}}),E)o[r]&&d(o[r],I,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:w,TYPED_ARRAY_TAG:A&&I,aTypedArray:function(e){if(q(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(T.call(k,e))return e}else for(var t in E)if(c(E,r)){var n=o[t];if(n&&(e===n||T.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in E){var i=o[r];i&&c(i.prototype,e)&&delete i.prototype[e]}x[e]&&!n||l(x,e,n?t:w&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(p){if(n)for(r in E)(i=o[r])&&c(i,e)&&delete i[e];if(k[e]&&!n)return;try{return l(k,e,n?t:w&&g[e]||t)}catch(s){}}for(r in E)!(i=o[r])||i[e]&&!n||l(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(E,t)||c(D,t)},isTypedArray:q,TypedArray:k,TypedArrayPrototype:x}},function(e,t,n){var r=n(89);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(22),i=n(39),a=n(143),o=n(119),s=n(44),c=n(102),u=n(144),d=n(31),l=n(130)("slice"),f=d("species"),h=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!l},{slice:function(e,t){var n,r,d,l=c(this),_=s(l.length),v=o(e,_),g=o(t===undefined?_:t,_);if(a(l)&&("function"!=typeof(n=l.constructor)||n!==Array&&!a(n.prototype)?i(n)&&null===(n=n[f])&&(n=undefined):n=undefined,n===Array||n===undefined))return h.call(l,v,g);for(r=new(n===undefined?Array:n)(p(g-v,0)),d=0;v<g;v++,d++)v in l&&u(r,d,l[v]);return r.length=d,r}})},function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(145),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(26),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(45),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(146),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_14__),_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(40),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(14),_kit_http__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(30),_kit_md5__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(84),_kit_logger__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(15),_kit_platform__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8),_kit_uuid__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(28),_res_authkey__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(123),_res_authkey__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_res_authkey__WEBPACK_IMPORTED_MODULE_22__),_i18n__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(98);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(e);if(t){var i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var logger=new _kit_logger__WEBPACK_IMPORTED_MODULE_19__.a("user"),NoticedLoginInfo,_isNewUser=!_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC006"),_heartBeatTimer=0,_heartBeatTime=0,_isActivation=!1,_tvid="",_bossStatus="",_agentType=1,_qdv=7,_vipTypes="";_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.browser.iPad?23:_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.os.androidTablet?24:1;var preIsVip=!1,_userIpInfo="",requestVipTypesRetryTimes=0;_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0));var getUserInfo=function getUserInfo(){var userInfo={},p00003=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00003"),qc179=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC179");return null!==p00003&&""!==p00003?userInfo.uid=p00003:null!==qc179&&""!==qc179&&(qc179=window.JSON?window.JSON.parse(qc179):eval("("+qc179+")"),userInfo.uid=qc179.uid),userInfo},onHeartBeatTimer=function(){var e={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,cversion:2,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid(),paid:_bossStatus,ptid:getPTID(),viptypes:_vipTypes,tv_id:_tvid,tn:Math.random().toString().replace(".","")};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive.action",params:e,beforeSend:function(e){var t=[];for(var n in e.params)t.push(n+"="+e.params[n]);return e.url+="&sign="+function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)t+=e[n]+"|";return t+="jfaljluixn39012$#",Object(_kit_md5__WEBPACK_IMPORTED_MODULE_18__.a)(t)}(t),e}})},getPTID=function(){return _kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getPtid(_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale())},addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)},_getVipTypesStack=[],_getVipTypesCallback=function(e){for(var t=0;t<_getVipTypesStack.length;t++)_getVipTypesStack[t](e);_getVipTypesStack=[]},isRequestVipTypes=!1,isKeepalive=!1,__QP0013=null,UserInfo=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(n,e);var t=_createSuper(n);function n(){return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,n),t.call(this)}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(n,[{key:"isLogin",value:function(){return NoticedLoginInfo?NoticedLoginInfo.login:""!==this.getUid()}},{key:"getUid",value:function(){return getUserInfo().uid||""}},{key:"passportCookie",value:function(){return NoticedLoginInfo&&NoticedLoginInfo.P00001?NoticedLoginInfo.P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001")||""}},{key:"isNewUser",value:function(){return _isNewUser}},{key:"setInfo",value:function(e){preIsVip=""!==__QP0013&&"0"!==__QP0013,!0===(NoticedLoginInfo=e).login||"true"===NoticedLoginInfo.login?NoticedLoginInfo.login=!0:NoticedLoginInfo.login=!1,this.clearVipTypes(),this.emit("infoset")}},{key:"tvid",value:function(e){_tvid=e}},{key:"bossStatus",value:function(e){_bossStatus=e}},{key:"openHeartBeat",value:function(){_isActivation||0===_heartBeatTime||(_isActivation=!0,0===_heartBeatTimer&&(onHeartBeatTimer(),_heartBeatTimer=setInterval(onHeartBeatTimer,_heartBeatTime)))}},{key:"stopHeartBeat",value:function(){_isActivation=!1,0!==_heartBeatTimer&&(clearInterval(_heartBeatTimer),_heartBeatTimer=0)}},{key:"closeHeartBeat",value:function(){var e=this,t=+new Date,n=getPTID(),r={authcookie:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),agenttype:_agentType,device_id:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getFluid()||_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.getJsuid(),tv_id:_tvid,paid:_bossStatus,viptypes:_vipTypes,ptid:n,version:"4.1.1",qd_v:_qdv,ts:t};_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/off.action",params:r,beforeSend:function(t){var n=[];for(var r in t.params)n.push(r+"="+t.params[r]);try{var i=e.verifySgin(n);t.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(i)}catch(a){}return logger.log(t.url),t},isSort:!0})}},{key:"beforeunloadListener",value:function(){var e=this;addEvent(window,"beforeunload",(function(){e.isVip((function(t){t&&e.closeHeartBeat()}))}))}},{key:"keepalive",value:function(){var e=this;if(!isKeepalive){isKeepalive=!0;var t=getPTID();_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()&&(_agentType=_kit_platform__WEBPACK_IMPORTED_MODULE_20__.a.getAgentType(!0));var n=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");n&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.jsonp({url:"https://cmonitor.iqiyi.com/apis/cmonitor/keepalive_required.action",params:{authcookie:n,agenttype:_agentType,cversion:2,device_id:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QC005"),paid:_bossStatus,ptid:t,tv_id:_tvid,qd_v:_qdv,viptypes:_vipTypes},timeout:2e3,memory:!0,beforeSend:function(t){var n=[];for(var r in t.params)n.push(r+"="+t.params[r]);try{var i=e.verifySgin(n);t.url+="&qd_sc="+_res_authkey__WEBPACK_IMPORTED_MODULE_22___default.a.cmd5x(i)}catch(a){}return t},success:function(t){if(t&&"A00000"==t.code&&t.data&&t.data.interval){var n=1e3*parseInt(t.data.interval,10);n>0&&(n<1e4&&(n=1e4),_heartBeatTime=n,clearInterval(_heartBeatTimer),e.openHeartBeat())}},isSort:!0})}}},{key:"isVip",value:function(e){this.getVipTypes((function(t){var n=t.join(",");e("0"!==n&&""!==n)}))}},{key:"getVipTypes",value:function(e){if(this.isLogin()||this.clearVipTypes(),_getVipTypesStack.push(e),!__QP0013){var t=(__QP0013=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("QP0013")).match(/[0-9]/g)||[];__QP0013&&t.length!=__QP0013.replace(/,/g,"").length&&(__QP0013="")}__QP0013?(_vipTypes=__QP0013.split(","),_getVipTypesCallback(_vipTypes)):isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"updateVipTypes",value:function(){isRequestVipTypes||(isRequestVipTypes=!0,this.requestVipTypes())}},{key:"clearVipTypes",value:function(){isRequestVipTypes=!1,requestVipTypesRetryTimes=0,_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013","",{expires:1296e6,path:"/",domain:"iqiyi.com"}),__QP0013=null}},{key:"__isChangeVipState",value:function(e){this.isVip((function(t){logger.log("isChangeVipState! preIsVip:"+preIsVip+",curIsVip: "+t),e(preIsVip!=t)}))}},{key:"requestVipTypes",value:function(){var e=this,t=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");if(!this.isLogin()||!t)return isRequestVipTypes=!1,void _getVipTypesCallback([0]);t&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"3.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18"},timeout:2e3,memory:!0,success:function(t){isRequestVipTypes=!1;try{t=JSON.parse(t||{})}catch(o){logger.error("vip_users: parse Error"),e.requestVipTypesFailed()}if("A00000"===t.code){var n=t.data||{},r=[];for(var i in n){var a=n[i];a&&"1"==a.status&&r.push(a.vipType),a=null}r.length||r.push(0),__QP0013=r.join(","),_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",__QP0013,{expires:1296e6,path:"/",domain:"iqiyi.com"}),logger.log("requset vipTypes success! viptypes is "+__QP0013),_getVipTypesCallback(r)}else e.requestVipTypesFailed()},failure:function(t,n){isRequestVipTypes=!1,e.requestVipTypesFailed()}})}},{key:"requestVipTypesFailed",value:function(){requestVipTypesRetryTimes>0?(__QP0013="1",logger.log("requset vipTypes failed! viptypes is "+__QP0013),_getVipTypesCallback([1])):(this.requestVipTypes(),requestVipTypesRetryTimes++)}},{key:"getUserIPInfo",value:function(e){_userIpInfo?e(_userIpInfo):_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.json({url:"//data.video.iqiyi.com/v.f4v",withCredentials:!1,timeout:2e3,memory:!0,success:function(t){_userIpInfo=t,e(t)},failure:function(t){e(t)}})}},{key:"reqVipTypes",value:function(e){var t=_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001");t?t&&_kit_http__WEBPACK_IMPORTED_MODULE_17__.a.ajax({url:"//vinfo.vip.iqiyi.com/external/vip_users",params:{P00001:_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.get("P00001"),platform:getPTID(),version:"3.0",appVersion:"1.0",bizSource:"vip_web_player",messageId:_kit_uuid__WEBPACK_IMPORTED_MODULE_21__.a.createUUID(),vipTypes:_i18n__WEBPACK_IMPORTED_MODULE_23__.a.isTWLocale()?"5,6,7,8,10,13,14,16,18":"1,3,4,5,7,8,10,13,14,16,18"},timeout:2e3,memory:!0,success:function(t){try{t=JSON.parse(t||{})}catch(s){e([1])}if("A00000"===t.code){var n=t.data||{},r=[];for(var i in n){var a=n[i];a&&"1"==a.status&&r.push(parseInt(a.vipType)),a=null}r.length||r.push(0);var o=r.join(",");_kit_cookie__WEBPACK_IMPORTED_MODULE_16__.a.set("QP0013",o,{expires:1296e6,path:"/",domain:"iqiyi.com"}),e(r)}else e([1]);logger.info("user reqVipTypes: result = ".concat(t))},failure:function(){e([1]),logger.info("user reqVipTypes: failure")}}):e([0])}},{key:"verifySgin",value:function(e){e&&e.sort();for(var t="",n=0;n<e.length;n++)n===e.length-1?t+=e[n]:t+=e[n]+"&";return t}}]),n}(_kit_dispatcher__WEBPACK_IMPORTED_MODULE_15__.a);__webpack_exports__.a=new UserInfo},function(e,t,n){"use strict";function r(e,t,n,r,i,a){return c(function(e,t){return e<<t|e>>>32-t}(c(c(t,e),c(r,a)),i),n)}function i(e,t,n,i,a,o,s){return r(t&n|~t&i,e,t,a,o,s)}function a(e,t,n,i,a,o,s){return r(t&i|n&~i,e,t,a,o,s)}function o(e,t,n,i,a,o,s){return r(t^n^i,e,t,a,o,s)}function s(e,t,n,i,a,o,s){return r(n^(t|~i),e,t,a,o,s)}function c(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.a=function(e){return function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,u=-1732584194,d=271733878,l=0;l<e.length;l+=16){var f=n,h=r,p=u,_=d;n=i(n,r,u,d,e[l+0],7,-680876936),d=i(d,n,r,u,e[l+1],12,-389564586),u=i(u,d,n,r,e[l+2],17,606105819),r=i(r,u,d,n,e[l+3],22,-1044525330),n=i(n,r,u,d,e[l+4],7,-176418897),d=i(d,n,r,u,e[l+5],12,1200080426),u=i(u,d,n,r,e[l+6],17,-1473231341),r=i(r,u,d,n,e[l+7],22,-45705983),n=i(n,r,u,d,e[l+8],7,1770035416),d=i(d,n,r,u,e[l+9],12,-1958414417),u=i(u,d,n,r,e[l+10],17,-42063),r=i(r,u,d,n,e[l+11],22,-1990404162),n=i(n,r,u,d,e[l+12],7,1804603682),d=i(d,n,r,u,e[l+13],12,-40341101),u=i(u,d,n,r,e[l+14],17,-1502002290),n=a(n,r=i(r,u,d,n,e[l+15],22,1236535329),u,d,e[l+1],5,-165796510),d=a(d,n,r,u,e[l+6],9,-1069501632),u=a(u,d,n,r,e[l+11],14,643717713),r=a(r,u,d,n,e[l+0],20,-373897302),n=a(n,r,u,d,e[l+5],5,-701558691),d=a(d,n,r,u,e[l+10],9,38016083),u=a(u,d,n,r,e[l+15],14,-660478335),r=a(r,u,d,n,e[l+4],20,-405537848),n=a(n,r,u,d,e[l+9],5,568446438),d=a(d,n,r,u,e[l+14],9,-1019803690),u=a(u,d,n,r,e[l+3],14,-187363961),r=a(r,u,d,n,e[l+8],20,1163531501),n=a(n,r,u,d,e[l+13],5,-1444681467),d=a(d,n,r,u,e[l+2],9,-51403784),u=a(u,d,n,r,e[l+7],14,1735328473),n=o(n,r=a(r,u,d,n,e[l+12],20,-1926607734),u,d,e[l+5],4,-378558),d=o(d,n,r,u,e[l+8],11,-2022574463),u=o(u,d,n,r,e[l+11],16,1839030562),r=o(r,u,d,n,e[l+14],23,-35309556),n=o(n,r,u,d,e[l+1],4,-1530992060),d=o(d,n,r,u,e[l+4],11,1272893353),u=o(u,d,n,r,e[l+7],16,-155497632),r=o(r,u,d,n,e[l+10],23,-1094730640),n=o(n,r,u,d,e[l+13],4,681279174),d=o(d,n,r,u,e[l+0],11,-358537222),u=o(u,d,n,r,e[l+3],16,-722521979),r=o(r,u,d,n,e[l+6],23,76029189),n=o(n,r,u,d,e[l+9],4,-640364487),d=o(d,n,r,u,e[l+12],11,-421815835),u=o(u,d,n,r,e[l+15],16,530742520),n=s(n,r=o(r,u,d,n,e[l+2],23,-995338651),u,d,e[l+0],6,-198630844),d=s(d,n,r,u,e[l+7],10,1126891415),u=s(u,d,n,r,e[l+14],15,-1416354905),r=s(r,u,d,n,e[l+5],21,-57434055),n=s(n,r,u,d,e[l+12],6,1700485571),d=s(d,n,r,u,e[l+3],10,-1894986606),u=s(u,d,n,r,e[l+10],15,-1051523),r=s(r,u,d,n,e[l+1],21,-2054922799),n=s(n,r,u,d,e[l+8],6,1873313359),d=s(d,n,r,u,e[l+15],10,-30611744),u=s(u,d,n,r,e[l+6],15,-1560198380),r=s(r,u,d,n,e[l+13],21,1309151649),n=s(n,r,u,d,e[l+4],6,-145523070),d=s(d,n,r,u,e[l+11],10,-1120210379),u=s(u,d,n,r,e[l+2],15,718787259),r=s(r,u,d,n,e[l+9],21,-343485551),n=c(n,f),r=c(r,h),u=c(u,p),d=c(d,_)}return Array(n,r,u,d)}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))}},function(e,t,n){var r=n(24),i=n(88),a=n(76),o=n(161),s=n(175),c=n(109),u=c.get,d=c.enforce,l=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||a(n,"name")||i(n,"name",t),(c=d(n)).source||(c.source=l.join("string"==typeof t?t:""))),e!==r?(u?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){"use strict";var r={},i={},a={},o=0,s={getItem:function(e){return r[e]},setItem:function(e,t){r[e]=t},removeItem:function(e){delete r[e]}},c=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return s}(),u=function(){0===o&&(clearTimeout(o),o=setTimeout((function(){for(var e in o=0,i)c.setItem(e,i[e]),delete i[e];for(var t in a)c.removeItem(t),delete a[t]}),1e3))};t.a={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return r[e]||(r[e]=c.getItem(e)),r[e]},write:function(e,t){r[e]=t,i[e]=t,u()},remove:function(e){delete r[e],a[e]=0,u()}}},function(e,t,n){e.exports=n(363)},function(e,t,n){var r=n(47),i=n(50),a=n(120);e.exports=r?function(e,t,n){return i.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){"use strict";var r=n(22),i=n(119),a=n(93),o=n(44),s=n(81),c=n(164),u=n(144),d=n(130)("splice"),l=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var n,r,d,_,v,g,y=s(this),m=o(y.length),b=i(e,m),k=arguments.length;if(0===k?n=r=0:1===k?(n=0,r=m-b):(n=k-2,r=f(l(a(t),0),m-b)),m+n-r>h)throw TypeError(p);for(d=c(y,r),_=0;_<r;_++)(v=b+_)in y&&u(d,_,y[v]);if(d.length=r,n<r){for(_=b;_<m-r;_++)g=_+n,(v=_+r)in y?y[g]=y[v]:delete y[g];for(_=m;_>m-r+n;_--)delete y[_-1]}else if(n>r)for(_=m-r;_>b;_--)g=_+n-1,(v=_+r-1)in y?y[g]=y[v]:delete y[g];for(_=0;_<n;_++)y[_+b]=arguments[_+2];return y.length=m-r+n,d}})},function(e,t,n){"use strict";t.a={LoaderState_ready:"LoaderState_ready",LoaderState_progress:"LoaderState_progress",LoaderState_done:"LoaderState_done",LoaderState_error:"LoaderState_error",LoaderState_error_dispatch:"LoaderState_error_dispatch",LoaderState_error_load:"LoaderState_error_load",LoaderState_dataRangeError:"loadDataRangeError",LoaderState_lowSpeed:"LoaderState_lowpeed",LoaderState_405:"LoaderState_405"}},function(e,t,n){var r=n(24),i=n(209),a=n(29),o=n(88),s=n(31),c=s("iterator"),u=s("toStringTag"),d=a.values;for(var l in i){var f=r[l],h=f&&f.prototype;if(h){if(h[c]!==d)try{o(h,c,d)}catch(_){h[c]=d}if(h[u]||o(h,u,l),i[l])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(_){h[p]=a[p]}}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,undefined,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,a),!0;case 6:return d.fn.call(d.context,t,n,r,a,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var f,h=d.length;for(u=0;u<h;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,undefined,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,n);break;case 4:d[u].fn.call(d[u].context,t,n,r);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];d[u].fn.apply(d[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return c(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||c(this,a);else{for(var s=0,u=[],d=o.length;s<d;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:c(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";t.a={DisPatchStatus:"disPatch.status",LoadStatus:"cdnTaskLoader.loadStatus",DisLoadStatus:"dispatchLoader.status",CdnNodeMgrStateChange:"cdnNodeMgr.stateChange"}},function(e,t,n){"use strict";var r={1:{3:!0,37:!1,40:!0,42:!0,48:!0,50:!0},2:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1},4:{3:!1,5:!1,14:!0,27:!0,28:!1,41:!1,46:!0,51:!1},5:{1:!0}};function i(e){for(var t=[],n=1;n<=64;n++)t.push(r[e][n]?1:0);return parseInt(t.reverse().join(""),2)}t.a={getFT1:function(){return i(1)},getFT2:function(){return i(2)},getFT4:function(){return i(4)},getFT5:function(){return i(5)},getM3U8FT1:function(){var e=[];r[1][37]=!0,r[1][38]=!0,r[1][50]=!0;for(var t=1;t<=64;t++)e.push(r[1][t]?1:0);return parseInt(e.reverse().join(""),2)},getMP4FT1:function(){var e=[];r[1][45]=!0,r[1][50]=!0;for(var t=1;t<=64;t++)e.push(r[1][t]?1:0);return parseInt(e.reverse().join(""),2)},hasBit:function(e,t){return r[e][t]},openBit:function(e,t){r[e][t]=!0},closeBit:function(e,t){r[e][t]=!1}}},function(e,t,n){"use strict";var r=n(193).charAt,i=n(109),a=n(236),o="String Iterator",s=i.set,c=i.getterFor(o);a(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,i=t.index;return i>=n.length?{value:undefined,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r="tw_t";t.a={locale:"cn_s",isTraditionalChinese:function(){var e=!1,t=this.locale;return t!==r&&"cn_t"!==t||(e=!0),e},isTWLocale:function(){var e=!1,t=this.locale;return t!==r&&"tw_s"!==t||(e=!0),e},local:function(){return this.locale},setLocale:function(e){this.locale=e}}},function(e,t,n){"use strict";var r,i,a,o,s=n(22),c=n(136),u=n(24),d=n(105),l=n(281),f=n(85),h=n(217),p=n(155),_=n(181),v=n(39),g=n(103),y=n(184),m=n(175),b=n(260),k=n(230),x=n(138),S=n(248).set,T=n(282),P=n(284),I=n(285),w=n(250),A=n(286),E=n(109),D=n(142),q=n(31),O=n(200),R=n(165),L=q("species"),M="Promise",C=E.get,N=E.set,B=E.getterFor(M),F=l,U=u.TypeError,j=u.document,V=u.process,W=d("fetch"),H=w.f,z=H,Y=!!(j&&j.createEvent&&u.dispatchEvent),G="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",K=D(M,(function(){if(!(m(F)!==String(F))){if(66===R)return!0;if(!O&&!G)return!0}if(c&&!F.prototype["finally"])return!0;if(R>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[L]=t,!(e.then((function(){}))instanceof t)})),$=K||!k((function(e){F.all(e)["catch"]((function(){}))})),Z=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;T((function(){for(var r=e.value,i=1==e.state,a=0;n.length>a;){var o,s,c,u=n[a++],d=i?u.ok:u.fail,l=u.resolve,f=u.reject,h=u.domain;try{d?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===d?o=r:(h&&h.enter(),o=d(r),h&&(h.exit(),c=!0)),o===u.promise?f(U("Promise-chain cycle")):(s=Z(o))?s.call(o,l,f):l(o)):f(r)}catch(p){h&&!c&&h.exit(),f(p)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},J=function(e,t,n){var r,i;Y?((r=j.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!G&&(i=u["on"+e])?i(r):e===Q&&I("Unhandled promise rejection",n)},ee=function(e){S.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=A((function(){O?V.emit("unhandledRejection",r,n):J(Q,n,r)})),e.rejection=O||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){S.call(u,(function(){var t=e.facade;O?V.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},ae=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=Z(t);r?T((function(){var n={done:!1};try{r.call(t,re(ae,n,e),re(ie,n,e))}catch(i){ie(n,i,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(i){ie({done:!1},i,e)}}};K&&(F=function(e){y(this,F,M),g(e),r.call(this);var t=C(this);try{e(re(ae,t),re(ie,t))}catch(n){ie(t,n)}},(r=function(e){N(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:undefined})}).prototype=h(F.prototype,{then:function(e,t){var n=B(this),r=H(x(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?V.domain:undefined,n.parent=!0,n.reactions.push(r),0!=n.state&&X(n,!1),r.promise},"catch":function(e){return this.then(undefined,e)}}),i=function(){var e=new r,t=C(e);this.promise=e,this.resolve=re(ae,t),this.reject=re(ie,t)},w.f=H=function(e){return e===F||e===a?new i(e):z(e)},c||"function"!=typeof l||(o=l.prototype.then,f(l.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof W&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return P(F,W.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:F}),p(F,M,!1,!0),_(M),a=d(M),s({target:M,stat:!0,forced:K},{reject:function(e){var t=H(this);return t.reject.call(undefined,e),t.promise}}),s({target:M,stat:!0,forced:c||K},{resolve:function(e){return P(c&&this===a?F:this,e)}}),s({target:M,stat:!0,forced:$},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,a=A((function(){var n=g(t.resolve),a=[],o=0,s=1;b(e,(function(e){var c=o++,u=!1;a.push(undefined),s++,n.call(t,e).then((function(e){u||(u=!0,a[c]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=A((function(){var i=g(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(364),i=n(365),a=n(279),o=n(366);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(134),i=n(89);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(135),i=n(134),a=n(81),o=n(44),s=n(164),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,d=4==e,l=6==e,f=7==e,h=5==e||l;return function(p,_,v,g){for(var y,m,b=a(p),k=i(b),x=r(_,v,3),S=o(k.length),T=0,P=g||s,I=t?P(p,S):n||f?P(p,0):undefined;S>T;T++)if((h||T in k)&&(m=x(y=k[T],T,b),e))if(t)I[T]=m;else if(m)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:c.call(I,y)}else switch(e){case 4:return!1;case 7:c.call(I,y)}return l?-1:u||d?d:I}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t,n){var r=n(206),i=n(24),a=function(e){return"function"==typeof e?e:undefined};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},,function(e,t,n){"use strict";var r=n(47),i=n(24),a=n(142),o=n(85),s=n(76),c=n(100),u=n(180),d=n(121),l=n(23),f=n(122),h=n(129).f,p=n(111).f,_=n(50).f,v=n(137).trim,g="Number",y=i.Number,m=y.prototype,b=c(f(m))==g,k=function(e){var t,n,r,i,a,o,s,c,u=d(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=v(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(a=u.slice(2)).length,s=0;s<o;s++)if((c=a.charCodeAt(s))<48||c>i)return NaN;return parseInt(a,r)}return+u};if(a(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(b?l((function(){m.valueOf.call(n)})):c(n)!=g)?u(new y(k(t)),n,S):k(t)},T=r?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),P=0;T.length>P;P++)s(y,x=T[P])&&!s(S,x)&&_(S,x,p(y,x));S.prototype=m,m.constructor=S,o(i,g,S)}},function(e,t,n){"use strict";n.d(t,"f",(function(){return C})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return B})),n.d(t,"b",(function(){return F})),n.d(t,"a",(function(){return j})),n.d(t,"e",(function(){return V}));n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(4),u=n.n(c),d=n(5),l=n.n(d),f=n(1),h=n.n(f),p=(n(82),n(10),n(19),n(139),n(27),n(593)),_=n(202),v=n(51),g=n(382),y=n(615),m=n(94),b=n(242),k=n(124),x=n.n(k),S=(n(270),n(169),n(99),n(25),n(399),n(267),n(46),n(107),n(115),n(204),n(87)),T=n.n(S),P=n(254),I=n(152),w=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}var t,n;return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.controller=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.controller,t=this.stats;this._resetTimer(),t&&(t.isTimeout?t.aborted=!1:t.aborted=!0),e&&!e.signal.aborted&&e.abort(),t&&t.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_parseRes",value:(n=x()(T.a.mark((function i(e,t){var n;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next="arraybuffer"===r.t0?3:"json"===r.t0?7:11;break;case 3:return r.next=5,t.arrayBuffer();case 5:return n=r.sent,r.abrupt("break",14);case 7:return r.next=9,t.json();case 9:return n=r.sent,r.abrupt("break",14);case 11:return r.next=13,t.text();case 13:n=r.sent;case 14:return r.abrupt("return",n);case 15:case"end":return r.stop()}}),i)}))),function(e,t){return n.apply(this,arguments)})},{key:"_initReqTimeout",value:function(){var e=this.context;this.stats;e.retryParameters.timeout>0&&(clearTimeout(this._requestTimeout),this._requestTimeout=setTimeout(this._onTimeout.bind(this),e.retryParameters.timeout))}},{key:"_doLoad",value:(t=x()(T.a.mark((function o(){var e,t,n,r,i,a,s,c,u,d,l,f,h,p,_,g,y,m,k,S,I;return T.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=function(){return n.retry>=t.retryParameters.maxRetry||a>=400&&a<499},e=this,t=this.context,n=this.stats,r=this.speedSampler,i=this.url,c=0,u=t.callbacks,d=this.controller=new AbortController,n.requestStartMark=performance.now(),e._initReqTimeout(),o.prev=8,f=i,h={method:t.method,headers:t.headers||new Headers,body:t.body||undefined,mode:"cors",credentials:t.allowCrossSiteCredentials?"include":"same-origin",signal:d.signal,cache:"no-store"},o.next=13,P.a.fetch(f,h);case 13:if(s=o.sent,!((a=s.status)>=200&&a<300)){o.next=34;break}if(!u.onProgress){o.next=23;break}return p=s.clone().body.getReader(),(_=s.headers.get("Content-Length"))&&parseInt(_,10),g=function(){var t=x()(T.a.mark((function n(t){var r,i;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){p.read().then((function(t){var n=t.done,r=t.value;e({done:n,value:r})}),(function(t){e({done:!0})}))}));case 2:if(r=n.sent,clearTimeout(e._requestTimeout),!r.done){n.next=8;break}t&&t.close(),n.next=14;break;case 8:return(i=ArrayBuffer.isView(r.value)?r.value.buffer:null)&&(c+=i.byteLength),e._onProgress(i),t&&t.enqueue(i),n.next=14,g();case 14:case"end":return n.stop()}}),n)})));return function(e){return t.apply(this,arguments)}}(),o.next=23,g();case 23:if(!u.onSuccess){o.next=32;break}return o.next=26,e._parseRes(t.responseType,s);case 26:y=o.sent,m=performance.now()-n.requestStartMark,k=null,this.netType===b.a.SEGMENT&&(k=Number((y.byteLength/(m/1e3)).toFixed(3))),S={netCost:m,speed:k,url:i,data:y,status:a},n.aborted||(y&&r.sample(y.byteLength-c),u.onSuccess(S,n,t),this._onComplete(),n.dump=!0);case 32:o.next=48;break;case 34:if(!l()){o.next=47;break}if(!n.isTimeout){o.next=39;break}u.onTimeout&&u.onTimeout(n,t,{status:a,url:i}),o.next=44;break;case 39:if(!u.onError){o.next=44;break}return o.next=42,e._parseRes(t.responseType,s);case 42:I=o.sent,n.aborted||u.onError({status:a,url:i,response:I},t);case 44:this._onComplete(),o.next=48;break;case 47:this._retry();case 48:o.next=54;break;case 50:o.prev=50,o.t0=o["catch"](8),(o.t0 instanceof RangeError||o.t0 instanceof ReferenceError||o.t0 instanceof SyntaxError||o.t0 instanceof TypeError||o.t0 instanceof URIError)&&v.a.error("fetch ".concat(o.t0.constructor.name,": ").concat(o.t0.stack?o.t0.stack:o.t0.message?o.t0.message:o.t0));try{n.aborted||(l()?(n.isTimeout?u.onTimeout&&u.onTimeout(n,t,{status:a,url:i}):u.onError&&u.onError({code:a,response:null,error:o.t0},t),this._onComplete()):this._retry())}catch(w){v.a.error(w.stack?w.stack:w.message?w.message:w)}case 54:return o.abrupt("return",this);case 55:case"end":return o.stop()}}),o,this,[[8,50]])}))),function(){return t.apply(this,arguments)})},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onTimeout",value:function(){this.context;this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(e){var t=this.context,n=this.stats,r=t.callbacks;(Object(I.k)(e)||Object(I.a)(e))&&this.speedSampler.sample(e.byteLength),r.onProgress(e,n),n.dump=!0}},{key:"_onAbort",value:function(){var e=this.context;if(!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,this.speedSampler.reset(),v.a.log("fetch onComplete"),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isSupported",value:function(){if("boolean"!=typeof r){var e=!!P.a.fetch,t=!!P.a.AbortController,n=!0;if(P.a.ReadableStream)try{new ReadableStream({})}catch(i){n=!1}else n=!1;r=e&&n&&t}return r}}]),e}(),A=(n(580),n(404));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var D,q=performance&&performance.now?performance.now.bind(performance):Date.now,O=function(e){u()(n,e);var t=E(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0,e.resetTimer_=new A.a((function(){e.tInit=null,e.tLastArrivedSecond=null,e.bytesInSecond=null,e.bytesAll=null,e.bandwidth=0,e.downloadSpeed=0})),e}return s()(n,[{key:"averageBps",get:function(){if(null===this.bytesAll||null===this.tInit)return 0;var e=(q()-this.tInit)/1e3;return this.bytesAll/e}},{key:"reset",value:function(){this.resetTimer_.schedule(1)}},{key:"sample",value:function(e){var t=q();if(null===this.tInit)this.tInit=t,this.tLastArrivedSecond=t,this.bytesInSecond=e;else{var n=(t-this.tLastArrivedSecond)/1e3;if(n<1?this.bytesInSecond+=e:(this.bytesInSecond=e,this.tLastArrivedSecond=t),0==n&&(n=1),n>.5){var r=this.bytesInSecond/n||0;this.bandwidth=Math.floor(Math.max(r,this.bandwidth||0))||null,this.emit("estimate",{downloadSpeed:r,bandwidth:Math.floor(Math.max(this.downloadSpeed,this.bandwidth||0))||null})}}}}]),n}(m.EventEmitter),R=(n(127),n(48),n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(29),"moz-chunked-arraybuffer"),L=function(){function e(t,n,r){a()(this,e),this.netType=t,this.context=n,this.speedSampler=r}return s()(e,[{key:"destroy",value:function(){this.abort(),this.url=this.loader=this.stats=this.context=null}},{key:"_resetTimer",value:function(){clearTimeout(this._requestTimeout),clearTimeout(this._retryTimeout),this._requestTimeout=this._retryTimeout=null}},{key:"abort",value:function(){var e=this.stats,t=this.loader;this._resetTimer(),e&&(e.isTimeout?e.aborted=!1:e.aborted=!0),t&&4!==t.readyState?t.abort():this._onAbort(),e&&e.aborted&&this._onAbort()}},{key:"load",value:function(e){return this.url=e,this.stats={requestStartMark:null,retry:0,retryDelay:this.context.retryParameters.baseDelay,dump:!1},this._resetTimer(),this._doLoad()}},{key:"_doLoad",value:function(){var t=this.url,n=this.context,r=this.stats,i=this.netType,a=n.headers,o=this.loader=new XMLHttpRequest;if(r.requestStartMark=performance.now(),o.open(n.method,t,!0),n.retryParameters.timeout>0&&(this._requestTimeout=setTimeout(this._onTimeout.bind(this),n.retryParameters.timeout)),o.withCredentials=!!n.allowCrossSiteCredentials,o.onload=this._onLoad.bind(this),o.onprogress=this._onProgress.bind(this),a)if(a instanceof Headers)a.forEach?a.forEach((function(e,t){var n=t.toLowerCase();o.setRequestHeader(n,e)})):v.a.warn("Native Headers mismatch forEach");else for(var s in a){var c=s.toLowerCase();o.setRequestHeader(c,n.headers[s])}return o.responseType=n.responseType||"arraybuffer",i===b.a.SEGMENT&&"arraybuffer"===o.responseType&&e.isMozChunkedSupported()&&(o.responseType=R),o.send(n.body),this}},{key:"_retry",value:function(){var e=this.context,t=this.stats;t.isTimeout=!1,this._resetTimer(),this._retryTimeout=setTimeout(this._doLoad.bind(this),t.retryDelay),t.retryDelay=Math.min(2*t.retryDelay,e.retryParameters.maxRetryDelay),t.retry++}},{key:"_onLoad",value:function(e){var t=this.context,n=this.stats,r=this.url,i=e.currentTarget,a=i.status,o=t.callbacks;if(n.aborted)this._onAbort();else if(clearTimeout(this._requestTimeout),a>=200&&a<300){var s=i.response,c=performance.now()-n.requestStartMark,u=null;if(i.responseType===R&&(s=t.totalBuffer),o.onSuccess){(Object(I.k)(s)||Object(I.a)(s))&&(u=Number(s.byteLength/(c/1e3)),this.speedSampler.sample(s.byteLength));var d={netCost:c,speed:u,status:a,data:s,url:r};o.onSuccess(d,n,t)}this._onComplete(),n.dump=!0}else n.retry>=t.retryParameters.maxRetry||a>=400&&a<499?(n.isTimeout?o.onTimeout&&o.onTimeout(n,t,{status:a,url:r}):o.onError&&o.onError({status:a,response:i.response,url:r},t),this._onComplete()):this._retry()}},{key:"_onTimeout",value:function(){this.stats.isTimeout=!0,this.abort()}},{key:"_onProgress",value:function(t){var n,r=this.context,i=this.stats,a=(this.loader,r.callbacks);t.lengthComputable&&(i.loaded?(n=t.loaded-i.loaded,this.speedSampler.sample(n)):n=t.loaded,this.speedSampler.sample(n||0),i.loaded=t.loaded,i.total=t.total);if(a.onProgress&&this.netType===b.a.SEGMENT&&e.isMozChunkedSupported()){var o=t.target?t.target.response:null;if(o){var s=new Uint8Array(o),c=r.totalBuffer?new Uint8Array(r.totalBuffer):new Uint8Array(0),u=new Uint8Array(c.byteLength+s.byteLength);u.set(c,0),u.set(s,c.byteLength),r.totalBuffer=u.buffer}o&&((Object(I.k)(o)||Object(I.a)(o))&&this.speedSampler.sample(o.byteLength),a.onProgress(o,i),i.dump=!0)}}},{key:"_onAbort",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;t.onAbort&&t.onAbort(),this._onComplete()}}},{key:"_onComplete",value:function(){var e=this.context;if(e&&!e.completed){var t=e.callbacks;e.completed=!0,e.totalBuffer=null,this.speedSampler.reset(),this._resetTimer(),t.onComplete&&t.onComplete()}}}],[{key:"isMozChunkedSupported",value:function(){if("boolean"!=typeof D)if(/firefox/gi.test(navigator.userAgent.toLowerCase())){var e=new XMLHttpRequest;try{e.responseType=R}catch(t){}D=e.responseType===R}else D=!1;return D}}]),e}();function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var C=location.protocol;function N(e,t){return{uris:e,method:"GET",headers:new Headers,body:null,responseType:"arraybuffer",allowCrossSiteCredentials:!1,retryParameters:t,callbacks:{onSuccess:function(e){},onError:function(){},onTimeout:function(e,t,n){},onAbort:function(){},onComplete:function(){}}}}function B(){return w.isSupported()||L.isMozChunkedSupported()}function F(){return{maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0}}function U(e,t,n){n[e]={loader:t}}var j=function(e){u()(n,e);var t=M(n);function n(e){var r;return a()(this,n),(r=t.call(this)).schemes_={},r.krt_=e,r.speedSampler_=new O,w.isSupported()?(U("http",w,r.schemes_),U("https",w,r.schemes_)):(U("http",L,r.schemes_),U("https",L,r.schemes_)),r.speedSampler_.on("estimate",(function(t){e&&Object(_.a)(e.ctx.stats,t)})),r}return s()(n,[{key:"setRuntime",value:function(e){e&&(this.krt_=e)}},{key:"unsetRuntime",value:function(){this.krt_=null}},{key:"request",value:function(e,t){var n=this.krt_,r=this.schemes_,i=this.speedSampler_;t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=Object(_.a)({maxRetry:2,baseDelay:1e3,maxRetryDelay:8e3,timeout:0},t.retryParameters),t.uris=Object(_.a)({},t.uris);var a=new y.a(t.uris[0]),o=a.scheme,s=a.domain;if(o||(o=C.slice(0,-1),a.setScheme(o),t.uris[0]=a.toString()),e===b.a.SEGMENT&&n){if("http"===o&&/^https/gi.test(C))return v.a.warn("HTTP request in HTTPS Page: ".concat(a.toString())),void this.krt_.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_HTTPS_UNMATCHED_HTTP_SCHEME,a));n.ctx.stats.cdnHost=s,n.ctx.stats.netProtocol=o}var c=r[o],u=c?c.loader:null;if(!u&&n)return v.a.warn("Wrong with scheme ".concat(o,": ").concat(a.toString())),void n.throwError(new p.a(p.a.severity.CRITICAL,p.a.category.NETWORK,g.a.NET_UNSUPPORTED_SCHEME,a));var d=new u(e,t,i);return d.load(t.uris[0]),d}}]),n}(m.EventEmitter),V=new j},function(e,t,n){var r,i,a,o=n(231),s=n(24),c=n(39),u=n(88),d=n(76),l=n(162),f=n(173),h=n(148),p=s.WeakMap;if(o){var _=l.state||(l.state=new p),v=_.get,g=_.has,y=_.set;r=function(e,t){return t.facade=e,y.call(_,e,t),t},i=function(e){return v.call(_,e)||{}},a=function(e){return g.call(_,e)}}else{var m=f("state");h[m]=!0,r=function(e,t){return t.facade=e,u(e,m,t),t},i=function(e){return d(e,m)?e[m]:{}},a=function(e){return d(e,m)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(47),i=n(24),a=n(142),o=n(180),s=n(50).f,c=n(129).f,u=n(189),d=n(156),l=n(188),f=n(85),h=n(23),p=n(109).set,_=n(181),v=n(31)("match"),g=i.RegExp,y=g.prototype,m=/a/g,b=/a/g,k=new g(m)!==m,x=l.UNSUPPORTED_Y;if(r&&a("RegExp",!k||x||h((function(){return b[v]=!1,g(m)!=m||g(b)==b||"/a/i"!=g(m,"i")})))){for(var S=function(e,t){var n,r=this instanceof S,i=u(e),a=t===undefined;if(!r&&i&&e.constructor===S&&a)return e;k?i&&!a&&(e=e.source):e instanceof S&&(a&&(t=d.call(e)),e=e.source),x&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=o(k?new g(e,t):g(e,t),r?this:y,S);return x&&n&&p(s,{sticky:n}),s},T=function(e){e in S||s(S,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},P=c(g),I=0;P.length>I;)T(P[I++]);y.constructor=S,S.prototype=y,f(i,"RegExp",S)}_("RegExp")},function(e,t,n){var r=n(47),i=n(205),a=n(120),o=n(102),s=n(121),c=n(76),u=n(191),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=o(e),t=s(t,!0),u)try{return d(e,t)}catch(n){}if(c(e,t))return a(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(22),i=n(104).map;r({target:"Array",proto:!0,forced:!n(130)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n(43),n(17),n(107);var r,i=n(14),a="-1",o={get:function(){if(r)a=r.tryGetFingerPrint();else{if("-1"===a)try{a=i.a.get("__dfp")}catch(n){a=""}if(""!==a){var e=a.split("@"),t=(new Date).getTime();3==e.length&&Number(e[2])<=t&&t<=Number(e[1])&&(a=e[0])}}return a},setSDK:function(e){r=e}};t.a=o},function(e,t,n){"use strict";n(146),n(17),n(334),n(43),n(45),n(26),n(110),n(19);var r=function(e){var t="",n="",r="",i="",a=e.match(/(\w+):\/\/([^\/:]+):?(\d*)((?:\/|$)[^?#]*)/);return a&&(t=a[1],n=a[2],r=a[3],i=a[4]),{protocol:t,host:n,port:r,path:i}};t.a={parse:r,query:function(e,t){1===arguments.length&&(t=e,e=window.location.href);var n=String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1"),r=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)",""),i=e.match(r);return i?i[2]:""},query2Json:function(e){for(var t,n,r,i=e.substr(e.lastIndexOf("?")+1).split("&"),a=i.length,o={},s=0;s<a;s++)i[s]&&(t=(r=i[s].split("=")).shift(),n=r.join("="),void 0===o[t]&&(o[t]=n));return o},filename:function(e){var t=r(e);return(t&&t.path||"").replace(/^.*[\\\/]/,"").split(".")[0]}}},function(e,t,n){"use strict";var r=n(22),i=n(93),a=n(238),o=n(239),s=n(23),c=1..toFixed,u=Math.floor,d=function(e,t,n){return 0===t?n:t%2==1?d(e,t-1,n*e):d(e*e,t/2,n)},l=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=u(i/1e7)},f=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=u(r/t),r=r%t*1e7},h=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+o.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(e){var t,n,r,s,c=a(this),u=i(e),p=[0,0,0,0,0,0],_="",v="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(_="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*d(2,69,1))-69)<0?c*d(2,-t,1):c/d(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(p,0,n),r=u;r>=7;)l(p,1e7,0),r-=7;for(l(p,d(10,r,1),0),r=t-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),l(p,1,1),f(p,2),v=h(p)}else l(p,0,n),l(p,1<<-t,0),v=h(p)+o.call("0",u);return v=u>0?_+((s=v.length)<=u?"0."+o.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):_+v}})},function(e,t,n){"use strict";var r=n(23);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";t.a="5.2.28"},,function(e,t,n){var r=n(93),i=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):a(n,t)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(39);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r,i=n(35),a=n(212),o=n(163),s=n(148),c=n(208),u=n(174),d=n(173),l=d("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(i){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete p.prototype[o[n]];return p()};s[l]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[l]=e):n=p(),t===undefined?n:a(n,t)}},function(e,t,n){var r;(r=function(e,t,r){var i=n(359),a=null;r.exports={setEngine:function(e){a=e},cmd5xdash:i.cmd5xdash,cmd5x:function(){var e=a&&a.sbtr;e&&e.authkeyInvoking();var t=i.cmd5x.apply(i,arguments);return e&&e.authkeyInvoked(),t}}}.call(t,n,t,e))===undefined||(e.exports=r)},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,c,"next",e)}function c(e){n(o,i,a,s,c,"throw",e)}s(undefined)}))}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(22),i=n(234);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(e,t,n){var r=n(360),i=n(361),a=n(279),o=n(362);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(22),i=n(225);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){"use strict";n(25);var r=n(84),i={};t.a={generate:function(e){e=parseInt(e,10);var t=Object(r.a)(e+"IQIYI"+(new Date).getTime());return i[e]=t,t},getEpisodeId:function(e){var t;for(var n in i)if(i[n]===e){t=n;break}return parseInt(t,10)},getEventId:function(e){return i[e]||""}}},function(e,t,n){var r=n(192),i=n(163).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(23),i=n(31),a=n(165),o=i("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t){e.exports="\t\n\x0B\f\r  \u2028\u2029\ufeff"},function(e,t,n){"use strict";var r,i,a=n(156),o=n(188),s=RegExp.prototype.exec,c=String.prototype.replace,u=s,d=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=o.UNSUPPORTED_Y||o.BROKEN_CARET,f=/()??/.exec("")[1]!==undefined;(d||f||l)&&(u=function(e){var t,n,r,i,o=this,u=l&&o.sticky,h=a.call(o),p=o.source,_=0,v=e;return u&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),v=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,_++),n=new RegExp("^(?:"+p+")",h)),f&&(n=new RegExp("^"+p+"$(?!\\s)",h)),d&&(t=o.lastIndex),r=s.call(u?n:o,v),u?r?(r.input=r.input.slice(_),r[0]=r[0].slice(_),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:d&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),f&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)})),r}),e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l),h=n(94);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _=function(e){c()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"pipe",value:function(e){return this.on("reset",(function(){e.reset()})),this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),e}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(e){this.emit("data",e)}},{key:"flush",value:function(e){this.emit("done",e)}},{key:"reset",value:function(){this.emit("reset")}}]),n}(h.EventEmitter)},function(e,t,n){var r=n(23),i=n(100),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(103);e.exports=function(e,t,n){if(r(e),t===undefined)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=!1},function(e,t,n){var r=n(89),i="["+n(131)+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(35),i=n(103),a=n(31)("species");e.exports=function(e,t){var n,o=r(e).constructor;return o===undefined||(n=r(o)[a])==undefined?t:i(n)}},function(e,t,n){var r=n(85),i=Date.prototype,a="Invalid Date",o="toString",s=i.toString,c=i.getTime;new Date(NaN)+""!=a&&r(i,o,(function(){var e=c.call(this);return e==e?s.call(this):a}))},function(e,t,n){var r=n(22),i=n(336);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},,function(e,t,n){var r=n(23),i=/#|\.prototype\./,a=function(e,t){var n=s[o(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(100);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(121),i=n(50),a=n(120);e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,a(0,n)):e[o]=n}},function(e,t,n){"use strict";var r=n(22),i=n(103),a=n(81),o=n(23),s=n(116),c=[],u=c.sort,d=o((function(){c.sort(undefined)})),l=o((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:d||!l||!f},{sort:function(e){return e===undefined?u.call(a(this)):u.call(a(this),i(e))}})},function(e,t,n){"use strict";var r=n(149),i=n(35),a=n(44),o=n(89),s=n(166),c=n(150);r("match",1,(function(e,t,n){return[function(t){var n=o(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=i(e),u=String(this);if(!o.global)return c(o,u);var d=o.unicode;o.lastIndex=0;for(var l,f=[],h=0;null!==(l=c(o,u));){var p=String(l[0]);f[h]=p,""===p&&(o.lastIndex=s(u,a(o.lastIndex),d)),h++}return 0===h?null:f}]}))},function(e,t,n){n(22)({target:"Array",stat:!0},{isArray:n(143)})},function(e,t){e.exports={}},function(e,t,n){"use strict";n(17);var r=n(85),i=n(23),a=n(31),o=n(132),s=n(88),c=a("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d="$0"==="a".replace(/./,"$0"),l=a("replace"),f=!!/./[l]&&""===/./[l]("a","$0"),h=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var p=a(e),_=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=_&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!_||!v||"replace"===e&&(!u||!d||f)||"split"===e&&!h){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,i){return t.exec===o?_&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),m=y[0],b=y[1];r(String.prototype,e,m),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}l&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(100),i=n(132);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(22),i=n(104).filter;r({target:"Array",proto:!0,forced:!n(130)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return _})),n.d(t,"f",(function(){return v})),n.d(t,"l",(function(){return g}));var r=n(32),i=n.n(r),a=(n(147),n(153)),o=function(e){return/^https/gi.test(e||window.location.protocol)};var s=function(e){return!!e&&"object"==i()(e)},c=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a.a}(e.length)&&!h(e)},u=function(e){for(var t in e)if(Object(a.e)(e,t))return!1;return!0},d=(Array.isArray,function(e){return s(e)&&"[object arraybuffer]"===a.i.call(e).toLowerCase()}),l=function(e){return s(e)&&"[object uint8array]"===a.i.call(e).toLowerCase()},f=function(e){return"number"==typeof e&&!isNaN(e)},h=function(e){return"function"==typeof e},p=function(e){return"string"==typeof e},_=function(e){return null!==e&&"object"===i()(e)},v=function(e){return"[object map]"===a.i.call(e).toLowerCase()},g="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof importScripts},function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return p}));n(10),n(19),n(139),n(367);var r=Object.prototype,i=r.toString,a=Function.prototype.toString,o=a.call(Object),s=9007199254740991,c="[object Object]",u=r.hasOwnProperty,d=function(e,t){return u.call(e,t)};function l(e,t){if(e)for(var n in e)if(d(e,n)&&t(e[n],n,e))break}var f=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);function h(){return{}}function p(){}},,function(e,t,n){var r=n(50).f,i=n(76),a=n(31)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(35);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r={100:{nbid:100,value:"",qipu:"jisu",obid:96},200:{nbid:200,value:"",qipu:"300",obid:1},300:{nbid:300,value:"",qipu:"600",obid:2},400:{nbid:400,value:"",qipu:"1000",obid:3},500:{nbid:500,value:"720P",qipu:"720P",obid:4},600:{nbid:600,value:"1080P",qipu:"1080P",obid:5},601:{nbid:601,value:"HDR",qipu:"HDR",obid:51},610:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},700:{nbid:700,value:"2K",qipu:"2K",obid:6},800:{nbid:800,value:"4K",qipu:"4K",obid:10},96:{nbid:100,value:"",qipu:"jisu",obid:96},1:{nbid:200,value:"",qipu:"300",obid:1},2:{nbid:300,value:"",qipu:"600",obid:2},3:{nbid:400,value:"",qipu:"1000",obid:3},4:{nbid:500,value:"720P",qipu:"720P",obid:4},5:{nbid:600,value:"1080P",qipu:"1080P",obid:5},51:{nbid:601,value:"HDR",qipu:"HDR",obid:51},27:{nbid:610,value:"1080P50",qipu:"1080P50",obid:27},6:{nbid:700,value:"2K",qipu:"2K",obid:6},10:{nbid:800,value:"4K",qipu:"4K",obid:10}},i={getNewVd:function(e){return r[e]?r[e].nbid:""},getOldVd:function(e){return r[e]?r[e].obid:""}};t.a=i},function(e,t,n){var r=n(35),i=n(223);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(a){}return function(n,a){return r(n),i(a),t?e.call(n,a):n.__proto__=a,n}}():undefined)},function(e,t,n){var r=n(102),i=n(44),a=n(119),o=function(e){return function(t,n,o){var s,c=r(t),u=i(c.length),d=a(o,u);if(e&&n!=n){for(;u>d;)if((s=c[d++])!=s)return!0}else for(;u>d;d++)if((e||d in c)&&c[d]===n)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},,function(e,t,n){var r=n(24),i=n(88);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(24),i=n(161),a="__core-js_shared__",o=r[a]||i(a,{});e.exports=o},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(39),i=n(143),a=n(31)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[a])&&(n=undefined):n=undefined),new(n===undefined?Array:n)(0===t?0:t)}},function(e,t,n){var r,i,a=n(24),o=n(182),s=a.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){"use strict";var r=n(193).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r={};r[n(31)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(22),i=n(137).trim;r({target:"String",proto:!0,forced:n(240)("trim")},{trim:function(){return i(this)}})},function(e,t,n){n(22)({target:"Function",proto:!0},{bind:n(220)})},function(e,t,n){var r=n(167),i=n(100),a=n(31)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),a))?n:o?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},,function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){var r=n(186),i=n(172),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,n){var r=n(24),i=n(39),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,n){var r=n(162),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(192),i=n(163);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(22),i=n(81),a=n(176);r({target:"Object",stat:!0,forced:n(23)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,t){e.exports={}},function(e,t,n){var r=n(76),i=n(81),a=n(173),o=n(263),s=a("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(39),i=n(158);e.exports=function(e,t,n){var a,o;return i&&"function"==typeof(a=t.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(e,o),e}},function(e,t,n){"use strict";var r=n(105),i=n(50),a=n(31),o=n(47),s=a("species");e.exports=function(e){var t=r(e),n=i.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(105);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";n(82),n(25);var r=n(30),i={};t.a={get:function(e,t){var n=e.tvid,a=e.locale,o=n;if(i[o]=i[o]||[],i[o].push(t),n&&t){var s="//pcw-api.iqiyi.com/video/video/playervideoinfo?tvid="+n;s=a?s+"&locale="+a:s,r.a.jsonp({url:s,memory:!0,success:function(e){"A00000"===e.code&&e.data||t({});var n=(e=e.data).tvid,r=e.videoQipuId,a=[];i[n]?(a=(i[n]||[]).slice(0),delete i[n]):i[r]&&(a=(i[r]||[]).slice(0),delete i[r]);for(var o=0;o<a.length;o++)a[o]&&function(e,t){setTimeout((function(){e({tvid:t.videoQipuId,vid:t.vid,albumId:t.albumId,cid:t.cid,vi:t,sid:t.sid,cType:t.cType})}),0)}(a[o],e);a=null},failure:function(e){t(e||{})}})}},isUGC:function(e){return!!((e+="")&&e.length>2&&"9"==e.charAt(e.length-1)&&"0"==e.charAt(e.length-2)&&(e=parseInt(e,10))>0&&e>9e7)}}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(105),o=n(136),s=n(47),c=n(187),u=n(222),d=n(23),l=n(76),f=n(143),h=n(39),p=n(35),_=n(81),v=n(102),g=n(121),y=n(120),m=n(122),b=n(176),k=n(129),x=n(559),S=n(207),T=n(111),P=n(50),I=n(205),w=n(88),A=n(85),E=n(186),D=n(173),q=n(148),O=n(172),R=n(31),L=n(388),M=n(389),C=n(155),N=n(109),B=n(104).forEach,F=D("hidden"),U="Symbol",j=R("toPrimitive"),V=N.set,W=N.getterFor(U),H=Object.prototype,z=i.Symbol,Y=a("JSON","stringify"),G=T.f,Q=P.f,K=x.f,$=I.f,Z=E("symbols"),X=E("op-symbols"),J=E("string-to-symbol-registry"),ee=E("symbol-to-string-registry"),te=E("wks"),ne=i.QObject,re=!ne||!ne.prototype||!ne.prototype.findChild,ie=s&&d((function(){return 7!=m(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=G(H,t);r&&delete H[t],Q(e,t,n),r&&e!==H&&Q(H,t,r)}:Q,ae=function(e,t){var n=Z[e]=m(z.prototype);return V(n,{type:U,tag:e,description:t}),s||(n.description=t),n},oe=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},se=function(e,t,n){e===H&&se(X,t,n),p(e);var r=g(t,!0);return p(n),l(Z,r)?(n.enumerable?(l(e,F)&&e[F][r]&&(e[F][r]=!1),n=m(n,{enumerable:y(0,!1)})):(l(e,F)||Q(e,F,y(1,{})),e[F][r]=!0),ie(e,r,n)):Q(e,r,n)},ce=function(e,t){p(e);var n=v(t),r=b(n).concat(fe(n));return B(r,(function(t){s&&!ue.call(n,t)||se(e,t,n[t])})),e},ue=function(e){var t=g(e,!0),n=$.call(this,t);return!(this===H&&l(Z,t)&&!l(X,t))&&(!(n||!l(this,t)||!l(Z,t)||l(this,F)&&this[F][t])||n)},de=function(e,t){var n=v(e),r=g(t,!0);if(n!==H||!l(Z,r)||l(X,r)){var i=G(n,r);return!i||!l(Z,r)||l(n,F)&&n[F][r]||(i.enumerable=!0),i}},le=function(e){var t=K(v(e)),n=[];return B(t,(function(e){l(Z,e)||l(q,e)||n.push(e)})),n},fe=function(e){var t=e===H,n=K(t?X:v(e)),r=[];return B(n,(function(e){!l(Z,e)||t&&!l(H,e)||r.push(Z[e])})),r};(c||(A((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&arguments[0]!==undefined?String(arguments[0]):undefined,t=O(e),n=function(e){this===H&&n.call(X,e),l(this,F)&&l(this[F],t)&&(this[F][t]=!1),ie(this,t,y(1,e))};return s&&re&&ie(H,t,{configurable:!0,set:n}),ae(t,e)}).prototype,"toString",(function(){return W(this).tag})),A(z,"withoutSetter",(function(e){return ae(O(e),e)})),I.f=ue,P.f=se,T.f=de,k.f=x.f=le,S.f=fe,L.f=function(e){return ae(R(e),e)},s&&(Q(z.prototype,"description",{configurable:!0,get:function(){return W(this).description}}),o||A(H,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),B(b(te),(function(e){M(e)})),r({target:U,stat:!0,forced:!c},{"for":function(e){var t=String(e);if(l(J,t))return J[t];var n=z(t);return J[t]=n,ee[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(l(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return t===undefined?m(e):ce(m(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:fe}),r({target:"Object",stat:!0,forced:d((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(_(e))}}),Y)&&r({target:"JSON",stat:!0,forced:!c||d((function(){var e=z();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],a=1;arguments.length>a;)i.push(arguments[a++]);if(r=t,(h(t)||e!==undefined)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,Y.apply(null,i)}});z.prototype[j]||w(z.prototype,j,z.prototype.valueOf),C(z,U),q[F]=!0},function(e,t,n){var r=n(136),i=n(162);(e.exports=function(e,t){return i[e]||(i[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.9.0",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(23);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";var r=n(23);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(39),i=n(100),a=n(31)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(31),i=n(122),a=n(50),o=r("unscopables"),s=Array.prototype;s[o]==undefined&&a.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,n){var r=n(47),i=n(23),a=n(174);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(76),i=n(102),a=n(159).indexOf,o=n(148);e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(o,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){var r=n(93),i=n(89),a=function(e){return function(t,n){var a,o,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":undefined:(a=s.charCodeAt(c))<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):a:e?s.slice(c,c+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},function(e,t,n){var r=n(22),i=n(335);r({target:"Array",stat:!0,forced:!n(230)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){"use strict";var r=n(22),i=n(159).includes,a=n(190);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}}),a("includes")},function(e,t,n){"use strict";var r=n(22),i=n(369),a=n(89);r({target:"String",proto:!0,forced:!n(370)("includes")},{includes:function(e){return!!~String(a(this)).indexOf(i(e),arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){var r=n(170),i=n(178),a=n(31)("iterator");e.exports=function(e){if(e!=undefined)return e[a]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(22),i=n(47),a=n(24),o=n(76),s=n(39),c=n(50).f,u=n(219),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||d().description!==undefined)){var l={},f=function(){var e=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]),t=this instanceof f?new d(e):e===undefined?d():d(e);return""===e&&(l[t]=!0),t};u(f,d);var h=f.prototype=d.prototype;h.constructor=f;var p=h.toString,_="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(l,e))return"";var n=_?t.slice(7,-1):t.replace(v,"$1");return""===n?undefined:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(389)("iterator")},function(e,t,n){var r=n(100),i=n(24);e.exports="process"==r(i.process)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DEPOSIT_ERROR="DEPOSIT_ERROR",e.UPDATE_TIME_RANGES="UPDATE_TIME_RANGES",e.DEPOSIT_RAWNESS="DEPOSIT_RAWNESS",e.DEPOSIT_MANIFEST="DEPOSIT_MANIFEST",e.DEPOSIT_LOADER="DEPOSIT_LOADER",e.DEPOSIT_MUX="DEPOSIT_MUX",e.DEPOSIT_RENDERER="DEPOSIT_RENDERER",e.DEPOSIT_AUDIO="DEPOSIT_AUDIO"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(153);function i(e,t){var n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],a=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return t&&Object(r.b)(t,(function(t,o){!n&&Object(r.e)(e,o)||(a&&"string"!=typeof t&&"boolean"!=typeof t?(e[o]||(e[o]={}),i(e[o],t,n,a)):e[o]=t)})),e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(47),i=n(50).f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in a)&&i(a,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);t.f=a?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(24);e.exports=r},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(105);e.exports=r("document","documentElement")},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(246),i=n(289);function a(e,t,n,o){return(a="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,a){var o,s=r(e,t);if(s){if((o=Object.getOwnPropertyDescriptor(s,t)).set)return o.set.call(a,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(a,t)){if(!o.writable)return!1;o.value=n,Object.defineProperty(a,t,o)}else i(a,t,n);return!0})(e,t,n,o)}e.exports=function(e,t,n,r,i){if(!a(e,t,n,r||e)&&i)throw new Error("failed to set property");return n},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(105),i=n(129),a=n(207),o=n(35);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(47),i=n(50),a=n(35),o=n(176);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-poster{position:absolute;width:100%;height:100%;top:0;background-size:contain;background-position:50%;background-repeat:no-repeat}",""])},,,,function(e,t,n){var r=n(85);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},,function(e,t,n){var r=n(76),i=n(211),a=n(111),o=n(50);e.exports=function(e,t){for(var n=i(t),s=o.f,c=a.f,u=0;u<n.length;u++){var d=n[u];r(e,d)||s(e,d,c(t,d))}}},function(e,t,n){"use strict";var r=n(103),i=n(39),a=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";o[t]=Function("C,a","return new C("+r.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports["default"]=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(187);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(39);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(22),i=n(23),a=n(102),o=n(111).f,s=n(47),c=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},function(e,t,n){"use strict";var r=n(104).forEach,i=n(116)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:undefined)}},function(e,t,n){var r=n(22),i=n(47);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(50).f})},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2),i=n.n(r),a=function o(){i()(this,o)};a.ERROR="Error",a.PRE_ERROR="PreError",a.TIMELINE_SWITCHING="DataStageSwitching",a.TIMELINE_SWITCHED="DataStageSwitched",a.STATE_CHANGE="StateChange"},function(e,t,n){var r=n(31),i=n(178),a=r("iterator"),o=Array.prototype;e.exports=function(e){return e!==undefined&&(i.Array===e||o[a]===e)}},function(e,t,n){var r=n(31)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},"return":function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(s){}return n}},function(e,t,n){var r=n(24),i=n(175),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(i(a))},function(e,t,n){var r=n(24),i=n(137).trim,a=n(131),o=r.parseInt,s=/^[+-]?0[Xx]/,c=8!==o(a+"08")||22!==o(a+"0x16");e.exports=c?function(e,t){var n=i(String(e));return o(n,t>>>0||(s.test(n)?16:10))}:o},function(e,t,n){var r=n(81),i=Math.floor,a="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,c,u,d){var l=n+e.length,f=c.length,h=s;return u!==undefined&&(u=r(u),h=o),a.call(d,h,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":o=u[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>f){var d=i(s/10);return 0===d?r:d<=f?c[d-1]===undefined?a.charAt(1):c[d-1]+a.charAt(1):r}o=c[s-1]}return o===undefined?"":o}))}},function(e,t,n){var r=n(24),i=n(137).trim,a=n(131),o=r.parseFloat,s=1/o(a+"-0")!=-Infinity;e.exports=s?function(e){var t=i(String(e)),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},function(e,t,n){"use strict";var r=n(390),i=n(393);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){"use strict";var r=n(22),i=n(262),a=n(179),o=n(158),s=n(155),c=n(88),u=n(85),d=n(31),l=n(136),f=n(178),h=n(247),p=h.IteratorPrototype,_=h.BUGGY_SAFARI_ITERATORS,v=d("iterator"),g="keys",y="values",m="entries",b=function(){return this};e.exports=function(e,t,n,d,h,k,x){i(n,t,d);var S,T,P,I=function(e){if(e===h&&q)return q;if(!_&&e in E)return E[e];switch(e){case g:case y:case m:return function(){return new n(this,e)}}return function(){return new n(this)}},w=t+" Iterator",A=!1,E=e.prototype,D=E[v]||E["@@iterator"]||h&&E[h],q=!_&&D||I(h),O="Array"==t&&E.entries||D;if(O&&(S=a(O.call(new e)),p!==Object.prototype&&S.next&&(l||a(S)===p||(o?o(S,p):"function"!=typeof S[v]&&c(S,v,b)),s(S,w,!0,!0),l&&(f[w]=b))),h==y&&D&&D.name!==y&&(A=!0,q=function(){return D.call(this)}),l&&!x||E[v]===q||c(E,v,q),f[t]=q,h)if(T={values:I(y),keys:k?q:I(g),entries:I(m)},x)for(P in T)(_||A||!(P in E))&&u(E,P,T[P]);else r({target:t,proto:!0,forced:_||A},T);return T}},function(e,t,n){"use strict";var r=n(167),i=n(170);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(100);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var r=n(93),i=n(89);e.exports="".repeat||function(e){var t=String(i(this)),n="",a=r(e);if(a<0||a==Infinity)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t,n){var r=n(23),i=n(131);e.exports=function(e){return r((function(){return!!i[e]()||" "!=" "[e]()||i[e].name!==e}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(25);function r(e){var t=parseInt(e,10);return t<9e7&&(t=100*(t+9e5)),t}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.MANIFEST=0]="MANIFEST",e[e.DISPATCH=1]="DISPATCH",e[e.SEGMENT=2]="SEGMENT",e[e.LICENSE=3]="LICENSE",e[e.APP=4]="APP"}(r||(r={}))},function(e,t,n){var r,i,a,o,s;r=n(581),i=n(407).utf8,a=n(582),o=n(407).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,d=-271733879,l=-1732584194,f=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var p=s._ff,_=s._gg,v=s._hh,g=s._ii;for(h=0;h<n.length;h+=16){var y=u,m=d,b=l,k=f;u=p(u,d,l,f,n[h+0],7,-680876936),f=p(f,u,d,l,n[h+1],12,-389564586),l=p(l,f,u,d,n[h+2],17,606105819),d=p(d,l,f,u,n[h+3],22,-1044525330),u=p(u,d,l,f,n[h+4],7,-176418897),f=p(f,u,d,l,n[h+5],12,1200080426),l=p(l,f,u,d,n[h+6],17,-1473231341),d=p(d,l,f,u,n[h+7],22,-45705983),u=p(u,d,l,f,n[h+8],7,1770035416),f=p(f,u,d,l,n[h+9],12,-1958414417),l=p(l,f,u,d,n[h+10],17,-42063),d=p(d,l,f,u,n[h+11],22,-1990404162),u=p(u,d,l,f,n[h+12],7,1804603682),f=p(f,u,d,l,n[h+13],12,-40341101),l=p(l,f,u,d,n[h+14],17,-1502002290),u=_(u,d=p(d,l,f,u,n[h+15],22,1236535329),l,f,n[h+1],5,-165796510),f=_(f,u,d,l,n[h+6],9,-1069501632),l=_(l,f,u,d,n[h+11],14,643717713),d=_(d,l,f,u,n[h+0],20,-373897302),u=_(u,d,l,f,n[h+5],5,-701558691),f=_(f,u,d,l,n[h+10],9,38016083),l=_(l,f,u,d,n[h+15],14,-660478335),d=_(d,l,f,u,n[h+4],20,-405537848),u=_(u,d,l,f,n[h+9],5,568446438),f=_(f,u,d,l,n[h+14],9,-1019803690),l=_(l,f,u,d,n[h+3],14,-187363961),d=_(d,l,f,u,n[h+8],20,1163531501),u=_(u,d,l,f,n[h+13],5,-1444681467),f=_(f,u,d,l,n[h+2],9,-51403784),l=_(l,f,u,d,n[h+7],14,1735328473),u=v(u,d=_(d,l,f,u,n[h+12],20,-1926607734),l,f,n[h+5],4,-378558),f=v(f,u,d,l,n[h+8],11,-2022574463),l=v(l,f,u,d,n[h+11],16,1839030562),d=v(d,l,f,u,n[h+14],23,-35309556),u=v(u,d,l,f,n[h+1],4,-1530992060),f=v(f,u,d,l,n[h+4],11,1272893353),l=v(l,f,u,d,n[h+7],16,-155497632),d=v(d,l,f,u,n[h+10],23,-1094730640),u=v(u,d,l,f,n[h+13],4,681279174),f=v(f,u,d,l,n[h+0],11,-358537222),l=v(l,f,u,d,n[h+3],16,-722521979),d=v(d,l,f,u,n[h+6],23,76029189),u=v(u,d,l,f,n[h+9],4,-640364487),f=v(f,u,d,l,n[h+12],11,-421815835),l=v(l,f,u,d,n[h+15],16,530742520),u=g(u,d=v(d,l,f,u,n[h+2],23,-995338651),l,f,n[h+0],6,-198630844),f=g(f,u,d,l,n[h+7],10,1126891415),l=g(l,f,u,d,n[h+14],15,-1416354905),d=g(d,l,f,u,n[h+5],21,-57434055),u=g(u,d,l,f,n[h+12],6,1700485571),f=g(f,u,d,l,n[h+3],10,-1894986606),l=g(l,f,u,d,n[h+10],15,-1051523),d=g(d,l,f,u,n[h+1],21,-2054922799),u=g(u,d,l,f,n[h+8],6,1873313359),f=g(f,u,d,l,n[h+15],10,-30611744),l=g(l,f,u,d,n[h+6],15,-1560198380),d=g(d,l,f,u,n[h+13],21,1309151649),u=g(u,d,l,f,n[h+4],6,-145523070),f=g(f,u,d,l,n[h+11],10,-1120210379),l=g(l,f,u,d,n[h+2],15,718787259),d=g(d,l,f,u,n[h+9],21,-343485551),u=u+y>>>0,d=d+m>>>0,l=l+b>>>0,f=f+k>>>0}return r.endian([u,d,l,f])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(e===undefined||null===e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},function(e,t,n){"use strict";var r=n(81),i=n(119),a=n(44);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:undefined,n),c=o>2?arguments[2]:undefined,u=c===undefined?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";n(97);var r,i=n(22),a=n(47),o=n(288),s=n(24),c=n(212),u=n(85),d=n(184),l=n(76),f=n(336),h=n(335),p=n(193).codeAt,_=n(371),v=n(155),g=n(372),y=n(109),m=s.URL,b=g.URLSearchParams,k=g.getState,x=y.set,S=y.getterFor("URL"),T=Math.floor,P=Math.pow,I="Invalid scheme",w="Invalid host",A="Invalid port",E=/[A-Za-z]/,D=/[\d+-.A-Za-z]/,q=/\d/,O=/^(0x|0X)/,R=/^[0-7]+$/,L=/^\d+$/,M=/^[\dA-Fa-f]+$/,C=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,N=/[\u0000\t\u000A\u000D #/:?@[\\]]/,B=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\t\u000A\u000D]/g,U=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return w;if(!(n=V(t.slice(1,-1))))return w;e.host=n}else if($(e)){if(t=_(t),C.test(t))return w;if(null===(n=j(t)))return w;e.host=n}else{if(N.test(t))return w;for(n="",r=h(t),i=0;i<r.length;i++)n+=Q(r[i],H);e.host=n}},j=function(e){var t,n,r,i,a,o,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(a=10,i.length>1&&"0"==i.charAt(0)&&(a=O.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)o=0;else{if(!(10==a?L:8==a?R:M).test(i))return e;o=parseInt(i,a)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=P(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*P(256,3-r);return s},V=function(e){var t,n,r,i,a,o,s,c=[0,0,0,0,0,0,0,0],u=0,d=null,l=0,f=function(){return e.charAt(l)};if(":"==f()){if(":"!=e.charAt(1))return;l+=2,d=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&M.test(f());)t=16*t+parseInt(f(),16),l++,n++;if("."==f()){if(0==n)return;if(l-=n,u>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;l++}if(!q.test(f()))return;for(;q.test(f());){if(a=parseInt(f(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;c[u++]=t}else{if(null!==d)return;l++,d=++u}}if(null!==d)for(o=u-d,u=7;0!=u&&o>0;)s=c[u],c[u--]=c[d+o-1],c[d+--o]=s;else if(8!=u)return;return c},W=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=T(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},H={},z=f({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},z,{"#":1,"?":1,"{":1,"}":1}),G=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Q=function(e,t){var n=p(e,0);return n>32&&n<127&&!l(t,e)?e:encodeURIComponent(e)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(e){return l(K,e.scheme)},Z=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},J=function(e,t){var n;return 2==e.length&&E.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ee=function(e){var t;return e.length>1&&J(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},te=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&J(t[0],!0)||t.pop()},ne=function(e){return"."===e||"%2e"===e.toLowerCase()},re={},ie={},ae={},oe={},se={},ce={},ue={},de={},le={},fe={},he={},pe={},_e={},ve={},ge={},ye={},me={},be={},ke={},xe={},Se={},Te=function(e,t,n,i){var a,o,s,c,u,d=n||re,f=0,p="",_=!1,v=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(B,"")),t=t.replace(F,""),a=h(t);f<=a.length;){switch(o=a[f],d){case re:if(!o||!E.test(o)){if(n)return I;d=ae;continue}p+=o.toLowerCase(),d=ie;break;case ie:if(o&&(D.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(n)return I;p="",d=ae,f=0;continue}if(n&&($(e)!=l(K,p)||"file"==p&&(Z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void($(e)&&K[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?d=ve:$(e)&&i&&i.scheme==e.scheme?d=oe:$(e)?d=de:"/"==a[f+1]?(d=se,f++):(e.cannotBeABaseURL=!0,e.path.push(""),d=ke)}break;case ae:if(!i||i.cannotBeABaseURL&&"#"!=o)return I;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,d=Se;break}d="file"==i.scheme?ve:ce;continue;case oe:if("/"!=o||"/"!=a[f+1]){d=ce;continue}d=le,f++;break;case se:if("/"==o){d=fe;break}d=be;continue;case ce:if(e.scheme=i.scheme,o==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&$(e))d=ue;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",d=xe;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),d=be;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Se}break;case ue:if(!$(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,d=be;continue}d=fe}else d=le;break;case de:if(d=le,"/"!=o||"/"!=p.charAt(f+1))continue;f++;break;case le:if("/"!=o&&"\\"!=o){d=fe;continue}break;case fe:if("@"==o){_&&(p="%40"+p),_=!0,s=h(p);for(var y=0;y<s.length;y++){var m=s[y];if(":"!=m||g){var b=Q(m,G);g?e.password+=b:e.username+=b}else g=!0}p=""}else if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)){if(_&&""==p)return"Invalid authority";f-=h(p).length+1,p="",d=he}else p+=o;break;case he:case pe:if(n&&"file"==e.scheme){d=ye;continue}if(":"!=o||v){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)){if($(e)&&""==p)return w;if(n&&""==p&&(Z(e)||null!==e.port))return;if(c=U(e,p))return c;if(p="",d=me,n)return;continue}"["==o?v=!0:"]"==o&&(v=!1),p+=o}else{if(""==p)return w;if(c=U(e,p))return c;if(p="",d=_e,n==pe)return}break;case _e:if(!q.test(o)){if(o==r||"/"==o||"?"==o||"#"==o||"\\"==o&&$(e)||n){if(""!=p){var k=parseInt(p,10);if(k>65535)return A;e.port=$(e)&&k===K[e.scheme]?null:k,p=""}if(n)return;d=me;continue}return A}p+=o;break;case ve:if(e.scheme="file","/"==o||"\\"==o)d=ge;else{if(!i||"file"!=i.scheme){d=be;continue}if(o==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",d=xe;else{if("#"!=o){ee(a.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),te(e)),d=be;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Se}}break;case ge:if("/"==o||"\\"==o){d=ye;break}i&&"file"==i.scheme&&!ee(a.slice(f).join(""))&&(J(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),d=be;continue;case ye:if(o==r||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&J(p))d=be;else if(""==p){if(e.host="",n)return;d=me}else{if(c=U(e,p))return c;if("localhost"==e.host&&(e.host=""),n)return;p="",d=me}continue}p+=o;break;case me:if($(e)){if(d=be,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=r&&(d=be,"/"!=o))continue}else e.fragment="",d=Se;else e.query="",d=xe;break;case be:if(o==r||"/"==o||"\\"==o&&$(e)||!n&&("?"==o||"#"==o)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(te(e),"/"==o||"\\"==o&&$(e)||e.path.push("")):ne(p)?"/"==o||"\\"==o&&$(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&J(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(o==r||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",d=xe):"#"==o&&(e.fragment="",d=Se)}else p+=Q(o,Y);break;case ke:"?"==o?(e.query="",d=xe):"#"==o?(e.fragment="",d=Se):o!=r&&(e.path[0]+=Q(o,H));break;case xe:n||"#"!=o?o!=r&&("'"==o&&$(e)?e.query+="%27":e.query+="#"==o?"%23":Q(o,H)):(e.fragment="",d=Se);break;case Se:o!=r&&(e.fragment+=Q(o,z))}f++}},Pe=function(e){var t,n,r=d(this,Pe,"URL"),i=arguments.length>1?arguments[1]:undefined,o=String(e),s=x(r,{type:"URL"});if(i!==undefined)if(i instanceof Pe)t=S(i);else if(n=Te(t={},String(i)))throw TypeError(n);if(n=Te(s,o,null,t))throw TypeError(n);var c=s.searchParams=new b,u=k(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},a||(r.href=we.call(r),r.origin=Ae.call(r),r.protocol=Ee.call(r),r.username=De.call(r),r.password=qe.call(r),r.host=Oe.call(r),r.hostname=Re.call(r),r.port=Le.call(r),r.pathname=Me.call(r),r.search=Ce.call(r),r.searchParams=Ne.call(r),r.hash=Be.call(r))},Ie=Pe.prototype,we=function(){var e=S(this),t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",Z(e)&&(u+=n+(r?":"+r:"")+"@"),u+=W(i),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Ae=function(){var e=S(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(r){return"null"}return"file"!=t&&$(e)?t+"://"+W(e.host)+(null!==n?":"+n:""):"null"},Ee=function(){return S(this).scheme+":"},De=function(){return S(this).username},qe=function(){return S(this).password},Oe=function(){var e=S(this),t=e.host,n=e.port;return null===t?"":null===n?W(t):W(t)+":"+n},Re=function(){var e=S(this).host;return null===e?"":W(e)},Le=function(){var e=S(this).port;return null===e?"":String(e)},Me=function(){var e=S(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ce=function(){var e=S(this).query;return e?"?"+e:""},Ne=function(){return S(this).searchParams},Be=function(){var e=S(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(a&&c(Ie,{href:Fe(we,(function(e){var t=S(this),n=String(e),r=Te(t,n);if(r)throw TypeError(r);k(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ae),protocol:Fe(Ee,(function(e){var t=S(this);Te(t,String(e)+":",re)})),username:Fe(De,(function(e){var t=S(this),n=h(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Q(n[r],G)}})),password:Fe(qe,(function(e){var t=S(this),n=h(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Q(n[r],G)}})),host:Fe(Oe,(function(e){var t=S(this);t.cannotBeABaseURL||Te(t,String(e),he)})),hostname:Fe(Re,(function(e){var t=S(this);t.cannotBeABaseURL||Te(t,String(e),pe)})),port:Fe(Le,(function(e){var t=S(this);X(t)||(""==(e=String(e))?t.port=null:Te(t,e,_e))})),pathname:Fe(Me,(function(e){var t=S(this);t.cannotBeABaseURL||(t.path=[],Te(t,e+"",me))})),search:Fe(Ce,(function(e){var t=S(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Te(t,e,xe)),k(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(Ne),hash:Fe(Be,(function(e){var t=S(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Te(t,e,Se)):t.fragment=null}))}),u(Ie,"toJSON",(function(){return we.call(this)}),{enumerable:!0}),u(Ie,"toString",(function(){return we.call(this)}),{enumerable:!0}),m){var Ue=m.createObjectURL,je=m.revokeObjectURL;Ue&&u(Pe,"createObjectURL",(function(e){return Ue.apply(m,arguments)})),je&&u(Pe,"revokeObjectURL",(function(e){return je.apply(m,arguments)}))}v(Pe,"URL"),i({global:!0,forced:!o,sham:!a},{URL:Pe})},function(e,t,n){var r=n(1);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r,i,a,o=n(23),s=n(179),c=n(88),u=n(76),d=n(31),l=n(136),f=d("iterator"),h=!1;[].keys&&("next"in(a=[].keys())?(i=s(s(a)))!==Object.prototype&&(r=i):h=!0);var p=r==undefined||o((function(){var e={};return r[f].call(e)!==e}));p&&(r={}),l&&!p||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(e,t,n){var r,i,a,o=n(24),s=n(23),c=n(135),u=n(208),d=n(174),l=n(249),f=n(200),h=o.location,p=o.setImmediate,_=o.clearImmediate,v=o.process,g=o.MessageChannel,y=o.Dispatch,m=0,b={},k="onreadystatechange",x=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},S=function(e){return function(){x(e)}},T=function(e){x(e.data)},P=function(e){o.postMessage(e+"",h.protocol+"//"+h.host)};p&&_||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++m]=function(){("function"==typeof e?e:Function(e)).apply(undefined,t)},r(m),m},_=function(e){delete b[e]},f?r=function(e){v.nextTick(S(e))}:y&&y.now?r=function(e){y.now(S(e))}:g&&!l?(a=(i=new g).port2,i.port1.onmessage=T,r=c(a.postMessage,a,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&h&&"file:"!==h.protocol&&!s(P)?(r=P,o.addEventListener("message",T,!1)):r=k in d("script")?function(e){u.appendChild(d("script")).onreadystatechange=function(){u.removeChild(this),x(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:p,clear:_}},function(e,t,n){var r=n(182);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(103),i=function(e){var t,n;this.promise=new e((function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(42),d=n.n(u),l=n(4),f=n.n(l),h=n(5),p=n.n(h),_=n(1),v=n.n(_),g=(n(43),n(17),n(27),n(127),n(48),n(377)),y=n(594),m=n(228),b=n(341),k=n(201);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}function S(e){var t=e.toUpperCase(),n=null;for(var r in k.a){var i=r.split("_"),a=i[0],o=i[1];if("DEPOSIT"===a&&o===t){n=k.a[r];break}}return n}var T=function(e){f()(n,e);var t=x(n);function n(e){var r;i()(this,n),(r=t.call(this,{ctx:e.runtime.ctx})).$TAG="~",r.$error=null,r.silenced=!1,r.watchingKeys=[],r.watchingCallbacks=[],r.stateSlice=null,r.$watch=function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=c()(r),i=n.watchingCallbacks;t?i.unshift(e):i.push(e)},r.$throwError=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=c()(r),i=n.$stream;if(!r.$error&&e&&(r.$error=e),t.immediately){var a=i.error;a&&i.emit(m.a.ERROR,{stream:i,error:a})}};var a=e.store,o=e.watch,s=(e.pkg,e.runtime),u=e.uuid,d=e.stream,l=e.ipc,f=e.hoc;return r.watchingKeys=Object(g.a)(o),r.$store=a,r.$krt=s,r.$ipc=l,r.$stream=d,r.streamUuid=u,r.$initStateSlice(),r.$subscribeStore(),r.$watch((function(e){r.onStoreStateChanged&&Object(b.a)((function(){r.onStoreStateChanged(e)}))}),f),r}return o()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.$TAG).concat(this.silenced?"(silence)":"","]")}},{key:"$silenced",get:function(){return this.silenced},set:function(e){this.silenced=e}},{key:"$provideArtefact",value:function(e){e&&this.$store.dispatch({type:this.$ARTEFACT_ACTION,payload:e,meta:{stream_uid:this.streamUuid}})}},{key:"$consumeArtefact",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.$store.dispatch({type:S(e),payload:t?undefined:{},meta:{stream_uid:this.streamUuid}})}},{key:"$queryArtefact",value:function(e){return this.$store.getState()[e]}},{key:"$initStateSlice",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this.$store,r=this.watchingKeys,i=this.streamUuid,a=n.getState(),o={};return r.forEach((function(n){o[n]=a[n][i]||(!0!==t&&e.stateSlice?e.stateSlice[n]:{})||{}})),this.stateSlice=o,o}},{key:"$drainBuffer",value:function(e){var t=this.$ARTEFACT_ACTION.split("_")[1].toLowerCase();this.$selfArtifact=null,this.$consumeArtefact(t,!!e&&e.delInStream)}},{key:"recoverAt",value:function(e){this.$error=null}},{key:"$subscribeStore",value:function(){var e=this,t=this.$store,n=this.streamUuid;this.$unSubscribeStore(),this.unsubscribe=t.subscribe((function(){var r=e.watchingKeys,i=e.watchingCallbacks,a=e.stateSlice,o=t.getState(),s=!1;if(a)for(var c,u=0;u<r.length;u++){var d=o[c=r[u]][n],l=a[c];if(d&&l!==d){s=!0;break}}else s=!0;s&&i.forEach((function(t){t(e.$initStateSlice())}))}))}},{key:"$unSubscribeStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"destroy",value:function(){d()(v()(n.prototype),"destroy",this).call(this),this.$error=undefined,this.streamUuid=undefined,this.stateSlice=undefined,this.$selfArtifact=undefined,this.$unSubscribeStore()}}]),n}(y.a)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="undefined"==typeof window?self:window},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return D}));n(9);var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(5),c=n.n(s),u=n(1),d=n.n(u),l=n(3),f=n.n(l),h=(n(27),n(51)),p=n(607),_=n(94),v=n(340),g=n(328),y=n(608),m=n(609);n(140);var b=n(610);var k=new b.a;function x(e,t,n,r){var i,a,o=e.payload;if(t&&Object(m.a)(e))for(t===n&&(a=y.a.readUEV(o,e.offset),Object(m.d)(e,a.bitLength)),Object(m.d)(e,1),a=y.a.readUEV(o,e.offset),Object(m.d)(e,a.bitLength),r[t]=0,i=0;i<=r[t-1];i++){var s=0,c=Object(m.a)(e);c||(s=Object(m.a)(e)),(c||s)&&r[t]++}else{var u=y.a.readUEV(o,e.offset);Object(m.d)(e,u.bitLength);var d=y.a.readUEV(o,e.offset);for(Object(m.d)(e,d.bitLength),i=0;i<u.value;i++)Object(m.d)(e,y.a.readUEV(o,e.offset).bitLength),Object(m.d)(e,1);for(i=0;i<d.value;i++)Object(m.d)(e,y.a.readUEV(o,e.offset).bitLength),Object(m.d)(e,1)}}function S(e,t,n){var r,i;for(r=0;r<=t;r++)i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength),i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength),n&&(i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength),i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength)),Object(m.d)(e,1)}function T(e){var t,n,r,i=Object(m.c)(e),a=i.payload,o=[1,1],s=1,c=0,u=new Array(64),d=(14&a[0])>>1;Object(m.d)(i,8);var l=function(e,t){var n,r=e.payload.subarray(e.index),i=r[0]>>6,a=r[0]>>5&1,o=31&r[0],s=r.subarray(1,5),c=r.subarray(5,11),u=r[11];Object(m.d)(e,96);var d=[],l=[];for(n=0;n<t;n++)d[n]=Object(m.a)(e),l[n]=Object(m.a)(e);if(t>0)for(n=t;n<8;n++)Object(m.d)(e,2);for(n=0;n<t;n++)d[n]&&Object(m.d)(e,88),l[n]&&Object(m.d)(e,8);return{profile_space:i,tier_flag:a,profile_idc:o,profile_compatibility_flags:s,constraint_indicator_flags:c,level_idc:u}}(i,d),f=y.a.readUEV(a,i.offset);Object(m.d)(i,f.bitLength);var h=y.a.readUEV(a,i.offset);r=h.value,Object(m.d)(i,h.bitLength),3==r&&Object(m.d)(i,1);var p=y.a.readUEV(a,i.offset);Object(m.d)(i,p.bitLength);var _=y.a.readUEV(a,i.offset);Object(m.d)(i,_.bitLength),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength));var v=y.a.readUEV(a,i.offset);Object(m.d)(i,v.bitLength);var g=y.a.readUEV(a,i.offset);Object(m.d)(i,g.bitLength);var b=y.a.readUEV(a,i.offset);for(Object(m.d)(i,b.bitLength),t=Object(m.a)(i)?0:d;t<=d;t++)n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength);if(n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),Object(m.a)(i)){var T=y.a.readBit(a,i.offset);Object(m.d)(i,1),T&&function(e){var t,n,r,i;for(t=0;t<4;t++)for(n=0;n<(3==t?2:6);n++)if(Object(m.a)(e)){if(i=Math.min(64,1<<4+(t<<1)),t>1){var a=y.a.readSEV(e.payload,e.offset);Object(m.d)(e,a.bitLength)}for(r=0;r<i;r++){var o=y.a.readSEV(e.payload,e.offset);Object(m.d)(e,o.bitLength)}}else{var s=y.a.readUEV(e.payload,e.offset);Object(m.d)(e,s.bitLength)}}(i)}Object(m.d)(i,1),Object(m.d)(i,1),Object(m.a)(i)&&(Object(m.d)(i,4),Object(m.d)(i,4),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),Object(m.d)(i,1));var P=y.a.readUEV(a,i.offset);for(Object(m.d)(i,P.bitLength),t=0;t<P.value;t++)x(i,t,P.value,u);if(Object(m.a)(i)){var I=y.a.readUEV(a,i.offset);for(Object(m.d)(i,I.bitLength),t=0;t<I.value;t++){var w=Math.min(b.value+4,16);Object(m.d)(i,w),Object(m.d)(i,1)}}if(Object(m.d)(i,1),Object(m.d)(i,1),Object(m.a)(i)){if(Object(m.a)(i)){var A=y.a.readByte(a,i.offset);switch(Object(m.d)(i,8),A){case 1:o=[1,1];break;case 2:o=[12,11];break;case 3:o=[10,11];break;case 4:o=[16,11];break;case 5:o=[40,33];break;case 6:o=[24,11];break;case 7:o=[20,11];break;case 8:o=[32,11];break;case 9:o=[80,33];break;case 10:o=[18,11];break;case 11:o=[15,11];break;case 12:o=[64,33];break;case 13:o=[160,99];break;case 14:o=[4,3];break;case 15:o=[3,2];break;case 16:o=[2,1];break;case 255:var E=y.a.readByte(a,i.offset);Object(m.d)(i,8);var D=y.a.readByte(a,i.offset);Object(m.d)(i,8);var q=y.a.readByte(a,i.offset);Object(m.d)(i,8);var O=y.a.readByte(a,i.offset);Object(m.d)(i,8),o=[E<<8|D,q<<8|O]}o&&(s=o[0]/o[1]),255===A&&(Object(m.d)(i,16),Object(m.d)(i,16))}if(Object(m.a)(i)&&Object(m.d)(i,1),Object(m.a)(i)&&(Object(m.d)(i,3),Object(m.d)(i,1),Object(m.a)(i)&&Object(m.d)(i,24)),Object(m.a)(i)){var R=y.a.readUEV(a,i.offset);Object(m.d)(i,R.bitLength);var L=y.a.readUEV(a,i.offset);Object(m.d)(i,L.bitLength)}Object(m.d)(i,3),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength)),Object(m.a)(i)&&(y.a.readBit(a,i.offset,32),Object(m.d)(i,32),y.a.readBit(a,i.offset,32),Object(m.d)(i,32),Object(m.a)(i)&&(n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength)),Object(m.a)(i)&&function(e,t,n){var r,i,a=0,o=0,s=0;for(t&&(o=Object(m.a)(e),s=Object(m.a)(e),(o||s)&&((a=Object(m.a)(e))&&Object(m.d)(e,19),Object(m.d)(e,8),a&&Object(m.d)(e,4),Object(m.d)(e,15))),r=0;r<=n;r++){var c=0,u=0,d=0;Object(m.a)(e)||(d=Object(m.a)(e)),d?(i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength)):u=Object(m.a)(e),u||(i=y.a.readUEV(e.payload,e.offset),Object(m.d)(e,i.bitLength),c=i.value),o&&S(e,c,a),s&&S(e,c,a)}}(i,1,d)),Object(m.a)(i)&&(Object(m.d)(i,3),n=y.a.readUEV(a,i.offset),Object(m.d)(i,n.bitLength),c=Math.min(n.value,4095))}var M=k.readUint32(l.profile_compatibility_flags);return Object.assign(Object.assign({payload:i.payload},l),{profile_compatibility:M,chromaFormat:r,bitDepthLumaMinus8:v.value,bitDepthChromaMinus8:g.value,minSpatialSegmentationIdc:c,width:p.value*s,height:_.value*s,pixelRatio:o,fps:0,fixedFPS:!0})}var P=function q(e){switch(i()(this,q),this.unit_type=e[0]>>1&63,this.data=Object(g.a)(e.subarray(2)),this.rawData=e,this.unit_type){case 32:this.vps=function(e){var t=Object(m.c)(e);Object(m.d)(t,12);var n=(14&e[1])>>1,r=1&e[1];return Object(m.d)(t,4),Object(m.d)(t,16),{payload:e,numTemporalLayers:n,temporalIdNested:r}}(this.data);break;case 33:this.sps=T(this.data);break;case 34:this.pps=(t=this.data,r=Object(m.c)(t),a=t,n=y.a.readUEV(a,r.offset),Object(m.d)(r,n.bitLength),n=y.a.readUEV(a,r.offset),Object(m.d)(r,n.bitLength),Object(m.d)(r,7),n=y.a.readUEV(a,r.offset),Object(m.d)(r,n.bitLength),n=y.a.readUEV(a,r.offset),Object(m.d)(r,n.bitLength),n=y.a.readSEV(a,r.offset),Object(m.d)(r,n.bitLength),Object(m.d)(r,2),Object(m.a)(r)&&(n=y.a.readUEV(a,r.offset),Object(m.d)(r,n.bitLength)),n=y.a.readSEV(a,r.offset),Object(m.d)(r,n.bitLength),n=y.a.readSEV(a,r.offset),Object(m.d)(r,n.bitLength),Object(m.d)(r,4),{payload:t,tiles_enabled_flag:Object(m.a)(r),entropy_coding_sync_enabled_flag:Object(m.a)(r)})}var t,n,r,a};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var w=function(e){o()(n,e);var t=I(n);function n(e){var r;return i()(this,n),(r=t.call(this)).lastState=null,r.lastNALu=null,r.lastNALuState=null,r.codecType=e,r}return f()(n,[{key:"spitNalu_",value:function(e,t,n){var r;switch(this.codecType){case 0:r=new v.a(e);break;case 1:r=new P(e)}r.pts=t,r.dts=n,this.lastNALu=r,this.emit("nalu",r)}},{key:"push",value:function(e){var t=this.lastState,n=this.lastNALuState,r=0,i=-1,a=e.pts,o=e.dts,s=e.payload,c=e.naluSizeLength;if(c){var u=0,d=0,l=0,f=s.length;do{d=0;for(var _=0;_<c;_++)d|=s[u+_]<<8*(c-_-1);(l=(u+=c)+d)>f&&(l=f),this.spitNalu_(s.subarray(u,l),a,o),u=l}while(u<f)}else{var v=s.byteLength-1,g=0;do{if(0!==s[v])break;g++,v--}while(v>0);g>=3&&(s=s.subarray(0,v+1));var y=s.length,m=0;do{var b=s[r++];if(0!==m)if(1!==m)if(b)if(1===b){if(i>=0)this.lastNALuState=m,this.spitNalu_(s.subarray(i,r-1-m),a,o);else{var k=this.lastNALu;if(k){t&&r<=4-t&&n&&(k.rawData=k.rawData.subarray(0,k.rawData.byteLength-t));var x=r-m-1;if(x>0){h.a.log("overflow NALU found: ".concat(x,"/").concat(a,"/").concat(o));var S=new p.a;S.append(k.rawData),S.append(s.subarray(0,x));var T=S.toNewBytes();S.clear(),k.rawData=T}}}r<y&&(i=r,m=0)}else m=0;else m=3;else m=b?0:2;else m=b?0:1}while(r<y);i>=0&&m>=0&&(this.lastNALuState=m,this.spitNalu_(s.subarray(i,y),a,o)),this.lastState=m}this.emit("done")}},{key:"reset",value:function(){this.lastState=null,this.lastNALu=null,this.lastNALuState=null}}]),n}(_.EventEmitter);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var E=function(e){o()(n,e);var t=A(n);function n(){return i()(this,n),t.call(this,0)}return n}(w),D=function(e){o()(n,e);var t=A(n);function n(){return i()(this,n),t.call(this,1)}return n}(w)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe}));n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(27),n(9);var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(5),c=n.n(s),u=n(1),d=n.n(u),l=(n(147),[0,0,0,0,0,0,0,0]),f=[].concat(l,[0,0,0,0]),h=[].concat(l,[1,0,0,0]),p=function Ke(e){var t;i()(this,Ke);for(var n=Array.isArray(e)?e:e.type,r=!Array.isArray(e)&&!!e.boxHead,a=function(e,t){e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e.set(n,4)},o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];if(r&&1===s.length)a(t=s[0],t.byteLength);else{for(var u=s.length,d=u,l=8;d--;)l+=s[d].byteLength;try{t=new Uint8Array(l)}catch(f){throw"mp4 box ".concat(n," alloc mem err: ").concat(f.message)}for(a(t,l),d=0,l=8;d<u;d++)t.set(s[d],l),l+=s[d].byteLength}this.bytes=t},_=p,v={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g))for(var y=0;y<4;y++)v[g].push(g.charCodeAt(y));var m=v;function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var k=function(e){o()(n,e);var t=b(n);function n(e){i()(this,n);for(var r,a=new Uint8Array([105,115,111,109]),o=new Uint8Array([0,0,0,1]),s=new Uint8Array([97,118,99,49]),c=0;c<e.length;c++){if(r=e[c],/^hvc/gi.test(r.codec))s=new Uint8Array([104,118,99,49]);break}return t.call(this,m.ftyp,a,o,a,s)}return n}(_);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var S=function(e){o()(n,e);var t=x(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return i()(this,n),t.call(this,{type:m.mdat,boxHead:r},e)}return n}(_),T=n(101),P=n.n(T);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var w=function(e){o()(n,e);var t=I(n);function n(e){return i()(this,n),t.call(this,{type:m.mfhd,boxHead:!0},new Uint8Array([].concat(P()(f),[e>>24,e>>16&255,e>>8&255,255&e])))}return n}(p),A=Math.pow(2,32)-1;n(384);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var D=function(e){o()(n,e);var t=E(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];i()(this,n);for(var r,a=new Uint8Array(12+e.length),o=0;o<e.length;o++)r=e[o].flags,a[o+12]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.call(this,{type:m.sdtp,boxHead:!0},a)}return n}(p);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var O=function(e){o()(n,e);var t=q(n);function n(e,r){return i()(this,n),t.call(this,{type:m.tfdt,boxHead:!0},new Uint8Array([].concat(P()(h),[e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r])))}return n}(p);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var L=function(e){o()(n,e);var t=R(n);function n(e){return i()(this,n),t.call(this,{type:m.tfhd,boxHead:!0},new Uint8Array([].concat(P()(f),[e>>24,e>>16&255,e>>8&255,255&e])))}return n}(p);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var C=function(e){o()(n,e);var t=M(n);function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=arguments.length>1?arguments[1]:undefined;i()(this,n);var a,o,s,c,u,d=e.length,l=20+16*d,f=new Uint8Array(l);r+=l,f.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],8);for(var h=0;h<d;h++)o=(a=e[h]).duration,s=a.size,c=a.flags,u=a.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSyncSample,61440&c.degradationPriority,15&c.degradationPriority,u>>>24&255,u>>>16&255,u>>>8&255,255&u],20+16*h);return t.call(this,{type:m.trun,boxHead:!0},f)}return n}(p);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var B=function(e){o()(n,e);var t=N(n);function n(e,r){i()(this,n);var a=e.id,o=e.samples,s=Math.floor(r/(A+1)),c=Math.floor(r%(A+1)),u=function(e){return new D(e).bytes}(o);return t.call(this,m.traf,function(e){return new L(e).bytes}(a),function(e,t){return new O(e,t).bytes}(s,c),function(e,t){return new C(e,t).bytes}(o,u.length+16+20+8+16+8+8),u)}return n}(p);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var U=function(e){o()(n,e);var t=F(n);function n(e,r,a){return i()(this,n),t.call(this,m.moof,new w(e).bytes,function(e,t){return new B(e,t).bytes}(a,r))}return n}(_);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var V=function(e){o()(n,e);var t=j(n);function n(e,r){i()(this,n),r*=e;var a=Math.floor(r/(A+1)),o=Math.floor(r%(A+1)),s=new Uint8Array([].concat(P()(h),[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return t.call(this,{type:m.mvhd,boxHead:!0},s)}return n}(p);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var H=function(e){o()(n,e);var t=W(n);function n(e){i()(this,n);var r=e.id,a=e.duration*e.timescale,o=e.width,s=e.height,c=Math.floor(a/(A+1)),u=Math.floor(a%(A+1));return t.call(this,m.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]))}return n}(_);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Y=function(e){o()(n,e);var t=z(n);function n(e,r){i()(this,n),r*=e;var a=Math.floor(r/(A+1)),o=Math.floor(r%(A+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]);return t.call(this,m.mdhd,s)}return n}(_);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),K=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),$=function(e){o()(n,e);var t=G(n);function n(e){var r;switch(i()(this,n),e){case"video":r=Q;break;case"audio":r=K}return t.call(this,m.hdlr,r)}return n}(_);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var X=(new(function(e){o()(n,e);var t=Z(n);function n(){return i()(this,n),t.call(this,{type:m.dref,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))}return n}(p))).bytes;function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ee=(new(function(e){o()(n,e);var t=J(n);function n(){return i()(this,n),t.call(this,m.dinf,X)}return n}(p))).bytes;function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ne=(new(function(e){o()(n,e);var t=te(n);function n(){return i()(this,n),t.call(this,{type:m.smhd,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ie=(new(function(e){o()(n,e);var t=re(n);function n(){return i()(this,n),t.call(this,m.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))}return n}(p))).bytes;function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var oe=(new(function(e){o()(n,e);var t=ae(n);function n(){return i()(this,n),t.call(this,{type:m.stco,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ce=(new(function(e){o()(n,e);var t=se(n);function n(){return i()(this,n),t.call(this,{type:m.stsz,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0,0,0,0,0])))}return n}(p))).bytes;function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var de=(new(function(e){o()(n,e);var t=ue(n);function n(){return i()(this,n),t.call(this,{type:m.stsc,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var fe=(new(function(e){o()(n,e);var t=le(n);function n(){return i()(this,n),t.call(this,{type:m.stts,boxHead:!0},new Uint8Array([].concat(P()(f),[0,0,0,0])))}return n}(p))).bytes;n(82);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var pe=function(e){o()(n,e);var t=he(n);function n(){return i()(this,n),t.call(this,m.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))}return n}(_);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ve=function(e){o()(n,e);var t=_e(n);function n(e,r){return i()(this,n),t.call(this,m.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r]))}return n}(_);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var ye=function(e){o()(n,e);var t=ge(n);function n(e,r){i()(this,n);for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return t.call.apply(t,[this,e,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r.width>>8&255,255&r.width,r.height>>8&255,255&r.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])].concat(o))}return n}(_);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var be=function(e){o()(n,e);var t=me(n);function n(e,r,a){return i()(this,n),t.call(this,m.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|e.sps.length].concat(r).concat([e.pps.length]).concat(a)))}return n}(_),ke=function(e){o()(n,e);var t=me(n);function n(e){i()(this,n);var r,a,o,s=[],c=[];for(r=0;r<e.sps.length;r++)o=(a=e.sps[r]).byteLength,s.push(o>>>8&255),s.push(255&o),s=s.concat(Array.prototype.slice.call(a));for(r=0;r<e.pps.length;r++)o=(a=e.pps[r]).byteLength,c.push(o>>>8&255),c.push(255&o),c=c.concat(Array.prototype.slice.call(a));var u=e.pixelRatio[0],d=e.pixelRatio[1];return t.call(this,m.avc1,e,new be(e,s,c).bytes,(new pe).bytes,new ve(u,d).bytes)}return n}(ye);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}function Se(e,t){for(var n=[128&t,0,1],r=0;r<1;r++){var i=2+e.byteLength;n.push((65535&i)>>8),n.push(255&i),n.push(64),n.push(1),n=n.concat(Array.prototype.slice.call(e))}return n}var Te=function(e){o()(n,e);var t=xe(n);function n(e,r,a,o){return i()(this,n),t.call(this,m.hvcC,function(e,t,n,r){var i;return i=t.minSpatialSegmentationIdc?n.entropy_coding_sync_enabled_flag&&n.tiles_enabled_flag?0:n.entropy_coding_sync_enabled_flag?3:n.tiles_enabled_flag?2:1:0,new Uint8Array([1,t.profile_space<<6|t.tier_flag<<5|t.profile_idc,t.profile_compatibility_flags[0],t.profile_compatibility_flags[1],t.profile_compatibility_flags[2],t.profile_compatibility_flags[3],t.constraint_indicator_flags[0],t.constraint_indicator_flags[1],t.constraint_indicator_flags[2],t.constraint_indicator_flags[3],t.constraint_indicator_flags[4],t.constraint_indicator_flags[5],t.level_idc,240&t.minSpatialSegmentationIdc>>8,255&t.minSpatialSegmentationIdc,252&i,252&t.chromaFormat,248&t.bitDepthLumaMinus8,248&t.bitDepthChromaMinus8,0,0,0|e.numTemporalLayers<<3|e.temporalIdNested<<2|3,3].concat(Se(r.vps[0],32)).concat(Se(r.sps[0],33)).concat(Se(r.pps[0],34)))}(r,a,o,e))}return n}(_),Pe=function(e){o()(n,e);var t=xe(n);function n(e){i()(this,n);var r=e.pixelRatio[0],a=e.pixelRatio[1];return t.call(this,m.hvc1,e,new Te(e,e.hevc_vps,e.hevc_sps,e.hevc_pps).bytes,(new pe).bytes,new ve(r,a).bytes)}return n}(ye);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var we=function(e){o()(n,e);var t=Ie(n);function n(e){i()(this,n);var r=e.sampleRate;return t.call(this,m[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}return n}(_);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ee=function(e){o()(n,e);var t=Ae(n);function n(e){i()(this,n);var r=e.config,a=r.length;return t.call(this,{type:m.esds,boxHead:!0},new Uint8Array([].concat(P()(f),[3,23+a,0,1,0,4,15+a,64,21,0,0,0,0,0,0,0,0,0,0,0,5,a]).concat(r).concat([6,1,2])))}return n}(p),De=function(e){o()(n,e);var t=Ae(n);function n(e){i()(this,n);var r=e.sampleRate,a=e.channelCount;return t.call(this,m.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a,0,16,0,0,0,0,r>>8&255,255&r,0,0]),new Ee(e).bytes)}return n}(p);function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Oe=function(e){o()(n,e);var t=qe(n);function n(e){i()(this,n);var r,a=new Uint8Array([0,0,0,0,0,0,0,1]);return r="audio"===e.type?e.isAAC||"mp3"!==e.codec?function(e){return new De(e).bytes}(e):function(e){return new we(e).bytes}(e):/^hvc1/gi.test(e.codec)?function(e){return new Pe(e).bytes}(e):function(e){return new ke(e).bytes}(e),t.call(this,m.stsd,a,r)}return n}(_);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Le=function(e){o()(n,e);var t=Re(n);function n(e){return i()(this,n),t.call(this,m.stbl,function(e){return new Oe(e).bytes}(e),fe,de,ce,oe)}return n}(p);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ce=function(e){o()(n,e);var t=Me(n);function n(e){return i()(this,n),t.call(this,m.minf,"audio"===e.type?ne:ie,ee,function(e){return new Le(e).bytes}(e))}return n}(_);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Be=function(e){o()(n,e);var t=Ne(n);function n(e){return i()(this,n),t.call(this,m.mdia,(r=e.timescale,a=e.duration,new Y(r,a).bytes),function(e){return new $(e).bytes}(e.type),function(e){return new Ce(e).bytes}(e));var r,a}return n}(_);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ue=function(e){o()(n,e);var t=Fe(n);function n(e){return i()(this,n),t.call(this,m.trak,function(e){return new H(e).bytes}(e),function(e){return new Be(e).bytes}(e))}return n}(_);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ve=function(e){o()(n,e);var t=je(n);function n(e){i()(this,n);var r=e.id;return t.call(this,{type:m.trex,boxHead:!0},new Uint8Array([].concat(P()(f),[r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}return n}(p);function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var He=function(e){o()(n,e);var t=We(n);function n(e){return i()(this,n),t.call.apply(t,[this,m.mvex].concat(P()(e)))}return n}(_),ze=function(e){for(var t,n=e.length,r=[];n--;)r[n]=(t=e[n],new Ve(t).bytes);return new He(r).bytes};function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var Ge=function(e){o()(n,e);var t=Ye(n);function n(e){i()(this,n);for(var r,a,o,s=e.length,c=[];s--;)c[s]=((r=e[s]).duration=r.duration||4294967295,new Ue(r).bytes);return t.call.apply(t,[this,m.moov,(a=e[0].timescale,o=e[0].duration,new V(a,o).bytes)].concat(c,[ze(e)]))}return n}(_),Qe={initSegment:function(e){var t,n=function(e){return new Ge(e).bytes}(e),r=function(e){return new k(e).bytes}(e);try{t=new Uint8Array(r.byteLength+n.byteLength)}catch(i){throw"mp4 initSegment alloc mem err ".concat(r.byteLength,"-").concat(n.byteLength)}return t.set(r),t.set(n,r.byteLength),t},moof:function(e,t,n){return function(e,t,n){return new U(e,t,n).bytes}(e,t,n)},mdat:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new S(e,t).bytes}}},function(e,t,n){"use strict";var r=n(24),i=n(47),a=n(266),o=n(88),s=n(217),c=n(23),u=n(184),d=n(93),l=n(44),f=n(276),h=n(353),p=n(179),_=n(158),v=n(129).f,g=n(50).f,y=n(244),m=n(155),b=n(109),k=b.get,x=b.set,S="ArrayBuffer",T="DataView",P="Wrong index",I=r.ArrayBuffer,w=I,A=r.DataView,E=A&&A.prototype,D=Object.prototype,q=r.RangeError,O=h.pack,R=h.unpack,L=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},C=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},N=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return O(e,23,4)},F=function(e){return O(e,52,8)},U=function(e,t){g(e.prototype,t,{get:function(){return k(this)[t]}})},j=function(e,t,n,r){var i=f(n),a=k(e);if(i+t>a.byteLength)throw q(P);var o=k(a.buffer).bytes,s=i+a.byteOffset,c=o.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,i,a){var o=f(n),s=k(e);if(o+t>s.byteLength)throw q(P);for(var c=k(s.buffer).bytes,u=o+s.byteOffset,d=r(+i),l=0;l<t;l++)c[u+l]=d[a?l:t-l-1]};if(a){if(!c((function(){I(1)}))||!c((function(){new I(-1)}))||c((function(){return new I,new I(1.5),new I(NaN),I.name!=S}))){for(var W,H=(w=function(e){return u(this,w),new I(f(e))}).prototype=I.prototype,z=v(I),Y=0;z.length>Y;)(W=z[Y++])in w||o(w,W,I[W]);H.constructor=w}_&&p(E)!==D&&_(E,D);var G=new A(new w(2)),Q=E.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||s(E,{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},{unsafe:!0})}else w=function(e){u(this,w,S);var t=f(e);x(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},A=function(e,t,n){u(this,A,T),u(e,w,T);var r=k(e).byteLength,a=d(t);if(a<0||a>r)throw q("Wrong offset");if(a+(n=n===undefined?r-a:l(n))>r)throw q("Wrong length");x(this,{buffer:e,byteLength:n,byteOffset:a}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},i&&(U(w,"byteLength"),U(A,"buffer"),U(A,"byteLength"),U(A,"byteOffset")),s(A.prototype,{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:undefined);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:undefined);return t[1]<<8|t[0]},getInt32:function(e){return N(j(this,4,e,arguments.length>1?arguments[1]:undefined))},getUint32:function(e){return N(j(this,4,e,arguments.length>1?arguments[1]:undefined))>>>0},getFloat32:function(e){return R(j(this,4,e,arguments.length>1?arguments[1]:undefined),23)},getFloat64:function(e){return R(j(this,8,e,arguments.length>1?arguments[1]:undefined),52)},setInt8:function(e,t){V(this,1,e,L,t)},setUint8:function(e,t){V(this,1,e,L,t)},setInt16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:undefined)},setUint16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:undefined)},setInt32:function(e,t){V(this,4,e,C,t,arguments.length>2?arguments[2]:undefined)},setUint32:function(e,t){V(this,4,e,C,t,arguments.length>2?arguments[2]:undefined)},setFloat32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:undefined)},setFloat64:function(e,t){V(this,8,e,F,t,arguments.length>2?arguments[2]:undefined)}});m(w,S),m(A,T),e.exports={ArrayBuffer:w,DataView:A}},function(e,t,n){var r=n(103),i=n(81),a=n(134),o=n(44),s=function(e){return function(t,n,s,c){r(n);var u=i(t),d=a(u),l=o(u.length),f=e?l-1:0,h=e?-1:1;if(s<2)for(;;){if(f in d){c=d[f],f+=h;break}if(f+=h,e?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:l>f;f+=h)f in d&&(c=n(c,d[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},,function(e,t,n){var r=n(35),i=n(229),a=n(44),o=n(135),s=n(197),c=n(261),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var d,l,f,h,p,_,v,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),m=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),k=o(t,g,1+y+b),x=function(e){return d&&c(d),new u(!0,e)},S=function(e){return y?(r(e),b?k(e[0],e[1],x):k(e[0],e[1])):b?k(e,x):k(e)};if(m)d=e;else{if("function"!=typeof(l=s(e)))throw TypeError("Target is not iterable");if(i(l)){for(f=0,h=a(e.length);h>f;f++)if((p=S(e[f]))&&p instanceof u)return p;return new u(!1)}d=l.call(e)}for(_=d.next;!(v=_.call(d)).done;){try{p=S(v.value)}catch(T){throw c(d),T}if("object"==typeof p&&p&&p instanceof u)return p}return new u(!1)}},function(e,t,n){var r=n(35);e.exports=function(e){var t=e["return"];if(t!==undefined)return r(t.call(e)).value}},function(e,t,n){"use strict";var r=n(247).IteratorPrototype,i=n(122),a=n(120),o=n(155),s=n(178),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:a(1,n)}),o(e,u,!1,!0),s[u]=c,e}},function(e,t,n){var r=n(23);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return _}));n(147),n(112),n(37),n(82),n(10),n(204),n(194),n(97),n(185),n(198),n(199),n(29),n(92);var r=n(290),i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=(n(235),n(287),n(27),n(127),n(48),n(224),n(226),n(140),n(169),n(153)),u=n(152);function d(e){return!!e}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=new(function(){function e(){a()(this,e),this.cachedInjectors_=new Map}return s()(e,[{key:"validKey_",value:function(e,t,n){var r=!1,i=undefined;return n||(n=this.cachedInjectors_.get(e)),t.startsWith("$")||t in e&&(n.map((function(e){return e.key})).indexOf(t)>-1||(r=!0)),{valid:r,descriptor:i}}},{key:"ejectApi_",value:function(e,t){Object(c.e)(e,t)&&delete e[t]}},{key:"dispose",value:function(){this.cachedInjectors_.clear()}},{key:"provide",value:function(e,t){var n=this,i=this.cachedInjectors_;if(e){var a=[];i.has(e)?a=i.get(e):i.set(e,a),t.forEach((function(t){var i;n.validKey_(e,t,a).valid&&(Object(r.a)(e,(function(e){return i=Object.getOwnPropertyDescriptor(e,t)})),a.push({key:t,descriptor:i}))}))}else 0}},{key:"inject",value:function(e){var t=this.cachedInjectors_;d(e)&&t.forEach((function(t,n){t.forEach((function(t){var r=t.key,i=t.descriptor,a=void 0===i?{}:i,o=!!a.set,s=!!a.get;r in n&&(r in e||(o||s?Object.defineProperty(e,r,Object.assign(Object.assign({},a),{get:s?function(){return n[r]}:undefined,set:o?function(e){return n[r]=e}:undefined})):Object(u.d)(n[r])&&(e[r]=n[r].bind(n),e[r].__target__=n)))}))}))}},{key:"eject",value:function(e,t){var n=this;this.cachedInjectors_;d(e)&&Array.isArray(t)&&t.forEach((function(t){n.ejectApi_(e,t)}))}}]),e}());function p(e,t,n){var r=e.$__apiDescriptorQueue__=e.$__apiDescriptorQueue__||[];if(n){if(Array.isArray(r))-1==r.map((function(e){return e.key})).indexOf(t)&&r.push({key:t,descriptor:n});return n}}function _(){var e=[];return Object(r.b)(this,(function(t){var n=t.$__apiDescriptorQueue__;if(Array.isArray(n)){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;-1===e.indexOf(a.key)&&e.push(a.key)}}catch(o){i.e(o)}finally{i.f()}}})),e}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(257),o=n(181),s="ArrayBuffer",c=a.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==c},{ArrayBuffer:c}),o(s)},,function(e,t,n){"use strict";var r=n(102),i=n(93),a=n(44),o=n(116),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),l=u||!d;e.exports=l?function(e){if(u)return c.apply(this,arguments)||0;var t=r(this),n=a(t.length),o=n-1;for(arguments.length>1&&(o=s(o,i(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:c},function(e,t,n){var r=n(22),i=n(24),a=n(182),o=[].slice,s=function(e){return function(t,n){var r=arguments.length>2,i=r?o.call(arguments,2):undefined;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(e,t,n){"use strict";var r=n(22),i=n(258).left,a=n(116),o=n(165),s=n(200);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l),h=(n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(329)),p=n(51),_=n(133),v=n(152);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var y=function(e){c()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this)).eventManager_=new h.a,a.debug&&(p.a.enable=!0),r.ctx_=e,r.options_=a,r}return o()(n,[{key:"endStream",get:function(){return null}},{key:"listenEndStream_",value:function(){var e=this;this.eventManager_.on(this.endStream,"data",(function(t){e.emit("ESD",t)})).on(this.endStream,"done",(function(t){e.emit("O",t)})).on(this.ctx_,"error",(function(t){e.emit("E",t)}))}},{key:"reset",value:function(){}},{key:"destroy",value:function(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}]),n}(_.a),m=function(e){c()(n,e);var t=g(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).eventManager_.on(r.ctx_,"info",(function(e){r.emit("demux_info",e)})),r}return o()(n,[{key:"constraintPushData_",value:function(e){var t=null;return Object(v.a)(e)||Object(v.k)(e)?t=Object(v.a)(e)?new Uint8Array(e):e:t}}]),n}(y),b=function(e){c()(n,e);var t=g(n);function n(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),t.call(this,e,r)}return n}(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]},,function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(47),o=n(352),s=n(80),c=n(257),u=n(184),d=n(120),l=n(88),f=n(44),h=n(276),p=n(277),_=n(121),v=n(76),g=n(170),y=n(39),m=n(122),b=n(158),k=n(129).f,x=n(355),S=n(104).forEach,T=n(181),P=n(50),I=n(111),w=n(109),A=n(180),E=w.get,D=w.set,q=P.f,O=I.f,R=Math.round,L=i.RangeError,M=c.ArrayBuffer,C=c.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,F=s.TypedArray,U=s.TypedArrayPrototype,j=s.aTypedArrayConstructor,V=s.isTypedArray,W="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var n=0,r=t.length,i=new(j(e))(r);r>n;)i[n]=t[n++];return i},Y=function(e,t){q(e,t,{get:function(){return E(this)[t]}})},G=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},Q=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return Q(e,t=_(t,!0))?d(2,e[t]):O(e,t)},$=function(e,t,n){return!(Q(e,t=_(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?q(e,t,n):(e[t]=n.value,e)};a?(N||(I.f=K,P.f=$,Y(U,"buffer"),Y(U,"byteOffset"),Y(U,"byteLength"),Y(U,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:K,defineProperty:$}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,d="set"+e,_=i[s],v=_,g=v&&v.prototype,P={},I=function(e,t){q(e,t,{get:function(){return function(e,t){var n=E(e);return n.view[c](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=E(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[d](t*a+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};N?o&&(v=t((function(e,t,n,r){return u(e,v,s),A(y(t)?G(t)?r!==undefined?new _(t,p(n,a),r):n!==undefined?new _(t,p(n,a)):new _(t):V(t)?z(v,t):x.call(v,t):new _(h(t)),e,v)})),b&&b(v,F),S(k(_),(function(e){e in v||l(v,e,_[e])})),v.prototype=g):(v=t((function(e,t,n,r){u(e,v,s);var i,o,c,d=0,l=0;if(y(t)){if(!G(t))return V(t)?z(v,t):x.call(v,t);i=t,l=p(n,a);var _=t.byteLength;if(r===undefined){if(_%a)throw L(H);if((o=_-l)<0)throw L(H)}else if((o=f(r)*a)+l>_)throw L(H);c=o/a}else c=h(t),i=new M(o=c*a);for(D(e,{buffer:i,byteOffset:l,byteLength:o,length:c,view:new C(i)});d<c;)I(e,d++)})),b&&b(v,F),g=v.prototype=m(U)),g.constructor!==v&&l(g,"constructor",v),B&&l(g,B,s),P[s]=v,r({global:!0,forced:v!=_,sham:!N},P),W in v||l(v,W,a),W in g||l(g,W,a),T(s)}):e.exports=function(){}},function(e,t,n){var r=n(93),i=n(44);e.exports=function(e){if(e===undefined)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){var r=n(354);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(22),i=n(257);r({global:!0,forced:!n(266)},{DataView:i.DataView})},function(e,t,n){var r=n(280);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(24);e.exports=r.Promise},function(e,t,n){var r,i,a,o,s,c,u,d,l=n(24),f=n(111).f,h=n(248).set,p=n(249),_=n(283),v=n(200),g=l.MutationObserver||l.WebKitMutationObserver,y=l.document,m=l.process,b=l.Promise,k=f(l,"queueMicrotask"),x=k&&k.value;x||(r=function(){var e,t;for(v&&(e=m.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?o():a=undefined,n}}a=undefined,e&&e.enter()},p||v||_||!g||!y?b&&b.resolve?(u=b.resolve(undefined),d=u.then,o=function(){d.call(u,r)}):o=v?function(){m.nextTick(r)}:function(){h.call(l,r)}:(s=!0,c=y.createTextNode(""),new g(r).observe(c,{characterData:!0}),o=function(){c.data=s=!s})),e.exports=x||function(e){var t={fn:e,next:undefined};a&&(a.next=t),i||(i=t,o()),a=t}},function(e,t,n){var r=n(182);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(35),i=n(39),a=n(250);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(24);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e,t,n){"use strict";var r,i=n(22),a=n(111).f,o=n(44),s=n(369),c=n(89),u=n(370),d=n(136),l="".startsWith,f=Math.min,h=u("startsWith");i({target:"String",proto:!0,forced:!!(d||h||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!h},{startsWith:function(e){var t=String(c(this));s(e);var n=o(f(arguments.length>1?arguments[1]:undefined,t.length)),r=String(e);return l?l.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(23),i=n(31),a=n(136),o=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t["delete"]("b"),n+=r+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",undefined).host}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n(367);function r(e,t){var n=Object.getPrototypeOf(e);null!=n&&(t(n)||r(n,t))}function i(e,t){t(e)||r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(32),i=n.n(r);function a(e,t){"object"!=i()(e)&&(e=[e]);var n=document.getElementsByTagName("head").item(0)||document.documentElement,r=[],a=e.length-1;!function o(i){r[i]=document.createElement("script"),r[i].setAttribute("type","text/javascript"),r[i].onload=r[i].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),i!=a?o(i+1):"function"==typeof t&&t(!0))},r[i].onerror=r[i].onstalled=function(){"function"==typeof t&&t(!1)},r[i].setAttribute("src",e[i]),n.appendChild(r[i])}(0)}},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,'@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}iqp,iqpdiv{display:block}.iqp-player{position:relative;width:100%;height:100%;min-width:200px;overflow:hidden;text-align:left;white-space:normal;background:#000;color:#fff;font:12px/1.5 PingFangSC-Regular,Helvetica,Arial,Microsoft Yahei,sans-serif;z-index:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;-webkit-font-smoothing:antialiased}.iqp-player svg{fill:currentColor;overflow:hidden}.iqp-player.iqp-full-screen50 video{width:50%!important;height:50%!important}.iqp-player.iqp-full-screen50 video,.iqp-player.iqp-full-screen75 video{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.iqp-player.iqp-full-screen75 video{width:75%!important;height:75%!important}.iqp-player.iqp-web-screen{position:fixed;left:0;top:0;z-index:4201}.iqp-player *,.iqp-player :after,.iqp-player :before{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iqp-player a,.iqp-player a:hover,.iqp-player a:visited{color:#fff;text-decoration:none!important}.iqp-player :focus,.iqp-player a:active{outline:0 none}.iqp-player img{border:none;vertical-align:top}.iqp-player ol,.iqp-player ul{list-style:none;margin:0;padding:0}.iqp-player p{margin:0;padding:0}.iqp-player .clearfix:after,.iqp-player .clearfix:before{content:"";display:table}.iqp-player .clearfix:after{clear:both}.iqp-player .iqp-hide-controls::-webkit-media-controls-play-button,.iqp-player .iqp-hide-controls::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}.iqp-player .iqp-layer{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background-color:#000;z-index:100}.iqp-player .iqp-layer-con{position:absolute;width:100%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}.iqp-player.iqp-player-mini{cursor:pointer}.dn{display:none!important}.bottom-public{position:absolute;bottom:0;height:56px;width:100%;z-index:100}.bottom-public .btn-play{border:10px dashed transparent;border-left:15px solid #ababab;display:inline-block;left:20px;top:10px;position:absolute;outline:none}.bottom-public .btn-pause{display:inline-block;left:20px;top:13px}.bottom-public .btn-pause,.bottom-public .btn-pause:before{position:absolute;height:15px;width:2px;background-color:#ababab}.bottom-public .btn-pause:before{content:"";display:block;left:10px}.bottom-public .bottom-public_play,.bottom-public .bottom-public_voice{background:rgba(26,26,26,.8);width:36px;height:36px;border-radius:50%;position:absolute;text-align:left}.bottom-public .bottom-public_play{left:20px}.bottom-public .bottom-public_play .btn-play{left:12px;top:9px;-webkit-transition:none;transition:none;z-index:1}.bottom-public .bottom-public_play .btn-pause{left:12px;top:10px}.bottom-public .bottom-public_play .btn-pause,.bottom-public .bottom-public_play .btn-pause:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.bottom-public .bottom-public_play:hover .btn-pause,.bottom-public .bottom-public_play:hover .btn-pause:before{background-color:#00be06}.bottom-public .bottom-public_play:hover .btn-play{border-left-color:#6cc900}.bottom-public .bottom-public_voice{left:74px;text-align:left}.bottom-public .bottom-public_voice i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:18px;height:14px;position:relative;display:inline-block;top:13px;cursor:pointer;left:5px}.bottom-public .bottom-public_voice .voice-big{left:1px;top:11px;width:26px;background-position:-65px 0!important}.bottom-public .bottom-public_voice .voice-no{left:10px;top:11px;background-position:0 0!important}.bottom-public .bottom-public_voice:hover .voice-big{background-position:-58px -180px!important;left:2px}.bottom-public .know-detail{padding:9px 15px;border-radius:30px;background:rgba(26,26,26,.8);display:block;float:right;color:#fff;margin-right:72px;line-height:18px;font-size:14px}.bottom-public .know-detail:hover{color:#57a900}.bottom-public .public-screen{background:rgba(26,26,26,.8);width:35px;height:35px;border-radius:50%;position:absolute;right:20px;text-align:left}.bottom-public .public-screen i{background:url(//www.iqiyipic.com/common/fix/pcWeb-img/icon-all.png) no-repeat;width:20px;height:20px;display:inline-block;position:relative;top:7px;left:9px}.bottom-public .public-screen:hover .screen-small{background-position:0 -28px}.bottom-public .public-screen:hover .screen-all{background-position:-94px -28px}.bottom-public .public-screen .screen-small{background-position:-34px -28px}.bottom-public .public-screen .screen-all{background-position:-65px -28px}@font-face{font-family:ds-digital;src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot);src:url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.woff) format("woff"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.ttf) format("truetype"),url(//static.qiyi.com/ext/common/pcWeb_fontFace/ds-digi-webfont.svg#iconfont) format("svg")}.iqp-bottom-detail{position:absolute;bottom:66px;right:20px;width:90px;height:26px;line-height:26px;border-radius:13px;text-align:center;color:#fff;background-color:#00be06;z-index:100;cursor:pointer}.iqp-bottom-detail:before{content:"";width:28px;height:28px;display:inline-block;background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) 0 -120px;float:right;-webkit-transform:scale(.5);transform:scale(.5);margin:0 2px 0 -14px}.iqp-bottom-detail:hover{background-color:#00c806}.iqp-big-mode .iqp-bottom-detail{bottom:80px}.iqp-player-icon{background:url(//www.iqiyipic.com/common/fix/iq-player/iqp-player-icon.png) no-repeat}@font-face{font-family:pcw-player-iconfont;src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot);src:url(//static.qiyi.com/pcw-player-iconfont/iconfont.eot#iefix) format("embedded-opentype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.woff) format("woff"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.ttf) format("truetype"),url(//static.qiyi.com/pcw-player-iconfont/iconfont.svg#iconfont) format("svg")}.player-iconfont{font-family:pcw-player-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.player-iconfont.icon-shuaxin:before{content:"\\e68c"}',""])},function(e,t){e.exports="<iqpdiv data-player-hook=container class=iqp-player style=width:100%;height:100%> <iqpdiv data-player-hook=ivoslayer style=display:none> </iqpdiv> <iqpdiv tabindex=-1 class=iqp-player data-player-hook=mainlayer> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> <iqpdiv class=iqp-barrage></iqpdiv> <div id=qiguanAIBox class=qiguan-baike></div> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv> </iqpdiv>"},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-pad" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mobile" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv class="iqp-player iqp-player-mini" tabindex=-1 data-player-hook=container> <video width=100% height=100% x-webkit-airplay=allow data-style></video> <iqpdiv data-player-hook=plgcontainer> </iqpdiv> <iqpdiv data-cupid=container></iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:350px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}.iqp-big-mode .iqp-logo-loading .iqp-logoload-box{width:400px}",""])},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:350px;white-space:normal}.iqp-logo-loading .iqp-logoload-gif{width:350px}.iqp-logo-loading .iqp-down-speed{font-size:14px;color:#ddd;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{width:170px;height:78px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png) no-repeat;margin-bottom:36px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-line{width:300px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:300px 2px;margin-left:auto;margin-right:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{width:225px;height:71px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png) no-repeat;margin-bottom:20px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-line{width:270px;height:2px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:auto}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{width:119px;height:106px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png) no-repeat}.iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{width:260px;height:69px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png) no-repeat;margin-bottom:29px}.iqp-logo-loading .iqp-logo-loading-ft .iqp-down-speed{margin-top:26px}.iqp-big-mode .iqp-down-speed{font-size:20px;margin-top:10px}.iqp-big-mode .iqp-logo-loading .iqp-logoload-box{width:400px}",""])},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-player-mobile .iqp-logo-loading .iqp-logoload-box{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;font-size:0;width:263px;white-space:normal}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-bg{width:128px;height:59px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpz_loading180528.png) no-repeat;margin-bottom:27px;margin-left:auto;margin-right:auto;background-size:128px 59px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-line{width:225px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/iqiyi_loading_line180528.gif) no-repeat;background-size:225px 1.5px;margin-left:auto;margin-right:auto}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-bg{width:169px;height:53px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/vip_loading.png) no-repeat;background-size:169px 53px;margin-bottom:15px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-vip .iqp-logoload-line{width:202.5px;height:1.5px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/VIP_loading_line.gif) no-repeat;background-size:202.5px 1.5px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-cp .iqp-logoload-bg{width:90px;height:80px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycp_loading180528.png) no-repeat;background-size:90px 80px}.iqp-player-mobile .iqp-logo-loading .iqp-logoload-box-db .iqp-logoload-bg{width:196px;height:52px;background:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdb_loading180528.png) no-repeat;background-size:196px 52px;margin-bottom:22px}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/yxpzft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-vip .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/vipft_loading.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-cp .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/aqycpft_loading180528.png)}.iqp-player-mobile .iqp-logo-loading .iqp-logo-loading-ft .iqp-logoload-box-db .iqp-logoload-bg{background-image:url(//www.iqiyipic.com/common/fix/pcWeb-img/qwdbft_loading180528.png)}",""])},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:14px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:24px;height:24px;margin-right:10px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat}",""])},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-layer-loading{text-align:center;font-size:12px;color:#999}.iqp-layer-loading .iqp-gif-loading{display:inline-block;vertical-align:middle;width:18px;height:18px;margin-right:5px;background:url(//www.iqiyipic.com/common/fix/iq-player/loading.gif) no-repeat;background-size:18px 18px}",""])},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_vip.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_produced.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_exclusive.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_image> <img class=loadingImage width=100% height=100% /> <iqpdiv class=iqp-btn-mid> <iqpdiv class=iqp-mid-circle> <iqpdiv class=iqp-mid-loading> <svg aria-hidden=true class="iqp-icon iqp-icon-loading"> <use xlink:href=#iqp-svg-loading class="iqp-svg-symbol iqp-svg-loading"> </use> </svg> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img lazy_src=//www.iqiyipic.com/player/cn/pcwH5_common.gif class=iqp-logoload-gif data-player-hook=lazygif /> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> <iqpdiv class=iqp-down-speed data-player-hook=loadingDownloadSpeed></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loading" aria-hidden=true> <use xlink:href=#iqp-svg-loading></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <img src=//www.iqiyipic.com/player/cn/pad_vip.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <img src=//www.iqiyipic.com/player/cn/pad_produced.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <img src=//www.iqiyipic.com/player/cn/pad_exclusive.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <img src=//www.iqiyipic.com/player/cn/pad_common.gif class=iqp-logoload-gif> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText> </iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingVip_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-vip"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingQiyiProduced_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-cp"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive> <iqpdiv class=iqp-layer-con> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingExclusive_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class="iqp-logoload-box iqp-logoload-box-db"> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal> <iqpdiv class=iqp-layer-con> <iqpdiv class=iqp-logoload-box> <div class=iqp-logoload-bg></div> <div class=iqp-logoload-line></div> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-logo-loading" style=display:none data-player-hook=videoLoadingNormal_tw> <iqpdiv class="iqp-layer-con iqp-logo-loading-ft"> <iqpdiv class=iqp-logoload-box> <iqpdiv class=iqp-logoload-bg></iqpdiv> <iqpdiv class=iqp-logoload-line></iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading style=display:none;z-index:80> <iqpdiv class=iqp-layer-con> <iqpspan class=iqp-gif-loading></iqpspan> <iqpspan data-player-hook=videoLoadingText> </iqpspan> </iqpdiv> </iqpdiv> </iqpdiv> '},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,"@-webkit-keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes iqp-rotate-360{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@keyframes iqp-rotate-90{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}@-webkit-keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes iqp-icon-scale{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1);transform:scale(1)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@keyframes iqp-show{0%{opacity:.1}to{opacity:1}}@-webkit-keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@keyframes iqp-hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@keyframes iqp-translatedown{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(56px);transform:translateY(56px)}}@-webkit-keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@keyframes iqp-translatedown-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(75px);transform:translateY(75px)}}@-webkit-keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@keyframes iqp-fs-enlarge{0%{font-size:14px}to{font-size:16px}}@-webkit-keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@keyframes iqp-translatedown-i5{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(46px);transform:translateY(46px)}}@-webkit-keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}@keyframes iqp-translatedown-i5-bigmode{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(60px);transform:translateY(60px)}}.iqp-layer-loading .iqp-icon-loadingmini{color:#00cc36;width:32px;height:32px;-webkit-animation:iqp-rotate-360 1s infinite;animation:iqp-rotate-360 1s infinite}",""])},function(e,t){e.exports="<iqpdiv data-player-hook=loadingposter class=iqp-poster style=display:none;background-size:cover></iqpdiv>"},function(e,t){e.exports='<iqpdiv data-player-hook=loading style=pointer-events:none;position:absolute;top:0;left:0;height:100%;width:100%;z-index:99> <iqpdiv class="iqp-layer iqp-layer-loading" data-player-hook=videolayerLoading> <iqpdiv class=iqp-layer-con> <svg class="iqp-icon iqp-icon-loadingmini" aria-hidden=true> <use xlink:href=#iqp-svg-loadingmini></use> </svg> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-player-vippay-popup{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;text-align:center;z-index:100}.iqp-player-vippay-popup .iqp-vippay-popup{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:510px;text-align:left;vertical-align:middle}.iqp-player-vippay-popup .iqp-popup-main{text-align:center}.iqp-player-vippay-popup .iqp-major-txt{display:inline-block;max-width:410px;text-align:left;font-size:16px;color:#fff;line-height:26px}.iqp-player-vippay-popup .iqp-btn-switch{direction:rtl}.iqp-player-vippay-popup .iqp-btn-wrap{text-align:center;font-size:0;padding:20px 0 30px;margin:0 -7px}.iqp-player-vippay-popup .iqp-vippay-btn{position:relative;display:inline-block;margin:0 7px;width:242px;height:36px;line-height:36px;background-color:#dab176;color:#582d00;border-radius:18px;text-align:center;font-size:16px;text-decoration:none;cursor:pointer;vertical-align:top;direction:ltr}.iqp-player-vippay-popup .iqp-vippay-btn:hover{color:#582d00;background-color:#e2bc81}.iqp-player-vippay-popup .iqp-vip-popup-profit{overflow:hidden}.iqp-player-vippay-popup .iqp-profit-h3{color:#c8a06a;font-size:16px;padding:4px 0 16px}.iqp-player-vippay-popup .iqp-profit-list{margin-right:-54px;*zoom:1}.iqp-player-vippay-popup .iqp-profit-item{float:left;padding-bottom:20px;padding-right:53px}.iqp-player-vippay-popup .iqp-profit-txt{font-size:12px;color:#fff}.iqp-player-vippay-popup .iqp-sprite-player-pay{display:inline-block;width:26px;height:26px;vertical-align:-8px;margin-right:7px;background:url(//www.iqiyipic.com/common/fix/site-v4/play/sprite-player-pay-200306.png) no-repeat}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-free-con-icon{background-position:0 -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-no-AD-icon{background-position:-40px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-vip-sign-icon{background-position:-80px -20px}.iqp-player-vippay-popup .iqp-sprite-player-pay.iqp-request-play-icon{background-position:-120px -20px}",""])},function(e,t){e.exports=' <iqpdiv class=iqp-player-vippay-popup data-player-hook=vippay style=display:none;position:absolute;top:0;left:0;height:100%;width:100%> <iqpdiv class=iqp-vippay-popup> <iqpdiv class=iqp-popup-main> <iqp class=iqp-major-txt data-player-hook=viptxt></iqp> <iqpdiv class=iqp-btn-wrap> <a href=javascript:; class=iqp-vippay-btn data-player-hook=playbtn></a> </iqpdiv> </iqpdiv> <iqpdiv class=iqp-popup-intro> <iqpdiv class=iqp-vip-popup-profit> <iqph3 class=iqp-profit-h3>VIP</iqph3> <ul class=iqp-profit-list> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-free-con-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-vip-sign-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-request-play-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> <li class=iqp-profit-item> <iqpi class="iqp-sprite-player-pay iqp-no-AD-icon"></iqpi> <iqpspan class=iqp-profit-txt></iqpspan> </li> </ul> </iqpdiv> </iqpdiv> </iqpdiv> </iqpdiv>'},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,".iqp-layer-tw-guide .download-intlapp-tip{line-height:20px;font-size:14px}.iqp-layer-tw-guide .download-intlapp-btn{display:inline-block;color:#fff;height:36px;line-height:36px;min-width:88px;padding:0 16px;border-radius:2px;background-color:#00cc36;font-size:14px;margin:24px 0 16px}.iqp-layer-tw-guide .download-intlapp-watch{font-weight:600;color:#00c234;font-size:13px;line-height:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer}.iqp-layer-tw-guide .download-intlapp-watch .icon-shuaxin{vertical-align:-1px;margin-right:5px}",""])},function(e,t){e.exports=' <iqpdiv class="iqp-layer iqp-layer-tw-guide" data-player-hook=mobiletwblock style=display:none> <iqpdiv class=iqp-layer-con> <div class=download-intlapp-tip> <p data-player-hook=twinfo> 5APP</p> </div> <div> <a class=download-intlapp-btn data-player-hook=mobiledownload>APP </a> </div> <div class=download-intlapp-watch data-player-hook=mobiletwwatch> <span data-player-hook=twpreview style=display:none>5 > </span> <span data-player-hook=twreplay style=display:none> <i class="player-iconfont icon-shuaxin"></i> </span> </div> </iqpdiv> </iqpdiv>'},function(e,t,n){"use strict";var r=n(8);t.a={error_code_title1:"~",error_code_desc1:"",error_code_desc2:"",error_code_desc6:" ",error_code_desc7:" ",error_code_title9:" ",error_code_title10:"",error_code_desc10:"   ",error_code_desc11:"  ",error_code_title12:"  ",error_code_desc12:" 1080P",error_code_title13:" ",error_code_title15:"  iQIYI",error_code_desc13:" ",error_code_desc14:"AppApp",error_code_title14:"ChromeFirefox"+(r.a.browser.FIREFOX?"\b<br/>":"")+"",error_code_desc21:"",error_code_desc22:"25 ",error_code_switch_flash:"Flash",error_code_desc_http:"",error_code_title301:"<br/>~",error_code_audio_err:"<br/>~",error_code_vda_err:"  CPU <br/>~",error_code_desc_ad:"... VIP",controls_tip_cqdb:' <a href="javascript:;" class="iqp-txt-selected" data-event="download"></a>',controls_tip_vrplay:"VR APP",controls_tip_history:'<i class="iqp-txt-selected">#time#</i> , ',controls_tip_skipheader:"",controls_tip_skiptailer:"",controls_tip_zstip:"VIP,",controls_tip_cdtip:"VIP,",controls_tip_yytip:"VIP",controls_tip_recharge_type1:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">VIP</a>',controls_tip_recharge_type4:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type2:'<i class="iqp-txt-selected">#previewTime#</i>  <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type3:'<i class="iqp-txt-selected">#previewTime#</i>   <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket"></a>',controls_tip_recharge_defaultype:' <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_skipheadertailer:"",controls_yes:"",controls_no:"",controls_tip_precache:"",controls_tip_switching:"",controls_tip_switchedsucc:"",controls_tip_switchwaiting:"",controls_tip_switchedfail:"",controls_tip_switchedpic:"",controls_tip_switchhdr:' <b>#definition#</b>  <a href="javascript:;" class="iqp-txt-selected" data-event="switchHDR"></a>',controls_tip_playspeedguide:"",controls_tip_speed_changed:'<i class="iqp-txt-selected">XX</i>',controls_split_tip:' ( "" )',controls_tip_setting_normal:"",controls_subtitles_tip_switching:"",controls_subtitles_tip_switchedsucc:"",controls_subtitles_tip_switchwaiting:"",controls_subtitles_tip_switchedfail:"",controls_subtitles_tip_switchedpic:"",controls_playlistbtn:"",controls_clickplay_hover:"",controls_clickpause_hover:"",controls_replay_hover:"",controls_forward_hover:"",controls_webfullscreen_hover:"",controls_exitwebfullscreen_hover:"",controls_fullscreen_hover:"",controls_exitfullscreen_hover:"",controls_download:"",controls_download_mobile:"",controls_clientdownload_mobile:"~",controls_cycleplay:"",controls_select_player:"",controls_setting_recommend:"  [ HTML5 ]",controls_setting_playratedesc:"",controls_nextbtn:" ",definition_name_limit:"",definition_name_limit_vd:"240P",definition_name_standard:"",definition_name_standard_vd:"360P",definition_name_high:"",definition_name_high_vd:"480P",definition_name_superhigh:"",definition_name_superhigh_vd:"720P",definition_name_720p:"",definition_name_720p_vd:"720P",definition_name_1080p:"",definition_name_1080p_vd:"1080P",definition_name_hdr:"",definition_name_hdr_vd:"HDR",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"",definition_name_1080P50_vd:"1080P50",definition_name_ad:"",definition_name_auto:"(#definition#)",error_errorcode_text:" ",error_switchplayer:"",error_tryrefresh:"",error_download:"",error_jump:"",error_help:"",error_private_video:" ",error_private_selfsee:"~",error_private_pwderror:"  ",error_confirm:"",error_input_pwd:" ",loading_text:" ",score_task_guide:"10~",score_task_login:"",score_task_success:"<br> #score#",score_task_btn_info1:"",score_task_btn_info2:"",score_task_btn_close1:"",score_task_btn_close2:"",score_task_btn_login:"",score_task_btn_login1:"",ban_btn:" ",ban_tip_001:"2 ",ban_tip_002:" ",ban_tip_004:"",error_maintitle:"Flash",error_fltitle:"Flash",error_h5title:"HTML5",error_fltip:" ",subtitles_switch:"",subtitles_setting:"",subtitles_back:"",subtitles_fontsize:"",subtitles_alpha:"",subtitles_language:"",picture_in_picture:"",contentMenu_bug:"",contentMenu_link:"",contentMenu_timelink:"",contentMenu_shortcut:"",contentMenu_console:"",contentMenu_shortcut_text:"",contentMenu_shortcut_text1_1:" ",contentMenu_shortcut_text1_2:" / ",contentMenu_shortcut_text2_2:"5%",contentMenu_shortcut_text2_4:"5%",contentMenu_shortcut_text3_1:"5",contentMenu_shortcut_text4_1:"5",contentMenu_shortcut_text4_2:"",contentMenu_shortcut_text5_2:"",contentMenu_shortcut_text5_4:"",contentMenu_shortcut_text7_2:" / ",contentMenu_shortcut_text8_2:" / ",contentMenu_shortcut_text9_2:"",contentMenu_shortcut_text10_2:"",infoPanelUnknown:"",infoPanelNetText:"",infoPanelSpeedText:" ",infoPanelWaitingText:"",infoPanelLostText:"",infoPanelProtocolText:"",infoPanelCdnText:"CDN",infoPanelSolutionText:"",infoPanelVideoSizeText:"",infoPanelVoiceText:"",infoPanelEngineText:"",infoPanelVideoTypeText:"",infoPanelDRMText:"DRM",infoPanelDebugText:"",infoPanelDebugBtn:"",big_hotkey_playbackratet_text:"",loading_download_speed:" :",top_tip_like:"",top_tip_cancel_like:"",top_tip_collect:"",top_tip_cancel_collect:"",top_tip_size:"",def_vip:"VIP",def_free:"",def_sport:"",def_login:"",audiotrack_tip_switching:"",audiotrack_tip_switchedsucc:"",audiotrack_tip_switchwaiting:"...",audiotrack_tip_video:"",audiotrack_tip_switchedfail:",",toast_tip_mutestartplay:"",mini_autoplay_loading:"",aiview_request:"...",aiview_neterror:", ",aiview_zero:", "}},function(e,t,n){"use strict";var r=n(8);t.a={error_code_title1:"~",error_code_desc1:"",error_code_desc2:"",error_code_desc6:"  ",error_code_desc7:"  ",error_code_title9:" ",error_code_title10:" ",error_code_desc10:"    ",error_code_desc11:" ",error_code_title12:"   ",error_code_desc12:" 1080P",error_code_title13:" ",error_code_title15:" iQIYI",error_code_desc13:" ",error_code_desc14:"AppApp",controls_tip_vrplay:"VR APP",error_code_title14:"ChromeFirefox"+(r.a.browser.FIREFOX?"\b<br/>":"")+"",error_code_desc21:" ",error_code_desc22:"25",error_code_switch_flash:"Flash",error_code_desc_http:"",error_code_title301:" <br/> ~",error_code_audio_err:"  <br/> ~",error_code_vda_err:"  CPU<br/> ~",error_code_desc_ad:"...VIP",controls_tip_history:'<i class="iqp-txt-selected">#time#</i> , ',controls_tip_skipheader:" ",controls_tip_skiptailer:"",controls_tip_zstip:"VIP,",controls_tip_cdtip:"VIP, ",controls_tip_yytip:"VIP,",controls_tip_recharge_type1:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge">VIP</a>',controls_tip_recharge_type4:'<i class="iqp-txt-selected">6</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type2:'<i class="iqp-txt-selected">#previewTime#</i>  <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_recharge_type3:'<i class="iqp-txt-selected">#previewTime#</i>   <a href="javascript:;" class="iqp-txt-selected" data-event="useTicket"></a>',controls_tip_recharge_defaultype:'<i class="iqp-txt-selected">preview_time</i> <a href="javascript:;" class="iqp-txt-selected" data-event="recharge"></a>',controls_tip_skipheadertailer:" ",controls_yes:"",controls_no:"",controls_tip_precache:"",controls_tip_switching:"",controls_tip_switchedsucc:"",controls_tip_switchwaiting:"",controls_tip_switchedfail:"",controls_tip_switchedpic:"",controls_tip_switchhdr:' <b>#definition#</b>  <a href="javascript:;" class="iqp-txt-selected" data-event="switchHDR"></a>',controls_tip_playspeedguide:"",controls_tip_speed_changed:'<i class="iqp-txt-selected">XX</i>',controls_split_tip:' ( "" )',controls_tip_setting_normal:"",controls_subtitles_tip_switching:"",controls_subtitles_tip_switchedsucc:"",controls_subtitles_tip_switchwaiting:"",controls_subtitles_tip_switchedfail:"",controls_subtitles_tip_switchedpic:"",controls_playlistbtn:"",controls_clickplay_hover:"",controls_clickpause_hover:"",controls_replay_hover:"",controls_forward_hover:"",controls_webfullscreen_hover:" ",controls_exitwebfullscreen_hover:" ",controls_fullscreen_hover:"",controls_exitfullscreen_hover:"",controls_download:"",controls_download_mobile:"",controls_clientdownload_mobile:" ~",controls_cycleplay:"",controls_select_player:"",controls_setting_recommend:"  [ HTML5 ]",controls_setting_playratedesc:"",controls_nextbtn:"  ",definition_name_limit:"",definition_name_limit_vd:"240P",definition_name_standard:"",definition_name_standard_vd:"360P",definition_name_high:"",definition_name_high_vd:"480P",definition_name_superhigh:"",definition_name_superhigh_vd:"720P",definition_name_720p:"",definition_name_720p_vd:"720P",definition_name_1080p:"",definition_name_1080p_vd:"1080P",definition_name_hdr:"",definition_name_hdr_vd:"HDR",definition_name_4k:"4k",definition_name_4k_vd:"4k",definition_name_1080P50:"",definition_name_1080P50_vd:"1080P50",definition_name_ad:"",definition_name_auto:"(#definition#)",error_errorcode_text:"",error_switchplayer:"",error_tryrefresh:"",error_jump:"",error_download:"",error_help:"",error_private_video:"  ",error_private_selfsee:"  ~",error_private_pwderror:"",error_confirm:"",error_input_pwd:"",loading_text:" ",score_task_guide:"10 ~",score_task_login:"",score_task_success:" <br> #score#",score_task_btn_info1:"",score_task_btn_info2:"",score_task_btn_close1:"",score_task_btn_close2:"",score_task_btn_login:" ",ban_btn:"",ban_tip_001:"2",ban_tip_002:"",ban_tip_004:"",error_maintitle:"Flash",error_fltitle:"Flash",error_h5title:"HTML5",error_fltip:"",subtitles_switch:"",subtitles_setting:"",subtitles_back:"",subtitles_fontsize:"",subtitles_alpha:"",subtitles_language:"",picture_in_picture:"",contentMenu_bug:"",contentMenu_link:"",contentMenu_shortcut:"",contentMenu_console:"",contentMenu_shortcut_text:"",contentMenu_shortcut_text1_1:" ",contentMenu_shortcut_text1_2:" / ",contentMenu_shortcut_text2_2:"5%",contentMenu_shortcut_text2_4:"5%",contentMenu_shortcut_text3_1:"5",contentMenu_shortcut_text4_1:"5",contentMenu_shortcut_text4_2:"",contentMenu_shortcut_text5_2:"",contentMenu_shortcut_text5_4:"",contentMenu_shortcut_text7_2:" / ",contentMenu_shortcut_text8_2:" / ",contentMenu_shortcut_text9_2:"",contentMenu_shortcut_text10_2:"",infoPanelUnknown:"",infoPanelNetText:"",infoPanelSpeedText:" ",infoPanelWaitingText:"",infoPanelLostText:"",infoPanelProtocolText:" ",infoPanelCdnText:"CDN",infoPanelSolutionText:"",infoPanelVideoSizeText:"",infoPanelVoiceText:"",infoPanelEngineText:"",infoPanelVideoTypeText:"",infoPanelDRMText:"DRM",infoPanelDebugText:"",infoPanelDebugBtn:"",big_hotkey_playbackratet_text:"",loading_download_speed:" :",top_tip_like:"",top_tip_cancel_like:"",top_tip_collect:"",top_tip_cancel_collect:"",top_tip_size:"",def_vip:"",def_free:"",def_login:"",audiotrack_tip_switching:"",audiotrack_tip_switchedsucc:"",audiotrack_tip_switchwaiting:"...",audiotrack_tip_video:" ",audiotrack_tip_switchedfail:"",toast_tip_mutestartplay:"",mini_autoplay_loading:"",aiview_request:"...",aiview_neterror:", ",aiview_zero:""}},,,,,,,,,,,,,,function(e,t,n){"use strict";n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l),h=(n(10),n(19),n(107),n(48),n(25),n(115),n(40)),p=n(21),_=n(28),v=n(30),g=n(14),y=n(8),m=n(123),b=n.n(m),k=n(117);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var S="1",T="10",P="101";y.a.browser.iPad?(S="2",T="20",P="202"):(y.a.os.ios||y.a.os.android)&&(S="2",T="20",P="201");var I=function(e){c()(n,e);var t=x(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbisdm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user;i.isVip((function(a){var o=r.getMovieInfo(),s=e.ra||r.getCurrentVD();s=51===s?59:s;var c,u={bstp:6,block:"B",pf:S,p:T,p1:P,aid:o.albumId||"",c1:o.cid||"",r:o.tvid||"",u:_.a.getFluid()||"",u2:_.a.getJsuid()||"",pu:i.getUid(),pru:g.a.get("P00PRU")||"",v:k.a,ra:s,nu:_.a.getIsNewUser()?1:0,ve:_.a.getEid(),ce:_.a.getWeid(),hu:a?1:-1,ht:o.isVIP?1:0,mod:r.local,plyrtp:0,coop:"",isdm:n._pbisdm,videotp:o.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(p.a)(u,{as:b.a.cmd5x(u.r+""+u.p1+u.u+u.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(d){}c=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(p.a)(u,{wint:c}),r.params.abtest&&(u.abtest=r.params.abtest),u=Object(p.a)(u,e,t),v.a.beacon(u,"//msg.qy.net/b")}))}},{key:"sendSeekPingback",value:function(e,t,n){var r={rseat:"ply_seek",from:e,to:t,t:20};this._core.getMovieInfo().isShowHeatMap&&(r.s2="lvjing"),n?(r.a="901111_pcwh5_keyboard",this._send(r,!0)):this._send(r)}},{key:"sendSwitchVDPingback",value:function(e){this._send({rseat:"ply_cc",tra:51===e?59:e,t:20,ra:this._core.getCurrentVD()})}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendBlockPingback",value:function(e){var t={block:e,t:21};this._core.getMovieInfo().isShowHeatMap&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendCttBlockPingback",value:function(e,t){var n={block:e,rpage:t,t:21};this._core.getMovieInfo().isShowHeatMap&&(n.s2="lvjing"),this._send(n,!0)}},{key:"sendCttUserActionPingback",value:function(e,t){this._send({rseat:e,rpage:t,t:20})}},{key:"sendIVUserActionPingback",value:function(e){var t=e.rseat,n=e.r,r=e.block,i=e.rpage,a=this._core.getMovieInfo().tvid,o=this._core.getMovieInfo().albumId,s=this._core.iv_state.uniqueId;this._send({rseat:t||"",block:r||"",t:20,r:n||"",aid:o||a,sqpid:a||"",iamvid:s||"",rpage:i||""},!0)}},{key:"sendIVBlockPingback",value:function(e){var t=e.r,n=e.block,r=e.rpage,i=this._core.getMovieInfo().tvid,a={block:n||"",t:21,r:t||"",aid:this._core.getMovieInfo().albumId||i,sqpid:i||"",iamvid:this._core.iv_state.uniqueId||"",rpage:r||""};this._send(a,!0)}},{key:"setpbisdm",value:function(e){this._pbisdm=e}},{key:"sendBarrageShowRulePagePingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_etiquette"},!0)}},{key:"sendBarrageShowLikePingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_like"},!0)}},{key:"sendBarrageEnsureReportPingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_T0_sub"},!0)}},{key:"sendBarrageShowReportPingback",value:function(){this._send({rpage:"full_ply",block:"tucaou",t:20,rseat:"608241_report"},!0)}},{key:"sendShowSystemBarragePingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:21,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:""},!0)}},{key:"sendClickSystemBarragePingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:"608241_sysclick"},!0)}},{key:"sendClickSystemBarrageButtonPingback",value:function(e){this._send({rpage:"full_ply",block:"dmsys",t:20,tm:e.contentId,aid:this._core.getMovieInfo().albumId,rseat:"608241_syspicclick"},!0)}},{key:"sendShowControlBarPingback",value:function(){var e={block:"80720_playerctrl",t:21};this._core.getMovieInfo().isShowHeatMap&&(e.s2="lvjing"),this._send(e,!0)}},{key:"sendSeekBarHoverPingback",value:function(e){var t={block:"80720_playerctrl_seekbar",t:21};e&&(t.s2="lvjing"),this._send(t,!0)}},{key:"sendShowHeatMapPingback",value:function(){this._send({block:"80720_playerctrl_lvjing",t:21,s2:"lvjing"},!0)}},{key:"showScoreTaskGuidePanel",value:function(){this._send({block:"80720_scorepannel_20m",t:21},!0)}},{key:"closeScoreTaskGuidePanel",value:function(){this._send({rseat:"80720_scorepannel_20mclose",t:20},!0)}},{key:"clickScoreTaskLoginPanel",value:function(){this._send({rseat:"80720_player_login",t:20},!0)}},{key:"showScoreTaskLoginPanel",value:function(){this._send({block:"80720_scorepannel_30mlogin",t:21},!0)}},{key:"showScoreTaskSuccessPanel",value:function(){this._send({rseat:"80720_scorepannel_30msuccess",t:20},!0)}},{key:"hoverVideoListButton",value:function(){this._send({block:"80720_playerctrl_selection",t:21},!0)}},{key:"clickVideoListButton",value:function(){this._send({block:"B",rseat:"80720_playerctrl_selection",t:20},!0)}},{key:"clickVideoListItemTitle",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickVideoListItemImage",value:function(e){this._send({block:"B",rseat:"80720_playerctrl_selection_"+e,t:20},!0)}},{key:"clickSubtitlesSwitch",value:function(e){this._send({t:20,rseat:"80720_playerctrl_menu_subtitleswitch"+e},!0)}},{key:"clickSubtitlesSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle"},!0)}},{key:"clickSubtitlesFontsizeSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_size"},!0)}},{key:"clickSubtitlesAlphaSetting",value:function(e){e?this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp_"+e},!0):this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_transp"},!0)}},{key:"clickSubtitlesLanguageSetting",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang"},!0)}},{key:"changeSubtitlesLanguage",value:function(){this._send({t:20,rseat:"80720_playerctrl_menu_subtitle_lang_change"},!0)}},{key:"showSubtitlesPanel1",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel1"},!0)}},{key:"showSubtitlesPanel2",value:function(){this._send({t:21,rseat:"80720_playerctrl_menu_subtitle_panel2"},!0)}},{key:"showContentMenu",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel"},!0)}},{key:"clickCtxMenuBugBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_feedback"},!0)}},{key:"clickCtxMenuLinkBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_linkcopy"},!0)}},{key:"clickCtxMenuShortcutBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_keyboard"},!0)}},{key:"clickCtxMenuConsoleBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_debugger"},!0)}},{key:"clickShowInfoPanelBtn",value:function(){this._send({t:20,rseat:"80720_playerctrl_subpannel_state"},!0)}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendPubBlock",value:function(e){var t={block:"action_bfq",t:21};Object(p.a)(t,e),this._send(t,!0)}},{key:"sendPubClick",value:function(e){var t={block:"bfq",rseat:"80720_action_bfq",t:20};Object(p.a)(t,e),this._send(t,!0)}},{key:"sendIVOSClick",value:function(e,t){this._send({t:20,rseat:e,biz:t},!0)}},{key:"sendIVOSShow",value:function(e,t){this._send({t:21,block:e,biz:t},!0)}},{key:"sendTwBlockShow",value:function(e,t){this._send({t:21,block:t,rpage:e},!0)}},{key:"sendTwBlockClick",value:function(e,t,n){this._send({t:20,rpage:e,block:t,rseat:n},!0)}}]),n}(h.a);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var A="1",E="10",D="101";y.a.browser.iPad?(A="2",E="20",D="202"):(y.a.os.ios||y.a.os.android)&&(A="2",E="20",D="201");var q=function(e){c()(n,e);var t=w(n);function n(e){var r;return i()(this,n),(r=t.call(this))._core=e,r._pbisdm=1,r}return o()(n,[{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.user;i.isVip((function(a){var o,s=r.getMovieInfo(),c={bstp:6,block:"B",pf:A,p:E,p1:D,c1:s.cid||"",r:s.tvid||"",u:_.a.getFluid()||"",u2:_.a.getJsuid()||"",pu:i.getUid(),pru:g.a.get("P00PRU")||"",v:k.a,ra:e.ra||r.getCurrentVD(),nu:_.a.getIsNewUser()||"",ve:_.a.getEid(),ce:_.a.getWeid(),hu:a?1:-1,ht:s.isVIP?1:0,mod:r.local,plyrtp:0,coop:"",isdm:n._pbisdm,videotp:s.is3D,tmplt:r.getPageTmpltType(),rn:Math.random(),a:"901111_pcwh5_mouse"};try{Object(p.a)(c,{as:b.a.cmd5x(c.r+""+c.p1+c.u+c.ve+"ChEnYH0804FdadrrEDFf2016tT")})}catch(u){}o=r.isFullScreen?"4":r.isWebFullScreen?"7":"3",Object(p.a)(c,{wint:o}),c=Object(p.a)(c,e,t),v.a.beacon(c,"//msg.qy.net/b")}))}},{key:"sendUserActionPingback",value:function(e,t){t?this._send({rseat:e,t:20,a:"901111_pcwh5_keyboard"},!0):this._send({rseat:e,t:20})}},{key:"sendQBBPingback",value:function(){this._send({block:"qbbbrand_pc",t:21},!0)}},{key:"sendClickTitlePingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_title",t:20},!0)}},{key:"sendClickVideoPingback",value:function(){this._core.isSimple||this._send({block:"CD",rseat:"908261_select_player_image",t:20},!0)}},{key:"sendClickPlayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_play",t:20},!0)}},{key:"sendClickPauseBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_pause",t:20},!0)}},{key:"sendClickReplayBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_replay",t:20},!0)}},{key:"sendClickPlayNextBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_next",t:20},!0)}},{key:"sendClickPlayCancelBtnPingback",value:function(){this._send({block:"CD",rseat:"908261_select_player_cancel",t:20},!0)}},{key:"sendVoiceOnPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundon",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundon",e.block="K"),this._send(e,!0)}},{key:"sendVoiceOffPingback",value:function(){var e={block:"CD",rseat:"908261_select_player_soundoff",t:20};this._core.isSimple&&(e.rseat="910191_cainixihuan_soundoff",e.block="K"),this._send(e,!0)}},{key:"sendVoiceChangePingback",value:function(e){this._send({block:"CD",rseat:"908261_select_player_sound"+e,t:20},!0)}}]),n}(h.a),O=(n(26),n(17),n(292)),R=n.n(O),L=n(293),M=n.n(L),C=n(294),N=n.n(C),B=n(295),F=n.n(B),U=n(296),j=n.n(U),V=n(18);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var H,z=function(e){c()(n,e);var t=W(n);function n(e,r){return i()(this,n),t.call(this,"container",e,r)}return o()(n,null,[{key:"css",value:function(){return R.a.toString()}},{key:"html",value:function(){return M.a.toString()}},{key:"padHtml",value:function(){return N.a.toString()}},{key:"mobileHtml",value:function(){return F.a.toString()}},{key:"miniHtml",value:function(e){var t="";return e&&(t='style="object-fit: cover; transform: scale(1.32);"'),j.a.toString().replace("data-style",t)}}]),n}(V.a),Y=(n(37),n(168),n(297)),G=n.n(Y),Q=n(298),K=n.n(Q),$=n(299),Z=n.n($),X=n(300),J=n.n(X),ee=n(301),te=n.n(ee),ne=n(302),re=n.n(ne),ie=n(303),ae=n.n(ie),oe=n(304),se=n.n(oe),ce=n(0);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var de=function(e){c()(n,e);var t=ue(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,"loading",e,r)).loadingType=a.plugin.querySelector('[data-player-hook="loadingType"]'),a.loading=a.plugin.querySelector('[data-player-hook="videolayerLoading"]'),a._speedTimer=-1,H=e.i18nLang,a.showBeginLoadingType="",a.isFadeOut=!1,a.init(),a}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.fullscreen,i=t.webfullscreen,a=t.stagesize;y.a.os.ios||y.a.os.android||n.autoplay||n.isMini?this.showBeginLoading():this.hideBeginLoading();var o=function(){e.resize()};a&&a.on(o),r&&r.on("change",o),i&&i.on("change",o),this.plugin.querySelector('[data-player-hook="videoLoadingText"]')&&(this.plugin.querySelector('[data-player-hook="videoLoadingText"]').innerHTML=H.loading_text),n.on(ce.a.NTF_StatusChanged,(function(t){switch(t.state){case ce.a.Status_StartPlay:case ce.a.Status_Playing:case ce.a.Status_AdPlaying:case ce.a.Status_AdStartPlay:case ce.a.Status_End_Play:"image"==e.showBeginLoadingType?(e.isFadeOut=!0,e.fadeOut((function(){e.hideLoading(),e.hideBeginLoading(),e.plugin.style.opacity=1,e.beginloading.querySelector(".loadingImage").removeAttribute("src"),e.isFadeOut=!1})),e.showBeginLoadingType=""):e.isFadeOut||(e.hideLoading(),e.hideBeginLoading());break;case ce.a.Status_AdWaiting:case ce.a.Status_Waiting:(y.a.os.ios||y.a.os.android)&&n.getCurrenttime()<1&&e.showLoading();break;case ce.a.Status_Loadstart:y.a.os.ios||y.a.os.android||e.showLoading();break;case ce.a.Status_Play:(y.a.os.ios||y.a.os.android)&&n.getCurrenttime()<1&&e.showLoading();break;case ce.a.Status_PlayError:}}),{highPriority:!0}),n.on(ce.a.NTF_VideoChange,(function(){e.showBeginLoading()})),n.on(ce.a.NTF_DefinitionSwitched,(function(){e.hideBeginLoading()})),n.on(ce.a.NTF_NeedUserGesture4Playback,(function(){e.hideBeginLoading()}))}},{key:"showBeginLoading",value:function(){if(!(this.engine.isInteractVideo&&!this.engine.isIVMain)){var e=this.view.isTw?"_tw":"",t=this.view.getPlayIndex(),n=this.view.params,r=this.engine.movieinfo,i=r.tvid?r.imageLoader:n.imageLoader,a=!1,o=!1,s=!1;this.showBeginLoadingType="",this.beginloading&&(this.beginloading.style.display="none"),t>-1?(r=this.view.videoList[t]).isMember?a=!0:r.isQiyiProduced?o=!0:r.isExclusive&&(s=!0):"true"==n.isMember?a=!0:1==n.qiyiProduced?o=!0:1==n.exclusive&&(s=!0),this.beginloading=a?this.plugin.querySelector('[data-player-hook="videoLoadingVip'+e+'"]'):o?this.plugin.querySelector('[data-player-hook="videoLoadingQiyiProduced'+e+'"]'):s?this.plugin.querySelector('[data-player-hook="videoLoadingExclusive'+e+'"]'):this.plugin.querySelector('[data-player-hook="videoLoadingNormal'+e+'"]'),i&&this.engine.getEngineType()===ce.a.ENGINE_TYPE&&!this.engine.isMini&&(this.beginloading=this.plugin.querySelector('[data-player-hook="videoLoadingNormal_image"]'),this.beginloading.querySelector(".loadingImage").setAttribute("src",i),this.showBeginLoadingType="image");var c=this.beginloading.querySelector('[data-player-hook="lazygif"]');if(c){var u=c.getAttribute("lazy_src");u&&(c.setAttribute("src",u),c.removeAttribute("lazy_src"))}this.clockDownLoad(),this._begineShow=!0,this.show(),this.beginloading.style.display="block"}}},{key:"hideBeginLoading",value:function(){var e;if(this._begineShow=!1,this.hide(),clearInterval(this._speedTimer),this.beginloading&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=""),this.beginloading.style.display="none",e=y.a.os.ios||y.a.os.android?this.plugin.querySelector(".iqp-logo-loading"):this.plugin.querySelector(".videoLogo_loading")))for(var t=0;t<e.length;t++)e[t].style.display="none"}},{key:"showLoading",value:function(){!0!==this._begineShow&&(this.beginloading&&(this.beginloading.style.display="none",this.clockDownLoad()),this.resize(),this.show(),this.loading.style.display="block")}},{key:"clockDownLoad",value:function(){var e=this;clearInterval(this._speedTimer),this.updateDownloadSpeed(),this._speedTimer=setInterval((function(){e.updateDownloadSpeed()}),1e3)}},{key:"hideLoading",value:function(){clearInterval(this._speedTimer),this.hide(),this.loading.style.display="none"}},{key:"resize",value:function(){var e,t;this.view.getWrapperArea().width>920?function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}(e=this.plugin,t="iqp-player_w920")||(e.className+=(e.className?" ":"")+t):function(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}},{key:"fadeOut",value:function(e){var t=this,n=t.plugin,r=1e3;n.style.display="",n.style.opacity=r/1e3;!function i(){r-=80,n.style.opacity>=0?(n.style.opacity=r/1e3,window.requestAnimationFrame?requestAnimationFrame(i):setTimeout(i,16)):e.call(t)}()}},{key:"updateDownloadSpeed",value:function(){var e=this.view.getDownloadSpeed();e&&this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]')&&(this.beginloading.querySelector('[data-player-hook="loadingDownloadSpeed"]').innerHTML=H.loading_download_speed+e)}}],[{key:"css",value:function(){return G.a.toString()}},{key:"html",value:function(){return re.a.toString()}},{key:"padCss",value:function(){return K.a.toString()+J.a.toString()}},{key:"padHtml",value:function(){return ae.a.toString()}},{key:"mobileCss",value:function(){return Z.a.toString()+te.a.toString()}},{key:"mobileHtml",value:function(){return se.a.toString()}}]),n}(V.a),le=n(305),fe=n.n(le),he=n(213),pe=n.n(he),_e=n(306),ve=n.n(_e),ge=n(307),ye=n.n(ge);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var be=function(e){c()(n,e);var t=me(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,"loading",e,r)).loading=a.plugin.querySelector('[data-player-hook="videolayerLoading"]'),a.init(),a}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.stagesize;this.showBeginLoading();r&&r.on((function(){e.resize()})),n.on(ce.a.NTF_StatusChanged,(function(t){switch(t.state){case ce.a.Status_StartPlay:case ce.a.Status_Playing:case ce.a.Status_AdPlaying:case ce.a.Status_AdStartPlay:case ce.a.Status_End_Play:e.hide(),e.toggleBegin("none");break;case ce.a.Status_Loadstart:e.showLoading()}})),n.on(ce.a.NTF_VideoChange,(function(){e.showBeginLoading()})),n.on(ce.a.NTF_NeedUserGesture4Playback,(function(){e.hide()}))}},{key:"showBeginLoading",value:function(){var e=this.view,t=this.engine.params.imageLoader||"",n=this.engine.movieinfo;n&&n.imageLoader&&(t=n.imageLoader),""!==t?(e.loadHtml(ve.a.toString(),e.pluginContainer),this.beginloading=document.querySelector('[data-player-hook="loadingposter"]'),this.beginloading.style.backgroundImage='url("'.concat(t,'")'),this.toggleBegin("block"),this.loading.style.display="none"):this.showLoading()}},{key:"showLoading",value:function(){this.toggleBegin("none"),this.resize(),this.loading.style.display="block",this.show()}},{key:"toggleBegin",value:function(e){this.beginloading&&(this.beginloading.style.display=e)}},{key:"resize",value:function(){var e,t;this.view.getWrapperArea().width>920?function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}(e=this.plugin,t="iqp-player_w920")||(e.className+=(e.className?" ":"")+t):function(e,t){for(var n=" "+e.className+" ";n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className="function"==typeof n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(this.plugin,"iqp-player_w920")}}],[{key:"css",value:function(){return fe.a.toString()+pe.a.toString()}},{key:"html",value:function(){return ye.a.toString()}}]),n}(V.a),ke=1,xe={ID_BEGIN:ke,items:{ID_SHOW_CONTROL_BAR:{index:ke,status:!0},ID_SHOW_CONTROL_BAR_SEEK_BAR:{index:++ke,status:!0},ID_SHOW_CONTROL_BAR_SKIP_TIP:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_VIEW_TIP:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_PREVIEW:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_FF:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_LOOP_PLAY_BTN:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_NEXT_BTN:{index:++ke,status:!0},ID_SHOW_CONTROL_BAR_TIME:{index:++ke,status:!0},ID_SHOW_CONTROL_BAR_VOLUME:{index:++ke,status:!0},ID_SHOW_CONTROL_BAR_FULLSCREEN:{index:++ke,status:!0},ID_SHOW_CONTROL_BAR_SETTING:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_CAPTURE:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_CAPTION:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_TRACK:{index:++ke,status:!1},ID_SHOW_DOCK:{index:++ke,status:!1},ID_SHOW_DOCK_SHARE:{index:++ke,status:!1},ID_SHOW_DOCK_LIGHT:{index:++ke,status:!1},ID_SHOW_DOCK_DEFINITION:{index:++ke,status:!1},ID_SHOW_DOCK_DETAILS:{index:++ke,status:!1},ID_SHOW_DOCK_OFFLINE_WATCH:{index:++ke,status:!1},ID_SHOW_WIDESCREEN_BTN:{index:++ke,status:!1},ID_SHOW_LOGO:{index:++ke,status:!1},ID_SHOW_RECOMMEND:{index:++ke,status:!1},ID_ENABLE_AD:{index:++ke,status:!1},ID_SHOW_TIPS:{index:++ke,status:!1},ID_SHOW_MAX_MIN_BTN:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_EXPAND_BTN:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_TVLIST_BTN:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_3D_BTN:{index:++ke,status:!1},ID_SKIP_MIDDLE_AD:{index:++ke,status:!1},ID_SHOW_TWO_DIMENSION_CODE_BTN:{index:++ke,status:!1},ID_SHOW_GREEN_TAIL_BTN:{index:++ke,status:!1},ID_SHOW_ADD_TO_TABLE_BTN:{index:++ke,status:!1},ID_SHOW_COLLECT_BTN:{index:++ke,status:!1},ID_SHOW_CONTROL_BAR_ISHIDE:{index:++ke,status:!1},ID_HIDE_VIDEO_LINK:{index:++ke,status:!1},ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN:{index:++ke,status:!1},ID_HIDE_SCORE_TASK:{index:++ke,status:!1},ID_SHOW_CONTENT_MENU:{index:++ke,status:!0},ID_SHOW_CONTENT_MENU_SHORTCUT:{index:++ke,status:!0},ID_HIDE_HEAT_MAP:{index:++ke,status:!1},ID_SHOW_SCREENSHOT:{index:++ke,status:!1},ID_HIDE_PLAYBACKRATE:{index:++ke,status:!1},ID_HIDE_PIPBTN:{index:++ke,status:!1}},ID_END:++ke};function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var Te=function(e){c()(n,e);var t=Se(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"init",value:function(e){var t=this;this.enable(),this._elem=e,this.handler=function(){t.emit("change",t.isFullScreen()?"enter":"exit")},document.addEventListener("fullscreenchange",this.handler),document.addEventListener("mozfullscreenchange",this.handler),document.addEventListener("webkitfullscreenchange",this.handler),document.addEventListener("MSFullscreenChange",this.handler)}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"exit",value:function(){var e=this._elem;if(e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.exitFullscreen)e.exitFullscreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(e.mozCancelFullScreen)e.mozCancelFullScreen();else if(e.msExitFullscreen)e.msExitFullscreen();else try{e.webkitExitFullscreen()}catch(t){}}},{key:"enter",value:function(){var e=this._elem;if(this._enable||e)if(this.emit("beforechange",this.isFullScreen()?"enter":"exit"),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else try{e.webkitEnterFullScreen()}catch(t){}}},{key:"toggle",value:function(){this.isFullScreen()?this.exit():this.enter()}},{key:"isFullScreen",value:function(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen)}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("fullscreenchange",this.handler),document.removeEventListener("mozfullscreenchange",this.handler),this._elem.removeEventListener("webkitfullscreenchange",this.handler),this._elem.removeEventListener("MSFullscreenChange",this.handler),this.handler=null}}]),n}(h.a);function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var Ie,we,Ae="iqp-web-screen",Ee=function(e){c()(n,e);var t=Pe(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"__notice",value:function(){this.emit("change",this.isWebFullScreen()?"enter":"exit")}},{key:"__beforeNotice",value:function(){this.emit("beforechange",this.isWebFullScreen()?"enter":"exit")}},{key:"init",value:function(e){this.enable(),this._wrapper=e}},{key:"enable",value:function(){this._enable=!0}},{key:"disable",value:function(){this._enable=!1}},{key:"initButton",value:function(e){var t=this;this._elem=e,this._enter=this._elem.querySelector('[data-player-hook="webfullenter"]'),this._exit=this._elem.querySelector('[data-player-hook="webfullexit"]'),this.handler=function(){t.toggle()},this._elem.addEventListener("click",this.handler)}},{key:"exit",value:function(){if(this.isWebFullScreen()){this.__beforeNotice(),this._elem&&(this._exit.style.display="none",this._enter.style.display="block");var e=this._wrapper.className;e=e.replace(Ae," ").replace("iqp-full-screen50"," ").replace("iqp-full-screen75"," ").replace(/^\s+|\s+$/g,""),this._wrapper.className=e,document.body.style.overflow=this.__bodyOverflow,this.__notice()}}},{key:"enter",value:function(){this.isWebFullScreen()||(this.__bodyOverflow=document.body.style.overflow,this.__beforeNotice(),this._elem&&(this._exit.style.display="block",this._enter.style.display="none"),this._wrapper.className+=(this._wrapper.className?" ":"")+Ae,document.body.style.overflow="hidden",this.__notice())}},{key:"toggle",value:function(){this.isWebFullScreen()?this.exit():this.enter()}},{key:"isWebFullScreen",value:function(){return!!this._wrapper&&" ".concat(this._wrapper.className," ").indexOf(" ".concat(Ae," "))>=0}},{key:"destroy",value:function(){this.disable(),this._elem=null,this._elem.removeEventListener("click",this.handler),this._enter=null,this._exit=null,this.handler=null}}]),n}(h.a),De=(n(146),n(90),document.attachEvent),qe=navigator.userAgent.match(/Trident/),Oe=(Ie=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return Ie(e)}),Re=(we=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return we(e)});function Le(e){var t=e.target||e.srcElement;t.__resizeRAF__&&Re(t.__resizeRAF__),t.__resizeRAF__=Oe((function(){var n=t.__resizeTrigger__;n&&n.__resizeListeners__.forEach((function(t){t.call(n,e)}))}))}function Me(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",Le)}var Ce=function(){function e(t){i()(this,e),this.elem=t}return o()(e,[{key:"on",value:function(e){if(!this.elem.__resizeListeners__)if(this.elem.__resizeListeners__=[],De)this.elem.__resizeTrigger__=this.elem,this.elem.attachEvent("onresize",Le);else{var t=this.elem.__resizeTrigger__=document.createElement("object");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;"),t.__resizeElement__=this.elem,t.onload=Me,t.type="text/html",qe&&this.elem.appendChild(t),t.data="about:blank",qe||this.elem.appendChild(t)}this.elem.__resizeListeners__.push(e)}},{key:"off",value:function(e){this.elem.__resizeListeners__.splice(this.elem.__resizeListeners__.indexOf(e),1),this.elem.__resizeListeners__.length||(De?this.elem.detachEvent("onresize",Le):(this.elem.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",Le),this.elem.__resizeTrigger__=!this.elem.removeChild(this.elem.__resizeTrigger__)))}}]),e}(),Ne=function(){function e(t){i()(this,e),this.elem=t,this.mutualList={},this.id=1}return o()(e,[{key:"register",value:function(e){var t=e.type,n=e.callback;if(!t||!n||"function"!=typeof n)return null;var r=this.id++;return this.mutualList[t]=this.mutualList[t]||{},this.mutualList[t][r]={enable:!0,callback:n},r}},{key:"unregister",value:function(e){var t=!1;if(!e)return t;for(var n in this.mutualList)if(this.mutualList[n][e]){delete this.mutualList[n][e],t=!0;break}return t}},{key:"enable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!0;break}}},{key:"disable",value:function(e){if(e)for(var t in this.mutualList)if(this.mutualList[t][e]){this.mutualList[t][e].enable=!1;break}}},{key:"enableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!0}}},{key:"disableType",value:function(e){if(e){var t=this.mutualList[e];for(var n in t)t[n].enable=!1}}},{key:"fire",value:function(e){if(e)for(var t in this.mutualList){if(e===t){this._fire(-1,this.mutualList[t]);break}if(this.mutualList[t][e]){this._fire(e,this.mutualList[t]);break}}}},{key:"_fire",value:function(e,t){for(var n in t)n!==e&&t[n].enable&&t[n].callback()}}]),e}(),Be=(n(41),n(308)),Fe=n.n(Be),Ue=n(309),je=n.n(Ue),Ve=n(7);function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var He=function(e){c()(n,e);var t=We(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,"vippay",e,r)).$vippay=Object(Ve.a)(a.plugin),a.$playbtn=a.$vippay.find('[data-player-hook="playbtn"]'),a.$playtxt=a.$vippay.find('[data-player-hook="viptxt"]'),a.$playbtn.on("click",(function(e){a.$vippay.hide(),a.engine.playproxy.playFromVipPay()})),a.engine.on(ce.a.NTF_Show_VIPPay,(function(e){1===e?a.$playtxt.html("VIP<br>"):a.$playtxt.html("VIP<br>"),a.$vippay.show(),a.view.pingback.sendBlockPingback("diamondtip")})),a.engine.on(ce.a.NTF_VideoChange,(function(){a.$vippay.hide()})),a}return o()(n,null,[{key:"css",value:function(){return Fe.a.toString()}},{key:"html",value:function(){return je.a.toString()}}]),n}(V.a),ze=n(310),Ye=n.n(ze),Ge=n(311),Qe=n.n(Ge),Ke=n(15);function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var Ze=new Ke.a("mobiletwblock"),Xe=function(e){c()(n,e);var t=$e(n);function n(e,r){var a;i()(this,n),a=t.call(this,"mobiletwblock",e,r);var o=e.pingback;a.$plugin=Object(Ve.a)(a.plugin),a.previewstart=!0,a.$download=a.$plugin.find('[data-player-hook="mobiledownload"]'),a.$watch=a.$plugin.find('[data-player-hook="mobiletwwatch"]'),a.$twinfo=a.$plugin.find('[data-player-hook="twinfo"]'),a.$preview=a.$plugin.find('[data-player-hook="twpreview"]'),a.$replay=a.$plugin.find('[data-player-hook="twreplay"]'),a.init();var s=function(){var e,t=a.engine.getTwBlockType();"TwBlockA"==t?(a.$plugin.show(),a.previewstart?(e="preview_start",a.$replay.hide(),a.$preview.show()):(e="preview_end",a.$preview.hide(),a.$replay.show()),o.sendTwBlockShow("player",e)):"TwBlockB"==t&&(a.$twinfo.html("App"),a.$download.html(""),a.$preview.html(""),a.$plugin.show(),a.$preview.show(),a.$replay.hide(),o.sendTwBlockShow("player","player_fullversion"))};a.engine.on(ce.a.NTF_TW_BLOCK,(function(){s(),a.engine.pause()})),a.engine.on(ce.a.NTF_VRSReady,(function(){var e=a.engine.getTwBlockType();Ze.log("mobiletwblock, twBlockType: "+e),a.previewstart=!0,"TwBlockA"==e&&s()})),a.engine.on(ce.a.NTF_PREVIEW_END,(function(){a.previewstart=!1,s()}));var c=a.engine.getTwBlockType();return Ze.log("mobiletwblock, twBlockType: "+c),s(),a}return o()(n,[{key:"init",value:function(){var e=this,t=this.view,n=this.engine,r=t.pingback,i=y.a.browser.isTouch?"touchend":"click";n.on(ce.a.NTF_StatusChanged,(function(t){switch(t.state){case ce.a.Status_Playing:case ce.a.Status_AdPlaying:case ce.a.Status_PlayError:e.$plugin.hide()}})),this.$download.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return e.view.callJsDoSomething("pullupapp"),void r.sendTwBlockClick("player","player_fullversion","download");var n=e.previewstart?"preview_start":"preview_end";e.view.callJsDoSomething("pullupapp",{af_adset:n}),r.sendTwBlockClick("player",n,"watchFull")})),this.$watch.un(i).on(i,(function(t){if(t.preventDefault(),"TwBlockB"==e.engine.getTwBlockType())return n.play(!0),void r.sendTwBlockClick("player","player_fullversion","skip");e.previewstart?(n.play(!0),r.sendTwBlockClick("player","preview_start","continuePreview")):(n.seek(0),r.sendTwBlockClick("player","preview_end","rePreview"))}))}}],[{key:"padCss",value:function(){return Ye.a.toString()}},{key:"padHtml",value:function(){return Qe.a.toString()}},{key:"mobileCss",value:function(){return this.padCss()}},{key:"mobileHtml",value:function(){return this.padHtml()}}]),n}(V.a),Je=n(6),et=n(52);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var nt=new Ke.a("Skin.Base"),rt=function(e){c()(n,e);var t=tt(n);function n(e,r){var a;i()(this,n),(a=t.call(this)).params=e,a.pack=r,a.engine=r.engine,a.plugins={},a.conflictPanel={},a.setting=null,a.diyskin=e.diyskin||{},a.statusMap={},a.initSwitch(e),a.getUserSet(),a.engine.isMini?a.pingback=new q(a.engine):a.pingback=new I(a.engine),a.bottomShow=!1,a.topSwitch=!0,a.bottomSwitch=!0;var o=a.engine,s=o.i18n,c=o.local;return a.i18nLang=r.lang,a.isTradition=s.isTraditionalChinese(c),a.isTw=s.isTWLocale(c),a}return o()(n,[{key:"videoList",get:function(){return this.subView?this.subView.videoList:[]}},{key:"initSwitch",value:function(e){for(var t=e.components,n=void 0===t?"feffffe6e":t,r=[],i=0;i<n.length;++i){var a=n.substr(i,1);a="0x"+a;for(var o=Number(a).toString(2),s=o.length,c=0;c<4-s;++c)o="0"+o;r+=o}for(var u=xe.items,d=xe.ID_BEGIN;d<xe.ID_END;++d)if(d<r.length)for(var l in u)u[l].index==d&&(u[l].status="1"==r.charAt(d));this.statusMap=u}},{key:"getUserSet",value:function(){var e=this.statusMap,t={logo:!0,ctl:!0,prog:!0,play:!0,next:!0,time:!0,rate:!0,def:!0,voice:!0,set:!0,list:!0,full:!0,webfull:!0,expandScreen:!1,vinv:!0,hotkeys:!0,score:!0,recommend:!0,ctxmenu:!0,ctxmenu_shortcut:!0,audiotrack:!0,screenshot:!0,aiview:!0,svp:!0,follow:!0,interact:!0,ivos:!0},n=this.engine.i18n.isTWLocale();t.ctl=t.ctl&&e.ID_SHOW_CONTROL_BAR.status,t.prog=t.prog&&e.ID_SHOW_CONTROL_BAR_SEEK_BAR.status,t.time=t.time&&e.ID_SHOW_CONTROL_BAR_TIME.status,t.next=t.next&&e.ID_SHOW_CONTROL_BAR_NEXT_BTN.status,t.def=t.def&&e.ID_SHOW_DOCK_DEFINITION.status,t.voice=t.voice&&e.ID_SHOW_CONTROL_BAR_VOLUME.status,t.set=t.set&&e.ID_SHOW_CONTROL_BAR_SETTING.status,t.rate=t.rate&&(e.ID_SHOW_CONTROL_BAR_SETTING.status||this.params.feedMode)&&!e.ID_HIDE_PLAYBACKRATE.status,t.webfull=t.webfull&&!e.ID_HIDE_CONTROL_BAR_WEB_FULLSCREEN.status,t.full=t.full&&e.ID_SHOW_CONTROL_BAR_FULLSCREEN.status,t.list=t.full&&t.list&&e.ID_SHOW_CONTROL_BAR_TVLIST_BTN.status&&!n,t.score=t.score&&!e.ID_HIDE_SCORE_TASK.status&&!n,t.recommend=t.recommend&&e.ID_SHOW_RECOMMEND.status&&!n,t.ctxmenu=e.ID_SHOW_CONTENT_MENU.status,t.ctxmenu_shortcut=e.ID_SHOW_CONTENT_MENU_SHORTCUT.status,t.vinv=t.vinv&&!e.ID_HIDE_PIPBTN.status,t.audiotrack=t.audiotrack&&this.engine.audioEnabled,t.screenshot=t.screenshot&&e.ID_SHOW_SCREENSHOT.status&&!n,"undefined"!=typeof this.params.isExpandScreen&&(t.expandScreen=this.params.isExpandScreen),"undefined"!=typeof this.params.isSupportedHotKey&&(t.hotkeys=this.params.isSupportedHotKey),"undefined"!=typeof this.params.isSupportedShot&&(t.screenshot=this.params.isSupportedShot),this.params.logo!==undefined&&0==this.params.logo&&(t.logo=!1),t.aiview=t.aiview&&!n,t.svp=t.svp&&!n,t.follow=t.follow&&!n,t.interact=t.interact&&!n,t.ivos=t.full&&t.ivos&&!n&&!this.engine.isSimple,this.setting=t,this.emit("viewsetdone")}},{key:"getCss",value:function(){if(this.engine.getEngineType()===ce.a.HTTP_ENGINE){var e="";return this.isTw&&(e=Xe.padCss()),y.a.browser.iPad||y.a.os.androidTablet?z.padCss()+de.padCss()+e:z.mobileCss()+de.mobileCss()+e}return this.engine.isMini?z.css()+be.css():z.css()+de.css()+He.css()}},{key:"init",value:function(){this.playerId=this.params.parentId,this.parent=document.getElementById(this.params.parentId),this.loadCss(this.getCss()),this.engine.getEngineType()===ce.a.HTTP_ENGINE?y.a.browser.iPad||y.a.os.androidTablet?this.loadHtml(z.padHtml(),this.parent):this.loadHtml(z.mobileHtml(),this.parent):this.engine.isMini?this.loadHtml(z.miniHtml("banner"==this.params.skinType),this.parent):this.loadHtml(z.html(),this.parent);var e=this.engine.getEngineType()===ce.a.HTTP_ENGINE;this.video=this.parent.querySelector("video"),this.engine.isSimple||e?this.wrapper=this.videoWrapper=this.parent.querySelector('[data-player-hook="container"]'):(this.wrapper=this.parent.querySelector('[data-player-hook="container"]'),this.videoWrapper=this.parent.querySelector('[data-player-hook="mainlayer"]'),this.ivoslayer=this.parent.querySelector('[data-player-hook="ivoslayer"]')),this.pluginContainer=this.parent.querySelector('[data-player-hook="plgcontainer"]'),this.adContainer=this.parent.querySelector('[data-cupid="container"]'),e?y.a.browser.iPad||y.a.os.androidTablet?this.loadHtml(de.padHtml(),this.videoWrapper):this.loadHtml(de.mobileHtml(),this.videoWrapper):this.engine.isMini?this.loadHtml(be.html(),this.videoWrapper):this.loadHtml(de.html(),this.videoWrapper),e||this.engine.isMini||(this.loadHtml(He.html(),this.videoWrapper),this.addPlugin(new He(this,this.videoWrapper))),this.isTw&&e&&(this.loadHtml(Xe.padHtml(),this.videoWrapper),this.addPlugin(new Xe(this,this.videoWrapper))),this.addPlugin(new z(this,this.parent)),this.engine.isMini?this.addPlugin(new be(this,this.videoWrapper)):this.addPlugin(new de(this,this.videoWrapper)),this.addVideoEvent(),this.engine.init(this.video),this.videoWrapper.addEventListener("contextmenu",(function(e){e.preventDefault()}))}},{key:"addVideoEvent",value:function(){var e,t=this,n=this.engine.isMini,r=0,i=function(){(t.fullscreen&&t.fullscreen.isFullScreen()||t.webfullscreen&&t.webfullscreen.isWebFullScreen()||t.engine.isWebFullScreen)&&t.videoWrapper.offsetWidth>=1366&&t.videoWrapper.offsetHeight>=580?t.videoWrapper.classList.add(et.a):t.videoWrapper.classList.remove(et.a)},a=this;this.clickEvent=function(){if(!a.engine.isAd()&&!a.engine.isPatch()&&!a.engine.isInteracting){var t=a.plugins.ctxmenu;if(t&&(t.isShow||t.isShowPanel))return;1===++r&&(clearTimeout(e),e=setTimeout((function(){var e=a.fullscreen&&a.fullscreen.isFullScreen(),t=a.webfullscreen&&a.webfullscreen.isWebFullScreen();n?(a.pingback.sendClickVideoPingback(),a.callJsDoSomething("miniPlayerVideoClick",{currentTime:a.engine.getCurrenttime(),isMini:!0})):a.playlistShow&&(e||t)?a.emit(Je.a.NTF_HIDE_VIDEOLIST):a.aiBaikeShow&&(e||t)?a.emit(Je.a.NTF_AIView_BAIKE_CLOSE):a.engine.hasStatus(ce.a.Status_Playing)?(a.engine.pause(!0),a.pingback.sendUserActionPingback("ply_pause")):a.engine.isIVEnd||(a.engine.play(!0),a.pingback.sendUserActionPingback("ply_play")),r=0}),200))}},this.video.addEventListener("click",this.clickEvent),this.setting.full&&(this.fullscreen=new Te,this.engine.getEngineType()===ce.a.HTTP_ENGINE?this.fullscreen.init(this.video):this.fullscreen.init(this.wrapper),this.dbClickEvent=function(i){t.engine.isAd()||n||t.engine.isInteracting||(i.preventDefault(),r=0,clearTimeout(e),t.engine.ivosRuning||t.fullToggle())},this.video.addEventListener("dblclick",this.dbClickEvent),this.engine.on(ce.a.NTF_Recharge,(function(){t.fullscreen.exit()})),this.fullscreen.on("change",i.bind(this))),this.setting.webfull&&(this.webfullscreen=new Ee,this.webfullscreen.init(this.videoWrapper),this.setting.autowebfull&&this.webfullscreen.enter(),this.engine.on(ce.a.NTF_Recharge,(function(){t.webfullscreen.exit()})),this.webfullscreen.on("change",i.bind(this))),this.stagesize=new Ce(this.pluginContainer),this.stagesize.on(i.bind(this)),this.ivoslayer&&(this.ivossize=new Ce(this.ivoslayer)),this.mutualpanel=new Ne(this)}},{key:"checkSubView",value:function(e,t){var n=this;this.subView?this.subView[e](t):this.once("subViewInit",(function(){n.subView[e](t)}))}},{key:"addView",value:function(e){this.subView=new e(this,this.engine),this.subView.init(),this.emit("subViewInit")}},{key:"loadCss",value:function(e,t){if(t||!this.params.cssRendered){var n=document.createElement("style");n.setAttribute("data-player-hook","playercss"),n.innerHTML=e,document.querySelector("head").appendChild(n)}}},{key:"loadHtml",value:function(e,t){var n=document.createElement("iqpdiv");n.innerHTML=e,t.appendChild(n.children[0])}},{key:"addPlugin",value:function(e){this.plugins[e.name]=e}},{key:"forEach",value:function(e){for(var t in this.plugins)this.plugins[t][e]()}},{key:"enable",value:function(){this.forEach("enable")}},{key:"disable",value:function(){this.forEach("disable")}},{key:"destroy",value:function(){for(var e in this.clickEvent&&this.video.removeEventListener("click",this.clickEvent),this.dbClickEvent&&this.video.removeEventListener("dblclick",this.dbClickEvent),this.plugins)try{this.plugins[e].destroy()}catch(t){}this.plugins={},document.getElementById(this.playerId)&&(document.getElementById(this.playerId).innerHTML="")}},{key:"callJsDoSomething",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=this.engine.getMovieInfo();nt.log("call js setJsDoSomething: "+e),t.origin=this.params.origin||"h5",t.handleType=e,t.tvid=n.tvid,this.engine.isInteractVideo&&(t.isInteractVideo=this.engine.isInteractVideo,t.uniqueId=this.engine.iv_state.uniqueId),this.emit("setJsDoSomething",t)}},{key:"addVideoList",value:function(e){this.checkSubView("addVideoList",e)}},{key:"removeVideoList",value:function(e){this.checkSubView("removeVideoList",e)}},{key:"setFollowData",value:function(e){this.checkSubView("setFollowData",e)}},{key:"hasNextVideo",value:function(){return!!this.subView&&this.subView.hasNextVideo()}},{key:"switchNextVideo",value:function(e){this.checkSubView("switchNextVideo",e)}},{key:"checkAutoPlay",value:function(){this.checkSubView("checkAutoPlay")}},{key:"switchPreVideo",value:function(){this.checkSubView("switchPreVideo")}},{key:"switchVideo",value:function(e){this.engine.switchVideo(e)}},{key:"getPlayIndex",value:function(){return this.subView?this.subView.getPlayIndex():-1}},{key:"skipPrelude",value:function(e){this.checkSubView("skipPrelude",e)}},{key:"setSmallWindowMode",value:function(e){this.checkSubView("setSmallWindowMode",e)}},{key:"setQiyiUserLogin",value:function(e){this.checkSubView("setQiyiUserLogin",e)}},{key:"setRightBarStatus",value:function(e){this.checkSubView("setRightBarStatus",e)}},{key:"getRealArea",value:function(){for(var e={width:16,height:9},t=this.engine.movieinfo.vidl,n=0;n<t.length;n++)if(t[n].vd===this.engine.getCurrentVD()){e=t[n].realArea;break}return e||(e=this.getWrapperArea()),e}},{key:"getWrapperArea",value:function(){var e=getComputedStyle(this.videoWrapper),t=e.width;if(t=parseInt("100%"===t?0:t),isNaN(t)){var n=this.videoWrapper.offsetWidth;n<=0||null==n||(t=n)}return{width:t,height:parseInt(e.height)}}},{key:"getDownloadSpeed",value:function(){var e=this.engine.getDownloadSpeed();return e&&(e=e===Infinity?0:e>1e9?(e/1e9).toFixed(2)+"Gb/s":e>1e6?(e/1e6).toFixed(2)+"Mb/s":e>1e3?(e/1e3).toFixed(2)+"Kb/s":e>0?e.toFixed(2)+"b/s":0),e}},{key:"fullToggle",value:function(){var e=this.fullscreen;if(this.setting.expandScreen){var t=!!this.engine.isFullScreen,n=!!this.engine.isWebFullScreen;t?this.callJsDoSomething("exitExpandScreen",{from:"full"}):(n&&this.callJsDoSomething("exitExpandScreen",{from:"webfull"}),this.callJsDoSomething("enterExpandScreen",{from:"full"})),this.emit(Je.a.NTF_FullScreen_BeforeChange,t?"enter":"exit")}else e&&e.toggle()}}]),n}(h.a);t.a=rt},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46);function r(e){for(var t,n=e.byteLength,r=[],i=1,a=new Uint8Array(0);i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;t=n-r.length;try{a=new Uint8Array(t)}catch(s){throw"epsb alloc mem error ".concat(t)}var o=0;for(i=0;i<t;o++,i++)o===r[0]&&(o++,r.shift()),a[i]=e[o];return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=n(1),c=n.n(s),u=n(2),d=n.n(u),l=n(3),f=n.n(l),h=(n(169),n(27),n(9),n(94)),p=(n(82),n(90),function(){function e(){d()(this,e),this.map_={}}return f()(e,[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,this.map_[t]);return e}},{key:"remove",value:function(e,t){var n=this.map_[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}]),e}()),_=function(){function e(t,n,r){d()(this,e),this.target=t,this.type=n,this.listener=r,this.target.addEventListener?this.target.addEventListener(n,r,!1):this.target.on&&this.target.on(n,r,!1)}return f()(e,[{key:"off",value:function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}]),e}();function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c()(e);if(t){var i=c()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o()(this,n)}}var g=function(){function e(){d()(this,e),this.bindingMap_=new p}return f()(e,[{key:"destroy",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"on",value:function(e,t,n){if(this.bindingMap_){var r=new _(e,t,n);return this.bindingMap_.push(t,r),this}}},{key:"once",value:function(e,t,n){return this.on(e,t,function(r){this.off(e,t),n(r)}.bind(this))}},{key:"off",value:function(e,t){if(!this.bindingMap_)return this;for(var n=this.bindingMap_.get(t)||[],r=0;r<n.length;++r){var i=n[r];i.target==e&&(i.off(),this.bindingMap_.remove(t,i))}return this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}},{key:"removeAll",value:function(){if(this.bindingMap_){for(var e=this.bindingMap_.getAll(),t=0;t<e.length;++t)e[t].off();this.bindingMap_.clear()}}}]),e}();h.EventEmitter,new h.EventEmitter},function(e,t,n){(function(n){var r;!function(n,i){e.exports=function(n){"use strict";var i,a=(n=n||{}).Base64,o="2.6.4",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(s),u=String.fromCharCode,d=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(l,d)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},_=function(e){return p(f(String(e)))},v=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?v(_(e)):_(e)},y=function(e){return g(e,!0)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var a=e[r],o=e[r+1],c=e[r+2],u=a<<16|o<<8|c;n+=s.charAt(u>>>18)+s.charAt(u>>>12&63)+(void 0!==o?s.charAt(u>>>6&63):"=")+(void 0!==c?s.charAt(63&u):"=")}return t?v(n):n});var m,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=function(e){return e.replace(b,k)},S=function(e){var t=e.length,n=t%4,r=(t>0?c[e.charAt(0)]<<18:0)|(t>1?c[e.charAt(1)]<<12:0)|(t>2?c[e.charAt(2)]<<6:0)|(t>3?c[e.charAt(3)]:0),i=[u(r>>>16),u(r>>>8&255),u(255&r)];return i.length-=[0,0,2,1][n],i.join("")},T=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,S)},P=function(e){return T(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},I=function(e){return x(T(e))},w=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(e){return I(w(e))};n.Uint8Array&&(m=function(e){return Uint8Array.from(P(w(e)),(function(e){return e.charCodeAt(0)}))});var E=function(){var e=n.Base64;return n.Base64=a,e};if(n.Base64={VERSION:o,atob:P,btoa:p,fromBase64:A,toBase64:g,utob:f,encode:g,encodeURI:y,btou:x,decode:A,noConflict:E,fromUint8Array:i,toUint8Array:m},"function"==typeof Object.defineProperty){var D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",D((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",D((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",D((function(){return g(this,!0)})))}}n.Meteor&&(Base64=n.Base64);e.exports?e.exports.Base64=n.Base64:(r=function(){return n.Base64}.apply(t,[]))===undefined||(e.exports=r);return{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this)}).call(this,n(203))},,,,function(e,t,n){var r=n(22),i=n(269);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(e,t,n){"use strict";var r=n(135),i=n(81),a=n(368),o=n(229),s=n(44),c=n(144),u=n(197);e.exports=function(e){var t,n,d,l,f,h,p=i(e),_="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:undefined,y=g!==undefined,m=u(p),b=0;if(y&&(g=r(g,v>2?arguments[2]:undefined,2)),m==undefined||_==Array&&o(m))for(n=new _(t=s(p.length));t>b;b++)h=y?g(p[b],b):p[b],c(n,b,h);else for(f=(l=m.call(p)).next,n=new _;!(d=f.call(l)).done;b++)h=y?a(l,g,[d.value,b],!0):d.value,c(n,b,h);return n.length=b,n}},function(e,t,n){"use strict";var r=n(47),i=n(23),a=n(176),o=n(207),s=n(205),c=n(81),u=n(134),d=Object.assign,l=Object.defineProperty;e.exports=!d||i((function(){if(r&&1!==d({b:1},d(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||a(d({},t)).join("")!=i}))?function(e,t){for(var n=c(e),i=arguments.length,d=1,l=o.f,f=s.f;i>d;)for(var h,p=u(arguments[d++]),_=l?a(p).concat(l(p)):a(p),v=_.length,g=0;v>g;)h=_[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:d},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l),h=n(273),p=n(94);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var v=function(e){c()(n,e);var t=_(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"push",value:function(e){for(var t,n,r,i,a,o=e.pts,s=e.dts,c=e.payload,u=0,d=0;u+5<c.length;)if(255===c[u]&&240==(246&c[u+1])){if(n=2*(1&~c[u+1]),t=(3&c[u+3])<<11|c[u+4]<<3|(224&c[u+5])>>5,a=9e4*(i=1024*(1+(3&c[u+6])))/h.a[(60&c[u+2])>>>2],r=u+t,c.byteLength<r)return;var l={pts:o+d*a,dts:s+d*a,sampleCount:i,audioObjectType:1+(c[u+2]>>>6&3),channelCount:(1&c[u+2])<<2|(192&c[u+3])>>>6,sampleRate:h.a[(60&c[u+2])>>>2],samplingFrequencyIndex:(60&c[u+2])>>>2,sampleSize:16,data:c.subarray(u+7+n,r)};if(this.emit("frame",l),c.byteLength===r)return c=undefined,void this.emit("done");d++,c=c.subarray(r)}else u++}}]),n}(p.EventEmitter)},function(e,t,n){"use strict";var r=n(22),i=n(143),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n.n(r),a=n(328),o=n(609);var s=n(608),c=0;function u(e,t){for(var n,r=8,i=8,a=0;a<t;a++)0!=i&&(n=s.a.readUEV(e,c),c+=n.bitLength,i=(r+n.value+256)%256),r=e[a]}var d=function l(e){switch(i()(this,l),this.rawData=e,this.unit_type=31&e[0],this.unit_type){case 7:this.sps=function(e){c=0;var t,n,r,i,a,o,d=e[0],l=e[1],f=e[2],h=e.subarray(3),p=0,_=[1,1],v=1,g=0,y=0,m=!0,b=s.a.readUEV(h,c);if(c+=b.bitLength,100==d||110==d||122==d||244==d||44==d||83==d||86==d||118==d||128==d){var k=s.a.readUEV(h,c);c+=k.bitLength,3==(g=k.value)&&(c+=1);var x=s.a.readUEV(h,c);c+=x.bitLength;var S=s.a.readUEV(h,c);if(c+=S.bitLength,c+=1,p=s.a.readBit(h,c),c+=1,p)for(var T=0;T<(3!=k.value?8:12);T++){var P=s.a.readBit(h,c);c+=1,P&&u(h,T<6?16:64)}}var I=s.a.readUEV(h,c);c+=I.bitLength;var w=s.a.readUEV(h,c),A=w.value;if(c+=w.bitLength,0===A)t=s.a.readUEV(h,c),c+=t.bitLength;else if(1===A){c+=1,n=s.a.readSEV(h,c),c+=n.bitLength,r=s.a.readSEV(h,c),c+=r.bitLength,i=s.a.readUEV(h,c),c+=i.bitLength;for(var E,D=0;D<i.value;D++)E=s.a.readSEV(h,c),c+=E.bitLength}var q=s.a.readUEV(h,c);c+=q.bitLength,c+=1;var O=s.a.readUEV(h,c);c+=O.bitLength;var R=s.a.readUEV(h,c);c+=R.bitLength;var L=s.a.readBit(h,c);c+=1,L||(c+=1),c+=1;var M=s.a.readBit(h,c);c+=1;var C=0,N=0,B=0,F=0;if(M){var U=s.a.readUEV(h,c);c+=U.bitLength,C=U.value;var j=s.a.readUEV(h,c);c+=j.bitLength,N=j.value;var V=s.a.readUEV(h,c);c+=V.bitLength,B=V.value;var W=s.a.readUEV(h,c);c+=W.bitLength,F=W.value}var H=s.a.readBit(h,c);if(c+=1,H){var z=s.a.readBit(h,c);if(c+=1,z){var Y=s.a.readByte(h,c);switch(c+=8,Y){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:var G=s.a.readByte(h,c);c+=8;var Q=s.a.readByte(h,c);c+=8;var K=s.a.readByte(h,c);c+=8;var $=s.a.readByte(h,c);c+=8,_=[G<<8|Q,K<<8|$]}_&&(v=_[0]/_[1]),255===Y&&(c+=16,c+=16)}var Z=s.a.readBit(h,c);c+=1,Z&&(c+=1);var X=s.a.readBit(h,c);if(c+=1,X){s.a.readBit(h,c,3),c+=3,c+=1;var J=s.a.readBit(h,c);c+=1,J&&(c+=24)}var ee=s.a.readBit(h,c);if(c+=1,ee){var te=s.a.readUEV(h,c);c+=te.bitLength;var ne=s.a.readUEV(h,c);c+=ne.bitLength}var re=s.a.readBit(h,c);c+=1,re&&(a=s.a.readBit(h,c,32),c+=32,o=s.a.readBit(h,c,32),c+=32,m=!!s.a.readBit(h,c),c+=1,y=o/(2*a))}return{payload:h,profile_idc:d,profile_compatibility:l,level_idc:f,chromaFormat:g,width:Math.ceil((16*(O.value+1)-2*C-2*N)*v),height:(2-L)*(R.value+1)*16-2*B-2*F,pixelRatio:_,fps:y,fixedFPS:m}}(Object(a.a)(e.subarray(1)));break;case 6:this.sei=function(e){var t=0,n=0,r=Object(o.c)(e);do{t+=e[r.index]}while(255==Object(o.b)(r,8));do{n+=e[r.index]}while(255==Object(o.b)(r,8));var i=r.index+16,a=i+n;return{type:t,size:n,payload:e.subarray(i,a)}}(Object(a.a)(e.subarray(1)))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=!1,i=null;function a(e){r?i=e:e()}function o(e){var t=r?null:s;r=!0;try{e()}finally{t&&t()}}function s(){if(r=!1,i){var e=i;i=null,e()}}},function(e,t,n){var r=n(221),i=n(562);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports["default"]=e.exports,e.exports.__esModule=!0),a.apply(null,arguments)}e.exports=a,e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(349),i=n(348),a=new(n(532).a);a.register("TS_MP4",r.b),a.register("FLV_MP4",i.b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(1),p=n.n(h),_=(n(147),n(140),n(270),n(329)),v=n(51),g=n(202),y=n(152);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var b=function(e){d()(n,e);var t=m(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{debug:!1};i()(this,n),(a=t.call(this))._eventManager=new _.a,o.debug&&(v.a.enable=!0);var s=Object(g.a)({},o,!1),u=Object(g.a)({},o,!1);return Array.isArray(e)&&(Object(g.a)(s,e[1]||{}),e=e[0]),Array.isArray(r)&&(Object(g.a)(u,r[1]||{}),r=r[0]),a.demuxer=new e(c()(a),s),a.remuxer=new r(c()(a),u),a._eventManager.on(a.demuxer,"demux_info",(function(e){return a.emit("demux_info",e)})).on(a.demuxer,"ESD",(function(e){return a.emit("demux_data",e)})).on(a.remuxer,"ESD",(function(e){return a.emit("remux_data",e)})).on(a.remuxer.endStream,"done",(function(){return a.emit("done")})),a}return o()(n,[{key:"push",value:function(e,t){var n=t.resetInitSegment,r=t.audioSegmentAlignPTS;"number"!=typeof r||isNaN(r)||(this.remuxer.audioAlignPTS=r),"boolean"==typeof n&&n&&this.remuxer.rebuildInitSegment(),this.config=t,this.demuxer.push(e),this._noticeIdle()}},{key:"reset",value:function(){this.demuxer.reset(),this.remuxer.reset()}},{key:"destroy",value:function(){this.demuxer.unpipe(),this.demuxer.endStream.unpipe(),this.remuxer.endStream.removeAllListeners("data"),this.remuxer.endStream.removeAllListeners("done"),this._eventManager.removeAll()}},{key:"fireErr",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.emit("error",e,t,Object.assign(Object.assign({},n),{meta:this.config&&this.config.meta||{}}))}},{key:"_noticeIdle",value:function(){var e=this,t=function(){return e.emit("__idle__")};y.l?t():setTimeout((function(){t()}),0)}}]),n}(n(133).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(127),n(48),n(51)),c=function(){function e(t){i()(this,e),this.bytesArray=[],s.a.assert(!!t,"BmffTypes should be specified to InitSegment or MediaSegment"),this.type=t}return o()(e,[{key:"byteLength",get:function(){var e=0;return this.bytesArray.forEach((function(t){e+=t.byteLength})),e}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return _e})),n.d(t,"a",(function(){return ye}));n(9);var r,i=n(2),a=n.n(i),o=n(3),s=n.n(o),c=n(38),u=n.n(c),d=n(42),l=n.n(d),f=n(4),h=n.n(f),p=n(5),_=n.n(p),v=n(1),g=n.n(v),y=(n(140),n(27),n(115),n(90),n(530)),m=n(51),b=n(612),k=n(613),x=n(152),S=n(611),T=(n(127),n(48),n(107),n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(398)),P=n(255),I=n(400),w=n(272),A=n(607),E=n(382);!function(e){e[e.HEAD=0]="HEAD",e[e.BODY=1]="BODY"}(r||(r={}));var D=n(133),q=n(610);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var R=function(e){h()(n,e);var t=O(n);function n(e){var r;a()(this,n),(r=t.call(this)).tagType=e[0],r.dataSize=16777215&r.readUint32(e,0);var i=16777215&r.readUint32(e,3),o=e[7];return r.timestamp=(o<<24)+i,r.streamId=16777215&r.readUint32(e,8),r.payload=e.subarray(11,11+r.dataSize),r.previousTagSize=r.readUint32(e,11+r.dataSize),r.totalSize=r.previousTagSize+4,r}return s()(n,[{key:"valid",value:function(){var e=this.tagType,t=this.dataSize;return this.previousTagSize===11+t&&(18===e||9===e||8===e)}}]),n}(q.a);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var M,C,N=function(e){h()(n,e);var t=L(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).ctx_=e,i.flv_=r,i.options_=o,i.cache_buffer_=new A.a,i}return s()(n,[{key:"push",value:function(e){var t,n=this.ctx_,r=this.flv_,i=this.cache_buffer_;for(i.append(e),9===r.pos&&i.byteLength>8&&(i.cut(4),r.pos+=4);i.byteLength>0&&(t=i.bytes).length>=4;){var a=11+((t[1]<<16)+(t[2]<<8)+t[3])+4;if(!(t.length>=a))break;var o=i.cut(a),s=new R(o);if(s.valid())this.emit("data",s),r.pos+=s.totalSize;else{var c="Encounter invalid flv tag, tag_length(".concat(s.previousTagSize,"), cache_length(").concat(i.byteLength,"), data(").concat(o,")");m.a.error(c),this.reset(),n.fireErr(E.a.MUX_FLV_TAG_INVALID,c)}}}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(D.a);n(278);function B(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=null,i=null;if(t){try{i=new Uint8Array(e.length+1)}catch(o){m.a.error("flv parseData failed: ".concat(o.message))}i[0]=2,i.set(e,1,e.length)}else i=e;n=F(i),t&&(n.valueLength-=1);var a=e.subarray(n.valueLength,e.byteLength);return r=F(a),{key:n.value,value:r.value,valueLength:n.valueLength+r.valueLength}}function F(e){var t={},n=0,r=new q.a;switch(e[0]){case 0:n=8,t.value=j(e.subarray(1,9)),t.valueLength=1+n;break;case 1:n=1,t.value=0!==e[1],t.valueLength=1+n;break;case 2:n=e[1]<<8|e[2],t.value=U(e.subarray(3,3+n)),t.valueLength=3+n;break;case 3:for(n=1,t.value={};0!=e[n]||0!=e[n+1]||9!=e[n+2];){var i=e.subarray(n,e.byteLength),a=B(i,!0);t.value[a.key]=a.value,n+=a.valueLength,i=null}n+=3,t.valueLength=n;break;case 4:n=e[1]<<8|e[2],t.value=U(e.subarray(3,3+n)),t.valueLength=3+n;break;case 5:t.value=null,n=1,t.valueLength=n;break;case 6:t.value=undefined,n=1,t.valueLength=n;break;case 7:t.value=e[1]<<8|e[2],n=3,t.valueLength=n;break;case 8:var o=e[1]<<24|e[2]<<16|e[3]<<8|e[4];n=5,t.value={};for(var s=0;s<o;s++){var c=B(e.subarray(n,e.byteLength),!0);t.value[c.key]=c.value,n+=c.valueLength}n+=3,t.valueLength=n;break;case 9:break;case 10:for(var u=[],d=r.readUint32(e,1),l=0;l<d;l++){var f=e.subarray(9*l+4+1,e.byteLength);u.push(F(f).value)}t.value=u,n=9*u.length+4+1,t.valueLength=n;break;case 11:t.value=j(e.subarray(0,8)),n=11,t.valueLength=n;break;case 12:n=e[1]<<24|e[2]<<16|e[3]<<8|e[4],t.value=U(e.subarray(5,5+n)),t.valueLength=5+n;break;default:return null}return t}function U(e){return String.fromCharCode.apply(null,e)}function j(e){var t=new Uint8Array(e),n=new DataView(t.buffer),r=n.getFloat64(0);return n=null,t=null,r}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.AAC=10]="AAC"}(M||(M={})),function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(C||(C={}));var W,H=function(e){h()(n,e);var t=V(n);function n(){var e;return a()(this,n),(e=t.apply(this,arguments)).pos=0,e}return n}(D.a),z=n(595);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.AAC_RAW=1]="AAC_RAW"}(W||(W={}));var G=function(e){h()(n,e);var t=Y(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).dts=r,i.pts=r,i.aacPacketType=e[0],i.payload=e.subarray(1),0===i.aacPacketType&&(i.audioSpecificConfig=Object(z.a)(i.payload)),i}return n}(q.a);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var K,$=function(e){h()(n,e);var t=Q(n);function n(e,r){var i;switch(a()(this,n),(i=t.call(this)).soundFormat=(240&e[0])>>4,i.soundRate=(12&e[0])>>2,(2&e[0])>>1){case 0:i.sampleSize=8;break;case 1:i.sampleSize=16}switch(i.soundType=1&e[0],i.soundFormat){case M.AAC:i.soundData=new G(e.subarray(1),r);break;default:m.a.error("flv tag audioData encounter unknown soundFormat ".concat(i.soundFormat))}return i}return n}(q.a);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",e[e.NALU=1]="NALU",e[e.SEQUENCE_END=2]="SEQUENCE_END"}(K||(K={}));var X=new P.a,J=[];X.on("nalu",(function(e){switch(e.unit_type){case 7:case 8:case 5:case 1:J.push(e)}}));var ee,te=function(e){h()(n,e);var t=Z(n);function n(e,r,i){var o;a()(this,n),o=t.call(this);var s=e.flv,c=e.options;if(o.avcPacketType=r[0],1===o.avcPacketType){var u=16777215&o.readUint32(r,0);o.cts=u<<8>>8}else o.cts=0;if(o.dts=i,o.pts=o.dts+o.cts,o.payload=r.subarray(4),0===o.avcPacketType)o.decoderConfigurationRecord=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=1+(3&e[4]),o=[],s=[],c=5,u=31&e[c];if(0===u)m.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No SPS");else if(u>0){u>1&&m.a.warn("Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(u)),c++;for(var d=0;d<u;d++){var l=e[c]<<8|e[c+1];c+=2,s.push(e.subarray(c,c+l)),c+=l}}var f=e[c];if(0===f)m.a.error("Flv: Invalid AVCDecoderConfigurationRecord: No PPS");else if(f>0){f>1&&m.a.warn("Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(f)),c++;for(var h=0;h<f;h++){var p=e[c]<<8|e[c+1];c+=2,o.push(e.subarray(c,c+p)),c+=p}}return{version:t,profile:n,profileCompatibility:r,level:i,naluSizeLength:a,spsNalus:s,ppsNalus:o}}(o.payload),s.decoderConfigurationRecord=o.decoderConfigurationRecord;else if(c.decodeCodec){o.naluList=[];var d={pts:o.pts,dts:o.dts,payload:o.payload};if(!o.decoderConfigurationRecord){s.decoderConfigurationRecord&&(d.naluSizeLength=s.decoderConfigurationRecord.naluSizeLength),X.push(d);for(var l=0;l<J.length;l++)o.naluList.push(J[l]);J.splice(0,J.length)}}return o}return n}(q.a);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}!function(e){e[e.AVC=7]="AVC"}(ee||(ee={}));var re=function(e){h()(n,e);var t=ne(n);function n(e,r,i){var o;switch(a()(this,n),(o=t.call(this)).frameType=r[0]>>4&15,o.isKeyframe=1===o.frameType,o.codecId=15&r[0],o.codecId){case ee.AVC:o.videoData=new te(e,r.subarray(1),i);break;default:m.a.error("flv tag videoData encounter unknown codecId ".concat(o.codecId))}return o}return n}(q.a);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ae=function(e){h()(n,e);var t=ie(n);function n(e,r){var i,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return a()(this,n),(i=t.call(this)).flv_=r,i.options_=o,i.pipeCtx={ctx:e,flv:r,options:o},i}return s()(n,[{key:"push",value:function(e){switch(e.tagType){case 18:this.parseScriptData_(e.payload);break;case 9:this.parseVideoData_(e);break;case 8:this.parseAudioData_(e);break;default:m.a.error("still not supported flv tag type ".concat(e.tagType))}}},{key:"flush",value:function(){this.emit("done")}},{key:"reset",value:function(){this.emit("reset")}},{key:"parseScriptData_",value:function(e){var t=this.flv_,n=function(e){var t={},n=B(e);return t[n.key]=n.value,t}(e);t.emit("data",Object.assign({type:"tag",tagType:18},n))}},{key:"parseVideoData_",value:function(e){var t=this.flv_,n=new re(this.pipeCtx,e.payload,e.timestamp),r=Object.assign({type:"tag",tagType:9,timestamp:e.timestamp},n);t.emit("data",r)}},{key:"parseAudioData_",value:function(e){var t=this.flv_,n=new $(e.payload,e.timestamp),r=n.soundData;r.audioSpecificConfig&&(t.audioSpecificConfig=r.audioSpecificConfig);var i=Object.assign({type:"tag",tagType:8,timestamp:e.timestamp},n);t.emit("data",i)}}]),n}(D.a);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var se=function(e){h()(n,e);var t=oe(n);function n(e){var r;return a()(this,n),(r=t.call(this)).signature=String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2]),r.version=e[3],r.hasAudio=(4&e[4])>>>2==1,r.hasVideo=1==(1&e[4]),r.offset=r.readUint32(e,5),r}return s()(n,[{key:"valid",value:function(){return"FLV"===this.signature}}]),n}(q.a);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ue=function(e){h()(n,e);var t=ce(n);function n(e){var i,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return a()(this,n),(i=t.call(this,e,o)).cache_buffer_=new A.a,i.flv_=new H,i.flv_.stage=r.HEAD,i.body_=new N(i.ctx_,i.flv_,o),i.tags_=new ae(i.ctx_,i.flv_,o),i.pipe(i.body_),i.body_.pipe(i.tags_),i}return s()(n,[{key:"endStream",get:function(){return this.flv_}},{key:"push",value:function(e){var t=this.ctx_,i=this.flv_,a=this.cache_buffer_,o=l()(g()(n.prototype),"constraintPushData_",this).call(this,e),s=this.cache_buffer_.byteLength;m.a.log("flv demux received ".concat(o.byteLength," bytes, cache ").concat(s," bytes."));var c=t.config;for(Object(x.g)(c.offsetPos)&&(i.pos=c.offsetPos),a.append(o),i.pos<9?i.stage=r.HEAD:i.stage=r.BODY;;)if(i.stage===r.HEAD){if(!(a.byteLength>=9))break;var u=a.cut(9),d=new se(u);if(!d.valid()){t.fireErr(E.a.MUX_FLV_HEAD_SIGNATURE);break}i.emit("data",{type:"head",signature:d.signature,version:d.version,hasAudio:d.hasAudio,hasVideo:d.hasVideo,offset:d.offset}),i.stage=r.BODY,i.pos=9}else if(i.stage===r.BODY){if(a.byteLength>=4){var f=a.byteLength,h=a.bytes;a.clear(),h&&this.emit("data",h),i.pos+=f}break}c.done&&(this.reset(),i.emit("done"))}},{key:"reset",value:function(){var e=this.body_,t=this.tags_,n=this.flv_,i=this.cache_buffer_;n.stage=r.HEAD,n.pos=0,i.clear(),e.reset(),t.reset()}}]),n}(w.a),de=n(616),le=n(344),fe=n(202),he=function me(){a()(this,me)};function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var _e=function(e){h()(n,e);var t=pe(n);function n(){var e;return a()(this,n),(e=t.call(this,[ue,{decodeCodec:!0}],de.a)).headerCodec=new P.a,e._offsetTime=0,e.demuxer.endStream.on("data",(function(t){e.isHeader?e.handleHeader_(t):e.handleFrames_(t)})).on("done",(function(){e.isHeader?(e.headerDone=!0,e.checkHeader_()):e.handleDataDone_()})).on("error",(function(e){})),e.headerCodec.on("nalu",(function(t){7===t.unit_type?(e.box.sps=!0,e.box.vc.spsnalu=t,e.box.vc.pixelRatio=t.sps.pixelRatio):8===t.unit_type&&(e.box.pps=!0,e.box.vc.ppsnalu=t),e.checkHeader_()})),e}return s()(n,[{key:"push",value:function(e,t){var r=t.offsetPos;"number"!=typeof r||isNaN(r)||r<0||(t.meta.header?(this.box=new he,this.box.meta=t.meta,this.isHeader=!0):(this.faConfig=t.meta.vac.ac,this.fvConfig=t.meta.vac.vc,"number"==typeof t.meta.offset&&t.meta.offset>=0?this._offsetTime=1e3*t.meta.offset:this._offsetTime=0,this.isHeader=!1,this.currentFrame=[],this.newGops_()),l()(g()(n.prototype),"push",this).call(this,e,t))}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0,this.newGop_()}},{key:"handleHeader_",value:function(e){if("head"===e.type)this.box.hasAudio=e.hasAudio,this.box.hasVideo=e.hasVideo;else if("tag"===e.type)switch(e.tagType){case 18:this.updateScript_(e);break;case 8:this.box.ac||this.updateAudio_(e);break;case 9:this.box.vc||this.updateVideo_(e)}}},{key:"handleFrames_",value:function(e){switch(e.tagType){case 8:this.appendAudio_(e);break;case 9:this.appendVideo_(e)}}},{key:"appendVideo_",value:function(e){var t=this;e.videoData.naluList.forEach((function(e){var n=t.currentFrame||[];0===n.length?(n.keyframe=!1,n.duration=0,n.byteLength=e.rawData.byteLength,n.naluCount=1):(n.naluCount++,n.byteLength+=e.rawData.byteLength),n.pts=90*(e.pts+t._offsetTime),n.dts=90*(e.dts+t._offsetTime),t.gop&&0===t.gop.length&&e.unit_type,5===e.unit_type&&(n.keyframe=!0),n.push(e)})),this.pushFrameIntoGop_()}},{key:"appendAudio_",value:function(e){var t=e.soundData,n=Object(fe.a)({},this.faConfig);if(n.data=t.payload,n.dts=90*(t.dts+this._offsetTime),n.pts=90*(t.pts+this._offsetTime),null==this.audioTrack&&(this.audioTrack={id:257,type:"audio",isAAC:!0,duration:Number.POSITIVE_INFINITY,stream_type:15},this.audioTrack.frames=[],this.audioTrack.frames.byteLength=0),null==this.audioTrack.config){var r=Object(T.a)(n.audioObjectType,n.samplingFrequencyIndex,n.channelCount);this.audioTrack.config=r.config,this.audioTrack.sampleRate=r.sampleRate,this.audioTrack.inputTimeScale=9e4,this.audioTrack.timescale=r.sampleRate,this.audioTrack.channelCount=r.channelCount,this.audioTrack.codec=r.codec,this.audioTrack.realCodec=r.realCodec}this.audioTrack.frames.push(n),this.audioTrack.frames.byteLength+=t.payload.byteLength}},{key:"updateScript_",value:function(e){var t=e.onMetaData;this.box.duration=t.duration,this.box.filesize=t.filesize,this.box.height=t.height,this.box.keyframePositions=t.keyframes.filepositions,this.box.keyframeTimes=t.keyframes.times,this.box.width=t.width}},{key:"updateAudio_",value:function(e){var t=e.soundData,n=t.audioSpecificConfig;this.box.ac={audioObjectType:n.audioObjectType,channelCount:n.channelConfiguration,dts:t.dts,pts:t.pts,sampleCount:n.sampleCount,sampleRate:n.sampleRate,sampleSize:e.sampleSize,samplingFrequencyIndex:n.samplingFrequencyIndex,type:"audio"}}},{key:"updateVideo_",value:function(e){var t=e.videoData,n=t.decoderConfigurationRecord;this.box.naluSizeLength=n.naluSizeLength,this.box.vc={height:0,levelIdc:0,pixelRatio:[],pps:[],profileCompatibility:0,profileIdc:0,sps:[],width:0};var r=this.box.vc,i=function(e){var t=function(e){var t=[];if(e>0)for(;e;)t.unshift(255&e),e>>=8;else t.push(0);return t}(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),{naluSizeLength:t.length,payload:n}};n.ppsNalus&&(r.pps=n.ppsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.pps[0])))),n.spsNalus&&(r.sps=n.spsNalus,this.headerCodec.push(Object.assign({pts:t.pts,dts:t.dts},i(r.sps[0])))),r.profileIdc=n.profile,r.profileCompatibility,n.profileCompatibility,r.levelIdc=n.level,r.width=this.box.width,r.height=this.box.height}},{key:"checkHeader_",value:function(){this.box.pps&&this.box.sps&&this.headerDone&&this.isHeader&&(this.demuxer.emit("demux_info",{type:"head",data:this.box}),this.headerDone=!1,this.isHeader=!1)}},{key:"handleDataDone_",value:function(){if(this.gop&&this.gop.length>0){var e=this.gop[0],t={id:256,type:"video",timescale:9e4,duration:Number.POSITIVE_INFINITY,gops:[],firstDTS:0,firstPTS:0,codec:"",stream_type:15,constainer:"video/mp4",baseMediaDecodeTime:Math.max(e.pts,0)};this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.push(this.gop),t.gops=this.gops,t.firstDTS=e.dts,t.firstPTS=e.pts;var n=Object(I.a)(this.fvConfig.spsnalu.sps);t.codec=n.codec,Object(fe.a)(t,this.fvConfig),this.audioTrack&&this.audioTrack.frames.length>0&&(this.audioTrack.firstPTS=this.audioTrack.frames[0].pts,this.audioTrack.firstDTS=this.audioTrack.frames[0].dts,this.audioTrack.baseMediaDecodeTime=Math.max(this.audioTrack.firstDTS,0)),this.remuxer.push({videoTrack:t,audioTrack:this.audioTrack}),this.audioTrack=null}}},{key:"pushFrameIntoGop_",value:function(){var e=this.currentFrame,t=this.gop.length;if(t>0){var n=this.gop[t-1],r=n.duration;n.duration=e.dts-n.dts,e.duration=n.duration,1===t&&0===r&&(this.gop.duration+=n.duration)}e.length>0&&(this.gop.push(e),this.gop.duration+=e.duration,this.gop.byteLength+=e.byteLength,this.gop.naluCount+=e.naluCount),this.currentFrame=[]}}]),n}(le.a),ve=n(412);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _()(this,n)}}var ye=function(e){h()(n,e);var t=ge(n);function n(e){var r;a()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:ve,watch:["loader","mux"],transmuxer:"FLV_MP4"}))).$TAG="FlvMux",r.seekingOnceChecked_=!1;var i=u()(r),o=i.$stream,s=i.$videoMediaStartTimes_,c=i.$transmuxer,d=i.$eventManager,l=o.restrictor;return d.on(c,"E",(function(e){r.$throwError(Object(S.a)(e.code,e.message))})).on(c,"I",(function(){r.tryPush_()})).on(c,"DI",(function(e){"head"===e.type&&r.$ipc.emit("headerComplete",e.data)})).on(c,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var c=new b.a("video"===t?1:2);c.bytesArray=o,c.trackId=a,c.container=n,c.codec=i,"video"===t?l.videoInitSegment=c:"audio"===t&&(l.audioInitSegment=c),r.tryProvideArtefact_()}break;case"fragment":var u,d=e.contentType,f=e.data,h=e.duration,p=e.startDTS,_=e.startPTS;e.nextSegmentPTS;if(m.a.log("".concat(r.LOG_TAG," parsed ").concat(d,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(_.toFixed(3),"/").concat((_+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void m.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===d?((u=new k.a(1)).bytesArray=f,u.startTime=p,u.duration=h,s.push(u.startTime),l.videoMediaSegments.push(u)):"audio"===d&&((u=new k.a(2)).bytesArray=f,u.startTime=_,u.duration=h,l.audioMediaSegments.push(u)),r.tryProvideArtefact_()}})).on(c,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r.$ipc.on("fragmentHeader",(function(e){c.push(e.bytes,{done:!0,meta:e.meta,offsetPos:0})})),r}return s()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(x.c)(r)&&Object(x.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,c=r.meta,u=c.fragKey,d=c.byteOffset,l=0;if(a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||u==this.$currentDataMeta.fragKey)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=c,!e.conf.alwaysSeekKeyframe){var f=o.currentTimeRange,h=o.currentTime;l=(f?f.end:h)||0}n.push(s,{done:!0,stubTime:l,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:c,offsetPos:d}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(x.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):m.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){l()(g()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(y.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return ne})),n.d(t,"a",(function(){return ie}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(42),d=n.n(u),l=n(4),f=n.n(l),h=n(5),p=n.n(h),_=n(1),v=n.n(_),g=(n(140),n(27),n(115),n(90),n(530)),y=n(51),m=n(612),b=n(613),k=n(152),x=n(611),S=n(411),T=n(272),P=n(607),I=n(382),w=function ae(e){i()(this,ae);var t,n=0,r=((15&e[1])<<8|e[2])-4-5;for(this.pmtTable=[];n<r;n+=4)if(0==(t=e[n+8]<<8|e[n+9])){var a=(31&e[10+n])<<8|e[11+n];y.a.log("packet->network_PID %0x /n/n",a)}else this.pmtTable.push({programNum:t,program_map_PID:(31&e[10+n])<<8|e[11+n]})},A=function oe(e){i()(this,oe);var t=(15&e[1])<<8|e[2],n=(15&e[10])<<8|e[11];if(!(n<0)){if(n>2)for(var r=0;r<n;){r+=e[13+r]}var a=12+n,o=t-n-9-4,s=a+o;if(a>=s)y.a.warn("es_section_pos < es_section_end ".concat(a,", ").concat(s));else{this.pes_table=[];for(var c=0;c<o;){var u=a+c,d=e[u],l=8191&(e[u+1]<<8|e[u+2]),f=4095&(e[u+3]<<8|e[u+4]);this.pes_table.push({streamType:d,PID:l}),c+=f+5}}}},E=function(){function e(t){i()(this,e),this.pat_table=[],this.pes_streams=[]}return o()(e,[{key:"currentProgramPID",get:function(){for(var e=[],t=0;t<this.pat_table.length;t++)e.push(this.pat_table[t].pid);return e.length>0?e[0]:-1}},{key:"tracks",get:function(){return this.pes_streams}},{key:"reset",value:function(){this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"parse",value:function(e){0===e.PID?this._parsePat(e):1===e.PID||2===e.PID||3<=e.PID&&e.PID<=15||17===e.PID||e.PID===this.currentProgramPID&&this._parsePmt(e)}},{key:"findTrack",value:function(e){for(var t=null,n=this.pes_streams,r=0;r<n.length;r++)if(n[r].id===e){t=n[r];break}return t}},{key:"_parsePat",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new w(t),i=0;i<r.pmtTable.length;i++)this._add_pid_to_pmt(r.pmtTable[i].programNum,r.pmtTable[i].program_map_PID);return r}},{key:"_add_pid_to_pmt",value:function(e,t){var n=this.pat_table;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e)||n.push({id:e,pid:t})}},{key:"_parsePmt",value:function(e){var t;if(e.payload_unit_start_indicator){var n=e.payload[0];t=e.payload.subarray(n+1)}else t=e.payload;for(var r=new A(t),i=0;i<r.pes_table.length;i++)this._add_pes_stream(r.pes_table[i],r);return r}},{key:"_add_pes_stream",value:function(e,t){var n=this.pes_streams;(function(e){for(var t,r=0;r<n.length;r++)if((t=n[r]).id===e)return{idx:r,item:t};return null})(e.PID)||n.push({id:e.PID,stream_type:e.streamType,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}}]),e}(),D=(n(107),n(133));function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var O=function(e){f()(n,e);var t=q(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this)).videoTrack=null,o.audioTrack=null,o.captionTrack=null,o.tracksGot=!1,o.context=e,o.PSI=r,o.options=a,o}return o()(n,[{key:"push",value:function(e){for(var t=this.context.config.resetInitSegment,n=e,r=!1,i=!1,a=0;a<n.length;a++)switch(n[a].type){case"video":r=!0;break;case"audio":i=!0}if(t&&!this.tracksGot&&this.PSI.tracks.length>0){this.tracksGot=!0;var o=this.PSI.tracks.length,s=r,c=i;2===o&&(s=c=!0),this.context.emit("info",{tracksExpected:o,audio:c,video:s})}for(var u,d=0;d<n.length;d++)switch((u=n[d]).type){case"video":this._complexVideo(u);break;case"audio":this._complexAudio(u);break;default:y.a.warn("unsupported track type ".concat(u.type))}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null,this.tracksGot=!1}},{key:"_complexVideo",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="video",t.gops=e,t.firstDTS=e[0][0].dts,t.firstPTS=e[0][0].pts,t.duration=Number.POSITIVE_INFINITY,this.videoTrack=t,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(e){var t=this.PSI.findTrack(e.trackId);t&&(t.type="audio",t.frames=e,t.firstPTS=t.firstDTS=e[0].dts,t.duration=Number.POSITIVE_INFINITY,this.audioTrack=t,this.emit("data",{audioTrack:this.audioTrack}))}}]),n}(D.a),R=n(337),L=n(398);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var C=function(e){f()(n,e);var t=M(n);function n(e){var r;return i()(this,n),(r=t.call(this)).PSI=e,r.trackId=null,r.codec=new R.a,r.codec.on("frame",(function(e){r.frames.push(e),r.frames.byteLength+=e.data.byteLength,r.frames.trackId=r.trackId})),r.newFrames_(),r}return o()(n,[{key:"push",value:function(e){15===e.stream_type&&(this.trackId=e.pid,this.codec.push({dts:e.pes.DTS,pts:e.pes.PTS,payload:e.pes.data_byte}))}},{key:"flush",value:function(){if(this.frames.length>0){var e=this.frames.length,t=this.frames[0],n=this.frames[e-1],r=n.sampleRate*n.sampleCount/9e4;this.frames.firstDTS=t.dts,this.frames.firstPTS=t.pts,this.frames.duration=1===e?r:r+(n.pts-t.pts),this.updateTrackMeta_(t),this.emit("data",this.frames),this.reset(),this.emit("done")}}},{key:"reset",value:function(){this.trackId=null,this.newFrames_()}},{key:"newFrames_",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}},{key:"updateTrackMeta_",value:function(e){var t=this.PSI.findTrack(this.trackId),n=Object(L.a)(e.audioObjectType,e.samplingFrequencyIndex,e.channelCount);t.config=n.config,t.sampleRate=n.sampleRate,t.inputTimeScale=t.inputTimeScale||t.timescale,t.timescale=n.sampleRate,t.channelCount=n.channelCount,t.codec=n.codec,t.realCodec=n.realCodec,t.isAAC=!0}}]),n}(D.a),N=n(255),B=n(340),F=n(400);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var j=function(e){f()(n,e);var t=U(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.a,this.codec.on("nalu",(function(t){if(t instanceof B.a){if(7===t.unit_type){var n=e.PSI.findTrack(e.trackId),r=Object(F.a)(t.sps);n.codec=r.codec,n.width=t.sps.width,n.height=t.sps.height,n.profileIdc=t.sps.profile_idc,n.profileCompatibility=t.sps.profile_compatibility,n.levelIdc=t.sps.level_idc,n.pixelRatio=t.sps.pixelRatio,n.sps=[t.rawData]}else if(8===t.unit_type){e.PSI.findTrack(e.trackId).pps=[t.rawData]}e.grouping_(t)}}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(27===t){this.codec||this._initCodec(),this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){9===e.unit_type?(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():y.a.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts):(5===e.unit_type&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e)),this.currentFrame.duration=e.dts-this.currentFrame.dts}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a),V=n(401),W=n(153);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var z=function(e){f()(n,e);var t=H(n);function n(e){var r;return i()(this,n),(r=t.call(this)).trackId=null,r.currentFrame=[],r.hevcMetVirtualAUD_=!0,r.PSI=e,r.newGop_(),r.newGops_(),r}return o()(n,[{key:"_initCodec",value:function(){var e=this;this.codec=new N.b,this.codec.on("nalu",(function(t){if(32===t.unit_type){var n=e.PSI.findTrack(e.trackId);n.vps=[t.rawData],n.hevc_vps=t.vps}else if(33===t.unit_type){var r=e.PSI.findTrack(e.trackId),i=Object(V.a)(t.sps);r.codec=i.codec,r.width=t.sps.width,r.height=t.sps.height,r.profileIdc=t.sps.profile_idc,r.profileCompatibility=t.sps.profile_compatibility,r.levelIdc=t.sps.level_idc,r.pixelRatio=t.sps.pixelRatio,r.sps=[t.rawData],r.hevc_sps=t.sps}else if(34===t.unit_type){var a=e.PSI.findTrack(e.trackId);a.pps=[t.rawData],a.hevc_pps=t.pps}e.grouping_(t)}))}},{key:"push",value:function(e){var t=e.stream_type,n=e.pes,r=e.pid;if(36===t){this.codec||this._initCodec(),this.trackId=r;var i={pts:n.PTS,dts:n.DTS,payload:n.data_byte};this.codec.push(i)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this.pushFrameIntoGop_(),this.currentFrame=[]),this.gop.length>0&&this.pushGopIntoGroup_()}},{key:"reset",value:function(){this.codec&&this.codec.reset(),this.currentFrame=[],this.newGop_(),this.newGops_()}},{key:"grouping_",value:function(e){this.hevcMetVirtualAUD_&&(this.currentFrame.length>0&&(this.currentFrame.duration=e.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this.pushGopIntoGroup_()),this.currentFrame.keyframe||this.gop.length>0?this.pushFrameIntoGop_():y.a.warn("hevc codec drop frame")),Object(W.e)(this.currentFrame,"keyframe")&&(this.prevFrame=this.currentFrame),this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=e.pts,this.currentFrame.dts=e.dts,this.hevcMetVirtualAUD_=!1),e.unit_type<=21&&e.unit_type>=16&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=e.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(e),this.prevFrame&&(this.prevFrame.duration=e.dts-this.prevFrame.dts),e.unit_type>=0&&e.unit_type<=21&&(this.hevcMetVirtualAUD_=!0)}},{key:"newGop_",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"pushFrameIntoGop_",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"newGops_",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"pushGopIntoGroup_",value:function(){var e=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=e.dts,this.gops.firstPTS=e.pts,this.gops.push(this.gop),this.emit("data",this.gops),this.newGop_(),this.newGops_(),this.emit("done")}}]),n}(D.a);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var G=function(e){f()(n,e);var t=Y(n);function n(e,r){var a,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return i()(this,n),(a=t.call(this)).context=e,a.PSI=r,a.options=o,a.streams=[],a}return o()(n,[{key:"initADTS_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.adtsStream=new C(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(k.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void y.a.warn("drop adts, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t])}))}},{key:"initAVC_",value:function(){var e=this,t=this.PSI,n=this.streams,r=this.context,i=this.avcStream=new j(t);n.push(i),i.on("data",(function(t){var n=r.config.stubTime;if(Object(k.g)(n)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<n)return void y.a.warn("drop avc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(n,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"initHEVC_",value:function(){var e=this,t=this.PSI,n=this.context,r=this.streams,i=this.hevcStream=new z(t);r.push(i),i.on("data",(function(t){var r=n.config.stubTime;if(Object(k.g)(r)){var i=t.firstPTS/9e4,a=(t.firstPTS+t.duration)/9e4;if(a<r)return void y.a.warn("drop hevc gop, start/end/stubTime(".concat(i.toFixed(3),"/").concat(a.toFixed(3),"/").concat(r,")"))}e.emit("data",[t]),e.adtsStream&&e.adtsStream.flush()}))}},{key:"push",value:function(e){var t=this.options,n=(this.PSI,e.stream_type);if(t.decodeCodec)switch(n){case 27:this.avcStream||this.initAVC_(),this.avcStream.push(e);break;case 36:this.hevcStream||this.initHEVC_(),this.hevcStream.push(e);break;case 15:this.adtsStream||this.initADTS_(),this.adtsStream.push(e);break;default:y.a.warn("ts elementary encounter unknown stream type ".concat(n))}else this.emit("data",e)}},{key:"flush",value:function(){for(var e=this.streams,t=0;t<this.streams.length;t++){var n=e[t];n&&n.flush()}this.emit("done")}},{key:"reset",value:function(){for(var e=0;e<this.streams.length;e++){var t=this.streams[e];t&&t.reset()}this.emit("reset")}}]),n}(D.a),Q=function(){function e(t){i()(this,e);var n=t[7]>>6,r=t[8];this.PTS=0,2==(2&n)&&(this.PTS=this.calcTimestamp_(t,9)),this.DTS=this.PTS,1==(1&n)&&(this.DTS=this.calcTimestamp_(t,14)),this.data_byte=t.subarray(9+r)}return o()(e,[{key:"calcTimestamp_",value:function(e,t){return 536870912*(14&e[t])+(e[t+1]<<22)+(e[t+2]>>1<<15)+(e[t+3]<<7)+(e[t+4]>>1)}}]),e}();function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var $=function(e){f()(n,e);var t=K(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).PSI=r,a.PID=null,a.cache_buffer=new P.a,a}return o()(n,[{key:"push",value:function(e){var t=this;e.PID>255&&e.PID<8191&&(-1==this.PSI.currentProgramPID?t.pushPacket_(e):this.PSI.currentProgramPID!==e.PID&&(1===e.payload_unit_start_indicator&&t.assembleOnePES_(),t.pushPacket_(e)))}},{key:"flush",value:function(){this.assembleOnePES_(),this.emit("done")}},{key:"reset",value:function(){this.clearCached_(),this.emit("reset")}},{key:"clearCached_",value:function(){this.PID=null,this.cache_buffer.clear()}},{key:"pushPacket_",value:function(e){var t=this.cache_buffer,n=t.empty;n&&0===e.payload_unit_start_indicator||(n&&(this.PID=e.PID),t.append(e.payload))}},{key:"assembleOnePES_",value:function(){var e=this.cache_buffer;if(!e.empty){var t;try{t=e.bytes}catch(a){throw"pes alloc mem err ".concat(e.byteLength)}var n=new Q(t),r=this.PSI.findTrack(this.PID);if(r){var i={pid:r.id,stream_type:r.stream_type,pes:n};this.emit("data",i)}this.clearCached_()}}}]),n}(D.a),Z=function(){function e(t){if(i()(this,e),this.sync_byte=t[0],this.payload_unit_start_indicator=t[1]>>6&1,this.PID=8191&(t[1]<<8|t[2]),this.afc=t[3]>>4&3,this.has_payload=1&this.afc,this.has_adaptation=2&this.afc,this.has_payload)if(this.has_adaptation){var n=t[4];this.payload=t.subarray(5+n)}else this.payload=t.subarray(4)}return o()(e,[{key:"valid",value:function(){return 71===this.sync_byte&&1===this.has_payload}}]),e}();function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var J=function(e){f()(n,e);var t=X(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this,e,a)).cache_buffer_=new P.a,r.psi_=new E(r.ctx_),r.pesStream_=new $(r.ctx_,r.psi_),r.elementaryStream_=new G(r.ctx_,r.psi_,a),r.complexStream_=new O(r.ctx_,r.psi_,a),r.pipe(r.pesStream_),r.pesStream_.pipe(r.elementaryStream_),r.elementaryStream_.pipe(r.complexStream_),r}return o()(n,[{key:"endStream",get:function(){var e=this.elementaryStream_;return this.options_.decodeCodec&&(e=this.complexStream_),e}},{key:"push",value:function(e){var t=this.ctx_,r=this.cache_buffer_,i=this.psi_,a=t.config,o=a.done,s=a.meta,c=d()(v()(n.prototype),"constraintPushData_",this).call(this,e),u=r.byteLength,l=null;for(s&&Object(k.g)(s.byteOffset)&&(l=s.byteOffset-u),y.a.log("hls demux received ".concat(c.byteLength," bytes, cache ").concat(u," bytes. ").concat(o?"chunk done":"")),r.append(c);r.byteLength>=188;){var f=r.cut(188);if(f){var h=new Z(f);if(!h.valid()){var p="Encounter invalid ts packet, startByte: ".concat(l," endByte: ").concat(l+f.byteLength," packet_length(").concat(f.length,"), cache_length(").concat(r.byteLength,"), has_payload(").concat(h.has_payload,"), data(").concat(f,")");y.a.error(p),this.reset(),t.fireErr(I.a.MUX_TS_SYNC_BYTE,p,{startByte:l,endByte:l+f.byteLength});break}i.parse(h),this.emit("data",h),l+=f.byteLength}}r.empty&&o&&this.emit("done")}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}}]),n}(T.a),ee=n(616);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ne=function(e){f()(n,e);var t=te(n);function n(){var e;return i()(this,n),(e=t.call(this,[J,{decodeCodec:!0}],ee.a)).demuxer.endStream.pipe(e.remuxer),e}return n}(n(344).a);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var ie=function(e){f()(n,e);var t=re(n);function n(e){var r;i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:S,watch:["loader","mux"],transmuxer:"TS_MP4"}))).$TAG="TsMux",r.seekingOnceChecked_=!1;var a=c()(r),o=a.$stream,s=a.$videoMediaStartTimes_,u=a.$transmuxer,d=o.restrictor;return r.$eventManager.on(u,"E",(function(e){r.$checkMuxMetaMatched(r.$currentDataMeta,e.data.meta)&&r.$throwError(Object(x.a)(e.code,e.message,e.data))})).on(u,"I",(function(){r.tryPush_()})).on(u,"DI",(function(e){y.a.log("".concat(r.LOG_TAG," ").concat(2===e.tracksExpected?2:e.audio?"audio":"video"," track(s) found by ts mux info")),r.tracksExpected=e.tracksExpected,d.hasAudio=e.audio,d.hasVideo=e.video})).on(u,"D",(function(e){if(r.$checkMuxMetaMatched(r.$currentDataMeta,e.meta))switch(e.fragmentType){case"initSegment":var t=e.contentType,n=e.container,i=e.codec,a=e.trackId,o=e.data;if(y.a.log("".concat(r.LOG_TAG," parsed ").concat(t," initSegment, ").concat(n,"_").concat(i)),"video"===t||"audio"===t){var c=new m.a("video"===t?1:2);c.bytesArray=o,c.trackId=a,c.container=n,c.codec=i,"video"===t?d.videoInitSegment=c:"audio"===t&&(d.audioInitSegment=c),r.tryProvideArtefact_()}break;case"fragment":var u,l=e.contentType,f=e.data,h=e.duration,p=e.startDTS,_=e.startPTS,v=e.nextSegmentPTS;if(y.a.log("".concat(r.LOG_TAG," parsed ").concat(l,", startDTS/startPTS/end/duration(").concat(p.toFixed(3),"/").concat(_.toFixed(3),"/").concat((_+h).toFixed(3),"/").concat(h.toFixed(3),")")),h<0)return void y.a.warn("".concat(r.LOG_TAG," ignore parsed, due the duration ").concat(h));"video"===l?((u=new b.a(1)).bytesArray=f,u.startTime=p,u.duration=h,s.push(u.startTime),d.videoMediaSegments.push(u)):"audio"===l&&((u=new b.a(2)).bytesArray=f,u.startTime=_,u.duration=h,d.audioMediaSegments.push(u),r.$audioSegmentAlignPTS_=v),r.tryProvideArtefact_()}})).on(u,"O",(function(e){var t=r.$videoMediaStartTimes_;t.length>0&&(r.onVideoSegmentParsed_(t[0]),r.$videoMediaStartTimes_=[])})),r}return o()(n,[{key:"onStoreStateChanged",value:function(e){this.$loaderArtifact=e.loader,this.$selfArtifact=e.mux,this.tryProvideArtefact_(),this.tryPush_()}},{key:"tryPush_",value:function(){var e=this.$krt,t=this.$stream,n=this.$transmuxer,r=this.$loaderArtifact,i=this.$selfArtifact,a=t.restrictor,o=t.renderer;if(!Object(k.c)(r)&&Object(k.c)(i)&&this.$canConsumeLoaderData()){var s=r.data,c=r.meta,u=0;if(c){var d=c.level;a.needSendInitSegment||this.$currentDataMeta&&(!this.$currentDataMeta||d==this.$currentDataMeta.level)||(a.needSendInitSegment=!0,a.videoInitSegment=a.audioInitSegment=null),this.$currentDataMeta=c}if(!e.conf.alwaysSeekKeyframe){var l=o.currentTimeRange,f=o.currentTime;u=(l?l.end:f)||0}n.push(s,{done:r.done,stubTime:u,resetInitSegment:a.needSendInitSegment,audioSegmentAlignPTS:this.$audioSegmentAlignPTS_,meta:c}),this.$consumeArtefact("loader")}}},{key:"tryProvideArtefact_",value:function(){if(Object(k.c)(this.$selfArtifact)){var e=this.$stream.restrictor.consume();e&&this.$provideArtefact(e)}}},{key:"onVideoSegmentParsed_",value:function(e){var t=this.$stream.renderer;if(t.seeking){if(!this.seekingOnceChecked_){this.seekingOnceChecked_=!0;var n=t.currentTime;e<=n?this.$videoMediaStartTimes_.splice(0,this.$videoMediaStartTimes_.length):y.a.warn("".concat(this.LOG_TAG," parsed ").concat(e," > seek ").concat(n,", it should be corrected at first parsed segment"))}}else this.seekingOnceChecked_=!1}},{key:"destroy",value:function(){d()(v()(n.prototype),"destroy",this).call(this),this.$transmuxer.destroy()}}]),n}(g.a)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.IGNORABLE=0]="IGNORABLE",e[e.RECOVERABLE=1]="RECOVERABLE",e[e.CRITICAL=2]="CRITICAL"}(r||(r={}))},,function(e,t,n){var r=n(24),i=n(23),a=n(230),o=n(80).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!o||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!a((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,undefined).length}))},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2;e.exports={pack:function(e,t,s){var c,u,d,l=new Array(s),f=8*s-t-1,h=(1<<f)-1,p=h>>1,_=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===Infinity?(u=e!=e?1:0,c=h):(c=i(a(e)/o),e*(d=r(2,-c))<1&&(c--,d*=2),(e+=c+p>=1?_/d:_*r(2,1-p))*d>=2&&(c++,d/=2),c+p>=h?(u=0,c=h):c+p>=1?(u=(e*d-1)*r(2,t),c+=p):(u=e*r(2,p-1)*r(2,t),c=0));t>=8;l[g++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;l[g++]=255&c,c/=256,f-=8);return l[--g]|=128*v,l},unpack:function(e,t){var n,i=e.length,a=8*i-t-1,o=(1<<a)-1,s=o>>1,c=a-7,u=i-1,d=e[u--],l=127&d;for(d>>=7;c>0;l=256*l+e[u],u--,c-=8);for(n=l&(1<<-c)-1,l>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===l)l=1-s;else{if(l===o)return n?NaN:d?-Infinity:Infinity;n+=r(2,t),l-=s}return(d?-1:1)*n*r(2,l-t)}}},function(e,t,n){var r=n(93);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(81),i=n(44),a=n(197),o=n(229),s=n(135),c=n(80).aTypedArrayConstructor;e.exports=function(e){var t,n,u,d,l,f,h=r(e),p=arguments.length,_=p>1?arguments[1]:undefined,v=_!==undefined,g=a(h);if(g!=undefined&&!o(g))for(f=(l=g.call(h)).next,h=[];!(d=f.call(l)).done;)h.push(d.value);for(v&&p>2&&(_=s(_,arguments[2],2)),n=i(h.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?_(h[t],t):h[t];return u}},function(e,t,n){"use strict";var r=n(81),i=n(119),a=n(44),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=a(n.length),c=i(e,s),u=i(t,s),d=arguments.length>2?arguments[2]:undefined,l=o((d===undefined?s:i(d,s))-u,s-c),f=1;for(u<c&&c<u+l&&(f=-1,u+=l-1,c+=l-1);l-- >0;)u in n?n[c]=n[u]:delete n[c],c+=f,u+=f;return n}},function(e,t,n){var r=n(80).aTypedArrayConstructor,i=n(138);e.exports=function(e,t){for(var n=i(e,e.constructor),a=0,o=t.length,s=new(r(n))(o);o>a;)s[a]=t[a++];return s}},,function(module,exports,__webpack_require__){var _qda=["YkRXV2k=","Vi46Sg==","IDI0IDE0J0w=","Sk5NTWw=","PyAxOFcgMjc=","VWVrZkc=","ZVJnZkE=","OVQgMDggMTI=","UGpYd24=","UUZ3dmU=","IDI5IDA2IDI2Rw==","Rl8gMjEz","IyAxOVVc","TGNRYXY=","Z013VUY=","IDIwIDIxI1Y=","JSAyMEZe","emR4aUg=","IDMxUihf","IDIyKyUw","KSAxNyhU","IDE3IDExIDIwTQ==","cGNkdmI=","I1gvJg==","TDhNYQ==","IDEzWGIgMzI=","IDE0IDI0YyI=","QyAxNTtJ","MjUmIDI2","IDE1QyAxMTE=","TSAyOCogMDE=","enZQb2g=","ITYoIDA4","RVVoSnk=","IDI1XS9M","IDE3JiAyNiAwOQ==","b0Jta3I=","ViNTTA==","K0siSA==","b25lcnJvcg==","Q1BzRFM=","MyAwNmAgMTE=","IDEzWGIgMTI=","U2NMeHo=","S1RHaHA=","R2tLRnA=","R1EnRg==","IDE1YyAwOVY=","T29xUGw=","VWludDhBcnJheQ==","TUVjd08=","RmhTUFk=","cmVzcG9uc2U=","IDI5KTYw","cWR5","T29VS0c=","IDExIDE5MTs=","PUY2IDIz","Q0xXeW4=","LFJTYw==","TT9QTQ==","eXhnWXg=","ak5mclk=","KjVNKg==","SCAyOVAgMjY=","IDE5IDIxTlg=","QCJQYA==","IiAyNSJZ","SU9KS1c=","cFVOa2k=","IDE1VDYgMTI=","Q2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiA=","ZklvQXY=","NzVHUw==","RS4gMjAz","bUV6bHc=","b25SdW50aW1lSW5pdGlhbGl6ZWQ=","IDE5IDEwRF4=","MVhRJw==","IDI4IDEzYEo=","bUxtRmU=","X2ZyZWU=","OV1VIDEy","VlFLa0I=","O0FiUg==","NSAxNSAwOWI=","KyAxMU8gMTQ=","WVVXb04=","QCJQPA==","cG9w","TXhsY2Y=","WEtobHc=","IDI0MFIt","QlVJdlI=","VXlUb2U=","KyAzMSAwOV8=","ZFVwQmg=","SEVBUDg=","WSAyOCAyOSs=","KCAxMCAyNUQ=","JSAyMjogMjQ=","IDI5VzRK","IDE2VDhA","J10gMDMgMTI=","I1c0IDIz","IDE2RV47","ISAxMkFh","aFpCVHY=","SSAzMTJF","RWNoVmc=","PmIsIDAz","IDEzRiAxNCg=","d2luZG93Ow==","IDI1KVRj","KCAwMlQgMDY=","IiIgMDhf","dFVseUo=","enhza3Y=","XCAxOTggMjY=","Oi0uIDA3","OD8gMjlD","IDIzSFkgMDI=","IDI4RV0gMTY=","KUUgMDRa","IDAxIDAyQCAyNSAwNg==","ZkhwVG8=","MyohOQ==","ITc2UQ==","Y2hhckNvZGVBdA==","Y21kNXg=","IDIzIDIxMyE=","QyAyMmMgMDA=","YXJyYXk=","T3NVSlU=","VkNKWVg=","bHVVenk=","QlkgMTJK","KCAxMyAxMCAwOA==","VDEgMTUx","PiAxOTsz","T1JuQUs=","IkYgMjMgMDU=","IDMxKl1E","IDMyMmMj","dFJLYUM=","IDE4PCNe","PTBUOg==","KD8gMjVg","IDAxIDEzIDIxNCE=","UnJ1b0U=","O2AgMTNA","M11XTw==","aW11bA==","Y1hMdm4=","aURtZ0E=","d1VoTWY=","RSAyNigw","YXJn","Vk9ueW4=","Tm5EbGY=","KCAxNF8n","OV1KPw==","R211cXM=","TEhJZUc=","QWxNb3Y=","IzpbLA==","UVlPRkE=","VWJGcUI=","IDEzIDEwQ10=","Wk0gMDNb","bm9FeGl0UnVudGltZQ==","IDMxIyAwNCw=","SlJwTVk=","akNoV3I=","RjRZXw==","cW9XeVc=","MyQgMDhE","W29iamVjdCBwcm9jZXNzXQ==","VlVua2M=","MCAyNCAwOCAxMg==","ZmlsZTovLw==","b3Blbg==","IDI4XUEgMjc=","IlRcIw==","SFk3Yw==","eFRzc1c=","IDMxKkFe","Kj9HIDMw","WCAyMyAxNzo=","akxqdkw=","LVQ/Og==","bWVKYnk=","Y21kNXhsaXZl","UVJ6aUM=","QiggMjMgMjg=","YXBwbHk=","UF4gMjlf","c3RhY2s=","ZFVLQ3U=","ZnNGbWQ=","bUFwYkg=","RjJGIDI5","IDE4IDIxIDE2Nw==","QnlFdno=","ZG9jYWk=","OiQgMDVR","dHJ1bmM=","SGhkRVY=","KCAxNSFW","ZmVhUUI=","IDAxIDI2IDI4NWA=","bVNpamo=","MlkkPA==","clVjTEM=","dXNlIGFzbQ==","Y0FPYmg=","SHNZU3I=","UmdaQlI=","WiAxOTRS","QiAwOEg1","Q0l0dmI=","PCAzMSAwNiAxMA==","MzpOIDAw","SCAzMSAwMjk=","dG9TdHJpbmc=","MkY7Rw==","IDMxLCUgMTc=","IDE2U085","MCAyNi8gMDM=","Z01FQ2k=","RSAzMSAwNEA=","Lj8wMA==","JCAyMyAwMU8=","TUxoblY=","alpLRmU=","b2JqZWN0","IDI3SCAwNyAwOA==","JSAwMmNM","eW9oR2M=","IDI3VSAwMkw=","PUpDWw==","IDIxNTQj","WUNDaXI=","IyUgMjJi","d0ZURVc=","WFF0ZFU=","YXJndW1lbnRz","IDE0IDI0IDI2IDIw","PyAwMyAxNTQ=","IDI4RCAwMlY=","c2V0U3RhdHVz","O0NeIDE2","IDExTTxi","QWxFQ1Y=","IDIwYzkgMjg=","RjMgMjBP","KSc1IDI4","ST8gMjYgMTc=","IDIxXVogMjE=","YnVmZmVy","JEsgMDA1","bnVtYmVy","eWhMZ2I=","IDE4IDIxIDE2QQ==","ZFRkZVM=","LCAxNTBe","QUlLVGU=","JTEoRw==","ck9OSUI=","Q0VgPA==","T15cMQ==","IDI0SiAwNU0=","QVV2ZmE=","YWJGPg==","dXZ1ZEs=","PCAyOSAwMSAxNQ==","QlwgMDRU","RXJ4S20=","IDMyWyAyODc=","c3Jj","YmxvYjo=","cmVxdWlyZTs=","ISAyMiVM","JiMgMjNd","cHJvdG90eXBl","IDI1XS8n","IDI5KTcgMDg=","RXd5Y0k=","IDMwIDE2VCAyMQ==","JSAwNDkn","J1ggMjcn","JitbWA==","b2xJalc=","IDE5IDEyJU8=","IDMxWyAyMCM=","IDE4Q0IgMDg=","cHJpbnQ=","WklmaEw=","Qm5IU3U=","JyAwM0ZV","JmM6Lg==","S0FtTms=","QUg3IDMy","IDI5P2BW","IDE5IDIwJCAxOA==","UnVubmluZy4uLg==","IDE1VDVh","WW5PY3M=","QFk8JA==","IDI1IDA0SCU=","cXJ3eEQ=","SUVPdU8=","PFYzIDAz","JyAxNmBK","IDMxIDMwLSAwMg==","Z1ZrbUU=","SFp6cFQ=","LC5VJw==","PUc/Sg==","O0cgMDQgMjM=","JFIgMzE6","RkdROQ==","cGh3WUo=","LVwxOQ==","JEAgMjUo","TSAyNDxT","SU5JVElBTF9NRU1PUlk=","RUpoQUY=","Tks1Mw==","IDI4RCVe","UG9Sc0Y=","IDIxXGM0","MSMgMDE5","IDE1IDIzSCY=","VkhSQVg=","PiAwMF8n","RXNoams=","IDIxIDA4VCAyOA==","bG9jYXRpb24=","UkRPckM=","KCAxMERh","STQgMDFG","IDAxIDIzIDEyQD0=","ZlJ3U1E=","IDI0WzMgMzE=","WUZxQW4=","IDI0KyAyNi4=","alpSQnY=","UkNXWHQ=","R0xhbUs=","Q25BZWs=","IDIzIUQgMjY=","Z0ZTYlg=","OCxXSw==","WXBEcWg=","IDAxKVEgMjZK","NlI6Rw==","TCsgMTYgMjg=","T0tFdkk=","cmVzcG9uc2VUZXh0","QWZOS2o=","IDE2WCIu","JVkgMzE1","X21hbGxvYw==","Wkt3ZUY=","IDE5QCogMzA=","UEZ4Y28=","KS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4=","Y1hEZUk=","IDI5ME0w","IDE0IDA2IDE3IDA5","TGRSb1k=","VkZzTk4=","IDE4LjsgMDc=","IDI4RiggMjY=","UyAxMyAwNyY=","IDI0KSAwN18=","KiAwNiAwOSAxNQ==","Z0NISGQ=","IyAxNzhQ","aW94dlc=","I0szIDI4","IylTQg==","NSAxNSAxMSAwMQ==","OEA0IDA1","IDI2Li1j","MSAyNiAwMzg=","T2JVb24=","IDI3LSAxNSAyNQ==","bmF2aWdhdG9y","c2NyZWVu","YCAyMjY4","dGdaUlY=","WG1OQmY=","ZkdTSnM=","OyY7VA==","NDphIDMx","IDE4LjAm","SnFQS1Y=","S3NwUHg=","bFpEU1g=","YWdQREE=","MCAwMVQ6","IDE2VDdG","cG9zdFJ1bg==","PyAwMCxW","IDEyIDE2YFE=","Ozo2OA==","ISAwMSAxMyY=","V2RJT1M=","U1dwWHA=","Ik4gMDAt","PSs/Pg==","TFRaSXc=","dXRmLTE2bGU=","Ji0gMThH","bVB6SUE=","TDNUIDI1","bWFUVkg=","ZG9jdW1lbnQ=","IiYxVw==","KVMgMTc8","IDI0IkRY","REdOa0Y=","Z2V0TmF0aXZlVHlwZVNpemUgaW52YWxpZCBiaXRzIA==","IDMwY0wgMDg=","dG9Mb3dlckNhc2U=","IDE3SC9Q","U0R3WVg=","UXp5ZFE=","PERUUg==","VUNOWGI=","ZHluQ2FsbF92aQ==","elZPS3U=","IDIzYSAwMT8=","IDAxIDIyMydH","IDE3QUBR","KVo/MA==","UiggMTQgMTc=","R2JDUGE=","ckNMSEo=","VCAwNUMgMTg=","IDI2WCAwMEo=","UiAyNyAyMDw=","c09TSmg=","YnZGWnc=","Y2h4SUE=","LiAxNUUgMTA=","ZXZlcnk=","IDMxIDA4IDA0MA==","IDI4Yjgu","UE5pdU0=","R0VU","IDE1IDIwWCAyOA==","IDI5KEMi","LyAxMEFh","L1lJIDMy","IDI3IDEzLSM=","ZnFkaVY=","RlBIRnE=","OyAxNSAzMCAxOA==","Y2NWZ3M=","KVtVIDIx","SSZdTg==","dmZDUmI=","ISAwNCQgMDA=","dktwck8=","IDE4MyAwNT8=","UEF4d00=","IDE1OyAxNSAyOA==","LCAwNiAwNUA=","KiAzMSAwOTo=","Wm9RcFE=","WGdKdlE=","IDEzXC5I","alRrVG8=","Mz5CIDEz","JkkgMTBj","VUNRaEM=","THJaVnA=","UiAwNSAwN1E=","IDE2IDMwIDE3IDMx","IDEzIDIzIDIyUg==","aWxvdmVpcWl5aQ==","alZZSlU=","MVQ/IDI4","cmNrbHo=","MCAzMCAwMyAyMg==","TVFBdXc=","KzZfPA==","QSAyNUUgMjM=","IDE4IDE4Ky4=","IDExLF0p","S012Zm8=","IDIwIDAwIDE2LA==","KCAwMFlW","WCAyMzM3","Y1ZpVlI=","JyAyNVdf","IDE0OzI9","eUd1RWo=","ISAwNSAxNjQ=","R2JkRUQ=","IDIzIDE0IDE4Og==","TzAuLA==","c2tVT3k=","RihXSA==","QCAyMiAwM0w=","S3daYXI=","MzogMDIq","Nz4gMjMr","KCAwNlwgMDc=","UygzIDMx","bG9jYWxob3N0","OyAxNl0n","IDE2LUYgMjM=","IDMyIDA2IDEyIDIx","SUNvRE8=","VSAwMDNS","IDI4Y0te","IDIzLiU6","WW9yWlg=","SEVBUFUzMg==","R2JleHI=","YXJyYXlidWZmZXI=","LSAwMiI7","KFwgMDVS","WiAzMS4gMDE=","RlNNQ2w=","OyAxNl1G","PSAyOTxF","IyI8Uw==","IDAxIDE2IDE3YWA=","IDA3SyAxM2A=","QkFMbVQ=","IDIzXCAxNyAwNA==","cElPcGU=","VS0gMDBM","ViAwNEtH","MTsgMjggMTU=","IDAxIDIwNT1d","R2ZPckY=","IDI5RyAwOV4=","LzRXIDI4","QkNNa28=","TlZeXg==","IDMwIDI4UVY=","cE5kQmo=","MSQ8IDIx","S1JXWW4=","a1Z3ak0=","UyAyODsy","IDAxKiYyIDA2","VkFnemg=","UEh4eWo=","U1p6TU4=","SCAyOVBV","dkZqZHA=","aTMy","IDI3X1IgMjc=","KlUgMDMgMzI=","JyAwMiw2","T0Q4Sg==","IDI1VCAzMT8=","JC8gMjFB","IDIwLyAyNU0=","UF4gMzBj","IDI4RiggMDY=","ZnVuY3Rpb24=","bGFzdEluZGV4T2Y=","JEhZIDIx","Yy9aIDIz","QUhQZmw=","UywgMjcgMjQ=","IDEzRiAxNCAxOQ==","T2hJVE0=","JiAyNlxL","ZnJybEs=","IDAxIDIyUyAxMzw=","cHJlbG9hZGVkQXVkaW9z","IDE4VCAyMSAxNg==","NSAzMkk9","UVFZeUs=","IkgtIDE3","R1liY2Y=","IDE2IDMyIyAwNg==","endtZXY=","JSAyNU9U","IDEyVD8gMDU=","Ni0gMjQx","TG9rd2o=","SklYQmY=","bG9n","d2Fybg==","JCAwOCgl","bWVzc2FnZQ==","bG9jYXRlRmlsZQ==","IDE4VSAwMiAxMQ==","IS0jIDI4","IDI1Iihh","VmRMWno=","TCAxMlEgMjc=","LycyIDEw","MSAyN1AgMTc=","IyAyMzdC","RV4gMjAi","TmBCIDI4","WXFUWEc=","ISAyOCIgMzI=","IDI0WitD","MjlYVA==","RG1Pelk=","VCAxNyAwMk0=","RCAwMTwgMjM=","IDExTT0gMTk=","IDE1IDE4M0M=","Y1B3bEU=","YFQgMjY9","X2Vtc2NyaXB0ZW5fZ2V0X3NicmtfcHRy","IDE3KDJc","RWxJc2U=","OSAxNiAyMyAwOQ==","IDI3SCAwOCAwNg==","SmhWZUE=","IDIxNSAxOFg=","IDE4IDA5KS4=","TEhwTHg=","U0dLV28=","VDo0IDA0","JSAwNj4gMDQ=","UXluS0E=","X2k2NEFkZA==","IDI3IDEyJSAyNw==","eHZidlc=","YnFLVWs=","RXhpdFN0YXR1cw==","aFh2enE=","ZHFRV0w=","d053d1I=","UFJ1WVE=","a3hTQ1U=","JUBOIDI1","IDExIDE0IDAxNA==","OlggMzBH","UlVlaUs=","OT9bMA==","OiAwNyAyMzk=","NTdVIDAx","IDE2Pj4gMTM=","IDMxKkFV","IDE4LjAgMjQ=","RUg8Pw==","PDE6Uw==","JyVMQQ==","OlFGIDE0","IDIyIDAxIDE0Sg==","dG1qVUk=","LCAxMSIgMTI=","IDI3Oidd","aHRtbA==","LCAwMTAgMjc=","ZHluQ2FsbF8=","dlBFWU4=","IDE3JiAyNV4=","eGpia2I=","O1BWQw==","Y2xpZW50SGVpZ2h0","UWpGZHY=","LjggMjVg","IDE1IDE4NCAwNg==","LDc/Ng==","IDEzSyAxMjI=","ZG91Ymxl","TyAxOCIgMjU=","IDE0NzM3","cW9OYk4=","X21lbXNldA==","LCByZXRyeWluZyA=","LTNYWQ==","IDEyIDEwWF4=","IDMxJCAwMFM=","RUhSY2Q=","IDMyIDA4SVI=","Y2VpbA==","b25BYm9ydA==","IDI4TkggMDc=","J0leSg==","JF4wYg==","IDI2VyAxMlc=","M1ZfIDE1","aGVpZ2h0","IDI3K1lJ","KzIgMzAr","UHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCg=","bnVFaFk=","IDMyNVEgMjI=","TlhSPg==","IDA5IDEzV0s=","I1c0IQ==","SyAwMEg9","Lk86Og==","KSAgYXQgb2Zmc2V0IA==","Z0hjdEo=","JT1gUw==","KEBbYQ==","Jz8sYw==","RFVSRkY=","dmdUdlI=","NlMgMjRM","cHJvY2Vzczs=","Uj9iYQ==","IDE3MSAzMlo=","LCAxNicq","Il0gMDAk","P0BQIDE4","X2JpdHNoaWZ0NjRTaGw=","MzogMDFC","KyAwNEQgMTg=","KCAwMEBC","YXFEWlU=","PiAyNCAwNCg=","cHJvY2Vzcw==","aGV3clo=","IDMwIDEzIDEyIg==","IDE5XiAxOEs=","IDEyY0E9","VUhyV2Y=","Li90aGlzLnByb2dyYW0=","IDI3IDEyJVA=","cnFrRVk=","X21lbWNweQ==","cmVwbGFjZQ==","IjYnXw==","IDMxX1El","dXRmOA==","LmAgMDEh","ZElyZkk=","QCJRJQ==","IDExVVxX","IDE3WFBe","c3RhcnRzV2l0aA==","amdkeG8=","TWF0aA==","alFYTmQ=","WlFLZXQ=","VXhLZnA=","SmJkUlQ=","MVslIDI1","bFh2V3c=","eWRiUm8=","JScuIDA3","TE1xUnE=","TVVhd2s=","UyAwNyEgMjk=","aHJRUWc=","SEVBUFU4","IDEwIDE1XiAyNA==","WlluenM=","R3pSQVg=","KiAwOUBS","UlhMZ2E=","OyAxM1s1","ISAyMiVI","IDI1IDA5PiAyMw==","SUQlIDIy","IyAxOVVQ","IDE4IDA4QDE=","TlRwS08=","ZVJndHQ=","cHJpbnRFcnI=","QXNzZXJ0aW9uIGZhaWxlZDog","TiAwNFhR","LileIDAw","R3lZa1U=","IDE5LyAxNyAyNw==","dW5zaGlmdA==","IDIxUyAxNiAyNQ==","U3RHb2I=","IDMyRCAxMVw=","TmhtakE=","U05kcVY=","cExrc3k=","SU5OLg==","eUxSZm8=","KG5vIHN0YWNrIHRyYWNlIGF2YWlsYWJsZSk=","IDE3IDE5IDE3IDIz","eWRVU1A=","IDI2TyAyMU8=","R0JEb2I=","J0cgMTRT","I0EgMjIgMDk=","c2hvd24=","OiAzMENf","IzpbIDI4","Ilo4Mg==","Y3VycmVudFNjcmlwdA==","Nk03IDA5","PyAyNyAwOSAzMQ==","ekxLZ00=","cmVzcG9uc2VUeXBl","WUV4YUo=","I1EgMTEgMTU=","LEQvIDA3","Iy4gMDUgMTE=","R1dHaUM=","IDI3ViAyMUM=","IDIwVyAxMlw=","JSAyMTtQ","dkhodXo=","JVwgMTYgMTM=","IDI4OCxQ","IDI0IDI1IDMxKg==","SCcgMjM7","OlM7VA==","Y2FsbGVkUnVu","NV5AIDAy","IDE4XSAyMiAyMg==","R1hzRGM=","IDEwIDE2IDEyIDE1","LEw8XQ==","IDI1NSAwNDg=","UnNhWVo=","d0FjdWI=","IDI5IDA3JyE=","IDI1KSAwNiAwNw==","U1ViUQ==","I1EgMTBR","OT9aQw==","cWZmV0k=","I008OQ==","SiAwOVFO","IDE4LjAgMDQ=","V2hMd0Y=","R0YgMDUgMDc=","SCAxOSAyNFM=","Y1NISEE=","IDI5YiAwNiM=","IDE5TzQgMjY=","bXlLaU0=","Q2xkQ0E=","IDEyQyAyM1o=","IDE1SyAyN2A=","IDAxIDEzIDA3IDE2IDEw","TzAtWg==","IDIwJy1X","ITYnXA==","dU1uZ0Y=","c3RhY2tSZXN0b3Jl","ISAyNE9T","OiAxN1k/","IDAxRFk6IDE5","Lz1WNg==","IDI1NSAwNDc=","IDE2IDI1IDAwIDA3","IDEzWy9G","IzpcLQ==","RklZcVE=","JkQgMjUgMTc=","OCAxOSxd","ZUpTRE4=","UURxV3A=","NDg6IDE1","am9pbg==","aVVsS1E=","IDEzYyAxNiE=","cHJlUnVu","IDMwWCAzMSAzMA==","IDE1IDIzRyAyNw==","U3NmUk4=","IDAxIDE3IDMwTV4=","IDI2MklT","IDMxMzNB","IDExXTIy","SkdpaHQ=","IDE0PCAyMyAyOQ==","JiAwMyAzMjg=","MDMgMTEgMTU=","TVByQ1U=","S29oaG0=","c3Vic3Ry","K14gMjQ6","b25sb2Fk","MkY8Kg==","J2M6IDMw","LVlMIDI3","IDIxIDA0LCAwNg==","IDA5NSxQ","J1EgMDEz","b1hZY0g=","aW5kZXhPZg==","RVhRIDA2","Ij5DUg==","Iik/YA==","OSAzMi4k","OiAwMCpY","Oi8kIDE1","U1VjMA==","d2NEVEE=","LCBtYWtlIHN1cmUgaXQgaXMgZXhwb3J0ZWQ=","IDMwXFwy","ekVtbEc=","YlJDZkk=","IDAxIiAxMScgMDQ=","Rl0gMjMgMTU=","IDEwVEwgMDg=","KyAxOVpV","Q29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4=","d2tUVXQ=","TXdGZlY=","S3pmdUU=","ekZzaVk=","WlNscEU=","S253WG0=","KksgMzAgMDI=","c3RhY2tTYXZl","YWlBWWk=","bWxDWUc=","LmAgMDE2","KDYgMjMgMjQ=","IDEzIDEwQyo=","VSAyMyAxMjU=","IDAxIDE1Wz0gMjI=","IyAxOVUgMTk=","IT0gMjkgMjg=","IDIzYSAwMEk=","JFtWYw==","LVwxTQ==","IDA4IDE5LiAxNA==","PCktNA==","TypERQ==","VmBgKg==","SSAwMFBH","IDI3IDAzSyAwMw==","bVBDS0w=","O0FiVg==","VlB6WnY=","aTE2","IDE5IDA0IDE4IDI3","ME08Wg==","ZG9tYWlu","LlogMjQl","IDE1VyAyMEA=","SSAyOU1T","c2xpY2U=","IDE5YSAxOCAwMw==","IDIxIDMwIDA4Vg==","KT81Qw==","YXNt","IDAxLiAwMCAwNlA=","cmVnaVI=","IDMyTCow","UmtPVGo=","IDAxIDAyOzop","Uk5kWE4=","c2VuZA==","d016UXU=","IDI5U0tB","TC4gMDAgMDA=","bUp6dFQ=","USAxNUsgMDM=","YmluZA==","S1BIak8=","IDAxIDI2ME1T","dUV4V1k=","VUIkUA==","WEVBdnM=","IDAxIDI2S2Ek","IDI0IDIxKFM=","IDI2QkNf","Mj5BSg==","LVo2MQ==","IDAxJThLIDA1","TG9qWWY=","JiAwNi4gMjI=","anhuUkM=","Y21kNXhkYXNo","IDMwIDIwPC8=","YkxjaWg=","eHJQU2k=","Tyg2Rg==","O0NeTA==","LyAxOSAwNiAwNA==","ITxDQw==","MyAxOCAxNTo=","eHFaaXY=","dUZTRVg=","JEVcSw==","RkUkIDIx","LklbOg==","IDE0NzQy","eG1IcEQ=","MScuUg==","RGxuSng=","PVw5Vw==","JCcgMjUgMjM=","I14gMDY8","bGVuZ3Ro","JyAxOS1Q","Vk9OUVQ=","LFwgMjJB","Y29uY2F0","ZXJzUXc=","WyAwNUVO","SGdtUkk=","IDI3SyAwNUQ=","Z3NVZ0U=","IDEwOiJN","PUdiIDAy","SEVBUDE2","IDE2LUYi","dGhpc1Byb2dyYW0=","IDI4IDA5IDI1IDMy","PVRhIDEw","LycyKA==","RlhsZU8=","PSAwN1Ey","JCAyNS4/","dUF3TVI=","bnpzZ0Q=","JUBWIDI4","Y0dFWkQ=","Vlpwc08=","IUpGOw==","IDE0PCAyMyAyOA==","JDhcQA==","IDMxPkZQ","IDI4QlA0","UnpZbmg=","Jj1KNQ==","NE8gMDdG","IDMyNiAxNyY=","LGFVIDEw","LyAxMSAyNVQ=","LVJiIDI5","c2V0","Wk1OYVI=","IDEyYSAyOF0=","YiAxOUggMjk=","JiAyOD9S","aWNUZWc=","bmFtZQ==","YlZFVUw=","Y2xpZW50V2lkdGg=","IDI0XSAxOSc=","IDE1OyAxNEc=","S0shIDE1","IDI4IDI1IDI1Rw==","SWNFcVY=","d1h5Wkg=","OlMgMDg8","dGl0bGU=","IDEzNlUk","IDI4OUNM","OyY6Uw==","a2hPSUE=","LCB0eXBlIA==","I0szIDA5","VCAxNyAwMj0=","IDMxY0QgMTk=","SGFtTUM=","IDMwMUhJ","ZnJvbUNoYXJDb2Rl","OlEgMTQ8","IDIwIDEwSy0=","IDE2RV42","IDE2IDA1IDA3OQ==","RSAyNihK","YyAyNist","WlpYSEc=","RiAwM0FU","IDMxVyAwNis=","IDE5VmFh","IyAyOCAxMyAyMQ==","IDIwIDEwTCAxOA==","IDAxIDA1IDMyOFI=","ZFVQclM=","Q2hhcmFjdGVyIGNvZGUg","IDI4SF4p","RFJkamw=","SlhyVGQ=","IDI4XFBP","IDE2P2AgMDY=","IDI1JUdi","IDE1IDIwVyAxNw==","OCAwNTsgMTA=","KicgMjYgMTM=","TGVDeFY=","YllqZWQ=","YWZXTkM=","IDIxIDAzP0w=","IDIwVyAzMEo=","ZGVjb2Rl","YkQgMzBh","IDE0VmMj","QzEnVQ==","IDE4NyAyMFo=","ZHd3dnA=","cHNTVnI=","IyAxOUBL","Q2ppc1I=","ald4Sm4=","Zmxvb3I=","IDMyIDE2IDIzJg==","S1pkbUo=","RUhHd1Q=","MyAxN0hU","LSggMTRA","dXR0UkQ=","aHJlZg==","IDAxQSAzMSNY","cmRzSW0=","ZWNubEQ=","bGt0eU8=","IDMxSigi","NicgMDggMjM=","IDE2XCsr","dW5kZWZpbmVk","O0YgMDZP","RHhWU3U=","MSggMTJF","YlVKaUo=","IDIwIDAwIDE2PQ==","IDE0NCAxNVo=","ZEdYc0I=","IDE2IDAwJEs=","IDI2IDAxKVY=","IDIwSiAxNU4=","MkY8JA==","QnF6ZVc=","L1YgMTVb","bEhLZVc=","JypTNw==","KCAwNDogMjg=","ZkFEelY=","IDA5Qj0q","IDIwIDIxI2M=","OTcjSA==","WHFJa0c=","bEh5SEk=","IDExR1g3","IS4gMDMgMDg=","RCg8Kw==","JFUgMjgm","IDMyRCAxMSAwMA==","KyhKNg==","IDI3OyAwMWA=","QEdPWg==","VHppWWM=","WUhZTGk=","IDI0YCAxNSw=","IDI4RCAwMWA=","Il5CQg==","Y1hST28=","Uk1kVFQ=","IDE5IlBR","JSAxNlEgMjc=","KiJDYQ==","KiAxNE44","bHdlY04=","IDE2NCAwMl4=","RHlwRm0=","IDIwIDEwSzM=","IDIwPiAyMyc=","IDE5RSI2","SiAwMiAwOE4=","OSAxNjo+","Y2FsbA==","IDE2P186","KiQgMTggMTQ=","IDE1Ny4gMDE=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0VVJM","J08gMDkq","QXlacEQ=","IDIwMk1J","JGJGIw==","IDI4IDA4OSAwNA==","YmlBQWg=","IDI2IDExRCc=","Tk1Pam8=","S0shIDMx","YmVWbms=","TzlbSQ==","SjUgMzAgMjk=","ITYnJg==","U2l0b0U=","IDExIDE0IDAxNg==","MyAyMVgn","d3ZDRGY=","UGZMZ1E=","VUxKd3o=","IDEwODggMDg=","cHVzaA==","aG9zdG5hbWU=","IDE4VCAyMiAyNw==","X2NtZDV4","IDAxIDAzLWMl","IDExIDE2TDs=","RT8mTg==","IDIzPCAwOCAyNQ==","IDI0IkYgMDA=","J1tDKg==","IDI5L1gz","RHBtUUw=","b3Vwd2w=","IDI5IDExIDA1IDA2","cWxhTkM=","SFpKS1o=","QyAwMCAzMiAyOQ==","ODVaMg==","NWJCNA==","UmFvVFA=","IzhRIDE5","IDE1VyAwMEQ=","PTw7IDEy","KiAyMSAxOWM=","IDMxIDE2IDAzNQ==","YWJ1REM=","KDcvYQ==","IDAxIDI0OzUgMjI=","S3h5QVU=","IDAxIDA2IDA1TiAxMw==","IDIwNCAzMEg=","MlMgMTJC","aGN3YlQ=","IDI3XCAzMCs=","TCAxMlEgMjI=","aFN0WmI=","aG9tZU0=","IDMwJCAzMjo=","RllUdHk=","UCAyNCAwMT0=","LiAyNkU4","U1ogMTAx","eWNLenY=","SyAxOCAwNj4=","IDI1IDAxIDIyWA==","IDI0WjE7","JFUgMjda","TCAyOCAwMyAzMQ==","eHNOa1g=","IDE3LVwv","ZmxvYXQ=","IDMwRSAyM0w=","aE1BZms=","IDIzRi5f","aGJhdkY=","IG5vdCBpbiAweDAwLTB4RkYu","U2VGSmg=","YWJvcnQo","IDE0PCAyMjQ=","bkJhT2E=","J0leIDI1","UCAyMSVd","IkxSIDE4","IDMwUlxX","d3FyS3E=","bXZkdW8=","VVZhdnM=","RVdrZ1I=","elFGdEQ=","UkxNVW8=","cUhodHQ=","LF8gMDcgMDQ=","SlggMDBK","Q2hJc0w=","JDU+Jw==","Z01HVkg=","V1RYQUw=","IDEwWyAwNSAwMg==","VyhMIDAy","MzI5WQ==","IDAxIDEyLjJQ","JTEgMTJj","IDA4OVogMDc=","SEVBUEYzMg==","KyAxNyAwNSg=","Y2JEckg=","JCAwNTZL","cHJlSW5pdA==","eVNBWk4=","IDE0PSg+","IDI2OiAxOCAyNw==","NSAxNSAxMCQ=","c0hjYlk=","IDMxIDA3IDAyLg==","R2lBdnA=","IDE2IDAwJCAyOA==","QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0=","IDA4KUogMTI=","TldSZnY=","IDA2IDA0KSAxNg==","IDE3KCRQ","Ynl0ZUxlbmd0aA==","IiAyNSox","Zmppb0c=","JSAwMmNP","IDE3IDE1VyAxNw==","YXRxbnc=","YmxWaUg=","S1RGIDA4","VUJ3UWk=","SWNOZmM=","YVpFQ3I=","Y3dyYXA=","IDIzIDI4IDEzPQ==","NiAxNyAyMEo=","KUpBIDE1","IDA5Qy0gMTg=","Y2x6MzI=","IDIzRlcgMjk=","IDIyTiAyMUY=","RldkSm4=","IDE3UVxI","dEdHYUk=","IDE2IDEzRT0=","IDE5Ik4gMTY=","bkZEbUk=","IDE4YlhO","ak1jbU0=","UHBoWGE=","PiAxOU4k","d1dNTHc=","MF9LIDI0","MzNRWg==","IiwgMjVC","SEV3dUs=","IDMwIDA2OiAxNg==","cXpFcmU=","MDMgMTFX","Tm56Z3Q=","IDIzXzhP","ek9abFM=","UmZ1Q20=","YUVKUGI=","YXNjTWw=","QycgMjAgMzA=","R0YgMDYgMDI=","LCAxNicgMTc=","IDI0IDIyLzo=","ND8+Tg==","LyAyNiAwNGE=","K14gMjUgMjM=","XDpIYA==","IDE1RiAxNiAyOQ==","WVhoWmQ=","IDE4NU8v","Mkk/Yg==","eFZwZHU=","S0EgMzEgMjA=","J2I/IDMx","UU5ud2k=","Vz4uYQ==","IDAxNCAwOUM+","S0sgMzJK","IDAxIDA5IDA3MyAxOQ==","VHNRTWw=","SEVBUDMy","QFwjLg==","P1csIDA3","KSAwMSAyMys=","dGlvcVo=","bWdndXE=","IDE1LydY","QEsgMjI4","aGlzdG9yeQ==","cW9KUVo=","IDMyJ0RN","QnZhUGg=","KiAxN0dM","SDZFNA==","bWVtb3J5IGluaXRpYWxpemVy","IDAxLDAtTQ==","STQgMDFL","QURQVW4=","SCAxOSAyNFA=","IDIyYUZM","c2hpZnQ=","Rm5NelY=","OFEgMThI","REduRGI=","NCdXIg==","QiAxMSAxNSAwNw==","I2IgMjJP","Y29weVdpdGhpbg==","IDMwIDA4IyAzMQ==","clhDaFU=","IDI4KVEgMjk=","PSAxMjdH","NSAwM1sgMDk=","KiAyMSAyMDc=","cXJldnY=","IltUSQ==","NSAyNCAyNyAxNg==","Q2IvXQ==","MzpOIDE0","YmtRTHo=","IVIgMThb","IDE0PSggMjM=","IDIyVGI/","IDE4IDI5YFQ=","IDIxIDExIDE2IQ==","IDI5IDEwKSAxMQ==","bk5sbVE=","bFBQbmQ=","LSAwN0EgMjE=","eVZSVE4=","cWRz","IDE5IlAgMDU=","IDExRDVX","ZHRic2Q=","c3RhY2tBbGxvYw==","IDA5XiAzMTE=","b0RhTVU=","NiAyMEggMDg=","IDI3MDRV","Rk15S2E=","IDI2SWBQ","IDI0PzZB","RnFFeW0=","QiAyOFY4","PU09IDIz","Q0luZ3Q=","IDE5IDA0IDE4Wg==","IDIyKy8gMTQ=","PC1ASQ==","ZlRZR0M=","bkxZS2w=","IDI4KTxc","eHpmQ0M=","bXNxZ1g=","ZHluQ2FsbF92","aUdRUHM=","L1kgMDIgMjQ=","a1NraXU=","NyAwOTAgMDQ=","dWxtZnI=","ZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LA==","RWluV3I=","X19fZXJybm9fbG9jYXRpb24=","SiAyMSAwMVE=","QCYgMDlU","UkxZU1k=","IDE1IDI0Kio=","IDE2Wl4gMTM=","Tm5HR3g=","d2FzbUJpbmFyeQ==","UHhWakE=","a0NVUGI=","OE9XIDAy","a3NhdmY=","IDExOVhI","JSE1IDEy","IDE3IDMwQzY=","aHdRQWw=","KUpBJw==","QmEgMjAm","ZFhjUUw=","amlNZ3A=","IDA5IDExWic=","QiAwOCQ2","SW50MzJBcnJheQ==","IDIwVyAxMV8=","ZWhIcE8=","W0NSRw==","RyAxNF4gMjM=","cWNVVnA=","aGFzT3duUHJvcGVydHk=","RnRoVWo=","IDI1IDA0R1A=","KyAyN0Bi","IDE0PCAyMyo=","SSAwM0YgMjA=","cHJlbG9hZGVkSW1hZ2Vz","Y3JUbUw=","IDEwIkBB","PyAwNSAxNyAxMQ==","KDdCSg==","IDEyWiogMDM=","R0Rhd2Q=","IDIwVyAzMFQ=","bWlu","Wk93SGY=","aTY0","SEVBUEY2NA==","LkRMIDA2","Vk1EIDMx","Q1Z3ZEQ=","KiAwODMw","IzggMjQgMjM=","YkN6c04=","V3BMaXA=","blBDcWo=","cnVu","c3RhdHVz","cm5UTHA=","IDA3OyAwMkg=","IDE3LVxh","QFJaMw==","IDIwVCAxNiAwMw==","Y291bGQgbm90IGxvYWQgbWVtb3J5IGluaXRpYWxpemVyIA==","WCAwMiAxMjQ=","ZFprQnc=","YCAzMUYgMDg=","ZUxTZHo=","JSMgMzIgMjU=","IDE0PCAyMjo=","SFJzc04=","U3dCZnI=","IDI3SCAwN0M=","IDE1Ny09","bW9vaW4=","Y2hBWnc=","Sld4aGY=","IDI5MyAyOSAwNg==","RSAzMCAxOSAyOQ==","IDE1IjQgMjc=","QyAwNjtF","R0pqb04=","cWRfdg==","YXRFV1c=","Y2hhckF0","P0ogMDAgMjM=","LjsgMTUl","JTVEVw==","IDIwIDI4PSAwOQ==","MitWYQ==","QU9MWEE=","PSxeWw==","OiAxNFwgMTg=","cG53Vmo=","NjwgMjZP","JiAxNiAwNkE=","SlZTWFg=","IDI1OSAyOCAzMg==","UXJ0Z0k=","d2lkdGg=","WkVza0g=","VWJpV28=","T09N","YWJz","V1VEZEU=","IDE3YyAwMy0=","IDMwIDE5NCAwMA==","SHJpWW8=","b1NscE4=","R0YgMDUgMDE=","JEAgMjUgMjE=","WEV5d3k=","WVlRemk=","IDAxIDAyIDA4SkQ=","IDEzIDI0XkU=","LyAxOSAxMFM=","TmVWdHM=","c3RyaW5n","KyMgMjhK","Vktydm0=","UkZOaUk=","bEZwZEo=","JyVNKQ==","V3ZwbmM=","SEVBUFUxNg==","YWRkRXZlbnRMaXN0ZW5lcg==","KCkxIDEz","IDI4N1Y7","IDI3WikgMTA=","T0xZUGc=","R0FwV3M=","ZnhiVWU=","IDI0IDEyTlg=","LCAxNicgMjA=","YkdTTHE=","PCFPKA==","Z1F4a08=","LlBFJg==","XSQ6IDAx","PiAwMkZW","IDMxIDA3IDAzIg==","KCFdIg==","O1lGXw==","UFhFc0Y=","JVBgSQ==","MVQ+SQ==","RWZ1RXM=","SWJTTE0=","QE48Xw==","IiAxMSAwNSw=","TEZCQVM=","IDI2Lig0","V3ZrQXE=","KCAxNSAxOCAzMQ==","UydiIDA5","TUxaSmM=","IDIzLiUgMjg=","W10jMA==","UExyRHU=","OScgMTUi","TGJ0bWY=","IDE5IDI4PCAyMw==","IDIxIDA0IDA3IDA2","KTQgMjUy","Ym9keQ==","IDE2IDA1IDA3IDE2","IDExIDEzNl0=","MV5aIDE1","RUNod0k=","IyNiIDEz","R0tYS1c=","LiNHMA==","aUNReHk=","YXVCRVM=","QUQ8IDI1","IDE2IDAxNCAyOQ==","ZnVuY3Rpb24lMjBqYXZhRW5hYmxlZCUyOCUyOSUyMCU3QiUyMCU1Qm5hdGl2ZSUyMGNvZGUlNUQlMjAlN0Q=","QmRITVI=","LSAxMiAwOEw=","cXVpdA==","amF2YUVuYWJsZWQ=","IDI5JSogMTE=","ViAwMyVG","UEpoQ0k=","ZG9jdHlwZQ==","VlloSnc=","eFBoeVM=","VEZNSFk=","c3ViYXJyYXk=","bGJtR2s=","IDI3MDQ1","UHRqWmI=","YSBwcm9ibGVtIHNlZW1zIHRvIGhhdmUgaGFwcGVuZWQgd2l0aCBNb2R1bGUubWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0LCBzdGF0dXM6IA==","SFJTdVo=","IDAxIDE0JyAyODs=","WmRPWWo=","cHdNSUI=","IDMxIDE3IDI4QA==","IUdZIDE3","IDAxIDMwXyMgMDI=","dEtReXc=","clV2SE0=","RyAxMz0gMTQ=","JT4gMjg6","JiAzMCAwN0Q=","b2trVGU=","aW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTog","IDEwIDE2TiAxNQ==","KjsgMjMx","RUVITGE=","V3ZlTUw=","MDcgMjQgMDQ=","IDI3Rj4gMTc=","IDI2QkQy","enJQdVY=","bEF4Z1o=","bWVtb3J5SW5pdGlhbGl6ZXJSZXF1ZXN0","NiAxOSAzMTk=","dGZrWmY=","IDA3IDExMU4=","PyAxOFYgMjU=","VldMSE8=","RUJCb3U=","bWpzWFE=","IDMxIDI3MT4=","dXJidlY=","IDI1KlI3","SW50OEFycmF5","IDE3TExJ","MD43Yg==","TU4gMTY3","TklUQVA=","TWFWSUE=","IDE3TCAzMlM=","Zk12V3Q=","IDIyX1RT","KUpOIDE4","MDcgMjQgMjc=","ZnVuYw==","RyAwNiAwNWE=","Ym9vbGVhbg==","WWdEQVg=","IDAxIDAwRCAyMUQ=","IDMyLFEgMjI=","Qm5lRFA=","RGZxU00=","IDIxSiAwOSAxMg==","IDExIUAgMTY=","Z2V0VGltZQ==","OCAxMFggMjU=","O0IgMzEgMDY=","IDE3M1MgMjI=","JGM/Xg==","NSAyMiAxMzg=","bG9hZA==","IDA4IDMwMEE=","IDAxIDExIDMwIDAwMw==","QyAxNTwz","WyAyMyUgMjU=","elNrcno=","ZEJZRU8=","IDE2XVZJ","aHViVGk=","bW9uaXRvclJ1bkRlcGVuZGVuY2llcw==","JFEgMDQ0","KVcgMTRA","YXdwZHg=","ZEZrVEY=","LV5XWQ==","Ilo5IDI3","IDE2QzIy","RlIjIDI0","VF02JA==","TExXTkU=","IDEyRyEt","OksgMDFJ","IDE3JCAzMEA=","QmNwV0I=","IDE2IDIwIDA2IDI1","IDI3SSRE","SHVUQ0k=","IDMwIDE4W14=","SGt4VEg=","IDI4IDI3IDEyYA==","Q2RRdXk=","Y2h0R2U=","KEMoIDA4","IDMxQCAyODs=","ZEdrU1U=","MiAyMDcgMjA=","IDE1OCAyNzk=","aXlaQk0=","I1wgMjYgMTU=","IDE2IDIwIDI2IDEw","YnpjcGQ=","IDEzLiAyNVo=","NFkgMTVE","QXlpZ1M=","JiAxN2MgMTE=","IDE5Njg1","IDE3MSFJ","YXpkQWc=","dXNlckFnZW50","IDMxIUFE","SE1HZk4=","KE9aMg==","QXBsdms=","KzIgMzAgMjA=","IDEwIDEyWy0=","IDExWTJb"],a,b;a=_qda,b=203,function(e){for(;--e;)a.push(a.shift())}(++b);var _qdb=function(e,t){var n,r=_qda[e-=0];_qdb.MrGYgn===undefined&&((n=function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e}()).atob||(n.atob=function(e){for(var t,n,r=String(e).replace(/=+$/,""),i="",a=0,o=0;n=r.charAt(o++);~n&&(t=a%4?64*t+n:n,a++%4)?i+=String.fromCharCode(255&t>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i}),_qdb.nZmPbu=function(e){for(var t=atob(e),n=[],r=0,i=t.length;r<i;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)},_qdb.mfQYOn={},_qdb.MrGYgn=!0);var i=_qdb.mfQYOn[e];return i===undefined?(r=_qdb.nZmPbu(r),_qdb.mfQYOn[e]=r):r=i,r};function _qdc(){var d=function(e){if(_qdb("0x2f8")!==_qdb("0x4ee")){for(var t in e)if(_qdb("0x1cd")===_qdb("0x299"))for(var n=0;n<args[_qdb("0x319")];n++){var r=toC[argTypes[n]];r?(0===stack&&(stack=bk()),cArgs[n]=r(args[n])):cArgs[n]=args[n]}else if(e[_qdb("0x4ef")](t))return!1;return!0}try{throw new Error}catch(i){B=i}if(!B[_qdb("0x6cc")])return _qdb("0x245")},e=function(bt){if(_qdb("0x410")!==_qdb("0x5db"))return eval(bt);u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1)},f=null,g=function(e){if(_qdb("0x39d")==_qdb("0x39d")){if(!f){if(_qdb("0x56c")!==_qdb("0xd"))return _qdb("0x118");var n=str[_qdb("0x687")](++i);u=65536+((1023&u)<<10)|1023&n}var r="",a=a3(e),s=bf(a+1);a2(e,s,a+1);var c=f(s);if(bd(s),c){if(_qdb("0x77")===_qdb("0x1f7"))throw new Error(_qdb("0x2bf"));r=a0(c),bd(c)}return r}o=0|b4[f+8>>2],b4[o+12>>2]=t,b4[t+8>>2]=o,y=t},h=function(){if(_qdb("0x52e")==_qdb("0x52e")){var e={};e[_qdb("0x523")]=2,e.tm=(new Date)[_qdb("0x5c9")]();var t=window;if(typeof t[_qdb("0xba")]===_qdb("0x391"))_qdb("0x17d")!=_qdb("0x17d")?e[_qdb("0x63d")]=_qdb("0x581")===escape(t[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i":e[_qdb("0x63d")]="u";else{if(_qdb("0x559")!=_qdb("0x559"))return _qdb("0x245");e[_qdb("0x63d")]=_qdb("0x581")===escape(t[_qdb("0xba")][_qdb("0x585")][_qdb("0x15")]())?"a":"i"}for(var n in e[_qdb("0x4b3")]=0,t)_qdb("0x508")!=_qdb("0x508")?(v=Z+f|0,b4[_+4>>2]=3|v,i=_+v+4|0,b4[i>>2]=1|b4[i>>2]):t[_qdb("0x4ef")](n)&&(_qdb("0x67c")!==_qdb("0x59a")?n=n[_qdb("0xdf")]():x(aJ,bm,(function(){throw new Error(_qdb("0x510")+aJ)})));return e}ja=pa+1048320|0,_=ja>>>16&8,ja=pa<<_,pa=ja+520192|0,Z=pa>>>16&4,pa=ja<<Z,ja=pa+245760|0,ia=ja>>>16&2,ja=pa<<ia,pa=14-(Z|_|ia)+(ja>>>15)|0,ja=pa+7|0,Ja=1&(ja?d>>>ja:d)|pa<<1},i=function(){if(_qdb("0xc5")==_qdb("0xc5")){var e=h();return e.tm=parseInt(e.tm/1e3),e}p+=-33014};if(exports[_qdb("0x688")]=g,exports[_qdb("0x304")]=h,exports[_qdb("0x6c7")]=i,typeof ArrayBuffer!==_qdb("0x391")){var j={};j[_qdb("0x7b")]=32768;var k=j,k=typeof k!==_qdb("0x391")?k:{},l={},m;for(m in k)if(_qdb("0x160")!=_qdb("0x160"))u0=(15&u0)<<12|u1<<6|u2;else if(k[_qdb("0x4ef")](m)){if(_qdb("0x290")!=_qdb("0x290"))return Y[_qdb("0x378")](heap[_qdb("0x58d")](idx,endPtr));l[m]=k[m]}var n=[],o=_qdb("0x20c"),p=function(e,t){if(_qdb("0x64b")==_qdb("0x64b"))throw t;ra=0,O=143},q=!0,r=!1,s=!1,t=!1,u="",w,x,y,z;if(q||r)if(_qdb("0x1ab")!==_qdb("0x4a")){if(r)_qdb("0x152")===_qdb("0x459")?p+=-22081:u=self[_qdb("0x87")][_qdb("0x389")];else if(document[_qdb("0x250")]){if(_qdb("0x569")!=_qdb("0x569")){var bx=aR(x);return x===bx?x:bx+" ["+x+"]"}u=document[_qdb("0x250")][_qdb("0x4c")]}if(0!==u[_qdb("0x2ae")](_qdb("0x4d")))if(_qdb("0x32b")!==_qdb("0x2da"))u=u[_qdb("0x2a4")](0,u[_qdb("0x16e")]("/")+1);else{var by=aF;aF=null,by()}else{if(_qdb("0x610")===_qdb("0x553")){var bz=h();return bz.tm=parseInt(bz.tm/1e3),bz}u=""}if(_qdb("0x517")===_qdb("0x43e"))return s(0|b6,0|d,0|e),0|b6;w=function(e){if(_qdb("0x641")!==_qdb("0xd7"))try{if(_qdb("0x4f6")!==_qdb("0x395")){var t=new XMLHttpRequest;return t[_qdb("0x6bc")](_qdb("0xf9"),e,!1),t[_qdb("0x2ef")](null),t[_qdb("0x9c")]}p+=-720}catch(i){if(_qdb("0x45e")!==_qdb("0x3ff")){var n=b3(e);if(n){if(_qdb("0x672")==_qdb("0x672"))return b0(n);b4[4]=F|b6,b4[l>>2]=m,b4[m+24>>2]=l,b4[m+12>>2]=m,b4[m+8>>2]=m}throw i}for(var r=0;r<str[_qdb("0x319")];++r)a8[a7++>>0]=str[_qdb("0x687")](r);dontAddNull||(a8[a7>>0]=0)}else pa<<=1,ja=_},r&&(_qdb("0x665")!==_qdb("0x38d")?y=function(e){if(_qdb("0x340")===_qdb("0x2c8"))return String[_qdb("0x51")][_qdb("0x219")]?str[_qdb("0x219")](prefix):0===str[_qdb("0x2ae")](prefix);try{if(_qdb("0x52b")==_qdb("0x52b")){var t=new XMLHttpRequest;return t[_qdb("0x6bc")](_qdb("0xf9"),e,!1),t[_qdb("0x254")]=_qdb("0x141"),t[_qdb("0x2ef")](null),new Uint8Array(t[_qdb("0x63b")])}p+=6507}catch(r){if(_qdb("0x6c0")!==_qdb("0x4cc")){var n=b3(e);if(n){if(_qdb("0xcf")==_qdb("0xcf"))return n;n[_qdb("0x441")]&&(n=new Uint8Array(n)),a9[_qdb("0x33f")](n,N),k[_qdb("0x5a9")]&&delete k[_qdb("0x5a9")][_qdb("0x63b")],aH(_qdb("0x48f"))}throw r}aJ=v(aJ)}}:a7=new ArrayBuffer(ak)),x=function(e,t,n){if(_qdb("0x119")!=_qdb("0x119"))p+=27466;else{var r=new XMLHttpRequest;r[_qdb("0x6bc")](_qdb("0xf9"),e,!0),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2a6")]=function(){if(_qdb("0x27b")===_qdb("0x3f8"))document[_qdb("0x34f")]=title;else{if(200==r[_qdb("0x50a")]||0==r[_qdb("0x50a")]&&r[_qdb("0x63b")]){if(_qdb("0x303")!==_qdb("0x6ce"))return void t(r[_qdb("0x63b")]);F[_qdb("0x24c")][text]=1,B(text)}var i=b3(e);if(i)return _qdb("0xbe")===_qdb("0x21d")?528:void t(i[_qdb("0x38")]);n()}},r[_qdb("0x62e")]=n,r[_qdb("0x2ef")](null)}},z=function(e){if(_qdb("0x446")!=_qdb("0x446"))for(h=g-4|0;(0|b6)<(0|h);)j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0;else document[_qdb("0x34f")]=e}}else k[_qdb("0x1e1")](what);var A=k[_qdb("0x5d")]||console[_qdb("0x185")][_qdb("0x2f5")](console),B=k[_qdb("0x236")]||console[_qdb("0x186")][_qdb("0x2f5")](console);for(m in l)_qdb("0x4eb")!==_qdb("0x420")?l[_qdb("0x4ef")](m)&&(_qdb("0x684")!=_qdb("0x684")?(aZ&&T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+i+_qdb("0x413")),chr&=255):k[m]=l[m]):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);l=null,k[_qdb("0x2b")]&&(n=k[_qdb("0x2b")]),k[_qdb("0x327")]&&(o=k[_qdb("0x327")]),k[_qdb("0x584")]&&(p=k[_qdb("0x584")]);var C=16,G=1,H=new Array(0),I={},K=0,L=function(e){if(_qdb("0x102")!=_qdb("0x102")){for(var t=[],n=0;n<array[_qdb("0x319")];n++){var r=array[n];r>255&&(aZ&&T(!1,_qdb("0x369")+r+" ("+String[_qdb("0x35a")](r)+_qdb("0x1f2")+n+_qdb("0x413")),r&=255),t[_qdb("0x3dc")](String[_qdb("0x35a")](r))}return t[_qdb("0x293")]("")}K=e},M=function(){if(_qdb("0x30e")!==_qdb("0xf8"))return K;l[_qdb("0x4ef")](m)&&(k[m]=l[m])},N=8,O,P;k[_qdb("0x4da")]&&(O=k[_qdb("0x4da")]),k[_qdb("0x6b1")]&&(P=k[_qdb("0x6b1")]);var R=!1,S=0,X=3,Y=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0x213")):undefined,a4=typeof TextDecoder!==_qdb("0x391")?new TextDecoder(_qdb("0xd3")):undefined,a7,a8,a9,aa,ab,ac,ad,ae,af,ah=736,ai=4832,aj=528,ak=k[_qdb("0x7b")]||16777216;k[_qdb("0x38")]?_qdb("0x3d9")===_qdb("0x6c4")?p+=31715:a7=k[_qdb("0x38")]:_qdb("0x4a3")!==_qdb("0x4")?a7=new ArrayBuffer(ak):(b4[3]=_|ja,Ha=pa+8|0,Ia=pa),ak=a7[_qdb("0x441")],ag(a7),ac[aj>>2]=ai;var am=[],an=[],ao=[],ap=[],aq=!1,ar=!1;Math[_qdb("0x69f")]&&-5===Math[_qdb("0x69f")](4294967295,5)||(Math[_qdb("0x69f")]=function(e,t){if(_qdb("0x6a0")!==_qdb("0x63a")){var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16)|0}da=P,ea=m}),Math[_qdb("0x451")]||(Math[_qdb("0x451")]=function(e){if(_qdb("0xd5")==_qdb("0xd5")){var t=32,n=e>>16;if(n&&(_qdb("0x601")!=_qdb("0x601")?(t-=4,e=n):(t-=16,e=n)),(n=e>>8)&&(_qdb("0x4e5")!==_qdb("0x12b")?(t-=8,e=n):(Z=d,b4[(d=d+4|0)>>2]=7)),(n=e>>4)&&(_qdb("0x14d")!==_qdb("0x1a8")?(t-=4,e=n):(ret_str=a0(p_ret),bd(p_ret))),n=e>>2){if(_qdb("0x14b")===_qdb("0x402")){var r=k["_"+ident];return T(r,_qdb("0x64e")+ident+_qdb("0x2b7")),r}t-=2,e=n}return(n=e>>1)?t-2:t-e}return o(b4<<b6|(j&(1<<b6)-1<<32-b6)>>>32-b6|0),j<<b6}),Math[_qdb("0x3")]||(Math[_qdb("0x3")]=function(e){if(_qdb("0x275")==_qdb("0x275"))return e<0?Math[_qdb("0x1e0")](e):Math[_qdb("0x382")](e);k[_qdb("0x4cb")](func)});var az=Math[_qdb("0x538")],aA=Math[_qdb("0x1e0")],aB=Math[_qdb("0x382")],aC=Math[_qdb("0x4fd")],aD=0,aE=null,aF=null;k[_qdb("0x4f5")]={},k[_qdb("0x178")]={};var aJ=null,aL=_qdb("0x4d1"),aN=_qdb("0x6bb"),aO,aP,aQ=720,aY=Uint8Array[_qdb("0x51")][_qdb("0x49c")]?function(e,t,n){_qdb("0x49e")!==_qdb("0x385")?a9[_qdb("0x49c")](e,t,t+n):(j[b6>>0]=0|j[d>>0],j[b6+1>>0]=0|j[d+1>>0],j[b6+2>>0]=0|j[d+2>>0],j[b6+3>>0]=0|j[d+3>>0],b6=b6+4|0,d=d+4|0)}:function(e,t,n){_qdb("0x6ad")!==_qdb("0x253")?a9[_qdb("0x33f")](a9[_qdb("0x58d")](t,t+n),e):(b4[ua+16>>2]=g,b4[g+24>>2]=ua)},aZ=!1,b1=typeof atob===_qdb("0x16d")?atob:function(e){if(_qdb("0x41c")!==_qdb("0x512")){var t,r,i,a,o,c,u=_qdb("0x43c"),d="",f=0;e=e[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");do{if(_qdb("0xe1")==_qdb("0xe1"))t=u[_qdb("0x2ae")](e[_qdb("0x525")](f++))<<2|(a=u[_qdb("0x2ae")](e[_qdb("0x525")](f++)))>>4,r=(15&a)<<4|(o=u[_qdb("0x2ae")](e[_qdb("0x525")](f++)))>>2,i=(3&o)<<6|(c=u[_qdb("0x2ae")](e[_qdb("0x525")](f++))),d+=String[_qdb("0x35a")](t),64!==o&&(_qdb("0x5f4")===_qdb("0x449")?(n-=16,x=y):d+=String[_qdb("0x35a")](r)),64!==c&&(_qdb("0x1b9")==_qdb("0x1b9")?d+=String[_qdb("0x35a")](i):G=1&((F=(l=14-((j=(l=(F=l<<(E=(F=l+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(b6=(F=(l=F<<j)+245760|0)>>>16&2))+((F=l<<b6)>>>15)|0)+7|0)?D>>>F:D)|l<<1);else for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);k[_qdb("0x433")][_qdb("0x319")]>0;)k[_qdb("0x433")][_qdb("0x660")]()()}while(f<e[_qdb("0x319")]);return d}v=0|b4[n+8>>2],b4[v+12>>2]=s,b4[s+8>>2]=v,x=s},b4={};b4[_qdb("0x21b")]=Math,b4[_qdb("0x5b4")]=Int8Array,b4[_qdb("0x4e9")]=Int32Array,b4[_qdb("0x638")]=Uint8Array;var b5=b4,b6={};b6.a=aI,b6.b=L,b6.c=M,b6.d=aU,b6.e=aV,b6.f=aY,b6.g=aX,b6.h=aQ;var b7=b6,b8=function(bK,bL,bM){_qdb("0xb");var bN=new(bK[_qdb("0x5b4")])(bM),bO=new(bK[_qdb("0x4e9")])(bM),bP=new(bK[_qdb("0x638")])(bM),bQ=0|bL.h,bR=0,bS=0,bT=0,bU=0,bV=0,bW=0,bX=0,bY=0,bZ=bK[_qdb("0x21b")][_qdb("0x69f")],c0=bL.a,c1=bL.b,c2=bL.c,c3=bL.d,c4=bL.e,c5=bL.f,c6=bL.g,c7=736,c8=4832,c9=0;function ca(co){co|=0;var cp=0,cq=0,cr=0,cs=0,ct=0,cu=0,cv=0,cw=0,cx=0,cy=0,cz=0,cA=0,cB=0,cC=0,cD=0,cE=0,cF=0,cG=0,cH=0,cI=0,cJ=0,cK=0,cL=0,cM=0,cN=0,cO=0,cP=0,cQ=0,cR=0,cS=0,cT=0,cU=0,cV=0,cW=0,cX=0,cY=0,cZ=0,d0=0,d1=0,d2=0,d3=0,d4=0,d5=0,d6=0,d7=0,d8=0,d9=0,dc=0,dd=0,de=0,df=0,dg=0,dh=0,di=0,dj=0,dk=0,dl=0,dm=0,dn=0,dp=0,dq=0,dr=0,ds=0,dt=0,du=0,dv=0,dw=0,dx=0,dy=0,dz=0,dA=0,dB=0,dC=0,dD=0,dE=0,dF=0,dG=0,dH=0,dI=0,dJ=0,dK=0,dL=0,dM=0,dN=0,dO=0,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0,ee=0,ef=0,eg=0,eh=0,ei=0,ej=0,ek=0,el=0,em=0,en=0,eo=0,ep=0,eq=0,er=0,es=0,et=0,eu=0,ev=0,ew=0,ex=0,ey=0,ez=0,eA=0,eB=0,eC=0,eD=0,eE=0,eF=0,eG=0,eH=0,eI=0,eJ=0;cp=c7,c7=c7+608|0,cq=cp+48|0,cr=cp+592|0,cs=cp+588|0,ct=cp+584|0,cu=cp+580|0,cv=cp+576|0,cw=cp+572|0,cx=cp+568|0,cy=cp+564|0,cz=cp+560|0,cA=cp,cB=cA+4|0,cC=cA+8|0,cD=cA+12|0,cE=cA+16|0,cF=cA+20|0,cG=cA+24|0,cH=cA+28|0,cI=cA+32|0,cJ=cq+8|0,cK=cq+16|0,cL=cq+24|0,cM=cq+32|0,cN=cq+40|0,cO=cq+48|0,cP=cq+56|0,cQ=cq+64|0,cR=cq+72|0,cS=cq+80|0,cT=cq+88|0,cU=cq+96|0,cV=cq+104|0,cW=cq+112|0,cX=cq+120|0,cY=cq+128|0,cZ=cq+136|0,d0=cq+144|0,d1=cq+152|0,d2=cq+160|0,d3=cq+168|0,d4=cq+176|0,d5=cq+184|0,d6=cq+192|0,d7=cq+200|0,d8=cq+208|0,d9=cq+216|0,dc=cq+224|0,dd=cq+232|0,de=cq+240|0,df=cq+248|0,dg=cq+256|0,dh=cq+264|0,di=cq+272|0,dj=cq+280|0,dk=cq+288|0,dl=cq+296|0,dm=cq+304|0,dn=cq+312|0,dp=cq+320|0,dq=cq+328|0,dr=cq+336|0,ds=cq+344|0,dt=cq+352|0,du=cq+360|0,dv=cq+368|0,dw=cq+376|0,dx=cq+384|0,dy=cq+392|0,dz=cq+400|0,dA=cq+408|0,dB=cq+416|0,dC=cq+424|0,dD=cq+432|0,dE=cq+440|0,dF=cq+448|0,dG=cq+456|0,dH=cq+464|0,dI=cq+472|0,dJ=cq+480|0,dK=cq+488|0,dL=cq+496|0,dM=cq+504|0,dN=0,dO=140,dP=0,dQ=0,dR=0,dS=0,dT=0,dU=0,dV=0,dW=0,dX=0,dY=0,dZ=0,e0=0,e1=0,e2=0,e3=0,e4=0,e5=0,e6=0,e7=0,e8=0,e9=0,ec=0,ed=0;e:for(;;){switch((255&dO)<<24>>24){case 35:if(_qdb("0x21c")==_qdb("0x21c"))break e;return cz=0,c7=co,0|cz;case 124:if(_qdb("0x4b9")==_qdb("0x4b9")){ee=0,ef=140;break e}enc1=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc2=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc3=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),enc4=keyStr[_qdb("0x2ae")](input[_qdb("0x525")](cu++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String[_qdb("0x35a")](chr1),64!==enc3&&(output+=String[_qdb("0x35a")](chr2)),64!==enc4&&(output+=String[_qdb("0x35a")](chr3));case 112:if(_qdb("0x27c")==_qdb("0x27c")){eg=0|cc(e8<<2),eh=eg,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=eg;break}c2+=13302;case 111:if(_qdb("0x95")!==_qdb("0x3b6")){eg=(dS|~dU)^dT,eG=dY+-1|0,eh=dN,ei=109,ej=dP,ek=eG>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((7*dX|0)%16|0)|0,eE=ec,eF=ed;break}cy-=2,cF=cG;case 109:if(_qdb("0x588")!==_qdb("0x234")){eg=dY+32|0,eh=dN,ei=(0|e9)>(eg>>2|0)?85:107,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cp=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](cv(_qdb("0x1fa")))===_qdb("0x6b8");case 108:if(_qdb("0xe6")!==_qdb("0x41e")){eh=dN,ei=(0|dW)<(0|e8)?104:102,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30737;case 107:if(_qdb("0x204")==_qdb("0x204")){eh=dN,ei=(0|e9)>(0|dQ)?105:99,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6067;case 105:if(_qdb("0x6b6")==_qdb("0x6b6")){eh=dN,ei=(0|e3)>0?103:101,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-13216;case 104:if(_qdb("0xa5")!==_qdb("0x12e")){bO[ed+(dW<<2)>>2]=0,eh=dN,ei=108,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bn();case 103:if(_qdb("0x283")!==_qdb("0x346")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr);case 102:if(_qdb("0x65e")==_qdb("0x65e")){eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bm(bo[_qdb("0x38")]);case 101:if(_qdb("0x3d1")!==_qdb("0x6c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}am[_qdb("0x23c")](e3);case 99:if(_qdb("0x2b9")==_qdb("0x2b9")){eh=dN,ei=(0|e9)==(0|dQ)?97:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x2f")](_qdb("0x66")),setTimeout((function(){setTimeout((function(){k[_qdb("0x2f")]("")}),1),doRun()}),1);case 98:if(_qdb("0x71")===_qdb("0x507"))return void(bO[5]=cA);eh=dN,ei=(0|dW)<(0|dY)?94:92,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 97:if(_qdb("0x50b")==_qdb("0x50b")){eh=dN,ei=(0|e3)>0?95:91,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=cD,cF=c7;case 95:if(_qdb("0x25d")!==_qdb("0x45c")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cw|ct,de=cD+8|0,df=cD;case 94:if(_qdb("0x6b4")==_qdb("0x6b4")){eg=ed+(dW>>2<<2)|0,bO[eg>>2]=bN[co+dW>>0]<<(((0|dW)%4|0)<<3)|bO[eg>>2],eh=dN,ei=98,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-10871;case 92:if(_qdb("0x592")==_qdb("0x592")){bO[cr>>2]=0,bO[cs>>2]=0,bO[ct>>2]=0,bO[cu>>2]=0,bO[cv>>2]=0,eg=dY+32|0,eG=ed+(eg>>2<<2)|0,bO[eG>>2]=bO[eG>>2]|128<<(((0|eg)%4|0)<<3),bO[cw>>2]=0,bO[cx>>2]=0,bO[cy>>2]=0,bO[cz>>2]=0,bO[cA>>2]=cr,bO[cB>>2]=cw,bO[cC>>2]=cs,bO[cD>>2]=cx,bO[cE>>2]=ct,bO[cF>>2]=cy,bO[cG>>2]=cu,bO[cH>>2]=cz,bO[cI>>2]=cv,eh=dN,ei=90,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=(0|dY)%4|0,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}d3=cP,d4=d2;case 91:if(_qdb("0x353")!==_qdb("0x6aa")){eh=dN,ei=(0|e9)>(dQ+1|0)?89:87,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-36568;case 90:if(_qdb("0x3f")!==_qdb("0x2b6")){eh=dN,ei=(0|e3)>0?88:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ap[_qdb("0x23c")](e3);case 89:if(_qdb("0x4c7")==_qdb("0x4c7")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;case 88:if(_qdb("0x548")!==_qdb("0x533")){eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dY-e3|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cY,cO=d0,cI<<=1,cT=cZ;case 87:if(_qdb("0xa9")!==_qdb("0x5e9")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}K=value;case 85:if(_qdb("0x2f0")!=_qdb("0x2f0")){var f8=new XMLHttpRequest;return f8[_qdb("0x6bc")](_qdb("0xf9"),url,!1),f8[_qdb("0x2ef")](null),f8[_qdb("0x9c")]}eg=dY+40|0,eh=dN,ei=(0|e9)==(14|eg>>6<<4)?83:81,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 84:if(_qdb("0xed")==_qdb("0xed")){eh=dN,ei=(0|dW)<(0|dY)?80:78,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[_qdb("0x5d8")](aD);case 83:if(_qdb("0x30d")!==_qdb("0x644")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[d6+20>>2]=cw,bO[cw+24>>2]=d6,dd=cD;case 81:if(_qdb("0x23a")==_qdb("0x23a")){eh=dN,ei=(0|e9)>(dQ+1|0)?79:77,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=38401;case 80:if(_qdb("0x4a8")==_qdb("0x4a8")){eg=0|bO[cA>>2],bO[eg>>2]=bO[eg>>2]|bN[co+dW>>0]<<(((0|dW)%4|0)<<3),eh=dN,ei=84,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11874;case 79:if(_qdb("0x67b")!==_qdb("0x1b1")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr2);case 78:if(_qdb("0x5eb")!==_qdb("0x60f")){eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=0|c3(),eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-30046;case 77:if(_qdb("0x54a")==_qdb("0x54a")){eh=dN,ei=75,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+16>>2]=cw,bO[cw+24>>2]=cA;case 75:if(_qdb("0x5dc")!==_qdb("0x21f")){eg=cq+(dX<<3)|0,eG=dV>>1,eH=0|ck(0|bO[eg>>2],0|bO[eg+4>>2],0|ci(0|eG,((0|eG)<0)<<31>>31|0,1),0|c2()),c2(),eG=(1&dV)+eH|0,eH=(eG+(-2&e8)&-2|1&e8)+(1&eG)|0,eg=(0|dX)%4|0,eI=6+(eg<<2)+((0|bZ(eg+-1|0,eg))/2|0)|0,eg=32-eI|0,eJ=eH<<eI|(eg?eH>>>eg:eH),eh=dN,ei=115,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eG,eE=ec,eF=ed;break}d9=cs,dc=cw;case 74:if(_qdb("0x61d")==_qdb("0x61d")){eh=dN,ei=(0|dW)<8?70:40,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dh=dn+8|0,dG=dh,dH=0|bO[dh>>2];case 73:if(_qdb("0x62f")==_qdb("0x62f")){eh=dN,ei=36,ej=dP,ek=dQ,el=((-2&dZ)+dR&-2|1&dZ)+(1&dR)|0,em=((-2&e0)+dS&-2|1&e0)+(1&dS)|0,en=((-2&e1)+dT&-2|1&e1)+(1&dT)|0,eo=((-2&e2)+dU&-2|1&e2)+(1&dU)|0,ep=dV,eq=dW+16|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[ct+8>>2],bO[cw+12>>2]=cv,bO[cv+8>>2]=cw,cA=cv;case 71:if(_qdb("0x1ae")!==_qdb("0x5ee")){cd(dN),eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=0|cc(33),ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-31865;case 70:if(_qdb("0x6a1")!==_qdb("0x1a1")){eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}al(ao);case 67:if(_qdb("0x29")==_qdb("0x29")){eh=dN,ei=(0|dX)<32?63:37,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}output+=String[_qdb("0x35a")](chr3);case 66:if(_qdb("0x4ca")==_qdb("0x4ca")){eh=dN,ei=(0|dX)<4?62:42,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE[_qdb("0x4ef")](objkey)&&(objkey=objkey[_qdb("0xdf")]());case 63:if(_qdb("0x693")==_qdb("0x693")){eh=dN,ei=61,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=(0|dX)/8|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cr=0|bO[8],cw=bZ>>>3,cB=52+(cw<<1<<2)|0,cD=1<<cw,cD&cs?(cD=cB+8|0,cL=cD,ck=0|bO[cD>>2]):(bO[3]=cD|cs,cL=cB+8|0,ck=cB),bO[cL>>2]=cr,bO[ck+12>>2]=cr,bO[cr+8>>2]=ck,bO[cr+12>>2]=cB;case 62:if(_qdb("0x8c")==_qdb("0x8c")){eG=dW+1|0,eI=dX+1|0,eh=dN,ei=58,ej=0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=72871+(359*eI|0)+(0|bZ(29+(661*eI|0)|0,eG))+(0|bZ(919+(797*e6|0)+(0|bZ(881*eI|0,eI))+(0|bZ((8353*eI|0)+(277*eG|0)|0,eG))|0,e6))|0,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=39832;case 61:if(_qdb("0xf3")==_qdb("0xf3")){eh=dN,ei=0==(0|dW)?59:57,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=c2|cu,c3=cw+8|0,cA=cw;case 59:if(_qdb("0x36c")==_qdb("0x36c")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dR,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=c3,cC=cw;case 58:if(_qdb("0x2ee")==_qdb("0x2ee")){eh=dN,ei=(0|dP)<16?54:52,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}u=document[_qdb("0x250")][_qdb("0x4c")];case 57:if(_qdb("0x4d9")!==_qdb("0x2c2")){eh=dN,ei=1==(0|dW)?55:53,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cB=cE+1048320|0,cI=cB>>>16&8,cB=cE<<cI,cE=cB+520192|0,cJ=cE>>>16&4,cE=cB<<cJ,cB=cE+245760|0,cO=cB>>>16&2,cB=cE<<cO,cE=14-(cJ|cI|cO)+(cB>>>15)|0,cB=cE+7|0,cN=1&(cB?cr>>>cB:cr)|cE<<1;case 55:if(_qdb("0x3d")!==_qdb("0x375")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dS,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=ct+cq|0,bO[cy+4>>2]=3|cw,cr=cy+cw+4|0,bO[cr>>2]=1|bO[cr>>2];case 54:if(_qdb("0x114")==_qdb("0x114")){eG=1519533197+(0|bZ(e7,-1946432927))|0,eh=dN,ei=58,ej=dP+1|0,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=eG>>>16&1023,eA=e6,eB=eG,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24497;case 53:if(_qdb("0x40c")===_qdb("0x140")){fx|=0,bO|=0,co|=0,cp|=0;var fx=0;return fx=fx+co>>>0,0|(cz(bO+cp+(fx>>>0<fx>>>0|0)>>>0|0),0|fx)}eh=dN,ei=2==(0|dW)?51:49,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-90:if(_qdb("0x634")!==_qdb("0x599")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}callback[_qdb("0x6a4")]===undefined?k[_qdb("0x4cb")](func):k[_qdb("0xe5")](func,callback[_qdb("0x6a4")]);case 52:if(_qdb("0x88")===_qdb("0x388"))return cz=0,c7=co,0|cz;eh=dN,ei=50,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=31&e5,eE=ec,eF=ed;break;case 51:if(_qdb("0xf1")==_qdb("0xf1")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dT,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ct=cD+8|0,de=ct,df=0|bO[ct>>2];case-92:if(_qdb("0x5f")!==_qdb("0x6b3")){eh=dN,ei=(0|e9)>(dQ+1|0)?163:162,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}du=dc,dv=de;case 50:if(_qdb("0x496")!==_qdb("0x255")){eh=dN,ei=(0|e9)<10?48:46,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}if(!aM(filename))return;return b2(filename[_qdb("0x2e4")](aL[_qdb("0x319")]));case-93:if(_qdb("0x10d")==_qdb("0x10d")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cArgs[cu]=args[cu];case 49:if(_qdb("0x2ec")!==_qdb("0x37e")){eh=dN,ei=47,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dU,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=24275;case-94:if(_qdb("0xff")==_qdb("0xff")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,co=co+4|0;case 48:if(_qdb("0x29e")!==_qdb("0x6c6")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+32|0,eE=ec,eF=ed;break}c2+=44604;case-95:if(_qdb("0x522")==_qdb("0x522")){eG=dY+40|0,eh=dN,ei=(0|e9)==(14|eG>>6<<4)?160:159,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5358;case 47:if(_qdb("0x301")==_qdb("0x301")){eG=dX<<2&28^4,eh=dN,ei=45,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=15&(eG?dV>>eG:dV),eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=59939;case-96:if(_qdb("0x17b")!==_qdb("0x1")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0;case 46:if(_qdb("0x331")!==_qdb("0x58b")){eh=dN,ei=44,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9+72|0,eE=ec,eF=ed;break}func(callback[_qdb("0x6a4")]===undefined?null:callback[_qdb("0x6a4")]);case-97:if(_qdb("0x3eb")!==_qdb("0x1a4")){eh=dN,ei=(0|e9)>(dQ+1|0)?158:157,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}try{for(var fL=b1(cB),fM=new Uint8Array(fL[_qdb("0x319")]),fN=0;fN<fL[_qdb("0x319")];++fN)fM[fN]=fL[_qdb("0x687")](fN);return fM}catch(fO){throw new Error(_qdb("0x2bf"))}case 45:if(_qdb("0x1b2")==_qdb("0x1b2")){eh=dN,ei=(0|dV)<10?43:41,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cx=ct,bZ=ct,cy=cu;case-98:if(_qdb("0x1f")==_qdb("0x1f")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cY=cB,cZ=cT;case 44:if(_qdb("0x266")==_qdb("0x266")){eG=dX+e3|0,eI=eG+(dW<<2)|0,eJ=0|bO[cA+(eI>>2<<2)>>2],bO[eJ>>2]=bO[eJ>>2]|e9+16<<(((0|eG)%4|0)<<3),eh=dN,ei=66,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=25614;case-99:if(_qdb("0x664")==_qdb("0x664")){eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return func;case 43:if(_qdb("0x21e")!==_qdb("0x3c9")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+48|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),F[_qdb("0x24c")][text]||(F[_qdb("0x24c")][text]=1,B(text));case-100:if(_qdb("0xa3")!==_qdb("0x582")){eG=cq+(dX<<3)|0,eJ=dV>>1,eI=0|ck(0|bO[eG>>2],0|bO[eG+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eI|0,eI=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,eG=(0|dX)%4|0,eH=5+(eG<<2)+((0|bZ(eG+-1|0,eG))/2|0)|0,eG=32-eH|0,eg=eI<<eH|(eG?eI>>>eG:eI),eh=dN,ei=9,ej=dP,ek=eI,el=dU,em=(eg+(-2&dS)&-2|1&dS)+(1&eg)|0,en=dS,eo=dT,ep=eg,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eH,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}c2+=17659;case 42:if(_qdb("0x271")===_qdb("0x34d")){for(var fS in obj)if(obj[_qdb("0x4ef")](fS))return!1;return!0}eh=dN,ei=74,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 41:if(_qdb("0x69c")!==_qdb("0x425")){eh=dN,ei=39,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV+87|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cu=cv(_qdb("0x677"));case-102:if(_qdb("0x2ad")==_qdb("0x2ad")){eh=dN,ei=(0|dX)<48?152:115,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=8809;case 40:if(_qdb("0x57b")===_qdb("0x594"))return eval(cB);eJ=(dW<<2)+e3|0,eH=0|bO[cA+(eJ>>2<<2)>>2],bO[eH>>2]=bO[eH>>2]|128<<(((0|e3)%4|0)<<3),eh=dN,ei=36,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 39:if(_qdb("0x2f3")!=_qdb("0x2f3"))return b0(bl);bN[e4+dX>>0]=dV,eh=dN,ei=67,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-104:if(_qdb("0x291")!==_qdb("0x393")){eH=dT^dS^dU,eJ=dY+-1|0,eh=dN,ei=151,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((5+(3*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break}for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());case-105:if(_qdb("0x607")==_qdb("0x607")){eH=dY+32|0,eh=dN,ei=(0|e9)>(eH>>2|0)?137:150,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[3]=cD|cs,cL=cB+8|0,ck=cB;case 37:if(_qdb("0x22a")==_qdb("0x22a")){bN[e4+32>>0]=0,eh=dN,ei=35,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-35594;case-106:if(_qdb("0x15b")===_qdb("0x6b9"))return V(ident,returnType,argTypes,arguments,opts);eh=dN,ei=(0|e9)>(0|dQ)?149:146,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 36:if(_qdb("0x4fb")!==_qdb("0x3bd")){eH=dY+40|0,eh=dN,ei=(0|dW)<(14|eH>>6<<4)?33:71,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=15745;case-107:if(_qdb("0x5ae")==_qdb("0x5ae")){eh=dN,ei=(0|e3)>0?148:147,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=6092;case-108:if(_qdb("0x105")==_qdb("0x105")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cw=0|bO[d4+8>>2],bO[cw+12>>2]=ct,bO[ct+8>>2]=cw,d6=ct;case-109:if(_qdb("0x5e2")==_qdb("0x5e2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cc=cq,cd=cp;case 33:if(_qdb("0x183")==_qdb("0x183")){eh=dN,ei=31,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=0,es=dY,et=dR,eu=dS,ev=dT,ew=dU,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ax(k[_qdb("0x296")][_qdb("0x495")]());case-110:if(_qdb("0x557")==_qdb("0x557")){eh=dN,ei=(0|e9)==(0|dQ)?145:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}throw new Error;case-111:if(_qdb("0x176")==_qdb("0x176")){eh=dN,ei=(0|e3)>0?144:142,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}ay(k[_qdb("0xc9")][_qdb("0x495")]());case 31:if(_qdb("0x5a8")!==_qdb("0xf2")){eh=dN,ei=(0|dX)<16?29:9,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-18148;case-112:if(_qdb("0x412")!==_qdb("0x174")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cA+20>>2]=cw,bO[cw+24>>2]=cA,cx=ct,bZ=ct,cy=cu;case 29:if(_qdb("0x4dc")!==_qdb("0x1c5")){eH=dU&~dS|dT&dS,eJ=dY+-1|0,eh=dN,ei=28,ej=dP,ek=eJ>>2,el=dR,em=dS,en=dT,eo=dU,ep=eH,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eH+(-2&dR)&-2|1&dR)+(1&eH)|0,eD=dW+((0|dX)%16|0)|0,eE=ec,eF=ed;break}clearInterval(aE),aE=null;case-114:if(_qdb("0x381")!==_qdb("0x59")){eh=dN,ei=(0|e9)>(dQ+1|0)?141:139,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=ct,bO[co+4>>2]=ct,bO[co+8>>2]=ct,bO[co+12>>2]=ct,bO[co+16>>2]=ct,bO[co+20>>2]=ct,bO[co+24>>2]=ct,bO[co+28>>2]=ct,bO[co+32>>2]=ct,bO[co+36>>2]=ct,bO[co+40>>2]=ct,bO[co+44>>2]=ct,bO[co+48>>2]=ct,bO[co+52>>2]=ct,bO[co+56>>2]=ct,bO[co+60>>2]=ct,co=co+64|0;case 28:if(_qdb("0xaf")==_qdb("0xaf")){eH=dY+32|0,eh=dN,ei=(0|e9)>(eH>>2|0)?16:27,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-5882;case-115:if(_qdb("0x4b2")==_qdb("0x4b2")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dn=de,dp=d6,cS=136;case 27:if(_qdb("0x145")==_qdb("0x145")){eh=dN,ei=(0|e9)>(0|dQ)?26:23,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}for(;3&co;){if(!cq)return 0|cr;bN[co>>0]=0|bN[cp>>0],co=co+1|0,cp=cp+1|0,cq=cq-1|0}for(ct=-4&cs|0,cq=ct-64|0;(0|co)<=(0|cq);)bO[co>>2]=bO[cp>>2],bO[co+4>>2]=bO[cp+4>>2],bO[co+8>>2]=bO[cp+8>>2],bO[co+12>>2]=bO[cp+12>>2],bO[co+16>>2]=bO[cp+16>>2],bO[co+20>>2]=bO[cp+20>>2],bO[co+24>>2]=bO[cp+24>>2],bO[co+28>>2]=bO[cp+28>>2],bO[co+32>>2]=bO[cp+32>>2],bO[co+36>>2]=bO[cp+36>>2],bO[co+40>>2]=bO[cp+40>>2],bO[co+44>>2]=bO[cp+44>>2],bO[co+48>>2]=bO[cp+48>>2],bO[co+52>>2]=bO[cp+52>>2],bO[co+56>>2]=bO[cp+56>>2],bO[co+60>>2]=bO[cp+60>>2],co=co+64|0,cp=cp+64|0;for(;(0|co)<(0|ct);)bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-116:if(_qdb("0x162")!==_qdb("0x41")){eH=cq,bO[eH>>2]=-680876936,bO[eH+4>>2]=-1,eH=cJ,bO[eH>>2]=-389564586,bO[eH+4>>2]=-1,eH=cK,bO[eH>>2]=606105819,bO[eH+4>>2]=0,eH=cL,bO[eH>>2]=-1044525330,bO[eH+4>>2]=-1,eH=cM,bO[eH>>2]=-176418897,bO[eH+4>>2]=-1,eH=cN,bO[eH>>2]=1200080426,bO[eH+4>>2]=0,eH=cO,bO[eH>>2]=-1473231341,bO[eH+4>>2]=-1,eH=cP,bO[eH>>2]=-45705983,bO[eH+4>>2]=-1,eH=cQ,bO[eH>>2]=1770035416,bO[eH+4>>2]=0,eH=cR,bO[eH>>2]=-1958414417,bO[eH+4>>2]=-1,eH=cS,bO[eH>>2]=-42063,bO[eH+4>>2]=-1,eH=cT,bO[eH>>2]=-1990404162,bO[eH+4>>2]=-1,eH=cU,bO[eH>>2]=1804603682,bO[eH+4>>2]=0,eH=cV,bO[eH>>2]=-40341101,bO[eH+4>>2]=-1,eH=cW,bO[eH>>2]=-1502002290,bO[eH+4>>2]=-1,eH=cX,bO[eH>>2]=1236535329,bO[eH+4>>2]=0,eH=cY,bO[eH>>2]=-165796510,bO[eH+4>>2]=-1,eH=cZ,bO[eH>>2]=-1069501632,bO[eH+4>>2]=-1,eH=d0,bO[eH>>2]=643717713,bO[eH+4>>2]=0,eH=d1,bO[eH>>2]=-373897302,bO[eH+4>>2]=-1,eH=d2,bO[eH>>2]=-701558691,bO[eH+4>>2]=-1,eH=d3,bO[eH>>2]=38016083,bO[eH+4>>2]=0,eH=d4,bO[eH>>2]=-660478335,bO[eH+4>>2]=-1,eH=d5,bO[eH>>2]=-405537848,bO[eH+4>>2]=-1,eH=d6,bO[eH>>2]=568446438,bO[eH+4>>2]=0,eH=d7,bO[eH>>2]=-1019803690,bO[eH+4>>2]=-1,eH=d8,bO[eH>>2]=-187363961,bO[eH+4>>2]=-1,eH=d9,bO[eH>>2]=1163531501,bO[eH+4>>2]=0,eH=dc,bO[eH>>2]=-1444681467,bO[eH+4>>2]=-1,eH=dd,bO[eH>>2]=-51403784,bO[eH+4>>2]=-1,eH=de,bO[eH>>2]=1735328473,bO[eH+4>>2]=0,eH=df,bO[eH>>2]=-1926607734,bO[eH+4>>2]=-1,eH=dg,bO[eH>>2]=-378558,bO[eH+4>>2]=-1,eH=dh,bO[eH>>2]=-2022574463,bO[eH+4>>2]=-1,eH=di,bO[eH>>2]=1839030562,bO[eH+4>>2]=0,eH=dj,bO[eH>>2]=-35309556,bO[eH+4>>2]=-1,eH=dk,bO[eH>>2]=-1530992060,bO[eH+4>>2]=-1,eH=dl,bO[eH>>2]=1272893353,bO[eH+4>>2]=0,eH=dm,bO[eH>>2]=-155497632,bO[eH+4>>2]=-1,eH=dn,bO[eH>>2]=-1094730640,bO[eH+4>>2]=-1,eH=dp,bO[eH>>2]=681279174,bO[eH+4>>2]=0,eH=dq,bO[eH>>2]=-358537222,bO[eH+4>>2]=-1,eH=dr,bO[eH>>2]=-722521979,bO[eH+4>>2]=-1,eH=ds,bO[eH>>2]=76029189,bO[eH+4>>2]=0,eH=dt,bO[eH>>2]=-640364487,bO[eH+4>>2]=-1,eH=du,bO[eH>>2]=-421815835,bO[eH+4>>2]=-1,eH=dv,bO[eH>>2]=530742520,bO[eH+4>>2]=0,eH=dw,bO[eH>>2]=-995338651,bO[eH+4>>2]=-1,eH=dx,bO[eH>>2]=-198630844,bO[eH+4>>2]=-1,eH=dy,bO[eH>>2]=1126891415,bO[eH+4>>2]=0,eH=dz,bO[eH>>2]=-1416354905,bO[eH+4>>2]=-1,eH=dA,bO[eH>>2]=-57434055,bO[eH+4>>2]=-1,eH=dB,bO[eH>>2]=1700485571,bO[eH+4>>2]=0,eH=dC,bO[eH>>2]=-1894986606,bO[eH+4>>2]=-1,eH=dD,bO[eH>>2]=-1051523,bO[eH+4>>2]=-1,eH=dE,bO[eH>>2]=-2054922799,bO[eH+4>>2]=-1,eH=dF,bO[eH>>2]=1873313359,bO[eH+4>>2]=0,eH=dG,bO[eH>>2]=-30611744,bO[eH+4>>2]=-1,eH=dH,bO[eH>>2]=-1560198380,bO[eH+4>>2]=-1,eH=dI,bO[eH>>2]=1309151649,bO[eH+4>>2]=0,eH=dJ,bO[eH>>2]=-145523070,bO[eH+4>>2]=-1,eH=dK,bO[eH>>2]=-1120210379,bO[eH+4>>2]=-1,eH=dL,bO[eH>>2]=718787259,bO[eH+4>>2]=0,eH=dM,bO[eH>>2]=-343485551,bO[eH+4>>2]=-1,eh=dN,ei=136,ej=dP,ek=0,el=1732584193,em=-271733879,en=-1732584194,eo=271733878,ep=1732584193,eq=0,er=0,es=0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=1,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=33105;case 26:if(_qdb("0x2ba")!==_qdb("0x222")){eh=dN,ei=(0|e3)>0?25:24,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[co>>2]=bO[cp>>2],co=co+4|0,cp=cp+4|0;case-117:if(_qdb("0x549")==_qdb("0x549")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=52278;case 25:if(_qdb("0x2c5")===_qdb("0x2a3"))return 8;eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 24:if(_qdb("0x62")!==_qdb("0x224")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bM=k[_qdb("0x38")];case-119:if(_qdb("0x5ab")===_qdb("0x4bc"))return ptr?Z(a9,ptr,maxBytesToRead):"";eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?135:133,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 23:if(_qdb("0x398")==_qdb("0x398")){eh=dN,ei=(0|e9)==(0|dQ)?22:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}aI(_qdb("0x537"));case-120:if(_qdb("0xce")===_qdb("0x306"))return bN|=0,bO|=0,co|=0,(0|co)<32?(cz(bO<<co|(bN&(1<<co)-1<<32-co)>>>32-co|0),bN<<co):(cz(bN<<co-32|0),0);eh=dN,ei=134,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW+1|0,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=dW,eF=ed;break;case 22:if(_qdb("0x438")!==_qdb("0x19d")){eh=dN,ei=(0|e3)>0?21:19,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD=cB+8|0,cL=cD,ck=0|bO[cD>>2];case-121:if(_qdb("0x58c")!==_qdb("0x27")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}return dm=dl-cM|0,bO[6]=dm,dl=0|bO[9],dq=dl+cM|0,bO[9]=dq,bO[dq+4>>2]=1|dm,bO[dl+4>>2]=3|cM,cz=dl+8|0,c7=co,0|cz;case 21:if(_qdb("0x15e")==_qdb("0x15e")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}dl=dk,dm=dn?dp:dq,cS=145;case-122:if(_qdb("0x131")==_qdb("0x131")){eh=dN,ei=0==(0|bN[co+ec>>0])?128:130,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-11163;case-123:if(_qdb("0x6ab")!==_qdb("0x2c3")){eh=dN,ei=(0|e9)>(dQ+1|0)?131:129,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}a9[_qdb("0x49c")](dest,src,src+num);case 19:if(_qdb("0x198")!==_qdb("0x11b")){eh=dN,ei=(0|e9)>(dQ+1|0)?18:17,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cE=c3,cF=cw;case 18:if(_qdb("0x109")!==_qdb("0x5ed")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=359;case-125:if(_qdb("0x485")==_qdb("0x485")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cy=0|bO[8],ct=bZ>>>3,cw=52+(ct<<1<<2)|0,cu=1<<ct,c2&cu?(cu=cw+8|0,c3=cu,cA=0|bO[cu>>2]):(bO[3]=c2|cu,c3=cw+8|0,cA=cw),bO[c3>>2]=cy,bO[cA+12>>2]=cy,bO[cy+8>>2]=cA,bO[cy+12>>2]=cw;case 17:if(_qdb("0x8")===_qdb("0xc3"))return a9[_qdb("0x319")];eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case-126:if(_qdb("0x380")==_qdb("0x380")){eh=dN,ei=136,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY+1|0,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bO[cG+20>>2]=cu,bO[cu+24>>2]=cG;case 16:if(_qdb("0x674")!==_qdb("0x4af")){eH=dY+40|0,eh=dN,ei=(0|e9)==(14|eH>>6<<4)?15:14,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}k[m]=l[m];case-127:if(_qdb("0x2c0")==_qdb("0x2c0")){eh=dN,ei=127,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=11458;case 15:if(_qdb("0x9b")==_qdb("0x9b")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=256+(dY<<3)|0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}cD<<=1,cs=cw;case-128:if(_qdb("0x259")==_qdb("0x259")){eh=dN,ei=126,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=dY>>2,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=-14993;case 14:if(_qdb("0x6a5")==_qdb("0x6a5")){eh=dN,ei=(0|e9)>(dQ+1|0)?13:12,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}this[_qdb("0x345")]=_qdb("0x1b0"),this[_qdb("0x188")]=_qdb("0x1ea")+status+")",this[_qdb("0x50a")]=status;case 127:if(_qdb("0x4fe")!==_qdb("0xdc")){eH=cq+(dX<<3)|0,eJ=dV>>1,eg=0|ck(0|bO[eH>>2],0|bO[eH+4>>2],0|ci(0|eJ,((0|eJ)<0)<<31>>31|0,1),0|c2()),c2(),eJ=(1&dV)+eg|0,eh=dN,ei=125,ej=dP,ek=(eJ+(-2&e8)&-2|1&e8)+(1&eJ)|0,el=dU,em=dS,en=dS,eo=dT,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=eJ,eE=ec,eF=ed;break}response=bl[_qdb("0x38")];case 13:if(_qdb("0xe2")!==_qdb("0x1f8")){eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}c2+=21455;case 126:if(_qdb("0x645")!==_qdb("0x5e")){eh=dN,ei=(0|dY)<6?124:122,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break}bN|=0,c7=bN;case 12:eh=dN,ei=11,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[ed+(e9<<2)>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 125:eh=dN,ei=(0|(0|dX)%4)<2?123:121,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 11:eJ=cq+(dX<<3)|0,eg=dV>>1,eH=0|ck(0|bO[eJ>>2],0|bO[eJ+4>>2],0|ci(0|eg,((0|eg)<0)<<31>>31|0,1),0|c2()),c2(),eg=(1&dV)+eH|0,eH=(eg+(-2&e8)&-2|1&e8)+(1&eg)|0,eJ=5*((0|dX)%4|0)|0,eI=eJ+7|0,eG=25-eJ|0,eJ=eH<<eI|(eG?eH>>>eG:eH),eh=dN,ei=31,ej=dP,ek=eH,el=dU,em=(eJ+(-2&dS)&-2|1&dS)+(1&eJ)|0,en=dS,eo=dT,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eI,eB=e7,eC=e8,eD=eg,eE=ec,eF=ed;break;case 123:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=4,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 9:eh=dN,ei=(0|dX)<32?7:154,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 122:eh=dN,ei=120,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e3+1|0,eD=e9,eE=ec,eF=ed;break;case 121:eh=dN,ei=119,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=2,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 7:eg=dU&dS|dT&~dU,eI=dY+-1|0,eh=dN,ei=6,ej=dP,ek=eI>>2,el=dR,em=dS,en=dT,eo=dU,ep=eg,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=(eg+(-2&dR)&-2|1&dR)+(1&eg)|0,eD=dW+((1+(5*dX|0)|0)%16|0)|0,eE=ec,eF=ed;break;case 120:eh=dN,ei=(0|e8)<33?118:116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 6:eg=dY+32|0,eh=dN,ei=(0|e9)>(eg>>2|0)?161:5,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 119:eg=(7*((0|dX)%4|0)|0)+e6|0,eI=32-eg|0,eJ=(eI?dQ>>>eI:dQ)|dQ<<eg,eh=dN,ei=154,ej=dP,ek=dQ,el=dR,em=(eJ+(-2&dT)&-2|1&dT)+(1&eJ)|0,en=dT,eo=dU,ep=eJ,eq=dW,er=dX+1|0,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=eg,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 5:eh=dN,ei=(0|e9)>(0|dQ)?4:1,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 118:eh=dN,ei=116,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=33,eD=e9,eE=ec,eF=ed;break;case 4:eh=dN,ei=(0|e3)>0?3:2,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 3:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 116:eg=dY+32|0,eh=dN,ei=(0|e8)>(8+(eg>>2)|0)?112:114,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 2:eh=dN,ei=156,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=0|bO[bO[cA+(e9+-1-dQ<<2)>>2]>>2],eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 115:eh=dN,ei=(0|dX)<64?111:73,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 1:eh=dN,ei=(0|e9)==(0|dQ)?0:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;case 114:eg=dY+32|0,eh=dN,ei=112,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=8+(eg>>2)|0,eD=e9,eE=ec,eF=ed;break;case 0:eh=dN,ei=(0|e3)>0?166:164,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed;break;default:eh=dN,ei=dO,ej=dP,ek=dQ,el=dR,em=dS,en=dT,eo=dU,ep=dV,eq=dW,er=dX,es=dY,et=dZ,eu=e0,ev=e1,ew=e2,ex=e3,ey=e4,ez=e5,eA=e6,eB=e7,eC=e8,eD=e9,eE=ec,eF=ed}dN=eh,dO=ei,dP=ej,dQ=ek,dR=el,dS=em,dT=en,dU=eo,dV=ep,dW=eq,dX=er,dY=es,dZ=et,e0=eu,e1=ev,e2=ew,e3=ex,e4=ey,e5=ez,e6=eA,e7=eB,e8=eC,e9=eD,ec=eE,ed=eF}return 140==(0|ef)?(c7=cp,0|ee):(ee=e4,c7=cp,0|ee)}function cb(){return 8}function cc(e){e|=0;var t,n=0,r=0,i=0,a=0,o=0,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=0,_=0,v=0,g=0,y=0,m=0,b=0,k=0,x=0,S=0,T=0,P=0,I=0,w=0,A=0,E=0,D=0,q=0,O=0,R=0,L=0,M=0,C=0,N=0,B=0,F=0,U=0,j=0,V=0,W=0,H=0,z=0,Y=0,G=0,Q=0,K=0,$=0,Z=0,X=0,J=0,ee=0,te=0,ne=0,re=0,ie=0,ae=0,oe=0,se=0,ue=0,de=0,le=0,fe=0,he=0,pe=0,_e=0,ve=0,ge=0,ye=0,me=0,be=0,ke=0,xe=0,Se=0,Te=0,Pe=0,Ie=0,we=0,Ae=0,Ee=0,De=0,qe=0,Oe=0,Re=0;t=c7,c7=c7+16|0,n=t;do{if(e>>>0<245){if(i=(r=e>>>0<11?16:e+11&-8)>>>3,a=0|bO[3],3&(o=i?a>>>i:a)|0)return d=0|bO[(u=(c=52+((s=(1&o^1)+i|0)<<1<<2)|0)+8|0)>>2],(0|(f=0|bO[(l=d+8|0)>>2]))==(0|c)?bO[3]=a&~(1<<s):(bO[f+12>>2]=c,bO[u>>2]=f),f=s<<3,bO[d+4>>2]=3|f,bO[(s=d+f+4|0)>>2]=1|bO[s>>2],c7=t,0|l;if(r>>>0>(l=0|bO[5])>>>0){if(0|o)return o=0|bO[(d=(u=52+((c=((s=(i=(f=(s=((f=o<<i&((s=2<<i)|0-s))&0-f)-1|0)>>>12&16)?s>>>f:s)>>>5&8)|f|(i=(o=s?i>>>s:i)>>>2&4)|(o=(d=i?o>>>i:o)>>>1&2)|(d=(u=o?d>>>o:d)>>>1&1))+(d?u>>>d:u)|0)<<1<<2)|0)+8|0)>>2],(0|(f=0|bO[(i=o+8|0)>>2]))==(0|u)?(s=a&~(1<<c),bO[3]=s,h=s):(bO[f+12>>2]=u,bO[d>>2]=f,h=a),c=(f=c<<3)-r|0,bO[o+4>>2]=3|r,bO[(d=o+r|0)+4>>2]=1|c,bO[o+f>>2]=c,0|l&&(f=0|bO[8],u=52+((o=l>>>3)<<1<<2)|0,h&(s=1<<o)?(p=s=u+8|0,_=0|bO[s>>2]):(bO[3]=h|s,p=u+8|0,_=u),bO[p>>2]=f,bO[_+12>>2]=f,bO[f+8>>2]=_,bO[f+12>>2]=u),bO[5]=c,bO[8]=d,c7=t,0|i;if(i=0|bO[4]){for(v=0|bO[316+(((d=(u=(c=(d=(i&0-i)-1|0)>>>12&16)?d>>>c:d)>>>5&8)|c|(u=(f=d?u>>>d:u)>>>2&4)|(f=(s=u?f>>>u:f)>>>1&2)|(s=(o=f?s>>>f:s)>>>1&1))+(s?o>>>s:o)<<2)>>2],o=(-8&bO[v+4>>2])-r|0,s=v,f=v;;){if(v=0|bO[s+16>>2])g=v;else{if(!(u=0|bO[s+20>>2]))break;g=u}o=(u=(v=(-8&bO[g+4>>2])-r|0)>>>0<o>>>0)?v:o,s=g,f=u?g:f}if((s=f+r|0)>>>0>f>>>0){u=0|bO[f+24>>2],v=0|bO[f+12>>2];do{if((0|v)==(0|f)){if(d=0|bO[(c=f+20|0)>>2])k=d,x=c;else{if(!(m=0|bO[(y=f+16|0)>>2])){b=0;break}k=m,x=y}for(c=k,d=x;;){if(m=0|bO[(y=c+20|0)>>2])P=m,I=y;else{if(!(T=0|bO[(S=c+16|0)>>2]))break;P=T,I=S}c=P,d=I}bO[d>>2]=0,b=c}else y=0|bO[f+8>>2],bO[y+12>>2]=v,bO[v+8>>2]=y,b=v}while(0);do{if(0|u){if(v=0|bO[f+28>>2],(0|f)==(0|bO[(y=316+(v<<2)|0)>>2])){if(bO[y>>2]=b,!b){bO[4]=i&~(1<<v);break}}else if(bO[((0|bO[(v=u+16|0)>>2])==(0|f)?v:u+20|0)>>2]=b,!b)break;bO[b+24>>2]=u,0|(v=0|bO[f+16>>2])&&(bO[b+16>>2]=v,bO[v+24>>2]=b),0|(v=0|bO[f+20>>2])&&(bO[b+20>>2]=v,bO[v+24>>2]=b)}}while(0);return o>>>0<16?(u=o+r|0,bO[f+4>>2]=3|u,bO[(i=f+u+4|0)>>2]=1|bO[i>>2]):(bO[f+4>>2]=3|r,bO[s+4>>2]=1|o,bO[s+o>>2]=o,0|l&&(i=0|bO[8],v=52+((u=l>>>3)<<1<<2)|0,(y=1<<u)&a?(w=y=v+8|0,A=0|bO[y>>2]):(bO[3]=y|a,w=v+8|0,A=v),bO[w>>2]=i,bO[A+12>>2]=i,bO[i+8>>2]=A,bO[i+12>>2]=v),bO[5]=o,bO[8]=s),c7=t,0|(f+8|0)}E=r}else E=r}else E=r}else if(e>>>0<=4294967231)if(i=-8&(v=e+11|0),y=0|bO[4]){u=0-i|0,D=(m=v>>>8)?i>>>0>16777215?31:1&((v=(m=14-((T=(m=(v=m<<(S=(v=m+1048320|0)>>>16&8))+520192|0)>>>16&4)|S|(q=(v=(m=v<<T)+245760|0)>>>16&2))+((v=m<<q)>>>15)|0)+7|0)?i>>>v:i)|m<<1:0,m=0|bO[316+(D<<2)>>2];e:do{if(m)for(v=u,q=0,S=i<<(31==(0|D)?0:25-(D>>>1)|0),T=m,C=0;;){if((N=(-8&bO[T+4>>2])-i|0)>>>0<v>>>0){if(!N){B=0,F=T,U=T,M=65;break e}j=N,V=T}else j=v,V=C;if(W=0==(0|(N=0|bO[T+20>>2]))|(0|N)==(0|(T=0|bO[T+16+(S>>>31<<2)>>2]))?q:N,!T){O=j,R=W,L=V,M=61;break}v=j,q=W,S<<=1,C=V}else O=u,R=0,L=0,M=61}while(0);if(61==(0|M)){if(0==(0|R)&0==(0|L)){if(!(u=((m=2<<D)|0-m)&y)){E=i;break}H=0|bO[316+(((m=(r=(u=(m=(u&0-u)-1|0)>>>12&16)?m>>>u:m)>>>5&8)|u|(r=(f=m?r>>>m:r)>>>2&4)|(f=(s=r?f>>>r:f)>>>1&2)|(s=(o=f?s>>>f:s)>>>1&1))+(s?o>>>s:o)<<2)>>2],z=0}else H=R,z=L;H?(B=O,F=H,U=z,M=65):(Y=O,G=z)}if(65==(0|M))for(o=B,s=F,f=U;;){if(m=(u=(r=(-8&bO[s+4>>2])-i|0)>>>0<o>>>0)?r:o,r=u?s:f,!(Q=(u=0|bO[s+16>>2])||0|bO[s+20>>2])){Y=m,G=r;break}o=m,s=Q,f=r}if(0!=(0|G)&&Y>>>0<((0|bO[5])-i|0)>>>0&&(f=G+i|0)>>>0>G>>>0){s=0|bO[G+24>>2],o=0|bO[G+12>>2];do{if((0|o)==(0|G)){if(m=0|bO[(r=G+20|0)>>2])$=m,Z=r;else{if(!(a=0|bO[(u=G+16|0)>>2])){K=0;break}$=a,Z=u}for(r=$,m=Z;;){if(a=0|bO[(u=r+20|0)>>2])X=a,J=u;else{if(!(C=0|bO[(l=r+16|0)>>2]))break;X=C,J=l}r=X,m=J}bO[m>>2]=0,K=r}else u=0|bO[G+8>>2],bO[u+12>>2]=o,bO[o+8>>2]=u,K=o}while(0);do{if(s){if(o=0|bO[G+28>>2],(0|G)==(0|bO[(u=316+(o<<2)|0)>>2])){if(bO[u>>2]=K,!K){u=y&~(1<<o),bO[4]=u,ee=u;break}}else if(bO[((0|bO[(u=s+16|0)>>2])==(0|G)?u:s+20|0)>>2]=K,!K){ee=y;break}bO[K+24>>2]=s,0|(u=0|bO[G+16>>2])&&(bO[K+16>>2]=u,bO[u+24>>2]=K),(u=0|bO[G+20>>2])?(bO[K+20>>2]=u,bO[u+24>>2]=K,ee=y):ee=y}else ee=y}while(0);e:do{if(Y>>>0<16)y=Y+i|0,bO[G+4>>2]=3|y,bO[(s=G+y+4|0)>>2]=1|bO[s>>2];else{if(bO[G+4>>2]=3|i,bO[f+4>>2]=1|Y,bO[f+Y>>2]=Y,s=Y>>>3,Y>>>0<256){y=52+(s<<1<<2)|0,(u=0|bO[3])&(o=1<<s)?(te=o=y+8|0,ne=0|bO[o>>2]):(bO[3]=u|o,te=y+8|0,ne=y),bO[te>>2]=f,bO[ne+12>>2]=f,bO[f+8>>2]=ne,bO[f+12>>2]=y;break}if(re=(y=Y>>>8)?Y>>>0>16777215?31:1&((o=(y=14-((s=(y=(o=y<<(u=(o=y+1048320|0)>>>16&8))+520192|0)>>>16&4)|u|(a=(o=(y=o<<s)+245760|0)>>>16&2))+((o=y<<a)>>>15)|0)+7|0)?Y>>>o:Y)|y<<1:0,y=316+(re<<2)|0,bO[f+28>>2]=re,bO[(o=f+16|0)+4>>2]=0,bO[o>>2]=0,!(ee&(o=1<<re))){bO[4]=ee|o,bO[y>>2]=f,bO[f+24>>2]=y,bO[f+12>>2]=f,bO[f+8>>2]=f;break}o=0|bO[y>>2];t:do{if((-8&bO[o+4>>2]|0)!=(0|Y)){for(y=Y<<(31==(0|re)?0:25-(re>>>1)|0),a=o;u=0|bO[(ae=a+16+(y>>>31<<2)|0)>>2];){if((-8&bO[u+4>>2]|0)==(0|Y)){ie=u;break t}y<<=1,a=u}bO[ae>>2]=f,bO[f+24>>2]=a,bO[f+12>>2]=f,bO[f+8>>2]=f;break e}ie=o}while(0);r=0|bO[(o=ie+8|0)>>2],bO[r+12>>2]=f,bO[o>>2]=f,bO[f+8>>2]=r,bO[f+12>>2]=ie,bO[f+24>>2]=0}}while(0);return c7=t,0|(G+8|0)}E=i}else E=i;else E=-1}while(0);if((G=0|bO[5])>>>0>=E>>>0)return ie=G-E|0,ae=0|bO[8],ie>>>0>15?(Y=ae+E|0,bO[8]=Y,bO[5]=ie,bO[Y+4>>2]=1|ie,bO[ae+G>>2]=ie,bO[ae+4>>2]=3|E):(bO[5]=0,bO[8]=0,bO[ae+4>>2]=3|G,bO[(ie=ae+G+4|0)>>2]=1|bO[ie>>2]),c7=t,0|(ae+8|0);if((ae=0|bO[6])>>>0>E>>>0)return ie=ae-E|0,bO[6]=ie,Y=(G=0|bO[9])+E|0,bO[9]=Y,bO[Y+4>>2]=1|ie,bO[G+4>>2]=3|E,c7=t,0|(G+8|0);if(0|bO[121]?oe=0|bO[123]:(bO[123]=4096,bO[122]=4096,bO[124]=-1,bO[125]=-1,bO[126]=0,bO[114]=0,bO[121]=-16&n^1431655768,oe=4096),n=E+48|0,(oe=(ie=oe+(G=E+47|0)|0)&(Y=0-oe|0))>>>0<=E>>>0)return c7=t,0|0;if(0|(re=0|bO[113])&&(ne=(ee=0|bO[111])+oe|0)>>>0<=ee>>>0|ne>>>0>re>>>0)return c7=t,0|0;e:do{if(4&bO[114])he=0,M=143;else{re=0|bO[9];t:do{if(re){for(ne=460;!((ee=0|bO[ne>>2])>>>0<=re>>>0&&(ee+(0|bO[ne+4>>2])|0)>>>0>re>>>0);){if(!(ee=0|bO[ne+8>>2])){M=128;break t}ne=ee}if((ee=ie-ae&Y)>>>0<2147483647)if((0|(te=0|ce(ee)))==((0|bO[ne>>2])+(0|bO[ne+4>>2])|0)){if(-1!=(0|te)){ue=te,de=ee,M=145;break e}se=ee}else le=te,fe=ee,M=136;else se=0}else M=128}while(0);do{if(128==(0|M))if(-1!=(0|(re=0|ce(0)))&&(i=re,ee=(K=(0==((te=(ee=0|bO[122])+-1|0)&i|0)?0:(te+i&0-ee)-i|0)+oe|0)+(i=0|bO[111])|0,K>>>0>E>>>0&K>>>0<2147483647)){if(0|(te=0|bO[113])&&ee>>>0<=i>>>0|ee>>>0>te>>>0){se=0;break}if((0|(te=0|ce(K)))==(0|re)){ue=re,de=K,M=145;break e}le=te,fe=K,M=136}else se=0}while(0);do{if(136==(0|M)){if(K=0-fe|0,!(n>>>0>fe>>>0&fe>>>0<2147483647&-1!=(0|le))){if(-1==(0|le)){se=0;break}ue=le,de=fe,M=145;break e}if((re=G-fe+(te=0|bO[123])&0-te)>>>0>=2147483647){ue=le,de=fe,M=145;break e}if(-1==(0|ce(re))){ce(K),se=0;break}ue=le,de=re+fe|0,M=145;break e}}while(0);bO[114]=4|bO[114],he=se,M=143}}while(0);if(143==(0|M)&&oe>>>0<2147483647&&!(-1==(0|(se=0|ce(oe)))|1^(le=(fe=(oe=0|ce(0))-se|0)>>>0>(E+40|0)>>>0)|se>>>0<oe>>>0&-1!=(0|se)&-1!=(0|oe)^1)&&(ue=se,de=le?fe:he,M=145),145==(0|M)){he=(0|bO[111])+de|0,bO[111]=he,he>>>0>(0|bO[112])>>>0&&(bO[112]=he),he=0|bO[9];e:do{if(he){for(fe=460;;){if((0|ue)==((pe=0|bO[fe>>2])+(_e=0|bO[fe+4>>2])|0)){M=154;break}if(!(le=0|bO[fe+8>>2]))break;fe=le}if(154==(0|M)&&(le=fe+4|0,0==(8&bO[fe+12>>2]|0))&&ue>>>0>he>>>0&pe>>>0<=he>>>0){bO[le>>2]=_e+de,se=he+(oe=0==(7&(se=he+8|0)|0)?0:0-se&7)|0,G=(le=(0|bO[6])+de|0)-oe|0,bO[9]=se,bO[6]=G,bO[se+4>>2]=1|G,bO[he+le+4>>2]=40,bO[10]=bO[125];break}for(ue>>>0<(0|bO[7])>>>0&&(bO[7]=ue),le=ue+de|0,G=460;;){if((0|bO[G>>2])==(0|le)){M=162;break}if(!(se=0|bO[G+8>>2]))break;G=se}if(162==(0|M)&&0==(8&bO[G+12>>2]|0)){bO[G>>2]=ue,bO[(fe=G+4|0)>>2]=(0|bO[fe>>2])+de,se=ue+(0==(7&(fe=ue+8|0)|0)?0:0-fe&7)|0,oe=le+(0==(7&(fe=le+8|0)|0)?0:0-fe&7)|0,fe=se+E|0,n=oe-se-E|0,bO[se+4>>2]=3|E;t:do{if((0|he)==(0|oe))Y=(0|bO[6])+n|0,bO[6]=Y,bO[9]=fe,bO[fe+4>>2]=1|Y;else{if((0|bO[8])==(0|oe)){Y=(0|bO[5])+n|0,bO[5]=Y,bO[8]=fe,bO[fe+4>>2]=1|Y,bO[fe+Y>>2]=Y;break}if(1==(3&(Y=0|bO[oe+4>>2])|0)){ae=-8&Y,ie=Y>>>3;n:do{if(Y>>>0<256){if(re=0|bO[oe+8>>2],(0|(K=0|bO[oe+12>>2]))==(0|re)){bO[3]=bO[3]&~(1<<ie);break}bO[re+12>>2]=K,bO[K+8>>2]=re;break}re=0|bO[oe+24>>2],K=0|bO[oe+12>>2];do{if((0|K)==(0|oe)){if(i=0|bO[(ee=(te=oe+16|0)+4|0)>>2])ge=i,ye=ee;else{if(!(J=0|bO[te>>2])){ve=0;break}ge=J,ye=te}for(ee=ge,i=ye;;){if(J=0|bO[(te=ee+20|0)>>2])me=J,be=te;else{if(!(Z=0|bO[(X=ee+16|0)>>2]))break;me=Z,be=X}ee=me,i=be}bO[i>>2]=0,ve=ee}else te=0|bO[oe+8>>2],bO[te+12>>2]=K,bO[K+8>>2]=te,ve=K}while(0);if(!re)break;a=316+((K=0|bO[oe+28>>2])<<2)|0;do{if((0|bO[a>>2])==(0|oe)){if(bO[a>>2]=ve,0|ve)break;bO[4]=bO[4]&~(1<<K);break n}if(bO[((0|bO[(te=re+16|0)>>2])==(0|oe)?te:re+20|0)>>2]=ve,!ve)break n}while(0);if(bO[ve+24>>2]=re,0|(a=0|bO[(K=oe+16|0)>>2])&&(bO[ve+16>>2]=a,bO[a+24>>2]=ve),!(a=0|bO[K+4>>2]))break;bO[ve+20>>2]=a,bO[a+24>>2]=ve}while(0);ke=oe+ae|0,xe=ae+n|0}else ke=oe,xe=n;if(bO[(ie=ke+4|0)>>2]=-2&bO[ie>>2],bO[fe+4>>2]=1|xe,bO[fe+xe>>2]=xe,ie=xe>>>3,xe>>>0<256){Y=52+(ie<<1<<2)|0,(ne=0|bO[3])&(a=1<<ie)?(Se=a=Y+8|0,Te=0|bO[a>>2]):(bO[3]=ne|a,Se=Y+8|0,Te=Y),bO[Se>>2]=fe,bO[Te+12>>2]=fe,bO[fe+8>>2]=Te,bO[fe+12>>2]=Y;break}Y=xe>>>8;do{if(Y){if(xe>>>0>16777215){Pe=31;break}Pe=1&((a=(ie=14-((K=(ie=(a=Y<<(ne=(a=Y+1048320|0)>>>16&8))+520192|0)>>>16&4)|ne|(te=(a=(ie=a<<K)+245760|0)>>>16&2))+((a=ie<<te)>>>15)|0)+7|0)?xe>>>a:xe)|ie<<1}else Pe=0}while(0);if(Y=316+(Pe<<2)|0,bO[fe+28>>2]=Pe,bO[(ae=fe+16|0)+4>>2]=0,bO[ae>>2]=0,!((ae=0|bO[4])&(ie=1<<Pe))){bO[4]=ae|ie,bO[Y>>2]=fe,bO[fe+24>>2]=Y,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break}ie=0|bO[Y>>2];n:do{if((-8&bO[ie+4>>2]|0)!=(0|xe)){for(Y=xe<<(31==(0|Pe)?0:25-(Pe>>>1)|0),ae=ie;a=0|bO[(we=ae+16+(Y>>>31<<2)|0)>>2];){if((-8&bO[a+4>>2]|0)==(0|xe)){Ie=a;break n}Y<<=1,ae=a}bO[we>>2]=fe,bO[fe+24>>2]=ae,bO[fe+12>>2]=fe,bO[fe+8>>2]=fe;break t}Ie=ie}while(0);Y=0|bO[(ie=Ie+8|0)>>2],bO[Y+12>>2]=fe,bO[ie>>2]=fe,bO[fe+8>>2]=Y,bO[fe+12>>2]=Ie,bO[fe+24>>2]=0}}while(0);return c7=t,0|(se+8|0)}for(fe=460;!((n=0|bO[fe>>2])>>>0<=he>>>0&&(Ae=n+(0|bO[fe+4>>2])|0)>>>0>he>>>0);)fe=0|bO[fe+8>>2];n=(fe=(n=(fe=Ae+-47|0)+(0==(7&(se=fe+8|0)|0)?0:0-se&7)|0)>>>0<(se=he+16|0)>>>0?he:n)+8|0,le=ue+(G=0==(7&(le=ue+8|0)|0)?0:0-le&7)|0,Y=(oe=de+-40|0)-G|0,bO[9]=le,bO[6]=Y,bO[le+4>>2]=1|Y,bO[ue+oe+4>>2]=40,bO[10]=bO[125],bO[(oe=fe+4|0)>>2]=27,bO[n>>2]=bO[115],bO[n+4>>2]=bO[116],bO[n+8>>2]=bO[117],bO[n+12>>2]=bO[118],bO[115]=ue,bO[116]=de,bO[118]=0,bO[117]=n,n=fe+24|0;do{Y=n,bO[(n=n+4|0)>>2]=7}while((Y+8|0)>>>0<Ae>>>0);if((0|fe)!=(0|he)){if(n=fe-he|0,bO[oe>>2]=-2&bO[oe>>2],bO[he+4>>2]=1|n,bO[fe>>2]=n,Y=n>>>3,n>>>0<256){le=52+(Y<<1<<2)|0,(G=0|bO[3])&(ie=1<<Y)?(Ee=ie=le+8|0,De=0|bO[ie>>2]):(bO[3]=G|ie,Ee=le+8|0,De=le),bO[Ee>>2]=he,bO[De+12>>2]=he,bO[he+8>>2]=De,bO[he+12>>2]=le;break}if(qe=(le=n>>>8)?n>>>0>16777215?31:1&((ie=(le=14-((Y=(le=(ie=le<<(G=(ie=le+1048320|0)>>>16&8))+520192|0)>>>16&4)|G|(re=(ie=(le=ie<<Y)+245760|0)>>>16&2))+((ie=le<<re)>>>15)|0)+7|0)?n>>>ie:n)|le<<1:0,le=316+(qe<<2)|0,bO[he+28>>2]=qe,bO[he+20>>2]=0,bO[se>>2]=0,!((ie=0|bO[4])&(re=1<<qe))){bO[4]=ie|re,bO[le>>2]=he,bO[he+24>>2]=le,bO[he+12>>2]=he,bO[he+8>>2]=he;break}re=0|bO[le>>2];t:do{if((-8&bO[re+4>>2]|0)!=(0|n)){for(le=n<<(31==(0|qe)?0:25-(qe>>>1)|0),ie=re;G=0|bO[(Re=ie+16+(le>>>31<<2)|0)>>2];){if((-8&bO[G+4>>2]|0)==(0|n)){Oe=G;break t}le<<=1,ie=G}bO[Re>>2]=he,bO[he+24>>2]=ie,bO[he+12>>2]=he,bO[he+8>>2]=he;break e}Oe=re}while(0);re=0|bO[(n=Oe+8|0)>>2],bO[re+12>>2]=he,bO[n>>2]=he,bO[he+8>>2]=re,bO[he+12>>2]=Oe,bO[he+24>>2]=0}}else 0==(0|(re=0|bO[7]))|ue>>>0<re>>>0&&(bO[7]=ue),bO[115]=ue,bO[116]=de,bO[118]=0,bO[12]=bO[121],bO[11]=-1,bO[16]=52,bO[15]=52,bO[18]=60,bO[17]=60,bO[20]=68,bO[19]=68,bO[22]=76,bO[21]=76,bO[24]=84,bO[23]=84,bO[26]=92,bO[25]=92,bO[28]=100,bO[27]=100,bO[30]=108,bO[29]=108,bO[32]=116,bO[31]=116,bO[34]=124,bO[33]=124,bO[36]=132,bO[35]=132,bO[38]=140,bO[37]=140,bO[40]=148,bO[39]=148,bO[42]=156,bO[41]=156,bO[44]=164,bO[43]=164,bO[46]=172,bO[45]=172,bO[48]=180,bO[47]=180,bO[50]=188,bO[49]=188,bO[52]=196,bO[51]=196,bO[54]=204,bO[53]=204,bO[56]=212,bO[55]=212,bO[58]=220,bO[57]=220,bO[60]=228,bO[59]=228,bO[62]=236,bO[61]=236,bO[64]=244,bO[63]=244,bO[66]=252,bO[65]=252,bO[68]=260,bO[67]=260,bO[70]=268,bO[69]=268,bO[72]=276,bO[71]=276,bO[74]=284,bO[73]=284,bO[76]=292,bO[75]=292,bO[78]=300,bO[77]=300,n=ue+(se=0==(7&(n=ue+8|0)|0)?0:0-n&7)|0,fe=(re=de+-40|0)-se|0,bO[9]=n,bO[6]=fe,bO[n+4>>2]=1|fe,bO[ue+re+4>>2]=40,bO[10]=bO[125]}while(0);if((ue=0|bO[6])>>>0>E>>>0)return de=ue-E|0,bO[6]=de,he=(ue=0|bO[9])+E|0,bO[9]=he,bO[he+4>>2]=1|de,bO[ue+4>>2]=3|E,c7=t,0|(ue+8|0)}return bO[(0|cb())>>2]=48,c7=t,0|0}function cd(e){var t,n=0,r=0,i=0,a=0,o=0,s=0,c=0,u=0,d=0,l=0,f=0,h=0,p=0,_=0,v=0,g=0,y=0,m=0,b=0,k=0,x=0,S=0,T=0,P=0,I=0,w=0,A=0,E=0,D=0,q=0,O=0,R=0;if(e|=0){n=e+-8|0,r=0|bO[7],t=n+(e=-8&(i=0|bO[e+-4>>2]))|0;do{if(1&i)d=n,l=n,f=e;else{if(a=0|bO[n>>2],!(3&i))return;if(s=a+e|0,(o=n+(0-a)|0)>>>0<r>>>0)return;if((0|bO[8])==(0|o)){if(3!=(3&(u=0|bO[(c=t+4|0)>>2])|0)){d=o,l=o,f=s;break}return bO[5]=s,bO[c>>2]=-2&u,bO[o+4>>2]=1|s,void(bO[o+s>>2]=s)}if(u=a>>>3,a>>>0<256){if(a=0|bO[o+8>>2],(0|(c=0|bO[o+12>>2]))==(0|a)){bO[3]=bO[3]&~(1<<u),d=o,l=o,f=s;break}bO[a+12>>2]=c,bO[c+8>>2]=a,d=o,l=o,f=s;break}a=0|bO[o+24>>2],c=0|bO[o+12>>2];do{if((0|c)==(0|o)){if(p=0|bO[(h=(u=o+16|0)+4|0)>>2])g=p,y=h;else{if(!(_=0|bO[u>>2])){v=0;break}g=_,y=u}for(h=g,p=y;;){if(_=0|bO[(u=h+20|0)>>2])k=_,x=u;else{if(!(b=0|bO[(m=h+16|0)>>2]))break;k=b,x=m}h=k,p=x}bO[p>>2]=0,v=h}else u=0|bO[o+8>>2],bO[u+12>>2]=c,bO[c+8>>2]=u,v=c}while(0);if(a){if(c=0|bO[o+28>>2],(0|bO[(u=316+(c<<2)|0)>>2])==(0|o)){if(bO[u>>2]=v,!v){bO[4]=bO[4]&~(1<<c),d=o,l=o,f=s;break}}else if(bO[((0|bO[(c=a+16|0)>>2])==(0|o)?c:a+20|0)>>2]=v,!v){d=o,l=o,f=s;break}bO[v+24>>2]=a,0|(u=0|bO[(c=o+16|0)>>2])&&(bO[v+16>>2]=u,bO[u+24>>2]=v),(u=0|bO[c+4>>2])?(bO[v+20>>2]=u,bO[u+24>>2]=v,d=o,l=o,f=s):(d=o,l=o,f=s)}else d=o,l=o,f=s}}while(0);if(!(d>>>0>=t>>>0)&&1&(n=0|bO[(e=t+4|0)>>2])){if(2&n)bO[e>>2]=-2&n,bO[l+4>>2]=1|f,bO[d+f>>2]=f,A=f;else{if((0|bO[9])==(0|t)){if(v=(0|bO[6])+f|0,bO[6]=v,bO[9]=l,bO[l+4>>2]=1|v,(0|l)!=(0|bO[8]))return;return bO[8]=0,void(bO[5]=0)}if((0|bO[8])==(0|t))return v=(0|bO[5])+f|0,bO[5]=v,bO[8]=d,bO[l+4>>2]=1|v,void(bO[d+v>>2]=v);v=(-8&n)+f|0,x=n>>>3;do{if(n>>>0<256){if(k=0|bO[t+8>>2],(0|(y=0|bO[t+12>>2]))==(0|k)){bO[3]=bO[3]&~(1<<x);break}bO[k+12>>2]=y,bO[y+8>>2]=k;break}k=0|bO[t+24>>2],y=0|bO[t+12>>2];do{if((0|y)==(0|t)){if(i=0|bO[(r=(g=t+16|0)+4|0)>>2])T=i,P=r;else{if(!(u=0|bO[g>>2])){S=0;break}T=u,P=g}for(r=T,i=P;;){if(u=0|bO[(g=r+20|0)>>2])I=u,w=g;else{if(!(_=0|bO[(c=r+16|0)>>2]))break;I=_,w=c}r=I,i=w}bO[i>>2]=0,S=r}else h=0|bO[t+8>>2],bO[h+12>>2]=y,bO[y+8>>2]=h,S=y}while(0);if(0|k){if(y=0|bO[t+28>>2],(0|bO[(s=316+(y<<2)|0)>>2])==(0|t)){if(bO[s>>2]=S,!S){bO[4]=bO[4]&~(1<<y);break}}else if(bO[((0|bO[(y=k+16|0)>>2])==(0|t)?y:k+20|0)>>2]=S,!S)break;bO[S+24>>2]=k,0|(s=0|bO[(y=t+16|0)>>2])&&(bO[S+16>>2]=s,bO[s+24>>2]=S),0|(s=0|bO[y+4>>2])&&(bO[S+20>>2]=s,bO[s+24>>2]=S)}}while(0);if(bO[l+4>>2]=1|v,bO[d+v>>2]=v,(0|l)==(0|bO[8]))return void(bO[5]=v);A=v}if(f=A>>>3,A>>>0<256)return d=52+(f<<1<<2)|0,(n=0|bO[3])&(e=1<<f)?(E=e=d+8|0,D=0|bO[e>>2]):(bO[3]=n|e,E=d+8|0,D=d),bO[E>>2]=l,bO[D+12>>2]=l,bO[l+8>>2]=D,void(bO[l+12>>2]=d);q=(d=A>>>8)?A>>>0>16777215?31:1&((D=(d=14-((e=(d=(D=d<<(E=(D=d+1048320|0)>>>16&8))+520192|0)>>>16&4)|E|(n=(D=(d=D<<e)+245760|0)>>>16&2))+((D=d<<n)>>>15)|0)+7|0)?A>>>D:A)|d<<1:0,d=316+(q<<2)|0,bO[l+28>>2]=q,bO[l+20>>2]=0,bO[l+16>>2]=0,D=0|bO[4],n=1<<q;e:do{if(D&n){E=0|bO[d>>2];t:do{if((-8&bO[E+4>>2]|0)!=(0|A)){for(e=A<<(31==(0|q)?0:25-(q>>>1)|0),f=E;v=0|bO[(R=f+16+(e>>>31<<2)|0)>>2];){if((-8&bO[v+4>>2]|0)==(0|A)){O=v;break t}e<<=1,f=v}bO[R>>2]=l,bO[l+24>>2]=f,bO[l+12>>2]=l,bO[l+8>>2]=l;break e}O=E}while(0);k=0|bO[(E=O+8|0)>>2],bO[k+12>>2]=l,bO[E>>2]=l,bO[l+8>>2]=k,bO[l+12>>2]=O,bO[l+24>>2]=0}else bO[4]=D|n,bO[d>>2]=l,bO[l+24>>2]=d,bO[l+12>>2]=l,bO[l+8>>2]=l}while(0);if(l=(0|bO[11])-1|0,bO[11]=l,!(0|l)){for(l=468;O=0|bO[l>>2];)l=O+8|0;bO[11]=-1}}}}function ce(e){var t,n,r;t=(e|=0)+3&-4,e=0|cj(),r=(n=0|bO[e>>2])+t|0;do{if((0|t)<1|r>>>0>n>>>0){if(r>>>0>(0|c4())>>>0&&0==(0|c6(0|r)))break;return bO[e>>2]=r,0|n}}while(0);return bO[(0|cb())>>2]=48,0|-1}function cf(e){var t;return t=c7,c7=(c7=c7+(e|=0)|0)+15&-16,0|t}function cg(e){c7=e|=0}function ch(){return 0|c7}function ci(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(c1(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(c1(e<<n-32|0),0)}function cj(){return 528}function ck(e,t,n,r){var i;return 0|(c1((t|=0)+(r|=0)+((i=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|i)}function cl(e,t,n){e|=0,t|=0;var r,i,a=0;if((0|(n|=0))>=512)return c5(0|e,0|t,0|n),0|e;if(r=0|e,i=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|r;bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(n=(a=-4&i|0)-64|0;(0|e)<=(0|n);)bO[e>>2]=bO[t>>2],bO[e+4>>2]=bO[t+4>>2],bO[e+8>>2]=bO[t+8>>2],bO[e+12>>2]=bO[t+12>>2],bO[e+16>>2]=bO[t+16>>2],bO[e+20>>2]=bO[t+20>>2],bO[e+24>>2]=bO[t+24>>2],bO[e+28>>2]=bO[t+28>>2],bO[e+32>>2]=bO[t+32>>2],bO[e+36>>2]=bO[t+36>>2],bO[e+40>>2]=bO[t+40>>2],bO[e+44>>2]=bO[t+44>>2],bO[e+48>>2]=bO[t+48>>2],bO[e+52>>2]=bO[t+52>>2],bO[e+56>>2]=bO[t+56>>2],bO[e+60>>2]=bO[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|a);)bO[e>>2]=bO[t>>2],e=e+4|0,t=t+4|0}else for(a=i-4|0;(0|e)<(0|a);)bN[e>>0]=0|bN[t>>0],bN[e+1>>0]=0|bN[t+1>>0],bN[e+2>>0]=0|bN[t+2>>0],bN[e+3>>0]=0|bN[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|i);)bN[e>>0]=0|bN[t>>0],e=e+1|0,t=t+1|0;return 0|r}function cm(e,t,n){t|=0;var r,i=0,a=0,o=0;if(r=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)bN[e>>0]=t,e=e+1|0;for(a=t|t<<8|t<<16|t<<24,o=(i=-4&r|0)-64|0;(0|e)<=(0|o);)bO[e>>2]=a,bO[e+4>>2]=a,bO[e+8>>2]=a,bO[e+12>>2]=a,bO[e+16>>2]=a,bO[e+20>>2]=a,bO[e+24>>2]=a,bO[e+28>>2]=a,bO[e+32>>2]=a,bO[e+36>>2]=a,bO[e+40>>2]=a,bO[e+44>>2]=a,bO[e+48>>2]=a,bO[e+52>>2]=a,bO[e+56>>2]=a,bO[e+60>>2]=a,e=e+64|0;for(;(0|e)<(0|i);)bO[e>>2]=a,e=e+4|0}for(;(0|e)<(0|r);)bN[e>>0]=t,e=e+1|0;return r-n|0}var cn={};return cn[_qdb("0x4d3")]=cb,cn[_qdb("0x200")]=ci,cn[_qdb("0x3df")]=ca,cn[_qdb("0x19f")]=cj,cn[_qdb("0x658")]=cd,cn[_qdb("0x1ac")]=ck,cn[_qdb("0xa0")]=cc,cn[_qdb("0x20f")]=cl,cn[_qdb("0x1d9")]=cm,cn[_qdb("0x4b7")]=cf,cn[_qdb("0x284")]=cg,cn[_qdb("0x2c7")]=ch,cn}(b5,b7,a7),b9=k[_qdb("0x4d3")]=b8[_qdb("0x4d3")],ba=k[_qdb("0x200")]=b8[_qdb("0x200")],bb=k[_qdb("0x3df")]=b8[_qdb("0x3df")],bc=k[_qdb("0x19f")]=b8[_qdb("0x19f")],bd=k[_qdb("0x658")]=b8[_qdb("0x658")],be=k[_qdb("0x1ac")]=b8[_qdb("0x1ac")],bf=k[_qdb("0xa0")]=b8[_qdb("0xa0")],bg=k[_qdb("0x20f")]=b8[_qdb("0x20f")],bh=k[_qdb("0x1d9")]=b8[_qdb("0x1d9")],bi=k[_qdb("0x4b7")]=b8[_qdb("0x4b7")],bj=k[_qdb("0x284")]=b8[_qdb("0x284")],bk=k[_qdb("0x2c7")]=b8[_qdb("0x2c7")],bq;if(k[_qdb("0x2e8")]=b8,k[_qdb("0x44c")]=W,aJ)if(aM(aJ)||(aJ=v(aJ)),s||t){var bl=y(aJ);a9[_qdb("0x33f")](bl,N)}else{aG(_qdb("0x48f"));var bm=function(e){e[_qdb("0x441")]&&(e=new Uint8Array(e)),a9[_qdb("0x33f")](e,N),k[_qdb("0x5a9")]&&delete k[_qdb("0x5a9")][_qdb("0x63b")],aH(_qdb("0x48f"))},bn=function(){x(aJ,bm,(function(){throw new Error(_qdb("0x510")+aJ)}))},bo=b3(aJ);if(bo)bm(bo[_qdb("0x38")]);else if(k[_qdb("0x5a9")]){var bp=function(){var e=k[_qdb("0x5a9")],t=e[_qdb("0x63b")];if(200!==e[_qdb("0x50a")]&&0!==e[_qdb("0x50a")]){var n=b3(k[_qdb("0x3c7")]);if(!n)return console[_qdb("0x186")](_qdb("0x591")+e[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t=n[_qdb("0x38")]}bm(t)};k[_qdb("0x5a9")][_qdb("0x63b")]?setTimeout(bp,0):k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)}else bn()}if(aF=function a(){bq||bs(),bq||(aF=a)},k[_qdb("0x509")]=bs,k[_qdb("0x433")])for(typeof k[_qdb("0x433")]==_qdb("0x16d")&&(k[_qdb("0x433")]=[k[_qdb("0x433")]]);k[_qdb("0x433")][_qdb("0x319")]>0;)k[_qdb("0x433")][_qdb("0x660")]()();P=!0,bs(),f=k[_qdb("0x44c")](_qdb("0x688"),_qdb("0x3a"),[_qdb("0x3a")])}function v(e){if(_qdb("0x90")==_qdb("0x90")){if(k[_qdb("0x189")]){if(_qdb("0x51c")==_qdb("0x51c"))return k[_qdb("0x189")](e,u);b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]}return u+e}b4[3]=b6|j,E=l+8|0,F=l}function D(e){if(_qdb("0x400")!==_qdb("0x91")){var t=ac[aj>>2],n=t+e+15&-16;return ac[aj>>2]=n,t}p+=37843}function E(e){if(_qdb("0x13e")==_qdb("0x13e"))switch(e){case"i1":case"i8":return 1;case _qdb("0x2dd"):return 2;case _qdb("0x163"):return 4;case _qdb("0x4ff"):return 8;case _qdb("0x40e"):return 4;case _qdb("0x1d5"):return 8;default:if(_qdb("0x39f")===_qdb("0x3bb"))0===stack&&(stack=bk()),cArgs[i]=converter(args[i]);else if("*"===e[e[_qdb("0x319")]-1]){if(_qdb("0xa8")==_qdb("0xa8"))return 4;bytes[i]=decoded[_qdb("0x687")](i)}else if("i"===e[0]){if(_qdb("0x11d")==_qdb("0x11d")){var t=Number(e[_qdb("0x2a4")](1));return T(t%8==0,_qdb("0xdd")+t+_qdb("0x354")+e),t/8}var n=toC[argTypes[i]];n?(0===stack&&(stack=bk()),cArgs[i]=n(args[i])):cArgs[i]=args[i]}else{if(_qdb("0x4c9")==_qdb("0x4c9"))return 0;k[_qdb("0x5d8")](aD)}}else E=D,F=C}function F(e){if(_qdb("0x215")!==_qdb("0x662")){if(F[_qdb("0x24c")]||(F[_qdb("0x24c")]={}),!F[_qdb("0x24c")][e]){if(_qdb("0x338")!=_qdb("0x338")){for(var t=b1(s),n=new Uint8Array(t[_qdb("0x319")]),r=0;r<t[_qdb("0x319")];++r)n[r]=t[_qdb("0x687")](r);return n}F[_qdb("0x24c")][e]=1,B(e)}}else p+=42849}function J(e,t,n){if(_qdb("0x4bf")==_qdb("0x4bf"))if(n&&n[_qdb("0x319")]){if(_qdb("0x5fe")!==_qdb("0x37d"))return k[_qdb("0x1ca")+e][_qdb("0x6ca")](null,[t][_qdb("0x31d")](n));p+=-37295}else{if(_qdb("0x478")!==_qdb("0x539"))return k[_qdb("0x1ca")+e][_qdb("0x3c3")](null,t);p+=-4030}else{var r=str[_qdb("0x687")](i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&str[_qdb("0x687")](++i)),r<=127?++len:len+=r<=2047?2:r<=65535?3:4}}function Q(e,t,n,r){if(_qdb("0x207")===_qdb("0x83"))p+=25607;else switch("*"===(n=n||"i8")[_qdb("0x525")](n[_qdb("0x319")]-1)&&(n=_qdb("0x163")),n){case"i1":case"i8":a8[e>>0]=t;break;case _qdb("0x2dd"):aa[e>>1]=t;break;case _qdb("0x163"):ac[e>>2]=t;break;case _qdb("0x4ff"):aP=[t>>>0,(aO=t,+az(aO)>=1?aO>0?(0|aC(+aB(aO/4294967296),4294967295))>>>0:~~+aA((aO-+(~~aO>>>0))/4294967296)>>>0:0)],ac[e>>2]=aP[0],ac[e+4>>2]=aP[1];break;case _qdb("0x40e"):ae[e>>2]=t;break;case _qdb("0x1d5"):af[e>>3]=t;break;default:aI(_qdb("0x59f")+n)}}function T(e,t){if(_qdb("0x194")===_qdb("0x3cf"))return 0;e||(_qdb("0x5b8")!==_qdb("0x633")?aI(_qdb("0x237")+t):j[_qdb("0x63d")]="u")}function U(e){if(_qdb("0x652")!==_qdb("0x563")){var t=k["_"+e];return T(t,_qdb("0x64e")+e+_qdb("0x2b7")),t}p+=-2333}function V(e,t,n,r,i){if(_qdb("0x129")!==_qdb("0x184")){var a={};a[_qdb("0x546")]=function(e){if(_qdb("0x60a")==_qdb("0x60a")){var t=0;if(null!==e&&e!==undefined&&0!==e)if(_qdb("0x464")!==_qdb("0x15a")){var n=1+(e[_qdb("0x319")]<<2);a2(e,t=bi(n),n)}else aq=!0,al(an);return t}za=la,Aa=d},a[_qdb("0x68b")]=function(e){if(_qdb("0x503")!==_qdb("0x554")){var t=bi(e[_qdb("0x319")]);return a5(e,t),t}R=L,S=X,T=Y,O=65};var o=a;var s=U(e),c=[],u=0;if(r)if(_qdb("0x632")===_qdb("0x486"))p+=-34334;else for(var l=0;l<r[_qdb("0x319")];l++)if(_qdb("0x15f")!=_qdb("0x15f"))requestedSize>>>=0,aW(requestedSize);else{var f=o[n[l]];if(f)_qdb("0x595")!==_qdb("0x32f")?(0===u&&(u=bk()),c[l]=f(r[l])):p+=29420;else{if(_qdb("0xb1")===_qdb("0x11"))throw k[_qdb("0x1e1")]&&k[_qdb("0x1e1")](what),what+="",B(what),R=!0,S=1,what=_qdb("0x415")+what+_qdb("0xa4"),what;c[l]=r[l]}}var h=s[_qdb("0x6ca")](null,c);return h=function(e){if(_qdb("0x41f")==_qdb("0x41f"))return t===_qdb("0x546")?a0(e):t===_qdb("0x5c1")?Boolean(e):e;E=w,F=v}(h),0!==u&&bj(u),h}return r&&r[_qdb("0x319")]?k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](r)):k[_qdb("0x1ca")+sig][_qdb("0x3c3")](null,ptr)}function W(t,r,a,o){if(_qdb("0x56f")==_qdb("0x56f")){var c=(a=a||[])[_qdb("0xf5")]((function(e){if(_qdb("0x38c")!==_qdb("0x54c"))return e===_qdb("0x3a");Z=(0|b4[6])+d|0,b4[6]=Z,b4[9]=qa,b4[qa+4>>2]=1|Z}));if(r!==_qdb("0x546")&&c&&!o){if(_qdb("0x51d")==_qdb("0x51d"))return U(t);b4[y+16>>2]=i,b4[i+24>>2]=y}return function(){if(_qdb("0x3b")!==_qdb("0x4c2"))return V(t,r,a,arguments,o);p+=-7911}}b4[n+4>>2]=3|e,b4[i+4>>2]=1|h,b4[i+h>>2]=h,0|m&&(f=0|b4[8],s=52+((k=m>>>3)<<1<<2)|0,(v=1<<k)&g?(G=v=s+8|0,H=0|b4[v>>2]):(b4[3]=v|g,G=s+8|0,H=s),b4[G>>2]=f,b4[H+12>>2]=f,b4[f+8>>2]=H,b4[f+12>>2]=s),b4[5]=h,b4[8]=i}function Z(t,r,a){if(_qdb("0x28d")!==_qdb("0x6cf")){for(var c=r+a,d=r;t[d]&&!(d>=c);)++d;if(d-r>16&&t[_qdb("0x58d")]&&Y){if(_qdb("0x3d5")!==_qdb("0x5c5"))return Y[_qdb("0x378")](t[_qdb("0x58d")](r,d));k[_qdb("0x5a9")][_qdb("0x54e")](_qdb("0x5cf"),bp)}else{if(_qdb("0x657")===_qdb("0x6a2"))return l=52+(n<<1<<2)|0,(b6=0|b4[3])&(j=1<<n)?(E=j=l+8|0,F=0|b4[j>>2]):(b4[3]=b6|j,E=l+8|0,F=l),b4[E>>2]=m,b4[F+12>>2]=m,b4[m+8>>2]=F,void(b4[m+12>>2]=l);for(var f="";r<d;)if(_qdb("0x47")===_qdb("0x68"))p+=-7777;else{var v=t[r++];if(!(128&v)){if(_qdb("0x158")==_qdb("0x158")){f+=String[_qdb("0x35a")](v);continue}X=M,Y=N}var g=63&t[r++];if(192==(224&v)){if(_qdb("0x5a2")!==_qdb("0x3a6")){f+=String[_qdb("0x35a")]((31&v)<<6|g);continue}z=k,A=s}var y=63&t[r++];if(224==(240&v)){if(_qdb("0x34c")!=_qdb("0x34c"))return ja=ka-I|0,b4[6]=ja,_=0|b4[9],Z=_+I|0,b4[9]=Z,b4[Z+4>>2]=1|ja,b4[_+4>>2]=3|I,o=_+8|0,u=b6,0|o;v=(15&v)<<12|g<<6|y}else _qdb("0x552")!=_qdb("0x552")?ar=!0:v=(7&v)<<18|g<<12|y<<6|63&t[r++];if(v<65536)if(_qdb("0x4b6")!=_qdb("0x4b6")){if(200==xhr[_qdb("0x50a")]||0==xhr[_qdb("0x50a")]&&xhr[_qdb("0x63b")])return void onload(xhr[_qdb("0x63b")]);var b=b3(url);if(b)return void onload(b[_qdb("0x38")]);onerror()}else f+=String[_qdb("0x35a")](v);else if(_qdb("0x1b4")==_qdb("0x1b4")){var x=v-65536;f+=String[_qdb("0x35a")](55296|x>>10,56320|1023&x)}else h=w,i=$,n=e}}return f}if(k[_qdb("0x296")])for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());al(am)}function a0(e,t){if(_qdb("0x498")!==_qdb("0x68d"))return e?Z(a9,e,t):"";p+=47107}function a1(e,n,r,i){if(_qdb("0x6a9")!==_qdb("0x5d4")){if(!(i>0))return 0;for(var a=r,c=r+i-1,u=0;u<e[_qdb("0x319")];++u)if(_qdb("0x417")!=_qdb("0x417"))p+=39038;else{var f=e[_qdb("0x687")](u);if(f>=55296&&f<=57343)if(_qdb("0x361")==_qdb("0x361"))f=65536+((1023&f)<<10)|1023&e[_qdb("0x687")](++u);else p+=1354;if(f<=127)if(_qdb("0x315")===_qdb("0x4d0"))E=j=l+8|0,F=0|b4[j>>2];else{if(r>=c)break;n[r++]=f}else if(f<=2047)if(_qdb("0x155")===_qdb("0x6b"))b4[b6>>2]=b4[d>>2],b4[b6+4>>2]=b4[d+4>>2],b4[b6+8>>2]=b4[d+8>>2],b4[b6+12>>2]=b4[d+12>>2],b4[b6+16>>2]=b4[d+16>>2],b4[b6+20>>2]=b4[d+20>>2],b4[b6+24>>2]=b4[d+24>>2],b4[b6+28>>2]=b4[d+28>>2],b4[b6+32>>2]=b4[d+32>>2],b4[b6+36>>2]=b4[d+36>>2],b4[b6+40>>2]=b4[d+40>>2],b4[b6+44>>2]=b4[d+44>>2],b4[b6+48>>2]=b4[d+48>>2],b4[b6+52>>2]=b4[d+52>>2],b4[b6+56>>2]=b4[d+56>>2],b4[b6+60>>2]=b4[d+60>>2],b6=b6+64|0,d=d+64|0;else{if(r+1>=c)break;n[r++]=192|f>>6,n[r++]=128|63&f}else if(f<=65535)if(_qdb("0x3b1")===_qdb("0x31e"))p+=-22037;else{if(r+2>=c)break;n[r++]=224|f>>12,n[r++]=128|f>>6&63,n[r++]=128|63&f}else if(_qdb("0x60c")==_qdb("0x60c")){if(r+3>=c)break;n[r++]=240|f>>18,n[r++]=128|f>>12&63,n[r++]=128|f>>6&63,n[r++]=128|63&f}else s=p,t=o}return n[r]=0,r-a}p+=-16907}function a2(e,t,n){if(_qdb("0x45b")!=_qdb("0x45b")){argTypes=argTypes||[];var r=argTypes[_qdb("0xf5")]((function(e){return e===_qdb("0x3a")}));return returnType!==_qdb("0x546")&&r&&!opts?U(ident):function(){return V(ident,returnType,argTypes,arguments,opts)}}return a1(e,a9,t,n)}function a3(e){if(_qdb("0x603")==_qdb("0x603")){for(var t=0,n=0;n<e[_qdb("0x319")];++n)if(_qdb("0x428")!=_qdb("0x428"))u=self[_qdb("0x87")][_qdb("0x389")];else{var r=e[_qdb("0x687")](n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e[_qdb("0x687")](++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}onload(bl[_qdb("0x38")])}function a5(e,t){_qdb("0x541")!==_qdb("0x70")?a8[_qdb("0x33f")](e,t):p+=39984}function a6(e,t,n){if(_qdb("0x5b9")==_qdb("0x5b9")){for(var r=0;r<e[_qdb("0x319")];++r)_qdb("0x126")===_qdb("0x3e8")?p+=3766:a8[t++>>0]=e[_qdb("0x687")](r);n||(a8[t>>0]=0)}else aD++,k[_qdb("0x5d8")]&&k[_qdb("0x5d8")](aD)}function ag(e){_qdb("0x322")!==_qdb("0x3b0")?(a7=e,k[_qdb("0x668")]=a8=new Int8Array(e),k[_qdb("0x325")]=aa=new Int16Array(e),k[_qdb("0x481")]=ac=new Int32Array(e),k[_qdb("0x228")]=a9=new Uint8Array(e),k[_qdb("0x54d")]=ab=new Uint16Array(e),k[_qdb("0x13f")]=ad=new Uint32Array(e),k[_qdb("0x42f")]=ae=new Float32Array(e),k[_qdb("0x500")]=af=new Float64Array(e)):a9[_qdb("0x33f")](a9[_qdb("0x58d")](src,src+num),dest)}function al(e){if(_qdb("0x31b")!==_qdb("0x373"))for(;e[_qdb("0x319")]>0;)if(_qdb("0x661")==_qdb("0x661")){var t=e[_qdb("0x495")]();if(typeof t==_qdb("0x16d")){if(_qdb("0x579")!==_qdb("0x4b0")){t(k);continue}b4[123]=4096,b4[122]=4096,b4[124]=-1,b4[125]=-1,b4[126]=0,b4[114]=0,b4[121]=-16&d^1431655768,la=4096}var i=t[_qdb("0x5bf")];if(typeof i===_qdb("0x3a"))if(_qdb("0x320")!==_qdb("0x414"))if(t[_qdb("0x6a4")]===undefined){if(_qdb("0x560")===_qdb("0x1cb"))return r=(0|b4[5])+n|0,b4[5]=r,b4[8]=l,b4[m+4>>2]=1|r,void(b4[l+r>>2]=r);k[_qdb("0x4cb")](i)}else{if(_qdb("0x32")===_qdb("0x294"))return aK(filename,aL);k[_qdb("0xe5")](i,t[_qdb("0x6a4")])}else pa=ga,qa=fa,O=136;else _qdb("0x1b5")==_qdb("0x1b5")?i(t[_qdb("0x6a4")]===undefined?null:t[_qdb("0x6a4")]):p+=8001}else b4[j>>2]=-2&b6,b4[m+4>>2]=1|n,b4[l+n>>2]=n,D=n;else xa=ea,ya=ga}function as(){if(_qdb("0x374")!=_qdb("0x374"))p+=-27396;else{if(k[_qdb("0x296")]){if(_qdb("0x1eb")===_qdb("0x3a2"))return ja=_-I|0,ka=0|b4[8],ja>>>0>15?(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):(b4[5]=0,b4[8]=0,b4[ka+4>>2]=3|_,ja=ka+_+4|0,b4[ja>>2]=1|b4[ja>>2]),o=ka+8|0,u=b6,0|o;for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];){if(_qdb("0x1d8")!=_qdb("0x1d8"))return 4;ax(k[_qdb("0x296")][_qdb("0x495")]())}}al(am)}}function at(){_qdb("0x58a")!==_qdb("0x697")?(aq=!0,al(an)):p+=-30434}function au(){_qdb("0x2a")!=_qdb("0x2a")?(U=Q,V=D):al(ao)}function av(){if(_qdb("0x240")===_qdb("0x468")){var e=Number(type[_qdb("0x2a4")](1));return T(e%8==0,_qdb("0xdd")+e+_qdb("0x354")+type),e/8}ar=!0}function aw(){if(_qdb("0x567")===_qdb("0x3cd"))return bl;if(k[_qdb("0xc9")])if(_qdb("0x456")==_qdb("0x456"))for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)_qdb("0x51b")==_qdb("0x51b")?ay(k[_qdb("0xc9")][_qdb("0x495")]()):(ga=0|b4[la+8>>2],b4[ga+12>>2]=aa,b4[aa+8>>2]=ga,ua=aa);else{var e=k[_qdb("0x5a9")],t=e[_qdb("0x63b")];if(200!==e[_qdb("0x50a")]&&0!==e[_qdb("0x50a")]){var n=b3(k[_qdb("0x3c7")]);if(!n)return console[_qdb("0x186")](_qdb("0x591")+e[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t=n[_qdb("0x38")]}bm(t)}al(ap)}function ax(e){_qdb("0x5d5")===_qdb("0x5f1")?p+=14107:am[_qdb("0x23c")](e)}function ay(e){_qdb("0x23")!==_qdb("0x46b")?ap[_qdb("0x23c")](e):i=j(_qdb("0x4e"))}function aG(e){_qdb("0xec")!=_qdb("0xec")?p+=7133:(aD++,k[_qdb("0x5d8")]&&(_qdb("0x44b")===_qdb("0x590")?u0=(7&u0)<<18|u1<<12|u2<<6|63&heap[idx++]:k[_qdb("0x5d8")](aD)))}function aH(e){if(_qdb("0x57e")==_qdb("0x57e")){if(aD--,k[_qdb("0x5d8")]&&(_qdb("0x48a")==_qdb("0x48a")?k[_qdb("0x5d8")](aD):p+=25017),0==aD)if(_qdb("0x2f6")===_qdb("0x667"))objkey=objkey[_qdb("0xdf")]();else if(null!==aE&&(_qdb("0x618")!==_qdb("0x480")?(clearInterval(aE),aE=null):p+=35631),aF){if(_qdb("0x2dc")===_qdb("0x92")){var t=b3(url);if(t)return b0(t);throw B}var n=aF;aF=null,n()}}else{var r=new XMLHttpRequest;r[_qdb("0x6bc")](_qdb("0xf9"),url,!0),r[_qdb("0x254")]=_qdb("0x141"),r[_qdb("0x2a6")]=function(){if(200==r[_qdb("0x50a")]||0==r[_qdb("0x50a")]&&r[_qdb("0x63b")])onload(r[_qdb("0x63b")]);else{var e=b3(url);e?onload(e[_qdb("0x38")]):onerror()}},r[_qdb("0x62e")]=onerror,r[_qdb("0x2ef")](null)}}function aI(e){if(_qdb("0x113")==_qdb("0x113"))throw k[_qdb("0x1e1")]&&(_qdb("0x4f0")!=_qdb("0x4f0")?p+=10774:k[_qdb("0x1e1")](e)),B(e+=""),R=!0,S=1,e=_qdb("0x415")+e+_qdb("0xa4");if(!f)return _qdb("0x118");var t="",n=a3(urlpara),r=bf(n+1);a2(urlpara,r,n+1);var i=f(r);return bd(r),i&&(t=a0(i),bd(i)),t}function aK(e,t){if(_qdb("0x2c1")==_qdb("0x2c1"))return String[_qdb("0x51")][_qdb("0x219")]?e[_qdb("0x219")](t):0===e[_qdb("0x2ae")](t);a8[_qdb("0x33f")](array,a7)}function aM(e){if(_qdb("0x626")==_qdb("0x626"))return aK(e,aL);bq||(bq=!0,k[_qdb("0x263")]=!0,R||(at(),au(),k[_qdb("0x653")]&&k[_qdb("0x653")](),aw()))}function aR(e){if(_qdb("0x36b")!==_qdb("0x53d"))return e;k[_qdb("0x2f")]("")}function aS(e){if(_qdb("0x5a7")!==_qdb("0x100")){return e[_qdb("0x210")](/\b__Z[\w\d_]+/g,(function(e){if(_qdb("0x307")==_qdb("0x307")){var t=aR(e);return e===t?e:t+" ["+e+"]"}return K}))}}function aT(){if(_qdb("0x3f5")==_qdb("0x3f5")){var e=new Error;if(!e[_qdb("0x6cc")])if(_qdb("0xc6")==_qdb("0xc6")){try{if(_qdb("0x368")==_qdb("0x368"))throw new Error;p+=-6170}catch(t){_qdb("0x247")===_qdb("0x1af")?p+=-14833:e=t}if(!e[_qdb("0x6cc")]){if(_qdb("0x225")!==_qdb("0x171"))return _qdb("0x245");ba=g,ca=k}}else a7=buf,k[_qdb("0x668")]=a8=new Int8Array(buf),k[_qdb("0x325")]=aa=new Int16Array(buf),k[_qdb("0x481")]=ac=new Int32Array(buf),k[_qdb("0x228")]=a9=new Uint8Array(buf),k[_qdb("0x54d")]=ab=new Uint16Array(buf),k[_qdb("0x13f")]=ad=new Uint32Array(buf),k[_qdb("0x42f")]=ae=new Float32Array(buf),k[_qdb("0x500")]=af=new Float64Array(buf);return e[_qdb("0x6cc")][_qdb("0x15")]()}if(k[_qdb("0xc9")])for(typeof k[_qdb("0xc9")]==_qdb("0x16d")&&(k[_qdb("0xc9")]=[k[_qdb("0xc9")]]);k[_qdb("0xc9")][_qdb("0x319")];)ay(k[_qdb("0xc9")][_qdb("0x495")]());al(ap)}function aU(){if(_qdb("0x4e6")!=_qdb("0x4e6")){if(!e)return 0|f;j[F>>0]=0|j[Q>>0],F=F+1|0,Q=Q+1|0,e=e-1|0}else for(var t=53169;;)if(_qdb("0x535")===_qdb("0x3da"))bq||bs(),bq||(aF=runCaller);else switch(t){case 56024:ce[16]=_qdb("0x659"),ce[3]=_qdb("0x613"),t+=-24831;break;case 61241:ce[15]=_qdb("0x6b2"),t+=-1889;break;case 15387:ce[38]=_qdb("0x69"),ce[37]=_qdb("0x177"),ce[25]=_qdb("0x6a3"),ce[19]=_qdb("0x640"),t+=26636;break;case 17630:ce[6]=_qdb("0x55a"),ce[5]=_qdb("0x686"),t+=-9162;break;case 515:ce[4]=_qdb("0x47a"),ce[5]=_qdb("0x11e"),ce[24]=_qdb("0x62a"),t+=30156;break;case 25634:i[103]=[],t+=-3691;break;case 28946:M=e,t+=-18581;break;case 43470:try{if(_qdb("0x41d")!=_qdb("0x41d"))return k[_qdb("0x189")]?k[_qdb("0x189")](path,u):u+path;Q=Object[_qdb("0x51")][_qdb("0x15")][_qdb("0x3c3")](M(_qdb("0x1fa")))===_qdb("0x6b8")}catch(ye){}t+=-33663;break;case 19317:ce[24]=_qdb("0x300"),ce[4]=_qdb("0x135"),ce[21]=_qdb("0x3d2"),ce[7]=_qdb("0x47e"),t+=18648;break;case 21758:ce[13]=_qdb("0x73"),ce[24]=_qdb("0x3e0"),ce[28]=_qdb("0x56e"),t+=3876;break;case 56419:ce[2]=_qdb("0x1aa"),t+=-49406;break;case 44830:ce[9]=_qdb("0xc8"),ce[16]=_qdb("0x1d6"),t+=-13748;break;case 31150:ce[10]=_qdb("0x5e4"),ce[20]=_qdb("0x69b"),ce[11]=_qdb("0x52"),t+=5624;break;case 43969:ce[0]=_qdb("0x5a0"),ce[12]=_qdb("0x1b6"),t+=1858;break;case 42111:ce[28]=_qdb("0x2f7"),ce[22]=_qdb("0x3f0"),t+=18213;break;case 10789:M++,t+=35243;break;case 10264:ce[4]=_qdb("0x211"),ce[0]=_qdb("0x3e1"),ce[5]=_qdb("0x35e"),ce[13]=_qdb("0x3de"),t+=35394;break;case 21950:ce=i[93],t+=-9285;break;case 8577:ce[17]=_qdb("0xd4"),t+=32569;break;case 43122:ce[17]=_qdb("0x696"),t+=3991;break;case 1531:ce[7]=_qdb("0x574"),ce[14]=_qdb("0x3ae"),ce[9]=_qdb("0xb0"),t+=25149;break;case 1692:t+=44415;break;case 10713:ce[18]=_qdb("0x561"),ce[25]=_qdb("0x13b"),t+=20908;break;case 59570:ce=i[48],t+=-39589;break;case 58161:if(M<ce[_qdb("0x319")]){if(_qdb("0x241")!=_qdb("0x241"))return _qdb("0x118");t+=-13216}else _qdb("0x3a7")==_qdb("0x3a7")?t+=-47550:t+=22481;break;case 17368:ce[14]=_qdb("0x69d"),ce[12]=_qdb("0x309"),ce[1]=_qdb("0x137"),ce[28]=_qdb("0x1bc"),t+=-6655;break;case 7013:ce[8]=_qdb("0x5fb"),t+=46942;break;case 2271:ce[7]=_qdb("0xfa"),ce[19]=_qdb("0x5e7"),t+=10335;break;case 4782:ce[9]=_qdb("0x27f"),ce[15]=_qdb("0x29a"),ce[23]=_qdb("0x6f"),ce[4]=_qdb("0x570"),t+=164;break;case 9141:Q=Q[_qdb("0x5ff")],t+=29;break;case 26039:ce[30]=_qdb("0x28f"),ce[6]=_qdb("0x5e1"),ce[10]=_qdb("0x608"),t+=-2641;break;case 48532:t+=7074;break;case 38717:ce[0]=_qdb("0x50c"),t+=-14849;break;case 49373:F++,t+=13923;break;case 23868:ce[1]=_qdb("0x467"),ce[6]=_qdb("0x196"),t+=8758;break;case 42710:i[65]=[],t+=-5026;break;case 53169:var i=[];t+=11294;break;case 23191:Q?_qdb("0x3d8")!==_qdb("0x68e")?t+=-22037:(Z=ka+I|0,b4[8]=Z,b4[5]=ja,b4[Z+4>>2]=1|ja,b4[ka+_>>2]=ja,b4[ka+4>>2]=3|I):_qdb("0x431")==_qdb("0x431")?t+=25017:condition||aI(_qdb("0x237")+text);break;case 37549:ce[3]=_qdb("0x292"),ce[12]=_qdb("0x5be"),ce[6]=_qdb("0x586"),ce[24]=_qdb("0x115"),t+=-16373;break;case 29849:ce=i[175],t+=9998;break;case 43255:L=ce[M]%3,t+=10619;break;case 21176:ce[5]=_qdb("0x220"),t+=-348;break;case 43694:ce[7]=_qdb("0x411"),ce[0]=_qdb("0x350"),t+=-39178;break;case 53698:ce[24]=_qdb("0x6d"),ce[17]=_qdb("0x21"),t+=11237;break;case 4256:ce[17]=_qdb("0x1a0"),ce[11]=_qdb("0x3a5"),ce[2]=_qdb("0x6a7"),ce[6]=_qdb("0x461"),t+=40773;break;case 33487:ce[3]=_qdb("0x2be"),ce[8]=_qdb("0x597"),ce[25]=_qdb("0x2de"),ce[17]=_qdb("0x521"),t+=30038;break;case 24661:ce[4]=_qdb("0x1a2"),ce[31]=_qdb("0x1c"),ce[5]=_qdb("0x499"),t+=6669;break;case 51708:ce[20]=_qdb("0xca"),ce[19]=_qdb("0x124"),ce[18]=_qdb("0x1bd"),ce[5]=_qdb("0x3cc"),t+=-47452;break;case 12665:ce[23]=_qdb("0x3a4"),ce[17]=_qdb("0x623"),ce[8]=_qdb("0x23d"),ce[12]=_qdb("0x680"),t+=-5279;break;case 32746:ce[3]=_qdb("0x76"),t+=23590;break;case 23712:ce[7]=_qdb("0x5f0"),ce[10]=_qdb("0x2e3"),t+=-10849;break;case 34449:ce[22]=_qdb("0x64"),t+=4902;break;case 50181:ce[34]=_qdb("0x335"),ce[8]=_qdb("0x528"),t+=-25087;break;case 63686:ce[8]=_qdb("0x399"),ce[1]=_qdb("0x25e"),ce[10]=_qdb("0x22c"),ce[21]=_qdb("0x6b7"),t+=-41336;break;case 46788:Q%=8,t+=14578;break;case 4675:ce[35]=_qdb("0x502"),ce[34]=_qdb("0x2b5"),t+=4481;break;case 45106:ce[12]=_qdb("0x40d"),ce[13]=_qdb("0x516"),t+=8060;break;case 14476:ce[26]=_qdb("0xbc"),ce[17]=_qdb("0x497"),ce[20]=_qdb("0xf7"),t+=37574;break;case 59779:ce[19]=_qdb("0x635"),t+=-8031;break;case 21314:if(i[R])if(_qdb("0x85")===_qdb("0x227"))try{var a=new XMLHttpRequest;return a[_qdb("0x6bc")](_qdb("0xf9"),url,!1),a[_qdb("0x254")]=_qdb("0x141"),a[_qdb("0x2ef")](null),new Uint8Array(a[_qdb("0x63b")])}catch(D){if(E=b3(url))return E;throw D}else t+=7133;else{if(_qdb("0x26b")===_qdb("0x2c4")){var s,c,p,b,S,P,E=_qdb("0x43c"),D="",O=0;input=input[_qdb("0x210")](/[^A-Za-z0-9\+\/\=]/g,"");do{s=E[_qdb("0x2ae")](input[_qdb("0x525")](O++))<<2|(b=E[_qdb("0x2ae")](input[_qdb("0x525")](O++)))>>4,c=(15&b)<<4|(S=E[_qdb("0x2ae")](input[_qdb("0x525")](O++)))>>2,p=(3&S)<<6|(P=E[_qdb("0x2ae")](input[_qdb("0x525")](O++))),D+=String[_qdb("0x35a")](s),64!==S&&(D+=String[_qdb("0x35a")](c)),64!==P&&(D+=String[_qdb("0x35a")](p))}while(O<input[_qdb("0x319")]);return D}t+=-10871}break;case 5143:ce[3]=_qdb("0x8f"),ce[18]=_qdb("0x5e0"),ce[20]=_qdb("0x5cb"),ce[19]=_qdb("0x33d"),t+=56897;break;case 44421:ce[5]=_qdb("0x2d7"),ce[18]=_qdb("0x408"),t+=19623;break;case 47385:ce[12]=_qdb("0x1c1"),ce[2]=_qdb("0x442"),t+=2193;break;case 59154:ce=i[8],t+=-41524;break;case 60810:ce[1]=_qdb("0x199"),ce[41]=_qdb("0x6b5"),ce[27]=_qdb("0x24d"),ce[14]=_qdb("0x40b"),t+=-4786;break;case 6944:ce=i[4],t+=14034;break;case 8185:ce[12]=_qdb("0x167"),ce[19]=_qdb("0x3f4"),t+=55011;break;case 39996:ce=i[113],t+=4337;break;case 22860:Q=Q[_qdb("0x575")],t+=-19256;break;case 33570:ce[27]=_qdb("0xc0"),ce[0]=_qdb("0x5ba"),t+=-18606;break;case 40492:ce[20]=_qdb("0x1fd"),t+=-27038;break;case 31205:ce[17]=_qdb("0x631"),ce[18]=_qdb("0x2d9"),ce[15]=_qdb("0x52f"),t+=950;break;case 6249:ce[13]=_qdb("0x670"),ce[12]=_qdb("0x643"),t+=5338;break;case 30552:W-=ce[0]>>8,t+=-10527;break;case 22181:ce[24]=_qdb("0x5b5"),ce[4]=_qdb("0x339"),t+=-15932;break;case 20949:ce[4]=_qdb("0x1d4"),ce[13]=_qdb("0x29d"),ce[7]=_qdb("0x5e3"),t+=17026;break;case 34545:ce[18]=_qdb("0x6ba"),ce[3]=_qdb("0x48e"),ce[10]=_qdb("0x3ca"),t+=10285;break;case 60446:ce[29]=_qdb("0x526"),ce[18]=_qdb("0x54b"),ce[37]=_qdb("0x7d"),t+=-19022;break;case 36258:if(W<ve[_qdb("0x319")]){if(_qdb("0x5b0")!=_qdb("0x5b0"))return"*"===type[type[_qdb("0x319")]-1]?4:"i"===type[0]?(T((D=Number(type[_qdb("0x2a4")](1)))%8==0,_qdb("0xdd")+D+_qdb("0x354")+type),D/8):0;t+=-14993}else _qdb("0xa1")===_qdb("0x531")?t+=4548:t+=24497;break;case 10002:ce[13]=_qdb("0x50d"),t+=19446;break;case 60584:t+=-39110;break;case 8468:ce[19]=_qdb("0x349"),ce[8]=_qdb("0x28c"),t+=-6387;break;case 34850:ce[22]=_qdb("0x308"),t+=27383;break;case 37526:try{if(_qdb("0x68c")!=_qdb("0x68c"))return L=0|b4[(W=(M=52+((R=(1&h^1)+f|0)<<1<<2)|0)+8|0)>>2],(0|(n=0|b4[(m=L+8|0)>>2]))==(0|M)?b4[3]=g&~(1<<R):(b4[n+12>>2]=M,b4[W>>2]=n),n=R<<3,b4[L+4>>2]=3|n,b4[(R=L+n+4|0)>>2]=1|b4[R>>2],u=F,0|(o=m);R=M(_qdb("0x4e"))}catch(c){}t+=22169;break;case 13141:ce[22]=_qdb("0x4f8"),ce[26]=_qdb("0x4a7"),ce[1]=_qdb("0x4dd"),t+=-7582;break;case 62085:t+=-24559;break;case 26587:i[77]=[],t+=24147;break;case 32550:ce=i[251],t+=-14706;break;case 48208:t+=-39717;break;case 53424:var R=0;t+=-39698;break;case 60563:ce[15]=_qdb("0x1d7"),ce[3]=_qdb("0x40f"),ce[7]=_qdb("0x343"),t+=-25639;break;case 32164:ce[3]=_qdb("0x621"),ce[4]=_qdb("0x298"),ce[0]=_qdb("0x267"),t+=28843;break;case 39257:i[151]=[],t+=672;break;case 25184:ce[27]=_qdb("0x60b"),ce[21]=_qdb("0x74"),ce[12]=_qdb("0x106"),ce[19]=_qdb("0x55b"),t+=-5320;break;case 13522:ce[23]=_qdb("0x3be"),t+=36582;break;case 62834:ce[26]=_qdb("0x8d"),ce[22]=_qdb("0x1c9"),ce[8]=_qdb("0x337"),ce[16]=_qdb("0x5a4"),t+=-61571;break;case 30247:ce[12]=_qdb("0x192"),t+=32322;break;case 2788:L=L[_qdb("0x687")](0),t+=36653;break;case 38685:t+=19940;break;case 49578:ce[13]=_qdb("0xee"),ce[26]=_qdb("0x170"),t+=15675;break;case 20618:ce[16]=_qdb("0x5f3"),ce[2]=_qdb("0x33c"),t+=18030;break;case 37875:ce[21]=_qdb("0x49f"),t+=6546;break;case 52424:ce[19]=_qdb("0x47f"),ce[21]=_qdb("0x49"),ce[30]=_qdb("0xc1"),ce[3]=_qdb("0x276"),t+=-19544;break;case 21099:ce=i[29],t+=16776;break;case 24727:ce=i[118],t+=-18767;break;case 12039:ce=i[1],t+=50569;break;case 55851:ce[32]=_qdb("0x12f"),ce[18]=_qdb("0x16f"),t+=4959;break;case 26939:W/=ce[0]>>12,t+=-13187;break;case 46756:ce=i[107],t+=-19668;break;case 48164:if(W<ve[_qdb("0x319")]){if(_qdb("0x1d0")===_qdb("0x122"))return;t+=-33014}else _qdb("0x63e")!==_qdb("0xc")?t+=-30737:(b4[3]=ha|g,Ba=Z+8|0,Ca=Z);break;case 41336:F<=L?_qdb("0x22b")!=_qdb("0x22b")?Q=R(_qdb("0x206")):t+=-4030:_qdb("0xbf")!==_qdb("0x344")?t+=-7777:(g=Z+8|0,Ba=g,Ca=0|b4[g>>2]);break;case 23447:ce[2]=_qdb("0x390"),ce[5]=_qdb("0x6bd"),ce[4]=_qdb("0xe9"),ce[9]=_qdb("0x681"),t+=41e3;break;case 32626:ce[7]=_qdb("0xcd"),ce[8]=_qdb("0x281"),ce[13]=_qdb("0x476"),t+=-25153;break;case 41568:F=W+1,t+=-39202;break;case 19629:i[165]=[],t+=-1573;break;case 44792:Q+=64,t+=3918;break;case 53997:ce[6]=_qdb("0x202"),ce[0]=_qdb("0x28b"),t+=-4586;break;case 54700:ce[35]=_qdb("0x379"),ce[40]=_qdb("0x166"),t+=-43283;break;case 47198:ce[4]=_qdb("0x4e8"),ce[1]=_qdb("0x1e4"),ce[2]=_qdb("0x59c"),ce[13]=_qdb("0x302"),t+=3802;break;case 5359:if(d(R))_qdb("0x62b")==_qdb("0x62b")?t+=42849:B=e;else{if(_qdb("0x384")===_qdb("0x5fa"))return 0|u;t+=39832}break;case 42359:ce[8]=_qdb("0xab"),ce[13]=_qdb("0x1f4"),ce[3]=_qdb("0x2bb"),ce[35]=_qdb("0x15d"),t+=-29385;break;case 29235:var L=0;t+=14020;break;case 36211:ce[24]=_qdb("0x3ee"),ce[8]=_qdb("0xdb"),ce[29]=_qdb("0x25c"),ce[22]=_qdb("0x1ce"),t+=-5061;break;case 41146:ce[22]=_qdb("0x4e1"),t+=-22403;break;case 43356:ce[18]=_qdb("0x314"),ce[13]=_qdb("0x366"),t+=-35132;break;case 39579:ce[16]=_qdb("0x26f"),ce[5]=_qdb("0x256"),ce[6]=_qdb("0x642"),t+=-9192;break;case 30801:ce[15]=_qdb("0x430"),ce[6]=_qdb("0xe3"),t+=16230;break;case 13816:ce[0]=_qdb("0x663"),t+=12223;break;case 31621:ce[29]=_qdb("0x1bb"),ce[5]=_qdb("0x4e4"),ce[20]=_qdb("0x149"),ce[13]=_qdb("0x669"),t+=-868;break;case 33580:ce[38]=_qdb("0x1f6"),t+=-26166;break;case 48528:ce[8]=_qdb("0x42a"),ce[14]=_qdb("0x1b8"),t+=-8153;break;case 1733:t+=38466;break;case 26988:ce[27]=_qdb("0x348"),ce[10]=_qdb("0x31c"),ce[0]=_qdb("0x397"),t+=25897;break;case 38648:ce[8]=_qdb("0x218"),ce[5]=_qdb("0x326"),ce[6]=_qdb("0x134"),t+=-14936;break;case 4286:ce[10]=_qdb("0x47c"),ce[7]=_qdb("0x602"),t+=60616;break;case 30261:t+=17903;break;case 33479:ce[1]=_qdb("0x4c0"),ce[23]=_qdb("0x14c"),t+=20219;break;case 46025:ce[8]=_qdb("0x36d"),t+=-21337;break;case 59612:ce[31]=_qdb("0x57"),ce[39]=_qdb("0x59b"),t+=-39593;break;case 8224:ce[22]=_qdb("0x96"),t+=29663;break;case 37136:ce[25]=_qdb("0x622"),ce[5]=_qdb("0x3f2"),t+=5875;break;case 32880:ce[28]=_qdb("0x3a9"),t+=17868;break;case 27088:ce[10]=_qdb("0x4ad"),ce[11]=_qdb("0x583"),ce[24]=_qdb("0x448"),t+=32068;break;case 32675:ce[8]=_qdb("0x24b"),t+=-10871;break;case 38442:F++,t+=-9207;break;case 1154:Q=R[_qdb("0xba")],t+=44555;break;case 4472:ce[8]=_qdb("0x407"),ce[13]=_qdb("0x47d"),ce[23]=_qdb("0xf4"),t+=9602;break;case 37684:ce=i[65],t+=-30446;break;case 36774:ce[21]=_qdb("0x6b0"),ce[27]=_qdb("0x67f"),ce[17]=_qdb("0x630"),ce[19]=_qdb("0x558"),t+=-5129;break;case 65108:i[98]=[],t+=-47498;break;case 32831:ce[1]=_qdb("0x5b"),ce[4]=_qdb("0x41b"),t+=-20376;break;case 17498:ce[7]=_qdb("0x436"),ce[12]=_qdb("0x3cb"),t+=-15143;break;case 47031:ce[9]=_qdb("0x39"),t+=-23095;break;case 27163:i[8]=[],t+=31991;break;case 32753:ce[14]=_qdb("0xd9"),ce[21]=_qdb("0x370"),t+=-26153;break;case 13726:var M=0;t+=15220;break;case 77:ce[12]=_qdb("0x226"),ce[19]=_qdb("0x261"),t+=16951;break;case 53833:ce[11]=_qdb("0x5aa"),t+=-25627;break;case 12955:ce[12]=_qdb("0x311"),ce[2]=_qdb("0xa6"),ce[17]=_qdb("0x5d9"),ce[11]=_qdb("0x66a"),t+=22991;break;case 12974:ce[40]=_qdb("0x16c"),ce[12]=_qdb("0x2d5"),t+=46638;break;case 36798:ce[1]=_qdb("0x470"),ce[2]=_qdb("0x33e"),t+=26036;break;case 17427:t+=-12116;break;case 30753:ce[35]=_qdb("0x61c"),ce[15]=_qdb("0x39a"),ce[7]=_qdb("0x45a"),t+=-11241;break;case 26680:ce[3]=_qdb("0x168"),ce[11]=_qdb("0x179"),t+=9549;break;case 35597:ce[1]=_qdb("0x6c2"),ce[19]=_qdb("0xb7"),ce[15]=_qdb("0x35"),ce[16]=_qdb("0x479"),t+=-2110;break;case 13154:ce[18]=_qdb("0x6ac"),ce[14]=_qdb("0x573"),t+=35287;break;case 64862:ce[7]=_qdb("0x10b"),ce[10]=_qdb("0x16a"),t+=-34061;break;case 29448:i[197]=[],t+=-16036;break;case 64044:ce[9]=_qdb("0xe7"),ce[0]=_qdb("0x5df"),t+=-35768;break;case 27377:ce[5]=_qdb("0x28"),ce[4]=_qdb("0x1f5"),ce[14]=_qdb("0x4a0"),t+=-3177;break;case 25433:ce[9]=_qdb("0x666"),ce[20]=_qdb("0xcc"),t+=-22255;break;case 22273:var F=fe[_qdb("0x525")](fe[_qdb("0x319")]-R);t+=28760;break;case 1263:ce[19]=_qdb("0x12c"),t+=47643;break;case 14964:ce[22]=_qdb("0x4d5"),ce[10]=_qdb("0x2fe"),ce[30]=_qdb("0x269"),t+=26541;break;case 47423:fe?_qdb("0x32e")===_qdb("0x1de")?(xa=s,ya=da):t+=-37295:_qdb("0x447")===_qdb("0x443")?T(!1,_qdb("0x369")+chr+" ("+String[_qdb("0x35a")](chr)+_qdb("0x1f2")+R+_qdb("0x413")):t+=785;break;case 65320:ce[33]=_qdb("0x5f5"),ce[23]=_qdb("0x26e"),t+=-54087;break;case 20086:t+=15917;break;case 41523:F=0,M=0,t+=6727;break;case 17610:ce=i[98],t+=-6115;break;case 60150:ce[7]=_qdb("0x624"),ce[6]=_qdb("0x611"),ce[10]=_qdb("0x6af"),t+=-26306;break;case 60324:ce[16]=_qdb("0x646"),ce[1]=_qdb("0x19a"),ce[7]=_qdb("0x4c1"),t+=-21067;break;case 6600:ce[15]=_qdb("0x44e"),ce[16]=_qdb("0x120"),t+=-4329;break;case 58027:ce[1]=_qdb("0xda"),ce[9]=_qdb("0x2e7"),t+=5655;break;case 36824:W=ce[M]>>10,t+=-6272;break;case 14776:L=ce[0]>>20,t+=43385;break;case 59695:if(typeof R===_qdb("0x16d"))if(_qdb("0x64c")==_qdb("0x64c"))t+=-6170;else{var V=array[R];V>255&&(aZ&&T(!1,_qdb("0x369")+V+" ("+String[_qdb("0x35a")](V)+_qdb("0x1f2")+R+_qdb("0x413")),V&=255),ret[_qdb("0x3dc")](String[_qdb("0x35a")](V))}else if(_qdb("0x466")===_qdb("0x2a2")){for(;3&F;)j[F>>0]=Q,F=F+1|0;for(h=Q|Q<<8|Q<<16|Q<<24,R=(g=-4&f|0)-64|0;(0|F)<=(0|R);)b4[F>>2]=h,b4[F+4>>2]=h,b4[F+8>>2]=h,b4[F+12>>2]=h,b4[F+16>>2]=h,b4[F+20>>2]=h,b4[F+24>>2]=h,b4[F+28>>2]=h,b4[F+32>>2]=h,b4[F+36>>2]=h,b4[F+40>>2]=h,b4[F+44>>2]=h,b4[F+48>>2]=h,b4[F+52>>2]=h,b4[F+56>>2]=h,b4[F+60>>2]=h,F=F+64|0;for(;(0|F)<(0|g);)b4[F>>2]=h,F=F+4|0}else t+=-11163;break;case 20804:ce[7]=_qdb("0x27a"),ce[16]=_qdb("0x3c5"),ce[8]=_qdb("0x28a"),t+=-80;break;case 57804:ce[4]=_qdb("0xb3"),ce[9]=_qdb("0x617"),ce[12]=_qdb("0x698"),ce[3]=_qdb("0x24a"),t+=-37186;break;case 31949:ce[5]=_qdb("0x312"),ce[1]=_qdb("0x212"),ce[16]=_qdb("0x520"),t+=-19877;break;case 64290:Q=R,t+=-11139;break;case 41747:ce[20]=_qdb("0x4ae"),ce[12]=_qdb("0x444"),ce[5]=_qdb("0x147"),ce[18]=_qdb("0x4ac"),t+=-33419;break;case 36003:t+=255;break;case 51e3:ce[0]=_qdb("0x2bd"),ce[17]=_qdb("0x54f"),ce[3]=_qdb("0x182"),t+=2691;break;case 51033:R<=le[_qdb("0x319")]&&F!==le[_qdb("0x525")](le[_qdb("0x319")]-R)?_qdb("0x571")==_qdb("0x571")?t+=14107:(setTimeout((function(){k[_qdb("0x2f")]("")}),1),doRun()):_qdb("0x244")===_qdb("0x21a")?(b4[n+12>>2]=W,b4[L>>2]=n,t=g):t+=-35594;break;case 1541:le=le||_qdb("0x136"),t+=46667;break;case 39351:i[81]=[],t+=17056;break;case 19512:ce[2]=_qdb("0x460"),ce[33]=_qdb("0x56d"),ce[16]=_qdb("0xaa"),ce[30]=_qdb("0xf0"),t+=39289;break;case 50734:ce=i[77],t+=-40762;break;case 27945:ce[23]=_qdb("0x246"),ce[8]=_qdb("0x264"),t+=-14990;break;case 30671:ce[0]=_qdb("0x27d"),ce[6]=_qdb("0x3c"),ce[10]=_qdb("0x31a"),t+=-11897;break;case 26514:if(Q){if(_qdb("0x242")!=_qdb("0x242"))return x<0?Math[_qdb("0x1e0")](x):Math[_qdb("0x382")](x);t+=11458}else _qdb("0x2c9")!==_qdb("0x628")?t+=21694:(Z<<=1,ka=g);break;case 11495:ce[13]=_qdb("0x1c0"),ce[20]=_qdb("0x5c"),ce[11]=_qdb("0x56"),ce[0]=_qdb("0x3a8"),t+=6003;break;case 32155:i[38]=[],t+=30886;break;case 3604:Q?_qdb("0x1a7")!==_qdb("0x639")?t+=17659:l[m]=k[m]:_qdb("0x3ef")===_qdb("0x107")?(q=R=W+8|0,r=0|b4[R>>2]):t+=44604;break;case 64053:t+=-33792;break;case 63473:ce=i[169],t+=-48086;break;case 57053:ce[12]=_qdb("0xd6"),ce[29]=_qdb("0x593"),t+=-43237;break;case 52646:ce[5]=_qdb("0x487"),ce[16]=_qdb("0x2e2"),ce[18]=_qdb("0x279"),ce[17]=_qdb("0x51a"),t+=-12583;break;case 4522:ce[8]=_qdb("0x17c"),ce[4]=_qdb("0x4b"),ce[6]=_qdb("0xd0"),ce[11]=_qdb("0x53b"),t+=20376;break;case 47675:ce[30]=_qdb("0x2cd"),ce[0]=_qdb("0x572"),ce[36]=_qdb("0x67e"),ce[31]=_qdb("0x33b"),t+=-10343;break;case 61007:ce[1]=_qdb("0x3c6"),t+=-8361;break;case 55672:ce=i[23],t+=-18080;break;case 35878:ce[21]=_qdb("0x3a1"),ce[13]=_qdb("0x387"),ce[14]=_qdb("0x26d"),ce[7]=_qdb("0x377"),t+=1671;break;case 17028:ce[41]=_qdb("0x565"),ce[28]=_qdb("0x89"),ce[10]=_qdb("0x627"),ce[7]=_qdb("0x4b1"),t+=43418;break;case 41505:ce[19]=_qdb("0x2b2"),t+=12485;break;case 34924:ce[14]=_qdb("0x483"),t+=-2975;break;case 24730:Q=Q[_qdb("0x589")],t+=1784;break;case 50507:i[93]=[],t+=-28557;break;case 4637:i[225]=[],t+=58826;break;case 42023:ce[30]=_qdb("0x1f1"),ce[33]=_qdb("0x1f9"),ce[23]=_qdb("0x33"),ce[34]=_qdb("0x18e"),t+=336;break;case 557:ce[15]=_qdb("0x46e"),ce[5]=_qdb("0x3e2"),t+=18283;break;case 57276:Q+=12,t+=-42987;break;case 63075:i[144]=[],t+=-27344;break;case 2480:i[15]=[],t+=40217;break;case 2552:ce[28]=_qdb("0x238"),t+=1920;break;case 29888:ce[17]=_qdb("0x5d1"),t+=-83;break;case 39126:i[175]=[],t+=-9277;break;case 16737:Q=R+64,t+=30051;break;case 25194:ce[5]=_qdb("0x38e"),ce[8]=_qdb("0x75"),t+=-7725;break;case 63331:i[4]=[],t+=-56387;break;case 6372:ce=i[123],t+=50700;break;case 13412:ce=i[197],t+=34933;break;case 26806:L=fe[_qdb("0x525")](L),t+=-24018;break;case 59156:ce[2]=_qdb("0x34b"),ce[27]=_qdb("0x5cc"),ce[7]=_qdb("0x4c3"),ce[5]=_qdb("0x691"),t+=-11420;break;case 40244:ce[29]=_qdb("0x9a"),ce[6]=_qdb("0x587"),ce[2]=_qdb("0x2f2"),t+=-29941;break;case 25094:ce[27]=_qdb("0x2b8"),ce[6]=_qdb("0x13d"),ce[0]=_qdb("0x17e"),t+=-11096;break;case 41441:ce[16]=_qdb("0x56b"),ce[21]=_qdb("0x154"),ce[13]=_qdb("0xae"),t+=-37155;break;case 42289:ce[27]=_qdb("0x25a"),t+=16535;break;case 53955:ce[10]=_qdb("0x372"),ce[0]=_qdb("0x605"),ce[11]=_qdb("0x258"),ce[13]=_qdb("0x9f"),t+=-12834;break;case 56407:ce=i[81],t+=-30883;break;case 23814:var W=0;t+=6447;break;case 59337:ce[25]=_qdb("0x36f"),ce[24]=_qdb("0x25b"),ce[26]=_qdb("0x5c7"),ce[28]=_qdb("0x4d7"),t+=-25991;break;case 13880:ce=i[58],t+=36146;break;case 44181:i[240]=[],t+=-37051;break;case 11233:ce[40]=_qdb("0x3d4"),ce[27]=_qdb("0x1f0"),ce[39]=_qdb("0x490"),ce[1]=_qdb("0x419"),t+=6550;break;case 55953:ce[21]=_qdb("0x5c0"),ce[18]=_qdb("0x678"),ce[20]=_qdb("0x1e9"),ce[13]=_qdb("0x1a5"),t+=-47079;break;case 49333:ce[6]=_qdb("0x62d"),ce[13]=_qdb("0x3ba"),t+=-21966;break;case 62952:ce[21]=_qdb("0x30c"),ce[18]=_qdb("0x362"),ce[17]=_qdb("0x477"),t+=-28698;break;case 48928:if(typeof Q===_qdb("0x3a"))if(_qdb("0x8e")==_qdb("0x8e"))t+=-26334;else{var H=b3(k[_qdb("0x3c7")]);if(!H)return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();response=H[_qdb("0x38")]}else{if(_qdb("0x506")!=_qdb("0x506"))return u=Q,0|lb;t+=-720}break;case 24001:ce[15]=_qdb("0x138"),ce[11]=_qdb("0xfc"),t+=33803;break;case 37109:try{_qdb("0x615")!=_qdb("0x615")?(j<<=1,n=r):Q=R(_qdb("0x206"))}catch(me){}t+=-35684;break;case 11208:ce[17]=_qdb("0x287"),ce[15]=_qdb("0x14f"),ce[25]=_qdb("0x5d3"),t+=41831;break;case 42829:ce[25]=_qdb("0x273"),ce[14]=_qdb("0x3e9"),t+=-6618;break;case 30387:ce[11]=_qdb("0x233"),ce[7]=_qdb("0x3c4"),ce[12]=_qdb("0x1dc"),ce[13]=_qdb("0x180"),t+=27130;break;case 37572:ce[16]=_qdb("0x4aa"),ce[15]=_qdb("0x42e"),ce[5]=_qdb("0x488"),ce[7]=_qdb("0x435"),t+=24373;break;case 5397:ce[36]=_qdb("0x473"),ce[42]=_qdb("0x2cf"),ce[9]=_qdb("0x232"),t+=-2845;break;case 4244:i[68]=[],t+=18367;break;case 12540:i[123]=[],t+=-6168;break;case 27528:ce[1]=_qdb("0x2eb"),ce[21]=_qdb("0x676"),ce[18]=_qdb("0x64a"),ce[6]=_qdb("0x43d"),t+=417;break;case 6264:ce[14]=_qdb("0x619"),ce[18]=_qdb("0x2d8"),ce[11]=_qdb("0x424"),t+=19169;break;case 52319:if(R<=fe[_qdb("0x319")])_qdb("0x46a")===_qdb("0x249")?t+=21694:t+=-30046;else{if(_qdb("0x514")===_qdb("0x3b5")){var Y=ac[aj>>2],G=Y+size+15&-16;return ac[aj>>2]=G,Y}t+=-18148}break;case 18017:ce[5]=_qdb("0x1ee"),ce[3]=_qdb("0x4a5"),ce[2]=_qdb("0x328"),ce[12]=_qdb("0x1b7"),t+=27290;break;case 12863:ce[0]=_qdb("0x121"),t+=48040;break;case 37311:ce[1]=_qdb("0x132"),ce[15]=_qdb("0x5f9"),ce[5]=_qdb("0x201"),t+=-22761;break;case 29012:ce[24]=_qdb("0x209"),ce[32]=_qdb("0x2af"),t+=-22748;break;case 10320:ce[23]=_qdb("0x699"),t+=11438;break;case 52764:ce[25]=_qdb("0x4fc"),t+=-16886;break;case 36787:var Q=0;t+=16637;break;case 45191:Q=R[_qdb("0xd8")],t+=-4984;break;case 11587:i[48]=[],t+=47983;break;case 50500:ce[3]=_qdb("0xad"),t+=-23337;break;case 12577:if(Q>0){if(_qdb("0x7f")==_qdb("0x7f"))t+=15745;else if(obj[_qdb("0x4ef")](prop))return!1}else _qdb("0x5b2")!=_qdb("0x5b2")?(b4[x+20>>2]=ve,b4[ve+24>>2]=x):t+=35631;break;case 10611:t+=-6260;break;case 51312:ce[14]=_qdb("0x440"),t+=-49158;break;case 45307:ce[0]=_qdb("0x14a"),ce[1]=_qdb("0x351"),ce[7]=_qdb("0x24"),t+=-7683;break;case 50572:ce[9]=_qdb("0x636"),ce[3]=_qdb("0x2ac"),ce[21]=_qdb("0x3d7"),ce[11]=_qdb("0x578"),t+=-4211;break;case 33559:t+=-17179;break;case 56577:Q+=9,t+=-22764;break;case 59977:t+=-3161;break;case 56885:t+=-22714;break;case 14074:ce[20]=_qdb("0x5bc"),ce[31]=_qdb("0x40"),ce[33]=_qdb("0x49a"),ce[11]=_qdb("0x165"),t+=14578;break;case 25154:ce[31]=_qdb("0x161"),t+=-16384;break;case 52637:ce[16]=_qdb("0x423"),ce[5]=_qdb("0x187"),ce[29]=_qdb("0x580"),ce[2]=_qdb("0x195"),t+=-42178;break;case 9170:if(Q){if(_qdb("0x1f3")!=_qdb("0x1f3")){K|=0;var K=0;return u=(u=u+(K=u)|0)+15&-16,0|K}t+=24275}else _qdb("0xa")!=_qdb("0xa")?(L=h,m=h,n=R):t+=39038;break;case 25524:ce[8]=_qdb("0x18"),ce[2]=_qdb("0x4bd"),ce[14]=_qdb("0x13c"),ce[9]=_qdb("0x80"),t+=12048;break;case 37837:ce[14]=_qdb("0x39b"),ce[16]=_qdb("0x1d1"),ce[10]=_qdb("0x10c"),ce[12]=_qdb("0x5cd"),t+=16117;break;case 43002:ce[7]=_qdb("0x46"),ce[12]=_qdb("0x629"),ce[15]=_qdb("0x568"),t+=-3599;break;case 65246:ce[37]=_qdb("0x519"),ce[20]=_qdb("0x530"),t+=-24317;break;case 22601:if(Q>=0){if(_qdb("0x406")!=_qdb("0x406")){return text[_qdb("0x210")](/\b__Z[\w\d_]+/g,(function(e){var t=aR(e);return e===t?e:t+" ["+e+"]"}))}t+=31257}else if(_qdb("0x5c2")!=_qdb("0x5c2"))try{var $=new XMLHttpRequest;return $[_qdb("0x6bc")](_qdb("0xf9"),url,!1),$[_qdb("0x2ef")](null),$[_qdb("0x9c")]}catch(be){var X=b3(url);if(X)return b0(X);throw be}else t+=25607;break;case 12782:ce[20]=_qdb("0x5fd"),ce[0]=_qdb("0xcb"),ce[18]=_qdb("0x2f4"),t+=7889;break;case 64902:ce[8]=_qdb("0x482"),ce[11]=_qdb("0x501"),t+=-60658;break;case 42602:ce=i[33],t+=-9856;break;case 53691:i[1]=[],t+=-41652;break;case 8328:ce[1]=_qdb("0x22"),t+=4227;break;case 8770:ce[20]=_qdb("0x2ff"),ce[2]=_qdb("0x647"),ce[5]=_qdb("0x29b"),t+=-3622;break;case 27859:ce[10]=_qdb("0x2d0"),ce[5]=_qdb("0x527"),ce[3]=_qdb("0x127"),t+=33382;break;case 31136:i[160]=[],t+=31345;break;case 38799:t+=-2796;break;case 19981:ce[4]=_qdb("0xb2"),t+=36438;break;case 1425:if(!Q||d(Q)){if(_qdb("0x545")===_qdb("0x614"))throw toThrow;t+=47107}else _qdb("0x43a")===_qdb("0x3e7")?doRun():t+=46783;break;case 19590:L=ce[M]%4,t+=4781;break;case 53166:ce[7]=_qdb("0x28e"),ce[1]=_qdb("0x4a4"),t+=-27972;break;case 36146:ce[2]=_qdb("0x418"),ce[4]=_qdb("0x36a"),ce[16]=_qdb("0x4e3"),t+=-3108;break;case 14374:i[39]=[],t+=39669;break;case 39421:ce[12]=_qdb("0x285"),ce[2]=_qdb("0x112"),ce[16]=_qdb("0x576"),ce[17]=_qdb("0x297"),t+=-37890;break;case 38828:ce[30]=_qdb("0x396"),ce[8]=_qdb("0x123"),t+=11679;break;case 7323:ce[36]=_qdb("0x34"),ce[2]=_qdb("0x683"),t+=21689;break;case 59839:ce[12]=_qdb("0x53f"),t+=-49850;break;case 54493:ce[26]=_qdb("0x511"),ce[16]=_qdb("0x550"),ce[1]=_qdb("0x1e6"),t+=4401;break;case 21474:Q+=3,t+=-19782;break;case 1293:ce[20]=_qdb("0x5d2"),ce[14]=_qdb("0x38f"),t+=13081;break;case 7130:ce=i[240],t+=36904;break;case 45184:ce[16]=_qdb("0x352"),t+=-8048;break;case 34428:ce[14]=_qdb("0xa2"),ce[6]=_qdb("0x1db"),ce[10]=_qdb("0x6c1"),ce[2]=_qdb("0x1be"),t+=11553;break;case 9989:ce[14]=_qdb("0x5a5"),ce[13]=_qdb("0x148"),ce[15]=_qdb("0x67"),t+=22686;break;case 55076:ce=i[177],t+=-51875;break;case 64935:ce[25]=_qdb("0x5b7"),ce[18]=_qdb("0x600"),ce[19]=_qdb("0x48b"),t+=311;break;case 44333:ce[14]=_qdb("0xfe"),ce[13]=_qdb("0x272"),ce[1]=_qdb("0x61"),t+=-20332;break;case 55462:ce[9]=_qdb("0x1c7"),ce[15]=_qdb("0x1e5"),ce[8]=_qdb("0x82"),t+=-23298;break;case 39929:ce=i[151],t+=23957;break;case 27160:ce[29]=_qdb("0x57a"),t+=-1976;break;case 47113:ce[1]=_qdb("0xea"),ce[5]=_qdb("0x4f9"),ce[26]=_qdb("0x37"),t+=-20526;break;case 27786:ce=i[18],t+=34086;break;case 63196:ce[9]=_qdb("0x6c5"),ce[23]=_qdb("0x3b7"),t+=-62639;break;case 55606:R=0,t+=-30320;break;case 21101:Q=R[_qdb("0x489")],t+=2090;break;case 9807:if(Q){if(_qdb("0x422")!=_qdb("0x422"))return k[_qdb("0x1ca")+sig][_qdb("0x6ca")](null,[ptr][_qdb("0x31d")](args));t+=38401}else _qdb("0x4d2")===_qdb("0x1b3")?t+=1009:t+=52278;break;case 47073:ce[13]=_qdb("0x30b"),ce[5]=_qdb("0x205"),t+=-15868;break;case 13998:i[128]=[],t+=23862;break;case 20978:ce[10]=_qdb("0x334"),t+=34484;break;case 50026:ce[20]=_qdb("0x111"),ce[22]=_qdb("0x243"),t+=2611;break;case 58801:ce[21]=_qdb("0x144"),ce[19]=_qdb("0x30"),t+=-8620;break;case 30532:ce[4]=_qdb("0x394"),ce[11]=_qdb("0x3c0"),t+=-5404;break;case 7414:ce[7]=_qdb("0x5ea"),ce[6]=_qdb("0x1a3"),ce[27]=_qdb("0x491"),t+=-5150;break;case 9752:ce[3]=_qdb("0x401"),ce[10]=_qdb("0x445"),ce[14]=_qdb("0x426"),ce[7]=_qdb("0x620"),t+=37321;break;case 24688:ce[6]=_qdb("0x458"),ce[9]=_qdb("0xef"),t+=36209;break;case 35731:ce=i[144],t+=415;break;case 31394:ce[1]=_qdb("0x2a1"),t+=31558;break;case 12455:ce[2]=_qdb("0x336"),ce[0]=_qdb("0x4e7"),ce[3]=_qdb("0x12a"),ce[5]=_qdb("0x2cc"),t+=47695;break;case 13454:ce[14]=_qdb("0x4b4"),t+=-5269;break;case 16371:ce[2]=_qdb("0x2fc"),ce[1]=_qdb("0x341"),ce[0]=_qdb("0x5d0"),ce[9]=_qdb("0x529"),t+=34129;break;case 52630:ce[22]=_qdb("0xc7"),t+=-1318;break;case 46668:ce[16]=_qdb("0x104"),ce[29]=_qdb("0x4ea"),t+=16265;break;case 33150:ce[1]=_qdb("0x551"),ce[5]=_qdb("0x18c"),ce[11]=_qdb("0x203"),ce[12]=_qdb("0x31"),t+=-1076;break;case 40736:ce[9]=_qdb("0x616"),ce[14]=_qdb("0x472"),ce[6]=_qdb("0x604"),ce[22]=_qdb("0x2a5"),t+=-452;break;case 15439:t+=20266;break;case 62481:ce=i[160],t+=-62404;break;case 53525:try{if(_qdb("0x57d")!=_qdb("0x57d"))return void onload(xhr[_qdb("0x63b")]);Q=R("fs")}catch(ke){}t+=-29718;break;case 2081:ce[15]=_qdb("0x59d"),ce[9]=_qdb("0x692"),ce[10]=_qdb("0x471"),t+=37428;break;case 17469:ce[9]=_qdb("0x1a6"),t+=7e3;break;case 27367:ce[17]=_qdb("0x44f"),t+=30849;break;case 10291:ce[4]=_qdb("0x45d"),ce[8]=_qdb("0x5a1"),ce[11]=_qdb("0x66e"),ce[16]=_qdb("0x4a2"),t+=-9185;break;case 48345:ce[7]=_qdb("0x66c"),t+=-46274;break;case 63525:ce[26]=_qdb("0x3bf"),ce[9]=_qdb("0x317"),t+=-19344;break;case 23767:ce[3]=_qdb("0x151"),ce[33]=_qdb("0x208"),ce[16]=_qdb("0x19e"),ce[35]=_qdb("0x4cf"),t+=23908;break;case 49614:ce[4]=_qdb("0x3d6"),ce[8]=_qdb("0x248"),t+=-31597;break;case 37972:Q=Q[_qdb("0x345")],t+=-17230;break;case 63603:ce[16]=_qdb("0x357"),ce[18]=_qdb("0x1ef"),ce[19]=_qdb("0x5de"),ce[20]=_qdb("0x143"),t+=-35744;break;case 53906:ce[43]=_qdb("0x257"),ce[37]=_qdb("0x31f"),t+=-42274;break;case 35705:R++,t+=16614;break;case 52050:ce[13]=_qdb("0x265"),ce[0]=_qdb("0x37c"),t+=-28399;break;case 7473:ce[3]=_qdb("0x321"),t+=37645;break;case 39441:W!==L?_qdb("0x58e")!=_qdb("0x58e")?u="":t+=-5882:_qdb("0x64f")!=_qdb("0x64f")?t+=-145:t+=8809;break;case 2366:ge+=ve[_qdb("0x525")](F),t+=47007;break;case 60755:t+=-22650;break;case 37965:ce[22]=_qdb("0x356"),ce[25]=_qdb("0x3f6"),t+=19088;break;case 32691:ce[10]=_qdb("0x3b2"),t+=9056;break;case 31372:Q=Q[_qdb("0x347")],t+=6062;break;case 53039:ce[20]=_qdb("0x3e3"),ce[14]=_qdb("0xac"),ce[24]=_qdb("0x38a"),t+=-48364;break;case 2264:ce[32]=_qdb("0x6d0"),t+=48679;break;case 41561:le=Q[_qdb("0x2e0")],t+=-18701;break;case 52302:ce=i[159],t+=-17874;break;case 8265:ce[42]=_qdb("0x159"),ce[32]=_qdb("0x1c2"),ce[36]=_qdb("0x4d4"),t+=17003;break;case 15311:ce[3]=_qdb("0x30f"),ce[17]=_qdb("0x4fa"),ce[0]=_qdb("0x323"),t+=17380;break;case 51716:ce[16]=_qdb("0x35d"),t+=-22896;break;case 24469:i[113]=[],t+=15527;break;case 13795:ce[13]=_qdb("0x286"),ce[11]=_qdb("0x2e1"),ce[6]=_qdb("0x51e"),t+=49808;break;case 62608:ce[7]=_qdb("0x66f"),t+=-20609;break;case 35946:ce[0]=_qdb("0x2ab"),ce[20]=_qdb("0x86"),t+=-30888;break;case 28820:ce[23]=_qdb("0x452"),t+=34866;break;case 6782:i[241]=[],t+=53862;break;case 62040:ce[15]=_qdb("0x17a"),ce[11]=_qdb("0x61b"),ce[25]=_qdb("0x606"),t+=-41236;break;case 62569:ce[19]=_qdb("0x7a"),ce[27]=_qdb("0x37a"),ce[9]=_qdb("0x505"),t+=-8572;break;case 50798:ce[4]=_qdb("0x318"),ce[7]=_qdb("0x65d"),ce[16]=_qdb("0x42b"),ce[15]=_qdb("0x4a6"),t+=-9807;break;case 15150:F=ve[_qdb("0x525")](W),t+=-13566;break;case 43011:ce[24]=_qdb("0x15c"),t+=-31291;break;case 39847:ce[24]=_qdb("0x146"),ce[3]=_qdb("0x5ca"),ce[9]=_qdb("0x52d"),ce[26]=_qdb("0x25f"),t+=-31391;break;case 23398:ce[2]=_qdb("0x34a"),ce[44]=_qdb("0x365"),t+=30508;break;case 44642:ce[8]=_qdb("0x55c"),ce[17]=_qdb("0x61e"),ce[1]=_qdb("0x42d"),t+=-30847;break;case 6633:Q=Q[_qdb("0x534")],t+=37027;break;case 58894:ce[3]=_qdb("0x316"),t+=-46354;break;case 37434:if(typeof Q===_qdb("0x3a")){if(_qdb("0x2fa")===_qdb("0x6c8")){var J=b3(url);if(J)return J;throw B}t+=-14833}else{if(_qdb("0x9d")!=_qdb("0x9d"))return a1(str,a9,outPtr,maxBytesToWrite);t+=10774}break;case 45832:ce[15]=_qdb("0x2cb"),ce[9]=_qdb("0x1d3"),ce[19]=_qdb("0x4b5"),t+=-16733;break;case 45658:ce[1]=_qdb("0x2a0"),ce[15]=_qdb("0x4e0"),ce[10]=_qdb("0x58"),t+=-6237;break;case 62673:ce[22]=_qdb("0x596"),ce[28]=_qdb("0x2fd"),t+=-47731;break;case 43877:ce[1]=_qdb("0x32a"),ce[11]=_qdb("0x214"),t+=-5049;break;case 37792:ce=i[59],t+=-32395;break;case 53990:ce[7]=_qdb("0x3fa"),ce[1]=_qdb("0x3c2"),ce[15]=_qdb("0x2b3"),t+=-39743;break;case 37887:ce[0]=_qdb("0x295"),ce[6]=_qdb("0x14e"),ce[7]=_qdb("0x2ed"),ce[4]=_qdb("0x35c"),t+=27070;break;case 61916:ce[31]=_qdb("0x1ba"),ce[10]=_qdb("0x150"),ce[4]=_qdb("0x5ce"),ce[17]=_qdb("0x270"),t+=-44548;break;case 46361:ce[23]=_qdb("0x4c4"),ce[8]=_qdb("0x44d"),ce[6]=_qdb("0x1c4"),t+=-3239;break;case 53874:M=0===M?1:M+L+1,t+=-39098;break;case 40966:ce[3]=_qdb("0x130"),t+=10750;break;case 61872:ce[9]=_qdb("0x20d"),ce[10]=_qdb("0x1ad"),ce[6]=_qdb("0x43f"),ce[11]=_qdb("0x81"),t+=-12258;break;case 20724:ce[9]=_qdb("0x20a"),ce[1]=_qdb("0x2d3"),t+=31947;break;case 28206:ce[31]=_qdb("0x2d1"),ce[3]=_qdb("0x1ed"),ce[7]=_qdb("0x13"),t+=-13199;break;case 10962:ce[14]=_qdb("0x53e"),ce[12]=_qdb("0x8b"),ce[34]=_qdb("0x58f"),t+=31327;break;case 18056:ce=i[165],t+=25520;break;case 40063:ce[6]=_qdb("0x416"),ce[7]=_qdb("0x1e8"),ce[12]=_qdb("0x116"),t+=-14623;break;case 8456:ce[23]=_qdb("0x2b1"),ce[22]=_qdb("0x324"),ce[11]=_qdb("0x239"),ce[32]=_qdb("0x1d"),t+=53460;break;case 40929:ce[28]=_qdb("0x37b"),ce[12]=_qdb("0x68f"),t+=-7349;break;case 19767:ce[24]=_qdb("0x48"),t+=42906;break;case 58625:t+=-47836;break;case 8227:ce[3]=_qdb("0x18b"),ce[10]=_qdb("0x363"),t+=56881;break;case 25128:ce[23]=_qdb("0x11a"),t+=39734;break;case 1584:" "===F?_qdb("0x60d")==_qdb("0x60d")?t+=39984:t+=2499:_qdb("0x7c")!==_qdb("0x20b")?t+=58393:a8[a7++>>0]=str[_qdb("0x687")](R);break;case 9972:ce[5]=_qdb("0x2f1"),ce[8]=_qdb("0x2e6"),ce[6]=_qdb("0xb6"),t+=10977;break;case 20742:if(Q===_qdb("0x1c8"))_qdb("0x10e")===_qdb("0x6ae")?(z=L,A=M):t+=359;else if(_qdb("0x5c6")===_qdb("0x1e")){var ee=y(aJ);a9[_qdb("0x33f")](ee,N)}else t+=27466;break;case 37306:L-=F,t+=-10500;break;case 24371:L=ce[0]>>16,t+=12453;break;case 53151:Q%=5,t+=-23527;break;case 2071:ce[0]=_qdb("0x5a"),t+=23083;break;case 5138:ce[22]=_qdb("0x98"),ce[31]=_qdb("0x61f"),ce[26]=_qdb("0x6cb"),t+=3127;break;case 8874:ce[24]=_qdb("0x1cc"),t+=41924;break;case 61100:t+=-50489;break;case 1633:ce[14]=_qdb("0x108"),t+=8369;break;case 23651:ce[2]=_qdb("0x649"),ce[3]=_qdb("0x2fb"),ce[25]=_qdb("0x10"),t+=-3884;break;case 2355:ce[15]=_qdb("0x5bd"),ce[21]=_qdb("0x66d"),ce[2]=_qdb("0x51f"),ce[6]=_qdb("0x32d"),t+=6222;break;case 42215:t+=7466;break;case 11203:t+=8387;break;case 16493:if(Q){if(_qdb("0x427")===_qdb("0x358")){var te=0;if(null!==str&&str!==undefined&&0!==str){var ne=1+(str[_qdb("0x319")]<<2);te=bi(ne),a2(str,te,ne)}return te}t+=-2333}else _qdb("0x93")==_qdb("0x93")?t+=31715:(h=(v=14-((R=(v=(h=v<<(W=(h=v+1048320|0)>>>16&8))+520192|0)>>>16&4)|W|(g=(h=(v=h<<R)+245760|0)>>>16&2))+((h=v<<g)>>>15)|0)+7|0,ia=1&(h?Z>>>h:Z)|v<<1);break;case 45709:if(Q)_qdb("0x44a")==_qdb("0x44a")?t+=-36568:(b4[aa+16>>2]=W,b4[W+24>>2]=aa);else{if(_qdb("0x38b")!=_qdb("0x38b"))return type===_qdb("0x3a");t+=2499}break;case 55422:ce[18]=_qdb("0x101"),ce[13]=_qdb("0x1b"),ce[23]=_qdb("0x439"),t+=-25534;break;case 29805:ce[11]=_qdb("0x7"),ce[6]=_qdb("0x65"),ce[16]=_qdb("0x268"),t+=7863;break;case 14550:ce[16]=_qdb("0x4ba"),ce[3]=_qdb("0xd1"),t+=-1028;break;case 64447:ce[11]=_qdb("0x3fb"),t+=-25730;break;case 12158:ce[9]=_qdb("0x2a9"),ce[14]=_qdb("0x689"),ce[12]=_qdb("0x409"),ce[21]=_qdb("0x6a8"),t+=-9678;break;case 26579:i[29]=[],t+=-5480;break;case 50943:ce[5]=_qdb("0x673"),ce[14]=_qdb("0x2db"),ce[10]=_qdb("0x156"),t+=-7e3;break;case 25440:ce[11]=_qdb("0x1e2"),ce[2]=_qdb("0x4f3"),ce[19]=_qdb("0x26"),t+=-23807;break;case 34047:ce[14]=_qdb("0x52c"),ce[10]=_qdb("0x65f"),ce[11]=_qdb("0xb5"),t+=-29265;break;case 23936:i[251]=[],t+=8614;break;case 11448:ce[12]=_qdb("0x547"),ce[3]=_qdb("0x42"),ce[19]=_qdb("0x6e"),t+=46579;break;case 22594:if(Q>=0){if(_qdb("0x45")!=_qdb("0x45")){var re=bi(ce[_qdb("0x319")]);return a5(ce,re),re}t+=1009}else _qdb("0x97")===_qdb("0x475")?(b4[n+12>>2]=M,b4[W>>2]=n):t+=25614;break;case 13602:i[118]=[],t+=11125;break;case 50685:ge+=ve[_qdb("0x525")](W),t+=-11886;break;case 10365:if(typeof M===_qdb("0x16d"))_qdb("0x13a")!=_qdb("0x13a")?t+=-47550:t+=33105;else{if(_qdb("0xc4")!=_qdb("0xc4")){if(r=(0|b4[6])+n|0,b4[6]=r,b4[9]=m,b4[m+4>>2]=1|r,(0|m)!=(0|b4[8]))return;return b4[8]=0,void(b4[5]=0)}t+=37843}break;case 14160:M=Q,t+=-7527;break;case 46032:M<i[R][_qdb("0x319")]?_qdb("0x65a")===_qdb("0x4ce")?t+=-36342:t+=-30434:_qdb("0x53c")!=_qdb("0x53c")?(b4[x+16>>2]=ve,b4[ve+24>>2]=x):t+=-7911;break;case 51116:var ie=!0;t+=-9593;break;case 65115:if(Q>0)_qdb("0x26a")===_qdb("0xd2")?(va=f,wa=fa):t+=-22081;else{if(_qdb("0x313")!=_qdb("0x313")){for(var ae=0,oe=0;oe<str[_qdb("0x319")];++oe){var se=str[_qdb("0x687")](oe);se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&str[_qdb("0x687")](++oe)),se<=127?++ae:ae+=se<=2047?2:se<=65535?3:4}return ae}t+=-16907}break;case 10604:ge+=F,t+=6194;break;case 6153:ce[8]=_qdb("0xfb"),ce[0]=_qdb("0x181"),t+=54649;break;case 44945:F<=L?_qdb("0x564")!=_qdb("0x564")?(B=W,C=ve):t+=-5358:_qdb("0x6cd")===_qdb("0x1a")?(L=F,m=F,n=j):t+=-34334;break;case 4351:if(ie)if(_qdb("0x278")===_qdb("0x518"))for(typeof k[_qdb("0x296")]==_qdb("0x16d")&&(k[_qdb("0x296")]=[k[_qdb("0x296")]]);k[_qdb("0x296")][_qdb("0x319")];)ax(k[_qdb("0x296")][_qdb("0x495")]());else t+=59939;else _qdb("0x17f")==_qdb("0x17f")?t+=6092:t+=785;break;case 38987:ce[23]=_qdb("0x371"),ce[28]=_qdb("0x53"),t+=-5417;break;case 12555:ce[8]=_qdb("0x3ce"),ce[9]=_qdb("0x3f1"),t+=20198;break;case 43660:typeof Q===_qdb("0x3a")?_qdb("0xe4")==_qdb("0xe4")?t+=21455:(ba=w,s=e):_qdb("0x4db")==_qdb("0x4db")?t+=4548:(R=g&~(1<<M),b4[3]=R,t=R);break;case 37332:ce[39]=_qdb("0x5e8"),ce[34]=_qdb("0x5ec"),ce[8]=_qdb("0x3e6"),t+=-34150;break;case 43943:i[97]=[],t+=-12267;break;case 37975:ce[11]=_qdb("0x5c8"),ce[12]=_qdb("0x2aa"),ce[10]=_qdb("0x117"),t+=-21604;break;case 45029:ce[22]=_qdb("0x43b"),ce[7]=_qdb("0x650"),t+=-4063;break;case 43746:t+=12285;break;case 3182:ce[9]=_qdb("0x57f"),ce[29]=_qdb("0x8a"),ce[2]=_qdb("0x43"),ce[26]=_qdb("0x367"),t+=30297;break;case 36148:M<i[R][_qdb("0x319")]?_qdb("0x536")===_qdb("0x5d7")?t+=-26334:t+=-145:_qdb("0x462")==_qdb("0x462")?t+=6067:str+=String[_qdb("0x35a")](u0);break;case 11417:ce[15]=_qdb("0x504"),t+=44434;break;case 59352:ce[14]=_qdb("0x68a"),ce[9]=_qdb("0x55e"),t+=3723;break;case 60802:ce[18]=_qdb("0x1bf"),ce[5]=_qdb("0x27e"),t+=-56165;break;case 19864:ce[6]=_qdb("0x5a6"),t+=-5388;break;case 21943:ce=i[103],t+=-1902;break;case 20671:ce[17]=_qdb("0x3f3"),t+=24359;break;case 29624:t+=30960;break;case 4946:ce[1]=_qdb("0x5ad"),ce[18]=_qdb("0x103"),t+=32095;break;case 50104:ce[20]=_qdb("0x45f"),ce[19]=_qdb("0x39c"),ce[2]=_qdb("0x16"),ce[17]=_qdb("0xf6"),t+=-37946;break;case 40199:t+=-4505;break;case 33412:ce[11]=_qdb("0x6a"),t+=7324;break;case 8594:R=-1,t+=1849;break;case 18840:ce[6]=_qdb("0x169"),ce[1]=_qdb("0x404"),t+=16010;break;case 930:ce[14]=_qdb("0x432"),ce[15]=_qdb("0x6be"),t+=49493;break;case 53608:i[33]=[],t+=-11006;break;case 18743:ce[19]=_qdb("0x515"),ce[8]=_qdb("0x39e"),t+=8634;break;case 29099:ce[3]=_qdb("0x274"),ce[12]=_qdb("0xc2"),t+=-8370;break;case 63485:ce[0]=_qdb("0x3a3"),ce[2]=_qdb("0x22e"),t+=-58963;break;case 64267:ce[0]=_qdb("0x4f7"),ce[12]=_qdb("0x24f"),t+=-19625;break;case 64463:var ce=[];t+=-33327;break;case 38121:t+=12995;break;case 18016:ce[14]=_qdb("0x133"),ce[3]=_qdb("0x6c3"),t+=-2646;break;case 5148:ce[24]=_qdb("0x682"),ce[32]=_qdb("0x3f7"),ce[1]=_qdb("0x6bf"),t+=7441;break;case 53067:ce[2]=_qdb("0x4c8"),ce[7]=_qdb("0x19b"),t+=-7042;break;case 33445:Q=R[_qdb("0xbb")],t+=-16952;break;case 48441:ce[12]=_qdb("0x24e"),t+=-1243;break;case 28322:fe=R[_qdb("0x87")],t+=19101;break;case 11753:ce[21]=_qdb("0x1ff"),t+=30358;break;case 65140:fe=_qdb("0x136"),t+=-8255;break;case 61366:Q%=10,t+=-59633;break;case 11841:ce[15]=_qdb("0x36"),ce[4]=_qdb("0x25"),ce[1]=_qdb("0x3a0"),ce[0]=_qdb("0x4df"),t+=34363;break;case 1106:ce[10]=_qdb("0x405"),ce[7]=_qdb("0x648"),ce[21]=_qdb("0x4b8"),t+=44732;break;case 12606:ce[4]=_qdb("0x654"),ce[6]=_qdb("0x50"),t+=21843;break;case 41999:ce[2]=_qdb("0x69e"),ce[4]=_qdb("0x3b8"),t+=22268;break;case 8367:ce=i[63],t+=3081;break;case 40207:if(Q)_qdb("0x2ea")===_qdb("0x23e")?k[_qdb("0x433")][_qdb("0x660")]()():t+=1354;else if(_qdb("0xe")==_qdb("0xe"))t+=8001;else{var ue=1+(str[_qdb("0x319")]<<2);ret=bi(ue),a2(str,ret,ue)}break;case 36229:ce[18]=_qdb("0x10f"),ce[8]=_qdb("0x5da"),t+=-29447;break;case 0:ce[4]=_qdb("0x35f"),t+=34076;break;case 56370:ce[14]=_qdb("0x11c"),ce[22]=_qdb("0x78"),t+=-50606;break;case 24151:ce[6]=_qdb("0x289"),t+=23234;break;case 15370:ce[28]=_qdb("0x16a"),ce[13]=_qdb("0x67d"),t+=44409;break;case 41121:ce[6]=_qdb("0x4f"),ce[12]=_qdb("0x355"),ce[9]=_qdb("0x22f"),t+=19442;break;case 60644:ce=i[241],t+=2841;break;case 49411:ce[10]=_qdb("0x656"),ce[22]=_qdb("0x55f"),ce[5]=_qdb("0x513"),ce[18]=_qdb("0x41a"),t+=-5534;break;case 2296:t+=-604;break;case 21263:M=Q,t+=10109;break;case 20025:ie=!1,t+=-3288;break;case 52239:W+=3,t+=11814;break;case 10443:t+=-3791;break;case 12589:ce[10]=_qdb("0x63"),ce[8]=_qdb("0x157"),ce[25]=_qdb("0x67a"),ce[4]=_qdb("0x4bb"),t+=40208;break;case 34076:ce[5]=_qdb("0x14"),ce[10]=_qdb("0xde"),ce[6]=_qdb("0xe8"),t+=-22323;break;case 25268:ce[5]=_qdb("0x17"),ce[3]=_qdb("0x282"),ce[13]=_qdb("0xeb"),ce[16]=_qdb("0x360"),t+=14115;break;case 60903:i[58]=[],t+=-47023;break;case 65253:ce[17]=_qdb("0x342"),ce[11]=_qdb("0x3f9"),t+=-20069;break;case 34171:t+=-25577;break;case 7238:ce[6]=_qdb("0x310"),ce[32]=_qdb("0x2d2"),t+=35591;break;case 43034:Q=M[_qdb("0x1e7")],t+=1408;break;case 12825:ce[0]=_qdb("0x94"),t+=-7687;break;case 4516:ce[25]=_qdb("0x383"),ce[20]=_qdb("0x251"),ce[4]=_qdb("0x555"),t+=46056;break;case 10303:ce[30]=_qdb("0x437"),t+=38225;break;case 36769:ce=i[108],t+=-3807;break;case 51748:ce[0]=_qdb("0x2c"),ce[24]=_qdb("0x193"),t+=-20354;break;case 6123:F=F[_qdb("0x15")](10),t+=4481;break;case 31082:i[159]=[],t+=21220;break;case 20828:i[108]=[],t+=15941;break;case 40284:ce[3]=_qdb("0x2df"),ce[2]=_qdb("0x2b0"),ce[10]=_qdb("0x4f1"),ce[19]=_qdb("0x5ef"),t+=15669;break;case 42928:ce[18]=_qdb("0x450"),ce[16]=_qdb("0x3ac"),ce[3]=_qdb("0x23f"),t+=-12750;break;case 31645:ce[18]=_qdb("0x675"),ce[9]=_qdb("0x4ab"),t+=11357;break;case 64581:ce[31]=_qdb("0x164"),t+=-34334;break;case 10128:fe=fe[_qdb("0x3dd")]||_qdb("0x136"),t+=-8587;break;case 65465:ce[22]=_qdb("0x494"),ce[5]=_qdb("0x5ac"),ce[4]=_qdb("0x173"),t+=-57238;break;case 6652:R++,t+=38140;break;case 41701:if(typeof R===_qdb("0x20"))_qdb("0x235")===_qdb("0x22d")?(j[F>>0]=Q,F=F+1|0):t+=-36342;else if(_qdb("0x454")==_qdb("0x454"))t+=6507;else if(null!==aE&&(clearInterval(aE),aE=null),aF){var de=aF;aF=null,de()}break;case 16798:W++,t+=32719;break;case 56031:ge+="0",t+=-35945;break;case 33038:ce[11]=_qdb("0x1dd"),t+=16295;break;case 63041:ce=i[38],t+=-11331;break;case 40991:ce[0]=_qdb("0xa7"),t+=12617;break;case 8491:R=-1,t+=6948;break;case 16380:ie=!1,t+=44720;break;case 49982:ce[21]=_qdb("0x3c1"),t+=-15936;break;case 57517:ce[10]=_qdb("0x5e5"),ce[8]=_qdb("0x18a"),ce[18]=_qdb("0x55"),ce[9]=_qdb("0xe0"),t+=-45676;break;case 24898:ce[16]=_qdb("0x4d8"),ce[12]=_qdb("0x33a"),ce[1]=_qdb("0x359"),ce[9]=_qdb("0x474"),t+=-15146;break;case 9156:ce[4]=_qdb("0x386"),ce[8]=_qdb("0x16b"),t+=29970;break;case 11632:ce[34]=_qdb("0x1fb"),ce[39]=_qdb("0x2e9"),t+=7997;break;case 64931:ce=[],t+=-6306;break;case 39403:ce[30]=_qdb("0x3e4"),t+=-14742;break;case 33813:t+=-32121;break;case 49681:ie=!1,t+=-38478;break;case 58216:ce[1]=_qdb("0x3e"),t+=-12384;break;case 45838:ce[13]=_qdb("0x1c6"),ce[6]=_qdb("0x230"),t+=-33056;break;case 33844:ce[8]=_qdb("0x455"),ce[9]=_qdb("0x3fd"),t+=-20242;break;case 33346:ce[20]=_qdb("0x18f"),ce[2]=_qdb("0x3af"),ce[4]=_qdb("0x19"),ce[3]=_qdb("0x609"),t+=13322;break;case 5058:ce[13]=_qdb("0x5b1"),ce[19]=_qdb("0x190"),ce[7]=_qdb("0x49d"),t+=-4128;break;case 25286:try{_qdb("0x5e6")!==_qdb("0xb8")?R=M(_qdb("0x677")):(z=w,A=v)}catch(xe){}t+=16415;break;case 56816:F=F[_qdb("0x687")](0),t+=-50693;break;case 47353:ce[4]=_qdb("0x4f2"),t+=-45072;break;case 42697:ce=i[15],t+=-5899;break;case 21804:i[18]=[],t+=5982;break;case 56336:ce[2]=_qdb("0x60"),ce[24]=_qdb("0x128"),ce[18]=_qdb("0x9"),ce[17]=_qdb("0x679"),t+=-15844;break;case 37192:t+=-1044;break;case 12602:t+=-10910;break;case 34046:ce[0]=_qdb("0x543"),t+=1551;break;case 14349:ce[4]=_qdb("0x625"),t+=9802;break;case 63296:ge+=ve[_qdb("0x525")](F),t+=-11057;break;case 23807:if(!Q||d(Q))_qdb("0x540")==_qdb("0x540")?t+=13302:(n-=8,x=y);else{if(_qdb("0x4c6")===_qdb("0x54"))return U(ident);t+=24401}break;case 14247:ce[3]=_qdb("0x252"),ce[8]=_qdb("0x191"),ce[18]=_qdb("0x63c"),t+=-12954;break;case 48710:R<i[_qdb("0x319")]?_qdb("0x6a6")==_qdb("0x6a6")?t+=-27396:(ia=0|b4[7],0==(0|ia)|na>>>0<ia>>>0&&(b4[7]=na),b4[115]=na,b4[116]=oa,b4[118]=0,b4[12]=b4[121],b4[11]=-1,b4[16]=52,b4[15]=52,b4[18]=60,b4[17]=60,b4[20]=68,b4[19]=68,b4[22]=76,b4[21]=76,b4[24]=84,b4[23]=84,b4[26]=92,b4[25]=92,b4[28]=100,b4[27]=100,b4[30]=108,b4[29]=108,b4[32]=116,b4[31]=116,b4[34]=124,b4[33]=124,b4[36]=132,b4[35]=132,b4[38]=140,b4[37]=140,b4[40]=148,b4[39]=148,b4[42]=156,b4[41]=156,b4[44]=164,b4[43]=164,b4[46]=172,b4[45]=172,b4[48]=180,b4[47]=180,b4[50]=188,b4[49]=188,b4[52]=196,b4[51]=196,b4[54]=204,b4[53]=204,b4[56]=212,b4[55]=212,b4[58]=220,b4[57]=220,b4[60]=228,b4[59]=228,b4[62]=236,b4[61]=236,b4[64]=244,b4[63]=244,b4[66]=252,b4[65]=252,b4[68]=260,b4[67]=260,b4[70]=268,b4[69]=268,b4[72]=276,b4[71]=276,b4[74]=284,b4[73]=284,b4[76]=292,b4[75]=292,b4[78]=300,b4[77]=300,ia=oa+-40|0,Q=na+8|0,ma=0==(7&Q|0)?0:0-Q&7,Q=na+ma|0,qa=ia-ma|0,b4[9]=Q,b4[6]=qa,b4[Q+4>>2]=1|qa,b4[na+ia+4>>2]=40,b4[10]=b4[125]):_qdb("0x492")!==_qdb("0x47b")?t+=11874:t+=46783;break;case 28652:ce[5]=_qdb("0x231"),ce[38]=_qdb("0x3d0"),ce[19]=_qdb("0x44"),t+=26048;break;case 56522:var le=_qdb("0x136");t+=-19735;break;case 52715:ce[23]=_qdb("0x3d3"),ce[2]=_qdb("0x2bc"),ce[13]=_qdb("0x685"),ce[0]=_qdb("0x5d6"),t+=1778;break;case 58824:i[169]=[],t+=4649;break;case 54043:ce=i[39],t+=2327;break;case 45118:var fe=_qdb("0x136");t+=11404;break;case 17844:ce[24]=_qdb("0x23b"),ce[18]=_qdb("0x2c6"),ce[2]=_qdb("0x69a"),t+=19993;break;case 37041:ce[8]=_qdb("0x3aa"),ce[7]=_qdb("0x216"),ce[5]=_qdb("0x26c"),t+=-9881;break;case 23603:Q=R[_qdb("0xd8")],t+=1127;break;case 5764:ce[23]=_qdb("0x6d1"),ce[2]=_qdb("0x139"),ce[17]=_qdb("0x1a9"),t+=-621;break;case 39509:ce[7]=_qdb("0x10a"),ce[11]=_qdb("0x484"),ce[16]=_qdb("0x2b4"),t+=-26355;break;case 3178:ce[17]=_qdb("0x46c"),ce[26]=_qdb("0x3fe"),ce[0]=_qdb("0x2e5"),t+=-3178;break;case 45827:ce[4]=_qdb("0x3b4"),ce[6]=_qdb("0x50e"),t+=14488;break;case 44442:if(typeof Q===_qdb("0x3a")){if(_qdb("0x4d6")!=_qdb("0x4d6"))throw new Error(_qdb("0x510")+aJ);t+=-31865}else{if(_qdb("0x421")!=_qdb("0x421")){var he=he>>>16,pe=65535&he,_e=65535&pe;return pe*_e+(he*_e+pe*(pe>>>16)<<16)|0}t+=3766}break;case 37668:ce[29]=_qdb("0x2e"),t+=-26706;break;case 46204:ce[14]=_qdb("0x3ad"),t+=-20999;break;case 2154:ce[18]=_qdb("0x5"),ce[23]=_qdb("0x3c8"),ce[20]=_qdb("0x1c3"),t+=47828;break;case 62933:ce[15]=_qdb("0x62c"),ce[7]=_qdb("0x651"),ce[17]=_qdb("0x48d"),t+=1648;break;case 35694:Q+=5,t+=-23092;break;case 51710:ce[4]=_qdb("0x61a"),t+=1357;break;case 20729:ce[10]=_qdb("0x1e3"),t+=-5881;break;case 24200:ce[1]=_qdb("0x3e5"),t+=10345;break;case 34254:ce[12]=_qdb("0x465"),ce[25]=_qdb("0x329"),t+=-3722;break;case 61945:ce[1]=_qdb("0x40a"),ce[13]=_qdb("0x3bc"),t+=-17976;break;case 53858:Q=M[_qdb("0x1cf")],t+=-4930;break;case 13752:L=fe[_qdb("0x319")],t+=27584;break;case 50748:ce[15]=_qdb("0x46d"),ce[26]=_qdb("0x3b3"),t+=4674;break;case 3283:ce[4]=_qdb("0xf"),t+=49481;break;case 18774:i[59]=[],t+=19018;break;case 5960:ce[6]=_qdb("0x376"),t+=4304;break;case 14942:ce[30]=_qdb("0x305"),t+=48389;break;case 46107:return Q;case 53954:ce[22]=_qdb("0x4a1"),ce[15]=_qdb("0x5b3"),ce[19]=_qdb("0x1fe"),ce[13]=_qdb("0x4ec"),t+=-10260;break;case 22350:ce[9]=_qdb("0x532"),ce[14]=_qdb("0x457"),ce[0]=_qdb("0x577"),ce[15]=_qdb("0x66b"),t+=-169;break;case 31676:ce=i[97],t+=-17327;break;case 63886:ce[2]=_qdb("0x2a8"),ce[13]=_qdb("0x57c"),ce[11]=_qdb("0x153"),t+=-48575;break;case 45030:ce[14]=_qdb("0x403"),t+=-42560;break;case 64957:ce[11]=_qdb("0x262"),t+=-27646;break;case 30403:ce[13]=_qdb("0x2f9"),ce[11]=_qdb("0x35b"),t+=-6636;break;case 31330:ce[28]=_qdb("0x3b9"),t+=21385;break;case 37860:ce=i[128],t+=13848;break;case 28276:ce[25]=_qdb("0x5b6"),t+=-15135;break;case 30178:ce[11]=_qdb("0x64d"),ce[2]=_qdb("0x79"),t+=17175;break;case 49517:t+=-19256;break;case 63682:ce[2]=_qdb("0x330"),ce[5]=_qdb("0x1fc"),ce[15]=_qdb("0x4f4"),t+=-53391;break;case 52797:ce[22]=_qdb("0x55d"),ce[9]=_qdb("0x9e"),ce[33]=_qdb("0x99"),t+=-373;break;case 63463:ce=i[225],t+=-30632;break;case 25205:i[177]=[],t+=29871;break;case 41424:ce[2]=_qdb("0x493"),ce[21]=_qdb("0x12d"),ce[9]=_qdb("0x277"),ce[11]=_qdb("0x125"),t+=23896;break;case 39383:ce[38]=_qdb("0x598"),t+=-28175;break;case 14289:t+=-12597;break;case 37624:i[63]=[],t+=-29257;break;case 52885:ce[23]=_qdb("0x72"),ce[18]=_qdb("0x175"),ce[17]=_qdb("0x6c9"),t+=-49602;break;case 31701:Q+=11,t+=-29405;break;case 39587:W=ce[M]>>7,t+=-12648;break;case 20019:ce[27]=_qdb("0x4cd"),ce[15]=_qdb("0x5fc"),ce[29]=_qdb("0x5c4"),t+=-12696;break;case 60315:ce[11]=_qdb("0x3ab"),ce[10]=_qdb("0x5f6"),ce[3]=_qdb("0x1df"),t+=-33736;break;case 62233:ce[4]=_qdb("0x556"),ce[0]=_qdb("0x5f8"),t+=-20792;break;case 38105:t+=-913;break;case 57072:ce[7]=_qdb("0x50f"),ce[0]=_qdb("0x3db"),ce[6]=_qdb("0x19c"),ce[1]=_qdb("0x49b"),t+=-14144;break;case 15598:var ve=i[R][M],ge="";t+=8216;break;case 15007:ce[15]=_qdb("0x2"),ce[32]=_qdb("0x453"),ce[16]=_qdb("0x84"),ce[19]=_qdb("0x671"),t+=25237;break;case 44034:ce[12]=_qdb("0x217"),ce[10]=_qdb("0xb9"),ce[15]=_qdb("0x429"),ce[14]=_qdb("0x63f"),t+=-20587;break;case 14848:ce[14]=_qdb("0x32c"),ce[7]=_qdb("0x12"),t+=-8695;break;case 47736:ce[6]=_qdb("0x5dd"),ce[4]=_qdb("0x30a"),ce[12]=_qdb("0x364"),ce[13]=_qdb("0x4be"),t+=4894;break;case 3201:ce[22]=_qdb("0x655"),ce[15]=_qdb("0x542"),ce[4]=_qdb("0x65b"),ce[21]=_qdb("0x333"),t+=27202;break;case 11720:ce[29]=_qdb("0x37f"),ce[9]=_qdb("0x34e"),ce[21]=_qdb("0x392"),t+=27267;break;case 43576:ce[16]=_qdb("0x42c"),t+=-9529;break;case 32074:ce[3]=_qdb("0x53a"),ce[0]=_qdb("0x2d4"),t+=10636;break;case 17783:ce[6]=_qdb("0x280"),ce[30]=_qdb("0x4c5"),t+=-4958;break;case 31193:ce[17]=_qdb("0x566"),ce[26]=_qdb("0x2d6"),t+=-11876;break;case 10459:ce[26]=_qdb("0x562"),ce[27]=_qdb("0x4ed"),ce[8]=_qdb("0x197"),t+=7557;break;case 2281:ce[10]=_qdb("0x288"),ce[9]=_qdb("0x11f"),ce[5]=_qdb("0x4a9"),ce[17]=_qdb("0x1d2"),t+=57558;break;case 48906:ce[15]=_qdb("0x695"),ce[9]=_qdb("0x544"),ce[20]=_qdb("0x7e"),ce[11]=_qdb("0x3ec"),t+=-21918;break;case 1998:ce[10]=_qdb("0x260"),ce[27]=_qdb("0xb4"),t+=8322;break;case 7386:ce[5]=_qdb("0x172"),ce[1]=_qdb("0xfd"),t+=26026;break;case 40375:ce[17]=_qdb("0x2ce"),ce[20]=_qdb("0x65c"),ce[12]=_qdb("0x5c3"),t+=-38377;break;case 22611:ce=i[68],t+=4917;break;case 52671:ce[12]=_qdb("0x2d"),ce[21]=_qdb("0x694"),ce[13]=_qdb("0x29c"),t+=-52156;break;case 28447:M=-1,t+=36484;break;case 20041:ce[14]=_qdb("0x2ca"),ce[21]=_qdb("0x690"),ce[13]=_qdb("0x5f2"),ce[23]=_qdb("0x52a"),t+=39296;break;case 60897:ce[10]=_qdb("0x463"),t+=-27747;break;case 50423:ce[16]=_qdb("0x223"),ce[9]=_qdb("0x1ec"),t+=15042;break;case 5559:ce[4]=_qdb("0x60e"),t+=48274;break;case 45981:ce[4]=_qdb("0x29f"),ce[0]=_qdb("0x229"),ce[11]=_qdb("0x46f"),ce[3]=_qdb("0x3ed"),t+=-875;break;case 37592:ce[8]=_qdb("0x2a7"),ce[10]=_qdb("0x142"),t+=5764;break;case 5311:ce[M]=parseInt(ge,10),t+=33374;break;case 2470:i[107]=[],t+=44286;break;case 12072:i[23]=[],t+=43600;break;case 48250:t+=-9808;break;case 21265:if("\n"===F){if(_qdb("0x5f7")!=_qdb("0x5f7"))return k[_qdb("0x189")](path,u);t+=29420}else{if(_qdb("0x6")!=_qdb("0x6"))return console[_qdb("0x186")](_qdb("0x591")+request[_qdb("0x50a")]+_qdb("0x1da")+aJ),void bn();t+=22481}break;case 32962:ce[3]=_qdb("0x612"),ce[17]=_qdb("0x36e"),ce[2]=_qdb("0x56a"),t+=6617}}function aV(){if(_qdb("0x469")==_qdb("0x469"))return a9[_qdb("0x319")];B=q,C=j}function aW(e){_qdb("0x5af")!==_qdb("0x524")?aI(_qdb("0x537")):p+=58393}function aX(e){if(_qdb("0x0")!=_qdb("0x0"))return returnType===_qdb("0x546")?a0(ret):returnType===_qdb("0x5c1")?Boolean(ret):ret;aW(e>>>=0)}function b0(e){if(_qdb("0x4de")!==_qdb("0x3ea")){for(var t=[],n=0;n<e[_qdb("0x319")];n++)if(_qdb("0x5bb")==_qdb("0x5bb")){var r=e[n];r>255&&(_qdb("0xbd")!==_qdb("0x221")?(aZ&&(_qdb("0x3fc")==_qdb("0x3fc")?T(!1,_qdb("0x369")+r+" ("+String[_qdb("0x35a")](r)+_qdb("0x1f2")+n+_qdb("0x413")):d=n("fs")),r&=255):p+=31257),t[_qdb("0x3dc")](String[_qdb("0x35a")](r))}else{var i=u0-65536;str+=String[_qdb("0x35a")](55296|i>>10,56320|1023&i)}return t[_qdb("0x293")]("")}aI(_qdb("0x237")+text)}function b2(e){if(_qdb("0x48c")===_qdb("0x18d"))k[_qdb("0x4ef")](m)&&(l[m]=k[m]);else try{if(_qdb("0x5a3")!==_qdb("0x434")){for(var t=b1(e),n=new Uint8Array(t[_qdb("0x319")]),r=0;r<t[_qdb("0x319")];++r)_qdb("0x59e")!=_qdb("0x59e")?(j[b6>>0]=d,b6=b6+1|0):n[r]=t[_qdb("0x687")](r);return n}var i=new XMLHttpRequest;return i[_qdb("0x6bc")](_qdb("0xf9"),url,!1),i[_qdb("0x254")]=_qdb("0x141"),i[_qdb("0x2ef")](null),new Uint8Array(i[_qdb("0x63b")])}catch(i){if(_qdb("0x20e")==_qdb("0x20e"))throw new Error(_qdb("0x2bf"));p+=24401}}function b3(e){if(_qdb("0x110")!==_qdb("0x4e2")){if(!aM(e)){if(_qdb("0x637")!==_qdb("0x332"))return;L=k,M=0,N=0,O=61}return b2(e[_qdb("0x2e4")](aL[_qdb("0x319")]))}setTimeout(bp,0)}function br(e){this[_qdb("0x345")]=_qdb("0x1b0"),this[_qdb("0x188")]=_qdb("0x1ea")+e+")",this[_qdb("0x50a")]=e}function bs(e){function t(){bq||(bq=!0,k[_qdb("0x263")]=!0,R||(at(),au(),k[_qdb("0x653")]&&k[_qdb("0x653")](),aw()))}e=e||n,aD>0||(as(),aD>0||(k[_qdb("0x2f")]?(k[_qdb("0x2f")](_qdb("0x66")),setTimeout((function(){setTimeout((function(){k[_qdb("0x2f")]("")}),1),t()}),1)):t()))}}_qdc()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=undefined;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(q){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r=l;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(q){return{type:"throw",arg:q}}}e.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",_={};function v(){}function g(){}function y(){}var m={};m[a]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(E([])));k&&k!==n&&r.call(k,a)&&(m=k);var x=y.prototype=v.prototype=Object.create(m);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,s){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},S(T.prototype),T.prototype[o]=function(){return this},e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),c(x,s,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),_}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(280);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(22),i=n(23),a=n(81),o=n(179),s=n(263);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){var r=n(35),i=n(261);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(o){throw i(e),o}}},function(e,t,n){var r=n(189);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(31)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},function(e,t,n){"use strict";var r=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",s=Math.floor,c=String.fromCharCode,u=function(e){return e+22+75*(e<26)},d=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;r+=36)e=s(e/35);return s(r+36*e/(e+38))},l=function(e){var t,n,i=[],a=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,l=128,f=0,h=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(c(n));var p=i.length,_=p;for(p&&i.push("-");_<a;){var v=r;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<v&&(v=n);var g=_+1;if(v-l>s((r-f)/g))throw RangeError(o);for(f+=(v-l)*g,l=v,t=0;t<e.length;t++){if((n=e[t])<l&&++f>r)throw RangeError(o);if(n==l){for(var y=f,m=36;;m+=36){var b=m<=h?1:m>=h+26?26:m-h;if(y<b)break;var k=y-b,x=36-b;i.push(c(u(b+k%x))),y=s(k/x)}i.push(c(u(y))),h=d(f,g,_==p),f=0,++_}}++f,++l}return i.join("")};e.exports=function(e){var t,n,r=[],o=e.toLowerCase().replace(a,".").split(".");for(t=0;t<o.length;t++)n=o[t],r.push(i.test(n)?"xn--"+l(n):n);return r.join(".")}},function(e,t,n){"use strict";n(29);var r=n(22),i=n(105),a=n(288),o=n(85),s=n(217),c=n(155),u=n(262),d=n(109),l=n(184),f=n(76),h=n(135),p=n(170),_=n(35),v=n(39),g=n(122),y=n(120),m=n(373),b=n(197),k=n(31),x=i("fetch"),S=i("Headers"),T=k("iterator"),P="URLSearchParams",I="URLSearchParamsIterator",w=d.set,A=d.getterFor(P),E=d.getterFor(I),D=/\+/g,q=Array(4),O=function(e){return q[e-1]||(q[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},R=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(r){for(;n;)t=t.replace(O(n--),R);return t}},M=/[!'()~]|%20/g,C={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},N=function(e){return C[e]},B=function(e){return encodeURIComponent(e).replace(M,N)},F=function(e,t){if(t)for(var n,r,i=t.split("&"),a=0;a<i.length;)(n=i[a++]).length&&(r=n.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}))},U=function(e){this.entries.length=0,F(this.entries,e)},j=function(e,t){if(e<t)throw TypeError("Not enough arguments")},V=u((function(e,t){w(this,{type:I,iterator:m(A(e).entries),kind:t})}),"Iterator",(function(){var e=E(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),W=function(){l(this,W,P);var e,t,n,r,i,a,o,s,c,u=arguments.length>0?arguments[0]:undefined,d=this,h=[];if(w(d,{type:P,entries:h,updateURL:function(){},updateSearchParams:U}),u!==undefined)if(v(u))if("function"==typeof(e=b(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((o=(a=(i=m(_(r.value))).next).call(i)).done||(s=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:o.value+"",value:s.value+""})}else for(c in u)f(u,c)&&h.push({key:c,value:u[c]+""});else F(h,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},H=W.prototype;s(H,{append:function(e,t){j(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},"delete":function(e){j(arguments.length,1);for(var t=A(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){j(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){j(arguments.length,1);for(var n,r=A(this),i=r.entries,a=!1,o=e+"",s=t+"",c=0;c<i.length;c++)(n=i[c]).key===o&&(a?i.splice(c--,1):(a=!0,n.value=s));a||i.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=A(this),i=r.entries,a=i.slice();for(i.length=0,n=0;n<a.length;n++){for(e=a[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=A(this).entries,r=h(e,arguments.length>1?arguments[1]:undefined,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),o(H,T,H.entries),o(H,"toString",(function(){for(var e,t=A(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(B(e.key)+"="+B(e.value));return n.join("&")}),{enumerable:!0}),c(W,P),r({global:!0,forced:!a},{URLSearchParams:W}),a||"function"!=typeof x||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,p(n)===P&&((r=t.headers?new S(t.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),x.apply(this,i)}}),e.exports={URLSearchParams:W,getState:A}},function(e,t,n){var r=n(35),i=n(197);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){"use strict";var r=n(149),i=n(35),a=n(89),o=n(375),s=n(150);r("search",1,(function(e,t,n){return[function(t){var n=a(this),r=t==undefined?undefined:t[e];return r!==undefined?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var d=s(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(254);var i={stringify:function(e,t,n){var i="";try{i=r.a.JSON.stringify(e,t,n)}catch(a){}return i},parse:function(e,t){return r.a.JSON?r.a.JSON.parse(e,t):null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(101),i=n.n(r);n(395),n(10),n(97),n(29),n(92);function a(e){return i()(new Set(e))}},function(e,t,n){"use strict";(function(e,r){var i,a=n(409);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(a.a)(i);t.a=o}).call(this,n(203),n(561)(e))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LIB=1]="LIB",e[e.KERNEL=2]="KERNEL",e[e.NETWORK=3]="NETWORK",e[e.DRM=4]="DRM",e[e.TIMELINE=5]="TIMELINE",e[e.MANIFEST=6]="MANIFEST",e[e.LOADER=7]="LOADER",e[e.MUX=8]="MUX",e[e.AVCODEC=9]="AVCODEC",e[e.AVFORMAT=10]="AVFORMAT",e[e.RENDERER=11]="RENDERER",e[e.MAT=12]="MAT"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(5),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){o()(n,e);var t=l(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(n(228).a);f.DESTROYING="Destroying",f.DESTROYED="Destroying",f.STREAM_ENCRYPTED="StreamEncrypted",f.MSE_ATTACHING="MSEAttaching",f.MSE_ATTACHED="MSEAttached",f.MSE_DETACHING="MSEDetaching",f.MSE_DETACHED="MediaDetached",f.MEDIA_IDLE="MediaIdle",f.BUFFER_CREATED="BufferCreated",f.BUFFER_UPDATED="BufferUpdated",f.BUFFER_EXPECTING="BufferExpecting",f.BUFFER_APPENDING="BufferAppending",f.BUFFER_APPENDED="BufferAppended",f.BUFFER_FLUSHING="BufferFlushing",f.BUFFER_FLUSHED="BufferFlushed",f.MANIFEST_LOADED="ManifestLoaded",f.DATA_EOD="DataEOD",f.AUDIO_TRACK_SWITCHED_FAILED="TrackSwitchedFailed",f.AUDIO_TRACK_SWITCHED_SUCCESS="TrackSwitchedSuccess",f.FPS_REPORT="FpsReport",f.FPS_STUCK="FpsStuck",f.DNS_PARSER_SUCCESS="DNS_PARSER_SUCCESS"},,function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NET_UNSUPPORTED_SCHEME=1e3]="NET_UNSUPPORTED_SCHEME",e[e.NET_HTTPS_UNMATCHED_HTTP_SCHEME=1001]="NET_HTTPS_UNMATCHED_HTTP_SCHEME",e[e.MFT_FAILED_TO_PARSE_M3U8=2101]="MFT_FAILED_TO_PARSE_M3U8",e[e.MFT_FAILED_TO_PARSE_FLV=2102]="MFT_FAILED_TO_PARSE_FLV",e[e.MFT_FAILED_TO_PARSE_MPD=2103]="MFT_FAILED_TO_PARSE_MPD",e[e.MFT_FAILED_TO_PARSE_JDASH=2104]="MFT_FAILED_TO_PARSE_JDASH",e[e.MFT_FAILED_TO_PARSE_MPD_XML=2301]="MFT_FAILED_TO_PARSE_MPD_XML",e[e.MEDIA_VIDEO_ERROR=3e3]="MEDIA_VIDEO_ERROR",e[e.MEDIA_SOURCE_OPERATION_FAILED=3001]="MEDIA_SOURCE_OPERATION_FAILED",e[e.MEDIA_SOURCE_OPERATION_THREW=3002]="MEDIA_SOURCE_OPERATION_THREW",e[e.MEDIA_QUOTA_EXCEEDED=3003]="MEDIA_QUOTA_EXCEEDED",e[e.MEDIA_HIGH_BUFFER=3004]="MEDIA_HIGH_BUFFER",e[e.MEDIA_PIPELINE_ERROR_DECODE=3300]="MEDIA_PIPELINE_ERROR_DECODE",e[e.MEDIA_VIDEO_DECODE_ERROR=3301]="MEDIA_VIDEO_DECODE_ERROR",e[e.MEDIA_VDA_ERROR=3302]="MEDIA_VDA_ERROR",e[e.MEDIA_AUDIO_RENDERER_ERROR=3303]="MEDIA_AUDIO_RENDERER_ERROR",e[e.MEDIA_URL_SAFE_REJECTED=3401]="MEDIA_URL_SAFE_REJECTED",e[e.UNSUPPORTED_PLAY_RANGE=4e3]="UNSUPPORTED_PLAY_RANGE",e[e.DATA_AD_ERROR=4027]="DATA_AD_ERROR",e[e.DATA_P2P_DISPATCH=4100]="DATA_P2P_DISPATCH",e[e.DATA_P2P_LOAD=4101]="DATA_P2P_LOAD",e[e.DATA_P2P_LOAD_ACCESS=4102]="DATA_P2P_LOAD_ACCESS",e[e.DATA_P2P_MEMORY_ALLOC=4103]="DATA_P2P_MEMORY_ALLOC",e[e.DATA_P2P_DASH_BYTES_LENGTH=4104]="DATA_P2P_DASH_BYTES_LENGTH",e[e.DATA_P2P_AUTH=4105]="DATA_P2P_AUTH",e[e.DATA_P2P_RANGE_ERROR=4106]="DATA_P2P_RANGE_ERROR",e[e.DATA_P2P_DATA_NULL=4107]="DATA_P2P_DATA_NULL",e[e.DATA_HLS_DISPATCH_TIMEOUT=4200]="DATA_HLS_DISPATCH_TIMEOUT",e[e.DATA_HLS_DISPATCH_ERROR=4201]="DATA_HLS_DISPATCH_ERROR",e[e.DATA_HLS_CDN_TIMEOUT=4202]="DATA_HLS_CDN_TIMEOUT",e[e.DATA_HLS_CDN_ERROR=4203]="DATA_HLS_CDN_ERROR",e[e.DATA_AUTH_Error=4204]="DATA_AUTH_Error",e[e.DATA_FLV_TIMEOUT=4301]="DATA_FLV_TIMEOUT",e[e.DATA_FLV_ERROR=4302]="DATA_FLV_ERROR",e[e.DATA_FLV_DISPATCH_ERROR=4303]="DATA_FLV_DISPATCH_ERROR",e[e.DATA_DASH_TIMEOUT=4401]="DATA_DASH_TIMEOUT",e[e.DATA_DASH_ERROR=4402]="DATA_DASH_ERROR",e[e.DATA_DASH_DISPATCH_ERROR=4403]="DATA_DASH_DISPATCH_ERROR",e[e.DATA_DASH_RANGE_ERROR=4404]="DATA_DASH_RANGE_ERROR",e[e.DATA_AUDIO_LOADED_ERROR=4601]="DATA_AUDIO_LOADED_ERROR",e[e.DATA_AUDIO_LOADED_TIMEOUT=4602]="DATA_AUDIO_LOADED_TIMEOUT",e[e.MUX_UNKNOWN_FAILED=5e3]="MUX_UNKNOWN_FAILED",e[e.MUX_WORKER_INITIALIZE=5001]="MUX_WORKER_INITIALIZE",e[e.MUX_WORKER_INTERNAL_EXCEPTION=5002]="MUX_WORKER_INTERNAL_EXCEPTION",e[e.MUX_WORKER_MESSAGE_EXCEPTION=5003]="MUX_WORKER_MESSAGE_EXCEPTION",e[e.MUX_TS_SYNC_BYTE=5100]="MUX_TS_SYNC_BYTE",e[e.MUX_FLV_TAG_INVALID=5200]="MUX_FLV_TAG_INVALID",e[e.MUX_FLV_HEAD_SIGNATURE=5201]="MUX_FLV_HEAD_SIGNATURE",e[e.MUX_FLV_NOT_EXPECTED_ADJACENT_DATA=5202]="MUX_FLV_NOT_EXPECTED_ADJACENT_DATA",e[e.MUX_M4S_FTYP_INVALID=5300]="MUX_M4S_FTYP_INVALID",e[e.DRM_NO_RECOGNIZED_KEY_SYSTEMS=6e3]="DRM_NO_RECOGNIZED_KEY_SYSTEMS",e[e.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE=6001]="DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE",e[e.DRM_FAILED_TO_CREATE_CDM=6002]="DRM_FAILED_TO_CREATE_CDM",e[e.DRM_FAILED_TO_ATTACH_TO_VIDEO=6003]="DRM_FAILED_TO_ATTACH_TO_VIDEO",e[e.DRM_INVALID_SERVER_CERTIFICATE=6004]="DRM_INVALID_SERVER_CERTIFICATE",e[e.DRM_FAILED_TO_CREATE_SESSION=6005]="DRM_FAILED_TO_CREATE_SESSION",e[e.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST=6006]="DRM_FAILED_TO_GENERATE_LICENSE_REQUEST",e[e.DRM_LICENSE_REQUEST_ERROR=6007]="DRM_LICENSE_REQUEST_ERROR",e[e.DRM_LICENSE_REQUEST_TIMEOUT=6008]="DRM_LICENSE_REQUEST_TIMEOUT",e[e.DRM_NO_LICENSE_SERVER_RESPONSE=6009]="DRM_NO_LICENSE_SERVER_RESPONSE",e[e.DRM_LICENSE_RESPONSE_REJECTED=6010]="DRM_LICENSE_RESPONSE_REJECTED",e[e.DRM_NO_LICENSE_SERVER_GIVEN=6012]="DRM_NO_LICENSE_SERVER_GIVEN",e[e.DRM_NO_RECOGNIZED_ERROR=6013]="DRM_NO_RECOGNIZED_ERROR",e[e.DRM_SERVER_REJECT_BY_LICENSE_SDK=6015]="DRM_SERVER_REJECT_BY_LICENSE_SDK"}(r||(r={}))},,function(e,t,n){var r=n(47),i=n(50),a=n(156),o=n(188).UNSUPPORTED_Y;r&&("g"!=/./g.flags||o)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:a})},,,function(e,t,n){var r=n(24),i=n(135),a=Function.call;e.exports=function(e,t,n){return i(a,r[e].prototype[t],n)}},function(e,t,n){var r=n(31);t.f=r},function(e,t,n){var r=n(206),i=n(76),a=n(388),o=n(50).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:a.f(e)})}},function(e,t,n){"use strict";var r=n(22),i=n(24),a=n(142),o=n(85),s=n(391),c=n(260),u=n(184),d=n(39),l=n(23),f=n(230),h=n(155),p=n(180);e.exports=function(e,t,n){var _=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),g=_?"set":"add",y=i[e],m=y&&y.prototype,b=y,k={},x=function(e){var t=m[e];o(m,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!d(e)?undefined:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(a(e,"function"!=typeof y||!(v||m.forEach&&!l((function(){(new y).entries().next()})))))b=n.getConstructor(t,e,_,g),s.REQUIRED=!0;else if(a(e,!0)){var S=new b,T=S[g](v?{}:-0,1)!=S,P=l((function(){S.has(1)})),I=f((function(e){new y(e)})),w=!v&&l((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));I||((b=t((function(t,n){u(t,b,e);var r=p(new y,t,b);return n!=undefined&&c(n,r[g],{that:r,AS_ENTRIES:_}),r}))).prototype=m,m.constructor=b),(P||w)&&(x("delete"),x("has"),_&&x("get")),(w||T)&&x(g),v&&m.clear&&delete m.clear}return k[e]=b,r({global:!0,forced:b!=y},k),h(b,e),v||n.setStrong(b,e,_),b}},function(e,t,n){var r=n(148),i=n(39),a=n(76),o=n(50).f,s=n(172),c=n(392),u=s("meta"),d=0,l=Object.isExtensible||function(){return!0},f=function(e){o(e,u,{value:{objectID:"O"+ ++d,weakData:{}}})},h=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,u)){if(!l(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!a(e,u)){if(!l(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return c&&h.REQUIRED&&l(e)&&!a(e,u)&&f(e),e}};r[u]=!0},function(e,t,n){var r=n(23);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(50).f,i=n(122),a=n(217),o=n(135),s=n(184),c=n(260),u=n(236),d=n(181),l=n(47),f=n(391).fastKey,h=n(109),p=h.set,_=h.getterFor;e.exports={getConstructor:function(e,t,n,u){var d=e((function(e,r){s(e,d,t),p(e,{type:t,index:i(null),first:undefined,last:undefined,size:0}),l||(e.size=0),r!=undefined&&c(r,e[u],{that:e,AS_ENTRIES:n})})),h=_(t),v=function(e,t,n){var r,i,a=h(e),o=g(e,t);return o?o.value=n:(a.last=o={index:i=f(t,!0),key:t,value:n,previous:r=a.last,next:undefined,removed:!1},a.first||(a.first=o),r&&(r.next=o),l?a.size++:e.size++,"F"!==i&&(a.index[i]=o)),e},g=function(e,t){var n,r=h(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return a(d.prototype,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=undefined),delete t[n.index],n=n.next;e.first=e.last=undefined,l?e.size=0:this.size=0},"delete":function(e){var t=this,n=h(t),r=g(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),l?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=o(e,arguments.length>1?arguments[1]:undefined,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),a(d.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),l&&r(d.prototype,"size",{get:function(){return h(this).size}}),d},setStrong:function(e,t,n){var r=t+" Iterator",i=_(t),a=_(r);u(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:undefined})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=undefined,{value:undefined,done:!0})}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(19),n(139);var r={create:function(){return Math.ceil(1e16*Math.random()+(new Date).getTime()).toString(32)}}},function(e,t,n){"use strict";var r=n(390),i=n(393);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:undefined)}}),i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(4),c=n.n(s),u=n(5),d=n.n(u),l=n(1),f=n.n(l),h=(n(27),n(94));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d()(this,n)}}var _=function(e){c()(n,e);var t=p(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))}}]),n}(h.EventEmitter)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(32),i=n.n(r);n(226),n(563),n(169),n(26),n(17),n(10),n(19),n(139),n(146),n(110),n(177),n(271),n(27),n(127),n(48),n(151),n(45),n(112),n(245),n(97),n(29),n(92);function a(e){var t={};function n(r){try{if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};e[r].call(i.exports,i,i.exports,n),i.l=!0}catch(a){throw"__webpack_require__ failed ".concat(a.stack||a.message)}return i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i()(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r["default"]||r}var o="[\\.|\\-|\\+|\\w|/|@]+",s="\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function c(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(e,t,r){var i={};i[r]=[];var a=t.toString(),u=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return i;for(var d,l=u[1],f=new RegExp("(\\\\n|\\W)"+c(l)+s,"g");d=f.exec(a);)"dll-reference"!==d[3]&&i[r].push(d[3]);for(f=new RegExp("\\("+c(l)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+s,"g");d=f.exec(a);)e[d[2]]||(i[r].push(d[1]),e[d[2]]=n(d[1]).m),i[d[2]]=i[d[2]]||[],i[d[2]].push(d[4]);for(var h,p=Object.keys(i),_=0;_<p.length;_++)for(var v=0;v<i[p[_]].length;v++)h=i[p[_]][v],isNaN(1*h)||(i[p[_]][v]=1*i[p[_]][v]);return i}function d(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function l(e,t){t=t||{};var r={main:n.m},i=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};d(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],c=n[s].pop();if(i[s]=i[s]||{},!i[s][c]&&e[s][c]){i[s][c]=!0,r[s]=r[s]||[],r[s].push(c);for(var l=u(e,e[s][c],s),f=Object.keys(l),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(l[f[h]])}}return r}(r,e),o="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"}),c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),l=new window.Worker(c,t.worker||{});return l.objectURL=c,l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(51),i=n(273),a=n(531);function o(e,t,n){var o,s,c=e;if(!(t>i.a.length-1))return a.a.FIREFOX?t>=6?(e=5,s=new Array(4),o=t-3):(e=2,s=new Array(2),o=t):a.b.android?(e=2,s=new Array(2),o=t):(e=5,s=new Array(4),t>=6?o=t-3:(1===n&&(e=2,s=new Array(2)),o=t)),s[0]=e<<3,s[0]|=(14&t)>>1,s[1]|=(1&t)<<7,s[1]|=n<<3,5===e&&(s[1]|=(14&o)>>1,s[2]=(1&o)<<7,s[2]|=8,s[3]=0),{config:s,sampleRate:i.a[t],channelCount:n,codec:"mp4a.40."+e,realCodec:"mp4a.40."+c};r.a.error("invalid sampling index:".concat(t))}},function(e,t,n){var r=n(22),i=n(80);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(10),n(19),n(139);function r(e){for(var t="avc1.",n=[e.profile_idc,e.profile_compatibility,e.level_idc],r=0;r<n.length;r++){var i=n[r].toString(16);i.length<2&&(i="0"+i),t+=i}return{codec:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(26),n(17),n(10),n(19),n(139),n(45),n(112),n(338),n(27);function r(e){var t,n,r,i=e.profile_compatibility,a=e.level_idc,o=e.profile_space,s=e.profile_idc,c=e.tier_flag,u=e.constraint_indicator_flags,d="";switch(o){case 0:d=""+s;break;case 1:d="A"+s;break;case 2:d+="B"+s;break;case 3:d+="C"+s}t=i.toString(16).replace(/0/gi,"").toUpperCase(),n=(0===c?"L":"H")+a;for(var l,f=[],h=u.length-1,p=!0;h>=0;h--)l=u[h],p&&0===l||(p=!1,f.push(l));return r=f.reverse().map((function(e){return e.toString(16).toUpperCase()})).join("."),{codec:"hvc1.".concat(d,".").concat(t,".").concat(n,".").concat(r)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46);function r(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(37),n(90);function r(){for(var e,t=[],n=0;n<arguments.length;n++){e=n<0||arguments.length<=n?undefined:arguments[n];for(var r,i=0;i<e.length;i++){r=e[i];var a=t.indexOf(r);-1===a?t.push(r):t.splice(a,1)}}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(270),function(){function e(t){i()(this,e),this._id=null,this._frequency=Infinity,this._callback=function(){t()}}return o()(e,[{key:"running",get:function(){return null!==this._id}},{key:"cancel",value:function(){this.running&&(clearTimeout(this._id),this._id=null)}},{key:"schedule",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e),this._id=setTimeout((function(){t._callback()}),this._frequency)}},{key:"scheduleRepeated",value:function(e){var t=this;this.cancel(),this.adjustFrequency(e);this._id=setTimeout((function n(){t._callback(),t.running&&(t._id=setTimeout(n,t._frequency))}),this._frequency)}},{key:"adjustFrequency",value:function(e){this._frequency=1e3*e}}]),e}())},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ERROR="ERROR",e.TIMEOUT="TIMEOUT",e.ABORT="ABORT"}(r||(r={}))},function(e){e.exports=JSON.parse('{"a":"1.0.21"}')},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r,i=n(22),a=n(111).f,o=n(44),s=n(369),c=n(89),u=n(370),d=n(136),l="".endsWith,f=Math.min,h=u("endsWith");i({target:"String",proto:!0,forced:!!(d||h||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!h},{endsWith:function(e){var t=String(c(this));s(e);var n=arguments.length>1?arguments[1]:undefined,r=o(t.length),i=n===undefined?r:f(o(n),r),a=String(e);return l?l.call(t,a,i):t.slice(i-a.length,i)===a}})},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=new(n(532).a);function i(e){r.copyServices(e.cloneServices())}},function(e){e.exports=JSON.parse('{"name":"@mux/m2ts-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@mux/flv-mp4","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@loader/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(77),core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(53),core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_typed_array_copy_within_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(54),core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_typed_array_every_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(55),core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_typed_array_fill_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(56),core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_typed_array_filter_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(57),core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_typed_array_find_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(58),core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_typed_array_find_index_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(59),core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_typed_array_for_each_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(60),core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_typed_array_includes_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(61),core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_typed_array_index_of_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(62),core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_typed_array_iterator_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(63),core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_typed_array_join_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(64),core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_typed_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(65),core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_typed_array_map_js__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(66),core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_js__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(67),core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_typed_array_reduce_right_js__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(68),core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_typed_array_reverse_js__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(69),core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_typed_array_set_js__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(70),core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_typed_array_slice_js__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(71),core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_typed_array_some_js__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(72),core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_typed_array_sort_js__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(73),core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_typed_array_subarray_js__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(74),core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string_js__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(75),core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_typed_array_to_string_js__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(29),core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(46),core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice_js__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(146),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(26),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_33__),_utils_Log__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(12),_RunTime__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(16),_PlayerState__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(91),_Config__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(13),_enum_EventType__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(95),_utils_Event__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(79),_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(11),mozResponseType="moz-chunked-arraybuffer",isSupportMoz=null,xhrStatusProgress="",XHRLoader=function(){function e(t,n){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,e),this.videoType=t,this.eventID=n}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(e,[{key:"load",value:function(e,t){if(this.tast=e,this.dataLen=0,this.loadType=t,this.loader=new XMLHttpRequest,null===isSupportMoz&&/firefox/gi.test(navigator.userAgent.toLowerCase())){try{this.loader.responseType=mozResponseType}catch(n){}isSupportMoz=this.loader.responseType===mozResponseType}if(isSupportMoz?this.loader.responseType=mozResponseType:(this.loader.responseType="arraybuffer",isSupportMoz=!1),this.taskList=[{start:this.tast.begin,end:this.tast.end}],isSupportMoz||(this.taskList=checkTask(this.tast.begin,this.tast.end,Math.min(Math.max(1024*this.tast.rate,32768),1048576),this.tast.segment.fileType)),0===this.taskList.length)return this.running=!1,void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done");_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"open"),this.check()}},{key:"close",value:function(){this.running=!1,this.loader&&this.loader.abort(),this.loader=null,this.cache&&delete this.cache}},{key:"loadStatus",value:function(e,t){if("Error"!==e&&t&&(this.tast.range={begin:this.range.start+this.base,end:this.range.start+this.base+t.byteLength},this.tast.data=t),"OK"===e){if(-1===this.range.end&&(this.range.end=this.range.start+this.base+t.byteLength),this.videoType===_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.TS);else if(this.videoType!==_enum_VideoType__WEBPACK_IMPORTED_MODULE_40__.a.FTS&&t.byteLength>this.range.end-this.range.start)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("data is not right , need range "+this.range.start+"-"+this.range.end+" dataLen "+t.byteLength),void _utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",_PlayerState__WEBPACK_IMPORTED_MODULE_36__.a.LoaderState_dataRangeError);this.dataLen+=t.byteLength,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"progress"),this.base+=t.byteLength}else"done"===e?this.check():this.running&&(this.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"error",t))}},{key:"check",value:function(){if(this.taskList.length>0){this.range=this.taskList.shift();var e=this.tast.url;if(!isSupportMoz&&e.indexOf("start=")>0&&(e=changeURLArg(this.tast.url,this.range)),-1!==e.indexOf("start=")&&-1!==e.indexOf("end=")||(-1===e.indexOf("?")?-1!==this.range.end&&(e+="?start="+this.range.start+"&end="+this.range.end):-1!==this.range.end&&(e+="&start="+this.range.start+"&end="+this.range.end)),-1===e.indexOf("stauto")&&(e+="&stauto="+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.absStatus),-1===e.indexOf("ori")&&(e+="&ori=pcw"+_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.platform),-1===e.indexOf("num"))e+="&num="+Date.now().toString();_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("[XHR Loader start ] "+this.range.start+" - "+this.range.end+" , "+e),this.running=!0,this.base=0,this.xhrLoad(e)}else this.running=!1,_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+this.eventID,"done")}},{key:"xhrLoad",value:function(e){this.loader||(this.loader=new XMLHttpRequest,this.loader.responseType=isSupportMoz?mozResponseType:"arraybuffer");var t=0;for(this.cache=null;null===this.cache;)try{t++,this.cache=new Uint8Array(1048576)}catch(i){if(t>_Config__WEBPACK_IMPORTED_MODULE_37__.i)return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch Uint8Array err : "+i.message),void r("tryCatchError")}this.readPos=0,this.dataPos=0;var n=this;xhrStatusProgress="",this.loader.onreadystatechange=function(){xhrStatusProgress+="readyState:"+n.loader.readyState+", status:"+n.loader.status+","},this.loader.onloadend=function(e){_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader onloadend ,"+isSupportMoz);var t=e.currentTarget,r=t.status,a=t.response;if(r>=200&&r<300){if(a){var o=new Uint8Array(a);if(o&&o.byteLength>0){if(n.dataPos+o.byteLength>n.cache.byteLength){for(var s=null,c=0;null===s;)try{c++,s=new Uint8Array(n.dataPos+o.byteLength)}catch(i){if(c>_Config__WEBPACK_IMPORTED_MODULE_37__.i){if(_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.error("FetchLoader catch newUint8Array err : "+i.message),null===n.loader)return;n.loadStatus("Error","statusErr-"+r)}}var u=n.cache.subarray(n.readPos);s.set(u,0),delete n.cache,n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=s}n.cache.set(o,n.dataPos),n.dataPos+=o.byteLength}}if(n.readPos<n.dataPos&&n.loadStatus("OK",n.cache.subarray(n.readPos,n.dataPos)),null===n.loader)return;n.close(),n.loadStatus("done")}else{if(null===n.loader)return;_utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.warn("XHR Loader err , status progress, "+xhrStatusProgress),n.loadStatus("Error","statusErr-"+r)}},this.loader.onprogress=function(e){if(isSupportMoz){var t=e.target?e.target.response:null;if(t){var r=new Uint8Array(t);if(n.dataPos+r.byteLength>n.cache.byteLength){var i=new Uint8Array(n.dataPos+r.byteLength),a=n.cache.subarray(n.readPos);i.set(a,0),n.dataPos=n.dataPos-n.readPos,n.readPos=0,n.cache=i}n.cache.set(r,n.dataPos),n.dataPos+=r.byteLength}if(n.dataPos-n.readPos>=8192){var o=8192*Math.floor((n.dataPos-n.readPos)/8192);n.loadStatus("OK",n.cache.subarray(n.readPos,n.readPos+o)),n.readPos+=o}}};try{this.loader.open("GET",e,!0),this.loader.withCredentials=!1,this.loader.send()}catch(a){r("tryCatchError")}function r(e){null!==n.loader&&(n.close(),_utils_Event__WEBPACK_IMPORTED_MODULE_39__.a.getEvent().emit(_enum_EventType__WEBPACK_IMPORTED_MODULE_38__.a.LoadStatus+n.eventID,"Error",e))}}}]),e}();function checkTask(e,t,n,r){var i,a=_RunTime__WEBPACK_IMPORTED_MODULE_35__.a.getBufferFunc(),o=0;o="m4s"===r?Math.min(a.buffered.video.len,a.buffered.audio.len):a.len,o*=1e3;for(var s=[],c=0;e<t;)o<1e3?(c=n,o+=1e3):o<2e3?(c=2*n,o+=2e3):o<3e3?(c=3*n,o+=3e3):o<4e3?(c=4*n,o+=4e3):o<5e3?(c=5*n,o+=5e3):o<6e3?(c=6*n,o+=6e3):o<7e3?(c=7*n,o+=7e3):o<8e3?(c=8*n,o+=8e3):(c=10*n,o+=1e4),e+c<t?(t-(i=e+c)<c/2&&(i=t),s.push({start:e,end:i}),e=i):(i=t,s.push({start:e,end:i}),e=i);return _utils_Log__WEBPACK_IMPORTED_MODULE_34__.a.info("XHR Loader check list "+JSON.stringify(s)),s}function changeURLArg(url,range){var pattern1="start=([^&]*)",pattern2="end=([^&]*)",replaceText1="start="+range.start,replaceText2="end="+range.end;if(url.match(pattern1)||url.match(pattern2)){var tmp="/(start=)([^&]*)/gi";url=url.replace(eval(tmp),replaceText1);var tmp2="/(end=)([^&]*)/gi";return url=url.replace(eval(tmp2),replaceText2),url}}__webpack_exports__.a=XHRLoader},function(e){e.exports=JSON.parse('{"name":"@loader/p2p","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/dash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/flv","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/hls","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@manifest/jdash","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(e){e.exports=JSON.parse('{"name":"@renderer/mse","version":"1.0.0","description":"","author":"xubaoyu@qiyi.com","dependencies":{}}')},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return XFactorManager}));var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(101),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(126),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25),core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(48),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(27),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(168),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(112),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(43),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__),XFactorManager=function(){function XFactorManager(e){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,XFactorManager),this.globalVarList=e||[]}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(XFactorManager,[{key:"clear",value:function(){this.globalVarList=[]}},{key:"reset",value:function(e){this.globalVarList=e}},{key:"setXFactor",value:function(e,t){this.globalVarList.find((function(t){return t.name===e})).initValue=t}},{key:"getXFactor",value:function(e){return this.globalVarList.find((function(t){return t.name===e}))}},{key:"getXFactorValue",value:function(){return this.getXFactor()?parseInt(this.getXFactor().initValue,10):0}},{key:"isShowInteractElement",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"isShowInteract",value:function(e){var t=this;return!0===(e||[]).some((function(e){return t._expressParse(e)}))?1:0}},{key:"getInteractActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"getEndActionSwitchInfo",value:function(e){var t=this;return(e||[]).find((function(e){return t._expressParse(e)}))}},{key:"doAlgorithm",value:function doAlgorithm(algorithmList){var self=this;if(algorithmList&&0!=algorithmList.length)return algorithmList.forEach((function(exp){var pattern=/^([A-Za-z0-9]+)(=)([A-Za-z0-9]+)(\+|-)(\d*)/,_pattern$exec=pattern.exec(exp),_pattern$exec2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec,6),v1=_pattern$exec2[1],v2=_pattern$exec2[3],e=_pattern$exec2[4],n=_pattern$exec2[5],r2=self.getXFactorValue(v2),r1=eval("".concat(r2).concat(e).concat(parseInt(n,10)));self.setXFactor(v1,r1>0?r1:0)})),self.globalVarList}},{key:"_expressParse",value:function _expressParse(item){var self=this,express=item.express,expressType=item.expressType,expressPara=item.expressPara,expressParaValue=self.getXFactorValue(expressPara.trim()),__eval=function __eval(str){var pattern=/^([A-Za-z0-9]+)([><!]=?|=)(\d*)/,_pattern$exec3=pattern.exec(str),_pattern$exec4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_pattern$exec3,4),k=_pattern$exec4[1],s=_pattern$exec4[2],v=_pattern$exec4[3],x=self.getXFactorValue(k);return!0===eval("".concat(x).concat(s).concat(parseInt(v,10)))},__mathParse=function(e,t,n){var r;return(r=Math[e]).call.apply(r,[null].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(t.split(",").map((function(e){return e.trim()})).map((function(e){return self.getXFactorValue(e)})))))==n};switch(expressType){case"min":case"max":return __mathParse.apply(void 0,[expressType].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(express),[expressParaValue]));case"condition":return express.split("&&").map(__eval).every((function(e){return!0===e}))}}}]),XFactorManager}()},function(e){e.exports=JSON.parse('{"name":"@cupid/mars","version":"7.2.1","description":"ad sdk for PCW","directories":{"example":"examples"},"scripts":{"clean":"rm -rf ../dist","dev":"webpack --inline --progress --mode development --config webpack.config.js --colors --watch","eslint":"./node_modules/.bin/eslint","lint":"npm run eslint core && npm run eslint view && echo \'perfect!\'","build":"yarn && npm run clean && npm run lint && webpack"},"author":"heke","devDependencies":{"@babel/core":"^7.4.3","@babel/plugin-transform-modules-commonjs":"^7.1.0","@babel/preset-env":"^7.4.3","babel-eslint":"^10.0.2","babel-loader":"^8.0.5","css-loader":"^2.1.1","eslint":"^6.0.1","less":"^3.9.0","less-loader":"^5.0.0","style-loader":"^0.23.1","webpack":"^4.29.6","webpack-cli":"^3.3.0","yarn":"^1.15.2"},"dependencies":{"html-loader":"^0.5.5"}}')},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(42),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(1),p=n.n(h),_=(n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(90),n(152)),v=n(51),g=n(228),y=n(201),m=n(251),b=n(101),k=n.n(b),x=n(38),S=n.n(x),T=(n(169),n(26),n(17),n(245),n(97),n(92),n(127),n(48),n(27),n(115),n(267),n(329)),P=n(202),I=n(397),w=n(133),A=n(614),E=n(410),D=function(){function e(){i()(this,e),this.msg=null,this.repostCount=0}return o()(e,[{key:"clear",value:function(){this.msg=null,this.repostCount=0}}]),e}();function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var O=function(e){d()(n,e);var t=q(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this))._eventManager=new T.a,r._error=null,r._mux=null,r._w=null,r._idle=!0,r._dryRun=!0,r._workerSignal=new D,r._args={transmuxer:e,options:a},Object(P.a)(a,{debug:!1,enableWorker:!0},!1),r._onWorkerMessage=r._onWorkerMessage.bind(S()(r)),r._onWorkerError=r._onWorkerError.bind(S()(r)),r._initialize(),r}return o()(n,[{key:"error",get:function(){return this._error}},{key:"idle",get:function(){return this._idle},set:function(e){this._idle=e,e&&this.emit("I")}},{key:"_initialize",value:function(){var e,t,n=this,r=this._args,i=r.transmuxer,a=r.options,o=function(){e=n._mux=E.a.resolve(i)};if(this.idle=!1,a.enableWorker&&"undefined"!=typeof window.Worker)try{var s="kiwi_"+i.toLowerCase().replace(/-/gi,"_"),c=performance.now();v.a.log("spawn a worker thread ".concat(s)),(t=this._w=Object(I.a)(564,{worker:{name:s}})).__name__=s,t.initAt=c,t.addEventListener("message",this._onWorkerMessage),t.addEventListener("error",this._onWorkerError),t.addEventListener("messageerror",this._onWorkerMessageError),v.a.log("worker options ".concat(JSON.stringify(a))),this._postMessage(t,"__init__",{transmuxer:i,options:a})}catch(u){this._w&&URL.revokeObjectURL(this._w.objectURL),delete this._w,v.a.error("error while initializing mux-worker, fallback on mux-inline"),o()}else o();e&&([["__idle__",function(){n.idle=!0}],["error",function(e,t,r){return n._emitError(e,t,r)}],["demux_info",function(e){return n._emitDemuxInfo(e)}],["demux_data",function(e){return n._emitDemuxData(e)}],["remux_data",function(e){return n._emitRemuxData(e)}],["done",function(){return n._emitDone()}]].forEach((function(t){n._eventManager.on(e,t[0],t[1])})),this.idle=!0)}},{key:"_postMessage",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];v.a.log("mux send msg to ".concat(e.__name__," worker: ").concat(t)),this._workerSignal.msg=[e,t,n,r],e.postMessage({cmd:t,msg:n},r)}},{key:"_terminateWorker",value:function(){var e=this._w;e.removeEventListener("message",this._onWorkerMessage),e.removeEventListener("error",this._onWorkerError),e.removeEventListener("messageerror",this._onWorkerMessageError),e.terminate(),v.a.log("terminate a ".concat(e.__name__," worker thread"))}},{key:"push",value:function(e){var t,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this._w;if(Object(_.a)(e)||Object(_.k)(e))if(t=Object(_.a)(t)?new Uint8Array(t):e,v.a.log("mux push buf ".concat(Object(A.a)(t.byteLength),", stubTime ").concat(n.stubTime)),this._dryRun=!1,this.idle=!1,this.emit("P"),r){var i=[];this._postMessage(r,"push",{buf:t,conf:n},i)}else this._mux.push(t,n)}},{key:"reset",value:function(){if(this._error=null,!this._dryRun){var e=this._w;v.a.log("mux reset ".concat(e?"worker":"inline")),e?(this._workerSignal.clear(),this._postMessage(e,"reset")):this._mux.reset()}}},{key:"destroy",value:function(){this._w?(this._workerSignal.clear(),this._terminateWorker()):(this._mux.destroy(),this._eventManager.destroy()),this._error=null}},{key:"_onWorkerMessage",value:function(e){var t=e.data,n=e.target;if(null===t)this._handleACK(null);else{var r=t.cmd,i=t.msg;switch(r){case"__ACK__":this._handleACK(i);break;case"__init__":v.a.log("worker ".concat(n.__name__," initialized, cost ").concat((performance.now()-n.initAt).toFixed(3),"ms")),URL.revokeObjectURL(this._w.objectURL);break;case"__idle__":this.idle=!0;break;case"__log__":this._emitLog(i.type,i.message);break;case"error":this._emitError(i.code,i.message,i.data);break;case"demux_info":this._emitDemuxInfo(i);break;case"demux_data":this._emitDemuxData(i);break;case"remux_data":this._emitRemuxData(i);break;case"done":this._emitDone()}}}},{key:"_onWorkerError",value:function(e){var t=e.target||e.srcElement,n=t?t.__name__:"",r="worker ".concat(n," error, ").concat(e.message);v.a.warn(r),this._emitError(0,r)}},{key:"_onWorkerMessageError",value:function(e){var t="Worker met error while receiving message, ".concat(e);v.a.warn(t),this._emitError(1,t)}},{key:"_handleACK",value:function(e){if(e)this._workerSignal.clear();else if(v.a.warn("master thread received worker ack signal: ".concat(e)),this._workerSignal.msg)if(this._workerSignal.repostCount<10)this._workerSignal.repostCount++,v.a.warn("Repost the cache signal to worker at ".concat(this._workerSignal.repostCount," time")),this._postMessage.apply(this,k()(this._workerSignal.msg));else{var t="Worker ack message beyond repost count";v.a.warn(t),this._emitError(1,t)}}},{key:"_emitLog",value:function(e,t){v.a[e]&&v.a[e]("w: ".concat(t))}},{key:"_emitError",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this._error={code:e,message:t,data:n},this.emit("E",this._error)}},{key:"_emitDemuxInfo",value:function(e){this.emit("DI",e)}},{key:"_emitRemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("D",e)}},{key:"_emitDemuxData",value:function(e){e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),this.emit("DD",e)}},{key:"_emitDone",value:function(e){this.emit("O",e)}}]),n}(w.a);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var L=function(e){d()(n,e);var t=R(n);function n(e){var r;i()(this,n),(r=t.call(this,e)).$ARTEFACT_ACTION=y.a.DEPOSIT_MUX,r.$videoMediaStartTimes_=[];var a=e.transmuxer,o=e.enableWorker;return r.$transmuxer=new O(a,{enableWorker:"boolean"!=typeof o||o}),r.$eventManager.on(r.$transmuxer,"P",(function(){r.$noticeMuxAspect("swallow")})).on(r.$transmuxer,"D",(function(){r.$noticeMuxAspect("spit")})),r}return o()(n,[{key:"idle",get:function(){return this.$transmuxer.idle}},{key:"$canConsumeLoaderData",value:function(){return!this.$error&&this.$transmuxer.idle&&!this.$stream.restrictor.consumable}},{key:"$constraintPushData_",value:function(e){var t=null;return Object(_.a)(e)||Object(_.k)(e)?t=Object(_.a)(e)?new Uint8Array(e):e:t}},{key:"$drainBuffer",value:function(e){v.a.log("mux clear cached data");var t=this.$stream,r=this.$transmuxer,i=this.$videoMediaStartTimes_,a=t.restrictor,o=a.videoMediaSegments,s=a.audioMediaSegments;o.splice(0,o.length),s.splice(0,s.length),i.splice(0,i.length),r.reset(),e.keepMuxMeta||(this.$currentDataMeta=null),this.$loaderArtifact=null,this.$audioSegmentAlignPTS_=undefined,c()(p()(n.prototype),"$drainBuffer",this).call(this,e)}},{key:"$checkMuxMetaMatched",value:function(e,t){var n=!1;return t&&e?n=e.uid===t.uid:t===undefined&&e===undefined&&(n=!0),n}},{key:"reset",value:function(){}},{key:"$noticeMuxAspect",value:function(e){this.$krt.ctx.emit(g.a.STATE_CHANGE,{state:"mux"+e})}}]),n}(m.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));n(17),n(37),n(43),n(25);var r={mac:!1,iphone:!1,android:!1},i={version:undefined,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1},a=navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(a)||/(opr)[/]([\w.]+)/.exec(a)||/(chrome)[ /]([\w.]+)/.exec(a)||/(firefox)[ /]([\w.]+)/.exec(a)||/(iemobile)[/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(a)||/(webkit)[ /]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],s=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[],c={version:undefined},u={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",versionNumber:o[4]||o[2]||"0",platform:s[0]||""};if(u.browser){c[u.browser]=!0;var d=u.versionNumber.split(".");c.version={major:parseInt(u.versionNumber,10),string:u.version},d.length>1&&(c.version.minor=parseInt(d[1],10)),d.length>2&&(c.version.build=parseInt(d[2],10))}i.version=c.version,i.CHROME=!!c.chrome,i.SAFARI=!!c.safari&&!i.CHROME,i.FIREFOX=!!c.firefox,i.IE11=/rv:11/.test(a),i.IE=!!c.msie||i.IE11,i.EDGE=!!c.edge,i.WECHAT=/(wechat)|(micromessenger)/.test(a),r.mac=!!u.platform.mac,r.iphone=!!u.platform.iphone,r.android=!!u.platform.android},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(82),n(10),n(194),n(97),n(185),n(198),n(199),n(29),n(92),n(147);var r=n(342),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s),u=(n(204),n(37),n(202)),d=n(152),l=n(153);function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){function e(){o()(this,e),this.services={}}return c()(e,[{key:"cloneServices",value:function(){return Object(u.a)({},this.services)}},{key:"copyServices",value:function(e){this.services=Object(u.a)({},e)}},{key:"register",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];if(Object(d.h)(e)){var i=e;if(Object(l.e)(this.services,i.name))return void 0;this.services[i.name]={name:i.name,className:i["class"],args:i.args,shared:i.shared,compiled:null}}else{if(Object(l.e)(this.services,e))throw new Error("Service '".concat(e,"' already exists"));if(!Object(d.d)(t))throw new Error("Parameter 'className' should be a class constructor");this.services[e]={name:e,className:t,args:n,shared:r,compiled:null}}}},{key:"registerMulti",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.register(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"remove",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");delete this.services[e]}},{key:"has",value:function(e){return!("undefined"==typeof this.services[e])}},{key:"resolve",value:function(e){if(!this.has(e))throw new Error("Service '"+e+"' not found");var t=this.services[e];if(t.shared&&null!==t.compiled)return t.compiled;var n=[];for(var r in t.args){var a=t.args[r],o=void 0;if("string"==typeof a)if(0===a.indexOf(":")){var s=a.substring(1);o=this.resolve(s)}else o=a;else o=a;n.push(o)}var c=i()(t.className,n);return t.shared&&(t.compiled=c),c}}]),e}()},function(e,t,n){n(275)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(275)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(554);e.exports=r},function(e,t,n){n(17),n(43);var r=n(387);e.exports=r("String","split")},function(e,t,n){var r=n(556);e.exports=r},function(e,t,n){n(17),n(26);var r=n(387);e.exports=r("String","replace")},function(e,t,n){var r=n(558);e.exports=r},function(e,t,n){n(9);var r=n(206);e.exports=r.Reflect.construct},function(e,t,n){var r=n(102),i=n(129).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(22),i=n(47),a=n(211),o=n(102),s=n(111),c=n(144);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),i=s.f,u=a(r),d={},l=0;u.length>l;)(n=i(r,t=u[l++]))!==undefined&&c(d,t,n);return d}})},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports["default"]=e.exports,e.exports.__esModule=!0},function(e,t,n){n(22)({target:"Object",stat:!0,sham:!n(47)},{create:n(122)})},function(e,t,n){"use strict";n.r(t);n(267),n(46),n(10),n(147),n(127),n(48),n(565);var r=n(329),i=n(51),a=n(343);t["default"]=function(e){var t,n=new r.a;function o(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];e.postMessage({cmd:t,msg:n},r)}e.addEventListener("message",(function(e){if(null===e.data)o("__ACK__",!1);else{var r=e.data,s=r.cmd,c=r.msg;switch(o("__ACK__",!0),s){case"__init__":try{var u=c.options,d=c.transmuxer;u.debug&&(i.a.enable=!0),t=a.a.resolve(d),n.on(i.a,i.a.MSG_NAME,(function(e,t){return o("__log__",{type:e,message:t})})).on(t,"__idle__",(function(){return o("__idle__")})).on(t,"error",(function(e,t,n){return o("error",{code:e,message:t,data:n})})).on(t,"demux_info",(function(e){return o("demux_info",e)})).on(t,"demux_data",(function(e){var t=[];e.data instanceof ArrayBuffer&&t.push(e.data),o("demux_data",e,t)})).on(t,"remux_data",(function(e){var t=[],n=e.data;Array.isArray(n)&&n.forEach((function(e){e instanceof ArrayBuffer&&t.push(e)})),o("remux_data",e,t)})).on(t,"done",(function(){return o("done")})),o("__init__"),o("__idle__")}catch(e){throw"worker __init__ fail ".concat(e.stack||e.message)}break;case"push":t.push(c.buf,c.conf);break;case"reset":t&&t.reset()}}}))}},function(e,t,n){var r=n(566);e.exports=r},function(e,t,n){n(567),n(9),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579);var r=n(206);e.exports=r.Reflect},function(e,t,n){var r=n(22),i=n(105),a=n(103),o=n(35),s=n(23),c=i("Reflect","apply"),u=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){c((function(){}))}))},{apply:function(e,t,n){return a(e),o(n),c?c(e,t,n):u.call(e,t,n)}})},function(e,t,n){var r=n(22),i=n(47),a=n(35),o=n(121),s=n(50);r({target:"Reflect",stat:!0,forced:n(23)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(e,t,n){a(e);var r=o(t,!0);a(n);try{return s.f(e,r,n),!0}catch(i){return!1}}})},function(e,t,n){var r=n(22),i=n(35),a=n(111).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){var r=n(22),i=n(39),a=n(35),o=n(76),s=n(111),c=n(179);r({target:"Reflect",stat:!0},{get:function u(e,t){var n,r,d=arguments.length<3?e:arguments[2];return a(e)===d?e[t]:(n=s.f(e,t))?o(n,"value")?n.value:n.get===undefined?undefined:n.get.call(d):i(r=c(e))?u(r,t,d):void 0}})},function(e,t,n){var r=n(22),i=n(47),a=n(35),o=n(111);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(e,t){return o.f(a(e),t)}})},function(e,t,n){var r=n(22),i=n(35),a=n(179);r({target:"Reflect",stat:!0,sham:!n(263)},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},function(e,t,n){var r=n(22),i=n(35),a=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,n){n(22)({target:"Reflect",stat:!0},{ownKeys:n(211)})},function(e,t,n){var r=n(22),i=n(105),a=n(35);r({target:"Reflect",stat:!0,sham:!n(392)},{preventExtensions:function(e){a(e);try{var t=i("Object","preventExtensions");return t&&t(e),!0}catch(n){return!1}}})},function(e,t,n){var r=n(22),i=n(35),a=n(39),o=n(76),s=n(23),c=n(50),u=n(111),d=n(179),l=n(120);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function f(e,t,n){var r,s,h=arguments.length<4?e:arguments[3],p=u.f(i(e),t);if(!p){if(a(s=d(e)))return f(s,t,n,h);p=l(0)}if(o(p,"value")){if(!1===p.writable||!a(h))return!1;if(r=u.f(h,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,c.f(h,t,r)}else c.f(h,t,l(0,n));return!0}return p.set!==undefined&&(p.set.call(h,n),!0)}})},function(e,t,n){var r=n(22),i=n(35),a=n(223),o=n(158);o&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){i(e),a(t);try{return o(e,t),!0}catch(n){return!1}}})},function(e,t,n){var r=n(22),i=n(24),a=n(155);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},function(e,t,n){n(22)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?t.push(n.charAt(i>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(22),i=n(104).every;r({target:"Array",proto:!0,forced:!n(116)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:undefined)}})},,,,,function(e,t,n){"use strict";n.r(t);n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(1),p=n.n(h),_=(n(27),n(25),n(553),n(555),n(557),n(37),n(107),n(125),n(82),n(40)),v=(n(177),n(185),n(151),n(224),n(560),n(289)),g=n.n(v),y=n(42),m=n.n(y),b=(n(235),n(10),n(97),n(29),n(92),n(45),n(43),n(17),n(90),n(48),n(0)),k=n(157),x=function kv(e,t,n,r,a,o,s,c,u,d,l,f,h){i()(this,kv),this.vd=e,this.bid=k.a.getNewVd(e),this.vid=t,this.duration=r,this.vsize=a,this.realArea=o,this.isUsable=s,this.isLimit=c||!1,this.limitReason=u||[],this.fileFormat=n,this.playlist=d,this.drmType=l||1,this.watermark=f,this.dr=h},S=n(28),T=n(14),P=(n(26),n(30)),I=n(83),w=n(21),A=n(8),E=n(15),D=n(113),q=window.location.protocol,O="420a8433732a6c99d1eae98fea69e55d/dash",R={vipauthUrl:"https://api.vip.iqiyi.com/services/cknsp.action",tsvipauthUrl:"https://api.vip.iqiyi.com/services/ckts.action",h5tmtsUrl:q+"//cache.m.iqiyi.com/jp/tmts/",vmsUrl:q+"//cache.video.iqiyi.com/dash",vmsAccess:q+"//103.44.59.54/3ea",vmsIPSuc:q+"//{{IP}}/3ea/"+O,vmsIPFail:q+"//access.if.iqiyi.com/3ea/"+O,pingbackV6Url:q+"//msg.qy.net/b",pingbackQosUrl:q+"//msg.qy.net/qos",isfanUrl:q+"//sns-api.iqiyi.com/apis/friend/follow.action",IVHistory:"".concat(q,"//iface2.iqiyi.com/lazy_cat/1.0/last_point"),IVZip:"".concat(q,"//iface2.iqiyi.com/lazy_cat/1.0/interact_info"),IVSevice:"".concat(q,"//iface2.iqiyi.com/lazy_cat/1.0/interactive"),IVFullpoints:"".concat(q,"//iface2.iqiyi.com/lazy_cat/1.0/full_points"),IVStoryLine:"".concat(q,"//iface2.iqiyi.com/lazy_cat/2.0/linear_story_line")},L=n(98),M={},C=new E.a("authremote"),N={getRequestURL:function(e){var t={version:"10.0",platform:"01010031010000000000",deviceId:S.a.getFluid()||S.a.getJsuid(),uid:I.a.getUid(),playType:"pcwh5",shareFlag:0,appname:"h5",dfp:D.a.get(),messageId:"h5_"+S.a.createUUID().replace(/-/gi,"")};return L.a.isTWLocale()&&(t.platform=A.a.getPtid(!0)),Object(w.a)(e,t),(e.fileFormat&&"f4v"!=e.fileFormat?R.tsvipauthUrl:R.vipauthUrl)+"?"+P.a.serializeParam(e)},getPreviewTime:function(e){var t=M[e];if(t){var n=0;return t.data&&t.data.prv&&1==t.data.prv&&(1==t.previewType?n=60*t.previewTime*1e3:3==t.previewType&&(n=1e3*t.previewTime)),n}C.log("wrong time to invoke getPreviewTime!")},getAuthUid:function(e){var t=M[e];if(t){if(t.data&&t.data.u)return t.data.u}else C.log("wrong time invoke getAuthUid is wrong!")},analyzeAuthData:function(e,t,n,r){var i=1==e.shareFlag,a=e.tvid;t&&t.hasOwnProperty("code")?(C.log("analyze authremote data,params: isShare = "+(i?"fgtw()":"")+",code = "+t.code),"A00000"===t.code?(t.bossKeyTime=+new Date,M[a]=t,n(a,t)):r(t.code,"CKNSP_RECHARGE_"+t.code,t)):r(null,"CKNSP_DATA_Fail")},request:function(e,t,n){var r=this,i=0;!function a(){i++;var o=r.getRequestURL(e);2===i&&(o=o.replace(/^https/gi,"http")),P.a.json({url:o,timeout:5e3,beforeSend:function(e){return C.log("check charge definition,params: url = "+e.url),e},success:function(i){r.analyzeAuthData(e,i,t,n)},failure:function(e,t){i<2?a():n(null,"CKNSP_HTTPFail")}})}()}},B=new E.a("AnalyzeVidls");function F(e,t){var n;t||(n=[]);var r=e.filter((function(e){return"265ts"===e.ff}));r.length>0&&(e=r);for(var i=0;i<e.length;i++){var a=e[i],o=a.fs,s="",c=a.vid,u=k.a.getOldVd(a.bid),d=a.dr,l=a.s,f=a.drmType,h={},p=a.duration||0,_=a.vsize,v="";if(o&&a.scrsz){var g=a.scrsz.split("x");h={width:g[0],height:g[1]}}switch(a.ff){case"f4v":case"flv":s="f4v",a.fs&&a.fs.length>0&&(v=a.fs);break;case"ts":case"265ts":s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(v=a.m3u8);break;case"m4s":s=a.ff,"string"==typeof a.m3u8&&a.m3u8.length>0&&(v={m3u8:a.m3u8},a.drm&&"A00000"===a.drm.code&&(v.drm={keySystemServer:a.drm.license_host},7===f?v.drm.keySystem="com.widevine.alpha":8===f&&(v.drm.keySystem="com.microsoft.playready"),B.log("analyze  drmType 7widevine/8playready = "+f+",keySystem"+v.drm.keySystem+", server = "+v.drm.keySystemServer)));break;case"dash":switch(a.code){case 4:s="dash_vp9";break;case 5:s="dash_av1"}"string"==typeof a.m3u8&&a.m3u8.length>0&&(v=a.m3u8);break;case"mp4":"string"==typeof a.mp4Url&&a.mp4Url&&(v=a.mp4Url)}var y=!1,m=!0,b=[];void 0!==l&&(y=!0,m=0===parseInt(l,10),b=a.vut||[]);var S=0;a.drm&&(S=a.drm.watermark||0),e[i].watermark&&(S=e[i].watermark||0),5===u&&4===d&&(u=51);var T=new x(u,c,s,p,_,h,m,y,b,v,f,S,d);if(t)u==t&&(v?n=T:B.log("analyze, targetvd is null, targetVd=".concat(t," ")));else{for(var P=!1,I=0;I<n.length;I++)n[I].vd==T.vd&&(P=!0,v&&(n[I]=T));P||n.push(T)}}return n}var U,j=n(241),V=n(86),W=n(114),H=n(128),z=n(183),Y="1.1.40",G=n(51),Q=n(124),K=n.n(Q),$=n(87),Z=n.n($);n(127),n(99),n(270);!function(e){e.CLEARKEY="org.w3.clearkey",e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_CC="com.chromecast.playready"}(U||(U={}));var X,J,ee,te=new Map;te.set("media",(X=['video/mp4; codecs="hvc1.1.6.L93.90"','video/webm; codecs="vp09.00.40.08"','video/webm; codecs="av01.0.08M.08"'],function(){return new Promise((function(e){var t={};MediaSource&&MediaSource.isTypeSupported&&X.forEach((function(e){try{t[e]=MediaSource.isTypeSupported(e);var n=e.split(";")[0];t[n]=t[n]||t[e]}catch(r){}})),e(t)}))})),te.set("drm",(J=[U.WIDEVINE,U.PLAYREADY],ee=!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration),K()(Z.a.mark((function xv(){var e,t,n;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e={status:"fullfilled"},t=[],ee&&(n=[{videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]}],J.forEach((function(r){var i=new Promise((function(t){var i=setTimeout((function(){e.status="pending",a()}),1e3),a=function(){clearTimeout(i),t()};try{navigator.requestMediaKeySystemAccess(r,n).then((function(t){var n=t.getConfiguration().sessionTypes,i=!!n&&n.indexOf("persistent-license")>=0;e[r]={persistentState:i},a()}))["catch"]((function(){e[r]=null,a()}))}catch(o){a()}}));t.push(i)}))),r.abrupt("return",Promise.all(t).then((function(){return e})));case 4:case"end":return r.stop()}}),xv)}))))),te.set("domParser",(function(){return new Promise((function(e){var t=!1;try{if(window.DOMParser)t=!!new DOMParser}catch(n){}e(t)}))}));var ne,re=n(210),ie=n.n(re),ae=n(32),oe=n.n(ae);n(226),n(140);!function(e){e[e.P2P=0]="P2P",e[e.CDN=1]="CDN"}(ne||(ne={}));var se=n(265),ce=n(228),ue=n(201),de=n(251);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var fe=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},he=function(e){d()(n,e);var t=le(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(function(){function e(){i()(this,e),this.start=0,this.end=0}return o()(e,[{key:"len",get:function(){return this.end-this.start}}]),e}()),pe=function(e){d()(n,e);var t=le(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).skipErrorMode_=!1,e.adjustTimestampMode_=!1,e.$ARTEFACT_ACTION=ue.a.DEPOSIT_LOADER,e.chunkMode=!1,e.chunkDataDone=!0,e}return o()(n,[{key:"currentLoaderMode",get:function(){return ne[this.mode]}},{key:"endOfDown",get:function(){return!!this.eod}},{key:"skipErrorMode",get:function(){return this.skipErrorMode_},set:function(e){this.skipErrorMode_=e}},{key:"adjustTimestampMode",get:function(){return this.adjustTimestampMode_},set:function(e){this.adjustTimestampMode_=e}},{key:"seek",value:function(e,t){this.$error=null,this.$krt.ctx.emit(ce.a.STATE_CHANGE,{state:"loaderseek"})}},{key:"noticeDataPump",value:function(e){this.$krt.ctx.emit(ce.a.STATE_CHANGE,{state:"loaderpump",data:e})}},{key:"recoverAt",value:function(e){m()(p()(n.prototype),"recoverAt",this).call(this,e),this.$stream.restrictor.needSendInitSegment=!0,this.seek(e)}}]),n}(de.a);fe([se.c],pe.prototype,"currentLoaderMode",null),fe([se.c],pe.prototype,"endOfDown",null);var _e=n(152),ve=n(202),ge=function Sv(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};i()(this,Sv),this.doRetry=!0,this.doDispatch=!0,this.allowIPDispatch=!0,this.timeout=1e4,this.retryNum=2,this.ipMaxRetry=1,this.flvKeyframesFusionSize=524288,Object(ve.a)(this,e)};n(169),n(19),n(139);function ye(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}var me=n(593),be=n(350),ke=n(379),xe=n(394),Se=n(382),Te=(n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(46),n(115),n(329)),Pe=n(614),Ie=n(405),we=n(242),Ae=n(108),Ee=n(615),De=n(94),qe=0,Oe="DISPATCH_EVENT_",Re={DISPATCH_SUCCESS:Oe+qe++,DISPATCH_FAIL:Oe+qe++,DATA_LOAD_SUCCESS:Oe+qe++,DATA_LOAD_PROGRESS:Oe+qe++,DATA_LOAD_FAIL:Oe+qe++,DNS_PARSER_REQUEST:Oe+qe++};function Le(e,t,n,r,i,a){return Fe(function(e,t){return e<<t|e>>>32-t}(Fe(Fe(t,e),Fe(r,a)),i),n)}function Me(e,t,n,r,i,a,o){return Le(t&n|~t&r,e,t,i,a,o)}function Ce(e,t,n,r,i,a,o){return Le(t&r|n&~r,e,t,i,a,o)}function Ne(e,t,n,r,i,a,o){return Le(t^n^r,e,t,i,a,o)}function Be(e,t,n,r,i,a,o){return Le(n^(t|~r),e,t,i,a,o)}function Fe(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Ue(e){return function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=n,c=r,u=i,d=a;n=Me(n,r,i,a,e[o+0],7,-680876936),a=Me(a,n,r,i,e[o+1],12,-389564586),i=Me(i,a,n,r,e[o+2],17,606105819),r=Me(r,i,a,n,e[o+3],22,-1044525330),n=Me(n,r,i,a,e[o+4],7,-176418897),a=Me(a,n,r,i,e[o+5],12,1200080426),i=Me(i,a,n,r,e[o+6],17,-1473231341),r=Me(r,i,a,n,e[o+7],22,-45705983),n=Me(n,r,i,a,e[o+8],7,1770035416),a=Me(a,n,r,i,e[o+9],12,-1958414417),i=Me(i,a,n,r,e[o+10],17,-42063),r=Me(r,i,a,n,e[o+11],22,-1990404162),n=Me(n,r,i,a,e[o+12],7,1804603682),a=Me(a,n,r,i,e[o+13],12,-40341101),i=Me(i,a,n,r,e[o+14],17,-1502002290),n=Ce(n,r=Me(r,i,a,n,e[o+15],22,1236535329),i,a,e[o+1],5,-165796510),a=Ce(a,n,r,i,e[o+6],9,-1069501632),i=Ce(i,a,n,r,e[o+11],14,643717713),r=Ce(r,i,a,n,e[o+0],20,-373897302),n=Ce(n,r,i,a,e[o+5],5,-701558691),a=Ce(a,n,r,i,e[o+10],9,38016083),i=Ce(i,a,n,r,e[o+15],14,-660478335),r=Ce(r,i,a,n,e[o+4],20,-405537848),n=Ce(n,r,i,a,e[o+9],5,568446438),a=Ce(a,n,r,i,e[o+14],9,-1019803690),i=Ce(i,a,n,r,e[o+3],14,-187363961),r=Ce(r,i,a,n,e[o+8],20,1163531501),n=Ce(n,r,i,a,e[o+13],5,-1444681467),a=Ce(a,n,r,i,e[o+2],9,-51403784),i=Ce(i,a,n,r,e[o+7],14,1735328473),n=Ne(n,r=Ce(r,i,a,n,e[o+12],20,-1926607734),i,a,e[o+5],4,-378558),a=Ne(a,n,r,i,e[o+8],11,-2022574463),i=Ne(i,a,n,r,e[o+11],16,1839030562),r=Ne(r,i,a,n,e[o+14],23,-35309556),n=Ne(n,r,i,a,e[o+1],4,-1530992060),a=Ne(a,n,r,i,e[o+4],11,1272893353),i=Ne(i,a,n,r,e[o+7],16,-155497632),r=Ne(r,i,a,n,e[o+10],23,-1094730640),n=Ne(n,r,i,a,e[o+13],4,681279174),a=Ne(a,n,r,i,e[o+0],11,-358537222),i=Ne(i,a,n,r,e[o+3],16,-722521979),r=Ne(r,i,a,n,e[o+6],23,76029189),n=Ne(n,r,i,a,e[o+9],4,-640364487),a=Ne(a,n,r,i,e[o+12],11,-421815835),i=Ne(i,a,n,r,e[o+15],16,530742520),n=Be(n,r=Ne(r,i,a,n,e[o+2],23,-995338651),i,a,e[o+0],6,-198630844),a=Be(a,n,r,i,e[o+7],10,1126891415),i=Be(i,a,n,r,e[o+14],15,-1416354905),r=Be(r,i,a,n,e[o+5],21,-57434055),n=Be(n,r,i,a,e[o+12],6,1700485571),a=Be(a,n,r,i,e[o+3],10,-1894986606),i=Be(i,a,n,r,e[o+10],15,-1051523),r=Be(r,i,a,n,e[o+1],21,-2054922799),n=Be(n,r,i,a,e[o+8],6,1873313359),a=Be(a,n,r,i,e[o+15],10,-30611744),i=Be(i,a,n,r,e[o+6],15,-1560198380),r=Be(r,i,a,n,e[o+13],21,1309151649),n=Be(n,r,i,a,e[o+4],6,-145523070),a=Be(a,n,r,i,e[o+11],10,-1120210379),i=Be(i,a,n,r,e[o+2],15,718787259),r=Be(r,i,a,n,e[o+9],21,-343485551),n=Fe(n,s),r=Fe(r,c),i=Fe(i,u),a=Fe(a,d)}return Array(n,r,i,a)}(function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length))}n(267),n(533),n(278);function je(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}function Ve(e){e=atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).substr(-2);return t}function We(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function He(e,t){if(!e)return"";var n;if(e instanceof ArrayBuffer)n=e;else{var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(e)),n=r.buffer}for(var i=Math.floor(e.byteLength/2),a=new Uint16Array(i),o=new DataView(n),s=0;s<i;s++)a[s]=o.getUint16(2*s,t);return je(a)}var ze=Ae.f+"//103.44.59.54/3e8",Ye="access.if.iqiyi.com";function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Qe=function(e){d()(n,e);var t=Ge(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).netProxy_=new Ae.a,a.dispatchURI_=new Ee.a(e),a.originDomain_=a.dispatchURI_.domain,a.originPath_=a.dispatchURI_.path,a.configure_=r,a}return o()(n,[{key:"startIPDispatch",value:function(){G.a.warn("Start ip dispatch"),this._getIPList()}},{key:"_getIPList",value:function(){var e=this,t=ze,n=Ye;G.a.log("Getting ip by: ".concat(t));var r=we.a.DISPATCH,i=Object(Ae.d)([t],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(t){if(t&&t.data)if("string"==typeof t.data){var r=t.data.split(";")[0],i="{{IP}}".replace("{{IP}}",r);e._reqDispatchResult(i,!0)}else e._reqDispatchResult(n);else e._reqDispatchResult(n)},onError:function(t){e._reqDispatchResult(n)},onTimeout:function(t,r){e._reqDispatchResult(n)},onAbort:function(){e._finalError(Ie.a.ABORT)},onComplete:function(){}},e.ipReq_=e.netProxy_.request(r,i)}},{key:"_prepareURLParam",value:function(e){var t=this.dispatchURI_,n=this.originPath_,r="/3eb/"+Ue(this.originDomain_)+We(n);return t.setScheme("https"),t.setDomain(e),t.setPath(r),t.query.update("ssl","1"),t.toString()}},{key:"_reqDispatchResult",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this,r=n._prepareURLParam(e);r||n.emit("FAIL"),G.a.log("".concat(t?"ip":"domain"," proxy: ").concat(r));var i=we.a.DISPATCH;n.netProxy_||(n.netProxy_=new Ae.a);var a=Object(Ae.d)([r],{timeout:n.configure_.ipTimeout,maxRetry:n.configure_.ipMaxRetry});a.method="GET",a.responseType="json",a.callbacks={onSuccess:function(e){n.emit("SUCCESS",e)},onError:function(e){e.url=r,n._finalError(Ie.a.ERROR,e)},onTimeout:function(e,t){n._finalError(Ie.a.TIMEOUT)},onAbort:function(){n._finalError(Ie.a.ABORT)},onComplete:function(){}},n.disReq_=n.netProxy_.request(i,a)}},{key:"abort",value:function(){this.ipReq_&&this.ipReq_.abort(),this.disReq_&&this.disReq_.abort()}},{key:"destroy",value:function(){this.netProxy_=null,this.dispatchURI_=null,this.ipReq_&&(this.ipReq_.destroy(),this.ipReq_=null),this.disReq_&&(this.disReq_.destroy(),this.disReq_=null)}},{key:"_finalError",value:function(e,t){this.emit("FAIL",{reason:e,error:t})}}]),n}(De.EventEmitter);function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var $e=function(e){d()(n,e);var t=Ke(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(e=t.call(this)).hostLaborer_=null,e.ipLaborer_=null,e.configure_={maxRetry:1,timeout:5e3,allowIpRetry:!0,ipMaxRetry:1,ipTimeout:3e3},G.a.assert(!!r,"Dispatch url should not be empty!"),e.uri_=new Ee.a(r),e.hostLaborer_=null,e.ipLaborer_=null,e.query=e.uri_.query,e.hooks={beforeLoad:function(){}},Object(ve.a)(e.configure_,a),e}return o()(n,[{key:"qkv",get:function(){var e=this.query;return{crossDomain:e.get("cross-domain"),pv:e.get("pv"),retry:e.get("retry"),client:e.get("client"),z:e.get("z"),l:e.get("l"),uid:e.get("uid"),cid:e.get("cid"),vid:e.get("vid"),t:e.get("t"),e:e.get("e"),tn:e.get("tn")}}},{key:"load",value:function(){this._startHostDispatch()}},{key:"abort",value:function(){this.hostLaborer_&&this.hostLaborer_.abort(),this.ipLaborer_&&this.ipLaborer_.abort()}},{key:"destroy",value:function(){this.hostLaborer_&&this.hostLaborer_.destroy(),this.ipLaborer_&&this.ipLaborer_.destroy()}},{key:"_startHostDispatch",value:function(){var e=this,t=this.uri_,n=this.configure_,r=we.a.DISPATCH;e.hooks.beforeLoad(t);var i=t.toString();G.a.log("Dispatch(normal) url: ".concat(i));var a=Object(Ae.d)([i],Object(ve.a)(Object(Ae.b)(),{timeout:n.timeout,maxRetry:n.maxRetry}));a.method="GET",a.responseType="json",a.callbacks=Object(ve.a)(a.callbacks,{onSuccess:function(t){var n=t.data;G.a.log("Dispatch(normal) take ".concat(t.netCost,"ms, ").concat(JSON.stringify(n))),e.emit(Re.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})},onError:function(t){G.a.error("Dispatch(normal) error: ".concat(JSON.stringify(t)));var r=405===t.status&&t.response&&t.response.code&&t.response.code.indexOf("D20")>=0;!n.allowIpRetry||r?e.emit(Re.DISPATCH_FAIL,{reason:Ie.a.ERROR,error:t}):e._startIPDispatch(i)},onTimeout:function(t,r){G.a.error("Dispatch(normal) timeout: ".concat(i)),n.allowIpRetry?e._startIPDispatch(i):e.emit(Re.DISPATCH_FAIL,{reason:Ie.a.TIMEOUT})},onAbort:function(){e.emit(Re.DISPATCH_FAIL,{reason:Ie.a.ABORT})},onComplete:function(){}}),this.hostLaborer_=Ae.e.request(r,a)}},{key:"_startIPDispatch",value:function(e){var t=this;this.emit(Re.DNS_PARSER_REQUEST,e),this.ipLaborer_=new Qe(e),this.ipLaborer_.on("SUCCESS",(function(e){var n=e.data;G.a.log("Dispatch(ip) take ".concat(e.netCost,"ms, ").concat(JSON.stringify(n))),t.emit(Re.DISPATCH_SUCCESS,{l:n.l,z:n.z,t:n.t})})),this.ipLaborer_.on("FAIL",(function(e){t.emit(Re.DISPATCH_FAIL,{reason:e.reason,error:e.error})})),this.ipLaborer_.startIPDispatch()}}]),n}(De.EventEmitter);function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Xe=function(e){d()(n,e);var t=Ze(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return i()(this,n),(e=t.call(this,r,o)).retryCount=a,e.hooks.beforeLoad=e.beforeLoad_.bind(c()(e)),e}return o()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}($e);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function et(e,t,n,r){var i=new Ee.a(e);switch(t){case 0:i.query.update("range","".concat(n,"-").concat(r));break;case 1:i.query.update("start","".concat(n)),i.query.update("end","".concat(r));break;default:}return i}var tt=function(e){d()(n,e);var t=Je(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).dispatcher=null,e.cdnLaborer=null,e.TAG="URIRemote",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new Te.a,e.dispatcherResultDic_={},e.internalRetryCount_=0,e.internalMaxRetry_=1,e.allowRetry_=!0,e.allowIpDispatch_=!0,e.dnsInfo_={userinfo:"",idc:""},e}return o()(n,[{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(e){var t=this,n=(arguments.length>1&&undefined,e.fragment),r=new Ee.a(e.uri.toString()),i=n.uri.path,a=this.dispatcherResultDic_[i],o={startByte:e.pieces[0].startByte,endByte:e.pieces[e.pieces.length-1].endByte};if(e.loaderConfig&&(this.internalMaxRetry_=e.loaderConfig.retryNum,this.allowRetry_=e.loaderConfig.doRetry,this.allowIpDispatch_=e.loaderConfig.allowIPDispatch),a&&a.l){var s=et(a.l,e.rangeMode,o.startByte,o.endByte);this._loadCDNData(e,s)}else{if(this.dispatcher&&(this.eventManager_.removeAll(),this.dispatcher.destroy()),a){var c=a.z;c&&r.query.update("z",c)}this.dispatcher=new Xe(r.toString(),this.internalRetryCount_,{allowIpRetry:this.allowIpDispatch_}),this.eventManager_.on(this.dispatcher,Re.DISPATCH_SUCCESS,(function(n){t.dispatcherResultDic_[i]=n,t.dnsInfo_={userinfo:n.t,idc:n.z};var r=et(n.l,e.rangeMode,o.startByte,o.endByte);t._loadCDNData(e,r)})).on(this.dispatcher,Re.DNS_PARSER_REQUEST,(function(e){t._doDNS(e)})).on(this.dispatcher,Re.DISPATCH_FAIL,(function(n){var r=n.reason,i=n.error,a=i?i.status:"";switch(r){case Ie.a.TIMEOUT:t.allowRetry_&&t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t._internalRetry(e)):t.emit("FL",{category:"dispatcher-timeout",statusCode:a});break;case Ie.a.ERROR:i&&405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?t.emit("FL",{category:"auth-error",statusCode:a}):t.allowRetry_&&t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t._internalRetry(e)):t.emit("FL",{category:"dispatcher-error",statusCode:a});break;case Ie.a.ABORT:t.emit("AB");break;default:G.a.warn("Unknown dispatch fail reason ".concat(r))}})),this.dispatcher.load()}}},{key:"_loadCDNData",value:function(e,t){var n=this,r=t.toString(),i=we.a.SEGMENT,a=Object(Ae.d)([r],Object(ve.a)(Object(Ae.b)(),{maxRetry:e.loaderConfig.retryNum,timeout:e.loaderConfig.timeout}));a.method="GET",a.callbacks=Object(ve.a)(a.callbacks,{onProgress:function(e,t){n.emit("PG",e,t)},onSuccess:function(e){var t=new Uint8Array(e.data);G.a.log("".concat(n.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat((e.netCost||0).toFixed(3),"ms), ").concat(Object(Pe.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",{bytes:t})},onError:function(t){G.a.log("".concat(n.LOG_TAG," cdn error, http-status=").concat(t.status,", ").concat(t.url,", ").concat(r)),n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(n._doDNS(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i,a){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n._internalRetry(e)):(G.a.log("".concat(n.LOG_TAG," cdn timeout, ").concat(a.url)),n._doDNS(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),G.a.log("cdn url: ".concat(r)),this.cdnLaborer=Ae.e.request(i,a)}},{key:"_internalRetry",value:function(e){var t=this.dispatcherResultDic_[e.uri.path];t&&t.l&&delete t.l,this.startLoad(e,!0)}},{key:"_doDNS",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher&&this.dispatcher.abort(),this.cdnLaborer&&this.cdnLaborer.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher&&this.dispatcher.destroy(),delete this.dispatcher,this.cdnLaborer&&this.cdnLaborer.destroy(),delete this.cdnLaborer,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(De.EventEmitter),nt=(n(112),n(404));function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var it=function(e){d()(n,e);var t=rt(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments))._ipProxy=new Ae.a,e._netProxy=new Ae.a,e._ipRetry=0,e._parserUrl="",e._domainName="",e._parsing=!1,e._parserReq=null,e._data=null,e._ipReq=null,e}return o()(n,[{key:"doRequest",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(e){var r={userInfo:t,idc:n,url:e,domainName:undefined},i=new Ee.a(r.url);r.domainName=i.domain;var a=/[a-z]/i.test(r.domainName);a?(this._parsing&&this.abort(),this._data=r,this._domainName=r.domainName,this._parsing=!0,this._request()):this.emit("success",{dmnm:r.domainName,ips:r.domainName,userinfo:r.userInfo,idc:r.idc})}}},{key:"abort",value:function(){this._parserReq&&this._parserReq.abort(),this._ipReq&&this._ipReq.abort(),this._parsing=!1,this._ipRetry=0,this._domainName="",this._data=null}},{key:"destroy",value:function(){this._parsing&&this.abort(),this._netProxy=null,this._parserReq&&(this._parserReq.destroy(),this._parserReq=null),this._ipProxy=null,this._ipReq&&(this._ipReq.destroy(),this._ipReq=null),this._parsing=!1,this._ipRetry=0,this._parserUrl="",this._domainName="",this._data=null}},{key:"_request",value:function(){var e=this;if(""!=e._parserUrl){e._parserUrl.indexOf("/3eb/")>-1&&(e._parserUrl=e._parserUrl.replace("/3eb/",""));var t=Ae.f+"//"+e._parserUrl+"/3f0/hd.cloud.iqiyi.com/d?dn="+this._domainName+"&business=pcwPlayer&cross-domain=1",n=we.a.DISPATCH,r=Object(Ae.d)([t],{timeout:3e3,maxRetry:1});r.method="GET",r.responseType="text",r.callbacks={onSuccess:function(t){e._ipRetry=0,e.emit("success",{dmnm:e._domainName,ips:t.data,userinfo:e._data.userInfo,idc:e._data.idc}),e._parsing=!1,e._domainName=""},onError:function(){e._retryGetIpList()},onTimeout:function(){e._retryGetIpList()},onAbort:function(){},onComplete:function(){}},e._parserReq=e._netProxy.request(n,r)}else e._getIPList(e._request.bind(e))}},{key:"_getIPList",value:function(e){var t=this,n=ze;G.a.log("dnsParser getting ip by: ".concat(n));var r=we.a.DISPATCH,i=Object(Ae.d)([n],{timeout:3e3,maxRetry:1});i.method="GET",i.responseType="text",i.callbacks={onSuccess:function(n){if(n&&n.data)if("string"==typeof n.data){var r=n.data.split(";");t._parserUrl=r[0]}else t._parserUrl=Ye;else t._parserUrl=Ye;e&&e()},onError:function(n){t._parserUrl=Ye,e&&e()},onTimeout:function(n,r){t._parserUrl=Ye,e&&e()},onAbort:function(){},onComplete:function(){}},t._ipReq=t._ipProxy.request(r,i)}},{key:"_retryGetIpList",value:function(){var e=this;this._ipRetry<1?(this._getIPList((function(){e._request()})),this._ipRetry++):this._parsing=!1}}]),n}(De.EventEmitter),at=n(380);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var st,ct=function(e){d()(n,e);var t=ot(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return i()(this,n),(e=t.call(this))._config={maxBytesLength:104857600},e._pool={},e._byteLength=0,Object(ve.a)(e._config,r),e}return o()(n,[{key:"keys",get:function(){return Object.keys(this._pool)}},{key:"size",get:function(){return this._byteLength}},{key:"humanSize",get:function(){return Object(Pe.a)(this._byteLength)}},{key:"isSafe",get:function(){return this._byteLength<this._config.maxBytesLength}},{key:"add",value:function(e,t){this._config;var n,r=this._pool,i=r[e];i?((n=new Uint8Array(i.byteLength+t.byteLength)).set(i,0),n.set(t,i.byteLength)):n=t,this._byteLength+=t.byteLength,r[e]=n}},{key:"del",value:function(e){var t=this._pool,n=t[e];n&&(this._byteLength-=n.byteLength,t[e]=null,delete t[e])}},{key:"read",value:function(e){return this._pool[e]}},{key:"drain",value:function(){var e=this._pool;for(var t in e)this.del(t);0!==this._byteLength&&(this._pool={},this._byteLength=0)}}]),n}(De.EventEmitter);function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function dt(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=[],i=t.start(0)-n,a=t.end(t.length-1)+n;return e.forEach((function(e,t){var n=e.segments;n.length>0&&n.map((function(n,o,s){var c=n.startTime,u=n.startTime+n.duration;return n.enabled=(c>=i||u>i)&&(u<=a||c<a),n.fragIdx=t,n.fragKey=e.key,n.flattenIdx=r.length,r.push(n),n}))})),{fragments:e,segments:r}}!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.END=2]="END",e[e.ERROR=3]="ERROR"}(st||(st={}));var lt,ft,ht=function(e){d()(n,e);var t=ut(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).error=null,a.eof=!1,a.eod=!1,a.state_=st.IDLE,a.silenced_=!1,a.TAG="CdnLoader",a._eventManager=new Te.a,a._uuid=xe.a.create(),a.tickTimer_=new nt.a((function(){return a.ticker_()})),a._downFragBufferTimeLength=30,a._bufferPool=new ct,a._withBufferRetryCount=0,a._noBufferRetryCount=0,a.loaderBuff_=new he,a._loaderConfig=new ge,a._dnsParser=new it,a.krt=e,a.ipc=r,a._ctx=e.ctx,a._cfg=e.conf,a._maxBufferTimeLength=a._cfg.maxBufferTimeLength,a._withBufferMaxRetry=a._cfg.loaderWithBufferMaxRetry,a._noBufferMaxRetry=a._cfg.loaderNoBufferMaxRetry,a._eventManager.on(a._dnsParser,at.a.DNS_PARSER_SUCCESS,(function(e){a._ctx.emit(at.a.DNS_PARSER_SUCCESS,e)})),a.tickTimer_.scheduleRepeated(a.silenced_?.5:.1),a}return o()(n,[{key:"silenced",set:function(e){this.silenced_=e,this.tickTimer_.adjustFrequency(this.silenced_?.5:.1)}},{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced_?"(silence)":"","]")}},{key:"loaderConfig",get:function(){return this._loaderConfig},set:function(e){Object(ve.a)(this._loaderConfig,e)}},{key:"state",get:function(){return this.state_},set:function(e){if(this.state_!==e){var t=this.state;this.state_=e,G.a.log("".concat(this.LOG_TAG,": ").concat(st[t]," -> ").concat(st[e])),this.state_===st.END&&(this.eod=!0,G.a.log("".concat(this.LOG_TAG,": EOD")))}}},{key:"reset",value:function(){this._uuid=xe.a.create(),this.eof=!1,this.eod=!1}},{key:"destroy",value:function(){this._eventManager.removeAll(),this._dnsParser.destroy(),this._bufferPool.drain(),this.tickTimer_.cancel(),delete this._ctx,delete this._cfg,delete this.error,delete this.tickTimer_,delete this._bufferPool,delete this._dnsParser}},{key:"ticker_",value:function(){var e=performance.now();!this.silenced_&&this.state===st.IDLE&&(this.lastGCTimestamp_==undefined||e-this.lastGCTimestamp_>5e3)&&(this.gc_&&this.gc_(),this.lastGCTimestamp_=e),this.tick_&&this.tick_()}},{key:"seek",value:function(e){G.a.log("".concat(this.LOG_TAG," cdn loader seeking ").concat(e)),this.error=null,this.state!==st.ERROR&&this.state!==st.END||(this.state=st.IDLE),this.eod=!1,this.eof=!1}},{key:"getNextFrag",value:function(e){return null}},{key:"drainBufferPool",value:function(){this._bufferPool.drain()}},{key:"doDNSParser",value:function(e){this._dnsParser.doRequest(e.url,e.userinfo,e.idc)}},{key:"emitErr",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t&&(this.error=e),this.emit("ER",e)}}]),n}(De.EventEmitter);(ft=lt||(lt={}))[ft.UNKNOWN=-1]="UNKNOWN",ft[ft.HLS=0]="HLS",ft[ft.JDASH=1]="JDASH",ft[ft.F4V=2]="F4V",ft[ft.FLV=2]="FLV",ft[ft.MP4=3]="MP4",ft[ft.AMP4=4]="AMP4",ft[ft.DASH_VP9=5]="DASH_VP9",ft[ft.DASH_AV1=6]="DASH_AV1";var pt=function(){function e(t){i()(this,e),this.range=[],this.pieces=[],this.fragment=null,this.fragIdx=null,this.uri=null,this.rangeMode=1,this.buffer=null,this.loaderConfig=null,this.loaderConfig=t.loaderConfig,this.fragment=t.frag,this.fragIdx=t.fragIdx,this.range=t.range,this.buffer=t.bufferInfo,this.rangeMode=t.rangeMode!==undefined&&null!==t.rangeMode?t.rangeMode:this.rangeMode;var n=this.pieces;if(this.fragment.segments.length>0)for(var r=this.fragment.segments,a=this.range[0],o=this.range[1],s=a;s<=o;s++)n.push(r[s]);else n.push(this.fragment.header);n.length>0&&(this.uri=n[0].uri)}return o()(e,[{key:"destroy",value:function(){this.pieces.splice(0,this.pieces.length),this.range.splice(0,this.range.length),this.loaderConfig=null,this.fragment=null,this.fragIdx=null,this.uri=null,this.buffer=null}}]),e}();function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vt=function(e){d()(n,e);var t=_t(n);function n(e){var r;return i()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.uri=null,r.__url="",r.poolId="",r.fragKey="",r.bid="",r.type=e,r}return n}(function(){function e(){i()(this,e),this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.idx=null,this.fragIdx=null}return o()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}}]),e}());function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var yt=function(e){d()(n,e);var t=gt(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e,r)).TAG="flvSegmentsLoader",a.splicePTS=!1,a.skipErrorFrag=!1,a._fragments=[],a._uriRemote=new tt,a._tempResetTime=-1,a._preLoadFIdx=-1,a._readPos={f:-1,s:-1},a._downPos={f:-1,s:-1,e:-1},a._allowFusion=!1,a.ipc.on("headerComplete",a.initSegs.bind(c()(a))),a}return o()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragments",get:function(){return this._fragments},set:function(e){0==e.length&&(this.eof=!0,this.eod=!0),this._fragments=e,this.krt.conf.openTest=!1}},{key:"applyRanges",value:function(e){var t=dt(this._fragments,e).fragments;this._playRanges=e,this.fragments=t}},{key:"addFragment",value:function(e){var t=this.fragments;if(t.length>0){var n=t[t.length-1];e.startTime=n.endTime,e.idx=n.idx+1}t.push(e),this.eof&&(this.eof=!1),this.eod&&(this.eod=!1,this.moveToNextDownPosOrEOD_()),G.a.log("".concat(this.LOG_TAG," addfragment, length=").concat(this._fragments.length))}},{key:"creatUUID",value:function(){this._uuid=xe.a.create()}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0==e.length||r<0)return c;if(this.eof){if(e.length>0){var u=e[e.length-1];c.start=u.endTime}}else{var d=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var l=r,f=!0,h=null;l<=t;l++){var p=e[l];if(p.segments&&p.segments.length>0&&3!=p.status&&4!=p.status){var _=p.segments,v=l===r?i:0,g=l===t?n:_.length-1;l===r&&(s=_[i].startTime);for(var y=v;y<=g;y++){var m=_[y];if(m.enabled){var b=this._bufferPool.read(m.poolId);if(b)f&&(f=!1,h=m.startTime),null!==h&&(a+=b.byteLength,o=m.endTime-h);else if(!(l===t&&y===g)){var k="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(m.poolId,", ").concat(m.fragIdx,", ").concat(m.idx,", ").concat(m.uri.toString(),", ").concat(m.levelId,", ").concat(m.flattenIdx,"}, ").concat(m.levelId,", ").concat(m.startByte,", ").concat(m.startTime);throw G.a.error(k),new Error(k)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof||this._readPos.f<0||0==this._fragments.length)return null;var e=null,t=this._fragments[this._readPos.f];if(0==t.segments.length||this.error)return null;var n=this._readPos.s>-1?t.segments[this._readPos.s]:null;return n&&!n.enabled?(this.moveToNextReadPosOrEOF_(t,n),null):n&&2!==n.status?null:(n&&(e={type:lt.FLV,data:this._bufferPool.read(n.poolId),done:!0,meta:{uid:"".concat(n.levelId,"-").concat(n.fragIdx,"-").concat(n.idx),fragIdx:t.idx,segIdx:n.idx,vac:t.additional,fragKey:n.fragKey,byteOffset:n.startByte}},G.a.log("".concat(this.LOG_TAG," got tag, pos=").concat(this._readPos.f,"-").concat(this._readPos.s,", startTime=").concat(n.startTime,", endTime=").concat(n.endTime,", uid=").concat(e.meta.uid)),this.splicePTS&&(e.meta.offset=t.startTime),this.moveToNextReadPosOrEOF_(t,n)),e)}},{key:"seek",value:function(e){m()(p()(n.prototype),"seek",this).call(this,e),this._allowFusion=!1,this._withBufferRetryCount=0,this._noBufferRetryCount=0,this.resetReadPosByTime_(e),this.krt.conf.openTest=!1}},{key:"resetReadPosByTime_",value:function(e){if(0!=this._fragments.length){var t=this.findSegmentByPTS(e),n=t.fragment,r=t.segment;if(!n)throw Error("reset pos error, pts/frag/segment(".concat(e,"/").concat(n,")"));0==n.segments.length&&(this._tempResetTime=e);var i=n.idx,a=r?r.idx:0;this._readPos.f=i,this._readPos.s=a,this._downPos.f=i,this._downPos.s=a,this._downPos.e=this._downPos.s;var o=this.findPieceByPos_(this._downPos).segment;o&&2===o.status&&this.moveToNextDownPosOrEOD_(),G.a.log("".concat(this.LOG_TAG," reset pos, time=").concat(e,", readPos=").concat(JSON.stringify(this._readPos),", downPos=").concat(JSON.stringify(this._downPos))),this.state===st.LOADING&&this.abort_(),this.tick_()}}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findIdxByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n?{fragment:n,segment:r}:null}},{key:"findIdxByTime_",value:function(e){for(var t=-1,n=-1,r=this._fragments.length,i=r>0?this._fragments[r-1]:null,a=0;a<this._fragments.length;a++)if(e>=this._fragments[a].startTime&&(e<this._fragments[a].endTime||a==r-1&&e==i.endTime)){t=a,this._fragments[a].segments.length>0&&(n=this.findSegIdxByTime_(a,e));break}return{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=ye(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"findSegIdxByByte_",value:function(e,t){var n=ye(this._fragments[e].segments,(function(e){return e.endByte<=t?1:e.startByte>t?-1:0}));return n?n.idx:-1}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.error&&this._fragments&&0!==this._fragments.length){var e=this.getUnreadBufInfo();this.state===st.IDLE&&e.timeLength<this._maxBufferTimeLength&&this.loadFragment_(e)}}},{key:"decideLoadEndPos_",value:function(){var e=this._downPos.f,t=this._downPos.s,n=t;if(t>2)if(this._allowFusion){var r=this._fragments[e].segments,i=r[t],a=r[r.length-1];if(i){var o=this.loaderConfig.flvKeyframesFusionSize,s=i.startByte+o;if(s>=a.endByte)n=a.idx;else{var c=this.findSegIdxByByte_(e,s);-1!==c&&(n=c)}}}else this._allowFusion=!0;return n}},{key:"loadFragment_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(!(0==n.segments.length&&2==n.header.status||r&&2==r.status||2==n.status)){this._preLoadFIdx!==n.idx&&this.skipErrorFrag&&(this.emit("FLS",n),this._preLoadFIdx=n.idx);var i=new pt({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this.decideLoadEndPos_()],bufferInfo:e,rangeMode:0,loaderConfig:this.loaderConfig});G.a.log("".concat(this.LOG_TAG,": load task ").concat(i.range.join("-")," of ").concat(this._downPos.f,", levelId = ").concat(n.levelId)),this.loadContiguousSegments_(i)}}},{key:"loadContiguousSegments_",value:function(e){var t=this,n=e.pieces,r=e.fragIdx,i=e.loaderConfig,a=this._eventManager,o=this._uriRemote,s=this,c=this._fragments[r],u=this._fragments.length,d=0==c.segments.length;s.state=st.LOADING;a.removeAll(),a.on(o,"PG",(function(e,t){})),a.on(o,"SC",(function(e){var i=e.bytes,a=-1,o=-1;if(d||(a=n[0].idx,o=n[n.length-1].idx),G.a.log("".concat(s.LOG_TAG,": load ok, header:").concat(d,", seg ").concat(a,"-").concat(o," of frag ").concat(r,"->[0,").concat(u-1,"]")),d)c.header.status=2,s.state=st.IDLE,t.ipc.emit("fragmentHeader",{bytes:i,meta:{fragIdx:r,header:!0,uid:"".concat(c.header.levelId,"-").concat(r,"-header")}});else{for(var l=c.segments[a].startByte,f=!1,h=a;h<=o;h++){var p=c.segments[h];if(!t._bufferPool.read(p.poolId)){var _=p.startByte-l,v=p.endByte-l,g=i.subarray(_,v);t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,g),f=!0}p.status=2}s.state=st.IDLE,s.moveToNextDownPosOrEOD_(),f&&t.emit("DA")}})),a.on(o,"FL",(function(n){if(t.skipErrorFrag)t.state=st.IDLE,c.status=3,G.a.log("".concat(s.LOG_TAG,": load error, skipError, type=").concat(JSON.stringify(n),", errorPos=").concat(JSON.stringify(t._downPos))),s.emitErr(new me.a(be.a.CRITICAL,ke.a.LOADER,Se.a.DATA_AD_ERROR),!1),t.moveToNextDownPosOrEOD_();else{var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e):i.doRetry?r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadTask_(e)):t.doFinalError_(n,e):t.doFinalError_(n,e)}})),a.on(o,"AB",(function(){var e=-1,t=-1;if(!d){e=n[0].idx,t=n[n.length-1].idx;for(var i=e;i<=t;i++){var a=c.segments[i];a.status=0,s._bufferPool.del(a.poolId)}}G.a.log("".concat(s.LOG_TAG,": load, onAbort ").concat(e," - ").concat(t," of ").concat(r,", header=").concat(d)),s.state!==st.ERROR&&(s.state=st.IDLE)})),a.on(o,"DP",(function(e){s.doDNSParser(e)})),o.startLoad(e)}},{key:"initSegs",value:function(e){if(0!=e.keyframePositions.length&&0!=e.keyframeTimes.length){var t=e.meta,n=t.fragIdx,r=t.uid,i=this._fragments[n],a="".concat(i.header.levelId,"-").concat(n,"-header");if(i.segments.length>0||r!==a)G.a.log("".concat(this.LOG_TAG,",initSegs has created segments or levelId error, return, length=").concat(i.segments.length,", cuid=").concat(a,", uid=").concat(r));else{i.additional={ac:e.ac,vc:e.vc,naluSizeLength:e.naluSizeLength},i.duration=e.duration;var o=e.keyframePositions.join(","),s=e.keyframeTimes.join(","),c=0;this.splicePTS&&(c=i.startTime);for(var u=e.keyframePositions,d=e.keyframeTimes,l=0,f=0,h=0,p=0,_=e.filesize,v=2;v<=u.length;v++){v<u.length?(h=u[v-1],p=u[v],l=0==d[v-1]?0:d[v-1],f=0==d[v]?0:d[v]):(h=u[v-1],p=_-1,l=d[v-1],f=this.splicePTS?e.duration:i.endTime);var g=new vt(lt.FLV);g.uri=new Ee.a(i.uri.toString()),g.idx=v-2,g.startTime=c+l,g.duration=f-l,g.startByte=h,g.endByte=p,g.poolId="flv-"+this._uuid+"-"+i.idx+"-"+g.idx,g.fragIdx=i.idx,g.fragKey=i.key,g.levelId=i.levelId,i.segments.push(g)}G.a.log("".concat(this.LOG_TAG," initSegs header ok, keyframePositions=").concat(o,", keyframeTimes=").concat(s,",fid=").concat(a,", segs = ").concat(i.segments.length,", levelId=").concat(i.levelId)),this.applyRanges(this._playRanges),this.refreshFragmentsTime_(),this._tempResetTime>=0&&(this.resetReadPosByTime_(this._tempResetTime),this._tempResetTime=-1)}}}},{key:"refreshFragmentsTime_",value:function(){if(this.splicePTS)for(var e,t=this._fragments.length,n=0;n<t;n++){var r=this._fragments[n];e&&(0==r.segments.length?(r.duration=r.endTime-e.endTime,r.startTime=e.endTime):r.startTime=e.endTime),e=r}}},{key:"doFinalError_",value:function(e,t){var n=this,r=e.category,i=e.statusCode,a=t.fragIdx,o=t.pieces,s=n._fragments[a],c=0===s.segments.length;if(!c&&o.length>0)for(var u=0;u<o.length;u++)o[u].status=3;s.status=3,n.state=st.ERROR;var d=Se.a.UNKNOWN;switch(r){case"auth-error":d=Se.a.DATA_AUTH_Error;break;case"cdn-error":d=Se.a.DATA_FLV_ERROR;break;case"cdn-timeout":d=Se.a.DATA_FLV_TIMEOUT;break;case"dispatcher-error":case"dispatcher-timeout":d=Se.a.DATA_FLV_DISPATCH_ERROR;break;default:n.state!==st.ERROR&&(n.state=st.IDLE)}d==Se.a.UNKNOWN&&n.state!==st.ERROR?n.state=st.IDLE:this.error||n.emitErr(new me.a(be.a.CRITICAL,ke.a.LOADER,d,i));var l="no-segment";if(!c){var f=o[0].idx,h=o.length>0&&!c?o[o.length-1].idx:f;l="seg: ".concat(f,"-").concat(h)}G.a.log("".concat(n.LOG_TAG,": load finalError, ").concat(l," of ").concat(a,", header=").concat(c,", type=").concat(d))}},{key:"reloadTask_",value:function(e){var t=this._uriRemote;t.reset(),t.dispatcher&&t.dispatcher.destroy(),t.cdnLaborer&&t.cdnLaborer.destroy(),G.a.log("".concat(this.LOG_TAG,": reload task ").concat(e.range.join("-")," of ").concat(this._downPos.f)),this.loadContiguousSegments_(e)}},{key:"abort_",value:function(){this._uriRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0||this._downPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,c=this._downPos.f,u=0;u<o.length;u++)n=(r=o[u]).split("-"),e=parseInt(n[2],10),t=parseInt(n[3],10),e<s||e>c?this.gcSeg_(r,e,t):e==s&&e==c?(i=this._readPos.s,a=this._downPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==c&&t>(a=this._downPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t];if(r.segments.length>0){var i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&t.segments.length>0&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"moveToNextDownPosOrEOD_",value:function(){this._downPos.s=this._downPos.e;for(var e=this.findPieceByPos_(this._downPos),t=e.fragment,n=e.segment,r=t.idx,i=n?n.idx:0,a=this._fragments.length,o=undefined,s=-1,c=-1,u=r;u<a;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status){if(!this.skipErrorFrag){o=!0;break}}else{if(0==l){s=d.idx,c=0;break}for(var f=!1,h=u==r?i+1:0;h<l;h++){var p=d.segments[h];if(p.enabled&&0==p.status){s=d.idx,c=h,f=!0;break}}if(f)break}}if(s>=0)this._downPos.f=s,this._downPos.s=c,this._downPos.e=this._downPos.s;else if(!o){var _=this._fragments[this._fragments.length-1];this._downPos.f=_.idx,this._downPos.s=_.segments.length>0?_.segments.length-1:0,this._downPos.e=this._downPos.s,this.state=st.END}}},{key:"moveToNextReadPosOrEOF_",value:function(e,t){var n=e.idx,r=t.idx,i=this._fragments.length,a=-1,o=-1,s=!1;if(i>0){var c=this._fragments[i-1];c.segments.length>0&&c.segments[c.segments.length-1].enabled&&(s=!0);for(var u=n;u<i;u++){var d=this._fragments[u],l=d.segments.length;if(3==d.status||4==d.status||0==l){a=d.idx,o=0;break}for(var f=!1,h=u==n?r+1:0;h<l;h++){if(d.segments[h].enabled){a=d.idx,o=h,f=!0;break}}if(f)break}}a>=0?(this._readPos.f=a,this._readPos.s=o):s&&(this.eof=!0,G.a.info("".concat(this.LOG_TAG,": EOF")),this.krt.conf.openTest=!0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._tempResetTime=-1,this._readPos.f=this._readPos.s=-1,this._downPos.f=this._downPos.s=this._downPos.e=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==st.IDLE&&(this.state===st.LOADING?this.abort_():this.state=st.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._uriRemote.reset(),m()(p()(n.prototype),"destroy",this).call(this)}}]),n}(ht),mt=n(413);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var kt=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},xt=function(e){d()(n,e);var t=bt(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:mt,watch:["manifest","loader"]}))).$TAG="FlvLoader",r.mode=ne.CDN,r.chunkMode=!0,r.loaderDataArrived_=!1,r.loader_=new yt(r.$krt,r.$ipc),r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})).on(r.loader_,"FLS",(function(e){r.emit("FLS",e)})),r}return o()(n,[{key:"$silenced",get:function(){return m()(p()(n.prototype),"$silenced",this)},set:function(e){ie()(p()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof&&this.chunkDataDone}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"adjustTimestampMode",set:function(e){this.loader_.splicePTS=e,ie()(p()(n.prototype),"adjustTimestampMode",e,this,!0)}},{key:"skipErrorMode",set:function(e){this.loader_.skipErrorFrag=e,e&&(this.loader_.loaderConfig=new ge({doRetry:!1,retryNum:1,allowIPDispatch:!1,ipMaxRetry:0,timeout:5e3})),ie()(p()(n.prototype),"skipErrorMode",e,this,!0)}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=n&&!Object(_e.c)(n)&&this.$manifestArtifact!==n;if(this.$selfArtifact!==r&&(this.$selfArtifact=r),i){var a=this.chunkDataDone;if(n.other&&(this.chunkDataDone=n.other.done),G.a.log("".concat(this.LOG_TAG," manifest changed, done=").concat(this.chunkDataDone,", fragments=").concat(n.fragments.length,", levelId=").concat(n.levelId)),a){if(this.$manifestArtifact=n,this.loader_.creatUUID(),this.loader_.drainBufferPool(),this.loader_.fragments=n.fragments,this.applyRanges(t.playRanges),t.playRanges.length>0){var o=t.playRanges.start(0);this.seek(o)}}else if(n.fragments.length>0){for(var s=0;s<n.fragments.length;s++)this.loader_.addFragment(n.fragments[s]);this.applyRanges(t.playRanges)}}this.pumpLoader_(),Object(_e.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){0!==e.length&&this.loader_.applyRanges(e)}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.$manifestArtifact,t=this.$selfArtifact;if(!(Object(_e.c)(e)||!Object(_e.c)(t)&&null!=t||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&this.loader_.error)){var n=this.loader_.read(),r=n&&!!n.data;this.noticeDataPump(r),r&&this.$provideArtefact(n)}}},{key:"seek",value:function(e){m()(p()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(pe);function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function Tt(e,t){return parseFloat(e+"."+t)}kt([se.c],xt.prototype,"fragments",null),kt([se.c],xt.prototype,"findPieceAt",null);var Pt=function(e){d()(n,e);var t=St(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).TAG="hlsSegmentsLoader",r._fragments=[],r._segments=[],r._hlsRemote=new tt,r._readPos={f:-1,s:-1,b:-1},r._downPos={f:-1,s:-1,b:-1},r}return o()(n,[{key:"duration",get:function(){var e=0,t=this._fragments;if(t.length>0){var n=t[t.length-1];e=n.startTime+n.duration}return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"fragsWithSegs",set:function(e){this.eof=!1,this.eod=!1,this._fragments=e.frags,this._segments=e.segs}},{key:"fragments",get:function(){return this._fragments}},{key:"getUnreadBufInfo",value:function(){var e=this._fragments,t=this._downPos.f,n=this._downPos.s,r=this._readPos.f,i=this._readPos.s,a=0,o=0,s=0,c={start:s,byteLength:a,timeLength:o};if(0===e.length||r<0)return c;if(this.eof){if(e.length>0){var u=e[e.length-1];c.start=u.endTime}}else{var d=[r,i,t,n].join("-");if(this._lastBufPos&&this._lastBufPos===d)return this._lastBufInf;for(var l=r,f=!0,h=null;l<=t;l++){var p=e[l];if(p){var _=p.segments,v=l===r?i:0,g=l===t?n:_.length-1;l===r&&(s=_[i].startTime);for(var y=v;y<=g;y++){var m=_[y];if(m.enabled){var b=this._bufferPool.read(m.poolId);if(b)a+=b.byteLength,o+=m.duration,f&&(f=!1,h=m.startTime),null!==h&&(a+=b.byteLength,o=m.endTime-h);else if(!(l===t&&y===g)){var k="".concat(this.LOG_TAG," A discontinuous buffer was detected. ").concat(m.poolId,", ").concat(m.fragIdx,", ").concat(m.idx,", ").concat(m.uri.toString(),", ").concat(m.bid,", ").concat(m.flattenIdx,"}, ").concat(m.levelId,", ").concat(m.startByte,", ").concat(m.startTime);throw G.a.error(k),new Error(k)}}}}}c.start=s,c.byteLength=a,c.timeLength=o,this._lastBufPos=d,this._lastBufInf=c}return c}},{key:"read",value:function(){if(this.eof)return null;var e=this.findPieceByPos_(this._readPos),t=e.fragment,n=e.segment;if(!n)return null;if(!n.enabled)return this.moveToNextReadPosOrEOF_(),null;if(1!==n.status&&2!==n.status)return this.tryToSyncReadAndDownPos_(),null;var r=this._fragments.length,i=this._segments.length,a=this._readPos.f,o=this._readPos.s,s=this._readPos.b,c=n.startByte+s,u=this._bufferPool.read(n.poolId),d=null,l=!1,f=n.levelId;return s>=u.byteLength?d=null:(G.a.log("".concat(this.LOG_TAG,": Read seg ").concat(n.poolId,", flatten idx ").concat(n.flattenIdx,"->[0,").concat(i-1,"] & inner seg idx ").concat(o,"->[0,").concat(t.segments.length-1,"] of frag ").concat(a,"->[0,").concat(r-1,"], status:").concat(n.status,", level:").concat(f,", start/duration(").concat(n.startTime.toFixed(3),"/").concat(n.duration.toFixed(3),"), bytes:").concat(n.endByte-n.startByte)),d=u.subarray(s,u.byteLength)),1===n.status?this._readPos.b=u.byteLength:2===n.status&&(l=!0,this.moveToNextReadPosOrEOF_()),{type:lt.HLS,data:d,done:l,meta:{uid:"".concat(f,"-").concat(a,"-").concat(o),level:f,fragIdx:a,segIdx:o,fragKey:n.fragKey,byteOffset:c,range:[s,u.byteLength]}}}},{key:"seek",value:function(e){m()(p()(n.prototype),"seek",this).call(this,e),this._withBufferRetryCount=0,this._noBufferRetryCount=0;var t=this.findSegmentByPTS(e),r=t.fragment,i=t.segment;if(r&&i){var a=Tt(r.idx,i.idx),o=Tt(this._readPos.f,this._readPos.s),s=Tt(this._downPos.f,this._downPos.s),c=a>=o&&a<=s;this._readPos.f=r.idx,this._readPos.s=i.idx,this._readPos.b=0,this._downPos.f=r.idx,this._downPos.s=i.idx,this._downPos.b=0,2===this.findPieceByPos_(this._downPos).segment.status&&this.moveToNextDownPosOrEOD_(),c||this.state!==st.LOADING||this.abort_(),this.tick_()}else G.a.error("Mismatch candidate pts/frag/segment(".concat(e,"/").concat(r,"/").concat(i,")"))}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findPieceByPTS_(e,this._fragments),n=null;return t&&(n=this.findPieceByPTS_(e,t.segments)),{fragment:t,segment:n}}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:ye(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"tick_",value:function(){this.checkFetchOrEOD_()}},{key:"checkFetchOrEOD_",value:function(){if(!this.eod&&!this.krt.error&&this._segments&&0!==this._segments.length&&this.state===st.IDLE){var e=this.getUnreadBufInfo();if(e.timeLength>this._maxBufferTimeLength)return;this.checkLoad_(e)}}},{key:"checkLoad_",value:function(e){var t=this.findPieceByPos_(this._downPos),n=t.fragment,r=t.segment;if(n&&r){var i=new pt({frag:n,fragIdx:this._downPos.f,range:[this._downPos.s,this._downPos.s],bufferInfo:e,loaderConfig:this.loaderConfig});this.loadSingleSegment_(i)}}},{key:"findPieceByPos_",value:function(e){var t=this._fragments[e.f],n=null;return t&&(n=t.segments[e.s]),{fragment:t,segment:n}}},{key:"loadSingleSegment_",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=e.pieces,i=e.fragIdx,a=e.buffer,o=this,s=r[0],c=this._fragments[i],u=this._fragments.length;if(!n){if(1===s.status)return;if(2===s.status)return}o.state=st.LOADING;var d=function(e,t){},l=function(e){var t=e.bytes,n="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),r="frag ".concat(i,"->[0,").concat(u-1,"]");o._bufferPool.del(s.poolId),o._bufferPool.add(s.poolId,t),s.status=2,G.a.log("".concat(o.LOG_TAG,": Loaded ").concat(s.poolId,", ").concat(n," of ").concat(r)),o.isCurrentDownSeg_(s)&&o.moveToNextDownPosOrEOD_(),o.state!==st.ERROR&&(o.state=st.IDLE),o.emit("DA")},f=function(n){var r=t.getUnreadBufInfo().timeLength>0;"auth-error"==n.category?t.doFinalError_(n,e,s):r?t._withBufferRetryCount<t._withBufferMaxRetry?(t._withBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s):t._noBufferRetryCount<t._noBufferMaxRetry?(t._noBufferRetryCount++,t.reloadSingleSegment_(e)):t.doFinalError_(n,e,s)},h=function(){var e="seg ".concat(s.idx,"->[0,").concat(c.segments.length-1,"]"),t="frag ".concat(i,"->[0,").concat(u-1,"]");G.a.log("".concat(o.LOG_TAG,": onAbort ").concat(e," of ").concat(t,", buffer ").concat(a.timeLength,"s")),s.status=0,o._bufferPool.del(s.poolId),o.state!==st.ERROR&&(o.state=st.IDLE)},p=function(e){o.doDNSParser(e)};this._eventManager.removeAll(),this._eventManager.on(this._hlsRemote,"PG",d),this._eventManager.on(this._hlsRemote,"SC",l),this._eventManager.on(this._hlsRemote,"FL",f),this._eventManager.on(this._hlsRemote,"AB",h),this._eventManager.on(this._hlsRemote,"DP",p),this._hlsRemote.startLoad(e)}},{key:"isCurrentDownSeg_",value:function(e){return!!e&&e.idx===this._downPos.s&&e.fragIdx===this._downPos.f}},{key:"doFinalError_",value:function(e,t,n){var r=this,i=e.category,a=e.statusCode,o=t.fragIdx,s=r._fragments[o],c=r._fragments.length;switch(i){case"cdn-error":case"dispatcher-error":case"auth-error":if(r.isCurrentDownSeg_(n)){n.status=3,r.state=st.ERROR,G.a.log("".concat(r.LOG_TAG,": onError: ").concat(n.fragIdx,"-").concat(n.idx));var u=Se.a.UNKNOWN;switch(i){case"cdn-error":u=Se.a.DATA_HLS_CDN_ERROR;break;case"auth-error":u=Se.a.DATA_AUTH_Error;break;case"dispatcher-error":u=Se.a.DATA_HLS_DISPATCH_ERROR}r.emitErr(new me.a(be.a.CRITICAL,ke.a.LOADER,u,a))}else{var d="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),l="frag ".concat(o,"->[0,").concat(c-1,"]");G.a.error("".concat(r.LOG_TAG,": onError ").concat(d," of ").concat(l,", buffer ").concat(t.buffer.timeLength,"s"))}break;case"cdn-timeout":case"dispatcher-timeout":if(r.isCurrentDownSeg_(n))n.status=4,r.state=st.ERROR,G.a.log("".concat(r.LOG_TAG,": onTimeout: ").concat(n.fragIdx,"-").concat(n.idx)),r.emitErr(new me.a(be.a.CRITICAL,ke.a.LOADER,"cdn-timeout"===i?Se.a.DATA_HLS_CDN_TIMEOUT:Se.a.DATA_HLS_DISPATCH_TIMEOUT));else{var f="seg ".concat(n.idx,"->[0,").concat(s.segments.length-1,"]"),h="frag ".concat(o,"->[0,").concat(c-1,"]");G.a.error("".concat(r.LOG_TAG,": onTimeout ").concat(f," of ").concat(h,", buffer ").concat(t.buffer.timeLength,"s"))}break;default:r.state!==st.ERROR&&(r.state=st.IDLE)}}},{key:"getNextAvailableSegByFlatten_",value:function(e){var t=this._segments[e];return t?t.enabled?t:this.getNextAvailableSegByFlatten_(e+1):null}},{key:"moveToNextDownPosOrEOD_",value:function(){var e=this.findPieceByPos_(this._downPos).segment,t=this.getNextAvailableSegByFlatten_(e.flattenIdx+1);t?(this._downPos.f=t.fragIdx,this._downPos.s=t.idx,this._downPos.b=0,2===t.status&&this.moveToNextDownPosOrEOD_()):this.state=st.END}},{key:"moveToNextReadPosOrEOF_",value:function(){var e=this._fragments,t=e[this._readPos.f].segments[this._readPos.s],n=e[e.length-1],r=n.segments.length>0&&n.segments[n.segments.length-1].enabled,i=this.getNextAvailableSegByFlatten_(t.flattenIdx+1)||this._segments[t.flattenIdx+1];i?(this._readPos.f=i.fragIdx,this._readPos.s=i.idx,this._readPos.b=0):r&&(this.eof=!0,G.a.log("".concat(this.LOG_TAG,": EOF")))}},{key:"reloadSingleSegment_",value:function(e){this._hlsRemote.reset(),this._hlsRemote.dispatcher&&this._hlsRemote.dispatcher.destroy(),this._hlsRemote.cdnLaborer&&this._hlsRemote.cdnLaborer.destroy(),this.loadSingleSegment_(e,!0)}},{key:"abort_",value:function(){this._hlsRemote.abort()}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._downPos.f<0||this._downPos.s<0))for(var e=this._fragments[this._readPos.f].segments[this._readPos.s].flattenIdx,t=this._fragments[this._downPos.f].segments[this._downPos.s].flattenIdx,n=this._segments,r=this._bufferPool,i=r.keys,a=0;a<i.length;a++){var o=i[a],s=o.split("-"),c=parseInt(s[1],10),u=parseInt(s[2],10),d=this._fragments[c];if(d){var l=d.segments[u];if(l){var f=l.flattenIdx;if(f<e||f>t)n[f].status=0,r.del(o)}else r.del(o)}else r.del(o)}}},{key:"tryToSyncReadAndDownPos_",value:function(){var e=!1;(this._readPos.f>this._downPos.f||this._readPos.s>this._downPos.s)&&(e=!0),e&&(this._downPos.f=this._readPos.f,this._downPos.s=this._readPos.s,this._downPos.b=0)}},{key:"destroy",value:function(){this._fragments.splice(0,this._fragments.length),this._segments.splice(0,this._segments.length),this._readPos.f=this._readPos.s=this._readPos.b=-1,this._downPos.f=this._downPos.s=this._downPos.b=-1,this._lastBufPos=undefined,this._lastBufInf=undefined,this.state!==st.IDLE&&(this.state===st.LOADING?this.abort_():this.state=st.IDLE),this._withBufferRetryCount=0,this._noBufferRetryCount=0,this._hlsRemote.reset(),m()(p()(n.prototype),"destroy",this).call(this)}}]),n}(ht),It=n(414);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var At=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},Et=function(e){d()(n,e);var t=wt(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:It,watch:["manifest","loader"]}))).mode=ne.CDN,r.rangeTSTolerance_=0,r.maxSegmentSearchTolerance_=0,r.loaderDataArrived_=!1,r.loader_=new Pt(e.runtime),r.rangeTSTolerance_=r.$krt.conf.hlsRangeTSTolerance,r.maxSegmentSearchTolerance_=r.$krt.conf.hlsMaxSegmentSearchTolerance,r.$eventManager.on(r.loader_,"DA",(function(){r._onLoaderDataArrived()})).on(r.loader_,"ER",(function(e){r.$throwError(e)})),r}return o()(n,[{key:"$silenced",get:function(){return m()(p()(n.prototype),"$silenced",this)},set:function(e){ie()(p()(n.prototype),"$silenced",e,this,!0),this.loader_.silenced=e}},{key:"buffer",get:function(){return this.loader_.buffer}},{key:"eof",get:function(){return this.loader_.eof}},{key:"eod",get:function(){return this.loader_.eod}},{key:"duration",get:function(){return this.loader_.duration}},{key:"fragments",get:function(){return this.loader_.fragments}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=t&&!Object(_e.c)(t)&&this.$manifestArtifact!==t,i=this.$selfArtifact!==n;if(r&&(this.$manifestArtifact=t),i&&(this.$selfArtifact=n),r){this.loader_.drainBufferPool();var a=this.$stream.playRanges;if(this.applyRanges(a),a.length>0){var o=a.start(0);this.seek(o)}}this.pumpLoader_(),Object(_e.c)(t)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.isAccurateTimestamp;this.maxSegmentSearchTolerance_=n?0:this.$krt.conf.hlsMaxSegmentSearchTolerance,this.rangeTSTolerance_=n?0:this.$krt.conf.hlsRangeTSTolerance;var r=dt(t.fragments,e),i=r.fragments,a=r.segments;this.loader_.fragsWithSegs={frags:i,segs:a,isAccurateTimeStamp:n}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"pumpLoader_",value:function(){var e=this.loader_,t=this.$manifestArtifact,n=this.$selfArtifact;if(!(Object(_e.c)(t)||!Object(_e.c)(n)&&null!=n||!this.loaderDataArrived_||this.eof||0===this.buffer.len&&e.error)){var r=e.read(),i=r&&!!r.data;this.noticeDataPump(i),i&&this.$provideArtefact(r)}}},{key:"seek",value:function(e){m()(p()(n.prototype),"seek",this).call(this,e),this.loader_.seek(e),this.pumpLoader_()}},{key:"findPieceAt",value:function(e){return this.loader_.findSegmentByPTS(e)}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this.$manifestArtifact=null,this.loader_.destroy()}}]),n}(pe);At([se.c],Et.prototype,"fragments",null),At([se.c],Et.prototype,"findPieceAt",null);var Dt=n(612),qt=n(613);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Rt=function(e){d()(n,e);var t=Ot(n);function n(){var e,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return i()(this,n),(e=t.call(this,r)).retryCount=a,e.hooks.beforeLoad=e.beforeLoad_.bind(c()(e)),e}return o()(n,[{key:"beforeLoad_",value:function(){this.retryCount>0&&this.query.update("retry",this.retryCount+""),this.query.update("pv","0.1"),this.query.update("cross-domain","1")}}]),n}($e);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Mt=function(e){d()(n,e);var t=Lt(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).TAG="DashUriRequest",e.LOG_TAG="[".concat(e.TAG,"]"),e.eventManager_=new Te.a,e.dispatcher_=null,e.dispatcherResultDic_={},e.cdnLaborer_=null,e.internalRetryCount_=0,e.internalMaxRetry_=2,e.dnsInfo_={userinfo:"",idc:""},e}return o()(n,[{key:"dispatcher",get:function(){return this.dispatcher_}},{key:"cdnLaborer",get:function(){return this.cdnLaborer_}},{key:"makeCDNUri_",value:function(e,t,n){var r=new Ee.a(e);return t!==undefined&&r.query.update("start","".concat(t)),n!==undefined&&r.query.update("end","".concat(n)),r}},{key:"removeDispatchDicKey",value:function(e){delete this.dispatcherResultDic_[e]}},{key:"startLoad",value:function(e){var t=this,n=e.dispatchUrl,r=e.startByte,i=e.endByte,a=new Ee.a(n),o=this.dispatcherResultDic_[n];if(o&&o.l){var s=this.makeCDNUri_(o.l,r,i);this.loadCDNData_(e,s)}else{if(this.dispatcher_&&(this.eventManager_.removeAll(),this.dispatcher_.destroy()),o){var c=o.z;c&&a.query.update("z",c)}this.dispatcher_=new Rt(a.toString(),this.internalRetryCount_),this.dispatcher_.hooks.beforeLoad=function(){var e=t.internalRetryCount_;e>0&&t.dispatcher_.query.update("retry","".concat(e)),t.dispatcher_.query.update("pv","0.1"),t.dispatcher_.query.update("cross-domain","1")},this.eventManager_.on(this.dispatcher_,Re.DISPATCH_SUCCESS,(function(a){t.dispatcherResultDic_[n]=a,t.dnsInfo_={userinfo:a.t,idc:a.z};var o=t.makeCDNUri_(a.l,r,i);t.loadCDNData_(e,o)})),this.eventManager_.on(this.dispatcher_,Re.DNS_PARSER_REQUEST,(function(e){t.doDNS_(e)})),this.eventManager_.on(this.dispatcher_,Re.DISPATCH_FAIL,(function(n){var r=n.reason,i=n.error;switch(r){case Ie.a.TIMEOUT:t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-timeout"});break;case Ie.a.ERROR:405===i.status&&i.response&&i.response.code&&i.response.code.indexOf("D20")>=0?t.emit("FL",{category:"auth-error"}):t.internalRetryCount_<t.internalMaxRetry_?(t.internalRetryCount_++,t.internalRetry_(e)):t.emit("FL",{category:"dispatcher-error"});break;case Ie.a.ABORT:t.emit("AB");break;default:G.a.warn("Unknown dispatch fail reason ".concat(r))}})),this.dispatcher_.load()}}},{key:"loadCDNData_",value:function(e,t){var n=this,r=t.toString(),i=we.a.SEGMENT,a=Object(Ae.d)([r],Object(ve.a)(Object(Ae.b)(),{timeout:1e4}));a.method="GET",a.callbacks=Object(ve.a)(a.callbacks,{onSuccess:function(e){var t=new Uint8Array(e.data);G.a.log("".concat(n.LOG_TAG," cdn success, http-status/bytes/take(").concat(e.status,"/").concat(t.byteLength,"/").concat(e.netCost,"ms), ").concat(Object(Pe.a)(e.speed),"/s, ").concat(e.url)),n.emit("SC",e)},onError:function(t){G.a.log("".concat(n.LOG_TAG," cdn error, http-status=").concat(t.status,", ").concat(t.url)),n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-error",statusCode:t.status}))},onTimeout:function(t,i){n.internalRetryCount_<n.internalMaxRetry_?(n.internalRetryCount_++,n.internalRetry_(e)):(n.doDNS_(r),n.emit("FL",{category:"cdn-timeout"}))},onAbort:function(){n.emit("AB")},onComplete:function(){}}),this.cdnLaborer_=Ae.e.request(i,a)}},{key:"internalRetry_",value:function(e){var t=this.dispatcherResultDic_[e.dispatchUrl];t&&t.l&&delete t.l,this.startLoad(e)}},{key:"doDNS_",value:function(e){this.emit("DP",{userinfo:this.dnsInfo_.userinfo,idc:this.dnsInfo_.idc,url:e})}},{key:"abort",value:function(){this.dispatcher_&&this.dispatcher_.abort(),this.cdnLaborer_&&this.cdnLaborer_.abort()}},{key:"reset",value:function(){this.internalRetryCount_=0,this.dispatcherResultDic_={},this.eventManager_.removeAll(),this.dnsInfo_={userinfo:"",idc:""},this.abort()}},{key:"destroy",value:function(){delete this.dispatcherResultDic_,this.internalRetryCount_=0,this.eventManager_.destroy(),delete this.eventManager_,this.dispatcher_&&this.dispatcher_.destroy(),delete this.dispatcher_,this.cdnLaborer_&&this.cdnLaborer_.destroy(),delete this.cdnLaborer_,this.dnsInfo_={userinfo:"",idc:""}}}]),n}(De.EventEmitter);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Nt=function(e){d()(n,e);var t=Ct(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e))._fragments=[],a._readPos={f:-1,s:-1},a._loadPos={f:-1,s:-1},a._preErrorData=null,a._allowLoaded=!0,a._dashRemote=new Mt,a._initSegment=null,a._initSegmentData=null,a.segments=[],a.TAG="DASHLoaderUnit::".concat(r),a._loaderType=r,a}return o()(n,[{key:"fragments",get:function(){return this._fragments},set:function(e){this.eof=!1,this.eod=!1,this._fragments=e,this._preErrorData=null}},{key:"initSegment",set:function(e){e!=this._initSegment&&(this._initSegmentData=null,this._initSegment=e)}},{key:"allowLoaded",set:function(e){this._allowLoaded!==e&&(this._allowLoaded=e,e&&this.state!==st.LOADING&&this.loadFragment_())}},{key:"initSegmentData",get:function(){return this._initSegmentData},set:function(e){this._initSegmentData=e}},{key:"duration",get:function(){var e=0;this._fragments.length>0&&(e=this._fragments[this._fragments.length-1].endTime);return e}},{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo();return e.start=t.start,e.end=t.start+t.timeLength,e}},{key:"bufferTime_",get:function(){return this._currentBuf&&this._currentBuf.info?this._currentBuf.info.timeLength:0}},{key:"resetReadPosByTime_",value:function(e){var t=this.findFIndexByTime_(e);if(t.f>-1){var n=this._readPos.f;t.f!==n&&(n=t.f),this.setReadPos_(n,t.s),G.a.log("".concat(this.LOG_TAG," update readpos, time=").concat(e,", readpos=").concat(this._readPos.f,"-").concat(this._readPos.s,", loadpos=").concat(this._loadPos.f,"-").concat(this._loadPos.s))}}},{key:"findFIndexByTime_",value:function(e){for(var t=-1,n=-1,r=0;r<this._fragments.length;r++)if(e>=this._fragments[r].startTime&&e<this._fragments[r].endTime){t=r,n=this.findSegIdxByTime_(r,e);break}return-1!=t&&-1!=n||G.a.log("".concat(this.LOG_TAG," find index error, f=").concat(t,", s=").concat(n,", time=").concat(e,", duration=").concat(this.duration,",fs=").concat(this._fragments.length)),{f:t,s:n}}},{key:"findSegIdxByTime_",value:function(e,t){var n=ye(this._fragments[e].segments,(function(e){return e.startTime+e.duration<=t?1:e.startTime>t?-1:0}));return n?n.idx:-1}},{key:"needLoadFrag_",value:function(e){var t=e.f>=0&&this._fragments.length>0?this._fragments[e.f]:null,n=(e.s>=0&&t.segments&&t.segments.length)>0?t.segments[e.s].status:-1;return!(!t||-1===n||2===n)}},{key:"loadFragment_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this,n=2!==t._initSegment.status,r=function(){var e,r,i,a={type:n?"init":"segment",f:t._loadPos.f,s:t._loadPos.s,response:undefined,category:undefined};if(t._eventManager.removeAll(),t._eventManager.on(t._dashRemote,"SC",(function(e){a.response=e,t.dataLoadOk_(a)})),t._eventManager.on(t._dashRemote,"FL",(function(e){a.category=e.category,t.dataLoadFail_(a)})),t._eventManager.on(t._dashRemote,"AB",(function(){t.dataLoadOnAbort_(a)})),t._eventManager.on(t._dashRemote,"DP",(function(e){t.doDNSParser(e)})),n)e=t._initSegment.uri.toString();else if(t._fragments){var o=t._fragments[a.f],s=o.segments[a.s];e=o.uri.toString(),r=s.startByte,i=s.endByte}e&&(t.state=st.LOADING,t._dashRemote.startLoad({dispatchUrl:e,startByte:r,endByte:i}))};t._fragments&&t._fragments.length>0&&t._allowLoaded&&(e?r():(!n&&t.needLoadFrag_(t._readPos)&&(t._loadPos.f=t._readPos.f,t._loadPos.s=t._readPos.s,t._updateBufferTime()),t.state!==st.LOADING&&t.state!==st.ERROR&&(n||t.bufferTime_<t._maxBufferTimeLength&&t.needLoadFrag_(t._loadPos))&&r()))}},{key:"makeErrorContext_",value:function(e){var t,n=this,r=e.type,i=e.category;if("init"==r)n._initSegment.status=3;else{var a=this._fragments[e.f];a.status=3,n._preErrorData=a}switch(i){case"dispatcher-error":case"dispatcher-timeout":t=Se.a.DATA_DASH_DISPATCH_ERROR;break;case"auth-error":t=Se.a.DATA_AUTH_Error;break;case"cdn-error":t=Se.a.DATA_DASH_ERROR;break;case"cdn-timeout":t=Se.a.DATA_DASH_TIMEOUT;break;case"cdn-range-error":t=Se.a.DATA_DASH_RANGE_ERROR}G.a.log("".concat(n.LOG_TAG," ,data loading error ").concat(t)),n.state=st.ERROR,n.errorChange_(new me.a(be.a.CRITICAL,ke.a.LOADER,t))}},{key:"doRetryStage_",value:function(e){var t=this,n=0===t.bufferTime_?t._noBufferRetryCount:t._withBufferRetryCount,r=0===t.bufferTime_?t._noBufferMaxRetry:t._withBufferMaxRetry;G.a.log("".concat(this.LOG_TAG," ,data loading failure, reload, bufferTime = ").concat(t.bufferTime_,", retry = ").concat(n,", max = ").concat(r)),"auth-error"==e.category?t.makeErrorContext_(e):0===t.bufferTime_?t._noBufferRetryCount>=t._noBufferMaxRetry?t.makeErrorContext_(e):(this._noBufferRetryCount++,this.reloadSingleSegment_()):t._withBufferRetryCount>=t._withBufferMaxRetry?t.makeErrorContext_(e):(this._withBufferRetryCount++,this.reloadSingleSegment_())}},{key:"reloadSingleSegment_",value:function(){this._dashRemote.reset(),this._dashRemote.dispatcher&&this._dashRemote.dispatcher.destroy(),this._dashRemote.cdnLaborer&&this._dashRemote.cdnLaborer.destroy(),this.loadFragment_(!0)}},{key:"dataLoadOk_",value:function(e){var t=this;t._noBufferRetryCount=0,t._withBufferRetryCount=0;var n=e.f,r=e.s,i=e.response,a=e.type,o=i.status,s=i.url,c=i.speed,u=new Uint8Array(i.data);G.a.log("".concat(t.LOG_TAG,", loaded type = ").concat(a,", ").concat(r," of frag ").concat(n,", http-status/bytes/take(").concat(o,"/").concat(u.byteLength,"/").concat(i.netCost,"ms), ").concat(Object(Pe.a)(c),"/s ").concat(s));var d=null,l=null;if("init"==a){var f=t._initSegment;t._initSegmentData=u,f.status=2}else{var h=t._fragments[n],p=h.segments[r];if(t._bufferPool.del(p.poolId),t._bufferPool.add(p.poolId,u),p.status=2,u.byteLength!==p.endByte-p.startByte)return G.a.log("".concat(t.LOG_TAG,", loaded range error, bytes = ").concat(u.byteLength,", seg = ").concat(p.endByte-p.startByte)),void t.makeErrorContext_({category:"cdn-range-error",f:n,s:r,type:a});r==h.segments.length-1?(h.status=2,h.idx==t._fragments.length-1?t.state=st.END:(d=h.idx+1,l=-1)):(d=h.idx,l=r+1),t._updateBufferTime()}t.state!==st.END&&(t.state=st.IDLE),this.emit("DA"),"init"!==a&&null!==d&&null!==l&&e.f==t._loadPos.f&&e.s==t._loadPos.s&&t.state==st.IDLE&&t.findNextLoad_(d,l),t.loadFragment_()}},{key:"dataLoadFail_",value:function(e){var t=e.f,n=e.s,r=e.type;if("init"!==r&&(this._loadPos.f!==t||this._loadPos.s!==n))return this.state=st.IDLE,void G.a.log("".concat(this.LOG_TAG," , data loading failure, not loadpos, pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s,", obj = ").concat(e.f,"-").concat(e.s));G.a.log("".concat(this.LOG_TAG," ,data loading failure, type = ").concat(r,", pos = ").concat(this._loadPos.f,"-").concat(this._loadPos.s)),this.loaderConfig.doRetry?this.doRetryStage_(e):this.makeErrorContext_(e)}},{key:"dataLoadOnAbort_",value:function(e){var t=e.f,n=e.s,r=e.type;G.a.log("".concat(this.LOG_TAG,": onAbort type = ").concat(r,", ").concat(t," -> ").concat(n));try{var i="init"==r?this._initSegment:this._fragments[t].segments[n];i.status=0,this._bufferPool.del(i.poolId),this.state!==st.ERROR&&(this.state=st.IDLE)}catch(a){}}},{key:"findNextLoad_",value:function(e,t){var n=this;if(this._prePos&&e>=this._prePos.f&&(e<this._prePos.rf||e==this._prePos.rf&&t>=this._prePos.s&&t<=this._prePos.rs))return this._prePos.f=e,void(this._prePos.s=t);this._prePos={f:e,s:t},this.findNextLoad__(e,t,(function(e,t,r){if(Object(ve.a)(n._prePos,{rf:e,rs:t}),n._loadPos.f=e,n._loadPos.s=t,r)n.state=st.END;else{var i=n._fragments[e];2==i.status&&(i.status=0),n.state==st.END&&(n.state=st.IDLE)}}))}},{key:"findNextLoad__",value:function(e,t,n){var r=!1,i=!1,a=this._fragments[e];a&&a.segments.length>0&&(t=t>=0?t:0,2==a.segments[t].status?t==a.segments.length-1?(a.status=2,a.idx==this._fragments.length-1?(i=!0,r=!0):this.findNextLoad__(e+1,-1,n)):this.findNextLoad__(a.idx,t+1,n):r=!0),r&&n(e,t,i)}},{key:"_updateBufferTime",value:function(){var e=[this._loadPos.f,this._loadPos.s,this._readPos.f,this._readPos.s].join("-");if(!this._currentBuf||this._currentBuf.pos!=e){for(var t=0,n=0,r=0,i=null,a=this._readPos.f,o=this._loadPos.f,s=a;s<=o&&0!=(i=this._fragments[s].segments).length;s++){var c=s==a?this._readPos.s:0,u=s==o?this._loadPos.s:i.length-1;s==a&&(r=i[c].startTime);for(var d=!1,l=c;l<=u;l++){if(2!=i[l].status){d=!0;break}t+=i[l].duration,n+=i[l].endByte-i[l].startByte}if(d)break}this._currentBuf={pos:e,info:{start:r,byteLength:n,timeLength:t}}}}},{key:"setReadPos_",value:function(e,t){this._readPos.f=e,this._readPos.s=t,this._updateBufferTime()}},{key:"errorChange_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._error=e,this.emit("ec",e)}},{key:"gc_",value:function(){if(!(this._readPos.f<0||this._readPos.s<0||this._loadPos.f<0||this._loadPos.s<0||this._loadPos.f<this._readPos.f))for(var e,t,n,r,i,a,o=this._bufferPool.keys,s=this._readPos.f,c=this._loadPos.f,u=0;u<o.length;u++)n=(r=o[u]).split("-"),e=parseInt(n[1],10),t=parseInt(n[2],10),e<s||e>c?this.gcSeg_(r,e,t):e==s&&e==c?(i=this._readPos.s,a=this._loadPos.s,(t<i||t>a)&&this.gcSeg_(r,e,t)):e==s?t<(i=this._readPos.s)&&this.gcSeg_(r,e,t):e==c&&t>(a=this._loadPos.s)&&this.gcSeg_(r,e,t)}},{key:"gcSeg_",value:function(e,t,n){var r=this._fragments[t],i=r.segments[n];this._bufferPool.del(e),2==r.status&&(r.status=0),i.status=0}},{key:"tick_",value:function(){}},{key:"read",value:function(){var e=this,t=null;if(e._readPos.f<0||0==e._fragments.length)return null;if(e._readPos.f>=e._fragments.length&&(e.eof=!0),e.eof)return null;var n=e._fragments[e._readPos.f],r=e._readPos.s>-1&&n&&n.segments.length>0?n.segments[e._readPos.s]:null;return e.bufferTime_<5&&(3==n.status||4==n.status)&&(e._error||(e.errorChange_(new me.a(be.a.CRITICAL,ke.a.LOADER,Se.a.DATA_DASH_ERROR)),G.a.log("".concat(e.LOG_TAG," , read data error, create _error, readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s)))),r&&2===r.status&&(t={data:e._bufferPool.read(r.poolId),meta:{uid:"".concat(r.bid,"-").concat(r.fragIdx,"-").concat(r.idx),fragIdx:n.idx,segIdx:r.idx,level:parseInt(r.bid,10),fragKey:r.fragKey,segment:r}},G.a.log("".concat(e.LOG_TAG,", read data return tagdata,type=").concat(this._loaderType,", readpos = ").concat(e._readPos.f," -- ").concat(e._readPos.s,", startTime = ").concat(r.startTime,", endtime = ").concat(r.startTime+r.duration,", bid = ").concat(r.bid,", byte.length = ").concat(t.data.byteLength,"\n\t\t\t, total = ").concat(r.endByte-r.startByte)),n.idx==e._fragments.length-1&&e._readPos.s==n.segments.length-1?e.eof=!0:e._readPos.s==n.segments.length-1?(n=e._fragments[n.idx+1],e.setReadPos_(n.idx,0)):e.setReadPos_(e._readPos.f,e._readPos.s+1)),e.bufferTime_<e._maxBufferTimeLength&&e.loadFragment_(),t}},{key:"seek",value:function(e){m()(p()(n.prototype),"seek",this).call(this,e),this.errorChange_(),!this._preErrorData||3!=this._preErrorData.status&&4!=this._preErrorData.status||(this._preErrorData.status=0),this.resetReadPosByTime_(e),this.findNextLoad_(this._readPos.f,this._readPos.s),this.loadFragment_()}},{key:"findSegmentByPTS",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this.findFIndexByTime_(e),n=null,r=null;return t.f>-1&&(n=this._fragments[t.f]).segments.length>0&&(r=n.segments[t.s]),n&&r?{fragment:n,segment:r}:null}},{key:"getUnreadBufInfo",value:function(){return this._currentBuf&&this._currentBuf.info?{start:this._currentBuf.info.start,byteLength:this._currentBuf.info.byteLength,timeLength:this._currentBuf.info.timeLength}:{start:0,byteLength:0,timeLength:0}}},{key:"reset",value:function(){m()(p()(n.prototype),"reset",this).call(this),this._dashRemote.reset(),this._fragments.splice(0,this._fragments.length),this._readPos.f=this._readPos.s=-1,this._loadPos.f=this._loadPos.s=-1,this._currentBuf=null,this.state=st.IDLE,this._preErrorData=null,this._dashRemote.reset()}}]),n}(ht),Bt=n(415);function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ut=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},jt=function(e){d()(n,e);var t=Ft(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Bt,watch:["manifest","loader"]}))).$TAG="DashLoader",r.mode=ne.CDN,r.loaderDataArrived_=!1,r.loaderBuff_=new he,r.timeGap_=5,r.videoInitConfig_=null,r.audioInitConfig_=null,r.tickTimer_=new nt.a((function(){return r.tick_()})),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return o()(n,[{key:"buffer",get:function(){var e=this.loaderBuff_,t=this.getUnreadBufInfo_().buffered;return(t.video||t.audio)&&(e.start=t.video.start,e.end=t.video.start+t.video.timeLength),e}},{key:"eof",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eof&&n.eof:i?e=t.eof:a&&(e=n.eof),e}},{key:"eod",get:function(){var e=!1,t=this._audioLoader,n=this._videoLoader,r=this.$stream.restrictor,i=r.hasAudio,a=r.hasVideo;return i&&a?e=t.eod&&n.eod:i?e=t.eod:a&&(e=n.eod),e}},{key:"duration",get:function(){return this.$manifestArtifact?this.$manifestArtifact.duration:0}},{key:"$silenced",get:function(){return m()(p()(n.prototype),"$silenced",this)},set:function(e){ie()(p()(n.prototype),"$silenced",e,this,!0);var t=this._videoLoader,r=this._audioLoader,i=this.$stream;t&&i.restrictor.hasVideo&&(t.silenced=e),r&&i.restrictor.hasAudio&&(r.silenced=e)}},{key:"timeGap",set:function(e){this.timeGap_=e}},{key:"fragments",get:function(){var e=this._videoLoader,t=this._audioLoader,n=this.$stream.restrictor,r=n.hasAudio,i=[];return n.hasVideo?i=e.fragments:r&&(i=t.fragments),i||[]}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=e.manifest,r=e.loader,i=e.renderer,a=n&&!Object(_e.c)(n)&&this.$manifestArtifact!==n,o=this.$selfArtifact!==r,s=this.$rendererArtifact!==i;if(a&&(this.$manifestArtifact=n),s&&(this.$rendererArtifact=i),o&&(this.$selfArtifact=r),a){this.drainBufferPool();var c=t.playRanges,u=!1;for(var d in n.tracks){var l=n.tracks[d];if(l){var f=this.setTrackConfig(l,d);u=u||f}}if(u&&(t.restrictor.needSendInitSegment=!0),this.applyRanges(c),c.length>0){var h=c.start(0);this.seek(h)}}this.pumpLoader_(),Object(_e.c)(n)||this.$consumeArtefact("manifest")}},{key:"applyRanges",value:function(e){var t=this.$manifestArtifact;if(t&&0!==e.length){var n=t.tracks.video,r=t.tracks.audio;if(n){var i=dt(n.fragments,e),a=i.fragments,o=i.segments;this._videoLoader.fragments=a,this._videoLoader.segments=o}if(r){var s=dt(r.fragments,e),c=s.fragments,u=s.segments;this._audioLoader.fragments=c,this._audioLoader.segments=u}}}},{key:"_onLoaderDataArrived",value:function(){this.loaderDataArrived_=!0,this.pumpLoader_()}},{key:"getInitData_",value:function(e){var t,n,r,i=this._audioLoader,a=this.audioInitConfig_,o=this._videoLoader,s=this.videoInitConfig_,c=null;switch(e){case 2:n=i,c=a,t=new Dt.a(2),r="audio";break;case 1:c=s,n=o,t=new Dt.a(1),r="video";break;default:return}var u=n.initSegmentData;if(u){var d=c,l=d.codec,f=d.mimeType;return t.bytesArray=[u],t.container=f,t.codec=l,G.a.log("".concat(this.LOG_TAG," ").concat(r," initSegment, codec=").concat(l,", mimeType=").concat(f,", length=").concat(u.byteLength)),t}}},{key:"pumpLoader_",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(Object(_e.c)(n)||!Object(_e.c)(r)&&null!=r||!this.loaderDataArrived_||this.eof||null!=i&&!i.expectingBuffer||0===this.buffer.len&&this.error))if(this.read_(),e.restrictor.consumable){var a=e.restrictor.consume();this.noticeDataPump(!0),this.$provideArtefact(a)}else this.noticeDataPump(!1)}},{key:"checkCDNBuffer_",value:function(){var e=this._videoLoader,t=this._audioLoader,n=this.timeGap_,r=this.$stream;if(r.restrictor.hasAudio&&t&&r.restrictor.hasVideo&&e){var i=e.initSegmentData,a=t.initSegmentData,o=e.getUnreadBufInfo().timeLength,s=t.getUnreadBufInfo().timeLength,c=!a||s<n,u=!i||o<n;e.allowLoaded=u||!c,t.allowLoaded=c||!u}}},{key:"getUnreadBufInfo_",value:function(){var e=null,t=null;return this._videoLoader&&(e=this._videoLoader.getUnreadBufInfo()),this._audioLoader&&(t=this._audioLoader.getUnreadBufInfo()),{buffered:{video:e,audio:t}}}},{key:"setTrackConfig",value:function(e,t){var n,r=this,i=this.$stream,a=e.initSegment,o=e.codec,s=e.mimeType,c="video"===t?this._preVideoInit:this._preAudioInit;return(!c||c!=a)&&((n=new Nt(this.$krt,t)).on("ec",(function(e){r.$throwError(e)})).on("DA",(function(e){r._onLoaderDataArrived()})),n.silenced=this.$silenced,n.initSegment=a,"video"===t?(this._preVideoInit=a,this._videoLoader=n,this.videoInitConfig_={codec:o,mimeType:s},i.restrictor.hasVideo=!0):(this._preAudioInit=a,this._audioLoader=n,this.audioInitConfig_={codec:o,mimeType:s},i.restrictor.hasAudio=!0),!0)}},{key:"tick_",value:function(){this.checkCDNBuffer_()}},{key:"findPieceAt",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=this._videoLoader,n=this._audioLoader,r=this.$stream,i=r.restrictor,a=i.hasAudio,o=i.hasVideo;return o?t.findSegmentByPTS(e):a?n.findSegmentByPTS(e):{fragment:null,segment:null}}},{key:"seek",value:function(e){arguments.length>1&&undefined,arguments.length>2&&undefined;m()(p()(n.prototype),"seek",this).call(this,e);var t=this.$stream;[{type:"video",exist:t.restrictor.hasVideo,loader:this._videoLoader},{type:"audio",exist:t.restrictor.hasAudio,loader:this._audioLoader}].forEach((function(t){var n=t.type,r=t.exist,i=t.loader;if(r){var a=e;Object(_e.f)(e)&&(a=e[n]),i.seek(a)}})),this.pumpLoader_()}},{key:"read_",value:function(){var e=this.$stream,t=e.restrictor,n=t.hasAudio,r=t.hasVideo;if(t.needSendInitSegment){var i;n&&(i=this.getInitData_(2))&&(e.restrictor.audioInitSegment=i),r&&(i=this.getInitData_(1))&&(e.restrictor.videoInitSegment=i)}else{var a=this.readCDN_();if(a)for(var o in a){var s=a[o];if(s){var c=s.contentType,u=s.bytes,d=s.segment.startTime,l=s.segment.duration;if("video"===c){var f=new qt.a(1);f.bytesArray=[u],f.startTime=d,f.duration=l,e.restrictor.videoMediaSegments.push(f)}else if("audio"===c){var h=new qt.a(2);h.bytesArray=[u],h.startTime=d,h.duration=l,e.restrictor.audioMediaSegments.push(h)}}}}}},{key:"readCDN_",value:function(){var e,t,n=this._audioLoader,r=this._videoLoader,i=this.$stream.restrictor,a=i.hasAudio,o=i.hasVideo,s=!1,c=!1;if(a&&o){var u=n.buffer.start,d=r.buffer.start;u-d>this.timeGap_?s=!0:d-u>this.timeGap_?c=!0:s=c=!0}else s=o,c=a;if(c&&!this._audioLoader.eof){var l=this._audioLoader.read();l&&(t={contentType:"audio",bytes:l.data,segment:l.meta.segment})}if(s&&!this._videoLoader.eof){var f=this._videoLoader.read();f&&(e={contentType:"video",bytes:f.data,segment:f.meta.segment})}return e||t?{video:e||null,audio:t||null}:null}},{key:"drainBufferPool",value:function(){var e=this.$stream.restrictor;e&&(this._videoLoader&&e.hasVideo&&this._videoLoader.drainBufferPool(),this._audioLoader&&e.hasAudio&&this._audioLoader.drainBufferPool())}},{key:"reset",value:function(){this._videoLoader&&this._videoLoader.reset(),this._audioLoader&&this._audioLoader.reset()}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this._videoLoader&&this._videoLoader.destroy(),this._audioLoader&&this._audioLoader.destroy(),delete this._audioLoader,delete this._videoLoader}}]),n}(pe);Ut([se.c],jt.prototype,"fragments",null),Ut([se.c],jt.prototype,"findPieceAt",null);n(534);var Vt=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();function Wt(e,t){if(e.length>1e4)return function(e,t){for(var n=-1^t,r=e.length-7,i=0;i<r;)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])];for(;i<r+7;)n=n>>>8^Vt[255&(n^e[i++])];return-1^n}(e,t);for(var n=-1^t,r=e.length-3,i=0;i<r;)n=(n=(n=(n=n>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])])>>>8^Vt[255&(n^e[i++])];for(;i<r+3;)n=n>>>8^Vt[255&(n^e[i++])];return-1^n}var Ht=n(153),zt=n(13),Yt=n(16),Gt=n(20),Qt=(n(245),self.navigator.userAgent.toLowerCase()),Kt=/(edge)\/([\w.]+)/.exec(Qt)||/(opr)[\/]([\w.]+)/.exec(Qt)||/(chrome)[ \/]([\w.]+)/.exec(Qt)||/(firefox)[\/]([\w.]+)/.exec(Qt)||/(iemobile)[\/]([\w.]+)/.exec(Qt)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(Qt)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(Qt)||/(webkit)[ \/]([\w.]+)/.exec(Qt)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(Qt)||/(msie) ([\w.]+)/.exec(Qt)||Qt.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Qt)||Qt.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Qt)||[],$t=/(ipad)/.exec(Qt)||/(ipod)/.exec(Qt)||/(windows phone)/.exec(Qt)||/(iphone)/.exec(Qt)||/(kindle)/.exec(Qt)||/(android)/.exec(Qt)||/(windows)/.exec(Qt)||/(mac)/.exec(Qt)||/(linux)/.exec(Qt)||/(cros)/.exec(Qt)||[],Zt={browser:Kt[5]||Kt[3]||Kt[1]||"",version:Kt[2]||Kt[4]||"0",majorVersion:Kt[4]||Kt[2]||"0",platform:$t[0]||""},Xt={};if(Zt.browser){Xt[Zt.browser]=!0;var Jt=Zt.majorVersion.split(".");Xt.version={major:parseInt(Zt.majorVersion,10),string:Zt.version},Jt.length>1&&(Xt.version.minor=parseInt(Jt[1],10)),Jt.length>2&&(Xt.version.build=parseInt(Jt[2],10))}if(Zt.platform&&(Xt[Zt.platform]=!0),(Xt.chrome||Xt.opr||Xt.safari)&&(Xt.webkit=!0),Xt.rv||Xt.iemobile){Xt.rv&&delete Xt.rv;var en="msie";Zt.browser=en,Xt.msie=!0}if(Xt.edge){delete Xt.edge;var tn="msedge";Zt.browser=tn,Xt.msedge=!0}if(Xt.opr){var nn="opera";Zt.browser=nn,Xt.opera=!0}if(Xt.safari&&Xt.android){var rn="android";Zt.browser=rn,Xt.android=!0}Xt.name=Zt.browser,Xt.platform=Zt.platform,Xt.chrome&&Xt.version&&Xt.version.major<=44&&(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(this.subarray(e,t))}),window.WebSocket=window.webSocket||window.WebSocket,window.URL=window.URL||window.webkitURL,window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,window.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate;var an=Object.defineProperties({},{browser:{get:function(){return Xt},configurable:!0,enumerable:!0},isHTTPS:{get:function(){return/^https/gi.test(window.location.protocol)},configurable:!0,enumerable:!0},supportFetch:{get:function(){return window.fetch&&!Xt.msedge},configurable:!0,enumerable:!0},webSocket:{get:function(){return window.WebSocket},configurable:!0,enumerable:!0},dataVideo:{get:function(){return window.MediaSource&&window.URL},configurable:!0,enumerable:!0},canP2P:{get:function(){return!0===Xt.chrome&&window.RTCSessionDescription!==undefined&&window.RTCPeerConnection!==undefined&&window.RTCIceCandidate!==undefined},configurable:!0,enumerable:!0}}),on=1,sn=2,cn="http://static.iqiyi.com/ext/common/h5Voddpcfg.json";an.isHTTPS&&(cn=cn.replace(/^http:/gi,"https:"));var un=null,dn=0,ln=null;function fn(){null!==un&&un.abort(),(un=new XMLHttpRequest).responseType="json",un.onreadystatechange=function(){if(0===un.readyState);else if(1===un.readyState);else if(2===un.readyState);else if(3===un.readyState);else if(200===un.status)if(un.response)try{ln=JSON.parse(JSON.stringify(un.response)),pn(),_n()}catch(e){hn("dataError")}else hn("responseIsNull");else hn("statusErr-"+un.status)};try{un.open("GET",cn+"?rn="+Date.now(),!0),un.send()}catch(e){hn("tryCatchError")}}function hn(e){pn(),dn<5&&(dn++,fn())}function pn(){null!==un&&un.abort(),un=null}function _n(){if(null!==ln){zt.a.dispatchCfg=ln.cdn.dispatcher.timeout,zt.j.tracker=ln.tracker,ln.aidList&&(zt.j.aidList=ln.aidList),ln.defaultTracker&&(zt.j.defaultTracker=ln.defaultTracker),ln.dcache1&&(zt.e.cityList=ln.dcache1.cityList,zt.e.netList=ln.dcache1.netList,zt.e.cookie=ln.dcache1.cookie),ln.config&&(Yt.a.platform===sn||Yt.a.checkIsMobius()||(zt.d.videoMaxSize=parseInt(ln.config.videoMaxSize)),zt.j.getPeerIDStep=parseInt(ln.config.getPeerIDStep),zt.j.weedOutPeerStep=parseInt(ln.config.weedOutPeerStep),zt.j.connectPeerStep=parseInt(ln.config.connectPeerStep),zt.j.NATTimeoutStep=parseInt(ln.config.NATTimeoutStep),zt.j.connectMax=parseInt(ln.config.connectMax),zt.j.passiveMax=parseInt(ln.config.passiveMax),zt.j.RTCMax=parseInt(ln.config.RTCMax),zt.j.RTCPoolSize=parseInt(ln.config.RTCPoolSize),zt.j.coolDownTime=parseInt(ln.config.coolDownTime));var e=Gt.a.getUserInfoFromCookie();if(e.userInfo){var t,n,r=e.userNetType,i=e.userArea;ln.closep2p&&(zt.j.closeP2PTvidList=ln.closep2p.tvidList,zt.j.closeP2PNetList=ln.closep2p.netList,zt.j.closeP2PFileTypeList=ln.closep2p.fileTypeList);var a=ln.stun?ln.stun:ln.tracker;zt.j.stun=[];for(var o=!1,s=0;s<a.length&&!o;s++){if(r===a[s].key||"*"===a[s].key){o=!0;for(var c=0;c<a[s].value.length;c++){var u=a[s].value[c];switch(an.browser.name){case"mozilla":case"msedge":case"safari":default:zt.j.stun.push({url:"stun:"+u.split("|")[0]+":"+u.split("|")[4],urls:"stun:"+u.split("|")[0]+":"+u.split("|")[4]})}}}if(Gt.a.shuffle(zt.j.stun),"mozilla"===an.browser.name)for(;zt.j.stun.length>2;)zt.j.stun.shift()}for(var d=0;d<ln.cdn.cache.TTFB.length;){var l=ln.cdn.cache.TTFB[d];if(t=l.ai.split("|")[0],n=l.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){zt.a.TTFBCfg=l.timeout;break}d++}for(d=0;d<ln.cdn.cache.load.length;){var f=ln.cdn.cache.load[d];if(t=f.ai.split("|")[0],n=f.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){zt.a.rcvCfg=f.timeout;break}d++}d=0,zt.j.limitP2P="off";var h=!1;if(zt.j.closeP2PNetList.length>0)for(var p=0;p<zt.j.closeP2PNetList.length;p++)if(zt.j.closeP2PNetList[p]===r){h=!0;break}if(zt.j.closeP2PTvidList.length>0)for(var _=0;_<zt.j.closeP2PTvidList.length;_++)if(zt.j.closeP2PTvidList[_]===Yt.a.tvId){h=!0;break}if(zt.j.closeP2PFileTypeList.length>0)for(var v=0;v<zt.j.closeP2PFileTypeList.length;v++)if(zt.j.closeP2PFileTypeList[v]===Yt.a.fileType){h=!0;break}if(!h)for(;d<ln.cdn.cache.p2p.length;){var g=ln.cdn.cache.p2p[d];if(t=g.ai.split("|")[0],n=g.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var y=0;y<g.time.length;){if(vn(g.time[y])){zt.j.limitP2P="on";break}y++}break}d++}if(d=0,ln.cdn.cache.reLoad)for(;d<ln.cdn.cache.reLoad.length;){var m=ln.cdn.cache.reLoad[d];if(t=m.ai.split("|")[0],n=m.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){zt.a.reLoadCfg=m.timeout;break}d++}var b=0;for(Yt.a.absOpen=!1;b<ln.abs.open.length;){var k=ln.abs.open[b];if(t=k.ai.split("|")[0],n=k.ai.split("|")[1],!("*"!==t&&t!==r||"*"!==n&&0!==i.indexOf(n))){for(var x=k.time.length,S=0;S<x;){if(vn(k.time[S])){Yt.a.absOpen=!0;break}S++}break}b++}}}}function vn(e){if("*"===e)return!0;var t=e.split("-")[0],n=e.split("-")[1],r=e.split("-")[2],i=60*parseInt(n.split(":")[0])+parseInt(n.split(":")[1]),a=60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1]);if(i>=0&&a>i){var o=new Date,s=o.getDay().toString(),c=60*o.getHours()+o.getMinutes();if(("*"===t||s===t)&&c>=i&&c<a)return!0}return!1}var gn={load:function(){pn(),dn=0,fn()},loadBGPIP:function(){var e=new XMLHttpRequest;e.responseType="text",e.onreadystatechange=function(){if(0===e.readyState);else if(1===e.readyState);else if(2===e.readyState);else if(3===e.readyState);else if(200===e.status&&e.response)try{if(""===Yt.a.bgpIP_1){var t=e.response.split(";");Yt.a.bgpIP_1=t[0],t.length>1&&(Yt.a.bgpIP_2=t[1])}}catch(n){}};try{e.open("GET","https://103.44.59.54/3e8?rn="+Date.now(),!0),e.send()}catch(t){}},checkConfig:_n},yn=n(12),mn=Object.defineProperties({loader:{all:0,count:0,message:""},dispatcher:{all:0,count:0,message:""},errorFragment:null},{errorMessage:{get:function(){return"[ loader:"+this.loader.message+" , dispatcher:"+this.dispatcher.message+"]"},configurable:!0,enumerable:!0}}),bn=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.pos=[],this.time=[0],this.sourceID=null,this.loadInfo=[]}}]),e}();function kn(e,t){var n=e.m3u8;if("video"===t){if(n.hasOwnProperty("video_track1")&&n.video_track1.hasOwnProperty("files"))return n.video_track1.files}else if("audio"===t&&n.hasOwnProperty("audio_track1")&&n.audio_track1.hasOwnProperty("files"))return n.audio_track1.files;return null}var xn={getM4sDuration:function(e){var t=e.m3u8;return t.hasOwnProperty("video_track1")&&t.hasOwnProperty("audio_track1")?Math.min(parseFloat(t.video_track1.duration_second),parseFloat(t.audio_track1.duration_second)):t.duration},getGapPos:function(e,t,n,r){var i=kn(e,n);if(null===i)return null;if(t>=e.duration){var a=i.length-1,o=i[a].seekable.time.length,s=i[a].seekable.pos.length;return"start"===r?{segmentIndex:a,chunkIndex:s-2,time:Gt.a.accAdd(i[a].start_second,i[a].seekable.time[o-2]),pos:i[a].seekable.pos[s-2]}:{segmentIndex:a,chunkIndex:s-1,time:Gt.a.accAdd(i[a].start_second,i[a].seekable.time[o-1]),pos:i[a].seekable.pos[s-1]}}for(var c=0;c<i.length;c++)if(t>=i[c].start_second&&t<Gt.a.accAdd(i[c].start_second,i[c].duration_second)){for(var u=i[c].start_second,d=i[c].seekable.time,l=0;l<d.length;l++)if(t>=Gt.a.accAdd(u,d[l])&&t<Gt.a.accAdd(u,d[l+1]))return"start"===r?{segmentIndex:c,chunkIndex:l,time:Gt.a.accAdd(u,d[l]),pos:i[c].seekable.pos[l]}:{segmentIndex:c,chunkIndex:l,time:Gt.a.accAdd(u,d[l+1]),pos:i[c].seekable.pos[l+1]}}else if("end"===r&&t===Gt.a.accAdd(i[c].start_second,i[c].duration_second)){var f=i[c].seekable.time.length-1;return{segmentIndex:c,chunkIndex:f-1,time:Gt.a.accAdd(i[c].start_second,i[c].duration_second),pos:i[c].seekable.pos[f]}}return null},getFilesInfo:kn,getDuratioSecond:function(e,t,n){var r=xn.getFilesInfo(e,t);return n<=r.length-1?Gt.a.accAdd(r[n].duration_second,r[n].start_second):0},getSegmentIdx:function(e,t){return e+t},getSegmentSize:function(e,t,n){var r=kn(e,t);return n<r.length?r[n].size:-1},getChunkSEPos:function(e,t,n,r){var i=kn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;if(a.hasOwnProperty("pos")&&a.pos[r+1])return{sPos:a.pos[r],ePos:a.pos[r+1]}}return null},getNextChunkInfo:function(e,t,n,r){var i=kn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r+1<a.pos.length-1?{segmentIndex:n,chunkIndex:r+1,sTime:Gt.a.accAdd(i[n].start_second,a.time[r+1]),eTime:Gt.a.accAdd(i[n].start_second,a.time[r+2]),sPos:a.pos[r+1],ePos:a.pos[r+2]}:n<i.length-1?(a=i[n+1].seekable,{segmentIndex:n+1,chunkIndex:0,sTime:Gt.a.accAdd(i[n+1].start_second,a.time[0]),eTime:Gt.a.accAdd(i[n+1].start_second,a.time[1]),sPos:a.pos[0],ePos:a.pos[1]}):null}return null},getCurChunkInfo:function(e,t,n,r){var i=kn(e,t);if(i[n]&&i[n].hasOwnProperty("seekable")){var a=i[n].seekable;return r<a.pos.length-1?{segmentIndex:n,chunkIndex:r,sTime:Gt.a.accAdd(i[n].start_second,a.time[r]),eTime:Gt.a.accAdd(i[n].start_second,a.time[r+1]),sPos:a.pos[r],ePos:a.pos[r+1]}:null}return null},getTSGapPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8;if(t>=e.duration){var i=r.length-1,a=r[i].time.length,o=r[i].pos.length;return"start"===n?{segmentIndex:i,chunkIndex:o-1,time:Gt.a.accAdd(r[i].start_second,r[i].time[a-2]),pos:r[i].pos[o-1].sPos}:{segmentIndex:i,chunkIndex:o-1,time:Gt.a.accAdd(r[i].start_second,r[i].time[a-1]),pos:r[i].pos[o-1].ePos}}for(var s=0;s<r.length;s++)if(t>=r[s].start_second&&t<Gt.a.accAdd(r[s].start_second,r[s].duration_second)){for(var c=r[s].start_second,u=r[s].time,d=0;d<u.length;d++)if(d===u.length-1||t>=Gt.a.accAdd(c,u[d])&&t<Gt.a.accAdd(c,u[d+1]))return"start"===n?{segmentIndex:s,chunkIndex:d,time:Gt.a.accAdd(c,u[d]),pos:r[s].pos[d].sPos}:{segmentIndex:s,chunkIndex:d,time:Gt.a.accAdd(c,u[d+1]),pos:r[s].pos[d].ePos}}else if("end"===n&&t===Gt.a.accAdd(r[s].start_second,r[s].duration_second)){var l=r[s].pos.length-1;return{segmentIndex:s,chunkIndex:l,time:Gt.a.accAdd(r[s].start_second,r[s].duration_second),pos:r[s].pos[l].ePos}}return null},getTSChunkSEPos:function(e,t,n){if(!e.hasOwnProperty("m3u8")||0===e.m3u8.length)return null;var r=e.m3u8;if(r[t]){var i=r[t].pos;if(n<r[t].pos.length)return{sPos:i[n].sPos,ePos:i[n].ePos}}return null},getTSDuratioSecond:function(e,t){var n=e.m3u8;return Gt.a.accAdd(n[t].duration_second,n[t].start_second)},getTSNextChunkInfo:function(e,t,n){var r=e.m3u8;return t>=r.length?null:n<r[t].pos.length-1?{segmentIndex:t,chunkIndex:n+=1,sTime:Gt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:Gt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}:t<r.length-1&&n>=r[t].pos.length-1?(n=0,{segmentIndex:t+=1,chunkIndex:0,sTime:Gt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:Gt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}):t>=r.length-1&&n>=r[t].pos.length-1?null:void 0},getCurTSChunkInfo:function(e,t,n){var r=e.m3u8;return r&&r[t]&&n<r[t].time.length-1?{segmentIndex:t,chunkIndex:n,sTime:Gt.a.accAdd(r[t].start_second,r[t].time[n]),eTime:Gt.a.accAdd(r[t].start_second,r[t].time[n+1]),sPos:r[t].pos[n].sPos,ePos:r[t].pos[n].ePos}:null}},Sn=xn,Tn=n(11),Pn=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.duration_second=0,this.file_name=null,this.start_second=0,this.seekable={pos:[],time:[]},this.sourceID=null,this.loadInfo=[],this.size=0}}]),e}();var In,wn,An=function(){function e(){i()(this,e),this.close()}return o()(e,[{key:"close",value:function(){this._bitRateList=[],this._bidTovidList=null}},{key:"vidList",get:function(){return this._bidTovidList}},{key:"bitRateList",get:function(){return this._bitRateList}},{key:"parser",value:function(e){this._bidTovidList||(this._bidTovidList=e.vidlist),e.bid!==zt.g&&this._bitRateList.indexOf(e.bid)<0&&this._bitRateList.push(e.bid);var t=null;return e.type===Tn.a.M4S||e.type===Tn.a.DASH?t=function(e,t){var n={},r=null,i=null,a=0,o=null,s=null,c={video_track1:{files:[]},audio_track1:{files:[]}};if(t===Tn.a.M4S)r=Sn.getFilesInfo({m3u8:e},"video"),i=Sn.getFilesInfo({m3u8:e},"audio"),n.duration=Sn.getM4sDuration({m3u8:e});else{if(t!==Tn.a.DASH)return null;r=e.video.segments,i=e.audio.segments,(e.video.duration||e.audio.duration)&&(n.duration=e.video.duration?e.video.duration:e.audio.duration)}for(var u=0,d={},l=0,f=0;f<r.length;f++)if(null!==r[f]&&r[f].hasOwnProperty("seekable")&&r[f].seekable.hasOwnProperty("pos")&&r[f].seekable.hasOwnProperty("time")){c.video_track1.files[f]=r[f];var h=r[f].seekable,p=h.pos.length;h.pos[p-1]!==r[f].size&&h.pos.push(r[f].size),h.time[p-1]!==r[f].duration_second&&h.time.push(r[f].duration_second),r[f].sourceID=Gt.a.getFileNameFromUrl(r[f].file_name),u+=h.time.length-1,c.video_track1.files[f].seekable=h}else if(null!==r[f]&&r[f].hasOwnProperty("seekable")&&r[f].seekable.hasOwnProperty("pos_start")){if(o=r[f].file_name.toString(),0===f||o!==s.file_name||r[f-1].pos_end!==r[f].pos_start?(0===f?u=r.length:(s.size=r[f-1].seekable.pos_end,s.duration_second=Gt.a.accSub(r[f].start_second,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l},0===r[f].seekable.pos_start&&l++),(s=new Pn).file_name=o,s.start_second=r[f].start_second,s.seekable.time.push(Gt.a.accSub(r[f].start_second,s.start_second)),s.seekable.pos.push(r[f].seekable.pos_start),s.seekable.pos.push(r[f].seekable.pos_end),s.sourceID=Gt.a.getFileNameFromUrl(o)):(s.seekable.pos.push(r[f].seekable.pos_end),s.seekable.time.push(Gt.a.accSub(r[f].start_second,s.start_second))),f===r.length-1){s.size=r[f].seekable.pos_end,s.duration_second=Gt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[f].duration_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l};var _=0,v=c.video_track1.files;for(Object.keys(d).length!==v.length?Yt.a.MixWaterMark=!0:Yt.a.MixWaterMark=!1;_<v.length;)v[_].size=d[v[_].sourceID].size,v[_].realIdx=d[v[_].sourceID].idx,_++}}else{var g=Gt.a.getFileNameFromUrl(r[f].uri.toString());if(0===f){var y=e.video.init;(s=new Pn).file_name=y.uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(y.startByte),s.seekable.pos.push(y.endByte),s.seekable.time.push(0),s.size=y.endByte,s.start_second=-1,s.realIdx=l,c.video_track1.files.push(s),l++,(s=new Pn).file_name=r[f].uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),a=r[f].endByte,s.seekable.pos.push(r[f].startByte),s.seekable.pos.push(r[f].endByte),s.seekable.time.push(Gt.a.accSub(r[f].startTime,s.start_second)),u=r.length}else a===r[f].startByte&&s.sourceID===g?(s.seekable.pos.push(r[f].endByte),s.seekable.time.push(Gt.a.accSub(r[f].startTime,s.start_second)),a=r[f].endByte):(s.size=r[f-1].endByte,s.duration_second=Gt.a.accSub(r[f].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l},0===r[f].startByte&&l++,(s=new Pn).file_name=r[f].uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),a=r[f].endByte,s.start_second=r[f].startTime,s.seekable.pos.push(r[f].startByte),s.seekable.pos.push(r[f].endByte),s.seekable.time.push(Gt.a.accSub(r[f].startTime,s.start_second)));if(f===r.length-1){s.size=r[f].endByte,s.duration_second=Gt.a.accAdd(s.seekable.time[s.seekable.time.length-1],r[f].duration),s.seekable.time.push(s.duration_second),c.video_track1.files.push(s),d[s.sourceID]={size:s.size,idx:l};var m=1,b=c.video_track1.files;for(Object.keys(d).length!==b.length-1?Yt.a.MixWaterMark=!0:Yt.a.MixWaterMark=!1;m<b.length;)b[m].size=d[b[m].sourceID].size,b[m].realIdx=d[b[m].sourceID].idx,m++}}for(var k=0;k<i.length;k++)if(null!==i[k]&&i[k].hasOwnProperty("seekable")&&i[k].seekable.hasOwnProperty("pos")&&i[k].seekable.hasOwnProperty("time")){c.audio_track1.files[k]=i[k];var x=i[k].seekable,S=x.pos.length;x.pos[S-1]!==i[k].size&&x.pos.push(i[k].size),x.time[S-1]!==i[k].duration_second&&x.time.push(i[k].duration_second),i[k].sourceID=Gt.a.getFileNameFromUrl(i[k].file_name),c.audio_track1.files[k].seekable=x}else if(0===k){var T=e.audio.init;(s=new Pn).file_name=T.uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),s.seekable.pos.push(T.startByte),s.seekable.pos.push(T.endByte),s.seekable.time.push(0),s.size=T.endByte,s.start_second=-1,c.audio_track1.files.push(s),(s=new Pn).file_name=i[k].uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),a=i[k].endByte,s.seekable.pos.push(i[k].startByte),s.seekable.pos.push(i[k].endByte),s.seekable.time.push(Gt.a.accSub(i[k].startTime,s.start_second))}else a===i[k].startByte?(s.seekable.pos.push(i[k].endByte),s.seekable.time.push(Gt.a.accSub(i[k].startTime,s.start_second)),a=i[k].endByte):(s.size=i[k-1].endByte,s.duration_second=Gt.a.accSub(i[k].startTime,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s),(s=new Pn).file_name=i[k].uri.toString(),s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),a=i[k].endByte,s.start_second=i[k].startTime,s.seekable.pos.push(i[k].startByte),s.seekable.pos.push(i[k].endByte)),k===i.length-1&&(s.size=i[k].endByte,s.duration_second=Gt.a.accSub(n.duration,s.start_second),s.seekable.time.push(s.duration_second),c.audio_track1.files.push(s));return n.m3u8=c,{info:n,chunkNum:u}}(e.dataFlow,e.type):e.type===Tn.a.TS&&(t=function(e){var t={},n=0,r={};if(e){var i=[],a=0,o=e.length,s=new bn;s.start_second=a,s.file_name=e[0].__url,s.sourceID=Gt.a.getFileNameFromUrl(s.file_name);for(var c=0,u=0,d=0,l=0;l<o;l++){if(l>0){var f=Gt.a.getFileNameFromUrl(e[l].__url),h=e[l].startByte;h===c&&f===s.sourceID||(s.duration_second=Gt.a.accSub(d,s.start_second),s.size=c,i.push(s),t[s.sourceID]={size:s.size,idx:n},0===h&&n++,(s=new bn).file_name=e[l].__url,s.sourceID=Gt.a.getFileNameFromUrl(s.file_name),s.start_second=d)}var p=e[l].startByte,_=e[l].endByte;l<o-1?u=e[l+1].startTime:r.duration=u=d+e[l].duration,c=_,s.pos.push({sPos:p,ePos:_});var v={};v.startPos=p,v.endPos=c,v.contentlength=v.endPos-v.startPos,v.sd=d,s.loadInfo.push(v),s.time.push(Gt.a.accSub(u,s.start_second)),d=u}s.duration_second=Gt.a.accSub(u,s.start_second),s.size=c,t[s.sourceID]={size:s.size,idx:n},i.push(s),Object.keys(t).length!==i.length?Yt.a.MixWaterMark=!0:Yt.a.MixWaterMark=!1;for(var g=0;g<i.length;)i[g].size=t[i[g].sourceID].size,i[g].realIdx=t[i[g].sourceID].idx,g++;return r.m3u8=i,{info:r,chunkNum:o}}}(e.dataFlow.stream)),t?(t.info.vsize=e.vsize,t.info.vid=e.vid,t.info.chunkNum=t.chunkNum,{levelID:e.bid,data:t.info}):null}}]),e}(),En=function(){function e(){i()(this,e),this._size=0,this._dicMap=new Map}return o()(e,[{key:"has",value:function(e){return this._dicMap.has(e)}},{key:"get",value:function(e){var t=this._dicMap.get(e);return t||null}},{key:"set",value:function(e,t){this._dicMap.has(e)||this._size++,this._dicMap.set(e,t)}},{key:"remove",value:function(e){var t=this._dicMap.get(e);return t&&(this._dicMap["delete"](e),this._size--),t}},{key:"clear",value:function(){this._size=0,this._dicMap.clear()}},{key:"values",get:function(){return this._dicMap}},{key:"size",get:function(){return this._size}}]),e}(),Dn=(n(194),n(198),n(199),n(126)),qn=n.n(Dn),On=(n(145),/[^0-9a-eA-E]+/g),Rn=16777216,Ln=65536,Mn=256,Cn=0,Nn=0,Bn=null,Fn=!1;function Un(e){if(e<=0&&(Bn=null),Bn){if(e>Bn.byteLength){var t=new Uint8Array(e);t.set(Bn,0),Bn=t}}else Bn=new Uint8Array(e)}var jn=Object.defineProperties({resetData:function(){Nn=0,Cn=0,Fn=!1},setStr:function(e){var t=Math.ceil(e.length/2);if(Bn||Un(Cn+t),null!==On.exec(e))throw"EncodeBuffer setStr string need baseEnCode!";var n=e.length%2;Cn+t>Nn&&(Un(Cn+t),Nn=Cn+t);for(var r=0;r<e.length;r+=2){var i=void 0,a=void 0;1===n&&r===e.length-1?(i=parseInt("0x"+e[r]),a=0):(i=parseInt("0x"+e[r]),a=parseInt("0x"+e[r+1])),Bn[Cn+Math.ceil(r/2)]=a+15*i}Cn+=t},setCharStr:function(e){var t=Math.ceil(e.length);Bn||Un(Cn+t),Cn+t>Nn&&(Un(Cn+t),Nn=Cn+t);for(var n=0;n<e.length;n++)Bn[Cn+n]=parseInt("0x"+e[n]);Cn+=t},setUTF8Str:function(e){var t=Math.ceil(e.length);Bn||Un(Cn+t),Cn+t>Nn&&(Un(Cn+t),Nn=Cn+t);for(var n=0;n<e.length;n++)Bn[Cn+n]=e[n].charCodeAt();Cn+=t},set8:function(e){Bn||Un(Cn+1),Cn+1>Nn&&(Un(Cn+1),Nn=Cn+1),Bn[Cn]=e,Cn+=1},set16:function(e){Bn||Un(Cn+2),Cn+2>Nn&&(Un(Cn+2),Nn=Cn+2);var t=e;t>=Mn?(Bn[Cn]=Math.floor(t/Mn),t%=Mn):Bn[Cn]=0,Bn[Cn+1]=t,Cn+=2},set32:function(e){Bn||Un(Cn+4),Cn+4>Nn&&(Un(Cn+4),Nn=Cn+4);var t=e;t>=Rn?(Bn[Cn]=Math.floor(t/Rn),t%=Rn):Bn[Cn]=0,t>=Ln?(Bn[Cn+1]=Math.floor(t/Ln),t%=Ln):Bn[Cn+1]=0,t>=Mn?(Bn[Cn+2]=Math.floor(t/Mn),t%=Mn):Bn[Cn+2]=0,Bn[Cn+3]=t,Cn+=4},setBytes:function(e,t,n){Bn||Un(Cn+n),Cn+n>Nn&&(Un(Cn+n),Nn=Cn+n),Bn.set(e.subarray(t,t+n),Cn),Cn+=n},clear:function(){Bn=null},toString:function(){for(var e="",t=Nn<=64?Nn:64,n=0;n<t;n++){var r=Bn[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e},crc:function(){for(Cn=Nn,Fn?Cn-=4:(Bn||Un(Cn+4),Cn+4>Nn&&(Un(Cn+4),Nn=Cn+4)),In=Math.floor(Nn/4),wn=0;wn<4;)Bn[Cn+wn]=Bn[wn*In],wn++;Cn+=4,Fn=!0},getData:function(){return new Uint8Array(Bn.buffer.slice(0,Nn))},getReferData:function(){return new Uint8Array(Bn.buffer.slice(0,Nn))}},{position:{set:function(e){Cn=e},get:function(){return Cn},configurable:!0,enumerable:!0},length:{get:function(){return Nn},configurable:!0,enumerable:!0}});function Vn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hn=new En,zn=null,Yn=0,Gn=!1;function Qn(e){var t=Hn.remove(e);t&&(zn===t&&(zn=null),t.destroy())}function Kn(e){var t=Hn.get(e);t&&t.destroyChunk(e)}function $n(){Yn=0;var e=Zn();if(Yt.a.platform===on){for(var t=!1,n=!1,r=0;r<e.length;r++){var i=e[r].index.slice(0,1),a=e[r].index.slice(1);"a"===i&&(e[r].fileType!==Tn.a.DASH||a>0)&&Kn(e[r].alias),e[r]&&(Yn=e[r].memory+Yn),-1!==e[r].peerCnt&&e[r].peerCnt>1e3&&(t=!0),-1!==e[r].peerCnt&&e[r].peerCnt<=1e3&&(n=!0),e[r].fileType===Tn.a.DASH&&0===a&&(e[r].status=0),e[r].tvid!==Yt.a.tvId&&e[r].tvid!==Yt.a.lastReadTvID&&0===e[r].status&&(e[r].status=1)}if(yn.a.info("memorySize : "+Yn+", "+Math.floor(Yn/1024/1024)+"M"),Yn>=zt.d.videoMaxSize){if(t&&n){e.sort((function(e,t){return t.peerCnt-e.peerCnt}));for(var o=0;o<e.length;o++)if(Yn>zt.d.videoMaxSize&&e[o]&&1===e[o].status&&e[o].peerCnt>1e3){Yn-=e[o].memory,Qn(e[o].alias);break}}if(Yn>=zt.d.videoMaxSize){(e=Zn()).sort((function(e,t){return e.shareDataNum-t.shareDataNum}));for(var s=0;s<e.length;s++)e[s].shareDataNum=0,Yn>=zt.d.videoMaxSize&&e[s]&&1===e[s].status&&(Yn-=e[s].memory,Qn(e[s].alias));if(Yn>=zt.d.videoMaxSize){(e=Zn()).sort((function(e,t){return parseInt(e.index.slice(1))-parseInt(t.index.slice(1))}));for(var c=0;c<e.length;c++)if(e[c]&&Yn>=zt.d.videoMaxSize){var u=e[c].index.slice(0,1),d=e[c].index.slice(1);if(e[c].tvid===Yt.a.tvId||e[c].tvid===Yt.a.lastReadTvID)continue;"e"===u&&d<Yt.a.lastReadSegIndex&&e[c].shareDataNum<10&&(Yn-=e[c].memory,Qn(e[c].alias))}}}}}else if(Yt.a.platform===sn)for(var l=0;l<e.length;l++)e[l]&&(e[l].tvid!==Yt.a.tvId&&e[l].tvid!==Yt.a.lastReadTvID&&0===e[l].status&&(e[l].status=1),1===e[l].status?(Yn-=e[l].memory,Qn(e[l].alias)):Kn(e[l].alias));setTimeout($n,6e4)}function Zn(){var e,t=[],n=Vn(Hn.values);try{for(n.s();!(e=n.n()).done;){var r=qn()(e.value,2)[1];t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}var Xn=Object.defineProperties({getSegment:function(e){return Hn.get(e)},hasSegment:function(e){return Hn.has(e)},setSegment:function(e,t){t&&(Hn.set(e,t),Gn||(Gn=!0,$n()))},removeSegment:Qn,setLoadSegment:function(e){if(!zn||zn.alias!==e)if(e){var t=Hn.get(e);t?(zn&&zn.clearTask(),zn&&zn.alias===t.alias||(zn=t)):zn=null}else zn&&zn.clearTask(),zn=null},getSourceDescribe:function(e){jn.resetData();var t=Zn(),n=0;jn.set16(e.length),jn.setCharStr(e);for(var r=0;r<t.length;r++)t[r].vid===e&&n++;jn.set16(n);for(var i=0;i<t.length;i++)if(t[i].vid===e){var a=t[i].bitmap;jn.set16(a.data.byteLength+8),jn.set32(a.alias),jn.set32(a.size),jn.setBytes(a.data,0,a.data.byteLength)}return jn.getData()},destroy:function(){var e,t=Vn(Hn.values);try{for(t.s();!(e=t.n()).done;){Qn(qn()(e.value,1)[0])}}catch(n){t.e(n)}finally{t.f()}}},{segmentList:{get:function(){return Zn()},configurable:!0,enumerable:!0},loadSegment:{get:function(){return zn},configurable:!0,enumerable:!0},memorySize:{get:function(){return Yn},configurable:!0,enumerable:!0},size:{get:function(){return Hn.size},configurable:!0,enumerable:!0}}),Jn=null,er=new Array(5),tr=new Array(5),nr=0,rr=new Map,ir=0,ar=0,or=0,sr=null,cr=0,ur="",dr=null,lr=Gt.a.QC005?Gt.a.QC005:Math.random().toString(36).substr(2),fr=function(){function e(){i()(this,e),this.levelID=-1,this.nextReqThreshold=0,rr.clear(),ur=Yt.a.absDoMain?(an.isHTTPS?"https":"http")+"://"+Yt.a.absDoMain+"/ABSRequest":(an.isHTTPS?"https":"http")+"://abs.video.iqiyi.com/ABSRequest",this.connectWebscoket(),this.lastLevel=-1,this.receiveCount=0,this.algorithm_des="defal",dr||Yt.a.getUserInfoFunc(hr)}return o()(e,[{key:"connectWebscoket",value:function(){this.loader=new XMLHttpRequest;var e=this;this.loader.onloadend=function(t){var n=t.currentTarget,r=n.status,i=JSON.parse(n.response);r>=200&&r<300?"0"===i.errorcode?(e.levelID=parseInt(i.bitrate),e.algorithm_des=i.algorithm_des,e.receiveCount++,yn.a.info(" receive Message  ~~~~~~~~~~~~~~~~~~~~quality: "+e.levelID+" levelID "+rr.get(e.levelID)+", msg_seq "+i.msg_seq+" ,algorithm "+e.algorithm_des)):yn.a.error("ABS proxy return errCode "+i.errorcode):(e.algorithm_des="connectFailed",yn.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~status err "+r))},this.loader.onerror=function(t){e.algorithm_des="connectFailed",yn.a.error(" receive Message  ~~~~~~~~~~~~~~~~~~~~error "+t)},this.loader.onabort=function(){e.algorithm_des="connectFailed",yn.a.warn(" receive Message  ~~~~~~~~~~~~~~~~~~~~onabort")}}},{key:"bitrate",get:function(){var e=Yt.a.bid;if(e)return parseInt(e);if(-1!==this.levelID&&rr.has(this.levelID)){var t=rr.get(this.levelID);return t>this.lastLevel?(or!==this.receiveCount&&(or=this.receiveCount,ar++),ar>1?t:this.lastLevel):t<this.lastLevel?(ar=0,t):t}return-1}},{key:"algorithmDes",get:function(){return this.algorithm_des}},{key:"close",value:function(){this.levelID=-1,this.lastLevel=-1,this.nextReqThreshold=0,this.receiveCount=0,this.algorithm_des="defal",rr.clear(),this.loader&&(this.loader.abort(),yn.a.warn("abs close,close connnection ")),sr=dr=null}},{key:"reportData",value:function(e){var t=this.makeReportJsonData(e);if(t&&this.loader&&("0"!==t.msg_seq||"-1"!==t.report.bandwidthEst))try{this.loader.open("POST",ur,!0),this.loader.withCredentials=!1,this.loader.setRequestHeader("Content-Type","application/json"),yn.a.info(" send Message  ~~~~~~~~~~~~~~~~~~~~ num "+t.msg_seq+","+JSON.stringify(t)),this.loader.send(JSON.stringify(t))}catch(n){yn.a.error("ABSStrategy send resquest tryCatchError"+n)}}},{key:"makeReportJsonData",value:function(e){this.lastLevel=e.bid;for(var t=[],n=0;n<e.bidList.length;n++){var r=8*Math.round(e.totalSizeList[n]/e.duration);rr.get(r)!==e.bidList[n]&&rr.set(r,e.bidList[n]),0!==e.chunkSizeList[n]&&(Jn={rate:r.toString(),size:e.chunkSizeList[n].toString(),chunkcnt:e.chunk_count.toString()},t.push(Jn))}if(0!==t.length){dr||Yt.a.getUserInfoFunc(hr),(isNaN(e.rebuffTime)||!e.rebuffTime||e.rebuffTime<0)&&(e.rebuffTime=0);var i=0;e.index===ir?i+=e.rebuffTime:(ir=e.index,i=e.rebuffTime);var a=Math.round(1e3*e.buffer_level),o=0,s=0,c=0,u=0;e.loadTime>=50&&e.loadSize>0&&(er[nr%er.length]=e.loadSize,tr[nr%er.length]=e.loadTime,nr++),e.loadSize>0&&e.loadTime>0&&(u=Math.round(e.loadSize/(e.loadTime/1e3)));for(var d=0;d<er.length&&er[d];d++)o+=er[d],s+=tr[d];o>0&&s>0&&(c=Math.round(o/(s/1e3)));var l=e.loadSize>0?8*Math.min(c,u):-1,f=8*Math.round(e.size/e.duration);return sr||(sr=Gt.a.getUserInfoFromCookie()),{clientid:lr,version:"0.5.1",client_version:"111",msg_seq:(cr++).toString(),msgid:"3",device_type:"pc",isp:sr.userNetType,city:sr.userArea,isvip:dr?"1":"0",isp2p:(Xn.loadSegment?1:0).toString(),channel_type:"movie",report:{last_chunk_id:e.index.toString(),last_chunk_size:e.lastChunkSize.toString(),last_chunk_quality:f.toString(),chunk_count:e.chunk_count.toString(),buffer_level:a.toString(),rebuff_time:Math.round(i).toString(),bandwidthEst:l.toString(),next_chunk_info:t,buffer_array:e.bufferArr,bufffer_step:e.bufferUpdateStep.toString()}}}}}],[{key:"clearRaiseLevelCount",value:function(){ar=0}}]),e}();function hr(e){dr=e}var pr,_r,vr=n(243),gr=n.n(vr),yr=function(){function e(t){i()(this,e),this.name=t,this._count=0}return o()(e,[{key:"toString",value:function(){return this._count.toString()}},{key:"add",value:function(e){this._count+=e}},{key:"reset",value:function(){this._count=0}}]),e}(),mr={stratus_connectCnt:new yr("scnt"),stratus_connectSuccess:new yr("sscu"),stratus_duration:new yr("sdur"),stratus_break:new yr("sbrk"),cdn_taskCnt:new yr("ctct"),cdn_progressCnt:new yr("cpct"),cdn_progressTime:new yr("cptm"),cdn_loadTime:new yr("cltm"),dispatchKey_Cnt:new yr("dkcnt"),dispatchKey_Done:new yr("dkdon"),dispatch_Cnt:new yr("dict"),dispatch_doneCount:new yr("ddct"),dispatch_duration:new yr("ddur"),change_definition:new yr("cdef"),init:function(){pr||(pr=[this.stratus_connectCnt,this.stratus_connectSuccess,this.stratus_duration,this.stratus_break,this.cdn_taskCnt,this.cdn_progressCnt,this.cdn_progressTime,this.cdn_loadTime,this.dispatchKey_Cnt,this.dispatchKey_Done,this.dispatch_Cnt,this.dispatch_doneCount,this.dispatch_duration,this.change_definition])},reset:function(){for(var e=0;e<pr.length;e++)pr[e].reset()},tail:function(e){for(var t=0;t<pr.length;t++)e[pr[t].name]=pr[t].toString()}},br=0,kr=0,xr=0,Sr=0,Tr=0,Pr=0,Ir=0,wr=0,Ar=0,Er=!1;function Dr(){var e;mr.init(),Er=!0,(++qr>=4||br-Tr+(kr-Pr)+(xr-Ir)>12582912)&&((e={t:"h5timing"}).lp2p=kr-Pr,e.up2p=xr-Ir,e.lcdn=br-Tr,e.used=Sr-wr,mr.tail(e),e.dats=zt.d.videoDataSize,e.srcn=Xn.size,e.plydu=Yt.a.playDuration-Ar,e.lmax=Yt.a.downMax,Or(e),mr.reset(),Tr=br,Pr=kr,Ir=xr,wr=Sr,Ar=Yt.a.playDuration,qr=0),_r=setTimeout(Dr,1e4)}var qr=0;function Or(e){if(Er){var t=Gt.a.getUserInfoFromCookie();e.uid=Yt.a.uuid,e.uif=t.userInfo,e.tvid=Yt.a.tvId,e.tkip=Yt.a.trackerIP,e.lstws=t.ws,e.lstidc=t.idc,e.ver=zt.l.version,e.cal=br,e.pal=kr,Gt.a.fireUrl(e,"//msg.qy.net/vodpb.gif")}}var Rr,Lr,Mr=Object.defineProperties({start:function(){Er||Dr()},stop:function(){Er=!1,clearTimeout(_r)},check:function(e){Er&&(e.t="h5check",Or(e))},addPBItem:function(e,t){t?e.add(t):e.add(1)}},{cdnSize:{get:function(){return br},set:function(e){br=e},configurable:!0,enumerable:!0},p2pSize:{get:function(){return kr},set:function(e){kr=e},configurable:!0,enumerable:!0},upSize:{get:function(){return xr},set:function(e){xr=e},configurable:!0,enumerable:!0},usedSize:{get:function(){return Sr},set:function(e){Sr=e},configurable:!0,enumerable:!0}}),Cr=0,Nr=0,Br=null;var Fr=Object.defineProperties({resetData:function(e){if(e){if(e instanceof ArrayBuffer)Nr=e.byteLength,Br=new Uint8Array(e);else{if(!(e instanceof Uint8Array))return;Nr=e.byteLength,Br=e}Cr=0}},getStr:function(e){if(!Br)return"";var t=Math.ceil(e/2),n=e%2;if(Cr+t>Nr&&(t=Nr-Cr),t<=0)return"";for(var r="",i=0;i<t;i++){var a=Br[Cr+i],o=void 0;1===n&&i===t-1?r+=Math.floor(a/15).toString(16):(o=a%15,r+=Math.floor(a/15).toString(16)+o.toString(16))}return Cr+=t,r},getCharStr:function(e){if(!Br)return"";var t=Math.ceil(e);if(Cr+t>Nr&&(t=Nr-Cr),t<=0)return"";for(var n="",r=0;r<t;r++){n+=Br[Cr+r].toString(16)}return Cr+=t,n},getUTF8Str:function(e){if(!Br)return"";var t=Math.ceil(e);if(Cr+t>Nr&&(t=Nr-Cr),t<=0)return"";for(var n="",r=0;r<t;r++){var i=Br[Cr+r];n+=String.fromCharCode(i)}return Cr+=t,n},get8:function(){if(!Br||Cr+1>Nr)return 0;var e=Br[Cr];return Cr+=1,e},get16:function(){if(!Br||Cr+2>Nr)return 0;var e=256*Br[Cr]+Br[Cr+1];return Cr+=2,e},get32:function(){if(!Br||Cr+4>Nr)return 0;var e=16777216*Br[Cr]+65536*Br[Cr+1]+256*Br[Cr+2]+Br[Cr+3];return Cr+=4,e},getBytes:function(e){if(!Br||Cr+e>Nr)return null;var t=Br.subarray(Cr,Cr+e);return Cr+=e,t},clear:function(){Br=null},crc:function(){for(Cr=Nr-4,Rr=Math.floor(Nr/4),Lr=0;Lr<4;){if(Br[Cr+Lr]!==Br[Lr*Rr])return!1;Lr++}return!0},toString:function(){for(var e="",t=Nr<=64?Nr:64,n=0;n<t;n++){var r=Br[n];e+=r<16?"0"+r.toString(16):r.toString(16),n<t-1&&(e+="-")}return e}},{position:{set:function(e){Cr=e},get:function(){return Cr},configurable:!0,enumerable:!0},length:{get:function(){return Nr},configurable:!0,enumerable:!0}}),Ur=function(){function e(t,n,r){i()(this,e),this.socket=null,this.trackerStateFun=r,this.uid="",this.startTime=0,this.watcherStep=0,this.retryStep=0,this.pbTimer=0,this.reconnectCnt=0,this.id=t,this.firstIPInfo=n,this.running=!0,this.open=!1,this.cdnSize=0,this.p2pSize=0,this.upSize=0,this.usedSize=0,this.connectCnt=0,this.connectDoneCnt=0,this.last_cdnSize=0,this.last_p2pSize=0,this.last_upSize=0,this.last_usedSize=0,this.lastConnectCnt=0,this.lastConnectDoneCnt=0,this.trackerIPBase=0,this.connect()}return o()(e,[{key:"connect",value:function(){if("off"!==Yt.a.limitP2P){if(clearTimeout(this.retryStep),this.retryStep=0,this.reconnectCnt++,this.reconnectCnt%6==3&&this.trackerIPBase++,this.reconnectCnt%6>=3||Yt.a.trackerStatus){var e=Gt.a.getUserInfoFromCookie(),t=Gt.a.getTrackerIP(e.userNetType,zt.j.tracker,this.id,this.trackerIPBase);""!==t&&(this.firstIPInfo=t)}var n=this.firstIPInfo.split("|");this.ip=n[0],this.trackerPort=n[1],this.SDomain=n[2],this.StrackerPort=n[3],this.runWSS="wss"===n[5],Yt.a.trackerIP=this.ip,Mr.addPBItem(mr.stratus_connectCnt);var r=this;try{an.isHTTPS||this.runWSS?this.socket=new WebSocket("wss://"+this.SDomain+":"+this.StrackerPort+"/ws",["binary"]):this.socket=new WebSocket("ws://"+this.ip+":"+this.trackerPort+"/ws",["binary"]),this.socket.binaryType="arraybuffer",this.socket.onopen=function(e){r.onOpen.call(r,e)},this.socket.onmessage=function(e){r.onData.call(r,e)},this.socket.onerror=function(e){r.onError.call(r,e)},this.socket.onclose=function(e){r.onClose.call(r,e)},yn.a.info("tracker [START] IP : "+this.ip+":"+this.trackerPort)}catch(i){}this.startTime=Date.now(),clearTimeout(this.watcherStep),this.watcherStep=setTimeout((function(){r.heartBeat.call(r)}),6e3),clearTimeout(this.pbTimer),this.pbTimer=setTimeout((function(){r.firePB.call(r)}),2e4)}}},{key:"onOpen",value:function(e){yn.a.info("tracker [SUCCESS] IP : "+this.ip+":"+this.trackerPort),Mr.addPBItem(mr.stratus_connectSuccess),Mr.addPBItem(mr.stratus_duration,Date.now()-this.startTime),this.open=!0,this.register()}},{key:"onTimeout",value:function(){this.running&&(yn.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : connect timeout"),this.error())}},{key:"onClose",value:function(e){this.running&&(Mr.addPBItem(mr.stratus_break),yn.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onClose-"+e.data),this.error())}},{key:"onError",value:function(e){this.running&&(yn.a.warn("tracker [ERROR] to : "+this.ip+":"+this.trackerPort+" , msg : onError-"+e.data),this.error())}},{key:"error",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.CLOSED&&Date.now()-this.startTime>6e4){this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null;var e=this;e.retryStep=setTimeout((function(){e.connect.call(e)}),2e3)}}},{key:"onData",value:function(e){try{if("off"===Yt.a.limitP2P)return void this.error();if(Fr.resetData(e.data),jr=Fr.get16(),this.running&&this.socket)switch(jr){case 1:0===(zr=Fr.get16())?(Wr=Fr.get16(),Hr=Fr.getCharStr(Wr),this.uid=Hr,Yt.a.trackerStatus=Fr.get8(),Yt.a.trackerStatus&&(this.trackerIPBase++,this.socket.close()),yn.a.info("[P2P load], onRegister uid : "+this.uid),this.onMsg(ei.State_register,this.uid)):(yn.a.warn("tracker [ERROR] register error"),this.error());break;case 3:if(0===(zr=Fr.get16())){Qr=Fr.get16();for(var t=0;t<Qr;t++){Kr=Fr.get16(),$r=Fr.getCharStr(Kr),Zr=Fr.get16();for(var n=0;n<Zr;n++){Xr=Fr.get16(),Jr=Fr.getCharStr(Xr),Vr=Fr.get32();for(var r=0;r<Xn.segmentList.length;r++)Xn.segmentList[r].p2pID===this.id&&Xn.segmentList[r].vid===$r&&Xn.segmentList[r].index===Jr&&(Xn.segmentList[r].peerCnt=Vr)}}}else 400===zr?(Mr.addPBItem(mr.stratus_break),this.error()):yn.a.warn("tracker [ERROR] update error");break;case 4:if(0===(zr=Fr.get16())){if(this.trackerStateFun){var i=Fr.get32();Vr=Fr.get16(),"[ ";for(var a=[],o=0;o<Vr;o++)Wr=Fr.get16(),(Hr=Fr.getCharStr(Wr))+"-",a.push(Hr);if(this.peerSegment){" ]";var s=Fr.get16(),c=[];" , vidList : [ ";for(var u=0;u<s;u++)Kr=Fr.get16(),$r=Fr.getCharStr(Kr),i=Fr.get32(),c.push({vid:$r,count:i}),"("+$r+":"+i+")-";" ]",this.peerSegment.checkDefinition(c),this.peerSegment=null}this.onMsg(ei.State_upDatePeers,this.uid,a)}}else 400===zr?(Mr.addPBItem(mr.stratus_break),this.error()):yn.a.warn("tracker [ERROR] query error");break;case 5:Wr=Fr.get16(),Hr=Fr.getCharStr(Wr),Yr=Fr.get16(),(Gr=Fr.getUTF8Str(Yr))&&Hr&&this.trackerStateFun&&this.onMsg(ei.State_candidate,Hr,JSON.parse(Gr));break;case 6:Wr=Fr.get16(),Hr=Fr.getCharStr(Wr),Yr=Fr.get16(),(Gr=Fr.getUTF8Str(Yr))&&Hr&&this.trackerStateFun&&this.onMsg(ei.State_offer,Hr,JSON.parse(Gr));break;case 7:Wr=Fr.get16(),Hr=Fr.getCharStr(Wr),Yr=Fr.get16(),(Gr=Fr.getUTF8Str(Yr))&&Hr&&this.trackerStateFun&&this.onMsg(ei.State_answer,Hr,JSON.parse(Gr));break;case 2:break;default:yn.a.warn("[P2P load],tracker [ERROR] not Support token : "+jr)}}catch(d){}}},{key:"onMsg",value:function(e,t,n){throw"virtual method"}},{key:"register",value:function(){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{jn.resetData(),jn.set16(1),jn.set16(zt.j.trackerVersion),jn.set16(this.uid.length),jn.setCharStr(this.uid),jn.set16(Yt.a.platform),jn.set16(Yt.a.aid.length),jn.setCharStr(Yt.a.aid);var e=jn.getReferData();this.socket.send(e)}catch(t){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"unRegister",value:function(){}},{key:"heartBeat",value:function(){var e=this;if(clearTimeout(this.watcherStep),this.running&&this.open&&this.socket&&this.socket.readyState===WebSocket.OPEN){try{if(jn.resetData(),jn.set16(3),Yt.a.platform!==sn){for(var t=[],n=0;n<Xn.segmentList.length;n++)Xn.segmentList[n].p2pID===this.id&&!0===zt.j.upLoad&&(t.push(Xn.segmentList[n].index),t.push(Xn.segmentList[n].vid));jn.set16(t.length/2);for(var r=0;r<t.length;r+=2)jn.set16(t[r].length),jn.setCharStr(t[r]),jn.set16(t[r+1].length),jn.setCharStr(t[r+1])}var i=jn.getReferData();this.socket.send(i)}catch(a){}this.pbTimer=setTimeout((function(){e.firePB.call(e)}),100)}else Mr.addPBItem(mr.stratus_break),this.error();this.watcherStep=setTimeout((function(){e.heartBeat.call(e)}),2e4)}},{key:"getPeer",value:function(e){if(this.peerSegment=e,this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{var t=e.vid,n=e.vids,r=e.index;if(jn.resetData(),jn.set16(4),jn.set16(t.length),jn.setCharStr(t),jn.set16(r.length),jn.setCharStr(r),n&&n.length>0){jn.set16(n.length);for(var i=0;i<n.length;i++)jn.set16(n[i].vid.length),jn.setCharStr(n[i].vid)}else jn.set16(1),jn.set16(t.length),jn.setCharStr(t);var a=jn.getReferData();this.socket.send(a)}catch(o){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"candidate",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Gr=JSON.stringify(t),jn.resetData(),jn.set16(5),jn.set16(e.length),jn.setCharStr(e),jn.set16(Gr.length),jn.setUTF8Str(Gr);var n=jn.getReferData();this.socket.send(n)}catch(r){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"offer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Gr=JSON.stringify(t),jn.resetData(),jn.set16(6),jn.set16(e.length),jn.setCharStr(e),jn.set16(Gr.length),jn.setUTF8Str(Gr);var n=jn.getReferData();this.socket.send(n)}catch(r){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"answer",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{Gr=JSON.stringify(t),jn.resetData(),jn.set16(7),jn.set16(e.length),jn.setCharStr(e),jn.set16(Gr.length),jn.setUTF8Str(Gr);var n=jn.getReferData();this.socket.send(n)}catch(r){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"firePB",value:function(){if(clearTimeout(this.pbTimer),this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{jn.resetData(),jn.set16(256),jn.set32(this.cdnSize-this.last_cdnSize),jn.set32(this.p2pSize-this.last_p2pSize),jn.set32(this.usedSize-this.last_usedSize),jn.set32(this.upSize-this.last_upSize),jn.set32(zt.d.videoDataSize),jn.set32(0),jn.set32(this.connectCnt-this.lastConnectCnt),jn.set32(this.connectDoneCnt-this.lastConnectDoneCnt),Yt.a.MixWaterMark&&Yt.a.sendPingBack({type:"BWReport",para:{cdnsize:this.cdnSize-this.last_cdnSize,p2psize:this.p2pSize-this.last_p2pSize,usesize:this.upSize-this.last_upSize}}),jn.set16(Yt.a.platform);var e=jn.getReferData();this.socket.send(e),this.last_cdnSize=this.cdnSize,this.last_p2pSize=this.p2pSize,this.last_upSize=this.upSize,this.last_usedSize=this.usedSize,this.lastConnectCnt=this.connectCnt,this.lastConnectDoneCnt=this.connectDoneCnt}catch(t){}else Mr.addPBItem(mr.stratus_break),this.error()}},{key:"fireConnectOK",value:function(e,t){if(this.running&&this.socket&&this.socket.readyState===WebSocket.OPEN)try{jn.resetData(),jn.set16(260),jn.set16(e.length),jn.setCharStr(e),jn.set16(t);var n=jn.getReferData();this.socket.send(n)}catch(r){}}},{key:"clear",value:function(){try{this.running=!1,this.open=!1,this.socket&&(this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close(),this.socket=null),clearTimeout(this.retryStep),clearTimeout(this.watcherStep),clearTimeout(this.pbTimer)}catch(e){}}}]),e}(),jr=null,Vr=0,Wr=0,Hr="",zr=0,Yr=0,Gr="",Qr=0,Kr=0,$r="",Zr=0,Xr=0,Jr="",ei={State_upDatePeers:"State_upDatePeers",State_register:"State_register",State_candidate:"State_candidate",State_offer:"State_offer",State_answer:"State_answer",State_Error:"State_error"},ti=Ur,ni={bundlePolicy:"max-compat",iceServers:[],iceTransportPolicy:"all",rtcpMuxPolicy:"require",candidateNetworkPolicy:"ALL"},ri=[],ii=[],ai=[],oi=0;function si(e){return ri&&ri.length>0&&-1!==ri.indexOf(e)}var ci={has:si,get:function(e){var t=ri.indexOf(e);return-1!==t?ii[t]:null},use:function(e){if(ni.iceServers=zt.j.stun,ni.iceServers.length<=0)return!1;if(si(e))return!0;for(var t=0;t<ai.length;t++)Date.now()-ai[t]>3e5&&ai.splice(t,1);if(ri.length+ai.length>zt.j.RTCPoolSize||oi>zt.j.RTCMax)return!1;++oi>=2*zt.j.RTCMax/3&&(zt.j.switchPage=!0);try{ii.push({rtc:new RTCPeerConnection(ni),channel:null})}catch(n){return!1}return ri.push(e),!0},shut:function(e){var t=ri.indexOf(e);if(-1!==t){if(delete ri[t],ri[t]=null,ri.splice(t,1),null!==ii[t].channel){delete ii[t].channel.onopen,ii[t].channel.onopen=null,delete ii[t].channel.onclose,ii[t].channel.onclose=null,delete ii[t].channel.onerror,ii[t].channel.onerror=null,delete ii[t].channel.onmessage,ii[t].channel.onmessage=null;try{ii[t].channel.close()}catch(n){}delete ii[t].channel,ii[t].channel=null}if(null!==ii[t].rtc){delete ii[t].rtc.oniceconnectionstatechange,ii[t].rtc.oniceconnectionstatechange=null,delete ii[t].rtc.onicecandidate,ii[t].rtc.onicecandidate=null,delete ii[t].rtc.ondatachannel,ii[t].rtc.ondatachannel=null;try{ii[t].rtc.close()}catch(n){}delete ii[t].rtc,ii[t].rtc=null}ai.push(Date.now()),delete ii[t],ii[t]=null,ii.splice(t,1)}}},ui=1e3,di=512,li=[],fi=0,hi=.024,pi=0,_i=0,vi=0,gi=-1,yi=1536,mi=1536,bi=0;var ki=Object.defineProperties({check:function(){if(!((gi=Date.now())<=_i)){if((bi=gi-_i)>=ui){yi=mi,function(){var e=0;for(var t in li)if(!t||li[t].time+li[t].rto+500<gi){var n=li.splice(e,1)[0];fi-=n.cont}else e++}(),_i=gi;var e=pi/bi;pi=0,hi+=.25*(e-hi)}gi<=vi||(bi=gi-vi)>0&&(vi=gi,function(e){for(;fi>0&&e>1;){var t=li.shift();if(fi-=t.cont,e-=t.cont,t)try{if(ci.has(t.id)&&null!==ci.get(t.id).channel&&"open"===ci.get(t.id).channel.readyState)try{ci.get(t.id).channel.send(t.args)}catch(n){}}catch(n){}}}(Math.min(hi+fi/ui,di/ui)*bi))}},pushTsk:function(e,t,n,r){return!(fi>=di)&&(li.push({args:t,id:e,rto:n,time:gi,cont:r}),fi+=r,pi+=r,!0)},removeTsk:function(e){var t=0;for(var n in li)if(li[n].id===e){var r=li.splice(t,1)[0];fi-=r.cont}else t++}},{sendMax:{set:function(e){di=e},configurable:!0,enumerable:!0},loadQuota:{get:function(){return yi},set:function(e){yi=e},configurable:!0,enumerable:!0},loadQuotaMax:{set:function(e){mi=e},configurable:!0,enumerable:!0}}),xi=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;i()(this,e),this.alias=n,this.gpID=-1,t&&(this.size=t,this.data=new Uint8Array(Math.ceil(this.size/8)))}return o()(e,[{key:"getBit",value:function(e){if(e>=0&&e<this.size){var t=e%8,n=Math.floor(e/8);return 0!=(this.data[n]&1<<t)}return!1}},{key:"setBit",value:function(e,t){if(e>=0&&e<this.size){var n=e%8,r=Math.floor(e/8);this.data[r]=!0===t?this.data[r]|1<<n:this.data[r]&~(1<<n)}}},{key:"getByte",value:function(e){return e>=0&&e+8<=this.size&&e%8==0&&255===this.data[Math.floor(e/8)]}},{key:"setByte",value:function(e,t){e>=0&&e<this.size&&e%8==0&&(this.data[Math.floor(e/8)]=t?255:0)}},{key:"checkRange",value:function(e,t){for(t>this.size&&(t=this.size);e<t;)if(e%8==0&&e+8<=t){if(255!==this.data[Math.floor(e/8)])return!1;e+=8}else{if(!this.getBit(e))return!1;e++}return!0}},{key:"toData",value:function(){return jn.resetData(),jn.set32(this.alias),jn.set32(this.size),jn.setBytes(this.data,0,this.data.byteLength),jn.getData()}},{key:"fromData",value:function(e){Fr.resetData(e),this.alias=Fr.get32(),this.size=Fr.get32(),this.data=Fr.getBytes(e.byteLength-8)}},{key:"resetGap",value:function(e){if((0===e||e)&&-1!==e)for(this.gpID=e;this.gpID<this.size&&!this.getBit(this.gpID);)this.gpID++}},{key:"toString",value:function(){for(var e="",t=0,n=this.size;t<n;)e+=this.getBit(t)?"*":"_",++t%128==0&&(e+="\r\n");return e+="|"}},{key:"reset",value:function(e){for(var t=0;t<Math.ceil(this.size/8);t++)this.data[t]=e?255:0}},{key:"clear",value:function(){delete this.data,this.head&&delete this.head}}]),e}(),Si=0,Ti=0,Pi=1,Ii=2,wi=3,Ai=4,Ei=5,Di=6,qi="0",Oi="3",Ri="5",Li="7",Mi="11",Ci="15",Ni="19",Bi={ordered:!1},Fi=function(){function e(t,n,r,a){i()(this,e);var o=this;if(this.peerMgr=t,this.active=r,this.peerID=n,this.ready=!1,this.timeStep=-1,this.lastEventTime=-1,this.connectionState="new",this.workTime=0,this.natUseTime=0,this.natStartTime=-1,this.rtc.oniceconnectionstatechange=function(e){o.connectionState=e.currentTarget.iceConnectionState},this.rtc.onicecandidate=function(e){e.candidate&&o.peerMgr&&o.peerMgr.candidate(o.peerID,e.candidate)},this.active){try{this.getDataChannel(this.rtc.createDataChannel(null,Bi))}catch(s){}this.peerMgr.connectCnt++,this.rtc.createOffer().then((function(e){o.rtc.setLocalDescription(e)["catch"]((function(e){yn.a.error("RTC set local SDP error:"+e)})),o.peerMgr&&o.peerMgr.offer(o.peerID,e)}))["catch"]((function(e){yn.a.error("RTC create offer SDP error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,Oi)})),o.natStartTime=Date.now(),o.timeStep=setTimeout((function(){o.onNATTimeout.call(o)}),zt.j.NATTimeoutStep)}else this.rtc.setRemoteDescription(new RTCSessionDescription(a))["catch"]((function(e){yn.a.error("RTC set remote SDP error:"+e)})),this.rtc.ondatachannel=function(e){o.getDataChannel(e.channel)},this.rtc.createAnswer().then((function(e){o.rtc.setLocalDescription(e).then((function(){o.peerMgr&&o.peerMgr.answer(o.peerID,e)}))["catch"]((function(e){yn.a.error("RTC set local SDP error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,Oi)}))}))["catch"]((function(e){yn.a.error("RTC create answer error:"+e),o.peerMgr&&o.peerMgr.removePeerNode(o.peerID,Oi)})),o.natStartTime=Date.now(),o.timeStep=setTimeout((function(){o.onNATTimeout.call(o)}),zt.j.NATTimeoutStep-1e3)}return o()(e,[{key:"baseCheck",value:function(){return!(-1!==this.lastEventTime&&Date.now()-this.lastEventTime>=zt.j.NATTimeoutStep)||(this.peerMgr.removePeerNode(this.peerID,Ri),!1)}},{key:"fireData",value:function(t,n){if(this.ready&&null!==this.rtc&&null!==this.dataChannel){var r=null;switch(t){case Ti:if((r=e.pkgQuit())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Pi:if((r=e.pkgHeartBeat(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Ii:if((r=e.pkgRequest(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Ai:if((r=e.pkgClear())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Ei:if((r=e.pkgRefuse())&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}break;case Di:if((r=e.pkgDescribe(n))&&this.dataChannel&&"open"===this.dataChannel.readyState)try{this.dataChannel.send(r.buffer)}catch(i){yn.a.error("[P2P load],dataChannel.send ,type "+t+", err "+i.message)}}}}},{key:"onData",value:function(t){if(t&&null!==this.rtc&&null!==this.dataChannel)if(t[0]!==Si)this.peerMgr.removePeerNode(this.peerID,Li);else switch(this.lastEventTime=Date.now(),t[1]){case Ti:this.onQuit&&this.onQuit(e.unPkgQuit(t));break;case Pi:this.onHeartbeat&&this.onHeartbeat(e.unPkgHeartBeat(t));break;case Ii:this.onRequest&&this.onRequest(e.unPkgRequest(t));break;case wi:this.onReceive&&this.onReceive(e.unPkgReceive(t));break;case Ai:this.onClear&&this.onClear(e.unPkgClear(t));break;case Ei:this.onRefuse&&this.onRefuse(e.unPkgRefuse(t));break;case Di:this.onDescribe&&this.onDescribe(e.unPkgDescribe(t))}}},{key:"onQuit",value:function(){throw"virtual method"}},{key:"onHeartbeat",value:function(){throw"virtual method"}},{key:"onRequest",value:function(){throw"virtual method"}},{key:"onReceive",value:function(){throw"virtual method"}},{key:"onClear",value:function(){throw"virtual method"}},{key:"onRefuse",value:function(){throw"virtual method"}},{key:"onDescribe",value:function(){throw"virtual method"}},{key:"getDataChannel",value:function(e){var t=this;this.dataChannel=e,this.dataChannel.onopen=function(){t.ready=!0,clearTimeout(t.timeStep),0===t.workTime&&(t.workTime=Date.now()),0===t.natUseTime&&(t.natUseTime=Date.now()-t.natStartTime),t.active&&(t.peerMgr.connectDoneCnt++,t.peerMgr.fireConnectOK(t.peerID,t.natUseTime)),t.lastEventTime=Date.now()},this.dataChannel.onclose=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,Oi)},this.dataChannel.onerror=function(e){t.ready=!1,t.peerMgr&&t.peerMgr.removePeerNode(t.peerID,Oi)},this.dataChannel.onmessage=function(e){t.onData(new Uint8Array(e.data))}}},{key:"close",value:function(){clearTimeout(this.timeStep),delete this.peerMgr,this.peerMgr=null,this.ready=!1}},{key:"rtc",get:function(){return ci.get(this.peerID).rtc}},{key:"dataChannel",get:function(){return ci.get(this.peerID).channel},set:function(e){return ci.get(this.peerID).channel=e}},{key:"offer",value:function(e){}},{key:"answer",value:function(e){this.rtc.setRemoteDescription(new RTCSessionDescription(e))["catch"]((function(e){console.log("RTC answer be reject:"+e)}))}},{key:"candidate",value:function(e){this.rtc.addIceCandidate(new RTCIceCandidate(e))["catch"]((function(e){console.log("RTC candidate fail:"+e)}))}},{key:"onNATTimeout",value:function(){this.peerMgr.removePeerNode(this.peerID,Ri)}}],[{key:"pkgQuit",value:function(){return jn.resetData(),jn.set8(Si),jn.set8(Ti),jn.crc(),jn.getReferData()}},{key:"unPkgQuit",value:function(e){return Fr.resetData(e),this.QuitParam||(this.QuitParam={}),this.QuitParam.version=Fr.get8(),this.QuitParam.type=Fr.get8(),this.QuitParam.crc=Fr.crc(),this.QuitParam}},{key:"pkgHeartBeat",value:function(e){jn.resetData(),jn.set8(Si),jn.set8(Pi),jn.set32(e.localID);var t=0;return null!==e.bitmap&&(t+=1),jn.set8(t),jn.set8(e.lostR),jn.set8(e.vid.length),jn.setCharStr(e.vid),jn.set8(e.sourceID.length),jn.setCharStr(e.sourceID),jn.set32(e.alias),null!==e.bitmap&&(jn.set8(e.bitmap.byteLength),jn.setBytes(e.bitmap,0,e.bitmap.byteLength)),jn.crc(),jn.getReferData()}},{key:"unPkgHeartBeat",value:function(e){Fr.resetData(e),this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.version=Fr.get8(),this.heartbeatParam.type=Fr.get8(),this.heartbeatParam.localID=Fr.get32();var t=Fr.get8();this.heartbeatParam.lostR=Fr.get8();var n=Fr.get8();return this.heartbeatParam.vid=Fr.getCharStr(n),n=Fr.get8(),this.heartbeatParam.sourceID=Fr.getCharStr(n),this.heartbeatParam.alias=Fr.get32(),1&t?(n=Fr.get8(),this.heartbeatParam.bitmap=Fr.getBytes(n)):this.heartbeatParam.bitmap=null,this.heartbeatParam.crc=Fr.crc(),this.heartbeatParam}},{key:"pkgRequest",value:function(e){if(e.length>0){for(jn.resetData(),jn.set8(Si),jn.set8(Ii),jn.set32(e[0].alias),jn.set8(e.length);e.length>0;){var t=e.shift();jn.set32(t.subPieceID)}return jn.crc(),jn.getReferData()}return null}},{key:"unPkgRequest",value:function(e){Fr.resetData(e),this.requestParam||(this.requestParam={}),this.requestParam.version=Fr.get8(),this.requestParam.type=Fr.get8(),this.requestParam.alias=Fr.get32(),this.requestParam.taskLen=Fr.get8(),this.requestParam.requireTaskList||(this.requestParam.requireTaskList=[]),this.requestParam.requireTaskList.length=0;for(var t=0;t<this.requestParam.taskLen;)this.requestParam.requireTaskList.push(Fr.get32()),t++;return this.requestParam.crc=Fr.crc(),this.requestParam}},{key:"unPkgReceive",value:function(e){Fr.resetData(e),this.receiveParam||(this.receiveParam={}),this.receiveParam.version=Fr.get8(),this.receiveParam.type=Fr.get8(),this.receiveParam.alias=Fr.get32(),this.receiveParam.sIDList?this.receiveParam.sIDList.length=0:this.receiveParam.sIDList=[],this.receiveParam.dataList?this.receiveParam.dataList.length=0:this.receiveParam.dataList=[];for(var t=Fr.get8(),n=0;n<t;)this.receiveParam.sIDList[n]=Fr.get32(),this.receiveParam.dataList[n]=Fr.getBytes(zt.d.subPieceSize),n++;return this.receiveParam.crc=Fr.crc(),this.receiveParam}},{key:"pkgClear",value:function(){return jn.resetData(),jn.set8(Si),jn.set8(Ai),jn.crc(),jn.getReferData()}},{key:"unPkgClear",value:function(e){return Fr.resetData(e),this.clearParam||(this.clearParam={}),this.clearParam.version=Fr.get8(),this.clearParam.type=Fr.get8(),this.clearParam.crc=Fr.crc(),this.clearParam}},{key:"pkgRefuse",value:function(){return jn.resetData(),jn.set8(Si),jn.set8(Ei),jn.crc(),jn.getReferData()}},{key:"unPkgRefuse",value:function(e){return Fr.resetData(e),this.refuseParam||(this.refuseParam={}),this.refuseParam.version=Fr.get8(),this.refuseParam.type=Fr.get8(),this.refuseParam.crc=Fr.crc(),this.refuseParam}},{key:"pkgDescribe",value:function(e){return jn.resetData(),jn.set8(Si),jn.set8(Di),jn.set16(e.byteLength),jn.setBytes(e,0,e.byteLength),jn.crc(),jn.getReferData()}},{key:"unPkgDescribe",value:function(e){Fr.resetData(e),this.describeParam||(this.describeParam={}),this.describeParam.version=Fr.get8(),this.describeParam.type=Fr.get8();var t=Fr.get16();return this.describeParam.describe=Fr.getBytes(t),this.describeParam.crc=Fr.crc(),this.describeParam}}]),e}();function Ui(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Wi=Math.floor(4294967295*Math.random()),Hi=new En,zi=function(e){d()(n,e);var t=Vi(n);function n(e,r,a,o){var s;return i()(this,n),(s=t.call(this,e,r,a,o)).checked=!1,s.srtt=0,s.sdev=0,s.quota=32,s.mtu=1,s.lostR=0,s.lostHB=0,s.loadHB=0,s.rcvHB=0,s.upHB=0,s.lostCnt=0,s.loadCnt=0,s.rcvCnt=0,s.upCnt=0,s.peerInfo={loadBitmap:undefined,hasBitmap:!1,sourceID:"",alias:"",vid:"",peerLocalID:"",lostR:0},s.runTaskList=new En,s.srcDscr=new En,s.checkRTOLastTime=-1,s.heartbeatLastTime=-1,s.heartbeatCnt=6,s.createdTime=Date.now(),s}return o()(n,[{key:"check",value:function(){this.baseCheck()&&this.ready&&(this.checkHeartbeat()||this.loadTask(),this.checkRTO())}},{key:"checkHeartbeat",value:function(){if(Date.now()-this.heartbeatLastTime>3e3&&Xn.loadSegment){if(this.heartbeatParam||(this.heartbeatParam={preInfo:{}}),this.heartbeatParam.localID=Wi,this.heartbeatParam.vid=Xn.loadSegment.vid,this.heartbeatParam.alias=Xn.loadSegment.alias,this.heartbeatParam.sourceID=Xn.loadSegment.sourceID,Xn.preLoadSegment?(this.heartbeatParam.preInfo.alias=Xn.preLoadSegment.alias,this.heartbeatParam.preInfo.sourceID=Xn.preLoadSegment.sourceID):(this.heartbeatParam.preInfo.alias="",this.heartbeatParam.preInfo.sourceID=""),""!==this.peerInfo.alias&&Xn.hasSegment(this.peerInfo.alias)&&!0===zt.j.upLoad){var e=Xn.getSegment(this.peerInfo.alias);this.heartbeatParam.bitmap=e.bitmap.toData()}else this.heartbeatParam.bitmap=null;return 0===this.loadHB?this.heartbeatParam.lostR=255:this.heartbeatParam.lostR=this.lostR,this.fireData(Pi,this.heartbeatParam),this.lostHB=0,this.loadHB=0,this.lostR>5?this.lostR-=5:this.lostR=0,this.heartbeatCnt++,this.heartbeatCnt>10&&(this.heartbeatCnt=0,this.fireSourceDescribe()),this.heartbeatLastTime=Date.now(),!0}return!1}},{key:"loadTask",value:function(){if(ki.loadQuota>0&&this.peerInfo.hasBitmap&&Xn.loadSegment&&this.peerInfo.loadBitmap.alias===Xn.loadSegment.alias){if(this.quota<this.runTaskList.size)return;var e=Math.max(this.srtt<200?this.quota/2:this.quota/3,1),t=Math.min(this.quota-this.runTaskList.size,e);if(this.taskList||(this.taskList=[]),this.taskList.length=0,Xn.loadSegment.getTasks(this.peerInfo.loadBitmap,this.taskList,t,this.timeout),t-=this.taskList.length,this.taskList.length>0){this.loadHB=this.loadHB+this.taskList.length,this.loadCnt=this.loadCnt+this.taskList.length;for(var n=0;n<this.taskList.length;n++)this.runTaskList.set(this.taskList[n].key,this.taskList[n]);this.fireData(Ii,this.taskList),ki.loadQuota=ki.loadQuota-n}}}},{key:"checkRTO",value:function(){if(!(Date.now()-this.checkRTOLastTime<=500)){this.checkRTOLastTime=Date.now();var e,t=0,n=Ui(this.runTaskList.values);try{for(n.s();!(e=n.n()).done;){var r=qn()(e.value,2)[1];if(Date.now()-r.beginTime>r.rto){t++;var i=Xn.getSegment(r.alias);i&&i.recycleP2PTask(r),this.runTaskList.remove(r.key)}}}catch(a){n.e(a)}finally{n.f()}this.updateQuota(t),this.lostCnt=this.lostCnt+t,this.lostHB=this.lostHB+t,this.lostR=this.lostR+t}}},{key:"timeout",get:function(){if(0===this.srtt)return 3e3;var e=Math.min(1e3+500*this.lostR,3e3),t=this.srtt+4*this.sdev+350;return Math.min(t+e,8e3)}},{key:"update_SRTT_SDEV",value:function(e){var t;0===this.srtt?(this.srtt=e,this.sdev=e/2):(t=Math.abs(e-this.srtt),this.srtt=.875*this.srtt+.125*e,this.sdev=this.sdev+.25*(t-this.sdev))}},{key:"updateQuota",value:function(e){e?(this.quota-=Math.sqrt(e/2),this.quota<2&&(this.quota=2)):this.quota<128&&0!==this.srtt&&this.srtt>1&&this.srtt<3e3&&(this.quota+=Math.log(this.srtt+500)/50)}},{key:"onHeartbeat",value:function(e){if(e.crc){if(this.peerInfo.sourceID=e.sourceID,this.peerInfo.alias=e.alias,this.peerInfo.vid=e.vid,this.peerInfo.peerLocalID=e.localID,!1===this.checked){if(Hi.has(e.localID))return void this.peerMgr.removePeerNode(this.peerID,Ni);Hi.set(e.localID,!0),this.checked=!0}var t=Xn.getSegment(e.alias);t&&e.sourceID!==t.sourceID?this.peerMgr.removePeerNode(this.peerID,Ci):(e.bitmap?(this.peerInfo.hasBitmap=!0,this.peerInfo.loadBitmap===undefined&&(this.peerInfo.loadBitmap=new xi),this.peerInfo.loadBitmap.fromData(e.bitmap),Xn.hasSegment(this.peerInfo.loadBitmap.alias)&&this.peerInfo.loadBitmap.resetGap(Xn.getSegment(this.peerInfo.loadBitmap.alias).gpID)):this.peerInfo.hasBitmap=!1,255!==e.lostR&&(this.peerInfo.lostR=e.lostR,0===this.peerInfo.lostR?this.mtu=Math.min(this.mtu+1,16):this.mtu=Math.max(this.mtu-Math.ceil(this.peerInfo.lostR/2),1)))}else this.peerMgr.removePeerNode(this.peerID,Ci)}},{key:"onRequest",value:function(e){if(e.crc){var t=e.alias;if(this.requestParam||(this.requestParam={}),this.requestParam.alias=t,this.requestParam.sIDList?this.requestParam.sIDList.length=0:this.requestParam.sIDList=[],this.requestParam.dataList?this.requestParam.dataList.length=0:this.requestParam.dataList=[],Xn.getSegment(t)){for(var r=Xn.getSegment(t),i=0;e.requireTaskList.length>0;){var a=e.requireTaskList.shift(),o=r.requestTask(a);o&&(i<this.mtu?(this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,this.upHB+=o.byteLength,i++):(ki.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upCnt+=i+1),this.requestParam.dataList.length=0,this.requestParam.sIDList.length=0,i=0,this.requestParam.dataList[i]=o,this.requestParam.sIDList[i]=a,i++))}this.requestParam.dataList.length>0&&this.requestParam.sIDList.length>0&&this.requestParam.sIDList.length===this.requestParam.dataList.length&&ki.pushTsk(this.peerID,n.pkgReceive(this.requestParam),this.timeout,i)&&(this.upHB+=this.requestParam.dataList.length,this.upCnt+=i+1)}}else this.peerMgr.removePeerNode(this.peerID,Ci)}},{key:"onReceive",value:function(e){if(e.crc){var t=Xn.getSegment(e.alias);if(t)for(var n,r;e.sIDList.length>0;){n=e.sIDList.shift(),r=e.alias.toString()+"_"+n.toString();var i=e.dataList.shift();t.addSubPiece(n,i),this.rcvHB+=i.byteLength,this.rcvCnt++,this.runTaskList.has(r)?(this.update_SRTT_SDEV(Date.now()-this.runTaskList.get(r).beginTime),this.runTaskList.remove(r)):this.update_SRTT_SDEV(this.timeout)}}else this.peerMgr.removePeerNode(this.peerID,Ci)}},{key:"clearTask",value:function(){var e,t=Ui(this.runTaskList.values);try{for(t.s();!(e=t.n()).done;){var n=qn()(e.value,1)[0],r=this.runTaskList.remove(n);if(r){var i=Xn.getSegment(r.alias);i&&i.recycleP2PTask(r)}}}catch(a){t.e(a)}finally{t.f()}}},{key:"onClear",value:function(e){e.crc?ki.removeTsk(this.peerID):this.peerMgr.removePeerNode(this,Ci)}},{key:"onRefuse",value:function(e){if(e.crc){var t,n=Ui(this.runTaskList.values);try{for(n.s();!(t=n.n()).done;){var r=qn()(t.value,1)[0],i=this.runTaskList.remove(r);if(i){var a=Xn.getSegment(i.alias);a&&a.recycleP2PTask(i)}}}catch(o){n.e(o)}finally{n.f()}this.fireData(Ai,null)}else this.peerMgr.removePeerNode(this,Ci)}},{key:"onQuit",value:function(e){e.crc?this.peerMgr.removePeerNode(this.peerID,qi):this.peerMgr.removePeerNode(this.peerID,Ci)}},{key:"fireSourceDescribe",value:function(){if(this.peerInfo.vid){var e=Xn.getSourceDescribe(this.peerInfo.vid);e&&e.byteLength>0&&this.fireData(Di,e)}}},{key:"onDescribe",value:function(e){if(e.crc){if(e.describe){Fr.resetData(e.describe);var t=Fr.get16(),n=Fr.getCharStr(t);if(!Xn.loadSegment||n!==Xn.loadSegment.vid)return;this.srcDscr.clear();for(var r=Fr.get16(),i=0;i<r;i++){t=Fr.get16();var a=new xi;a.alias=Fr.get32(),a.size=Fr.get32(),a.data=Fr.getBytes(t-8),this.srcDscr.set(a.alias,a)}}}else this.peerMgr.removePeerNode(this.peerID,Ci)}},{key:"checkHealth",value:function(e){if(this.rcvCnt<=0||this.srcDscr.size<=0)return!1;if(this.peerInfo&&this.peerInfo.hasBitmap&&this.peerInfo.alias===e)return this.peerInfo.loadBitmap.checkRange(Xn.getSegment(e).gpID,Xn.getSegment(e).gpID+8);if(this.srcDscr.has(e)){var t=this.srcDscr.get(e);if(t)return t.checkRange(Xn.getSegment(e).gpID,Xn.getSegment(e).gpID+8)}return!1}},{key:"peerClose",value:function(e){""!==this.peerInfo.peerLocalID&&Hi.has(this.peerInfo.peerLocalID)&&e!==Ni&&Hi.remove(this.peerInfo.peerLocalID),this.clearTask(),this.close(),delete this.peerMgr,this.peerMgr=null}},{key:"protected",get:function(){return Date.now()-this.createdTime<=3e4}},{key:"reset",value:function(){this.rcvHB=0,this.upHB=0}},{key:"log",get:function(){return" [ "+(this.active?this.ready?"open ":"idle ":"passv")+" ] , nat : "+Gt.a.trimNumber(this.natUseTime/1e3,10)+" s , rcvHB : "+Gt.a.trimNumber(this.rcvHB/1024,1e3)+" K , rcvCnt : "+Gt.a.trimNumber(this.rcvCnt,1e6)+", upHB : "+Gt.a.trimNumber(this.upHB/1024,1e3)+" K , upCnt : "+Gt.a.trimNumber(this.upCnt,1e6)+", lostHB : "+Gt.a.trimNumber(this.lostHB/1024,1e3)+" K , lostCnt : "+Gt.a.trimNumber(this.lostCnt,1e5)+"\r\n"}}],[{key:"pkgReceive",value:function(e){for(jn.resetData(),jn.set8(Si),jn.set8(wi),jn.set32(e.alias),jn.set8(e.sIDList.length);e.sIDList.length>0;)jn.set32(e.sIDList.shift()),jn.setBytes(e.dataList.shift(),0,zt.d.subPieceSize);return jn.crc(),jn.getReferData()}}]),n}(Fi);function Yi(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Ki=0,$i=new En,Zi="",Xi=-1,Ji=!1,ea="",ta=function(e){d()(n,e);var t=Qi(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e,r,(function(e,t,n){this.onMsg(e,t,n)}))).localID="",a.workPeers=new En,a.trackerPeers=[],a.upTaskSum=0,a.downTaskSum=0,a.upSpeed=0,a.downSpeed=0,a}return o()(n,[{key:"onMsg",value:function(e,t,n){switch(e){case ei.State_register:this.localID=t;break;case ei.State_upDatePeers:this.localID=t,this.updatePeers(n);break;case ei.State_candidate:this.workPeers.has(t)&&this.workPeers.get(t).candidate(n);break;case ei.State_offer:this.workPeers.has(t)||this.acceptPeer(t,n);break;case ei.State_answer:this.workPeers.has(t)&&this.workPeers.get(t).answer(n);break;case ei.State_Error:}}},{key:"onTimer",value:function(){var e,t=Yi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){qn()(e.value,2)[1].check()}}catch(n){t.e(n)}finally{t.f()}}},{key:"check",value:function(e){Xn.loadSegment&&Xn.loadSegment.alias!==ea&&(Ji=!0),this.addPeer(),this.weedOutPeer(),this.connectPeer(),this.upSpeed=0,this.downSpeed=0,Zi="",e&&(Zi+=" ---- tracker ID : "+this.id+" , IP : "+this.ip+" , localD : "+this.localID+"\r\n");var t,n=Yi(this.workPeers.values);try{for(n.s();!(t=n.n()).done;){var r=qn()(t.value,2)[1];e&&(Zi+=r.log),this.upSpeed+=r.upHB,this.downSpeed+=r.rcvHB,this.upTaskSum+=r.upHB,this.downTaskSum+=r.rcvHB,r.reset()}}catch(i){n.e(i)}finally{n.f()}return Zi}},{key:"addPeer",value:function(){(!this.getPeerMark||Ji||this.getPeerMark+zt.j.getPeerIDStep<Date.now())&&Xn.loadSegment&&!Xn.loadSegment.done&&Xn.loadSegment.p2pID===this.id&&(ea=Xn.loadSegment.alias,Ji=!1,this.getPeerMark=Date.now(),this.getPeer(Xn.loadSegment))}},{key:"weedOutPeer",value:function(){if(!this.weedOutPeerMark||this.weedOutPeerMark+zt.j.weedOutPeerStep<Date.now()){this.weedOutPeerMark=Date.now();var e,t="",n=0,r=Yi(this.workPeers.values);try{for(r.s();!(e=r.n()).done;){var i=qn()(e.value,1)[0],a=this.workPeers.get(i);if(a&&!a["protected"]){var o=a.rcvCnt-(a.rcvCntLT?a.rcvCntLT:0);a.rcvCntLT=a.rcvCnt;var s=a.upCnt-(a.upCntLT?a.upCntLT:0);a.upCntLT=a.upCnt,(s+o<n||0===n)&&(n=s+o,t=a.peerID)}}}catch(c){r.e(c)}finally{r.f()}this.workPeers.size>6&&""!==t&&this.removePeerNode(t,Mi)}}},{key:"connectPeer",value:function(){if(-1===Xi||Date.now()-Xi>zt.j.connectPeerStep)for(var e=0;e<this.trackerPeers.length&&Ki<zt.j.connectMax;){e++;var t=this.trackerPeers.shift();if(t&&!this.checkErrPeerID(t)){if(!ci.use(t)){this.trackerPeers.push(t);continue}this.workPeers.set(t,new zi(this,t,!0)),Ki<zt.j.connectMax&&Ki++,Xi=Date.now();break}}}},{key:"acceptPeer",value:function(e,t){if(Ki<zt.j.passiveMax&&!this.workPeers.has(e)&&Date.now()-Xi>zt.j.connectPeerStep){if(!ci.use(e))return void this.trackerPeers.push(e);this.workPeers.set(e,new zi(this,e,!1,t)),Ki<zt.j.passiveMax&&Ki++,Xi=Date.now()}}},{key:"checkErrPeerID",value:function(e){if(null===e||""===e||e===this.localID)return!0;if(this.workPeers.has(e))return!0;var t=$i.get(e);return t&&Date.now()-t.time<t.duration}},{key:"updatePeers",value:function(e){if(e){this.trackerPeers.length=0;for(var t=0;t<e.length;t++){var n=e[t];this.workPeers.has(n)||null===n||""===n||n===this.localID||this.trackerPeers.push(n)}this.connectPeer()}}},{key:"clearTask",value:function(){var e,t=Yi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){qn()(e.value,2)[1].clearTask()}}catch(n){t.e(n)}finally{t.f()}}},{key:"checkP2PHealth",value:function(e){var t,n=0,r=Yi(this.workPeers.values);try{for(r.s();!(t=r.n()).done;){var i=qn()(t.value,2)[1];i.checkHealth(e)?n++:this.workPeers.size>6&&this.removePeerNode(i.peerID,qi)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"removePeerNode",value:function(e,t){if(this.workPeers.has(e)){this.workPeers.get(e).peerClose(t),this.workPeers.remove(e),ci.shut(e),Ki>0&&Ki--;var n={};switch(n.time=Date.now(),t){case Ri:n.duration=12e4;break;default:n.duration=6e4}var r=$i.get(e);r?$i.set(e,{time:n.time,duration:r.duration+n.duration}):$i.set(e,n)}}},{key:"destroy",value:function(){var e,t=Yi(this.workPeers.values);try{for(t.s();!(e=t.n()).done;){var n=qn()(e.value,1)[0];this.removePeerNode(n,qi),Ki>0&&Ki--}}catch(r){t.e(r)}finally{t.f()}this.workPeers.clear(),this.trackerPeers.length=0,this.clear()}}]),n}(ti),na=null,ra=null,ia=0,aa=!1,oa=30;function sa(){if(oa>=30){oa=0;var e=0,t=0;Yt.a.p2pLog="",na&&(Yt.a.p2pLog+=na.check(Yt.a.onLog),e+=na.upSpeed,t+=na.downSpeed),ra&&(Yt.a.p2pLog+=ra.check(Yt.a.onLog),e+=ra.upSpeed,t+=ra.downSpeed),Yt.a.downSpeed=t,Yt.a.upSpeed=e;var n=Math.min(Math.max(Yt.a.upMax,32),768);Math.ceil(Date.now()/1e3%100)<=20?ki.sendMax=1.2*n:ki.sendMax=.6*n,Xn.loadSegment&&(ki.loadQuotaMax=2.5*Xn.loadSegment.rate)}oa%2==0?(ki.check(),oa++):(oa++,na&&na.onTimer(),ra&&ra.onTimer()),ia=setTimeout(sa,33)}var ca,ua,da,la,fa,ha,pa={startProxy:function(e,t){aa||(sa(),aa=!0),null===na?na=new ta(e,t):null===ra?ra=new ta(e,t):na.upTaskSum>ra.upTaskSum?(ra.destroy(),ra=new ta(e,t)):(na.destroy(),na=new ta(e,t))},getProxyByID:function(e){return na&&e===na.id?na:ra&&e===ra.id?ra:null},hasProxyByID:function(e){return!(!na||e!==na.id)||ra&&e===ra.id},getProxyByIPInfo:function(e){return na&&e===na.firstIPInfo?na:ra&&e===ra.firstIPInfo?ra:null},hasProxyByIPInfo:function(e){return!(!na||e!==na.firstIPInfo)||ra&&e===ra.firstIPInfo},destroy:function(){na&&na.destroy(),ra&&ra.destroy(),aa&&(clearTimeout(ia),ia=0,aa=!1)}},_a=function(){function e(t,n,r){i()(this,e),this.index=n,this.base=r,this.size=t,this.u8a=null}return o()(e,[{key:"setData",value:function(e,t){if(!this.u8a){zt.d.videoDataSize+=this.size,this.u8a=null;for(var n=0;null===this.u8a;)try{n++,this.u8a=new Uint8Array(this.size)}catch(r){if(n>zt.i)return yn.a.error("setData Uint8Array tryCatchError"),!1}}return this.u8a.set(e,t-this.base),!0}},{key:"getData",value:function(e,t){return this.u8a?this.u8a.subarray(e-this.base,e-this.base+t):null}},{key:"clear",value:function(){this.u8a&&(zt.d.videoDataSize-=this.size,delete this.u8a)}},{key:"memory",get:function(){return this.u8a?this.size:0}}]),e}(),va=0,ga=zt.d.chunkSize,ya=zt.d.subPieceSize,ma=function(){function e(t){i()(this,e),this.readSize=Math.ceil(t/ya)*ya,this.chunkNum=Math.ceil(this.readSize/ga),this.dataArr=[],this.readLastIndex=0;for(var n=0;n<this.chunkNum;)this.dataArr.push(new _a(ga,n,n*ga)),n++}return o()(e,[{key:"readBytes",value:function(e,t){if(ua=(ca=e)+t-1,ca>=this.readSize||t<=0||ua>=this.readSize)throw yn.a.warn("readBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+ca+" _eRGPos : "+ua+" dataLen: "+t),"readBytes param Error!";da=Math.floor(ca/ga),la=Math.floor(ua/ga);for(var n=0,r=null,i=0;null===r;)try{i++,r=new Uint8Array(t)}catch(o){if(i>zt.i)return yn.a.error("readBytes Uint8Array tryCatchError"),++va>zt.i&&(mn.errorStage="memoryAllocErr",mn.errorFragment=this),null}for(;da<=la;){ca>=(fa=da*ga)&&(fa=ca),(ha=da*ga+ga-1)>=ua&&(ha=ua);var a=this.dataArr[da].getData(fa,ha-fa+1);a&&r.set(a,n),n+=ha-fa+1,da++}return this.readLastIndex=Math.floor((e+t)/ga),r}},{key:"writeBytes",value:function(e,t,n){if(ua=(ca=t)+n-1,ca>=this.readSize||n<=0||ua>this.readSize||!e)throw yn.a.warn("writeBytes param Error,this.readSize: "+this.readSize+" _bRGPos: "+ca+" _eRGPos : "+ua+" dataLen: "+n),"writeBytes param Error!";da=Math.floor(ca/ga),la=Math.floor(ua/ga);for(var r=0;da<=la;){if(ca>=(fa=da*ga)&&(fa=ca),(ha=da*ga+ga-1)>=ua&&(ha=ua),!this.dataArr[da].setData(e.subarray(r,r+(ha-fa+1)),fa)){++va>zt.i&&(mn.errorStage="memoryAllocErr",mn.errorFragment=this);break}r+=ha-fa+1,da++}return r}},{key:"clear",value:function(){for(var e=0;e<this.chunkNum;)this.dataArr[e]&&this.dataArr[e].clear(),e++;delete this.dataArr}},{key:"remove",value:function(){for(var e=0;e<this.readLastIndex;)this.dataArr[e]&&this.dataArr[e].clear(),e++}},{key:"memory",get:function(){if(!this.dataArr)return 0;for(var e=0,t=0;e<this.chunkNum;)this.dataArr[e]&&(t+=this.dataArr[e].memory),e++;return t}},{key:"resetReadLastIndex",value:function(){this.readLastIndex=0}}]),e}(),ba=new En;var ka={create:function(e,t){ba.has(e)||ba.set(e,new ma(t))},get:function(e){return ba.get(e)},remove:function(e){ba.has(e)&&(ba.get(e).clear(),ba.remove(e))},removeChunk:function(e){ba.has(e)&&ba.get(e).remove()}},xa=function(){function e(t,n){i()(this,e),this.rto=3e3,this.alias=t,this.subPieceID=n,this.beginTime=Date.now()}return o()(e,[{key:"key",get:function(){return this.alias.toString()+"_"+this.subPieceID.toString()}},{key:"timeOut",get:function(){return this.beginTime+this.rto}}]),e}(),Sa=256,Ta=262144,Pa=zt.d.subPieceSize,Ia=[31,67,182,117],wa=[105,115,111,109],Aa=function(){function e(t,n,r,a,o,s,c,u,d,l,f,h){i()(this,e),this.tvid=n,this.sourceID=r,this.vid=c,this.p2pID=u,this.alias=s,this.peerCnt=-1,this.vids=l,this.size=t,this.index=o,this.refreshFun=null,this._dataLen=0,this.shareDataNum=0,this.status=0,this.ceSID=0,this.gpSID=0,this.pieceNum=Math.ceil(this.size/Ta),this.subPcNum=Math.ceil(this.size/Pa),this.bitmap=new xi(this.pieceNum,this.alias),this.subBitmap=new xi(this.subPcNum,this.alias),this.runSubBitmap=new xi(this.subPcNum,this.alias),this.bsID=-1,this.esID=this.subPcNum,this.fragmentName="",this.fileType=f,this.seekable=h,this.rate=d,this._checkDataStep=0,this._p2pCheckDataStep=0,this._TMPKeyList=[],this._TMPDataList=[],this._TMPRcvCnt=0,this._tsLoadDone=!1,this.dataErrCount=0,this.endPos=0,ka.create(this.alias,this.size)}return o()(e,[{key:"tsLoadDone",get:function(){return this._tsLoadDone},set:function(e){this._tsLoadDone=e}},{key:"dataLen",get:function(){return this._dataLen},set:function(e){this._dataLen=e}},{key:"state",get:function(){return this.status},set:function(e){this.status=e}},{key:"setPosList",value:function(e){this.seekable=e}},{key:"setRange",value:function(e,t){var n=Math.floor(this.bsID/Sa);this.bitmap.getBit(n)&&!this.subBitmap.checkRange(n*Sa,(n+1)*Sa)&&this.bitmap.setBit(n,!1);var r=Math.ceil(this.esID/Sa);this.bitmap.getBit(r)&&!this.subBitmap.checkRange(r*Sa,(r+1)*Sa)&&this.bitmap.setBit(r,!1),this.ePos=t,this.bsID=Math.floor(e/Pa),this.esID=Math.ceil(t/Pa),this.checkGpSID(this.bsID),this.checkCEPos(this.bsID),yn.a.info("segment.setRange , index = "+this.index+",range "+e+"-"+t+" ,cePos "+this.cePos),this.refreshFun&&this.refreshFun.call(null);var i=ka.get(this.alias);i&&i.resetReadLastIndex()}},{key:"addData",value:function(e,t,n){var r=ka.get(this.alias);if(r){n=r.writeBytes(t,e,n);for(var i=Math.ceil(e/Pa),a=e+n>=this.size?this.subPcNum:Math.floor((e+n)/Pa);i<a;)this.subBitmap.setBit(i,!0),this.runSubBitmap.setBit(i,!0),i++;this._dataLen+=n;var o=this;Yt.a.pcwBuffer<2||0===e&&8192===n?this.checkData():0===this._checkDataStep&&(this._checkDataStep=setTimeout((function(){o&&o.checkData.call(o)}),500))}else yn.a.warn("segment is null when addData ,index "+this.index+", rate "+this.rate)}},{key:"checkData",value:function(){clearTimeout(this._checkDataStep),this._checkDataStep=0,this.checkGpSID(this.gpSID);for(var e=Math.floor(this.bsID/Sa),t=Math.ceil(this.size/Ta);e<t;){var n=e*Sa,r=(e+1)*Sa;this.bsID>=n&&this.bsID<=r&&(n=this.bsID),this.esID>=n&&this.esID<=r&&(r=this.esID),this.subBitmap.checkRange(n,r)&&this.bitmap.setBit(e,!0),e++}var i=this.ceSID;this.checkCEPos(this.ceSID),this.refreshFun&&this.refreshFun(),i<this.ceSID&&Yt.a.noticeDataArrived&&Yt.a.noticeDataArrived()}},{key:"getData",value:function(e,t){return ka.get(this.alias).readBytes(e,t)}},{key:"hasData",value:function(e,t){for(var n=Math.floor(e/Pa),r=Math.ceil(Math.min(e+t,this.size)/Pa);n<r;){if(!this.subBitmap.getBit(n))return!1;n++}return!0}},{key:"checkCEPos",value:function(e){for(var t=e!==undefined?e:this.ceSID;t<this.subPcNum&&this.subBitmap.getBit(t);)t++;this.ceSID=Math.min(t,this.subPcNum)}},{key:"deleteRange",value:function(e,t,n){for(var r=Math.min(e+t,this.size),i=Math.floor(e/Pa),a=Math.ceil(r/Pa);i<a;)this.subBitmap.setBit(i,!1),this.runSubBitmap.setBit(i,!1),i++;for(var o=Math.floor(e/Ta),s=Math.ceil(r/Ta);o<s;)this.bitmap.setBit(o,!1),o++;n||(this.checkGpSID(this.bsID),this.checkCEPos(this.bsID))}},{key:"checkTask",value:function(e,t){for(var n=Math.floor(e/Pa),r=Math.min(this.subPcNum,Math.ceil(t/Pa)),i=[],a=0,o=-1,s=-1;n<r;)this.subBitmap.getBit(n)?(-1!==o&&a++,a>=32&&(i.push({begin:o*Pa,end:Math.min((s+1)*Pa,this.size)}),o=-1,s=-1,a=0)):(a=0,-1===o&&(o=n),s=n,this.runSubBitmap.setBit(n,!0)),n++;return-1!==o&&i.push({begin:o*Pa,end:Math.min((s+1)*Pa,this.size)}),this.checkGpSID(this.gpSID),i}},{key:"recycleCDNTask",value:function(e){for(var t,n,r,i=0;i<e.length;i++)for(t=e[i],n=Math.floor(t.begin/Pa),r=Math.min(this.subPcNum,Math.ceil(t.end/Pa));n<r;)this.subBitmap.getBit(n)||this.runSubBitmap.setBit(n,!1),n++;this.checkGpSID(this.bsID),this.checkCEPos(this.bsID)}},{key:"recycleP2PTask",value:function(e){!this.subBitmap.getBit(e.subPieceID)&&this.runSubBitmap.getBit(e.subPieceID)&&(this.runSubBitmap.setBit(e.subPieceID,!1),e.subPieceID<this.gpSID&&this.checkGpSID(e.subPieceID))}},{key:"checkGpSID",value:function(e){for(this.gpSID=e;this.gpSID<this.subPcNum&&!(!this.runSubBitmap.getBit(this.gpSID)&&!this.subBitmap.getBit(this.gpSID)&&this.gpSID>=this.bsID&&this.gpSID<=this.esID);)this.gpSID++}},{key:"addSubPiece",value:function(e,t){if(this.fileType===Tn.a.TS){var n=0,r=e*Pa;for(0!==e&&(n=188-r%188);n<t.byteLength&&r+n<this.ePos;){if(71!==t[n])return this.dataErrCount++,void yn.a.error("Segment reveive p2p load data err ,pos "+(r+n)+" ,dataErrCount "+this.dataErrCount);n+=188}}else if(this.fileType===Tn.a.DASH){var i=e*Pa,a=i+t.byteLength,o=Gt.a.searchPosIndex(i,this.seekable);if((o=o>=0?o+1:0)<this.seekable.length-1&&this.seekable[o]>=i&&this.seekable[o]+4<=a)for(var s=this.seekable[o]-i,c=0;c<Ia.length;){if(t[s+c]!==Ia[c])return this.dataErrCount++,void yn.a.error("Segment reveive p2p load webm data err ,pos "+s+" ,dataErrCount "+this.dataErrCount);c++}}else if(this.fileType.indexOf(Tn.a.M4S)>=0){var u=e*Pa,d=u+t.byteLength,l=Gt.a.searchPosIndex(u,this.seekable);if((l=l>=0?l+1:0)<this.seekable.length-1&&this.seekable[l]>=u&&this.seekable[l]+12<=d)for(var f=this.seekable[l]-u+8,h=0;h<wa.length;){if(t[f+h]!==wa[h])return this.dataErrCount++,void yn.a.error("Segment reveive p2p load webm data err ,pos "+f+" ,dataErrCount "+this.dataErrCount);h++}}if(this._TMPRcvCnt++,Pa===t.byteLength&&-1===this._TMPKeyList.indexOf(e)){for(var p=!1,_=0;_<this._TMPKeyList.length;_++)if(this._TMPKeyList[_]*Pa+this._TMPDataList[_].byteLength===e*Pa){p=!0;var v=new Uint8Array(this._TMPDataList[_].byteLength+t.byteLength);v.set(this._TMPDataList[_],0),v.set(t,this._TMPDataList[_].byteLength),this._TMPDataList[_]=v;break}if(p||(this._TMPKeyList.push(e),this._TMPDataList.push(t)),this._TMPRcvCnt>=50)this.mergeData();else if(0===this._p2pCheckDataStep){var g=this;this._p2pCheckDataStep=setTimeout((function(){g&&g.mergeData.call(g)}),100)}Mr.p2pSize=Pa+Mr.p2pSize,this.peerMgr&&(this.peerMgr.p2pSize=Pa+this.peerMgr.p2pSize)}}},{key:"mergeData",value:function(){for(clearTimeout(this._p2pCheckDataStep),this._p2pCheckDataStep=0;this._TMPKeyList.length>0;){var e=this._TMPDataList.shift();this.addData(this._TMPKeyList.shift()*Pa,e,e.byteLength)}this._TMPRcvCnt=0}},{key:"pieceNeed",value:function(e){return e>=this.bID&&e<=this.eID&&!this.bitmap.getBit(e)}},{key:"subPieceNeed",value:function(e){return e>=this.bsID&&e<=this.esID&&!this.subBitmap.getBit(e)}},{key:"getTasks",value:function(e,t,n,r){if(e&&e.alias===this.alias&&!(this.gpSID>=this.esID)){for(var i=e,a=Math.max(this.gpID,i.gpID),o=Math.min(Math.ceil(this.esID/Sa),a+16),s=this.gpSID;a<o&&t.length<n;){if(i.getBit(a)&&this.pieceNeed(a)){s=a*Sa;var c=Math.min((a+1)*Sa,this.subPcNum);for(this.gpSID>s&&this.gpSID<c&&(s=this.gpSID);s<c&&t.length<n;){if(this.subPieceNeed(s)){var u=new xa(this.alias,s);u.rto=r,t.push(u),this.runSubBitmap.setBit(s,!0)}s++}}a++}t.length>0&&this.checkGpSID(this.gpSID)}}},{key:"clearTask",value:function(){this.peerMgr&&this.peerMgr.clearTask()}},{key:"checkP2PHealth",value:function(){return this.peerMgr?this.peerMgr.checkP2PHealth(this.alias):0}},{key:"requestTask",value:function(e){return this.subBitmap.getBit(e)?(this.shareDataNum++,Mr.upSize=Mr.upSize+Pa,this.peerMgr&&(this.peerMgr.upSize=Pa+this.peerMgr.upSize),this.getData(e*Pa,Pa)):null}},{key:"checkDefinition",value:function(e){if(this.vidsDesc=" [ ",this.vids&&this.vids.length>0&&e.length>0)for(var t=0;t<this.vids.length;t++){for(var n=0;n<e.length;n++)if(this.vids[t].vid===e[n].vid){this.vids[t].count=e[n].count;break}this.vidsDesc+=this.vids[t].bid+":"+(this.vids[t].count===undefined?0:this.vids[t].count)+(t<this.vids.length-1?" , ":"")}this.vidsDesc+=" ]"}},{key:"peerMgr",get:function(){return pa.getProxyByID(this.p2pID)}},{key:"cePos",get:function(){return Math.min(this.ceSID*Pa,this.size)}},{key:"done",get:function(){return this.ceSID>0&&this.ceSID>=this.esID}},{key:"gpID",get:function(){return Math.floor(this.gpSID/Sa)}},{key:"eID",get:function(){return Math.ceil(this.esID/Sa)}},{key:"bID",get:function(){return Math.floor(this.bsID/Sa)}},{key:"approachEnd",get:function(){return this.cePos>=this.size-5242880}},{key:"memory",get:function(){return ka.get(this.alias).memory}},{key:"dataUrl",get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}},{key:"toDataString",value:function(e,t,n){for(var r="",i=Math.floor((-1!==e?e:t)/Ta),a=0,o=Math.floor(t/Ta),s=Math.floor(n/Ta),c=Math.ceil(this.size/Ta),u=this.gpID,d=Math.floor(this.ceSID/Sa),l="";a<c;)this.bitmap.getBit(a)?(l="*",d===a&&u===a?l="(EG)":d===a?l="E":u===a&&(l="G")):(l="_",d===a&&u===a?l="(eg)":d===a?l="e":u===a&&(l="g")),i!==undefined&&i===a&&(l="R"),o===a&&(l=""+l),s===a&&(l+=""),r+=l,++a%128==0&&(r+="\r");return r+=""}},{key:"destroy",value:function(){yn.a.info("Segment be destroy : "+this.index+" bidRdate :"+this.rate+" tvid : "+this.tvid),this.bitmap.clear(),this.subBitmap.clear(),this.runSubBitmap.clear(),ka.remove(this.alias)}},{key:"destroyChunk",value:function(e){var t=ka.get(e);if(t){var n=t.readLastIndex*zt.d.chunkSize;n>0&&(yn.a.info("Segment ready to clear data ,pos "+n+" , segment "+this.index),this.deleteRange(0,n,!0),ka.removeChunk(e))}}}]),e}(),Ea=n(91),Da=n(95),qa=n(79),Oa=function(){function e(t,n,r){i()(this,e);var a=t;this.sourceID=n,this.type=r,this.loader=new XMLHttpRequest,this.loader.responseType="json";var o=this;o.loader.onreadystatechange=function(){if(o.loader.readyState+",",0===o.loader.readyState);else if(1===o.loader.readyState);else if(2===o.loader.readyState);else if(3===o.loader.readyState);else if(200===o.loader.status)if(o.loader.response)if(o.loader.response.hasOwnProperty("uri")){var e=JSON.parse(JSON.stringify(o.loader.response));if(Gt.a.getFileNameFromUrl(e.uri)!==o.sourceID)return;o.destroy(),qa.a.getEvent().emit(Da.a.DisLoadStatus+o.type,"done",e)}else s("responseHas`tProperty-l");else s("responseIsNull");else{var t="";if(o.loader.response||405===o.loader.status){var n=0;o.loader.response&&(t=JSON.stringify(o.loader.response),yn.a.error("Dispatch failure,message "+t),n=o.loader.response.code),n.indexOf("D20")>=0&&405===o.loader.status&&(Yt.a.authorStatus=Ea.a.LoaderState_405)}s("statusErr-"+o.loader.status)}};try{o.loader.open("GET",a,!0),o.loader.withCredentials=!1,yn.a.info("DispatchByXhr url "+a),o.loader.send()}catch(c){s("tryCatchError")}function s(e){o.loader&&(o.destroy(),qa.a.getEvent().emit(Da.a.DisLoadStatus+o.type,"error",e))}}return o()(e,[{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),e}(),Ra=n(330);function La(e,t,n){e===zt.f.CDN?zt.h.set(t,{cdn:n,dcache:Ma(zt.f.DCACHE,t)}):zt.h.set(t,{cdn:Ma(zt.f.CDN,t),dcache:n})}function Ma(e,t){var n=zt.h&&zt.h.get(t);return n?e===zt.f.CDN?n.cdn?n.cdn:null:n.dcache?n.dcache:null:null}var Ca={setDataurl:La,getDataurl:Ma,clearDataurl:function(e,t){if(!(zt.h&&zt.h.get(t)))return null;La(e,t,null)}},Na=function(){function e(t,n,r){i()(this,e),this.running=!0,this.sourceID=n,this.type=r,this.load(t)}return o()(e,[{key:"load",value:function(e){var t=this;yn.a.info("DispatchByFetch url "+e),fetch(e,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){if(e.status>=400||e.status<200){if(!t.running)return;t.onError("statusErr-"+e.status)}else{if(!t.running)return;e.json().then((function(e){Gt.a.getFileNameFromUrl(e.uri)===t.sourceID&&(t.running=!1,qa.a.getEvent().emit(Da.a.DisLoadStatus+t.type,"done",e))}))}}))["catch"]((function(e){t.onError(e.message)}))}},{key:"onError",value:function(e){"statusErr-405"===e&&(Yt.a.authorStatus=Ea.a.LoaderState_405,yn.a.error("Dispatch failure,message "+e)),this.running&&(this.running=!1,qa.a.getEvent().emit(Da.a.DisLoadStatus+this.type,"error",e))}},{key:"destroy",value:function(){this.running=!1}}]),e}(),Ba=function(){function e(t,n,r){i()(this,e);var a=t.split("/",3)[2];this.url=t.replace(a,zt.c),this.url.indexOf("https")&&(this.url=this.url.replace(/^http:/gi,"https:")),this.sourceID=n,this.type=r,this.loader=new XMLHttpRequest,this.loader.responseType="json";var o=this;this.loader.onload=function(){if(200===o.loader.status)if(o.loader.response)if(o.loader.response.hasOwnProperty("uri")){var e=JSON.parse(JSON.stringify(o.loader.response));if(Gt.a.getFileNameFromUrl(e.uri)!==o.sourceID)return;o.destroy(),qa.a.getEvent().emit(Da.a.DisLoadStatus+o.type,"done",e)}else o.onError("responseHas`tProperty-l");else o.onError("responseIsNull");else o.onError("statusErr-"+o.loader.status)},this.loader.onerror=function(){o.onError("statusErr-"+o.loader.status)},this.sendRequest()}return o()(e,[{key:"sendRequest",value:function(){try{this.loader.open("GET",this.url,!0),yn.a.info("dcache Dispatch url "+this.url),this.loader.withCredentials=!1,this.loader.send()}catch(e){this.onError("tryCatchError")}}},{key:"onError",value:function(e){this.destroy(),qa.a.getEvent().emit(Da.a.DisLoadStatus+this.type,"error",e)}},{key:"destroy",value:function(){this.loader&&(this.loader.abort(),delete this.loader,this.loader=null)}}]),e}(),Fa=null,Ua=null,ja=function(){function e(){i()(this,e)}return o()(e,[{key:"start",value:function(e,t){if(this.segment=e,this.segment.loadType===zt.f.DCACHE)qa.a.getEvent().off(Da.a.DisLoadStatus+this.segment.type),qa.a.getEvent().once(Da.a.DisLoadStatus+this.segment.type,this.dcacheDisLoadStatus.bind(this)),this.disDcacheDisLoader=new Ba(this.segment.dispatchUrl,this.segment.sourceID,this.segment.type);else try{var n=this.segment.dispatchUrl;if(-1===n.indexOf("?")?n+="?pv=0.1":n+="&pv=0.1",n+="&cross-domain=1",n+="&mss=1",n+="&stauto="+Yt.a.absStatus,t>0&&this.segment.errIDCList.length<3&&this.segment.errIDCList.length>0&&(n+="&retry="+this.segment.errIDCList.length.toString(),n+="&z="+this.segment.errIDCList.toLocaleString().replace(/,/g,"|")),this.segment.dispatchOnError)if(this.segment.dispatchOnError%3==1){var r=Gt.a.parseURL(n);n=an.isHTTPS?n.replace(r[2]+r[4],Yt.a.bgpIP+gr()(r[2])+Ra.Base64.encode(r[4]))+"&ssl=1":n.replace(r[2]+r[4],Yt.a.bgpIP+gr()(r[2])+Ra.Base64.encode(r[4]))}else if(this.segment.dispatchOnError%3==2&&""!==Yt.a.bgpIP2){var i=Gt.a.parseURL(n);n=an.isHTTPS?n.replace(i[2]+i[4],Yt.a.bgpIP2+gr()(i[2])+Ra.Base64.encode(i[4]))+"&ssl=1":n.replace(i[2]+i[4],Yt.a.bgpIP2+gr()(i[2])+Ra.Base64.encode(i[4]))}Fa=Date.now(),Mr.addPBItem(mr.dispatch_Cnt),qa.a.getEvent().off(Da.a.DisLoadStatus+this.segment.type),qa.a.getEvent().once(Da.a.DisLoadStatus+this.segment.type,this.disLoadStatus.bind(this)),!an.supportFetch||this.segment.dispatchOnError&&this.segment.dispatchOnError%1!=0?this.loader=new Oa(n,this.segment.sourceID,this.segment.type):this.loader=new Na(n,this.segment.sourceID,this.segment.type)}catch(a){this.disError("tryCatchError")}}},{key:"disLoadStatus",value:function(e,t){"done"===e?this.disDone(t):this.disError(t)}},{key:"dcacheDisLoadStatus",value:function(e,t){this.destroyDcacheDisLoader(),"done"===e?(Ca.setDataurl(zt.f.DCACHE,this.segment.sourceID,t.d),qa.a.getEvent().emit(Da.a.DisPatchStatus+this.segment.type)):this.disError(t)}},{key:"disDone",value:function(e){Mr.addPBItem(mr.dispatch_doneCount),Mr.addPBItem(mr.dispatch_duration,Date.now()-Fa),yn.a.info("Dispatch [NORMAL / VIP DONE] data : "+JSON.stringify(e)+", isHttps : "+an.isHTTPS+", sourceID : "+this.segment.sourceID),Gt.a.setCookie("QP0022",e.re+"|"+e.d[0].z);var t=e.d[0].URL;if(an.isHTTPS&&t.indexOf("https:")<0)return yn.a.error("Dispatch match check err,https Dispatch return http"),void this.disError("notIsHttps");Ua&&Ua===this.segment.tvid||(Ca.clearDataurl(zt.f.CDN,this.segment.sourceID),Ua=this.segment.tvid);var n=e.re.split("|"),r=n[1].split("-")[0];if(Gt.a.isOpenDcache(n[0],r)?Yt.a.openDache=!0:Yt.a.openDache=!1,Gt.a.getFileNameFromUrl(e.uri)===this.segment.sourceID){if(Ca.setDataurl(zt.f.CDN,this.segment.sourceID,e.d),gn.checkConfig(),an.canP2P&&"off"!==zt.j.limitP2P&&!0===zt.j.onP2P&&!this.segment.onTracker){var i=Gt.a.getUserInfoFromCookie(),a=Gt.a.getTrackerIP(i.userNetType,zt.j.tracker,this.segment.p2pID);""!==a&&(yn.a.info("AND tracker Dispatch [DONE] IP : "+a),this.segment.setTrackerIP(a))}this.clearIn(),qa.a.getEvent().emit(Da.a.DisPatchStatus+this.segment.type)}}},{key:"disError",value:function(e){this.clearIn(),qa.a.getEvent().emit(Da.a.DisPatchStatus+this.segment.type,e)}},{key:"clearIn",value:function(e){this.loader&&(this.loader.destroy(),this.loader=null),e&&qa.a.getEvent().off(Da.a.DisLoadStatus+this.segment.type)}},{key:"clear",value:function(){this.clearIn(!0),qa.a.getEvent().off(Da.a.DacheDisLoadStatus+this.segment.type),this.destroyDcacheDisLoader()}},{key:"destroyDcacheDisLoader",value:function(){this.disDcacheDisLoader&&(this.disDcacheDisLoader.destroy(),this.disDcacheDisLoader=null)}}]),e}(),Va=function(){function e(t,n){i()(this,e),this.type=e.type,this.videoType=t,this.eventID=n}return o()(e,[{key:"load",value:function(e,t){this.AllTask=e;var n=0;for(this.cache=null,this.loadType=t;null===this.cache;)try{n++,this.cache=new Uint8Array(1048576)}catch(a){if(n>zt.i)return yn.a.error("FetchLoader catch Uint8Array err : "+a.message),void this.onError("tryCatchError")}if(this.AllTask&&this.AllTask.url){this.running=!0,this.reader=null,this.readPos=0,this.dataPos=0,this.base=0,this.dataLen=0,this.readLength=0;var r=this.AllTask.url;if(-1!==r.indexOf("start")&&-1!==r.indexOf("end")||(-1===r.indexOf("?")?-1!==this.AllTask.end&&(r+="?start="+this.AllTask.begin+"&end="+this.AllTask.end):-1!==this.AllTask.end&&(r+="&start="+this.AllTask.begin+"&end="+this.AllTask.end),yn.a.debug("load start: "+this.AllTask.begin+" end: "+this.AllTask.end)),-1===r.indexOf("stauto")&&(r+="&stauto="+Yt.a.absStatus),-1===r.indexOf("ori")&&(r+="&ori=pcw"+Yt.a.platform),-1===r.indexOf("num"))r+="&num="+Date.now().toString();yn.a.info("[Fetch start load url] "+r);var i=this;fetch(r,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",headers:{}}).then((function(e){if(e.status>=400||e.status<200){if(!i.running)return;i.onError("statusErr-"+e.status)}else{if(i.reader=e.body.getReader(),!i.running){if(i.reader)try{i.reader.cancel(),i.reader=null}catch(t){}return}i.pump()}}))["catch"]((function(e){if(i.running)"Failed to fetch"===e.message?i.onError("accessErr"):(yn.a.warn("fetch failed ,err message "+e.message),i.onError("tryCatchError"));else if(i.reader)try{i.reader.cancel(),i.reader=null}catch(t){}}))}else this.onError("taskError")}},{key:"pump",value:function(){var e=this;return e.reader.read().then((function(t){if(e.running){var n=t.value;if(n){e.dataLen+=n.byteLength;try{if(e.dataPos+n.byteLength>e.cache.byteLength){for(var r=null,i=0;null===r;)try{i++,r=new Uint8Array(e.dataPos+n.byteLength)}catch(s){if(i>zt.i)return yn.a.error("FetchLoader catch newUint8Array err : "+s.message),void e.onError("tryCatchError")}var a=e.cache.subarray(e.readPos);r.set(a,0),delete e.cache,e.dataPos=e.dataPos-e.readPos,e.base+=e.readPos,e.readPos=0,e.cache=r}e.cache.set(n,e.dataPos),e.dataPos+=n.byteLength}catch(s){return yn.a.error("FetchLoader catch err : "+s.message),void e.onError("dataError")}}if(e.dataPos-e.readPos>=8192){var o=8192*Math.floor((e.dataPos-e.readPos)/8192);if(e.AllTask.data=e.cache.subarray(e.readPos,e.readPos+o),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.readPos+o},e.videoType!==Tn.a.FTS&&e.AllTask.range.end>e.AllTask.end)return yn.a.error("data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base),void e.onError(Ea.a.LoaderState_dataRangeError);e.readLength+=o,qa.a.getEvent().emit(Da.a.LoadStatus+e.eventID,"progress"),e.readPos+=o}if(e.running){if(-1===e.AllTask.end&&-1!==e.AllTask.segment.size&&(e.AllTask.end=e.AllTask.segment.size),t.done||-1!==e.AllTask.end&&e.AllTask.begin+e.base+e.dataPos>=e.AllTask.end){if(e.readPos<e.dataPos){if(e.AllTask.data=e.cache.subarray(e.readPos,e.dataPos),e.AllTask.range={begin:e.AllTask.begin+e.base+e.readPos,end:e.AllTask.begin+e.base+e.dataPos},"fts"!==e.videoType&&e.AllTask&&e.AllTask.range.end>e.AllTask.end)return yn.a.error("~~ data range err , need range "+e.AllTask.begin+"-"+e.AllTask.end+" currentEnd: "+e.AllTask.range.end+" base: "+e.base+",needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError("dataError");e.readLength+=e.dataPos-e.readPos,qa.a.getEvent().emit(Da.a.LoadStatus+e.eventID,"progress"),e.readPos=e.dataPos}if(e.dataLen!==e.readLength)yn.a.error("~~chunkLen: "+e.dataLen+" readLen: "+e.readLength);else if(e.AllTask&&e.dataLen!==e.AllTask.end-e.AllTask.begin)return yn.a.error("need dataLen is not match receive dataLen,needLen "+(e.AllTask.end-e.AllTask.begin)+",receiveLen "+e.dataLen),void e.onError(Ea.a.LoaderState_dataRangeError);return e.close(),void qa.a.getEvent().emit(Da.a.LoadStatus+e.eventID,"done")}return e.pump()}}else if(e.reader)try{e.reader.cancel(),e.reader=null}catch(c){}}))}},{key:"onError",value:function(e){if(this.running){if(this.running=!1,this.AllTask=null,this.reader)try{this.reader.cancel(),this.reader=null}catch(t){}"accessErr"===e||"statusErr-405"===e||"dataError"===e||e===Ea.a.LoaderState_dataRangeError||"isPointNot80|443"===e?qa.a.getEvent().emit(Da.a.LoadStatus+this.eventID,"error",e):qa.a.getEvent().emit(Da.a.LoadStatus+this.eventID,"error","netError")}}},{key:"close",value:function(){if(this.running&&(this.running=!1,this.AllTask=null,this.reader))try{this.reader.cancel(),this.reader=null}catch(e){}this.cache&&delete this.cache}}],[{key:"type",get:function(){return"fetch"}}]),e}(),Wa=n(416),Ha=1,za=2,Ya=3;function Ga(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ka=new Map,$a=setTimeout(Za,12e4);function Za(e){clearTimeout($a);var t,n=Ga(Ka);try{for(n.s();!(t=n.n()).done;){var r=qn()(t.value,2),i=r[0],a=r[1],o=i.split("|"),s={dmnm:o[0],idc:o[1],type:Ya,total:a.total,failcnt:a.failcnt};Yt.a.sendPingBack({type:"DNSParser",para:s}),Ka["delete"](i)}}catch(c){n.e(c)}finally{n.f()}e||($a=setTimeout(Za,12e4))}var Xa=function(){function e(){i()(this,e),this.tskList=null,this.curLoadTskIndex=0,this.tsk=null,this.retryCnt=0,this.stateChange=null,this.segment=null,this.startTime=-1,this.loader=null,this._loadStage="",this.dispatcher=null,this.domain="",this.idc=""}return o()(e,[{key:"load",value:function(e,t,n,r,i){this.segment&&this.close(!1),this.segment=e,this.retryCnt=n,this.urlIndex=r,this.CDNStateChangeEventID=i,this.tskList=t,this.tsk=null,this.url="",Ca.getDataurl(this.segment.loadType,this.segment.sourceID)&&0!==ho(this.segment.loadType,this.segment.sourceID)?(this._loadStage="CDN",this.createLoader(),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_ready),this.checkConTracker(),this.checkTask()):(this._loadStage="dispatch",this.startDisPatch())}},{key:"createLoader",value:function(){"mozilla"===an.browser.name||"firefox"===an.browser.name&&an.browser.version.major<65||"chrome"===an.browser.name&&an.browser.version.major<43||"msedge"===an.browser.name&&an.browser.version.major<14||"safari"===an.browser.name&&(an.browser.version.major<10||10===an.browser.version.major&&an.browser.version.minor<1)||this.retryCnt%2==1?this.loader=new Wa.a(this.segment.fileType,this.CDNStateChangeEventID):this.loader=new Va(this.segment.fileType,this.CDNStateChangeEventID)}},{key:"checkConTracker",value:function(){if(an.canP2P&&"off"!==zt.j.limitP2P&&!0===zt.j.onP2P&&!this.segment.onTracker){gn.checkConfig();var e=Gt.a.getUserInfoFromCookie(),t=Gt.a.getTrackerIP(e.userNetType,zt.j.tracker,this.segment.p2pID);""!==t&&(yn.a.info("AND tracker Dispatch [DONE] IP : "+t),this.segment.setTrackerIP(t))}}},{key:"disPatchDone",value:function(){this.segment&&(this.createLoader(),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_ready),this._loadStage="CDN",this.checkConTracker(),this.checkTask())}},{key:"disPatchErr",value:function(e){this.segment&&(this.close(!0),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_error,Ea.a.LoaderState_error_dispatch,e,""))}},{key:"startDisPatch",value:function(){this.dispatcher||(this.dispatcher=new ja),qa.a.getEvent().once(Da.a.DisPatchStatus+this.segment.type,this.disPatchStatus.bind(this)),this.dispatcher.start(this.segment,this.retryCnt)}},{key:"disPatchStatus",value:function(e){e?this.disPatchErr(e):this.disPatchDone()}},{key:"checkTask",value:function(){var e,t,n,r;if(this.segment&&this.tskList)if(this.curLoadTskIndex>this.tskList.length-1&&!this.tsk)this._loadStage="",this.close(!1),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_done);else if(Ca.getDataurl(this.segment.loadType,this.segment.sourceID)){var i="",a=null;if(Ca.getDataurl(this.segment.loadType,this.segment.sourceID))if(this.urlIndex>=0)i=(a=Ca.getDataurl(this.segment.loadType,this.segment.sourceID)[this.urlIndex]).URL;else{var o=fo(this.segment.loadType,this.segment.sourceID);0===o.length&&(yn.a.info("select no vaild urlIndex,default index 0 "),o.push(0)),i=(a=Ca.getDataurl(this.segment.loadType,this.segment.sourceID)[o[0]]).URL}else i=this.segment.dataUrl;if(a&&(this.segment.idc=this.idc=a.z),an.isHTTPS&&(i=i.replace(/^http:/gi,"https:")),this.segment.fileType.indexOf(Tn.a.TS)>=0||this.segment.fileType===Tn.a.DASH){var s=null;s=this.segment.fileType===Tn.a.TS||this.segment.fileType===Tn.a.DASH?{startPos:this.tskList[this.curLoadTskIndex].begin,endPos:this.tskList[this.curLoadTskIndex].end,contentlength:this.tskList[this.curLoadTskIndex].end-this.tskList[this.curLoadTskIndex].begin}:this.segment.loadInfo,this.segment.dataUrl=function(e,t,n){if(!t)return"";t.indexOf("&start=")>0?t=(t=t.replace(/\&start=[0-9.]+&/g,"&start="+n.startPos+"&")).replace(/\&start=[0-9.]+$/g,"&start="+n.startPos):t.indexOf("?start=")>0&&(t=(t=t.replace(/\?start=[0-9.]+&/g,"?start="+n.startPos+"&")).replace(/\?start=[0-9.]+$/g,"?start="+n.startPos));t.indexOf("&end=")>0?t=(t=t.replace(/\&end=[0-9.]+&/g,"&end="+n.endPos+"&")).replace(/\&end=[0-9.]+$/g,"&end="+n.endPos):t.indexOf("?end=")>0&&(t=(t=t.replace(/\?end=[0-9.]+&/g,"?end="+n.endPos+"&")).replace(/\?end=[0-9.]+$/g,"?end="+n.endPos));t.indexOf("&contentlength=")>0?t=(t=t.replace(/\&contentlength=[0-9.]+&/g,"&contentlength="+n.contentlength+"&")).replace(/\&contentlength=[0-9.]+$/g,"&contentlength="+n.contentlength):t.indexOf("?contentlength=")>0&&(t=(t=t.replace(/\?contentlength=[0-9.]+&/g,"?contentlength="+n.contentlength+"&")).replace(/\?contentlength=[0-9.]+$/g,"?contentlength="+n.contentlength));return t}(this.segment.fileType,i,s)}else this.segment.fileType.indexOf(Tn.a.M4S)>=0&&(this.segment.dataUrl=i);this.url=this.segment.dataUrl,this.tsk=this.tskList[this.curLoadTskIndex++];var c=Gt.a.getPureIP(this.url);this.segment.ip=this.domain=Yt.a.cdnLoadDoMain=c;var u=this.url.indexOf(c),d=this.segment.fileType;this.segment.fileType.indexOf(Tn.a.TS)>=0&&(d=Tn.a.TS);var l=this.url.indexOf("."+d);this.tsk.path=this.url.slice(u+c.length,l+4),this.tsk.url=this.url,this.tsk.rate=this.segment.rate,this.tsk.ip=c+":80",this.tsk.segment=this.segment,this.tsk.data=null,this.tsk.range=null,qa.a.getEvent().on(Da.a.LoadStatus+this.CDNStateChangeEventID,this.loaderStateChange.bind(this));try{this.startTime=Date.now(),e=this.domain,t=this.idc,n=e+"|"+t,(r=Ka.get(n))?Ka.set(n,{total:r.total+1,failcnt:r.failcnt}):Ka.set(n,{total:1,failcnt:0}),this.loader.load(this.tsk,this.segment.loadType)}catch(f){this.segment&&(this.close(!0),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_error,Ea.a.LoaderState_error_load,"trycatchError",""))}}else this.startDisPatch()}},{key:"loaderStateChange",value:function(e,t){if(this.segment)switch(e){case"progress":this.tsk&&this.tsk.data&&this.tsk.range&&(this.tsk.range.end-this.tsk.range.begin!==this.tsk.data.byteLength&&yn.a.error("data len is not right ,url = "+this.segment.dataUrl+"range "+this.tsk.range.begin+"-"+this.tsk.range.end),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_progress,this.tsk.data,this.tsk.range.begin,this.tsk.range.end-this.tsk.range.begin));break;case"done":yn.a.info("load [DONE] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index : "+this.segment.index),this.tsk=null,this.checkTask();break;case"error":yn.a.info("load [error] ~~range : "+this.tsk.begin+"-"+this.tsk.end+" , index-"+this.segment.index+" errDetail-"+t),qa.a.getEvent().emit(this.CDNStateChangeEventID,Ea.a.LoaderState_error,Ea.a.LoaderState_error_load,t,"")}}},{key:"close",value:function(e){this.tskList=null,this.tsk=null,qa.a.getEvent().off(Da.a.DisPatchStatus+this.segment.type),this.dispatcher&&this.dispatcher.clear(),this.dispatcher=null,this.segment=null,this.loader&&(e||this.loader.type===Va.type)&&this.loader.running&&this.loader.close(),this.loader=null,qa.a.getEvent().off(Da.a.LoadStatus+this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.segment}},{key:"loadStage",get:function(){return this._loadStage},set:function(e){this._loadStage=e}},{key:"curLoadTskIdx",get:function(){return this.curLoadTskIndex},set:function(e){this.curLoadTskIndex=e}},{key:"doMainName",get:function(){return this.domain}},{key:"dataUrl",get:function(){return this.url}},{key:"curIDC",get:function(){return this.idc}}]),e}(),Ja="",eo=null,to="",no=/[a-z]/i;var ro=function(e,t,n){if(e){if(!no.test(e)){var r=Gt.a.getUserInfoFromCookie(),i={dmnm:e,ips:e,userinfo:r.userInfo,idc:n||r.idc,type:t};return yn.a.debug("fetch DNSParser"+JSON.stringify(i)),void Yt.a.sendPingBack({type:"DNSParser",para:i})}if(to=e,Ja="http://"+Yt.a.bgpIP.replace("3eb/","")+"3f0/hd.cloud.iqiyi.com/d?dn="+to+"&business=pcwPlayer&cross-domain=1",an.isHTTPS&&(Ja=Ja.replace(/^http:/gi,"https:")),an.supportFetch)fetch(Ja).then((function(e){e.status>=400||e.status<200?yn.a.error("fetch err ,status "+e.status):e.text().then((function(e){var r=Gt.a.getUserInfoFromCookie(),i={dmnm:to,ips:e,userinfo:r.userInfo,idc:n||r.idc,type:t};yn.a.debug("fetch DNSParser"+JSON.stringify(i)),Yt.a.sendPingBack({type:"DNSParser",para:i})}))}))["catch"]((function(e){"Failed to fetch"===e.message?yn.a.warn("DNSParser Failed to fetch "):yn.a.warn("DNSParser fetch err-"+e.message)}));else{(eo=new XMLHttpRequest).responseType="text",eo.onreadystatechange=function(){if(4===eo.readyState){if(200===eo.status&&eo.response){var e=Gt.a.getUserInfoFromCookie(),r="";eo.response&&(r=eo.response);var i={dmnm:to,ips:r,userinfo:e.userInfo,idc:n||e.idc,type:t};yn.a.debug("xhr DNSParser"+JSON.stringify(i)),Yt.a.sendPingBack({type:"DNSParser",para:i})}eo&&(eo.abort(),eo=null)}};try{eo.open("GET",Ja,!0),yn.a.info("Xhr DNSParser Xhr url "+Ja),eo.send()}catch(a){yn.a.error("xhr dns err-"+a.message),eo&&eo.abort()}}}},io=!1,ao=!1,oo=0,so=0;function co(e){return e<zt.a.dispatchCfg.length?zt.a.dispatchCfg[e]:zt.a.dispatchCfg[zt.a.dispatchCfg.length-1]}function uo(e,t,n){var r=Ca.getDataurl(zt.f.CDN,e);if(r&&t)for(var i=0;i<r.length;i++)if(t===r[i].URL.split("/")[2]){r[i].errCnt=r[i].errCnt?r[i].errCnt+1:1,r[i].errCnt>=4-r.length&&(r[i].status=n),yn.a.info("updateCDNUrlStatus ,cdnName : "+t+", errCnt : "+r[i].errCnt+", status : "+n),Ca.setDataurl(zt.f.CDN,e,r);break}}var lo=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.videoSegment=null,this.loadTaskList=null,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,this.cdnTaskLoader=null,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0}},{key:"load",value:function(e,t,n,r){this.fireError||0===t.length||(this.videoSegment=e,this.loadTaskList=t,this.loaderIndex=n,this.urlIndex=r||-1,io=!1,this.CDNStateChangeEventID=++oo,this.startTime=Date.now(),clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),co(this.dispatchTimeoutCnt)),this.cdnTaskLoader=new Xa,qa.a.getEvent().on(this.CDNStateChangeEventID,this.stateChange.bind(this)),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,0,this.urlIndex,this.CDNStateChangeEventID),Mr.addPBItem(mr.cdn_taskCnt))}},{key:"onDispatchTimeOut",value:function(){!this.loadTaskList||this.fireError||this.retryStep>0||(this.dispatchTimeoutCnt++,this.stateChange(Ea.a.LoaderState_error,Ea.a.LoaderState_error_dispatch,"timeout",Date.now()-this.startTime))}},{key:"onRcvTimeOut",value:function(){!this.loadTaskList||this.fireError||this.retryStep>0||(this.hitProgress?(this.rcvTimeoutCnt++,this.stateChange(Ea.a.LoaderState_error,Ea.a.LoaderState_error_load,"revTimeout",Date.now()-this.startTime)):(this.TTFBTimeoutCnt++,this.stateChange(Ea.a.LoaderState_error,Ea.a.LoaderState_error_load,"ttfbTimeout",Date.now()-this.startTime)))}},{key:"stateChange",value:function(e,t,n,r){var i,a;if(!(!this.loadTaskList||this.fireError||this.retryStep>0))switch(e){case Ea.a.LoaderState_ready:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(a=this.TTFBTimeoutCnt)<zt.a.TTFBCfg.length?zt.a.TTFBCfg[a]:zt.a.TTFBCfg[zt.a.TTFBCfg.length-1]);break;case Ea.a.LoaderState_progress:clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onRcvTimeOut.bind(this),(i=this.rcvTimeoutCnt)<zt.a.rcvCfg.length?zt.a.rcvCfg[i]:zt.a.rcvCfg[zt.a.rcvCfg.length-1]),this.onProgress(t,n,r);break;case Ea.a.LoaderState_done:clearTimeout(this.timerStep),this.timerStep=0,this.onComplete();break;case Ea.a.LoaderState_error:clearTimeout(this.timerStep),this.timerStep=0,this.onError(t,n,r)}}},{key:"onProgress",value:function(e,t,n){if(this.hitProgress||(Mr.addPBItem(mr.cdn_progressCnt),Mr.addPBItem(mr.cdn_progressTime,Date.now()-this.startTime),this.hitProgress=!0),Mr.addPBItem(mr.cdn_loadTime,Date.now()-this.startTime),Yt.a.cdnSize+=n,Yt.a.cdnCostTime+=Date.now()-this.startTime,this.startTime=Date.now(),this.loadSizeForSpeed+=n,-1===this.loadTimeForSpeed)this.loadTimeForSpeed=Date.now();else if(Date.now()-this.loadTimeForSpeed>1e3&&(this.speed=Math.ceil(this.loadSizeForSpeed/(Date.now()-this.loadTimeForSpeed)),yn.a.info("load SPEED(B/S)"+1e3*this.speed+" , Rate : "+this.videoSegment.rate),function(e,t,n){var r=Ca.getDataurl(zt.f.CDN,e);if(r)for(var i=0;i<r.length;i++){if(t===r[i].URL.split("/")[2]){r[i].speed=n,Ca.setDataurl(zt.f.CDN,e,r);break}}}(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,this.speed),Yt.a.cdnSpeed=this.speed,this.loadSizeForSpeed=0,this.loadTimeForSpeed=Date.now(),this.speed<this.videoSegment.rate?this.speedLowCnt++:this.speedLowCnt--,this.speedLowCnt>5)){yn.a.info("load lowSpeed ,idc:"+this.cdnTaskLoader.curIDC+",doMainName:"+this.cdnTaskLoader.doMainName),Yt.a.cdnSpeed=0,this.speedLowCnt=0,this.speed<this.videoSegment.rate/2&&!ao&&Gt.a.isHit()&&(this.cdnTaskLoader.doMainName?ro(this.cdnTaskLoader.doMainName,Ha,this.cdnTaskLoader.curIDC):this.videoSegment.dispatchUrl&&ro(Gt.a.getPureIP(this.videoSegment.dispatchUrl),Ha,this.cdnTaskLoader.curIDC),ao=!0);var r=this.videoSegment.checkP2PHealth();if(r>=3+Math.ceil(this.speed/100))mn.loader.message="load-lowSpeed-"+this.videoSegment.idc+"-"+this.videoSegment.ip+"-"+this.videoSegment.sourceID,this.clear(!0),this.videoSegment.setOnP2P(15e3),yn.a.info("start pure P2P state! health peers : "+r+" , cdnSpeed : "+this.speed+" , byteRate : "+this.videoSegment.rate);else if(this.speed<this.videoSegment.rate/2&&"video"===this.videoSegment.type){io=!0;for(var i="",a=0;a<this.loadTaskList.length;a++)i+=this.loadTaskList[a].begin+" - "+this.loadTaskList[a].end+", ";yn.a.info("lowSpeedFlag ,range, "+i),uo(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,Ha),qa.a.getEvent().emit(Da.a.CdnNodeMgrStateChange+this.videoSegment.type,Ea.a.LoaderState_lowSpeed,"",this.loaderIndex)}}if(n>0){if(this.videoSegment.fileType===Tn.a.DASH&&("a0"===this.videoSegment.index||"e0"===this.videoSegment.index)&&0===t){for(var o=0,s=Math.min(50,n);o<s&&0===e[o];)o++;if(o>=s)return yn.a.error("vp9 load init data is null, "+this.videoSegment.dataUrl),this.stateChange(Ea.a.LoaderState_error,Ea.a.LoaderState_error_load,"dataError"),mn.errorStage="dataNULL",void(mn.errorFragment=this)}this.videoSegment.pushData(e,t,n)}}},{key:"onComplete",value:function(){if(this.videoSegment.fileType===Tn.a.FTS){if(io)return;this.videoSegment.loadDone=!0}this.videoSegment.clearEndOnP2PTime(),this.hitProgress||(Mr.addPBItem(mr.cdn_progressCnt),Mr.addPBItem(mr.cdn_progressTime,Date.now()-this.startTime)),Mr.addPBItem(mr.cdn_loadTime,Date.now()-this.startTime),this.startTime=Date.now(),Yt.a.cdnSpeed=0,this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!1)}},{key:"onError",value:function(e,t,n){switch(clearTimeout(this.retryStep),this.retryStep=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),e){case Ea.a.LoaderState_error_dispatch:if(mn.dispatcher.message="dispatch-"+t+NaN+n+":index = "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,yn.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt "+this.retryCnt+", msg : "+n+" ,loaderIndex : "+this.loaderIndex),"statusErr-405"===t&&(0===so||Date.now()-so>=18e5))return this.clear(!0),Ca.clearDataurl(zt.f.CDN,this.videoSegment.sourceID),this.videoSegment.dataUrl="",so=Date.now(),void Yt.a.noticeRefreshMovieData(this.videoSegment.tvid);if(this.videoSegment.dispatchOnError===undefined&&(this.videoSegment.dispatchOnError=0),this.videoSegment.dispatchOnError+=1,this.videoSegment.loadType===zt.f.DCACHE){if("statusErr-302"===t||"responseIsNull"===t)return void(this.videoSegment.dcacheError=!0);if(this.videoSegment.dcacheDispatchError===undefined&&(this.videoSegment.dcacheDispatchError=0),++this.videoSegment.dcacheDispatchError>1)return void(this.videoSegment.dcacheError=!0)}""===Yt.a.bgpIP_1&&gn.loadBGPIP(),3===this.videoSegment.dispatchOnError&&this.videoSegment.dispatchUrl&&ro(Gt.a.getPureIP(this.videoSegment.dispatchUrl),za);break;case Ea.a.LoaderState_error_load:if(this.videoSegment.loadType===zt.f.DCACHE&&++this.videoSegment.dcacheLoadErrCnt>1)return this.videoSegment.dcacheError=!0,void yn.a.error("load [Error] ,dcache load err more than 3,range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n+" ,loaderIndex : "+this.loaderIndex);if(t===Ea.a.LoaderState_dataRangeError&&(Ca.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end)),"dataError"===t&&this.videoSegment.clearData(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end),this.videoSegment.loadType===zt.f.CDN){if(this.cdnTaskLoader){var r=Ca.getDataurl(this.videoSegment.loadType,this.videoSegment.sourceID);r&&(r.length<=1&&3===this.retryCnt||r.length>=3||2===r.length&&(2===this.retryCnt||5===this.retryCnt))&&ro(this.cdnTaskLoader.doMainName,za,this.cdnTaskLoader.curIDC)}"statusErr-405"===t&&Ca.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),"lowSpeed"!==t&&"tryCatchError"!==t&&this.cdnTaskLoader&&(uo(this.videoSegment.sourceID,this.cdnTaskLoader.doMainName,za),i=this.cdnTaskLoader.doMainName,a=this.cdnTaskLoader.curIDC,o=i+"|"+a,(s=Ka.get(o))?Ka.set(o,{total:s.total,failcnt:s.failcnt+1}):Ka.set(o,{total:0,failcnt:1})),0===ho(this.videoSegment.loadType,this.videoSegment.sourceID)&&Ca.clearDataurl(this.videoSegment.loadType,this.videoSegment.sourceID),this.cdnTaskLoader&&-1===this.videoSegment.errIDCList.indexOf(this.cdnTaskLoader.curIDC)&&this.videoSegment.errIDCList.push(this.cdnTaskLoader.curIDC)}Yt.a.cdnSpeed=0,mn.loader.message="load-"+t+" message- "+n+" idc - "+this.videoSegment.idc+"-"+this.videoSegment.ip+" index- "+this.videoSegment.index+" pos: "+this.videoSegment.startPos+"-"+this.videoSegment.endPos,yn.a.error("load [Error] range url : "+(this.cdnTaskLoader?this.cdnTaskLoader.dataUrl:null)+" , type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n+" ,loaderIndex : "+this.loaderIndex);break;default:yn.a.error("load [Error] type : "+e+" , detail : "+t+" , retryCnt : "+this.retryCnt+" , msg : "+n)}var i,a,o,s;if(clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.videoSegment.checkP2PHealth()>=4)return yn.a.info("load [Error],start pure P2P state,url "+this.cdnTaskLoader.dataUrl),this.clear(!0),void this.videoSegment.setOnP2P(15e3);if(this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.videoSegment.loadType!==zt.f.DCACHE&&this.retryCnt++,this.retryCnt>zt.a.dispatchCfg.length){this.retryCnt=0;var c=Yt.a.getBufferFunc();(this.videoSegment.fileType.indexOf(Tn.a.M4S)>=0?Math.min(c.buffered.video.len,c.buffered.audio.len):c.len)<2?(this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0),this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,this.fireError=!0,yn.a.error("load [FINAL Error] !!!, loaderIndex "+this.loaderIndex),qa.a.getEvent().emit(Da.a.CdnNodeMgrStateChange+this.videoSegment.type,e,t,this.loaderIndex)):this.retryStep=setTimeout(this.reLoad.bind(this),2e3)}else this.retryStep=setTimeout(this.reLoad.bind(this),2e3)}},{key:"reLoad",value:function(){var e;(clearTimeout(this.retryStep),this.retryStep=0,!this.loadTaskList||this.cdnTaskLoader.curLoadTskIndex-1>=this.loadTaskList.length)||(this.startTime=Date.now(),this.videoSegment&&(this.cdnTaskLoader.curLoadTskIdx>0&&this.cdnTaskLoader.curLoadTskIdx--,e=this.videoSegment.fileType!==Tn.a.FTS?this.videoSegment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end):[{begin:this.loadTaskList[0].begin,end:this.loadTaskList[this.loadTaskList.length-1].end}]),e&&0!==e.length?(Mr.addPBItem(mr.cdn_taskCnt),this.loadTaskList=e,this.urlIndex=-1,this.videoSegment.fileType===Tn.a.FTS&&(this.videoSegment.segment.dataLen=0,io=!1),clearTimeout(this.timerStep),this.timerStep=setTimeout(this.onDispatchTimeOut.bind(this),co(this.dispatchTimeoutCnt)),yn.a.warn("reLoad !!!!!!!!!!!~~"+JSON.stringify(e)+", loaderIndex : "+this.loaderIndex+", retryCnt : "+this.retryCnt),this.cdnTaskLoader.load(this.videoSegment,this.loadTaskList,this.retryCnt,this.urlIndex,this.CDNStateChangeEventID)):this.onComplete())}},{key:"clear",value:function(e){this.loadTaskList&&this.videoSegment.recycleCDNTask(this.loadTaskList),this.loadTaskList=null,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.startTime=0,this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),e||(this.fireError=!1),this.loaderIndex=-1,qa.a.getEvent().off(this.CDNStateChangeEventID),Yt.a.cdnLoadDoMain=""}},{key:"mssNodeReset",value:function(){this.retryCnt=0,this.speed=0,this.speedLowCnt=0,this.loadTimeForSpeed=-1,this.loadSizeForSpeed=0,this.startTime=0,this.fireError=!1,this.dispatchTimeoutCnt=0,clearTimeout(this.retryStep),this.retryStep=0,clearTimeout(this.timerStep),this.timerStep=0,this.hitProgress=!1,this.TTFBTimeoutCnt=0,this.rcvTimeoutCnt=0,this.cdnTaskLoader&&(this.cdnTaskLoader.curLoadTskIdx=0,this.cdnTaskLoader.running&&this.cdnTaskLoader.close(!0)),qa.a.getEvent().off(this.CDNStateChangeEventID)}},{key:"running",get:function(){return null!==this.loadTaskList}},{key:"cdnSpeed",get:function(){return this.speed}},{key:"loadStage",get:function(){return this.cdnTaskLoader.loadStage},set:function(e){this.cdnTaskLoader.loadStage=e}},{key:"isError",get:function(){return this.fireError}}]),e}();function fo(e,t,n){var r=[],i=Ca.getDataurl(e,t);if(i)for(var a=-1,o=-1,s=0;s<i.length;s++)1!==n&&n?i[s].status||r.push(s):(i[s].status||(i[s].speed&&i[s].speed>a?(a=i[s].speed,o=s):i[s].speed||-1!==o||(o=s)),s>=i.length-1&&r.push(o));return r}function ho(e,t){var n=0,r=Ca.getDataurl(e,t);if(r)for(var i=0;i<r.length;i++)r[i].status||n++;return n}var po=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.loadTaskList=null,this.segment&&(this.resetLoader(),qa.a.getEvent().off(Da.a.CdnNodeMgrStateChange+this.segment.type)),this.segment=null,this.loaderList=[]}},{key:"resetLoader",value:function(){for(var e=0;e<this.loaderList.length;e++)this.loaderList[e]&&(this.loaderList[e].clear(!1),this.loaderList[e]=null)}},{key:"load",value:function(e,t){if(!this.loadTaskList&&!this.fireError&&0!==t.length){this.segment=e,this.loadTaskList=t,qa.a.getEvent().on(Da.a.CdnNodeMgrStateChange+this.segment.type,this.stateChange.bind(this));var n=new lo;this.loaderList.push(n),n.load(this.segment,this.loadTaskList,-1)}}},{key:"stateChange",value:function(e,t,n){var r=this;if(this.segment&&this.loadTaskList){var i=function(){switch(e){case Ea.a.LoaderState_lowSpeed:if(r.loaderList.length>1)return yn.a.info("already in MSS status"),{v:void 0};if(!Ca.getDataurl(zt.f.CDN,r.segment.sourceID))return{v:void 0};var i=r.checkTastList(),a=fo(zt.f.CDN,r.segment.sourceID,i.loaderNum);if(i.loaderNum<=1||a.length<=1)return yn.a.info("check MSS load , current dataLen is need 1 loader,so not open MSS "),{v:void 0};var o=0;for(o=0;o<r.loaderList.length;o++)r.loaderList[o].mssNodeReset();o=0;for(var s=function(){r.loaderList[o]||r.loaderList.push(new lo);var e=null;e=o<i.loaderNum-1?i.tastList.slice(o,++o):i.tastList.slice(o++);for(var t="",n=0;n<e.length;n++)t+=e[n].begin+" - "+e[n].end+", ";var s=r;!function(e,t,n){setTimeout((function(){s.loaderList[t-1]?(yn.a.info("start MSS load , loaderIndex "+(t-1)+",loadRange "+n),s.loaderList[t-1].load(s.segment,e,t-1,a[t-1])):yn.a.info("MSS load is null, loaderIndex "+(t-1)+", loaderLen "+this.loaderList.length)}),50*(t-1))}(e,o,t)};o<i.loaderNum;)s();break;case Ea.a.LoaderState_error_dispatch:case Ea.a.LoaderState_error_load:for(var c=!0,u=0;u<r.loaderList.length;u++)if(!r.loaderList[u].isError){c=!1;break}c?r.cdnFinalErrFun(e,t):r.loaderList[n<0?0:n].clear(!0)}}();return"object"===oe()(i)?i.v:void 0}}},{key:"cdnFinalErrFun",value:function(e,t){yn.a.error("all  loader [FINAL Error]!!!!!!!!!!!!!!!!"),Za(!0),e===Ea.a.LoaderState_error_dispatch?mn.errorStage="dispatch":t===Ea.a.LoaderState_dataRangeError?mn.errorStage=t:mn.errorStage="load",Mr.check({rec:"fail",etyp:mn.errorStage,info:mn.loader.message}),mn.errorFragment=this}},{key:"checkTastList",value:function(){this.segment.fileType!==Tn.a.FTS&&(this.loadTaskList=this.segment.checkTask(this.loadTaskList[0].begin,this.loadTaskList[this.loadTaskList.length-1].end));for(var e=0,t="",n=0;n<this.loadTaskList.length;n++)e+=this.loadTaskList[n].end-this.loadTaskList[n].begin,t+=this.loadTaskList[n].begin+" - "+this.loadTaskList[n].end+", ";var r=ho(this.segment.sourceID);if(0===r||1===r)return{loaderNum:r,tastList:this.loadTaskList};var i=Math.min(Math.max(1,Math.floor(e/1048576)),r);if(yn.a.info("MSS loader checkTastList, NeedLoaderLen "+e+", needLoaderNum "+i+", tastList "+t),i<=this.loadTaskList.length)return{loaderNum:i,tastList:this.loadTaskList};for(var a=[],o=Math.ceil(e/i),s=this.loadTaskList[0].begin,c=0,u=0;u<i;u++)c<this.loadTaskList.length&&(s+o<=this.loadTaskList[c].end?(a.push({begin:s,end:s+o}),s+=o):(a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end),s>=this.loadTaskList[c].end&&++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin));for(;c<this.loadTaskList.length;)s<this.loadTaskList[c].end&&a.push({begin:s,end:this.loadTaskList[c].end}),s=this.loadTaskList[c].end,++c<this.loadTaskList.length&&(s=this.loadTaskList[c].begin);return yn.a.info("MSS loader split tast res ,  "+JSON.stringify(a)),{loaderNum:i,tastList:a}}},{key:"running",get:function(){if(!this.loaderList)return!1;for(var e=0;e<this.loaderList.length;e++)if(this.loaderList[e].running)return!0;return this.reset(),!1}}]),e}(),_o="video",vo="audio",go=new po,yo=new po;function mo(e,t,n){var r="",i=parseInt(n.substring(1));return r=i>=16?Gt.a.sliceStr(e+t,5)+n.substring(0,1)+i.toString(16):Gt.a.sliceStr(e+t,5)+n.substring(0,1)+"0"+i.toString(16),parseInt("0x"+r)}var bo=function(){function e(t){i()(this,e),this.dispatchUrl=t.dispatchUrl,this.tvid=t.tvid,this.rate=t.levelId,this.vids=t.vids,this.vid=t.vid,this.albumID=t.albumID.toString(),this.sourceID=t.sourceID,this.index=t.index,this.type=t.trackerType,this.startPos=t.startPos,this.endPos=t.endPos,this.size=t.size,this.lastCEPos=-1,this.startTime=t.startTime<0?0:t.startTime,this.endTime=t.endTime<0?864e5:t.endTime,this.endOnP2PTime=0,this.fileType=t.videoType,this.realIdx=t.realSegIdx,this.alias=mo(this.sourceID,this.vid,this.realIdx),this.fragmentName=this.alias+"_"+this.index+"|"+this.showStartTime+"-"+this.showEndTime,this.idc="",this.ip="",this.errIDCList=[],""!==this.albumID&&"0"!==this.albumID&&this.albumID!==undefined&&0!==this.albumID?this.p2pID=parseInt("0x"+gr()(this.albumID).substr(0,10)).toString():""!==this.tvid&&"0"!==this.tvid&&this.tvid!==undefined&&0!==this.tvid?this.p2pID=parseInt("0x"+gr()(this.tvid).substr(0,10)).toString():this.p2pID=this.vid,this._dcacheErr=!1,this._dcacheLoadErrCnt=0,this._loadType=t.loadType?t.loadType:zt.f.CDN}return o()(e,[{key:"loadType",get:function(){return this._loadType}},{key:"dcacheError",get:function(){return this._dcacheErr},set:function(e){this._dcacheErr=e}},{key:"dcacheLoadErrCnt",get:function(){return this._dcacheLoadErrCnt},set:function(e){this._dcacheLoadErrCnt=e}},{key:"onTracker",get:function(){return pa.hasProxyByID(this.p2pID)}},{key:"updateDispatchUrl",value:function(e){this.dispatchUrl=e}},{key:"checkCreateSegment",value:function(){if(this.segment){if(this.segment.alias===this.alias&&this.segment.size===this.size){0!==this.segment.state&&(this.segment.state=0);var e=this;return this.segment.refreshFun=function(){e&&e.refreshBuffer.call(e)},yn.a.info("segment is exit"),this.segment.setRange(this.startPos,this.endPos),void(this.seekable&&this.segment.setPosList(this.seekable))}yn.a.info("segment is exit,but size or alias is match,so remove"),Xn.removeSegment(this.alias)}var t=new Aa(this.size,this.tvid,this.sourceID,this.albumID,this.realIdx,this.alias,this.vid,this.p2pID,this.rate,this.vids,this.fileType,this.seekable);Xn.setSegment(this.alias,t);var n=this;this.segment.refreshFun=function(){n&&n.refreshBuffer.call(n)},this.segment.setRange(this.startPos,this.endPos)}},{key:"loadData",value:function(e,t,n){if(this.segment){0!==this.segment.state&&(this.segment.state=0),this.fileType===Tn.a.FTS&&(this.segment.dataLen=0),this._loadType=n;var r=this.checkTask(e,t);if(0===r.length)return this.segment.checkData(),void yn.a.info("data is already have,not need load~~~ "+this.index+" : "+e+"-"+t+" state: "+this.segment.state+" cePos "+this.segment.cePos+",curCEPos "+this.lastCEPos);"video"===this.type?(yn.a.info("after checkTask ,video loadPoint  range = "+JSON.stringify(r)),go.load(this,r)):(yn.a.info("after checkTask ,audio loadPoint  range = "+JSON.stringify(r)),yo.load(this,r))}}},{key:"p2pLoadSegment",value:function(){"video"===this.type&&this.segment&&this.segment.dataErrCount<10&&Xn.setLoadSegment(this.alias)}},{key:"isOnP2P",get:function(){return this.endOnP2PTime>0&&Date.now()<=this.endOnP2PTime}},{key:"segment",get:function(){return Xn.getSegment(this.alias)}},{key:"setOnP2P",value:function(e){this.endOnP2PTime=e+Date.now(),this.type===_o&&(po.loadStage="P2P")}},{key:"clearEndOnP2PTime",value:function(){this.endOnP2PTime=-1}},{key:"checkTask",value:function(e,t){return this.segment?this.fileType===Tn.a.FTS?[{begin:e,end:t}]:this.segment.checkTask(e,t):(yn.a.error("checkTask return null,because of segment is null"),null)}},{key:"dataUrl",get:function(){return this.segment.dataUrl},set:function(e){this.segment.dataUrl=e}},{key:"done",get:function(){return!!this.segment&&(this.fileType===Tn.a.M4S||this.fileType===Tn.a.DASH||this.fileType===Tn.a.TS?this.segment.done:this.fileType===Tn.a.FTS?this.segment.tsLoadDone:void 0)}},{key:"checkP2PHealth",value:function(){return this.segment?this.segment.checkP2PHealth():0}},{key:"clearData",value:function(e,t){this.segment&&this.segment.deleteRange(e,t-e)}},{key:"updateLoadRange",value:function(e,t){this.segment&&this.segment.setRange(e,t)}},{key:"setTrackerIP",value:function(e){pa&&(pa.hasProxyByIPInfo(e)?pa.getProxyByIPInfo(e).id=this.p2pID:pa.startProxy(this.p2pID,e))}},{key:"recycleCDNTask",value:function(e){this.segment&&this.segment.recycleCDNTask(e)}},{key:"refreshBuffer",value:function(){this.segment&&(-1!==this.endPos?this.lastCEPos=Math.min(this.segment.cePos,this.endPos):this.lastCEPos=this.segment.cePos)}},{key:"updateCePos",value:function(e){this.segment?this.lastCEPos=e:this.lastCEPos=-1}}]),e}();function ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var xo=function(e){d()(n,e);var t=ko(n);function n(e,r){return i()(this,n),t.call(this,e,r)}return o()(n,[{key:"pushData",value:function(e,t,n){return this.segment?(this.segment.addData(t,e,n),Mr.cdnSize=n+Mr.cdnSize,this.segment.peerMgr&&(this.loadType===zt.f.DCACHE?this.segment.peerMgr.usedSize=n+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0):(yn.a.warn("pushData segment is null"),!0)}}]),n}(bo);function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var To=function(e){d()(n,e);var t=So(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e,r)).loadInfo=e.loadInfo,a}return o()(n,[{key:"pushData",value:function(e,t,n){if(!this.segment)return yn.a.warn("pushData segment is null"),!0;var r=t-this.loadInfo.startPos,i=e.byteLength;return this.segment.addData(r,e,i),Mr.cdnSize=n+Mr.cdnSize,this.segment.peerMgr?(this.loadType===zt.f.DCACHE?this.segment.peerMgr.usedSize=i+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=i+this.segment.peerMgr.cdnSize,!0):void 0}},{key:"loadDone",get:function(){return this.segment.tsLoadDone},set:function(e){this.segment.tsLoadDone=e}}]),n}(bo);function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Io,wo,Ao,Eo,Do,qo=function(e){d()(n,e);var t=Po(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e,r)).seekable=e.seekable,a}return o()(n,[{key:"pushData",value:function(e,t,n){return!this.segment||(this.segment.addData(t,e,n),this.type===_o&&(Mr.cdnSize=n+Mr.cdnSize),this.segment.peerMgr&&this.type===_o&&(this.loadType===zt.f.DCACHE?this.segment.peerMgr.usedSize=n+this.segment.peerMgr.usedSize:this.segment.peerMgr.cdnSize=n+this.segment.peerMgr.cdnSize),!0)}},{key:"dataLen",get:function(){return this.segment.dataLen}}]),n}(bo),Oo=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.time=0,this.bid=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.dataFlag=!1}}]),e}(),Ro=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.levelID=-1,this.startTime=0,this.segmentIndex=0,this.chunkIndex=0,this.chunkPos=0,this.cEndTime=0,this.endPos=0,this.init=!1}}]),e}(),Lo=function(){function e(){i()(this,e),this.reset()}return o()(e,[{key:"reset",value:function(){this.levelID=-1,this.segmentIndex=0,this.chunkIndex=0,this.time=0,this.tvid=0}}]),e}(),Mo=!1,Co=!1,No=!1,Bo=new Lo,Fo=new Lo,Uo=!0,jo=!1,Vo=Date.now(),Wo=2e3,Ho=[],zo=0,Yo=function(){function e(){i()(this,e),this.dashInfo=null,this.levelMgr=null,this._levelID=0,this._absStrategy=null,this._readPointer=null,this._loadPointer=null,this._readAudioPointer=null,this._loadAudioPointer=null,this._p2pLoaderPointer=null,this.curLoadSegment=null,this.curLoadAudioSegment=null,this.videoFormatType=null,this.rangeSTime=-1,this.rangeETime=-1,this.audioDone=!1,this.videoDone=!1,this.absTocbs=!1,this.event=null,this.curFeedBid=0,this.buffTimer=-1}return o()(e,[{key:"done",get:function(){return this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?this.videoDone&&this.audioDone:this.videoDone}},{key:"resetLoader",value:function(){go.reset(),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||yo.reset()}},{key:"resetDoneStatus",value:function(){this.videoDone=!1,this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||(this.audioDone=!1)}},{key:"refreshLoadRange",value:function(e){e[0][1]>this.rangeETime&&this.done&&this.resetDoneStatus(),this.rangeSTime=e[0][0],this.rangeETime=e[0][1],yn.a.info("refreshLoadRange time ,start "+this.rangeSTime+", end "+this.rangeETime)}},{key:"feed",value:function(e,t,n){Yt.a.tvId=this.tvid=e,this.event?this.event.clear():this.event=qa.a.newEvent(),this.curFeedBid=n.bid,null===this.levelMgr&&(this.levelMgr=new En),this.dashInfo&&this.dashInfo.tvid===this.tvid||(this.levelMgr.clear(),this.dashInfo=new An(n));var r=this.dashInfo.parser(n);r&&this.levelMgr.set(r.levelID,r.data),this.rangeSTime=t[0][0],this.rangeETime=t[0][1],yn.a.info("feed time range ,start "+this.rangeSTime+", end "+this.rangeETime+",Type "+n.type),Yt.a.fileType=this.videoFormatType=n.type,Yt.a.aid=n.aid}},{key:"setDefList",value:function(e){if(this.dashInfo)for(var t=0;t<e.length;){yn.a.info("setDefList , bid ",e[t].bid);var n=this.dashInfo.parser(e[t]);n&&this.levelMgr.set(n.levelID,n.data),t++}}},{key:"checkBitRate",value:function(e){if(null===this.dashInfo)return null;-1===this._levelID?(null===this._absStrategy&&(this._absStrategy=new fr),this.buffTimer=setTimeout(this.getBuffer.bind(this),Wo)):(this.buffTimer>0&&clearTimeout(this.buffTimer),null!==this._absStrategy&&(this._absStrategy.close(),this._absStrategy=null),Bo.tvid===this.tvid&&(-1!==Bo.levelID&&Bo.reset(),-1!==Fo.levelID&&Fo.reset()),this.levelMgr.get(e)||yn.a.error("need feed first ,bitRate : ",e))}},{key:"levelID",get:function(){if(-1===this._levelID){if(this._absStrategy){var e=this._absStrategy.bitrate;return-1!==e&&this.levelMgr.has(e)&&Yt.a.absOpen||(e=this.curFeedBid),e}return this.curFeedBid}return this._levelID},set:function(e){this._levelID=e}},{key:"seek",value:function(e,t){0===this.levelID&&yn.a.error("need set bitrate first!"),No=!1;var n=this.levelID;null===this.dashInfo&&yn.a.error("need feed first!"),(e<0||e===undefined)&&(e=this.rangeSTime);var r=!1;-1===this._levelID&&this.curLoadSegment&&this.curLoadSegment.rate!==n&&this.levelMgr.has(this.curLoadSegment.rate)&&(n=this.curLoadSegment.rate),-1===this._levelID&&this._readPointer&&this._readPointer.bid!==n&&(r=!0),t||(Bo.reset(),Fo.reset()),wo=!0,Uo=!0,this.absTocbs=!1;var i=this.levelMgr.get(n);if(i||yn.a.error(" while seek ,levelInfo is null ,bid "+n),e>=i.duration)return No=!0,void(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(this.videoDone=!0,this.audioDone=!0):this.videoDone=!0);var a=null;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?a=Sn.getGapPos(i,e,_o,"start"):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(a=Sn.getTSGapPos(i,e,"start")),null!==a){this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||yo.reset(),go.reset(!1),Mo=!0,this.resetDoneStatus(),Eo=Date.now(),e<this.rangeSTime?(this.rangeSTime=e,yn.a.info("seek update time start  range ,start "+this.rangeSTime+", end "+this.rangeETime)):e>this.rangeETime&&(this.rangeETime=Math.min(i.duration,this.rangeETime),yn.a.info("seek update time end range ,start "+this.rangeSTime+", end "+this.rangeETime)),null===this._readPointer&&(this._readPointer=new Oo);var o=this._readPointer.segmentIndex;if(this.changeSegmentState(i,"e",a.segmentIndex,0),yn.a.info("seek update readPointer call changeSegmentState set 0 : e"+a.segmentIndex),this._readPointer.time=a.time,this._readPointer.segmentIndex=a.segmentIndex,this._readPointer.chunkIndex=a.chunkIndex,-1===this._levelID&&0!==this._readPointer.bid&&this._readPointer.bid!==n?this._readPointer.bid=this._readPointer.bid:this._readPointer.bid=n,r&&(Bo.time=this._readPointer.time,Bo.tvid=this.tvid,Bo.levelID=n,Bo.segmentIndex=this._readPointer.segmentIndex,Bo.chunkIndex=this._readPointer.chunkIndex,Do=!0,yn.a.info("seek cause switchVideoPointer ,"+JSON.stringify(Bo))),this.videoFormatType===Tn.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=a.pos,o!==this._readPointer.segmentIndex&&(this.changeSegmentState(i,"e",o,1),yn.a.info("seek update readPointer call changeSegmentState set 1 : e"+o)),null===this._loadPointer?(this._loadPointer=new Ro,this.videoFormatType===Tn.a.DASH&&(this._loadPointer.init=!0)):this.videoFormatType!==Tn.a.DASH||this.hasInitData(n,_o)||(this._loadPointer.init=!0),this._loadPointer.startTime=a.time,this._loadPointer.cEndTime=a.time,this._loadPointer.segmentIndex=a.segmentIndex,this._loadPointer.chunkIndex=a.chunkIndex,this._loadPointer.chunkPos=a.pos,this._loadPointer.levelID=n,this._p2pLoaderPointer||(this._p2pLoaderPointer=new Ro),this._p2pLoaderPointer.levelID=n,this.curLoadSegment){var s=parseInt(this.curLoadSegment.index.slice(1));this._loadPointer.segmentIndex!==s?(this.changeSegmentState(i,"e",s,1),yn.a.info("seek update loadPointer call changeSegmentState set 1 : e"+s)):(this.curLoadSegment.updateCePos(a.pos),this.curLoadSegment.updateLoadRange(this._loadPointer.chunkPos,this.curLoadSegment.endPos))}if(-1===this._levelID&&(Ao=a.chunkIndex-1),this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){var c=Sn.getGapPos(i,e,vo,"start");if(null===c)yn.a.error("Dash.seek fetch audio start point is null,time = "+e);else{null===this._loadAudioPointer?(this._loadAudioPointer=new Ro,this.videoFormatType===Tn.a.DASH&&(this._loadAudioPointer.init=!0)):this.videoFormatType!==Tn.a.DASH||this.hasInitData(n,vo)||(this._loadAudioPointer.init=!0),this.changeSegmentState(i,"a",c.segmentIndex,0),yn.a.info("seek call changeSegmentState set 0 : a"+c.segmentIndex);var u=this._loadAudioPointer.segmentIndex;this._loadAudioPointer.startTime=c.time,this._loadAudioPointer.cEndTime=c.time,this._loadAudioPointer.segmentIndex=c.segmentIndex,this._loadAudioPointer.chunkIndex=c.chunkIndex,this._loadAudioPointer.chunkPos=c.pos,this._loadAudioPointer.levelID=n,r&&(Fo.time=this._loadAudioPointer.startTime,Fo.tvid=this.tvid,Fo.levelID=n,Fo.segmentIndex=this._loadAudioPointer.segmentIndex,Fo.chunkIndex=this._loadAudioPointer.chunkIndex,jo=!0,yn.a.info("seek cause switchAudioPointer ,"+JSON.stringify(Fo))),u!==this._loadAudioPointer.segmentIndex&&(this.changeSegmentState(i,"a",u,1),yn.a.info("seek loadAudioPointer call changeSegmentState set 1 : a"+u)),null===this._readAudioPointer&&(this._readAudioPointer=new Oo);var d=this._readAudioPointer.segmentIndex;this._readAudioPointer.time=c.time,this._readAudioPointer.segmentIndex=c.segmentIndex,this._readAudioPointer.chunkIndex=c.chunkIndex,this._readAudioPointer.chunkPos=c.pos,-1===this._levelID&&0!==this._readAudioPointer.bid&&this._readAudioPointer.bid!==n?this._readAudioPointer.bid=this._readAudioPointer.bid:this._readAudioPointer.bid=n,d!==this._readAudioPointer.segmentIndex?(this.changeSegmentState(i,"a",d,1),yn.a.info("seek call changeSegmentState 1, a"+d)):this.curLoadAudioSegment&&(this.curLoadAudioSegment.updateCePos(c.pos),this.curLoadAudioSegment.updateLoadRange(this._loadAudioPointer.chunkPos,this.curLoadAudioSegment.endPos))}}}else yn.a.error("Dash.seek fetch video start point is null,time = "+e)}},{key:"read",value:function(e){if(Vo=Date.now(),null!==this._readPointer&&(this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||null!==this._readAudioPointer))if(null!==this.levelMgr){var t=!1,n=!1,r=!1,i=!1,a=!1;if(this.absTocbs)yn.a.info("abs switch cbs ing,so wait switch finished start read");else if(!Mo){if(0===this._readPointer.bid&&(this._readPointer.bid=this.levelID),this._readAudioPointer&&0===this._readAudioPointer.bid&&(this._readAudioPointer.bid=this.levelID),-1===this._levelID&&-1!==Bo.levelID&&(this.videoFormatType.indexOf(Tn.a.TS)>=0||(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&-1!==Fo.levelID)&&(this._readPointer.time>=Bo.time&&wo&&(t=!0),!t&&Bo.time>this._readPointer.time&&(i=!0),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||(this._readAudioPointer.time>=Fo.time&&Uo&&(n=!0),!n&&Fo.time>this._readAudioPointer.time&&(a=!0)),t&&(this.videoFormatType.indexOf(Tn.a.TS)>=0||(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&n))){if(!Yt.a.canSwitchVd())return;r=!0,Do||(this.changeSegmentState(this.levelMgr.get(this._readPointer.bid),"e",this._readPointer.segmentIndex,1),Do=!1),this._readPointer.bid=Bo.levelID,this._readPointer.segmentIndex=Bo.segmentIndex,this._readPointer.chunkIndex=Bo.chunkIndex,this._readPointer.time=Bo.time;var o=this.levelMgr.get(this._readPointer.bid);if(o){var s=null;(s=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getChunkSEPos(o,_o,this._readPointer.segmentIndex,this._readPointer.chunkIndex):Sn.getTSChunkSEPos(o,this._readPointer.segmentIndex,this._readPointer.chunkIndex))?this.videoFormatType===Tn.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=s.sPos:yn.a.error("switch readPointer chunkGapPos is null ,bid  "+JSON.stringify(this._readPointer))}else yn.a.error("switch readPointer levelInfo is null ,bid  "+this._readPointer.bid);if(yn.a.info("read Video pointer switch level "+JSON.stringify(this._readPointer)),Bo.reset(),this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){jo||(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),jo=!1),this._readAudioPointer.bid=Fo.levelID,this._readAudioPointer.segmentIndex=Fo.segmentIndex,this._readAudioPointer.chunkIndex=Fo.chunkIndex,this._readAudioPointer.time=Fo.time;var c=Sn.getChunkSEPos(o,vo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);if(c)this._readAudioPointer.chunkPos=c.sPos;else{yn.a.error("switch readAudioPointer audioChunkPos is null");var u=Sn.getGapPos(o,Fo.time,vo,"start");u?(this._readAudioPointer.segmentIndex=u.segmentIndex,this._readAudioPointer.chunkIndex=u.chunkIndex,this._readAudioPointer.chunkPos=u.pos,this._readAudioPointer.time=u.time):yn.a.error("switch readAudioPointer startGap is null ")}yn.a.info("read Audio pointer switch level "+JSON.stringify(this._readAudioPointer)),Fo.reset()}return yn.a.info("ABS switch bid ,notice pcw ,"+this._readPointer.bid),Yt.a.switchAutoDef(this._readPointer.bid),this._readPointer.dataFlag=!1,void(this._readAudioPointer&&(this._readAudioPointer.dataFlag=!1))}if(-1===this._levelID||this._readPointer.bid===this._levelID){var d=this.levelMgr.get(this._readPointer.bid);if(d!==undefined){var l=null,f=null,h=null;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(f=(l=Sn.getFilesInfo(d,_o))[this._readPointer.segmentIndex].seekable.time,h=l[this._readPointer.segmentIndex].seekable.pos):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(f=(l=d.m3u8)[this._readPointer.segmentIndex].time,h=l[this._readPointer.segmentIndex].pos),No){if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){var p=Go(l,l.length-1,l[l.length-1].seekable.pos.length-1),_=Sn.getFilesInfo(d,vo),v=Go(_,_.length-1,_[_.length-1].seekable.pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:Tn.a.M4S,video:{chunkEOF:!0,data:null,index:p},audio:{chunkEOF:!0,data:null,index:v}}}var g=Go(l,l.length-1,l[l.length-1].pos.length-1);return{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:"ts",stream:{chunkEOF:!0,data:null,index:g}}}if(e&&this.videoFormatType===Tn.a.DASH){var y=null,m=null,b=l[0].sourceID,k=mo(b,d.vid,"e0"),x=Xn.getSegment(k);if(x){var S=Sn.getChunkSEPos(d,_o,0,0);if(S){var T=S.ePos-S.sPos;x.hasData(S.sPos,T)&&(y=x.getData(S.sPos,T))}}if(k=mo(b=Sn.getFilesInfo(d,vo)[0].sourceID,d.vid,"a0"),x=Xn.getSegment(k)){var P=Sn.getChunkSEPos(d,vo,0,0);if(P){var I=P.ePos-P.sPos;x.hasData(P.sPos,I)&&(m=x.getData(P.sPos,I))}}return y&&m?(yn.a.info("~~~~~read init data ok,bid = "+this._readPointer.bid),26!==y[0]&&yn.a.info("init segment : "+y),{tvid:this.tvid,bid:this._readPointer.bid,loadDone:this.done,type:Tn.a.DASH,video:{data:y},audio:{data:m}}):null}var w="",A=l[this._readPointer.segmentIndex].sourceID,E=l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,D=mo(A,d.vid,"e"+E),q=null;q=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getChunkSEPos(d,_o,this._readPointer.segmentIndex,this._readPointer.chunkIndex):Sn.getTSChunkSEPos(d,this._readPointer.segmentIndex,this._readPointer.chunkIndex);var O=Xn.getSegment(D),R=0;if(q&&O)if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){var L=q.ePos-this._readPointer.chunkPos;O.hasData(this._readPointer.chunkPos,L)&&(R=L)}else if(this.videoFormatType===Tn.a.TS){var M=Math.min(O.cePos,q.ePos)-this._readPointer.chunkPos;O.hasData(this._readPointer.chunkPos,M)&&(R=M)}else this.videoFormatType===Tn.a.FTS&&(R=O.dataLen-this._readPointer.chunkPos);var C=null;(this.videoFormatType.indexOf(Tn.a.TS)>=0||this._readPointer.time<=this._readAudioPointer.time||Math.round(this._readPointer.time)-Math.round(this._readAudioPointer.time)<15||i)&&(t&&!r||O&&R>0&&(C=O.getData(this._readPointer.chunkPos,R)));var N=Go(l,this._readPointer.segmentIndex,this._readPointer.chunkIndex);this.videoFormatType===Tn.a.DASH&&N--,C&&(w+="~~~~~read video data ok,bid = "+this._readPointer.bid+" index = "+N+" startPos = "+this._readPointer.chunkPos+" endPos = "+(this._readPointer.chunkPos+R),this._readPointer.chunkPos+=C.length,this._readPointer.dataFlag=!0);var B=!1;if(C&&(wo=!1,this.videoFormatType===Tn.a.FTS?O&&O.tsLoadDone&&this._readPointer.chunkPos===O.dataLen&&(B=!0,wo=!0):q&&this._readPointer.chunkPos>=q.ePos&&(B=!0,wo=!0)),B&&this._readPointer.segmentIndex<=l.length-1){if((this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&this._readPointer.chunkIndex<h.length-1&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=h.length-1))if(this._readPointer.segmentIndex<l.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,E!==(l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(d,"e",this._readPointer.segmentIndex-1,1),yn.a.info("read  call changeSegmentState set 1, e"+this._readPointer.segmentIndex-1));var F=Sn.getChunkSEPos(d,_o,this._readPointer.segmentIndex,this._readPointer.chunkIndex);F&&(this._readPointer.chunkPos=F.sPos)}else this.changeSegmentState(d,"e",this._readPointer.segmentIndex,1),yn.a.info("~~~~~read video data finish ~~ segmentIndex "+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));if(this.videoFormatType.indexOf("ts")>=0&&this._readPointer.chunkIndex<h.length&&(this._readPointer.chunkIndex++,this._readPointer.chunkIndex>=h.length))if(this._readPointer.segmentIndex<l.length-1){this._readPointer.segmentIndex++,this._readPointer.chunkPos=0,this._readPointer.chunkIndex=0,E!==(l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)&&(this.changeSegmentState(d,"e",this._readPointer.segmentIndex-1,1),yn.a.info("read  call changeSegmentState set 1, e"+(this._readPointer.segmentIndex-1)));var U=Sn.getTSChunkSEPos(d,this._readPointer.segmentIndex,this._readPointer.chunkIndex);U&&(this._readPointer.chunkPos=U.sPos)}else this.changeSegmentState(d,"e",this._readPointer.segmentIndex,1),yn.a.info("~~~~~read video data finish ~~"+this._readPointer.segmentIndex+" chunkIndex "+(this._readPointer.chunkIndex-1));var j=f[this._readPointer.chunkIndex];this._readPointer.time=Gt.a.accAdd(l[this._readPointer.segmentIndex].start_second,j),w+=" ,video_time = "+this._readPointer.time}var V=null,W=0,H=null,z=null,Y=null,G=0,Q=!1,K="";if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){var $=this.levelMgr.get(this._readAudioPointer.bid);if(H=Sn.getFilesInfo($,vo),this._readAudioPointer.time<=this._readPointer.time||Math.round(this._readAudioPointer.time)-Math.round(this._readPointer.time)<15||a){Y=Sn.getChunkSEPos($,vo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);var Z=mo(H[this._readAudioPointer.segmentIndex].sourceID,$.vid,"a"+this._readAudioPointer.segmentIndex);if(z=Xn.getSegment(Z),Y&&z){var X=Y.ePos-this._readAudioPointer.chunkPos;n&&!r||z.hasData(this._readAudioPointer.chunkPos,X)&&(W=X)}z&&W>0&&(V=z.getData(this._readAudioPointer.chunkPos,W))}if(G=Go(H,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex),this.videoFormatType===Tn.a.DASH&&G--,V&&(K+="~~~~~read audio data ok, bid = "+this._readAudioPointer.bid+" index = "+G+" startPos = "+this._readAudioPointer.chunkPos+" endPos = "+(this._readAudioPointer.chunkPos+W),this._readAudioPointer.chunkPos+=V.length,this._readAudioPointer.dataFlag=!0,Uo=!1),V&&Y&&this._readAudioPointer.chunkPos>=Y.ePos&&(Q=!0,Uo=!0),Q){var J=H[this._readAudioPointer.segmentIndex].seekable.pos.length-1;if(this._readAudioPointer.segmentIndex<=H.length-1&&this._readAudioPointer.chunkIndex<J&&(this._readAudioPointer.chunkIndex++,this._readAudioPointer.chunkIndex>=J))if(this.changeSegmentState(this.levelMgr.get(this._readAudioPointer.bid),"a",this._readAudioPointer.segmentIndex,1),yn.a.info("read  call changeSegmentState set 1, a"+this._readAudioPointer.segmentIndex),this._readAudioPointer.segmentIndex<H.length-1){this._readAudioPointer.segmentIndex++,this._readAudioPointer.chunkPos=0,this._readAudioPointer.chunkIndex=0;var ee=Sn.getChunkSEPos($,vo,this._readAudioPointer.segmentIndex,this._readAudioPointer.chunkIndex);ee&&(this._readAudioPointer.chunkPos=ee.sPos)}else yn.a.info("~~~~~read audio data finish ~~"+this._readAudioPointer.segmentIndex+" chunkIndex "+(this._readAudioPointer.chunkIndex-1));var te=H[this._readAudioPointer.segmentIndex].seekable.time[this._readAudioPointer.chunkIndex];this._readAudioPointer.time=Gt.a.accAdd(H[this._readAudioPointer.segmentIndex].start_second,te),K+=" ,audio_time = "+this._readAudioPointer.time}}return Yt.a.lastReadSegIndex=l[this._readPointer.segmentIndex].realIdx!==undefined?l[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex,Yt.a.lastReadTvID=O?O.tvid:"",this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?O||z?(""!==w&&yn.a.info(w),""!==K&&yn.a.info(K),{tvid:O?O.tvid:z.tvid,bid:O?O.rate:z.rate,loadDone:this.done,type:this.videoFormatType===Tn.a.DASH?Tn.a.DASH:Tn.a.M4S,video:{chunkEOF:B,data:C,index:N,spos:C?this._readPointer.chunkPos-C.length:this._readPointer.chunkPos},audio:{chunkEOF:Q,data:V,index:G,spos:V?this._readAudioPointer.chunkPos-V.length:this._readAudioPointer.chunkPos}}):{}:this.videoFormatType!==Tn.a.TS&&this.videoFormatType!==Tn.a.FTS||!O?{}:(""!==w&&yn.a.info(w),""!==K&&yn.a.info(K),{tvid:O.tvid,bid:O.rate,loadDone:this.done,type:Tn.a.TS,stream:{chunkEOF:B,data:C,index:N,spos:C?this._readPointer.chunkPos-C.length:this._readPointer.chunkPos}})}yn.a.warn("DashMove.read, readPointer bid with levelInfo is null,bid = "+this._readPointer.bid)}}}else yn.a.warn("levelMgr is null,wait~~")}},{key:"getPlayBuffer",value:function(){var e=Yt.a.getBufferFunc();return this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len}},{key:"refreshcEndTime",value:function(e,t){if(this.curLoadSegment){var n,r,i,a=null,o=parseInt(this.curLoadSegment.index.slice(1));if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){if(n=e[o].seekable.pos,r=t[this._loadAudioPointer.segmentIndex].seekable.pos,i=e[o].seekable.time,a=t[this._loadAudioPointer.segmentIndex].seekable.time,this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH&&0!==o){var s=Gt.a.searchPosIndex(this.curLoadSegment.lastCEPos,n);s>=0&&(this._loadPointer.cEndTime=Gt.a.accAdd(e[o].start_second,i[s]),this.reportData(this.curLoadSegment.rate,s))}if(this.curLoadAudioSegment&&(this.videoFormatType!==Tn.a.DASH||"a0"!==this.curLoadAudioSegment.index)){var c=Gt.a.searchPosIndex(this.curLoadAudioSegment.lastCEPos,r);c>=0&&(this._loadAudioPointer.cEndTime=Gt.a.accAdd(t[this._loadAudioPointer.segmentIndex].start_second,a[c]))}}else if(this.videoFormatType.indexOf(Tn.a.TS)>=0)if(n=e[o].pos,i=e[o].time,this.videoFormatType===Tn.a.TS){var u=Gt.a.searchTSPosIndex(this.curLoadSegment.lastCEPos,n);u>=0&&(this._loadPointer.cEndTime=Gt.a.accAdd(e[o].start_second,i[u]),this.reportData(this.curLoadSegment.rate,u))}else this.videoFormatType===Tn.a.FTS&&this.curLoadSegment.loadDone&&(this._loadPointer.cEndTime=Gt.a.accAdd(e[this._loadPointer.segmentIndex].start_second,i[this._loadPointer.chunkIndex+1]))}}},{key:"check",value:function(e){null===this._loadPointer&&(yn.a.info("check load, loadPointer is null,call seek~~~"),this.seek(this.rangeSTime,!0));var t=this.levelID,n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID;-1===this._levelID&&(n===t||!Mo&&-1===Bo.levelID&&Yt.a.startPlayed()&&this._readPointer.dataFlag&&(!this._readAudioPointer||this._readAudioPointer.dataFlag)||(t=this.curLoadSegment.rate)),Io=!1,Co=!1,(-1!==this._levelID||this.absTocbs)&&(this.videoFormatType!==Tn.a.DASH&&this.videoFormatType!==Tn.a.M4S||this._loadAudioPointer||(this._loadAudioPointer=new Ro,this._readAudioPointer=new Oo,this._loadAudioPointer.levelID=this._loadPointer.levelID,this._loadAudioPointer.cEndTime=this._readPointer.time,this._readAudioPointer.bid=this._readPointer.bid,this._readAudioPointer.time=this._readPointer.time),this.videoFormatType.indexOf(Tn.a.TS)>=0&&this._loadAudioPointer&&(this._loadAudioPointer=null,this._readAudioPointer=null),(n!==t||this.absTocbs)&&(yn.a.info("load switch video bidrate changed from "+n+" to "+t),e=this.getPlayBuffer(),go.reset()),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this._loadAudioPointer.levelID===t&&!this.absTocbs||(yn.a.info("load switch  audio bidrate changed from "+this._loadAudioPointer.levelID+" to "+t+",buffer "+e),yo.reset())),-1===this._levelID&&Yt.a.authorFailedStatus===Ea.a.LoaderState_405&&(t=n);var r=this.levelMgr.get(t);if(null!==r){var i=null,a=null;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(i=Sn.getFilesInfo(r,_o),a=Sn.getFilesInfo(r,vo)):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(i=r.m3u8),!Mo)if(t===n)this.refreshcEndTime(i,a);else if(-1===this._levelID){var o=this.getFileList(n);this.refreshcEndTime(o.vFList,o.aFList)}if(n!==t||this.absTocbs?(this.videoDone=!1,this.audioDone=!1):this.checkVideoLoadDone(r,i),Xn.memorySize<zt.d.videoMaxSize&&this.checkP2PLoad(r,i,t,n),n=this.curLoadSegment?this.curLoadSegment.rate:this._loadPointer.levelID,!this._loadPointer.init||this._loadAudioPointer&&this._loadAudioPointer.levelID===n&&!this._loadAudioPointer.init){if(e>=zt.k)return void(Mo&&(Mo=!1));e<0&&(e=0)}var s=!1,c=!1;-1===this._levelID&&(n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t)&&(n!==t&&(this._loadPointer.cEndTime>this._readPointer.time||wo)&&(s=!0),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this._loadAudioPointer.levelID===t||(this._loadAudioPointer.cEndTime>this._readAudioPointer.time||Uo)&&(c=!0),s&&(yn.a.info("ABS ,video can switch bid"),go.reset(),this.updateCEPos(_o,n,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType===Tn.a.DASH&&(this._loadPointer.init=!0)),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||!c||(yn.a.info("ABS ,audio can switch bid"),yo.reset(),this.updateCEPos(vo,this._loadAudioPointer.levelID,Math.max(this._loadAudioPointer.cEndTime,this._readAudioPointer.time)),this.videoFormatType===Tn.a.DASH&&(this._loadAudioPointer.init=!0)));var u=!1,d=!1,l="",f="";if((Yt.a.openDache||"2"===localStorage.getItem("loadtype"))&&(!this._loadPointer.init||this._loadAudioPointer&&!this._loadAudioPointer.init)&&e>=zt.b?(l=this.curLoadSegment&&this.curLoadSegment.dcacheError?zt.f.CDN:zt.f.DCACHE,this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||(f=this.curLoadAudioSegment&&this.curLoadAudioSegment.dcacheError?zt.f.CDN:zt.f.DCACHE)):(l=zt.f.CDN,this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||(f=zt.f.CDN)),this.curLoadSegment&&this.curLoadSegment.loadType===zt.f.DCACHE&&l===zt.f.CDN&&(u=!0),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this.curLoadAudioSegment&&this.curLoadAudioSegment.loadType===zt.f.DCACHE&&f===zt.f.CDN&&(d=!0),(this._loadPointer.levelID!==n||u)&&go.reset(),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this._loadAudioPointer.levelID===n&&!d||yo.reset(),this.checkCDNLoad(),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this._loadAudioPointer.levelID!==t||this.checkAudioLoadDone(r),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||(this._loadPointer.levelID===t&&Io&&this._loadPointer.cEndTime>this._loadAudioPointer.cEndTime&&Math.floor(this._loadPointer.cEndTime)-Math.floor(this._loadAudioPointer.cEndTime)>15&&(Io=!1),this._loadAudioPointer.levelID===t&&Co&&this._loadAudioPointer.cEndTime>this._loadPointer.cEndTime&&Math.floor(this._loadAudioPointer.cEndTime)-Math.floor(this._loadPointer.cEndTime)>15&&(Co=!1)),this.done&&this.absTocbs&&this._loadPointer.levelID===t&&(go.reset(),yo.reset(),Io=!0,Co=!0),Io||Co){var h=Gt.a.accSub(zt.k,e);if(-1!==this._levelID){if(this.absTocbs||n!==t||this._loadAudioPointer&&this._loadAudioPointer.levelID!==t){go.reset();var p=0;this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(p=this._readPointer.time,(this.absTocbs||n!==t)&&yn.a.info("CBS video switch bid, time "+p)):p=Math.max(this.rangeSTime,Yt.a.getBufferFunc().end),(this.absTocbs||n!==t)&&yn.a.info("CBS switch bidrate , start video loadPoint  time = "+p,"levelID = "+t),this._loadPointer.levelID=t;var _=null;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?_=Sn.getGapPos(r,p,_o,"start"):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(_=Sn.getTSGapPos(r,p,"start")),_?(this.changeSegmentState(r,"e",_.segmentIndex,0),this._loadPointer.segmentIndex=_.segmentIndex,this._loadPointer.chunkPos=_.pos,this._loadPointer.startTime=_.time,this._loadPointer.cEndTime=_.time,_.segmentIndex!==this._readPointer.segmentIndex&&this.changeSegmentState(r,"e",this._readPointer.segmentIndex,1),(this.absTocbs||n!==t)&&(this._readPointer.bid=this._loadPointer.levelID,this._readPointer.segmentIndex=_.segmentIndex,this._readPointer.chunkIndex=_.chunkIndex,this._readPointer.time=_.time,this.videoFormatType===Tn.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=_.pos,yn.a.info("CBS switch bidrate ,start _readPointer "+JSON.stringify(this._readPointer)))):yn.a.error("CBS switch bidrate, calculate startPoint is null "),this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){yo.reset(),this._loadAudioPointer.levelID=this._loadPointer.levelID;var v=this._readAudioPointer.time;yn.a.info("CBS audio switch bid, time "+v);var g=Sn.getGapPos(r,v,vo,"start");yn.a.info("CBS switch bidrate,start audio Point "+JSON.stringify(g)),g&&(this.changeSegmentState(r,"a",g.segmentIndex,0),this._loadAudioPointer.segmentIndex=g.segmentIndex,this._loadAudioPointer.chunkPos=g.pos,this._loadAudioPointer.startTime=g.time,this._loadAudioPointer.cEndTime=g.time,g.segmentIndex!==this._readAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",this._readAudioPointer.segmentIndex,1),this._readAudioPointer.bid=this._loadPointer.levelID,this._readAudioPointer.segmentIndex=g.segmentIndex,this._readAudioPointer.chunkIndex=g.chunkIndex,this._readAudioPointer.chunkPos=g.pos,this._readAudioPointer.time=g.time,yn.a.info("CBS switch bidrate, start readAudioPointer "+JSON.stringify(this._readAudioPointer)))}Mo=!0}var y=null;Io&&!Mo&&(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?y=Sn.getGapPos(r,this._loadPointer.cEndTime,_o,"start"):this.videoFormatType!==Tn.a.TS&&this.videoFormatType!==Tn.a.FTS||(y=Sn.getTSGapPos(r,this._loadPointer.cEndTime,"start")),y?(y.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",y.segmentIndex,0),this._loadPointer.segmentIndex=y.segmentIndex,this._loadPointer.chunkPos=y.pos,this._loadPointer.levelID=t,this._loadPointer.startTime=y.time):yn.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime));var m=0;if(this._loadPointer.init||(m=this.calculateVideoLoadTime(h,r,i),Mo&&(m=Math.min(1,m))),Io)if(this._loadPointer.init)this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=i[0].seekable.pos[0],this._loadPointer.endPos=i[0].seekable.pos[1];else{var b=null,k=Gt.a.accAdd(this._loadPointer.startTime,m);this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?b=Sn.getGapPos(r,k,_o,"end"):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(b=Sn.getTSGapPos(r,k,"end")),b&&(this._loadPointer.endPos=b.pos,this._loadPointer.chunkIndex=b.chunkIndex)}if(Io){if(this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==t||!this.curLoadSegment.segment){var x=this.constructorSegmentInfo(i,r,_o);this.createSegmentProxy(_o,x),this.curLoadSegment.checkCreateSegment()}yn.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos+" , loadType "+l),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos,l),this._loadPointer.init=!1):yn.a.error("~~~~~~video Load error"+JSON.stringify(this._loadPointer))}var S=null,T=0;if(this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||!Co||this._loadAudioPointer.init||(T=this.calculateAudioLoadTime(h,r)),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||!Co||Mo||((S=Sn.getGapPos(r,this._loadAudioPointer.cEndTime,vo,"start"))?(S.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",S.segmentIndex,0),this._loadAudioPointer.segmentIndex=S.segmentIndex,this._loadAudioPointer.chunkPos=S.pos,this._loadAudioPointer.levelID=t,this._loadAudioPointer.startTime=S.time):yn.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)),(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&Co)if(this._loadAudioPointer.init)this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=a[0].seekable.pos[0],this._loadAudioPointer.endPos=a[0].seekable.pos[1];else{var P=Gt.a.accAdd(this._loadAudioPointer.startTime,T),I=Sn.getGapPos(r,P,vo,"end");I&&(this._loadAudioPointer.endPos=I.pos,this._loadAudioPointer.chunkIndex=I.chunkIndex)}if((this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&Co){if(this.absTocbs||!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==t||!this.curLoadAudioSegment.segment){var w=this.constructorSegmentInfo(a,r,vo);this.createSegmentProxy(vo,w),this.curLoadAudioSegment.checkCreateSegment()}yn.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos+" , loadType "+f),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos,f),this._loadAudioPointer.init=!1):yn.a.error("load audio point is error !!!!!!!")}this.absTocbs&&(this.absTocbs=!1)}else{if((s||(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&c)&&fr.clearRaiseLevelCount(),Io){-1!==this.rangeETime&&this._loadPointer.startTime>=this.rangeETime&&yn.a.info("loadPointer startTime >= rangeETime,this._loadPointer.startTime = "+this._loadPointer.startTime+"rangeETime"+this.rangeETime);var A=s?t:n,E=this.getFileList(A);if(!E)return void yn.a.error("levelInfo and fileList is null ,bid = "+A);r=E.levelInfo,i=E.vFList;var D=null;if(Mo||(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?D=Sn.getGapPos(r,this._loadPointer.cEndTime,_o,"start"):this.videoFormatType!==Tn.a.TS&&this.videoFormatType!==Tn.a.FTS||(D=Sn.getTSGapPos(r,this._loadPointer.cEndTime,"start")),D?(D.segmentIndex!==this._loadPointer.segmentIndex&&this.changeSegmentState(r,"e",D.segmentIndex,0),this._loadPointer.segmentIndex=D.segmentIndex,this._loadPointer.chunkPos=D.pos,s?(yn.a.info("ABS video switch  bid from "+this._loadPointer.levelID+" to "+t),this._loadPointer.levelID=t):this._loadPointer.levelID=n,this._loadPointer.startTime=D.time):yn.a.warn("DashMove fetch startPoint is null ,load finish,time = "+this._loadPointer.cEndTime)),this._loadPointer.init)this._loadPointer.segmentIndex=0,this._loadPointer.chunkIndex=0,this._loadPointer.chunkPos=i[0].seekable.pos[0],this._loadPointer.endPos=i[0].seekable.pos[1];else{var q=null,O=this.calculateVideoLoadTime(h,r,i);Mo&&(O=Math.min(1,O));var R=Gt.a.accAdd(this._loadPointer.startTime,O);this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?q=Sn.getGapPos(r,R,_o,"end"):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(q=Sn.getTSGapPos(r,R,"end")),q&&(this._loadPointer.endPos=q.pos,this._loadPointer.chunkIndex=q.chunkIndex)}if(s?(Bo.levelID=this._loadPointer.levelID,Bo.segmentIndex=D.segmentIndex,Bo.chunkIndex=D.chunkIndex,Bo.time=this._loadPointer.startTime,Bo.tvid=this.tvid,Ho=[],yn.a.info("load ABS switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)+" switchVideoPointer "+JSON.stringify(Bo))):yn.a.info("load ABS NO switch bid,  loadPointer: "+JSON.stringify(this._loadPointer)),!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._loadPointer.segmentIndex||this.curLoadSegment.rate!==this._loadPointer.levelID||!this.curLoadSegment.segment){var L=this.constructorSegmentInfo(i,r,_o);this.createSegmentProxy(_o,L),this.curLoadSegment.checkCreateSegment()}yn.a.info("~~~~~~video Load point"+JSON.stringify(this._loadPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos+" , loadType "+l),this._loadPointer.endPos>this._loadPointer.chunkPos?(this.curLoadSegment.loadData(this._loadPointer.chunkPos,this._loadPointer.endPos,l),this._loadPointer.init=!1):yn.a.error("_loadPointer.endPos <= _loadPointer.chunkPos")}if((this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&Co){var M=c?t:this._loadAudioPointer.levelID,C=this.getFileList(M);C&&(r=C.levelInfo,a=C.aFList);var N=this.calculateAudioLoadTime(h,r),B=null;if(!Mo){var F=this._loadAudioPointer.cEndTime;c&&(F=Math.min(this._loadAudioPointer.cEndTime,this._loadPointer.cEndTime),F=Math.max(F,this._readAudioPointer.time)),(B=Sn.getGapPos(r,F,vo,"start"))?(B.segmentIndex!==this._loadAudioPointer.segmentIndex&&this.changeSegmentState(r,"a",B.segmentIndex,0),this._loadAudioPointer.segmentIndex=B.segmentIndex,this._loadAudioPointer.chunkPos=B.pos,c&&(this._loadAudioPointer.levelID=t),this._loadAudioPointer.cEndTime=this._loadAudioPointer.startTime=B.time):yn.a.error("DashMove fetch startAudioPoint is null or load finish,time = "+this._loadAudioPointer.cEndTime)}if(this._loadAudioPointer.init)this._loadAudioPointer.segmentIndex=0,this._loadAudioPointer.chunkIndex=0,this._loadAudioPointer.chunkPos=a[0].seekable.pos[0],this._loadAudioPointer.endPos=a[0].seekable.pos[1];else{var U=Gt.a.accAdd(this._loadAudioPointer.startTime,N),j=Sn.getGapPos(r,U,vo,"end");j&&(this._loadAudioPointer.endPos=j.pos,this._loadAudioPointer.chunkIndex=j.chunkIndex)}if(c?(yn.a.info("ABS Audio switch  bid from "+this.curLoadAudioSegment.rate+" to "+t),Fo.levelID=this._loadAudioPointer.levelID,Fo.segmentIndex=B.segmentIndex,Fo.chunkIndex=Mo?this._loadAudioPointer.chunkIndex:B.chunkIndex,Fo.time=this._loadAudioPointer.startTime,Fo.tvid=this.tvid,yn.a.info("load ,ABS Audio switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)+" switchAudioPointer "+JSON.stringify(Fo))):yn.a.info("ABS Audio No switch  bid , loadAudioPointer  "+JSON.stringify(this._loadAudioPointer)),!this.curLoadAudioSegment||this.curLoadAudioSegment.index!=="a"+this._loadAudioPointer.segmentIndex||this.curLoadAudioSegment.rate!==this._loadAudioPointer.levelID||!this.curLoadAudioSegment.segment){var V=this.constructorSegmentInfo(a,r,vo);this.createSegmentProxy(vo,V),this.curLoadAudioSegment.checkCreateSegment()}yn.a.info("~~~~~~audio Load point"+JSON.stringify(this._loadAudioPointer)+",cETime "+this._loadAudioPointer.cEndTime+",cePos "+this.curLoadAudioSegment.lastCEPos+" , loadType "+f),this._loadAudioPointer.endPos>this._loadAudioPointer.chunkPos?(this.curLoadAudioSegment.loadData(this._loadAudioPointer.chunkPos,this._loadAudioPointer.endPos,f),this._loadAudioPointer.init=!1):yn.a.error("_loadAudioPointer.endPos <= _loadAudioPointer.chunkPos")}}Mo=!1}else Mo&&(Mo=!1)}else yn.a.warn("m3u8 is null,need call feed first ~~ ,bidrate = "+t)}},{key:"buffer",get:function(){var e=0;return this._readPointer&&this._loadPointer&&this._loadPointer.cEndTime>=this._readPointer.time&&(e=Gt.a.accSub(this._loadPointer.cEndTime,this._readPointer.time)),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||this._readAudioPointer&&this._loadAudioPointer&&this._loadAudioPointer.cEndTime>=this._readAudioPointer.time&&(e=Math.min(Gt.a.accSub(this._loadAudioPointer.cEndTime,this._readAudioPointer.time),e)),e}},{key:"reset",value:function(){if(yn.a.info("~~~dashMove reset ~~~"),this.videoDone=!1,this.audioDone=!1,this.levelMgr)for(var e in this.levelMgr){var t=this.levelMgr.get(e),n=null;if(t&&(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?n=Sn.getFilesInfo(t,_o):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(n=t.m3u8)),n)for(var r=0;r<n.length;r++)this.changeSegmentState(t,"e",r,1);if((this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH)&&t){var i=Sn.getFilesInfo(t,vo);if(i)for(var a=0;a<i.length;a++)this.changeSegmentState(t,"a",a,1)}}null!==this.dashInfo&&(qa.a.clearEvent(this.tvid),this.event=null,this.dashInfo.close(),this.dashInfo=null),null!==this._absStrategy&&this._absStrategy.close(),this._absStrategy=null,null!==this._readPointer&&(this._readPointer=null),null!==this._readAudioPointer&&(this._readAudioPointer=null),null!==this._loadPointer&&(this._loadPointer=null),null!==this._loadAudioPointer&&(this._loadAudioPointer=null),null!==this._p2pLoaderPointer&&(this._p2pLoaderPointer=null),null!==this.levelMgr&&this.levelMgr.clear(),this.levelMgr=null,this.curLoadAudioSegment&&(this.curLoadAudioSegment=null),this.curLoadSegment=null,this._levelID=0,this.absTocbs=!1,this.curFeedBid=0,clearTimeout(this.buffTimer)}},{key:"errFun",value:function(e){yn.a.error("new segment return err"+e)}},{key:"createSegmentProxy",value:function(e,t){switch(t.videoType){case Tn.a.FTS:this.curLoadSegment=new To(t);break;case Tn.a.TS:this.curLoadSegment=new xo(t);break;case Tn.a.DASH:case Tn.a.M4S:e===_o?this.curLoadSegment=new qo(t):this.curLoadAudioSegment=new qo(t);break;default:yn.a.error("mediaInfo.videoType is invaild when  createSegmentProxy, "+t.videoType)}}},{key:"constructorSegmentInfo",value:function(e,t,n){var r,i=null,a=_o;n===_o?(r=this._loadPointer,i="e"):n===vo?(r=this._loadAudioPointer,i="a",a=vo):"p2p"===n&&(r=this._p2pLoaderPointer,i="e");var o=r.chunkPos,s=r.startTime;-1===this._levelID&&(o,Eo=Date.now());var c=e[r.segmentIndex].file_name,u=e[r.segmentIndex].realIdx!==undefined?e[r.segmentIndex].realIdx:r.segmentIndex,d=0,l=0;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH){d=e[r.segmentIndex].size;var f=e[r.segmentIndex].seekable.pos;l=f[f.length-1]}else if(this.videoFormatType.indexOf(Tn.a.TS)>=0){d=parseInt(e[r.segmentIndex].size);var h=e[r.segmentIndex].pos;l=h[h.length-1].ePos}var p=e[r.segmentIndex].sourceID;an.isHTTPS&&c&&(c=c.replace(/^http:/gi,"https:"));var _=0;_=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getDuratioSecond(t,a,r.segmentIndex):Sn.getTSDuratioSecond(t,r.segmentIndex);var v=null;return this.videoFormatType!==Tn.a.DASH&&this.videoFormatType!==Tn.a.M4S||"e"!==i||(v=e[r.segmentIndex].seekable.pos),{levelId:r.levelID,tvid:this.tvid,dispatchUrl:c,startTime:s,endTime:_,vid:t.vid,index:i+r.segmentIndex,size:d,startPos:o,endPos:l,vids:this.dashInfo.vidList,videoType:this.videoFormatType,albumID:Yt.a.aid,trackerType:a,sourceID:p,loadInfo:{},seekable:v,realSegIdx:i+u}}},{key:"changeSegmentState",value:function(e,t,n,r){if(e){var i="a"===t?vo:_o,a=null;if(!(n>=(a=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getFilesInfo(e,i):e.m3u8).length)){var o=mo(a[n].sourceID,e.vid,t+(a[n].realIdx!==undefined?a[n].realIdx:n)),s=Xn.getSegment(o);s&&(s.state=r,yn.a.info("changeSegmentState "+t+n+" bid: "+e.bid+" status : "+s.state))}}}},{key:"getSizeList",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=this.levelMgr.get(e[n]);if(r===undefined)break;var i=null;(i=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getNextChunkInfo(r,_o,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex):Sn.getTSNextChunkInfo(r,this._loadPointer.segmentIndex,this._loadPointer.chunkIndex))?t.push(i.ePos-i.sPos):t.push(0)}return t}},{key:"reportData",value:function(e,t){if(this.curLoadSegment&&this._absStrategy&&Yt.a.absOpen&&-1===this._levelID&&!(t===Ao&&Date.now()-Eo<3e4||Date.now()-Vo>=15e3)){Eo=Date.now(),Ao=t;var n=Yt.a.cdnSize,r=Yt.a.cdnCostTime;Yt.a.cdnSize=Yt.a.cdnCostTime=0;var i=null,a=null,o=0,s=parseInt(this.curLoadSegment.index.slice(1)),c=this.levelMgr.get(e);c!==undefined&&(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(i=Sn.getFilesInfo(c,_o),a=Sn.getCurChunkInfo(c,_o,s,t)):(i=c.m3u8,a=Sn.getCurTSChunkInfo(c,s,t))),a&&(o=a.ePos-a.sPos);var u=0;if(!(i&&(u=Go(i,s,t))>=c.chunkNum-1)){for(var d=[],l=[],f=0;f<this.dashInfo.bitRateList.length;f++){var h=this.levelMgr.get(this.dashInfo.bitRateList[f]);h&&(d.push(this.dashInfo.bitRateList[f]),l.push(h.vsize))}for(var p=this.getBuffer(),_=zo,v=[],g=Math.min(16,Ho.length);v.length<g;)v.push(Math.floor(1e3*Ho[_++%g]).toString());var y=Yt.a.getReBufTimeFunc(),m=this.getSizeList(d);if(0!==m.length){var b={index:u,loadTime:r,rebuffTime:y,totalSizeList:l,bidList:d,chunkSizeList:m,chunk_count:c.chunkNum,lastChunkSize:o,duration:c.duration,buffer_level:p,size:c.vsize,loadSize:n,bid:e,bufferArr:v,bufferUpdateStep:Wo};this._absStrategy.reportData(b)}}}}},{key:"checkCDNLoad",value:function(){go.running||this.curLoadSegment&&this.curLoadSegment.isOnP2P||this.videoDone||(Io=!0),this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH||yo.running||this.audioDone||(Co=!0)}},{key:"getBuffer",value:function(){var e=this.getPlayBuffer();return e=Gt.a.accAdd(e,this.buffer),-1===this._levelID&&(clearTimeout(this.buffTimer),this.buffTimer=setTimeout(this.getBuffer.bind(this),Wo),Ho.length<16?Ho.push(e):Ho[zo++%16]=e),e}},{key:"checkAudioLoadDone",value:function(e){if(!(this.audioDone||Mo||this.videoFormatType!==Tn.a.M4S&&this.videoFormatType!==Tn.a.DASH))if(this.rangeETime>0&&this._loadAudioPointer.cEndTime>=this.rangeETime)this.audioDone=!0,Co=!1;else{var t=Sn.getFilesInfo(e,vo);if(e){var n=t.length-1,r=t[n].size;this._loadAudioPointer.segmentIndex>=n&&this.curLoadAudioSegment&&this.curLoadAudioSegment.lastCEPos>=r?(this.audioDone=!0,Co=!1):this.audioDone=!1}}}},{key:"checkVideoLoadDone",value:function(e,t){if(!this.videoDone&&!Mo&&e)if(this.rangeETime>0&&this._loadPointer.cEndTime>=this.rangeETime)this.videoDone=!0,Io=!1,yn.a.info("cEndTime >= rangeTime or duration,videoDone!!!!, cEndTime "+this._loadPointer.cEndTime+",duration "+e.duration+",rangeEndTime "+this.rangeETime);else{var n=t.length-1,r=t[n].size;this.curLoadSegment&&parseInt(this.curLoadSegment.index.slice(1))>=n&&this.curLoadSegment.lastCEPos>=r?(this.videoDone=!0,Io=!1,yn.a.info("segmentIndex and  chunkIndex is Max,videoDone!!!! ")):this.videoDone=!1}}},{key:"checkP2PLoad",value:function(e,t,n,r){if(this.videoFormatType!==Tn.a.FTS&&"off"!==zt.j.limitP2P&&an.canP2P&&!this.videoDone){this._p2pLoaderPointer||(this._p2pLoaderPointer=new Ro,this._p2pLoaderPointer.levelID=n);var i=!1;if((Mo||!this.curLoadSegment||"e"+this._p2pLoaderPointer.segmentIndex!==this.curLoadSegment.index||this._p2pLoaderPointer.levelID!==n||this._p2pLoaderPointer.levelID!==r||this.absTocbs||this.curLoadSegment.done)&&(i=!0),i&&this.videoFormatType===Tn.a.DASH&&this.curLoadSegment&&"e0"===this.curLoadSegment.index&&(i=!1),i){var a=this._loadPointer.cEndTime,o=!1,s=!1;if(-1!==this._levelID)(this._p2pLoaderPointer.levelID!==n||this.absTocbs)&&(yn.a.info("[P2P loader],CBS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n,this.videoFormatType===Tn.a.DASH&&(this._loadPointer.init=!0),this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(a=this._readPointer.time,yn.a.info("CBS video switch bid, time "+a)):a=Math.max(this.rangeSTime,Yt.a.getBufferFunc().end),s=!0,go.reset());else if(-1===this._levelID)if(r!==n)if((this._loadPointer.cEndTime>this._readPointer.time||wo)&&(o=!0),o)go.reset(),this.updateCEPos(_o,r,Math.max(this._loadPointer.cEndTime,this._readPointer.time)),yn.a.info("[P2P loader],ABS p2pLoaderPointer switch  bid from "+this._p2pLoaderPointer.levelID+" to "+n),this._p2pLoaderPointer.levelID=n,this.videoFormatType===Tn.a.DASH&&(this._loadPointer.init=!0),fr.clearRaiseLevelCount();else{if(!Mo&&this.curLoadSegment&&!this.curLoadSegment.done)return;this._p2pLoaderPointer.levelID=r;var c=this.getFileList(this._p2pLoaderPointer.levelID);c&&(e=c.levelInfo,t=c.vFList)}else this._p2pLoaderPointer.levelID!==n&&(this._p2pLoaderPointer.levelID=n);if(!this.videoDone){var u=null;if(!(u=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getGapPos(e,a,_o,"start"):Sn.getTSGapPos(e,a,"start")))return void yn.a.error("[P2P loader], find start Point is null,time "+a+",bid "+n);var d=null;d=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?t[u.segmentIndex].seekable:t[u.segmentIndex];var l=0;if(this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(l=d.pos.length-2,this._p2pLoaderPointer.endPos=d.pos[l+1]):(l=d.pos.length-1,this._p2pLoaderPointer.endPos=d.pos[l].ePos),this._p2pLoaderPointer.chunkIndex=l,this._p2pLoaderPointer.segmentIndex=u.segmentIndex,this._p2pLoaderPointer.startTime=u.time,this._p2pLoaderPointer.chunkPos=u.pos,s&&(this._readPointer.bid=this._p2pLoaderPointer.levelID,this._readPointer.segmentIndex=this._p2pLoaderPointer.segmentIndex,this._readPointer.chunkIndex=u.chunkIndex,this._readPointer.time=this._p2pLoaderPointer.startTime,this.videoFormatType===Tn.a.FTS?this._readPointer.chunkPos=0:this._readPointer.chunkPos=u.pos,this._loadPointer.cEndTime=u.time,yn.a.info("[P2P load] , p2p switch  bid , readPointer"+JSON.stringify(this._readPointer)+", cEndTime "+this._loadPointer.cEndTime)),o&&(Bo.levelID=this._p2pLoaderPointer.levelID,Bo.segmentIndex=this._p2pLoaderPointer.segmentIndex,Bo.chunkIndex=u.chunkIndex,Bo.time=this._p2pLoaderPointer.startTime,Bo.tvid=this.tvid,this._loadPointer.cEndTime=u.time,yn.a.info("[P2P loader],ABS switch  bid , switchVideoPointer "+JSON.stringify(Bo))),this.absTocbs||!this.curLoadSegment||this.curLoadSegment.index!=="e"+this._p2pLoaderPointer.segmentIndex||this.curLoadSegment.rate!==this._p2pLoaderPointer.levelID||!this.curLoadSegment.segment){var f=this.constructorSegmentInfo(t,e,"p2p");this.createSegmentProxy(_o,f),this.curLoadSegment.checkCreateSegment()}this.absTocbs&&this.videoFormatType===Tn.a.TS&&(this.absTocbs=!1),yn.a.info("[P2P load] , ~~~~~~video Load point"+JSON.stringify(this._p2pLoaderPointer)+",cETime "+this._loadPointer.cEndTime+",cePos "+this.curLoadSegment.lastCEPos),this.curLoadSegment.p2pLoadSegment()}}}}},{key:"hasInitData",value:function(e,t){var n=this.getFileList(e);if(t===_o){var r=mo(n.vFList[0].sourceID,n.levelInfo.vid,"e0"),i=Sn.getChunkSEPos(n.levelInfo,_o,0,0),a=Xn.getSegment(r);if(i&&a&&a.hasData(i.sPos,i.ePos-i.sPos))return!0}else if(t===vo){var o=mo(n.aFList[0].sourceID,n.levelInfo.vid,"a0"),s=Sn.getChunkSEPos(n.levelInfo,vo,0,0),c=Xn.getSegment(o);if(s&&c&&c.hasData(s.sPos,s.ePos-s.sPos))return!0}return!1}},{key:"clearLoadPint",value:function(){this._loadPointer=null}},{key:"algorithmDes",get:function(){return-1===this._levelID&&this._absStrategy?this._absStrategy.algorithmDes:"absClose"}},{key:"bandwidth",get:function(){return go&&go.running?1e3*Yt.a.cdnSpeed:Yt.a.downSpeed}},{key:"updateAuthorPointer",value:function(){Yt.a.dashUpdateVideoTime=this._loadPointer.startTime,yn.a.info("Authentication failed, update dash ,notice pcw time "+Yt.a.dashUpdateVideoTime)}},{key:"calculateVideoLoadTime",value:function(e,t,n){var r=0;r=this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?Sn.getDuratioSecond(t,_o,this._loadPointer.segmentIndex):Sn.getTSDuratioSecond(t,this._loadPointer.segmentIndex);var i=Gt.a.accSub(r,this._loadPointer.cEndTime);i<=0&&this._loadPointer.segmentIndex<n.length-1&&(i=1);var a=Math.min(e,i);return-1!==this.rangeETime&&this._loadPointer.cEndTime+a>=this.rangeETime&&(a=Gt.a.accSub(this.rangeETime,this._loadPointer.cEndTime),yn.a.warn("fix loadDuration ~~~,loadPointerTime = "+this._loadPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),this.videoFormatType===Tn.a.FTS&&(a=1),a}},{key:"calculateAudioLoadTime",value:function(e,t){var n=Sn.getDuratioSecond(t,vo,this._loadAudioPointer.segmentIndex),r=Gt.a.accSub(n,this._loadAudioPointer.cEndTime),i=Math.max(1,Math.min(e,r));return-1!==this.rangeETime&&this._loadAudioPointer.cEndTime+i>=this.rangeETime&&(i=Gt.a.accSub(this.rangeETime,this._loadAudioPointer.cEndTime),yn.a.info("fix audioLoadDuration ~~~_loadAudioPointer = "+this._loadAudioPointer.cEndTime+"rangeEndTime = "+this.rangeETime)),i}},{key:"updateCEPos",value:function(e,t,n){var r=this.levelMgr.get(t);if(r){var i=null;this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?i=Sn.getGapPos(r,n,e,"start"):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(i=Sn.getTSGapPos(r,n,"start")),i&&(e===_o&&this.curLoadSegment&&this.curLoadSegment.cePos>i.pos&&(yn.a.info("updateCEPos,LevelID  "+t+" before "+this.curLoadSegment.lastCEPos+" now "+i.pos+" point "+JSON.stringify(i)),this.curLoadSegment.updateCePos(i.pos)),e===vo&&this.curLoadAudioSegment&&this.curLoadAudioSegment.cePos>i.pos&&this.curLoadAudioSegment.updateCePos(i.pos))}}},{key:"getFileList",value:function(e){var t=this.levelMgr.get(e);if(t){var n=null,r=null;return this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?(n=Sn.getFilesInfo(t,_o),r=Sn.getFilesInfo(t,vo)):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(n=t.m3u8),{vFList:n,aFList:r,levelInfo:t}}return null}},{key:"checkData",value:function(e,t,n,r){var i=this.levelMgr.get(e),a=null;this.videoFormatType===Tn.a.DASH&&t++,this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?a=Sn.getFilesInfo(i,_o):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(a=i.m3u8);var o=null,s=null;this.videoFormatType===Tn.a.DASH&&(s=Gt.a.searchPosIndex(n,a[t].seekable.pos))>=0&&(o=Sn.getChunkSEPos(i,_o,t,s))&&yn.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", index "+s+", startPos "+o.sPos+",endPos "+o.ePos);var c=mo(a[t].sourceID,i.vid,"e"+(a[t].realIdx!==undefined?a[t].realIdx:t)),u=Xn.getSegment(c);if(u){var d=Math.min(188,r-n),l=u.getData(n,d);if(yn.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+n+",endPos "+(n+d)),yn.a.log(l),o){var f=o.ePos-188,h=u.getData(f,188);yn.a.log("p2p Data ,bidRate "+e+", segmentIndex "+t+", startPos "+f+",endPos "+o.ePos),yn.a.log(h)}}Xn.destroy()}},{key:"Log",get:function(){var e=this.curLoadSegment?this.curLoadSegment.rate.toString():"null",t="P2PLog -- "+zt.l.version+"--LevelID--"+e+"\r\n";t+=" [ cdnSpeed : "+Gt.a.trimNumber(Yt.a.cdnSpeed,1e5)+"K , cdnSize : "+Gt.a.trimNumber(Mr.cdnSize/1048576)+"M , loading : "+go.running+" ] \r\n [ p2pSpeed : "+Gt.a.trimNumber(Yt.a.downSpeed/1024,1e5)+"K , p2pSize : "+Gt.a.trimNumber(Mr.p2pSize/1048576)+"M , p2pLoadRate : "+(Mr.p2pSize/(Mr.cdnSize+Mr.p2pSize)*100).toFixed(2)+"% ] \r\n [ upSpeed  : "+Gt.a.trimNumber(Yt.a.upSpeed/1024,1e5)+"K , upSize  : "+Gt.a.trimNumber(Mr.upSize/1048576)+"M ] \r\n < downMax : "+Math.ceil(Yt.a.downMax/1024)+"K ,  upMax : "+Math.ceil(Yt.a.upMax/1024)+"K >\r\n";var n=this.levelMgr.get(this._readPointer.bid),r=null;this.videoFormatType===Tn.a.M4S||this.videoFormatType===Tn.a.DASH?r=Sn.getFilesInfo(n,_o):this.videoFormatType.indexOf(Tn.a.TS)>=0&&(r=n.m3u8);var i=mo(r[this._readPointer.segmentIndex].sourceID,n.vid,"e"+(r[this._readPointer.segmentIndex].realIdx!==undefined?r[this._readPointer.segmentIndex].realIdx:this._readPointer.segmentIndex)),a=Xn.getSegment(i);return a&&(t+=" RD | "+a.toDataString(this._readPointer.chunkPos)+"\r\n"),this.curLoadSegment.segment&&(t+=" LD | "+this.curLoadSegment.segment.toDataString(-1)+"\r\n",t+=(this.curLoadSegment.segment.vidsDesc!==undefined?this.curLoadSegment.segment.vidsDesc:" [ ]")+"\r\n"),t+=Yt.a.p2pLog,t+="\r\n"}},{key:"clearData",value:function(e){Xn.destroy()}}]),e}();function Go(e,t,n){for(var r=0,i=0;i<=t;i++)i<t?e[i].hasOwnProperty("seekable")?r+=e[i].seekable.pos.length-1:r+=e[i].pos.length:r+=n;return r}var Qo=0,Ko=function(){function e(){i()(this,e),gn.load(),this.currentList=new Yo,this.nextList=new Yo,this.nextListFeedDone=!1}return o()(e,[{key:"init",value:function(e){Yt.a.platform=e.platform?e.platform:on,yn.a.logTarget=e.logger,Yt.a.getBufferFunc=e.getBufferFunc,Yt.a.getReBufTimeFunc=e.reBufTimeFunc,Yt.a.switchAutoDef=e.switchAutoDef,Yt.a.canSwitchVd=e.canSwitchVd,Yt.a.startPlayed=e.startPlayed,Yt.a.sendPingBack=e.sendPingBack,Yt.a.getUserInfoFunc=e.getUserInfo,Yt.a.noticeDataArrived=e.noticeDataArrived,Yt.a.checkIsMobius=e.checkIsMobius,Yt.a.noticeRefreshMovieData=e.noticeRefreshMovieData,Yt.a.platform===sn&&(zt.j.upLoad=!1)}},{key:"feed",value:function(e,t,n,r){n?(yn.a.info("DataProvider.feed current"),this.currentList.feed(e,t,r),this.nextListFeedDone&&this.nextList.clearLoadPint()):(yn.a.info("DataProvider.feed next"),this.nextList.reset(),this.nextList.feed(e,t,r),this.nextListFeedDone=!0),Yt.a.authorStatus!==Ea.a.LoaderState_405&&(Yt.a.authorStatus="")}},{key:"setBitrate",value:function(e,t){this.currentList.tvid===e?(yn.a.info("DataProvider set current bitrate : "+t),-1!==this.currentList._levelID&&-1===t?(yn.a.info(" CBS  to ABS !!!!!!!!!!"),this.currentList.cbsToAbs=!0):this.currentList.cbsToAbs=!1,-1===this.currentList._levelID&&-1!==t?(yn.a.info(" ABS  to CBS!!!!!!!!!!"),this.currentList.absTocbs=!0):this.currentList.absTocbs=!1,this.currentList.levelID=t,this.currentList.checkBitRate(t),this.currentList.resetDoneStatus(),Yt.a.absStatus=-1===t?1:0):(yn.a.info("DataProvider set next move bitrate : "+t),this.nextList.levelID=t,this.nextList.checkBitRate(t),this._run())}},{key:"_run",value:function(){if(clearTimeout(this._runnerStep),Yt.a.authorStatus!==Ea.a.LoaderState_405&&!mn.errorFragment){var e=Yt.a.getBufferFunc(),t=0;t=+(t=this.currentList.videoFormatType===Tn.a.M4S||this.currentList.videoFormatType===Tn.a.DASH?Math.min(e.buffered.video.len,e.buffered.audio.len):e.len).toFixed(3),Yt.a.pcwBuffer=t,t=Gt.a.accAdd(t,this.currentList.buffer),this.currentList.done?this.nextListFeedDone&&(t+=this.nextList.buffer,this.nextList.check(t)):this.currentList.check(t)}Yt.a.onLog&&++Qo>=10&&(console.info(this.currentList.Log),Qo=0),this._runnerStep=setTimeout(this._run.bind(this),100)}},{key:"seek",value:function(e,t){if(mn.errorFragment=null,mn.errorStage="",mn.loader.count=0,mn.dispatcher.count=0,t=t?+t.toFixed(3):t,this.currentList.tvid===e)yn.a.info("DataProvider.seek currentList tvid = "+e+" time = "+t),this.nextListFeedDone&&this.nextList.clearLoadPint(),this.currentList.seek(t),this._run();else if(this.nextList.tvid===e){yn.a.info("DataProvider.seek nextList tvid = "+e+" time ="+t),this.currentList.reset();var n=this.currentList;this.currentList=this.nextList,this.nextList=n,this.nextListFeedDone=!1,(t&&t!==this.currentList.rangeSTime||!this.currentList._readPointer)&&(this.currentList.seek(t),this._run())}Mr.start()}},{key:"read",value:function(e){return this.currentList.read(e)}},{key:"setDefList",value:function(e,t){!t||t.length<0||(this.currentList.tvid===e?this.currentList.setDefList(t):this.nextList.setDefList(t))}},{key:"error",get:function(){return mn.errorFragment?mn.errorStage:""}},{key:"stats",get:function(){var e=function(){if(go.running||yo.running){var e=Yt.a.cdnSpeed>0?Yt.a.cdnSpeed:Yt.a.cdnCostTime>0?Yt.a.cdnSize/Yt.a.cdnCostTime:0;return{domain:Yt.a.cdnLoadDoMain,bw:1e3*e,bps:1e3*e}}return{domian:"",bw:Yt.a.downSpeed,bps:0}}();return{bandwidth:e.bw,bps:e.bps,cdnHost:e.domain,netProtocol:an.isHTTPS?"https":"http"}}},{key:"algorithmDes",get:function(){return this.currentList.algorithmDes}},{key:"close",value:function(){yn.a.info("~~dataProvider close,clear data~~"),clearTimeout(this._runnerStep),this.currentList.reset(),this.nextList.reset(),this.nextListFeedDone=!1,mn.errorFragment=null,mn.errorStage="",mn.loader.count=0,mn.dispatcher.count=0}},{key:"getBuffTime",value:function(){var e=this.currentList.buffer,t=0;return this.currentList._readPointer&&(t=this.currentList._readPointer.time),this.currentList._readAudioPointer&&(t=Math.min(this.currentList._readAudioPointer.time,t)),{start:t,length:e}}},{key:"refreshLoadRange",value:function(e,t){this.currentList.tvid===e&&this.currentList.refreshLoadRange(t)}},{key:"checkData",value:function(e,t,n,r){this.currentList.checkData(e,t,n,r)}},{key:"recover",value:function(e){this.currentList.clearData(e)}}],[{key:"version",get:function(){return zt.l.version}}]),e}();window.DataProvider=Ko,window.QIYI_HTML5_P2P_PlayBack_0002=Ko;var $o=Ko,Zo=n(406);function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Jo=null;var es=function(e){d()(n,e);var t=Xo(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).absing=!1,e.ABS_LEVEL_ID=-1,e.LOG_TAG="[P2PConnector]",e._initd=!1,e.__p=new $o,e._closed=!1,e._currentTvid=null,e._nextTvid=null,e._loaderBuff=new he,e._getBufferFunc=null,e._reBufTimeFunc=null,e._refreshTvid="",e}return o()(n,[{key:"isClosed",get:function(){return this._closed}},{key:"buffer",get:function(){if(this.__p){var e=this.__p.getBuffTime();this._loaderBuff.start=e.start,this._loaderBuff.end=e.start+e.length}return this._loaderBuff}},{key:"stats",get:function(){return this.__p?this.__p.stats:{bandwidth:0,bps:0,cdnHost:"",netProtocol:""}}},{key:"algot",get:function(){return this.__p?this.__p.algorithmDes:""}},{key:"error",get:function(){if(this.__p){var e=Se.a.UNKNOWN;switch(this.__p.error){case"dispatch":e=Se.a.DATA_P2P_DISPATCH;break;case"load":e=Se.a.DATA_P2P_LOAD;break;case"loadAccessErr":e=Se.a.DATA_P2P_LOAD_ACCESS;break;case"memoryAllocErr":e=Se.a.DATA_P2P_MEMORY_ALLOC;break;case"authorFailed":e=Se.a.DATA_P2P_AUTH;break;case"loadDataRangeError":e=Se.a.DATA_P2P_RANGE_ERROR;break;case"dataNULL":e=Se.a.DATA_P2P_DATA_NULL}if(e!==Se.a.UNKNOWN)return new me.a(be.a.CRITICAL,ke.a.LOADER,e,"")}return null}},{key:"init",value:function(e){if(!this._initd&&this.__p){this._getBufferFunc=e.getBufferFunc,this._reBufTimeFunc=e.reBufTimeFunc;var t=this,n={logger:G.a,getBufferFunc:function(){return t._getBufferFunc()},reBufTimeFunc:function(){return t._reBufTimeFunc()},startPlayed:e.startPlayed,canSwitchVd:e.canSwitchVd,checkIsMobius:e.checkIsMobius,getUserInfo:e.getUserInfo,sendPingBack:e.sendPingBack,switchAutoDef:e.switchAutoDef,noticeRefreshMovieData:function(e){t._refreshTvid!==e&&(t._refreshTvid=e,t.emit("AE",e))},noticeDataArrived:function(){t.emit("DR")}};G.a.log("".concat(this.LOG_TAG," p2p init")),this.__p.init(n)}}},{key:"setBitrate",value:function(e,t){this.__p&&(G.a.log("".concat(this.LOG_TAG," setBitrate ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setBitrate(e,t))}},{key:"feed",value:function(e,t,n,r){if(this.__p&&r.bid&&r.dataFlow)if(this._nextTvid==e)G.a.log("".concat(this.LOG_TAG," feed switch: ").concat(this._currentTvid," -> ").concat(e)),this._currentTvid=this._nextTvid,this._nextTvid=null;else{var i=!this._currentTvid||this._currentTvid===e,a=r.bid,o=r.type;G.a.log("".concat(this.LOG_TAG," feed ").concat(e,"(").concat(i?"cur":"next","-").concat(n,"), range=[").concat(t,"], bid=").concat(a,", type=").concat(o)),this.__p.feed(e,t,i,r),n?this._currentTvid=e:this._nextTvid=e}else G.a.log("".concat(this.LOG_TAG," feed error, p2p is null or data error"))}},{key:"seek",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(G.a.log("".concat(this.LOG_TAG," seek ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.seek(e,t))}},{key:"read",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=null,r=this.hasFeed_(e);return this.__p&&r?this.__p.read(t):n}},{key:"refreshLoadRange",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(G.a.log("".concat(this.LOG_TAG," refresh range ").concat(t,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.refreshLoadRange(e+"",t))}},{key:"checkData",value:function(e,t,n,r){if(this.__p)try{this.__p.checkData(e,t,n,r)}catch(i){G.a.log("".concat(this.LOG_TAG," checkData failure: ").concat(i.stack||i.message))}}},{key:"checkSwitch",value:function(e){this.__p&&this._currentTvid!=e&&this._nextTvid==e&&(this._currentTvid=this._nextTvid,this._nextTvid=null,this.__p.seek(e),this.absing&&this.setBitrate(e,this.ABS_LEVEL_ID))}},{key:"recover",value:function(e){this.__p&&(G.a.log("".concat(this.LOG_TAG," recover, time=").concat(e)),this.__p.recover(e))}},{key:"close",value:function(){var e=!!this._currentTvid||!!this._nextTvid;this.__p&&!this.isClosed&&e&&(G.a.log("".concat(this.LOG_TAG," close")),this.__p.close(),this._closed=!0,this._currentTvid=null,this._nextTvid=null)}},{key:"setDefList",value:function(e,t){var n=this.hasFeed_(e);this.__p&&n&&(G.a.log("".concat(this.LOG_TAG," setDefList, length=").concat(t.length,", close=").concat(this._closed,", tvid=").concat(e,"(").concat(this.getPosMarkById_(e),")")),this.__p.setDefList(e,t),this._refreshTvid="")}},{key:"hasFeed_",value:function(e){return this._currentTvid==e||this._nextTvid==e}},{key:"getPosMarkById_",value:function(e){var t="~~";return null!=e&&""!=e&&(this._currentTvid===e?t="current":this._nextTvid===e&&(t="next")),t}}]),n}(De.EventEmitter),ts=n(417);function ns(e,t,n){var r=e.length;if(t>r-1||t===r-1&&n)return G.a.log("eof by loader end, ".concat(t,"-").concat(r)),!0;if(!n)return!1;var i=e[t+1],a=!i.enabled;return a&&G.a.log("eof by next disable, ".concat(t,"-").concat(r,"-").concat(i.enabled)),a}function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var is=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},as="dash",os=function(e){d()(n,e);var t=rs(n);function n(e){var r;i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:ts,watch:["manifest","loader","renderer"]}))).mode=ne.P2P,r.$TAG="P2PLoader",r._p2p=null,r._tvid="",r._timeRange=null,r._eof=!1,r._eod=!1,r.curVideoEndTime_=null,r.curAudioEndTime_=null,r.tempDefList_=null,r.baseLog_="",r.tickTimer_=new nt.a((function(){return r.tick_()})),r.onDataArrived_=function(){r._pumpLoader()},r.onAuthExpired_=function(e){var t=r.$krt.params.dynamic.noticeRefreshMovieData;r._tvid==e&&(r.$silenced||t())},r.onKrlPreError_=function(e){var t=r.$manifestArtifact.manifestType;if(!r.$silenced)if(t===lt.HLS&&e.category===ke.a.MUX){if(e.data[1]&&e.data[1].meta){var n=e.data[1],i=n.startByte,a=n.endByte,o=e.data[1].meta,s=o.level,c=o.fragIdx;r._p2p.checkData(s,c,i,a)}}else if(!(t!==lt.DASH_AV1&&t!==lt.DASH_VP9||e.code!==Se.a.MEDIA_VIDEO_ERROR&&e.code!==Se.a.MEDIA_SOURCE_OPERATION_FAILED&&e.code!==Se.a.MEDIA_SOURCE_OPERATION_THREW)&&r.lastReadMainSegment_){var u=r.lastReadMainSegment_,d=u.startByte,l=u.endByte;l-d>200&&(l=d+200),r._p2p.checkData(u.levelId,u.fragIdx,d,l)}};var a=function(){var e=!0;return null==Jo&&(e=!1,Jo=new es),{isCache:e,sdk:Jo}}(),o=a.sdk,s=a.isCache;return r._ctx=e.runtime.ctx,r._p2p=o,s||r._initP2P(),r._bind(),r.tickTimer_.scheduleRepeated(r.$silenced?.5:.1),r}return o()(n,[{key:"$silenced",get:function(){return m()(p()(n.prototype),"$silenced",this)},set:function(e){ie()(p()(n.prototype),"$silenced",e,this,!0),!1===e&&this._tvid&&(this._p2p.checkSwitch(this._tvid),this._pumpLoader())}},{key:"buffer",get:function(){return this._p2p.buffer}},{key:"duration",get:function(){var e=0,t=null,n=null;if(this.$manifestArtifact&&!Object(_e.c)(this.$manifestArtifact))switch(this.$manifestArtifact.manifestType){case lt.HLS:var r=this.$manifestArtifact.segments;e=(t=r[r.length-1]).startTime+t.duration;break;case lt.DASH_VP9:case lt.DASH_AV1:case lt.JDASH:e=(n=this.$manifestArtifact.tracks).video?n.video.duration:0;var i=n.audio?n.audio.duration:0;0===e?e=i:e>0&&i>0&&(e=Math.min(e,i))}return e}},{key:"algot",get:function(){return this._p2p.algot}},{key:"eof",get:function(){return this._eof}},{key:"eod",get:function(){return this._eod}},{key:"fragments",get:function(){var e,t=[];if(this.$manifestArtifact)switch(this.$manifestArtifact.manifestType){case lt.HLS:t=(e=this.$manifestArtifact).fragments;break;case lt.DASH_VP9:case lt.DASH_AV1:case lt.JDASH:e.tracks.video?t=e.tracks.video.fragments:e.tracks.audio&&(t=e.tracks.audio.fragments)}return t||[]}},{key:"p2pVersion",get:function(){return Zo.a}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this._tvid="",this._timeRange=null,this._eof=!1,this._eod=!1,this.$manifestArtifact=null,this.$rendererArtifact=null,this.lastReadMainSegment_=null,this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.tempDefList_=null,this.tickTimer_.cancel(),this._unbind()}},{key:"onStoreStateChanged",value:function(e){var t=e.manifest,n=e.loader,r=e.renderer,i=this.$manifestArtifact!==t,a=this.$selfArtifact!==n,o=this.$rendererArtifact!==r,s=!1,c=!1;i&&t&&!Object(_e.c)(t)&&(t.other.fromlist?this._pushDefList(t):this.$manifestArtifact!==t&&(this._changeManifest(t),s=!0),c=!0);o&&(s=!0,this.$rendererArtifact=r),a&&(s=!0,this.$selfArtifact=n),s&&this._pumpLoader(),c&&this.$consumeArtefact("manifest")}},{key:"seek",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];m()(p()(n.prototype),"seek",this).call(this,e),this.curVideoEndTime_=null,this.curAudioEndTime_=null,this.lastReadMainSegment_=null;var r=this.$manifestArtifact.manifestType;t&&(this._p2p.absing||r==lt.DASH_AV1||r==lt.DASH_VP9||r==lt.JDASH)||(this._p2p.seek(this._tvid,e),this._pumpLoader())}},{key:"findPieceAt",value:function(e){if(this.$manifestArtifact){var t=null,n=null,r=null;switch(this.$manifestArtifact.manifestType){case lt.HLS:t=this.$manifestArtifact,(n=this.findPieceByPTS_(e,t.fragments))&&(r=this.findPieceByPTS_(e,n.segments));break;case lt.DASH_VP9:case lt.DASH_AV1:case lt.JDASH:t=this.$manifestArtifact,r=this.findPieceByPTS_(e,t.tracks.video.segments)}return r?{fragment:n,segment:r}:null}}},{key:"tick_",value:function(){Object(ve.a)(this._ctx.stats,this._p2p.stats),this._pumpLoader()}},{key:"findPieceByPTS_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined;return n&&!this.pieceWithinToleranceTest_(e,n)?n:ye(t,this.pieceWithinToleranceTest_.bind(this,e))}},{key:"pieceWithinToleranceTest_",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1?arguments[1]:undefined;return e<0&&(e=0),t.startTime+t.duration<=e?1:t.startTime>e&&t.startTime?-1:0}},{key:"changeAbsState",value:function(e){this._p2p.absing=e,e&&(this.tempDefList_=null,this._p2p.setBitrate(this._tvid,this._p2p.ABS_LEVEL_ID))}},{key:"applyRanges",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this.$manifestArtifact&&0!==e.length){this._eod=this._eof=!1,this._timeRange=e,this._constructSegmentsByRange(this.$manifestArtifact);var n=[[e.start(0),e.end(e.length-1)]];t&&this._p2p.refreshLoadRange(this._tvid,n)}}},{key:"recoverAt",value:function(e){this._p2p.recover(e),m()(p()(n.prototype),"recoverAt",this).call(this,e)}},{key:"_initP2P",value:function(){var e=this,t=this.$krt,n=this.$stream,r=this.$silenced,i=this._p2p,a=this._ctx,o=t.params.dynamic,s=o.checkIsMobius,c=o.getUserInfo,u=o.sendPingBack,d=o.switchAutoDef,l=o.absing,f=o.startPlayed;r||(i.absing=l);this._p2p.init({getBufferFunc:function(){var t=n.renderer.buffer;return null!==e.curVideoEndTime_&&null!==e.curAudioEndTime_&&(t.buffered.audio.end=e.curVideoEndTime_,t.buffered.video.end=e.curAudioEndTime_),t},reBufTimeFunc:function(){return 0},canSwitchVd:function(){var t=f()&&!n.renderer.updating&&!a.isAd&&a.allowSwitchVariant;return G.a.log("".concat(e.LOG_TAG," p2p get canSwitchVd, check=").concat(t)),t},startPlayed:f||Ht.f,checkIsMobius:s||Ht.f,getUserInfo:c||Ht.f,sendPingBack:u||Ht.f,switchAutoDef:d||Ht.f})}},{key:"_bind",value:function(){var e=this._p2p;this.$krt.ctx.on(ce.a.PRE_ERROR,this.onKrlPreError_),e.on("DR",this.onDataArrived_),e.on("AE",this.onAuthExpired_)}},{key:"_unbind",value:function(){var e=this._p2p;this.$krt.ctx.off(ce.a.PRE_ERROR,this.onKrlPreError_),e.off("DR",this.onDataArrived_),e.off("AE",this.onAuthExpired_)}},{key:"_pushDefList",value:function(e){if(!this.$silenced){var t=e.other.listdone;null==this.tempDefList_&&(this.tempDefList_=[]);var n=this._getP2PItemData(e);this.tempDefList_.push(n),t&&this._p2p.setDefList(this._tvid,this.tempDefList_)}}},{key:"_changeManifest",value:function(e){var t=this.$silenced,n=this.$stream,r=this._p2p,i=e.manifestType,a=e.levelId,o=e.metadata,s=e.other,c=e.isSwitchLevel,u=Number(a),d=s.tvid,l=s.aid,f=s.vidlist,h=s.feed;d+="",l+="";var p=this.$manifestArtifact?this.$manifestArtifact.levelId:"null";G.a.log("".concat(this.LOG_TAG," ").concat(lt[i]," manifest changed, tvid: ").concat(this._tvid,"->").concat(d,", bid: ").concat(p,"->").concat(u,", metadata=").concat(JSON.stringify(o))),this.baseLog_="".concat((lt[i]||"").toLowerCase(),", tvid=").concat(d,", bid=").concat(u),this.$manifestArtifact=e;var _=n.playRanges;if(this.applyRanges(_,!1),this._tvid=d,n.restrictor.needSendInitSegment=!0,"false"!==h&&!1!==h){var v=[[_.start(0),_.end(_.length-1)]],g={vidlist:f,aid:l},y=this._getP2PItemData(e);this.baseLog_+=", type=".concat(y.type),Object(ve.a)(g,y),r.feed(this._tvid,v,!t,g),r.setBitrate(this._tvid,u),c||t||r.seek(this._tvid,_.start(0)),!r.absing||t||c||r.setBitrate(this._tvid,r.ABS_LEVEL_ID)}}},{key:"_getP2PItemData",value:function(e){var t=e.manifestType,n=e.levelId,r=e.other,i={bid:n,vid:r.vid+""||"",type:"",vsize:r.vsize||0,dataFlow:null},a="manifest data, ";switch(t){case lt.HLS:var o=e.segments;i.dataFlow={stream:o},i.type="ts",a+="type=hls, bid=".concat(n,", segments.len=").concat(o.length);break;case lt.DASH_VP9:case lt.DASH_AV1:var s=e.tracks,c=s.video,u=s.audio,d=u.segments[u.segments.length-1],l=c.segments[c.segments.length-1];i.dataFlow={audio:{duration:d.startTime+d.duration,init:u.initSegment,segments:u.segments},video:{duration:l.startTime+l.duration,init:c.initSegment,segments:c.segments}},i.type=t==lt.JDASH?"m4s":as,a="type=".concat(i.type,", bid=").concat(n,", audio.segs.len = ").concat(u.segments.length,", video.segs.len = ").concat(c.segments.length);break;case lt.JDASH:var f=e,h=f.source;h.drm=f.other.drm,i.dataFlow=h,i.type="m4s",a="type=".concat(i.type,", bid=").concat(n)}return G.a.log("".concat(this.LOG_TAG," ").concat(a)),i}},{key:"_constructSegmentsByRange",value:function(e){var t=this._timeRange;if(t){var n=function(e){for(var n=t.start(0),r=t.end(t.length-1),i=0;i<e.length;i++){var a=e[i],o=a.startTime,s=a.endTime;a.enabled=(o>=n||s>n)&&(s<=r||o<r)}};switch(e.manifestType){case lt.HLS:n(e.segments);break;case lt.DASH_VP9:case lt.DASH_AV1:var r=e.tracks,i=r.video,a=r.audio;n(i.segments),n(a.segments);break;case lt.JDASH:}}}},{key:"_pumpLoader",value:function(){var e=this.$stream,t=this.$selfArtifact,n=this.$manifestArtifact,r=t,i=this.$rendererArtifact;if(!(!n||Object(_e.c)(n)||!Object(_e.c)(r)&&null!=r||null==i||i.expectingBuffer!==undefined&&"boolean"!=typeof i.expectingBuffer||!1===i.expectingBuffer||this.eof||this.$silenced||this.$error&&0===this.buffer.len||this.$error&&(this.$error.code===Se.a.DATA_P2P_DASH_BYTES_LENGTH||this.$error.code===Se.a.MUX_M4S_FTYP_INVALID))){var a=this._p2p.error;if(a)this.$throwError(a);else{var o=!1;o=e.restrictor.needSendInitSegment&&n.manifestType!==lt.HLS?this._readInitSegment():this._readData(),this.noticeDataPump(o)}}}},{key:"_readInitSegment",value:function(){var e=this.$stream,t=!1;if(!this.$manifestArtifact)return t;var n=this.$manifestArtifact,r=n.manifestType,i=n.metadata,a=i.hasVideo,o=i.hasAudio,s=null,c=null,u=[],d=this.$manifestArtifact,l=null,f=null;switch(r){case lt.JDASH:l=d.tracks.video,f=d.tracks.audio,l&&((s=new Dt.a(1)).bytesArray=[l.initSegment],s.container="video/mp4",s.codec=l.codec,u.push(s)),f&&((c=new Dt.a(2)).bytesArray=[f.initSegment],c.container="audio/mp4",c.codec=f.codec,u.push(c));break;case lt.DASH_VP9:case lt.DASH_AV1:var h=this._p2p.read(this._tvid,!0);if(h){var p=h.video?h.video.data:null,_=h.audio?h.audio.data:null;(p||_)&&(l=d.tracks.video,f=d.tracks.audio,l&&p&&((s=new Dt.a(1)).bytesArray=[p],s.container=l.mimeType,s.codec=l.codec,u.push(s)),f&&_&&((c=new Dt.a(2)).bytesArray=[_],c.container=f.mimeType,c.codec=f.codec,u.push(c)))}}return(a&&o&&s&&c||a&&s||o&&c)&&(e.restrictor.needSendInitSegment=!1,t=!0,G.a.log("".concat(this.LOG_TAG," read initSegment, length=").concat(u.length)),this.$provideArtefact({segments:u})),t}},{key:"_readData",value:function(){var e=this._p2p.read(this._tvid,!1),t=!1;if(e&&!Object(_e.c)(e)){var n=e.type,r=this.$manifestArtifact.manifestType;"ts"==(n=n.toLowerCase())&&r==lt.HLS&&(t=this._parseHLS(this.$manifestArtifact.segments,e)),("m4s"==n&&r==lt.JDASH||n==as&&(r==lt.DASH_VP9||r==lt.DASH_AV1))&&(t=this._parseDash(this.$manifestArtifact.tracks,e))}return t}},{key:"_parseHLS",value:function(e,t){var n=e,r=t.bid,i=t.loadDone,a=t.stream,o=null,s=!1;if(a){var c=a.index,u=a.data,d=a.chunkEOF,l=a.spos,f=n[c],h=r||f.levelId;if(this._eof=ns(n,c,d),this._eod=i,u){var p=u.byteLength;G.a.log("read hls, done=".concat(d,", uid=").concat(h,"-").concat(f.fragIdx,"-").concat(f.idx,", startByte=").concat(f.startByte,", endByte=").concat(f.endByte,", total=").concat(f.endByte-f.startByte,", byteOffset=").concat(l,", data.byteLength=").concat(p,", startTime=").concat(f.startTime,", endTime=").concat(f.startTime+f.duration,", eof=").concat(this._eof,", eod=").concat(this._eod)),o={type:lt.HLS,data:u,done:d,meta:{uid:"".concat(h,"-").concat(f.fragIdx,"-").concat(f.idx," "),level:h,fragIdx:f.fragIdx,segIdx:f.idx,fragKey:f.fragKey,byteOffset:l}}}}return o&&(s=!0,this.$provideArtefact(o)),s}},{key:"_parseDash",value:function(e,t){var n,r,i,a,o=this,s=t.bid,c=t.loadDone,u=t.video,d=t.audio,l=e.video?e.video.segments:null,f=e.audio?e.audio.segments:null,h="",p=[],_=null,v=!!f&&f.length>0,g=!!l&&l.length>0,y=!1;return l||f?([{type:"video",result:u,segments:l},{type:"audio",result:d,segments:f}].filter((function(e){var t=e.result;return!(!t||!t.data)})).forEach((function(e){var n=e.type,r=e.result,c=e.segments,u=r.index,d=c[u],l=d.endByte-d.startByte,f="video"===n?1:2,v="".concat(s,"-").concat(d.fragIdx,"-").concat(d.idx);if(r.data.length!==l)_=!0,i=ke.a.LOADER,a=Se.a.DATA_P2P_DASH_BYTES_LENGTH,h+="\n".concat(n," byteLength error, p2p=").concat(r.data.length,", manifest=").concat(l,", uid=").concat(v);else if("m4s"!==t.type||function(e,t){var n=!0,r=1===t?[0,0,0,36,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,97,118,99,49,99,109,102,115]:[0,0,0,32,115,116,121,112,105,115,111,109,0,0,0,0,105,115,111,56,109,112,52,49,100,97,115,104,99,109,102,115],i=r.length;if(e.length<i)n=!1;else for(var a=0;a<i;a++)if(r[a]!==e[a]){n=!1;break}return n}(r.data,f)){var g=new qt.a(f);g.bytesArray=[r.data],g.startTime=d.startTime,g.duration=d.duration,p.push(g),h+="\nreceived ".concat(n," ").concat(u," segment, uid=").concat(v,", startTime=").concat(d.startTime,", duration=").concat(d.duration),/firefox/gi.test(navigator.userAgent)||(h+=", crc32=".concat(Ue(Wt(g.bytesArray[0]).toString()))),1===f?(o.lastReadMainSegment_=d,o.curVideoEndTime_=d.endTime):o.curAudioEndTime_=d.endTime}else{_=!0,i=ke.a.LOADER,a=Se.a.MUX_M4S_FTYP_INVALID;var y="Encounter invalid m4s ftyp, startByte: ".concat(d.startByte," endByte: ").concat(d.endByte,", data(").concat(r.data.subarray(0,100),")");G.a.error(y)}})),n=!v||ns(f,d.index,!!d.data),r=!g||ns(l,u.index,!!u.data),this._eof=r&&n,this._eod=c,_&&this.$throwError(new me.a(be.a.CRITICAL,i,a,"")),p.length>0&&(y=!0,G.a.log("".concat(this.LOG_TAG," read data, ").concat(this.baseLog_,", eof=").concat(this._eof,", eod=").concat(this._eod,", ").concat(h)),this.$provideArtefact({segments:p})),y):y}}]),n}(pe);is([se.c],os.prototype,"fragments",null),is([se.c],os.prototype,"p2pVersion",null),is([se.c],os.prototype,"findPieceAt",null);n(204),n(147);function ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var cs=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},us=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ds=function(e){d()(n,e);var t=ss(n);function n(e){var r;i()(this,n);var a=e.manifestType,o=us(e,["manifestType"]);return(r=t.call(this,o)).$ARTEFACT_ACTION=ue.a.DEPOSIT_MANIFEST,r.seekable_=!0,r.manifestType=a,r}return o()(n,[{key:"currentManifestType",get:function(){var e=this.manifestType;return e===undefined||null===e?null:e}},{key:"dynamicStuckMonitorPeriod",get:function(){this.currentManifestType;return this.$krt.conf.fpsStuckMonitoringPeriod}},{key:"seekable",get:function(){return this.seekable_},set:function(e){this.seekable_=e}}]),n}(de.a);cs([se.c],ds.prototype,"currentManifestType",null);var ls=function Tv(){i()(this,Tv),this.hasAudio=!1,this.hasVideo=!1};function fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var hs=function(e){d()(n,e);var t=fs(n);function n(e){var r;return i()(this,n),(r=t.call(this)).status=0,r.enabled=!0,r.seekable=!0,r.mediumStartByte=null,r.mediumEndByte=null,r.uri=null,r.segments=[],r.header=null,r.gas=null,r.loadstart=!1,r.offset=0,r.key=xe.a.create(),r.type=e,r}return n}(function(){function e(){i()(this,e),this.idx=null,this.startTime=0,this.duration=0,this.startByte=null,this.endByte=null,this.uri=null,this.segments=[]}return o()(e,[{key:"endTime",get:function(){return this.startTime+this.duration}}]),e}());n(168),n(583);function ps(e,t){var n=new DOMParser,r=null,i=null;try{i=n.parseFromString(e.trim(),"text/xml")}catch(a){throw"XML DOMParser parseFromString error: ".concat(a.message)}return i&&i.documentElement.tagName==t&&(r=i.documentElement),r&&r.getElementsByTagName("parsererror").length>0?null:r}function _s(e,t,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,i=null,a=e.getAttribute(t);return null!=a&&(i=n(a)),null==i?r:i}function vs(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function gs(e,t){var n=ys(e,t);return 1!=n.length?null:n[0]}function ys(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function ms(e,t){return Array.from(e.childNodes).filter((function(e){return e.nodeType===t}))}var bs=Z.a.mark(Ss);function ks(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ss(e){var t,n,r,i,a,o;return Z.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=-1,n=undefined,r=undefined,i=ks(e),s.prev=4,i.s();case 6:if((a=i.n()).done){s.next=16;break}if(o=a.value,!(t>=0)){s.next=11;break}return s.next=11,{i:t,item:r,prev:n,next:o};case 11:t++,n=r,r=o;case 14:s.next=6;break;case 16:s.next=21;break;case 18:s.prev=18,s.t0=s["catch"](4),i.e(s.t0);case 21:return s.prev=21,i.f(),s.finish(21);case 24:if(-1==t){s.next=27;break}return s.next=27,{i:t,prev:n,item:r,next:undefined};case 27:case"end":return s.stop()}}),bs,null,[[4,18,21,24]])}n(110),n(146);function Ts(e){return null!=e}function Ps(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return G.a.warn("Invalid duration string: ".concat(e)),null;var n=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(n)?n:null}function Is(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=Number(t[1]);if(!isFinite(n))return null;var r=Number(t[2]);return isFinite(r)?{start:n,end:r}:null}function ws(e){var t,n;return n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(n)?null:n}function As(e){var t=Number(e);return t%1==0&&t>0?t:null}function Es(e){var t=Number(e);return t%1==0&&t>=0?t:null}function Ds(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Os(e){var t=gs(e,"clip_list"),n={},r={BaseURL:"baseUrl",remote_path:"url",start_ts_in_ms:{name:"startTime",parser:Es},duration_in_ms:{name:"duration",parser:Es},start_pos:{name:"startByte",parser:Es},end_pos:{name:"endByte",parser:Es},type:"type",size:{name:"size",parser:Es}};t&&ys(t,"clip").map((function(e){var t={type:null};ms(e,Node.ELEMENT_NODE).map((function(e){var n=r[e.tagName];if(n){var i="string"==typeof n?n:n.name,a=vs(e);n.parser&&(a=n.parser(a)),t[i]=a}})),Array.isArray(n[t.type])||(n[t.type]=[]),n[t.type].push(t)}));return n}function Rs(e,t){return e.filter((function(e){return e.contentType==t}))}function Ls(e,t){var n,r,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(e||t)if(e&&t){var a,o=Ds(e.streams);try{for(o.s();!(a=o.n()).done;){var s,c=a.value,u=Ds(t.streams);try{for(u.s();!(s=u.n()).done;){var d=s.value;n=(d.bandwidth||0)+(c.bandwidth||0),r={language:e.language,primary:e.main||t.main,audio:c,video:d,bandwidth:n},i.push(r)}}catch(_){u.e(_)}finally{u.f()}}}catch(_){o.e(_)}finally{o.f()}}else{var l,f=e||t,h=Ds(f.streams);try{for(h.s();!(l=h.n()).done;){var p=l.value;n=p.bandwidth||0,r={language:f.language||"und",primary:f.main,audio:e?p:null,video:t?p:null,bandwidth:n},i.push(r)}}catch(_){h.e(_)}finally{h.f()}}}function Ms(e,t){e.period=t,e.period.id||(G.a.log("No Period ID given for Period with start time ".concat(t.start,",  Assigning a default")),e.period.id="__qvs_period_"+t.start);var n=ys(t.node,"AdaptationSet").map((function(t){return function(e,t){var n=t.getAttribute("id"),r=t.getAttribute("contentType")||"",i=t.getAttribute("segmentAlignment"),a=t.getAttribute("lang")||"und",o=ys(t,"Representation"),s="text"===r;e.adaptationSet={id:n,contentType:r,segmentAlignment:i,language:a};var c=o.map((function(t){return function(e,t,n){var r,i=e.adaptationSet,a=i.contentType,o=t.getAttribute("id"),s=t.getAttribute("mimeType")||"",c=t.getAttribute("codecs"),u=_s(t,"bandwidth",As)||0,d=gs(t,"SegmentBase"),l=gs(t,"SegmentList"),f=gs(t,"SegmentTemplate"),h=ys(t,"BaseURL").map(vs),p={contentType:a,id:o,mimeType:s,codecs:c,bandwidth:u,baseUris:h,segmentBase:d,segmentList:l,segmentTemplate:f};switch(a){case"video":p.width=_s(t,"width",Es),p.height=_s(t,"height",Es),p.frameRate=_s(t,"frameRate",ws);break;case"audio":p.audioSamplingRate=Es(t.getAttribute("audioSamplingRate"))}if(e.representation=p,!function(e){var t=0;if(t+=e.segmentBase?1:0,t+=e.segmentList?1:0,0==(t+=e.segmentTemplate?1:0))return G.a.warn("Representation does not contain a segment information source: the Representation must contain one of SegmentBase, SegmentList"),!1;1!=t&&(G.a.warn("Representation ".concat(e.id," contains multiple segment information sources: the Representation should only contain one of SegmentBase,SegmentList, or SegmentTemplate.")),e.segmentBase?(G.a.log("Using SegmentBase by default."),e.segmentList=null,e.segmentTemplate=null):(G.a.log("Using SegmentList by default."),e.segmentTemplate=null));return!0}(p))return G.a.warn("Skipping Representation",p),null;p.segmentList?r=function(e,t){var n=e.representation,r=n.contentType,i=gs(t,"Initialization"),a=ys(t,"SegmentURL"),o=Es(t.getAttribute("startNumber")||""),s=NaN;if("video"===r)s=1e3;else{if("audio"!==r)throw"mpd unknown ".concat(r);s=n.audioSamplingRate}var c={range:_s(i,"range",Is,{start:0,end:null})},u=a.map((function(t,n){t.getAttribute("indexRange")&&!e.indexRangeWarningGiven&&(e.indexRangeWarningGiven=!0);var r=Es(_s(t,"t",Es));return 0===n&&(r=0),{startTime:r,duration:Es(_s(t,"d",Es)),range:_s(t,"mediaRange",Is,{start:0,end:null})}}));u.length>1&&(u[0].duration=u[1].startTime);0==o&&(G.a.warn("SegmentList@startNumber must be > 0"),o=1);return{startNumber:o,timescale:s,initUri:c,mediaUris:u}}(e,p.segmentList):p.segmentBase||p.segmentTemplate?G.a.error("mpd parser still not support parse segmentBase or segmentTemplate"):G.a.error("Must have Segment* with non-text streams.");return Object.assign({id:i.id,originalId:p.id,segmentIndex:null,mimeType:p.mimeType,codecs:p.codecs,frameRate:p.frameRate,bandwidth:p.bandwidth,width:p.width,height:p.height,language:n,type:a,channelsCount:p.numChannels},r)}(e,t,a)})).filter((function(e){return!!e}));if(0==c.length){if(s)return null;throw new Error("DASH_EMPTY_ADAPTATION_SET")}if(!e.adaptationSet.contentType||"application"==e.adaptationSet.contentType){var u=c[0].mimeType;c[0].codecs;e.adaptationSet.contentType=function(e){return e.split("/")[0]}(u);var d,l=Ds(c);try{for(l.s();!(d=l.n()).done;){d.value.type=e.adaptationSet.contentType}}catch(h){l.e(h)}finally{l.f()}}var f=o.map((function(e){return e.getAttribute("id")})).filter(Ts);return{id:e.adaptationSet.id,contentType:e.adaptationSet.contentType,language:a,streams:c,representationIds:f}}(e,t)})).filter(Ts),r=Rs(n,"video"),i=Rs(n,"audio");if(!r.length&&!i.length)throw"DASH_EMPTY_PERIOD";i.length||(i=[null]),r.length||(r=[null]);var a,o=[],s=Ds(i);try{for(s.s();!(a=s.n()).done;){var c,u=a.value,d=Ds(r);try{for(d.s();!(c=d.n()).done;){Ls(u,c.value,o)}}catch(l){d.e(l)}finally{d.f()}}}catch(l){s.e(l)}finally{s.f()}return{startTime:t.start,variants:o}}var Cs={parseClipList:Os,parseDuration:Ps,parsePeriods:function(e,t){var n,r=[],i=ys(t,"Period"),a=e.presentationDuration,o=0,s=Ds(Ss(i));try{for(s.s();!(n=s.n()).done;){var c=n.value,u=c.i,d=c.item,l=c.next,f=d.getAttribute("id"),h=_s(d,"start",Ps,o),p=_s(d,"duration",Ps),_=null;if(l){var v=_s(l,"start",Ps);null!=v&&(_=v-h)}else null!=a&&(_=a-h);_&&p&&Math.abs(_-p)>.06666666666666667&&G.a.warn("There is a gap/overlap between mpd Periods"),null==_&&(_=p);var g=Ms(e,{id:f,start:h,duration:_,node:d,isLastPeriod:null==_||!l});if(r.push(g),null==_){l&&G.a.warn("Skipping Period",u+1,"and any subsequent Periods:","Period",u+1,"does not have a valid start time.",l),o=null;break}o=h+_}}catch(y){s.e(y)}finally{s.f()}return null!=a?(o!=a&&G.a.warn("@mediaPresentationDuration does not match the total duration of all Periods."),{periods:r,duration:a,durationDerivedFromPeriods:!1}):{periods:r,duration:o,durationDerivedFromPeriods:!0}}},Ns=n(418);function Bs(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var js=function(e){d()(n,e);var t=Us(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:Ns,watch:["rawness","error"],manifestType:lt.UNKNOWN}))).$TAG="DashManifest",r}return o()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(_e.c)(e.rawness)){var t=e.rawness.mpd,n=e.rawness.bid,r=e.rawness.other,i=Object(_e.j)(n)?parseInt(n,10):n;if(Object(_e.j)(t)){var a=this.generateArtefact_(t,i,r);if(a.isSwitchLevel=!!e.rawness.isSwitchLevel,a.tracks.video){var o=a.tracks.video.codec;if(/vp09/gi.test(o))this.manifestType=lt.DASH_VP9;else{if(!/av01/gi.test(o))return void G.a.error("".concat(this.LOG_TAG," unsupported dash manifest codec ").concat(o));this.manifestType=lt.DASH_AV1}}this.$provideArtefact(a)}else this.$throwError(new me.a(be.a.CRITICAL,ke.a.MANIFEST,Se.a.MFT_FAILED_TO_PARSE_MPD));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){try{var r=function(){var r=xe.a.create(),i=new ls,a={},o=ps(e,"MPD"),s=_s(o,"mediaPresentationDuration",Cs.parseDuration),c=Os(o),u=!!c.video,d=!!c.audio,l={clips:c,presentationDuration:s,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1},f=Cs.parsePeriods(l,o).periods;i.hasAudio=d,i.hasVideo=u;var h=lt.DASH_VP9;Object.keys(c).forEach((function(e){var n=c[e],r={};r.type=e,r.duration=s,r.fragments=[],n.map((function(e,n){var i=new hs(h);i.idx=n,i.levelId=t,i.uri=new Ee.a(e.url),i.mediumStartByte=e.startByte,i.mediumEndByte=e.endByte+1,i.startByte=0,i.endByte=i.mediumEndByte-i.mediumStartByte,Object(_e.e)()&&i.uri.setScheme("https"),r.fragments.push(i)})),a[e]=r}));var p,_=Bs(f);try{var v=function(){var e=p.value.variants[0],n=[];d&&n.push("audio"),u&&n.push("video"),n.forEach((function(n){var i=a[n],o=e[n],s=o.codecs;if(i){var c=new vt(h);c.uri=new Ee.a(i.fragments[0].uri),c.startByte=o.initUri.range.start,c.endByte=o.initUri.range.end+1,c.uri.query.add("start",c.startByte+""),c.uri.query.add("end",c.endByte+""),i.codec=s,i.mimeType=o.mimeType,i.initSegment=c,i.segments=[];for(var u=0,d=-1,l=i.fragments[u],f=o.timescale,p=o.mediaUris.length,_=!1,v=0;v<p;v++){var g=v===p-1,y=o.mediaUris[v],m=y.range.start,b=y.range.end+1,k=m-l.mediumStartByte,x=b-l.mediumStartByte,S=new Ee.a(l.uri),T=y.startTime/f,P=y.duration/f;g&&(P=i.duration-T),b<=l.mediumEndByte&&(d++,b===l.mediumEndByte&&(_=!0,l.startTime=l.segments.length>0?l.segments[0].startTime:T,l.duration=T-l.startTime+P)),S.query.update("start",k+""),S.query.update("end",x+"");var I=new vt(h);I.uri=S,I.idx=d,I.fragIdx=u,I.startTime=T,I.duration=P,I.startByte=k,I.endByte=x,I.poolId=r+"-"+u+"-"+d,I.levelId=t,I.bid=t+"",i.segments.push(I),l.segments.push(I),_&&(u++,d=-1,l=i.fragments[u],_=!1)}}}))};for(_.s();!(p=_.n()).done;)v()}catch(g){_.e(g)}finally{_.f()}if(!Object(_e.c)(a))return{v:{duration:s,manifestType:h,isSwitchLevel:!1,levelId:t,metadata:i,tracks:a,other:n}}}();if("object"===oe()(r))return r.v}catch(i){G.a.error("".concat(this.LOG_TAG," mpd parsed fail: ").concat(i.stack," - ").concat(i.message)),this.$throwError(new me.a(be.a.CRITICAL,ke.a.MANIFEST,Se.a.MFT_FAILED_TO_PARSE_MPD_XML))}return null}}]),n}(ds),Vs=n(419);function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Hs=function(e){d()(n,e);var t=Ws(n);function n(e){return i()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:Vs,watch:["rawness","error"],manifestType:lt.FLV}))}return o()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(_e.c)(e.rawness)){var t=e.rawness.fs,n=e.rawness.bid,r=Object(_e.j)(n)?parseInt(n,10):n,i=e.rawness.other;if(Array.isArray(t)||i.done){var a=this.generateArtefact_(t,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,a.other=i,this.$provideArtefact(a)}else{try{G.a.error(JSON.stringify(e.rawness))}catch(o){}this.$throwError(new me.a(be.a.CRITICAL,ke.a.MANIFEST,Se.a.MFT_FAILED_TO_PARSE_FLV))}this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t){var n=new ls;n.hasAudio=!0,n.hasVideo=!0;var r={manifestType:lt.FLV,isSwitchLevel:!1,levelId:t,metadata:n,fragments:[],segments:[],other:{}};if(e&&e.length>0)for(var i=e.length,a=null,o=0,s=0;s<i;++s){var c=e[s];(a=new hs(lt.FLV)).idx=s,a.startTime=o,a.duration=c.duration,o+=c.duration,a.uri=new Ee.a(c.url),a.levelId=t,c.gas&&(a.gas=c.gas),Object(_e.e)()&&a.uri.setScheme("https");var u=new vt(lt.FLV);u.startByte=0,u.endByte=9e3,u.uri=new Ee.a(c.url),u.fragIdx=s,a.header=u,u.levelId=t,Object(_e.e)()&&u.uri.setScheme("https"),r.fragments.push(a)}return r}}]),n}(ds),zs=n(420);function Ys(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Gs=function(e){d()(n,e);var t=Ys(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:zs,watch:["rawness","error"],manifestType:lt.HLS}))).$TAG="HlsManifest",r}return o()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(_e.c)(e.rawness)){var t=e.rawness.m3u8,n=e.rawness.bid,r=e.rawness.other,i=Object(_e.j)(n)?parseInt(n,10):n;if(Object(_e.j)(t)){var a=this.generateArtefact_(t,i,r);a.isSwitchLevel=!!e.rawness.isSwitchLevel,this.$provideArtefact(a)}else this.$throwError(new me.a(be.a.CRITICAL,ke.a.MANIFEST,Se.a.MFT_FAILED_TO_PARSE_M3U8));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){var r=xe.a.create(),i=new ls;i.hasAudio=!0,i.hasVideo=!0;var a={manifestType:lt.HLS,isSwitchLevel:!1,levelId:t,metadata:i,fragments:[],segments:[],isAccurateTimestamp:!1,other:n};if(e&&""!=e){var o=this.parseM3u8_(e),s=o.durations,c=o.urls,u=o.sds,d=o.starts,l=o.ends,f=o.parts,h=c.length,p=u&&u.length>0;if(a.isAccurateTimestamp=p,h>0){var _,v,g,y,m,b,k=0,x=0,S=0;u.length>0&&(u[0]=0);for(var T=0;T<h;T++){var P=T===h-1,I=Ae.f+c[T],w=s[T],A=d[T],E=l[T],D=f[T],q=void 0;P&&0===w&&(w=.04),g&&g===D||(g&&(q=_),(_=new hs(lt.HLS)).idx=k,x=0,a.fragments.push(_),k+=1),(v=new vt(lt.HLS)).uri=new Ee.a(I),v.idx=x,v.startByte=A,v.endByte=E,v.poolId=r+"-"+_.idx+"-"+x,v.levelId=t,v.duration=w,v.fragIdx=_.idx,v.fragKey=_.key,v.flattenIdx=a.segments.length,v.__url=v.uri.toString(),x+=1,p?(S=u[T]/1e3,b>-1&&S<b&&(G.a.log("".concat(this.LOG_TAG," manifest correct sd , ").concat(S," -> ").concat(b+m.duration)),S=b+m.duration),v.startTime=S,m&&(m.duration=S-m.startTime),m=v,b=S):(v.startTime=S,S+=w),a.segments.push(v),_.segments.push(v),q&&this.resetFragInfo_(q,y,t),P&&this.resetFragInfo_(_,I,t),g=D,y=I}}}return a}},{key:"parseM3u8_",value:function(e){for(var t,n=[],r=[],i=[],a=[],o=[],s=[],c=/(#EXTINF:\d+)|(\/\/\S*)/g,u=/(start=\d+)|(end=\d+)/g,d=/(&sd=\d+)|(\/\/\S*\?)/g;null!==(t=c.exec(e));)t[0].indexOf("#EXTINF")>-1?n.push(parseInt(t[0].replace("#EXTINF:",""),10)):r.push(t[0]);for(;null!==(t=u.exec(e));)t[0].indexOf("start=")>-1?a.push(parseInt(t[0].replace("start=",""),10)):o.push(parseInt(t[0].replace("end=",""),10));for(;null!==(t=d.exec(e));)t[0].indexOf("&sd=")>-1?i.push(parseInt(t[0].replace("&sd=",""),10)):s.push(t[0]);return{durations:n,urls:r,sds:i,starts:a,ends:o,parts:s}}},{key:"resetFragInfo_",value:function(e,t,n){var r=e.segments[0],i=e.segments[e.segments.length-1];e.startTime=r.startTime,e.duration=i.startTime+i.duration-e.startTime,e.levelId=n;var a=r.startByte,o=i.endByte;t=(t=(t=t.replace(/start=\d+&/g,"start="+a+"&")).replace(/contentlength=\d+&/g,"contentlength="+(o-a)+"&")).replace(/sd=\d+&/g,"sd="+1e3*r.startTime+"&"),e.uri=new Ee.a(t)}}]),n}(ds);function Qs(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Ks(e,t){var n=je(e);t=t==undefined||t;var r=btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")}function $s(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}var Zs=n(421);function Xs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Js=function(e){d()(n,e);var t=Xs(n);function n(e){return i()(this,n),t.call(this,Object.assign(Object.assign({},e),{pkg:Zs,watch:["rawness","error"],manifestType:lt.JDASH}))}return o()(n,[{key:"onStoreStateChanged",value:function(e){if(!Object(_e.c)(e.rawness)){var t=this.$stream.renderer,n=e.rawness,r=n.m3u8,i=n.drm,a=n.bid,o=n.other,s=null;try{var c=JSON.parse(r);s=c.payload[c.watermark_group[0]]}catch(l){}if(s){var u=Object(_e.j)(a)?parseInt(a,10):a,d=this.generateArtefact_(s,u,o);d.isSwitchLevel=!!e.rawness.isSwitchLevel,t&&(t.drmInfo=i),this.$provideArtefact(d)}else this.$throwError(new me.a(be.a.CRITICAL,ke.a.MANIFEST,Se.a.MFT_FAILED_TO_PARSE_JDASH));this.$consumeArtefact("rawness")}}},{key:"generateArtefact_",value:function(e,t,n){window.location.protocol;var r=xe.a.create(),i=new ls,a={};for(var o in e)if("object"===oe()(e[o])&&Array.isArray(e[o].type)&&/(video|audio)/gi.test(e[o].type.join(""))){var s=e[o],c=s.files.length,u={type:Array.isArray(s.type)?s.type[0]:s.type,duration:parseInt(s.duration_second,10),codec:s.codec,initDataType:s.encryption_scheme,initSegment:Qs(s.codec_init),segments:[]};c>0&&(s.files[0].seekable.hasOwnProperty("pos")?this.parseOldData_(u.segments,s.files,u.duration,r,t):s.files[0].seekable.hasOwnProperty("pos_start")&&this.parseNewData_(u.segments,s.files,r,t)),a[u.type]=u,"audio"===u.type?i.hasAudio=!0:"video"===u.type&&(i.hasVideo=!0)}return Object(_e.c)(a)?null:{manifestType:lt.JDASH,isSwitchLevel:!1,levelId:t,metadata:i,tracks:a,other:n,source:e}}},{key:"parseOldData_",value:function(e,t,n,r,i){for(var a=0,o=t.length;a<o;a++)for(var s,c,u,d=t[a],l=d.size,f=d.start_second,h=a===o-1,p=0;p<d.seekable.time.length;p++)s=new vt(lt.JDASH),c=e[e.length-1],u=d.seekable.pos[p+1],s.uri=new Ee.a(d.file_name),Object(_e.e)()&&s.uri.setScheme("https"),s.idx=p,s.poolId=r+"-"+s.idx,s.levelId=i,s.startTime=f+d.seekable.time[p],c&&(c.duration=s.startTime-c.startTime,h&&"number"!=typeof u&&(s.duration=n-s.startTime)),s.startByte=d.seekable.pos[p],s.endByte="number"==typeof u?u:l,e.push(s)}},{key:"parseNewData_",value:function(e,t,n,r){for(var i,a=0,o=t.length;a<o;a++){var s=t[a];(i=new vt(lt.JDASH)).uri=new Ee.a(s.file_name),Object(_e.e)()&&i.uri.setScheme("https"),i.idx=a,i.poolId=n+"-"+i.idx,i.levelId=r,i.duration=s.seekable.time_end-s.seekable.time_start,i.startTime=s.start_second,i.startByte=s.seekable.pos_start,i.endByte=s.seekable.pos_end,e.push(i)}}}]),n}(ds),ec=n(349),tc=n(348);function nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var rc=function(e){d()(n,e);var t=nc(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).variantAudioMode=!1,e.$ARTEFACT_ACTION=ue.a.DEPOSIT_RENDERER,e}return o()(n,[{key:"appendWindowStart",get:function(){return this.appendWindowStart_},set:function(e){this.appendWindowStart_=e}},{key:"appendWindowEnd",get:function(){return this.appendWindowEnd_},set:function(e){this.appendWindowEnd_=e}},{key:"hasOperateBufferData",get:function(){return!1}},{key:"currentTimeRange",get:function(){var e=null,t=this.buffered,n=this.currentTime;if(t)for(var r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(i<=n&&n<a){e={start:i,end:a};break}}return e}},{key:"drmInfo",set:function(e){}},{key:"bufferInfo",value:function(e,t){return{len:0,start:0,end:0}}},{key:"takeoverMediaControl",value:function(){}},{key:"releasedMediaControl",value:function(){}},{key:"$withinBuffer",value:function(e,t,n){}},{key:"$clearOperateBuffers",value:function(e){arguments.length>1&&undefined}},{key:"$flushBuffer",value:function(e,t,n){}},{key:"$drainBuffer",value:function(e){m()(p()(n.prototype),"$drainBuffer",this).call(this,e),this.hasOperateBufferData&&this.$clearOperateBuffers(null,!!e.keepInit),!1!==e.flushMedia&&this.$flushBuffer()}}]),n}(de.a),ic=n(531),ac=(n(195),n(196),new Uint8Array([10,178,2,8,3,18,16,153,75,133,49,202,175,120,35,184,85,5,60,251,56,41,180,24,229,132,139,214,5,34,142,2,48,130,1,10,2,130,1,1,0,173,188,172,242,201,171,92,176,7,198,96,157,222,119,76,120,208,81,120,242,46,147,239,190,102,21,104,43,121,143,181,56,91,166,179,185,0,138,222,127,154,201,112,251,199,108,202,125,228,135,188,121,44,55,129,188,241,126,7,90,62,216,149,122,126,232,110,19,251,191,22,226,176,108,175,48,185,240,170,148,33,36,225,222,52,104,28,221,88,239,200,49,155,234,19,145,193,19,98,116,67,72,49,81,190,53,255,164,75,74,167,161,89,105,104,50,95,220,200,174,74,181,115,30,192,243,65,185,252,142,121,46,140,174,68,112,140,49,84,28,135,128,110,67,38,124,124,194,110,179,55,38,19,157,83,28,107,90,30,210,73,121,247,112,12,62,217,231,167,5,178,203,137,211,8,41,166,110,167,215,242,176,236,185,105,4,25,126,221,164,251,240,192,186,97,41,102,71,179,187,181,8,10,122,216,138,154,82,128,218,191,190,240,32,167,166,250,197,176,31,85,129,128,135,254,132,143,11,188,118,55,120,184,133,167,96,84,37,32,232,218,215,244,216,83,199,86,68,153,167,87,250,185,192,143,5,2,3,1,0,1,58,5,105,113,105,121,105,18,128,3,108,85,242,237,185,42,124,70,211,70,134,94,29,126,167,210,209,177,68,127,56,85,77,151,232,211,106,176,194,114,231,35,138,254,226,24,103,180,63,213,255,88,78,161,119,227,11,232,63,81,58,217,15,10,248,108,248,9,224,110,34,66,36,242,70,85,25,202,189,138,14,172,160,0,225,62,55,122,142,182,214,253,43,147,147,172,193,45,41,185,82,136,1,108,126,93,154,60,131,2,115,138,221,67,238,227,92,138,215,173,249,188,229,18,241,188,29,154,33,119,37,124,152,48,13,139,88,101,233,120,14,106,200,154,192,69,245,11,234,109,144,181,128,189,62,127,37,163,117,190,137,153,101,44,51,198,56,56,241,141,166,196,99,89,247,121,28,93,172,201,215,51,241,219,174,29,213,241,48,23,46,83,167,192,43,87,89,12,65,41,112,220,202,12,81,32,254,158,20,39,242,219,178,209,60,199,40,41,253,166,234,0,49,130,127,231,122,26,210,230,238,26,166,206,219,252,89,107,158,29,26,220,58,93,94,87,252,97,37,66,128,184,119,48,176,82,32,96,26,4,144,167,56,8,99,44,129,38,4,251,10,80,13,212,186,8,249,178,81,164,255,10,183,199,177,181,141,126,254,100,119,73,224,216,201,222,242,154,32,224,182,205,245,104,142,137,142,103,93,162,83,65,239,129,35,70,120,115,163,162,49,132,80,43,96,189,121,132,177,206,43,162,19,129,194,34,25,51,148,131,63,139,91,109,98,55,45,182,139,28,53,232,226,68,232,251,89,36,230,82,228,65,33,135,221,199,47,45,97,230,2,4,169,22,186,228,190,216,95,132,241,171,220,132,144,233,72,186,244,205,60,38,90,246]));function oc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cc="<<EME>>",uc=function(){function e(){i()(this,e),this.sessions=[],this.licenseRequests=[],this.drmInfo=null,this.eventManager_=new Te.a}var t,n,r,a;return o()(e,[{key:"setup",value:function(e,t,n){this.runtime_=e,this.mediaElem_=t,this.sessions=[],this.licenseRequests=[],n&&this.setDrmInfo(n),this.eventManager_.on(t,"encrypted",this.onEncrypted_.bind(this))}},{key:"destroy",value:function(){this.eventManager_.removeAll(),this.reset(),this.runtime_=null,this.mediaElem_=null,this.licenseRequests=null,this.sessions=null,this.drmInfo=null}},{key:"reset",value:function(){var e=this.sessions,t=this.licenseRequests,n=this.eventManager_;this.mediaElem_;if(Array.isArray(e)&&e.length>0){for(var r=function(t){var r=e[t].session,i=r.sessionId;n.off(r,"message"),n.off(r,"keystatuseschange"),r.close().then((function(){}))["catch"]((function(){G.a.warn("".concat(cc," session ").concat(i," closed failed"))}))},i=0;i<e.length;i++)r(i);e.splice(0,e.length)}Array.isArray(t)&&t.length>0&&t.splice(0,t.length)}},{key:"setDrmInfo",value:function(e){this.drmInfo=e?{keySystem:e.keySystem,licenseServerUri:e.keySystemServer,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null}:null}},{key:"onEncrypted_",value:(a=K()(Z.a.mark((function s(e){var t,n,r,i,a;return Z.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=this.mediaElem_,n=this.runtime_,r=new Uint8Array(e.initData),i=e.initDataType,G.a.log("".concat(cc," Encrypted initDataType/initData(").concat(i,"/").concat(r.length,")")),t.mediaKeys){o.next=45;break}return o.prev=5,o.next=8,this.queryMediaKeys_();case 8:a=o.sent,o.next=24;break;case 11:if(o.prev=11,o.t0=o["catch"](5),this.queryMediaKeysPromise_=null,0!==o.t0){o.next=18;break}return o.abrupt("return",n.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE)));case 18:if(1!==o.t0){o.next=22;break}return o.abrupt("return",n.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_FAILED_TO_CREATE_CDM)));case 22:return G.a.error("".concat(cc," queryMediaKeys unknown error: ").concat(Object(_e.i)(o.t0)?o.t0.message:o.t0||"unknown")),o.abrupt("return",n.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,Se.a.DRM_NO_RECOGNIZED_ERROR)));case 24:return o.prev=24,o.next=27,this.setMediaKeys_(t,a);case 27:if(t.mediaKeys){o.next=30;break}throw this.setMediaKeysPromise_=null,"video.mediaKeys can't access";case 30:o.next=36;break;case 32:return o.prev=32,o.t1=o["catch"](24),G.a.error("".concat(cc," setMediaKeys error: ").concat(Object(_e.i)(o.t1)?o.t1.message:o.t1||"unknown")),o.abrupt("return",n.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_FAILED_TO_ATTACH_TO_VIDEO)));case 36:return o.prev=36,o.next=39,this.setServerCertificate_(a);case 39:o.next=45;break;case 41:return o.prev=41,o.t2=o["catch"](36),G.a.warn("".concat(cc," setServerCertificate fail: ").concat(o.t2.message)),o.abrupt("return",n.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_INVALID_SERVER_CERTIFICATE)));case 45:return o.prev=45,o.next=48,this.createSession_(t,i,r);case 48:o.next=54;break;case 50:o.prev=50,o.t3=o["catch"](45),G.a.error("".concat(cc," createSession unknown fail: ").concat(Object(_e.i)(o.t3)?o.t3.message:o.t3||"unknown")),n.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,Se.a.DRM_NO_RECOGNIZED_ERROR));case 54:case"end":return o.stop()}}),s,this,[[5,11],[24,32],[36,41],[45,50]])}))),function(e){return a.apply(this,arguments)})},{key:"setServerCertificate_",value:(r=K()(Z.a.mark((function c(e){var t,n,r;return Z.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((t=this.drmInfo).keySystem===U.WIDEVINE&&(t.serverCertificate=ac),!t.serverCertificate||!t.serverCertificate.length){i.next=9;break}return n=!1,this.setServerCertificatePromise_||(this.setServerCertificatePromise_=e.setServerCertificate(t.serverCertificate),n=!0),i.next=7,this.setServerCertificatePromise_;case 7:r=i.sent,n&&(r?G.a.log("".concat(cc," The server certificate has been set by the key system(").concat(t.keySystem,").")):G.a.warn("".concat(cc," The server certificate has been ignored because it's not supported by the key system(").concat(t.keySystem,").")));case 9:case"end":return i.stop()}}),c,this)}))),function(e){return r.apply(this,arguments)})},{key:"queryMediaKeys_",value:function(){var e=this.drmInfo;return this.queryMediaKeysPromise_||(this.queryMediaKeysPromise_=new Promise((function(t,n){var r=[],i='audio/mp4; codecs="mp4a.40.5"',a='video/mp4; codecs="avc1.64001f"';"undefined"==typeof MediaKeySystemAccess.prototype.getConfiguration?(G.a.warn("Detected obsolete navigator.requestMediaKeySystem options style."),r=[{initDataType:"cenc",distinctiveIdentifier:"optional",persistentState:"optional",videoType:a,audioType:i}]):r=[{initDataTypes:["cenc"],distinctiveIdentifier:"optional",persistentState:"optional",videoCapabilities:[{contentType:a}],audioCapabilities:[{contentType:i}]}],navigator.requestMediaKeySystemAccess(e.keySystem,r).then((function(e){e.getConfiguration();return e.createMediaKeys()}),(function(e){G.a.error("".concat(cc," requestMediaKeySystemAccess fail: ").concat(Object(_e.i)(e)?e.message:e||"unknown")),n(0)})).then((function(e){t(e)}),(function(e){G.a.error("".concat(cc," createMediaKeys fail: ").concat(Object(_e.i)(e)?e.message:e||"unknown")),n(1)}))}))),this.queryMediaKeysPromise_}},{key:"setMediaKeys_",value:(n=K()(Z.a.mark((function u(e,t){return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.setMediaKeysPromise_||(this.setMediaKeysPromise_=e.setMediaKeys(t)),n.abrupt("return",this.setMediaKeysPromise_);case 2:case"end":return n.stop()}}),u,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"createSession_",value:(t=K()(Z.a.mark((function d(e,t,n){var r,i,a,o,s;return Z.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:r=this.runtime_,i=this.sessions,a=this.eventManager_,o=0;case 2:if(!(o<i.length)){c.next=8;break}if(!$s(n,i[o].initData)){c.next=5;break}return c.abrupt("return",G.a.log("".concat(cc," Ignoring duplicate init data.")));case 5:++o,c.next=2;break;case 8:c.prev=8,s=e.mediaKeys.createSession(),c.next=16;break;case 12:return c.prev=12,c.t0=c["catch"](8),G.a.error("".concat(cc," ").concat(c.t0.message)),c.abrupt("return",r.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_FAILED_TO_CREATE_SESSION)));case 16:return i.push({initData:n,session:s,loaded:!1,oldExpiration:Infinity}),a.on(s,"message",this.onMediaKeySessionMessage_.bind(this)).on(s,"keystatuseschange",this.onMediaKeySessionStatusChange_.bind(this)),c.next=20,s.generateRequest(t,n)["catch"]((function(t){G.a.error("".concat(cc," Session.generateRequest fail: ").concat(Object(_e.i)(t)?t.message:t||"unknown",", mediaKeys is ").concat(e?oe()(e.mediaKeys):"placeholder")),r.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_FAILED_TO_GENERATE_LICENSE_REQUEST))}));case 20:case"end":return c.stop()}}),d,this,[[8,12]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"onMediaKeySessionMessage_",value:function(e){var t=this.runtime_,n=this.drmInfo,r=this.licenseRequests,i=this.mediaElem_,a=t.conf,o=e.target,s=e.message,c=e.messageType,u=n.licenseServerUri;if(!u)return t.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,Se.a.DRM_NO_LICENSE_SERVER_GIVEN));G.a.log("".concat(cc," Sending license request for session ").concat(o.sessionId," of type ").concat(c,": ").concat(u));var d=Object(Ae.d)([u],Object(ve.a)(Object(Ae.b)(),a.drm.retryParameters));d.method="POST",d.body=s,d.callbacks=Object(ve.a)(d.callbacks,{onSuccess:function(e){return K()(Z.a.mark((function n(){var r,a,s,c;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.data,a=e.status,!((s=r)&&s.byteLength>0)){n.next=16;break}return c=new Uint8Array(s),G.a.log("".concat(cc," License got, updating session ").concat(o.sessionId)),n.prev=5,n.next=8,o.update(c);case 8:n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](5),G.a.error("".concat(cc," update() failed, ").concat(n.t0.message,", video.mediaKeys is ").concat(i?oe()(i.mediaKeys):"placeholder",", ").concat(c,",")),t.throwError(new me.a(me.a.severity.RECOVERABLE,me.a.category.DRM,Se.a.DRM_LICENSE_RESPONSE_REJECTED,n.t0.message));case 14:n.next=18;break;case 16:G.a.warn("".concat(cc," License server status: ").concat(a,", data: ").concat(s?s.byteLength:"NULL")),t.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,204===a?Se.a.DRM_SERVER_REJECT_BY_LICENSE_SDK:Se.a.DRM_NO_LICENSE_SERVER_RESPONSE));case 18:case"end":return n.stop()}}),n,null,[[5,10]])})))()},onError:function(){t.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,Se.a.DRM_LICENSE_REQUEST_ERROR))},onTimeout:function(e,n){t.throwError(new me.a(me.a.severity.CRITICAL,me.a.category.DRM,Se.a.DRM_LICENSE_REQUEST_TIMEOUT))},onAbort:function(){},onComplete:function(){}}),n.keySystem!==U.PLAYREADY&&n.keySystem!==U.PLAYREADY_CC||this.unpackPlayReadyRequest_(d);var l=Ae.e.request(we.a.LICENSE,d);r.push(l)}},{key:"unpackPlayReadyRequest_",value:function(e){var t=He(e.body,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(new DOMParser).parseFromString(t,"application/xml"),r=n.getElementsByTagName("HttpHeader"),i=0;i<r.length;++i){var a=r[i].querySelector("name").textContent,o=r[i].querySelector("value").textContent;e.headers instanceof Headers?e.headers.append(a,o):e.headers[a]=o}var s=n.querySelector("Challenge");e.body=Qs(s.textContent).buffer}else{var c="Content-Type",u="text/xml; charset=utf-8";e.headers instanceof Headers?e.headers.append(c,u):e.headers[c]=u}}},{key:"onMediaKeySessionStatusChange_",value:function(e){var t=e.target,n=t.keyStatuses;if(this.drmInfo.keySystem==U.PLAYREADY)this.onSessionStatusChangePlayready_(n,t.sessionId);else{var r,i=oc(n.entries());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a[0],s=a[1],c=Ve(Ks(new Uint8Array(o)));G.a.log("".concat(cc," SessionId=").concat(t.sessionId," keyId=").concat(c," status=").concat(s))}}catch(u){i.e(u)}finally{i.f()}}}},{key:"onSessionStatusChangePlayready_",value:function(e,t){var n=this;e.forEach((function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if(n.drmInfo.keySystem==U.PLAYREADY&&16==r.byteLength){var a=new DataView(r),o=a.getUint32(0,!0),s=a.getUint16(4,!0),c=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,c,!1)}n.drmInfo.keySystem==U.PLAYREADY&&"status-pending"==e&&(e="usable");var u=Ve(Ks(new Uint8Array(r)));G.a.log("SessionId="+t+" keyId="+u+" status="+e)}))}}]),e}(),dc=function(){function e(){var t=this;i()(this,e),this.checkFPSTimer_=new nt.a((function(){return t.checkFPSInterval_()})),this.shouldReport_=!1,this.fpsFrequency_=1,this.decodeFrameStuckCount_=0}return o()(e,[{key:"playbackQuality",get:function(){var e=this.mediaElem_,t=0,n=0,r=0;if("function"==typeof e.getVideoPlaybackQuality){var i=e.getVideoPlaybackQuality();n=i.totalVideoFrames,r=i.droppedVideoFrames,t=n}else{var a=e.webkitDecodedFrameCount,o=e.webkitDroppedFrameCount;void 0!==a&&void 0!==o&&(o=o,t=a=a)}return{totalVideoFrames:t,decodedVideoFrames:n,droppedVideoFrames:r}}},{key:"setup",value:function(e,t,n,r){this.runtime_=e,this.mediaElem_=n,this.stream_=t,this.dynamicStuckMonitorPeriod_=Object(_e.g)(r)?r:e.conf.fpsStuckMonitoringPeriod}},{key:"onMSEAttaching",value:function(){this.checkFPSTimer_.scheduleRepeated(this.fpsFrequency_)}},{key:"startReportFPS",value:function(){this.shouldReport_=!0}},{key:"stopReportFPS",value:function(){this.shouldReport_=!1}},{key:"checkAndFixStuck_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.stream_,i=document.hidden;"boolean"==typeof i&&!i&&!n.paused&&4===n.readyState&&r.mediaBuffer.len>1&&(r.levelSwitching?this.decodeFrameStuckCount_=0:this.decodeFrameStuckCount_>this.dynamicStuckMonitorPeriod_?(t.ctx.emit(at.a.FPS_STUCK),this.decodeFrameStuckCount_=0,t.ctx.recoverMedia()):0===e?this.decodeFrameStuckCount_++:this.decodeFrameStuckCount_=0)}},{key:"checkFPS_",value:function(e,t){var n=this.runtime_,r=performance.now();if(e){if(this.lastCheckFPSTime_){this.lastCheckFPSTime_;var i=t-this.lastDroppedFrames_,a=e-this.lastDecodedFrames_;this.shouldReport_&&n.ctx.emit(at.a.FPS_REPORT,{currentDropped:i,currentDecoded:a}),this.checkAndFixStuck_(a)}this.lastCheckFPSTime_=r,this.lastDroppedFrames_=t,this.lastDecodedFrames_=e}}},{key:"checkFPSInterval_",value:function(){if(this.mediaElem_){var e=this.playbackQuality,t=e.totalVideoFrames,n=e.droppedVideoFrames;this.checkFPS_(t,n)}}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.runtime_=null,this.stream_=null,this.shouldReport_=!1}},{key:"reset",value:function(){this.checkFPSTimer_&&this.checkFPSTimer_.cancel(),this.lastCheckFPSTime_=null,this.lastDroppedFrames_=null,this.lastDecodedFrames_=null}}]),e}();function lc(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;var n=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(n=.5);for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0==r||e.end(r-1)-t<=n)&&r>0)return r;return null}var fc=function(){function e(t,n,r){i()(this,e),this.stalled=null,this.stallReported=!1,this.nudgeRetry=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r,this.stalledGap_=1e3*n.conf.highBufferThreshold}return o()(e,[{key:"destroy",value:function(){this.reset(),this.mediaElem_=null}},{key:"reset",value:function(){this.stalled=null,this.nudgeRetry=0}},{key:"onMediaIdle",value:function(e){this.checkBuffer_(e)}},{key:"checkBuffer_",value:function(e){var t=this.runtime_,n=this.mediaElem_,r=this.plugin_,i=t.conf,a=n.currentTime,o=e.playHeadTime,s=this.mediaElem_;if(!t.error&&s&&r.sourceBufferManager&&!r.sourceBufferManager.bufferOperating){var c=r.sourceBufferManager,u=c.bufferInfo(a);if(c.hasVideoBuffer||c.hasAudioBuffer){var d=lc(n.buffered,a);if(null===d)u.len<i.bufferExpectLength*Math.max(1,n.playbackRate)&&r.emit(at.a.BUFFER_EXPECTING,u);else[{type:"video",buffered:c.videoBuffered},{type:"audio",buffered:c.audioBuffered}].forEach((function(e,t,n){var r=e.type,i=e.buffered,o=lc(i,a);if(Object(_e.g)(o)&&o>0){var s={start:i.start(o-1),end:i.end(o-1)},c={start:i.start(o),end:i.end(o)};G.a.warn("met ".concat(r," gap, currentTime: ").concat(a,", gapIndex: ").concat(o,", gapRange: ").concat(s.end,"-").concat(c.start,", buffered length: ").concat(i.length))}}));if(u.len>=0){var l=s.readyState,f=!(s.paused&&l>1||s.ended),h=performance.now();if(0===u.len&&n.seeking&&(this.stalled=null),l>=3&&this.resetStalledGap(),a!==o)this.stallReported&&(G.a.warn("video not stuck anymore @".concat(a,", after ").concat(Math.round((h-this.stalled)/1e3),"s")),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(f){var p=this.stalled?h-this.stalled:0;if(!this.stalled)return void(this.stalled=h);if(p>=1e3&&(this.stallReported||(this.stallReported=!0,G.a.warn("video stalling @".concat(a," due to low buffer")))),!c.updating){var _=c.bufferInfo(a);this.tryFixBufferStall_(_,p,d)}}}}else r.emit(at.a.BUFFER_EXPECTING,u)}}},{key:"tryFixBufferStall_",value:function(e,t,n){var r=this.runtime_,i=this.mediaElem_;if(r.ctx.allowJumpGapDirectly&&null!==n){var a=i.buffered.start(n)+.08;G.a.log("fix gap index ".concat(n,", jump to ").concat(a)),i.currentTime=a}else e.len>.5&&t>this.stalledGap_&&(this.stalled=null,this.tryNudgeBuffer_())}},{key:"tryNudgeBuffer_",value:function(){var e=this.runtime_,t=this.mediaElem_,n=t.currentTime,r=(this.nudgeRetry||0)+1;this.nudgeRetry=r;var i=e.conf;if(r<=i.nudgeMaxRetry){var a=n+r*i.nudgeOffset;G.a.log("adjust currentTime ".concat(n,"->").concat(a)),t.currentTime=a}else G.a.error("still stuck in high buffer @".concat(n," after ").concat(i.nudgeMaxRetry)),e.throwError(new me.a(be.a.RECOVERABLE,ke.a.RENDERER,Se.a.MEDIA_HIGH_BUFFER))}},{key:"resetStalledGap",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=1e3*this.runtime_.conf.highBufferThreshold;this.stalledGap_=e?t+1e3:t}}]),e}();function hc(e,t,n){var r=[];if(t)for(var i=0;i<t.length;i++)r.push({start:t.start(i),end:t.end(i)});return function(e,t,n){var r,i,a,o,s,c=[];for(e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end})),s=0;s<e.length;s++){var u=c.length;if(u){var d=c[u-1].end;e[s].start-d<n?e[s].end>d&&(c[u-1].end=e[s].end):c.push(e[s])}else c.push(e[s])}for(s=0,r=0,i=a=t;s<c.length;s++){var l=c[s].start,f=c[s].end;if(t+n>=l&&t<f)i=l,r=(a=f)-t;else if(t+n<l){o=l;break}}return{len:r,start:i,end:a,nextStart:o}}(r,e,n)}var pc=function(){function e(t,n,r){var a=this;i()(this,e),this.eventManager_=new Te.a,this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAddBufQueue_=[],this.audioAddBufQueue_=[],this.videoDelBufQueue_=[],this.audioDelBufQueue_=[],this.appendTimer_=new nt.a((function(){return a.checkAppend_()})),this.audioAppendStarted_=!1,this.videoAppendStarted_=!1,this._preLogTime=+new Date,this.appendWindowEnd=Number.POSITIVE_INFINITY,this.appendWindowStart=0,this.plugin_=t,this.runtime_=n,this.mediaElem_=r}return o()(e,[{key:"updating",get:function(){var e=+new Date;return this.runtime_.conf.openTest&&e-this._preLogTime>1500&&(this._preLogTime=e,G.a.log("=== check updating, testlog , \n            audioBufferUpdating = ".concat(this.audioBufferUpdating,",\n            videoBufferUpdating = ").concat(this.videoBufferUpdating,",\n            videoAppendStarted_ = ").concat(this.videoAppendStarted_,", \n            audioAppendStarted_= ").concat(this.audioAppendStarted_))),this.audioBufferUpdating||this.videoBufferUpdating||this.videoAppendStarted_||this.audioAppendStarted_}},{key:"videoBufferUpdating",get:function(){var e=this.videoSourceBuffer;return!!e&&e.updating}},{key:"audioBufferUpdating",get:function(){var e=this.audioSourceBuffer;return!!e&&e.updating}},{key:"bufferOperating",get:function(){return this.hasOperateBufferData||this.updating}},{key:"sourceBuffersCreated",get:function(){return this.sourceBuffersCreated_}},{key:"hasVideoBuffer",get:function(){return!!this.videoSourceBuffer}},{key:"hasAudioBuffer",get:function(){return!!this.audioSourceBuffer}},{key:"videoBuffered",get:function(){var e=null,t=this.videoSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioBuffered",get:function(){var e=null,t=this.audioSourceBuffer;return t&&(e=t.buffered),e}},{key:"audioAppendStart",get:function(){if(Array.isArray(this.audioAddBufQueue_)){var e=this.audioAddBufQueue_[0];if(e.segment instanceof qt.a)return e.segment.startTime}return null}},{key:"videoAppendStart",get:function(){if(Array.isArray(this.videoAddBufQueue_)){var e=this.videoAddBufQueue_[0];if(e.segment instanceof qt.a)return e.segment.startTime}return null}},{key:"hasOperateBufferData",get:function(){var e=!1;return(this.videoAddBufQueue_&&this.videoAddBufQueue_.length>0||this.audioAddBufQueue_&&this.audioAddBufQueue_.length>0||this.videoDelBufQueue_&&this.videoDelBufQueue_.length>0||this.audioDelBufQueue_&&this.audioDelBufQueue_.length>0)&&(e=!0),e}},{key:"empty",get:function(){var e=this.videoSourceBuffer,t=this.audioSourceBuffer;return(!e||e&&this.existInMSE_(e)&&0===e.buffered.length)&&(!t||t&&this.existInMSE_(t)&&0===t.buffered.length)}},{key:"reset",value:function(){[this.videoAddBufQueue_,this.videoDelBufQueue_,this.audioAddBufQueue_,this.audioDelBufQueue_].forEach((function(e){e.length>0&&e.splice(0,e.length)})),this.unbind_(),this.appendTimer_.cancel(),this.sourceBuffersCreated_=!1,this.videoSourceBuffer=null,this.audioSourceBuffer=null,this.videoAppendStarted_=this.audioAppendStarted_=!1,this.appendWindowStart=0,this.appendWindowEnd=Number.POSITIVE_INFINITY}},{key:"destroy",value:function(){this.reset(),this.mediaElem_=null,this.appendTimer_=null,this.videoAddBufQueue_=this.audioAddBufQueue_=this.videoDelBufQueue_=this.audioDelBufQueue_=null,this.onUpdate_=this.onUpdateStart_=this.onUpdateEnd_=this.onError_=this.onAbort_=null}},{key:"abort",value:function(){var e=this.plugin_,t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=this.videoBufferUpdating,i=this.audioBufferUpdating,a=e.mse;if(a&&"open"===a.readyState&&Object(_e.b)(a.sourceBuffers)&&a.sourceBuffers.length>0){if(r&&this.existInMSE_(t))try{t.abort()}catch(o){G.a.warn("video source buffer abort error, ".concat(o?o.message||o:""))}if(i&&this.existInMSE_(n))try{n.abort()}catch(o){G.a.warn("audio source buffer abort error, ".concat(o?o.message||o:""))}}}},{key:"withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,r=this.audioSourceBuffer,i=this.videoSourceBuffer,a=[],o=[];return this.existInMSE_(r)&&a.push(r),this.existInMSE_(i)&&a.push(i),a.forEach((function(r){for(var i=r.buffered,a=0;a<i.length;a++)if(e>=i.start(a)+t&&e<i.end(a)-n){o.push(!0);break}})),o.length===a.length}},{key:"bufferInfo",value:function(e,t){var n,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.runtime_.conf.maxBufferHole;switch(t){case"video":var i=this.videoSourceBuffer;n=this.existInMSE_(i)?i.buffered:null;break;case"audio":var a=this.audioSourceBuffer;n=this.existInMSE_(a)?a.buffered:null;break;default:this.mediaElem_&&(n=this.mediaElem_.buffered)}return hc(e,n,r)}},{key:"clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n="video"!==e,r="audio"!==e;[{clear:n,bufQueue:this.audioAddBufQueue_},{clear:r,bufQueue:this.videoAddBufQueue_}].forEach((function(e){var n=e.clear,r=e.bufQueue;if(n&&r.length>0)if(t){var i=r.filter((function(e){return e.segment instanceof Dt.a}));r.splice(0,r.length),i.forEach((function(e){return r.push(e)}))}else r.splice(0,r.length)}))}},{key:"onMSEDetaching",value:function(){this.abort()}},{key:"onBufferCreated",value:function(e){this.unbind_(),this.sourceBuffersCreated_=!0,this.existInMSE_(e.videoSourceBuffer)&&(this.videoSourceBuffer=e.videoSourceBuffer),this.existInMSE_(e.audioSourceBuffer)&&(this.audioSourceBuffer=e.audioSourceBuffer),this.bind_(),this.checkAppend_()}},{key:"onBufferAppending",value:function(e){for(var t=this,n=function(n){var r=e[n],i=r.type;r.bytesArray.forEach((function(e,n){(1===i?t.videoAddBufQueue_:t.audioAddBufQueue_).push({bufferSource:e,index:n,segment:r})}))},r=0;r<e.length;r++)n(r);(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&this.appending_()}},{key:"onBufferFlushing",value:function(e,t,n){var r=this.plugin_,i=this.empty,a=this.videoSourceBuffer,o=this.audioSourceBuffer;i||"closed"===r.mse.readyState?setTimeout((function(){r.emit(at.a.BUFFER_FLUSHED)}),10):(!a||n&&"video"!==n||this.videoDelBufQueue_.push({start:e,end:t}),!o||n&&"audio"!==n||this.audioDelBufQueue_.push({start:e,end:t}),this.flushing_())}},{key:"existInMSE_",value:function(e){var t=this.plugin_,n=!1;if(!t.mse||!e)return n;var r=t.mse.sourceBuffers;if(Object(_e.b)(r))for(var i=0;i<r.length;i++)if(r[i]===e){n=!0;break}return n}},{key:"intersectBuffer_",value:function(e,t,n){var r=!1;if(e)for(var i,a,o=e.buffered,s=0;s<o.length;s++)if(i=o.start(s),a=o.end(s),!(n<=i||t>=a)){r=!0;break}return r}},{key:"appending_",value:function(){var e=this,t=this.plugin_,n=this.runtime_,r=this.mediaElem_,i=this.videoSourceBuffer,a=this.audioSourceBuffer;if(!(n.error||r&&r.error))if("closed"!==t.mse.readyState&&(i||a)){t.emit(at.a.BUFFER_APPENDING);for(var o=[{contentType:"video",sb:i,adds:this.videoAddBufQueue_},{contentType:"audio",sb:a,adds:this.audioAddBufQueue_}],s=0;s<o.length;s++){var c=o[s],u=c.sb,d=!1;if(c.adds.length>0&&u&&!u.updating)if("break"===function(){var t=c.adds.shift(),i=t.bufferSource,a=t.index,o=t.segment,s=o.byteLength,l=c.contentType;"video"===l?e.videoAppendStarted_=!0:"audio"===l&&(e.audioAppendStarted_=!0);try{var f=1===o.type?"video":"audio";if(o instanceof qt.a){var h=o.startTime,p=o.duration,_=h+p,v=1===o.bytesArray.length?"".concat(f):"".concat(a+1,"/").concat(o.bytesArray.length," pieces of ").concat(f);G.a.log("append ".concat(v," buffer, start/end/duration(").concat(h.toFixed(3),"/").concat(_.toFixed(3),"/").concat(p.toFixed(3),")"))}else o instanceof Dt.a&&G.a.log("append ".concat(f," initSegment"));u.bufferedLength_=u.buffered.length,u.updateType_="+",u.appendBuffer(i)}catch(g){G.a.warn("".concat(l," sourceBuffer, append/currentTime/readyState(").concat(s,"/").concat(e.mediaElem_.currentTime,"/").concat(r.readyState,"): ").concat(g.stack||g.message)),d=!0,setTimeout((function(){22===g.code?n.throwError(new me.a(be.a.RECOVERABLE,ke.a.RENDERER,Se.a.MEDIA_QUOTA_EXCEEDED,l)):n.throwError(new me.a(be.a.CRITICAL,ke.a.RENDERER,Se.a.MEDIA_SOURCE_OPERATION_THREW,l,g))}),0)}if(d)return"break"}())break}}else this.appendTimer_.cancel(),this.appendTimer_.schedule(.1)}},{key:"flushing_",value:function(){var e=this,t=this.plugin_,n=this.audioSourceBuffer,r=this.videoSourceBuffer,i=t.mse.readyState,a=!1;return[n,r].filter((function(t){return e.existInMSE_(t)})).forEach((function(t){if("closed"===i||t.updating)"open"!==i&&G.a.warn("flushing sb.updating: ".concat(t.updating,", mediaSource state: ").concat(i));else{for(var r,o=t===n?"audio":"video",s=t===n?e.audioDelBufQueue_:e.videoDelBufQueue_;s.length&&(r=s.shift(),!e.intersectBuffer_(t,r.start,r.end));)r=null;r&&(r.end===Number.POSITIVE_INFINITY&&(r.end=t.buffered.end(t.buffered.length-1)),t.bufferedLength_=t.buffered.length,t.updateType_="-",a=!0,G.a.log("flushing ".concat(o," [").concat(r.start,",").concat(r.end,"] of ").concat(t.buffered.length," ranges, pos:").concat(e.mediaElem_.currentTime)),t.remove(r.start,r.end))}})),a}},{key:"bind_",value:function(){var e=this;[{contentType:"video",sourceBuffer:this.videoSourceBuffer},{contentType:"audio",sourceBuffer:this.audioSourceBuffer}].filter((function(t){return e.existInMSE_(t.sourceBuffer)})).forEach((function(t){var n=t.contentType,r=t.sourceBuffer;e.eventManager_.on(r,"updatestart",e.onUpdateStart_.bind(e)),e.eventManager_.on(r,"update",e.onUpdate_.bind(e)),e.eventManager_.on(r,"updateend",e.onUpdateEnd_.bind(e)),e.eventManager_.on(r,"abort",e.onAbort_.bind(e)),e.eventManager_.on(r,"error",e.onError_.bind(e,n))}))}},{key:"unbind_",value:function(){this.eventManager_.removeAll()}},{key:"onUpdateStart_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=undefined,i=e.target;t&&i===t?r="video":n&&i===n&&(r="audio"),G.a.log("".concat(r," source buffer update start"))}},{key:"onUpdate_",value:function(e){var t=this.videoSourceBuffer,n=this.audioSourceBuffer,r=(undefined,e.target);t&&r===t?("video",this.videoAppendStarted_=!1):n&&r===n&&("audio",this.audioAppendStarted_=!1)}},{key:"onUpdateEnd_",value:function(e){var t,n=this.plugin_,r=this.videoSourceBuffer,i=this.audioSourceBuffer,a=undefined,o=e.target,s=o.bufferedLength_;if(r&&o===r?t="video":i&&o===i&&(t="audio"),"+"===o.updateType_?a="append":"-"===o.updateType_&&(a="remove"),n.emit(at.a.BUFFER_UPDATED,{target:o,sourceBufferType:t,operateType:a,previousBufferedLength:s,vsb:r,asb:i}),this.videoDelBufQueue_.length>0||this.audioDelBufQueue_.length>0){if(this.flushing_())return}else"-"===o.updateType_&&(o.updateType_="",n.emit(at.a.BUFFER_FLUSHED));this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0?this.appending_():"+"===o.updateType_&&(o.updateType_="",n.emit(at.a.BUFFER_APPENDED)),G.a.log("".concat(t," source buffer update end")+"".concat(""))}},{key:"onAbort_",value:function(){this.audioAppendStarted_=this.audioAppendStarted_=!1,G.a.warn("source buffer met abort.'")}},{key:"onError_",value:function(e,t){var n=this.runtime_,r=this.appendTimer_,i=this.mediaElem_,a=t.timeStamp,o=t.target,s=t.currentTarget,c=t.srcElement,u=i.error||{},d=u.code,l=u.message,f=s||o||c;r.cancel(),this.audioAppendStarted_=this.videoAppendStarted_=!1,G.a.error("".concat(e," source buffer met error, timeStamp(").concat(a,"), mode(").concat(f.mode,"), mediaError(").concat(d,"/").concat(l,")")),n.throwError(new me.a(be.a.RECOVERABLE,ke.a.RENDERER,Se.a.MEDIA_SOURCE_OPERATION_FAILED))}},{key:"checkAppend_",value:function(){(this.videoAddBufQueue_.length>0||this.audioAddBufQueue_.length>0)&&(this.appending_(),this.appendTimer_.schedule(.1))}}]),e}();function _c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vc=function(e){d()(n,e);var t=_c(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).sourceBuffers_={},e.numberOfSourceBuffersExpected_=2,e}return o()(n,[{key:"mse",get:function(){return this.mse_}},{key:"isEndOfStream",get:function(){return"ended"===this.mse_.readyState}},{key:"setup",value:function(e,t){this.runtime_=e,this.mediaElem_=t,this.eventManager_=new Te.a,this.sourceBufferManager=new pc(this,e,t),this.gapManager=new fc(this,e,t)}},{key:"appendBuffer",value:function(e){for(var t=this.sourceBuffers_,n=!1,r=0;r<e.length;r++){var i=e[r],a=i.type;t[a]||(t[a]={created:!1,sourceBuffer:null,segment:i},n=!0)}n&&this.tryCreateSourceBuffers_(),this.sourceBufferManager.onBufferAppending(e)}},{key:"reset",value:function(){var e,t;null===(e=this.gapManager)||void 0===e||e.reset(),null===(t=this.sourceBufferManager)||void 0===t||t.reset(),this.detachMediaElement_(),this.sourceOpenEventTrulyFired_=!1,G.a.log("new MediaSource"),this.mse_=new MediaSource,this.attachMediaElement_()}},{key:"destroy",value:function(){this.detachMediaElement_(),this.sourceBufferManager&&(this.sourceBufferManager.destroy(),this.sourceBufferManager=null),this.eventManager_&&(this.eventManager_.destroy(),this.eventManager_=null),this.runtime_=null,this.mediaElem_=null,this.mse_=null,this.sourceOpenEventTrulyFired_=!1,this.sourceBuffers_={}}},{key:"endOfStream",value:function(){var e=this.mediaElem_,t=this.mse_,n="open"===t.readyState,r=e.readyState>=1;if(n&&r)return this.sourceBufferManager&&this.sourceBufferManager.updating&&this.abortSourceBuffer(),G.a.log("end of stream!"),t.endOfStream(),!0;var i="no reason";return n?r||(i="video readyState(".concat(t.readyState,") has no metadata")):i="mediaSource readyState is ".concat(t.readyState),G.a.log("end of stream, but ".concat(i)),!1}},{key:"attachMediaElement_",value:function(){this.bind_(),this.emit(at.a.MSE_ATTACHING,this.mse_)}},{key:"detachMediaElement_",value:function(){this.emit(at.a.MSE_DETACHING),this.removeSourceBuffers_(),this.unbind_(),this.emit(at.a.MSE_DETACHED)}},{key:"tryCreateSourceBuffers_",value:function(){var e=this.runtime_,t=this.mse_,n=this.sourceBuffers_,r=this.sourceOpenEventTrulyFired_,i=this.numberOfSourceBuffersExpected_,a=Object.keys(n).length;if(t&&"open"===t.readyState&&r&&i===a){var o={};for(var s in n){var c=parseInt(s,10),u=n[c],d=u.segment,l=void 0;if(!u.created)try{var f="".concat(d.container,";codecs=").concat(d.codec);G.a.log("creating sourceBuffer(".concat(f,")")),l=t.addSourceBuffer("".concat(f)),u.created=!0,u.sourceBuffer=l}catch(h){return G.a.error("mse add source error ".concat(h.stack||h.message)),e.throwError(new me.a(be.a.RECOVERABLE,ke.a.RENDERER,Se.a.MEDIA_SOURCE_OPERATION_FAILED))}1===c?o.videoSourceBuffer=l:2===c&&(o.audioSourceBuffer=l)}this.emit(at.a.BUFFER_CREATED,o),this.sourceBufferManager.onBufferCreated(o)}else G.a.log("mse readystate/sourceopen(".concat(t?t.readyState:null,"/").concat(r,"), expected/got(").concat(i,"/").concat(a,")"))}},{key:"removeSourceBuffers_",value:function(){var e=this.mse_,t=this.sourceBuffers_;if(t&&Object.keys(t).length>0){for(var n in t){var r=t[n],i=r.sourceBuffer;r.sourceBuffer=null;try{r.created&&i&&e.removeSourceBuffer(i)}catch(a){}}this.sourceBuffers_={}}}},{key:"bind_",value:function(){var e=this.mse_,t=this.eventManager_;t.on(e,"error",this._onError.bind(this)),t.on(e,"opened",this._onOpened.bind(this)),t.on(e,"closed",this._onClosed.bind(this)),t.on(e,"sourceopen",this._onSourceOpened.bind(this)),t.on(e,"sourceended",this._onSourceEnded.bind(this))}},{key:"unbind_",value:function(){var e=this.eventManager_;e&&e.removeAll()}},{key:"_onError",value:function(){}},{key:"_onOpened",value:function(){}},{key:"_onClosed",value:function(){this.mse_}},{key:"_onSourceOpened",value:function(){this.runtime_;var e=this.mse_,t=this.eventManager_,n=this.mediaElem_;e.sourceBuffers&&e.sourceBuffers.length>0?G.a.log("mse opened error, buffer length = ".concat(e.sourceBuffers.length)):(this.sourceOpenEventTrulyFired_=!0,G.a.log("media source opened"),this.emit(at.a.MSE_ATTACHED,e),URL.revokeObjectURL(n.src),t.off(e,"sourceopen"),this.tryCreateSourceBuffers_())}},{key:"_onSourceEnded",value:function(){}},{key:"abortSourceBuffer",value:function(){this.sourceBufferManager&&this.sourceBufferManager.abort()}}]),n}(De.EventEmitter),gc=n(422);function yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var mc=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},bc=function(e){d()(n,e);var t=yc(n);function n(e){var r;return i()(this,n),(r=t.call(this,Object.assign(Object.assign({},e),{pkg:gc,watch:[e.stream.mux?"mux":"loader","renderer","audio"]}))).$TAG="Media",r.playing_=!1,r.emePlugin_=new uc,r.msePlugin_=new vc,r.fpsPlugin_=new dc,r.idleTimer_=new nt.a((function(){return r.checkIdle()})),r.tryDecodeBlobUrl_=!1,r._preLogTime=+new Date,r}return o()(n,[{key:"currentTime",get:function(){return this.mediaElement?this.mediaElement.currentTime:0},set:function(e){var t=this.readyState,n=this.mediaElement;Object(_e.g)(e)&&n&&(this.playHeadTime=e,t>0&&(this.mediaElement.currentTime=e))}},{key:"duration",get:function(){return this.mediaElement?this.mediaElement.duration:NaN}},{key:"mediaElement",get:function(){return this.mediaElem_}},{key:"readyState",get:function(){return this.mediaElem_?this.mediaElem_.readyState:0}},{key:"paused",get:function(){return!this.mediaElem_||this.mediaElem_.paused}},{key:"ended",get:function(){return!this.mediaElem_||this.mediaElem_.ended}},{key:"loop",get:function(){return!!this.mediaElem_&&this.mediaElem_.loop},set:function(e){this.mediaElem_&&(this.mediaElem_.loop=e)}},{key:"playbackRate",get:function(){var e=1;return this.mediaElem_&&"number"!=typeof(e=this.mediaElem_.playbackRate)&&(e=1),e}},{key:"buffered",get:function(){return this.mediaElem_?this.mediaElem_.buffered:null}},{key:"error",get:function(){return this.mediaElem_?this.mediaElem_.error:null}},{key:"seeking",get:function(){return!!this.mediaElem_&&this.mediaElem_.seeking}},{key:"updating",get:function(){return!!this.s_&&this.s_.updating}},{key:"buffer",get:function(){var e=this.playHeadTime;return Object.assign(Object.assign({},this.bufferInfo(e)),{buffered:{video:this.bufferInfo(e,"video"),audio:this.bufferInfo(e,"audio")}})}},{key:"hasOperateBufferData",get:function(){return!!this.s_&&this.s_.hasOperateBufferData}},{key:"bufferOperating",get:function(){return!!this.s_&&this.s_.bufferOperating}},{key:"drmInfo",set:function(e){this.drmConfig_=e,this.emePlugin_.setDrmInfo(e)}},{key:"takeoverMediaControl",value:function(){G.a.log("".concat(this.LOG_TAG," takeover media control")),this.initMediaContainer_(),this.initPlugin_(),this.bind_(),this.reset()}},{key:"releasedMediaControl",value:function(){var e=this.LOG_TAG,t=this.mediaElem_,n=this.blobUrl_,r=this.idleTimer_;if(t){var i=t.src;G.a.log("".concat(e," release media control, ").concat(i,", ").concat(i===n)),r.cancel(),this.unbind_(),this.unloadPlugin_(),i===n&&(t.removeAttribute("src"),t.load()),this.blobUrl_=null,this.mediaElem_=null}}},{key:"initMediaContainer_",value:function(){var e=this.$krt.rootElement;e instanceof HTMLVideoElement?this.mediaElem_=e:e instanceof HTMLMediaElement||(this.mediaElem_=document.createElement("video"),e.appendChild(this.mediaElement))}},{key:"onStoreStateChanged",value:function(e){var t=this.$stream,n=t.mux?e.mux:e.loader,r=this.$selfArtifact!==e.renderer,i=this.depsArtefact_!==n,a=this.audioArtefact_!==e.audio;if(i&&(this.depsArtefact_=n),r&&(this.$selfArtifact=e.renderer),a&&(this.audioArtefact_=e.audio),i||a){if(i){var o=n.segments;Array.isArray(o)&&o.length>0&&o.filter((function(e){return e instanceof Dt.a})).forEach((function(e){switch(e.type){case 2:t.audioTrack.initSegment=e;break;case 1:t.videoTrack.initSegment=e}}))}this.checkIdle()}}},{key:"hasUnConsumedArtefact_",value:function(){var e=this.variantAudioMode,t=this.depsArtefact_,n=this.audioArtefact_,r=!!t&&!Object(_e.c)(t);if(e){var i=!!n&&!Object(_e.c)(n);r=r||i}return r}},{key:"tryAppendBuffer_",value:function(){if(!this.hasUnConsumedArtefact_())return!1;var e=this.$stream,t=this.variantAudioMode,n=this.depsArtefact_,r=this.audioArtefact_,i=this.$selfArtifact,a=(null==n?void 0:n.segments)||[],o=(null==r?void 0:r.segments)||[],s=[];if(t){a.filter((function(e){return 2===e.type&&e instanceof qt.a})).length>0?e.audioSegmentSynced&&o.length>0&&(s=a.filter((function(e){return 1===e.type})).concat(o)):s=a.filter((function(e){return 1===e.type}))}else s=a;if(s.length>0){for(var c=!1,u=[],d=!1,l=0;l<s.length;l++){var f=s[l];if(f){if(!c){var h=this.currentTime,p=e.loader.findPieceAt(h);if(p&&p.segment){var _=p.segment.startTime-1;_>0&&this.$withinBuffer(_)&&this.$flushBuffer(0,_)}c=!0}d||(d=f instanceof qt.a),u.push(f)}}if(u.length>0)return d&&(i&&!1===i.expectingBuffer||this.$provideArtefact({expectingBuffer:!1})),this.msePlugin_.appendBuffer(u),this.$consumeArtefact(e.mux?"mux":"loader"),t&&o.length>0&&this.$consumeArtefact("audio"),!0}return!1}},{key:"initPlugin_",value:function(){this.emePlugin_.setup(this.$krt,this.mediaElem_,this.drmConfig_),this.msePlugin_.setup(this.$krt,this.mediaElem_),this.s_=this.msePlugin_.sourceBufferManager,this.fpsPlugin_.setup(this.$krt,this.$stream,this.mediaElem_,this.$stream.manifest.dynamicStuckMonitorPeriod)}},{key:"unloadPlugin_",value:function(){this.s_=null,this.msePlugin_.destroy(),this.emePlugin_.destroy(),this.fpsPlugin_.destroy()}},{key:"onMSEAttaching_",value:function(e){var t=this.$stream,n=this.mediaElement,r=this.fpsPlugin_;t.emit(at.a.MSE_ATTACHING,{stream:t}),this.playHeadTime=0,n.load(),this.blobUrl_=URL.createObjectURL(e),G.a.log("DomString: ".concat(this.blobUrl_,", ").concat(this.tryDecodeBlobUrl_)),this.tryDecodeBlobUrl_&&/%3A\/\//g.test(this.blobUrl_)&&(this.blobUrl_=decodeURIComponent(this.blobUrl_),n.blobUrlMalformed=!0,G.a.log("DecodedDomString: ".concat(this.blobUrl_))),this.tryDecodeBlobUrl_=!1,n.src=this.blobUrl_,r.onMSEAttaching()}},{key:"onMSEAttached_",value:function(e){var t=this.$stream;e.duration=t.loader.duration,t.emit(at.a.MSE_ATTACHED,e)}},{key:"onMseBufferCreated_",value:function(){var e=this.$stream;e.emit(at.a.BUFFER_CREATED,{stream:e})}},{key:"onMseAppending_",value:function(e){var t=this.$stream;t.emit(at.a.BUFFER_APPENDING,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseUpdated_",value:function(e){var t=this.$krt,n=this.msePlugin_,r=this.$stream,i=this.mediaElem_,a=e.sourceBufferType,o=e.operateType,s=e.previousBufferedLength,c=e.vsb;if(t.conf.alwaysSeekKeyframe&&"append"===o&&"video"===a&&0===s&&c&&c.buffered.length>0){var u=c.buffered.start(0),d=c.buffered.end(0),l=i.currentTime;ic.a.EDGE&&(u+=.08);var f=l.toFixed(3),h=u.toFixed(3),p=d.toFixed(3);f!==h&&f!==p&&(G.a.log("Due to alwaysSeekKeyframe, seeking to video buffered start@".concat(h,", cur(").concat(f,")")),r.seekingMayIgnored=!0,i.currentTime=parseFloat(h))}this.isSatisfyEosCondition()?n.endOfStream():this.hasOperateBufferData||this.updating||this.checkIdle()}},{key:"onMseAppended_",value:function(e){var t=this.$stream;t.emit(at.a.BUFFER_APPENDED,Object.assign(Object.assign({},e),{stream:t}))}},{key:"onMseBufferExpect_",value:function(e){var t=this.$stream,n=this.$selfArtifact;if(!this.$error&&this.error)return G.a.log("The event is not fired by media elem"),void this.onError_();t.shouldFireError(e)?this.$throwError(null,{immediately:!0}):this.tryAppendBuffer_()||n&&!0===n.expectingBuffer||this.$provideArtefact({expectingBuffer:!0})}},{key:"onMseBufferFlushed_",value:function(){this.$stream.emit(at.a.BUFFER_FLUSHED)}},{key:"isSatisfyEosCondition",value:function(){var e=this.$stream,t=this.variantAudioMode,n=e.loader,r=e.mux,i=e.audio,a=this.msePlugin_,o=+new Date;return this.$krt.conf.openTest&&o-this._preLogTime>1500&&(this._preLogTime=o,G.a.log("=== check isSatisfyEosCondition, testlog,  mux.idle = ".concat(!r||r.idle,", \n            hasUnConsumedArtefact_ = ").concat(this.hasUnConsumedArtefact_(),",\n            hasOperateBufferData = ").concat(a.sourceBufferManager.hasOperateBufferData,",\n            updating = ").concat(a.sourceBufferManager.updating,", \n            isEndOfStream= ").concat(!a.isEndOfStream))),(t?n.eof&&i.eof:!n||n.eof)&&(!r||r.idle)&&!this.hasUnConsumedArtefact_()&&this.isSafetyToEOS_()}},{key:"isSafetyToEOS_",value:function(){var e=this.msePlugin_;return!e.sourceBufferManager.hasOperateBufferData&&!e.sourceBufferManager.updating&&!e.isEndOfStream}},{key:"play",value:function(){this.mediaElement.play()}},{key:"pause",value:function(){this.mediaElement.pause()}},{key:"recoverAt",value:function(e){var t;this.$error&&this.$error.code===Se.a.MEDIA_VIDEO_ERROR&&this.$error.message==undefined&&(this.tryDecodeBlobUrl_=!0),m()(p()(n.prototype),"recoverAt",this).call(this,e);var r=this.msePlugin_;this.$stream.seekingMayIgnored=!0,this.releasedMediaControl(),this.takeoverMediaControl(),null===(t=r.gapManager)||void 0===t||t.resetStalledGap(!0)}},{key:"reset",value:function(){var e=this.fpsPlugin_,t=this.msePlugin_,n=this.emePlugin_;this.idleTimer_.schedule(0),t.abortSourceBuffer(),e.reset(),n.reset(),t.reset(),this.playing_=!1}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this.drmConfig_=null,this.releasedMediaControl()}},{key:"checkIdle",value:function(){var e,t=this.$krt,n=this.idleTimer_,r=this.msePlugin_;n.running&&(t.error||r&&(null===(e=r.gapManager)||void 0===e||e.onMediaIdle({playHeadTime:this.playHeadTime})),n.schedule(.1))}},{key:"bind_",value:function(){var e=this.$eventManager,t=this.mediaElem_,n=this.msePlugin_;e.on(n,at.a.MSE_ATTACHING,this.onMSEAttaching_.bind(this)).on(n,at.a.MSE_ATTACHED,this.onMSEAttached_.bind(this)).on(n,at.a.BUFFER_CREATED,this.onMseBufferCreated_.bind(this)).on(n,at.a.BUFFER_APPENDING,this.onMseAppending_.bind(this)).on(n,at.a.BUFFER_UPDATED,this.onMseUpdated_.bind(this)).on(n,at.a.BUFFER_APPENDED,this.onMseAppended_.bind(this)).on(n,at.a.BUFFER_EXPECTING,this.onMseBufferExpect_.bind(this)).on(n,at.a.BUFFER_FLUSHED,this.onMseBufferFlushed_.bind(this)),e.on(t,"error",this.onError_.bind(this)).on(t,"encrypted",this.onEncrypted_.bind(this)).on(t,"canplay",this.onCanplay_.bind(this)).on(t,"loadstart",this.onLoadstart_.bind(this)).on(t,"loadedmetadata",this.onLoadedMetadata_.bind(this)).on(t,"playing",this.onPlaying_.bind(this)).on(t,"waiting",this.onWaiting_.bind(this)).on(t,"pause",this.onPause_.bind(this)).on(t,"ended",this.onEnded_.bind(this)).on(t,"timeupdate",this.onTimeUpdate_.bind(this)).on(t,"seeking",this.onSeeking_.bind(this)).on(t,"seeked",this.onSeeked_.bind(this))}},{key:"unbind_",value:function(){this.$eventManager.removeAll()}},{key:"onError_",value:function(){var e,t=null===(e=this.mediaElem_)||void 0===e?void 0:e.error;if(t){var n=t.code,r=t.msExtendedCode,i=t.message;switch(n){case 1:break;case 2:case 3:case 4:r&&(r<0&&(r+=Math.pow(2,32)),r=r.toString(16)),G.a.error("".concat(this.LOG_TAG," error, code(").concat(n,"), message(").concat(i,"), extended(").concat(r,"), readyState(").concat(this.readyState,")"));var a=Se.a.MEDIA_VIDEO_ERROR;/PIPELINE_ERROR_DECODE/.test(i)?a=/video decode error/.test(i)?Se.a.MEDIA_VIDEO_DECODE_ERROR:/VDA Error/.test(i)?Se.a.MEDIA_VDA_ERROR:Se.a.MEDIA_PIPELINE_ERROR_DECODE:/AUDIO_RENDERER/.test(i)?a=Se.a.MEDIA_AUDIO_RENDERER_ERROR:/URL safety check/.test(i)&&(a=Se.a.MEDIA_URL_SAFE_REJECTED);var o=new me.a(be.a.RECOVERABLE,ke.a.RENDERER,a,n,i,r);o.message=i,this.$throwError(o,{immediately:!0})}}}},{key:"onTimeUpdate_",value:function(){var e=this.currentTime,t=this.readyState;if(!(this.paused||t<=1||this.playHeadTime===e)){var n=this.mediaElem_,r=this.seeking,i=this.duration,a=this.appendWindowEnd;if(this.playHeadTime=e,e>0&&e>=a&&!r){var o=this;n.addEventListener("pause",(function e(){n.removeEventListener("pause",e,!1),o.noticeStreamStop_("timer")}),!1),this.pause()}else if(t>=3){var s=new Event("playing");s.isSimulating_=!0,this.onPlaying_(s)}e+.5>i&&this.stateChange_("willended"),r||this.stateChange_("timeupdate")}}},{key:"onLoadstart_",value:function(){this.stateChange_("loadstart")}},{key:"onLoadedMetadata_",value:function(){this.stateChange_("loadedmetadata")}},{key:"onCanplay_",value:function(){this.stateChange_("canplay")}},{key:"onSeeking_",value:function(){var e,t=this.$krt,n=this.msePlugin_,r=this.currentTime,i=this.duration,a=this.buffer;if(this.playing_=!1,this.playHeadTime=r,G.a.log("seeking(".concat(r,"), duration(").concat(i,")")),null===(e=n.gapManager)||void 0===e||e.resetStalledGap(!0),ic.a.SAFARI){if(r<t.conf.safariMinStartTime)return void(this.currentTime=t.conf.safariMinStartTime)}else if(r<1&&a.len>0){var o=a.start;if(o<1&&r<o)return void(this.currentTime=o)}i>1&&r>i-1?this.currentTime=i-1:this.stateChange_("seeking")}},{key:"onSeeked_",value:function(){this.stateChange_("seeked")}},{key:"onPause_",value:function(){this.playing_=!1,this.stateChange_("pause")}},{key:"onEnded_",value:function(){this.stateChange_("beforeended"),this.stateChange_("ended"),this.stateChange_("afterended")}},{key:"onPlaying_",value:function(e){!this.playing_&&(!e.isSimulating_&&this.readyState>1||e.isSimulating_)&&(this.playing_=!0,this.stateChange_("playing"))}},{key:"onWaiting_",value:function(){this.playing_=!1,this.stateChange_("waiting")}},{key:"onEncrypted_",value:function(e){this.$stream.emit(at.a.STREAM_ENCRYPTED,e)}},{key:"noticeStreamStop_",value:function(e){G.a.log("stream stop, by the ".concat(e)),this.onEnded_()}},{key:"stateChange_",value:function(e){var t=this.$stream;t.emit(at.a.STATE_CHANGE,{stream:t,state:e})}},{key:"$withinBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return this.s_.withinBuffer(e,t,n)}},{key:"$flushBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:undefined;this.s_&&this.s_.onBufferFlushing(e,t,n)}},{key:"bufferInfo",value:function(e,t){return this.s_?this.s_.bufferInfo(e,t,this.$krt.conf.maxBufferHole):{len:0,start:0,end:0}}},{key:"$drainBuffer",value:function(e){m()(p()(n.prototype),"$drainBuffer",this).call(this,e),this.depsArtefact_=null,this.audioArtefact_=null}},{key:"$clearOperateBuffers",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.s_&&this.s_.clearOperateBuffers(e,t)}},{key:"startReportFPS",value:function(){this.fpsPlugin_.startReportFPS()}},{key:"stopReportFPS",value:function(){this.fpsPlugin_.stopReportFPS()}}]),n}(rc);mc([se.c],bc.prototype,"currentTime",null),mc([se.c],bc.prototype,"duration",null),mc([se.c],bc.prototype,"mediaElement",null),mc([se.c],bc.prototype,"play",null),mc([se.c],bc.prototype,"pause",null),mc([se.c],bc.prototype,"startReportFPS",null),mc([se.c],bc.prototype,"stopReportFPS",null);var kc=n(378),xc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Sc={INIT:"@@redux/INIT"+xc(),REPLACE:"@@redux/REPLACE"+xc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xc()}};function Tc(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Pc(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=undefined),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Pc)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,a=t,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function d(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function l(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!Tc(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Sc.REPLACE})}function p(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[kc.a]=function(){return this},e}return f({type:Sc.INIT}),(r={dispatch:f,subscribe:l,getState:d,replaceReducer:h})[kc.a]=p,r}function Ic(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function wc(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(undefined,{type:Sc.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(undefined,{type:Sc.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Sc.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var c=o[s],u=n[c],d=e[c],l=u(d,t);if(void 0===l){var f=Ic(c,t);throw new Error(f)}i[c]=l,r=r||l!==d}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ec(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(n,!0).forEach((function(t){Ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Oc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return Dc({},n,{dispatch:r=qc.apply(void 0,a)(n.dispatch)})}}}function Rc(e){var t=[],n=t;function r(){n===t&&(n=t.slice())}function i(e){var t=!0;return r(),n.push(e),function(){if(t){t=!1,r();var i=n.indexOf(e);n.splice(i,1)}}}function a(){for(var e=t=n,r=0;r<e.length;r++)e[r]()}function o(){e(a)}return function(e){return function(){var t=e.apply(void 0,arguments),n=t.subscribe;function r(){var e=t.dispatch.apply(t,arguments);return o(),e}return Object.assign(Object.assign({},t),{dispatch:r,subscribe:i,subscribeImmediate:n})}}}var Lc=n(341);function Mc(e){return function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=arguments.length>1?arguments[1]:undefined,r=n.type,i=n.payload,a=n.meta;if(r===e&&a&&a.stream_uid){if(e===ue.a.DEPOSIT_ERROR&&!(i instanceof me.a))throw"Error state should be use type KernelError";if(i==undefined){var o=Object.assign({},t);return delete o[a.stream_uid],o}return Object.assign(Object.assign({},t),g()({},a.stream_uid,i))}return t}}var Cc={error:Mc(ue.a.DEPOSIT_ERROR),rawness:Mc(ue.a.DEPOSIT_RAWNESS),manifest:Mc(ue.a.DEPOSIT_MANIFEST),loader:Mc(ue.a.DEPOSIT_LOADER),mux:Mc(ue.a.DEPOSIT_MUX),renderer:Mc(ue.a.DEPOSIT_RENDERER)},Nc={};function Bc(){return wc(Object.assign(Object.assign({},Cc),Nc))}function Fc(){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=[],n=[Oc.apply(void 0,t),Rc(Lc.b)],r=qc;return Pc(Bc(),e,r.apply(void 0,n))}({})}function Uc(e,t,n){return function(e,t,n){var r={type:e},i=arguments.length;return t instanceof Error&&(r.error=!0),2===i?r.payload=t:3===i&&(r.payload=t,r.meta=n),r}(e,t,n)}var jc=n(410),Vc=function Pv(e,t){i()(this,Pv),this.start=e,this.end=t},Wc=function(){function e(){i()(this,e),this.ranges_=[]}return o()(e,[{key:"findRange",value:function(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;t<this.ranges_.length&&e>this.ranges_[t].end;)++t;return{index:t,contained:t<this.ranges_.length&&e>=this.ranges_[t].start}}},{key:"length",get:function(){return this.ranges_.length}},{key:"start",value:function(e){return this.ranges_[e].start}},{key:"end",value:function(e){return this.ranges_[e].end}},{key:"add",value:function(e,t){var n=this.findRange(e),r=this.findRange(t,n.index);n.contained&&(e=Math.min(e,this.ranges_[n.index].start)),r.contained&&(t=Math.max(t,this.ranges_[r.index].end));var i=r.index-n.index+(r.contained?1:0);this.ranges_.splice(n.index,i,new Vc(e,t))}},{key:"contain",value:function(e){return!!this.findRange(e).contained}},{key:"empty",value:function(){this.ranges_.splice(0,this.ranges_.length)}},{key:"toArray",value:function(){var e=[],t=this.ranges_;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n].start,i=t[n].end;e.push([r,i])}return e}},{key:"clone",value:function(){var t=new e;return this.toArray().forEach((function(e){t.add(e[0],e[1])})),t}}]),e}(),Hc=n(396),zc=function(){function e(){i()(this,e),this.needSendAudioInitSegment_=!1,this.needSendVideoInitSegment_=!1,this.hasAudio=!0,this.hasVideo=!0,this.audioInitSegment=null,this.videoInitSegment=null,this.audioMediaSegments=[],this.videoMediaSegments=[]}return o()(e,[{key:"consumable",get:function(){var e=this.needSendInitSegment,t=this.hasVideo,n=this.hasAudio,r=this.needSendVideoInitSegment,i=this.needSendAudioInitSegment,a=this.videoInitSegment,o=this.audioInitSegment,s=this.videoMediaSegments,c=this.audioMediaSegments,u=!1;return e?i&&r?o&&a&&(u=!0):i?o&&(u=!0):r&&a&&(u=!0):(t&&s.length>0||n&&c.length>0)&&(u=!0),u}},{key:"needSendInitSegment",get:function(){return this.needSendAudioInitSegment||this.needSendVideoInitSegment},set:function(e){this.needSendVideoInitSegment=e,this.needSendAudioInitSegment=e}},{key:"needSendAudioInitSegment",get:function(){return this.hasAudio&&this.needSendAudioInitSegment_},set:function(e){this.hasAudio&&(this.needSendAudioInitSegment_=e)}},{key:"needSendVideoInitSegment",get:function(){return this.hasVideo&&this.needSendVideoInitSegment_},set:function(e){this.hasVideo&&(this.needSendVideoInitSegment_=e)}},{key:"consume",value:function(){var e=this.needSendInitSegment,t=this.needSendAudioInitSegment,n=this.needSendVideoInitSegment,r=this.videoInitSegment,i=this.audioInitSegment,a=this.audioMediaSegments,o=this.videoMediaSegments;if(e){if(t&&n){if(i&&r)return this.needSendAudioInitSegment=!1,this.needSendVideoInitSegment=!1,{segments:[i,r]}}else if(t){if(i)return this.needSendAudioInitSegment=!1,{segments:[i]}}else if(n&&r)return this.needSendVideoInitSegment=!1,{segments:[r]}}else{var s=[];if([a,o].forEach((function(e){e.length>0&&s.push(e.shift())})),s.length>0)return{segments:s}}return null}}]),e}(),Yc=[];function Gc(e){return Yc.indexOf(e)}function Qc(e){return Gc(e)>-1}function Kc(){var e=xe.a.create();return Qc(e)?Kc():function(e){return Qc(e)||Yc.push(e),e}(e)}var $c=function(e,t){return{runtime:e,stream:t,store:e.store,uuid:t.uuid,ipc:t.ipc,hoc:!1}};function Zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Xc=function(e){d()(n,e);var t=Zc(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).trackId=null,e._initSegment=null,e}return o()(n,[{key:"initSegment",get:function(){return this._initSegment},set:function(e){e&&(this._initSegment=e,this.emit("IU",e))}}]),n}(De.EventEmitter);function Jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var eu,tu=function(e){d()(n,e);var t=Jc(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).levelSwitching_=!1,e.silenced_=!1,e.compLiterals=[],e.mediaRanges=new Wc,e.playRanges=new Wc,e.ipc=new De.EventEmitter,e.uuid=Kc(),e.audio=null,e.audioSegmentSynced=!0,e.seekingMayIgnored=!1,e.seekedToStartPos=!1,e.hasNoticeEOD=!1,e.videoTrack=new Xc,e.audioTrack=new Xc,e.restrictor=new zc,e}return o()(n,[{key:"LOG_TAG",get:function(){return"[".concat(this.TAG).concat(this.silenced?"(silence)":"","]")}},{key:"silenced",get:function(){return this.silenced_},set:function(e){this.silenced_=e,this.packList.forEach((function(t){t.$silenced=e}))}},{key:"mediaBuffer",get:function(){var e=this.renderer;return e?Object.assign(Object.assign({},e.bufferInfo(e.playHeadTime)),{buffered:{video:e.bufferInfo(e.playHeadTime,"video"),audio:e.bufferInfo(e.playHeadTime,"audio")}}):{len:0,start:0,end:0}}},{key:"dataBuffer",get:function(){var e=this.loader;return e?e.buffer:new he}},{key:"seekable",get:function(){var e=!1;return this.manifest&&(e=this.manifest.seekable),e}},{key:"duration",get:function(){return this.renderer?this.renderer.duration:0}},{key:"currentTime",get:function(){return this.renderer?this.renderer.currentTime:0},set:function(e){this.renderer&&(this.renderer.currentTime=e)}},{key:"error",get:function(){for(var e,t=null,n=0;n<this.packList.length;n++)if((e=this.packList[n]).$error instanceof me.a){t=e.$error;break}return t}},{key:"levelSwitching",get:function(){return this.levelSwitching_},set:function(e){this.levelSwitching_=e}},{key:"packList",get:function(){return[this.manifest,this.loader,this.mux,this.renderer,this.audio].filter((function(e){return!!e}))}},{key:"onTheFly",set:function(e){var t=this.renderer,n=this.restrictor;e?t&&t.takeoverMediaControl():(this.clearBuffers({rendererMayKeepInit:!1}),this.restoreStatus(),t&&t.releasedMediaControl(),n.needSendInitSegment=!0)}},{key:"destroy",value:function(){var e=this.mediaRanges,t=this.playRanges,n=this.packList;e.empty(),t.empty(),this.clearBuffers(),n.forEach((function(e){e.destroy()}))}},{key:"shouldFireError",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.renderer,n=!1;return this.error&&(e&&e.len<=1||t.buffer.len<=1)&&(n=!0),n}},{key:"setup",value:function(e){}},{key:"registerAudioPack",value:function(e,t){this.audio=new e($c(t,this))}},{key:"recoverImmediately",value:function(e){this.clearBuffers(),this.restoreStatus(),this.packList.forEach((function(t){return t.recoverAt(e)}))}},{key:"range",value:function(e,t){var n=this.loader,r=this.renderer;t&&(Array.isArray(t)?this._generateMediaRanges(t):t instanceof Wc&&(this.mediaRanges=t)),this._generatePlayRanges(e);var i=this.playRanges,a=this.mediaRanges;(null==n?void 0:n.applyRanges)&&n.applyRanges(i),r&&(r.appendWindowStart=i.start(0),r.appendWindowEnd=i.end(i.length-1)),i instanceof Wc&&i.length>0&&a instanceof Wc&&a.length>0&&G.a.log("".concat(this.LOG_TAG," Range made, ").concat(i.length," play ").concat(i.start(0),"-").concat(i.end(i.length-1),", ").concat(a.length," media ").concat(a.start(0),"-").concat(a.end(a.length-1)))}},{key:"_generateMediaRanges",value:function(e){if(this.mediaRanges.empty(),Array.isArray(e)&&e.length>0)for(var t,n=0;t=e[n];n++)this.mediaRanges.add(t[0],t[1])}},{key:"_generatePlayRanges",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=this.mediaRanges,n=this.playRanges,r=t.start(0),i=t.end(t.length-1);if(n.empty(),null===e||e<i){"number"==typeof e&&e<r&&n.add(e,r);for(var a=0;a<t.length;a++){var o=t.start(a),s=t.end(a);"number"==typeof e&&e>=s?e<t.start(a+1)&&n.add(e,t.start(a+1)):"number"==typeof e&&o<=e&&e<s?n.add(e,s):n.add(o,s)}}else n.add(e,Number.POSITIVE_INFINITY)}},{key:"clearBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.rendererOnlyData,n=e.rendererMayKeepInit,r=e.rendererFlushMedia,i=e.muxKeepMeta,a=this.packList,o=this.renderer,s=!!n,c="boolean"!=typeof r||r,u=!!i;G.a.log("".concat(this.LOG_TAG," clear buffer of all packs, and ").concat(s?"will":"not"," keepInit")),a.forEach((function(e){return e.$unSubscribeStore()})),a.forEach((function(e){t&&e===o?e.$clearOperateBuffers(null,s):e.$drainBuffer({delInStream:!0,keepInit:s,flushMedia:c,keepMuxMeta:u})})),a.forEach((function(e){e.$initStateSlice(!0)})),a.forEach((function(e){return e.$subscribeStore()}))}},{key:"restoreStatus",value:function(){this.seekingMayIgnored=!1,this.seekedToStartPos=!1,this.lastSeekTiming=undefined}}]),n}(Hc.a);function nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}!function(e){e[e.Roll=0]="Roll",e[e.Episode=1]="Episode",e[e.MAT=2]="MAT"}(eu||(eu={}));var ru=function(e){d()(n,e);var t=nu(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).TAG="Roll",e.streamType=eu.Roll,e}return o()(n,[{key:"isAd",get:function(){return"ad"===this.rollCategory||/^ad::/gi.test(this.rollCategory)}}]),n}(tu);function iu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var au,ou,su=function(e){d()(n,e);var t=iu(n);function n(){var e;return i()(this,n),(e=t.apply(this,arguments)).TAG="Episode",e.streamType=eu.Episode,e}return o()(n,[{key:"seekable",get:function(){return!0}}]),n}(tu);!function(e){e[e.PRE_ROLL=0]="PRE_ROLL",e[e.MID_ROLL=1]="MID_ROLL",e[e.POST_ROLL=2]="POST_ROLL",e[e.INDETERMINACY_ROLL=3]="INDETERMINACY_ROLL"}(au||(au={})),function(e){e.BEGIN="B",e.END="E",e.PLAYING_CHANGED="PC",e.PLAYING_PROGRESS="PP"}(ou||(ou={}));n(395);function cu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var lu=function(e){d()(n,e);var t=du(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,{ctx:e.ctx})).playingStream_=null,a.set_=new Set,a.secClockTimer_=new nt.a((function(){return a.secCronJob_()})),a.runtime=e,a.isPreload=r,r||a.$eventManager.on(c()(a),ou.BEGIN,(function(){a.secClockTimer_.scheduleRepeated(1)})),a}return o()(n,[{key:"playingStream",get:function(){return this.playingStream_},set:function(e){var t=this.runtime;if(!this.isPreload&&this.has(e)){t.error&&(t.error=null);var n=this.playingStream_;n&&(n.onTheFly=!1,n.packList.forEach((function(e){e.unbindApis()}))),G.a.log("timeline change playing stream to ".concat(e.TAG).concat(e instanceof ru?"("+e.rollCategory+")":"")),this.playingStream_=e,e.onTheFly=!0,e.packList.forEach((function(e){e.bindApis()})),this.isRolling||(this.runtime.conf.openTest=!1),this.emit(ou.PLAYING_CHANGED,e)}}},{key:"streams",get:function(){return this.set_.values()}},{key:"isRolling",get:function(){var e=this.playingStream;return!!e&&e instanceof ru}},{key:"rollingType",get:function(){return this.isRolling?this.playingStream.rollType:null}},{key:"episodeStream",get:function(){var e,t=null,n=cu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof su){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"rollStream",get:function(){var e,t=null,n=cu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof ru){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"size",get:function(){return this.set_.size}},{key:"secCronJob_",value:function(){}},{key:"startSchedules",value:function(){this.destroySchedules()}},{key:"destroySchedules",value:function(){}},{key:"destroy",value:function(){m()(p()(n.prototype),"destroy",this).call(this),this.destroySchedules(),this.clear(),this.secClockTimer_.cancel(),this.playingStream_=null}},{key:"reset",value:function(){G.a.log("timeline reset"),this.playingStream_=null}},{key:"clear",value:function(){this.playingStream_=null,this.set_.clear()}},{key:"endOfPlayingStream",value:function(){this.tryToSwitchStream(!0)}},{key:"tryToSwitchStream",value:function(){arguments.length>0&&undefined,this.playingStream}},{key:"findAdaptedStream",value:function(e){return null}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"configureRoll",value:function(e,t){}}]),n}(n(594).a),fu=n(403);var hu,pu={cmd5x:(hu="cmd5x",function(){G.a.warn("used un impl external tool: ".concat(hu))})},_u=function(){function e(t,n){i()(this,e),this.stream=null,this.currentTime_=null,this.runtime=t,this.eventManger_=new Te.a,this.timeline_=n}return o()(e,[{key:"syncMediaTiming",value:function(e){var t=this.stream;if(t){var n=t.loader,r=t.renderer.currentTime,i=Object(_e.g)(e)&&e>=0?e:Object(_e.g)(r)?r:0,a=n.findPieceAt(i),o=!1;if(this.currentFrag_){var s=this.currentFrag_.startTime,c=this.currentFrag_.endTime;if(i>=s&&i<c)i+.5>=c&&this.stateChange_("willended");else if(i>=c){n.fragments.length>0&&this.currentFrag_!==n.fragments[n.fragments.length-1]&&(this.stateChange_("ended"),o=!0)}}this.currentTime_=i,this.currentFrag_=a?a.fragment:this.currentFrag_,this.currentFrag_.loadstart||(this.currentFrag_.loadstart=!0,this.stateChange_("loadstart")),this.checkCurrentGasStatus()&&o&&t.renderer&&t.renderer.readyState>=2&&this.stateChange_("playing")}}},{key:"connectStream",value:function(e){var t=this;this.stream=e;var n=e.loader;n.fragments.length>0?this.syncMediaTiming():this.eventManger_.once(n,"FLS",(function(e){0===e.idx&&t.syncMediaTiming()}))}},{key:"disconnectStream",value:function(){this.stream=null,this.currentTime_=null,this.currentFrag_=null,this.eventManger_.removeAll()}},{key:"getCurrentGas",value:function(){var e=this.stream,t=this.currentTime_;if(e){var n=e.loader,r=e.renderer,i=null!==t?t:r.currentTime;i>n.duration&&(i=n.duration);var a=n.fragments,o=n.findPieceAt(i);if(o&&o.fragment){var s=o.fragment;return{gas:s.gas||null,fragIdx:a.indexOf(s),fragment:s}}}return null}},{key:"abortCurrentGas",value:function(e){var t=this.stream,n=t.renderer,r=t.loader,i=e.fragIdx,a=(e.fragment,r.fragments[i+1]);if(a){var o=a.startTime;n.readyState>0?n.currentTime=o:(this.syncMediaTiming(o),this.timeline_.seekStream(o,this.stream))}}},{key:"checkCurrentGasStatus",value:function(){var e=this.runtime,t=this.stream,n=!0,r=this.currentFrag_;return!r||3!=r.status&&4!=r.status||(n=!1,e.throwError(t.error)),n}},{key:"stateChange_",value:function(e){this.runtime.ctx.emit(at.a.STATE_CHANGE,{state:e})}}]),e}(),vu=n(343);function gu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var bu=undefined&&undefined.__decorate||function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oe()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},ku=function(e){d()(s,e);var t,r,a=mu(s);function s(e,t){var n;i()(this,s),(n=a.call(this,e,t)).playingStreamBufferEnd_=null,n.briefs={};var r,o,c,u=e.params.dynamic.externals;return t||(u&&Object(ve.a)(pu,u),r=e.store,o="audio",c=Mc(ue.a.DEPOSIT_AUDIO),Nc[o]=c,r.replaceReducer(Bc())),Object(jc.b)(vu.a),Ae.e.setRuntime(e),n}return o()(s,[{key:"playingStream",get:function(){return m()(p()(s.prototype),"playingStream",this)},set:function(e){e instanceof ru&&e.isAd?(this.adManager||(this.adManager=new _u(this.runtime,this)),this.adManager.connectStream(e)):this.adManager&&this.adManager.disconnectStream(),this.playingStreamBufferEnd_=null,ie()(p()(s.prototype),"playingStream",e,this,!0)}},{key:"eot",get:function(){var e=!0,t=this.playingStream;return t&&(e=t.renderer.loop||t===this.episodeStream&&!this.hasAvailablePatch||t==this.patchStream),e}},{key:"isAd",get:function(){var e=!1;return this.isRolling&&(e=this.playingStream.isAd),e}},{key:"isQBBPatching",get:function(){var e=this.playingStream,t=!!e;return t&&(t=e===this.patchStream),t}},{key:"patchStream",get:function(){var e,t=null,n=gu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof ru&&"patch"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"hasAvailablePatch",get:function(){var e=this.patchStream;return e&&!e.error}},{key:"matStream",get:function(){var e,t=null,n=gu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof ru&&"mat"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"episodeStream",get:function(){var e,t=null,n=gu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof su){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"bufferInfo",get:function(){return{media:this.mediaBufferInfo,data:this.dataBufferInfo}}},{key:"mediaBufferInfo",get:function(){var e=this.playingStream;return e?e.mediaBuffer:{len:0,start:0,end:0}}},{key:"dataBufferInfo",get:function(){var e=this.playingStream;return e?e.dataBuffer:new he}},{key:"normalAdRollStream",get:function(){var e,t=null,n=gu(this.streams);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof ru&&"ad"===r.rollCategory){t=r;break}}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"destroy",value:function(){this.reset(),Ae.e.unsetRuntime(),this.adManager=null}},{key:"reset",value:function(){m()(p()(s.prototype),"reset",this).call(this);var e,t=this.adManager,n=gu(this.streams);try{for(n.s();!(e=n.n()).done;){e.value.destroy()}}catch(r){n.e(r)}finally{n.f()}this.clear(),t&&t.disconnectStream(),this.briefs={}}},{key:"onStateChange_",value:function(e){var t=e.state,n=e.stream,r=n.renderer,i=(n.loader,n.mux,n.playRanges,this.runtime),a=this.adManager,o=i.recoverProcedure,s=!0;switch(t){case"loadstart":s=!1;break;case"loadedmetadata":n.seekedToStartPos||(n.seekedToStartPos=!0,this.seekToStartPos_(n));break;case"afterended":r.loop||this.endOfPlayingStream();break;case"seeking":var c=r.currentTime;o.progressing&&(o.status=o.levels.MEDIA_SEEKING),n instanceof ru&&n.isAd&&a.syncMediaTiming(),n.lastSeekTiming=performance.now(),n.seekingMayIgnored||r.$withinBuffer(c)||(n.clearBuffers({rendererMayKeepInit:!0,muxKeepMeta:!0}),this.seekStream(c,n)),n.seekingMayIgnored=!1;break;case"seeked":n.lastSeekTiming&&G.a.log("seeking->seeked take ".concat((performance.now()-n.lastSeekTiming).toFixed(3),"ms"));break;case"timeupdate":n instanceof ru?n.isAd&&a.syncMediaTiming():this.tryToSwitchStream(!1);break;case"waiting":var u=r.bufferInfo(n.currentTime).len;(r.readyState>=3&&!ic.a.EDGE||!r.seeking&&r.updating||u>.1||u<=.1&&n.error||n.loader.buffer.len>0)&&(s=!1);break;case"playing":o.progressing&&(o.status=o.levels.STOP)}s&&n===this.playingStream&&this.runtime.ctx.emit(at.a.STATE_CHANGE,e)}},{key:"onError_",value:function(e){var t=this.runtime,n=this.playingStream,r=this.adManager,i=t.recoverProcedure,a=e.stream,o=e.error;i.progressing&&(i.status=i.levels.STOP),a&&a===n&&(a instanceof ru&&a.isAd?o.category===ke.a.RENDERER?(G.a.error("ad met renderer error"),t.throwError(o)):r.checkCurrentGasStatus()||this.abortCurrentADGas():t.throwError(o))}},{key:"onMediaAttaching_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(at.a.MSE_ATTACHING)}},{key:"onMediaBufferCreated_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(at.a.BUFFER_CREATED)}},{key:"onMediaBufferAppending_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(at.a.BUFFER_APPENDING)}},{key:"onMediaBufferAppended_",value:function(e){var t=this.runtime,n=this.playingStream,r=e.stream;r&&r===n&&t.ctx.emit(at.a.BUFFER_APPENDED)}},{key:"seekStream",value:function(e,t){arguments.length>2&&undefined;var n=this.runtime,r=n.recoverProcedure,i=t.loader,a=t.audio;r.progressing&&(r.status=r.levels.DATA_SEEKING),t.range(e),i.seek(e);var o=a;o&&o.seek(e)}},{key:"seekToStartPos_",value:function(e){var t=this.runtime,n=e.renderer,r=e.playRanges,i=t.recoverProcedure;if(r.length>0)if(i.progressing){i.status=i.levels.MEDIA_METADATA;var a=i.targetTime;a>=0&&(G.a.log("media recover, seek media by recover point ".concat(a)),n.currentTime=a)}else{var o=r.start(0);if(ic.a.SAFARI){var s=t.conf.safariMinStartTime;o<s&&(o=s)}o>0&&(e.seekingMayIgnored=!0,G.a.log("seek to ".concat(o," by metadata~")),n.currentTime=o)}else G.a.warn("playRanges is empty, pls fix it.")}},{key:"secCronJob_",value:function(){var e=this.runtime,t=this.playingStream;if(t){var n=this.bufferInfo.data.end;n!==this.playingStreamBufferEnd_&&(this.playingStreamBufferEnd_=n,e.ctx.emit(at.a.STATE_CHANGE,{state:"progress"})),!t.hasNoticeEOD&&t.loader.eod&&(t instanceof su?(t.hasNoticeEOD=!0,e.ctx.emit(at.a.STATE_CHANGE,{state:"EOP"})):t instanceof ru&&(t.hasNoticeEOD=!0,e.ctx.emit(at.a.STATE_CHANGE,{state:"EOR"})))}}},{key:"configureRoll",value:function(e,t){var n=e.offset,r=e.done;t.rollType=e.rollType,t.rollCategory=e.category,t.done=!!r,r&&"ad::brief"!==t.rollCategory||(t.offset=n)}},{key:"add",value:function(e){var t=!1,n=!1;if(e instanceof ru){if(t=!0,e.isAd){switch(e.rollCategory){case"ad":if(this.normalAdRollStream)return G.a.error("Timeline should has only one normal ad roll stream"),this;if(e.rollType===au.PRE_ROLL&&this.episodeStream)return G.a.error("Timeline now has a episode stream, but add a pre-ad"),this;break;case"ad::brief":var r=e.offset,i=this.briefs[r]=this.briefs[r]||[],a=i.length;t=!0,a>0&&(i[a-1].next=e),i.push(e)}e.loader.adjustTimestampMode=!0,e.loader.skipErrorMode=!0}else if(this.patchStream)return G.a.error("Timeline should has only one patch stream"),this}else if(e instanceof su&&(n=!0,this.episodeStream))return G.a.error("Timeline should has only one episode stream"),this;return this.$eventManager.on(e,at.a.ERROR,this.onError_.bind(this)).on(e,at.a.STATE_CHANGE,this.onStateChange_.bind(this)).on(e,at.a.BUFFER_CREATED,this.onMediaBufferCreated_.bind(this)).on(e,at.a.BUFFER_APPENDING,this.onMediaBufferAppending_.bind(this)).on(e,at.a.BUFFER_APPENDED,this.onMediaBufferAppended_.bind(this)).on(e,at.a.MSE_ATTACHING,this.onMediaAttaching_.bind(this)),this.set_.add(e),1===this.size&&(t||n)&&(this.playingStream=e,this.emit(ou.BEGIN),this.startSchedules()),this}},{key:"delete",value:function(e){if(e instanceof ru&&"ad::brief"===e.rollCategory){var t=e.offset,n=this.briefs[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1);break}}return this.$eventManager.off(e,at.a.STATE_CHANGE).off(e,at.a.BUFFER_CREATED).off(e,at.a.ERROR).off(e,at.a.MSE_ATTACHING),this.set_["delete"](e),this}},{key:"findAdaptedStream",value:function(e){var t,n=null,r=e.streamType,i=e.roll,a=e.components,o=gu(this.streams);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.streamType===r&&(s instanceof su||i&&s instanceof ru&&s.rollType===i.rollType&&"ad::brief"!==s.rollCategory&&s.rollCategory===i.category)&&(0===a.length||0===Object(fu.a)(a,s.compLiterals).length)){n=s;break}}}catch(c){o.e(c)}finally{o.f()}return n}},{key:"tryToSwitchStream",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=this.playingStream;if(t){var n=t instanceof su,r=this.normalAdRollStream,i=this.episodeStream,a=this.patchStream,o=this.matStream;if(t instanceof ru){if(!e)return;if("ad"===t.rollCategory){var s=t.rollType;switch(this["delete"](t),t.destroy(),s){case au.PRE_ROLL:var c=0,u=this.briefs[c]||[];u.length>0?this.playingStream=u.shift():i&&(this.playingStream=i);break;case au.MID_ROLL:i&&(this.playingStream=i);break;case au.POST_ROLL:this.emit(ou.END)}}else"ad::brief"===t.rollCategory?(this["delete"](t),t.destroy(),t.next?this.playingStream=t.next:i&&(this.playingStream=i)):"patch"===t.rollCategory&&e&&(this["delete"](t),t.destroy(),r&&r.rollType==au.POST_ROLL?this.playingStream=r:this.emit(ou.END))}else if(n)if(e)this.hasAvailablePatch?this.playingStream=a:r&&r.rollType==au.POST_ROLL?this.playingStream=r:this.emit(ou.END);else{if(r&&r.rollType===au.MID_ROLL){var d=r.offset,l=t.currentTime;if(l>=d)return this.playingStream=r,this.seekStream(l+.1,t),void(o&&(o.needInitSegment=!0))}var f=this.briefs,h=Object.keys(f);if(h.length>0){var p;for(p=0;p<h.length;p++){var _=h[p],v=f[_];Array.isArray(v)&&0!==v.length||delete f[_]}var g=Object.keys(f).sort().map((function(e){return parseInt(e,10)}));if(g.length>0)for(p=0;p<g.length;p++){var y=g[p],m=t.currentTime,b=Math.floor(m);if(b>y)delete f[y];else if(b===y)return this.playingStream=f[y].shift(),this.seekStream(m+.1,t),void(o&&(o.needInitSegment=!0))}}}}}},{key:"switchLevel",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3],i=arguments.length>4&&arguments[4]!==undefined&&arguments[4],a=this.$eventManager,o=this.playingStream,s=this.runtime,c=o.renderer,u=o.loader,d=o.playRanges,l=c.currentTime,f=o.loader.findPieceAt(l);if(o.levelSwitching=!0,r&&o.clearBuffers({rendererOnlyData:!0}),s.provideRawToStore(e,o),t)this.seekStream(d.start(0),o);else if(n||!c.currentTimeRange)r&&(a.once(o,at.a.BUFFER_FLUSHED,(function(){u.seek(c.currentTime)})),c.$flushBuffer());else if(!i){var h=c.bufferInfo(l);this.seekStream(h.end,o,!0),f&&f.segment.startTime>1&&c.$flushBuffer(0,f.segment.startTime-1)}}},{key:"getCurrentADGas",value:function(){if(this.isAd){var e=this.adManager.getCurrentGas();if(e&&e.gas)return e.gas}return null}},{key:"abortCurrentADGas",value:function(){var e=this.adManager,t=this.runtime;if(e&&this.isAd){var n=e.getCurrentGas();if(n){var r=e.stream,i=r.loader,a=r.rollType,o=n.fragIdx===i.fragments.length-1;t.error&&(t.error=null),o?this.abortRollingStream(a):e.abortCurrentGas(n)}}}},{key:"abortRollingStream",value:function(e,t){var n=this;if(this.isRolling&&(null===e||e===this.rollingType)){if(Object(_e.g)(t)){!function(e){var t=n.episodeStream;n.matStream;if(t){var r=!1,i=t.duration,a=e;if(0===i)return;e<0?(r=!0,e=0):e>i&&(r=!0,e=i<=1?0:i-1),r&&G.a.warn("episode recovery point is fixed from ".concat(a," to ").concat(e)),n.seekStream(e,t)}}(t)}this.endOfPlayingStream()}}},{key:"switchAudioTrack",value:(r=K()(Z.a.mark((function c(e){var t,n,r,i=arguments;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=i.length>1&&i[1]!==undefined&&i[1],this.playingStream){a.next=3;break}return a.abrupt("return");case 3:t="boolean"==typeof t?t:this.runtime.conf.switchVariantImmediate,n=this.playingStream.renderer,r="immediate: ".concat(t),e?(t&&n.$flushBuffer(),G.a.log("switch to variant audio track, ".concat(r)),n.variantAudioMode=!0):(G.a.log("switch to original audio track, ".concat(r)),n.variantAudioMode=!1),this.loadAltAudio_(e,t);case 8:case"end":return a.stop()}}),c,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadAltAudio_",value:(t=K()(Z.a.mark((function u(e,t){var r,i,a,o,s,c,d,l;return Z.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.e(6).then(n.bind(null,663));case 2:if(r=u.sent,i=r.MAT,a=this.runtime,o=this.playingStream,s=o.renderer,(c=o.audio)||(o.registerAudioPack(i,a),c=o.audio),!e){u.next=14;break}return c.enabled=!0,u.next=12,c.push(e);case 12:u.next=17;break;case 14:c.enabled=!1,c.reset(),o.mux||(o.restrictor.needSendAudioInitSegment=!0);case 17:o.clearBuffers({rendererFlushMedia:!1}),d=s.currentTime,l=t?d:s.bufferInfo(d).end,this.seekStream(l,o,!0);case 21:case"end":return u.stop()}}),u,this)}))),function(e,n){return t.apply(this,arguments)})}]),s}(lu);bu([se.c],ku.prototype,"eot",null),bu([se.c],ku.prototype,"isAd",null),bu([se.c],ku.prototype,"isQBBPatching",null),bu([se.c],ku.prototype,"patchStream",null),bu([se.c],ku.prototype,"episodeStream",null),bu([se.c],ku.prototype,"bufferInfo",null),bu([se.c],ku.prototype,"mediaBufferInfo",null),bu([se.c],ku.prototype,"dataBufferInfo",null),bu([se.c],ku.prototype,"add",null),bu([se.c],ku.prototype,"delete",null),bu([se.c],ku.prototype,"getCurrentADGas",null),bu([se.c],ku.prototype,"abortCurrentADGas",null),bu([se.c],ku.prototype,"abortRollingStream",null),bu([se.c],ku.prototype,"switchAudioTrack",null);var xu=new Map;xu.set("events",at.a),xu.set("manifestTypes",lt),xu.set("errorCodes",Se.a),xu.set("timeline/pcw-vod",ku),xu.set("manifest/hls",Gs),xu.set("loader/hls",Et),xu.set("mux/m2ts-mp4",ec.a),xu.set("manifest/flv",Hs),xu.set("loader/flv",xt),xu.set("mux/flv-mp4",tc.a),xu.set("manifest/jdash",Js),xu.set("manifest/dash",js),xu.set("loader/dash",jt),xu.set("loader/p2p",os),xu.set("renderer/mse",bc);var Su=n(376),Tu=new Map;function Pu(e){var t=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n],i=Tu.get(r);G.a.assert(!!i,"the <<".concat(r,">> component is not installed")),i&&t.push(i)}return t}n(367);var Iu=n(530);function wu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function Au(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Eu=function(e){d()(n,e);var t=Au(n);function n(e){var r;return i()(this,n),(r=t.call(this)).isPreload=!1,r.isPreload=!!e,r}return o()(n,[{key:"destroy",value:function(){this.timeline&&(this.timeline.destroy(),this.timeline=null)}},{key:"reset",value:function(){this.timeline&&this.timeline.reset()}},{key:"setup",value:function(e,t){var n=e.params.dynamic.timeline,r=t.get(n);this.timeline=new r(e,this.isPreload)}},{key:"registerPacksIntoStream",value:function(e,t,n){var r,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null,o=arguments.length>5?arguments[5]:undefined,s=Pu(t);switch(e){case eu.Roll:r=new ru;break;case eu.Episode:r=new su;break;default:G.a.error("kernel met unknown content streamType ".concat(e))}for(var c=0;c<s.length;c++){var u=s[c],d=Object.getPrototypeOf(u);switch(d){case ds:r.manifest=new u($c(n,r));break;case pe:r.loader=new u($c(n,r));break;case Iu.a:r.mux=new u($c(n,r));break;case rc:r.renderer=new u($c(n,r))}}return r.silenced=this.isPreload,r.compLiterals=t,r.range(i,a),r instanceof ru&&this.timeline.configureRoll(o.roll,r),this.timeline.add(r),r}}]),n}(function(e){d()(n,e);var t=wu(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(Hc.a));var Du,qu={components:{manifest:[],loader:[],mux:[],renderer:[]}},Ou=function Iv(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};i()(this,Iv),this.enableMuxWorker=!0,this.switchVariantImmediate=!1,this.alwaysSeekKeyframe=!1,this.bufferExpectLength=5,this.mediaMaxDuration=86400,this.highBufferThreshold=3,this.nudgeOffset=.1,this.nudgeMaxRetry=3,this.maxBufferHole=.5,this.maxBufferTimeLength=60,this.hlsRangeTSTolerance=5,this.hlsMaxSegmentSearchTolerance=.25,this.drm={retryParameters:{maxRetry:3,timeout:6e3}},this.datasource={retryParameters:{maxRetry:2,timeout:2e4}},this.loaderWithBufferMaxRetry=3,this.loaderNoBufferMaxRetry=1,this.fpsStuckMonitoringPeriod=5,this.safariMinStartTime=.2,this.openTest=!1;var t=ic.a.CHROME&&(ic.a.version.major<50||50===ic.a.version.major&&ic.a.version.build<2661);this.alwaysSeekKeyframe=!!(t||ic.a.EDGE||ic.a.IE),Object(ve.a)(this,e)},Ru=function wv(){i()(this,wv),this.global={},this.dynamic={}};!function(e){e[e.STOP=0]="STOP",e[e.START=1]="START",e[e.MEDIA_METADATA=2]="MEDIA_METADATA",e[e.MEDIA_SEEKING=3]="MEDIA_SEEKING",e[e.DATA_SEEKING=4]="DATA_SEEKING"}(Du||(Du={}));var Lu=function(){function e(){i()(this,e),this._status=Du.STOP,this.levels=Du,this.targetTime=null}return o()(e,[{key:"progressing",get:function(){return this.status>=Du.START}},{key:"status",get:function(){return this._status},set:function(e){if(e===Du.STOP)this.targetTime=null;else if(e!=this._status+1)return;G.a.log("recover status is ".concat(e)),this._status=e}}]),e}();function Mu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Cu=function(e){d()(n,e);var t=Mu(n);function n(e){var r;return i()(this,n),(r=t.call(this)).params=new Ru,r.conf=new Ou,r.store=Fc(),r.recoverProcedure=new Lu,r.ctx=e,r}return o()(n,[{key:"mixinDynamicParams",value:function(e){Object(ve.a)(this.params.dynamic,e||{})}},{key:"throwError",value:function(e){var t=this.ctx,n=this.recoverProcedure;(G.a.assert(e instanceof me.a,"Wrong error type!"),null==this.error&&e instanceof me.a)&&(this.error=e,e.severity===be.a.RECOVERABLE&&n.progressing&&(n.status=n.levels.STOP),t.emit(ce.a.PRE_ERROR,e),t.emit(ce.a.ERROR,e))}},{key:"provideRawToStore",value:function(e,t){this.store.dispatch(Uc(ue.a.DEPOSIT_RAWNESS,e,{stream_uid:t.uuid}))}}]),n}(De.EventEmitter);function Nu(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(s)throw a}}}}function Bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Uu=new Wc;Uu.add(0,Number.POSITIVE_INFINITY);var ju=function(e){d()(n,e);var t=Fu(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).eventManager_=new Te.a,a.allowJumpGapDirectly=!1,a.stats={},a.runtime=new Cu(c()(a)),a.config=a.runtime.conf,a.syntheticCfg=qu,a.runtime.rootElement="string"==typeof e?document.querySelector(e):e,Object(ve.a)(a.runtime.params,r||{}),a.runtime.mixinDynamicParams(r),a.initContent_(!0),a}return o()(n,[{key:"timeRanges",set:function(e){this.current.timeline.playingStream.range(null,e)}},{key:"isRolling",get:function(){return this.current.timeline.isRolling}},{key:"rebooting",get:function(){return this.runtime.recoverProcedure.progressing}},{key:"allowSwitchVariant",get:function(){var e=this.current.timeline.playingStream,t=e.loader,n=e.renderer;return!t.eof||n.hasOperateBufferData}},{key:"preloaded",get:function(){return!!this.preload&&this.preload.timeline.size>0}},{key:"options_",value:function(e){return Object(ve.a)({streamType:eu.Episode,dynamicArgs:{},components:[],isCurrent:!0,parseMftOnly:!1},e||{})}},{key:"initContent_",value:function(e){var t,n=this;return e?this.current=t=new Eu(!1):this.preload=t=new Eu(!0),t.setup(this.runtime,Tu),e&&(t.timeline.bindApis(),this.eventManager_.on(t.timeline,ou.END,(function(){n.preloaded&&n.switchCS_()}))),t}},{key:"switchCS_",value:function(){var e=this.current,t=this.preload;this.emit(ce.a.TIMELINE_SWITCHING),G.a.log("switch timeline content");var n,r=Nu(e.timeline.streams);try{for(r.s();!(n=r.n()).done;){n.value.destroy()}}catch(s){r.e(s)}finally{r.f()}e.timeline.clear();var i,a=Nu(t.timeline.streams);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.silenced=!1,e.timeline.add(o)}}catch(s){a.e(s)}finally{a.f()}t.timeline.clear(),this.emit(ce.a.TIMELINE_SWITCHED)}},{key:"loadSource",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Uu,r=arguments.length>3?arguments[3]:undefined,i=this.options_(r);i.isCurrent||this.preload||this.initContent_(!1);var a=i.isCurrent,o=i.components,s=i.dynamicArgs,c=i.streamType,u=(i.parseMftOnly,i.roll,this.runtime),d=this.current,l=this.preload,f=a?d:l,h=f.timeline.findAdaptedStream(i);u.mixinDynamicParams(s),h||(h=f.registerPacksIntoStream(c,o,u,t,n,r)),u.provideRawToStore(e,h)}},{key:"switchLevel",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],r=arguments.length>3&&arguments[3]!==undefined&&arguments[3],i=arguments.length>4?arguments[4]:undefined,a=this.options_(i),o=this.runtime,s=this.current,c=a.components,u=a.dynamicArgs,d=a.streamType,l=s.timeline.playingStream,f=l.renderer,h=l.mediaRanges,p=f.currentTime,_=!1;if(o.mixinDynamicParams(u),i&&Array.isArray(c)&&Object(fu.a)(c,l.compLiterals).length>1){var v=h.clone();this.reset(),s.registerPacksIntoStream(d,c,o,p,v,i),_=!0}e.isSwitchLevel=!0,G.a.log("switching level, immediate: ".concat(t,", paused: ").concat(f.paused,", clearBuffer: ").concat(n,", abr: ").concat(r,", currentTimeRange: ").concat(Su.a.stringify(f.currentTimeRange))),s.timeline.switchLevel(e,_,t,n,r)}},{key:"recoverMedia",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1,t=this.runtime,n=this.current,r=.5,i=t.recoverProcedure,a=n.timeline.playingStream;a&&((e=(e=Object(_e.j)(e)?parseFloat(e):e)>=0?e:a.currentTime)>=a.duration-r&&(e=a.duration-r),G.a.log("kernel will recovery from ".concat(e)),t.error=null,i.status=i.levels.START,i.targetTime=e,a.recoverImmediately(e))}},{key:"reset",value:function(){[this.current,this.preload].forEach((function(e){e&&e.reset()}))}},{key:"destroy",value:function(){[this.current,this.preload].forEach((function(e){e&&e.destroy()})),this.eventManager_.destroy()}}]),n}(De.EventEmitter);function Vu(){return(Vu=K()(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],te.forEach((function(e,r){t.push(r),n.push(e())})),e.abrupt("return",Promise.all(n).then((function(e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];t||e.clear(),e.forEach((function(e,t){Tu.has(t)?G.a.warn("kernel encounter duplicate component ".concat(e.constructor.name," from glue")):Tu.set(t,e)}))}(xu);var Wu=Tu.get("events")||ce.a,Hu=Tu.get("manifestTypes")||{},zu=Tu.get("errorCodes")||{},Yu=n(123),Gu=n.n(Yu),Qu={Status_Idle:"idle",Status_Loadstart:"loadstart",Status_Loaddone:"loaddone",Status_LoadFailed:"error",Status_LoadedMetaData:"loadedmetadata",Status_Canplay:"canplay",Status_Waiting:"waiting",Status_Paused:"paused",Status_Play:"play",Status_Playing:"playing",Status_Will_Stoped:"willended",Status_Stoped:"ended",Status_Stalled:"stalled",Status_Playing_Fail:"muted",NTF_StatusChanged:"statusChanged",NTF_CanPlayThrough:"canplaythrough",NTF_VolumeChanged:"volumechanged",NTF_RateChanged:"ratechange",NTF_DurationChanged:"durationchange",NTF_Seeking:"seeking",NTF_Seeked:"seeked",NTF_TimeUpdate:"timeupdate",NTF_Progress:"progress",NTF_NeedUserGesture4Playback:"needUserGesture4Playback",Action_Type_Controls:"controls",Action_Type_Code:"code",Action_Type_Native:"native"},Ku=n(78),$u=n(84),Zu=n(33),Xu=n(96);var Ju=function(){var e=(T.a.get("QC005",{memory:!0})||"").substr(0,1),t=(parseInt(e,16),A.a.browser.CHROME&&A.a.browser.version>=78);return{canaryVP9_P2P:false,canaryVP9_CDN:false,canaryVP9:false,canaryAV1_P2P:t,canaryAV1_CDN:false,canaryAV1:t||false,canaryHEVC:"true"===W.a.query("__hevc__")}},ed=new E.a("DashRemote"),td=0,nd=!1;function rd(){var e="QiyiPlayerSupported",t="0.0.7";return new Promise((function(n){var r;function i(){(function(){return Vu.apply(this,arguments)})().then((function(r){r.ver=t,r.drm&&"fullfilled"===r.drm.status&&V.a.write(e,JSON.stringify(r)),n(r)}))}var a=V.a.read(e);a&&(r=JSON.parse(a)).ver===t?n(r):i()}))}var id=function(){function e(){i()(this,e),this.requestIsAbandoned=!1,this.vmsParams=null,this.vmsXhrRequest=null}return o()(e,[{key:"request",value:function(e,t,n){var r=e.params,i=!!e.hostUseIP,a=null,o=e.params.tryCount||0,s=e.sptr,c=e.pingback,u=this,d=Ju(),l=d.canaryVP9,f=d.canaryAV1,h=d.canaryHEVC;return Promise.all([rd(),new Promise((function(e){I.a.getVipTypes((function(t){e(t)}))}))]).then((function(e){var d=qn()(e,2),p=d[0],_=d[1];p&&(p.drm&&(p.drm["com.widevine.alpha"]?(Xu.a.openBit(1,42),nd=!0,ed.log("dashremote feature open widevine")):Xu.a.closeBit(1,42),p.drm["com.microsoft.playready"]?(Xu.a.openBit(4,5),nd=!0,ed.log("dashremote feature open playready")):Xu.a.closeBit(4,5),nd?(Xu.a.openBit(4,20),Xu.a.openBit(4,21)):(Xu.a.closeBit(4,20),Xu.a.closeBit(4,21))),p.media&&(h&&p.media['video/mp4; codecs="hvc1.1.6.L93.90"']?(f=!1,l=!1,Xu.a.openBit(2,1),Xu.a.openBit(2,2),Xu.a.openBit(2,3),Xu.a.openBit(2,4),Xu.a.openBit(2,5),Xu.a.openBit(2,6)):(Xu.a.closeBit(2,1),Xu.a.closeBit(2,2),Xu.a.closeBit(2,3),Xu.a.closeBit(2,4),Xu.a.closeBit(2,5),Xu.a.closeBit(2,6)),l&&p.domParser&&p.media['video/webm; codecs="vp09.00.40.08"']&&!(A.a.browser.EDGE&&A.a.browser.version<=18)?Xu.a.openBit(4,28):Xu.a.closeBit(4,28),f&&p.domParser&&p.media['video/webm; codecs="av01.0.08M.08"']?Xu.a.openBit(4,41):Xu.a.closeBit(4,41)));var v=r.tvid,g=r.vid,y=601===r.vd?600:r.vd,m=r.ppt,b=r.ost,k=Gu.a.cmd5xdash(),x=td>0?td:k.tm;td=0;var q,O=r.ugcAuthKey||"",M=A.a.getPtid(L.a.isTWLocale());s&&(s.psdkietm=+new Date,s.vcistm=+new Date),q={tvid:v,bid:y,vid:g,src:M,vt:0,rs:1,uid:I.a.getUid(),ori:"pcw",ps:r.switchvd?1:0,k_uid:S.a.getFluid()||S.a.getJsuid(),pt:0,d:0,s:"",lid:"",cf:"",ct:"",authKey:Object($u.a)(Object($u.a)(O)+x+""+v),k_tag:1,ost:b,ppt:m,dfp:D.a.get(),locale:L.a.isTraditionalChinese()?"zh_tw":"zh_cn",prio:r.prio||E.a.stringify({ff:"f4v",code:2}),pck:I.a.passportCookie(),k_err_retries:o,up:O},(q=Object(w.a)(q,k)).tm=x,(A.a.os.ios||A.a.os.android)&&(q.ori="h5"),r.src&&(q.src=r.src),r.preIdAll&&(q.preIdAll=r.preIdAll),r.lid&&(q.lid=r.lid,q.cf=2),-1!=q.prio.indexOf("m3u8")?q.k_ft1=Xu.a.getM3U8FT1():-1!=q.prio.indexOf("mp4")?q.k_ft1=Xu.a.getMP4FT1():(q.k_ft1=Xu.a.getFT1(),q.k_ft4=Xu.a.getFT4()),r.k_ft1&&(q.k_ft1=r.k_ft1),Xu.a.getFT2()>0&&(q.k_ft2=Xu.a.getFT2()),Xu.a.getFT5()>0&&(q.k_ft5=Xu.a.getFT5()),L.a.isTraditionalChinese()&&(q.locale="zh_tw"),"0"===T.a.get("QC004",{memory:!0})&&(q.vv="821d3c731e374feaa629dcdaab7c394b"),i&&(q.ecode="701"),q.bop=E.a.stringify({version:"10.0",dfp:D.a.get()}),a=q,u.vmsParams=a,c&&c.sendVrsRequestPingback(a);var C=function(e){u.requestIsAbandoned?ed.log("dashremote is abandoned!!!"):u.vmsXhrRequest=P.a.json({url:e,params:a,memory:!0,timeout:5e3,beforeSend:function(e){var t=W.a.parse(e.url).host;_.forEach((function(t){e.url+="&ut="+t,Zu.a.isArray(a.ut)||(a.ut=[]),a.ut.push(parseInt(t,10))}));var n="iloveiqiyi";try{var r=e.url.replace(new RegExp("^(http|https)://"+t,"ig"),"");i&&(r=r.replace("/3ea/420a8433732a6c99d1eae98fea69e55d","")),n=Gu.a.cmd5x(r)}catch(o){ed.error("request, cmd5x error, catchinfo: "+(o.message?o.message:o))}return e.url+="&vf="+n,ed.log("load movie: ".concat(e.url)),e},success:function(e){if(u.requestIsAbandoned)ed.log("start vms request success callback is abandoned!!!");else if(s&&(s.vcietm=+new Date),c&&c.sendVrsReadyPingback(a,e),ed.log("dashremote, success."),e&&Object.prototype.hasOwnProperty.call(e,"code"))"A00000"===e.code?t(e):("A00020"===e.code&&e.tm&&(td=e.tm),n(e));else{var r={};r.code=Ku.a.P00002,n(r)}},failure:function(e){if(u.requestIsAbandoned)ed.log("start vms request failure callback is abandoned!!!");else{ed.error("dash fail raw json data->"+e);var t={};t.code=Ku.a.P00001,n(t)}}})};i?(ed.info("dashremote, ip, url = "+R.vmsAccess),P.a.ajax({url:R.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";"),n=t[Math.floor(Math.random()*t.length)];ed.info("dashremote, ip ok "),C(R.vmsIPSuc.replace("{{IP}}",n))}else ed.info("dashremote, ip fail , data = "+e),C(R.vmsIPFail)},failure:function(e){ed.info("dashremote, ip fail , data = "+e),C(R.vmsIPFail)}})):C(R.vmsUrl)})),this}},{key:"getReqParams",value:function(){return this.vmsParams}},{key:"getXhrRequest",value:function(){return this.vmsXhrRequest}},{key:"setReqAbandoned",value:function(){this.requestIsAbandoned=!0}}]),e}(),ad="01080031010000000000",od="01080031010010000000",sd="03020031010000000000",cd="03020031010010000000",ud="03030031010000000000",dd="03030031010010000000",ld="02020031010000000000",fd="02020031010010000000",hd="",pd=function(){return hd=A.a.browser.iPad?L.a.isTWLocale()?dd:ud:A.a.os.mac?L.a.isTWLocale()?od:ad:A.a.os.androidTablet?L.a.isTWLocale()?cd:sd:L.a.isTWLocale()?fd:ld,L.a.isTWLocale()&&(hd=A.a.getPtid(!0)),hd},_d=window.location.protocol;function vd(e,t){var n=_d+e.baseUrl+t,r=W.a.filename(n);if(e.isVIP){var i=e.boss.data.t||"",a=e.boss.data.u,o=Gu.a.cmd5x(i+r);n=n+"&t="+i+"&vid="+e.vid+"&ibt="+o+"&cid=afbe8fd3d73448c9&ib=4&ptime="+N.getPreviewTime(e.tvid)+"&QY00001="+a}else n=n+"&cross-domain=1&qyid="+(S.a.getFluid()||S.a.getJsuid())+"&qypid="+e.tvid+"_"+pd();return n}var gd=function(e,t){var n={},r=[];n.types=[],n.audio={};for(var i=e.audio,a=0;a<i.length;a++){var o={},s=i[a];-1==r.indexOf(s.lid)&&(o.id=s.lid,o.ispre=1==s.ispre?1:0,o.name=s.name||"",1==s.ispre&&(e.currentLid=s.lid),r.push(s.lid),n.types.push(o)),s.fs&&(n.audio=s)}if(t&&n.audio&&n.types.length>1)for(var c=n.audio.fs,u=0;u<c.length;u++)c[u].dpl=vd(e,c[u].l);return n};function yd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var md={},bd=function(e){d()(n,e);var t=yd(n);function n(e){var r;return i()(this,n),(r=t.call(this))._curStatus="",r.hasSeeking=!1,r.seekableFlag=!0,r.__beforeSeekTime=0,r._userGesturePlayed=!1,r._currentManualAction=null,r._currentCodeActionList=[],r.delogger=new E.a("Decode[".concat(e.id,"]")),r}return o()(n,[{key:"init",value:function(e){var t=this,n=arguments;this._video=e;var r=function(n){if(""!==e.src){var r=n.status;t.emit(Qu.NTF_StatusChanged,n),t._curStatus=r,r===Qu.Status_Playing?t._playing=!0:t._playing=!1}},i=function(e){if(t._currentManualAction&&t._currentManualAction===e)return t._currentManualAction=null,Qu.Action_Type_Controls;if(-1!=t._currentCodeActionList.indexOf(e)){var n=t._currentCodeActionList.indexOf(e);return t._currentCodeActionList.splice(n,1),Qu.Action_Type_Code}return Qu.Action_Type_Native};this._setSrc=function(e){1===n.length&&(t.__beforeSeekTime=0,t._video.setAttribute("src",e),A.a.os.ios||t._video.load())},md.loadstart=function(){t.__beforeSeekTime=0,r({status:Qu.Status_Loadstart,actionType:Qu.Action_Type_Native})},e.addEventListener("loadstart",md.loadstart),md.error=function(){t.__beforeSeekTime=0,r({status:Qu.Status_LoadFailed,actionType:Qu.Action_Type_Native})},e.addEventListener("error",md.error),md.stalled=function(){r({status:Qu.Status_Stalled,actionType:Qu.Action_Type_Native})},e.addEventListener("stalled",md.stalled),md.loadedmetadata=function(){r({status:Qu.Status_LoadedMetaData,actionType:Qu.Action_Type_Native})},e.addEventListener("loadedmetadata",md.loadedmetadata),md.canplay=function(){r({status:Qu.Status_Canplay,actionType:Qu.Action_Type_Native})},e.addEventListener("canplay",md.canplay),md.ended=function(){if(!1===t.seekableFlag&&Math.abs(t._getDecodeDuration()-t.__beforeSeekTime)>2)return t._seek(t.__beforeSeekTime)},e.addEventListener("ended",md.ended),md.canplaythrough=function(){t.emit({type:Qu.NTF_CanPlayThrough,data:{actionType:Qu.Action_Type_Native}})},e.addEventListener("canplaythrough",md.canplaythrough),md.volumechange=function(){t.emit(Qu.NTF_VolumeChanged,{data:t._video.volume,actionType:Qu.Action_Type_Native})},e.addEventListener("volumechange",md.volumechange),md.ratechange=function(){t.emit(Qu.NTF_RateChanged,{data:t._video.playbackRate,actionType:Qu.Action_Type_Native})},e.addEventListener("ratechange",md.ratechange);var a=(new Date).getTime(),o=0;md.timeupdate=function(){var n=t.getCurrenttime();if(!e.seeking&&Math.abs(n-t.__beforeSeekTime)<1.2)t.__beforeSeekTime=n;else if(!1===t.seekableFlag)return t._seek(t.__beforeSeekTime);if(!("number"==typeof e.readyState&&e.readyState<=1||t.isPaused())){var r=(new Date).getTime();r-a>500&&(clearTimeout(o),a=r,o=setTimeout((function(){t.isPaused()||t.emit(Qu.NTF_TimeUpdate,{current:t.getCurrenttime(),duration:t.getDuration(),buffer:t.getBufferTime(),actionType:Qu.Action_Type_Native})}),0)),t._playing||(t.hasSeeking=!1)}},e.addEventListener("timeupdate",md.timeupdate),r({status:Qu.Status_Idle}),this._statusChanged=r,this._checkActionType=i}},{key:"video",value:function(){return this._video}},{key:"removeAllEventsListener",value:function(){this._video.removeEventListener("loadstart",md.loadstart),this._video.removeEventListener("error",md.error),this._video.removeEventListener("stalled",md.stalled),this._video.removeEventListener("loadedmetadata",md.loadedmetadata),this._video.removeEventListener("canplay",md.canplay),this._video.removeEventListener("pause",md.pause),this._video.removeEventListener("play",md.play),this._video.removeEventListener("playing",md.playing),this._video.removeEventListener("waiting",md.waiting),this._video.removeEventListener("ended",md.ended),this._video.removeEventListener("canplaythrough",md.canplaythrough),this._video.removeEventListener("volumechange",md.volumechange),this._video.removeEventListener("durationchange",md.durationchange),this._video.removeEventListener("timeupdate",md.timeupdate),this._video.removeEventListener("progress",md.progress)}},{key:"play",value:function(e){var t=this,n=t._video;if(0!==n.readyState){e?this._currentManualAction=Qu.Status_Play:this._currentCodeActionList.push(Qu.Status_Play);var r=function(){t.delogger.log("decode play really invoked!");var e=n.play();if(e!==undefined){var r=new Promise((function(t,n){e.then((function(){t()}))["catch"]((function(e){n(e)}))}));return r["catch"]((function(e){t.delogger.warn("decode play got: "+e.message)})),r}};if(!A.a.os.ios&&!A.a.os.android)return r();this._userGesturePlayed?r():this.emit(Qu.NTF_NeedUserGesture4Playback)}}},{key:"pause",value:function(e,t){var n=this._video.networkState;(t||0!==n&&3!==n)&&(this._video.readyState&&(e?this._currentManualAction=Qu.Status_Paused:this._currentCodeActionList.push(Qu.Status_Paused),this._video.pause()))}},{key:"isPaused",value:function(){return this._video.paused}},{key:"replay",value:function(){this._video.play(this._video.src)}},{key:"_seek",value:function(e,t){var n=this;if(!this._checkSeek||!1!==this._checkSeek(e)){this.hasSeeking=!0;var r=this._video.seekable;1===r.length&&r.end(0)>e?(t?this._currentManualAction=Qu.NTF_Seeking:this._currentCodeActionList.push(Qu.NTF_Seeking),e>=0&&e<=this.getDuration()&&(this._video.currentTime=e),this.isPaused()&&this.play()):setTimeout((function(){n._seek(e)}),10)}}},{key:"isSeeking",value:function(){return this.hasSeeking}},{key:"setDecodeSrc",value:function(e,t){var n=this;n._setSrc(e),this.delogger.debug("decode src current time :"+t);try{n._video.duration=0,n._video.buffered.length=0,t>0?n._video.addEventListener("loadedmetadata",(function e(){t<n.getDuration()&&n._seek(t),n._video.removeEventListener("loadedmetadata",e)}),!1):n._video.currentTime=0}catch(r){}}},{key:"getSrc",value:function(){return this._video.src}},{key:"getAudioTracks",value:function(){return this._video.audioTracks}},{key:"setAudioTracks",value:function(){}},{key:"getBuffered",value:function(){return this._video.buffered}},{key:"getDecodeCurrenttime",value:function(){var e=this.getDecodeDuration(),t=this._video.currentTime||0;return t<e?t:e}},{key:"getDecodeDuration",value:function(){return this._video.duration||0}},{key:"getVolume",value:function(){return this._video.volume}},{key:"setVolume",value:function(e){e>1&&(e=1),this._video.volume=e}},{key:"userGesturePlayed",value:function(){this._userGesturePlayed=!0}},{key:"getPlaybackRate",value:function(){return this._video.playbackRate}},{key:"setPlaybackRate",value:function(e){e>0&&(this.delogger.log("playbackRate => ".concat(e)),this._video.playbackRate=e)}}]),n}(_.a);function kd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var xd=function(e){d()(n,e);var t=kd(n);function n(e,r,a){var o;return i()(this,n),(o=t.call(this)).engine=a,o._movieinfo={},o._movieinfo.tvid=e,o._movieinfo.vid=r,o.tryCount=0,o.maxTryCount=2,o.usedIp=!1,o.vmsRequest=null,o._movieinfo.ugcAuthKey=a.movieinfo.ugcAuthKey,o._movieinfo.hasSendSencondAuthRemote=!1,o.logger=new E.a("DataReq[".concat(a.id,"]")),o.DASH_RETRY_ARRAY=["A00001","A00003","A00004","A00020",Ku.a.P00001,Ku.a.P00002,Ku.a.P00003,Ku.a.P00004],o}return o()(n,[{key:"startRequest",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this.engine,r=n.ptr,i=n.sptr,a=n.pingbackQOS,o=n.vd,s=n.ppt,c=n.ost;this.tryCount++,this.usedIp=t,o=k.a.getNewVd(o),this.vmsRequest=(new id).request({params:{tvid:this._movieinfo.tvid||"",vid:this._movieinfo.vid||"",vd:o,ppt:s,ost:c,tryCount:this.tryCount-1,switchvd:!1,ugcAuthKey:this._movieinfo.ugcAuthKey||""},hostUseIP:t,ptr:r,sptr:i,pingback:a},(function(t){e.parse(t)}),(function(t){var n=t.data?t.data.st:"";e.reject(0,Ku.a.DASH,t.code,n)}))}},{key:"reject",value:function(e,t,n,r){if(this.logger.warn("load movieInfo, fail, level: "+e+",type:"+t+",code:"+n+",st:"+r+", retry = "+this.tryCount),this.DASH_RETRY_ARRAY.indexOf(n)>-1){if(this.tryCount<this.maxTryCount)return void this.startRequest();if(!this.usedIp)return void this.startRequest(!0)}this.emit("reject",{level:e,type:t,code:n,st:r,movieinfo:this._movieinfo})}},{key:"resolve",value:function(){this.emit("resolve",this._movieinfo)}},{key:"parse",value:function(e){var t=this,n=this._movieinfo,r=this.logger,i=this.engine.isEnjoy,a=Ku.a.DASH,o="";try{var s=e.data;if(!function(e){var n=e.code;return null!=e.data&&Object.prototype.hasOwnProperty.call(e.data,"st")?(o=parseInt(e.data.st,10),!i||505!==o&&506!==o?(798===o&&(T.a.set("QP0032",1,{expires:36e5,path:"/"}),window.location.reload()),!!(100<o&&o<200)||(r.error("movieinfo error,params: st = "+o),t.reject(0,a,n,o),!1)):(r.warn(""),t.reject(0,a,n,o),!1)):(r.error("movieinfo error,params:type = data.data null or st is lose"),t.reject(0,a,Ku.a.P00004),!1)}(e))return;r.log("load movieinfo,dash.st checked"),n.isTryWatch=!1,n.previewTime=Infinity,n.originalData=e,n.baseUrl=Zu.a.protocolRevise(s.dd)||"//pcw-data.video.iqiyi.com/videos",n.tvid=s.tvid,n.albumId=s.aid||"",n.watermark=0,n.cid=s.cid,n.authShare=s.share||{},n.sid=0,n.vipTypes=s.content.vipTypes,n.ugc=z.a.isUGC(n.tvid),n.bossStatus=s.content.bossStatus,n.isVIP=s.content.bossStatus>0,n.vipBlock=0==s.content.nu,n.videoQipuId=s.tvid,n.prelude={headTime:s.p.bt,tailTime:s.p.et},n.qiyiProduced=1===s.content.isProduced,n.exclusive=1===s.content.exclusive,n.logoOpen=!0,n.topLogoOpen=!0,n.lowerLogoOpen=!0,s.p.lgh&&(n.lowerLogoOpen=-1==s.p.lgh.indexOf(2)&&-1==s.p.lgh.indexOf("2"),n.topLogoOpen=-1==s.p.lgh.indexOf(1)&&-1==s.p.lgh.indexOf("1"));var c=s.p.wmarkPos||0;if(n.logoOpen=-1!=c,n.ctt=0==s.content.ctt||1==s.content.ctt?s.content.ctt:-1,n.isBanned=110===parseInt(e.data.st,10),n.vidl=[],s.program&&s.program.video&&(n.vidl=F(s.program.video),n.vidl.sort((function(e,t){return e.vd>t.vd})),n.vidl.unshift(n.vidl.pop())),s.parts&&s.parts.length>0){var u=s.parts[0];if(u.vs&&u.vs.length>0){var d=u.vs;d[0].ff="f4v",n.parts=F(d,k.a.getOldVd(d[0].bid))}}n.audl={},s.program&&s.program.audio&&(n.audio=s.program.audio),n.duration=0,n.drmType=n.vidl.length>0?n.vidl[0].drmType:1;var l={};if(s.program&&s.program.stl&&s.program.stl.length>0)for(var f=s.program.stl,h=0;h<f.length;h++)1==parseInt(f[h].pre)&&(n.subtitlesUrl=Zu.a.protocolRevise(s.dstl)+f[h].xml),l[f[h].lid]=Zu.a.protocolRevise(s.dstl)+f[h].xml;n.subtitlesUrlMap=l,n.f4vInfo={};var p=e.data.p.pano;!p||2!=p.type&&3!=p.type&&4!=p.type?n.is3D=0:n.is3D=2;for(var _=n.vidl,v=0;v<_.length;v++){var g=_[v];if(g.playlist){n.vd=g.vd,n.watermark=g.watermark;break}}if(s.svp&&s.svp.length>0){for(var y=s.svp,m=y.length,b={data:[],ids:""},x=0;x<m;x++){var S={id:x,stars:y[x].sl.split(","),points:[],totalTime:0};b.ids+=y[x].sl+",";for(var P=y[x].vl,I=P.length,A=0;A<I;A++){var E=Number(P[A].sp),D=Number(P[A].ep);S.points.push({startTime:E,endTime:D}),S.totalTime+=D-E}S.points.sort((function(e,t){return e.startTime-t.startTime})),b.data.push(S)}n.svpinfo=b}if(n.isVIP){var q={};if(n.vidl.length>0)n.vidl.filter((function(e){return e.vd===n.vd})).length>0&&Object(w.a)(q,{tvid:n.tvid,aid:n.albumId});var O=s.boss_ts?"boss_ts":"boss",R=this;Object.prototype.hasOwnProperty.call(s,O)&&Object.prototype.hasOwnProperty.call(s[O],"code")?N.analyzeAuthData(q,s[O],(function(e,t){R.vipAuthSuccess(e,t)}),(function(e,t,n){R.vipAuthFail(e,t,n)})):this.vipAuth(q)}else n.audio&&(n.audl=gd(n,!1)),this.resolve()}catch(L){n=null,r.error(L.stack),this.reject(0,a,Ku.a.P00003,o)}}},{key:"getIsTennisContent",value:function(){var e=this._movieinfo;if(e.vipTypes&&e.vipTypes.length>0)for(var t=0;t<e.vipTypes.length;t++)if(1==e.vipTypes[t])return!0;return!1}},{key:"vipAuthSuccess",value:function(e,t){var n=this._movieinfo,r=this.logger,i=N.getPreviewTime(e);n.isTryWatch=1===parseInt(t.data.prv,10),n.previewType=t.previewType,n.previewTime=0===i?Infinity:i,this.getIsTennisContent()?n.authTipType=10:2===parseInt(t.content.vipMode,10)?n.authTipType=6:n.authTipType=parseInt(t.data.tip_type,10),n.vipTheatre=2===parseInt(t.content.vipMode,10),1==n.previewType?n.authRTime=60*t.data.rtime*1e3:3==n.previewType&&(n.authRTime=1e3*t.data.rtime),r.log("check charge definition pass,params: isTryWatch = "+n.isTryWatch+", previewType = "+n.previewType+", previewTime = "+i),n.vidl.filter((function(e){return e.vd===n.vd})),n.boss=t,n.audio&&(n.audl=gd(n,!1)),this.resolve()}},{key:"vipAuthFail",value:function(e,t,n){var r=this._movieinfo,i=this.logger,a=Ku.a.CKNSP;r.isTryWatch=!1,n&&(r.previewType=n.previewType),i.log("check charge definition error,params: code = "+e+", msg = "+t),e?"Q00312"==e||"Q00311"==e||"Q00501"==e?this.reject(2,a,e):this.reject(1,a,e):this.reject(0,a,Ku.a.P00005)}},{key:"vipAuth",value:function(e){var t=this;N.request(e,(function(e,n){t.vipAuthSuccess(e,n)}),(function(e,n,r){t.vipAuthFail(e,n,r)}))}},{key:"clear",value:function(){var e=this.vmsRequest;e&&(e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort(),this.vmsRequest=null)}}]),n}(_.a),Sd=function(){function e(t){i()(this,e),this.logger=new E.a("DataProvider[".concat(t.id,"]")),this.engine=t,this.AllProviders={},this._retryMax=2}return o()(e,[{key:"getPid",value:function(e,t){return e+"_"+t}},{key:"hasPreload",value:function(e){return!(!this.AllProviders[e]||"fulfilled"!==this.AllProviders[e].st)}},{key:"getParams",value:function(e){return this.AllProviders[e]?this.AllProviders[e].params:null}},{key:"getData",value:function(e){return this.AllProviders[e].data}},{key:"clearAll",value:function(e){for(var t in this.AllProviders){if(e)new RegExp("^".concat(e,"_*")).test(t)&&(this.AllProviders[t].dq&&this.AllProviders[t].dq.clear(),delete this.AllProviders[t]);else this.AllProviders[t].dq&&this.AllProviders[t].dq.clear()}e||(this.AllProviders={}),this.logger.info("clear data provider & abandon vms request. tvid = "+e)}},{key:"getPromise",value:function(e,t){var n,r=this.getPid(e,t),i=this;return this.AllProviders[r]&&"pending"===this.AllProviders[r].st?n=this.AllProviders[r].pm:(n=new Promise((function(n,a){if(i.hasPreload(r))n(i.getData(r));else{i.AllProviders[r]={st:"pending",data:undefined,params:null,pm:null,dq:null,retryNum:0},i._retryNum=0;var o=new xd(e,t,i.engine);o.on("resolve",(function(e){e.dataProviderPID=r,n(e),i.AllProviders[r]&&(i.AllProviders[r].st="fulfilled",i.AllProviders[r].params=o.vmsRequest.getReqParams(),i.AllProviders[r].data=e,i.AllProviders[r].dq=o)})),o.on("reject",(function(e){var t=o.DASH_RETRY_ARRAY.indexOf(e.code.toString())>-1;t&&(i.AllProviders[r].retryNum<i._retryMax?(i.AllProviders[r].retryNum++,o.tryCount=0,o.startRequest()):t=!1),t||(a(e),i.AllProviders[r]&&(i.AllProviders[r].st="rejected",i.AllProviders[r].data=e,i.AllProviders[r].dq=o))})),o.startRequest()}})),this.AllProviders[r].pm=n),n}},{key:"clearCache",value:function(e,t){var n=this.getPid(e,t);this.AllProviders[n]&&delete this.AllProviders[n]}}]),e}(),Td=window.location.protocol,Pd=function(e,t){if(e)if(/[a-z]/i.test(e)){var n=function(){var n=K()(Z.a.mark((function r(n){var i,a;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=W.a.parse(e),a=n+"/3f0/hd.cloud.iqiyi.com/d?dn="+i.host+"&business=pcwPlayer&cross-domain=1",P.a.ajax({url:a,withCredentials:!1,success:function(e){t(e)},failure:function(e){t(e)}});case 3:case"end":return r.stop()}}),r)})));return function(e){return n.apply(this,arguments)}}();P.a.ajax({url:R.vmsAccess,timeout:2e3,withCredentials:!1,success:function(e){if(e&&"string"==typeof e){var t=e.split(";");n(Td+"//"+t[0])}else n(R.dnsIPFail)},failure:function(e){n(R.dnsIPFail)}})}else t(e)},Id=n(291),wd="1",Ad="10",Ed="101";A.a.browser.iPad?(wd="2",Ad="20",Ed="202"):(A.a.os.ios||A.a.os.android)&&(wd="2",Ad="20",Ed="201");var Dd="window";A.a.os.ios||A.a.os.mac?Dd="mac":A.a.os.android&&(Dd="android");var qd=new _.a,Od=new Promise((function(e){var t=setTimeout((function(){e()}),2e3);qd.once("ok",(function(){clearTimeout(t),e(),qd=null}))})),Rd=new(function(){function e(){i()(this,e)}return o()(e,[{key:"os",get:function(){return Dd}},{key:"pf",get:function(){return wd}},{key:"p",get:function(){return Ad}},{key:"p1",get:function(){return Ed}},{key:"p_code",get:function(){return this.pf+"_"+this.p+"_"+this.p1}},{key:"getDrmType",value:function(e){var t="";if(e.drmType)switch(e.drmType){case 7:t=1;break;case 8:t=2}return t}},{key:"getPingbackDfp",value:function(e){function t(){return D.a.get()}return new Promise((function(n){Od.then((function(){var r=t();r?n(r):e&&parseInt(e.t,10)>0?"undefined"==typeof window.dfp?Object(Id.a)("//security.iqiyi.com/static/cook/v1/cooksdk.js",(function(e){e&&"undefined"!=typeof window.dfp?(D.a.setSDK(window.dfp),n(t())):n("")})):(D.a.setSDK(window.dfp),n(t())):n("")}))}))}},{key:"browserName",value:function(){return A.a.browserName()}},{key:"noticeSenderFlush",value:function(){clearTimeout(this.__timer),this.__timer=setTimeout((function(){qd&&qd.emit("ok")}),50)}}]),e}());function Ld(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Md=[],Cd=[],Nd=function(e){d()(n,e);var t=Ld(n);function n(){return i()(this,n),t.call(this)}return o()(n,[{key:"add",value:function(e,t){if(Zu.a.isArray(e))for(var n=0;n<e.length;n++)this.add(e[n],t);else{var r=!0===t?Cd:Md;-1===r.indexOf(e)&&r.push(e)}}},{key:"remove",value:function(e){if(Zu.a.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var n=Md.indexOf(e);n>-1&&Md.splice(n,1)}}},{key:"removeAll",value:function(){Md.splice(0,Md.length)}},{key:"has",value:function(e){return Md.concat(Cd).indexOf(e)>-1}}]),n}(_.a),Bd=function(){function e(t){i()(this,e),this.proxy=t.playproxy,this.engine=t,this.logger=new E.a("PlayProxyEvent[".concat(t.id,"]")),this.initFeatureDuration(),this.initDecode(),this.initKernelEvent(),I.a.beforeunloadListener();var n=this;this.unloadEvent=function(){t.pingbackV6.sendEndPlayPingback(3),n.sendStuckdetl(1)},window.addEventListener("beforeunload",this.unloadEvent),this._needPlay=!0,this._recoverMediaNum=0,this._recoverMediaPerNum=0,this._recoverMediaMax=3,this._dashAuthNum=0,this._dashAuthMax=2,this.waitingTimer=0,this._isRequestAuthing=!1,this._waitingStartTime=0,this.followUpNextLoadFlag=!1,this.statusPool=new Nd}return o()(e,[{key:"_statusChanged",value:function(e,t,n){var r=this.proxy,i=this.logger,a=this.getData();a.state=e,t&&(a.actionType=t.actionType||Qu.Action_Type_Native,t.gas&&(a.gas=t.gas),t.spend&&(a.spend=t.spend)),r.currStatus===e&&!0!==n||(this.updateStatusPool(e),r.currStatus=e,r.fire(b.a.NTF_StatusChanged,a),i.debug("core status changed: "+e))}},{key:"initDecode",value:function(){var e=this.proxy,t=this.engine,n=this;e.on(Qu.NTF_StatusChanged,(function(r){switch(r.status){case Qu.Status_Loadstart:e.isAd()||"ad"===r.eventOrigin?"ad"===r.eventOrigin?n._statusChanged(b.a.Status_AdLoadstart,r,!0):n._statusChanged(b.a.Status_AdLoadstart,r):(I.a.tvid(t.getMovieInfo().tvid),I.a.bossStatus(t.movieinfo.current.bossStatus)),I.a.stopHeartBeat();break;case Qu.Status_Canplay:e.isAd()&&n._statusChanged(b.a.Status_Ready,r);break;case Qu.Status_Loaddone:n._statusChanged(b.a.Status_Loaddone,r);break;case Qu.Status_Stalled:e.isAd()&&n._statusChanged(b.a.Status_AdStalled,r);break;case Qu.Status_LoadFailed:e.isAd()?n._statusChanged(b.a.Status_AdError,r):(e._timeMark=0,n._statusChanged(b.a.Status_PlayError,r)),n.followUpNextLoadFlag||(n.followUpNextLoadFlag=!0,e.fire(b.a.NTF_FollowUpNextLoad,"")),I.a.stopHeartBeat();break;case Qu.Status_Play:n._statusChanged(b.a.Status_Play,r);break;case Qu.Status_Will_Stoped:e.isAd()&&n._statusChanged(b.a.Status_AdWillPlayEnded,r)}})),[[Qu.NTF_CanPlayThrough,b.a.NTF_CanPlayThrough,b.a.NTF_AD_CanPlayThrough],[Qu.NTF_VolumeChanged,b.a.NTF_VolumeChanged,b.a.NTF_AD_VolumeChanged],[Qu.NTF_DurationChanged,b.a.NTF_DurationChanged,b.a.NTF_AD_DurationChanged],[Qu.NTF_TimeUpdate,b.a.NTF_TimeUpdate,b.a.NTF_AD_TimeUpdate],[Qu.NTF_Progress,b.a.NTF_Progress,b.a.NTF_AD_Progress],[Qu.NTF_RateChanged,b.a.NTF_RateChanged,b.a.NTF_AD_RateChanged]].forEach((function(t){t[0]==Qu.NTF_TimeUpdate?e.on(t[0],(function(n){var r=(new Date).getTime();0===e._timeMark&&(e._timeMark=r),e.isAd()||e.isPatch()||e.currStatus==Qu.Status_Stalled||e.currStatus==Qu.Status_Waiting||e.currStatus==Qu.Status_Paused||e.currStatus==Qu.Status_Stoped||e.currStatus==Qu.Status_LoadFailed||(e._playingDuration+=r-e._timeMark,e._playingSpend+=r-e._timeMark),e._timeMark=r,e.fire(e.isAd()?t[2]:t[1],n)})):e.on(t[0],(function(n){e.fire(e.isAd()?t[2]:t[1],n)}))}))}},{key:"initFeatureDuration",value:function(){var e=this,t=this.proxy;this.lastCurrentTime=undefined,t.on(Qu.NTF_TimeUpdate,(function(){if(!t.isAd()&&!t.isPatch()){var n=t.getCurrenttime();e.lastCurrentTime=n;var r=1e3*t.getCurrenttime();t.checkAppendPatch(),t.checkAuthTime(r),e._checkSecondAuthTime(r)}}))}},{key:"updateStatusPool",value:function(e){var t=this.statusPool;switch(e){case b.a.Status_StartPlay:t.add([b.a.Status_StartPlay],!0);break;case b.a.Status_EveryStartPlay:t.add([b.a.Status_EveryStartPlay]),Rd.noticeSenderFlush();break;case b.a.Status_AdStartPlay:t.add([b.a.Status_AdStartPlay],!0);break;case b.a.Status_ADEveryStartPlay:t.add([b.a.Status_ADEveryStartPlay]),Rd.noticeSenderFlush();break;case b.a.Status_Playing:t.add([b.a.Status_Play,b.a.Status_Playing]),t.remove([b.a.Status_Idle,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play,b.a.Status_Paused,b.a.Status_Waiting]);break;case b.a.Status_Paused:t.add(b.a.Status_Paused),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play]);break;case b.a.Status_Waiting:t.add(b.a.Status_Waiting),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Paused,b.a.Status_PlayError,b.a.Status_Stoped,b.a.Status_End_Play]);break;case b.a.Status_PlayError:t.add(b.a.Status_PlayError),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing]),Rd.noticeSenderFlush();break;case b.a.Status_Stoped:t.add(b.a.Status_Stoped),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting]);break;case b.a.Status_End_Play:t.add(b.a.Status_End_Play),t.remove([b.a.Status_Idle,b.a.Status_Play,b.a.Status_Playing,b.a.Status_Waiting])}}},{key:"getData",value:function(){var e=this.engine,t=e.movieinfo,n=e.playerVersion,r={},i=t.current;return r.tvid=i.tvid,r.vid=i.vid,r.albumId=i.albumId||"",r.cid=i.cid||"",r.duration=i.duration||"",r.privateVideo="0",r.origin="",r.playerVersion=n,r}},{key:"_checkSecondAuthTime",value:function(e){var t=this,n=this.logger,r=this.engine,i=this.proxy,a=i.kiwi,o=r.movieinfo,s=i._playingSpend,c=o.current;if(!this._isRequestAuthing&&c.isVIP&&!c.hasSendSencondAuthRemote&&s>c.authRTime)try{var u=o.getVDInfo(),d={};if("ts"===u.fileFormat||"mp4"===u.fileFormat)Object(w.a)(d,c.authShare),Object(w.a)(d,{tvid:c.tvid,aid:c.albumId,vid:u.vid,cid:c.cid,timeSpan:Math.floor(1e3*i.getCurrenttime()),fileFormat:u.fileFormat,shareFlag:1});else{if("f4v"!==u.fileFormat)return;for(var l,f=0;f<a.fragments.length;f++)if(e/1e3<=a.fragments[f].endTime){l=a.fragments[f];break}l||(l=a.fragments[0]);var h=l.uri.toString();d=W.a.query2Json(h);var p=W.a.filename(window.location.protocol+""+h);Object(w.a)(d,{filename:p,tvid:c.tvid,aid:c.albumId,fileFormat:u.fileFormat,shareFlag:1})}this._isRequestAuthing=!0,N.request(d,(function(){n.debug("second boss "),t._isRequestAuthing=!1,c.hasSendSencondAuthRemote=!0}),(function(){t._isRequestAuthing=!1,c.hasSendSencondAuthRemote=!0}))}catch(_){n.error(_&&_.stack?_.stack:_)}}},{key:"destory",value:function(){var e=this.proxy.kiwi;e.off(Wu.ERROR,this.onKernelError),e.off(Wu.STATE_CHANGE,this.onStatusChanged),e.off(Wu.MSE_ATTACHING,this.onMediaAttaching),e.off(Wu.BUFFER_CREATED,this.onMediaBufferCreated),e.off(Wu.BUFFER_APPENDING,this.onMediaBufferAppending),e.off(Wu.BUFFER_APPENDED,this.onMediaBufferAppended),e.off(Wu.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),e.off(Wu.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),e.off(Wu.DNS_PARSER_SUCCESS,this.onDNSParser),window.removeEventListener("beforeunload",this.unloadEvent),this.lastCurrentTime=undefined}},{key:"initKernelEvent",value:function(){var e=this,t=this.proxy.kiwi;this.onKernelError=function(t){return e._onKernelError(t)},this.onStatusChanged=function(t){return e._onStatusChanged(t)},this.onMediaAttaching=function(t){return e._onMediaAttaching(t)},this.onMediaBufferCreated=function(t){return e._onMediaBufferCreated(t)},this.onMediaBufferAppending=function(t){return e._onMediaBufferAppending(t)},this.onMediaBufferAppended=function(t){return e._onMediaBufferAppended(t)},this.onDataSourceStageSwitching=function(t){return e._onDataSourceStageSwitching(t)},this.onDataSourceStageSwitched=function(t){return e._onDataSourceStageSwitched(t)},this.onDNSParser=function(t){return e._onDNSParser(t)},t.on(Wu.ERROR,this.onKernelError),t.on(Wu.STATE_CHANGE,this.onStatusChanged),t.on(Wu.BUFFER_CREATED,this.onMediaBufferCreated),t.on(Wu.BUFFER_APPENDING,this.onMediaBufferAppending),t.on(Wu.BUFFER_APPENDED,this.onMediaBufferAppended),t.on(Wu.MSE_ATTACHING,this.onMediaAttaching),t.on(Wu.TIMELINE_SWITCHING,this.onDataSourceStageSwitching),t.on(Wu.TIMELINE_SWITCHED,this.onDataSourceStageSwitched),t.on(Wu.DNS_PARSER_SUCCESS,this.onDNSParser)}},{key:"_onKernelError",value:function(e){var t=e.severity,n=e.category,r=e.code,i=e.data&&e.data.length>0&&e.data[0]?e.data[0].gas:null,a=this.proxy,o=this.logger,s=this.engine,c=s.pingbackQOS,u=s.pingbackV6,d=s.movieinfo;if(r==zu.DATA_AUTH_Error&&"CDN"==s.getCurrLoaderMode()&&this._dashAuthNum<this._dashAuthMax){var l=d.getVDInfo();this._dashAuthNum++,o.log("kiwi auth error, num="+this._dashAuthNum),a.switchVdAction({vd:l.vd,bid:l.bid,fileFormat:l.fileFormat})}else if(t===be.a.RECOVERABLE&&(r===zu.MEDIA_HIGH_BUFFER&&this._recoverMediaPerNum<this._recoverMediaMax||r!==zu.MEDIA_HIGH_BUFFER&&this._recoverMediaNum<this._recoverMediaMax)){var f=a.getCurrenttime(),h=this._recoverMediaNum;r==zu.MEDIA_HIGH_BUFFER?(this._recoverMediaPerNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaPerNum++,h=this._recoverMediaPerNum):(this._recoverMediaNum>0&&f+1<a.getDuration()&&(f+=1),this._recoverMediaNum++,h=this._recoverMediaNum),1==h&&c.sendLogToCompass("KIWIR-"+ke.a[n]+"-"+r);var p=Ku.a.KIWIR+"-"+r+"-"+h;u.sendErrorPlayPingback("",p),a.hasSeeking=!0,o.warn(p),a.kiwi.recoverMedia()}else if(t===be.a.IGNORABLE){if(a.isAd()){var _=Ku.a.KIWI+"-"+r;c.sendLogToCompass(Ku.a.AD+"-"+_),u.sendErrorPlayPingback("",_)}a._statusChanged({status:Qu.Status_LoadFailed,actionType:!1,gas:i||s._getCurrentGas()})}else if(a._statusChanged({status:Qu.Status_LoadFailed,actionType:!1,gas:i||a.getCurrentGas()}),a.isAd()){var v=Ku.a.KIWI+"-4703";c.sendLogToCompass(Ku.a.AD+"-"+v),u.sendErrorPlayPingback("",v),o.warn("kernel error: KIWI-"+r)}else o.error("kernel error: "+ke.a[n]+"-"+r+", "+e.data.join("-")+", recoveryNum="+this._recoverMediaNum),this.brokedown(Ku.a.KIWI,r)}},{key:"_onStatusChanged",value:function(e){var t=this,n=this.engine,r=this.proxy,i=this.logger,a=this.statusPool,o=n.sptr,s=n.sbtr,c=n.pingbackV6,u=n.pingbackQOS,d=e.state;"playing"!==d&&"pause"!==d&&"stop"!==d&&"error"!==d||(r.hasSeeking=!1);var l=r.isPatch();if(!l||-1!==["loadedmetadata","playing","ended"].indexOf(d))switch(d){case"loadedmetadata":if(n.autoplay&&this._needPlay&&!r._videoSwitchPause){if(n.isPatch())return void r.play();if(n.errorcode&&"A00302"!==n.errorcode.code&&r.isAd())return;this._needPlay=!1,this._clearWaitingTimer();var f=r.play();f&&(r._duringPlay=!0,f.then((function(){r._duringPlay=!1,n.mutedstartplay=!1,i.log("Automatic playback started!")}),(function(e){e&&("NotAllowedError"===e.name||e.message&&/the user didn't interact with the document first/gi.test(e.message))?(i.warn("Automatic playback failed, muted video and then try to play!"),n.mutedstart=!0,n.setVolume(0,!0),r.fire(b.a.NTF_PLAY_MUTED,{status:"playfailmuted"}),r.play().then((function(){i.warn("Play muted playback successful!"),r._duringPlay=!1,r.fire(b.a.NTF_MutedStartPlay),n.mutedstartplay=!0}),(function(){r._duringPlay=!1,r._needPlay=!0,i.warn("Play muted playback failed, & Show a UI element to let the user manually start playback.!"),r._canGetVideoInfo(!0),r.fire(b.a.NTF_NeedUserGesture4Playback)}))):(r._duringPlay=!1,r._needPlay=!0)})))}else r.pause(),i.warn("Pause video! cause params => autoplay=false or autoplay=0 "),r._canGetVideoInfo(!0),r.fire(b.a.NTF_NeedUserGesture4Playback);r._videoSwitchPause=undefined,r._videoSwitching=undefined,r.isAd()||this._statusChanged(b.a.Status_LoadedMetaData,e);break;case"playing":r._videoSwitchPause=undefined,r.tempStore.__sendFirstFrameShow||(r.tempStore.__sendFirstFrameShow=!0,o.plyaetm=+new Date,o.adUsedTime=o.adaetm-o.adastm,o.plyUsedTime=o.plyaetm-o.plyastm,o.ffetm=o.plyaetm,r.isAd()?(o.ffstm=o.psdklstm-1,o.ffetm=o.psdklstm-1,o.vcletm=o.plyaetm):(o.vclstm=o.psdklstm-1,o.vcletm=o.psdklstm-1,o.ffetm=o.plyaetm),this.getUserIpInfo()),r._paused=!1;var h={status:Qu.Status_Play,actionType:r._checkActionType(Qu.Status_Play)},p=r.currStatus,_=r.isDelayPlay(),v=!1;if(s.isSeekingStatus()&&s.mediaPlaying(),r._statusChanged(h),r.isAd())r._patchFirstPlay=!1,r._ADfirstPlay&&(r._ADfirstPlay=!1,r._canGetVideoInfo(!0),this._statusChanged(b.a.Status_AdStartPlay,h),i.log("ad start play,params: info = cur ad!")),a.has(b.a.Status_ADEveryStartPlay)||this._statusChanged(b.a.Status_ADEveryStartPlay,h),"play"===W.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-AD"),this._statusChanged(b.a.Status_AdPlaying,h);else{if(r._firstPlay&&(r._firstPlay=!1,v=!0,r._canGetVideoInfo(!0),this._statusChanged(b.a.Status_StartPlay,h),n.autoVdUsing&&this.proxy.setDefList()),a.has(b.a.Status_EveryStartPlay)||this._statusChanged(b.a.Status_EveryStartPlay,h),l)return r._patchFirstPlay&&(r._patchFirstPlay=!1,this._statusChanged(b.a.Status_PatchStartplay,h)),void this._statusChanged(b.a.Status_Playing,h);r._patchFirstPlay=!0,this._statusChanged(b.a.Status_Playing,h),v&&c.sendTimingPingback(),p!==b.a.Status_Waiting&&p!==b.a.Status_Play||c.sendPlayingPingback(),r.tempStore.__sendMovieFirstFrameShow||(r.tempStore.__sendMovieFirstFrameShow=!0,c.sendStartPlayPingback(),u.sendPlayTimeRecord(),"play"===W.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-MOVIE-".concat(r.kiwi.currentLoaderMode.toUpperCase()))),I.a.openHeartBeat(),I.a.keepalive()}if(I.a.updateVipTypes(),!this.followUpNextLoadFlag){this.followUpNextLoadFlag=!0;var g={};n.isInteractVideo&&(g.uniqueId=n.iv_state.uniqueId,g.isInteractVideo=!0,g.tvid=n.getMovieInfo().tvid,g.vid=n.getMovieInfo().vid),r.fire(b.a.NTF_FollowUpNextLoad,g)}_&&r.clearDelayPlayInfo(!1),r.tempStore.__nsta||(r.tempStore.__nsta=!0,n.notyfyADInfo({type:"video-play"})),r.tempStore.__sendADStartPPB||(r.tempStore.__sendADStartPPB=!0,c.sendADStartPlayPingback()),this.sendStuckdetl(2),s.isSeekingStatus()&&(s.end(),u.sendSeekBenchmark(),"seek"===W.a.query("__pmobius__")&&u.sendLogToCompass("MOBIUS-SEEK-".concat(s.cost))),r.video().blobUrlMalformed&&(r.video().blobUrlMalformed=!1,u.sendLogToCompass("URLBLOB_WAKED")),this._clearWaitingTimer(),this._dashAuthNum=0,this._recoverMediaPerNum=0;break;case"pause":r._paused=!0;var y={status:Qu.Status_Paused,actionType:r._checkActionType(Qu.Status_Paused)};r._statusChanged(y),r.isAd()?this._statusChanged(b.a.Status_AdPaused,y):(r._timeMark=0,this._statusChanged(b.a.Status_Paused,y),I.a.stopHeartBeat());break;case"waiting":r._paused=!0;var m={status:Qu.Status_Waiting,actionType:r._checkActionType(Qu.Status_Waiting)},k=r.isAd();r._statusChanged(m),k?this._statusChanged(b.a.Status_AdWaiting,m):(r._timeMark=0,this._statusChanged(b.a.Status_Waiting,m),I.a.stopHeartBeat()),r.hasSeeking||r.kiwi.rebooting||!r.tempStore.__nsta||(this._clearWaitingTimer(),this._waitingStartTime=+new Date,this.waitingTimer=setTimeout((function(){c.sendWaitingPingback(k),clearTimeout(t.waitingTimer)}),1500));break;case"seeking":var x=r.getCurrenttime(),S=r.getDuration();r._videoSwitchPause=undefined,r._paused=!0,s.mediaSeeking(),r.fire(r.isAd()?b.a.NTF_AD_Seeking:b.a.NTF_Seeking,{current:x,duration:S,actionType:r._checkActionType(Qu.NTF_Seeking)}),this.lastCurrentTime=undefined;break;case"seeked":var T=r.getCurrenttime(),P=r.getDuration();this._clearWaitingTimer(),r.hasSeeking=!1,s.mediaSeeked(),r.fire(r.isAd()?b.a.NTF_AD_Seeked:b.a.NTF_Seeked,{current:T,duration:P,actionType:Qu.Action_Type_Code});break;case"progress":r.fire(Qu.NTF_Progress,{buffer:r.getBufferTime()});break;case"EOR":n.episode.finishPres(n.getMovieInfo().tvid,!0);break;case"EOP":r._statusChanged({status:Qu.Status_Loaddone,actionType:!1});break;case"willended":r._statusChanged({status:Qu.Status_Will_Stoped,actionType:!1});break;case"beforeended":r.kiwi.loop=n.cyclePlay;break;case"ended":r._paused=!0;var w=n.getMovieInfo(),A={status:Qu.Status_Stoped};if(r.isAd()||!r.isAd()&&r.checkAuthTime(w.isVIP&&w.previewTime<Infinity?w.previewTime+1:1e3*r.getCurrenttime())){if(r._statusChanged(A),this._clearWaitingTimer(),r.isAd())this._statusChanged(b.a.Status_AdPlayEnded,A);else r._timeMark=0,r.isLast()&&this._statusChanged(b.a.Status_Stoped,A);I.a.stopHeartBeat()}break;case"loadstart":(r.isAd()||e.gas)&&r._statusChanged({status:Qu.Status_Loadstart,eventOrigin:"ad",gas:e.gas});break;case"loaderseek":s.isSeekingStatus()&&s.seekLoader();break;case"loaderpump":s.isSeekingStatus()&&s.pumpLoader(e.data);break;case"muxswallow":s.isSeekingStatus()&&s.muxSwallow();break;case"muxspit":s.isSeekingStatus()&&s.muxspit()}}},{key:"_onMediaBufferCreated",value:function(){this._needPlay=!0}},{key:"_onMediaBufferAppending",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppending()}},{key:"_onMediaBufferAppended",value:function(){var e=this.engine.sbtr;e.isSeekingStatus()&&e.sbAppended()}},{key:"_onMediaAttaching",value:function(){this.proxy.fire(b.a.NTF_SRC_Attaching)}},{key:"_onDataSourceStageSwitching",value:function(){var e=this.proxy;if(clearTimeout(e._switchDelayTimer),clearTimeout(e._switchAudioDelayTimer),e._switchDelayTimer=null,e._switchAudioDelayTimer=null,e.switchVmsRequest&&e.switchVmsRequest){var t=e.switchVmsRequest.getXhrRequest();t&&t.abort&&t.abort()}}},{key:"_onDataSourceStageSwitched",value:function(){this._recoverMediaNum=0}},{key:"_onDNSParser",value:function(e){this.logger.info("DNSParser => "+JSON.stringify(e)),this.engine.pingbackQOS.sendQOSReport({type:"DNSParser",para:e})}},{key:"brokedown",value:function(e,t,n){var r=this.proxy,i=this.engine,a=this.logger,o=i.pingbackV6,s=i.pingbackQOS;r.pause();var c=this.getData();c.type=e,c.code=t,c.st=n||"";var u=e+"-"+t;if(n&&(u+="-"+n),512==n&&nd)r.fire(b.a.NTF_BuyPlay,c);else{a.info("playproxy brokedown, pingback, ec = ".concat(u)),t&&t!==Ku.a.P07001&&o.sendErrorPlayPingback("",u,n),i.errorcode=c,r.fire(b.a.NTF_Error,c),this.followUpNextLoadFlag||(this.followUpNextLoadFlag=!0,r.fire(b.a.NTF_FollowUpNextLoad,""));var d=R.vmsUrl,l=this;Pd(d,(function(e){l.logger.info("request, dnsparser, info = "+e+",url = "+d),l.getUserIpInfo((function(){s.sendLogToCompass(u)}))}))}}},{key:"getUserIpInfo",value:function(e){var t=this;I.a.getUserIPInfo((function(n){var r=I.a.getUid(),i="";r||(i=T.a.get("P00002")),t.logger.info("user info, uid = "+r+", P00002 = "+i+", P00003 = "+T.a.get("P00003")+",v.f4v = "+JSON.stringify(n)),e&&e()}))}},{key:"_clearWaitingTimer",value:function(){clearTimeout(this.waitingTimer),this.waitingTimer=0,this._waitingStartTime=0}},{key:"sendStuckdetl",value:function(e){this.waitingTimer>0&&(this.engine.pingbackQOS.sendStuckdetl(e,this._waitingStartTime,this.proxy.isAd()),this._clearWaitingTimer())}}]),e}();function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ud(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var jd=window.location.protocol,Vd=function(e){d()(n,e);var t=Ud(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).logger=new E.a("PlayProxy[".concat(e.id,"]")),r.engine=e,r.knlRevision=Y,r.currStatus="",r._firstPlay=!0,r._ADfirstPlay=!0,r._patchFirstPlay=!0,r._timeMark=0,r._vdsSwitch=!1,r._playingDuration=0,r._playingSpend=0,r._skipHT=0,r._skipTT=0,r.__canGetVideoInfo=!1,r._autoVdEnable=!1,r._autoVdUsing=!1,r.autoVdValue=-1,r.tempStore={},r.failProgramKey=undefined,r._isAllowSeek=!0,r._isDelayPlay=!1,r._delayPlayTime=0,r._delayTimer=null,r._absDashRequests=[],r._absDashResponses=[],r._isMobiusTest="performance"===W.a.query("__pmobius__")&&"true"==W.a.query("debug"),r}return o()(n,[{key:"canaryCdnLoader",value:function(){if(!this.p2pEnabled())return!0;var e=W.a.query("__ploader__");if(e){if("cdn"===e)return!0;if("p2p"===e)return!1}return!1}},{key:"init",value:function(e,t){m()(p()(n.prototype),"init",this).call(this,e);var r=this,i=this.engine,a=i.pack,o=i.i18n,s=i.pingbackQOS,c=Ju();this.useVP9P2P=c.canaryVP9_P2P,this.useAV1P2P=c.canaryAV1_P2P,this.useCDNLoader=this.canaryCdnLoader(o,t),this.provider=new Sd(this.engine),a.ad||(this.adDisable=!0);var u=new E.a("");Object(G.b)(u),u.on("needFireLog",(function(){s.sendLogToCompass("H264-SLICE-ALGORITHM")}));var d,l,f=(d=e,l={muxEnableWorker:!0,timeline:"timeline/pcw-vod",externals:{cmd5x:Gu.a.cmd5x}},G.a.log("kiwi version is ".concat(Y)),new ju(d,l));window.kiwi=this.kiwi=f,f.on(Wu.FPS_REPORT,(function(e){r.fire(b.a.NTF_FPS_REPORT,e)})),this._eventer=new Bd(this.engine);var h=!!this.engine.params.sourcePage&&"home"==this.engine.params.sourcePage;o.isTWLocale()||h||this.useCDNLoader||0!=this.engine.userSetBid||(this._autoVdEnable=!0,this._autoVdUsing=!0,1===parseInt(T.a.get("QP0025"),10)&&(this._autoVdUsing=!1)),this.getAdLog()}},{key:"p2pEnabled",value:function(e){if(!window.Map||A.a.browser.WECHAT)return!1;if(this.engine.params.feedMode||this.engine.isMini)return!1;if(e){var t=this._transformFFToKernelKnown(e),n="false"!==V.a.read("QiyiPlayerP2P");return t===Hu.JDASH||n&&(t===Hu.DASH_AV1||t===Hu.DASH_VP9||t===Hu.HLS&&"265ts"!==e)}return!0}},{key:"load",value:function(e){var t=this,n=this.engine,r=this.logger,i=this.provider,a=this.kiwi,o=this.engine,s=o.episode,c=o.movieinfo,u=e.tvid,d=e.vid,l=e.ugcAuthKey,f=e.imageLoader,h=e.startPlayTime,p=e.isSupportAI,_=e.isAdvanceEnd,v=e.share_sTime,g=e.share_eTime,y=this.hasPreload(u),m="load movieInfo, tvid=".concat(u,", vid=").concat(d);if(n.preVideoParam||(n.preVideoParam=e),c.tvid!=u||c.vid!==d||l||n.isInteractVideo){var k="check failProgramKey, tvid = ".concat(u," , key = ").concat(this.failProgramKey);if(this.failProgramKey&&this.failProgramKey.tvid&&(k+=",key.tvid = ".concat(this.failProgramKey.tvid,", num = ").concat(this.failProgramKey.num),this.failProgramKey.tvid==u&&this.failProgramKey.num>=3))r.info(k);else{parseInt(u,10)<9e7&&r.error("Core Player load movie info error,params: msg = "+u+"is invalid qipu id"),this._firstPlay=!0,this._ADfirstPlay=!0,this._patchFirstPlay=!0,c.setStartPlayTime(h>0?h:0),c.tvid&&s.clear(c.tvid),l&&(c.ugcAuthKey=l||"",i.clearCache(u,d)),n.adWholeCorner=!1;var S=c.current;c.current={tvid:u,vid:d,albumId:e.albumId,adPlayerID:e.cid,imageLoader:f,isPreload:y,isAdvanceEnd:e.isAdvanceEnd},S.tvid&&(m+=", pretvid=".concat(S.tvid),this.fire(b.a.NTF_VideoChange,{preMovieInfo:S,curMovieInfo:c.current})),s.valid(u,!0),clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.tempStore={},this.fire(b.a.NTF_VRSStart,{data:this._eventer.getData(),movieinfo:c.current}),this.clearDelayPlayInfo(!1),r.info(m),i.getPromise(u,d).then((function(i){if(i.originalData.data.p.bt&&(t._skipHT=i.originalData.data.p.bt,t._skipTT=i.originalData.data.p.et),i.parts instanceof x){var a=t.getPatchData(i.parts,i);i.parts=a,r.info("load movieInfo ok, has parts, type = ".concat(a.type))}i.imageLoader=f||"",i.isSupportAI=Boolean(p),i.isAdvanceEnd=Boolean(_),e.cid&&(i.adPlayerID=e.cid),c["switch"](i),c.initShareTime(v,g);var o=c.current;s.setInfo(u,o);var d=c.getVDInfo();o.duration=d.duration,t.fire(b.a.NTF_VRSReady,{data:t._eventer.getData(),movieinfo:o}),n.eventlog.vrsready=!0,S.tvid&&t.fireChanged(),(t.adDisable||s.finishPres(u))&&t.concatCurFeature(u),o.isPreload=!1}),(function(e){var n="check failProgramKey ++, tvid = ".concat(u," , key = ").concat(t.failProgramKey);t.failProgramKey?t.failProgramKey.tvid==u&&t.failProgramKey.num++:t.failProgramKey={tvid:u,num:1},n+=",key.tvid = ".concat(t.failProgramKey.tvid,", num = ").concat(t.failProgramKey.num),r.info(n),c.setInfo(e.movieinfo);var i=e.level,o=e.type,s=e.code,d=e.st;switch(i){case 0:a.reset(),t._eventer.brokedown(o,s,d);break;case 1:a.reset(),t.noticeRecharge(s);break;case 2:a.reset(),t._eventer.brokedown(o,s,d);break;default:r.error(e&&e.stack?e.stack:e)}t.fire(b.a.NTF_VRSDone),S.tvid&&t.fireChanged()}))}}else r.error("tvid vid should not the same")}},{key:"preload",value:function(e,t){var n=this,r=this.engine,i=r.episode,a=r.movieinfo;i.valid(e,!0),this.provider.getPromise(e,t).then((function(t){n.checkVipPay(t.vipBlock,t.vipTheatre,t.albumId,t.authTipType,(function(r){if(n.logger.info("preload movieInfo ok,checkVipPay = ".concat(r," ")),!r){if(t.parts instanceof x){var o=n.getPatchData(t.parts,t);t.parts=o,n.logger.info("preload movieInfo ok, has parts, type = ".concat(o.type))}a.preload(t),i.setInfo(e,t),n.fire(b.a.NTF_VRSPreloaded,{movieinfo:t})}}))}),(function(e){n.logger.warn("preload movie which requires auth: "+E.a.stringify(e))}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"getCurrentGas",value:function(){var e=this.engine;return this.isAd()?this.kiwi.getCurrentADGas():{videoEventId:H.a.getEventId(e.movieinfo.tvid)}}},{key:"isAd",value:function(){return this.kiwi.isAd}},{key:"isPatch",value:function(){return!!this.engine.movieinfo.parts&&this.kiwi.isQBBPatching}},{key:"isLast",value:function(){return!!this.kiwi.eot}},{key:"_transformFFToKernelKnown",value:function(e){var t;if(e in Hu)t=e;else switch(e){case"flv":case"f4v":t=Hu.FLV;break;case"ts":case"265ts":t=Hu.HLS;break;case"m4s":t=Hu.JDASH;break;case"dash_vp9":t=Hu.DASH_VP9;break;case"dash_av1":t=Hu.DASH_AV1;break;default:var n="unhandled movie info fileFormat: ".concat(e,".");throw this.logger.error(n),new Error(n)}return t}},{key:"_getManifest",value:function(e,t){var n,r,i,a,o,s=[],c=this.p2pEnabled(e.fileFormat),u=(this.engine.i18n,t.isVIP),d=t.boss,l=t.vid,f=t.tvid,h=t.albumId,p=t.baseUrl;switch(e.fileFormat){case"ts":case"265ts":n=Hu.HLS,r={m3u8:e.playlist,bid:e.bid},s=["manifest/hls",c?"loader/p2p":"loader/hls","mux/m2ts-mp4","renderer/mse"];break;case"f4v":n=Hu.F4V,s=["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],r={bid:e.bid,fs:[]},o=e.playlist.length,a+="&su="+(i=S.a.getFluid()),a+="&mi=tv_"+h+"_"+f+"_"+l,a+="&ct="+e.vd,a+="&retry=",a+="&client=",a+="&z=",a+="&bt=",a+="&e=";for(var _=N.getPreviewTime(f),v=0,y=0;y<o;y++){var m=e.playlist[y],b=m.d,k=m.l;if(_>0&&v>=_)break;v=b;var x=jd+p+k+(/\.f4v$/gi.test(k)?"?":"&")+a;if(u){-1==x.indexOf("&vid=")&&(x+="vid="+l);var T=d.data.t;x+="&t="+T,-1==(x+="&cid=afbe8fd3d73448c9").indexOf("&ib=")&&(x+="&ib=4"),-1==x.indexOf("&ptime=")&&(x+="&ptime="+(_=_==Infinity?0:_)),x+="&QY00001="+N.getAuthUid(f);var P=T+W.a.filename(x);x+="&ibt="+Gu.a.cmd5x(P,P)}-1==x.indexOf("&pv=")&&(x+="&pv=0.1"),-1==x.indexOf("&qyid=")&&(x+="&qyid="+i),r.fs.push({duration:b/1e3,url:x})}break;case"m4s":n=Hu.JDASH,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({bid:e.bid},e.playlist),s=["manifest/jdash","loader/p2p","renderer/mse"];break;case"mp4":n=Hu.MP4,r={data:e.m3u8,bid:e.bid,duration:e.duration,size:e.vsize};break;case"dash_vp9":case"dash_av1":"dash_vp9"===e.fileFormat?n=Hu.DASH_VP9:"dash_av1"===e.fileFormat?n=Hu.DASH_AV1:this.logger.error("DASH unknown codec ".concat(e.code)),s=["manifest/dash",c?"loader/p2p":"loader/dash","renderer/mse"],r={mpd:e.playlist,bid:e.bid}}if(c){r.other={tvid:t.tvid,vid:e.vid,vsize:e.vsize,aid:t.albumId,vidlist:[]};for(var I="",w=0;w<t.vidl.length;w++){var A=t.vidl[w].bid,E=t.vidl[w].vid,D=t.vidl[w].fileFormat;I+=", ".concat(A,"-").concat(E,"-").concat(D),r.other.vidlist.push({bid:A,vid:E})}var q=r.other.vidlist;this.logger.info("vidlist: ".concat(I,", length = ").concat(q.length))}return{components:s,manifestType:n,manifestContent:r}}},{key:"getManifestTypes",value:function(){return Hu}},{key:"clear",value:function(){var e=this.engine,t=e.adproxy,n=e.episode;this.adDisable||t.clear(),this._vdsSwitch=!1,this.currStatus="",clearTimeout(this._switchDelayTimer),clearTimeout(this._switchAudioDelayTimer),this.kiwi.reset(),n.clearAll(),this._clearAbsDashHttp(),this.engine.errorcode=undefined}},{key:"getAdLog",value:function(){var e=this;clearTimeout(this.getLogTimeout);var t=this.engine.adproxy,n="";!this.adDisable&&t&&(n=t.getAdLog()),this.logger.adInfo(n),this.getLogTimeout=setTimeout((function(){e.getAdLog()}),3e4)}},{key:"destory",value:function(){this.clear(),this.provider.clearAll(),this._eventer.destory(),this.kiwi.destroy(),this.removeAllEventsListener()}},{key:"_getDataFlow",value:function(e){var t=undefined,n="getDataFlow, ..";if(e&&(t={},e.segments&&(t.stream=e.segments,n="getDataFlow, segments length = ".concat(t.stream.length)),e.tracks)){var r=e.tracks,i=r.video,a=r.audio;t.audio={duration:a.duration,init:a.initSegment,segments:a.segments},t.video={duration:i.duration,init:i.initSegment,segments:i.segments},n="getDataFlow, audio.length = ".concat(a.segments.length," video.length=").concat(i.segments.length)}return this.logger.info(n),t}},{key:"getDynamicArgs",value:function(){var e=this,t=this.engine;if(!this.p2pEnabled())return null;var n=t.pingbackV6,r=t.pingbackQOS;return{checkIsMobius:function(){return e._isMobiusTest},switchAutoDef:function(r){var i=k.a.getOldVd(r);if(e.isAd())e.logger.info("p2p dashUpdated error , levelID or streamInfo is undefined");else{var a=e.getCurrentVD(),o=k.a.getNewVd(a);e.logger.info("p2p switchAutoDef, auto=".concat(t.autoVdUsing,", vd = ").concat(a," -> ").concat(i,", levelID = ").concat(o," -> ").concat(r)),e.switchVdAction(i,!0),t.autoVdUsing&&(parseInt(r)>parseInt(o)?n.sendAutoUpToVDPingback(i,a):parseInt(r)<parseInt(o)&&n.sendAutoDwnToVDPingback(i,a))}},noticeRefreshMovieData:function(){e.provider.clearAll(),e.setDefList(!0)},getUserInfo:function(e){I.a.isVip((function(t){e({uid:I.a.getUid(),isVip:t})}))},sendPingBack:function(e){r.sendQOSReport(e)},startPlayed:function(){return!e._firstPlay},abs:!0}}},{key:"concatCurFeature",value:function(e){var t=this.engine,n=this.provider,r=this.logger,i=this.kiwi,a=t.movieinfo,o=t.episode,s=t.sptr,c=a.getVDInfo(),u=a.current,d=a.startPlayTime,l=n.getPid(u.tvid,u.vid),f=n.getData(l),h=this._getManifest(c,u),p=h.manifestContent,_=h.components;if(this.p2pEnabled(c.fileFormat)&&(p.other.feed=!0,p.other.fromlist=!1,p.other.listdone=!1),f&&!o.finishFeatures(e)){c.duration>0&&(u.duration=c.duration,d>=u.duration&&(a.startPlayTime=0));var v=a.getPlayHead(),g=v.timeRanges,y=v.playHeadTime;if(this._eventer._recoverMediaNum=0,p&&(o.finishFeatures(e,!0),r.info("concat cur episode: ".concat(e,", vd:").concat(c.vd,", bid:").concat(c.bid,", fileFormat:").concat(c.fileFormat,",playHeadTime:").concat(y,",timeRanges:").concat(g,"duration: ").concat(u.duration,", other: ").concat(JSON.stringify(p.other))),this.tempStore.__sendFirstFrameShow||(s.ffstm=+new Date),i.loadSource(p,y,g,{streamType:eu.Episode,components:_,dynamicArgs:this.getDynamicArgs()}),t.autoVdUsing)){var m=i.episodeStream;m&&m.loader.changeAbsState(!0)}}else r.info("".concat(l," still not ready"))}},{key:"concatPreloadFeature",value:function(e){var t=this.logger,n=this.kiwi,r=this.engine,i=r.movieinfo,a=r.episode,o=a.getInfo(e),s=i.getPlayTimeRanges(!0),c=i.getVDInfo(!0),u=this._getManifest(c,o),d=u.manifestContent,l=u.components;this.p2pEnabled(c.fileFormat)&&(d.other.feed=!0,d.other.fromlist=!1,d.other.listdone=!1),t.log("concat preload episode: ".concat(e)),a.finishFeatures(e,!0),n.loadSource(d,null,s,{isCurrent:!1,streamType:eu.Episode,components:l,dynamicArgs:this.getDynamicArgs()})}},{key:"checkPreload",value:function(){var e=!0,t=this.engine.getMovieInfo(),n=this.getCurrenttime(),r=this.getDuration();return e=(e=(e=(e=(e=e&&!this.isAd())&&!this.engine.cyclePlay)&&this.kiwi.endOfDown)&&t.previewTime===Infinity)&&r-n>=5}},{key:"getCurrenttime",value:function(){var e=0,t=this.getDuration();if(this.isAd()){var n=this._getAdTimeObj();e=n.curTime,t=n.duration}else e=this.getDecodeCurrenttime();return e<t||isNaN(t)?e:t}},{key:"getDuration",value:function(){var e=this.engine.movieinfo,t=e.current,n=e.getVDInfo();return this.isAd()?this._getAdTimeObj().duration:t.isVIP&&t.isTryWatch&&n?n.duration:this.kiwi.duration}},{key:"_getAdTimeObj",value:function(){var e=0,t=0,n=!1,r=this.engine,i=r.episode,a=r.adproxy;if(this.isAd()){var o=a.getAdInfo();if("midroll"==o.rollType){var s=i.getMids(o.videoId);s.length>0&&(n=!!s[0].isFusionMode)}if(n)e=this.kiwi.currentTime,t=this.kiwi.duration;else{e=this.kiwi.currentTime;var c=this.kiwi.findPieceAt(e);c&&(e-=c.fragment.startTime,t=c.fragment.duration)}}return{curTime:e,duration:t}}},{key:"refresh",value:function(e){var t=this.engine.movieinfo,n=t.current,r=n.tvid,i=n.vid,a=n.adPlayerID;r&&(t.next.isPreload=!1,t.clear(),this.clear(),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(b.a.Status_Idle),this.provider.clearAll(r),this.logger.log("Core Player refresh type = "+e),this.fire(b.a.NTF_VideoRefresh),this.load({tvid:r,vid:i,cid:a}))}},{key:"abortAres",value:function(){this.isAd()&&this.kiwi.abortCurrentADGas()}},{key:"abortAllAres",value:function(e,t){var n=this;setTimeout((function(){n.logger.info("abort all ".concat(e," roll, movieRecoverPoint=").concat(t));var r=null;switch(e){case"preroll":r=au.PRE_ROLL;break;case"midroll":r=au.MID_ROLL;break;case"briefRoll":r=au.INDETERMINACY_ROLL}if(t!==undefined){var i=n.isAd();n.fire(b.a.NTF_Before_Seeking,{currentTime:n.getCurrenttime(),isAd:i,gas:i?n.getCurrentGas():undefined})}n.kiwi.abortRollingStream(r,t)}),0)}},{key:"lockSeek",value:function(){this._isAllowSeek=!1}},{key:"unlockSeek",value:function(){this._isAllowSeek=!0}},{key:"pause",value:function(e,t){this._duringPlay&&!t||(this._videoSwitching&&t&&(this._videoSwitchPause=!0),this.logger.log("Engine:request pause actionType =".concat(e,", force=").concat(t)),m()(p()(n.prototype),"pause",this).call(this,e,t))}},{key:"seek",value:function(e,t,n){var r=this.getDuration();e>r&&(e=Math.floor(r));var i=this.isAd();this.logger.log("Engine:seek(".concat(e,"), duration (").concat(r,"),isManualAction=").concat(t,", isAd=").concat(i)),this.fire(b.a.NTF_Before_Seeking,{currentTime:this.getCurrenttime(),isAd:i,gas:i?this.getCurrentGas():undefined}),e=parseFloat(e),this.hasSeeking=!0,this.checkAuthTime(1e3*e)&&(t?this._currentManualAction=Qu.NTF_Seeking:this._currentCodeActionList.push(Qu.NTF_Seeking),this._isAllowSeek&&(this.checkchangerange(e),this.kiwi.currentTime=e),this.isPaused()&&!n&&this.play())}},{key:"checkchangerange",value:function(e){if(this.engine.skip&&this._skipTT>0&&e>this._skipTT){var t=[[0,this.getDuration()]];this.kiwi.timeRanges=t}}},{key:"checkAuthTime",value:function(e){var t=!0,n=this.engine.getMovieInfo();return n.isVIP&&e>=n.previewTime&&(this.noticeRecharge("Q00304"),t=!1),t}},{key:"noticeVidChanged",value:function(e,t){var n=this.engine.movieinfo;e?(n.vd=t,this.engine.vd=t,this.logger.log("definition changed: ".concat(t))):this.logger.log("definition changeFail: ".concat(t)),this._vdsSwitch=!1,this.fire(b.a.NTF_DefinitionSwitched,{curVD:t,success:e,isManualAction:this.__isManualAction}),this.__isManualAction=!1}},{key:"switchData",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=this.kiwi,i=this.engine,a=this.logger,o=i.movieinfo,s=i.autoVdUsing,c=!1,u=e.vd,d=this._getManifest(e,o.current),l=d.manifestType,f=d.manifestContent,h=d.components;if(r.allowSwitchVariant){var p=r.currentManifestType,_=null!==p&&l!==p,v=!(!s||!n),g=!v&&l!==Hu.DASH_AV1&&l!=Hu.DASH_VP9&&l!==Hu.JDASH;_&&(c=!0);var y=this.p2pEnabled(e.fileFormat);y&&(f.other.feed=!n,f.other.fromlist=!1,f.other.listdone=!1);var m,b=o.getVDInfo();if(b.fileFormat!==e.fileFormat&&(m={components:h}),a.info("switchVD: ".concat(b.vd," -> ").concat(e.vd,", ").concat(b.bid," -> ").concat(e.bid,", ").concat(b.fileFormat," -> ").concat(e.fileFormat,", fromp2p = ").concat(n,", absing = ").concat(s)),r.switchLevel(f,c,g,v,m),n)this.noticeVidChanged(!0,u);else if(c||this.video().readyState<3)this.once(Qu.NTF_TimeUpdate,(function(){t.noticeVidChanged(!0,u)}));else{var k=parseInt(1e3*r.bufferInfo.media.len/this.getPlaybackRate()+"",10);this.logger.log("will switch Variant after: "+k/1e3+"s"),this._switchDelayTimer=setTimeout((function(){t.noticeVidChanged(!0,u)}),k)}this.switchVmsRequest=this.switchVmsResponse=null}else a.warn("switchVD, failed, this stream will end, can't switch variant!")}},{key:"switchDefinition",value:function(e,t){var n=this.engine;e===this.getCurrentVD()&&!n.autoVdUsing||e===this.autoVdValue&&(n.autoVdUsing||!n.autoVdEnabled)||(e===this.autoVdValue?(this.switchVdAction(e),this.fire(b.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.fire(b.a.NTF_DefinitionSwitched,{curVD:e,success:!0,isManualAction:!0})):(this.__isManualAction=t,this._vdsSwitch=!0,this.fire(b.a.NTF_DefinitionSwitching,{vd:e,isManualAction:t}),this.switchVdAction(e)))}},{key:"switchAudioTrack",value:function(e){var t=this,n=this.engine,r=n.movieinfo,i=n.pingbackQOS,a=n.ptr,o=n.sptr,s=r.current,c=s.audl.types;if(!(c.length<=1)){s.oldLid=s.currentLid||"";var u=r.vidl,d=s.vid,l=this.getCurrentVD();this.logger.log("switch audio: ".concat(s.oldLid,"->").concat(e));for(var f=0;f<u.length;f++)if(u[f].vd==l){d=u[f].vid;break}l=k.a.getNewVd(l);for(var h=0;h<c.length;h++)c[h].id===e&&(1!==c[h].ispre?(new id).request({params:{tvid:s.tvid,vid:d,vd:l,lid:e,tryCount:0,switchvd:!0},pingback:i,ptr:a,sptr:o,hostUseIP:!1},(function(n){if(n.data&&n.data.st){var r=parseInt(n.data.st,10),i=n.data,a=i.boss_ts?"boss_ts":"boss";if(100<r&&r<200)if(i.program&&i.program.audio){i[a]&&i[a].code&&s.boss&&s.boss.data&&(s.boss=i[a]),s.audio=i.program.audio;var o=gd(s,!0);s.audl=o,o&&o.audio?t._switchAudio(o.audio,e):t.getAdFail()}else t.getAdFail();else t.getAdFail()}else t.getAdFail()}),(function(){t.getAdFail()})):this._switchAudio(null,e))}}},{key:"switchVdAction",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=this.engine,i=this.logger,a=this.kiwi,o=r.movieinfo,s=r.ptr,c=r.sptr,u=r.pingbackQOS,d=a.episodeStream;if(e==this.autoVdValue)return this._autoVdUsing=!0,d&&d.loader.changeAbsState&&d.loader.changeAbsState(!0),i.log("switchVD, changed, -> ".concat(e,", changeABS -> true, absing = ").concat(r.autoVdUsing)),this.setDefList(),void T.a.set("QP0025","0",{expires:2592e5,path:"/",domain:"iqiyi.com"});var l=o.getVDInfo(!1,e),f=this.p2pEnabled(l.fileFormat);if(f&&!n&&(i.log("switchVD, changed, -> ".concat(e,", changeABS -> false")),this._autoVdUsing=!1,T.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),d&&d.loader.changeAbsState&&d.loader.changeAbsState(!1)),l.playlist)this.switchData(l,n);else{var h=o.current,p=h.tvid,_=h.vid;i.info("switchVD, tvid=".concat(p,", vid=").concat(_,", isLogin=").concat(I.a.isLogin(),", vd=").concat(l.vd,", bid=").concat(l.bid)),this.switchVmsRequest=this.requestDash({params:{tvid:p,vid:l.vid,vd:l.bid,tryCount:0,switchvd:!0},pingback:u,ptr:s,sptr:c,hostUseIP:!1},{targetVd:l.vd,fileFormat:l.fileFormat},(function(e){if(e){for(var r=o.current.vidl,a=0;a<r.length;a++)if(r[a].vd==e.vd){r[a]=e;break}t.switchData(e,n)}else i.info("switchVD, load movieInfo from vrs failed, fromp2p = ".concat(n)),n||t.noticeVidChanged(!1,l.vd)}))}}},{key:"getAdFail",value:function(){var e=this.logger,t=this.engine,n=t.pingbackQOS,r=t.getMovieInfo();r.currentLid=r.oldLid,this.fire(b.a.NTF_AudioSwitched,{success:!1}),e.info("switch audio Fail!"),n.sendLogToCompass("KIWI-SWITCH-AUDIO-FAIL")}},{key:"_switchAudio",value:function(e,t){var n=this,r=this.logger,i=this.kiwi,a=this.engine.getMovieInfo();if(i.switchAudioTrack(e,!1),this.video().readyState<3)this.once(Qu.NTF_TimeUpdate,(function(){a.currentLid=t,n.fire(b.a.NTF_AudioSwitched,{success:!0})}));else{var o,s,c=i.bufferInfo.media,u=null!==(o=c.buffered)&&void 0!==o&&o.audio?null===(s=c.buffered)||void 0===s?void 0:s.audio:c,d=parseInt(1e3*u.len/this.getPlaybackRate()+"",10);r.log("will switch audio after: "+d/1e3+"s"),this._switchAudioDelayTimer=setTimeout((function(){a.currentLid=t,n.fire(b.a.NTF_AudioSwitched,{success:!0})}),d)}}},{key:"getBufferTime",value:function(){var e=0;return this.isAd()||(e=this.kiwi.dataBufferInfo.end),e}},{key:"setSkipPrelude",value:function(){var e=this.kiwi,t=this.engine,n=t.movieinfo,r=t.skip,i=n.getPlayTimeRanges();if(this._skipTailTipped=!1,e.timeRanges=i,n.parts)if(r){if(this._skipTT>0){var a=e.patchStream;a&&this._skipTT>0&&e["delete"](a)}}else n.parts.patchFeeded_=!1}},{key:"adjustTimeRange",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=this.engine.movieinfo,r=n.current,i=n.next,a=r;if(t&&(a=i),e.length>0){var o=a.duration,s=e[0][e[0].length-1],c=1;o>0&&s<o&&s+c>=o?s=o:s+=c,e[0][e[0].length-1]=s}return e}},{key:"getCurrentVD",value:function(){return parseInt(this.engine.movieinfo.vd,10)}},{key:"_canGetVideoInfo",value:function(e){var t=this;this.__canGetVideoInfo=e,e&&this.getVideoInfo((function(e){if(e){var n=t.engine.getMovieInfo();e.sid&&(n.sid=e.sid,n.albumId=e.sid),n.cType=e.cType}}))}},{key:"getVideoInfo",value:function(e){var t=this,n=t.engine,r=n.movieinfo,i=n.local,a=r.current,o=r.next;if(t.__canGetVideoInfo){var s=a;s.tvid||(s=o),z.a.get({tvid:s.tvid,vid:s.vid,locale:i},(function(n){n.vi&&(t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom?(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH):(n.vi.isI5Custom=!1,n.vi.IPARTMENT5_DANMUSWITCH="0")),e(n)}))}else setTimeout((function(){var n={tvid:a.tvid,vid:a.vid,albumId:a.albumId,cid:a.cid,vi:{vid:a.vid,videoQipuId:a.tvid}};t.engine.isInteractVideo&&t.engine.iv_state.isI5Custom&&(n.vi.isI5Custom=t.engine.iv_state.isI5Custom,n.vi.IPARTMENT5_DANMUSWITCH=t.engine.iv_state.others.IPARTMENT5_DANMUSWITCH),e(n)}),0)}},{key:"getVideoInfoByTvid",value:function(e,t){z.a.get({tvid:e,vid:"",locale:this.engine.local},(function(e){t(e)}))}},{key:"hasPreload",value:function(e){var t=this.engine.episode;return e+="",t.finishPres(e)&&t.finishFeatures(e)}},{key:"switchVideo",value:function(e){var t=this.logger,n=this.engine,r=n.movieinfo,i=n.pingbackV6,a=e.tvid,o=e.vid,s=e.cid,c=e.imageLoader,u=e.vfrm,d=e.vfrmblk,l=e.vfrmrst,f=e.startPlayTime,h=e.isSupportAI,p=e.share_sTime,_=e.share_eTime,v=e.isAdvanceEnd,g=e.innerIV,y=e.interactionType,m=e.isEnabledInteraction,k=r.current,x=r.next,S=!0===e.autoSwitch&&!!this.hasPreload(a,o);if(this.failProgramKey=undefined,this._videoSwitchPause=undefined,this._videoSwitching=!0,n.preVideoParam=e,a=Object(j.a)(a),parseInt(a)===parseInt(k.tvid)&&!n.isInteractVideo)t.info("switch video,params: data = "+E.a.stringify(e)+"    switch fail : Tvid is same");else{var T={vfrm:u||"",vfrmblk:d||"",vfrmrst:l||"",vfrmtp:e.autoSwitch?3:0,vvauto:e.autoSwitch?4:2,bkt:e.bkt||"",e:e.e||"",stype:e.stype||"",r_area:e.r_area||"",r_source:e.r_source||""};i.setvvfrom(e.vvfrom),i.setPlayPingbackInfo(T),i.sendEndPlayPingback(S?1:2,k.tvid);this.provider.clearAll(k.tvid),this._clearAbsDashHttp(),S||(x.isPreload=!1,this.pause(),this.clear(S),this._eventer.statusPool.removeAll(),this._eventer.statusPool.add(b.a.Status_Idle)),this._preplaying_spend=this._playingSpend,this._playingSpend=0,function(){e.autoSwitch=S;var r="\nswitch video:"+E.a.stringify(e)+", ivosRuning="+n.ivosRuning,i="\n"+new Array(r.length).join("-");t.log(i+r+i)}();var P,I=1==Number(m)&&(1==Number(y)||0==Number(y))&&!A.a.browser.EDGE;if(this.engine.isIVSubSwitch=!1,I)P=!0,n.isInteractVideo=!0,n.adPlaySource=0,n.others={},n.isIVMain=P,n.interactionMode=y+"",n.initInteractVideo({tvid:a,vid:o||n.params.vid,cid:s,imageLoader:c,resetHistory:!0});else{g?(P=a===n.iv_state.uniqueId,n.interactionMode=n.iv_state.interactionMode,n.isInteractVideo=!0,n.isIVMain=P,n.adPlaySource=61,n.isIVSubSwitch=!0):(n.isInteractVideo=!1,n.adPlaySource=0,n.others={});var w={tvid:a,vid:o||n.params.vid,cid:s,startPlayTime:f,imageLoader:c,isSupportAI:h,isAdvanceEnd:v};p!==undefined&&(w.share_sTime=p),_!==undefined&&(w.share_eTime=_),this.load(w)}}}},{key:"hasStatus",value:function(e){return this._eventer.statusPool.has(e)}},{key:"setEndPlay",value:function(e){this._eventer._statusChanged(b.a.Status_End_Play,e)}},{key:"fireChanged",value:function(){var e=this;e.getVideoInfo((function(t){var n=e._eventer.getData();n.vi=t.vi||{},n.vi.vid=n.vid,e.engine.isInteractVideo?z.a.get({tvid:e.engine.iv_state.uniqueId,vid:n.vid},(function(t){n.vi.unique_vu=t.vi.vu,e.engine.iv_state.isI5Custom&&(n.vi.isI5Custom=!0,n.vi.IPARTMENT5_DANMUSWITCH=e.engine.iv_state.others.IPARTMENT5_DANMUSWITCH||"0"),e.fire(b.a.NTF_VideoChanged,n)})):e.fire(b.a.NTF_VideoChanged,n),e.logger.info("core videoChanged")}))}},{key:"noticeRecharge",value:function(e,t,n){var r=this.engine,i=r.movieinfo,a=r.params;i.rc_code=e;var o=!1;if(i.vipTypes&&i.vipTypes.length>0)for(var s=0;s<i.vipTypes.length;s++)1==i.vipTypes[s]&&(o=!0);var c=i.vipTypes||[],u=-1!=c.indexOf(1)||-1!=c.indexOf(6);this.pause(!1,!0);var d={tvid:i.tvid,vid:i.vid,code:e,isTennisContent:o,from:t||0,origin:a.origin||a.parentId,vipTypes:i.vipTypes,s3:u?this.hasSeeking?"S109":"S110":"",s4:u?"SHIKAN":"",s2:u?window.location.href:"",emptionType:this.engine.emptionType||0};n&&""!=n&&(d.urlType=n),this.engine.isInteractVideo&&(d.isInteractVideo=!0,d.uniqueId=this.engine.iv_state.uniqueId),this.fire(b.a.NTF_Recharge,d)}},{key:"checkAppendPatch",value:function(){var e=this.engine,t=this.kiwi,n=e.movieinfo,r=e.skip,i=n.parts;if(!(r&&this._skipTT>0)&&i&&!i.patchFeeded_&&(i.patchFeeded_=!0,!t.patchStream)){var a=i.data,o=i.components;t.loadSource(a,null,[[0,Infinity]],{streamType:eu.Roll,components:o,roll:{rollType:au.POST_ROLL,category:"patch"}})}}},{key:"getPatchData",value:function(e,t){var n=null;if(e&&t){var r=this._getManifest(e,t);r.manifestType===Hu.F4V&&(r.manifestContent.isAD=!1,r.manifestContent.done=!0,r.manifestContent.rollType=au.POST_ROLL,n={type:r.manifestType,data:r.manifestContent,components:r.components})}return n}},{key:"setDelayPlayInfo",value:function(e){this._isDelayPlay=!0,this._delayPlayTime=e}},{key:"clearDelayPlayInfo",value:function(e){this.fire(b.a.NTF_DelayToPlay_End),clearTimeout(this._delayTimer),this._isDelayPlay=!1,this._delayPlayTime=0,this._delayTimer=null,e&&this.play()}},{key:"play",value:function(e){var t=this,r=this;if(!r._isDelayPlay)return m()(p()(n.prototype),"play",this).call(this,e);r.fire(b.a.NTF_DelayToPlay,r._delayPlayTime),r._delayTimer||(this.logger.log("playproxy delay play, timeout start!"),r._delayTimer=setTimeout((function(){t.logger.debug("playproxy delay play, timeout end!"),r.fire(b.a.NTF_DelayToPlay_End),r._delayTimer=null,r._isDelayPlay=!1,r._delayPlayTime=0,m()(p()(n.prototype),"play",t).call(t,e)}),r._delayPlayTime))}},{key:"isDelayPlay",value:function(){return this.isDelayPlay}},{key:"checkVipPay",value:function(e,t,n,r,i){var a=I.a.getUid()||"",o=this;e||t?(e&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=V.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&5==s?I.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(n)),-1!==e.indexOf(4)?r(!0,1):r(!1,n)}),!0):r(!1)}else r(!1)}(e,n,r,i),t&&function(e,t,n,r){if(a&&e&&t&&!o.engine.isMini){var i=V.a.read("vipLayer")||"",s=parseInt(n||-1,10);-1==i.indexOf(a+"+"+t)&&6==s?I.a.reqVipTypes((function(e){var t=e.join(","),n="0"!==t&&""!==t;o.logger.log("vippay, request types callback, tt ".concat(t,", isvip ").concat(n)),-1!==e.indexOf(4)?r(!0,2):r(!1,n)}),!0):r(!1)}else r(!1)}(t,n,r,i)):i(!1)}},{key:"playFromVipPay",value:function(){var e=this.engine.movieinfo.current,t=e.albumId,n=I.a.getUid()||"",r=V.a.read("vipLayer")||"",i=n+"+"+t;if(""!==r){var a=r.split("||");if(a.length>=5)for(var o=0;o<4;o++)i+="||"+a[o];else i=i+"||"+r}V.a.write("vipLayer",i),this.engine.adproxy.initSDK({data:this._eventer.getData(),movieinfo:e})}},{key:"getMP4URLByTvid",value:function(e,t){(new id).request({params:{tvid:e,vid:"",k_ft1:"721829383634948"},hostUseIP:!1},(function(e){var n="";if(e.data&&e.data.st){var r=e.data,i=r.program,a=r.st,o=parseInt(a,10);if(100<o&&o<200&&i&&i.video)for(var s=0;s<i.video.length;s++)i.video[s].mp4Url&&(n=i.video[s].mp4Url)}t(n)}),(function(){t("")}))}},{key:"setDefList",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0],n=this,r=this._absDashRequests,i=this._absDashResponses,a=this.engine,o=a.movieinfo,s=a.autoVdUsing,c=o.current,u=[],d=o.getVDInfo();s?u=c.vidl:t&&(u=[d]);for(var l=u.length,f=0,h=function(){f++;var e=i;if(f==l&&e.length>0){for(var t=0;t<e.length;t++){var r=e[t];r.other.feed=!1,r.other.fromlist=!0,r.other.listdone=t==e.length-1,n.kiwi.loadSource(r,0,[[]],{streamType:eu.Episode,parseMftOnly:!0})}n._clearAbsDashHttp()}},p=0;p<l;p++)if(u[p].isUsable&&601!==u[p].bid){var _=u[p];t||!_.playlist&&_.vid!==c.vid?function(t){var a=n.requestDash({params:{tvid:c.tvid,vid:t.vid,vd:t.bid,switchvd:!0}},{targetVd:t.vd,fileFormat:s?d.fileFormat:t.fileFormat},(function(n){var o=r.indexOf(a);if(o>-1&&r.splice(o,1),n){t.playlist=n.playlist,t.realArea=n.realArea;var s=e._getManifest(n,c).manifestContent;i.push(s)}h()}));r.push(a)}(_):h()}else h()}},{key:"requestDash",value:function(e,t,n){var r=e.params.vid;return(new id).request(e,(function(e){var i,a;if(e.data&&e.data.program&&e.data.program.video){var o=e.data,s=o.program,c=o.st,u=parseInt(c,10);if(100<u&&u<200&&s.video){var d=t.targetVd,l=t.fileFormat,f=F(s.video,d);if(f&&f.vid==r&&(!l||l==f.fileFormat)){var h=e.data.boss_ts?"boss_ts":"boss";e.data[h]&&((a=e.data[h]).bossKeyTime=+new Date),i=f}}}n(i,a)}),(function(){n()}))}},{key:"_clearAbsDashHttp",value:function(){this._absDashRequests.forEach((function(e){e.setReqAbandoned(),e.getXhrRequest()&&e.getXhrRequest().abort()})),this._absDashResponses.splice(0,this._absDashResponses.length),this._absDashRequests.splice(0,this._absDashRequests.length)}}]),n}(bd);function Wd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Hd="QiyiPlayerTimePlayedInDay",zd={},Yd=["loadstart","ready","error","ended"];function Gd(){var e=new Date;return e.getFullYear()+""+(e.getMonth()+1)+e.getDate()}function Qd(){var e=V.a.read(Hd),t=Gd(),n=0;return e&&(t=(e=e.split("|"))[0],n=parseFloat(e[1])),{day:t,totalTime:n}}var Kd=function(e){d()(n,e);var t=Wd(n);function n(e){var r;return i()(this,n),r=t.call(this),e.on(b.a.NTF_AD_NotifyManager,(function(e){r.emit(e)})),r}return n}(_.a),$d=function(e){d()(n,e);var t=Wd(n);function n(e,r){var a,o;i()(this,n),a=t.call(this);var s=c()(a);a._isVip=!1,a._disableVideoOP=!1,a._user=I.a,a.bussiness=new Kd(e,r),a._container=r.adContainer,a.engine=e,a.view=r,a.beforeIsAD=!1,a.beforeSeek=0,a.logger=new E.a("AdApi[".concat(e.id,"]"));var u=function(t,n){var r={type:t,gas:a.getCurrentGas()};n&&(r.data=n,n.gas&&(r.gas=n.gas));var i=function(e){var t=e.type,n=e.gas,r=n?n.id:undefined;if(!n||-1==Yd.indexOf(t))return!0;var i=zd[r];if(i){if(i[t])return!1;i[t]=!0}else zd[r]={},zd[r][t]=!0;return!0}(r);e.isAd()&&a.logger.info("adapi, emit, type=".concat(t,", isAd=").concat(e.isAd(),", fire = ").concat(i," obj=").concat(JSON.stringify(r))),i&&a.emit(t,r)};e.on(b.a.NTF_StatusChanged,(function(e){switch(e.state){case b.a.Status_AdLoadstart:u("loadstart",e);break;case b.a.Status_Ready:break;case b.a.Status_Play:u("play",e);break;case b.a.Status_AdPlaying:u("playing",e);break;case b.a.Status_Playing:zd={},u("playing",e);break;case b.a.Status_AdPaused:case b.a.Status_Paused:u("pause",e);break;case b.a.Status_AdWaiting:case b.a.Status_Waiting:u("waiting",e);break;case b.a.Status_AdError:u("error",e);break;case b.a.Status_PlayError:zd={},u("error",e);break;case b.a.Status_AdStalled:u("stalled",e);break;case b.a.Status_AdWillPlayEnded:u("willended",e);break;case b.a.Status_AdPlayEnded:case b.a.Status_End_Play:u("ended",e)}}));var d=0;e.on(b.a.NTF_AD_TimeUpdate,(function(t){clearTimeout(d),d=setTimeout((function(){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,u("timeupdate",t)}),0)})),e.on(b.a.NTF_Before_Seeking,(function(t){var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.isFusionMode;s._before={beforeIsAD:t.isAd,referrerGas:t.gas,beforeSeek:r,isFusionMode:i}}));var l=function(t){t.isAD=e.isAd();var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,u("seeked",t)};e.on(b.a.NTF_AD_Seeking,(function(e){l(e)})),e.on(b.a.NTF_Seeking,(function(e){l(e)}));var f=function(t){t.isAD=e.isAd(),t.actionType="controls";var n=e.getCorrectTimeObj(),r=n.acurrent,i=n.aduration;t.current=r,t.duration=i,Object(w.a)(t,s._before),u("afterSeeked",t),s._before=undefined};e.on(b.a.NTF_AD_Seeked,(function(e){f(e)})),e.on(b.a.NTF_Seeked,(function(e){f(e)})),e.on(b.a.NTF_TimeUpdate,(function(t){u("timeupdate",t);var n=e.getCurrenttime(),r=n-o;o&&r>0&&r<1&&function(e){var t=Qd(),n=Gd();t.day===n?t.totalTime+=e:t.totalTime=e,V.a.write(Hd,n+"|"+t.totalTime)}(r),o=n})),e.on(b.a.NTF_PLAY_MUTED,(function(e){u("muted",e)}));var h=r.fullscreen;return h&&h.on("change",(function(e){u("exit"===e?"exitfullscreen":"fullscreen")})),e.on(b.a.NTF_DelayToPlay,(function(){u("pausetoplay")})),I.a.on("infoset",(function(){I.a.isVip((function(e){s._isVip=e}))})),a}return o()(n,[{key:"load",value:function(e){e=e||{};var t=Array.isArray(e);t&&e.length>0||e.file&&!isNaN(e.offset)&&e.offset>=0?this.bussiness.emit("_playdata_",e):this.logger.warn("load error data parameter: isArray = ".concat(t,", ").concat(E.a.stringify(e)))}},{key:"getEngineType",value:function(){return"data"}},{key:"getCurrentGas",value:function(){return this.engine.getCurrentGas()}},{key:"abort",value:function(){this.engine.abortAres()}},{key:"isVIP",value:function(){return this._isVip}},{key:"getUserInfo",value:function(){var e=!1;return this._user.isVip((function(t){e=t})),{isVIP:e,passportCookie:this._user.passportCookie(),passportId:this._user.getUid(),isLogin:this._user.isLogin(),uaaUserId:S.a.getFluid()||S.a.getJsuid()}}},{key:"adcontainer",value:function(){return this._container}},{key:"video",value:function(){return this.engine.video()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"play",value:function(e){this._disableVideoOP||this.engine.play(e)}},{key:"pause",value:function(e){this._disableVideoOP||this.engine.pause(e)}},{key:"addEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"src",value:function(){if(1!==arguments.length)return this.engine.getSrc()||"";this.logger.error("mw is not support set src!")}},{key:"volume",value:function(e){if(!e)return this.engine.getVolume();this.engine.setVolume(e)}},{key:"muted",value:function(e){if("boolean"!=typeof e)return this.engine.getMuted();this.engine.setMuted(e)}},{key:"height",value:function(){return this.view.getWrapperArea().height}},{key:"width",value:function(){return this.view.getWrapperArea().width}},{key:"currentTime",value:function(){return this.engine.getCorrectTimeObj().acurrent}},{key:"duration",value:function(){return this.engine.getCorrectTimeObj().aduration}},{key:"buffered",value:function(){return this.engine.getBufferTime()}},{key:"sendUserActionPingback",value:function(e){this.view.pingback.sendUserActionPingback(e)}},{key:"fullscreentoggle",value:function(){this.view.fullToggle()}},{key:"isFullScreen",value:function(){var e=this.view,t=e.fullscreen;return e.setting.expandScreen?!!this.engine.isFullScreen:t?t.isFullScreen():void 0}},{key:"webfullscreentoggle",value:function(){var e=this.view.webfullscreen;e&&e.toggle()}},{key:"isWebFullScreen",value:function(){var e=this.view.webfullscreen;if(e)return e.isWebFullScreen()}},{key:"videoPlayedDurationInDay",value:function(){return Qd().totalTime}}]),n}(_.a),Zd=function(){function e(t){i()(this,e),this.engine=t,this.logger=new E.a("AdProxy[".concat(t.id,"]")),this.adInfo={},this.seekableMidAd={},this.delayBriefAds={},this.firstAdData=!0}return o()(e,[{key:"init",value:function(){var e=this,t=this.engine.pack;this.sdk=t.ad,this.initMiddle(t),this.initAdSdkEvent(),this.initEpisode();var n=!1,r=!1,i=null;this.engine.recorder?this.once(b.a.NTF_Get_Record,(function(){r=!0,n&&(i.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(i.movieinfo.vipBlock,i.movieinfo.vipTheatre,i.movieinfo.albumId,i.movieinfo.authTipType,(function(t,n){t?e.fire(b.a.NTF_Show_VIPPay,n):e.initSDK(i,n)})))})):r=!0,this.on(b.a.NTF_VRSReady,(function(t){n=!0,r?(e.logger.log("ares vrsready, isPreload = ".concat(t.movieinfo.isPreload,", tvid = ").concat(t.movieinfo.tvid,", vid = ").concat(t.movieinfo.vid)),t.movieinfo.isPreload?e.sdk.playPreload():e.engine.playproxy.checkVipPay(t.movieinfo.vipBlock,t.movieinfo.vipTheatre,t.movieinfo.albumId,t.movieinfo.authTipType,(function(n,r){n?e.fire(b.a.NTF_Show_VIPPay,r):e.initSDK(t,r)}))):i=t})),this.on(b.a.NTF_VRSPreloaded,(function(t){e.initSDK(t)})),this.on(b.a.NTF_VideoChange,(function(){e.middleware._disableVideoOP=!0})),this.on(b.a.NTF_VideoChanged,(function(){e.middleware._disableVideoOP=!1,e.delayFireBriefAD()}))}},{key:"initMiddle",value:function(e){var t=this,n=e.engine,r=e.view,i=n.playproxy,a=n.episode,o=this.logger,s=this.delayBriefAds;this.middleware=new $d(n,r),this.middleware.bussiness.on("_playdata_",(function(e){if(e.length!==undefined&&e.length>0)t._parseListSource(e);else{var r=e.videoEventId,c=H.a.getEpisodeId(r),u=a.valid(c),d=n.movieinfo,l=!!d.current&&d.current.tvid===c;if(o.info("ares notice-info, _playdata_, ares mw load"+(u?"":" invalid")+":"+E.a.stringify(e)),u){var f=0;switch(e.type){case"preroll":a.finishPres(c)?o.warn(c+": ignore ares gas, "+E.a.stringify(e)):(a.addPres(c,[e]),t._feedKernelAd(c,e,!1,0,"preroll"));break;case"briefRoll":e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],f=e.offset;var h=!0;if(l){var p=d.getPlayHead().playRealStartTime;h=!n.hasStatus(b.a.Status_EveryStartPlay)&&f<=p}h?(f=0,a.addBriefs(c,[e]),t._feedKernelAd(c,e,!1,f,"briefRoll")):(s[c]||(s[c]=[]),s[c].push({videoId:c,adata:e,offset:f}));break;case"midroll":i.getCurrenttime()<e.offset?(e.seekable?t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)]=e:delete t.seekableMidAd["".concat(e.type,"_").concat(e.videoEventId)],a.addMids(c,[e]),t._feedKernelAd(c,e,!1,e.offset,"midroll")):o.warn(c+":drop ares gas, "+E.a.stringify(e))}}}}))}},{key:"_parseListSource",value:function(e){if(e.length!==undefined&&e.length>0){for(var t,n,r,i,a=this.engine,o=this.logger,s=a.playproxy,c=a.episode,u=[],d=[],l="++++ adlog, ares notice-info, _playdata_, ares mw load, isFusionMode=true, len=".concat(e.length,","),f=0;f<e.length;f++){var h=e[f],p=h.videoEventId;n=H.a.getEpisodeId(p),t=c.valid(n),i=h.type,r=h.offset,t&&s.getCurrenttime()<r&&(u.push({duration:h.duration,url:h.file,gas:h}),d.push(Object(w.a)({isFusionMode:!0},h))),l+=", id(".concat(h.id,")-offset(").concat(r,")-seekable(").concat(h.seekable,")-duration(").concat(h.duration,")-videoValid(").concat(t,");;; ")}o.log(l),u.length>0&&(c.addMids(n,d),this._feedKernelAd(n,u,!1,r,i))}}},{key:"initSDK",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,r=this.engine,i=r.params,a=r.local,o=r.playerVersion,s=r.movieinfo,c=r.adPlaySource,u=r.episode,d=s.startPlayTime,l=s.getVDInfo(),f=e.movieinfo,h=!!f.isPreload,p=i.cid||"";f.adPlayerID&&(p=f.adPlayerID),i.isCid||!A.a.os.android&&!A.a.os.ios||(p=navigator.userAgent.indexOf("MicroMessenger")>-1?"qc_105092_300416":"qc_100001_100103");var _=i.isSupportViewpoint||!1,v=i.site||"iqiyiw",g=0;d>=l.duration&&(d=0);var y=s.getPlayTimeRanges(),m=h?s.next:s.current;if("history"===m.playStartFrom){var b=y[0][0],k=y[y.length-1][1];g=b<d&&d<k?d:b}var x=function(e){t.middleware._isVip=e;var n=t.middleware.video(),r=f.tvid+"",s=Zu.a.isNumber(f.vd)?f.vd:parseInt(t.engine.vd,10);51===s&&(s=5);var d={autoLoad:!0,autoRender:!0,isMacH5:!0,isPreload:h,adPlayerId:p,episodeId:r,videoEventId:H.a.generate(r),videoDefinition:s,showVoiceIcon:!(A.a.os.android||A.a.os.ios),videoMidware:t.middleware,isVIP:e,isSupportViewpoint:_,site:v,locale:a,passportId:I.a.getUid(),passportCookie:I.a.passportCookie(),clientVersion:o,videoContainer:n,couponCode:i.cpnc||"",couponVer:i.cpnv||"",ptid:A.a.getPtid(L.a.isTWLocale()),timePoint:g,playSource:c||0};"home"===i.sourcePage?u.finishPres(r,!0):setTimeout((function(){t.logger.log("ares init, {episodeId:".concat(r,", isPreload:").concat(h,", timePoint:").concat(g,"}, cupid:").concat(p)),t.sdk.init(d)}),0)};n!==undefined?x(n):I.a.isVip((function(e){x(e)}))}},{key:"initAdSdkEvent",value:function(){var e=this,t=this.sdk,n=this.engine,r=this.logger,i=this.delayBriefAds,a=n.playproxy,o=n.episode,s=n.movieinfo,c=n.skip,u=n.autoplay,d=n.pingbackQOS;t.on("roll-play",(function(t){var n=t.rollType,i=t.videoEventId,a=H.a.getEpisodeId(i),s=o.valid(a);r.log("ares notice-info,  roll-play:"+(s?"":" invalid")+E.a.stringify(t));var c,u=!1,d=!1;if("midroll"==n){var l=o.getMids(a);l.length>0&&(u=l[0].seekable,d=!!l[0].isFusionMode,c=l[0].offset)}e.seekableMidAd["".concat(n,"_").concat(i)]&&(u=!0),r.log("ares notice-info, roll-play:".concat(s,", rollType:").concat(n,", isFusionMode:").concat(d,", seekable:").concat(u,", data:").concat(E.a.stringify(t))),s&&(e.adInfo={rollType:n,videoId:a,seekable:u,isFusionMode:d,offset:c},e.fire(b.a.Status_AresPlay,e.adInfo))})),t.on("roll-ended",(function(t){var n=t.rollType,i=t.videoEventId,l=H.a.getEpisodeId(i),f=s.tvid==l,h=o.valid(l)&&f;if(r.info("ares notice-info, roll-ended, abortAllAres "+(h?"":" invalid")+E.a.stringify(t)+", videoId: "+l+", tvid: "+s.tvid),h){switch(n){case"preroll":a.tempStore.__sendFinishPres||(a.tempStore.__sendFinishPres=!0,d.sendFinishPresPingback()),o.finishPres(l,!0);break;case"midroll":o.finishMids(l,!0);break;case"briefRoll":o.finishBriefs(l,!0)}a.abortAllAres(n),(c&&u||!c||A.a.os.ios||A.a.os.android)&&a.isPaused()&&(r.log("manual play"),a.play()),e.fire(b.a.Status_AresEnded,{agent:"ares",data:{rollType:n,videoId:l}})}})),t.on("roll-load-finish",(function(t){var a=t.rollType,c=t.videoEventId,u=H.a.getEpisodeId(c),d=o.valid(u),l=s.tvid==u;r.info("ares notice-info, roll-load-finish"+(d?"":" invalid")+":"+E.a.stringify(t));var f,h=n.sptr;if(h.asdkistm=t.initStartTime||0,h.asdkietm=t.initEndTime||0,h.adlstm=t.loadStartTime||0,h.adletm=t.loadEndTime||0,h.adirqstm=t.requestStartTime||0,h.adirqetm=t.requestEndTime||0,h.adsrqstm=t.showStartTime||0,h.adsrqetm=t.showEndTime||0,h.adaetm=+new Date,d)switch(a){case"preroll":0!==o.getPres(u).length&&l||"boolean"!=typeof(f=o.finishPres(u))||f||o.finishPres(u,!0);break;case"briefRoll":"boolean"!=typeof(f=o.finishBriefs(u))||f||o.finishBriefs(u,!0),i[u]&&i[u].length&&e.delayFireBriefAD();break;case"midroll":"boolean"!=typeof(f=o.finishMids(u))||f||o.finishMids(u,!0)}})),t.on("error",(function(e){r.info("ares notice-info, error"+E.a.stringify(e)),a.brokedown(Ku.a.AD,Ku.a.P07001)})),t.on("adplayer_showtip",(function(t){r.log("ares notice-info, adplayer_showtip"),e.fire(b.a.NTF_AD_Showtips,t)})),t.on("adplayer_ad_info",(function(t){var n=(t=t||{}).data,i=n.videoEventId,a=H.a.getEpisodeId(i),c=o.valid(a);r.info("ares notice-info, adplayer_ad_info "+(c?"":" invalid")+":"+E.a.stringify(t)),c&&(n&&(Zu.a.isObject(n.definitionSwitchingAd)?(o.setDefinitionAd(a,t),s.aresnoticedata.definition=n):Zu.a.isArray(n.viewPoints)&&(s.aresnoticedata.viewPoints=n.viewPoints)),e.fire(b.a.Status_AresNoticeInfo,t))})),t.off("adplayer_ad_start"),t.on("adplayer_ad_start",(function(t){r.log("ares notice-info, adplayer_ad_start"),t&&"13"==t.ctp&&(e.engine.adWholeCorner=!0),e.fire(b.a.NTF_AD_Start,t)})),t.off("adplayer_ad_end"),t.on("adplayer_ad_end",(function(t){r.log("ares notice-info, adplayer_ad_end"),e.fire(b.a.NTF_AD_End,t)})),t.off("pause_start"),t.on("pause_start",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_start, get audio ad info! delayTime = ".concat(t.duration)),a.setDelayPlayInfo(1e3*t.duration||2500))})),t.off("pause_end"),t.on("pause_end",(function(t){"audio"===t.type&&(e.logger.log("ares notice-info, pause_end, get audio ad info! status = ".concat(t.status)),"common"===t.status?a.clearDelayPlayInfo(!0):a.clearDelayPlayInfo(!1))})),t.off("adplayer_ad_block"),t.on("adplayer_ad_block",(function(t){e.logger.info("ares notice-info, adplayer_ad_block, ".concat(JSON.stringify(t)," ")),t.videoEventId===a.getCurrentGas().videoEventId&&e.fire(b.a.NTF_AD_BLOCK)}))}},{key:"fire",value:function(e,t){this.engine.emit(e,t)}},{key:"on",value:function(e,t){this.engine.on(e,t)}},{key:"once",value:function(e,t){this.engine.once(e,t)}},{key:"clear",value:function(){}},{key:"resize",value:function(){this.sdk.resize()}},{key:"initEpisode",value:function(){var e=this,t=this.engine,n=t.playproxy,r=t.episode;r.on("finishAddPres",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=H.a.getEpisodeId(a.videoEventId);e._feedKernelAd(r,null,!0,0,"preroll"),r===o||0===i&&(o===undefined||isNaN(o))?n.concatCurFeature(r):n.concatPreloadFeature(r)})),r.on("finishAddMids",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=H.a.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"midroll")})),r.on("finishAddBriefs",(function(t){var r=t.videoId,i=t.length,a=n.getCurrentGas(),o=H.a.getEpisodeId(a.videoEventId);(r===o||0===i&&(o===undefined||isNaN(o)))&&e._feedKernelAd(r,null,!0,null,"briefRoll")}))}},{key:"_feedKernelAd",value:function(e,t,n,r,i){var a=this.engine,o=this.logger,s=a.movieinfo,c=a.playproxy,u=a.episode,d=a.sptr,l=e==s.tvid,f={},h=!1,p=[[0,Infinity]],_={isCurrent:l,components:["manifest/flv","loader/flv","mux/flv-mp4","renderer/mse"],streamType:eu.Roll,roll:{offset:r,done:n}};if(!n||!("preroll"===i&&0===u.getPres(e).length||"midroll"===i&&0===u.getMids(e).length||"briefRoll"===i&&0===u.getBriefs(e).length)){if("briefRoll"===i){if(!t)return;n=!0}if(Array.isArray(t)&&t.length>0?(f.fs=t,h=t[0].gas.seekable):t&&(f.fs=[{duration:t.duration,url:t.file,gas:t}],h=t.seekable),"briefRoll"===i)_.roll.category="ad::brief",_.roll.rollType=au.INDETERMINACY_ROLL;else switch(_.roll.category="ad",i){case"preroll":_.roll.rollType=au.PRE_ROLL;break;case"midroll":_.roll.rollType=au.MID_ROLL}f.offset=r,f.other={seekable:h,done:n},this.firstAdData?this.firstAdData=!1:_.parseMftOnly=!0,this.firstAdData=n,o.debug("load ad, videoId=".concat(e,", tvid=").concat(s.tvid,", type: ").concat(i,", done: ").concat(f.done,", offset: ").concat(f.offset,", seekable: ").concat(f.seekable,", isFusionMode: ").concat(f.isFusionMode)),c.tempStore.__sendFirstFrameShow||(d.vclstm=+new Date),c.kiwi.loadSource(f,0,p,_)}}},{key:"delayFireBriefAD",value:function(){var e=this,t=this.delayBriefAds,n=this.engine,r=n.episode,i=n.movieinfo;this.engine.once(b.a.NTF_TimeUpdate,(function(){if(t[i.tvid]){for(var n,a,o,s,c=t[i.tvid].splice(0,1)[0];c;)s=!0,n=c.videoId,a=c.adData,o=c.offset,r.addBriefs(n,[a]),e._feedKernelAd(n,a,!1,o,"briefRoll"),c=t[i.tvid].splice(0,1)[0];s&&e._feedKernelAd(n,null,!0,null,"briefRoll")}}))}},{key:"getAdInfo",value:function(){return this.adInfo}},{key:"getAdLog",value:function(){return this.sdk.fetchLogs()}},{key:"destroy",value:function(){this.clear(),this.sdk.destroy()}}]),e}(),Xd=function(){function e(t){i()(this,e),this.startPlayTime=0,this.endPlayTime=0,this.goodsPoints=[],this.current={},this.next={},this.engine=t,this.aresnoticedata={},this.logger=new E.a("MovieInfo[".concat(t.id,"]"))}return o()(e,[{key:"tvid",get:function(){return this.current.tvid},set:function(e){this.current.tvid=e}},{key:"vid",get:function(){return this.current.vid},set:function(e){this.current.vid=e}},{key:"vd",get:function(){return this.current.vd},set:function(e){this.current.vd=e}},{key:"vidl",get:function(){var e=[];return Zu.a.isArray(this.current.vidl)&&(e=this.current.vidl),e}},{key:"adPlayerID",get:function(){return this.current.adPlayerID},set:function(e){this.current.adPlayerID=e}},{key:"isTryWatch",get:function(){return this.current.isTryWatch}},{key:"previewTime",get:function(){return this.current.previewTime}},{key:"previewType",get:function(){return this.current.previewType}},{key:"imageLoader",get:function(){return this.current.imageLoader},set:function(e){this.current.imageLoader=e}},{key:"currentLid",get:function(){return this.current.currentLid}},{key:"parts",get:function(){return this.current.parts},set:function(e){this.current.parts=e}},{key:"watermark",get:function(){return this.current.watermark},set:function(e){this.current.watermark=e}},{key:"hasSendSencondAuthRemote",get:function(){return this.current.hasSendSencondAuthRemote},set:function(e){this.current.hasSendSencondAuthRemote=e}},{key:"rc_code",get:function(){return this.current.rc_code},set:function(e){this.current.rc_code=e}},{key:"setStartPlayTime",value:function(e,t){e<0?this.logger.error("play start time set error!"):this.startPlayTime=this.current.isTryWatch&&!t?0:e}},{key:"getPlayHead",value:function(){var e=this.getPlayTimeRanges(),t=e[0][0],n=e[e.length-1][1],r=null,i=this.startPlayTime,a=t;return t<=i&&i<n&&(a=r=i),{timeRanges:e,playHeadTime:r,playRealStartTime:a}}},{key:"initShareTime",value:function(e,t){var n=this.engine.params,r=function(e,t){var n=0,r=undefined;return e&&(n=parseInt(e,10)<0?0:parseInt(e)),t&&(r=parseInt(t,10)<0?0:parseInt(t)),{nsTime:n,neTime:r}};if(n.share_sTime||n.share_eTime){var i=r(n.share_sTime,n.share_eTime);this.current.share_start_time=i.nsTime,this.current.share_end_time=i.neTime,n.share_sTime=!1,n.share_eTime=!1}else if(e||t){var a=r(e,t);this.current.share_start_time=a.nsTime,this.current.share_end_time=a.neTime}}},{key:"getVDInfo",value:function(e,t){var n=e?this.next:this.current;t=t||n.vd;var r={};return n.vidl&&(r=n.vidl.filter((function(e){return e.vd===t}))[0]),r}},{key:"setInfo",value:function(e){this.current=e}},{key:"clear",value:function(){this.startPlayTime=0,this.endPlayTime=0,this.current={},this.next={}}},{key:"switch",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this.current=e||this.next,this.next={}}},{key:"preload",value:function(e){e.isPreload=!0,this.next=e}},{key:"getPlayTimeRanges",value:function(e){var t,n=e?this.next:this.current,r=0,i=n.isPreload?0:this.startPlayTime,a=n.prelude||{},o=this.engine.skip,s=o&&a.headTime>0?a.headTime:0,c=o&&a.tailTime>0?a.tailTime:Infinity;return t=c,i>0&&i+5<t&&(n.playStartFrom="history",r=i),s>0&&s>=r&&(n.playStartFrom="prelude",r=s),"number"==typeof n.share_start_time&&n.share_start_time>=0&&(r=parseInt(n.share_start_time),n.playStartFrom="share"),"number"==typeof n.share_start_time&&n.share_end_time&&n.share_end_time>=n.share_start_time&&(t=parseInt(n.share_end_time)),r>parseInt(n.share_end_time)&&(t=c),[[r,t]]}}]),e}(),Jd="//l-rcd.iqiyi.com/apis/qiyirc/setrc.php",el="//nl-rcd.iqiyi.com/apis/urc/setrc",tl=function(){function e(t){i()(this,e);var n,r=this,a=!1,o=function(){a||(a=!0,r._record())};r.logger=new E.a("recorder".concat(t.id)),r._core=t,r._isSwitchingDefinition=!1,t.on(b.a.NTF_StatusChanged,(function(e){var i=e.state;if(i===b.a.Status_Playing&&r.startTimer(),i===b.a.Status_Paused||i===b.a.Status_Waiting||i===b.a.Status_Stoped){if(i===b.a.Status_Waiting){if(t.isSeeking())return;if(t.getCurrenttime()<=1)return}if(Math.abs(t.getDuration()-t.getCurrenttime())<=1&&i!==b.a.Status_Stoped)return;n&&clearTimeout(n),r.stopTimer(),r._record(i===b.a.Status_Stoped)}})),t.on(b.a.NTF_Seeked,(function(e){var i=parseInt(e.current,10)||0;n&&clearTimeout(n),n=setTimeout((function(){n=null,t.isAd()||r._record(i)}),1e3)})),t.on(b.a.NTF_DefinitionSwitching,(function(){r._isSwitchingDefinition=!0})),t.on(b.a.NTF_DefinitionSwitched,(function(){r._isSwitchingDefinition=!1})).on(b.a.NTF_VideoChanged,(function(){r._isSwitchingDefinition=!1})),t.once(b.a.NTF_VRSStart,(function(e){t.isInteractVideo||r._getCurrent(e.data.tvid)})),window.addEventListener("unload",o),window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o)}return o()(e,[{key:"stopTimer",value:function(){var e=this;e._timer&&(clearInterval(e._timer),e._timer=null)}},{key:"startTimer",value:function(){var e=this;e._timer||(setTimeout((function(){return e._record()}),5e3),e._timer=setInterval((function(){return e._record()}),12e4))}},{key:"getCKUid",value:function(){return A.a.os.ios||A.a.os.android?S.a.getJsuid():S.a.getFluid()}},{key:"_getCurrent",value:function(e){var t=this;function n(){var n=I.a.isLogin()?"//l-rcd.iqiyi.com/apis/qiyirc/getvplay":"//nl-rcd.iqiyi.com/apis/urc/getvplay",r={};r.tvId=e,r.agent_type=1,I.a.isLogin()||(r.ckuid=t.getCKUid()),P.a.json({url:n,params:r,timeout:5e3,success:function(e){var n=function(e){t._core.getMovieInfo().tvid==e.tvId&&(t.logger.log("Movie History,params: isLogin = "+I.a.isLogin()+", time ="+e.videoPlayTime),t._setStartPlayTime(e.videoPlayTime))};e.data&&e.data.videoPlayTime>10?t._core.eventlog.vrsready?(n(e.data),t._core.emit(b.a.NTF_Get_Record)):t._core.once(b.a.NTF_VRSReady,(function(){n(e.data),t._core.emit(b.a.NTF_Get_Record)})):t._core.emit(b.a.NTF_Get_Record),t.startTimer()},failure:function(){t._core.emit(b.a.NTF_Get_Record)}})}t._isSwitchingDefinition||(e?n():t._core.getVideoInfo((function(e){n(e.tvid)})))}},{key:"_setStartPlayTime",value:function(e){this.logger.log("play time point from record"+e),this._core.movieinfo.setStartPlayTime(e)}},{key:"_record",value:function(){var e=this,t=!1,n=null;if(arguments.length>0){var r=arguments[0];"boolean"==typeof r?(t=r)&&(n=0):"number"==typeof r&&(n=r)}null===n&&(n=parseInt(e._core.getCurrenttime(),10)||0),e._core.isInteractVideo&&!e._core.isIVMain||e._core.ivosRuning||!e._core.isRecordProgress||e._core.getVideoInfo((function(r){var i=I.a.isLogin(),a=i?Jd:el,o=A.a.browser.ipad||A.a.browser.ipod?21:11,s={tvId:r.tvid,terminalId:o,agent_type:1};i||(s.ckuid=e.getCKUid()),s.videoPlayTime=n,(s.videoPlayTime>0&&s.videoPlayTime<e._core.getDuration()&&!e._core.isAd()&&!e._core.isPatch()||t)&&(e.logger.log("record history"+s.videoPlayTime+", tvid: "+s.tvId+(t?"":", duration: "+e._core.getDuration())),P.a.json({url:a,params:s}))}))}}]),e}(),nl=(n(41),n(338),n(117)),rl=n(423),il=function(){function e(t,n){i()(this,e),this.logger=new E.a("IVRecorder[".concat(t.id,"]")),this.engine=t,this.params=n,this.engine.on(b.a.NTF_IVPACKAGEPARSE_Finished,this._IVPackageParseSuccess.bind(this)),this.engine.on(b.a.NTF_IVPACKAGEPARSE_Failed,this._IVPackageParseFailed.bind(this))}return o()(e,[{key:"init",value:function(e){var t=this;t._initIVState(e),t._initXFactor(e.globle||{}),t._initBlockList(e),t.processHistory()}},{key:"_IVPackageParseSuccess",value:function(e){this.logger.info("interaction package parse successed"),this.init(e)}},{key:"_IVPackageParseFailed",value:function(){var e=this.engine;this.logger.warn("interaction package parse failed"),e.playproxy._eventer.brokedown(Ku.a.IVG,Ku.a.IV0001)}},{key:"_initIVState",value:function(e){var t={};t.uniqueId=this.params.tvid,t.fileName=e.base.filename,t.version=e.base.fileVersion,t.interactionMode=e.base.interactMode,t.protocolVersion=e.base.protocolVersion,t.privateCustom=e.base.privateCustom,t.isI5Custom="IPARTMENT5_LANDSCAPE"===t.privateCustom,t.storylineType=e.base.storylineType,t.isVertical="1"==e.base.playerType,t.index=0,this._setState(t)}},{key:"_setState",value:function(e){this.engine.iv_state=Object.assign(this.engine.iv_state,e)}},{key:"_initBlockList",value:function(e){this.playBlockList=e.playBlockList||[],this.interactBlockList=e.interactBlockList||[]}},{key:"_getBlockByTvid",value:function(e){return this.playBlockList.find((function(t){return t.filename==e}))}},{key:"_getInteractBlockIdByTvid",value:function(e){var t=this.playBlockList,n=this.interactBlockList,r=t.find((function(t){return t.filename==e})).blockid;return n.find((function(e){return e.inPlayBlockid==r})).blockid}},{key:"request",value:function(){var e=this,t=e.engine.iv_state;return new Promise((function(n,r){var i={uniqueId:e.params.tvid,qyid:S.a.getFluid()||S.a.getJsuid(),app_v:nl.a,platform_id:1079,app_Im:L.a.isTWLocale()?"tw":"cn",lang:L.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",version:t.version};P.a.json({url:R.IVHistory,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction record, last points request successed"),n(t)):r(t)},failure:function(){r()}})}))}},{key:"_initXFactor",value:function(e){var t=this;t.engine.XFactorManager?t.engine.XFactorManager.reset(e||{}):t.engine.XFactorManager=new rl.a(e||{})}},{key:"processHistory",value:function(){var e=this,t=e.engine,n=t.iv_state,r=function(){e.engine.isIVMain=!0,n.storyLine="0";var r=e.params.tvid,i=e._getBlockByTvid(r);e.engine.iv_state.isI5Custom&&(e.engine.iv_state.others=i?i.others:{}),e.sendAction({status:0}),e.engine.load(e.params),e.engine.emit(b.a.NTF_Get_Record),t.IVRecorder.sendAction({status:6,currentTime:0,blockId:i.blockid,playBlockId:i.blockid,tvId:r,albumId:r,switch_type:1,switch_time:0})};e.params.resetHistory?r():e.request().then((function(r){!function(r){var i={};if(i.index=parseInt(r.index||0,10),i.storyLine=r.storyLine||1,i.isFromHistory=!0,r.pathData&&0!==r.pathData.tvId){var a=r.pathData,o=a.tvId,s=a.currentTime,c=a.globleValues;e.params.tvid=o,e.params.startPlayTime=s,t.isIVMain=n.uniqueId===o,t.isIVMain?t.adPlaySource=0:t.adPlaySource=61,e._initXFactor(c)}else e.engine.isIVMain=!0;if(e.engine.iv_state.isI5Custom){var u=e._getBlockByTvid(e.params.tvid);e.engine.iv_state.others=u?u.others:{}}e.logger.info("interaction record ok, start load"),e._setState(i),t.load(e.params),t.emit(b.a.NTF_Get_Record)}(r)}),r)}},{key:"sendAction",value:function(e){var t=this,n=t.engine.iv_state;if(e.tvId){var r=t._getBlockByTvid(e.tvId);if(r.others&&"1"==r.others.IPARTMENT5_ABANDONHISTORY)return}var i={qyid:S.a.getFluid()||S.a.getJsuid(),app_v:nl.a||"",platform_id:1079,app_Im:L.a.isTWLocale()?"tw":"cn",lang:L.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:n.uniqueId,fileName:n.fileName,version:n.version,protocolVersion:n.protocolVersion,interactionMode:n.interactionMode};Object(w.a)(i,e,!0),t.logger.info("interaction upload to service"),P.a.json({url:R.IVSevice,params:i,success:function(){},failure:function(){}})}},{key:"getStoryLine",value:function(){var e=this,t=e.engine.iv_state;return e.logger.info("interaction request storyline"),new Promise((function(n,r){var i={qyid:S.a.getFluid()||S.a.getJsuid(),app_v:nl.a,platform_id:1079,app_Im:L.a.isTWLocale()?"tw":"cn",lang:L.a.isTWLocale()?"zh_TW":"zh_CN",dev_os:navigator.platform||"",dev_ua:navigator.userAgent||"",src:"pcw",uniqueId:t.uniqueId,fileName:t.fileName,version:t.version,protocolVersion:t.protocolVersion,language:""};P.a.json({url:R.IVStoryLine,timeout:3e3,params:i,success:function(t){t&&"A00000"===t.code?(e.logger.info("interaction request storyline successed"),n(t)):(e.logger.info("interaction request storyline code error"),r(t))},failure:function(){e.logger.info("interaction request storyline failed"),r()}})}))}},{key:"backToStoryLine",value:function(){var e=this,t=e.engine;e.getStoryLine().then((function(n){if(n&&n.graph){var r=n.graph.nodes;r.pop();var i=r.slice().reverse().find((function(e){return 1!==e.mark}));if(!i)return;var a={innerIV:!0};switch(a.tvid=i.tvid,a.blockid=i.id,a.playBlockId=i.playBlockId,a.startPlayTime=i.currentTime,i.type){case"VIDEO":a.switchType=5;break;case"BLOCK":default:a.switchType=2}e.sendAction({status:0,blockId:a.blockid,tvId:a.tvid,switch_type:a.switchType}),t.switchVideo(a)}}),(function(){}))}},{key:"updateParams",value:function(e){this.params=e}}]),e}(),al=null;function ol(){return sl.apply(this,arguments)}function sl(){return(sl=K()(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.t.bind(null,661,7));case 2:return(t=e.sent["default"]).enc.u8array={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r[i]=a}return r},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>2]|=(255&e[i])<<24-i%4*8;return t.lib.WordArray.create(r,n)}},e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cl(){return(cl=K()(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(al){e.next=4;break}return e.next=3,ol();case 3:al=e.sent;case 4:return r=function(){var e=al.enc.Utf8.parse(n),r=al.enc.u8array.parse(t);return al.DES.decrypt(r.toString(al.enc.Base64),e,{mode:al.mode.ECB,padding:al.pad.Pkcs7}).toString(al.enc.Utf8)},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ul(){return(ul=K()(Z.a.mark((function e(t,n){var r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(al){e.next=4;break}return e.next=3,ol();case 3:al=e.sent;case 4:return r=function(){var e=al.enc.Utf8.parse(n);return al.DES.encrypt(t,e,{mode:al.mode.ECB,padding:al.pad.Pkcs7}).toString()},e.abrupt("return",r());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dl={decryptByDES:function(e,t){return cl.apply(this,arguments)},encryptByDES:function(e,t){return ul.apply(this,arguments)}},ll="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==ll&&ll,fl="URLSearchParams"in ll,hl="Symbol"in ll&&"iterator"in Symbol,pl="FileReader"in ll&&"Blob"in ll&&function(){try{return new Blob,!0}catch(e){return!1}}(),_l="FormData"in ll,vl="ArrayBuffer"in ll;if(vl)var gl=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],yl=ArrayBuffer.isView||function(e){return e&&gl.indexOf(Object.prototype.toString.call(e))>-1};function ml(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function bl(e){return"string"!=typeof e&&(e=String(e)),e}function kl(e){var t={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return hl&&(t[Symbol.iterator]=function(){return t}),t}function xl(e){this.map={},e instanceof xl?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Sl(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Tl(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Pl(e){var t=new FileReader,n=Tl(t);return t.readAsArrayBuffer(e),n}function Il(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function wl(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:pl&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:_l&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:fl&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():vl&&pl&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=Il(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):vl&&(ArrayBuffer.prototype.isPrototypeOf(e)||yl(e))?this._bodyArrayBuffer=Il(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="";var t=this.headers.get("content-type");t?t.indexOf("json")>=0&&"string"!=typeof this._bodyInit&&(this._bodyInit=this._bodyText):"string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):fl&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")},pl&&(this.blob=function(){var e=Sl(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Sl(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Pl)}),this.text=function(){var e,t,n,r=Sl(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Tl(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_l&&(this.formData=function(){return this.text().then(Dl)}),this.json=function(){return this.text().then(JSON.parse)},this}xl.prototype.append=function(e,t){e=ml(e),t=bl(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},xl.prototype["delete"]=function(e){delete this.map[ml(e)]},xl.prototype.get=function(e){return e=ml(e),this.has(e)?this.map[e]:null},xl.prototype.has=function(e){return this.map.hasOwnProperty(ml(e))},xl.prototype.set=function(e,t){this.map[ml(e)]=bl(t)},xl.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},xl.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),kl(e)},xl.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),kl(e)},xl.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),kl(e)},hl&&(xl.prototype[Symbol.iterator]=xl.prototype.entries);var Al=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function El(e,t){if(!(this instanceof El))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof El){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new xl(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new xl(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),Al.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Dl(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function ql(e,t){if(!(this instanceof ql))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===undefined?"":""+t.statusText,this.headers=new xl(t.headers),this.url=t.url||"",this._initBody(e)}El.prototype.clone=function(){return new El(this,{body:this._bodyInit})},wl.call(El.prototype),wl.call(ql.prototype),ql.prototype.clone=function(){return new ql(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new xl(this.headers),url:this.url})},ql.error=function(){var e=new ql(null,{status:0,statusText:""});return e.type="error",e};var Ol=[301,302,303,307,308];ql.redirect=function(e,t){if(-1===Ol.indexOf(t))throw new RangeError("Invalid status code");return new ql(null,{status:t,headers:{location:e}})};var Rl=ll.DOMException;try{new Rl}catch(bv){(Rl=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Rl.prototype.constructor=Rl}function Ll(e,t){return new Promise((function(n,r){var i=new El(e,t);if(i.signal&&i.signal.aborted)return r(new Rl("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new xl,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;setTimeout((function(){n(new ql(i,r))}),0)},a.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){r(new Rl("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&ll.location.href?ll.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(pl?a.responseType="blob":vl&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof xl?i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,bl(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",o)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)}))}Ll.polyfill=!0,ll.fetch||(ll.fetch=Ll,ll.Headers=xl,ll.Request=El,ll.Response=ql);var Ml=function(){function e(t,n){i()(this,e),this.logger=new E.a("IVPackageManager[".concat(t.id,"]")),this.engine=t,this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null,this.init(n)}return o()(e,[{key:"getIndexFile",value:function(){return this.indexFileObject||{}}},{key:"init",value:function(e){var t=this;t.params=e,t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):t._retry(e)}))}},{key:"_parseZip",value:function(e){var t=this;t.logger.info("interaction zipUrl ".concat(e)),n.e(5).then(n.t.bind(null,660,7)).then((function(n){var r=n["default"],i=function(e){e&&(e.file(/^(?!__MACOSX).*index.*json$/)[0].async("uint8array").then(t._parseIndexFile.bind(t)),t.paraFileList=e.file(/^((?!__MACOSX).*Para.json)*$/))};t._downloadZIP(e).then(r.loadAsync,(function(){t._downloadZIP(e).then(r.loadAsync,(function(){t.engine.isInteractVideo=!1,t.engine.load(t.params)})).then(i)})).then(i)}))}},{key:"_retry",value:function(e){var t=this;t._getZipScriptURL(e).then((function(n){n?t._parseZip(n):(t.engine.isInteractVideo=!1,t.engine.load(e))}))}},{key:"_parseIndexFile",value:function(e){var t=this;t.__parseFile(e).then((function(e){t.logger.info("interaction parseFile ok"),t.indexFileObject=e,t.indexFileObject&&t.indexFileObject.globle&&t.indexFileObject.globle.varList&&(t.globleVarList=t.indexFileObject.globle.varList),t.indexFileObject&&t.engine.emit(b.a.NTF_IVPACKAGEPARSE_Finished,t.indexFileObject)}))}},{key:"__parseFile",value:function(e){var t=this.engine;return new Promise((function(n){try{dl.decryptByDES(e,"$X&#ADvF").then((function(e){n(JSON.parse(e))}))}catch(r){t.emit(b.a.NTF_IVPACKAGEPARSE_Failed,r)}}))}},{key:"parseParaFile",value:function(e){var t=this;return t.logger.info("interaction parse ParaFile"),new Promise((function(n){t.paraFileList.find((function(t){return t.name.indexOf(e)>0})).async("uint8array").then(t.__parseFile.bind(t)).then((function(e){n(e)}))}))}},{key:"_getZipScriptURL",value:function(e){var t=this,n={uniqueId:e.tvid,protocolVersion:"1.5",app_v:nl.a,platform_id:1079,lang:L.a.isTWLocale()?"zh_TW":"zh_CN",src:"pcw",qyid:S.a.getFluid()||S.a.getJsuid()};return t.logger.info("interaction getzipUrl ".concat(R.IVZip)),new Promise((function(e){P.a.json({url:R.IVZip,timeout:3e3,withCredentials:!0,params:n,success:function(n){if(n&&"A00000"===n.code)if(n.interactInfo&&n.interactInfo.operationVideoInfo&&n.interactInfo.operationVideoInfo.scriptUrl){var r=n.interactInfo.operationVideoInfo.scriptUrl;t.logger.info("interaction getzipUrl  ok ".concat(r)),e(r.replace("http:",window.location.protocol))}else t.logger.info("interaction getzipUrl fail, data error"),e(null);else t.logger.info("interaction getzipUrl  fail, code error"),e(null)},failure:function(){t.logger.info("interaction getzipUrl  fail, code error"),e(null)}})}))}},{key:"_downloadZIP",value:function(e){return fetch(e).then((function(e){return e.arrayBuffer()}))}},{key:"reset",value:function(){this.paraFileList=[],this.globleVarList=[],this.indexFileObject=null}}]),e}(),Cl={1:"303",2:"302",6:"304",11:"405",12:"401",13:"401",21:"302"},Nl=function(){function e(t){i()(this,e),this._timer=0,this._core=t,this._sentWaitingBeacon=!1,this._lastFireData={},this._isfan="",this._outerParams={},this._vvfrom=t.params.vvfrom,this.__endpingback=undefined,this.__pingbackList={start:0,vvauto:undefined}}return o()(e,[{key:"sendADStartPlayPingback",value:function(){this.__endpingback=undefined,this._send({t:15,pt:""},!0)}},{key:"sendStartPlayPingback",value:function(){this.__endpingback=undefined,this._send({t:1}),-1===this._timer&&this.sendTimingPingback()}},{key:"sendTimingPingback",value:function(){this._timer=0;var e=this,t=0;clearTimeout(this._timer);var n=!0;!function r(){e._core.hasStatus(b.a.Status_Playing)&&((t+=1e3)%15e3==0&&n?(n=!1,e._send({t:2,tm:15})):t%3e4==0&&e._send({t:2,tm:30}));if(t%6e4==0&&e._core.getCurrStatus()===b.a.Status_Playing){var i=I.a.isLogin()?"QP008":"QP007",a=T.a.get(i);a=""===a?0:parseInt(a,10),a+=60,T.a.set(i,a,{expires:31536e6,path:"/",domain:"iqiyi.com"})}clearTimeout(e._timer),e._timer=setTimeout(r,1e3)}()}},{key:"sendEndPlayPingback",value:function(e,t){if(this.__endpingback===undefined){this.__endpingback=!0;var n,r=this._core.getMovieInfo(),i=this._core.playproxy._playingSpend||0,a=this._core.params,o=51===(r.vd||"")?59:r.vd||"";switch(t=t||r.tvid,e){case 1:n=4;break;case 2:n=6;break;case 3:n=7;break;case 4:n=11;break;case 5:n=9;break;default:n=0}var s={t:13,tm:i,endtp:n};this._lastFireData.t?Object(w.a)(s,this._lastFireData):(Object(w.a)(s,{r:t,ra:o,vfrmtp:!0===a.autoplay?1:0}),a.vvauto&&(s.vvauto=!0===a.autoplay?4:2),Object(w.a)(s,this._outerParams,!0),a.vvauto||delete s.vvauto,Object(w.a)(s,this._outerParams,!0),a.vvauto||delete s.vvauto),this._send(s,!0)}}},{key:"sendWaitingPingback",value:function(e){var t=this._core.getCDNInfo().host;e?(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"ad",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4016"),this.sendErrorPlayPingback("","KIWI-4016")):(this._sentWaitingBeacon||(this._sentWaitingBeacon=!0,this._send({t:8,jampt:"video",stu_sc:1,isquit:0,cdnadr:t})),this.sendErrorPlayPingback("","4015"),this.sendErrorPlayPingback("","KIWI-4015"))}},{key:"sendAutoUpToVDPingback",value:function(e,t){this._send({t:12,fa:5,ra:t,upto:e},!0)}},{key:"sendAutoDwnToVDPingback",value:function(e,t){this._send({t:12,fa:4,ra:t,dwnto:e},!0)}},{key:"sendPlayingPingback",value:function(){this._sentWaitingBeacon&&(this._sentWaitingBeacon=!1)}},{key:"sendErrorPlayPingback",value:function(e,t,n){var r=t||Cl[e];this._send({t:0,ec:r,psrc:n||""})}},{key:"_send",value:function(e,t){var n=this,r=this._core,i=r.logger,a=r.pingbackQOS,o=n._getParams(e);Rd.getPingbackDfp(e).then((function(s){r.getVideoInfo((function(c){I.a.isVip((function(u){Object(w.a)(o,{rn:Math.random(),dfp:s,stime:(new Date).getTime(),r:c.tvid||"",hu:u?1:-1}),Object(w.a)(o,e,t),n._lastFireData=o;var d=R.pingbackV6Url;0==e.t&&(d=R.pingbackQosUrl),P.a.beacon(o,d),r.params.sourcePage&&(1==e.t?(i.info("send pingback, t=1, vvauto=".concat(o.vvauto,",  pms=").concat(JSON.stringify(o))),n.__pingbackList.start++,n.__pingbackList.vvauto=o.vvauto):13==e.t&&(i.info("send pingback, t=13, vvauto=".concat(o.vvauto,",  pms=").concat(JSON.stringify(o))),(0==n.__pingbackList.start||4==n.__pingbackList.vvauto&&4!==o.vvauto)&&(i.info("send pingback, t=1|13, checkerror"),a.sendLogToCompass("pingback")),n.__pingbackList={start:0,vvauto:undefined}))}))}))}))}},{key:"_getParams",value:function(e){var t=this,n=this._core,r=n.getMovieInfo(),i=n.getCurrLoaderMode(),a=-1,o=51===(r.vd||"")?59:r.vd||"";switch(i){case"CDN":a=0;break;case"P2P":a=1}var s={u:S.a.getFluid()||"",pu:I.a.getUid()||"",p1:Rd.p_code,v:n.playerVersion,ce:S.a.getWeid(),de:S.a.getQtsid()||"",c1:r.cid||"",ve:S.a.getEid(),ht:r.isVIP?1:0,pt:n.getCurrenttime(),isdm:0,duby:0,ra:o,clt:"",ps2:T.a.get("QC007")||"",ps3:n.params.ps3||"",ps4:"",br:A.a.browser.userAgent,mod:L.a.local()||"",purl:window.location.href,tmplt:n.getPageTmpltType(),ptid:A.a.getPtid(L.a.isTWLocale()),os:Rd.os,nu:S.a.getIsNewUser()?1:0,vfm:T.a.get("QP005")||"",coop:"",ispre:n.isTryWatch()?1:0,videotp:"undefined"!=typeof r.is3D?r.is3D:"",drm:Rd.getDrmType(r),plyrv:"",rfr:window.document.referrer,fatherid:r.albumId||"",stauto:n.autoVdUsing?1:0,algot:n.autoVdAlgot,vvfrom:t._vvfrom||"",vfrmtp:!0===n.params.autoplay?1:0,pagev:n.params.pagev||"",engt:2,ldt:a,krv:n.kernelVersion||"0.0.0",wtmk:r.watermark||0,duration:1e3*n.getDuration(),bkt:t._outerParams.bkt||n.params.bkt,e:t._outerParams.e||n.params.e,stype:t._outerParams.stype||n.params.stype,r_area:t._outerParams.r_area||n.params.r_area,r_source:t._outerParams.r_source||n.params.r_source};n.picInPic?s.s4="80720_playerctrl_picinpic":s.s4=n.params.vfrmrst||"",n.params.abtest&&(s.abtest=n.params.abtest),n.params.vvauto&&(s.vvauto=!0===n.params.autoplay?4:2,t._outerParams&&t._outerParams.vvauto&&(s.vvauto=t._outerParams.vvauto)),e&&e.t&&(Object(w.a)(s,{s3:n.params.vfrmblk||""}),2==e.t&&Object(w.a)(s,{vbr:t.getVBR()}),!n.ivosRuning||1!=e.t&&2!=e.t&&13!=e.t&&15!=e.t&&8!=e.t||(s.aid=r.albumId,s.r=r.tvid,s.biz=n.currentBlockid,s.s3="006191_ivos_videoshow"));var c,u,d=n.getCurrManifestType();if(null!==d&&Object(w.a)(s,{mft:d}),null!==d){switch(d){case 0:c=2;break;case 1:c=7;break;case 2:c=0;break;case 3:c=5;break;case 5:c=110;break;case 6:c=101}Object(w.a)(s,{ra1:c})}var l=n.params.vfrm||"";n.isFullScreen?(l="901111_pcwh5_browerfull",u=4):n.isWebFullScreen?(l="901111_pcwh5_pagefull",u=7):u=n.isSmallWindowMode||n.picInPic?2:3,Object(w.a)(s,{wint:u,s2:l});var f=0,h=0,p=-1;if(navigator.connection){var _=navigator.connection.downlink,v=(navigator.connection.effectiveType||"").toLowerCase(),g=(navigator.connection.type||"").toLowerCase();switch(v){case"4g":h=18;break;case"3g":h=17;break;case"2g":h=16;break;case"slow-2g":h=14}switch(g){case"cellular":h=15;break;case"wifi":h=1;break;case"ethernet":h=13;break;case"bluetooth":h=21;break;case"wimax":h=22}var y=n.getDataBufferInfo();y&&(p=y.len),f=_,Object(w.a)(s,{bw:f,ntwk:h,dl:p})}return"{}"==JSON.stringify(t._outerParams)||n.ivosRuning||Object(w.a)(s,t._outerParams,!0),n.isInteractVideo&&"0"==n.interactionMode&&!n.isIVMain&&(s.iamvid=n.iv_state&&n.iv_state.uniqueId||""),s}},{key:"getVBR",value:function(){var e=this._core,t=e.getDuration(),n=0;if(e.movieinfo&&0!==t&&!e.isAd()){var r=e.movieinfo.getVDInfo().vsize;n=parseInt(r/t)}return n}},{key:"setPlayPingbackInfo",value:function(e){var t={},n=this._core;e.vfrm&&(t.s2=e.vfrm),e.vfrmblk&&(t.s3=e.vfrmblk),e.vfrmrst&&(t.s4=e.vfrmrst),e.vfrmtp&&(t.vfrmtp=e.vfrmtp),n.params.vvauto&&(t.vvauto=e.vvauto),delete e.vvauto,delete e.vfrm,delete e.vfrmblk,delete e.vfrmrst,delete e.vfrmtp,t=Object(w.a)(t,e,!0),this._outerParams=Object(w.a)(this._outerParams,t,!0)}},{key:"destory",value:function(){clearTimeout(this._timer),this._timer=-1}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}}]),e}(),Bl="",Fl=function(){function e(t){i()(this,e),this._core=t,Bl=t.playerVersion,this._vvfrom=t.params.vvfrom}var t;return o()(e,[{key:"sendVrsRequestPingback",value:function(){this._send({t:"init"})}},{key:"sendVrsReadyPingback",value:function(){this._send({t:"ready"})}},{key:"sendFinishPresPingback",value:function(){this._send({t:11})}},{key:"sendPlayTimeRecord",value:function(){var e=this._core.sptr,t=e.plyastm;e.plyUsedTime>7e3||this._send({t:10,psdklstm:0,psdkletm:e.psdkletm-e.psdklstm,psdkistm:e.psdkistm-t,psdkietm:e.psdkietm-t,vcistm:e.vcistm-t,vcietm:e.vcietm-t,asdklstm:e.asdklstm-t,asdkletm:e.asdkletm-t,asdkistm:e.asdkistm-t,asdkietm:e.asdkietm-t,adirqstm:e.adirqstm-t,adirqetm:e.adirqetm-t,adsrqstm:e.adsrqstm-t,adsrqetm:e.adsrqetm-t,adlstm:e.adlstm-t,adletm:e.adletm-t,adastm:e.adastm-t,adaetm:e.adaetm-t,plyastm:e.plyastm-t,plyaetm:e.plyaetm-t,ffstm:e.ffstm-t,ffetm:e.ffetm-t,vclstm:e.vclstm-t,vcletm:e.vcletm-t})}},{key:"sendSeekBenchmark",value:function(){var e=this._core,t=e.sbtr;0===t.diy_apc||null===t.diy_apstm||t.diy_muxtm>=t.diy_setm||this._send({t:9,ct:"pcwseektc",diy_ismob:W.a.query("__pmobius__")?1:0,diy_manifesttp:e.getCurrManifestType(),diy_sstm:t.diy_sstm,diy_setm:t.diy_setm,diy_vsitm:t.diy_vsitm,diy_vsdtm:t.diy_vsdtm,diy_vptm:t.diy_vptm,diy_lstm:t.diy_lstm,diy_frdtm:t.diy_frdtm,diy_rdc:t.diy_rdc,diy_rdtm:t.diy_rdtm||0,diy_muxc:t.diy_muxc||0,diy_muxstm:t.diy_muxstm||0,diy_muxtm:t.diy_muxtm||0,diy_apc:t.diy_apc,diy_apstm:t.diy_apstm,diy_aptm:t.diy_aptm||0,diy_fdlc:t.diy_fdlc,diy_fdlt:t.diy_fdlt})}},{key:"sendQOSReport",value:function(e){var t={t:11};switch(Object(w.a)(t,e.para),e.type){case"chunkCheck":t.ct="vcut";break;case"DNSParser":t.ct="dlscherr";break;case"BWReport":t.ct="dlbw"}this._send(t)}},{key:"sendStuckdetl",value:function(e,t,n){var r=+new Date-t,i=n?"ad":"video";this._send({t:11,ct:"stuckdetl",jampt:i,isquit:e,replayt:r})}},{key:"_send",value:function(e){var t=this._core,n=t.getMovieInfo(),r=51===(n.vd||"")?59:n.vd||"",i={u:S.a.getFluid()||"",pu:I.a.getUid()||"",p1:Rd.p_code,v:Bl,ce:S.a.getWeid(),c1:n.cid||"",r:n.tvid||"",ve:S.a.getEid(),de:S.a.getQtsid()||"",ht:n.isVIP?1:0,pt:t.getCurrenttime(),isdm:0,ra:r,mod:L.a.local()||"",purl:window.location.href,tmplt:t.getPageTmpltType(),ptid:A.a.getPtid(L.a.isTWLocale()),os:Rd.os,re:window.screen.width+"x"+window.screen.height,nu:S.a.getIsNewUser()?1:0,vfm:T.a.get("QP005")||"",ispre:t.isTryWatch()?1:0,videotp:"undefined"!=typeof n.is3D?n.is3D:"",drm:Rd.getDrmType(n),plyrv:"",rfr:window.document.referrer,fatherid:n.albumId||"",stauto:t.autoVdUsing?1:0,vvfrom:this._vvfrom||"",wtmk:n.watermark||0,algot:t.autoVdAlgot,br:A.a.browser.userAgent,krv:t.kernelVersion||"0.0.0",duby:0},a=t.getCurrManifestType();null!==a&&Object(w.a)(i,{mft:a});var o=-1;switch(t.getCurrLoaderMode()){case"CDN":o=0;break;case"P2P":o=1}var s,c=0,u=0,d=-1;if(navigator.connection){var l=navigator.connection.downlink,f=(navigator.connection.effectiveType||"").toLowerCase(),h=(navigator.connection.type||"").toLowerCase();switch(f){case"4g":u=18;break;case"3g":u=17;break;case"2g":u=16;break;case"slow-2g":u=14}switch(h){case"cellular":u=15;break;case"wifi":u=1;break;case"ethernet":u=13;break;case"bluetooth":u=21;break;case"wimax":u=22}var p=t.getDataBufferInfo();p&&(d=p.len),c=l,Object(w.a)(i,{bw:c,ntwk:u,dl:d,ldt:o})}Object(w.a)(e,i),s=e,Rd.getPingbackDfp(s).then((function(e){I.a.isVip((function(t){var n={rn:Math.random(),dfp:e,stime:(new Date).getTime(),hu:t?1:-1};Object(w.a)(n,s),P.a.beacon(n,R.pingbackQosUrl)}))}))}},{key:"setvvfrom",value:function(e){e&&(this._vvfrom=e)}},{key:"sendLogToCompass",value:(t=K()(Z.a.mark((function r(e){var t,i,a,o,s,c,u,d,l,f;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.e(7),n.e(0)]).then(n.bind(null,662));case 2:t=r.sent["default"],i=this._core,a=E.a.getLog(),o=t.gzip(a),s=new XMLHttpRequest,c=i.getManifestTypes(),u=i.getCurrManifestType(),d="OTHER"+u,l=(e||"").replace(/-/gi,"_"),r.t0=u,r.next=r.t0===c.HLS?14:r.t0===c.F4V||r.t0===c.FLV?16:r.t0===c.DASH_VP9?18:r.t0===c.DASH_AV1?20:r.t0===c.JDASH?22:24;break;case 14:return d="HLS",r.abrupt("break",24);case 16:return d="F4V",r.abrupt("break",24);case 18:return d="VP9",r.abrupt("break",24);case 20:return d="AV1",r.abrupt("break",24);case 22:return d="JDASH",r.abrupt("break",24);case 24:(f=[]).push(Rd.browserName()),f.push(L.a.isTWLocale()?"TW":"CN"),f.push(d),f.push(l),f.push(H.a.getEventId(i.getMovieInfo().tvid)),s.open("POST","//qosp.iqiyi.com/crashlog?source=pcwplayer"),s.setRequestHeader("Content-Encoding","gzip"),s.setRequestHeader("Content-Type","application/octet-stream"),s.setRequestHeader("File-Name",f.join("_")),s.send(o);case 35:case"end":return r.stop()}}),r,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Ul=function Av(e){i()(this,Av);var t=+new Date;this.psdklstm=e.pgct||t,this.psdkletm=t,this.psdkistm=t,this.psdkietm=t,this.vcistm=0,this.vcietm=0,this.ffstm=0,this.ffetm=0,this.vclstm=0,this.vcletm=0,this.asdklstm=t,this.asdkletm=t,this.asdkistm=0,this.asdkietm=0,this.adirqstm=0,this.adirqetm=0,this.adsrqstm=0,this.adsrqetm=0,this.adlstm=0,this.adletm=0,this.adastm=t,this.adaetm=0,this.plyastm=t,this.plyaetm=0,this.adUsedTime=0,this.plyUsedTime=0},jl=0,Vl=1,Wl=2,Hl=function(){return performance.now()},zl=function(){function e(){i()(this,e),this.status=jl,this.benchmark=null,this._initData()}return o()(e,[{key:"cost",get:function(){return this.diy_setm||0}},{key:"_initData",value:function(){this.loaderStat={count:0,timeCost:0,lastPumpTime:null},this.muxStat={count:0,timeCost:0,lastSpitTime:null,lastPushTime:null},this.mediaStat={count:0,timeCost:0,lastAppendTime:null},this.authStat={count:0,timeCost:0,lastTime:null},this.diy_sstm=0,this.diy_setm=null,this.diy_vsitm=null,this.diy_vsdtm=null,this.diy_vptm=null,this.diy_lstm=null,this.diy_frdtm=null,this.diy_rdc=null,this.diy_rdtm=null,this.diy_muxc=null,this.diy_muxstm=null,this.diy_muxtm=null,this.diy_apc=null,this.diy_apstm=null,this.diy_aptm=null,this.diy_fdlc=0,this.diy_fdlt=0}},{key:"_update",value:function(e,t){this.status===Vl&&Object.prototype.hasOwnProperty.call(this,e)&&null!==this.benchmark&&(this[e]=null==t?Math.round(Hl()-this.benchmark):t)}},{key:"start",value:function(){this.status=Vl,this.benchmark=Hl(),this._initData()}},{key:"end",value:function(){this._update("diy_setm"),this.status=Wl}},{key:"isSeekingStatus",value:function(){return this.status===Vl}},{key:"mediaSeeking",value:function(){this._update("diy_vsitm")}},{key:"mediaSeeked",value:function(){this._update("diy_vsdtm")}},{key:"mediaPlaying",value:function(){null==this.diy_vsdtm&&this._update("diy_vsdtm"),this._update("diy_vptm")}},{key:"seekLoader",value:function(){this._update("diy_lstm")}},{key:"pumpLoader",value:function(e){var t=this.loaderStat;e?(null===this.diy_frdtm&&this._update("diy_frdtm"),t.lastPumpTime&&(t.timeCost+=Math.round(Hl()-t.lastPumpTime)),t.lastPumpTime=null):t.lastPumpTime||(t.lastPumpTime=Hl()),t.count++,t.count>0&&this._update("diy_rdc",t.count),t.timeCost>0&&this._update("diy_rdtm",t.timeCost)}},{key:"muxSwallow",value:function(){var e=this.muxStat;e.count++,e.lastPushTime=Hl(),e.lastSpitTime=null}},{key:"muxspit",value:function(){var e=this.muxStat,t=Hl();null===e.lastSpitTime?e.timeCost+=Math.round(t-e.lastPushTime):e.timeCost+=Math.round(t-e.lastSpitTime),null===this.diy_muxstm&&this._update("diy_muxstm"),e.count>0&&this._update("diy_muxc",e.count),e.timeCost>0&&this._update("diy_muxtm",e.timeCost),e.lastSpitTime=t}},{key:"sbAppending",value:function(){this.mediaStat.lastAppendTime=Hl()}},{key:"sbAppended",value:function(){var e=this.mediaStat;e.count++,null!==e.lastAppendTime&&(e.timeCost+=Math.round(Hl()-e.lastAppendTime)),null===this.diy_apstm&&this._update("diy_apstm"),e.count>0&&this._update("diy_apc",e.count),e.timeCost>0&&this._update("diy_aptm",e.timeCost)}},{key:"authkeyInvoking",value:function(){this.authStat.lastTime=Hl()}},{key:"authkeyInvoked",value:function(){var e=this.authStat;null!==e.lastTime&&(e.count++,e.timeCost+=Math.round(Hl()-e.lastTime),this._update("diy_fdlc",e.count),this._update("diy_fdlt",e.timeCost))}}]),e}();function Yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Gl=function(e){return parseInt(e,10)},Ql=function(e){d()(n,e);var t=Yl(n);function n(e){var r;return i()(this,n),(r=t.call(this)).logger=new E.a("EpisodeManager[".concat(e,"]")),r.EpisodeStore={},r}return o()(n,[{key:"_ensureDataStructure",value:function(e){var t=this.EpisodeStore[e]||{};Zu.a.isObject(t.pres)?(t.pres.finish=!!t.pres.finish,t.pres.queue=Zu.a.isArray(t.pres.queue)?t.pres.queue:[]):t.pres={finish:!1,queue:[]},Zu.a.isObject(t.mids)?(t.mids.finish=!!t.mids.finish,t.mids.queue=Zu.a.isArray(t.mids.queue)?t.mids.queue:[]):t.mids={finish:!1,queue:[]},Zu.a.isObject(t.briefs)?(t.briefs.finish=!!t.briefs.finish,t.briefs.queue=Zu.a.isArray(t.briefs.queue)?t.briefs.queue:[]):t.briefs={finish:!1,queue:[]},Zu.a.isObject(t.features)?(t.features.finish=!!t.features.finish,t.features.queue=Zu.a.isArray(t.features.queue)?t.features.queue:[]):t.features={finish:!1,queue:[]},this.EpisodeStore[e]=t}},{key:"clear",value:function(e){e=Gl(e),delete this.EpisodeStore[e]}},{key:"clearAll",value:function(){this.EpisodeStore={}}},{key:"_getQueue",value:function(e,t){var n=[];return e=Gl(e),this.valid(e)&&(n=this.EpisodeStore[e][t].queue),n}},{key:"getPres",value:function(e){return this._getQueue(e,"pres")}},{key:"getMids",value:function(e){return this._getQueue(e,"mids")}},{key:"getBriefs",value:function(e){return this._getQueue(e,"briefs")}},{key:"addPres",value:function(e,t){e=Gl(e),this.valid(e)&&Zu.a.isArray(t)&&(this.EpisodeStore[e].pres.queue=this.EpisodeStore[e].pres.queue.concat(t))}},{key:"finishPres",value:function(e,t){if(e=Gl(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].pres.finish;var n=this.EpisodeStore[e].pres;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddPres",{videoId:e,length:n.queue.length}),this.logger.info("finishPres "+e))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishPres invalid "+e)}}},{key:"addMids",value:function(e,t){e=Gl(e),this.valid(e)&&Zu.a.isArray(t)&&(this.EpisodeStore[e].mids.queue=this.EpisodeStore[e].mids.queue.concat(t))}},{key:"finishMids",value:function(e,t){if(e=Gl(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].mids.finish;var n=this.EpisodeStore[e].mids;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddMids",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishMids invalid "+e)}}},{key:"addBriefs",value:function(e,t){e=Gl(e),this.valid(e)&&Zu.a.isArray(t)&&(this.EpisodeStore[e].briefs.queue=this.EpisodeStore[e].briefs.queue.concat(t))}},{key:"finishBriefs",value:function(e,t){if(e=Gl(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].briefs.finish;var n=this.EpisodeStore[e].briefs;t&&!1===n.finish&&(n.finish=t,this.emit("finishAddBriefs",{videoId:e,length:n.queue.length}))}else{if("boolean"!=typeof t)return!1;this.logger.warn("finishBriefs invalid, "+e)}}},{key:"finishFeatures",value:function(e,t){if(e=Gl(e),this.valid(e)){if("boolean"!=typeof t)return this.EpisodeStore[e].features.finish;this.EpisodeStore[e].features.finish=t}}},{key:"setInfo",value:function(e,t){e=Gl(e),this.valid(e)&&(this.EpisodeStore[e].movieInfo=t)}},{key:"getInfo",value:function(e){var t;return this.valid(e)&&this.EpisodeStore[e]&&(t=this.EpisodeStore[e].movieInfo),t}},{key:"setDefinitionAd",value:function(e,t){e=Gl(e),this.valid(e)&&(this.EpisodeStore[e].definitionAdInfo=t)}},{key:"valid",value:function(e,t){if(e=Gl(e),"boolean"!=typeof t)return this.EpisodeStore[e]&&!0===this.EpisodeStore[e].valid?(this._ensureDataStructure(e),t=!0):t=!1,t;this._ensureDataStructure(e),this.EpisodeStore[e].valid=t}},{key:"destroy",value:function(){this.EpisodeStore={},this.removeAllListeners("finishAddPres"),this.removeAllListeners("finishAddMids"),this.removeAllListeners("finishAddBriefs")}}]),n}(_.a);function Kl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var $l=function(e){d()(n,e);var t=Kl(n);function n(e,r){var a;i()(this,n),(a=t.call(this)).pack=r,a.params=e,a.eventlog={vrsready:!1},a.adWholeCorner=!1,a.id=e.parentId,a.ppt=e.ppt||"0",a.local=e.local||"cn_s",a.cyclePlay=!!e.cyclePlay,a.ost=a.getOst(e.ost,e.bd),a.isEnjoy="enjoy"==e.playerType,a.playbackrate=e.playrate,a.playratelist=e.playratelist,a.poster=e.poster;var o=e.skinType||"";a.isMini=!!o,a.isBanner=o.indexOf("banner")>-1,a.isSimple="simple"==o||a.isBanner,a.boss=e.boss||!1,a.playerVersion=nl.a||e.playerVersion,"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay?a.autoplay=!1:a.autoplay=!0,a.isInteractVideo=!(1!=Number(e.isEnabledInteraction)||1!=Number(e.interactionType)&&0!=Number(e.interactionType)||A.a.browser.EDGE||L.a.isTWLocale()),e.isRecordProgress||!1!==e.isRecordProgress&&"false"!==e.isRecordProgress?a.isRecordProgress=!0:a.isRecordProgress=!1,a.interactionMode=e.interactionType,a.isIVMain=a.isInteractVideo,a.iv_state={},a.isInteracting=!1,a.adPlaySource=null,a.ivosRuning=!1,a.emptionType=0,Gu.a.setEngine(c()(a)),a.sptr=new Ul(e),a.sbtr=new zl,a.pingbackV6=new Nl(c()(a)),a.pingbackQOS=new Fl(c()(a)),a.movieinfo=new Xd(c()(a)),a.i18n=L.a,a.user=I.a,a.VI=z.a,a.picInPic=!1,a.isFullScreen=!1,a.isWebFullScreen=!1,a.isSmallWindowMode=e.isSmallWindowMode||!1,a.setMaxListeners(25),L.a.setLocale(a.local),e.ptid&&A.a.setPtid(e.ptid),Xu.a.closeBit(1,37),L.a.isTWLocale()?Xu.a.closeBit(4,46):(Xu.a.openBit(4,3),Xu.a.openBit(4,46)),a.firstLoadMovie=!0,a.logger=new E.a("DataEngine[".concat(a.id,"]")),a.mutedstart=!1,a.isInstallClient=!1;var s=W.a.query("__bid__");return a.userSetBid=s?parseInt(s):0,a}return o()(n,[{key:"kernelVersion",get:function(){return this.playproxy.knlRevision}},{key:"p2pVersion",get:function(){return this.playproxy.kiwi.p2pVersion||""}},{key:"audioEnabled",get:function(){return Xu.a.hasBit(1,3)&&!(A.a.browser.FIREFOX||A.a.browser.EDGE)}},{key:"vd",get:function(){var e=V.a.read(V.a.PLAYER_VD_KEY)||2;if(e=parseInt(e,10),this.firstLoadMovie&&(this.firstLoadMovie=!1,!this.playproxy._autoVdUsing||96!=e&&1!=e||(e=2,V.a.write(V.a.PLAYER_VD_KEY,e)),I.a.isLogin()&&T.a.get("QP0023")&&(e=4,this.playproxy._autoVdUsing=!1,T.a.set("QP0025","1",{expires:2592e5,path:"/",domain:"iqiyi.com"}),T.a.remove("QP0023",{path:"/",domain:"iqiyi.com"}),V.a.write(V.a.PLAYER_VD_KEY,e)),this.userSetBid>0&&(e=k.a.getOldVd(this.userSetBid),V.a.write(V.a.PLAYER_VD_KEY,e))),96===e||1===e||2===e||I.a.isLogin()||L.a.isTWLocale()||(e=2,V.a.write(V.a.PLAYER_VD_KEY,e)),this.params.vd!==undefined&&!L.a.isTWLocale())if(I.a.isLogin()){var t=V.a.read(V.a.PLAYER_VD_KEY)||this.params.vd,n=k.a.getNewVd(t);e=n>k.a.getNewVd(this.params.vd)?n:this.params.vd}else e=this.params.vd;return e},set:function(e){V.a.write(V.a.PLAYER_VD_KEY,e)}},{key:"autoVdValue",get:function(){return this.playproxy.autoVdValue}},{key:"autoVdEnabled",get:function(){var e=this.movieinfo,t=this.playproxy,n=e.getVDInfo(),r=undefined;return n&&(r=n.fileFormat),t.p2pEnabled(r)&&t._autoVdEnable}},{key:"autoVdUsing",get:function(){return this.playproxy._autoVdUsing&&this.autoVdEnabled}},{key:"autoVdAlgot",get:function(){var e="";if(this.autoVdUsing&&this.getCurrLoaderMode()===b.a.P2P_LOADERMODE){var t=this.playproxy.kiwi.episodeStream;t&&(e=t.loader.algot)}return e}},{key:"skip",get:function(){return"noskip"!==T.a.get("QC157",{memory:!0})},set:function(e){e?T.a.remove("QC157",{path:"/",domain:"iqiyi.com"}):T.a.set("QC157","noskip",{expires:31536e6,path:"/",domain:"iqiyi.com"})}},{key:"voice",get:function(){var e=Number(this.params.voice)||parseFloat(V.a.read("QiyiPlayerVoice"));return isNaN(e)&&(e=.6),Number(e)>1&&(e=1),e}},{key:"getOst",value:function(e,t){return e=1===parseInt(e,10)?1===parseInt(t)||"true"===t?1:2:0}},{key:"getMovieInfo",value:function(){return this.movieinfo.current}},{key:"init",value:function(e){var t=this;t.logger.log("DataEngine Init"),t._v=e,t.episode=new Ql(t.id),t.isInteractVideo?t.initInteractVideo(t.params):t._initNormalVideo()}},{key:"initInteractVideo",value:function(e){var t=this;t._initPlayProxy(),t.pack.ad&&!t.adproxy&&(t.adproxy=new Zd(t),t.adproxy.init()),t.IVRecorder?t.IVRecorder.updateParams(e):t.IVRecorder=new il(t,e),t.recorder||(t.recorder=new tl(t)),t.initInteractPackage(e)}},{key:"initInteractPackage",value:function(e){var t=this;t.IVPackageManager?(t.IVPackageManager.reset(),t.IVPackageManager.init(e)):t.IVPackageManager=new Ml(t,e)}},{key:"_initPlayProxy",value:function(){var e=this;e.playproxy||(e.playproxy=new Vd(e),e.playproxy.init(e._v,e.params.channelID),e._initVolume())}},{key:"_initAdProxy",value:function(){var e=this;if(e.pack.ad&&!e.adproxy)e.adproxy=new Zd(e),e.adproxy.init();else{var t=function(){};e.adproxy={clear:t,resize:t,getAdInfo:t}}}},{key:"_initVolume",value:function(){var e=this;e._tempvolume=e.voice,1==parseInt(this.params.isMute,10)||1==this.params.isMute||"true"==this.params.isMute||this.params.masflag?e.setVolume(0,!0):e.setVolume(e.voice)}},{key:"_initNormalVideo",value:function(){this.isMini||(this.recorder=new tl(this)),this.playproxy=new Vd(this),this._initAdProxy(),this.playproxy.init(this._v,this.params.channelID),this._initVolume(),this.load(this.params)}},{key:"load",value:function(e){this.playproxy.load(e)}},{key:"preload",value:function(e,t){this.playproxy.preload(e,t)}},{key:"checkPreload",value:function(){return this.playproxy.checkPreload()}},{key:"refresh",value:function(e){this.playproxy.refresh(e)}},{key:"getCurrentGas",value:function(){return this.playproxy.getCurrentGas()}},{key:"abort",value:function(){this.playproxy.pause(!1,!0),this.autoplay=!1}},{key:"abortAres",value:function(){this.playproxy.abortAres()}},{key:"abortAllAres",value:function(e){this.playproxy.abortAllAres(e)}},{key:"abortAllAresAndSeek",value:function(e,t){this.playproxy.abortAllAres(e,t)}},{key:"video",value:function(){return this.playproxy.video()}},{key:"play",value:function(e){this.playproxy.play(e)}},{key:"pause",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.pause(e,t)}},{key:"isPaused",value:function(){return this.playproxy.isPaused()}},{key:"replay",value:function(){this.playproxy.replay()}},{key:"seek",value:function(e,t,n){this.playproxy.isPatch()||this.playproxy.seek(e,t,n)}},{key:"lockSeek",value:function(){this.playproxy.lockSeek()}},{key:"unlockSeek",value:function(){this.playproxy.unlockSeek()}},{key:"isSeeking",value:function(){return!!this.playproxy.hasSeeking}},{key:"switchDefinition",value:function(e,t){this.playproxy.switchDefinition(e,t)}},{key:"isSwitchingDefinition",value:function(){return this.playproxy._vdsSwitch}},{key:"switchAudioDefinition",value:function(e){this.movieinfo.currentLid!==e&&(this.emit(b.a.NTF_AudioSwitching,e),this.playproxy.switchAudioTrack(e))}},{key:"getBufferTime",value:function(){return this.playproxy.getBufferTime()}},{key:"getSrc",value:function(){return this.playproxy.getSrc()}},{key:"setMuted",value:function(e){var t=this.getVolume();this._tempvolume=t>0?t:this._tempvolume||.6,e?this.setVolume(0):this.setVolume(this._tempvolume)}},{key:"getMuted",value:function(){return 0===this.getVolume()}},{key:"getPlayingDuration",value:function(){return this.playproxy._playingDuration}},{key:"getSkipHeaderTime",value:function(){var e=this.playproxy._skipHT,t=parseInt(this.getDuration());return e>=t&&(e=t-1),e}},{key:"getSkipTailTime",value:function(){return this.playproxy._skipTT}},{key:"isSkipPrelude",value:function(e,t){var n=this.skip;if("boolean"!=typeof e)return n;n!=e&&(this.skip=e,!0!==t&&this.playproxy.setSkipPrelude())}},{key:"setStartPlayTime",value:function(e,t){this.movieinfo.setStartPlayTime(e,t)}},{key:"getStartPlayTime",value:function(){return this.movieinfo.startPlayTime}},{key:"getEndPlayTime",value:function(){return this.movieinfo.endPlayTime}},{key:"getDuration",value:function(){return this.playproxy.getDuration()}},{key:"getVolume",value:function(){return this.playproxy.getVolume()}},{key:"setVolume",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];this.playproxy.setVolume(e),this.playproxy.video().muted=t}},{key:"getVipTypes",value:function(){return this.getMovieInfo().vipTypes}},{key:"getCurrentVD",value:function(){return this.playproxy.getCurrentVD()}},{key:"getPlayInfo",value:function(e){var t=this;t._getpcall=t._getpcall||[],t._getpcall.push(e);var n=t.getMovieInfo(),r=function(){var e={};e.tvid=n.tvid,e.vid=n.vid,e.cid=n.cid,e.albumId=n.albumId,e.duration=t.getDuration(),e.rate=t.getCurrentVD(),e.vidl=t.movieinfo.vidl,e.previewImageUrl=n.previewImageUrl,e.audl=n.audl;var r=t._getpcall.slice(0);t._getpcall=[];for(var i=0;i<r.length;i++)r[i]&&function(t){setTimeout((function(){t(e)}),0)}(r[i]);r=null};n.originalData?r():t.on(b.a.NTF_VRSReady,r)}},{key:"getVideoInfo",value:function(e){this.playproxy.getVideoInfo(e)}},{key:"getVideoInfoByTvid",value:function(e,t){this.playproxy.getVideoInfoByTvid(e,t)}},{key:"getCurrStatus",value:function(){return this.playproxy.currStatus}},{key:"isAd",value:function(){return this.playproxy.isAd()}},{key:"isPatch",value:function(){return this.playproxy.isPatch()}},{key:"getCurrentAdInfo",value:function(){var e={};return this.isAd()&&(e=this.adproxy.getAdInfo()),e}},{key:"switchVideo",value:function(e){"false"===e.autoplay||!1===e.autoplay||"0"==e.autoplay||0==e.autoplay?this.autoplay=!1:"true"!==e.autoplay&&!0!==e.autoplay&&"1"!=e.autoplay&&1!=e.autoplay||(this.autoplay=!0),this.playproxy.switchVideo(e)}},{key:"isTryWatch",value:function(){return this.movieinfo.isTryWatch}},{key:"getPreviewType",value:function(){return parseInt(this.movieinfo.previewType||-1,10)}},{key:"getPreviewTime",value:function(){return this.movieinfo.previewTime||Infinity}},{key:"recharge",value:function(e,t,n){this.playproxy.noticeRecharge(e,t,n)}},{key:"hasStatus",value:function(e){return this.playproxy.hasStatus(e)}},{key:"destroy",value:function(){this.episode.destroy(),this.adproxy.destroy(),this.playproxy.destory(),this.movieinfo.clear(),this.recorder.stopTimer(),this.pingbackV6.destory(),this.emit(b.a.Status_Destroy)}},{key:"getPlaybackRate",value:function(){return this.playproxy.getPlaybackRate()}},{key:"setPlaybackRate",value:function(e){this.playproxy.setPlaybackRate(e)}},{key:"getCurrenttime",value:function(){return this.playproxy.getCurrenttime()}},{key:"getEngineType",value:function(){return b.a.ENGINE_TYPE}},{key:"getPageTmpltType",value:function(){return this.params.pageTmpltType}},{key:"un",value:function(e,t){return this.off(e,t),this}},{key:"getVideoMuted",value:function(){return this.playproxy.video().muted}},{key:"resize",value:function(){this.adproxy.resize()}},{key:"jsNotifyAdManager",value:function(e){this.emit(b.a.NTF_AD_NotifyManager,e)}},{key:"notyfyADInfo",value:function(e){this.adproxy.sdk&&this.adproxy.sdk.emit(e.type,e.data)}},{key:"setEndPlay",value:function(e){this.playproxy.setEndPlay(e)}},{key:"getCurrManifestType",value:function(){return this.playproxy.kiwi.currentManifestType}},{key:"getManifestTypes",value:function(){return this.playproxy.getManifestTypes()}},{key:"getDownloadSpeed",value:function(){return this.playproxy?this.getCurrLoaderMode()===b.a.CDN_LOADERMODE?this.playproxy.kiwi.stats.downloadSpeed:this.playproxy.kiwi.stats.bandwidth:null}},{key:"getCDNInfo",value:function(){if(this.getCurrLoaderMode()===b.a.CDN_LOADERMODE){var e=this.playproxy.kiwi.stats;return{protocol:e.netProtocol||"",host:e.cdnHost||""}}var t=this.playproxy.kiwi.stats;return{protocol:t.netProtocol||"",host:t.cdnHost||""}}},{key:"startFireFPSEvent",value:function(){this.playproxy.kiwi.startReportFPS()}},{key:"stopFireFPSEvent",value:function(){this.playproxy.kiwi.stopReportFPS()}},{key:"getCurrLoaderMode",value:function(){return this.playproxy.kiwi.currentLoaderMode}},{key:"getDataBufferInfo",value:function(){return this.playproxy.kiwi.dataBufferInfo}},{key:"setPlayPingbackInfo",value:function(e){this.pingbackV6&&this.pingbackV6.setPlayPingbackInfo(e)}},{key:"setDelayPlayInfo",value:function(e){this.playproxy.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.playproxy.clearDelayPlayInfo(e)}},{key:"getBufferInfo",value:function(){return this.playproxy.kiwi.bufferInfo}},{key:"getMP4URLByTvid",value:function(e,t){this.playproxy.getMP4URLByTvid(e,t)}},{key:"getCorrectTimeObj",value:function(){var e,t,n=this.getDuration(),r=this.getCurrenttime(),i=!1,a="",o=this.getCurrentAdInfo();o.isFusionMode&&o.seekable?(t=n+this.movieinfo.current.duration,e=r+o.offset,i=!0,a=o.rollType):(e=r,t=n);return{current:r,cduration:n,acurrent:e,aduration:t,isFusionMode:i,rollType:a}}},{key:"isFusionMode",value:function(){var e=this.getCurrentAdInfo();return e&&e.isFusionMode}}]),n}(_.a),Zl=function(){function e(){i()(this,e)}return o()(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this}},{key:"once",value:function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this}},{key:"off",value:function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this}},{key:"listeners",value:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]}},{key:"hasListeners",value:function(e){return!!this.listeners(e).length}}]),e}();Zl.prototype.addEventListener=Zl.prototype.on,Zl.prototype.removeEventListener=Zl.prototype.off;var Xl=Object.prototype,Jl=function(e){var t=Xl.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},ef=function(e){return oe()(e)},tf=function(e,t){return Xl.hasOwnProperty.call(e,t)},nf=function(e){return e==Infinity||e==-Infinity},rf=function(e){return!isNaN(e)&&"number"==Jl(e)},af=function(e){return!(!rf(e)||nf(e))},of=function(e){return!!af(e)&&0==e%1},sf=function(e){if(e){var t=ef(e);return"object"==t||"function"==t}return!1},cf=function(e){return sf(e)&&"function"!=Jl(e)},uf=function(e){return!(!e||"object"!=Jl(e))&&(!e.nodeType&&!e.setInterval)},df=function(e){return"string"==Jl(e)},lf=function(e){if(!ff(e)&&cf(e)){var t=e.length;if(of(t)&&t>=0)return!0}return!1},ff=function(e){return!(!e||e.window!=e)},hf={_class:Jl,_type:ef,owns:tf,nan:function(e){return e!=e},bool:function(e){return"boolean"==Jl(e)},infinite:nf,number:rf,iod:af,decimal:function(e){return!!af(e)&&0!=e%1},integer:of,oof:sf,object:cf,hash:uf,plainObject:uf,undef:function(e){return"undefined"==ef(e)},fn:function(e){return"function"==Jl(e)},string:df,nos:function(e){return af(e)||df(e)},array:function(e){return"array"==Jl(e)},arraylike:lf,window:ff,empty:function(e){if(df(e)||lf(e))return 0===e.length;if(uf(e))for(var t in e)if(tf(e,t))return!1;return!0},element:function(e){return!(!e||1!==e.nodeType)},regexp:function(e){return"regexp"==Jl(e)}},pf=function(){var e={};e.is=hf,e.extend=e.assign=function(e){if(e){var n=t.call(arguments,1);i(n,(function(t){d(t,(function(t,n){hf.undef(t)||(e[n]=t)}))}))}return e};var t=[].slice;e.each=i,e.uid=function(e){return e=e||7,Math.random().toString(35).substr(2,e)},e.map=function(e,t){var n=[];return i(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.filter=function(e,t){var n=[];return i(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},e.identity=function(e){return e},e.compact=function(t){return e.filter(t,e.identity)},e.some=function(e,t){return-1!=a(e,t)},e.every=function(e,t){return-1==a(e,s(t))},e.reduce=u,e.sum=function(t){return e.reduce(t,(function(e,t){return e+t}),0)},e.findIndex=a,e.find=function(t,n){var r=e.findIndex(t,n);if(-1!=r)return t[r]},e.indexOf=c,e.includes=function(e,t){return-1!=c(e,t)},e.toArray=o,e.slice=function(e,t,n){var i=[],a=r(e);return a>=0&&(t=t||0,0!==n&&(n=n||a),hf.fn(e.slice)||(e=o(e)),i=e.slice(t,n)),i},e.negate=s,e.forIn=d,e.keys=function(e){var t=[];return d(e,(function(e,n){t.push(n)})),t},e.values=function(e){var t=[];return d(e,(function(e,n){t.push(e)})),t};var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function r(e){if(null!=e)return e.length}function i(e,t){var n=r(e);if(n&&hf.fn(t))for(var i=0;i<n&&!1!==t(e[i],i,e);i++);return e}function a(e,t){var n=-1;return i(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function o(e){var t=[];return i(e,(function(e){t.push(e)})),t}function s(e){return function(){return!e.apply(this,arguments)}}function c(e,t){return hf.string(e)?e.indexOf(t):a(e,(function(e){return t===e}))}function u(e,t,n){return i(e,(function(r,i){n=t(n,r,i,e)})),n}function d(e,t){if(e)for(var n in e)if(hf.owns(e,n)&&!1===t(e[n],n,e))break;return e}function l(e){return e||0==e?e+"":""}e.trim=function(e){return null==e?"":(""+e).replace(n,"")},e.invert=function(e){var t={};return d(e,(function(e,n){t[e]=n})),t},e.lower=function(e){return l(e).toLowerCase()},e.upper=function(e){return l(e).toUpperCase()},e.first=function(e){if(e)return e[0]},e.startsWith=function(e,t){return 0==c(e,t)},e.tostr=l,e.get=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t)return t=t[e],!0})))return t},e.sumBy=function(t,n){var r=0;return e.each(t,(function(t){r+=e.get(t,n)||0})),r},e.has=function(t,n){if((n=p(n)).length&&e.every(n,(function(e){if(null!=t&&hf.owns(t,e))return t=t[e],!0})))return!0;return!1},e.only=function(e,t){return e=e||{},hf.string(t)&&(t=t.split(/ +/)),u(t,(function(t,n){return null!=e[n]&&(t[n]=e[n]),t}),{})},e.curry=function(t){var n=t.length;return function r(i){return function(){var a=i.concat(e.slice(arguments));return a.length>=n?(a.length=n,t.apply(this,a)):r(a)}}([])},e.mapObject=e.mapValues=function(e,t){var n={};return d(e,(function(e,r,i){n[r]=t(e,r,i)})),n},e.before=function(e,t){return function(){if(e>1)return e--,t.apply(this,arguments)}},e.once=function(t){return e.before(2,t)},e.len=r,e.last=function(t){var n=e.len(t);if(n)return t[n-1]},e.max=function(t,n){var r=-1,a=-Infinity;return n=n||e.identity,i(t,(function(e,t){(e=n(e))>a&&(a=e,r=t)})),r>-1?t[r]:a},e.split=function(e,t,n){return(e=l(e)).split(t,n)},e.size=function(t){var n=e.len(t);return null==n&&(n=e.keys(t).length),n},e.flatten=function(e){var t=[];return i(e,(function(e){hf.arraylike(e)?i(e,(function(e){t.push(e)})):t.push(e)})),t},e.union=function(){return e.uniq(e.flatten(arguments))},e.uniq=function(t){return e.uniqBy(t)},e.uniqBy=function(t,n){var r=[],a=[];return hf.fn(n)||(n=null),i(t,(function(t){var i=t;n&&(i=n(t)),e.includes(a,i)||(a.push(i),r.push(t))})),r},e.remove=function(t,n){for(var r=e.len(t)||0,i=[];r--;)n(t[r],r,t)&&i.push(r);return function(t,n){var r=[],i=e.len(n);if(i)for(n=n.sort((function(e,t){return e-t}));i--;){var a=n[i];r.push(Array.prototype.splice.call(t,a,1)[0])}return r.reverse(),r}(t,i)},e.endsWith=function(t,n){return(n+="")==e.slice(t,e.len(t)-e.len(n))},e.isMatch=function(e,t){var n=!0;return e=e||{},d(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n},e.throttle=function(t,n,r){return n=n||0,r=e.extend({leading:!0,trailing:!0,maxWait:n},r),e.debounce(t,n,r)},e.debounce=function(t,n,r){n=n||0;var i,a=(r=e.extend({leading:!1,trailing:!0},r)).maxWait,o=0,s=0,c=Date.now();function u(){return!(c-o>n)&&!(a&&c-s>a)}function d(e,t,n){return o=Date.now(),e.apply(t,n)}function l(){i&&(clearTimeout(i),i=null)}function f(){c=Date.now();var e=u();s=c;var a=this,o=arguments;l(),e?r.trailing&&(i=setTimeout((function(){d(t,a,o)}),n)):d(t,a,o)}return r.leading||(o=c),f.cancel=l,f};var f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;function p(e){if(hf.array(e))return e;var t=[];return l(e).replace(f,(function(e,n,r,i){var a=n||e;r&&(a=i.replace(h,"$1")),t.push(a)})),t}return e}();function _f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var vf="contextName",gf=function(e){d()(n,e);var t=_f(n);function n(e){var r;return i()(this,n),(r=t.call(this))[vf]=e,r}return o()(n,[{key:"setParent",value:function(e){if(e){this[e[vf]]=this.parent=e}}},{key:"getParentByName",value:function(e){for(var t=this;t;){if(t[vf]==e)return t;t=t.parent}}},{key:"getVal",value:function(e){for(var t=this;t;){if(pf.has(t,e))return t[e];t=t.parent}}},{key:"getMultiVals",value:function(e){var t=this,n={};return pf.each(e,(function(e){n[e]=t.getVal(e)})),n}},{key:"getParam",value:function(){for(var e=this,t=6,n=[];t--&&e;)n.push(e),e=e.parent;return n.reverse(),n.unshift({}),pf.extend.apply(pf,n)}}]),n}(Zl),yf=(n(271),pf.is),mf={sep:"&",eq:"=",encode:encodeURIComponent,decode:decodeURIComponent,keepRaw:!1,sort:null,ignoreValues:[undefined]};function bf(e,t,n){return n=pf.find(arguments,(function(e){return yf.object(e)})),e=yf.nos(e)?e:undefined,t=yf.nos(t)?t:undefined,n=pf.extend({},mf,n,{sep:e,eq:t})}var kf=function(e,t,n,r){e+="";var i=(r=bf(t,n,r)).decode;return e=e.split(r.sep),pf.reduce(e,(function(e,t){if(2==(t=t.split(r.eq)).length){var n=t[0],a=t[1];if(!r.keepRaw)try{n=i(n),a=i(a)}catch(o){}e[n]=a}return e}),{})},xf=function(e,t,n,r){r=bf(t,n,r);var i=pf.keys(e),a=r.sort;a&&(yf.fn(a)?i.sort(a):i.sort());var o=r.encode,s=[];return pf.each(i,(function(t){var n=e[t];pf.includes(r.ignoreValues,n)||((yf.nan(n)||null==n)&&(n=""),r.keepRaw||(t=o(t),n=o(n)),s.push(t+r.eq+n))})),s.join(r.sep)},Sf=pf.is,Tf=pf.curry((function Ev(e,t){var n={};e&&t&&pf.forIn(t,(function(t,r){var i=e[r];if(null!=i)if(Sf.object(i)){var a=i.type||function(e){return Sf._class(e)}(t),o=i.name;"object"==a?n[o]=Ev(i.child,t):"array"==a&&(n[o]=pf.map(t,(function(e){return Ev(i.child,e)})))}else n[i]=t}));return n}));var Pf,If,wf={visit:"v",player:"pl",policy:"p",show:"s",template:"tp",creative:"c",tracking:"t",exchange:"x",mixer:"m",statistics:"st",ad:"a",inventory:"i",questionnaireInquiry:"qi"},Af={success:"s",error:"e",load:"l",skip:"sk",skipClick:"sc",click:"clk",impression:"imp",adblock:"adb",close:"cls",start:"st",unsupported:"uns"},Ef=Tf({pingbackType:"p",subtype:"t",uaaUserId:"u",cupidUserId:"a",episodeId:"v",albumId:"b",channelId:"c",vvId:"e",adPlayerId:"y",customInfo:"x",timestamp:"s",videoDuration:"d",isVIP:"g",isPreload:"pl",passportId:"pp",location:"lc",sdkVersion:"av",clientVersion:"vv",requestId:"rid",sequenceId:"sq",orderItemId:"od",creativeId:"ct",dspId:"dp",adInfo:"ai",adStrategy:"as",rawInventory:"ri",originalInventory:"oi",deliveredInventory:"di",forbiddenInventory:"fi",requestDuration:"rd",requestCount:"rc",reqCount:"rc",errorCode:"ec",errCode:"ec",errorMessage:"em",errMessage:"em",errMsg:"em"}),Df={visit:"episodeId albumId channelId location passportId customInfo isPreload",show:"requestCount requestDuration",creative:"",tracking:"",statistics:"",ad:"episodeId albumId channelId sequenceId",inventory:"episodeId albumId channelId rawInventory originalInventory deliveredInventory forbiddenInventory"},qf=(n(287),Object.prototype.toString),Of=function(e){switch(qf.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==oe()(e)&&e&&"number"==typeof e.length)try{if("function"==typeof e.callee)return"arguments"}catch(t){if(t instanceof TypeError)return"arguments"}return null===e?"null":e===undefined?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":oe()(e)},Rf=+Date.now(),Lf=window.document,Mf=/^(?:text|application)\/javascript/i,Cf=/^(?:text|application)\/xml/i,Nf="application/json",Bf="text/html",Ff=/^\s*$/,Uf=function Dv(e){var t=Zf({},e||{});for(Pf in Dv.settings)t[Pf]===undefined&&(t[Pf]=Dv.settings[Pf]);Vf(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host);var n=t.dataType,r=/=\?/.test(t.url);if("jsonp"==n||r)return r||(t.url=Gf(t.url,t.jsonpCallback+"=?")),Dv.JSONP(t);t.url||(t.url=window.location.toString()),Qf(t);var i,a=t.accepts[n],o={},s=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,c=Dv.settings.xhr();t.crossDomain||(o["X-Requested-With"]="XMLHttpRequest"),a&&(o.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),c.overrideMimeType&&c.overrideMimeType(a)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(o["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=Zf(o,t.headers||{}),c.onreadystatechange=function(){if(4==c.readyState){clearTimeout(i);var e,r=!1;if(c.status>=200&&c.status<300||304==c.status||0==c.status&&"file:"==s){n=n||function(e){return e&&(e==Bf?"html":e==Nf?"json":Mf.test(e)?"script":Cf.test(e)&&"xml")||"text"}(c.getResponseHeader("content-type")),e=c.responseText;try{"script"==n?(0,eval)(e):"xml"==n?e=c.responseXML:"json"==n&&(e=Ff.test(e)?null:JSON.parse(e))}catch(a){r=a}r?Hf(r,"parsererror",c,t):Wf(e,c,t)}else Hf(null,"error",c,t)}};var u=!("async"in t)||t.async;for(If in c.open(t.type,t.url,u),t.headers)c.setRequestHeader(If,t.headers[If]);return!1===function(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===jf(t,n,"ajaxBeforeSend",[e,t]))return!1;jf(t,n,"ajaxSend",[e,t])}(c,t)?(c.abort(),!1):(t.timeout>0&&(i=setTimeout((function(){c.onreadystatechange=Yf,c.abort(),Hf(null,"timeout",c,t)}),t.timeout)),c.send(t.data?t.data:null),c)};function jf(e,t,n,r){if(e.global)return!0}function Vf(e){e.global&&0==Uf.active++&&jf(e)}function Wf(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),jf(n),zf(i,t,n)}function Hf(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),jf(r),zf(t,n,r)}function zf(e,t,n){var r=n.context;n.complete.call(r,t,e),jf(n),function(e){e.global&&!--Uf.active&&jf(e)}(n)}function Yf(){}function Gf(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Qf(e){"object"===Of(e.data)&&(e.data=function(e,t){var n=[];return n.add=function(e,t){this.push(Kf(e)+"="+Kf(t))},$f(n,e,t),n.join("&").replace("%20","+")}(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=Gf(e.url,e.data))}Uf.active=0,Uf.JSONP=function(e){if(!("type"in e))return Uf(e);var t,n="jsonp"+ ++Rf,r=Lf.createElement("script"),i={abort:function(){r.parentNode&&r.parentNode.removeChild(r),n in window&&(window[n]=Yf),zf("abort",i,e)}},a=Lf.getElementsByTagName("head")[0]||Lf.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error(e,"error")}),window[n]=function(a){clearTimeout(t),r.parentNode&&r.parentNode.removeChild(r),delete window[n],e.checkParserError&&!function(e){return"object"==oe()(e)&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length}(a)?e.error(e,"parsererror"):Wf(a,i,e)},Qf(e),r.src=e.url.replace(/\?(.+)=\?/,"?$1="+n),a.insertBefore(r,a.firstChild),e.timeout>0&&(t=setTimeout((function(){i.abort(),zf("timeout",i,e)}),e.timeout)),i},Uf.settings={type:"GET",beforeSend:Yf,success:Yf,error:Yf,complete:Yf,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:Nf,xml:"application/xml, text/xml",html:Bf,text:"text/plain"},crossDomain:!1,timeout:0,checkParserError:!1},Uf.get=function(e,t){return Uf({url:e,success:t})},Uf.post=function(e,t,n,r){return"function"===Of(t)&&(r=r||n,n=t,t=null),Uf({type:"POST",url:e,data:t,success:n,dataType:r})},Uf.getJSON=function(e,t){return Uf({url:e,success:t,dataType:"json"})};var Kf=encodeURIComponent;function $f(e,t,n,r){var i="array"===Of(t);for(var a in t){var o=t[a];r&&(a=n?r:r+"["+(i?"":a)+"]"),!r&&i?e.add(o.name,o.value):(n?"array"===Of(o):"object"===Of(o))?$f(e,o,n,a):e.add(a,o)}}function Zf(e){var t=Array.prototype.slice;return t.call(arguments,1).forEach((function(t){for(Pf in t)t[Pf]!==undefined&&(e[Pf]=t[Pf])})),e}var Xf=Uf,Jf=pf.is,eh=function(){return T.a.get("P00001")||""},th=function(e){return T.a.get(e)||""},nh=function(e,t,n){return T.a.set(e,t,n)},rh=function(e){(new Image).src=e},ih=function(e){var t=(e=e||{}).slot||{},n=e.creative||{},r=[t.cuepointType,e.dspId,e.orderItemId,n.creativeId,n.templateType];return(r=pf.map(r,(function(e){return null==e&&(e=""),e}))).join("||")},ah=function qv(e,t,n,r){if(e&&t){var i=e.split(t);if(n=pf.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=qv(e,a,n))}}return e},oh=function(e){var t=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),n=0===document.createElement("canvas").toDataURL("image/heic").indexOf("data:image/heic");return/\.jpg$/.test(e)?(e+="?caplist=jpg",t&&(e+=",webp"),n&&(e+=",heic"),e):e},sh=function(e,t){var n=new Image;return new Promise((function(r,i){var a=function(){n.removeEventListener("load",s),n.removeEventListener("error",o)},o=function(){a(),i("error")},s=function(){a(),r(n)};t&&setTimeout((function(){a(),i("timeout")}),t),e=e.replace(/^(https:|http:)/,""),e=oh(e),n.addEventListener("load",s),n.addEventListener("error",o),n.setAttribute("src",e)}))},ch=function(e,t,n){e=e||{},t=t||{},t={width:Jf.number(t.width)?t.width:Infinity,height:Jf.number(t.height)?t.height:Infinity},n={width:(n=n||{}).width||0,height:n.height||0};var r=Math.max(n.width/e.width,n.height/e.height),i=Math.min(t.width/e.width,t.height/e.height);return r>i&&(r=i=NaN),{min:r,max:i}},uh=function(e){var t=NaN;Jf.string(e)&&(e=e.split(","));var n=pf.first(e);if(!n)return t;if("string"!=typeof n)return t;var r=n.charCodeAt(0);return(r>47&&r<58||r>64&&r<91)&&(t=r),t},dh=function(){var e=th("idx")||"";if(!e)return!1;var t={};try{t=JSON.parse(e)}catch(r){return console.log("idx parse error",r),!1}if(!Jf.object(t))return!1;if(!t.ip)return!1;if(!t.geocode)return!1;if(!t.exptime)return!1;var n="ip:"+t.ip.replace(/X/g,".")+",gc:"+t.geocode+",ept:"+t.exptime;return t=pf.extend(t,{idx:n})},lh=pf.is,fh=["isVIP","isPreload"],hh=function(){function e(){i()(this,e);var t=this;t.uncompressedParam={},t.compressedParam={},t.pingbackParam={}}return o()(e,[{key:"init",value:function(e,t,n){var r=this;r.addUncompressedParam(t),r.addCompressedParam(n),r.getType(),r.getContextParam(e),r.filterContextParam(),r.mergeContextParam(),r.normalizeParam(),r.compressKey(),r.mergePingbackParam(),r.send()}},{key:"getContextParam",value:function(e){var t=this;e instanceof gf?(t.context=e,t.contextParam=e.getParam()):t.contextParam=e}},{key:"filterContextParam",value:function(){var e=this,t="pingbackType subtype timestamp vvId adPlayerId uaaUserId cupidUserId sdkVersion clientVersion isVIP videoDuration requestId "+Df[e.pingbackType];e.contextParam=pf.only(e.contextParam,t)}},{key:"mergeContextParam",value:function(){this.addUncompressedParam(this.contextParam)}},{key:"getType",value:function(){var e=this,t=e.uncompressedParam;e.pingbackType=e.pingbackType||t.pingbackType,e.subtype=e.subtype||t.subtype,t.pingbackType=wf[e.pingbackType]||e.pingbackType,t.subtype=Af[e.subtype]||e.subtype}},{key:"normalizeParam",value:function(){var e=this,t=e.uncompressedParam;if(e.context&&"ad"==e.context.contextName){var n=e.context;e.addUncompressedParam({adInfo:n.adInfo})}pf.each(fh,(function(e){var n=t[e];lh.bool(n)&&(t[e]=n?1:0)}));var r=0;r=e.context&&e.context.getVal("deltaTime")||0,t.timestamp=Date.now()+r,pf.forIn(t,(function(e,n){if(lh.string(e)){var r=e.length;"em"==n&&r>300&&(e=e.slice(0,150)+"||"+e.slice(r-150)),t[n]=e}}))}},{key:"addCompressedParam",value:function(e){pf.extend(this.compressedParam,e)}},{key:"addUncompressedParam",value:function(e){pf.extend(this.uncompressedParam,e)}},{key:"compressKey",value:function(){this.addCompressedParam(Ef(this.uncompressedParam))}},{key:"mergePingbackParam",value:function(){var e=this;if(e.context){var t=e.context.getVal("pingbackParam");pf.extend(e.pingbackParam,t)}}},{key:"send",value:function(){var e=this,t=e.compressedParam||{},n=e.pingbackParam||{},r={},i="";e.context&&e.context.getParentByName("sdk").logger.getLogger("pingback")("send",e.pingbackType||t.p,e.subtype||t.t,e.uncompressedParam,t,n);pf.forIn(t,(function(e,t){pf.has(n,t)||(r[t]=e)})),lh.empty(n)||(i="&"+xf(n,"&","=",{keepRaw:!0}));var a="//msg.qy.net/cp2.gif?"+xf(r)+i;rh(a)}}]),e}(),ph=function(e,t,n){return(new hh).init(e,t,n)},_h=function(e,t,n){return ph(e,{pingbackType:"statistics",subtype:t,customInfo:n})};function vh(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function gh(e,t,n,r,i,a){return vh(function(e,t){return e<<t|e>>>32-t}(vh(vh(t,e),vh(r,a)),i),n)}function yh(e,t,n,r,i,a,o){return gh(t&n|~t&r,e,t,i,a,o)}function mh(e,t,n,r,i,a,o){return gh(t&r|n&~r,e,t,i,a,o)}function bh(e,t,n,r,i,a,o){return gh(t^n^r,e,t,i,a,o)}function kh(e,t,n,r,i,a,o){return gh(n^(t|~r),e,t,i,a,o)}function xh(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,o,s=1732584193,c=-271733879,u=-1732584194,d=271733878;for(n=0;n<e.length;n+=16)r=s,i=c,a=u,o=d,s=yh(s,c,u,d,e[n],7,-680876936),d=yh(d,s,c,u,e[n+1],12,-389564586),u=yh(u,d,s,c,e[n+2],17,606105819),c=yh(c,u,d,s,e[n+3],22,-1044525330),s=yh(s,c,u,d,e[n+4],7,-176418897),d=yh(d,s,c,u,e[n+5],12,1200080426),u=yh(u,d,s,c,e[n+6],17,-1473231341),c=yh(c,u,d,s,e[n+7],22,-45705983),s=yh(s,c,u,d,e[n+8],7,1770035416),d=yh(d,s,c,u,e[n+9],12,-1958414417),u=yh(u,d,s,c,e[n+10],17,-42063),c=yh(c,u,d,s,e[n+11],22,-1990404162),s=yh(s,c,u,d,e[n+12],7,1804603682),d=yh(d,s,c,u,e[n+13],12,-40341101),u=yh(u,d,s,c,e[n+14],17,-1502002290),s=mh(s,c=yh(c,u,d,s,e[n+15],22,1236535329),u,d,e[n+1],5,-165796510),d=mh(d,s,c,u,e[n+6],9,-1069501632),u=mh(u,d,s,c,e[n+11],14,643717713),c=mh(c,u,d,s,e[n],20,-373897302),s=mh(s,c,u,d,e[n+5],5,-701558691),d=mh(d,s,c,u,e[n+10],9,38016083),u=mh(u,d,s,c,e[n+15],14,-660478335),c=mh(c,u,d,s,e[n+4],20,-405537848),s=mh(s,c,u,d,e[n+9],5,568446438),d=mh(d,s,c,u,e[n+14],9,-1019803690),u=mh(u,d,s,c,e[n+3],14,-187363961),c=mh(c,u,d,s,e[n+8],20,1163531501),s=mh(s,c,u,d,e[n+13],5,-1444681467),d=mh(d,s,c,u,e[n+2],9,-51403784),u=mh(u,d,s,c,e[n+7],14,1735328473),s=bh(s,c=mh(c,u,d,s,e[n+12],20,-1926607734),u,d,e[n+5],4,-378558),d=bh(d,s,c,u,e[n+8],11,-2022574463),u=bh(u,d,s,c,e[n+11],16,1839030562),c=bh(c,u,d,s,e[n+14],23,-35309556),s=bh(s,c,u,d,e[n+1],4,-1530992060),d=bh(d,s,c,u,e[n+4],11,1272893353),u=bh(u,d,s,c,e[n+7],16,-155497632),c=bh(c,u,d,s,e[n+10],23,-1094730640),s=bh(s,c,u,d,e[n+13],4,681279174),d=bh(d,s,c,u,e[n],11,-358537222),u=bh(u,d,s,c,e[n+3],16,-722521979),c=bh(c,u,d,s,e[n+6],23,76029189),s=bh(s,c,u,d,e[n+9],4,-640364487),d=bh(d,s,c,u,e[n+12],11,-421815835),u=bh(u,d,s,c,e[n+15],16,530742520),s=kh(s,c=bh(c,u,d,s,e[n+2],23,-995338651),u,d,e[n],6,-198630844),d=kh(d,s,c,u,e[n+7],10,1126891415),u=kh(u,d,s,c,e[n+14],15,-1416354905),c=kh(c,u,d,s,e[n+5],21,-57434055),s=kh(s,c,u,d,e[n+12],6,1700485571),d=kh(d,s,c,u,e[n+3],10,-1894986606),u=kh(u,d,s,c,e[n+10],15,-1051523),c=kh(c,u,d,s,e[n+1],21,-2054922799),s=kh(s,c,u,d,e[n+8],6,1873313359),d=kh(d,s,c,u,e[n+15],10,-30611744),u=kh(u,d,s,c,e[n+6],15,-1560198380),c=kh(c,u,d,s,e[n+13],21,1309151649),s=kh(s,c,u,d,e[n+4],6,-145523070),d=kh(d,s,c,u,e[n+11],10,-1120210379),u=kh(u,d,s,c,e[n+2],15,718787259),c=kh(c,u,d,s,e[n+9],21,-343485551),s=vh(s,r),c=vh(c,i),u=vh(u,a),d=vh(d,o);return[s,c,u,d]}function Sh(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function Th(e){var t,n=[];for(n[(e.length>>2)-1]=undefined,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function Ph(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function Ih(e){return unescape(encodeURIComponent(e))}function wh(e){return function(e){return Sh(xh(Th(e),8*e.length))}(Ih(e))}function Ah(e,t){return function(e,t){var n,r,i=Th(e),a=[],o=[];for(a[15]=o[15]=undefined,i.length>16&&(i=xh(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=xh(a.concat(Th(t)),512+8*t.length),Sh(xh(o.concat(r),640))}(Ih(e),Ih(t))}var Eh=function(e,t,n){return t?n?Ah(t,e):Ph(Ah(t,e)):n?wh(e):Ph(wh(e))};n(374),"http https ftp gopher file".split(" ");function Dh(e,t){var n=[],r=pf.indexOf(e,t);return-1==r?n[0]=e:(n[0]=e.slice(0,r),n[1]=e.slice(r+t.length)),n}var qh=function(e,t){if("string"!=typeof e)return e;var n,r,i={};i.href=e,r=(n=Dh(e,"#"))[0],n[1]&&(i.hash="#"+n[1]),r=(n=function(e,t){var n="";return e=e.replace(t,(function(e){return n=e,""})),[n,e]}(r,/^[a-zA-Z][a-zA-Z0-9+-.]*:/))[1],i.protocol=n[0].toLowerCase(),r=(n=Dh(r,"?"))[0];var a=n[1];if(t&&(a=kf(a)),i.query=a,"/"!=r.charAt(0)&&i.schema)return i.opaque=r,i;pf.startsWith(r,"//")&&(n=Dh(r=r.slice(2),"/"),i.pathname="/"+unescape(n[1]||""),n=function(e){var t=Dh(e,"@"),n=t[0],r=t[1];r||(r=t[0],n=null);return[n,r]}(n[0]),i.auth=n[0],n=Dh(n[1],":"),i.hostname=n[0],i.port=~~n[1]);return i},Oh={adPlayerId:"a",uaaUserId:"u",cupidUserId:"i",passportId:"p",requestId:"s",timestamp:"h",encryption:{name:"e",type:"object",child:{episodeId:"b",albumId:"l",channelId:"k",cuepointList:{name:"q",type:"array",child:{cuepointType:"ct",adZoneId:"zi",startTime:"st",sequenceId:"si",requestAdDuration:"rd",keyword:"kw",limit:"lm",skip:"sk"}},referrer:"r",offline:"o",mobileKey:"t",userAgent:"m",continuingVideoPlayedCount:"n",continuingVideoPlayedDuration:"y",continuingAdPlayedDuration:"w",isVIP:"v",passportCookie:"pc",network:"nw",needPolicy:"po",encryptionVersion:"pv",isPreload:"pr",couponCode:"cc",couponVer:"mv",url:"ul",videoPlayedDurationInDay:"cd",adPlayedDurationInDay:"ca",midrollPointsPlayedInView:"nm",lastRollCompleteInterval:"in",lastMidrollRequestTime:"lm",clientVersion:"cv",sdkVersion:"sv",supportIQiyiTracking:"gt",supportEmptyTracking:"ea",searchQuery:"sq",prerollOrderItemIds:"poi",pauseRequestTimes:"pt",playSource:"ps",requestIndex:"rix",vvId:"veid",usePartnerData:"upd",ptid:"ptid",timePoint:"tp",vft:"vft",idx:"idx"}}},Rh=function(e){var t;e=pf.tostr(e);for(var n=[],r=0;r<e.length;r++)(t=e.charCodeAt(r))<128?n.push(t):t<2048?n.push(192|t>>6,128|63&t):t<55296||t>=57344?n.push(224|t>>12,128|t>>6&63,128|63&t):n.push(239,191,189);return n},Lh=function(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){if((n=e[i])>224)r=(15&n)<<12,r|=(63&(n=e[++i]))<<6,r|=63&(n=e[++i]);else if(n>192)r=(31&n)<<6,r|=(63&(n=e[++i]))<<6;else{if(n>128)throw new Error("InvalidCharacterError");r=n}t.push(String.fromCharCode(r))}return t.join("")},Mh=Wh("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ch=Wh("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function Nh(e,t){var n=Bh(e,t);return Lh(n)}function Bh(e,t){var n=Mh;((t=t||{}).useURL||null==t.useURL&&function(e){return/[-_]/.test(e)}(e))&&(n=Ch),e=e.replace(/\s+$/,"").replace(/=+$/,"").replace(/[\n\r]/g,"");for(var r=pf.map(e.split(""),(function(e){return~~n.decodeMap[e]})),i=[],a=0;a<r.length;a+=4){var o=Vh(pf.slice(r,a,a+4));i.push.apply(i,o)}return i}function Fh(e,t){return Uh(Rh(e),t)}function Uh(e,t){var n=Mh;(t=t||{}).useURL&&(n=Ch);for(var r=[],i=0;i<e.length;i+=3)r.push.apply(r,jh(pf.slice(e,i,i+3)));return(r=pf.map(r,(function(e){return n.encodeMap[e]||"="}))).join("")}function jh(e){var t=[];return null==e[2]?t[3]=64:t[3]=63&e[2],null==e[1]?t[2]=64:t[2]=(15&e[1])<<2|e[2]>>6,t[1]=(3&e[0])<<4|e[1]>>4,t[0]=e[0]>>2,t}function Vh(e){var t=[];return null!=e[3]&&(t[2]=((3&e[2])<<6)+e[3]),null!=e[2]&&(t[1]=((15&e[1])<<4)+((60&e[2])>>2)),null!=e[1]&&(t[0]=(e[0]<<2)+((48&e[1])>>4)),t}function Wh(e){var t=function(e){for(var t={},n=0;n<e.length;n++)t[n]=e.charAt(n);return t}(e);return{encodeMap:t,decodeMap:pf.invert(t)}}var Hh={encode:Fh,btoa:Fh,decode:Nh,atob:Nh,encodeBytes:Uh,decodeToBytes:Bh};function zh(e,t){var n=Hh.decodeToBytes(e);return n=pf.map(n,(function(e,n){return e^t.charCodeAt(n%t.length)})),Lh(n)}function Yh(e,t){var n=Rh(e);return n=pf.map(n,(function(e,n){return e^t.charCodeAt(n%t.length)})),Hh.encodeBytes(n)}function Gh(e){var t=Kh(e),n=kf(t),r=n.a,i=zh(n.e,r);return n.e=kf(i),n}function Qh(e){var t=Gh(e),n=t.e||{},r=0,i=0,a=parseInt(n.b),o=parseInt(n.l),s=pf.last(t.a);return a>100&&(r=parseInt(a/100%100)),o>100&&(i=parseInt(o/100%100)),r+"y"+s+"w"+i}function Kh(e){var t=pf.split(e,"?");return pf.last(t)}function $h(e,t){return function(e,t){t=pf.split(t,"");for(var n,r=Rh(e),i=Math.floor(r.length/2)-16,a=31;a>=1;--a){var o=r[i+a]%(a+1);a!=o&&(n=t[a],t[a]=t[o],t[o]=n)}return t.join("")}(t,Eh(t+"cupid_show2.0"+Kh(e)))}var Zh={decryptBySeed:zh,encryptBySeed:Yh,decryptShowRequestByUrl:Gh,decryptShowResponse:function(e,t){return zh(t,Qh(e))},encryptShowResponse:function(e,t){return Yh(t,Qh(e))},getShowCheckSum:$h,validateShowChecksum:function(e,t){var n,r=t.match(/,"c_c_":"(\w+)"/);return!(!r||(n=r[1],$h(e,t.replace(r[0],""))!=n))}},Xh=Tf({v:"version",ics:"ipCollectionServers",cl:"clientIP",de:"serverIP",set:"serverTime",ec:"errorCode",sr:"serverError",ar:"areaId",ui:"cupidUserId",ntc:"needTimeChecking",vmd:"vipMarketingDocuments",ci:"cacheIP",idc:"idc",ims:"ims",inv:{name:"inventory",type:"object",child:{fi:"forbiddenInventory",ri:"rawInventory",oi:"originalInventory",di:"deliveredInventory"}},vcc:{name:"vipCheckConflict",type:"object",child:{v:"isVIP",c:"code",m:"message"}},pbp:"pingbackParam",m:{name:"midrollPoints",type:"object",child:{ac:"autoChoose",nm:"nextMidroll"}},pc:"pingbackConfig",vcr:{name:"vipCheckResult",type:"object",child:{v:"isVIP",uvt:"userVipType"}},vdi:{name:"videoInfo",type:"object",child:{dsa:"disableSkipAd",vd:"videoDuration",ai:"albumId",vt:"videoType"}},s:{name:"slots",type:"array",child:{ctp:"cuepointType",az:"adZoneId",st:"startTime",kw:"keyword",ea:{name:"emptyTracking",type:"object",child:{tss:"timeSlices",trp:"trackingParam"}},a:{name:"ads",type:"array",child:{comment:"comment",o:"order",ori:"orderItemId",tp:"timeSlices",p:"priority",hkw:"hitKeywords",dtp:"deliverType",ipt:"impressionTime",skt:"skipTime",bge:"badge",h:"host",se:"settle",ta:"targetedAd",ug:"userGroup",ds:"isDSP",dsi:"dspId",dst:"dspType",dsc:"dspIcon",oet:"orderItemEndTime",msm:"macroSubstitutionMap",ies:{name:"ies",type:"array",child:{dm:"domain",msm:"macroSubstitutionMap"}},va:{name:"vast",type:"object",child:{vo:"vastObject"}},rp:{name:"replay",type:"object",child:{rpt:"replayTimes",bst:"replayShowTime",bct:"replayCloseTime"}},cr:{name:"creative",type:"object",child:{cra:"creativeId",crb:"creativeType",crc:"creativeTemplate",tt:"templateType",co:"creativeObject"}},clt:"clickThrough",ctt:"clickThroughType",ct:{name:"clickTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},it:{name:"impressionTracking",type:"object",child:{at:"exchangeTracking",ctc:"cupidTracking",tpt:"thirdPartyTracking"}},et:{name:"eventTracking",type:"array",child:{ev:"event",tr:"trackings"}},qt:{name:"iqiyiTracking",type:"object",child:{ct:{name:"cupidTracking",type:"object",child:{evs:"events",trp:"trackingParam"}},at:{name:"exchangeTracking",type:"object",child:{evs:"events",trp:"trackingParam"}}}},st:"startTime",fc:{name:"fullCorner",type:"object",child:{si:"showInterval",sd:"showDuration"}},acc:"seekable",tot:"toast"}}}},c:{name:"policySlots",type:"array",child:{az:"adZoneId",ctp:"cuepointType",sts:"startTimes",du:"duration",azl:"adZoneStyle"}},c_c_:"couponCode",conf:{name:"conf",type:"object",child:{reqMiaozhenTime:"reqMiaozhenTime",miaozhenJsonPUrl:"miaozhenJsonPUrl"}}}),Jh=(n(408),function(){this.version="1.3.4";var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},t=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){return this.parseXML(this.stringToXML(e),t)},this.parseXML=function(r,i){for(var a in i)e[a]=i[a];var o={},s=0,c="";if(e.xmlns&&r.namespaceURI&&(o[e.namespaceKey]=r.namespaceURI),r.attributes&&r.attributes.length>0){for(var u={};s<r.attributes.length;s++){var d=r.attributes.item(s);p={};var l="";l=e.stripAttrPrefix?d.name.replace(t,""):d.name,e.grokAttr?p[e.valueKey]=this.grokType(d.value.replace(n,"")):p[e.valueKey]=d.value.replace(n,""),e.xmlns&&d.namespaceURI&&(p[e.namespaceKey]=d.namespaceURI),e.attrsAsObject?u[l]=p:o[e.attrKey+l]=p}e.attrsAsObject&&(o[e.attrKey]=u)}if(r.hasChildNodes())for(var f,h,p,_=0;_<r.childNodes.length;_++)4===(f=r.childNodes.item(_)).nodeType?e.mergeCDATA?c+=f.nodeValue:o.hasOwnProperty(e.cdataKey)?(o[e.cdataKey].constructor!==Array&&(o[e.cdataKey]=[o[e.cdataKey]]),o[e.cdataKey].push(f.nodeValue)):e.childrenAsArray?(o[e.cdataKey]=[],o[e.cdataKey].push(f.nodeValue)):o[e.cdataKey]=f.nodeValue:3===f.nodeType?c+=f.nodeValue:1===f.nodeType&&(0===s&&(o={}),h=e.stripElemPrefix?f.nodeName.replace(t,""):f.nodeName,p=Jh.parseXML(f),o.hasOwnProperty(h)?(o[h].constructor!==Array&&(o[h]=[o[h]]),o[h].push(p)):(e.childrenAsArray?(o[h]=[],o[h].push(p)):o[h]=p,s++));else c||(e.childrenAsArray?(o[e.textKey]=[],o[e.textKey].push(null)):o[e.textKey]=null);if(c)if(e.grokText){var v=this.grokType(c.replace(n,""));null!==v&&v!==undefined&&(o[e.textKey]=v)}else e.normalize?o[e.textKey]=c.replace(n,"").replace(/\s+/g," "):o[e.textKey]=c.replace(n,"");return o},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(bv){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(n){return null}},this}.call({})),ep=Jh,tp=pf.is;function np(e,t){var n,r={};if(tp.string(e))try{(n=ep.parseString(e,{attrKey:"attr",textKey:"#text"})).html&&!n.VAST&&(r.error="parse error",t("vastXML parse error")),t("vastJson",n)}catch(k){r.error=k,t("vastXML parse error",k)}else n=e;if(n.VAST){var i=n.VAST[0],a=rp(i.Ad);t("$ad",a,i);var o=rp(a.Wrapper);t("$wrapper",o);var s=rp(a.InLine);if(t("$inline",s),o){var c=rp(o.VASTAdTagURI);r.redirect=ap(c)}var u=o||s;if(u){var d=ip(u.Impression);r.impressionTrackings=pf.compact(pf.map(d,(function(e){return ap(e)}))),t("ret.impressionTrackings",r.impressionTrackings);var l=rp(u.Creatives[0].Creative);if(t("$creative",l),l){var f=rp(l.Linear);t("$linear",f);var h=rp(f.Duration);r.duration=ap(h),t("ret.duration",r.duration);var p,_=rp(f.AdParameters);r.adParameters=ap(_),t("ret.adParameters",r.adParameters);try{var v=rp(f.VideoClicks[0].ClickThrough);r.clickThrough=ap(v)}catch(x){r.clickThrough=""}t("ret.clickThrough",r.clickThrough);try{var g=rp(f.Icons[0].Icon[0].StaticResource);r.icon=ap(g)}catch(x){r.icon=""}t("ret.icon",r.icon);try{p=rp(f.MediaFiles[0].MediaFile)}catch(x){}t("creativeNode",p),r.creativeUrl=ap(p)||"",r.creativeWidth=op(p,"width")||"",r.creativeHeight=op(p,"height")||"",t("ret.creativeUrl",r.creativeUrl),t("ret.creativeWidth",r.creativeWidth),t("ret.creativeHeight",r.creativeHeight);try{var y=ip(f.VideoClicks[0].ClickTracking);r.clickTrackings=pf.compact(pf.map(y,(function(e){return ap(e)})))}catch(x){r.clickTrackings=[]}t("ret.clickTrackings",r.clickTrackings);var m=[];try{m=ip(f.TrackingEvents[0].Tracking)}catch(x){m=[]}t("eventTrackings",m);var b=r.eventTracking={};pf.each(m,(function(e){var t=op(e,"event");tp.array(b[t])||(b[t]=[]);var n=ap(e);n&&b[t].push(n)})),t(b,r.eventTracking)}}}return r.isEmpty=function(e,t){if(!e.VAST)return!0;var n=e.VAST[0]&&rp(e.VAST[0].Ad);return!n||(t("$ad:",n),!rp(n.InLine)&&!rp(n.Wrapper))}(n,t),r}function rp(e){return e&&e instanceof Array?e[0]:e}function ip(e){return e&&e instanceof Array?e:[e]}function ap(e){return e&&e["#text"]&&e["#text"][0]?e["#text"]:""}function op(e,t){return e&&e.attr&&e.attr[t]&&e.attr[t]._value}var sp={"image/jpeg":{extensions:["jpg","jpeg","jpe"]},"image/gif":{extensions:["gif"]},"image/png":{extensions:["png"]},"image/webp":{extensions:["webp"]},"application/x-shockwave-flash":{extensions:["swf"]},"video/mp4":{extensions:["mp4","mp4v","mpg4"]},"video/x-flv":{extensions:["flv"]},"video/x-f4v":{extensions:["f4v"]},"video/webm":{extensions:["webm"]},"text/html":{extensions:["html","htm","shtml"]}};function cp(e){return function(e){e=pf.lower(e);var t=pf.keys(sp);return pf.find(t,(function(t){return pf.includes(sp[t].extensions,e)}))}(e)}var up=function(e){return function(e){return pf.includes(e,"image")?"image":pf.includes(e,"flash")?"swf":pf.includes(e,"video")?"video":pf.includes(e,"html")?"html":void 0}(dp(e))},dp=function(e){if(e=qh(e)){var t=function(e){var t=(e+="").split(".");return"."+pf.last(t)}(e.pathname);return cp(t=pf.slice(t,1))}},lp=function(){function e(){i()(this,e),this.init()}return o()(e,[{key:"init",value:function(){this._timerIdMap={timeout:{},interval:{}}}},{key:"run",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"interval",n=arguments.length>1?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16.7,i=Date.now,a=i(),o=[i(),Math.random()].join(""),s=function c(){e.setIdMap(o,t,c),i()-a>=r&&("interval"===t&&(a=i(),a),n(),"timeout"===t&&e.clearTimeout(o))};return this.setIdMap(o,t,s),o}},{key:"setIdMap",value:function(e,t,n){var r=requestAnimationFrame(n);this._timerIdMap[t][e]=r}},{key:"setTimeout",value:function(e,t){return this.run("timeout",e,t)}},{key:"clearTimeout",value:function(e){cancelAnimationFrame(this._timerIdMap.timeout[e])}},{key:"setInterval",value:function(e,t){return this.run("interval",e,t)}},{key:"clearInterval",value:function(e){cancelAnimationFrame(this._timerIdMap.interval[e])}}]),e}();function fp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var hp=function(e){d()(n,e);var t=fp(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).repeatCount=r||Infinity,a.interval=e,a.reset(),a.raf=new lp,a}return o()(n,[{key:"reset",value:function(){this.stop(),this.currentCount=0}},{key:"stop",value:function(){this.running&&(this.raf.clearInterval(this.timer),this.timer=null),this.running=!1}},{key:"start",value:function(){var e=this;e.running||(e.timer=this.raf.setInterval((function(){e.currentCount++,e.emit("timer"),e.currentCount==e.repeatCount&&(e.emit("timerComplete"),e.stop())}),e.interval)),e.running=!0}}]),n}(Zl);function pp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}hp.interval=function(e,t,n){var r=new hp(t,n);return r.on("timer",e),r.start(),r},hp.timeout=function(e,t){return hp.interval(e,t,1)};var _p=function(e){d()(n,e);var t=pp(n);function n(e,r){var a;return i()(this,n),(a=t.call(this)).type=e,a.ad=r,a.creativeObject=r.creative.creativeObject,a.vv=r.getParentByName("vv"),a.log=a.vv.sdk.logger.getLogger(e+":"+r.id),a.$adContainer=a.vv.mw.adcontainer(),a.$adzone=document.createElement("div"),r.$adzone=a.$adzone,r.$adzone.setAttribute("data-adzone",r.slot.adZoneId),a}return o()(n,[{key:"emitCreativeError",value:function(e,t){var n=this.ad;"timeout"==e?n.emit("error",{data:{creativeUrl:t},message:"creative timeout"}):n.emit("error",{data:{creativeUrl:t},message:"creative http error"})}},{key:"loadImage",value:function(e,t){var n=this;return t=t||3e4,"image/gif"==dp(e)&&(e=e+"?"+Date.now()),sh(e,t)["catch"]((function(t){return"timeout"===t?n.emitCreativeError("timeout",e):n.emitCreativeError("error",e),Promise.reject(t)}))}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=pf.once((function(){e.timer&&e.timer.stop(),e.timer=null,e.ad.emit("complete",{type:"timer-complete"})})),r=e.getDuration();if(r>0&&Infinity!=r){var i=e.timer=new hp(1e3,r);i.on("timer",(function(){t.remain=t.duration-i.currentCount,e.updateCountdown()})),i.on("timerComplete",n),i.reset(),i.start()}}},{key:"fakeHide",value:function(){var e=this;e.$adzone.style.position="absolute",e.$adzone.style.width="600px",e.$adzone.style.height="300px",e.$adzone.style.top="10px",e.$adzone.style.left="10px",e.$adzone.style.display="",e.$adzone.style.visibility="hidden"}},{key:"putOnDocument",value:function(){var e=this;e.$adzone.style.position="absolute",e.hasPutOnDoc||("viewPoint"!=e.type&&e.$adzone.appendChild(e.creativeElement),e.$adzone.parentNode||(e.$adContainer.appendChild(e.$adzone),e.hasPutOnDoc=!0))}},{key:"tryAddStyle",value:function(e){var t=this;this.vv.sdk.setViewController((function(){e&&e(),t.addStyle()}))}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(){e.ad.emit("clickAndOpen")},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}},{key:"addStyle",value:function(){var e=this,t=e.vv.sdk.viewController;e.$adzone.setAttribute("adId",e.ad.id),e.$adzone.setAttribute("templateType",e.type),0!=e.creativeObject.isCloseable&&t.addCloseBtn(e);var n=!!e.creativeObject.needAdBadge,r=e.option||{};r.type=e.template,n&&t.addAdBadge(e.$adzone,r);var i=!!e.creativeObject.showMuteButton;"video"==e.creativeObject.renderType&&i&&t.addVolumnBtn(e)}},{key:"destroyAdzone",value:function(){var e=this,t=e.ad;"roll"==e.type||(e.log("destroy adzone"),t.$adzone.parentNode&&t.$adzone.parentNode.removeChild(t.$adzone),t.$adzone.removeEventListener("click",e.clickHandler),t.$adzone.innerHTML="",t.$adzone.setAttribute("data-adzone",""))}},{key:"updateCountdown",value:function(){var e,t=this,n=t.ad;if(t.onFirstPlaying(),e=n.remain,t.log("countdown",n.remain+"/"+n.duration),e<0)return t.log("countdown < 0 "),void n.abort()}},{key:"pause",value:function(){var e=this;e.log("pause"),e.timer&&e.timer.stop()}},{key:"resume",value:function(){var e=this;e.log("resume"),e.timer&&e.timer.start()}},{key:"stop",value:function(){var e=this;e.log("stop"),e.timer&&e.timer.stop(),e.timer=null,e.isStopped=!0,e.destroyAdzone()}},{key:"reset",value:function(){this.isStopped=!1,this.hasPlaying=!1}},{key:"resize",value:function(){}},{key:"abort",value:function(){}},{key:"getDuration",value:function(){return Infinity}},{key:"detectCollision",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.willDefinitelyCollide,n=this,r=n.ad,i=n.$adzone||{},a=i.style,o=n.vv.adCollisionDetection,s={id:r.id,x:a.left.replace("px",""),y:a.top.replace("px",""),width:a.width.replace("px",""),height:a.height.replace("px",""),willDefinitelyCollide:t};o.addAdIntoCollisingList(s),o.notifyWholeCornerToHide()}}]),n}(Zl),vp=pf.is,gp={1:300,2:600,3:1126.4,4:1536,5:3072,10:8192,96:170},yp=pf.map([["jUrl","f4v",1,-1e3],["bUrl","f4v",170],["gUrl","f4v",300],["cUrl","f4v",1536],["lowUrl","f4v",300,-1],["highUrl","f4v",600,-1],["m200Url","mp4",300],["m400Url","mp4",600],["jVid","vid",1,-1e3],["bVid","vid",170],["gVid","vid",300],["cVid","vid",1536],["m200Vid","vid",300,-1],["m400Vid","vid",600,-1]],(function(e){return{key:e[0],videoFormat:e[1],minBandwidth:e[2],priority:e[3]}}));var mp={impression:0,click:1,push:2,trueview:3,start:10,firstQuartile:11,midpoint:12,thirdQuartile:13,complete:14,downloadStart:20,downloaded:21},bp={"1q":"firstQuartile",mid:"midpoint","3q":"thirdQuartile",stop:"complete",sp:"complete"},kp=pf.is,xp="https://t7z.cupid.iqiyi.com",Sp=Tf({type:"a",timestamp:"b",videoEventId:"r",securityCode:"s",md5Version:"ve",uploadId:"up",clientVersion:"cv",sdkVersion:"sv",startTime:"st"}),Tp=function(){function e(){i()(this,e)}return o()(e,[{key:"init",value:function(e){var t=this;return t.compressedParam={},t.uncompressedParam={},t.trackingParam={},e instanceof gf&&(t.context=e),t}},{key:"addCompressedParam",value:function(e){return pf.extend(this.compressedParam,e),this}},{key:"addUncompressedParam",value:function(e){return pf.extend(this.uncompressedParam,e),this}},{key:"addTrackingParam",value:function(e){return pf.extend(this.trackingParam,e),this}},{key:"setType",value:function(e){var t=this,n="exchange"==e;return t.isExchange=n,t.type="cupid",n&&(t.type="exchange"),t}},{key:"addFrontendParam",value:function(){var e=this,t={md5Version:1},n=e.context;return n&&(t.uploadId=n.getVal("uploadId"),t.clientVersion=n.getVal("clientVersion"),t.sdkVersion=n.getVal("sdkVersion"),t.videoEventId=n.getVal("vvId"),t.startTime=n.getVal("startTime")||0),e.addUncompressedParam(t),e}},{key:"mergeUncompressedParam",value:function(){var e=this,t=Sp(e.uncompressedParam);return e.addCompressedParam(t),e}},{key:"setEvent",value:function(t){var n=this;return n.eventName=e.normalizeEventName(t),n.eventCode=e.getEventCodeByName(n.eventName),n.compressedParam.a=n.uncompressedParam.type=n.eventCode,n}},{key:"encryptParam",value:function(){var t=this,n=e.encryptCupid;return t.isExchange&&(n=e.encryptExchange),n(t.compressedParam,t.context,t.trackingParam),t}},{key:"getUrl",value:function(){var t=this,n=e.cupidUrl,r="";t.isExchange&&(n=e.exchangeUrl);var i=t.compressedParam||{},a=t.trackingParam||{},o={};return pf.forIn(i,(function(e,t){pf.has(a,t)||(o[t]=e)})),kp.empty(a)||(r="&"+xf(a,"&","=",{keepRaw:!0})),n=n+"?"+xf(o)+r,t.url=n,t}},{key:"_send",value:function(e){var t=this,n=function(){};t.context&&(n=t.context.getParentByName("sdk").logger.getLogger("qiyitracking"));n("send",t.type,t.eventName),n("verbose send",t.type,t.eventName,t.uncompressedParam,t.compressedParam,t.trackingParam);var r=Date.now(),i=t.url;return/https/i.test(window.location.protocol)&&(i=i.replace(/^http:/,"https:")),n("url",i),Xf({url:i,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,success:function(n,i){t.response={textStatus:i,duration:Date.now()-r,data:n},e()},error:function(){t.response={textStatus:"timeout",duration:Date.now()-r,data:"error"},e()},complete:function(n,i){"timeout"==i&&(t.response={textStatus:i,duration:Date.now()-r,data:"error"},e())}}),t}},{key:"send",value:function(e){return this.addFrontendParam().mergeUncompressedParam().encryptParam().getUrl()._send(e)}},{key:"sendPingback",value:function(e){var t,n=this,r={pingbackType:"tracking",subtype:"success",requestCount:-1},i=n.response,a=function(){};n.context&&(a=n.context.getParentByName("sdk").logger.getLogger("qiyitracking"));pf.includes(i.data,"ok")?(a("response success",i),r.requestDuration=i.duration):(a("error",i),r.subtype="error",t=601,"timeout"==i.textStatus?t=602:"success"!=i.textStatus&&(t=603)),n.isExchange?(r.pingbackType="exchange",kp.number(t)&&(t+=500)):n.isQixiao&&(r.pingbackType=undefined,kp.number(t)&&(t+=900)),r.errorCode=t;var o=n.context;"slot"==n.context.ContextName&&(o={slot:n.context}),r.adInfo=ih(o),ph(n.context,r,e)}}],[{key:"getEventCodeByName",value:function(e){return mp[e]}},{key:"normalizeEventName",value:function(e){return e=bp[e]||e}},{key:"encryptCupid",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=pf.map("a b c d r".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=Eh(i.join("")+"cupid")}},{key:"encryptExchange",value:function(e,t,n){var r=Date.now();t&&(r+=t.getVal("deltaTime")||0),e.b=parseInt(r/1e3);var i=pf.map("a v b c r d q".split(" "),(function(t){return e[t]==undefined||null==e[t]?n[t]:e[t]}));e.s=Eh(i.join("")+"qax-track")}},{key:"send",value:function(t,n,r,i,a){var o=new e;o.init(r).addTrackingParam(n).addUncompressedParam(t).setType(i).setEvent(a).send((function(){o.sendPingback()}))}}]),e}();Tp.cupidUrl=xp+"/track2",Tp.exchangeUrl=xp+"/etx";var Pp=pf.is;function Ip(e,t){return pf.trim(function(e,t){return wp(e,t||e.clickThrough,1)}(e,t||e.clickThrough))}function wp(e,t,n){t=t||"",t=pf.trim(t);var r,i=function(e){var t=e.getVal("userIP"),n=e.getVal("cupidUserId"),r=e.getVal("uaaUserId"),i=e.getVal("requestId"),a=e.getVal("clickArea"),o=e.getVal("trueviewSource");return{"[UDID]":n,"[M_IDFA]":r,"[IDFA]":n,"[IQIYI_HCID]":n,"[IQIYI_FCID]":r,"[QIYI_ID]":r,__UDID__:n,__IP__:t,"[M_ADIP]":t,"[M%5fADIP]":t,__QRID__:i,__REQUESTID__:i,"[QIYI_AUTHCOOKIE]":e.getVal("passportCookie"),"[IQIYI_OFFSET]":e.getPlayedTime(),CUPID_IAP:"1_10_101",CUPID_CLA:a,CUPID_TRS:o}}(e),a={},o=!0;pf.each(pf.compact(e.ies),(function(i){if(pf.some(i.domain,(function(e){return!!function(e,t){if((t=qh(t)).hostname==e||pf.endsWith(t.hostname,"."+e))return!0;return!1}(e,t)&&(r=e,!0)})))if(isNaN(n))o=!0,a=pf.extend(a,i.macroSubstitutionMap);else{var s=r+"_"+n;if(e.iesKeyReplaced[s])return o=!1,!1;var c=pf.extend({},i.macroSubstitutionMap);for(var u in c)c[u]=c[u]+"_"+n;a=pf.extend(a,c)}}));var s=t;if(o&&!Pp.empty(a)&&(s=Ap(s,a,!0),e.debug("replace url macro",t,s),s!==t)){var c=r+"_"+n;e.iesKeyReplaced[c]=!0}t=Ap(s,i,!0);var u=function(e){var t=Date.now(),n=e.getVal("deltaTime");Pp.integer(n)&&(t+=n);return t}(e);return t=function(e,t){return t=t||Date.now(),Ap(e,{"[timestamp]":t,"[M_timestamp]":t,"[TIMESTAMP]":t,"[randnum]":t,__timeStamp__:t,__TS__:t},!0)}(t,u)}function Ap(e,t,n){return pf.forIn(t,(function(t,r){e=Ep(e,r,t,n)})),e}function Ep(e,t,n,r){if(e&&t){var i=e.split(t);if(n=pf.tostr(n),e=i.join(n),r){var a=encodeURIComponent(t);a!=t&&(e=Ep(e,a,n))}}return e}var Dp=function(){function e(t,n){i()(this,e);var r=this;t instanceof gf&&(r.context=t),r.eventName=Tp.normalizeEventName(n),r.eventCode=Tp.getEventCodeByName(r.eventName)}return o()(e,[{key:"sendAll",value:function(){var e=this;e.sendCupid(),e.sendExchange(),e.sendThirdParty()}},{key:"sendCupid",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=pf.get(t,"iqiyiTracking.cupidTracking")||{};if(pf.includes(n.events,e.eventCode)){var r=n.trackingParam;Tp.send({},r,t,"cupid",e.eventName)}}}},{key:"sendExchange",value:function(){var e=this,t=e.context;if("ad"==t.contextName){var n=pf.get(t,"iqiyiTracking.exchangeTracking")||{};if(pf.includes(n.events,e.eventCode)){var r=n.trackingParam;Tp.send({},r,t,"exchange",e.eventName)}}}},{key:"sendThirdParty",value:function(){var e=this,t=e.getThirdParty(),n=e.context.getVal("pingbackConfig")||{},r=e.context.getParentByName("sdk").logger.getLogger("tracking"),i=pf.keys(n);pf.each(t,(function(t){r("send","thirdParty",e.eventName,t);var a=pf.find(i,(function(e){return pf.startsWith(t,e)}));if(a){r("match pingback config",a);var o=new Tp;o.context=e.context,o.url=t,o.isQixiao=!0,o._send((function(){o.sendPingback(n[a])}))}else rh(t)}))}},{key:"getThirdParty",value:function(){var e=this,t=e.context;if("ad"!=t.contextName)return[];var n=e.eventName,r=pf.get(t,n+"Tracking.thirdPartyTracking"),i=pf.get(t,["eventTracking",n]),a=pf.compact(pf.union(r,i));return pf.map(a,(function(n){return function(e,t,n){return pf.trim(wp(e,t,n))}(t,n,e.eventCode)}))}}],[{key:"send",value:function(t,n){new e(t,n).sendAll()}}]),e}(),qp="postMessage"in window,Op=function(){function e(t){i()(this,e);var n=this;t=t||{},n.type=t.type,n.callback=null,n.element=t.element,n.aresToEos()}return o()(e,[{key:"aresToEos",value:function(){var e=this;qp||(e.element.contentWindow.navigator.eosMessage=function(t){e.callback(t)})}},{key:"listen",value:function(e){var t=e||function(){};this.callback=t,qp&&window.addEventListener("message",this.callback,!1)}},{key:"send",value:function(e){qp?this.element.contentWindow.postMessage(e,"*"):(0,window.navigator.eosMessage)({data:e})}}]),e}();function Rp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Lp=function(e){d()(n,e);var t=Rp(n);function n(e,r){var a;return i()(this,n),(a=t.call(this,e,r)).mw=a.vv.mw,a.$video=a.vv.mw.video(),a.isOutVideo=!1,a.isRatioFixed=!0,a.canExpand=!0,"roll"==a.type&&(a.renderType="roll",r.$adzone=a.$adzone=a.$adContainer),a.creativeUrl=a.creativeUrl||a.creativeObject.url,a.renderType=a.renderType||up(a.creativeObject.url),"mraid"==a.type&&(a.creativeMode="Interactive"),a.hasPlaying=!1,a.size={},a.isSkippableAd="skippable"==r.deliverName(),a.showGuide=!1,a}return o()(n,[{key:"load",value:function(){var e=this,t=this.ad;return"mraid"==e.type&&e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),new Promise((function(n,r){if(e.isStopped)return r(new Error("has ended"));if(e.trySetCrazyMode(),e.log("load"),"roll"==e.renderType){var i=e.vv,a="mp4";/data/i.test(i.mw.getEngineType())&&(a="f4v");var o=function(e,t,n){e=e||{};var r=gp[t]||1024,i=pf.map(yp,(function(t){var i=-1,a=t.key,o=e[a];return n==t.videoFormat&&(o=e[a],vp.empty(o)||(i=2e3+(t.priority||0),r>=t.minBandwidth?i+=t.minBandwidth:i+=1/t.minBandwidth)),pf.extend({score:i,video:o},t)})),a=pf.max(i,(function(e){return e.score}));if(a.score>0){var o="g",s=a.minBandwidth;return s<=170?o="b":s>1536&&(o="c"),a.videoDefinition=t,a.definitionLevel=o,a}}(t.creative.creativeObject,i.videoDefinition,a);if(o){e.log("matched ad video",o),t.matchedVideo=o;var s=o.video;"mp4"==a&&(s+="?pv=0.2"),e.creativeUrl=t.creativeUrl=s,n()}else{var c=new Error("fail to match ad video",t.creative.creativeObject);t.emit("error",c),r(c)}}else if("html"==e.renderType)n(e.loadMraid()),t.error||t.emit("creativeLoad");else{r(new Error("unknown template render type"))}}))}},{key:"bindPlayingEvt",value:function(){var e=this.ad,t=this;if("roll"==t.renderType){e.on("video-playing",(function n(){var r=e.slot.ads[e.index()-1],i=!0;r&&("ended"==r.state||r.error||e.error||(i=!1)),i||e.slot.isSeekableOriginalSlot()?(t.onFirstPlaying(),e.off("video-playing",n)):t.log("invalid playing")}))}}},{key:"loadRollToVideo",value:function(){var e=this.ad,t=this.vv.mw,n=this;if("roll"==n.renderType){e.on("video-playing",(function i(){var t=e.slot.ads[e.index()-1],r=!0;t&&("ended"==t.state||t.error||e.error||(r=!1)),r?(n.onFirstPlaying(),e.off("video-playing",i)):n.log("invalid playing")}));var r={file:n.creativeUrl,id:e.id,type:e.typeName(),seekable:Boolean(e.seekable)||15==e.slot.cuepointType,offset:parseInt(e.slot.startTime),videoEventId:n.vv.videoEventId,duration:e.duration};if(r.file=r.file.replace(/\.qiyi\.com/,".iqiyi.com"),r.file=r.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),this.log("video load",r,r.videoEventId,e.slot.startTime),t.load(r),0===e.index())e.getParentByName("sdk").loadEndTime=Date.now()}}},{key:"loadMraid",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide(),e.putOnDocument();var i=function(t){var n=t.data;if(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(r){return void e.log("parse data error",r)}n.key==e.msgKey&&("clickandopen"==n.type||"interactive"==n.type?(e.ad.hasInteracted||(e.ad.hasInteracted=!0),"clickandopen"==n.type&&e.ad.emit("clickAndOpen",n.data)):"error"==n.type&&e.log("mraid creative error",n.data))}},a=function(){var r;clearTimeout(o);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(e.message=new Op({type:"mraid",element:e.creativeElement}),e.message.listen(i),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},o=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("mraid html creative load error timeout"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}),1e4);e.creativeElement.addEventListener("load",a);var s=e.creativeUrl.replace(/^(https:|http:)/,"")+"?isMute=1&domain="+document.domain;e.creativeElement.setAttribute("src",s)}))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad,n=t.slot,r=t.order>1?t.slot.ads[t.order-2]:null;e.vv.stopVideo(e.ad.typeName()),t.isSeekableOriginalRoll()&&e.vv.schedule&&e.vv.schedule.bindAfterSeekedEvt(),t.remain=t.duration,e.log("on first playing"),t.emit("impression"),e.slotDuration=Mp(t.slot.ads),n.hasSkippableAdInSlot&&(e.skippableDuration=Cp(t.slot.ads)),e.initProgress();var i=t.deliverName();if("brief"==i&&t.toast)t.getParentByName("sdk").emit("adplayer_showtip",{des:t.toast,time:2});"vip"==i||"origin"==i||"sports-vip"==i||"brief"==i||"overlay-brief"==i||("skippable"==i?i=r&&"skippable"==r.deliverName()?"skippable-after":"skippable-before":"trueView"==i?i="trueview-before":"roll"==e.type?i="normal":"mraid"==e.type&&(i="rolllike")),e.setVideoOptions(i,t,!0)}}},{key:"initProgress",value:function(){var e=this,t=e.ad,n=e.vv.mw;t.quartiles=[{position:1/4,event:"1q"},{position:.5,event:"mid"},{position:3/4,event:"3q"},{position:1,event:"sp"}];var r=e.isSkippableAd?t.duration+5:t.duration,i=pf.once((function(){e.timer&&e.timer.stop(),e.timer=null,pf.remove(t.quartiles,(function(e){return Dp.send(t,e.event),t.emit("pingback",{subtype:e.event}),!0}));var r=n?n.duration()-n.currentTime():0,i=e.ad.hasPlayed&&"origin"==t.deliverName()&&Boolean(t.seekable)?"replayComplete":"complete";t.slot.isSeekableOriginalSlot()?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),500):r>0&&r<1?setTimeout((function(){e.ad.emit(i,{type:"timer-complete"})}),1e3):e.ad.emit(i,{type:"timer-complete"})}));if(r>0&&!e.timer){var a=e.timer=new hp(1e3,r);a.on("timer",(function(){t.remain=t.duration-a.currentCount,e.updateCountdown(),e.vv.adPlayedDurationInView++,pf.remove(t.quartiles,(function(n){var r=Math.round(t.duration*n.position);if(a.currentCount==r)return e.log("match quartile",n.event,a.currentCount),Dp.send(t,n.event),t.emit("pingback",{subtype:n.event}),"sp"==n.event&&e.isSkippableAd&&t.sendPlayDurationPingback(t.duration),!0}))})),a.on("timerComplete",i),a.reset(),a.start()}t.on("video-ended",(function(){i()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.log("ready play roll"),e.isStopped)return n("ended");if("roll"==e.renderType)return e.detectCollision({willDefinitelyCollide:!0}),t();if(e.vv.sdk.emit("single_ad_start",{type:"rollLike"}),e.log("rollLike start play"),e.vv.isCurrentVV&&e.vv.disableVideo(),e.vv.schedule.setCurrentAd(e.ad.id),e.$adzone.style.zIndex="3000",e.vv.mw.isFullScreen()&&e.vv.exitFullscreen(),e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement&&e.creativeElement.contentWindow&&e.message){e.msgKey=e.vv.videoEventId+Date.now();try{e.message.send(JSON.stringify({type:"ready",key:e.msgKey}))}catch(r){e.log("stringify data error",r),n(r)}}Np(e.$adzone),Np(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resume",value:function(){var e=this;return e.log("resume"),e.timer&&e.timer.start(),e.midrollTip&&e.midrollTip.start(),Promise.resolve()}},{key:"pause",value:function(){var e=this;e.log("pause");var t=e.vv.sdk,n="";t.rollView&&(n=t.rollView.options&&t.rollView.options.theme),!e.timer||e.isSkippableAd&&pf.includes(n,"guide")||this.timer.stop()}},{key:"updateCountdown",value:function(){var e=this,t=e.ad;e.onFirstPlaying();var n,r,i=t.slot,a=i.ads,o=e.isSkippableAd?t.remain+5:t.remain,s=e.isSkippableAd?t.duration+5:t.duration;if(a.length<=1)n=o;else{var c=pf.slice(a,t.index()+1);n=o+Mp(c),e.log("countdown",o+"/"+s,n+"/"+e.slotDuration),i.hasSkippableAdInSlot&&(r=o+Cp(c)+5)}var u=e.vv.sdk;if(u.viewController&&u.rollView&&n>=0){var d="mraid"==e.type&&e.ad.hasInteracted;u.rollView.updateCountdown(n,d)}if(i.hasSkippableAdInSlot&&!e.isSkippableAd&&u.viewController&&u.rollView&&(e.log("skippable countdown",r+"/"+e.skippableDuration),u.rollView.updateSkippableCountdown(r)),"trueView"==t.deliverName()){var l=t.duration-t.remain;if(l>=t.impressionTime&&t.emit("trueview"),u.rollView){var f=u.rollView.options&&u.rollView.options.theme;if(pf.includes(f,"before")){var h=t.skipTime-l;h<=0?(e.log("trueview can skip now"),u.rollView.trySetOptions({theme:"trueview-after",ad:t}),u.rollView.updateCountdown(n)):(e.log("trueview countdown",h+"/"+t.skipTime),u.rollView.updateTrueViewCountdown(h))}}}if(e.isSkippableAd){var p=t.duration-t.remain,_=e.mw.duration()-e.mw.currentTime();if(p>=t.impressionTime&&t.emit("trueview"),u.rollView){var v=u.rollView.options&&u.rollView.options.theme;if(pf.includes(v,"before")){var g=5-p;g<=0?(e.log("skippable can skip now"),u.rollView.trySetOptions({theme:"skippable-after",ad:t}),u.rollView.updateCountdown(n)):(e.log("skippable countdown",g+"/"+e.skippableDuration),u.rollView.updateSkippableCountdown(g))}_>=1&&t.remain<=0&&!e.showGuide&&(e.showGuide=!0,e.loadGuide())}}}},{key:"setVideoOptions",value:function(e,t,n){var r=this,i=r.vv.sdk;i.setViewController((function(){i.rollView.trySetOptions({theme:e,ad:t}),n&&i.rollView.setVipTitle(e,r),r.updateCountdown()}))}},{key:"trySetCrazyMode",value:function(){var e=this;if("mraid"==e.type){var t=e.vv.mw.isFullScreen();e.isOutVideo=!1,e.isRatioFixed=!1,t&&(e.canExpand=!1)}}},{key:"resize",value:function(){var e=this;if(!e.isStopped){var t=e.size;t.videoWidth=e.$video.offsetWidth,t.videoHeight=e.$video.offsetHeight,e.setPosition(),e.$adzone.style.width=t.videoWidth+"px",e.$adzone.style.height=t.videoHeight+"px",e.$adzone.style.top=t.y,e.$adzone.style.left=t.x,e.detectCollision({willDefinitelyCollide:!0})}}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.vv.mw,r=(n.width()-e.$video.offsetWidth)/2,i=(n.height()-e.$video.offsetHeight)/2;t.x=r,t.y=i}},{key:"stop",value:function(e){var t=this;(e=e||{},t.log("stop template",e),t.timer&&t.timer.stop(),t.timer=null,t.isStopped=!0,t.message=null,t.destroyAdzone(),"roll"==t.type&&e.abort&&t.vv.isCurrentVV()&&t.vv.schedule.getCurrentAd()==t.ad&&(t.isSkippableAd&&t.vv.mw.play(),t.log("force abort video"),t.vv.mw.abort()),t.vv.schedule.getCurrentAd()==t.ad&&t.setVideoOptions(),"mraid"==t.type)&&(t.vv.schedule.removeCurrentAd(),t.vv.sdk.emit("single_ad_end",{type:"rollLike"}),t.log("rollLike stop"),t.vv.isCurrentVV()&&t.vv.enableVideo())}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=NaN),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"loadGuide",value:function(){var e,t=this,n=t.mw,r=t.ad,i=r.slot.ads,a=t.vv.sdk,o=t.isSkippableAd?r.remain+5:r.remain,s=t.isSkippableAd?r.duration+5:r.duration;if(i.length<=1)e=o;else{var c=pf.slice(i,r.index()+1);e=o+Mp(c),t.log("countdown",o+"/"+s,e+"/"+t.slotDuration)}a.setViewController((function(){a.rollView.updateCountdown(e),a.rollView.trySetOptions({theme:"skippable-guide",ad:r})})),n.pause()}}]),n}(_p);function Mp(e){return pf.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}function Cp(e){return pf.reduce(e,(function(e,t){return"skippable"==t.deliverName()?e:e+t.duration}),0)}function Np(e){e.style.display="",e.style.visibility=""}function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Fp=function(e){d()(n,e);var t=Bp(n);function n(e,r){return i()(this,n),t.call(this,e,r)}return o()(n,[{key:"load",value:function(){var e=this,t=e.ad,n=e.vv;t.creative.creativeObject.url=oh(t.creative.creativeObject.url);var r=pf.extend({id:t.id,orderItemId:t.orderItemId,adZoneId:t.slot.adZoneId,templateType:t.creative.templateType,startTime:t.slot.startTime},t.creative.creativeObject);return n.sdk.emit("adplayer_ad_info",{type:"definitionSwitchingAd",data:{definitionSwitchingAd:r,tvId:n.episodeId,videoEventId:n.videoEventId}}),e.log("notify player definitionSwitchingAd",r),Promise.resolve()}},{key:"play",value:function(){return Promise.resolve()}}]),n}(_p);function Up(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var jp=function(e){d()(n,e);var t=Up(n);function n(e,r){var a;i()(this,n),a=t.call(this,e,r);var o=c()(a);return o.isRatioFixed=!0,o.canExpand=!0,o.creativeUrl=o.creativeUrl||o.creativeObject.url,o.renderType=o.renderType||up(o.creativeUrl),o.isSuperShow=!!o.creativeObject.actUrl,o.size={},pf.includes(["image","html","video"],o.renderType)||o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),o.hasPlaying=!1,o.hasPutOnDoc=!1,o.hasOpenVolumn=!1,a}return o()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){if(e.isStopped&&r(new Error("has ended")),e.log("load"),"image"==e.renderType){n(e.loadImage(e.creativeUrl,5e3).then((function(t){e.creativeElement=t,e.size.creativeRawWidth=t.width,e.size.creativeRawHeight=t.height})))}else"html"==e.renderType?n(e.loadHtml()):"video"==e.renderType&&n(e.loadVideo());t.error||t.emit("creativeLoad")}))}},{key:"loadVideo",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("video");r.style.width="100%",r.style.height="100%",r.setAttribute("preload","auto"),r.muted=!0,e.creativeElement=r;var i=e.creativeObject.playCount||1;e.fakeHide();var a=setTimeout((function(){e.creativeElement.removeEventListener("loadstart",o),e.log("video creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),15e3),o=function(){var t;e.log("video pause load start");try{t=e.creativeElement}catch(r){e.log("video creative can not get contentDocument:",r)}t?(t.addEventListener("click",l),t.addEventListener("ended",c),t.addEventListener("error",u),t.addEventListener("canplay",d)):(e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))},s=1,c=function(){var t=this;e.log("current play ended",s+"/"+i),s<i?(t.currentTime=0,t.play(),s++):(t.pause(),e.ad.emit("complete"))},u=function(){e.log("video creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))},d=function(){clearTimeout(a),e.size.creativeRawWidth=e.creativeObject.width,e.size.creativeRawHeight=e.creativeObject.height,e.log("current play count",s+"/"+i),t()},l=function(){e.ad.emit("click")},f=e.creativeUrl,h=qh(f),p=function(){if(document.createElement("video").canPlayType){var e=document.createElement("video"),t=e.canPlayType('video/ogg; codecs="theora, vorbis"');if(t)return"probably"==t;var n=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');return!!n&&"probably"==n}return!1}();if(p&&/.+\.mp4$/.test(h.href)){e.creativeElement.addEventListener("loadstart",o),h.query&&!/pv=0.2/.test(h.query)?f+="&pv=0.2":h.query||(f+="?pv=0.2");var _=f.replace(/^(https:|http:)/,"");_=_.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.creativeElement.setAttribute("src",_),e.putOnDocument()}else e.log("browser support error or video format error",p),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error"))}))}},{key:"loadHtml",value:function(){var e=this;return new Promise((function(t,n){var r=document.createElement("iframe");r.setAttribute("scrolling","no"),r.setAttribute("frameborder",0),r.style.width="100%",r.style.height="100%",e.creativeElement=r,e.fakeHide();var i=setTimeout((function(){e.creativeElement.removeEventListener("load",a),e.log("html creative load error timeout"),e.emitCreativeError("timeout",e.creativeUrl),n(new Error("creative error"))}),1e4),a=function(){var r;clearTimeout(i);try{r=e.creativeElement.contentDocument}catch(a){e.log("html creative can not get contentDocument:",a)}r&&r.getElementsByTagName("cupid-iframe").length>0?(r.addEventListener("click",(function(){e.ad.emit("click")})),t()):(e.log("html creative load error"),e.emitCreativeError("error",e.creativeUrl),n(new Error("creative error")))};e.creativeElement.addEventListener("load",a);var o=e.creativeUrl.replace(/^(https:|http:)/,"");e.creativeElement.setAttribute("src",o+"?isMute=1&domain="+document.domain),e.putOnDocument()}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");if(e.isSuperShow){var r=1e3*e.creativeObject.actDuration||2e3;sh(e.creativeObject.actUrl).then((function(t){e.actCreativeElement=t,e.creativeElement.style.display="none",e.superShowPlaying=!0,e.showSuperShow(),e.tryAddStyle(),e.ad.emit("impression"),setTimeout((function(){e.actCreativeElement.style.display="none",e.superShowPlaying=!1,e.ad.aborted||e._play()}),r)}))["catch"]((function(){e.superShowPlaying=!1,e._play()}))}else e._play();t()}))}},{key:"_play",value:function(){var e=this;e.log("play"),e.creativeObject.isSuperPause||(e.$adzone.style.boxShadow="#000 0px 0px 1.4rem"),e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.creativeElement.style.display="",e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),Vp(e.$adzone),e.$adContainer&&Vp(e.$adContainer),e.resize(!0),e.isAudioPause()&&e.initAudio(),"video"==e.renderType&&e.creativeElement&&e.creativeElement.play(),e.notifyPlayerAudioPauseStart(),e.onFirstPlaying()}},{key:"showSuperShow",value:function(){var e=this;e.actCreativeElement.style.width="100%",e.actCreativeElement.style.height="100%",e.actCreativeElement.style.visibility="",e.$adzone.appendChild(e.actCreativeElement),e.$adContainer.appendChild(e.$adzone),Vp(e.$adzone),e.$adContainer&&Vp(e.$adContainer),e.resizeSuperShow()}},{key:"resizeSuperShow",value:function(){var e=this,t={},n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.actWidth||980,t.creativeHeight=r.actHeight||540;var i=[980,540];t.boxWidth=t.videoWidth*r.actWidthScale||i[0],t.boxHeight=t.videoHeight*r.actHeightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=ch({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});a.max?(t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(t),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.$adzone.style.position="absolute",e.log("resize supershow",t)):e.log("fail to resize"),e.detectCollision()}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing"),t.emit("impression"),"video"!=e.renderType&&e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon),1==t.targetedAd&&(e.log("precise ad and add icon"),t.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then((function(e){e.addEventListener("click",(function(){window.open("http://www.iqiyi.com/common/secret.html")}))}))),Infinity!=e.ad.duration&&"video"!=e.renderType&&e.updateCountdown()}}},{key:"resize",value:function(){var e=this;if(e.superShowPlaying)e.resizeSuperShow();else{var t=e.size,n=e.vv.mw.video(),r=e.creativeObject;t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.creativeWidth=r.width,t.creativeHeight=r.height,t.creativeWidth=t.creativeWidth||e.size.creativeRawWidth||300,t.creativeHeight=t.creativeHeight||e.size.creativeRawHeight||250,r.width==e.size.creativeRawWidth&&r.height==e.size.creativeRawHeight||e.log("");var i=[600,500];t.boxWidth=t.videoWidth*r.widthScale||i[0],t.boxHeight=t.videoHeight*r.heightScale||i[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var a=ch({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});a.max?(t.scale=a.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale,e.setPosition(e.size),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.log("resize",t)):e.log("fail to resize"),e.detectCollision()}}},{key:"setPosition",value:function(e){var t=this.vv.mw,n=t.video(),r=(t.width()-n.offsetWidth)/2,i=(t.height()-n.offsetHeight)/2;e.x=r+(e.videoWidth-e.computedWidth)/2,e.y=i+(e.videoHeight-e.computedHeight)/2}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e&&e!=Infinity&&(e=parseInt(e)),e}},{key:"toggleVideoVolumn",value:function(){var e=this,t=e.ad,n=e.creativeElement;n.muted=!n.muted;var r=n.muted;if(e.log("video pause muted",r),!r){e.hasOpenVolumn||(e.hasOpenVolumn=!0,_h(t,"clk","volume_button;vss:1"));var i=e.vv.mw.volume();n.volume=i||.15,e.log("video pause volume",n.volume)}return r}},{key:"isAudioPause",value:function(){return!!this.creativeObject.audioUrl}},{key:"initAudio",value:function(){var e=this;e.$audio=document.createElement("audio"),e.$audio.preload="auto";var t=e.creativeObject.audioUrl,n=qh(t);n.query&&!/pv=0.2/.test(n.query)?t+="&pv=0.2":n.query||(t+="?pv=0.2"),e.$audio.src=t.replace(/^(https:|http:)/,""),e.vv.audioPause=e.ad,e.bindAudioEvt()}},{key:"closeAudioPause",value:function(e){var t=this;if(!t.isStopped&&!t.hasClosed)if(t.hasClosed=!0,"manual"!=e)if(t.$audio&&!t.audioError){t.$adzone.classList.add("cupid-fade-out");var n=t.vv.mw.volume();t.log("audio volume",n),t.$audio.volume=n,t.$audio.play()}else t.abortAudioPause();else t.abortAudioPause(e)}},{key:"bindAudioEvt",value:function(){var e=this;e.$audio&&(e.$audio.addEventListener("play",(function(){e.log("audio start play"),e.audioPlayed=!0,e.sendAudioPingback(0)})),e.$audio.addEventListener("ended",(function(){e.log("audio ended"),e.$audio=null,e.sendAudioPingback(1),e.abortAudioPause()})),e.$audio.addEventListener("error",(function(){e.audioError=!0,e.$audio=null,e.audioPlayed&&e.abortAudioPause()})))}},{key:"notifyPlayerAudioPauseEnd",value:function(e){var t=this,n=t.vv.sdk;t.log("notify player pause end, is audio:",t.isAudioPause()),n.emit("pause_end",{type:t.isAudioPause()?"audio":"common",status:e||"common"})}},{key:"notifyPlayerAudioPauseStart",value:function(){var e=this,t=e.vv.sdk;e.log("notify player pause start, is audio:",e.isAudioPause()),t.emit("pause_start",{type:e.isAudioPause()?"audio":"common",duration:e.isAudioPause()?2.5:0})}},{key:"abortAudioPause",value:function(e){var t=this;t.vv.audioPause=null,t.notifyPlayerAudioPauseEnd(e),t.ad.abort()}},{key:"sendAudioPingback",value:function(e){var t=this.ad,n=xf({acp:e},",",":");_h(t,"auu",n)}}]),n}(_p);function Vp(e){e.style.display="",e.style.visibility=""}function Wp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Hp=function(e){d()(n,e);var t=Wp(n);function n(e,r){var a;i()(this,n),a=t.call(this,e,r);var o=c()(a);return o.size={},o.creativeObject=r.creative.creativeObject,o.creativeUrl=o.creativeUrl||o.creativeObject.creativeUrl,o.renderType=o.renderType||up(o.creativeUrl),o.option={position:"bottom-left"},"image"!==o.renderType&&o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),a}return o()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),zp(e.$adzone),e.$adContainer&&zp(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=pf.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=ch({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,c=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+c,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.remain=t.duration,e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=Infinity),e&&e!=Infinity&&(e=parseInt(e)),e}}]),n}(_p);function zp(e){e.style.display="",e.style.visibility=""}function Yp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var Gp=298,Qp=92,Kp=function(e){d()(n,e);var t=Yp(n);function n(e,r){var a;i()(this,n),a=t.call(this,e,r);var o=c()(a);return o.isRatioFixed=!1,o.canExpand=!0,o.creativeUrl=o.creativeObject.imgUrl,o.renderType="viewPoint",o.creativeObject.priceText=function(e){if(e=parseFloat(e),isNaN(e))return"";return""+e}(o.creativeObject.price),o.size={},o.log("render type",o.renderType,o.creativeObject,e),o.hasPlaying=!1,o.hasPutOnDoc=!1,a}return o()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n,r){if(e.isStopped)return r(new Error("has ended"));e.log("load");n(e.loadImage(e.creativeUrl,5e3).then((function(t){e.creativeElement=t,e.size.creativeRawWidth=t.width,e.size.creativeRawHeight=t.height}))),t.error||t.emit("creativeLoad")}))}},{key:"play",value:function(){var e=this;return new Promise((function(t,n){if(e.isStopped)return n("ended");e.log("play"),e.tryAddStyle((function(){e.vv.sdk.viewController.renderViewPointTip(e.$adzone,e.creativeObject)})),e.addClickEvt(),e.putOnDocument(),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.ad.clickThrough&&(e.$adzone.style.cursor="pointer"),$p(e.$adzone),e.$adContainer&&$p(e.$adContainer),e.resize(),e.onFirstPlaying(),t()}))}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0;var t=e.ad;t.remain=t.duration,e.log("on first playing");var n=e.vv.sdk;e.log("notify player start_viewpoint"),n.emit("adplayer_ad_info",{type:"start_viewpoint",data:{startTime:t.slot.startTime,templateType:e.type,adUid:t.id,adZoneId:t.slot.adZoneId,videoEventId:e.vv.videoEventId}}),_h(t,"impression","viewPointTips"),"tips"==e.creativeObject.impressionArea&&e.ad.emit("impression"),e.initProgress(),t.hasDspIcon()&&t.putIcon(t.dspIcon),1==t.targetedAd&&(e.log("precise ad and add icon"),t.putIcon("http://pic9.iqiyipic.com/common/20161221/privacy.png").then((function(e){e.addEventListener("click",(function(){window.open("http://www.iqiyi.com/common/secret.html")}))}))),Infinity!=e.ad.duration&&e.updateCountdown()}}},{key:"getDuration",value:function(){var e=this.creativeObject.duration;return e||(e=10),e!=Infinity&&(e=parseInt(e)),e}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight,t.displayWidth=298,t.displayHeight=92,t.computedWidth=t.displayWidth,t.computedHeight=t.displayHeight,e.setPosition(),e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px",e.log("resize",t),e.detectCollision()}},{key:"setPosition",value:function(){var e,t=this,n=t.size,r=t.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=0;e=n.videoHeight-70-Qp,s=40,"right"==t.creativeObject.position&&(s=n.videoWidth-s-Gp),n.x=s+a,n.y=e+o}},{key:"reset",value:function(){var e=this;e.isStopped=!1,e.hasPlaying=!1,e.hasPutOnDoc=!1}},{key:"addClickEvt",value:function(){var e=this;e.clickHandler=function(t){var n=t.target;if("detial-btn"==n.getAttribute("class"))_h(e.ad,"click","viewPointTipsDetails"),e.ad.emit("clickAndOpen",n),t.preventDefault(),t.stopPropagation();else{e.vv.exitFullscreen();var r=e.ad,i=e.vv.sdk;e.log("notify player expand_viewpoint"),i.emit("adplayer_ad_info",{type:"expand_viewpoint",data:{startTime:r.slot.startTime,templateType:r.creative.templateType,adUid:r.id,adZoneId:r.slot.adZoneId,videoEventId:e.vv.videoEventId}}),_h(e.ad,"click","viewPointTips")}},e.$adzone&&e.$adzone.addEventListener("click",e.clickHandler)}}]),n}(_p);function $p(e){e.style.display="",e.style.visibility=""}var Zp=function(){function e(t,n){i()(this,e);var r=n.vv.sdk;this.log=r.logger.getLogger("wholeCornerTimer"),this.log("init whole corner timer",n.ad),this.status=this.initStatus(t),this.timer=this.initTimer(),this.ad=n.ad,this.view=n.vv}return o()(e,[{key:"initStatus",value:function(e){return{showStatus:{duration:e.showDuration,showedSeconds:0,currentSlice:0},hideStatus:{duration:e.showInterval,hidedSeconds:0,currentSlice:0},display:!0}}},{key:"initTimer",value:function(){var e=new hp(1e3);return e.on("timer",this.timerHandler.bind(this)),e}},{key:"timerHandler",value:function(){var e=this.status;(function(e){var t=e.display,n=e.hideStatus;return!t&&n.duration===n.hidedSeconds})(e)&&this.resetToShow(),function(e){var t=e.display,n=e.showStatus;return t&&n.duration===n.showedSeconds}(e)&&this.resetToHide(),e.display&&this.updateShowStatus(),e.display||this.updateHideStatus()}},{key:"resetToShow",value:function(){var e=this.status,t=this.timer,n=this.view.adCollisionDetection;e.display=!0,e.showStatus.currentSlice++,e.hideStatus.hidedSeconds=0,n.wholeCornerCollidedWithOriginalList()?(n.notifyWholeCornerToHide(),t.running&&t.stop(),this.log("wholecorner collisied to others while reset to show, keep hide",e)):(n.notifyWholeCornerToShow(),this.log("reset to show",e,n.wholeCornerCollidedWithOriginalList()))}},{key:"resetToHide",value:function(){var e=this.status,t=this.view.adCollisionDetection;e.display=!1,e.hideStatus.currentSlice++,e.showStatus.showedSeconds=0,t.wholeCornerCollidedWithOriginalList()?(t.notifyWholeCornerToHide(),this.log("wholecorner collisied to others while reset to hide, keep hide",e)):(t.notifyWholeCornerToHide({forceHide:!0}),this.log("reset to hide",e))}},{key:"updateShowStatus",value:function(){this.status.showStatus.showedSeconds++;var e=this.status.showStatus,t=e.showedSeconds,n=e.duration;0!=t%10&&t!=n||this.log("updating show status",t+"/"+n)}},{key:"updateHideStatus",value:function(){this.status.hideStatus.hidedSeconds++;var e=this.status.hideStatus,t=e.hidedSeconds,n=e.duration;0!=t%10&&t!=n||this.log("updating hide status",t+"/"+n)}}]),e}();function Xp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}function Jp(e){e.style.display="",e.style.visibility=""}var e_={roll:Lp,crazy:Lp,mraid:Lp,common_pause:jp,definition_switching:Fp,common_overlay:Hp,viewPoint:Kp,whole_corner:function(e){d()(n,e);var t=Xp(n);function n(e,r){var a;i()(this,n),a=t.call(this,e,r);var o=c()(a);return o.vv.wholeCorner=r,o.isRatioFixed=!0,o.size={},o.creativeObject=r.creative.creativeObject,o.creativeUrl=o.creativeUrl||o.creativeObject.creativeUrl,o.renderType=o.renderType||up(o.creativeUrl),o.option={position:"bottom-left"},"image"!==o.renderType&&o.ad.emit("error",new Error("unknown render type: "+o.creativeUrl)),a}return o()(n,[{key:"load",value:function(){var e=this,t=e.ad;return new Promise((function(n){n(e.loadImage(e.creativeUrl,5e3).then((function(n){e.creativeElement=n,e.size.creativeRawWidth=n.width,e.size.creativeRawHeight=n.height,t.error||t.emit("creativeLoad")})))}))}},{key:"play",value:function(){var e=this;return new Promise((function(t){e.log("play"),e.creativeElement.style.width="100%",e.creativeElement.style.height="100%",e.creativeElement.style.visibility="",e.putOnDocument(),e.tryAddStyle(),e.addClickEvt(),e.initTimerController(),Jp(e.$adzone),e.$adContainer&&Jp(e.$adContainer),e.resize(!0),e.onFirstPlaying(),t()}))}},{key:"pause",value:function(){this.log("pause")}},{key:"resize",value:function(){var e=this,t=e.size,n=e.vv.mw.video();n&&(t.videoWidth=n.offsetWidth,t.videoHeight=n.offsetHeight);var r=e.creativeObject,i=pf.split(r.dpi,"*");r?(t.creativeWidth=r.width,t.creativeHeight=r.height,r.width===t.creativeRawWidth&&r.height===t.creativeRawHeight||e.log("")):(t.creativeWidth=i[0]||t.creativeRawWidth||300,t.creativeHeight=i[1]||t.creativeRawHeight||250);var a=[640,100];t.boxWidth=t.videoWidth*r.maxWidthScale||a[0],t.boxHeight=t.videoHeight*r.maxHeightScale||a[1],t.boxWidth=Math.min(t.boxWidth,t.videoWidth),t.boxHeight=Math.min(t.boxHeight,t.videoHeight);var o=ch({width:t.creativeWidth,height:t.creativeHeight},{width:t.boxWidth,height:t.boxHeight});o.max&&(t.scale=o.max,t.computedWidth=t.creativeWidth*t.scale,t.computedHeight=t.creativeHeight*t.scale),t.computedWidth&&t.computedHeight?(e.setPosition(),e.$adzone.style.position="absolute",e.$adzone.style.width=t.computedWidth+"px",e.$adzone.style.height=t.computedHeight+"px",e.$adzone.style.top=t.y+"px",e.$adzone.style.left=t.x+"px"):e.log("fail to resize"),e.log("resize",t),e.detectCollision()}},{key:"detectCollision",value:function(){var e=this,t=e.ad,n=(e.$adzone||{}).style,r=e.vv.adCollisionDetection,i={id:t.id,x:n.left.replace("px",""),y:n.top.replace("px",""),width:n.width.replace("px",""),height:n.height.replace("px",""),willDefinitelyCollide:!0};e.wholeCornerTimerController&&(i.timer=e.wholeCornerTimerController.timer,i.timerStatus=e.wholeCornerTimerController.status),r.setWholeCorner(i),r.notifyWholeCornerToShow()}},{key:"setPosition",value:function(){var e=this,t=e.size,n=e.creativeObject,r=e.vv.mw,i=r.video(),a=(r.width()-i.offsetWidth)/2,o=(r.height()-i.offsetHeight)/2,s=t.videoWidth*n.xScale-t.computedWidth/2,c=t.videoHeight*n.yScale-t.computedHeight/2;t.x=a+s,t.y=o+c,e.log("set position size",t)}},{key:"onFirstPlaying",value:function(){var e=this;if(!e.hasPlaying){e.hasPlaying=!0,e.log("on first playing");var t=e.ad;t.emit("impression"),t.hasDspIcon()&&t.putIcon(t.dspIcon)}}},{key:"initTimerController",value:function(){var e=this,t=e.ad,n=t&&t.fullCorner?t.fullCorner:{};e.isInterval=!(!n.showDuration||!n.showInterval),e.isInterval&&(e.wholeCornerTimerController=new Zp(n,e),e.timer=e.wholeCornerTimerController.timer,e.timer.start())}}]),n}(_p)};var t_,n_,r_={0:"page",1:"preroll",2:"midroll",3:"postroll",4:"corner",5:"mark",6:"pause",7:"toolbar",8:"viewPoint",9:"overlay",10:"common_overlay",11:"common_overlay",13:"whole_corner",15:"briefRoll"},i_={1:"PMP",2:"trueView",3:"vip",4:"origin",6:"skippable",7:"sports-vip",8:"brief",9:"brief",12:"overlay-brief",13:"brief"},a_={0:{negative:[32,128]},32:{positive:[32,128]}},o_={CODE_S_HTTP_ERROR:301,CODE_S_PARSE_ERROR:304,CODE_VIDEO_HTTP_ERROR:504,CODE_S_INVALID_PLAYER:308,CODE_S_PARAM_ERROR:305,CODE_S_COUPON_NOT_FOUND:309},s_=function(){function e(){i()(this,e)}return o()(e,[{key:"parse",value:function(e){try{e=JSON.parse(e)}catch(t){}return e}},{key:"stringify",value:function(e){try{e=JSON.stringify(e)}catch(t){}return e}},{key:"set",value:function(e,t){t=this.stringify(t);try{localStorage[e]=t}catch(n){}}},{key:"get",value:function(e){var t;try{t=localStorage[e],t=this.parse(t)}catch(n){}return t}}]),e}(),c_=new(function(){function e(t,n){i()(this,e);var r=this;r.store=n,r.key=t,r.data=r.store.get(t)}return o()(e,[{key:"save",value:function(){this.store.set(this.key,this.data)}}]),e}())("mars",new s_);t_=c_.data||{},n_=(new Date).getDay()!=new Date(t_.timestamp).getDay(),t_.timestamp&&!n_||(c_.data={timestamp:(new Date).getTime(),adPlayedDurationInDay:0,videoPlayedDurationInDay:0},c_.save()),c_.save();var u_=c_;function d_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var l_=pf.is,f_=function(e){d()(n,e);var t=d_(n);function n(e,r){var a;i()(this,n),a=t.call(this,"ad");var o=c()(a);return pf.extend(o,e),o.setParent(r),o.slot=r,o.state="idle",o.memory={},o.elements=[],o.bindEvent(),o.init(),o.setAdMap(),a}return o()(n,[{key:"init",value:function(){var e=this;e.playTimes=0,e.iesKeyReplaced={},e.id=pf.compact(["ad",e.getVal("videoEventId"),pf.uid(),e.comment]).join("-");var t=e.getParentByName("sdk");e.debug=t.logger.getLogger("ad:"+e.id),e.timeSlices=pf.split(e.timeSlices,","),e.impressionTracking=e.impressionTracking||{},e.clickTracking=e.clickTracking||{},e.eventTracking=function(e){var t={};return pf.each(e,(function(e){if(e){var n=e.event;l_.array(t[n])||(t[n]=[]),pf.each(e.trackings,(function(e){t[n].push(e)}))}})),t}(e.eventTracking),e.creative=e.creative||{},function(e,t,n){if(t){var r=np(t,e.debug);n("parsed vast",r,t),r.isEmpty?(n("empty vast"),e.sendThirdPartyPingback({errorCode:904,errorMessage:t})):r.error?(n("vast xml parse error",r.error),e.sendThirdPartyPingback({errorCode:903,errorMessage:t})):(function(e,t){if(e&&t){var n="${SETTLEMENT}";pf.each("redirect clickThrough creativeUrl".split(" "),(function(r){e[r]=ah(e[r],n,t)})),e.clickTrackings=pf.map(e.clickTrackings,(function(e){return ah(e,n,t)})),e.impressionTrackings=pf.map(e.impressionTrackings,(function(e){return ah(e,n,t)})),pf.mapValues(e.eventTracking,(function(e){return pf.map(e,(function(e){return ah(e,n,t)}))}))}}(r,e.settle),r.clickThrough&&(e.clickThrough=r.clickThrough),e.dspIcon||(e.dspIcon=r.icon),e.impressionTracking.thirdPartyTracking=pf.union(e.impressionTracking.thirdPartyTracking,r.impressionTrackings),e.clickTracking.thirdPartyTracking=pf.union(e.clickTracking.thirdPartyTracking,r.clickTrackings),pf.forIn(r.eventTracking,(function(t,n){e.eventTracking[n]=e.eventTracking[n]||[],e.eventTracking[n]=pf.union(e.eventTracking[n],t)})),e.creative.creativeObject=function(e,t,n){t=t||{},"common_overlay"==e?t.creativeUrl=n.creativeUrl||t.creativeUrl:t.url=n.creativeUrl||t.url;return t}(e.creative.templateType,e.creative.creativeObject,r))}}(e,pf.get(e,"vast.vastObject"),e.debug),e.creative.rawCreativeObject=e.creative.creativeObject,e.creative.creativeObject=function(e){var t={};return pf.forIn(e,(function(e,n){if(l_.string(e)&&(e=pf.trim(e)),"true"==e)e=!0;else if("false"==e)e=!1;else{var r=parseFloat(e);r==e&&(e=r)}t[n]=e})),t}(e.creative.creativeObject),e.duration=e.creative.creativeObject.duration,e.seekable=e.seekable||0,e.clickArea="",e.trueviewSource=1,e.adInfo=ih(e),this.handleAdMsm()}},{key:"handleAdMsm",value:function(){var e=this;e.macroSubstitutionMap&&pf.forIn(e.macroSubstitutionMap,(function(t,n){t=Hh.decode(t),t=encodeURIComponent(t),e.macroSubstitutionMap[n]=t}))}},{key:"bindEvent",value:function(){!function(e){e.on("video-playing",(function(){e.slot.show.request.vv.videoState="playing"})),e.on("video-play",(function(){e.slot.show.request.vv.videoState="play",e.play()})),e.on("video-loadstart",(function(){e.emit("creativeLoad")})),e.on("video-pause",(function(){e.slot.show.request.vv.videoState="paused",e.pause()})),e.on("video-willended",(function(){var t=e.template;e.debug("ad willended type and state",e.deliverName(),e.state),"skippable"==e.deliverName()&&"ended"!=e.state&&(t.showGuide=!0,t.loadGuide())})),e.on("video-ended",(function(){e.emit("complete",{type:"video-ended"})})),e.on("video-error",(function(){var t=e.getParentByName("vv"),n=t.sdk,r=e.slot.show.request;if(n.setViewController(),e.template){e.emit("error",{message:"creative http error",data:{creativeUrl:e.template.creativeUrl}});var i=t.schedule;(e==i.getCurrentAd()||t.isCurrentVV()&&0==e.index())&&e.abort()}r&&r.checkErrorCreativeUrls(e)})),e.on("click",pf.throttle((function(){e.debug("click",e.adInfo),Dp.send(e,"click"),"skippable"==e.deliverName()&&e.emit("trueview")}),500,{trailing:!1})),e.once("impression",(function(){if(!e.hasImpressed)if("ended"!=e.state||e.slot.isViewPoint()){e.debug("impression",e.creative.templateType,e.orderItemId),e.hasImpressed=!0,e.handleConflict(),e.slot.sendEmptyTrackingBeforeTimeSlice(uh(e.timeSlices)),Dp.send(e,"impression");var t=e.slot.show.request;if(t.sendInventory(),p_(e)){e.debug("roll ad start");var n=t.vv;n.onNetworkFree(),function(e){var t=1===e.slot.cuepointType,n=e.index()===e.slot.ads.length-1;return t&&n}(e)&&n.schedule&&n.schedule.requestWholeCorner(),e.emit("pingback",{subtype:"start"}),Dp.send(e,"start")}}else e.debug("impression , ",e)})),e.once("trueview",(function(){e.debug("trueview",e.creative.templateType,e.orderItemId),Dp.send(e,"trueview")})),e.on("skip",(function(t){e.debug("click skip");var n=t||!1;pf.includes(["trueView","vip","sports-vip"],e.deliverName())||n?e.debug("not send skip click"):e.emit("pingback",{subtype:"skipClick"});var r=e.getParentByName("sdk");if(e.isSkippable()||n){e.debug("skip success");var i={subtype:"skip",customInfo:{ofs:e.getPlayedTime(),skt:e.getSkippedType()}};if("skippable"==e.deliverName()){var a={tag:e.getSkippedStage(),tnr:e.getSlotLength(),cor:e.getVal("order")};pf.extend(i.customInfo,a)}e.emit("pingback",i),"skippable"==e.deliverName()&&e.sendPlayDurationPingback(e.getPlayedTime()),"trueView"==e.deliverName()&&Dp.send(e,"skip"),r.rollView&&r.rollView.pingback("ply_adskpd"),pf.each(e.slot.ads,(function(e){e.skipped=!0})),e.emit("end",{type:"skip"})}else r.viewController&&r.viewController.pullCashier(e)})),e.once("creativeLoad",(function(){ph(e,{pingbackType:"creative",subtype:"load",customInfo:pf.get(e,"matchedVideo.definitionLevel")})})),e.on("clickAndOpen",(function(t,n){e.hasImpressed||e.slot.isViewPoint()?(e.emit("click"),e.emit("open",t,n)):e.debug("has not impressed")})),e.on("open",pf.throttle((function(t,n){if(e.debug("open"),l_.element(t)){var r=t;t=r.getAttribute("href"),n=n||r.getAttribute("target")}t=t||Ip(e),pf.size(t)>2&&window.open(t,n||"_blank")}),500,{trailing:!1})),e.once("complete",(function(t){e.debug("complete");var n=e.getParentByName("vv");(p_(e)&&(u_.data.adPlayedDurationInDay+=e.duration,u_.save()),"pause"==h_(e))?n.schedule.loadPause({from:e,requestIndex:e.slot.show.request.requestIndex+1}):e.emit("end",t)})),e.once("end",(function(t){if(t=t||{},e.debug("end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}if(__(e)){var r=e.getParentByName("vv");pf.remove(r.currentOverlayAds,(function(t){return e==t}))}pf.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),e.slot.isViewPoint()&&e.slot.hasNotifiedStart&&(e.slot.notifyPlayer("adplayer_ad_end"),e.slot.complete()),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?y_(e):g_(e)})),e.on("replayComplete",(function(t){e.debug("complete replay"),p_(e)&&(u_.data.adPlayedDurationInDay+=e.duration,u_.save()),e.emit("replayEnd",t)})),e.on("replayEnd",(function(t){if(t=t||{},e.debug("replay end by",t.type),e.state="ended",e.hasPlayed=!0,e.template){var n={};"timer-complete"==t.type&&(n.abort=!0),e.template.stop(n)}pf.each(e.elements,(function(e){e.parentNode&&e.parentNode.removeChild(e)})),!e.slot.hasInited||e.slot.isViewPoint()||e.notAutoPlayNext||e.tryPlayNextAd(),e.slot.isWholeCorner()?y_(e):g_(e)})),e.on("pingback",(function(t){var n=pf.map(e.slot.ads,(function(e){return e.timeSlices.join("")})).join("|"),r=t.customInfo||{};r.rpt=e.playTimes-1,e.isSeekableOriginalRoll()&&pf.includes(["1q","mid","3q","sp"],t.subtype)&&(r.sek=e.isSeeked?1:0);var i=e.slot.show.request;i.adBreak&&(t.sequenceId=i.adBreak.sequenceId),t=pf.extend({},t,{pingbackType:"ad",orderItemId:e.orderItemId,creativeId:e.creative.creativeId,dspId:e.dspId,adStrategy:[e.slot.cuepointType,e.timeSlices.join(""),n].join(":"),customInfo:xf(r,",",":")}),ph(e,t)})),e.on("tracking",(function(t){t&&Dp.send(e,t)})),e.on("progressReseted",(function(t,n){var r=e.template.timer;r&&(r.stop(),l_.number(t)&&!n&&(r.currentCount=t,t===e.duration?(r.emit("timerComplete"),e.debug("after ad progress reset to complete",t)):(r.start(),e.debug("after ad progress reset to",t,e.template.timer.currentCount))))})),e.on("error",(function(t){t=t||{},e.debug("error",t.message,t.data,e.adInfo),e.error=t;var n=t.message;if("creative http error"==n||"creative timeout"==n){var r=pf.get(t,"data.creativeUrl"),i="creative timeout"==n?505:504;e.emit("creativeError",r,i)}setTimeout((function(){e.state="error"}))})),e.once("creativeError",(function(t,n){ph(e,{pingbackType:"creative",subtype:"error",errorCode:n,errorMessage:t,requestCount:-1})})),e.on("closeViewPoint",(function(){_h(e,"close","viewPointTips")}))}(this)}},{key:"index",value:function(){return pf.indexOf(this.slot.ads,this)}},{key:"tryLoadToVideo",value:function(){var e=this;return e.load().then((function(){return e.isLiving((function(){return e.template.loadRollToVideo()}))}))["catch"]((function(t){var n=e.slot.show.request;n.noCreativeUrlAds&&"fail to match ad video"==t.message&&n.noCreativeUrlAds.push(t.data),e.debug("load to video fail",t)}))}},{key:"updateLoadStatusAndInitTemplate",value:function(){var e=this;return e.debug("ready to update ad load status and init template"),e.load().then((function(){return e.isLiving((function(){return e.template.bindPlayingEvt()}))}))["catch"]((function(t){e.debug("update ad load status and init template fail",t)}))}},{key:"load",value:function(){var e=this;return"ended"==e.state?Promise.reject("ended"):e.initTemplate().then((function(){return e.memory.load=e.memory.load||new Promise((function(t){e.debug("load"),e.state="loading",t(e.template.load())})),e.memory.load}))}},{key:"initTemplate",value:function(){var e=this;return e.isLiving((function(){return e.memory.initTemplate=e.memory.initTemplate||new Promise((function(t,n){e.template=function(e){var t=e.creative.templateType,n=e_[t];if(n)return new n(t,e)}(e),e.template?(e.duration=e.template.getDuration(),isNaN(e.duration)?n(new Error("invalid duration")):(e.debug("init template success"),"trueView"!=e.deliverName()&&"skippable"!=e.deliverName()||(e.impressionTime=function(e,t){var n=pf.endsWith(e,"%"),r=parseFloat(e);n&&(e=t*r/100);e>=0&&e<=t||(e=t/2);return e=parseInt(e)}(e.impressionTime,e.duration),e.skipTime=function(e,t){(e=parseInt(e))>=0&&e<=t||(e=Math.min(5,t));return e}(e.skipTime,e.duration)),t())):(ph(e,{pingbackType:"statistics",subtype:"unsupported"}),n(new Error("unknown template:"+e.creative.templateType)))}))["catch"]((function(t){return e.emit("error",t),Promise.reject(t)})),e.memory.initTemplate}))}},{key:"setAdMap",value:function(){this.getParentByName("sdk").adMap[this.id]=this}},{key:"getPlayedTime",value:function(){return(this.duration||0)-(this.remain||0)}},{key:"play",value:function(){var e=this;return e.isLiving((function(){return e.load()})).then((function(){return e.isLiving((function(){if("paused"==e.slot.show.request.vv.videoState&&p_(e)&&"roll"==e.template.type)return Promise.resolve();if(e.notAutoPlayNext=!1,"paused"==e.state)return e.resume();if("playing"!=e.state||e.slot.isSeekableOriginalSlot()&&"playing"==e.state){e.playTimes++,e.state="playing";var t=e.slot.show.request;return"pause"==t.type&&t.from&&t.from.abort(),e.isConflict()?Promise.reject(new Error("conflict")):(__(e)&&e.getParentByName("vv").currentOverlayAds.push(e),(e.slot.isViewPoint()||e.slot.isWholeCorner())&&e.slot.notifyPlayer("adplayer_ad_start"),e.debug("ad template play",e),e.template.play())}}))}))["catch"]((function(t){if(e.error=e.error||t,e.debug("play error",e.error.message),e.error&&e.emit("end",{type:"error"}),"ended"!==e.error)return Promise.reject(t)}))}},{key:"resume",value:function(){var e=this;return e.isLiving((function(){e.debug("resume");var t=e.template;return e.state="playing",t&&l_.fn(t.resume)?t.resume():t.play()}))}},{key:"tryPlayNextAd",value:function(){var e=this,t=e.slot.ads[e.index()+1];t?t.skipped?t.tryPlayNextAd():(e.debug("play next ad"),t.play()):e.skipped||e.aborted?e.slot.end():e.slot.complete()}},{key:"abort",value:function(){this.aborted=!0,this.emit("end",{type:"abort"})}},{key:"pause",value:function(){var e=this;return e.isLiving((function(){e.state="paused",e.template.pause()}))}},{key:"isLiving",value:function(e){var t,n=this;if(n.error?t=n.error:"ended"==n.state&&(t="ended"),t&&!n.canReplay())return Promise.reject(t);if(n.error)return Promise.reject(t);var r=e();return Promise.resolve(r)}},{key:"deliverName",value:function(){return i_[this.deliverType]||""}},{key:"typeName",value:function(){return h_(this)}},{key:"hasDspIcon",value:function(){return!(1!=this.isDSP||!this.dspIcon)}},{key:"putIcon",value:function(e,t){var n=this;return t=t||{},/\.qiyipic\.com/.test(e)&&(e=e.replace(/\.qiyipic\.com/,".iqiyipic.com")),sh(e).then((function(r){return n.$adzone?(n.debug("put icon",e),r.style.bottom=(t.bottom||0)+"px",r.style.left=(t.left||0)+"px",r.style.width="25px",r.style.height="25px",r.style.position="absolute",n.$adzone.appendChild(r),n.elements.push(r),r):new Error("no adzone")}))}},{key:"reset",value:function(){var e=this;e.debug("reset"),e.off(),e.bindEvent(),e.state="idle";var t=e.template;t&&t.reset&&t.reset()}},{key:"isConflict",value:function(){if(__(this)){var e=this.slot.show.request.vv.currentOverlayAds;if(pf.some(e,(function(e){return e.slot.isViewPoint()})))return!0}return!1}},{key:"handleConflict",value:function(){var e=this,t=e.slot.show.request,n=t.vv.currentOverlayAds;"pause"!=t.type&&"midroll"!=t.type||pf.each(n,(function(e){var n=e.$adzone;n&&(n.style.display="none"),"midroll"==t.type&&e.pause()}));var r=pf.filter(n,(function(t){if(e!=t){if(e.slot.adZoneId==t.slot.adZoneId)return!0;if(e.slot.isViewPoint())return!0}return!1}));pf.each(r,(function(t){e.debug("same adzone conflict",e.orderItemId,"kill",t.orderItemId),t.abort()}))}},{key:"isSkippable",value:function(){return!!pf.includes(["trueView","vip","sports-vip"],this.deliverName())||function(e){var t=e.getParentByName("vv"),n=t.sdk;if(!n.isVIP)return!1;if("tw"===n.locale&&n.isVIP)return!0;var r=t.videoInfo.videoType||0,i=n.vipCheckResult.userVipType||0,a=a_[r];if(!a)return!0;if(pf.has(a,"positive"))return function(e,t){return v_(e,t)>0}(a.positive,i);if(pf.has(a,"negative"))return!function(e,t){return v_(e,t)===t}(a.negative,i)}(this)}},{key:"getSkippedType",value:function(){return{2:1,3:2,6:4,7:5}[this.deliverType]}},{key:"resize",value:function(){var e=this;return e.isLiving((function(){"paused"!=e.state&&"playing"!=e.state||e.template.resize()}))}},{key:"isSeekableOriginalRoll",value:function(){return"origin"==this.deliverName()&&Boolean(this.seekable)||15==this.slot.cuepointType}},{key:"canReplay",value:function(){return this.slot.isSeekableOriginalSlot()}},{key:"sendThirdPartyPingback",value:function(e){ph(this,pf.extend({pingbackType:"statistics",subtype:"tps"},e))}},{key:"getSkippedStage",value:function(){return this.remain<=0?2:1}},{key:"getSlotLength",value:function(){return this.slot.ads.length}},{key:"sendPlayDurationPingback",value:function(e){_h(this,"vpd","pt:0,pc:1,pd:"+e+",pg:"+e)}}]),n}(gf);function h_(e){var t=e.slot.cuepointType||-1;return r_[t]||t}function p_(e){return pf.includes([1,2,3,15],e.slot.cuepointType)}function __(e){return pf.includes([8,10,11],e.slot.cuepointType)}function v_(e,t){return Array.isArray(e)?"number"!=typeof t?0:pf.sum(e)&t:0}function g_(e){var t=e.slot,n=e.getParentByName("vv").adCollisionDetection;t.isWholeCorner()||(n.removeAd(e.id),e.debug("wholecorner isvalid",n.wholeCornerIsValid(),";wholecorner status",n.getWholeCorner().showing),n.notifyWholeCornerToShow())}function y_(e){var t=e.getParentByName("vv").adCollisionDetection;t.setWholeCorner({}),t.notifyWholeCornerToHide()}function m_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var b_=pf.is,k_=function(e){d()(n,e);var t=m_(n);function n(e,r,a){var o;i()(this,n),o=t.call(this,"slot");var s=c()(o);return s.setParent(a),pf.extend(s,e),s.show=r,s.state="idle",s.id=pf.uid(),s.debug=a.vv.sdk.logger.getLogger("slot"),s.hasNotifiedStart=!1,s.hasInited=!0,s.hasRequestedVipDoc=!1,s.skipAdParams={},s.parseAd(),s.hasSkippableAdInSlot=s.hasSkippableAdInSlots(),o}return o()(n,[{key:"parseAd",value:function(){var e=this;this.ads=this.ads.map((function(t){return new f_(t,e)}))}},{key:"play",value:function(){var e=this;if(1===e.cuepointType&&e.initSlotInfo(),b_.empty(e.ads))0xe8d4a512a0!=e.adZoneId&&e.complete();else{var t=e.ads[0];t&&(e.notifyPlayer("adplayer_ad_start"),e.state="playing",t.play())}}},{key:"abort",value:function(){var e=this;"ended"!=e.state&&(e.debug("abort"),pf.each(e.ads,(function(e){e.abort()})),e.end())}},{key:"hasImpressed",value:function(){return pf.some(this.ads,(function(e){return e.hasImpressed}))}},{key:"tryLoadToVideo",value:function(){return pf.reduce(this.ads,(function(e,t){return e.then((function(){return t.tryLoadToVideo()}))}),Promise.resolve())}},{key:"loadAllAdsToVideo",value:function(){var e=this;return e.debug("slot loadAllAdsToVideo",e),Promise.all(pf.map(e.ads,(function(e){return e.updateLoadStatusAndInitTemplate()}))).then((function(){var t=pf.map(e.ads,(function(t){var n={file:t.template.creativeUrl,id:t.id,type:t.typeName(),seekable:Boolean(t.seekable)||15==t.slot.cuepointType,offset:parseInt(t.slot.startTime),videoEventId:e.request.vv.videoEventId,duration:t.duration};return n.file=n.file.replace(/\.qiyi\.com/,".iqiyi.com"),n.file=n.file.replace(/\/\/data\.video\.iqiyi\.com/,"//pcw-data.video.iqiyi.com"),e.debug("video load",n,n.videoEventId,t.slot.startTime),n}));e.debug("video load all Ads",t),e.request.vv.mw.load(t)}))}},{key:"complete",value:function(){var e=this;if(e.debug("slot complete",e.state),e.sendEmptyTrackingBeforeTimeSlice(Infinity),2==e.cuepointType&&e.hasImpressed()){var t=e.request.adBreak;t&&!t.hasMidrollPlayed&&(t.hasMidrollPlayed=!0,e.request.vv.midrollPointsPlayedInView++)}e.isSeekableOriginalSlot()&&pf.map(e.ads,(function(e){"ended"!==e.state&&e.emit("replayComplete",{type:"timer-complete"})})),e.end()}},{key:"isViewPoint",value:function(){return pf.includes([8],this.cuepointType)}},{key:"isWholeCorner",value:function(){return pf.includes([13],this.cuepointType)}},{key:"isSeekableOriginalSlot",value:function(){var e=pf.includes([2],this.cuepointType),t=this.ads||[],n=pf.every(t,(function(e){return"origin"==e.deliverName()&&Boolean(e.seekable)}));return e&&n&&t.length>1}},{key:"index",value:function(){return pf.indexOf(this.request.slots,this)}},{key:"end",value:function(){var e=this;(e.hasNotifiedStart&&e.notifyPlayer("adplayer_ad_end"),pf.includes([1,2,3],e.cuepointType))&&(e.request.vv.lastRollCompleteTime=Date.now());if("preroll"==e.request.type)return e.state="ended",e.debug("preroll slot ended"),1!=e.cuepointType||b_.empty(e.ads)||e.request.vv.startVideo("preroll"),void e.playNextSlot();"ended"==e.state||e.isViewPoint()||(e.state="ended",e.debug("slot ended"),e.request.end())}},{key:"playNextSlot",value:function(){var e=this,t=e.request.slots[e.index()+1];t?b_.empty(t.ads)?t.end():t.play():15==e.cuepointType?e.request.end("briefRoll"):e.request.end()}},{key:"reset",value:function(){this.state="idle",pf.each(this.ads,(function(e){e.reset()}))}},{key:"sendEmptyTrackingBeforeTimeSlice",value:function(e){var t=this,n=t.emptyTracking||{};isNaN(e)||pf.remove(n.timeSlices,(function(r){var i=uh(r.w);if(!isNaN(i)&&i<=e){t.debug("send empty tracking before",e,t.adZoneId);var a=pf.extend({},r,n.trackingParam);return Tp.send({},a,t,"cupid","impression"),!0}}))}},{key:"notifyPlayer",value:function(e){var t=this,n=t.getParentByName("sdk"),r={ctp:t.cuepointType,id:t.id};t.cuepointType>=1&&(t.hasNotifiedStart=!("adplayer_ad_start"!=e),t.debug("slot notifyPlayer:",e,r),n.emit(e,r))}},{key:"initSlotInfo",value:function(){var e=this.request;e.blackscreenDuration=this.countRollDuration(),e.noCreativeUrlAds=[],e.errCreativeUrlAds=[]}},{key:"countRollDuration",value:function(){var e=this;if(!e)return 0;if(b_.empty(e.ads))return 0;var t=e.ads;return pf.reduce(t,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}},{key:"hasSkippableAdInSlots",value:function(){var e=this.ads;return pf.some(e,(function(e){return"skippable"==e.deliverName()}))}},{key:"calcRollDurationBefore",value:function(e){if(!this)return 0;var t=this.ads;if(b_.empty(t))return 0;var n=e.index(),r=pf.slice(t,0,n);return b_.empty(r)?0:pf.reduce(r,(function(e,t){return t.error?e:"skippable"==t.deliverName()?e+t.duration+5:e+t.duration}),0)}}]),n}(gf);function x_(){return function(){if(!eh())return!0;var e=T_();return!e||!1!==e.upd}()?0:1}function S_(e){"preroll"!=e.type||function(){var e=T_();if(!e)return!1;var t=e.ct||0;return(new Date).getTime()-t<864e5}()||setTimeout(P_,0)}function T_(){var e=th("QC175");if(!e)return!1;try{e=JSON.parse(e)}catch(t){return console.log("parse qc175 error",t),!1}return e}function P_(){var e=eh();if(e){var t="https://userpref.iqiyi.com/apis/userpref/list.action?"+xf({authcookie:e,props:"upd",agentType:1});Xf({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,success:function(e,t){var n=e||{};if("success"==t&&"A00000"==n.code){var r={upd:"1"!==((n.data||{}).upd||{}).value,ct:(new Date).getTime()};nh("QC175",JSON.stringify(r),{path:"/",domain:"iqiyi.com"})}}})}}var I_=pf.is,w_=function(){function e(t){i()(this,e),this.requestCount=0,this.max=2,this.request=t,this.param={},this.debug=t.vv.sdk.logger.getLogger("show"),this.encryptionParam=this.param.encryption={}}return o()(e,[{key:"load",value:function(){return this.setParam().normalizeRequestParam().compressParamKey().encryptShowParam().getUrl().sendRequest()}},{key:"addEncryptionParam",value:function(e){pf.extend(this.encryptionParam,e)}},{key:"addParam",value:function(e){pf.extend(this.param,e)}},{key:"setParam",value:function(){var e=this.request,t=e.vv.sdk,n=e.vv;t.updateUser(n),this.addParam(pf.extend({timestamp:Date.now(),requestId:e.requestId},e.getMultiVals(["adPlayerId","uaaUserId","passportId","requestId"])));var r=qh(window.document.referrer||"")||{},i=function(){var e=window.location.href,t="";try{t=decodeURIComponent(e)}catch(n){}return t=(t=t.split("?")[0].split("#")[0]).replace(/[\u200B-\u200D\uFEFF]/g,"")}(),a=pf.extend({referrer:r.host,needPolicy:e.needPolicy,url:i.replace(/^https:/,"http:"),ptid:t.ptid||"",vft:e.vft,timePoint:t.timePoint,usePartnerData:x_(),cuepointList:e.cuepointList,supportIQiyiTracking:!0,supportEmptyTracking:!0,encryptionVersion:""},e.getMultiVals("episodeId albumId videoDuration isVIP isPreload clientVersion sdkVersion searchQuery passportCookie requestIndex vvId pauseRequestTimes prerollOrderItemIds playSource".split(" ")));"preroll"==e.type&&!n.isPreload&&"iqiyiw"==t.site&&!n.isAutoMapPlayerId&&n.couponCode&&n.couponVer&&i&&1==t.vvCnt&&(a=pf.extend(a,e.getMultiVals("couponCode couponVer".split(" "))));var o=dh();o&&(a=pf.extend(a,{idx:o.idx})),this.addEncryptionParam(a);var s=n.getContinuingVVs(),c={continuingVideoPlayedCount:s.length,continuingVideoPlayedDuration:pf.sumBy(s,"videoDuration"),continuingAdPlayedDuration:pf.sumBy(s.concat(n),"adPlayedDurationInView")};this.addEncryptionParam(c);var u={adPlayedDurationInDay:u_.data.adPlayedDurationInDay},d=n.mw.videoPlayedDurationInDay();return d&&(d=parseInt(d)),u.videoPlayedDurationInDay=d||0,"midroll"==e.type&&(u.midrollPointsPlayedInView=n.midrollPointsPlayedInView,u.lastMidrollRequestTime=n.lastMidrollRequestTime,n.lastRollCompleteTime&&(u.lastRollCompleteInterval=Math.round((Date.now()-n.lastRollCompleteTime)/1e3))),this.addEncryptionParam(u),this}},{key:"normalizeRequestParam",value:function(){var e=this;return pf.each(["needPolicy","supportIQiyiTracking","supportEmptyTracking","isVIP","isPreload"],(function(t){var n=e.encryptionParam[t];I_.bool(n)&&(n=n?1:0),e.encryptionParam[t]=n})),e}},{key:"compressParamKey",value:function(){var e=this;return e.debug("request param",e.param),e.compressedParam=Tf(Oh)(e.param),e.debug("compressed request param",pf.extend({},e.compressedParam)),e.compressedParam.e.q=e.compressedParam.e.q.map((function(e){return xf(e,",",":")})).join(";"),e}},{key:"encryptShowParam",value:function(){var e=this.request.getVal("adPlayerId"),t=xf(this.compressedParam.e,"&","=",{keepRaw:!0});if(e&&t){var n;try{n=Zh.encryptBySeed(t,e)}catch(r){console.error("encrypt error",t,e),n=""}this.compressedParam.e=n}return this}},{key:"getUrl",value:function(){var e="/show2",t=this.compressedParam,n=this.previewParam=function(){var e=qh(window.location.href,!0).query,t="w y z".split(" "),n=pf.only(e,t);if(pf.keys(n).length==t.length)return n}();return n&&(this.debug("preview mode",n),e="/preview3",t=pf.extend({},n,t)),this.url="https://t7z.cupid.iqiyi.com"+e+"?"+xf(t),this.debug("show url",this.url),this}},{key:"sendRequest",value:function(){var e=this,t=Date.now();return new Promise((function(n){Xf({url:e.url,dataType:"jsonp",jsonpCallback:"cb",timeout:1e4,checkParserError:!0,success:function(e,r){n({textStatus:r,data:e,duration:{start:t,end:Date.now()}})},error:function(r,i){n({textStatus:i,data:r,duration:{start:t,end:Date.now()}}),e.debug("error status:",r,i)},complete:function(r,i){"timeout"==i&&n({textStatus:i,duration:{start:t,end:Date.now()}}),e.debug("show complete",Date.now()-t,i)}})})).then((function(t){return e.onComplete(t)}))}},{key:"onComplete",value:function(e){this.debug("status:",e.textStatus,e.duration);var t=this,n=t.request.vv.sdk;"preroll"==t.request.type&&(n.showTime=e.duration),t.requestCount++;var r={pingbackType:"show",requestDuration:e.duration.end-e.duration.start};if("success"!=e.textStatus){var i={timeout:302,parsererror:304,error:301};return r.errorCode=i[e.textStatus]||301,t.requestCount<t.max?(r.requestCount=t.requestCount,r.subtype="error",ph(t.request,r),t.debug("show request retry",t.requestCount),t.sendRequest()):(r.requestCount=-1,r.subtype="error",ph(t.request,r),t.debug("request retry use up"),{error:e.textStatus,errorCode:i[e.textStatus]||301})}return t.debug("response",e.data),r.requestCount=-1,t.parsedShow=function(e,t,n){var r;try{r=Zh.decryptShowResponse(t.url,e)}catch(l){r=e}var i=Xh(r),a=t.request,o=pf.extend({},i);if(t.debug("humanize response",o),i.pingbackParam&&(a.pingbackParam=i.pingbackParam),i.request=a,i.errorCode){n.subtype="error",n.errorCode={302400:305,302500:306,302503:307,302600:308}[i.errorCode],n.errorMessage=i.serverError;var s=1==(i.slots&&i.slots[0]||{}).cuepointType;if(305===n.errorCode||308===n.errorCode&&"preroll"==a.type&&s){if(ph(a,n),305===n.errorCode)return{error:"paramerror",data:i};if(308===n.errorCode)return{error:"invalidplayer",data:i}}}else{n.subtype="success";var c=a.vv.sdk,u=a.vv;if(i.cupidUserId&&(c.cupidUserId=i.cupidUserId),i.serverTime&&(a.deltaTime=t.deltaTime=i.serverTime-Date.now()),i.pingbackConfig&&(a.pingbackConfig=i.pingbackConfig),i.clientIP){var d=Hh.atob(i.clientIP);c.userIP=d}c.isVIP=c.getUser().isVIP,i.videoInfo&&(u.disableSkipAd=i.videoInfo.disableSkipAd,u.videoInfo=i.videoInfo,pf.extend(u,i.videoInfo)),i.vipCheckConflict&&(c.isVIP=1==i.vipCheckConflict.isVIP),c.vipCheckResult=i.vipCheckResult||{}}return i.slots=i.slots.map((function(e){return new k_(e,i,a)})),a.slots=i.slots,ph(a,n),i}(e.data,t,r),S_(t.request),t.parsedShow}}]),e}();function A_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var E_=pf.is,D_="requestId adBreak cuepointList needPolicy requestIndex from type vft".split(" "),q_=function(e){d()(n,e);var t=A_(n);function n(e,r){var a;return i()(this,n),a=t.call(this,"request"),c()(a).setParent(r),a.state="idle",a.debug=r.sdk.logger.getLogger("request"),a.type=e.type,a.init(e),a}return o()(n,[{key:"init",value:function(e){pf.extend(this,pf.only(e,D_));var t=e.requestId||function(e){var t=[e.vv.vvId,Date.now()];return Eh(t.join(""))}(this);this.id=this.requestId=t}},{key:"load",value:function(){var e=this;if("ended"!=e.state)return e.memoryLoad=e.memoryLoad||new Promise((function(t,n){e.state="loading",(e.show=new w_(e)).load().then((function(n){E_.empty(n.policySlots)||e.vv.schedule.setPolicy(n.policySlots);var r=e.vv.sdk;if(e.isRoll()){var i;r.requestEndTime=r.loadStartTime=Date.now();var a=e.getSlotByCpt(n.slots,15);if("preroll"==e.type?(i=e.getSlotByCpt(n.slots,1),a&&e.vv.schedule.completeBriefRoll(a)):"midroll"==e.type&&(i=n.slots&&n.slots[0]),i&&!E_.empty(i.ads)){if("preroll"==e.type){var o=[];pf.each(i.ads,(function(e){o.push(e.orderItemId)})),e.vv.prerollOrderItemIds=o.join(",")}"mraid"==i.ads[0].creative.templateType&&(r.setViewController(),e.debug("mraid and request vc")),i.isSeekableOriginalSlot()?i.loadAllAdsToVideo().then((function(){e.vv.startLoadVideo({reason:"load complete",rollType:e.type})})):i.tryLoadToVideo(r).then((function(){1===i.cuepointType&&e.checkEmptyCreativeUrls(i),e.loadBriefRoll(a,{reason:"load complete",rollType:e.type})}))["catch"]((function(){r.loadEndTime=r.loadEndTime||Date.now(),e.loadBriefRoll(a,{reason:"load fail",rollType:e.type})})),"midroll"==e.type&&(e.vv.lastMidrollRequestTime=i.startTime,e.vv.schedule.bindVideoTimeEvt(i.startTime-5,(function(){r.setViewController((function(){r.rollView.startMidrollTip()}))})))}else e.checkCoupon(),r.loadEndTime=Date.now(),e.loadBriefRoll(a,{reason:"noad",rollType:e.type})}if(e.isWholeCorner()&&e.vv.schedule.initWholeCorner(n.slots),!E_.empty(n.conf)){var s=n.conf||{};r.reqMiaozhenTime=s.reqMiaozhenTime||0,r.miaozhenJsonPUrl=s.miaozhenJsonPUrl||"",e.debug("reqMiaozhenTime: ",r.reqMiaozhenTime,", miaozhenJsonPUrl: ",r.miaozhenJsonPUrl)}r.cupidServerTimeGap=n.serverTime-Date.now(),e.debug("cupidServerTimeGap: ",r.cupidServerTimeGap),t(n)}))["catch"]((function(t){e.debug("show error",t),e.end(),n(t)}))})),e.memoryLoad}},{key:"loadBriefRoll",value:function(e,t){var n=this,r=n.vv.sdk;e&&!E_.empty(e.ads)?e.tryLoadToVideo(r).then((function(){n.vv.startLoadVideo({reason:"load complete",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)}))["catch"]((function(){n.vv.startLoadVideo({reason:"load fail",rollType:"briefRoll"}),"preroll"==n.type&&n.vv.startLoadVideo(t)})):("preroll"==n.type&&n.vv.startLoadVideo({reason:"noad",rollType:"briefRoll"}),n.vv.startLoadVideo(t))}},{key:"play",value:function(){var e=this;"ended"!=e.state&&e.load().then((function(t){if("ended"!=e.state){if(t.error)return e.showErrorHandler(t),void e.end();if(t)if(e.trySendInventoryDirectly(t.slots),"secondary"==e.type){var n=[];pf.each(t.slots,(function(t){8==t.cuepointType?n.push(t):(e.debug("slot cpt",t.cuepointType),t.play())})),n.length>0&&e.vv.schedule.initViewPoint(n)}else{var r=t.slots[0];e.state="playing",r?r.play():e.end()}else e.end()}}))["catch"]((function(t){e.debug("error",t)}))}},{key:"showErrorHandler",value:function(e){var t={paramerror:305,invalidplayer:308,parsererror:304,error:301}[e.error]||301;this.pullAdblockBlackScreen(this,{errorCode:t,errorMessage:e.error,requestCount:this.show.requestCount,cupidUserId:e&&e.data&&e.data.cupidUserId})}},{key:"end",value:function(e){var t=this;t.state="ended",t.sendInventory(),t.isRoll()&&"ended"!=t.vv.state&&t.vv.startVideo(e||t.type)}},{key:"isRoll",value:function(){return"preroll"==this.type||"midroll"==this.type||"briefRoll"==this.type}},{key:"isWholeCorner",value:function(){return"whole_corner"==this.type}},{key:"abort",value:function(){var e=this;if(e.show&&e.show.ajax&&e.show.ajax.abort(),e.slots){var t=e.slots;pf.each(t,(function(e){e.abort()}))}e.end()}},{key:"reset",value:function(){pf.each(this.slots,(function(e){e.reset()}))}},{key:"trySendInventoryDirectly",value:function(e){(E_.empty(e)||"secondary"==this.type)&&this.sendInventory()}},{key:"sendInventory",value:function(){var e=this;if(!e.inventorySent)if(e.inventorySent=!0,e.show&&e.show.parsedShow&&e.show.parsedShow.inventory){e.debug("send inventory");var t=pf.only(e.show.parsedShow.inventory,"originalInventory rawInventory deliveredInventory forbiddenInventory");ph(e,pf.extend({pingbackType:"inventory",subtype:"success"},t))}else e.debug("no data to send inventory")}},{key:"pullAdblockBlackScreen",value:function(e,t){var n=this,r=n.vv.sdk;if(!r.isPreload&&(!r.isVIP&&("iqiyiw"==r.site||"ppsw"==r.site))){var i=t.errorCode;!i||-1==pf.values(o_).indexOf(i)||(t&&(t.pingbackType="statistics",t.subtype="adblock",ph(e,t)),r.emit("adplayer_ad_block",{videoEventId:n.vv.getVal("videoEventId")}),n.debug("notify player adblock"),r.setViewController((function(){return r.viewController.blackscreen.triggerAdblockCBK(e)})))}}},{key:"checkEmptyCreativeUrls",value:function(e){var t=this,n=t.show;t.noCreativeUrlAds.length==e.ads.length&&this.pullAdblockBlackScreen(t,{errorCode:o_.CODE_VIDEO_HTTP_ERROR,errorMessage:"creativeUrl is missing",requestCount:n.requestCount})}},{key:"checkErrorCreativeUrls",value:function(e){var t=this;t.errCreativeUrlAds&&(t.errCreativeUrlAds.push(e),t.errCreativeUrlAds.length==e.slot.ads.length&&this.pullAdblockBlackScreen(e,{errorCode:o_.CODE_VIDEO_HTTP_ERROR,errorMessage:"video-error"}))}},{key:"checkCoupon",value:function(){var e=this.vv,t=e.sdk,n=window.location.pathname,r=window.location.search,i="iqiyiw"===t.site&&pf.startsWith(n,"/v_")&&!pf.includes(r,"list=");e.isPreload||e.couponCode&&e.couponVer||!i||1!=t.vvCnt||this.pullAdblockBlackScreen(this,{errorCode:o_.CODE_S_COUPON_NOT_FOUND,errorMessage:"noad"})}},{key:"getSlotByCpt",value:function(e,t){return pf.find(e,(function(e){return e.cuepointType==t}))}}]),n}(gf);var O_=pf.is,R_=function(){function e(t){i()(this,e),t=t||{};var n=this;n.startTime=t.startTime,n.cuepointType=t.cuepointType,n.adZoneId=t.adZoneId,n.sequenceId=t.sequenceId,n.adZoneStyle=t.adZoneStyle,n.state=null,n.request=null,n.hasLoaded=t.hasLoaded||!1,n.ad=t.ad||null,n.slot=t.slot||null,n.priority=0,2==n.cuepointType?n.priority=10:8==n.cuepointType&&(n.priority=9)}return o()(e,[{key:"addInfo",value:function(e){e=e||{};this.slot=e.slot||null}},{key:"isMid",value:function(){return!!(pf.includes([2,10,11,13,15],this.cuepointType)&&this.startTime>0)}},{key:"isOverlay",value:function(){return!!pf.includes([8,10,11],this.cuepointType)}},{key:"isValid",value:function(){return O_.number(this.startTime)&&O_.number(this.cuepointType)}},{key:"isLoaded",value:function(){return!!(this.request||this.ad||8==this.cuepointType||13==this.cuepointType||this.hasLoaded)}},{key:"refresh",value:function(){this.request=null,this.hasPlayed=!1,this.hasLoaded=!1}},{key:"canLoad",value:function(e){return e>=this.startTime-10&&e<=this.startTime}},{key:"abort",value:function(){this.request?this.request.abort():this.ad&&this.ad.abort()}}]),e}(),L_=pf.is;function M_(e){e&&e.sort((function(e,t){var n=e.cuepointType-t.cuepointType;return 0==n&&(n=e.startTime-t.startTime),n}))}function C_(e){var t=pf.filter(e,(function(e){return!N_(e)})),n=pf.map(t,(function(e){return e.priority})),r=pf.max(n);return e=pf.filter(e,(function(e){return!(r!=e.priority&&!N_(e)&&13!==e.cuepointType)||(e.state="banned",!1)}))}function N_(e){if(8!==e.cuepointType)return!1;var t=e.slot||{};return L_.empty(t.ads)}function B_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var F_=pf.is,U_=function(e){d()(n,e);var t=B_(n);function n(e){var r;i()(this,n),r=t.call(this);var a=c()(r);return a.vv=e,a.videoEventId=e.videoEventId,a.mw=a.vv.mw,a.bindMwEvent(),a.log=e.sdk.logger.getLogger("schedule:"+e.videoEventId),a.adBreaks=[],a.allAdBreaks=[],a.midrollPoints={},a.currentAdId=null,a.hasBindSeeked=!1,a.enabled=!0,a.running=!1,a.init(),r}return o()(n,[{key:"init",value:function(){var e=this;e.binVideoEvent(),e.fetchAndPlayPreroll(),e.log("schedule inited")}},{key:"bindMwEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked loadstart afterSeeked pausetoplay".split(" "),t=this;t.handleMwEvt=function(e){var n=e.type,r=pf.includes(["play","playing","timeupdate"],n),i=e.gas||{};if(t.enabled||("error"==n||"loadstart"==n)&&i.id){var a=i.id;if(i.videoEventId!==t.videoEventId)return;if(r){var o=t.vv.sdk;t.loadedVC||(t.loadedVC=!0,o.setViewController())}if(t.emit(n,e),a){var s=t.vv.sdk.adMap[a];if(s)return(r||"seeked"===n&&s.slot.isSeekableOriginalSlot())&&t.setCurrentAd(a,s,e),t.stopTimer(),void t.emitToAd(s,"video-"+n,e);t.log("error!, fail to find ad",i),t.mw.abort()}else t.startTimer();t.removeCurrentAd()}else t.mw.pause()},e.forEach((function(e){t.mw.on(e,t.handleMwEvt)}))}},{key:"binVideoEvent",value:function(){var e=this;e.timerHandler=function(t){e.currentTime=Math.round(e.mw.currentTime());var n=pf.get(t,"data.actionType"),r=pf.get(t,"data");if("seeked"==t.type&&(e.log("seeked",e.currentTime,n),"controls"==n&&(e.onUserSeeked(r),e.disableAutoChooseMidroll(" seek"))),"afterSeeked"==t.type&&(e.log("after seeked",e.currentTime,n),"controls"==n&&e.afterUserSeeked(r)),null==e.lastTime){var i=pf.get(e,"midrollPoints.nextMidroll");i>0&&i<e.currentTime&&e.disableAutoChooseMidroll("")}if(e.lastTime!=e.currentTime&&e.updateVideoTime(t),!(e.vv.ipdxReqErrCount>2)){var a=e.vv.sdk.reqMiaozhenTime;if(F_.number(a)&&a>0){var o=dh(),s=e.vv.sdk.cupidServerTimeGap?e.vv.sdk.cupidServerTimeGap+Date.now():Date.now(),c=o&&1e3*+o.exptime-s<3e5;if(!o||c){var u=e.currentTime>a,d=e.vv.sdk.isWaitingIpdxResponse;u&&!d&&(e.log("isIpdxOverdue:",c,"ipdxInfo:",o),e.log("hasReachReqMiaozhenTime: ",u,"isWaitingIpdxResponse:",d),function(e){var t=e.sdk.miaozhenJsonPUrl;if(t){var n={pingbackType:"ipdx",subtype:"error",errorMessage:t};e.sdk.isWaitingIpdxResponse=!0;var r=!1;Xf({url:t,dataType:"jsonp",jsonpCallback:"callback",timeout:5e3,checkParserError:!0,success:function(t,r){var i=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();if("success"==r){var a=t;a&&a.ip&&a.geocode&&a.exptime?i>new Date(1e3*+a.exptime-3e5).getTime()?(e.ipdxReqErrCount++,ph(e,pf.extend(n,{errorCode:1905,customeInfo:xf({rsp:a,crt:i},",",":")}))):(nh("idx",JSON.stringify(a),{expires:new Date(Date.now()+31536e6)}),ph(e,{pingbackType:"ipdx",subtype:"success",customInfo:xf({rsp:a,crt:i},",",":")})):a&&-1==a.code?(e.ipdxReqErrCount++,ph(e,pf.extend(n,{errorCode:1904,customeInfo:xf({rsp:a,crt:i},",",":")}))):(e.ipdxReqErrCount++,ph(e,pf.extend(n,{errorCode:1906,customeInfo:xf({rsp:a,crt:i},",",":")})))}e.sdk.isWaitingIpdxResponse=!1},error:function(t,i){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,r=!0,ph(e,"parsererror"===i?pf.extend(n,{errorCode:1903,customeInfo:xf({crt:a},",",":")}):pf.extend(n,{errorCode:1901,customeInfo:xf({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1},complete:function(t,i){if("timeout"===i&&!r){var a=e.sdk.cupidServerTimeGap?e.sdk.cupidServerTimeGap+Date.now():Date.now();e.ipdxReqErrCount++,ph(e,pf.extend(n,{errorCode:1902,customeInfo:xf({crt:a},",",":")})),e.sdk.isWaitingIpdxResponse=!1}}})}else e.ipdxReqErrCount++}(e.vv))}}}},e.playHandler=function(){if(e.running){var t=e.mw.currentTime();e.log("video play",t),e.tryToStopPause();var n=e.midrollPoints;if(n&&n.autoChoose){var r=n.nextMidrollPoint;-1!=r&&r<t&&e.disableAutoChooseMidroll("")}null==e.getCurrentAd()&&e.showAndResume()}},e.pauseHandler=function(t){var n=pf.get(t,"data.actionType");(e.log("pause",n),"controls"==n)&&(e.mw.currentTime()&&e.running&&(e.vv.pauseTimes++,e.loadPause(),e.pauseOtherAd()))},e.bindAudioEvt()}},{key:"unbindMWEvent",value:function(){var e="playing pause waiting error willended ended play timeupdate seeked afterSeeked loadstart pausetoplay".split(" "),t=this;e.forEach((function(e){t.mw.off(e,t.handleMwEvt)})),t.off()}},{key:"bindAfterSeekedEvt",value:function(){var e=this;e.hasBindSeeked||(e.hasBindSeeked=!0,e.on("afterSeeked",e.timerHandler))}},{key:"loadPause",value:function(e){var t=this,n=t.getAdBreaksByType(6);(n=pf.map(n,(function(e){return pf.extend({},e,{sequenceId:t.vv.pauseTimes,startTime:t.currentTime})})),F_.empty(n))?t.log("no pause schedule"):(t.log("load pause"),(e=e||{}).requestIndex=e.requestIndex||1,t.vv.pauseRequestTimes++,t.newAdRequest({adBreak:n[0],requestIndex:e.requestIndex,cuepointList:n,needPolicy:!1,from:e.from,type:"pause"},t.vv).play())}},{key:"tryToStopPause",value:function(){pf.remove(this.vv.requests,(function(e){if("pause"==e.type)return e.abort(),!0}))}},{key:"pauseOtherAd",value:function(){pf.each(this.vv.requests,(function(e){pf.each(e.slots,(function(e){pf.each(e.ads,(function(e){pf.includes(["playing","paused"],e.state)&&e.pause()}))}))}))}},{key:"showAndResume",value:function(){var e=this;pf.each(e.vv.requests,(function(e){pf.each(e.slots,(function(e){pf.each(e.ads,(function(e){pf.includes(["playing","paused"],e.state)&&e.resume()}))}))})),pf.each(e.vv.currentOverlayAds,(function(t){e.log("show and resume current overlay",t.creative.templateType,t.orderItemId);var n=t.$adzone;n&&(n.style.display="",n.style.visibility="")}))}},{key:"emitToAd",value:function(e,t,n){e&&(/timeupdate/.test(t)||(this.log("emit",t,e.id),e.emit(t,n)))}},{key:"setCurrentAd",value:function(e,t){var n=this;t=t||{},n.lastNotNullAdId=n.currentAdId?n.currentAdId:n.lastNotNullAdId,n.lastAdId=n.currentAdId,n.currentAdId=e,n.lastAdId!=n.currentAdId&&n.log("current roll changed ",n.lastAdId," => ",n.currentAdId,t.type)}},{key:"getCurrentAd",value:function(){var e=this,t=e.vv.sdk;return e.currentAdId?t.adMap[e.currentAdId]:null}},{key:"removeCurrentAd",value:function(){this.setCurrentAd(null,{type:"remove"})}},{key:"fetchAndPlayPreroll",value:function(){var e=this;e.vv.sdk.initEndTime=e.vv.sdk.requestStartTime=Date.now();var t=e.newAdRequest({needPolicy:!0,cuepointList:[{cuepointType:1},{cuepointType:15}],type:"preroll",vft:e.vv.isPreload?"13":""},e.vv);e.vv.isPreload||t.play()}},{key:"requestSecondaryAd",value:function(){var e=this,t=e.vv.sdk;e.log("try load viewpoint and definitionswitching");var n=e.getAdBreaksByType(8),r=e.getPageAdBreaks(),i=n.concat(r.dsAdBreaks);F_.empty(i)||this.newAdRequest({needPolicy:!1,type:"secondary",cuepointList:i},e.vv).play();var a=e.vv;if("iqiyiw"==t.site&&r.otherPageAdBreaks.length>0){var o=a.getContinuingVVs(),s={continuingVideoPlayedCount:o.length,continuingVideoPlayedDuration:pf.sumBy(o,"videoDuration"),continuingAdPlayedDuration:pf.sumBy(o.concat(a),"adPlayedDurationInView")},c=pf.extend({continuingInfo:s,policy:r.otherPageAdBreaks,adPlayerId:t.adPlayerId},a.initAresParam);!function(e){var t=0;if(window.ares)e();else var n=setInterval((function(){t++,(window.ares||8==t)&&(clearInterval(n),e())}),1e3)}((function(){if(window.ares&&window.ares.initByMars){var n=window.ares;t.hasInitedAres=!0,n.initByMars(c)}else e.log("not find ares and start load ares"),function(e){var t="//static.iqiyi.com/js/common/ares6.min.js?"+Date.now(),n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=!0,n.src=t,n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e())}:n.onload=function(){n.onload=null,e()};r.parentNode.insertBefore(n,r)}((function(){if(window.ares){e.log("load ares success");var n=window.ares;t.hasInitedAres=!0,n.initByMars(c)}}))}))}}},{key:"requestWholeCorner",value:function(){var e=this,t=e.getAdBreaksByType(13);F_.empty(t)||(e.log("start to load whole corner"),this.newAdRequest({adBreak:t,requestIndex:e.vv.requestIndex,cuepointList:t,needPolicy:!1,from:e.vv,type:"whole_corner"},e.vv))}},{key:"newAdRequest",value:function(e,t){var n=new q_(e,t);return this.vv.requests.push(n),n.load(),n}},{key:"initViewPoint",value:function(e){var t=this,n=t.vv.sdk;if(n.isSupportViewpoint){var r=[];if(pf.each(e,(function(e){pf.each(e.ads,(function(e){r.push(e)}))})),!F_.empty(r)){var i=pf.map(r,(function(e){var n=e.slot;t.vv.viewPointAdZoneId=n.adZoneId;var r=e.creative.creativeObject;r.imgUrl=oh(r.imgUrl),r.posterUrl=oh(r.posterUrl);var i=r.posterList||[];return r.posterList=pf.map(i,(function(e){return oh(e)})),e.exportAdObject=pf.extend({startTime:n.startTime,badge:e.badge,adUid:e.id,source:1,orderItemId:e.orderItemId,dspIcon:e.icon},r),e.exportAdObject})),a=pf.uniqBy(i,(function(e){return e.startTime}));F_.empty(a)||t.removeConflictSlotsByViewPoints(r),t.log("notify player init_viewpoint"),n.emit("adplayer_ad_info",{type:"init_viewpoint",data:{ads:i,templateType:"viewPoint",adZoneId:t.vv.viewPointAdZoneId,videoEventId:t.vv.videoEventId,viewPoints:a}})}if(!F_.empty(e)){var o=pf.map(e,(function(e){return{ad:e.ads?e.ads[0]:null,slot:e,startTime:e.startTime,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}));t.log("init viewpoint",o),t.addBreaks(o)}}else t.log("page not support viewpoint",n.isSupportViewpoint)}},{key:"initWholeCorner",value:function(e){var t=this;if(F_.empty(e))t.log("no whole_corner schedule");else{var n=pf.map(e,(function(e){var t=e.ads?e.ads[0]:null;return{ad:t,slot:e,startTime:t&&t.startTime?t.startTime:0,adZoneId:e.adZoneId,cuepointType:e.cuepointType}}));t.log("init whole corner",n),t.addBreaks(n),t.hasWholeCornerAdBreak=!0}}},{key:"completeBriefRoll",value:function(e){var t=this;e?(t.log("complete brief roll",e),t.completeAdBreak(e)):t.log("no brief roll slot")}},{key:"setPolicy",value:function(e){var t=this;t.allAdBreaks=function(e){var t=[];return pf.each(e,(function(e){L_.empty(e.startTimes)?t.push(new R_({cuepointType:e.cuepointType,adZoneId:e.adZoneId,adZoneStyle:e.adZoneStyle})):pf.each(e.startTimes,(function(n,r){t.push(new R_({startTime:n,cuepointType:e.cuepointType,adZoneId:e.adZoneId,sequenceId:r+1,adZoneStyle:e.adZoneStyle,hasLoaded:15==e.cuepointType}))}))})),t}(e),t.adBreaks=t.allAdBreaks.filter((function(e){return e.isMid()})),M_(t.adBreaks),t.log("set policy",t.adBreaks)}},{key:"getAdBreaksByType",value:function(e){return pf.filter(this.allAdBreaks,(function(t){return pf.isMatch(t,{cuepointType:e})}))}},{key:"getPageAdBreaks",value:function(){var e=[],t=[];return pf.each(this.allAdBreaks,(function(n){n&&0==n.cuepointType&&0xe8d4a512a0==n.adZoneId&&t.push(n),n&&0==n.cuepointType&&0xe8d4a512a0!=n.adZoneId&&e.push(n)})),{otherPageAdBreaks:e,dsAdBreaks:t}}},{key:"addBreaks",value:function(e){var t=this;e=pf.map(e,(function(e){return new R_(e)})),pf.each(e,(function(e){e.isValid()&&t.adBreaks.push(e)})),M_(t.adBreaks)}},{key:"completeAdBreak",value:function(e){var t=e.startTime,n=e.cuepointType;pf.each(this.adBreaks,(function(r){r.startTime===t&&r.cuepointType===n&&r.addInfo({slot:e})}))}},{key:"bindAudioEvt",value:function(){var e=this;e.on("pausetoplay",(function(){e.log("on pausetoplay");var t=e.vv&&e.vv.audioPause;t&&t.template.closeAudioPause()}))}},{key:"startTimer",value:function(){var e=this;e.running||(e.running=!0,e.log("start schedule timer"),e.on("timeupdate",e.timerHandler),e.on("seeked",e.timerHandler),e.on("play",e.playHandler),e.on("pause",e.pauseHandler))}},{key:"stopTimer",value:function(){var e=this;e.running&&(e.log("stop schedule timer"),e.off("timeupdate",e.timerHandler),e.off("seeked",e.timerHandler),e.off("play",e.playHandler),e.off("pause",e.pauseHandler),e.running=!1)}},{key:"updateVideoTime",value:function(){var e=this;0==e.currentTime%10&&e.log("update video time",e.currentTime),e.emit("videotime:"+e.currentTime),e.lastTime=e.currentTime,e.adBreaksTimeHandler()}},{key:"adBreaksTimeHandler",value:function(){var e=this,t=[],n=[];pf.each(e.adBreaks,(function(r){"banned"!==r.state&&(r.isLoaded()||r.canLoad(e.currentTime)&&(e.log("adBreak canLoad",r),t.push(r),r.hasPlayed=!1),r.isLoaded()&&(e.currentTime==r.startTime||13===r.cuepointType&&e.currentTime>r.startTime)&&(r.hasPlayed||(n.push(r),r.hasPlayed=!0)))}));var r=C_(t),i=C_(n);r.length!=t.length&&e.log("adbreaks to load conflict",r,t),i.length!=n.length&&e.log("adbreaks to play conflict",i,n),pf.each(r,(function(t){e.log("adbreak load and fill",t);var n=t.cuepointType;t.request=e.newAdRequest({needPolicy:!1,cuepointList:[t],adBreak:t,vft:"",type:r_[n]||n},e.vv)})),pf.each(i,(function(t){var n=t.request,r=t.ad;e.log("adbreak to play",n,t),n?n.play():r?(r.slot.show.request.reset(),r.play()):8!=t.cuepointType&&13!=t.cuepointType&&15!=t.cuepointType||!t.slot||t.slot.complete()}))}},{key:"onUserSeeked",value:function(e){var t=this,n=t.currentTime;t.log("onUserSeeked",e),e.beforeIsAD||pf.each(t.adBreaks,(function(r){r.startTime>n&&13!=r.cuepointType&&(r.isLoaded()&&r.hasPlayed||15==r.cuepointType&&t.currentTime<t.lastTime&&t.lastTime>r.startTime&&t.currentTime<r.startTime&&!e.isAD)&&(r.abort(),r.refresh())}))}},{key:"setAutoChooseMidRoll",value:function(e){var t=this;e&&F_.bool(e.autoChoose)&&(t.log("",e),t.midrollPoints=e,e.autoChoose?t.enableAutoChooseMidroll(e.nextMidroll):t.disableAutoChooseMidroll(""))}},{key:"enableAutoChooseMidroll",value:function(e){var t=this;t.currentTime>e?t.log(""):(t.log("",e),pf.each(t.adBreaks,(function(t){2==t.cuepointType&&(t.startTime==e?t.state=null:t.state="banned")})))}},{key:"disableAutoChooseMidroll",value:function(e){var t=this;!1!==t.midrollPoints.autoChoose&&(t.log("",e,t.midrollPoints),t.midrollPoints={autoChoose:!1},pf.each(t.adBreaks,(function(e){2==e.cuepointType&&(e.state=null)})))}},{key:"ban",value:function(e){var t=pf.filter(this.adBreaks,(function(t){return pf.isMatch(t,e)}));pf.each(t,(function(e){e.state="banned"})),this.log("ban ad breaks",e,t)}},{key:"removeConflictSlotsByViewPoints",value:function(e){var t=this,n=t.adBreaks;if(n&&e){var r=pf.map(e,(function(e){return e.slot.startTime}));t.adBreaks=pf.filter(n,(function(e){var n=pf.includes([4,9,10,11],e.cuepointType),i=pf.includes(r,e.startTime);return!(n&&i)||(t.log("remove conflict points",{startTime:e.startTime,cuepointType:e.cuepointType}),!1)}))}}},{key:"afterUserSeeked",value:function(e){e.beforeIsAD&&this.afterUserSeekedInOriginalRoll(e)}},{key:"afterUserSeekedInOriginalRoll",value:function(e){var t=this,n=t.getCurrentAd()||null,r=Boolean(e.isFusionMode)||!1,i=(r?Number(e.current):t.currentTime)||0,a=Boolean(e.beforeIsAD)||!1,o=Number(e.beforeSeek)||0,s=Boolean(e.isAD)||!1,c=(e.referrerGas||{}).id,u={isFusionMode:r,beforeIsAD:a,beforeSeek:o,referrerGasId:c,afterIsAD:s,afterSeek:i,ad:n||null};if(r){var d=t.vv.sdk,l=c||t.lastAdId||t.lastNotNullAdId,f=d.adMap[l]||{},h=f.slot||null;if(h&&h.isSeekableOriginalSlot()){t.log("after seeked in origin midroll of fusion mode",u),t.seekHandlerInFusionMode(u);var p=t.calcBeforeSeekOfs(u),_=xf({ofs:Math.round(p)},",",":");_h(f,"seek",_),f.isSeeked=!0}}else if(n&&n.isSeekableOriginalRoll()){t.log("after seeked in midroll of split mode",u),t.seekHandlerInSplitMode(u);var v=xf({ofs:Math.round(o)},",",":");_h(n,"seek",v),n.isSeeked=!0}}},{key:"seekHandlerInSplitMode",value:function(e){var t=e.ad;if(t){var n=Math.round(e.afterSeek),r=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.afterIsAD,i=e.afterSeek,a=n<i,o=t&&r&&!a;if(t&&r&&a)return"forwardInAd";if(o)return"backwardInAd"}(e);"forwardInAd"!==r&&"backwardInAd"!==r||(this.log("seek movement in original midroll",r),t.emit("progressReseted",n))}}},{key:"seekHandlerInFusionMode",value:function(e){var t=this,n=function(e){var t=e.beforeIsAD,n=e.beforeSeek,r=e.referrerGasId,i=e.afterIsAD,a=e.afterSeek,o=(e.ad||{}).id,s=t&&!i,c=t&&i,u=F_.empty(r),d=F_.empty(o),l=r===o,f=n<a;if(s)return"outofAd";if(c&&l&&!u&&!d)return"inSameAd";if(c&&!l&&!u&&!d&&f)return"forwardCrossAds";if(c&&!l&&!u&&!d&&!f)return"backwardCrossAds"}(e),r=e.referrerGasId,i=e.afterSeek,a=e.ad,o=t.vv.sdk,s=r||t.lastAdId||t.lastNotNullAdId,c=o.adMap[s]||{};if(t.log("seek handler in fusion mode type",n),"outofAd"===n){c.notAutoPlayNext=!0;var u=c.duration||15;return c.emit("progressReseted",u,!0),void c.slot.complete()}if("inSameAd"!==n){if("forwardCrossAds"===n||"backwardCrossAds"===n){c.notAutoPlayNext=!0;var d=c.duration||15,l=this.calcOfsInFusionMode(i,a);c.emit("progressReseted",d),a.template.hasPlaying=!1,a.emit("progressReseted",l)}}else{var f=this.calcOfsInFusionMode(i,a);a.emit("progressReseted",f)}}},{key:"calcBeforeSeekOfs",value:function(e){var t=e.isFusionMode,n=t.isFusionMode,r=t.beforeSeek,i=t.beforeAd;return n?i?this.calcOfsInFusionMode(r,i):0:r}},{key:"calcOfsInFusionMode",value:function(e,t){var n=t.getParentByName("slot")||{},r=e-n.startTime-n.calcRollDurationBefore(t);return r>0?r:0}},{key:"bindVideoTimeEvt",value:function(e,t){this.on("videotime:"+e,t)}}]),n}(Zl);var j_=function(){function e(t){i()(this,e),this.log=t.sdk.logger.getLogger("collisionDetection"),this.vv=t,this.needDetectingList=[],this.wholeCorner={}}return o()(e,[{key:"addAdIntoCollisingList",value:function(e){if(e.id){var t=V_(this.needDetectingList,e.id);-1==t?this.needDetectingList.push(e):this.needDetectingList[t]=e,this.log("wholecorner after addAd the list",this.needDetectingList)}}},{key:"removeAd",value:function(e){var t=V_(this.needDetectingList,e);-1!=t&&this.needDetectingList.splice(t,1),this.log("wholecorner after removeAd the list",this.needDetectingList)}},{key:"wholeCornerCollidedWithOriginalList",value:function(){var e=this.wholeCorner;if(this.wholeCornerIsValid()){var t=this.isCollidedWithOriginalList(e);return this.log("wholecorner collision result",t),t}return this.log("wholecorner does not exist"),!1}},{key:"isCollidedWithOriginalList",value:function(e){for(var t=this.needDetectingList,n=!1,r=0;r<t.length;r++)if(this.checkCollision(t[r],e)){n=!0;break}return this.log("wholecorner happen collising? ",n?"yes":"no"),n}},{key:"notifyWholeCornerToShow",value:function(){var e=this.wholeCorner;if(e&&e.id&&!e.showing&&!this.wholeCornerCollidedWithOriginalList()){var t=this.vv.wholeCorner.$adzone;if(!t)return;if(e.timer&&e.timer.running&&!e.timerStatus.display)return;e.timer&&!e.timer.running&&e.timer.start(),this.log("notify whole corner to show"),t.style.display="",t.style.visibility="",this.wholeCorner.showing=!0}}},{key:"notifyWholeCornerToHide",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this.wholeCorner,n=t&&t.id&&t.showing,r=this.wholeCornerCollidedWithOriginalList(),i=r||e.forceHide;if(n&&i){var a=this.vv.wholeCorner.$adzone;if(!a)return;if(t.timer&&!t.timer.running)return;t.timer&&t.timer.running&&r&&t.timer.stop(),this.log("notify whole corner to hide"),a.style.display="none",a.style.visibility="hidden",this.wholeCorner.showing=!1}}},{key:"setWholeCorner",value:function(e){this.wholeCorner=e}},{key:"getWholeCorner",value:function(){return this.wholeCorner}},{key:"wholeCornerIsValid",value:function(){return!(!this.wholeCorner||!this.wholeCorner.id)}},{key:"checkCollision",value:function(e,t){if(e.willDefinitelyCollide)return!0;var n=e.y,r=e.x,i=parseFloat(e.x)+parseFloat(e.width),a=parseFloat(e.y)+parseFloat(e.height),o=t.y,s=t.x,c=parseFloat(t.x)+parseFloat(t.width),u=parseFloat(t.y)+parseFloat(t.height);return!(a<o||r>c||n>u||i<s)}}]),e}();function V_(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r].id==t){n=r;break}return n}function W_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var H_="videoEventId channelId episodeId albumId videoDefinition videoDuration autoload playSource isPreload isSupportViewpoint couponCode couponVer isAutoMapPlayerId vvId".split(" "),z_=function(e){d()(n,e);var t=W_(n);function n(e,r){var a;i()(this,n),a=t.call(this,"vv");var o=c()(a);return o.setParent(e),o.mw=e.videoMidware,o.state="idle",o.initAresParam=r,o.requests=[],o.prerollOrderItemIds="",o.videoInfo={},o.lastRollCompleteTime=NaN,o.lastMidrollRequestTime=0,o.midrollPointsPlayedInView=0,o.adPlayedDurationInView=0,o.currentOverlayAds=[],o.pauseTimes=0,o.pauseRequestTimes=0,o.isBusy=!0,o.isAutoMapPlayerId=e.rawAdPlayerId!=e.adPlayerId,o.log=e.logger.getLogger("vv:"+e.videoEventId),o.ipdxReqErrCount=0,o.init(r),a}return o()(n,[{key:"init",value:function(e){var t=this,n=t.sdk;(e=pf.extend({playSource:0,isPreload:!1,isAutoMapPlayerId:n.rawAdPlayerId!=n.adPlayerId},e)).vvId=function(e){var t=[e.episodeId,e.uaaUserId,Date.now(),Math.random()];return Eh(t.join(""))}(e);var r=pf.only(e,H_);t.log("vv init:",r),pf.extend(t,r),ph(t,{pingbackType:"visit",subtype:"success",location:pf.get(window,"location.href"),customInfo:t.sdk.script}),t.isPreload&&t.sdk.currentVV&&(t.continueFromVV=t.sdk.currentVV),t.schedule=new U_(t),t.adCollisionDetection=new j_(t)}},{key:"startVideo",value:function(e){var t=this;if(!0!==t.isVideoPlaying&&"ended"!=t.state){var n={rollType:e,videoEventId:t.videoEventId},r="roll-ended";t.log(r,n),t.sdk.emit(r,n),t.onNetworkFree(),t.schedule&&!t.schedule.hasWholeCornerAdBreak&&t.schedule.requestWholeCorner(),t.schedule&&t.schedule.startTimer(),t.isVideoPlaying=!0,t.sdk.setViewController((function(){t.sdk.rollView.removeOptions("video start")}))}}},{key:"stopVideo",value:function(e){var t=this;if(!1!==t.isVideoPlaying){var n={rollType:e,videoEventId:t.videoEventId},r="roll-play";t.log(r,n),t.sdk.emit(r,n),t.schedule&&t.schedule.stopTimer(),t.sdk.setViewController((function(){t.sdk.rollView.midrollTip.end()})),t.isVideoPlaying=!1}}},{key:"isCurrentVV",value:function(){return this==this.sdk.currentVV}},{key:"exitFullscreen",value:function(){var e=this.mw;e.isWebFullScreen()&&(this.log(""),e.webfullscreentoggle()),e.isFullScreen()&&(this.log(""),e.fullscreentoggle())}},{key:"disableVideo",value:function(){this.log("disable video"),this.schedule.enabled=!1;var e=this.sdk;e.setViewController((function(){e.rollView&&e.rollView.showMask()})),this.mw.pause()}},{key:"enableVideo",value:function(){this.log("enable video"),this.schedule.enabled=!0,this.mw.play();var e=this.sdk;e.rollView&&e.rollView.hideMask()}},{key:"onNetworkFree",value:function(){var e=this;e.isBusy&&(e.log("networt free"),e.isBusy=!1,e.schedule.requestSecondaryAd())}},{key:"abort",value:function(){var e=this;if("ended"!=e.state){e.log("abort"),e.state="ended",e.schedule&&(e.schedule.stopTimer(),e.schedule.unbindMWEvent());var t=e.sdk;e.log("notify player clear viewpoint"),t.emit("adplayer_ad_info",{type:"clear_viewpoint",data:{templateType:"viewPoint",adZoneId:e.viewPointAdZoneId,videoEventId:e.videoEventId}}),pf.each(e.requests,(function(e){e.abort()})),this.stopBlackScreen()}}},{key:"resize",value:function(){pf.each(this.requests,(function(e){"ended"!=e.state&&pf.each(e.slots,(function(e){"ended"!=e.state&&pf.each(e.ads,(function(e){"ended"!=e.state&&e.resize()}))}))}))}},{key:"isSportsVideo",value:function(){return this.videoInfo&&32==this.videoInfo.videoType}},{key:"getContinuingVVs",value:function(){for(var e=[],t=this.continueFromVV;t;)e.push(t),t=t.continueFromVV;return e}},{key:"startLoadVideo",value:function(e){var t=this;if("ended"!=t.state){e=e||{};var n="roll-load-finish",r=t.sdk,i={rollType:e.rollType,reason:e.reason,videoEventId:t.getVal("videoEventId")};"preroll"==e.rollType&&pf.extend(i,{showStartTime:r.showTime.start,showEndTime:r.showTime.end,showTime:r.showTime.end-r.showTime.start,requestStartTime:r.requestStartTime,requestEndTime:r.requestEndTime,requestTime:r.requestEndTime-r.requestStartTime,initStartTime:r.initStartTime,initEndTime:r.initEndTime,initTime:r.initEndTime-r.initStartTime,loadStartTime:r.loadStartTime,loadEndTime:r.loadEndTime,loadTime:r.loadEndTime-r.loadStartTime}),t.log(n,i),r.emit(n,i)}}},{key:"stopBlackScreen",value:function(){var e=this.sdk;e.setViewController((function(){return e.viewController.blackscreen.stopBlackScreen()}))}}]),n}(gf);var Y_,G_=n(424),Q_="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" "),K_="color:inherit",$_=0,Z_={},X_=function(){};window.console&&(X_=function(e,t){var n=Date.now(),r=n-(Y_||n),i="color:"+function(e){Z_[e]||(Z_[e]=Q_[$_++%Q_.length]);return Z_[e]}(e.name);Y_=n;var a="%c"+(t.prefix+e.name)+"%c",o=[null,i,K_];pf.each(e.data,(function(e){o.push(e),a+=" %o"})),o.push(i),a+="%c +"+r+"ms",o[0]=a,function(e,t){Function.prototype.apply.call(console[e],console,t)}("log",o)});var J_=X_,ev=pf.is,tv={level:0,MAX_LOG_LEN:3e3,debugKey:"debug",defaultLevelName:"log",defaultName:"default",_name:"",prefix:"",outputer:J_},nv=function(){function e(t){i()(this,e);var n=this;n.key=t,n.logger=[],n.logs=[],pf.extend(n,tv),n.init()}return o()(e,[{key:"init",value:function(){var e,t=this;if(t.prefix=t.key+":",t.key)try{e=localStorage[t.key]}catch(n){}t._name=e,t.pattern=function(e){var t=[],n=[];e&&ev.string(e)&&pf.each(e.split(/[\s,]+/),(function(e){"-"===(e=e.replace(/\*/g,".*?")).charAt(0)?t.push(new RegExp("^"+pf.slice(e,1)+"$")):n.push(new RegExp("^"+e+"$"))}));return{skips:t,names:n}}(e),t.enabled=t.isNameMatch(e)}},{key:"isNameMatch",value:function(e){var t=this.pattern;if(!e)return!1;function n(t){return t.test(e)}return!pf.some(t.skips,n)&&!!pf.some(t.names,n)}},{key:"getLogger",value:function(e){var t=this;e=e||t.defaultName;var n=t.logger[e];return n||(n=t.logger[e]=function(){t.print(e,arguments)}),n}},{key:"print",value:function(e,t){var n=this,r={name:e,key:n.key,data:t};n.logFilter(r,n.lastLog),n.enabled&&n.outputer(r,n)}},{key:"logFilter",value:function(e){e.time=Date.now(),this.saveLog(e)}},{key:"saveLog",value:function(e){var t=this;t.logs.push(e),t.logs.length>t.MAX_LOG_LEN&&t.logs.shift()}}]),e}();function rv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var iv=G_.version+"-mars",av="qc_100001_100226",ov=function(e){d()(n,e);var t=rv(n);function n(e){var r;return i()(this,n),(r=t.call(this,"sdk")).playerId=e.playerId||"noPlayerId-"+Date.now(),r.script=pf.get(window,"document.currentScript.src"),r.vvCnt=0,r.vvs=[],r.adPlayedDurationInDay=0,r.version=r.sdkVersion=iv,r.adMap={},r.logger=new nv("mars-"+r.playerId),r.debug=r.logger.getLogger("sdk"),r}return o()(n,[{key:"init",value:function(e){this.initStartTime=Date.now(),this.debug("sdk init",e,iv),(e=pf.extend({},e)).episodeId=e.episodeId||e.tvId,e.isVIP=e.isVIP||!1,e.timePoint=e.timePoint||0,e.site=e.site||"iqiyiw",pf.extend(this,e),this.locale&&(pf.includes(["tw_t","cn_t"],this.locale)?this.locale="tw":this.locale="cn"),pf.includes(this.locale,"tw")&&(this.adPlayerId=this.adPlayerId||"qc_105136_100610",this.debug("tw cid",this.adPlayerId));var t,n=this.adPlayerId;this.adPlayerId=function(e){(function(e){return!!pf.startsWith(e,"qc_")&&e.length=="qc_100001_100000".length})(e)||(e=av);return e}(n),e.isPreload?this.rawAdPlayerId=this.adPlayerId:this.rawAdPlayerId=this.rawAdPlayerId||n,this.uaaUserId=this.uaaUserId||(t=T.a.get("QC005"),Jf.empty(t)&&(t=T.a.get("QC006")),t||"");var r=new z_(this,e);this.vvCnt++,e.isPreload?this.preloadVV=r:(this.switchView(),this.currentVV=r),this.vvs.push(r),this.bindEvent()}},{key:"switchView",value:function(e){var t=this;this.debug("switch view",e||"normal");var n="";(t&&t.currentVV&&(n=t.currentVV.videoEventId),t.setViewController((function(){t.rollView.midrollTip.end()})),pf.remove(t.vvs,(function(e){return e.abort(),!0})),t.currentVV=null,t.preloadVV=null,t.videoMidware&&t.videoMidware.play(),t.hasInitedAres&&n)&&window.ares.stop({videoEventId:n})}},{key:"playPreload",value:function(){var e=this,t=this;this.debug("play preload");var n=t.currentVV.videoEventId;(pf.remove(t.vvs,(function(n){return n==t.currentVV&&(e.debug("abort vv"),n.abort(),t.currentVV=null,t.videoMidware.play(),e.debug("remove current vv"),!0)})),t.hasInitedAres)&&window.ares.stop({videoEventId:n});if(this.debug("play preload vv"),t.preloadVV){t.currentVV=t.preloadVV,t.preloadVV=null;var r=t.currentVV.requests[0];r&&r.play()}}},{key:"bindEvent",value:function(){var e=this,t=this;t.on("video-play",(function(){e.debug("player notify video play"),e.setViewController()})),t.binResize(t.videoMidware.video()),t.on("click",(function(n){if(e.debug("click",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];i&&("viewpoint"==n.type?(i.emit("click"),ph(i,{pingbackType:"statistics",subtype:"click",customInfo:"viewPointSidebar"})):"definitionswitching"==n.type&&i.emit("clickAndOpen"))}})),t.on("impression",(function(n){if(e.debug("impression",n),n){var r=n.data.id||n.data.adUid,i=t.adMap[r];if(i)if("viewpoint"==n.type){if(!i.hasSidebarImpressioned)i.hasSidebarImpressioned=!0,ph(i,{pingbackType:"statistics",subtype:"impression",customInfo:"viewPointSidebar"}),"tips"!=i.creative.creativeObject.impressionArea&&i.emit("impression")}else"definitionswitching"==n.type&&i.emit("impression")}})),t.on("impressionAdZone",(function(e){this.debug("impressionAdZone",e);var n=e.data.adZoneId,r=t.currentVV;r&&n&&pf.each(r.requests,(function(e){pf.each(e.slots,(function(e){e.adZoneId==n&&e.sendEmptyTrackingBeforeTimeSlice(Infinity)}))}))}))}},{key:"binResize",value:function(e){var t=this,n=new hp(100,50),r=e.offsetWidth;function i(){var n=e.offsetWidth;n==r||(t.debug("video resize",r,"==>",n),t.resize(),r=n)}n.on("timer",i),window.addEventListener("resize",(function(){i(),n.reset(),n.start()}))}},{key:"getUser",value:function(){var e=this,t=pf.only(e,"isVIP passportId passportCookie uaaUserId cupidUserId");if(e.videoMidware){var n=e.videoMidware.getUserInfo();pf.extend(t,n)}return t||{}}},{key:"updateUser",value:function(){var e=this.getUser();return this.debug("update user info",e),pf.extend(this,e),e}},{key:"loadVC",value:function(){var e,t=this,n=this;if(n.memoryLoadVC)return n.memoryLoadVC;if(window.Mars_V)e=Promise.resolve(window.Mars_V);else{var r="//static.iqiyi.com/js/common/mars_v.js?"+Date.now(),i=document.createElement("script"),a=document.getElementsByTagName("script")[0];i.async=!0,e=new Promise((function(e){t.debug("load view controller"),i.src=r,i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,e())}:i.onload=function(){i.onload=null,e()},a.parentNode.insertBefore(i,a)}))}return n.memoryLoadVC=n.memoryLoadVC||e,n.memoryLoadVC}},{key:"setViewController",value:function(e){var t=this;t.viewController&&e?e():t.loadVC().then((function(){t.viewController||(t.ajax=Xf,t.viewController=window.Mars_V.init(t),t.rollView=t.viewController.rollView),e&&e()}))}},{key:"resize",value:function(){this.currentVV&&this.currentVV.resize()}},{key:"destroy",value:function(){var e=this;e.switchView("destroy"),e=null}},{key:"fetchLogs",value:function(){this.debug("fetch logs",this.logger.logs.length);var e,t,n=this.logger.logs.slice(-500);return e="mars",t=n,pf.map(t,(function(t){var n=["["+e+"]["+(t.key||"")+"]["+t.name+"]"];return pf.each(t.data,(function(e){if("object"==oe()(e))try{e=JSON.stringify(e)}catch(t){}n.push(String(e))})),n.join(" ")})).join("\r\n")}}]),n}(gf);var sv={init:function(e){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=new ov(e);return window.Mars[t.playerId]=t,t}(e)}};"undefined"!=typeof window&&(window.Mars?sv=window.Mars:window.Mars=sv);var cv=sv,uv=n(327),dv=n(34),lv=n(6),fv=n(312),hv=n(313);function pv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var _v,vv,gv,yv=new E.a("Wonder.Data.PC"),mv=function(e){d()(n,e);var t=pv(n);function n(e,r){var a;return i()(this,n),a=t.call(this),e.playerType="wonder",a.adapter=r,a.ad=cv.init({playerId:e.parentId}),e.tvid=Object(j.a)(e.tvid),a.engine=new $l(e,c()(a)),a.lang=fv.a,a.engine.i18n.isTraditionalChinese()&&(a.lang=hv.a),a.view=new uv.a(e,c()(a)),a.view.setting?a.view.init():a.view.once("viewsetdone",(function(){a.view.init()})),S.a.init(),a.initEvent(),a}return o()(n,[{key:"initEvent",value:function(){var e=this.engine,t=this.adapter,n=!1;function r(e,n){yv.log("adapter emit: ".concat(e)+(e===dv.a.QYPLAYER_NOTIFY_TIMEUPDATE?"-".concat(n.current):"")),t.fire({type:e,data:n})}function i(e,n){(n=n||{}).state=e.toLocaleLowerCase(),yv.info("state change: "+n.state),t.fire({type:dv.a.QYPLAYER_STATE_CHANGE,data:n})}e.on(b.a.NTF_StatusChanged,(function(n){switch(n.state){case b.a.Status_AdStartPlay:i(dv.a.QYPLAYER_STATUS_AD_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case b.a.Status_AdPlaying:i(dv.a.QYPLAYER_STATUS_AD_PLAYING,n);break;case b.a.Status_AdPaused:i(dv.a.QYPLAYER_STATUS_AD_PAUSED,n);break;case b.a.Status_Loadstart:r(dv.a.QYPLAYER_H5_VIDEO_LOADSTART);break;case b.a.Status_LoadedMetaData:r(dv.a.QYPLAYER_H5_VIDEO_LOADEDMETADATA);break;case b.a.Status_StartPlay:i(dv.a.QYPLAYER_STATUS_START_PLAY,n),t.loadSkin({isMini:e.isMini});break;case b.a.Status_Waiting:e.isSeeking()||i(dv.a.QYPLAYER_STATUS_WAITING,n);break;case b.a.Status_Paused:i(dv.a.QYPLAYER_STATUS_PAUSED,n);break;case b.a.Status_Playing:i(dv.a.QYPLAYER_STATUS_PLAYING,n);break;case b.a.Status_Stoped:i(dv.a.QYPLAYER_STATUS_STOPED,n);break;case b.a.Status_End_Play:i(dv.a.QYPLAYER_STATUS_END_PLAY,n);break;case b.a.Status_PlayError:i(dv.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini})}})).on(b.a.NTF_VRSReady,(function(e){r(dv.a.QYPLAYER_STATUS_DATA_READY,e.data)})).on(b.a.NTF_CanPlayThrough,(function(){})).on(b.a.NTF_VolumeChanged,(function(e){n&&r(dv.a.QYPLAYER_H5_VOLUME_CHANGED,e),n=!0})).on(b.a.NTF_DurationChanged,(function(e){r(dv.a.QYPLAYER_H5_DURATION_CHANGED,e)})).on(b.a.NTF_VideoChanged,(function(t){e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId,t.isIVSubSwitch=e.isIVSubSwitch),r(dv.a.QYPLAYER_VIDEO_CHANGE,t)})).on(b.a.NTF_VideoChange,(function(t){t.playerVersion=nl.a,e.isInteractVideo&&(t.isInteractVideo=e.isInteractVideo,t.uniqueId=e.iv_state.uniqueId),r(dv.a.QYPLAYER_VID_CHANGE,t)})).on(b.a.NTF_FollowUpNextLoad,(function(e){r(dv.a.QYPLAYER_FOLLOW_UPNEXT_LOAD,e)})).on(b.a.NTF_AD_Start,(function(e){r(dv.a.QYPLAYER_NOTIFY_AD_START,e)})).on(b.a.NTF_AD_End,(function(e){r(dv.a.QYPLAYER_NOTIFY_AD_END,e)})).on(b.a.Status_AresNoticeInfo,(function(e){r(e.type,e.data)})).on(b.a.NTF_TimeUpdate,(function(e){r(dv.a.QYPLAYER_NOTIFY_TIMEUPDATE,e)})).on(b.a.NTF_Seeking,(function(e){r(dv.a.QYPLAYER_STATUS_SEEKING,e)})).on(b.a.NTF_NeedUserGesture4Playback,(function(n){yv.info(", "),e.needUserGesture4Playback=!0,t.loadSkin({isMini:e.isMini}),r(dv.a.QYPLAYER_NOTIFY_NeedUserGesture4Playback,n)})).on(b.a.NTF_Error,(function(n){i(dv.a.QYPLAYER_STATUS_ERROR,n),t.loadSkin({isMini:e.isMini}),"A00011"===n.code&&r(dv.a.QYPLAYER_RECHARGE,{code:"Q00310",from:""})})).on(b.a.NTF_Recharge,(function(n){t.loadSkin({isMini:e.isMini}),r(dv.a.QYPLAYER_RECHARGE,n)})).on(b.a.NTF_BuyPlay,(function(e){r(dv.a.QYPLAYER_BuyPlay,e)})).on(b.a.NTF_AD_BLOCK,(function(e){r(dv.a.QYPLAYER_NOTIFY_AD_BLOCK,e)})),this.view.on(dv.a.QYPLAYER_FIND_GOODS,(function(e){r(dv.a.QYPLAYER_FIND_GOODS,e)})).on(dv.a.QYPLAYER_DOSOMETHING,(function(e){r(dv.a.QYPLAYER_DOSOMETHING,e)})).on(lv.a.NTF_SHOW_LOGIN_PANEL,(function(e){r(dv.a.QYPLAYER_SHOW_LOGIN_PANEL,e)})).on(lv.a.NTF_WebFullScreen_BeforeChange,(function(e){r(dv.a.QYPLAYER_WEBFULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(lv.a.NTF_WebFullScreen_AfterChange,(function(e){var t="enter"===e;r(dv.a.QYPLAYER_WEBFULLSCREEN_AFTER_CHANGE,t)})).on(lv.a.NTF_FullScreen_BeforeChange,(function(e){r(dv.a.QYPLAYER_FULLSCREEN_BEFORE_CHANGE,"enter"===e)})).on(lv.a.NTF_FullScreen_AfterChange,(function(e){var t="enter"===e;r(dv.a.QYPLAYER_FULLSCREEN_AFTER_CHANGE,t)})).on(lv.a.NTF_ScoreTask_ScoreChange,(function(){r(dv.a.QYPLAYER_NOTIFY_SCORECHANGE)})).on(lv.a.NTF_FeedBack_Show,(function(){r(dv.a.QYPLAYER_NOTIFY_FEEDBACK_SHOW)})).on(lv.a.NTF_FeedBack_Hide,(function(){r(dv.a.QYPLAYER_NOTIFY_FEEDBACK_HIDE)})).on(lv.a.NTF_FeedBack_Panel_show,(function(e){r(dv.a.QYPLAYER_NOTIFY_FEEDBACK_PANEL_SHOW,e)})).on(lv.a.NTF_USER_SEEK,(function(){r(dv.a.QYPLAYER_NOTIFY_USER_SEEK)})).on(lv.a.NTF_AIView_AIResult,(function(e){r(dv.a.QYPLAYER_NOTIFY_AI_STAR_INFO,e)})).on(lv.a.NTF_AIView_AIFeedback,(function(e){r(dv.a.QYPLAYER_NOTIFY_AI_FEEDBACK,e)})).on(lv.a.NTF_AIView_CLOSE,(function(e){r(dv.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(lv.a.NTF_AIView_BAIKE_CLOSE,(function(e){r(dv.a.QYPLAYER_NOTIFY_AI_STAR_CLOSE,e)})).on(lv.a.NTF_SHOW_VIDEOLIST,(function(e){r(dv.a.QYPLAYER_NOTIFY_SHOW_VIDEOLIST,e)})).on(lv.a.NTF_IV_INTERACTIONSTART,(function(e){r(dv.a.QYPLAYER_NOTIFY_INTERACTION_START,e)})).on(lv.a.NTF_IV_INTERACTIONEND,(function(e){r(dv.a.QYPLAYER_NOTIFY_INTERACTION_END,e)}))}},{key:"addView",value:function(e){this.view.addView(e)}},{key:"load",value:function(e){yv.info("js call func load( ), data = "+e),this.engine.load(e)}},{key:"destroy",value:function(){this.engine.destroy(),this.view.destroy()}},{key:"play",value:function(e){yv.info("js call func play()");var t=!1;e&&e.withUserGesture&&(t=!0),this.engine.play(t)}},{key:"resume",value:function(){yv.info("js call func resume"),this.engine.play()}},{key:"replay",value:function(){yv.info("js call func replay"),this.engine.replay()}},{key:"pause",value:function(){yv.info("js call func pause , patch = ".concat(this.engine.isPatch(),", switching=").concat(this.engine.playproxy._videoSwitching)),this.engine.isPatch()||(this.engine.playproxy._videoSwitching?this.engine.pause(!0,!0):this.engine.pause())}},{key:"seek",value:function(e){yv.info("js call func seek, time = "+e),this.engine.seek(e)}},{key:"seekN",value:function(e){if("number"==typeof e&&isFinite(e)){yv.info("js call func seekN, time = "+e);var t=this.engine.getCurrenttime();this.engine.seek(t+e)}}},{key:"setPlayPingbackInfo",value:function(e){yv.info("js call func setPlayPingbackInfo, param = "+JSON.stringify(e)),this.engine.setPlayPingbackInfo(e)}},{key:"stop",value:function(){yv.info("js call func stop()"),this.engine.stop()}},{key:"getMuted",value:function(){return this.engine.getMuted()}},{key:"isPaused",value:function(){return this.engine.isPaused()}},{key:"setMuted",value:function(e){this.engine.setMuted(e)}},{key:"getPlayInfo",value:function(e){var t=this.engine,n=this.view;t.getPlayInfo((function(r){var i={};i.tvid=r.tvid,i.vid=r.vid,i.cid=r.cid,i.albumId=r.albumId,i.categoryId=r.cid,i.currentTime=t.getCurrenttime(),i.totalDuration=1e3*t.getDuration(),i.bufferTime=t.getBufferTime(),i.currentDefination=r.rate,i.currentTrack="",i.currentStatus=t.getCurrStatus(),i.isTryWatch=t.isTryWatch()?"1":"0",i.isPause=t.isPaused()?"1":"0";var a=n.getRealArea();i.width=parseInt(a.width),i.height=parseInt(a.height),i.vipTypes=t.getVipTypes(),i.playerVersion=r.playerVersion,i.ctt=t.getMovieInfo().ctt,e&&"function"==typeof e&&e(i)}))}},{key:"getVideoInfo",value:function(e){this.engine.getVideoInfo(e)}},{key:"setQiyiUserLogin",value:function(e){yv.info("js call func setQiyiUserLogin(), param = "+E.a.stringify(e)),this.view.setQiyiUserLogin(e)}},{key:"switchVideo",value:function(e){yv.info("js call func switchVideo(), param = "+E.a.stringify(e)),this.engine.switchVideo(e)}},{key:"switchNextVideo",value:function(){yv.info("js call func switchNextVideo()"),this.view.switchNextVideo()}},{key:"switchPreVideo",value:function(){yv.info("js call func switchPreVideo()"),this.view.switchPreVideo()}},{key:"addVideoList",value:function(e){yv.info("js call func addVideoList( )"),this.view.addVideoList(e)}},{key:"removeVideoList",value:function(e){yv.info("js call func removeVideoList( ), data = "+e),this.view.removeVideoList(e)}},{key:"setSmallWindowMode",value:function(e){this.view.setSmallWindowMode(e)}},{key:"jsNotifyAdManager",value:function(e){this.engine.jsNotifyAdManager(e)}},{key:"getQiyiPlayerLog",value:function(e){try{this["package"].getQiyiPlayerLog(e)}catch(t){}}},{key:"clearBanWord",value:function(){this.view.emit(lv.a.NTF_Barrage_ClearBanWord)}},{key:"addBanWord",value:function(e){this.view.emit(lv.a.NTF_Barrage_AddBanWord,e)}},{key:"removeBanWord",value:function(e){this.view.emit(lv.a.NTF_Barrage_RemoveBanWord,e)}},{key:"notyfyADInfo",value:function(e){this.engine.notyfyADInfo(e)}},{key:"setRightBarStatus",value:function(e){e&&e.type&&(yv.info("js call func setRightBarStatus, param = "+E.a.stringify(e)),this.view.setRightBarStatus(e))}},{key:"setExpandScreenStatus",value:function(e){e&&this.view.emit(lv.a.NTF_EXPANDSCREEN_STATUS_CHANGED,e)}},{key:"getQiyiPlayerInfo",value:function(e){this.getPlayInfo(e)}},{key:"setPlayerWebFullScreen",value:function(e){this.view.emit(lv.a.NTF_WebFullScreen_SetSwitch,e)}},{key:"setPlayerFullScreen",value:function(e){this.view.emit(lv.a.NTF_FullScreen_SetSwitch,e)}},{key:"setDelayPlayInfo",value:function(e){this.engine.setDelayPlayInfo(e)}},{key:"clearDelayPlayInfo",value:function(e){this.engine.clearDelayPlayInfo(e)}},{key:"addPlayListView",value:function(e){e.request=!0,this.view.emit(lv.a.NTF_ADDVideoList,e)}},{key:"getSwitchVideoType",value:function(){this.view._switchVideoType}},{key:"exitPicInPic",value:function(){this.view.emit(lv.a.Type_ExitPic)}},{key:"showToast",value:function(e){this.view.emit(lv.a.NTF_SHOW_TOAST,{txt:e})}},{key:"refresh",value:function(e){this.engine.refresh(e)}},{key:"backToStoryLine",value:function(e){var t=this.engine.IVRecorder;t&&t.backToStoryLine(e)}},{key:"backToIVMain",value:function(e){this.view.emit(lv.a.NTF_BACKTO_IVMAIN,e)}},{key:"setFollowData",value:function(e){yv.info("js call func setFollowData, data = ".concat(JSON.stringify(e))),this.view.setFollowData(e)}},{key:"changeFollowState",value:function(e){yv.info("js call func changeFollowState, data = ".concat(JSON.stringify(e))),this.view.emit(lv.a.NTF_FOLLOW_CHANGE_STATE,e)}},{key:"changeAIBaikeState",value:function(e){yv.info("js call func changeAIBaikeState, data = ".concat(JSON.stringify(e))),this.view.emit(lv.a.NTF_AIView_BAIKE_STATECHANGE,e)}},{key:"setBarrageState",value:function(e){yv.info("js call func setBarrageState, data = ".concat(JSON.stringify(e))),e.index!==undefined&&e.focus!==undefined&&(this.view.barrageFocux==undefined&&(this.view.barrageFocux=[]),this.view.barrageFocux[parseInt(e.index)]=e.focus)}},{key:"getFeedbackInfo",value:function(){this.view.emit(lv.a.NTF_FeedBack_getInfo)}}]),n}(_.a);t["default"]=mv;_v="wonder.data.pc",vv=window.QiyiPlayerLoader||{},gv=!!vv.packLoader.usedGrayUrl[_v],vv.packageName===_v&&(!gv&&vv.isSyncing||!vv.isSyncing)&&vv.setPackage(mv)},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(27),n(376)),c=n(379),u=n(350),d=function(){function e(t,n,r){i()(this,e),this.severity=t,this.category=n,this.code=r;for(var a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];this.data=o}return o()(e,[{key:"toString",value:function(){return"".concat(e.MESSAGE_HEAD," ").concat(s.a.stringify(this,null,"  "))}}]),e}();d.severity=u.a,d.category=c.a,d.MESSAGE_HEAD="KIWI:"},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(1),p=n.n(h),_=(n(90),n(94)),v=n(265),g=n(329);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var m=function(e){d()(n,e);var t=y(n);function n(e){var r;return i()(this,n),(r=t.call(this)).$apiKeys=v.b.call(c()(r)),r.$eventManager=new g.a,r.ctx_=e.ctx,r.$apiInjector=v.a,r}return o()(n,[{key:"bindApis",value:function(){v.a.provide(this,this.$apiKeys),v.a.inject(this.ctx_),v.a.dispose()}},{key:"unbindApis",value:function(){v.a.eject(this.ctx_,this.$apiKeys)}},{key:"destroy",value:function(){this.$eventManager.destroy(),this.unbindApis(),this.$apiKeys.splice(0,this.$apiKeys.length)}}]),n}(_.EventEmitter);m.$__apiDescriptorQueue__=[]},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(51),i=n(273);function a(e){var t="AudioSpecificConfig",n=e[0]>>3;31==n&&r.a.error("".concat(t," unsupported audioObjectType"));var a=(7&e[0])<<1|e[1]>>7;15===a&&r.a.error("".concat(t," unsupported samplingFrequencyIndex"));var o=e[1]>>3&15;return(o<0||o>=8)&&r.a.error("${LOG} unsupported channel configuration"),{audioObjectType:n,samplingFrequencyIndex:a,channelConfiguration:o,sampleCount:(e[1],1024),sampleRate:i.a[a]}}},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=(n(90),n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(27),function(){function e(){i()(this,e),this.byteLength=0,this.list_=[]}return o()(e,[{key:"bytes",get:function(){var e=this.list_,t=e.length,n=null;return 1===t?n=e[0]:t>1&&(n=this.toNewBytes()),n}},{key:"empty",get:function(){return 0===this.list_.length}},{key:"bufferList",get:function(){return this.list_}},{key:"clear",value:function(){var e=this.list_.length;e>0&&this.list_.splice(0,e),this.byteLength=0}},{key:"toNewBytes",value:function(){for(var e=this.list_,t=e.length,n=0,r=null;null===r;)try{n++,r=new Uint8Array(this.byteLength)}catch(s){if(n>50)throw"alloc_memory_error@new: ".concat(s.message,", ").concat(t,", ").concat(this.byteLength)}for(var i=0,a=0;i<t;i++){var o=e[i];r.set(o,a),a+=o.byteLength}return r}},{key:"append",value:function(t){var n=this.list_;if(t instanceof e){n=this.list_=n.concat(t.bufferList);for(var r,i=0;i<n.length;i++)r=n[i],this.byteLength+=r.byteLength}else n.push(t),this.byteLength+=t.byteLength}},{key:"cut",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],n=null;if(e>0&&!this.empty){for(var r=this.list_,i=0,a=0;r.length>0;){var o=r.shift();if(0!==a){var s=e-i;if(o.byteLength>=s){t&&n.set(o.subarray(0,s),i),(o=o.subarray(s)).byteLength>0&&r.unshift(o);break}t&&n.set(o,i),i+=o.byteLength;break}if(o.byteLength>=e){t&&(n=o.subarray(0,e)),o.byteLength>e&&(o=o.subarray(e),r.unshift(o));break}if(t){try{n=new Uint8Array(e)}catch(c){throw"alloc_memory_error@cut: ".concat(e," ").concat(c.message)}n.set(o,0)}i+=o.byteLength,a++}this.byteLength-=e}return n}}]),e}())},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(25);function r(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,r=0,i="",a=t;a<t+n;a++)r=7-a%8,i+=e[Math.floor(a/8)]>>r&1;return parseInt(i,2)}function i(e){for(var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=[],r=8*e.byteLength,i=!1,a=0,o=0,s="",c=t;c<r;c++)if(a=7-c%8,o=e[Math.floor(c/8)]>>a&1,!i){if(0!==o){i=!0,t=c;break}n.push(0)}for(var u=n.length+1,d=t;d<t+u;d++)a=7-d%8,s+=o=e[Math.floor(d/8)]>>a&1;return{bitLength:n.length+u,value:parseInt(s,2)-1}}var a={readUEV:i,readSEV:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=i(e,t),r=n.value,a=Math.pow(-1,r+1)*Math.ceil(r/2);return{bitLength:n.bitLength,value:a}},readBit:r,readByte:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return r(e,t,8)}}},function(e,t,n){"use strict";function r(e){return{payload:e,offset:0,index:0}}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}));function i(e){var t=e.payload,n=e.offset,r=t[e.index];return r>>=7-(7&n),r&=1,o(e,1),r}function a(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=e.payload,a=e.offset,s=(e.index,8*r.length-a);if(t>s)throw new Error("Cannot get "+t+" bit(s) from offset "+a+", "+s+" available");for(var c=0,u=0;u<t;){var d=void 0;t-u>=8&&0==(7&a)?(c|=r[a>>3]<<u,d=8,o(e,8)):(c|=i(e)<<u,d=1),u+=d}return n?(32!==t&&c&1<<t-1&&(c|=-1^(1<<t)-1),c):c>>>0}function o(e,t){var n=e.offset+t;if(!(n<=8*e.payload.byteLength))throw Error("".concat("bit operator: "," can't skip ").concat(t));e.offset=n,e.index=e.offset>>3}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),a=n(3),o=n.n(a);n(399),n(267),n(46),n(10),n(278);function s(e){var t=0;return ArrayBuffer.isView(e)&&(t=e.byteOffset,e=e.buffer),new DataView(e,t)}var c=function(){function e(){i()(this,e)}return o()(e,[{key:"readUint32",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return s(e).getUint32(t,n)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(342),i=n.n(r),a=(n(27),n(350)),o=n(593),s=n(379),c=n(382);function u(e,t){var n=c.a.MUX_UNKNOWN_FAILED,r=a.a.CRITICAL;switch(e){case 0:n=c.a.MUX_WORKER_INTERNAL_EXCEPTION,r=a.a.RECOVERABLE;break;case 1:n=c.a.MUX_WORKER_MESSAGE_EXCEPTION;break;default:n=e}for(var u=arguments.length,d=new Array(u>2?u-2:0),l=2;l<u;l++)d[l-2]=arguments[l];return i()(o.a,[r,s.a.MUX,n,t].concat(d))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(5),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){o()(n,e);var t=l(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).container="",r.codec="",r.trackId=null,r}return n}(n(345).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(9);var r=n(2),i=n.n(r),a=n(4),o=n.n(a),s=n(5),c=n.n(s),u=n(1),d=n.n(u);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c()(this,n)}}var f=function(e){o()(n,e);var t=l(n);function n(e){return i()(this,n),t.call(this,e)}return n}(n(345).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(107),n(115),n(26),n(17),n(10),n(19),n(139),n(45);var r=/^(b|B)$/,i={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(isNaN(e))return"";var n=[],o=0,s=!0===t.bits,c=!0===t.unix,u=t.base||2,d=void 0!==t.round?t.round:c?1:2,l=void 0!==t.separator&&t.separator||"",f=void 0!==t.spacer?t.spacer:"",h=t.symbols||t.suffixes||{},p=2===u&&t.standard||"jedec",_=t.output||"string",v=!0===t.fullform,g=t.fullforms instanceof Array?t.fullforms:[],y=void 0!==t.exponent?t.exponent:-1,m=Number(e),b=m<0,k=u>2?1e3:1024;return b&&(m=-m),(-1===y||isNaN(y))&&(y=Math.floor(Math.log(m)/Math.log(k)))<0&&(y=0),y>8&&(y=8),0===m?(n[0]=0,n[1]=c?"":i[p][s?"bits":"bytes"][y]):(o=m/(2===u?Math.pow(2,10*y):Math.pow(1e3,y)),s&&(o*=8)>=k&&y<8&&(o/=k,y++),n[0]=Number(o.toFixed(y>0?d:0)),n[1]=10===u&&1===y?s?"kb":"kB":i[p][s?"bits":"bytes"][y],c&&(n[1]="jedec"===p?n[1].charAt(0):y>0?n[1].replace(/B$/,""):n[1],r.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),b&&(n[0]=-n[0]),n[1]=h[n[1]]||n[1],"array"===_?n:"exponent"===_?y:"object"===_?{value:n[0],suffix:n[1],symbol:n[1]}:(v&&(n[1]=g[y]?g[y]:a[p][y]+(s?"bit":"byte")+(1===n[0]?"":"s")),l.length>0&&(n[0]=n[0].toString().replace(".",l)),n.join(f))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(32),i=n.n(r),a=n(2),o=n.n(a),s=n(3),c=n.n(s);n(10),n(19),n(139),n(26),n(17),n(43),n(37),n(27),n(45),n(110),n(146),n(107);function u(e){var t=e.charCodeAt(0);return"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function d(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")}function l(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];if("string"==typeof e){var r=encodeURI(e).replace(t,u);return n&&(r=d(r)),r}return null}var f=function(){function e(t){o()(this,e),this.encodedQuery_=t||null,this.count_=null}return c()(e,[{key:"ensureKeyMapInitialized_",value:function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var e=this.encodedQuery_.split("&"),t=0;t<e.length;t++){var n=e[t].indexOf("="),r=null,i=null;n>=0?(r=e[t].substring(0,n),i=e[t].substring(n+1)):r=e[t],r=decodeURIComponent(r.replace(/\+/g," ")),i=i||"",this.add(r,decodeURIComponent(i.replace(/\+/g," ")))}}},{key:"getCount",value:function(){return this.ensureKeyMapInitialized_(),this.count_}},{key:"add",value:function(e,t){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var n=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return n||(this.keyMap_[e]=n=[]),n.push(t),this.count_++,this}},{key:"update",value:function(e,t){return this.ensureKeyMapInitialized_(),this.encodedQuery_=null,(this.keyMap_[e]=[]).push(t),this}},{key:"get",value:function(e){return this.ensureKeyMapInitialized_(),this.keyMap_[e]}},{key:"clone",value:function(){var t=new e;if(t.encodedQuery_=this.encodedQuery_,this.keyMap_){var n={};for(var r in this.keyMap_)n[r]=this.keyMap_[r].concat();t.keyMap_=n,t.count_=this.count_}return t}},{key:"toString",value:function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e=[];for(var t in this.keyMap_)for(var n=encodeURIComponent(t),r=this.keyMap_[t],i=0;i<r.length;i++){var a=n;a+="="+encodeURIComponent(r[i]),e.push(a)}return this.encodedQuery_=e.join("&")}},{key:"toDecodedString",value:function(){return h.decodeOrEmpty(this.toString())}}]),e}(),h=function(){function e(t){var n;o()(this,e),this._scheme="",this._domain="",this._port=null,this._userInfo="",this._path="",this._query=new f,this._hash="",this._reDisallowedInQuery=/[\#\?@]/g,this._reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,this._reDisallowedInRelativePath=/[\#\?:]/g,this._reDisallowedInAbsolutePath=/[\#\?]/g,this._reDisallowedInFragment=/#/g,"object"===i()(t)&&t instanceof e?(this.setScheme(t.scheme),this.setUserInfo(t.userInfo),this.setDomain(t.domain),this.setPort(t.port),this.setPath(t.path),this.setQueryData(t.query.clone()),this.setHash(t.hash)):t&&(n=this.split(String(t)))?(this.setScheme(n[1]||"",!0),this.setUserInfo(n[2]||"",!0),this.setDomain(n[3]||"",!0),this.setPort(n[4]),this.setPath(n[5]||"",!0),this.setQueryData(n[6]||"",!0),this.setHash(n[7]||"",!0)):this._query=new f(null)}return c()(e,[{key:"scheme",get:function(){return this._scheme}},{key:"domain",get:function(){return this._domain}},{key:"port",get:function(){return this._port}},{key:"userInfo",get:function(){return this._userInfo}},{key:"path",get:function(){return this._path}},{key:"hash",get:function(){return this._hash}},{key:"query",get:function(){return this._query}},{key:"setScheme",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._scheme=n?e.decodeOrEmpty(t,!0):t,this._scheme&&(this._scheme=this._scheme.replace(/:$/,"")),this}},{key:"toString",value:function(){var e=[],t=this.scheme;t&&e.push(l(t,this._reDisallowedInSchemeOrUserInfo,!0),":");var n=this.getDomain();if(n){e.push("//");var r=this.userInfo;r&&e.push(l(r,this._reDisallowedInSchemeOrUserInfo,!0),"@"),e.push(d(encodeURIComponent(n)));var i=this.port;null!=i&&e.push(":",String(i))}var a=this.path;a&&(this.hasDomain()&&"/"!=a.charAt(0)&&e.push("/"),e.push(l(a,"/"==a.charAt(0)?this._reDisallowedInAbsolutePath:this._reDisallowedInRelativePath,!0)));var o=this.getEncodedQuery();o&&e.push("?",o);var s=this.hash;return s&&e.push("#",l(s,this._reDisallowedInFragment)),e.join("")}},{key:"clone",value:function(){return new e(this.toString())}},{key:"split",value:function(e){var t=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");return e.match(t)}},{key:"setUserInfo",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._userInfo=n?e.decodeOrEmpty(t):t,this}},{key:"hasDomain",value:function(){return!!this._domain}},{key:"setDomain",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._domain=n?e.decodeOrEmpty(t,!0):t,this}},{key:"getDomain",value:function(){return this._domain}},{key:"setPort",value:function(e){if(e){var t=Number(e);if(isNaN(t)||t<0)throw Error("Bad port number "+t);this._port=t}else this._port=null;return this}},{key:"setPath",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._path=n?e.decodeOrEmpty(t,!0):t,this}},{key:"setQueryData",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return"object"===i()(e)&&e instanceof f?this._query=e:(t||(e=l(e,this._reDisallowedInQuery)),this._query=new f(e)),this}},{key:"getEncodedQuery",value:function(){return this._query.toString()}},{key:"setHash",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return this._hash=n?e.decodeOrEmpty(t):t,this}}],[{key:"decodeOrEmpty",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return e?t?decodeURI(e):decodeURIComponent(e):""}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));n(9);var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(38),c=n.n(s),u=n(4),d=n.n(u),l=n(5),f=n.n(l),h=n(42),p=n.n(h),_=n(1),v=n.n(_),g=(n(90),n(272)),y=n(133),m=(n(27),n(115),n(77),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(10),n(29),n(46),n(402)),b=n(51),k=n(607),x=n(256),S=function(){function e(t){i()(this,e),this.audioSequenceNumber=1,this.cacheBuffer=new k.a,this.context=t}return o()(e,[{key:"parse",value:function(e){var t=null,n=e.tracks.audioTrack;n&&(this.loopAACFrames_(n,e.audioTimeOffset),n.samples.length>0&&(t={type:"fragment",contentType:"audio",arrayBufferList:this.remuxAudio_(n),duration:(this.nextSegmentPts-this.curSegmentPts)/n.inputTimeScale,startDTS:this.curSegmentPts/n.inputTimeScale,startPTS:this.curSegmentPts/n.inputTimeScale,nextSegmentPTS:this.nextSegmentPts}));return t}},{key:"reset",value:function(){this.audioSequenceNumber=1,this.nextSegmentPts=undefined,this.cacheBuffer.clear()}},{key:"remuxAudio_",value:function(e){var t=this.cacheBuffer,n=x.a.moof(this.audioSequenceNumber,e.baseMediaDecodeTime,e),r=x.a.mdat(this.mdat,!0);this.audioSequenceNumber++,t.append(n),t.append(r);var i=t.toNewBytes();return t.clear(),[i.buffer]}},{key:"loopAACFrames_",value:function(e,t){var n=e.frames,r=e.codec,i=e.realCodec,a=e.channelCount,o=e.timescale,s=e.inputTimeScale,c=e.isAAC,u=this.nextSegmentPts,d=s/o,l=(c?1024:1152)*d;if(e.samples=[],0!==n.length){var f="number"==typeof u&&!isNaN(u)&&u>0&&(Math.abs(t-u)<.1*s||Math.abs(n[0].pts-u)<20*l);f||(b.a.log("audio track consecutive fragments as being contiguous: ".concat(f)),u=t);for(var h,p=0;p<n.length;){var _=(h=n[p]).pts-u,v=Math.abs(1e3*_/s);if(_<=-1*l)b.a.warn("Dropping 1 audio sample @ ".concat((u/e.inputTimeScale).toFixed(3),"s due to ").concat(Math.round(v)," ms overlap.")),n.byteLength-=h.data.byteLength,n.splice(p,1);else if(_>=1*l&&v<1e4&&u){var g=Math.round(_/l);b.a.warn("Injecting ".concat(g," audio frame (").concat(r,"/").concat(i,"/").concat(a,") @ ").concat((u/s).toFixed(3),"s due to ").concat(Math.round(1e3*_/s)," ms gap."));for(var y=0;y<g;y++){var k=Math.max(u,0),x=Object(m.a)(i,a);x||(b.a.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),x=h.data.subarray()),n.byteLength+=x.byteLength,n.splice(p,0,{data:x,pts:k,dts:k}),u+=l,p++}h.pts=h.dts=u,u+=l,p++}else h.pts=h.dts=u,u+=l,p++}if(0!==n.length){var S=n[0],T=Math.max(S.pts,0);e.baseMediaDecodeTime=T/d;for(var P,I,w=0,A=8,E=new Uint8Array(A+n.byteLength);w<n.length;w++)P=n[w],I=n[w+1],e.samples.push({size:P.data.byteLength,duration:I?Math.round((I.pts-P.pts)/d):0,cts:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:0}}),E.set(P.data,A),A+=P.data.byteLength;e.samples.length>=2&&(e.samples[e.samples.length-1].duration=e.samples[e.samples.length-2].duration),this.nextSegmentPts=u,this.curSegmentPts=T,this.mdat=E}}}}]),e}(),T=function(){function e(t){i()(this,e),this._hasVideoIS=!1,this._hasAudioIS=!1,this.context=t}return o()(e,[{key:"needParseIS",get:function(){return!(this._hasVideoIS&&this._hasAudioIS)}},{key:"parse",value:function(e){for(var t=[],n=e.tracks||[],r=0;r<n.length;r++){var i=n[r];switch(i.type){case"video":this._hasVideoIS||(this._hasVideoIS=!0,i.container="video/mp4",t.push(this._initSegment(i)));break;case"audio":this._hasAudioIS||(this._hasAudioIS=!0,i.container="audio/mp4",t.push(this._initSegment(i)))}}return t}},{key:"reset",value:function(){this._hasVideoIS=!1,this._hasAudioIS=!1}},{key:"_initSegment",value:function(e){var t=x.a.initSegment([e]);return{type:"initSegment",contentType:e.type,container:e.container,codec:e.codec,trackId:e.id,arrayBufferList:[t.buffer]}}}]),e}(),P=(n(278),n(202)),I=n(531),w=function(){function e(t){i()(this,e),this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer=new k.a,this.context=t}return o()(e,[{key:"parse",value:function(e){var t=null,n=e.tracks.videoTrack;n&&(this.loopGOPs_(n),t={type:"fragment",contentType:"video",arrayBufferList:this.remuxVideo_(n),duration:(this.nextSegmentDts-n.firstDTS)/n.timescale,startDTS:n.firstDTS/n.timescale,startPTS:n.firstPTS/n.timescale});return t}},{key:"reset",value:function(){this.videoSequenceNumber=1,this.mdat=null,this.nextSegmentDts=null,this.nextSegmentPts=null,this.cacheBuffer.clear()}},{key:"remuxVideo_",value:function(e){var t=this.cacheBuffer,n=x.a.moof(this.videoSequenceNumber,e.baseMediaDecodeTime,e),r=x.a.mdat(this.mdat,!0);this.videoSequenceNumber++,t.append(n),t.append(r);var i=t.toNewBytes();return t.clear(),[i.buffer]}},{key:"loopGOPs_",value:function(e){var t,n,r,i,a,o,s,c,u,d,l,f=0,h=e.gops,p=-1,_=8;e.samples=[];var v=h[0],g=v[0],y=h[h.length-1],m=y[y.length-1];a=Math.max(g.dts,0),o=Math.max(g.pts,0),s=Math.max(m.dts,0),c=o,I.a.SAFARI&&(f=Math.round((s-a)/(h.frameLength-1)));var k=h.length&&this.nextSegmentDts&&(Math.abs((a-this.nextSegmentDts)/e.timescale)<.1||Math.abs(o-this.nextSegmentPts)<e.timescale/5);if("boolean"==typeof k&&(k=!0),k){var x=Math.round((a-this.nextSegmentDts)/90);if(x)if(x>1){var S=g.duration/90,T=x%S*90,w=Math.ceil(x/S)||0;for(b.a.warn("AVC:".concat(x," ms hole between fragments detected @").concat((this.nextSegmentDts/90).toFixed(3),"ms, filling it ").concat(w," I-frame")),i=0;i<w;i++){var A=Math.max(this.nextSegmentDts,0),E=Math.max(this.nextSegmentPts,0),D=Object(P.a)([],g,!0);D.dts=A,D.pts=E,0===i&&(a=A,o=E),i===w-1&&T>0&&(D.duration=T),this.nextSegmentDts+=D.duration,this.nextSegmentPts+=D.duration,h.byteLength+=D.byteLength,h.naluCount+=D.naluCount,v.splice(i,0,D)}}else x<-1&&b.a.log("AVC:".concat(-x," ms overlapping between fragments detected"))}var q=_+h.byteLength+4*h.naluCount,O=new Uint8Array(q),R=new DataView(O.buffer);for(t=0;t<h.length;t++)for(u=h[t],n=0;n<u.length;n++){d=u[n],p+=1,I.a.SAFARI?d.dts=a+p*f:d.dts=Math.max(d.dts,a),d.pts=Math.max(d.pts,d.dts);var L={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1},cts:undefined,duration:undefined};for(I.a.SAFARI?L.cts=Math.max(0,f*Math.round((d.pts-d.dts)/f)):L.cts=d.pts-d.dts,L.duration=d.duration,L.size=4*d.length,L.size+=d.byteLength,(d.keyframe||I.a.CHROME&&0===e.samples.length)&&(L.flags.dependsOn=2,L.flags.isDependedOn=1,L.flags.isNonSyncSample=0),e.samples.push(L),r=0;r<d.length;r++)l=d[r],R.setUint32(_,l.rawData.byteLength),_+=4,O.set(l.rawData,_),_+=l.rawData.byteLength;c=Math.max(c,d.pts)}e.firstDTS=a,e.firstPTS=o,e.baseMediaDecodeTime=a;var M=e.samples[e.samples.length-1].duration;this.nextSegmentPts=c+M,this.nextSegmentDts=s+M,this.mdat=O}}]),e}();function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var E=function(e){d()(n,e);var t=A(n);function n(e){var r,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(r=t.call(this)).context=e,r.options=a,r._initComplexer=new T(e),r._audioComplexer=new S(e),r._videoComplexer=new w(e),r}return o()(n,[{key:"audioAlignPTS",set:function(e){this._audioComplexer.nextSegmentPts=e}},{key:"push",value:function(e){var t=this.context;if(this._initComplexer.needParseIS){var n=this._initComplexer.parse(e),r=n.length;if(r>0)for(var i=0;i<r;i++){var a=n[i];this.emit("data",{fragmentType:"initSegment",contentType:a.contentType,container:a.container,codec:a.codec,trackId:a.trackId,data:a.arrayBufferList,meta:t.config?t.config.meta:null})}}if(this._audioComplexer){var o=this._audioComplexer.parse(e);o&&this.emit("data",{fragmentType:"fragment",contentType:o.contentType,data:o.arrayBufferList,startDTS:o.startDTS,startPTS:o.startPTS,duration:o.duration,nextSegmentPTS:o.nextSegmentPTS,meta:t.config?t.config.meta:null})}if(this._videoComplexer){var s=this._videoComplexer.parse(e);s&&this.emit("data",{fragmentType:"fragment",contentType:s.contentType,data:s.arrayBufferList,startDTS:s.startDTS,startPTS:s.startPTS,duration:s.duration,meta:t.config?t.config.meta:null})}}},{key:"rebuildInitSegment",value:function(){this._initComplexer.reset()}},{key:"reset",value:function(){this._initComplexer.reset(),this._audioComplexer.reset(),this._videoComplexer.reset()}}]),n}(y.a);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var q=function(e){d()(n,e);var t=D(n);function n(e){var r,a,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i()(this,n),(a=t.call(this,e,o)).tracks=[],a._syncDTS=0,a._syncPTS=0,a._complexStream=new E(e,o),a.pipe(a._complexStream),p()((r=c()(a),v()(n.prototype)),"listenEndStream_",r).call(r),a}return o()(n,[{key:"audioAlignPTS",set:function(e){this._complexStream.audioAlignPTS=e}},{key:"endStream",get:function(){return this._complexStream}},{key:"push",value:function(e){var t=this.tracks,n=e.videoTrack,r=e.audioTrack,i=e.captionTrack;n&&!t.videoTrack&&(t.push(n),t.videoTrack=n),r&&!t.audioTrack&&(t.push(r),t.audioTrack=r),i&&!t.captionTrack&&(t.push(i),t.captionTrack=i);var a=n?n.firstDTS:0,o=r?r.firstDTS:0;if(r&&r.frames&&n&&n.gops){var s=r.firstDTS-n.firstDTS;o=a+Math.max(0,s)}this.emit("data",{audioTimeOffset:o,videoTimeOffset:a,tracks:this.tracks}),this.tracks.splice(0,this.tracks.length),this.tracks.videoTrack=null,this.tracks.audioTrack=null,this.tracks.captionTrack=null}},{key:"rebuildInitSegment",value:function(){this._complexStream.rebuildInitSegment()}},{key:"reset",value:function(){this.tracks=[],this._syncDTS=0,this._syncPTS=0,this.emit("reset")}}]),n}(g.b)}]);