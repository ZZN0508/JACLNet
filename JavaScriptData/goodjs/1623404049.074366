function isTargetApi(t,n){try{return t.split("/")[2].split(".")[0].split("-")[0]===n}catch(t){return!1}}function sendInfo(t,n,o,e,i,r){if(t.infoListener)t.infoListener(n,o,e,i,r);else{t.infoQueue=t.infoQueue||[];var w={url:n,status:o,performance:e,timestamp:i,errorMessage:r};t.infoQueue.push(w)}}!function(){if(!window.fetch)return;window.gwpMonitor=window.gwpMonitor||{};var t=window.XMLHttpRequest.prototype.open,n=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.open=function(n,o,e,i,r){return this.url=o,t.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(t){try{if(isTargetApi(this.url,"marketingplatform")){var o=Date.now();this.addEventListener("load",function(){var t=Date.now()-o;sendInfo(window.gwpMonitor,this.url,this.status,t,Date.now(),"")})}}catch(t){sendInfo(window.gwpMonitor,"","","",Date.now(),t)}return n.apply(this,arguments)};const o=window.fetch;window.fetch=function(...t){var n=Date.now();return o.apply(window,t).then(t=>{var o=t.clone();try{if(isTargetApi(t.url,"marketingplatform")){var e=Date.now()-n;sendInfo(window.gwpMonitor,t.url,t.status,e,Date.now(),"")}}catch(t){sendInfo(window.gwpMonitor,"","","",Date.now(),t)}return o})}}();