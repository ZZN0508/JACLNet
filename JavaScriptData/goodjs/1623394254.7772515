YUI.add("stencil-sticker",function(e,t){"use strict";function F(t){this.constructor.superclass.constructor.call(this,t);var n=this._node,r=e.merge(n.getData(),t)||{},i=D(n,t),s,o={},u,a={},h;s=e.Node.create('<div class="StickyPholder"></div>'),s.setStyle(l,n.getStyle(l)),o.marginTop=0,n.insert(s,"before"),h=s.getY(),f&&f.csstransforms3d&&(!e.UA.gecko||e.UA.gecko>=27)&&(o.transform=b),n.setStyles(o),u=n.get(p),a.pHolder=s,a.top=i,a.y=h,a.currentY=h,a.forcePosition=r["sticker-forceposition"],a.parentClass=r["sticker-parentclass"],a.vpTaller=e.DOM.viewportRegion().height>u,a.nodeHeight=u,a.offset=0,a.lastPos=c,n._sticker=a,L.push(n),B(n)}if(e.UA.ios&&e.UA.ios<5||e.UA.android&&e.UA.android<3||e.UA.silk||e.UA.userAgent.match(/Silk/)||e.UA.ie&&e.UA.ie<7)return;var n="bottom",r="Sticky",i="Sticky-off",s="Sticky-on",o=e.config.doc,u=!1,a=e.one("html"),f=Modernizr,l="marginTop",c="none",h=null,p="offsetHeight",d="px",v="resize",m="scroll",g=50,y="top",b="translate3d(0,0,0)",w=!0,E=e.config.win,S=0,x=0,T,N=0,C=u,k=parseInt(e.one("body").getComputedStyle("minWidth"),10)||1150,L=[],A=h,O,M,_,D,P,H,B,j;H=function(t){var n;S=e.DOM.docScrollY();if(S===x&&t)return;A=e.DOM.viewportRegion();for(n=L.length-1;n>=0;n-=1)L[n].getDOMNode()?B(L[n],t):L.splice(n,1);x=S},B=function(e,t){var r=A,i,s,o,u,a;j(e,r),o=Math.round(e._sticker.y+e._sticker.nodeHeight+e._sticker.offset),a=e._sticker.forcePosition,u=Math.round(e._sticker.y+e._sticker.nodeHeight);if(a||u<e._sticker.scrollHeight)i=e._sticker.lastPos,a?a==="top"&&r.top+e._sticker.top>e._sticker.y?i=y:a==="bottom"&&r.bottom>=o-1?i=n:i=c:e._sticker.nodeHeight>r.height-e._sticker.top?(s=S>x,(s||!t)&&r.bottom>=o-1?i=n:!s&&t&&r.top+e._sticker.top<=e._sticker.currentY&&r.top+e._sticker.top>e._sticker.y?i=y:i=c):e._sticker.nodeHeight<=r.height-e._sticker.top&&S+e._sticker.top>e._sticker.y?i=y:i=c,(e._sticker.lastPos!==i||e._sticker.y>=r.top+e._sticker.top)&&_(e,i)},j=function(e,t){var n=Math.round(e.getY());n<0&&e.hasClass(r)?n=t.top+n:e._sticker.lastPos===y&&(n=t.top+e._sticker.top),e._sticker.currentY=n,e._sticker.y=Math.round(e._sticker.pHolder.getY()),e._sticker.nodeHeight=e.get(p),e._sticker.offset=Math.max(n-e._sticker.y,0),e._sticker.vpTaller=t.height>e._sticker.nodeHeight,e._sticker.scrollHeight=Math.max(o.body.scrollHeight,o.documentElement.scrollHeight)},_=function(t,i){var s={},o,a;i===y?(s={position:"",bottom:"",top:t._sticker.top+d,transform:b},t._sticker.translated=u):i===n?(s={position:"",bottom:0,top:"",transform:b},t._sticker.translated=u):(t._sticker.y<A.top+t._sticker.top?(o="translate3d(0,"+t._sticker.offset+d+",0)",a=t._sticker.offset+d):(o="",a=""),f&&f.csstransforms3d&&!e.UA.gecko?s={position:"",bottom:"",top:"",transform:o}:s={position:"relative",bottom:"",top:a},t._sticker.translated=w),e.UA.gecko&&e.UA.gecko<27&&(s.transform=undefined),i!==c?(t.addClass(r),t._sticker.parentClass&&t.get("parentNode").addClass(t._sticker.parentClass),t._sticker.sticky=w,Stencil&&Stencil.utils&&Stencil.utils.dispatch(t.getDOMNode(),"sticker:sticky",{where:i})):(t.removeClass(r),t._sticker.parentClass&&t.get("parentNode").removeClass(t._sticker.parentClass),t._sticker.sticky=u),t._sticker.lastPos=i,t.setStyles(s)},D=function(t,n){var r=0,i=e.merge(t.getData(),n),s;return i["sticker-top"]?r=parseInt(i["sticker-top"],10):i["sticker-toptarget"]?r=parseInt(e.one(i["sticker-toptarget"]).get(p),10):(s=e.one("body"),r=parseInt(s.getComputedStyle(l),10)||parseInt(s.getComputedStyle("paddingTop"),10)||0),r},M=function(){o.documentElement.clientWidth>k?a.replaceClass(i,s):a.replaceClass(s,i),H()},O=function(e,t){C=u,N=+(new Date),e&&e.call(undefined,t)},P=function(t){var n,r,i,s;t.type===m?(r=H,i=!0):t.type===v&&(r=M),s=e.bind(O,undefined,r,i),E.requestAnimationFrame?C||(C=w,requestAnimationFrame(s)):(n=+(new Date),N&&n<N+g?(E.clearTimeout(T),T=E.setTimeout(s,g)):s())},e.extend(F,e.Stencil.BasePlugin,{},{NS:"StencilSticker",requiresInit:w,defaultTriggerEvents:[],updateAllNodes:H}),e.Stencil.registerPlugin(F,"Sticker"),E.addEventListener?(E.addEventListener(m,P,u),E.addEventListener(v,P,u)):(E.attachEvent("on"+m,P),E.attachEvent("on"+v,P)),S=e.DOM.docScrollY(),M()},"@VERSION@",{requires:["node-base","node-style","node-screen"]});