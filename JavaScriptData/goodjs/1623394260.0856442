!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i="dev",r="childFrame",o="prod",a={PLACEMENT:"placement",FLOATING:"floating"},c={DEFAULT:"default",EXPAND:"expand"},s={EXPAND:"expand",CONTRACT:"contract",SHOW:"show",HIDE:"hide",CLOSE:"close"},d="MRAID",u="VPAID";var l=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=h(this,p(t).call(this,e))).meta=n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),t}(l);v.topic={INIT:"init",CLICK:"click",QUALIFIED_CLICK:"qualifiedClick",EVENT:"event",CONTAINER_EVENT:"containerEvent",TIMER:"timer",INIT_COMPLETE:"initComplete",CONTAINER_EVENT_COMPLETE:"containerEventComplete",GLOBAL_RELAY_EVENT:"globalRelayEvent"};var m=v,y={AdAPI:{version:"1.4.2"},configuration:{AdServer:{clickRedirect:""},Publisher:{clickRedirect:""},ThirdParty:[],Creative:{clicks:{},events:{},content:{}},User:{geolocation:{}}},configurationLoaded:!1,container:{id:"",state:"default"},containerViewable:!1,domLoaded:!1,environment:null,environmentReady:!1,hostPageLoaded:!1,ready:!1,readyCallbacks:[],mode:null},A=/\.$/,b=/\[]/,w=/\[/g,C=/\]/g,E={evaluateNameAndLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="",i=t.path,r=void 0===i?"":i;r&&!A.test(r)&&(r+=".");var o=t.reportingLabelKey,a=t.reportingLabel;if(o=this.asArray(o),a=this.asArray(a),t.hasOwnProperty("index")){var c=t.index;(c=this.asArray(c)).forEach((function(e){r=r.replace(b,"[".concat(e,"]"))})),n=this.evaluateReportingLabel(a,o,c,r,t.path)}else if(t.hasOwnProperty("item")){var s=t.item;(s=this.asArray(s)).forEach((function(e){r=r.replace(b,"[".concat(e._index,"]"))}));var d=s.map((function(e){return e._index}));n=this.evaluateReportingLabel(a,o,d,r,t.path)}return{name:r+e,reportingLabel:n?"".concat(n,".").concat(e):""}},addIndexToCollectionItems:function(e){this.findItemsInArrays(e,(function(e,t){e._index=t}))},findItemsInArrays:function(e,t){var n=this;if(Array.isArray(e))e.forEach((function(e,i){t(e,i),n.findItemsInArrays(e,t)}));else if("string"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&this.findItemsInArrays(e[i],t)},checkForImpliedContentPrefix:function(e,t){var n="content."+e;return t[n]?n:e},get:function(e,t){return(t=(t=t.replace(w,".")).replace(C,"")).split(".").reduce((function(e,t){if(e){var n=e[t];if(!n)return;return n}}),e)},evaluateReportingLabel:function(e,t,n,i,r){var o=this;if(e.length>0&&e[0])return this.fillReportingPath(n,e,r);var a=y.configuration.Creative.content,c=[],s=i.split("].");return s.pop(),(s=(s=s.map((function(e){return e+"]"}))).map((function(e,t){return s.slice(0,t+1).reduce((function(e,t){return e+"."+t}))}))).forEach((function(e,n){var i=o.get(a,e);if(i){var r=i[t[n]]||i.reportingLabel;r&&c.push(r)}})),this.fillReportingPath(n,c,r)},fillReportingPath:function(e,t,n){return e.forEach((function(e,i){var r="";t[i]&&(r=" - ".concat(t[i])),n=n.replace(b,"[".concat(e).concat(r,"]"))})),n},asArray:function(e){return Array.isArray(e)?e:[e]}};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e,n){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=O(this,L(t).call(this,e)),n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),t}(l);k.READY="ready";var P=k,I="[$AD]",D={log:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,[I,e].concat(i))},warn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).warn.apply(t,[I,e].concat(i))}};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V="https://ad-formats.advertising.aol.com/v1/types/v1/schema.json",N="https://ad-formats.advertising.aol.com/v1/types/json-schema/draft-04/schema.json",M={CUSTOM_TYPES_URL:V,DRAFT_04_URL:N,getDefaults:function(e){var t=this,n=document.querySelectorAll("script[".concat("data-craft-content","]"));n&&0!==n.length?this.all([function(e){return t.loadJSON(V,e)},function(e){return t.loadJSON(N,e)},function(e){return t.loadAjv(e)}],(function(t){var i=R(t,3),r=i[0],o=i[1],a=new(0,i[2])({allErrors:!0,useDefaults:!0,extendRefs:!0,schemaId:"auto"});a.addMetaSchema(o),a.addSchema(r,V);for(var c={},s=0;s<n.length;s++){var d=n[s],u=d.getAttribute("data-craft-content");if(u&&0!==u.length)if(c[u])D.warn("ContentScripts",'Duplicate "'.concat(u,'" ').concat("data-craft-content"," scripts defined. Names must be unique."));else{var l=void 0;try{l=JSON.parse(d.innerText)}catch(e){D.warn("ContentScripts",'JSON parse error in "'.concat(u,'" ').concat("data-craft-content",":"),e.message);continue}var f=void 0,h={};if(l.$schema)f=l;else{if(!l.schema){D.warn("ContentScripts",'Missing "'.concat(u,'" schema.'));continue}f=l.schema,h=l.default||{}}var p=void 0;try{p=a.compile(f)}catch(e){D.warn("ContentScripts",'In "'.concat(u,'" schema:'),e.message);continue}p(h),p.errors?D.warn("ContentScripts",'In "'.concat(u,'":'),p.errors):(l.form&&!Array.isArray(l.form)&&D.warn("ContentScripts",'The optional "form" key for "'.concat(u,'" ').concat("data-craft-content"," must be an array.")),c[u]=h)}else D.warn("ContentScripts","Content name missing from ".concat("data-craft-content"," attribute."))}e(c)}),(function(t){D.warn("ContentScripts",t.message),e({})})):e({})},all:function(e,t,n){var i=0,r=[],o=!1;e.forEach((function(a,c){a((function(a,s){if(a&&!o)return n(a),void(o=!0);i++,r[c]=s,i===e.length&&t(r)}))}))},loadAjv:function(e){var t=document.createElement("script");t.src="https://cdn.cmp.advertising.com/libraries/ajv-6.1.0.js",t.addEventListener("load",(function(){e(null,window.Ajv)})),t.addEventListener("error",(function(t){e(t)})),document.head.appendChild(t)},loadJSON:function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",(function(){if(n.status<200||n.status>299)t(new Error("".concat(n.status," - ").concat(n.responseText)));else{var e;try{e=JSON.parse(n.responseText)}catch(e){return void t(e)}t(null,e)}})),n.addEventListener("error",(function(e){t(e)})),n.addEventListener("abort",(function(e){t(e)})),n.open("GET",e),n.send()}},_={ready:function(e){var t=function(){return e()};if("complete"===document.readyState)return t();document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t))}};function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t,this.cleanup()}var t,n,i;return t=e,(n=[{key:"cleanup",value:function(){this.eventTypes={}}},{key:"on",value:function(e,t,n){this.eventTypes[e]=this.eventTypes[e]||[];for(var i=0;i<this.eventTypes[e].length;i++)if(this.eventTypes[e][i].handler===t)return;this.eventTypes[e].push({thisArg:n,handler:t})}},{key:"off",value:function(e,t,n){var i=this;this.eventTypes[e]&&this.eventTypes[e].forEach((function(r,o){r.handler===t&&r.thisArg===n&&i.eventTypes[e].splice(o,1)}))}},{key:"hasEventListener",value:function(e,t,n){if(!this.eventTypes[e]||0===this.eventTypes[e].length)return!1;var i=!0,r=!1,o=void 0;try{for(var a,c=this.eventTypes[e][Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value;if(s.handler===t&&s.thisArg===n)return!0}}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return!1}},{key:"trigger",value:function(e){var t;"string"==typeof e&&(e=new l(e)),this.eventTypes[e.type]&&(e.target||(e.target=this.target),e.currentTarget=this.target,t=e.callbackArguments?e.callbackArguments:[e],this.eventTypes[e.type].forEach((function(e){e.thisArg?e.handler.apply(e.thisArg,t):e.handler.apply(e,t)})))}}])&&x(t.prototype,n),i&&x(t,i),e}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=G(this,H(t).call(this,e)),n&&(i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),t}(l);U.DOM_LOAD="DOMLoad",U.FOCUS="focus",U.BLUR="blur",U.LOAD="pageLoad",U.SCROLL="pageScroll",U.RESIZE="pageResize",U.ORIENTATION_CHANGE="orientationChange";var $=U;function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventDispatcher=new j,this.targetFrameOrWindow=t,window.addEventListener("message",this.handlePostMessage.bind(this))}var t,n,i;return t=e,(n=[{key:"handlePostMessage",value:function(e){e.data&&e.data.topic&&this.eventDispatcher.trigger(new m(e.data.topic,e.data.meta))}},{key:"send",value:function(e,t){this.postMessage({topic:e,meta:t},"*")}},{key:"on",value:function(e,t,n){return this.eventDispatcher.on(e,t,n)}},{key:"off",value:function(e,t,n){return this.eventDispatcher.off(e,t,n)}},{key:"postMessage",value:function(){if(this.targetFrameOrWindow)try{var e=this.targetFrameOrWindow;try{e.nodeName&&"IFRAME"===e.nodeName&&(e=this.targetFrameOrWindow.contentWindow)}catch(e){}e.postMessage.apply(e,arguments)}catch(e){}}},{key:"cleanup",value:function(){window.removeEventListener("message",this.handlePostMessage)}}])&&J(t.prototype,n),i&&J(t,i),e}(),Q="ready",K="error",Y="audioVolumeChange",q="exposureChange",X="sizeChange",B="stateChange",Z="viewableChange",ee="default",te={currentPosition:{x:0,y:0,width:0,height:0},defaultPosition:{x:0,y:0,width:0,height:0},env:null,exposure:{exposedPercentage:0,visibleRectangle:{x:0,y:0,width:0,height:0},occlusionRectangles:[]},location:{lat:0,lon:0,type:0,accuracy:0,lastfix:0,ipservice:""},maxSize:{width:0,height:0},orientation:{orientation:"",locked:!1},orientationProperties:{allowOrientationChange:!0,forceOrientation:""},placementType:"",screenSize:{width:0,height:0},state:"loading",supports:{sms:!1,tel:!1,calendar:!1,storePicture:!1,inlineVideo:!1,vpaid:!1,location:!1},viewable:!1,volumePercentage:100},ne="mraid.init",ie="mraid.createCalendarEvent",re="mraid.setOrientationProperties",oe="mraid.playVideo",ae="mraid.storePicture",ce="mraid.unload",se="mraid.ready",de="mraid.audioVolumeChange",ue="mraid.error",le="mraid.exposureChange",fe="mraid.locationChange",he="mraid.orientationChange",pe="mraid.positionChange",ge="mraid.sizeChange",ve="mraid.stateChange",me="mraid.viewableChange";function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Ae=new W(window.parent),be=new j,we={get delivrMessenger(){return Ae},get eventDispatcher(){return be},init:function(e){var t=this,n=e.mode,i=e.ready;this.readyCallback=i,n===o?(Ae.on(se,this.handleReady,this),Ae.on(ue,this.handleError,this),Ae.on(de,this.handleAudioVolumeChange,this),Ae.on(le,this.handleExposureChange,this),Ae.on(fe,this.handleLocationChange,this),Ae.on(he,this.handleOrientationChange,this),Ae.on(pe,this.handlePositionChange,this),Ae.on(ge,this.handleSizeChange,this),Ae.on(ve,this.handleStateChange,this),Ae.on(me,this.handleViewableChange,this),Ae.send(ne,{AdAPI:y.AdAPI})):(setTimeout((function(){t.handleReady({meta:{env:{appId:"",coppa:!1,ifa:"",sdk:"$AD mock SDK",sdkVersion:"0.0.0-dev",version:"3.0",limitAdTracking:!1},screenSize:{width:window.innerWidth,height:window.innerHeight},state:ee}})}),1e3),window.addEventListener("resize",(function(){t.handleSizeChange({meta:{width:window.innerWidth,height:window.innerHeight}})})))},cleanup:function(){Ae.off(se,this.handleReady,this),Ae.off(ue,this.handleError,this),Ae.off(de,this.handleAudioVolumeChange,this),Ae.off(le,this.handleExposureChange,this),Ae.off(fe,this.handleLocationChange,this),Ae.off(he,this.handleOrientationChange,this),Ae.off(pe,this.handlePositionChange,this),Ae.off(ge,this.handleSizeChange,this),Ae.off(ve,this.handleStateChange,this),Ae.off(me,this.handleViewableChange,this),be.cleanup(),delete window.MRAID_ENV},handleReady:function(e){var t=e.meta;ye(te,t),window.MRAID_ENV=te.env,this.eventDispatcher.trigger(Q),this.readyCallback()},handleError:function(e){var t=e.meta;this.eventDispatcher.trigger(new P(K,t))},handleAudioVolumeChange:function(e){var t=e.meta;te.volumePercentage=t.volumePercentage,this.eventDispatcher.trigger(new P(Y,{callbackArguments:[t.volumePercentage]}))},handleExposureChange:function(e){var t=e.meta;te.exposure=t,this.eventDispatcher.trigger(new P(q,{callbackArguments:[t.exposedPercentage,t.visibleRectangle,t.occlusionRectangles]}))},handleLocationChange:function(e){var t=e.meta;te.location=t},handleOrientationChange:function(e){var t=e.meta;te.orientation=t},handlePositionChange:function(e){var t=e.meta;te.currentPosition.x=t.x,te.currentPosition.y=t.y},handleSizeChange:function(e){var t=e.meta;te.currentPosition.width=t.width,te.currentPosition.height=t.height,this.eventDispatcher.trigger(new P(X,{callbackArguments:[t.width,t.height]}))},handleStateChange:function(e){var t=e.meta;te.state=t.state,this.eventDispatcher.trigger(new P(B,{callbackArguments:[t.state]}))},handleViewableChange:function(e){var t=e.meta;te.viewable=t.isViewable,this.eventDispatcher.trigger(new P(Z,{callbackArguments:[t.isViewable]}))}},Ce={addEventListener:function(e,t){we.eventDispatcher.on(e,t),e===q?window.$AD.ready((function(){we.handleExposureChange({meta:te.exposure})})):e===Y&&window.$AD.ready((function(){we.handleAudioVolumeChange({meta:{volumePercentage:te.volumePercentage}})}))},removeEventListener:function(e,t){we.eventDispatcher.off(e,t)},open:function(e){window.$AD.click("default",{url:e})},close:function(){window.$AD.close()},unload:function(){we.delivrMessenger.send(ce)},playVideo:function(e){we.delivrMessenger.send(oe,{url:e})},storePicture:function(e){we.delivrMessenger.send(ae,{url:e})},createCalendarEvent:function(e){we.delivrMessenger.send(ie,e)},useCustomClose:function(){return!1},isViewable:function(){return te.viewable},getVersion:function(){return te.version},supports:function(e){return te.supports[e]},getPlacementType:function(){return te.placementType},getOrientationProperties:function(){return te.orientationProperties},setOrientationProperties:function(e){te.orientationProperties=e,we.delivrMessenger.send(re,e)},getCurrentAppOrientation:function(){return te.orientation},getCurrentPosition:function(){return te.currentPosition},getDefaultPosition:function(){return te.defaultPosition},getState:function(){return te.state},getMaxSize:function(){return te.maxSize},getScreenSize:function(){return te.screenSize},getLocation:function(){return te.location}},Ee={};["unload","playVideo","storePicture","createCalendarEvent","setOrientationProperties"].forEach((function(e){Ee[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return D.log.apply(D,[e].concat(n))}}));["addEventListener","removeEventListener","open","close","getVersion","supports","getPlacementType","getOrientationProperties","getCurrentAppOrientation","getCurrentPosition","getDefaultPosition","getState","getMaxSize","getScreenSize","getLocation","isViewable"].forEach((function(e){Ee[e]=function(){return Ce[e].apply(Ce,arguments)}}));var Se=Ee;var Oe={create:function(e){var t=e.mode,n=e.ready;window.mraid=t===i?Se:Ce,we.init({mode:t,ready:n})},cleanup:function(){delete window.mraid,we.cleanup()}},Le="vpaid.callMethod",Te="vpaid.ready",ke="vpaid.syncState",Pe="vpaid.event";function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var De=new W(window.parent),Re={AdCompanions:"",AdDuration:15,AdExpanded:!1,AdHeight:1,AdIcons:!1,AdLinear:!0,AdRemainingTime:0,AdSkippableState:!1,AdVolume:1,AdWidth:1},Ve={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdImpression:"AdImpression",AdStopped:"AdStopped",AdSizeChange:"AdSizeChange",AdUserClose:"AdUserClose",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdError:"AdError",AdLinearChange:"AdLinearChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdDurationChange:"adDurationChange",AdVolumeChange:"AdVolumeChange",AdUserMinimize:"AdUserMinimize",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog"},Ne="collapseAd",Me="expandAd",_e="initAd",xe="pauseAd",je="resizeAd",Fe="resumeAd",Ge="setAdVolume",He="skipAd",ze="startAd",Ue="stopAd",$e={init:function(e){var t=this,n=e.ready,i=void 0===n?null:n;this.readyCallback=i,this.vpaidAd=null,Object.keys(Re).forEach((function(e){var n="get".concat(e);t[n]=function(){return t.debugLog("".concat(n," -> ").concat(Re[e])),t.invokeVpaidGetterInAd(n)}})),De.on(Le,(function(e){return t.handleEvent(e)}));_.ready((function(){t.vpaidAd||(t.vpaidAd=window.getVPAIDAd(),t.subscribeToEventsFromAd(),t.preventAutoTrigger([]),t.debug(),t.debugLog("Sending Ready to Delivr"),t.delivrMessenger.send(Te))}))},handleEvent:function(e){var t=e.meta;t&&t.methodName&&this[t.methodName]&&(this.debugLog("Calling ".concat(t.methodName," with "),t.params),this[t.methodName].apply(this,t.params))},cleanup:function(){var e=this;this.debugLog("CleanUP"),De.off(Le,(function(t){return e.handleEvent(t)}))},initAd:function(e,t,n,i,r,o){this.invokeVpaidMethodInAd(_e,arguments),this.autoDispatchEvent(Ve.AdLoaded),this.readyCallback&&this.readyCallback()},startAd:function(){this.invokeVpaidMethodInAd(ze),this.autoDispatchEvent(Ve.AdStarted),clearInterval(this.sendStateInterval),this.sendStateInterval=setInterval(this.sendStateOfChangedGetters.bind(this),500)},stopAd:function(){clearInterval(this.sendStateInterval),this.invokeVpaidMethodInAd(Ue),this.autoDispatchEvent(Ve.AdStopped)},skipAd:function(){clearInterval(this.sendStateInterval),this.invokeVpaidMethodInAd(He),this.autoDispatchEvent(Ve.AdSkipped)},resizeAd:function(e,t,n){this.invokeVpaidMethodInAd(je,arguments),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ve.AdSizeChange)},pauseAd:function(){this.invokeVpaidMethodInAd(xe),clearInterval(this.sendStateInterval),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ve.AdPaused)},resumeAd:function(){this.invokeVpaidMethodInAd(Fe),this.sendStateInterval=setInterval(this.sendStateOfChangedGetters.bind(this),500),this.autoDispatchEvent(Ve.AdPlaying)},expandAd:function(){this.invokeVpaidMethodInAd(Me),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ve.AdExpandedChange)},collapseAd:function(){this.invokeVpaidMethodInAd(Ne),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ve.AdExpandedChange)},setAdVolume:function(e){this.invokeVpaidMethodInAd(Ge,[e]),this.sendStateOfChangedGetters(),this.autoDispatchEvent(Ve.AdVolumeChange)},get delivrMessenger(){return De},debugLog:function(e){if(this.debugConsoleLogsEnabled&&!this.debugLogTemporarilySuppressed){var t=[].slice.call(arguments);t.unshift("[$AD VPAID]"),console.log.apply(console,t)}},suppressDebugLog:function(){this.debugLogTemporarilySuppressed=!0},enableDebugLog:function(){this.debugLogTemporarilySuppressed=!1},debug:function(){this.debugConsoleLogsEnabled=!0},debugWarn:function(e){console.warn("[$AD VPAID]",e)},subscribeToEventsFromAd:function(){if("function"==typeof this.vpaidAd.subscribe){for(var e in Ve)if(Ve.hasOwnProperty(e)){var t=Ve[e];this.vpaidAd.subscribe(this.handleVPAIDEventFromAd,t,this)}}else this.debugWarn("Ad did not implement the subscribe() VPAID method. To trigger its own events it must call $AD.vpaid.trigger('Ad...')")},handleVPAIDEventFromAd:function(e){var t;"string"==typeof e?t=e:"object"===Ie(e)&&"string"==typeof e.type&&(t=e.type),Ve.hasOwnProperty(t)&&this.trigger(t)},trigger:function(e){this.debugLog("trigger event",[e]),this.delivrMessenger.send(Pe,{type:e})},invokeVpaidMethodInAd:function(e,t){t?this.debugLog(e,t):this.debugLog(e),"function"==typeof this.vpaidAd[e]?this.vpaidAd[e].apply(this.vpaidAd,t):this.debugWarn("Ad did not implement "+e+"().")},invokeVpaidGetterInAd:function(e){this.debugLog(e);var t=e.substring(3),n=Re[t];return"function"==typeof this.vpaidAd[e]?this.vpaidAd[e]():(this.debugWarn("Ad did not implement "+e+"(). Using default of "+n+"."),n)},autoDispatchEvent:function(e){this.isEventPreventedAutoTrigger(e)?this.debugLog("Suppressing autoTriggerEvent",[e]):(this.debugLog("autoTriggerEvent",[e]),this.trigger(e))},preventAutoTrigger:function(e){this.preventedAutoTriggeredEvents=e},getSuppressedEvents:function(){return this.preventedAutoTriggeredEvents},isEventPreventedAutoTrigger:function(e){return this.preventedAutoTriggeredEvents.indexOf(e)>=0},sendStateOfChangedGetters:function(){var e=this.getStateOfChangedGetters();e&&(this.debugLog("sendStateOfChangedGetters",e),this.delivrMessenger.send(ke,e))},getStateOfChangedGetters:function(){var e,t=this,n=this.getStateOfGetters();return this.previousStateOfGetters?Object.keys(n).forEach((function(i){t.previousStateOfGetters[i]!==n[i]&&(e||(e={}),e[i]=n[i])})):e=n,this.previousStateOfGetters=n,e},getStateOfGetters:function(){var e=this,t={};return this.suppressDebugLog(),this.vpaidAd.suppressDebugLog&&this.vpaidAd.suppressDebugLog(),Object.keys(Re).forEach((function(n){t[n]=e["get".concat(n)]()})),this.enableDebugLog(),this.vpaidAd.enableDebugLog&&this.vpaidAd.enableDebugLog(),t}},Je={init:function(){return this},preventAutoTrigger:function(e){$e.preventAutoTrigger(e)},getSuppressedEvents:function(){return $e.getSuppressedEvents()},trigger:function(e){$e.trigger(e)},stopAd:function(){$e.stopAd()}},We="normal";var Qe={create:function(e){var t=e.mode,n=e.ready;return $e.init({ready:n}),t===i&&(setTimeout((function(){$e.initAd(window.innerWidth,window.innerHeight,We,1200)}),1e3),window.addEventListener("resize",(function(){$e.resizeAd(window.innerWidth,window.innerHeight,We)}))),Je.init()},cleanup:function(){$e.cleanup()}};function Ke(){return(Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var Ye=new j,qe=new W(window.parent),Xe=0,Be={get eventDispatcher(){return Ye},get delivrMessenger(){return qe},init:function(e){var t,n=this;switch(y.mode=e.mode,y.mode){case o:_.ready((function(){return n.domLoadHandler()})),qe.on(m.topic.GLOBAL_RELAY_EVENT,(function(e){Ye.trigger(new P(e.meta.name,e.meta))})),qe.on(m.topic.INIT_COMPLETE,(function(e){n.setInitState(e.meta)})),qe.send(m.topic.INIT,{AdAPI:y.AdAPI});break;case i:_.ready((function(){n.domLoadHandler(),M.getDefaults((function(e){var t=y.configuration;t.Creative.content=e;var i=window.getVPAIDAd?u:d;n.setInitState({environment:i,container:{id:"placement"},configuration:t}),n.pageLoadTimeoutHandle=setTimeout((function(){Ye.trigger($.LOAD)}),1500)}))}));break;case r:_.ready((function(){return n.domLoadHandler()})),(t=window.parent.$AD).ready((function(){n.setInitState({environment:t.environment,container:t.container,configuration:t.config})}))}window.addEventListener("click",this.clickEventHandler)},clickEventHandler:function(){qe.send(m.topic.QUALIFIED_CLICK)},cleanup:function(){this.pageLoadTimeoutHandle&&clearTimeout(this.pageLoadTimeoutHandle)},setInitState:function(e){var t=this;if(Ke(y,e),y.configuration.Creative&&y.configuration.Creative.content&&E.addIndexToCollectionItems(y.configuration.Creative.content),this.adConfigLoadHandler(),y.mode===r)parent.mraid&&(window.mraid=parent.mraid,window.MRAID_ENV=parent.MRAID_ENV),parent.$AD&&parent.$AD.vpaid&&(window.$AD.vpaid=parent.$AD.vpaid),this.environmentReadyHandler();else{var n={mode:y.mode,ready:function(){return t.environmentReadyHandler()}};switch(y.environment){case d:Oe.create(n);break;case u:window.$AD.vpaid=Qe.create(n);break;default:this.environmentReadyHandler()}}},domLoadHandler:function(){y.domLoaded=!0,this.checkIfReady()},adConfigLoadHandler:function(){y.adConfigurationLoaded=!0,this.checkIfReady()},environmentReadyHandler:function(){y.environmentReady=!0,this.checkIfReady()},checkIfReady:function(){y.adConfigurationLoaded&&y.domLoaded&&y.environmentReady&&this.triggerReadyEvent()},queueOrCallReadyCallback:function(e){y.ready?e():y.readyCallbacks.push(e)},callQueuedReadyCallbacks:function(){y.readyCallbacks.forEach((function(e){return e()})),y.readyCallbacks=[]},triggerReadyEvent:function(){y.ready||(y.ready=!0,this.callQueuedReadyCallbacks(),Ye.trigger(new P({type:P.READY})))},sendContainerEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.topic.CONTAINER_EVENT_COMPLETE;if(y.mode!==i){var r=Ke(e,t);if(r.uid=y.container.id+Xe++,r.callback){var o=r.callback;delete r.callback;var a=function e(t){t.meta.uid===r.uid&&(qe.off(n,e),o(t))};qe.on(n,a)}qe.send(m.topic.CONTAINER_EVENT,JSON.parse(JSON.stringify(r)))}else t.callback&&setTimeout((function(){t.callback(new m(n,Ke({status:"success"},t)))}),250)}};function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tt="start",nt="stop",it=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ze(this,e),this.name=t,this.isInDevMode=n.mode===i,this.video=!!n.video}var t,n,r;return t=e,(n=[{key:"start",value:function(){this.startTime=Date.now(),this.sendTimerAction(tt)}},{key:"stop",value:function(){if(this.startTime){if(this.sendTimerAction(nt),this.isInDevMode){var e=Date.now()-this.startTime;D.log("timer ".concat(this.name),"duration: ".concat(e/1e3," seconds"))}this.startTime=null}else D.warn("timer ".concat(this.name),"Timer not started. Please call start() before stop().")}},{key:"sendTimerAction",value:function(e){var t={name:this.name,action:e,video:this.video};this.isInDevMode?D.log("timer",t):Be.delivrMessenger.send(m.topic.TIMER,t)}}])&&et(t.prototype,n),r&&et(t,r),e}(),rt=function(e,t,n){var i=y.configuration,r=i.Format.library.config.GENERIC_CLICK_KEY,o=i.Creative.clicks[e]||i.Creative.clicks[r],a=i.Format.library.config.CLICK_URL_PLACEHOLDER;if(o&&o.redirect&&o.redirect.length&&o.redirectCount&&a){for(var c=t,s=e,d=n,u="en=",l=1;l<o.redirectCount;l++)c=encodeURIComponent(c),s=encodeURIComponent(s),d&&(u=encodeURIComponent(u),d=encodeURIComponent(d),o.redirect=o.redirect.replace(u+s,u+d));return o.redirect.replace(a,c).replace(r,d||s)}return t};function ot(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ct="play",st="start",dt="firstQuartile",ut="midpoint",lt="thirdQuartile",ft="complete",ht="mute",pt="unmute",gt="pause",vt="replay",mt="resume",yt="seek",At="fullscreen",bt="skip",wt=!1,Ct=function(e,t){var n="".concat(this.label,".").concat(e);t=at({video:!0,interaction:!1},t),wt?D.log("event",n,t):Be.delivrMessenger.send(m.topic.EVENT,{name:n,overrides:t})},Et=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.label=t?"".concat(t,".video"):"video",this.timer=new it(this.label,{video:!0}),wt=n}var t,n,i;return t=e,(n=[{key:"play",value:function(){Ct.call(this,ct,{interaction:!0})}},{key:"start",value:function(){Ct.call(this,st,{durationPercentage:0}),this.timer.start()}},{key:"firstQuartile",value:function(){Ct.call(this,dt,{durationPercentage:25})}},{key:"midpoint",value:function(){Ct.call(this,ut,{durationPercentage:50})}},{key:"thirdQuartile",value:function(){Ct.call(this,lt,{durationPercentage:75})}},{key:"complete",value:function(){Ct.call(this,ft,{durationPercentage:100}),this.timer.stop()}},{key:"mute",value:function(){Ct.call(this,ht)}},{key:"unmute",value:function(){Ct.call(this,pt,{interaction:!0})}},{key:"pause",value:function(){Ct.call(this,gt),this.timer.stop()}},{key:"resume",value:function(){Ct.call(this,mt,{interaction:!0}),this.timer.start()}},{key:"replay",value:function(){Ct.call(this,vt,{interaction:!0})}},{key:"seek",value:function(){Ct.call(this,yt,{interaction:!0})}},{key:"fullscreen",value:function(){Ct.call(this,At,{interaction:!0})}},{key:"skip",value:function(){Ct.call(this,bt)}}])&&ot(t.prototype,n),i&&ot(t,i),e}(),St={get config(){return JSON.parse(JSON.stringify(y.configuration))},get environment(){return y.environment},get container(){return JSON.parse(JSON.stringify(y.container))},get content(){return JSON.parse(JSON.stringify(y.configuration.Creative.content||null))},get geolocation(){return JSON.parse(JSON.stringify(y.configuration.User.geolocation||null))},click:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";if(t.path){var i=E.evaluateNameAndLabel(e,t);e=i.name,n=i.reportingLabel}var r=t.overrides||{},o=y.configuration.Creative.clicks;(e=E.checkForImpliedContentPrefix(e,o)).toString().indexOf("content.")>-1&&n&&(n="content."+n);var a,c=o[e]||{},s={name:e};n&&n!==e&&(s.reportingLabel=n),r.url&&(s.overrides=r),r&&r.url?a=rt(e,r.url,s.reportingLabel):c.url&&(a=rt(e,c.url,s.reportingLabel));var u=c.target||r.target||t.target||"_blank";y.environment===d&&(s.url=t.url),Be.delivrMessenger.send(m.topic.CLICK,s),y.environment!==d&&a&&a.length>0&&window.open(a,u)},close:function(e){var t={name:s.CLOSE,state:c.DEFAULT,container:{id:a.FLOATING}};Be.sendContainerEvent(t,e)},contract:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:s.CONTRACT,state:c.DEFAULT,container:{id:y.container.id||a.PLACEMENT}};Be.sendContainerEvent(t,e)},event:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";if(t.path){var i=E.evaluateNameAndLabel(e,t);e=i.name,n=i.reportingLabel}var r=y.configuration.Creative.events;(e=E.checkForImpliedContentPrefix(e,r)).toString().indexOf("content.")>-1&&n&&(n="content."+n);var o={name:e};n&&n!==e&&(o.reportingLabel=n),t.overrides&&(o.overrides=t.overrides),t.suppressTracking&&(o.suppressTracking=!0),t.global&&(o.global=!0),t.meta&&(o.meta=t.meta),Be.delivrMessenger.send(m.topic.EVENT,o)},expand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:s.EXPAND,state:c.EXPAND,container:{id:y.container.id||a.PLACEMENT}};Be.sendContainerEvent(t,e)},off:function(e,t){Be.eventDispatcher.off(e,t)},on:function(e,t){Be.eventDispatcher.on(e,t)},ready:function(e){Be.queueOrCallReadyCallback(e)},show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:s.SHOW,state:c.DEFAULT,container:{id:a.FLOATING}};Be.sendContainerEvent(t,e)},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:s.HIDE,state:c.DEFAULT,container:{id:a.FLOATING}};Be.sendContainerEvent(t,e)},getTimer:function(e){return new it(e,{mode:y.mode})},getVideoLogger:function(e){return new Et(e)}};St.collapse=St.contract;var Ot=St,Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.parent,t=e.$AD,n={ready:Ot.ready,get config(){return t.config},get environment(){return t.environment},get container(){return t.container},get content(){return t.content},get geolocation(){return t.geolocation}},i=["click","close","contract","collapse","event","expand","off","on","show","hide","getTimer","getVideoLogger"];return i.forEach((function(e){return n[e]=t[e]})),n},Tt={get config(){return Ot.config},get environment(){return Ot.environment},get container(){return Ot.container},get content(){return Ot.content},get geolocation(){return Ot.geolocation},click:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.path&&(e=E.evaluateName(e,t));var n=t.overrides||{},i=n.url||t.url;if(!n.url&&t.path)try{var r=E.get(y.configuration.Creative.content,e);r&&r.url&&(i=r.url)}catch(t){return void D.warn("click","path not found:"+e)}i&&i.length>0&&window.open(i,"_blank"),D.log("click",t)},getVideoLogger:function(e){return new Et(e,!0)}};["close","collapse","contract","event","expand","hide","show"].forEach((function(e){Tt[e]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return D.log.apply(D,[e].concat(n))}}));["getTimer","off","on","ready"].forEach((function(e){Tt[e]=function(){return Ot[e].apply(Ot,arguments)}}));var kt=Tt,Pt=window===window.parent?i:o,It=document.querySelector('meta[name="ad.frame"]');Pt!==i&&It&&"child"===It.getAttribute("content")&&(Pt=r),window.$AD=Pt===r?Lt():Pt===i?kt:Ot,Be.init({mode:Pt})}]);
//# sourceMappingURL=AD-1.4.2.js.map