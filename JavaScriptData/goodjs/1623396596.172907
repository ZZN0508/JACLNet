(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{"8e02":function(e,t,r){"use strict";r.r(t);var n=r("44ad"),o=r.n(n),i=r("d869"),a=r.n(i),s=r("8af1"),c=r.n(s),l=r("63f1"),u=r.n(l),f=r("0a81"),d=r("a9a1"),p=r("ea0d"),m=r("8a2d"),h=(r("0592"),r("0b3c")),g={0:"#CCCCCC",1:"#A2DB00",2:"#DA0000",3:"#DA0000"},y=h.d.div(["background:#7b0000;border-bottom:solid 1px #a60000;height:60px;line-height:60px;box-sizing:border-box;a{box-sizing:border-box;padding:0 20px;display:block;width:100%;height:100%;}&:hover{background:#a60000;}"]),C=h.d.span(["padding-left:12px;font-size:12px;color:#ed7a7a;"]),b=h.d.span(["float:right;font-size:36px;color:",";"],(function(e){var t=e.status;return g[t]})),E=h.d.span(["display:inline-block;vertical-align:middle;border-radius:50%;height:40px;width:40px;position:relative;i,&::before{display:block;height:40px;width:40px;background-size:cover;background-position:center;background-repeat:no-repeat;border-radius:50%;position:absolute;top:0;left:0;}"]),v=r("bb1d"),S=r("1cab");function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(){S.default.trackGenericEvent({eventLabel:"History model click",eventCategory:S.GA_CONST.PAGE.LISTS})},I=function(e){var t=e.id,r=e.displayName,i=e.status,l=e.profilePictureUrl,u=void 0===l?n.Config.get("newPerformerImageSmall"):l,f=_(Object(s.useState)(i),2),d=f[0],p=f[1],m=Object(s.useCallback)((function(e){var r=parseInt(e[t],10);r&&d!==r&&p(r)}),[t,d]);return Object(s.useEffect)((function(){return o.a.Broadcaster.on(a.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,m),function(){return o.a.Broadcaster.un(a.a.BasicController.GLOBALEVENT_GLOBAL_STATUS_CHANGE,m)}}),[m]),c.a.createElement(y,{"data-performer-id":t,onClick:P,"data-testid":"PerformerHistoryItemItem"},c.a.createElement(v.a,{href:Object(n.getUrl)("Chat/Performer",{performerId:r},{}),to:"chat/".concat(r),trigger:!0,preventNavigateBack:!0,title:r,"data-testid":"PerformerHistoryItemRouteManagerLink"},c.a.createElement(E,{"data-testid":"PerformerHistoryItemAvatar"},c.a.createElement("i",{style:{backgroundImage:"url(".concat(u,")")}})),c.a.createElement(C,{"data-testid":"PerformerHistoryItemPerformerName"},r),c.a.createElement(b,{status:d,"data-testid":"PerformerHistoryItemStatus"},"â€¢")))};I.propTypes={id:m.number.isRequired,displayName:m.string.isRequired,status:m.number,profilePictureUrl:m.string.isRequired},I.defaultProps={status:0};var k=I;function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=c.a.memo((function(e){var t=e.order,r=e.collection;return t.map((function(e){return c.a.createElement(k,{key:"phi_".concat(e),id:r[e].id,displayName:r[e].displayName,status:r[e].status,profilePictureUrl:r[e].url,"data-testid":"PerformerHistoryComponentPerformerHistoryItem"})}))})),B=function(){var e=L(Object(s.useState)(!1),2),t=e[0],r=e[1],n=Object(p.a)(),i=n.order,l=n.collection,u=function(e){var t=e.isOpened;r(t)};return Object(s.useEffect)((function(){return o.a.Broadcaster.on(a.a.PerformerHistory.TOGGLE_SIDEBAR,u),function(){o.a.Broadcaster.un(a.a.PerformerHistory.TOGGLE_SIDEBAR,u)}}),[]),t?c.a.createElement(A,{order:i,collection:l,"data-testid":"PerformerHistoryComponentList"}):null},w=r("dace"),T=r("9042"),D=r("990a"),R=r.n(D),N=r("124a"),M=r.n(N),G=r("d7c3"),H=r.n(G);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t,r){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var o=W(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(s,e);var t,r,n,i=z(s);function s(){return U(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"name",get:function(){return"ListPageIndex"}},{key:"listPageComponentName",get:function(){return R.a}},{key:"hideCls",get:function(){return"hide"}},{key:"orderDropDownId",get:function(){return"order_dropdown"}},{key:"myContentDropDownId",get:function(){return"category_dropdown"}},{key:"languageDropDownId",get:function(){return"language_dropdown"}},{key:"isRandomPlayerEnabled",get:function(){return!0}},{key:"isPerformerSwapEnabled",get:function(){return!0}},{key:"sidebarCategorySel",get:function(){return".category_item"}},{key:"listpageContainerId",get:function(){return"listpage_container"}},{key:"toggleSidebarButton",get:function(){return".toggle_sidebar_button"}},{key:"init",value:function(e,t){u.a.render(c.a.createElement(f.a,{store:d.store},c.a.createElement(B,null)),document.querySelector(".sidebar_history")),this._sidebarCategories=Ext.getBody().select(".sidebar_categories").item(0),this._activeCategoryTab=this._sidebarCategories&&this._sidebarCategories.data("activetab"),this._setOrderComponent(),this._setSelectComponent(),this._setLanguageComponent(),q(W(s.prototype),"init",this).call(this,e,t),this.showMoreJson=o.a.Config.get("listPageRoutes").showMoreJson||"Index/ShowMoreJson"}},{key:"_setOrderComponent",value:function(){return this._refreshContentByOrderCmp instanceof H.a||!Ext.get(this.orderDropDownId)||(this._refreshContentByOrderCmp=new H.a(this.orderDropDownId,{hideCls:this.hideCls})),this._refreshContentByOrderCmp}},{key:"_setSelectComponent",value:function(){return this._myContentSelectCmp instanceof M.a||!Ext.get(this.myContentDropDownId)||(this._myContentSelectCmp=new M.a(this.myContentDropDownId,{})),this._myContentSelectCmp}},{key:"_setLanguageComponent",value:function(){return this._languageSelectCmp instanceof M.a||!Ext.get(this.languageDropDownId)||(this._languageSelectCmp=new M.a(this.languageDropDownId,{})),this._languageSelectCmp}},{key:"_destroyOrderComponent",value:function(){this._refreshContentByOrderCmp&&(this._refreshContentByOrderCmp.controller.destroy(),delete this._refreshContentByOrderCmp.controller,this._refreshContentByOrderCmp.destroy(),delete this._refreshContentByOrderCmp)}},{key:"onToggleSidebarButtonClick",value:function(e,t){Ext.getBody().toggleClass("sidebar-closed"),Ext.get(t).toggleClass("open"),o.a.fireEvent(a.a.IndexIndex.GLOBALEVENT_TOGGLE_SIDEBAR_BUTTON_CLICK,this)}},{key:"hasHistoryDataInStorage",value:function(){var e=JSON.parse(localStorage.getItem(a.a.PerformerHistory.PERFORMERS_HISTORY_STORAGE_KEY));return(null==e?void 0:e.order.length)>0}},{key:"onSidebarCategoryClick",value:function(e){var t=this,r=e.getTarget(".category_item",4,!0);if((r.data("tabid")===this._activeCategoryTab||r.hasClass("history"))&&e.preventDefault(),r.hasClass("history"))if(this.hasHistoryDataInStorage())Ext.getBody().toggleClass("history-open"),o.a.fireEvent(a.a.PerformerHistory.TOGGLE_SIDEBAR,{isOpened:!0}),S.default.trackGenericEvent({eventLabel:"Side menu - History Icon",eventCategory:S.GA_CONST.PAGE.LISTS});else{var n=this.createHistoryPopoverContainer(r.dom);u.a.render(c.a.createElement(T.b,{content:o.a.translate("Your history is empty."),isOpen:!0,autoHideDelay:4e3,position:w.a.BOTTOM,onClosed:function(){return t.unmountHistoryPopover()},target:c.a.createElement("div",null)}),n),S.default.trackGenericEvent({eventLabel:"Side menu - History Icon - History empty",eventCategory:S.GA_CONST.PAGE.LISTS})}else Ext.getBody().removeClass("history-open"),o.a.fireEvent(a.a.PerformerHistory.TOGGLE_SIDEBAR,{isOpened:!1})}},{key:"createHistoryPopoverContainer",value:function(e){var t=document.querySelector(".history_popover_container");if(t)return t;var r=document.createElement("div");return r.className="history_popover_container",e.appendChild(r)}},{key:"unmountHistoryPopover",value:function(){var e=document.querySelector(".history_popover_container");e&&(u.a.unmountComponentAtNode(e),e.parentNode.removeChild(e))}},{key:"onLogIn",value:function(){this._destroyOrderComponent(),this._setOrderComponent()}},{key:"bind",value:function(){q(W(s.prototype),"bind",this).call(this),o.a.on([{element:o.a.Broadcaster,event:a.a.LoginComponent.GLOBALEVENT_LOG_IN,handler:this.onLogIn,scope:this},{element:this.element,event:"click",handler:this.onToggleSidebarButtonClick,options:{delegate:this.toggleSidebarButton}},{element:this.element,event:"click",handler:this.onSidebarCategoryClick,options:{delegate:this.sidebarCategorySel}}],this)}}])&&V(t.prototype,r),n&&V(t,n),s}(r("1e4a").default);t.default=Y},"990a":function(e,t,r){var n=r("d59f").default,o=r("e91e"),i=r("fec8"),a=r("f244"),s=function(e,t){s.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(s,n,{name:"IndexListPageComponent",controllerClassName:o,viewClassName:i,modelClassName:a,listPageControllerListeners:{IndexBroadcaster:{"header-logo-click":"onHeaderLogoClick","live-cams-link-click":"onHeaderLogoClick"}},_setController:function(){s.superclass._setController.call(this),this.enablePerformerSwap()}})},e91e:function(e,t,r){var n=r("44ad"),o=r("7ab0"),i=r("768e"),a=r("b356").default,s=r("8c4f").disableActiveCampaign,c=a.EVENT.MEMBER.FEEDBACK_LEVEL_CHANGED,l=a.EVENT.MEMBER.SMART_BUY_SUCCESS,u=a.EVENT.MEMBER.CAMPAIGN_USED,f=a.EVENT.MEMBER.CAMPAIGN_CLAIMED,d=a.EVENT.MEMBER.CAMPAIGN_DISABLED,p=function(e,t){p.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(p,i,{name:"IndexListPageController",init:function(e,t){p.superclass.init.call(this,e,t);var r=n.bind(this.ListPageModel.refreshCommercial,this.ListPageModel),o=a.getClient();o.on(c,r),o.on(l,r),o.on(u,r),o.on(f,r),o.on(d,(function(){r(),s()}))},onHeaderLogoClick:function(e){if(!o.isHokkaido()&&!this.ListPageModel.needPageReload()&&"0"===n.getMeta("isSearchPage")){e.preventDefault();var t={orderType:n.Config.get("listPageOrderType")};this.onRefreshListPage(t)}},onLoggedIn:function(){p.superclass.onLoggedIn.call(this),this.refreshExistingCommercial()},onSignUpSuccess:function(){p.superclass.onSignUpSuccess.call(this),this.refreshExistingCommercial()},onFirstBillComplete:function(){p.superclass.onFirstBillComplete.call(this);var e=this;setTimeout((function(){e.refreshExistingCommercial()}),1e3)},onLuckyWheelSpun:function(){p.superclass.onLuckyWheelSpun.call(this);var e=this;setTimeout((function(){e.refreshExistingCommercial()}),4e3)},onGuestWheelOfFortuneSpun:function(){this.refreshExistingCommercial()},onCommercialCountdownEnd:function(){p.superclass.onCommercialCountdownEnd.call(this);var e=this;setTimeout((function(){e.refreshExistingCommercial()}),1e3)},onAppletQuickBuySuccess:function(){this.ListPageModel.refreshCommercial()},onQuickBuySuccess:function(){p.superclass.onQuickBuySuccess.call(this),this.refreshExistingCommercial()},onListPageCommercialABTest:function(){p.superclass.onListPageCommercialABTest.call(this),this.refreshExistingCommercial()},refreshExistingCommercial:function(){document.getElementsByClassName("commercial_container").length&&this.ListPageModel.refreshCommercial()}})},f244:function(e,t,r){var n=r("44ad"),o=r("9810").default,i=r("d869"),a=r("b07d"),s=function(e,t){s.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(s,a,{name:"IndexListPageModel",refreshCommercial:function(){this.fetch({url:n.getUrl(this.commercialRefreshRouting,{listPageId:n.getMeta(this.listPageId),isSearchPage:n.getMeta(this.isSearchPage)},{},""),method:"POST",success:n.bind(this._onRefreshCommercialSuccess,this)}),o.init()},_onRefreshCommercialSuccess:function(e){n.hasPath(e,"json.data")&&this.fireEvent(i.ListPageModelAbstract.EVENT_SWAPPED_COMMERCIAL,e.json.data)}})},fec8:function(e,t,r){var n=r("e481").default,o=function(e,t){o.superclass.constructor.call(this,e,t)};e.exports=Ext.extend(o,n,{name:"IndexListPageView"})}}]);