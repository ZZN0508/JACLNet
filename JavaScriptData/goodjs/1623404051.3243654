(self.webpackChunkO11yRUM=self.webpackChunkO11yRUM||[]).push([[790],{254:function(e,r,n){var t,i,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,i=[r,n(795)],void 0===(o="function"==typeof(t=function(n,t){"use strict";function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var c;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t=(c=t)&&c.__esModule?c:{default:c};var f=function(){function e(r){if(function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),!r||!r.exporter)throw new Error("O11y RUM: WindowPerformanceProcessor config.exporter is not defined.");if(this.tags=r.tags,this.apiURL=r.apiURL||"localhost",this.exporter=r.exporter,!window.performance)throw new Error("O11y RUM: WindowPerformanceProcessor performance is not defined.");this.navigationEnabled=r.navigationEnabled||!1,this.resourceEnabled=r.resourceEnabled||!1,this.observerAvailable=!!window.PerformanceObserver,this.excludeFetchResources=[this.apiURL];var n,t=r.excludeFetchResources;if(t&&Array.isArray(t))for(n=0;n<t.length;n+=1){if("string"!=typeof t[n])throw new Error("O11y RUM: WindowPerformanceProcessor config.excludeFetchResources invalid value '".concat(t[n],"'."));this.excludeFetchResources.push(t[n])}this.handleTiming=this.handleTiming.bind(this),this.startProcessing()}return r=e,(n=[{key:"startProcessing",value:function(){var e=window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation");!this.navigationEnabled||e&&e.length||this.processLegacyNavigation(),this.handleTiming(window.performance),this.observerAvailable&&new window.PerformanceObserver(this.handleTiming).observe({entryTypes:["navigation","resource"]})}},{key:"processLegacyNavigation",value:function(){if(window.performance&&window.performance.timing){var e={};t.default.navigationKeys.forEach((function(r){e[r]=window.performance.timing[r]})),e.name=window.location.href,this.exporter.export({entry:e,tags:o({},this.tags)},"navigation")}}},{key:"handleTiming",value:function(e){var r=this;if(e&&e.getEntriesByType){var n=o({},this.tags),t=e.getEntriesByType("resource");if(this.resourceEnabled&&t&&t.length){var i=t.filter((function(e){return!r.excludeFetchResources.includes(e.name)}));i.length&&this.exporter.export({entries:i,tags:n},"resource")}var a=e.getEntriesByType("navigation");this.navigationEnabled&&a&&a.length&&this.exporter.export({entry:a[0],tags:n},"navigation"),e.clearResourceTimings&&e.clearResourceTimings()}}}])&&s(r.prototype,n),i&&s(r,i),e;var r,n,i}();n.default=f,e.exports=r.default})?t.apply(r,i):t)||(e.exports=o)}}]);