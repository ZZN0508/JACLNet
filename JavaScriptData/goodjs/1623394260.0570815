!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=48)}([function(t,e,n){"use strict";var r=i(window).nsVersion;function i(t){var e=t.com=t.com||{};return e.oath=e.oath||{},e.oath.craft=e.oath.craft||{},e.oath.craft.delivery=e.oath.craft.delivery||{},e.oath.craft.delivery["v2.7.4"]=e.oath.craft.delivery["v2.7.4"]||{},{ns:e.oath.craft.delivery,nsVersion:e.oath.craft.delivery["v2.7.4"]}}r.createNamespace=i,e.a=r},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).trigger=i.trigger||n.trigger.EVENT,r.name=i.name,r.meta=i.meta||{},r.reportingLabel=i.reportingLabel,r}return n}(n(2).a);r.a.CreativeEvent=l,l.TRACKING_REQUEST="creativeEvent.trackingRequest",l.GLOBAL_RELAY="creativeEvent.globalRelay",l.QUALIFIED_CLICK="creativeEvent.qualifiedClick",l.trigger={CLICK:"click",EVENT:"event",TIMER_START:"start",TIMER_STOP:"stop"},e.a=l},function(t,e,n){"use strict";var r=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.target=null};n(0).a.Event=r,e.a=r},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i=e.call(this,t),r&&(i.offsetX=r.offsetX,i.offsetY=r.offsetY,i.width=r.width,i.height=r.height,i.visible=r.visible),i}return n}(n(2).a);u.FOCUS="hostPageEvent.focus",u.BLUR="hostPageEvent.blur",u.VISIBILITY_CHANGE="hostPageEvent.visibilityChange",u.LOAD="hostPageEvent.pageLoad",u.SCROLL="hostPageEvent.pageScroll",u.RESIZE="hostPageEvent.pageResize",u.ORIENTATION_CHANGE="hostPageEvent.orientationChange",r.a.HostPageEvent=u,e.a=u},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return u}));var r=n(0),i=!1;function o(t){var e=function(){if(!i)return i=!0,t()};if("complete"===document.readyState)return e();if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e);var n=!1;try{n=null===window.frameElement}catch(t){console.error(t.message)}if(document.documentElement.doScroll&&n)return function t(){if(!i){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}return e()}}()}}function a(t){if(void 0!==window.addEventListener)window.addEventListener("load",t,!1);else if(void 0!==document.addEventListener)document.addEventListener("load",t,!1);else if(void 0!==window.attachEvent)window.attachEvent("onload",t);else if("function"==typeof window.onload){var e=window.onload;window.onload=function(){e(),t()}}else window.onload=t}function s(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}function c(t){for(var e=0,n=0;t;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return{x:e,y:n}}function u(t,e){try{return void 0!==t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,null)[e]}catch(t){return null}}r.a.DOMUtils={addDOMLoadListener:o,addPageLoadListener:a,applyStyles:s,calculateAbsolutePosition:c,getComputedStyle:u,getDocumentSize:function(){var t=document;return{width:Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth)),height:Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}}}},function(t,e,n){"use strict";n(10);var r=n(0),i=n(12),o=n(6),a=n(3),s=n(18),c=n(7);function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n,r,i,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentFactory=e,this.eventBus=new o.a(this),this.adManager=a,this.globalEventBus=a.globalEventBus,this.hostPage=a.hostPage,this.adEventBus=i.eventBus,this.advert=i,this.windowContext=window,this.id=r,this.rendered=!1,this.expanded=!1,this.closed=!1,this.advertAnchorId=n.anchorDivId,this.advertAnchorDiv=n.anchorDiv,this.advertAnchorPlaceholder=n.anchorPlaceholder,this.content=null,this.autoRender=!0,this.expandAdapter=s,this.state,this.states={},this.zIndex=10,this.init(n)}var e,n,r;return e=t,(n=[{key:"init",value:function(e){var n=e.Creative.containers[this.id];this.adConfig=e,this.copyProperties(n),this.state=this.initialState||t.state.DEFAULT,this.parentElementId&&(this.containerAnchorParent=document.getElementById(this.parentElementId),this.containerAnchorParent||(this.containerAnchorParent=document.createElement("div"),this.containerAnchorParent.id=this.parentElementId,document.body.appendChild(this.containerAnchorParent)),this.containerAnchorId=this.advertAnchorId+"_"+this.id),this.uid=this.id.replace(/[ /.-]/g,"_")+"_"+e.AdServer.cacheBuster,this.contentId=t.CONTENT_ID_PREFIX+this.uid,this.addRenderEventListeners(),this.content=this.contentFactory.getContent(this,e,this.id,this.advert,this.adManager,this.contentId),this.expandAdapter&&this.expandAdapter.init(this,this.getState(this.state))}},{key:"copyProperties",value:function(e){var n=this;u(this,e),Object.keys(this.states).forEach((function(e){var r=Object.create(t.STATE_DEFAULTS);n.states[e]=u(r,n.states[e])}))}},{key:"getState",value:function(t){return this.states.hasOwnProperty(t)?{key:t,data:this.states[t]}:null}},{key:"addRenderEventListeners",value:function(){var t=this;this.globalEventBus.on(c.a.LOAD,(function(e){return t.coreLibEventHandler(e)})),this.globalEventBus.on(a.a.LOAD,(function(e){return t.coreLibEventHandler(e)})),this.adEventBus.on(i.a.INITIALIZED,(function(e){return t.coreLibEventHandler(e)}))}},{key:"coreLibEventHandler",value:function(){this.checkAutoRender()}},{key:"checkAutoRender",value:function(){!this.rendered&&this.autoRender&&this.render()}},{key:"render",value:function(){this.rendered||this.closed||(this.rendered=!0,this.eventBus.trigger(s.a.RENDER))}},{key:"expand",value:function(t){}},{key:"contract",value:function(t){}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"reload",value:function(){}},{key:"close",value:function(){this.rendered&&(this.closed=!0,this.rendered=!1)}},{key:"getContent",value:function(){return this.content}}])&&l(e.prototype,n),r&&l(e,r),t}();f.CONTENT_ID_PREFIX="craftContent_",f.DWELL_MIN_VIEWABLE_PERCENTAGE=.5,f.ACCEPTABLE_VIEW_AREA=37500,f.UNIT_PX="px",f.state={DEFAULT:"default",EXPAND:"expand",FULLSCREEN:"fullscreen"},f.STATE_DEFAULTS={offsetX:0,offsetY:0},f.STATE_PRECEDENCE=[f.state.FULLSCREEN,f.state.EXPAND,f.state.DEFAULT],r.a.AssetContainer=f,e.a=f},function(t,e,n){"use strict";var r=n(0),i=n(14),o=(n(10),n(2));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e,this.eventTypes={}}var e,n,r;return e=t,(n=[{key:"on",value:function(t,e,n){void 0===this.eventTypes[t]&&(this.eventTypes[t]=[]),i.a(e,this.eventTypes[t])||(void 0===n?this.eventTypes[t].push(e):this.eventTypes[t].push({ref:n,handler:e}))}},{key:"off",value:function(t,e,n){var r=this;Array.isArray(this.eventTypes[t])&&this.eventTypes[t].forEach((function(i,o){var s=void 0===n?"function":"object";if(s===a(i))switch(s){case"function":i===e&&r.eventTypes[t].splice(o,1);break;case"object":i.handler===e&&i.ref===n&&r.eventTypes[t].splice(o,1)}}))}},{key:"hasEventListener",value:function(t,e,n){if(void 0===this.eventTypes[t]||0===this.eventTypes[t].length)return!1;for(var r=0;r<this.eventTypes[t].length;r++){var i=this.eventTypes[t][r],o=void 0===n?"function":"object";if(o===a(i))switch(o){case"function":if(i===e)return!0;break;case"object":if(i.handler===e&&i.ref===n)return!0}}return!1}},{key:"trigger",value:function(t){if("string"==typeof t&&(t=new o.a(t)),"string"==typeof t.type&&void 0!==this.eventTypes[t.type]){void 0!==t.target&&null!==t.target||(t.target=this.target),t.currentTarget=this.target;for(var e=this.eventTypes[t.type].slice(0),n=0;n<e.length;n++){var r=e[n];if("object"===a(r))try{r.handler.call(r.ref,t)}catch(t){}else r(t)}}}}])&&s(e.prototype,n),r&&s(e,r),t}();r.a.EventDispatcher=c,e.a=c},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).container=i.container||null,r}return n}(n(2).a);l.ATTACH="domEvent.attach",l.DETACH="domEvent.detach",l.LOAD="domEvent.load",l.BEFORE_UNLOAD="domEvent.beforeUnload",r.a.DOMEvent=l,e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"trim",value:function(t){return"string"==typeof t?t.replace(/^[\s]+|[\s]+$/g,""):""}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();r.a.StringUtils=o;var a=o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getTagOverrides",value:function(e){if("object"===s(e)&&e.anchorDivId){var n=document.getElementById(e.anchorDivId);if(n)for(var r=n.previousSibling;r&&"IMG"!==r.nodeName;){if(r.nodeType===Node.COMMENT_NODE&&r.nodeValue.indexOf(t.OVERRIDE_MARKER)>-1){var i=r.nodeValue;return t.parseOverrideComment(i)}r=r.previousSibling}}return{}}},{key:"parseOverrideComment",value:function(e){var n={};return a.trim(e).split("\n").forEach((function(e){if(!(e.indexOf(t.OVERRIDE_MARKER)>-1)){var r=e.split(t.OVERRIDE_KV_DELIM);2===r.length&&(n[a.trim(r[0])]=a.trim(r[1]))}})),n}}],(n=null)&&c(e.prototype,n),r&&c(e,r),t}();u.OVERRIDE_MARKER="##delivr.ad.overrides##",u.OVERRIDE_KV_DELIM=":",r.a.TagOverridesUtils=u;var l=u,f=n(33);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rawConfig=e,this.AdManager={},this.AdServer={},this.Platform={},this.Creative={},this.Format={},this.Integrator={},this.Regs={},this.Publisher={},this.DeliveryGroups={},this.Overrides={},this.User={},this.DeliveryServerTag={},h(this,e),this.applyDeliveryGroupConfig(),this.setOverridesFromTag(),this.setImpressionId()}var e,n,i;return e=t,(n=[{key:"setImpressionId",value:function(){var t=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);if(r.a.URLUtils){if(this.DeliveryServerTag&&this.DeliveryServerTag.variables){var e=this.DeliveryServerTag.variables||{};["impid","srvreqid","srvrid"].forEach((function(n){e[n]&&(e[n]=r.a.URLUtils.replaceCacheBuster(e[n],t))}))}this.AdServer.impressionId&&(this.AdServer.impressionId=r.a.URLUtils.replaceCacheBuster(this.AdServer.impressionId,t))}}},{key:"getOverride",value:function(t){return this.Overrides.hasOwnProperty(t)?this.Overrides[t]:null}},{key:"getFileUrl",value:function(t){return t&&!t.match(/^https?:\/\//i)?"".concat(this.AdServer.proto,"://").concat(this.Platform.cdn.host).concat(this.Creative.assetPath)+t:t}},{key:"applyDeliveryGroupConfig",value:function(){var t=this,e=this.AdServer.deliveryGroupId;if(this.DeliveryGroups[e]){var n=this.DeliveryGroups[e];n.clicks&&Object.keys(n.clicks).forEach((function(e){t.Creative.clicks.hasOwnProperty(e)&&(t.Creative.clicks[e].url=n.clicks[e].url)}))}}},{key:"setOverridesFromTag",value:function(){var t=l.getTagOverrides(this);h(this.Overrides,t)}},{key:"clone",value:function(){return h({},this._rawConfig,{Overrides:this.Overrides})}},{key:"invokeHook",value:function(t,e){if(this.Format.library&&this.Format.library.hooks&&this.Format.library.hooks[t])try{return this.Format.library.hooks[t].apply(null,e)}catch(e){Object(f.a)("[AdConfig]: error in invokeHook '".concat(t,"':"),e)}}}])&&d(e.prototype,n),i&&d(e,i),t}();v.override={RENDER_BACKUP:"renderBackup",TARGET_WINDOW:"targetWindow"},v.hookTypes={BEFORE_ADVERT_INIT:"beforeAdvertInit",AFTER_ADVERT_INIT:"afterAdvertInit",ON_SAFEFRAME_STATUS_UPDATE:"onSafeFrameStatusUpdate"},r.a.AdConfig=v;e.a=v},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return h}));var r=n(0),i=n(8),o="self",a="parent.parent",s="TOP";function c(t){t.setAttribute("allowfullscreen","true"),t.setAttribute("allowFullScreen","true"),t.setAttribute("mozallowFullScreen","true"),t.setAttribute("webkitAllowFullScreen","true")}function u(t){for(var e=[].slice.call(t.document.getElementsByTagName("iframe")),n=0;n<e.length;n++){var r=e[n];if(t===parent&&r.contentWindow===window||t===parent.parent&&r.contentWindow===window.parent)return r}return null}function l(t){var e=parent,n=document.querySelector('meta[name="delivr.ad.targetWindow"]'),r=n?n.getAttribute("content"):null;switch(t.getOverride(i.a.override.TARGET_WINDOW)||r){case o:e=window;break;case a:e=window.parent.parent;break;case s:e=window.top}return e}function f(){return window!==top}function h(){var t=!1;try{top.document&&(t=!0)}catch(t){}return t?top:window}r.a.IframeUtils={applyAllowFullScreenAttribute:c,getTargetIframeEl:u,determineTargetWindow:l,isInFriendlyIframe:function(t){var e=!1;try{this.determineTargetWindow(t).document&&(e=!0)}catch(t){}return e},isInIframe:f,topOrSelf:h}},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t)}return n}(n(2).a);u.MOUSE_OVER="mouseEvent.mouseOver",u.MOUSE_OUT="mouseEvent.mouseOut",r.a.MouseEvent=u,e.a=u},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t)).advert=r?r.advert:null,i}return n}(n(2).a);u.ADDED="advertEvent.added",u.INTERACTIVE_IMPRESSION="advertEvent.interactiveImpression",u.INITIALIZED="advertEvent.initialized",r.a.AdvertEvent=u,e.a=u},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).uid=i.uid||null,r.action=i.action,r.state=i.state||null,r.containerId=i.containerId||null,r.status=i.status||null,r.detail=i.detail||"",r}return n}(n(2).a);l.status={SUCCESS:"success",FAILURE:"failure"},l.action={EXPAND:"expand",CONTRACT:"contract"},l.ACTION_COMPLETE="containerActionCompleteEvent.actionComplete",r.a.ContainerActionCompleteEvent=l,e.a=l},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(Array.isArray(e)){if(e.indexOf(t)>=0)return!0}else for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0;return!1}function o(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n(0).a.CollectionUtils={contains:i,pick:o,recursiveReplace:function(t,e){for(var n in t)if(t.hasOwnProperty(n))if("object"!==r(t[n])||Array.isArray(t[n])){if("string"==typeof t[n])for(var i in e)if(e.hasOwnProperty(i)){var o=new RegExp(i,"g");t[n]=t[n].replace(o,e[i])}}else this.recursiveSubtitute(t[n],e)},shallowObjectEquals:a}},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{events:[]};return o(this,n),(r=e.call(this,t)).events=i.events,r}return n}(n(2).a);r.a.QualifiedStateEvent=l,l.QUALIFIED="qualifiedStateEvent.qualified",e.a=l},function(t,e,n){"use strict";var r,i=n(0),o=(n(10),n(1)),a=["[timestamp]","{random}","_ADTIME_","_TIMESTAMP_","{%r%}","%%CACHEBUSTER%%","${REQUESTID}","[CACHEBUSTER]","[INSERT_CACHEBUSTER_HERE]","${ADCALL_ID}","_ADSTAGE_"].map((function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}));function s(t,e){return t&&(e=e||+new Date,a.forEach((function(n){t=t.replace(new RegExp(n,"ig"),e)}))),t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}i.a.URLUtils={getQueryStringValue:function(t){if(!r){r={};var e=window.location.search.substr(1).split("&");if(window!==top)try{e=e.concat(top.location.search.substr(1).split("&"))}catch(t){}for(var n=0;n<e.length;n++){var i=e[n];2===(i=i.split("=")).length&&(r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")))}}return r[t]||null},replaceCacheBuster:s,CACHEBUSTER_PATTERNS:a};var l={ADTECH:["ADTECH","1AS"]},f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e}var e,n,r;return e=t,(n=[{key:"getUrls",value:function(t){var e=[];return"object"!==c(t.event)?e:(t.event.trigger===o.a.trigger.CLICK&&t.type===L.type.REDIRECT?e=[this.adConfig.AdServer.clickRedirect]:t.event.trigger===o.a.trigger.CLICK&&t.type===L.type.PIXEL?e=[this.adConfig.AdServer.clickPixel]:t.event.name===L.event.DOWNLOADED_IMPRESSION&&t.type===L.type.PIXEL&&(e=[this.adConfig.AdServer.downloadedImpressionPixel]),e.filter((function(t){return t.match(/^https?:\/\//i)})).map((function(t){return s(t)})))}},{key:"servedBy",value:function(t){var e=l[t.toUpperCase()];return!!e&&e.indexOf(this.adConfig.AdServer.name.toUpperCase())>-1}}])&&u(e.prototype,n),r&&u(e,r),t}();i.a.AdServerTracker=f;var h=f,d=n(19);function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t){return t.meta&&t.meta.video}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e}var e,n,r;return e=t,(n=[{key:"getUrls",value:function(t){var e=[];return"object"!==p(t.event)||t.type===L.type.SCRIPT||t.type===L.type.PIXEL&&t.event.trigger===o.a.trigger.CLICK?e:(e=[s(this.buildTrackingURL(t))]).filter((function(t){return t.match(/^https?:\/\//i)}))}},{key:"buildTrackingURL",value:function(e){var n=this.adConfig.AdServer.proto,r=this.adConfig.Platform.pixelServer.host.GLOBAL;if(!r)throw new Error(t.NO_PIXELSERVER_HOST_ERROR);var i="".concat(n,"://").concat(r).concat(this.adConfig.Platform.pixelServer.path.simple),a=this.isAdtechServed()?this.buildAdtechParams():{},s=this.buildDeliveryServerTagParams(),c={};this.adConfig.Creative.variation&&this.adConfig.Creative.variation.name&&(c["x.vn"]=this.adConfig.Creative.variation.name);var u=v(this.buildGenericParams(e),this.buildExternalParams(),a,s,c,this.buildExtensionParams());u=JSON.parse(JSON.stringify(v(u,a)));var l,f=e.event.trigger===o.a.trigger.CLICK?t.ENDPOINT.REDIRECT:t.ENDPOINT.EVENT;return l=e.event.trigger===o.a.trigger.CLICK?"&r=":"&".concat(+new Date),"".concat(i,"/").concat(f,"?").concat(this.buildQueryParams(u)).concat(l)}},{key:"getPixelEventType",value:function(e){var n=e.event,r=n.meta&&n.meta.eventName?n.meta.eventName:n.name;if(t.COMMON_EVENT_TYPES.hasOwnProperty(r))return t.COMMON_EVENT_TYPES[r];switch(n.trigger){case o.a.trigger.CLICK:return t.COMMON_EVENT_TYPES.click;case o.a.trigger.TIMER_STOP:case o.a.trigger.TIMER_START:return m(n)?t.COMMON_EVENT_TYPES.videoDuration:t.COMMON_EVENT_TYPES.contentDuration;default:return m(n)?n.meta&&"number"==typeof n.meta.durationPercentage?t.COMMON_EVENT_TYPES.videoDuration:n.meta&&n.meta.interaction?t.COMMON_EVENT_TYPES.videoInteraction:t.COMMON_EVENT_TYPES.video:n.meta&&n.meta.interaction?t.COMMON_EVENT_TYPES.userInteraction:t.COMMON_EVENT_TYPES.other}}},{key:"buildQueryParams",value:function(t){return Object.keys(t).map((function(e){var n=t[e];return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n))})).join("&")}},{key:"buildGenericParams",value:function(t){var e=t.event,n=e.meta||{};return{et:this.getPixelEventType(t),en:n.eventName?n.eventName:e.reportingLabel?e.reportingLabel:e.name,d:n.duration,dp:n.durationPercentage,crid:this.adConfig.Creative.id,cpid:this.adConfig.Integrator.partnerId,gdpr:this.getGDPRFlag(),euconsent:this.adConfig.Regs.gdpr.consent,us_privacy:this.adConfig.Regs.ccpa?this.adConfig.Regs.ccpa.privacy:""}}},{key:"buildAdtechParams",value:function(){return{"a.pid":this.adConfig.AdServer.placementId,"a.fid":this.adConfig.AdServer.deliveryGroupId,"a.cid":this.adConfig.AdServer.campaignId,"a.nid":this.adConfig.AdServer.networkId,"a.bid":this.adConfig.AdServer.creativeId}}},{key:"buildExternalParams",value:function(){return{"e.crid":this.adConfig.Integrator.creativeId||this.adConfig.AdServer.creativeId,"e.plid":this.adConfig.AdServer.placementId,"e.dgid":this.adConfig.AdServer.deliveryGroupId}}},{key:"buildDeliveryServerTagParams",value:function(){var t=this.adConfig.DeliveryServerTag||{},e=t.variables;try{e=JSON.parse(t.variables)}catch(t){}return{"x.srvsrc":(e=e||{}).srvsrc||t.source,"x.srvlid":e.srvlid||t.lineId,"x.srvcid":e.srvcid||t.creativeId,impid:e.impid||e.srvrid||e.srvreqid||this.adConfig.AdServer.impressionId}}},{key:"buildExtensionParams",value:function(){return{"x.w":screen?screen.width:void 0,"x.h":screen?screen.height:void 0}}},{key:"getGDPRFlag",value:function(){var t=this,e="";return[["0","false"],["1","true"]].forEach((function(n,r){n.forEach((function(n){n===t.adConfig.Regs.gdpr.applies&&(e="".concat(r))}))})),e}},{key:"isAdtechServed",value:function(){return t.ADTECH_SERVER_NAMES.indexOf(this.adConfig.AdServer.name.toUpperCase())>-1}},{key:"trackDownloadedImpression",value:function(){this.trackEvent({name:"downloadedImpression"})}},{key:"trackEvent",value:function(t){d.a.loadPixel(this.buildTrackingURL(t))}},{key:"trackClick",value:function(t){}}])&&y(e.prototype,n),r&&y(e,r),t}();g.ADTECH_SERVER_NAMES=["ADTECH","1AS","1CDCS"],g.ENDPOINT={REDIRECT:"ser",EVENT:"se"},g.COMMON_EVENT_TYPES={backupImpression:"bi",backupViewableImpression:"bvi",click:"clk",contentDuration:"cd",downloadedImpression:"di",other:"o",otherUserAction:"oua",impressionDuration:"imd",indeterminableViewability:"iv",interactionDuration:"id",interactiveImpression:"ii",userInteraction:"ui",viewableImpression:"vi",video:"v",videoInteraction:"vin",videoDuration:"vd"},g.NO_PIXELSERVER_HOST_ERROR="Platform.pixelServer.host.GLOBAL property missing in adConfig.",i.a.PlatformTracker=g;var E=g;function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e}var e,n,r;return e=t,(n=[{key:"getUrls",value:function(t){var e=[];if("object"!==b(t.event))return e;if(t.event.trigger===o.a.trigger.CLICK)switch(t.type){case L.type.REDIRECT:e=[this.adConfig.Publisher.clickRedirect];break;case L.type.PIXEL:e=[this.adConfig.Publisher.clickPixel]}return e.filter((function(t){return t.match(/^https?:\/\//i)})).map((function(t){return s(t)}))}}])&&C(e.prototype,n),r&&C(e,r),t}();i.a.PublisherTracker=O;var T=O;function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e,this.thirdPartyConfig={},e.DeliveryGroups&&e.DeliveryGroups[e.AdServer.deliveryGroupId]&&e.DeliveryGroups[e.AdServer.deliveryGroupId].thirdPartyTracking&&(this.thirdPartyConfig=e.DeliveryGroups[e.AdServer.deliveryGroupId].thirdPartyTracking)}var e,n,r;return e=t,(n=[{key:"getUrls",value:function(t){var e=t.event,n=[];if("object"!==S(e))return n;var r=e.trigger===o.a.trigger.CLICK?this.thirdPartyConfig.clicks:this.thirdPartyConfig.events;if(!r)return n;var i=e.meta&&e.meta.eventName?e.meta.eventName:e.name;return r.forEach((function(e){t.type===e.type&&i===e.name&&n.push(s(e.url))})),n}},{key:"replaceCacheBuster",value:function(t){return s(t)}}])&&w(e.prototype,n),r&&w(e,r),t}();i.a.ThirdPartyTracker=I;var A=I,R=n(24);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.platform=new E(e),this.adServer=new h(e),this.publisher=new T(e),this.thirdParty=new A(e),this.trackers=[this.publisher,this.platform,this.adServer,this.thirdParty],this.advertEventBus=n.eventBus,this.globalEventBus=n.globalEventBus,this.adConfig=e,this.disabled=!0===this.adConfig.Integrator.previewMode,this.initialiseEventCounters(),this.advertEventBus.on(o.a.TRACKING_REQUEST,(function(t){return r.creativeEventHandler(t)}))}var e,n,r;return e=t,(n=[{key:"initialiseEventCounters",value:function(){var t=this.adConfig.Creative.events;Object.keys(t).forEach((function(e){t[e].counter=t[e].counter||0}))}},{key:"incrementEventCounter",value:function(t){var e=this.adConfig.Creative.events,n=t.meta&&t.meta.eventName?t.meta.eventName:t.name;e.hasOwnProperty(n)&&"number"==typeof e[n].counter&&e[n].counter++}},{key:"prepareClickRedirects",value:function(){var e=this;this.adConfig.Platform=this.adConfig.Platform||{},this.adConfig.Platform.CLICK_PLACEHOLDER="_DELIVR_CLK_URL_",this.adConfig.Format=this.adConfig.Format||{},this.adConfig.Format.library=this.adConfig.Format.library||{},this.adConfig.Format.library.config=_(this.adConfig.Format.library.config||{},{GENERIC_CLICK_KEY:"_DELIVR_GENERIC_CLK_",CLICK_URL_PLACEHOLDER:"_DELIVR_CLK_URL_"});var n=function(t,e){return e+encodeURIComponent(t)},r=this.adConfig.Creative.clicks;r._DELIVR_GENERIC_CLK_={},Object.keys(r).forEach((function(i){if(e.disabled)r[i].redirect=r[i].url||"";else{for(var a=[],s=e.trackers,c=0;c<s.length;c++){var u=s[c];"_DELIVR_GENERIC_CLK_"===i&&u instanceof A||e.adServer.servedBy("ADTECH")&&u instanceof h||(a=a.concat(u.getUrls({type:t.type.REDIRECT,event:{name:i,trigger:o.a.trigger.CLICK}})))}a.push("_DELIVR_CLK_URL_"),a.reverse(),r[i].redirect=a.reduce(n),r[i].redirectCount=a.length}}))}},{key:"performTrackingRequests",value:function(e){for(var n=[],r=[],i=[],a=this.trackers,s=0;s<a.length;s++){var c=a[s];n=n.concat(c.getUrls({type:t.type.PIXEL,event:e})),r=r.concat(c.getUrls({type:t.type.SCRIPT,event:e})),e.trigger===o.a.trigger.CLICK&&(i=i.concat(c.getUrls({type:t.type.REDIRECT,event:e})))}if(this.disabled||(d.a.requestPixels(n),d.a.loadScripts(r,this.adConfig.anchorDivId)),e.trigger===o.a.trigger.CLICK){var u=e.meta||{},l=this.getClickLandingUrl(e.name,u.url);l&&i.push(l)}var f=this.platform.buildGenericParams({event:e}),h=new R.a(R.a.TRACK,{name:f.en,platformEventType:f.et,urls:{pixels:n,scripts:r,redirects:i}});this.advertEventBus.trigger(h)}},{key:"populateEventMeta",value:function(t){var e=t.meta&&t.meta.eventName?t.meta.eventName:t.name,n={};for(var r in this.adConfig.Creative.events)if(this.adConfig.Creative.events.hasOwnProperty(r)&&e===r){n=this.adConfig.Creative.events[r];break}t.meta=_({},n,t.meta)}},{key:"creativeEventHandler",value:function(t){if("object"===k(t))switch(t.trigger){case o.a.trigger.CLICK:this.performTrackingRequests(t);break;case o.a.trigger.EVENT:this.populateEventMeta(t),(!t.meta.trackOnce||void 0===t.meta.counter||"number"==typeof t.meta.counter&&t.meta.counter<1)&&(this.performTrackingRequests(t),this.incrementEventCounter(t))}}},{key:"getClickRedirectUrl",value:function(t,e){var n=this.adConfig.Format.library.config.GENERIC_CLICK_KEY,r=this.adConfig.Creative.clicks[t]||this.adConfig.Creative.clicks[n],i=e;!i&&r&&(i=r.url);var o=this.adConfig.Format.library.config.CLICK_URL_PLACEHOLDER;if(r&&r.redirect&&r.redirect.length&&r.redirectCount&&o){for(var a=i,s=t,c=1;c<r.redirectCount;c++)a=encodeURIComponent(a),s=encodeURIComponent(s);return r.redirect.replace(o,a).replace(n,s)}return i}},{key:"getClickLandingUrl",value:function(t,e){var n=this.adConfig.Creative.clicks[t],r=e;return!r&&n&&(r=n.url),s(r)}}])&&P(e.prototype,n),r&&P(e,r),t}();D.event={BACKUP_IMPRESSION:"backupImpression",DOWNLOADED_IMPRESSION:"downloadedImpression",UNSUPPORTED_CLIENT:"unsupportedClient"},D.type={PIXEL:"pixel",REDIRECT:"redirect",SCRIPT:"script"},i.a.Tracker=D;var L=e.a=D},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return navigator.appName.toLowerCase()}function o(){return navigator.userAgent.toLowerCase()}function a(){var t=o();if("netscape"===i()&&null!==new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t))return 1;return t.indexOf("msie")>-1}function s(){return!!o().match(/(ipad|iphone|ipod)/i)}function c(){return!!o().match(/android/i)}function u(){return!!o().match(/windows phone/i)}function l(){return o().indexOf("applewebkit")>-1}n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l})),n(0).a.UserAgentUtils={getAppName:i,getUserAgent:o,isChrome:function(){return"object"===r(window.chrome)},isIE:a,isIEQuirksMode:function(){return a()&&document.compatMode&&"BackCompat"===document.compatMode},isiOS:s,isWebkit:l,isAndroid:c,isWinPhone:u,isW3CCompliant:function(){var t=document;return"undefined"!==r(t.getElementById)&&"undefined"!==r(t.getElementsByTagName)&&"undefined"!==r(t.createElement)},supportsJSON:function(){return window.JSON&&JSON.parse&&JSON.stringify},supportsPostMessageWithObjects:function(){if(!window.postMessage)return!1;var t=!1;try{window.postMessage({toString:function(){t=!0}},"*")}catch(t){}return!t}}},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(n(2).a);l.RENDER="renderEvent.render",r.a.RenderEvent=l,e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"requestPixel",value:function(e){if("string"==typeof e&&e.match(/https?:\/\//i)){var n=new Image;n.src=e,t.pixels.push(n)}}},{key:"requestPixels",value:function(e){for(var n=0;n<e.length;n++){var r=e[n];t.requestPixel(r)}}},{key:"loadScript",value:function(t,e){if("string"==typeof t&&t.match(/https?:\/\//i)){var n=document.createElement("script");n.async=!0,n.charset="utf-8",n.src=t;var r=document.getElementById(e);r?r.parentNode.insertBefore(n,r.nextSibling):document.body.insertBefore(n,document.body.firstChild)}}},{key:"loadScripts",value:function(e,n){for(var r=0;r<e.length;r++){var i=e[r];t.loadScript(i,n)}}},{key:"replaceCacheBuster",value:function(t){if("string"==typeof t)return t.replace()}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();o.pixels=[],r.a.TrackingUtils=o,e.a=o},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).containerId=i.containerId||null,r.state=i.state||null,r}return n}(n(2).a);l.STATE_CHANGE="containerStateChangeEvent.stateChange",l.state={EXPAND:"expand",CONTRACT:"contract"},r.a.ContainerStateChangeEvent=l,e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(){return o(this,n),e.apply(this,arguments)}return n}(n(2).a);l.READY="contentEvent.ready",r.a.ContentEvent=l,e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).timer=i.timer,r.platformEventType=i.platformEventType,r}return n}(n(2).a);r.a.TimerEvent=l,l.TIMER_CHANGE="timerEvent.timerChange",e.a=l},function(t,e,n){"use strict";var r=n(0);n(35);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.type.WEB;i(this,t),this.backupImage=!1,this.friendlyIframe=!1,this.iframe=!1,this.safeFrame=!1,this.safeFrameSandbox=!1,this.skypeFrame=!1,this.environmentType=e}var e,n,a;return e=t,(n=[{key:"determineEnvironment",value:function(){this.backupImage=this.requiresBackupImage(),this.iframe=r.a.IframeUtils.isInIframe(),this.safeFrame=r.a.SafeFrameUtils.isInSafeFrame(),this.safeFrameSandbox=r.a.SafeFrameUtils.isInSafeFrameSandbox(),this.skypeFrame=this.isInSkypeFrame()}},{key:"determineEnvironmentForAdConfig",value:function(t){this.friendlyIframe=r.a.IframeUtils.isInFriendlyIframe(t)}},{key:"requiresBackupImage",value:function(){return!r.a.UserAgentUtils.isW3CCompliant()||!r.a.UserAgentUtils.supportsJSON()||!r.a.UserAgentUtils.supportsPostMessageWithObjects()}},{key:"isInSkypeFrame",value:function(){return!(!window.$WLXRmAd||"function"!=typeof window.$WLXRmAd.init)}},{key:"type",get:function(){return this.environmentType}}])&&o(e.prototype,n),a&&o(e,a),t}();a.type={WEB:"WEB",MRAID:"MRAID",VPAID:"VPAID"},r.a.Environment=a,e.a=a},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).name=i.name,r.platformEventType=i.platformEventType,r.duration=i.duration,r.urls=i.urls||{},r.urls.pixels=i.urls.pixels||[],r.urls.redirects=i.urls.redirects||[],r.urls.scripts=i.urls.scripts||[],r}return n}(n(2).a);r.a.TrackerEvent=l,l.TRACK="trackerEvent.track",e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).viewable=i.viewable||null,r}return n}(n(2).a);l.CHANGE="viewableChangeEvent.change",r.a.ViewableChangeEvent=l,e.a=l},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,n),(r=e.call(this,t)).uid=i.uid||null,r.action=i.action,r.state=i.state||null,r.containerId=i.containerId||null,r}return n}(n(2).a);l.ACTION_REQUEST="containerActionRequestEvent.actionRequest",r.a.ContainerActionRequestEvent=l,e.a=l},function(t,e,n){"use strict";n(10);var r=n(0),i=n(8),o=n(12),a=n(14),s=n(30),c=n(6),u=n(1),l=n(7),f=n(31),h=n(22),d=n(24),v=n(15);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y="craft.delivr.pingInspectrProxy",m="craft.delivr.advert",g="craft.delivr.timer",E="craft.delivr.track",b="craft.delivr.qualified",C="craft.delivr.queue",O="craft.inspectrProxy.pong",T=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queue=[],this.connectedToInspectrProxy=!1,this.adEventBus=e.eventBus,this.globalEventBus=e.globalEventBus,this.messenger=new f.a(window.top),this.messenger.on(O,(function(){return n.handlePong()})),this.advertHash=this.generateAdvertHash(e.adConfig),this.publishAdvertAdded(e.adConfig),this.globalEventBus.on(l.a.BEFORE_UNLOAD,(function(){return n.publishAdvertRemoved()})),this.adEventBus.on(v.a.QUALIFIED,(function(){return n.publishQualifiedState()})),this.adEventBus.on(d.a.TRACK,(function(t){return n.publishTrack(t)})),this.adEventBus.on(h.a.TIMER_CHANGE,(function(t){return n.publishTimerChange(t)})),this.startPinging()}var e,n,r;return e=t,(n=[{key:"cleanup",value:function(){this.stopPinging(),this.messenger.cleanup()}},{key:"generateAdvertHash",value:function(t){return[t.Integrator.creativeId||t.AdServer.creativeId||"0",t.AdServer.deliveryGroupId||"0",t.AdServer.cacheBuster||"0"].join("_")}},{key:"publish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.advertHash=this.advertHash,this.connectedToInspectrProxy?this.messenger.send(t,e):this.queue.push({topic:t,meta:e})}},{key:"startPinging",value:function(){var t=this;this.pingInspectrProxy(),this.pingInterval=setInterval((function(){return t.pingInspectrProxy()}),1e3),this.pingTimeout=setTimeout((function(){return t.stopPinging()}),12e4)}},{key:"stopPinging",value:function(){clearInterval(this.pingInterval),clearTimeout(this.pingTimeout)}},{key:"pingInspectrProxy",value:function(){this.messenger.send(y)}},{key:"handlePong",value:function(){this.connectedToInspectrProxy||(this.stopPinging(),this.connectedToInspectrProxy=!0,this.publishQueue())}},{key:"publishAdvertAdded",value:function(t){var e=t.clone(),n={action:"added",adConfig:JSON.parse(JSON.stringify(e))};this.publish(m,n)}},{key:"publishAdvertRemoved",value:function(){this.publish(m,{action:"removed"})}},{key:"publishTimerChange",value:function(t){var e=t.timer,n=t.platformEventType,r={name:e.name,running:e.running,type:n,startTime:e.startTime,cumulativeTimeElapsed:e.cumulativeTimeElapsed};this.publish(g,r)}},{key:"publishTrack",value:function(t){var e={name:t.name,type:t.platformEventType,duration:t.duration,urls:t.urls};this.publish(E,e)}},{key:"publishQualifiedState",value:function(){this.publish(b)}},{key:"publishQueue",value:function(){var t={queue:this.queue.splice(0,this.queue.length)};this.publish(C,t)}}])&&p(e.prototype,n),r&&p(e,r),t}();r.a.Inspectr=T;var S=T,w=n(18),I=n(16),A=n(32);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containers={},this.darlaKey=null}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e){var n=this;if(t.Creative.containers.placement.type||(t.Creative.containers.placement.type=s.a),this.adConfig=t,this.id=t.AdServer.cacheBuster,this.eventBus=new c.a(this),this.adManager=e,this.globalEventBus=e.globalEventBus,this.env=e.env,this.containerFactory=e.containerFactory,this.tracker=new e.trackerClass(t,this),this.tracker.prepareClickRedirects(),this.inspectr=new S(this),this.eventBus.on(A.a.UPDATE,(function(t){null!==t.key&&(n.darlaKey=t.key)})),this.copyPropertiesFromAdConfig(t),this.checkTrackDownloadedImpression(),this.env.backupImage||t.getOverride(i.a.override.RENDER_BACKUP)){if(!this.initBackupContainer(t))return void this.trackEvent(I.a.event.UNSUPPORTED_CLIENT);this.trackEvent(I.a.event.BACKUP_IMPRESSION)}else this.initContainers(t);this.eventBus.trigger(o.a.INITIALIZED)}},{key:"cleanup",value:function(){this.inspectr.cleanup()}},{key:"checkTrackDownloadedImpression",value:function(){this.trackEvent(I.a.event.DOWNLOADED_IMPRESSION)}},{key:"copyPropertiesFromAdConfig",value:function(t){a.b(t,["AdServer","Creative","Format","Integrator","Platform","Publisher","ThirdPartyTracking"],this)}},{key:"initBackupContainer",value:function(t){var e=t.Creative.containers.placement;if(e.type===s.a){e.content=e.default.content,e.x=0,e.y=0;var n=this.containerFactory.getContainer(e.type,t,"placement",this,this.adManager);return this.containers.placement=n,n}return null}},{key:"initContainers",value:function(t){var e="placement",n=t.Creative.containers;n.hasOwnProperty(e)&&(this.containers[e]=this.containerFactory.getContainer(n[e].type,t,e,this,this.adManager)),Object.keys(n).forEach((function(t){t!==e&&delete n[t]})),this.eventBus.trigger(new w.a(w.a.RENDER))}},{key:"trackEvent",value:function(t){this.eventBus.trigger(new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.EVENT,name:t}))}},{key:"click",value:function(t,e){var n={};e&&e.url&&(n.url=e.url);var r=new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.CLICK,name:t,meta:n});this.eventBus.trigger(r),this.executeClick(r)}},{key:"executeClick",value:function(t){if("object"===R(t)&&t.trigger&&t.trigger===u.a.trigger.CLICK&&!t.clickExecuted){var e,n=t.name;t.meta&&t.meta.url&&(e=t.meta.url);var r=this.tracker.getClickRedirectUrl(n,e);this.openUrl(r),t.clickExecuted=!0}}},{key:"openUrl",value:function(t){window.open(t,"_blank")}}])&&k(e.prototype,n),r&&k(e,r),t}();r.a.Advert=_;e.a=_},function(t,e,n){"use strict";var r=n(12),i=n(1),o=(n(10),n(7)),a=n(0),s=n(11),c=n(6),u=n(15);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=t.state.UNQUALIFIED,this.mouseOverContainer=!1,this.buffer=[],this.rolloverThresholdTimeout=null,this.noRolloverFlushTimeout=null,this.touchStartHandlerFn=null,this.mouseOverHandlerFn=null,this.mouseOutHandlerFn=null,this.hoverOverThresholdPassed=!1,this.listenersAdded=!1,this.adEventBus=e,this.eventBus=new c.a(this),this.qualifiedUserClick=!1}var e,n,r;return e=t,(n=[{key:"init",value:function(){a.a.UserAgentUtils.isiOS()||a.a.UserAgentUtils.isAndroid()||a.a.UserAgentUtils.isWinPhone()?this.state=t.state.QUALIFIED:this.addListeners()}},{key:"addListeners",value:function(){var e=this;this.mouseOverHandlerFn=function(t){return e.containerMouseOverEventHandler(t)},this.mouseOutHandlerFn=function(t){return e.containerMouseOutEventHandler(t)},this.touchStartHandlerFn=function(t){return e.touchStartHandler(t)},this.setQualifiedUserClickFn=function(t){return e.setQualifiedUserClick(t)},this.adEventBus.on(s.a.MOUSE_OVER,this.mouseOverHandlerFn),this.adEventBus.on(s.a.MOUSE_OUT,this.mouseOutHandlerFn),this.adEventBus.on(t.QUALIFIED_CLICK,this.setQualifiedUserClickFn),window.addEventListener("touchstart",this.touchStartHandlerFn),this.listenersAdded=!0}},{key:"removeListeners",value:function(){this.listenersAdded&&(this.adEventBus.off(s.a.MOUSE_OVER,this.mouseOverHandlerFn),this.adEventBus.off(s.a.MOUSE_OUT,this.mouseOutHandlerFn),this.adEventBus.off(t.QUALIFIED_CLICK,this.setQualifiedUserClickFn),window.removeEventListener("touchstart",this.touchStartHandlerFn))}},{key:"bufferEvent",value:function(t){this.buffer[0]=t}},{key:"qualifies",value:function(e){var n=this;return this.state===t.state.UNQUALIFIED&&this.hoverOverThresholdPassed&&e.meta.interaction?(this.hoverOverThresholdPassed=!1,this.bufferEvent(e),setTimeout((function(){n.setStateToQualified()}),0),!1):this.state===t.state.QUALIFIED||!e.meta.interaction||(this.bufferEvent(e),this.noRolloverFlushTimeout||this.mouseOverContainer||(this.noRolloverFlushTimeout=setTimeout((function(){n.noRolloverTimeoutCompleteHandler()}),t.NO_HOVER_FLUSH_TIMEOUT)),!1)}},{key:"setQualifiedUserClick",value:function(){this.qualifiedUserClick=!0}},{key:"startMouseOverTimer",value:function(){var e=this;this.rolloverThresholdTimeout||(this.rolloverThresholdTimeout=setTimeout((function(){e.rolloverThresholdTimeoutCompleteHandler()}),t.HOVER_THRESHOLD))}},{key:"setStateToQualified",value:function(){if(this.state!==t.state.QUALIFIED){this.state=t.state.QUALIFIED,this.removeListeners();var e=new u.a(u.a.QUALIFIED,{events:this.buffer});this.eventBus.trigger(e),this.adEventBus.trigger(e)}}},{key:"containerMouseOverEventHandler",value:function(){this.mouseOverContainer||(this.mouseOverContainer=!0,this.noRolloverFlushTimeout&&(clearTimeout(this.noRolloverFlushTimeout),this.noRolloverFlushTimeout=void 0),this.startMouseOverTimer())}},{key:"containerMouseOutEventHandler",value:function(){if(this.qualifiedUserClick&&this.buffer.length>0)return this.rolloverThresholdTimeoutCompleteHandler();this.mouseOverContainer&&(this.mouseOverContainer=!1,this.hoverOverThresholdPassed=!1,this.rolloverThresholdTimeout&&(clearTimeout(this.rolloverThresholdTimeout),this.rolloverThresholdTimeout=void 0,this.buffer=[]))}},{key:"touchStartHandler",value:function(){this.setStateToQualified()}},{key:"rolloverThresholdTimeoutCompleteHandler",value:function(){this.state===t.state.QUALIFIED||this.buffer.length>0&&this.mouseOverContainer?this.setStateToQualified():this.hoverOverThresholdPassed=!0}},{key:"noRolloverTimeoutCompleteHandler",value:function(){this.buffer=[]}}])&&l(e.prototype,n),r&&l(e,r),t}();a.a.EventQualifier=f,f.HOVER_THRESHOLD=500,f.NO_HOVER_FLUSH_TIMEOUT=1e3,f.QUALIFIED_CLICK="eventQualifier.qualifiedClick",f.state={QUALIFIED:1,UNQUALIFIED:0};var h=f,d=n(3);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.advertEventBus=e,this.globalEventBus=r,this.eventQualifier=n,this.mouseIsOver=!1,this.eventBus=new c.a(this),this.isTouchDevice=!1,this.nextUserInteractionTimeout=null,this.userInitiatedExpanded=!1,this.userInitiatedVideoPlaying=!1,this.timerRunning=!1,this.initialised=!1}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this.initialised||(this.isTouchDevice=a.a.UserAgentUtils.isiOS()||a.a.UserAgentUtils.isAndroid()||a.a.UserAgentUtils.isWinPhone(),this.qualifiedStateChangeHandlerFn=function(e){return t.qualifiedStateChangeHandler(e)},this.isTouchDevice||(this.advertEventBus.on(s.a.MOUSE_OVER,(function(){return t.containerMouseOverEventHandler()})),this.advertEventBus.on(s.a.MOUSE_OUT,(function(){return t.containerMouseOutEventHandler()})),this.eventQualifier.state===h.state.UNQUALIFIED&&this.eventQualifier.eventBus.on(u.a.QUALIFIED,this.qualifiedStateChangeHandlerFn)),this.globalEventBus.on(d.a.VISIBILITY_CHANGE,(function(e){return t.visibilityChangeHandler(e)})),this.advertEventBus.on(i.a.TRACKING_REQUEST,(function(e){return t.trackingRequestEventHandler(e)})),this.initialised=!0)}},{key:"clearNextUserInteractionTimeout",value:function(){this.nextUserInteractionTimeout&&(clearTimeout(this.nextUserInteractionTimeout),this.nextUserInteractionTimeout=null)}},{key:"resetNextUserInteractionTimeout",value:function(){var t=this;this.clearNextUserInteractionTimeout(),this.nextUserInteractionTimeout=setTimeout((function(){return t.nextUserInteractionTimeoutHandler()}),1e4)}},{key:"containerMouseOverEventHandler",value:function(){this.mouseIsOver||(this.mouseIsOver=!0,this.eventQualifier.state===h.state.QUALIFIED&&this.startTimer())}},{key:"containerMouseOutEventHandler",value:function(){if(this.mouseIsOver){if(this.mouseIsOver=!1,this.userInitiatedVideoPlaying||this.userInitiatedExpanded)return;this.stopTimer()}}},{key:"visibilityChangeHandler",value:function(t){t.visible||(this.mouseIsOver=!1,this.stopTimer())}},{key:"nextUserInteractionTimeoutHandler",value:function(){this.nextUserInteractionTimeout=null,this.userInitiatedExpanded||this.userInitiatedVideoPlaying||this.stopTimer()}},{key:"qualifiedStateChangeHandler",value:function(t){this.eventQualifier.state===h.state.QUALIFIED&&(this.eventQualifier.eventBus.off(u.a.QUALIFIED,this.qualifiedStateChangeHandlerFn),t.events.length>0&&this.interactionEventHandler(t.events[0]))}},{key:"videoTimerEventHandler",value:function(t){switch(t.trigger){case i.a.trigger.TIMER_START:this.eventQualifier.state===h.state.QUALIFIED&&(this.isTouchDevice||this.mouseIsOver)&&(this.userInitiatedVideoPlaying=!0,this.startTimer());break;case i.a.trigger.TIMER_STOP:this.userInitiatedVideoPlaying=!1,!this.isTouchDevice&&this.mouseIsOver||this.stopTimer()}}},{key:"nonInteractionEventHandler",value:function(t){this.userInitiatedExpanded&&t.name===N.event.CONTRACT&&(this.userInitiatedExpanded=!1,this.stopTimer())}},{key:"interactionEventHandler",value:function(t){this.eventQualifier.state===h.state.QUALIFIED&&(this.isTouchDevice||this.mouseIsOver)&&(this.startTimer(),t.name===N.event.EXPAND&&(this.userInitiatedExpanded=!0))}},{key:"trackingRequestEventHandler",value:function(t){if("object"===v(t))switch(t.trigger){case i.a.trigger.TIMER_START:case i.a.trigger.TIMER_STOP:t.meta.video&&this.videoTimerEventHandler(t);break;case i.a.trigger.EVENT:t.meta.interaction?this.interactionEventHandler(t):this.nonInteractionEventHandler(t)}}},{key:"startTimer",value:function(){this.isTouchDevice&&this.resetNextUserInteractionTimeout(),this.timerRunning||(this.advertEventBus.trigger(new i.a(i.a.TRACKING_REQUEST,{trigger:i.a.trigger.TIMER_START,name:N.timer.INTERACTION})),this.timerRunning=!0)}},{key:"stopTimer",value:function(){this.isTouchDevice&&this.clearNextUserInteractionTimeout(),this.timerRunning&&(this.advertEventBus.trigger(new i.a(i.a.TRACKING_REQUEST,{trigger:i.a.trigger.TIMER_STOP,name:N.timer.INTERACTION})),this.timerRunning=!1)}}])&&p(e.prototype,n),r&&p(e,r),t}();a.a.InteractionTimerManager=y;var m=y,g=n(17);function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(this,t),this.name=e,this.video=!!n.video,this.startTime=null,this.timeElapsed=0,this.cumulativeTimeElapsed=0,this.flushCount=1,this.running=!1}var e,n,r;return e=t,(n=[{key:"start",value:function(){this.running||(this.startTime=(new Date).getTime(),this.running=!0)}},{key:"stop",value:function(){this.running&&(this.timeElapsed+=(new Date).getTime()-this.startTime,this.running=!1)}},{key:"flush",value:function(){if(this.stop(),this.timeElapsed>0){var t=this.flushCount*this.timeElapsed+this.cumulativeTimeElapsed;return this.flushCount++,this.cumulativeTimeElapsed+=this.timeElapsed,this.timeElapsed=0,t}return 0}}])&&b(e.prototype,n),r&&b(e,r),t}();a.a.Timer=C;var O=C,T=n(16),S=n(19),w=n(22);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function P(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(l,t);var e,n,a,c=_(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this,t,e)).userInteracted=!1,n.expandedOnce=!1,n.videoPlaybackInitiated=!1,n.timers={},n.flushTimersTimeout=null,n.disableTimers=!1,n.mouseOverContainer=!1,n.interactionsQualified=!1,n.isTouchDevice=Object(g.d)()||Object(g.a)()||Object(g.c)(),n.qualifier=new h(n.advertEventBus),n.qualifier.init(),n.qualifierStateChangeHandlerFn=function(t){return n.qualifierStateChangeHandler(t)},n.qualifier.eventBus.on(u.a.QUALIFIED,n.qualifierStateChangeHandlerFn),n.interactionTimerManager=new m(e.eventBus,n.qualifier,e.globalEventBus),n.interactionTimerManager.init(),n.isTouchDevice||(n.advertEventBus.on(s.a.MOUSE_OVER,(function(){return n.containerMouseOverEventHandler()})),n.advertEventBus.on(s.a.MOUSE_OUT,(function(){return n.containerMouseOutEventHandler()}))),n.globalEventBus.on(o.a.BEFORE_UNLOAD,(function(){return n.pageUnloadHandler()})),n.advertEventBus.on(i.a.QUALIFIED_CLICK,(function(){return n.qualifiedClickHandler()})),n}return e=l,(n=[{key:"qualifiedClickHandler",value:function(){this.interactionsQualified||this.advertEventBus.trigger(h.QUALIFIED_CLICK)}},{key:"getTimer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.timers.hasOwnProperty(t)||(this.timers[t]=new O(t,e)),this.timers[t]}},{key:"flushTimers",value:function(){var t=this;this.displayTimerThresholdReached()&&(this.disableTimers=!0,this.creativeEventHandler({name:l.event.TIMER_CAP,trigger:i.a.trigger.EVENT,meta:{trackOnce:!0}})),Object.keys(this.timers).forEach((function(e){t.flushTimer(e)})),this.disableTimers=!0}},{key:"displayTimerThresholdReached",value:function(){var t=this.getTimer(l.timer.DISPLAY);return("number"==typeof t.timeElapsed&&t.timeElapsed?t.timeElapsed:+new Date-t.startTime)>=9e5}},{key:"flushTimer",value:function(t){var e=this.getTimer(t),n=e.flush();if(0!==n){var r={type:T.a.type.PIXEL,event:{trigger:i.a.trigger.TIMER_STOP,name:t,meta:{duration:n,video:e.video}}},o=this.platform.getUrls(r);this.disabled||this.disableTimers||S.a.requestPixels(o);var a=new w.a(w.a.TIMER_CHANGE,{timer:e,platformEventType:this.platform.getPixelEventType(r)});this.advertEventBus.trigger(a)}}},{key:"startFlushTimersCountdown",value:function(){var t=this;this.flushTimersTimeout||(this.flushTimersTimeout=window.setTimeout((function(){t.flushTimers()}),9e5))}},{key:"containerMouseOverEventHandler",value:function(){this.mouseOverContainer||(this.mouseOverContainer=!0)}},{key:"containerMouseOutEventHandler",value:function(){this.mouseOverContainer&&(this.mouseOverContainer=!1)}},{key:"creativeExpansionHandler",value:function(){this.expandedOnce||(R(D(l.prototype),"creativeEventHandler",this).call(this,{name:l.event.EXPANDED_IMPRESSION,trigger:i.a.trigger.EVENT}),this.expandedOnce=!0)}},{key:"userInteractionHandler",value:function(){this.userInteracted||(R(D(l.prototype),"creativeEventHandler",this).call(this,{name:l.event.INTERACTIVE_IMPRESSION,trigger:i.a.trigger.EVENT}),this.userInteracted=!0,this.advertEventBus.trigger(r.a.INTERACTIVE_IMPRESSION))}},{key:"videoStartHandler",value:function(){this.videoPlaybackInitiated||(R(D(l.prototype),"creativeEventHandler",this).call(this,{name:l.event.VIDEO_IMPRESSION,trigger:i.a.trigger.EVENT,meta:{video:!0}}),this.videoPlaybackInitiated=!0)}},{key:"qualifierStateChangeHandler",value:function(t){var e=this;this.interactionsQualified=!0,this.qualifier.eventBus.off(u.a.QUALIFIED,this.qualifierStateChangeHandlerFn),t.events.forEach((function(t){return e.creativeEventHandler(t)}))}},{key:"timerStartEventHandler",value:function(t){switch(t.name){case l.timer.DISPLAY:this.startFlushTimersCountdown();break;case l.timer.EXPANSION:this.creativeExpansionHandler()}var e=!(!t.meta||!t.meta.video),n=this.getTimer(t.name,{video:e});n.start();var r={event:{trigger:i.a.trigger.TIMER_START,name:name,meta:{video:n.video}}},o=new w.a(w.a.TIMER_CHANGE,{timer:n,platformEventType:this.platform.getPixelEventType(r)});this.advertEventBus.trigger(o)}},{key:"timerStopEventHandler",value:function(t){t.name===l.timer.DISPLAY||t.name===l.timer.VIEW?this.getTimer(t.name).stop():this.flushTimer(t.name)}},{key:"creativeEventHandler",value:function(t){if("object"===I(t)){switch(t.trigger){case i.a.trigger.TIMER_START:if(this.disableTimers)return;this.timerStartEventHandler(t);break;case i.a.trigger.TIMER_STOP:this.timerStopEventHandler(t);break;case i.a.trigger.CLICK:this.userInteractionHandler(),this.interactionsQualified=!0,this.qualifier.setStateToQualified();break;case i.a.trigger.EVENT:if(this.populateEventMeta(t),!this.interactionsQualified&&!this.qualifier.qualifies(t))return;t.meta.interaction&&this.userInteractionHandler(),t.meta.video&&0===t.meta.durationPercentage&&this.videoStartHandler()}R(D(l.prototype),"creativeEventHandler",this).call(this,t)}}},{key:"pageUnloadHandler",value:function(){this.flushTimers()}}])&&A(e.prototype,n),a&&A(e,a),l}(T.a);L.timer={DISPLAY:"display",EXPANSION:"expansion",INTERACTION:"interaction",VIEW:"view"},L.event={CONTRACT:"contract",EXPAND:"expand",EXPANDED_IMPRESSION:"expandedImpression",INTERACTIVE_IMPRESSION:"interactiveImpression",VIDEO_IMPRESSION:"videoImpression",TIMER_CAP:"timerCap"},a.a.RichTracker=L;var N=e.a=L},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n(0),i=n(9),o=n(17);function a(t){var e=t?i.e().document:document;return{x:e.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft,y:e.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop}}function s(t){var e=t?i.e().document:document,n="CSS1Compat"===e.compatMode,r=e.documentElement.clientWidth,a=n&&r||e.body.clientWidth||r,s=e.documentElement.clientHeight,c=n&&s||e.body.clientHeight||s;return o.d()&&c<window.innerHeight&&(c=window.innerHeight),{w:a,h:c}}r.a.ViewportUtils={getPageOffsets:a,getViewportDims:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i="inlineDiv";r.a.ContainerType={INLINE_DIV:i,FLOATING_DIV:"floatingDiv",NO_CONTENT:"noContent"}},function(t,e,n){"use strict";var r=n(6);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(t,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(o=e.call(this,t)).meta=r,o.source=i,o}return n}(n(2).a);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventDispatcher=new r.a,this.setTarget(e),window.addEventListener("message",this.handlePostMessage.bind(this))}var e,n,i;return e=t,(n=[{key:"setTarget",value:function(t){this.targetFrameOrWindow=t}},{key:"setListenerWindow",value:function(t){t!==window&&t.addEventListener("message",this.handlePostMessage.bind(this))}},{key:"handlePostMessage",value:function(t){t.data&&t.data.topic&&this.eventDispatcher.trigger(new u(t.data.topic,t.data.meta,t.source))}},{key:"send",value:function(t,e){this.postMessage({topic:t,meta:e},"*")}},{key:"on",value:function(t,e,n){return this.eventDispatcher.on(t,e,n)}},{key:"off",value:function(t,e,n){return this.eventDispatcher.off(t,e,n)}},{key:"postMessage",value:function(){if(this.targetFrameOrWindow)try{var t=this.targetFrameOrWindow;try{t.nodeName&&"IFRAME"===t.nodeName&&(t=this.targetFrameOrWindow.contentWindow)}catch(t){}t.postMessage.apply(t,arguments)}catch(t){}}},{key:"cleanup",value:function(){window.removeEventListener("message",this.handlePostMessage)}}])&&l(e.prototype,n),i&&l(e,i),t}();e.a=f},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=s(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{key:null};return o(this,n),(r=e.call(this,t)).key=i.key,r}return n}(n(2).a);r.a.SafeFrameKeyUpdateEvent=l,l.UPDATE="SafeFrameKeyUpdateEvent.update",e.a=l},function(t,e,n){"use strict";e.a=function(){try{console.warn.apply(console,[].slice.call(arguments))}catch(t){try{console.warn(arguments[0])}catch(t){}}}},function(t,e,n){"use strict";var r=n(0),i=(n(10),n(5)),o=n(4);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(d,t);var e,n,a,f=l(d);function d(t,e,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(a=f.call(this,t,e,n,r,i,o)).anchorDiv=null,a.contentDiv=null,a.anchorDivAttemptIntervals=[10,20,50,100,200,500],a.preventRender=!1,a}return e=d,(n=[{key:"init",value:function(t){c(h(d.prototype),"init",this).call(this,t),this.setAnchorDivStyle(),this.prepareAnchorDiv(),this.anchorDiv&&this.content&&this.content.setContext(this.anchorDiv.ownerDocument,this.anchorDiv.ownerDocument.defaultView);var e=t.getOverride("domLoadTimeout");this.domLoadTimeout=null!==e?e:d.DOM_LOAD_TIMEOUT}},{key:"getAnchorLayoutState",value:function(){return this.getState(i.a.state.DEFAULT)}},{key:"getInitialLayoutState",value:function(){return this.getAnchorLayoutState()}},{key:"setAnchorDivStyle",value:function(){var t=this.getAnchorLayoutState().data;this.anchorDivStyle={position:"relative",display:"block",width:t.width+"px",height:t.height+"px",verticalAlign:"top"}}},{key:"prepareAnchorDiv",value:function(){if(this.anchorDiv=this.getAnchorDiv(),!this.anchorDiv&&this.containerAnchorParent)this.anchorDiv=document.createElement("div"),this.anchorDiv.id=this.containerAnchorId,this.containerAnchorParent.appendChild(this.anchorDiv),this.anchorDivStyle.display="inline-block";else if(!this.anchorDiv&&this.advertAnchorPlaceholder)this.anchorDiv=document.createElement("div"),this.anchorDiv.id=this.advertAnchorId,this.advertAnchorPlaceholder.parentNode.insertBefore(this.anchorDiv,this.advertAnchorPlaceholder),o.c(this.advertAnchorPlaceholder,{display:"none"}),this.anchorDivStyle.display="inline-block";else if(!this.anchorDiv){try{console.warn('[CRAFT:Anchor "'.concat(this.advertAnchorId,'" not present in current window context]'))}catch(t){}return}r.a.DOMUtils.applyStyles(this.anchorDiv,this.anchorDivStyle)}},{key:"checkAutoRender",value:function(){this.rendered||!this.autoRender||this.hostPage.domLoaded||this.addDOMLoadRenderTimeout(),c(h(d.prototype),"checkAutoRender",this).call(this)}},{key:"addDOMLoadRenderTimeout",value:function(){var t=this;this.hostPage.domLoaded||this.domLoadRenderTimeout||(this.domLoadRenderTimeout=window.setTimeout((function(){t.forceRendering()}),this.domLoadTimeout))}},{key:"forceRendering",value:function(){this.render()}},{key:"getAnchorDiv",value:function(){return document.getElementById(this.containerAnchorId||this.advertAnchorId)||this.advertAnchorDiv}},{key:"render",value:function(){var t=this;if(!this.rendered&&!this.closed){if(!this.anchorDiv&&(this.anchorDiv=this.getAnchorDiv(),!this.anchorDiv))return this.anchorDivAttemptIntervals.length>0?void window.setTimeout((function(){return t.render()}),this.anchorDivAttemptIntervals.shift()):void 0;this.createContentDiv();var e=this.anchorDiv.ownerDocument;this.contentDiv=e.getElementById(this.contentId),this.adConfig.DeliveryServerTag&&this.adConfig.DeliveryServerTag.variables&&this.adConfig.DeliveryServerTag.variables.srvrid&&this.contentDiv.setAttribute(d.REQUEST_ID_ATTR,this.adConfig.DeliveryServerTag.variables.srvrid),this.content.render(),c(h(d.prototype),"render",this).call(this)}}},{key:"createContentDiv",value:function(){var t=this.getInitialLayoutState().data,e=document.createElement("div");e.id=this.contentId,o.c(e,{position:"absolute",width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0",top:"0","text-align":"left"}),this.anchorDiv.appendChild(e)}},{key:"reload",value:function(){this.rendered?(this.content.remove(),this.content.forcePageLoad(),this.content.render(),this.show()):this.render()}},{key:"close",value:function(){if(this.rendered&&!this.closed){c(h(d.prototype),"close",this).call(this);try{this.contentDiv.parentNode===this.anchorDiv||this.contentDiv.parentNode.removeChild(this.contentDiv),this.anchorDiv.parentNode.removeChild(this.anchorDiv)}catch(t){}}}}])&&s(e.prototype,n),a&&s(e,a),d}(i.a);d.DOM_LOAD_TIMEOUT=2e3,d.REQUEST_ID_ATTR="data-request-id",r.a.InlineDivContainer=d,e.a=d},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i="delivr.safeFrameSandbox";function o(){try{if(window.sfAPI||window.$sf.ext)return!0}catch(t){}return!1}function a(){return!!document.querySelector('meta[name="'.concat(i,'"]'))}r.a.SafeFrameUtils={isInFlexFrame:function(){if(o()||a()){var t=(a()?parent:window).$sf.ext;try{var e=t.ui();if("string"==typeof e.flex||"number"==typeof e.flex&&0!==e.flex)return!0}catch(t){console.error(t.message)}}return!1},isInSafeFrame:o,isInSafeFrameSandbox:a,getSafeFrameSandbox:function(){return window.oneCreativeSafeFrameSandbox},SANDBOX_META_NAME:i}},function(t,e,n){"use strict";var r=n(0),i=n(21),o=n(1),a=(n(10),n(4)),s=n(6);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new s.a(this),this.adEventBus=i.eventBus,this.container=e,this.advert=i,this.containerEl=null,this.contentReady=!1,this.rendered=!1,this.DOMContext=document,this.targetId=a,this.init(n,r)}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e){var n=t.Creative.containers[e];this.content=n.content,this.width=n.states.default.width,this.height=n.states.default.height,this.setAdConfig(t)}},{key:"setAdConfig",value:function(t){this.adConfig=t,this.clickthroughs=t.Creative.clicks,this.adServerVars=t.AdServer}},{key:"render",value:function(){this.containerEl=this.DOMContext.getElementById(this.targetId),this.renderContent(),this.rendered=!0}},{key:"renderContent",value:function(){this.containerEl.appendChild(this.getBackupImageNode(this.content)),this.contentInitialised()}},{key:"getBackupImageNode",value:function(t){var e=this,n=this.getDefaultClickId(),r=document.createElement("img");if(r.src=this.adConfig.getFileUrl(t),a.c(r,{border:0,width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}),n){var i=document.createElement("a");return i.href=this.advert.tracker.getClickRedirectUrl(n,this.adConfig.Creative.clicks[n].url),i.target="_blank",i.addEventListener("click",(function(){var t=new o.a(o.a.TRACKING_REQUEST,{trigger:o.a.trigger.CLICK,name:n});e.adEventBus.trigger(t)})),i.appendChild(r),i}return r}},{key:"getDefaultClickId",value:function(){if(this.adConfig.Creative.clicks.hasOwnProperty(t.DEFAULT_CLICK))return t.DEFAULT_CLICK;for(var e=Object.keys(this.adConfig.Creative.clicks),n=0;n<e.length;n++){var r=e[n];if(r.match(/^clicktag$/i))return r}return e[0]}},{key:"contentInitialised",value:function(){this.contentReady=!0,this.eventBus.trigger(i.a.READY)}}])&&c(e.prototype,n),r&&c(e,r),t}();r.a.BackupImageContent=u,u.DEFAULT_CLICK="default",e.a=u},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(12),a=n(23),s=n(6),c=(n(10),n(4));function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,r=null,i=null,o=function(){t.apply(n,i),r=null};return function(){if(!r){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];i=n,r=setTimeout(o,e)}}}r.a.EventUtils={addCustomEventHandler:function(t,e,n){if(Array.isArray(n)&&t instanceof s.a)for(var r=0;r<n.length;r++){var i=n[r];i.custom&&t.on(i.name,e.customEventHandler,e)}},throttle:u};var l=n(3),f=n(7),h=n(9),d=n(29);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.env=e.env,this.globalEventBus=e.globalEventBus,this.domLoaded=!1,this.pageLoaded=!1,this.windowInFocus=!0,this.visible=!0}var e,n,r;return e=t,(n=[{key:"addLoadListeners",value:function(){var t=this;c.a((function(){t.dispatchDOMLoadEventOnce(),t.checkPageLoadStatus()})),c.b((function(){return t.dispatchPageLoadEventOnce()}))}},{key:"addWindowEventListeners",value:function(){var t=this;if(!this.windowEventListenersAdded){this.windowEventListenersAdded=!0;var e=window;this.env.friendlyIframe&&this.env.type!==a.a.type.VPAID&&(e=h.e()),e.addEventListener("scroll",u((function(){return t.dispatchViewportEvent(l.a.SCROLL)}),250),!1),e.addEventListener("resize",u((function(){return t.dispatchViewportEvent(l.a.RESIZE)}),250),!1),e.addEventListener("orientationchange",(function(){return t.dispatchViewportEvent(l.a.ORIENTATION_CHANGE)}),!1),e.addEventListener("focus",(function(){return t.handleFocusChange(!0)})),e.addEventListener("blur",(function(){return t.handleFocusChange(!1)})),e.addEventListener("beforeunload",(function(){return t.handleOnBeforeUnload()})),document.addEventListener("visibilitychange",(function(e){return t.handlePageVisibilityChange(e)})),e.hasFocus&&e.hasFocus()?this.handleFocusChange(!0):this.handleFocusChange(!1)}}},{key:"checkPageLoadStatus",value:function(){var e=this;this.pageLoaded||(this.pageLoadStatusTimeout=setTimeout((function(){e.dispatchPageLoadEventOnce(),clearTimeout(e.pageLoadStatusTimeout)}),t.LOAD_TIMEOUT))}},{key:"dispatchDOMLoadEventOnce",value:function(){this.domLoaded||(this.domLoaded=!0,this.globalEventBus.trigger(f.a.LOAD))}},{key:"dispatchPageLoadEventOnce",value:function(){this.pageLoaded||(this.pageLoaded=!0,this.dispatchViewportEvent(l.a.LOAD))}},{key:"dispatchViewportEvent",value:function(t){var e=d.a(this.env.friendlyIframe),n=d.b(this.env.friendlyIframe),r=new l.a(t,{offsetX:e.x,offsetY:e.y,width:n.w,height:n.h});this.globalEventBus.trigger(r)}},{key:"handleFocusChange",value:function(t){t&&!this.windowInFocus?(this.windowInFocus=!0,this.globalEventBus.trigger(l.a.FOCUS)):!t&&this.windowInFocus&&(this.windowInFocus=!1,this.globalEventBus.trigger(l.a.BLUR))}},{key:"handlePageVisibilityChange",value:function(){this.visible=!document.hidden;var t=new l.a(l.a.VISIBILITY_CHANGE,{visible:this.visible});this.globalEventBus.trigger(t)}},{key:"handleOnBeforeUnload",value:function(){this.globalEventBus.trigger(f.a.BEFORE_UNLOAD)}}])&&v(e.prototype,n),r&&v(e,r),t}();p.LOAD_TIMEOUT=4e3,r.a.PublisherPage=p;var y=p;function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adverts={},this.globalEventBus=new s.a(this),this.env=new a.a(e.environmentType),this.env.determineEnvironment(),this.hostPage=new y(this),this.hostPage.addLoadListeners(),this.advertClass=e.advertClass,this.breakoutFactory=e.breakoutFactory,this.containerFactory=e.containerFactory,this.trackerClass=e.trackerClass}var e,n,c;return e=t,(n=[{key:"registerAds",value:function(t){for(var e=t.length-1;e>-1;e--){var n=t.splice(e,1)[0];this.registerAd(n)}}},{key:"registerAd",value:function(t){var e=new i.a(t);if(this.env.determineEnvironmentForAdConfig(e),this.breakoutFactory){var n=this.breakoutFactory.getBreakoutStrategy(e,this.env);if(n){if(n.breakout())return;e.Overrides[i.a.override.RENDER_BACKUP]=!0}}return this.initAd(e)}},{key:"initAd",value:function(t){var e=String(t.AdServer.cacheBuster);t.Publisher.url=h.d()?document.referrer:location.href,this.hostPage.addWindowEventListeners();var n=this.adverts[e]=new this.advertClass,a={window:window,advert:n,libraryNamespace:r.a};return t.invokeHook(i.a.hookTypes.BEFORE_ADVERT_INIT,[a]),n.init(t,this),this.globalEventBus.trigger(new o.a(o.a.ADDED,{advert:n})),t.invokeHook(i.a.hookTypes.AFTER_ADVERT_INIT,[a]),n}},{key:"cleanup",value:function(){this.adverts={}}}])&&m(e.prototype,n),c&&m(e,c),t}();r.a.BaseAdManager=g;e.a=g},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(14),a=n(4),s=n(6),c=n(3),u=n(1),l=n(21),f=n(13),h=n(26),d=n(7);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=n,this.container=e,this.adEventBus=r.eventBus,this.adManager=r.adManager,this.htmlContent=i,this.windowContext=window,this.contentReady=!1,this.outgoingMessageQueue=[],this.initialized=!1,this.contentOrigin=null}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this.initialized||(this.initialized=!0,this.windowContext.addEventListener("message",(function(e){return t.postMessageHandler(e)})),this.adEventBus.on(f.a.ACTION_COMPLETE,(function(e){return t.containerActionEventCompleteHandler(e)})),this.adEventBus.on(d.a.DETACH,(function(e){return t.containerDomDetatchEventHandler(e)})),this.adManager.globalEventBus.on(u.a.GLOBAL_RELAY,(function(e){return t.globalRelayEventHandler(e)})))}},{key:"setContentOrigin",value:function(t){this.contentOrigin=t}},{key:"postMessageHandler",value:function(e){if(!this.shouldAcceptMessage(e))return!1;var n,r,i;this.adContentWindow=this.adContentWindow||e.source;var o={};try{o="object"===v(e.data)?e.data:JSON.parse(e.data)}catch(t){console.error(t.message)}switch(o.topic){case t.topic.INIT:this.sendConfig();break;case t.topic.CLICK:case t.topic.EVENT:if(r={trigger:o.topic===t.topic.CLICK?u.a.trigger.CLICK:u.a.trigger.EVENT,name:o.meta.name,meta:o.meta.overrides},o.meta.reportingLabel&&(r.reportingLabel=o.meta.reportingLabel),n=new u.a(u.a.TRACKING_REQUEST,r),this.dispatchAdvertLevelEvent(n),o.meta.global){var a=new u.a(u.a.GLOBAL_RELAY,o.meta);this.adManager.globalEventBus.trigger(a)}break;case t.topic.TIMER:n=new u.a(u.a.TRACKING_REQUEST,{trigger:o.meta.action,name:o.meta.name,meta:o.meta}),this.dispatchAdvertLevelEvent(n);break;case t.topic.CONTAINER_EVENT:n=new u.a(u.a.TRACKING_REQUEST,{trigger:u.a.trigger.EVENT,name:o.meta.name,meta:o.meta.overrides}),this.dispatchAdvertLevelEvent(n),r={uid:o.meta.uid,action:o.meta.name,state:{key:o.meta.state},containerId:o.meta.container.id},i=new h.a(h.a.ACTION_REQUEST,r),this.dispatchAdvertLevelEvent(i);break;case t.topic.QUALIFIED_CLICK:n=new u.a(u.a.QUALIFIED_CLICK),this.dispatchAdvertLevelEvent(n)}return!0}},{key:"containerActionEventCompleteHandler",value:function(e){var n={uid:e.uid,container:e.containerId,state:e.state.key,name:e.action,status:e.status,detail:e.detail};this.dispatchToContent(this.constructMessage(t.topic.CONTAINER_EVENT_COMPLETE,n))}},{key:"containerDomDetatchEventHandler",value:function(t){t.container===this.container&&(this.contentReady=!1,this.adContentWindow=null)}},{key:"globalRelayEventHandler",value:function(e){this.dispatchToContent(this.constructMessage(t.topic.GLOBAL_RELAY_EVENT,{name:e.name,meta:e.meta}))}},{key:"shouldAcceptMessage",value:function(t){return!(t.origin!==this.contentOrigin||!this.htmlContent.contentObject||!this.htmlContent.contentObject.contentWindow||this.htmlContent.contentObject.contentWindow!==t.source)}},{key:"contentInitialised",value:function(){this.contentReady=!0,this.outgoingMessageQueue.length>0&&this.sendQueuedMessagesToContent(),this.htmlContent.eventBus.trigger(l.a.READY)}},{key:"dispatchToContent",value:function(t){this.contentReady?this.sendMessage(t):this.addToOutgoingQueue(t)}},{key:"addToOutgoingQueue",value:function(t){this.outgoingMessageQueue.push(t)}},{key:"constructMessage",value:function(t,e){return{topic:t,meta:e}}},{key:"sendMessage",value:function(t){void 0!==this.adContentWindow&&this.adContentWindow.postMessage(t,this.contentOrigin)}},{key:"sendConfig",value:function(){if(!this.contentReady){var e={};o.b(this.adConfig,["AdServer","Creative","Format","Integrator","Platform","Publisher","DeliveryGroups","DeliveryServerTag","User"],e),e.Format&&e.Format.library&&e.Format.library.hooks&&delete e.Format.library.hooks;var n={environment:this.adManager.env.type,container:{id:this.container.id,state:this.container.state},configuration:e};this.sendMessage(this.constructMessage(t.topic.INIT_COMPLETE,n)),this.contentInitialised()}}},{key:"dispatchAdvertLevelEvent",value:function(t){t.target=this.htmlContent,this.adEventBus.trigger(t)}},{key:"sendQueuedMessagesToContent",value:function(){var t=this;this.dispatchToContent(this.outgoingMessageQueue.shift()),this.outgoingMessageQueue.length>0&&setTimeout((function(){return t.sendQueuedMessagesToContent()}),this.QUEUED_MESSAGE_PUSH_DELAY)}}])&&p(e.prototype,n),r&&p(e,r),t}();y.topic={INIT:"init",INIT_COMPLETE:"initComplete",CLICK:"click",QUALIFIED_CLICK:"qualifiedClick",EVENT:"event",CONTAINER_EVENT:"containerEvent",CONTAINER_EVENT_COMPLETE:"containerEventComplete",TIMER:"timer",GLOBAL_RELAY_EVENT:"globalRelayEvent"},y.QUEUED_MESSAGE_PUSH_DELAY=50,r.a.IframeCommunicator=y;var m=y,g=n(9),E=n(17);function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new s.a(this),this.adEventBus=i.eventBus,this.globalEventBus=o.globalEventBus,this.container=e,this.containerEl=null,this.adConfig=n,this.mouseIsOver=null,this.containerId=r,this.contentObject=null,this.rendered=!1,this.DOMContext=document,this.advert=i,this.targetId=a,this.hostPage=o.hostPage,this.pageLoadForced=!1,this.iframeCommunicator=new m(e,n,i,this),this.init()}var e,n,i;return e=t,(n=[{key:"init",value:function(){var e=this,n=this.adConfig.Creative.containers[this.containerId];this.content=n.content,this.width="100%",this.height="100%",this.globalEventBus.on(c.a.LOAD,(function(t){return e.customEventHandler(t)})),this.globalEventBus.on(c.a.RESIZE,(function(t){return e.customEventHandler(t)})),this.globalEventBus.on(c.a.SCROLL,(function(t){return e.customEventHandler(t)}));for(var r=0;r<t.ADVERT_EVENTS_DISPATCH_TO_CONTENT.length;r++){var i=t.ADVERT_EVENTS_DISPATCH_TO_CONTENT[r];this.adEventBus.on(i,(function(t){return e.customEventHandler(t)}))}}},{key:"render",value:function(){this.containerEl=this.DOMContext.getElementById(this.targetId),this.renderContent(),this.rendered=!0}},{key:"forcePageLoad",value:function(){this.iframeCommunicator.dispatchToContent(this.createContentEvent(new c.a(c.a.LOAD))),this.pageLoadForced=!0}},{key:"createContentEvent",value:function(t){var e={type:t.type};return b(e,this.createContentEventProperties(t)),e}},{key:"createContentEventProperties",value:function(t){var e={},n=["type","target","currentTarget"];return Object.keys(t).forEach((function(r){o.a(r,n)||"function"==typeof t[r]||(e[r]=t[r])})),e}},{key:"setContext",value:function(t,e){this.DOMContext=t,this.iframeCommunicator.windowContext=e}},{key:"renderContent",value:function(){var t=this.targetId+"_iframe";this.iframeCommunicator.init();var e=this.adConfig.getFileUrl(this.content);this.hostPage.pageLoaded&&this.forcePageLoad(),this.iframeCommunicator.setContentOrigin(e.split("/").splice(0,3).join("/"));var n=document.createElement("iframe");n.id=t,n.src=e,n.scrolling="no",n.seamless="seamless",n.allowtransparency="true",n.allow=["accelerometer","autoplay","camera","fullscreen","geolocation","gyroscope","microphone"].join("; "),a.c(n,{width:"100%",height:"100%",border:"0px","background-color":"transparent",overflow:"hidden"}),r.a.IframeUtils.applyAllowFullScreenAttribute(n),this.containerEl.appendChild(n),E.b()&&(n.style.visibility="hidden",setTimeout((function(){n.style.visibility="visible"}),200)),r.a.IframeUtils.isInFriendlyIframe()&&this.addAllowFullscreenAttribute(),this.contentObject=this.DOMContext.getElementById(t)}},{key:"contentInitialised",value:function(){this.eventBus.trigger(l.a.READY)}},{key:"customEventHandler",value:function(t){if(!(t.target===this||this.pageLoadForced&&t.type===c.a.LOAD)){switch(t.type){case c.a.LOAD:case c.a.RESIZE:case c.a.SCROLL:t.availableWidth=t.width,t.availableHeight=t.height,t.scrollOffsetTop=t.offsetY,t.scrollOffsetLeft=t.offsetX}this.iframeCommunicator.dispatchToContent(this.createContentEvent(t))}}},{key:"addAllowFullscreenAttribute",value:function(){for(var t=window.parent.document.getElementsByTagName("iframe"),e=0;e<t.length;e++)t[e].contentWindow===window&&g.a(t[e])}}])&&C(e.prototype,n),i&&C(e,i),t}();O.ADVERT_EVENTS_DISPATCH_TO_CONTENT=[i.a.INTERACTIVE_IMPRESSION],r.a.HtmlContent=O;e.a=O},function(t,e,n){"use strict";var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(t,r,i,o,a,s,c){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,r,i,o,a,s,c)}return n}(n(38).a);r.a.RichHtmlContent=u;var l=u,f=n(36),h=n(8);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getContent",value:function(t,e,n,r,i,o){return i.env.requiresBackupImage()||e.getOverride(h.a.override.RENDER_BACKUP)?new f.a(t,e,n,r,i,o):new l(t,e,n,r,i,o)}}],(n=null)&&d(e.prototype,n),r&&d(e,r),t}();r.a.RichContentFactory=v;e.a=v},function(t,e,n){"use strict";var r=n(0),i=(n(10),n(27)),o=n(1),a=n(28),s=n(5),c=n(26),u=n(18),l=n(20),f=n(25);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(m,t);var e,n,r,h=y(m);function m(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(t=h.call(this)).rendered=!1,t.qualifiedRolloverThreshold=m.QUALIFIED_ROLLOVER_THRESHOLD,t.mobileInteractionThreshold=m.MOBILE_INTERACTION_THRESHOLD,t.viewableImpressionThreshold=i.a.VIEWABLE_IMPRESSION_THRESHOLD,t}return e=m,(n=[{key:"init",value:function(t,e){v(g(m.prototype),"init",this).call(this,t,e)}},{key:"processOverrides",value:function(t){for(var e=["qualifiedRolloverThreshold","mobileInteractionThreshold","viewableImpressionThreshold"],n=0;n<e.length;n++){var r=e[n],i=t.getOverride(r);null!==i&&(this[r]=i)}}},{key:"initBackupContainer",value:function(t){var e=v(g(m.prototype),"initBackupContainer",this).call(this,t);return e}},{key:"initContainers",value:function(t){var e=this;for(var n in this.eventBus.on(c.a.ACTION_REQUEST,(function(t){return e.containerActionEventHandler(t)})),t.Creative.containers)if(t.Creative.containers.hasOwnProperty(n)){this.containers[n]=this.containerFactory.getContainer(t.Creative.containers[n].type,t,n,this,this.adManager);var r=this.containers[n];r.eventBus.on(u.a.RENDER,(function(){return e.renderEventHandler()})),r.eventBus.on(f.a.CHANGE,(function(){return e.containerViewChangeHandler()})),r.expandable&&r.eventBus.on(l.a.STATE_CHANGE,(function(){return e.containerExpansionStateChangeHandler()}))}}},{key:"renderEventHandler",value:function(){if(!this.rendered){this.rendered=!0;var t=new o.a(o.a.TRACKING_REQUEST,{trigger:o.a.trigger.TIMER_START,name:a.a.timer.DISPLAY});this.eventBus.trigger(t)}}},{key:"containerExpansionStateChangeHandler",value:function(){var t=this,e=o.a.trigger.TIMER_STOP;Object.keys(this.containers).forEach((function(n){t.containers[n].state!==s.a.state.DEFAULT&&(e=o.a.trigger.TIMER_START)}));var n=new o.a(o.a.TRACKING_REQUEST,{trigger:e,name:a.a.timer.EXPANSION});this.eventBus.trigger(n)}},{key:"containerViewChangeHandler",value:function(){var t=o.a.trigger.TIMER_STOP;for(var e in this.containers)if(this.containers.hasOwnProperty(e)&&this.containers[e].visible){t=o.a.trigger.TIMER_START;break}var n=new o.a(o.a.TRACKING_REQUEST,{trigger:t,name:a.a.timer.VIEW});this.eventBus.trigger(n)}},{key:"containerActionEventHandler",value:function(t){var e=this,n=Object.keys(this.containers),r=[t];if(1===n.length){var i=this.containers[n[0]];i[t.action].apply(i,r)}else{if(t.containerId){var o=this.containers[t.containerId];return void(o&&o[t.action].apply(o,r))}this.Creative.actions&&this.Creative.actions.hasOwnProperty(t.action)&&this.Creative.actions[t.action].forEach((function(n){if(n.source===t.target.containerId||"*"===n.source){var i=e.containers[n.target];i&&i[n.action].apply(i,r)}}))}}}])&&d(e.prototype,n),r&&d(e,r),m}(i.a);E.QUALIFIED_ROLLOVER_THRESHOLD=500,E.MOBILE_INTERACTION_THRESHOLD=1e4,r.a.RichAdvert=E,e.a=E},function(t,e,n){"use strict";var r=n(27),i=n(5),o=n(13),a=n(20),s=(n(10),n(7)),c=n(4),u=n(3),l=n(34),f=n(11),h=n(0),d=n(25);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var i=C(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(v,t);var e,n,l,h=E(v);function v(t,e,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(a=h.call(this,t,e,n,r,i,o)).mouseIsOver=!1,a.visibleinViewport=!1,a.visible=!1,a.pushesContent=!1,a.width=0,a.height=0,a.absLeft=0,a.absTop=0,a.initialParentHeight=0,a}return e=v,(n=[{key:"copyProperties",value:function(t){m(C(v.prototype),"copyProperties",this).call(this,t),this.initialState&&this.states.hasOwnProperty(this.initialState)||(this.initialState=i.a.state.DEFAULT),this.expandable=Object.keys(this.states).length>1}},{key:"getInitialLayoutState",value:function(){return this.getState(this.initialState)}},{key:"getMaximumLayoutState",value:function(){for(var t=i.a.STATE_PRECEDENCE.length,e=0;e<t;e++){var n=i.a.STATE_PRECEDENCE[e];if(this.states.hasOwnProperty(n))return this.getState(n)}}},{key:"render",value:function(){var t=this;this.rendered||this.closed||(this.adEventBus.on(o.a.ACTION_COMPLETE,(function(e){return t.containerActionCompleteHandler(e)})),m(C(v.prototype),"render",this).call(this),this.checkVisibility(),window.setTimeout((function(){return t.checkVisibility()}),r.a.VIEWABLE_IMPRESSION_THRESHOLD-300),this.addMouseListeners())}},{key:"createContentDiv",value:function(){var t,e,n=this.anchorDiv.ownerDocument,r=n.createElement("div");r.id=this.contentId,t=this.anchorDiv,this.initialState===i.a.state.FULLSCREEN?(this.preventFullscreenDetach||(t=n.body),e=this.getFullscreenContentStyle()):e=this.getMaximumAnchoredContentStyle(),c.c(r,e),t.appendChild(r),this.initialParentHeight=c.e(this.anchorDiv.parentNode,"height"),this.adjustAnchorParent(this.getInitialLayoutState(this.initialState),!0)}},{key:"addMouseListeners",value:function(){var t=this;this.contentDiv.addEventListener("mouseenter",(function(){return t.triggerMouseOverEvent()}),!1),this.contentDiv.addEventListener("mouseleave",(function(){return t.triggerMouseOutEvent()}),!1)}},{key:"triggerMouseOverEvent",value:function(){if(!this.mouseIsOver){var t=new f.a(f.a.MOUSE_OVER);this.eventBus.trigger(t),this.adEventBus.trigger(t),this.mouseIsOver=!0}}},{key:"triggerMouseOutEvent",value:function(){if(this.mouseIsOver){var t=new f.a(f.a.MOUSE_OUT);this.eventBus.trigger(t),this.adEventBus.trigger(t),this.mouseIsOver=!1}}},{key:"checkVisibility",value:function(){}},{key:"triggerViewportEvent",value:function(t){var e=t.inViewport;!this.visibleinViewport&&e?(this.visibleinViewport=!0,this.eventBus.trigger(new d.a(d.a.CHANGE,{viewable:e}))):this.visibleinViewport&&!e&&(this.visibleinViewport=!1,this.eventBus.trigger(new d.a(d.a.CHANGE,{viewable:e})))}},{key:"expand",value:function(t){this.expandAdapter&&this.rendered&&this.expandable&&(this.states.hasOwnProperty(t.state.key)?t.state.data=this.states[t.state.key]:t.state=this.states.hasOwnProperty(i.a.state.EXPAND)?this.getState(i.a.state.EXPAND):this.getMaximumLayoutState(),this.state!==t.state.key&&this.expandAdapter&&this.expandAdapter.expand(t))}},{key:"contract",value:function(t){this.expandAdapter&&this.rendered&&this.expandable&&(this.states.hasOwnProperty(t.state.key)?t.state.data=this.states[t.state.key]:t.state=this.getState(i.a.state.DEFAULT),this.state!==t.state.key&&this.expandAdapter&&this.expandAdapter.contract(t))}},{key:"getStateClippingRect",value:function(t){var e,n,r,o;switch(t){case i.a.state.FULLSCREEN:e={top:"auto",right:"auto",bottom:"auto",left:"auto"};break;default:r=(n=this.states[t]).offsetY||0,o=n.offsetX||0,e={top:Math.abs(r),right:Math.abs(o)+n.width,bottom:Math.abs(r)+n.height,left:Math.abs(o)}}return e}},{key:"getFullscreenContentStyle",value:function(){return{position:"fixed",top:"0",left:"0",bottom:"0",right:"0",width:null,height:null}}},{key:"getMaximumAnchoredContentStyle",value:function(){var t=this.getStateClippingRect(this.initialState),e=this.getAnchorLayoutState(),n=this.getMaximumLayoutState();if(n.key===i.a.state.FULLSCREEN){var r=this.getState(i.a.state.EXPAND);n=r||e}var o=n.data,a=o.width,s=o.height;return p({position:"absolute",width:"".concat(a,"px"),height:"".concat(s,"px"),border:"0px",left:e.data.offsetX+"px",top:e.data.offsetY+"px",clip:"rect(".concat(t.top,"px,").concat(t.right,"px,").concat(t.bottom,"px,").concat(t.left,"px)"),"text-align":"left"},this.getAnimationCSS())}},{key:"contentToAnchor",value:function(){c.c(this.contentDiv,this.getMaximumAnchoredContentStyle()),this.preventFullscreenDetach||this.contentDiv.parentNode===this.anchorDiv||(this.adEventBus.trigger(new s.a(s.a.DETACH,{container:this})),this.anchorDiv.appendChild(this.contentDiv))}},{key:"contentToFullscreen",value:function(){c.c(this.contentDiv,this.getFullscreenContentStyle());var t=this.anchorDiv.ownerDocument;this.preventFullscreenDetach||this.contentDiv.parentNode===t.body||(this.adEventBus.trigger(new s.a(s.a.DETACH,{container:this})),t.body.appendChild(this.contentDiv))}},{key:"adjustAnchorParent",value:function(t,e){if(t.key!==i.a.state.FULLSCREEN){var n={},r={};t.data.push?(this.hasPushed=!0,n={height:"".concat(t.data.height,"px")},r={height:"auto"}):(n=this.anchorDivStyle,this.hasPushed||(r={height:this.initialParentHeight})),e||(n=p(n,this.getAnchorAnimationCSS()),r=p(r,this.getAnchorAnimationCSS())),c.c(this.anchorDiv,n),c.c(this.anchorDiv.parentNode,r)}}},{key:"getAnchorAnimationCSS",value:function(){return this.transition?{transition:"height ".concat(this.transition.duration," ").concat(this.transition.timingFunction)}:{}}},{key:"getAnimationCSS",value:function(){return this.transition?{transition:"clip ".concat(this.transition.duration," ").concat(this.transition.timingFunction)}:{}}},{key:"contractionCompleteHandler",value:function(t){this.adjustAnchorParent(t.state);var e=this.getStateClippingRect(t.state.key),n={clip:"rect(".concat(e.top,"px,").concat(e.right,"px,").concat(e.bottom,"px,").concat(e.left,"px)"),"z-index":this.zIndex+1};c.c(this.contentDiv,n),this.state===i.a.state.FULLSCREEN&&this.contentToAnchor(),c.c(this.anchorDiv,{"z-index":this.zIndex}),this.state=t.state.key,this.eventBus.trigger(new a.a(a.a.STATE_CHANGE,{state:a.a.state.CONTRACT}))}},{key:"expansionCompleteHandler",value:function(t){this.adjustAnchorParent(t.state);var e=this.getStateClippingRect(t.state.key),n=t.state.key===i.a.state.FULLSCREEN?"":"px",r={clip:"rect(".concat(e.top).concat(n,",").concat(e.right).concat(n,",").concat(e.bottom).concat(n,",")+"".concat(e.left).concat(n,")"),"z-index":this.zIndex+v.ZINDEX_BUMP};c.c(this.contentDiv,r),this.state===i.a.state.FULLSCREEN?this.contentToAnchor():t.state.key===i.a.state.FULLSCREEN&&this.contentToFullscreen(),this.state=t.state.key,this.eventBus.trigger(new a.a(a.a.STATE_CHANGE,{state:a.a.state.EXPAND}))}},{key:"containerActionCompleteHandler",value:function(t){if(t.containerId===this.id&&t.status===o.a.status.SUCCESS)switch(t.action){case o.a.action.EXPAND:this.expansionCompleteHandler(t);break;case o.a.action.CONTRACT:this.contractionCompleteHandler(t)}}},{key:"coreLibEventHandler",value:function(t){m(C(v.prototype),"coreLibEventHandler",this).call(this,t),this.rendered&&(t.type===s.a.LOAD||u.a.LOAD)&&this.checkVisibility()}}])&&y(e.prototype,n),l&&y(e,l),v}(l.a);h.a.RichInlineDivContainer=O,O.ZINDEX_BUMP=10,e.a=O},function(t,e,n){"use strict";var r=n(0),i=n(9);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e}var e,n,a;return e=t,a=[{key:"bootstrapFriendlyWindow",value:function(t,e){var n;try{n=r.a.createNamespace(t).nsVersion}catch(t){return!1}var i=n[e.AdManager.NAME];if(i)i.registerAd(e);else{(n[e.AdManager.CONFIG_QUEUE]=n[e.AdManager.CONFIG_QUEUE]||[]).push(e);var o=r.a[e.AdManager.LOADED_VERSIONS],a=e.Format.library.version;if(!o||-1===o.indexOf(a)){(o=r.a[e.AdManager.LOADED_VERSIONS]=r.a[e.AdManager.LOADED_VERSIONS]||[]).push[a];var s=document.createElement("script");s.src=e.Format.library.url,t.document.body.insertBefore(s,t.document.body.firstChild)}}return!0}}],(n=[{key:"breakout",value:function(){var e=Object(i.c)(Object(i.b)(this.adConfig));if(!e)return!1;var n=e.ownerDocument.defaultView,r=this.adConfig.clone();return r.anchorPlaceholder=e,t.bootstrapFriendlyWindow(n,r)}}])&&o(e.prototype,n),a&&o(e,a),t}();r.a.FriendlyIframeBreakout=a,e.a=a},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(5),a=n(4),s=n(9),c=n(42),u=n(35);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adConfig=e}var e,n,f;return e=t,(n=[{key:"breakout",value:function(){return this.registerCreative(),this.createSafeFrameSandbox()}},{key:"registerCreative",value:function(){var e=this.adConfig.Creative.containers.placement.states.default;r.a[t.registration.PROXY_FN_NAME]=function(e){e("register",r.a[t.registration.DATA_KEY]),r.a[t.registration.CALLBACK_FN_REF]=e};try{r.a[t.registration.STATUS_HOOK_REF]=this.adConfig.Format.library.hooks[i.a.hookTypes.ON_SAFEFRAME_STATUS_UPDATE]}catch(t){console.error(t)}window.$sf.ext.register(e.width,e.height,(function(e,n){if("register"!==e&&"register-update"!==e||(r.a[t.registration.DATA_KEY]=n),"function"==typeof r.a[t.registration.STATUS_HOOK_REF])try{var i=t.registration.STATUS_HOOK_REF;if(!1===r.a[i].apply(null,[e,n]))return}catch(t){console.error(t)}if("function"==typeof r.a[t.registration.CALLBACK_FN_REF])try{r.a[t.registration.CALLBACK_FN_REF](e,n)}catch(t){console.error(t)}}))}},{key:"createSafeFrameSandbox",value:function(){var t=this.adConfig.Creative.containers.placement.states[o.a.state.DEFAULT],e=document.createElement("iframe");e.id="craftSafeFrameSandbox_".concat(this.adConfig.AdServer.cacheBuster),e.seamless="seamless",e.allowtransparency="true",e.scrolling="no",Object(s.a)(e),a.c(e,{width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),border:0,overflow:"hidden"});var n=t.offsetX<0?"right:0px;":"left:0px;",r=t.offsetY<0?"bottom:0px;":"top:0px;",i='<!DOCTYPE html><html><head><meta name="'.concat(u.a,'"></head>')+'<body style="padding:0;margin:0;width:100%;">'+'<div style="position:absolute;'.concat(n).concat(r,'">')+'<div id="'.concat(this.adConfig.anchorDivId,'"></div>')+"</div></body></html>";try{var l=document.getElementById(this.adConfig.DeliveryServerTag.variables.tagId);l.parentNode.insertBefore(e,l)}catch(t){document.body.appendChild(e)}var f=e.contentDocument;return f.open(),f.write(i),f.close(),c.a.bootstrapFriendlyWindow(e.contentWindow,this.adConfig.clone())}}])&&l(e.prototype,n),f&&l(e,f),t}();r.a.SafeFrameBreakout=f,f.registration={DATA_KEY:"_sfregdata",PROXY_FN_NAME:"_sfproxyfn",CALLBACK_FN_REF:"_sfcbfn",STATUS_HOOK_REF:"_sfhookgn"},e.a=f},function(t,e,n){"use strict";n(45),n(46)},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"function"!=typeof Object.create&&(Object.create=function(t,e){function r(){}if(r.prototype=t,"object"===n(e))for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return new r})},function(t,e){Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n})},,function(t,e,n){"use strict";n.r(e);n(44);var r=n(0),i=n(37),o=n(8),a=n(30),s=n(42);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"breakout",value:function(){}}])&&c(e.prototype,n),r&&c(e,r),t}();r.a.NonFriendlyIframeBreakout=u;var l=u,f=n(43),h=n(9);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getBreakoutStrategy",value:function(e,n){var r=null;return e.getOverride(o.a.override.RENDER_BACKUP)||n.safeFrameSandbox||void 0!==e.anchorPlaceholder||(n.safeFrame?r=new f.a(e):n.iframe&&t.requiresIframeBreakout(e)&&(r=n.friendlyIframe?new s.a(e):new l(e))),r}},{key:"requiresIframeBreakout",value:function(t){if(Object(h.b)(t)===window.self)return!1;var e=t.Creative.containers;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(r.type!==a.a||Object.keys(r.states).length>1)return!0}return!1}}],(n=null)&&d(e.prototype,n),r&&d(e,r),t}();r.a.BreakoutFactory=v;var p=v,y=n(40),m=n(34),g=n(39),E=n(4),b=n(3),C=n(29),O=n(13);function T(){return(T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.container=t,this.adEventBus=t.adEventBus;var e=t.adManager.env;this.isInFriendlyIframe=e.friendlyIframe,this.isInFriendlyIframe&&h.e()!==window.self&&(this.containingIframe=h.c(parent)),this.registerHostPageGeometricUpdate(!0)}},{key:"expand",value:function(t){this.dispatchContainerActionCompleteEvent({uid:t.uid,action:O.a.action.EXPAND,state:t.state})}},{key:"contract",value:function(t){this.dispatchContainerActionCompleteEvent({uid:t.uid,action:O.a.action.CONTRACT,state:t.state})}},{key:"dispatchContainerActionCompleteEvent",value:function(t){var e=T({status:O.a.status.SUCCESS,detail:"",containerId:this.container.id},t),n=new O.a(O.a.ACTION_COMPLETE,e);this.adEventBus.trigger(n)}},{key:"getVisibilityMetrics",value:function(){var t,e,n=C.b(this.isInFriendlyIframe),r=n.w,i=n.h,o=C.a(this.isInFriendlyIframe),a=o.x,s=o.y,c=this.getVisibleDims(),u=c.w,l=c.h,f=E.d(this.containingIframe||this.container.contentDiv),h=f.x,d=f.y;t=a>=h+u||h-a>r?0:u-(a<h?0:Math.abs(h-a))-Math.max(h+u-r-a,0),e=s>=d+l||d-s>i?0:l-(s<d?0:Math.abs(d-s))-Math.max(d+l-i-s,0);var v=u*l;return{maximumAdArea:v,percentInView:t*e/v}}},{key:"cleanup",value:function(){this.registerHostPageGeometricUpdate(!1)}},{key:"registerHostPageGeometricUpdate",value:function(t){for(var e=[b.a.RESIZE,b.a.SCROLL,b.a.ORIENTATION_CHANGE],n=0;n<e.length;n++){var r=e[n];this.container.globalEventBus[t?"on":"off"](r,this.container.checkVisibility,this.container)}}},{key:"getVisibleDims",value:function(){return this.containingIframe?{w:parseInt(E.e(this.containingIframe,"width")),h:parseInt(E.e(this.containingIframe,"height"))}:{w:this.container.states[this.container.state].width,h:this.container.states[this.container.state].height}}}])&&S(e.prototype,n),r&&S(e,r),t}();r.a.SimpleExpandAdapter=w;var I=w,A=n(5),R=(n(10),n(32)),k=n(33);function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"init",value:function(t,e){var n=this;this.container=t,this.adEventBus=t.adEventBus,this.initialState=e,this.commandQueue=[],this.activeCommand=null,this.safeFrameSandbox=window.frameElement,this.safeFrameAPI=window.parent.sfAPI||window.parent.$sf.ext,this.secureDarlaKey=null,r.a.createNamespace(parent).nsVersion[f.a.registration.PROXY_FN_NAME]((function(t,e){n.statusUpdateHandler(t,e)})),this.defaultState=this.container.getState(A.a.state.DEFAULT),this.defaultState.key!==e.key&&this.expand({state:e})}},{key:"expand",value:function(e){var n=this.getArgumentObject();if(r.a.SafeFrameUtils.isInFlexFrame())return n.key=this.secureDarlaKey,n.ratio="".concat(e.state.data.width,"x").concat(e.state.data.height),void this.queueCommand(t.command.RESIZE_TO,[n],e);n.push=!(!e.state.data.push||!this.featureEnabled(t.feature.PUSH)),"number"!=typeof e.state.data.offsetX&&(e.state.data.offsetX=0),"number"!=typeof e.state.data.offsetY&&(e.state.data.offsetY=0);var i=this.defaultState.data;if(e.state.key===A.a.state.FULLSCREEN){var o=this.safeFrameAPI.geom(),a=o.par&&o.par.t?parseInt(o.par.t):0;n.l=parseInt(o.self.l),n.r=parseInt(o.win.w)-(n.l+i.width),n.t=parseInt(o.self.t)-a,n.b=parseInt(o.win.h)-(n.t+i.height)+a,e.state.data.width=o.win.w,e.state.data.height=o.win.h}else{var s=Math.abs;n.l=s(s(i.offsetX)-s(e.state.data.offsetX)),n.r=s(e.state.data.width-(n.l+i.width)),n.t=s(s(i.offsetY)-s(e.state.data.offsetY)),n.b=s(e.state.data.height-(n.t+i.height))}Object.keys(n).forEach((function(t){0===n[t]&&delete n[t]})),this.queueCommand(t.command.EXPAND,[n],e)}},{key:"queueCommand",value:function(t,e,n){this.commandQueue.push({method:t,args:e,meta:n}),1===this.commandQueue.length&&this.executeNextCommand()}},{key:"executeNextCommand",value:function(){switch(this.activeCommand=this.commandQueue.shift(),this.activeCommand.method){case t.command.EXPAND:this.safeFrameAPI.expand(this.activeCommand.args[0]);break;default:this.safeFrameAPI[this.activeCommand.method].apply(null,this.activeCommand.args)}}},{key:"contract",value:function(e){if(r.a.SafeFrameUtils.isInFlexFrame()){var n=this.getArgumentObject();n.key=this.secureDarlaKey,n.ratio="".concat(e.state.data.width,"x").concat(e.state.data.height),this.queueCommand(t.command.RESIZE_TO,[n],e)}else this.queueCommand(t.command.COLLAPSE,[],e)}},{key:"resizeSandbox",value:function(){var t=this.activeCommand.meta.state.data;E.c(this.safeFrameSandbox,{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}},{key:"getArgumentObject",value:function(){var t={};try{t=new parent.Object}catch(t){console.error(t.message)}return t}},{key:"featureEnabled",value:function(t){var e=this.safeFrameAPI.supports();return e&&e[t]}},{key:"getVisibilityMetrics",value:function(){var t=this.safeFrameAPI.geom().self;return{maximumAdArea:(t.b-t.t)*(t.r-t.l),percentInView:t.iv}}},{key:"cleanup",value:function(){}},{key:"dispatchContainerActionCompleteEvent",value:function(e,n){e=e===t.status.FAILED?O.a.status.FAILURE:O.a.status.SUCCESS;var r=_({},this.activeCommand.meta,{status:e,detail:n&&n.reason?n.reason:null,containerId:this.container.id}),i=new O.a(O.a.ACTION_COMPLETE,r);this.adEventBus.trigger(i)}},{key:"dispatchKeyUpdateEvent",value:function(){null!==this.secureDarlaKey&&this.adEventBus.trigger(new R.a(R.a.UPDATE,{key:this.secureDarlaKey}))}},{key:"statusUpdateHandler",value:function(e,n){switch(t.status.GEOM_UPDATE,e){case t.status.GEOM_UPDATE:break;case t.status.REGISTER:case t.status.REGISTER_UPDATE:try{this.secureDarlaKey=n.key}catch(t){Object(k.a)("[SafeFrameExpandAdapter]: Failed to retrieve DARLA key")}this.dispatchKeyUpdateEvent();break;case t.status.RESIZED:case t.status.COLLAPSED:case t.status.EXPANDED:this.resizeSandbox();case t.status.FAILED:this.dispatchContainerActionCompleteEvent(e,n)}this.commandQueue.length>0&&this.executeNextCommand()}}])&&P(e.prototype,n),i&&P(e,i),t}();r.a.SafeFrameExpandAdapter=D,D.command={EXPAND:"expand",COLLAPSE:"collapse",RESIZE_TO:"resizeTo"},D.feature={PUSH:"exp-push",EXPAND_OVER:"exp-over",READ_COOKIE:"read-cookie",WRITE_COOKIE:"write-cookie"},D.status={GEOM_UPDATE:"geom-update",REGISTER:"register",REGISTER_UPDATE:"register-update",EXPANDED:"expanded",COLLAPSED:"collapsed",RESIZED:"resize-to",FAILED:"failed"};var L=D,N=n(41);function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getContainer",value:function(t,e,n,r,i){return i.env.requiresBackupImage()||e.getOverride(o.a.override.RENDER_BACKUP)?new m.a(g.a,e,n,r,i):(a=i.env.safeFrameSandbox?new L:new I,new N.a(g.a,e,n,r,i,a));var a}}],(n=null)&&U(e.prototype,n),r&&U(e,r),t}();r.a.RichContainerFactory=x;var F=x,j=n(28);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G(t);if(e){var i=G(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(o,t);var e,n,r,i=Q(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,o.getOptionsForSuper())}return e=o,r=[{key:"getOptionsForSuper",value:function(){return{advertClass:y.a,breakoutFactory:p,containerFactory:F,trackerClass:j.a}}}],(n=[{key:"registerAd",value:function(t){t.AdManager=o.references,H(G(o.prototype),"registerAd",this).call(this,t)}},{key:"initAd",value:function(t){H(G(o.prototype),"initAd",this).call(this,t)}}])&&B(e.prototype,n),r&&B(e,r),o}(i.a);q.references={NAME:"richAdManager",CONFIG_QUEUE:"richAdConfigQueue",LOADED_VERSIONS:"richAdManagerVersions"},r.a.RichAdManager=q;var W=q,X=r.a.richAdManager;if(void 0===X){var Y=r.a[W.references.CONFIG_QUEUE];X=r.a[W.references.NAME]=new W,void 0!==Y&&X.registerAds(Y)}e.default=X}]);
//# sourceMappingURL=Delivr-2.7.4.js.map