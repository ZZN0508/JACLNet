(()=>{"use strict";var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),t=new Uint8Array(16);function n(){if(!e)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(e){return"string"==typeof e&&o.test(e)};for(var r=[],a=0;a<256;++a)r.push((a+256).toString(16).substr(1));const s=function(e,t,o){var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){o=o||0;for(var s=0;s<16;++s)t[o+s]=a[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase();if(!i(n))throw TypeError("Stringified UUID is invalid");return n}(a)},c="HABU_1P_ID",l="__Habu_questionList",u="bowline",d="__Habu^bowline",m="ns",f="siteConfig",p="data-confuid",g="habu-question-slot",h={missingContainer:new Error("Missing Parent Container"),missingConfiguration:new Error("Missing configuration ID")},w={recordAnswers:"RECORD_ANSWER",recordEmail:"RECORD_EMAIL",transmitQuestions:"SENDQ",wave:"WAVE"},y="cringle",b="forefoot",_="4.2.0",I=e=>({propertyID:e.propertyID,quarterdeckID:e.ID,organizationID:e.orgID,domain:window.location.hostname,pageUrl:`${window.location.hostname}${window.location.pathname}`});function E(e,t,n){if(0!==n)for(let o=0;o<t.length;o+=1){if(t[o]===e)return t[o];if(t[o]instanceof Object){const i=O(e,t[o],n-1);if(i)return i}else if(t[o]instanceof Array){const i=E(e,t[o],n-1);if(i)return i}}}function O(e,t,n){if(0===n)return;const o=Object.keys(t);for(let i=0;i<o.length;i+=1){if(o[i]===e)return t[o[i]];if(t[o[i]]instanceof Object){const r=O(e,t[o[i]],n-1);if(r)return r}else if(t[o[i]]instanceof Array){const r=E(e,t[o[i]],n-1);if(r)return r}}}const C=async(e,t={},n=3)=>{const o=new Headers([["Accept","application/json"],["Access-Control-Allow-Credentials","true"]]);try{const n=await fetch(e,{credentials:"include",headers:o,...t});return await(n.ok?n.json():void 0)}catch(o){return n>1?C(e,t,n-1):void 0}},A=(e,t)=>{const n=new Headers([["Accept","application/json"],["Access-Control-Allow-Credentials","true"],["Content-Type","application/x-www-form-urlencoded"]]);return fetch(e,{method:"POST",mode:"no-cors",credentials:"include",headers:n,body:t})},v=()=>document.cookie.split(";").reduce(((e,t)=>Object.assign(e,{[t.split("=")[0].trim()]:t.split("=")[1]})),{}),T=()=>s(),S=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),D=(e="")=>{try{return JSON.parse(e)}catch(e){return{}}},R=()=>{const e=document.querySelector("[data-confuid]");return e?e.getAttribute(p):void 0},U=(e,t)=>{if("string"==typeof e&&0!==e.length)try{return e.split(".").reduce(((e,t)=>{if(t.indexOf("[")>=0){const n=t.slice(t.indexOf("[")+1,t.indexOf("]"));return e[parseInt(n,10)]}return e[t]}),t)}catch(e){return e instanceof TypeError?void 0:void console.warn(e)}},H="https://fulcrum-antenna.imhd.io/collect/registration/3087a8ff-41b4-401c-98a9-9a4c8706a3ca/imhd",N="https://fulcrum-antenna.imhd.io/collect/registration/2b85ffa6-2fbd-4fad-93f7-dba57b2c782b/imhd",P={adh_asics:"https://fulcrum-antenna.imhd.io/getuid/imhd/google-adh?account_id=asics_adh",amazon_us:"https://fulcrum-antenna.imhd.io/getuid/imhd/amazon-us",liveramp:"https://fulcrum-antenna.imhd.io/getuid/imhd/liveramp",throtle:"https://fulcrum-antenna.imhd.io/getuid/imhd/throttle"},j={INFO:"Info",WARN:"Warn",ERROR:"Error"},$=(e={})=>{let t;t=e instanceof Array?{msg:e.join("; "),pageUrl:`${window.location.hostname}${window.location.pathname}`,type:j.INFO}:"object"!=typeof e?{msg:e,pageUrl:`${window.location.hostname}${window.location.pathname}`,type:j.INFO}:e;const n=Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&");return A("https://fulcrum-antenna.imhd.io/collect/jserrors/2041517b-a8db-4bd8-902c-a5eea719db61/imhd",n)},k=(e=.1)=>Math.random()+e>1?$:()=>{},x=j;function B(e){const t=e||q()||T();((e,t)=>{const n=encodeURIComponent("HABU_1P_ID"),o=encodeURIComponent(t),i=new Date,r=i.getTime()+2592e7;i.setTime(r);const a=`expires=${i.toUTCString()};max-age=25920000`;document.cookie=`${n}=${o};${a};path='/';secure; samesite=none`})(0,t),sessionStorage.setItem(c,t),localStorage.setItem(c,t)}function q(){const e=v().HABU_1P_ID,t=sessionStorage.getItem(c),n=localStorage.getItem(c);return e||t||n||null}const L=function(e){const t=function(){const e=[],t=()=>{},n=["fill","pop","reverse","shift","sort","splice","unshift"];return Object.getOwnPropertyNames(Array.prototype).filter((e=>n.includes(e))).forEach((n=>{e[n]=t})),e}(),n=function(){const e=window.__Habu||D(localStorage.getItem(d));return e?e.version!==_||Date.now()-e.ts>1728e5?null:e:null}()||{};n[e]&&Array.isArray(n[e].bowline)&&t.push(...n[e].bowline),n.huid=n.huid||q(),n.ts=Date.now(),n.version=_,n.ns=e,n[e]={[m]:e,[u]:t},window.__Habu=n,localStorage.setItem(d,JSON.stringify(window.__Habu))},M=function(e,t,n){const o=window.__Habu[e].bowline.filter((e=>e===t||"object"==typeof e&&Object.keys(e).includes(t))).pop();return o?o[t]:n},F=function(e){if(!e||!e.details)return;const t=e.details.bowline||{},n=U(t.match,window);if(!n)return;if(!(n instanceof Array||n instanceof Object))return;if(!Array.isArray(t.highlights))return void k(.05)({type:x.ERROR,msg:"Corrupt Configuration: "+t.highlights,action:"Bowline: Iterate through highlights",...I(e)});const o=[];return t.highlights.forEach((e=>{let t;if(e.match?t=localStorage.getItem(e.match)||v()[e.match]||U(e.match,n):Array.isArray(n)?t=E(e.key,n,3):n instanceof Object&&(t=O(e.key,n,3)),!t)return;const i=Array.isArray(t)?t.join(","):t;o.push({key:e.key,value:i,type:e.type})})),o},J=function(e,t){window.__Habu[e].bowline.push(t),localStorage.setItem(d,JSON.stringify(window.__Habu))},Q=[{code:"identity_management"},{code:"targeted_advertising"},{code:"personalization_optimization"},{code:"segmentation"},{code:"modeling"},{code:"activation"},{code:"analytics_insights"},{code:"data_sales"}],V=e=>{const t=[];return q()&&t.push({type:"HABU_1P_ID",userID:q()}),window.__Habu.huid&&t.push({type:"HABU_3P_ID",userID:window.__Habu.huid}),e&&(B(e),t.push({type:"CLIENT_ID",userID:e})),t},G={getConsent:([e,t,n,o])=>{const i=M(e,f);let r,a;o?(r="CLIENT_ID",a=o):q()?(r="HABU_1P_ID",a=q()):window.__Habu.huid?(r="HABU_3P_ID",a=window.__Habu.huid):n({success:!1,error:"Missing Identity",flags:Q}),C(((e,t,n)=>`https://origin-gangway.habu.com/gangway/${e}/user-consent/type/${t}/user/${n}`)(i.orgID,r,a),{method:"GET"},1).then((e=>{const o=e&&e.processingActivitiesUserConsent;e&&o?o&&0!==o.length?t({success:!0,flags:o}):n({success:!1,error:"Consent not set",flags:Q}):n({success:!1,error:"Internal Service Error: Gangway. Please contact us",flags:Q})})).catch((e=>n({success:!1,flags:Q,error:e})))},setConsent:([e,t,n,o,i])=>{if(!i)return n(new Error("Missing consent signals"));if(!Array.isArray(i))return n(new Error("Expected Array"));if(0===i.length)return n(new Error("Empty Array"));const r=M(e,f),a=I(r),s="boolean"==typeof i[0]?Q.map((e=>({...e,allowed:i[0]}))):i,c={...a,identities:JSON.stringify(V(o)),consentJson:JSON.stringify(s)};return J(e,{CONSENT_FLAGS:c}),A("https://fulcrum-antenna.imhd.io/collect/consent/c2661ce9-a421-465e-8b08-4c3e223b8ce3/imhd",S(c)).then((()=>t({success:!0,flags:s}))).catch((e=>n({error:e,success:!1})))},portability:([e,t,n,o])=>{const i=T(),r=M(e,f),a={...I(r),identities:JSON.stringify(V(o)),requestID:i};A("https://fulcrum-antenna.imhd.io/collect/portability/203f3c3a-c0cf-4629-9f76-9b70093059de/imhd",S(a)).then((()=>t({success:!0,requestID:i}))).catch((e=>n({error:e,success:!1})))},rtbf:([e,t,n,o,i])=>{const r=T(),a=M(e,f),s={...I(a),identities:JSON.stringify(V(o)),requestID:r};i&&(s.email=i),A("https://fulcrum-antenna.imhd.io/collect/rtbf/7014021d-f07a-45d0-8bd8-c21d44eb291e/imhd",S(s)).then((()=>t({success:!0,requestID:r}))).catch((e=>n({error:e,success:!1})))}},W={CAPTURE_CONSENT:"CAPTURE_CONSENT",GET_CONSENT:"GET_CONSENT",REQUEST_PORTABILITY:"REQUEST_PORTABILITY",REQUEST_RTBF:"REQUEST_RTBF"},z={CAPTURE_CONSENT:G.setConsent,GET_CONSENT:G.getConsent,REQUEST_PORTABILITY:G.portability,REQUEST_RTBF:G.rtbf},Y=[],K=e=>(t,...n)=>(e=>!!W[e])(t)?(Y.push([t,n]),new Promise(((t,n)=>{setTimeout((()=>{((e,t,n)=>{const[o,i]=Y.pop();z[o]([e,t,n,...i])})(e,t,n)}),1e3)}))):Promise.reject(new Error("Invalid Ask"));function X(){const e=[void 0,null,""],t=new Date;let n={};if(window.location.ancestorOrigins&&window.location.ancestorOrigins.length>0)n={Url1:window.location.ancestorOrigins[0]};else{n={Url1:window.location.hostname,Url2:window.location.pathname,Url3:window.location.search};const e=["utm_source","utm_medium","utm_campaign"];window.location.search.substring(1).split("&").forEach((t=>{const[o,i]=t.split("=").map((e=>decodeURIComponent(e)));e.includes(o)&&(n[o]=i)}))}const o={...n,userAgent:window.navigator.userAgent,os:window.navigator.platform,tod:t.getTime(),dow:t.getUTCDay()},i={};return Object.keys(o).forEach((t=>{-1===e.indexOf(o[t])&&(i[t]=o[t])})),i}const Z=async e=>{const t=M(e,f);let n={};n={...n,...X()};const o=function(){const e=document.getElementsByTagName("meta"),t={};let n,o;for(let i=0;i<e.length;i+=1)n=e[i].getAttribute("property")||e[i].getAttribute("name"),o=e[i].getAttribute("content"),n&&o&&(t[n.substring(n.indexOf(":")+1)]=o);return t}();Object.keys(o).length>0&&(n.metaTags=JSON.stringify(o));const i=q();var r;i&&(n={...n,HABU_1P_ID:i}),function(e){const t=document.createDocumentFragment();e.reduce(((e,t)=>((e,t,n=document.createDocumentFragment())=>{const o=document.createElement(e);return t.forEach((e=>o.setAttribute(e.key,e.value))),n.appendChild(o),n})("img",[{key:"width",value:"1px"},{key:"height",value:"1px"},{key:"src",value:t}],e)),t),document.getElementsByTagName("head")[0].appendChild(t)}((r=t.details)&&Object.hasOwnProperty.call(r,"partners")?Object.keys(P).filter((e=>r.partners.includes(e))).map((e=>P[e])):[]);const a=await function(e){const t=new Promise((e=>e(void 0)));return e.details.bowline&&Array.isArray(e.details.bowline.highlights)?0===e.details.bowline.highlights.length?t:new Promise((t=>{let n,o=600;const i=setInterval((()=>{n=F(e),o-=1,n?(clearInterval(i),t(((e=[],t,n="value")=>Array.isArray(t)&&Array.isArray(e)?0===t.length?{}:e.map((e=>({[t.map((t=>{return o=e,(n=t).startsWith("$")?o[n.substring(1)]:n;var n,o})).join(".")]:e[n]}))).reduce(((e,t)=>({...e,...t})),{}):{})(n,["bowline","$type","$key"]))):0===o&&(k()({type:x.ERROR,msg:"Cannot find client DL: "+e.details.bowline.match,action:"Bowline: Locate client dl",...I(e)}),t())}),100)})):t}(t);return a&&(n={...n,...a}),async function(e,t){return C("https://fulcrum-antenna.imhd.io/collect/pageview/297c2761-8f57-4e48-9846-c406b915ce0b/imhd",{method:"POST",mode:"no-cors",credentials:"include",body:S({...e,...I(t)}),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}(n,t)},ee={html:'\n    <div class="habu-entity-text">\n      <form action="#" autocomplete="on" onsubmit="window.__Habu.sendEmail(localStorage.getItem(\'__Habu_currentAnswerValue\')); return false;">\n        <label style="display: block">\n          <p class="template-questions">Sign up for exclusive content and offers so you can be first in the know.</p>\n          <input class="habu-email" name="user-input" type="email" placeholder="Email" required />\n        </label>\n        <br />\n        <button class="habu-primary-btn" type="submit"><span>Submit</span></button>\n      </form>\n    </div>\n  ',viewUrl:N,type:"email",submitUrl:H},te={html:'\n    <div class="habu-entity-text">\n      <form>\n        <p class="template-questions">Thank You!</p>\n      </form>\n    </div>\n  ',type:"neutral",viewUrl:!1},ne=k(.1),oe=()=>document.getElementById(g),ie=e=>{window.__Habu.widgetConfigID=e||R()},re=()=>window.__Habu.widgetConfigID,ae=(()=>{const e={},t=q();return function(n){if(e[n])return e[n];{const o={widgetConfigID:n};return t&&(o.userID=t),e[n]=o,e[n]}}})();async function se(){const e=re(),t=await C("https://origin-getafix.imhd.io/getafix/questions/fetch",{method:"POST",body:JSON.stringify(ae(e))});t&&localStorage.setItem(l,JSON.stringify(t.entityScripts))}function ce(){const e=localStorage.getItem(l);let t=D(e);if(!(t instanceof Array))return"";0===t.length&&(t=[ee,te]);const n=t.splice(0,1).pop(),o=JSON.stringify(t);return localStorage.setItem(l,o),localStorage.setItem("__Habu_currentQuestionId",n.entityID),n}function le(e,t){const n=M(e,f),o=re();let i,r={};if(Object.hasOwnProperty.call(t,"type")&&"email"===t.type)i=N;else{if(Object.hasOwnProperty.call(t,"type")&&"neutral"===t.type)return;i="https://fulcrum-antenna.imhd.io/collect/declared/947f14e3-a1d5-4048-818e-4f916200945c/imhd",r={questionID:t.entityID}}C(i,{method:"POST",body:S({...I(n),...ae(o),...r}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function ue(e){const t=ce();((e,t)=>{if(!e)throw k()({type:x.ERROR,msg:"Client error: Missing parent container: habu-question-slot",action:"Forefoot: Render into container",pageUrl:`${window.location.hostname}${window.location.pathname}`}),h.missingContainer;const n=document.createDocumentFragment(),o=document.createElement("div");o.style.height="100%",o.style.width="100%",o.innerHTML=t;const i=o.getElementsByClassName("habu-entity-styles")[0];if(n.appendChild(o),i)e.firstElementChild?e.replaceChild(n,e.firstElementChild):e.appendChild(n);else{const t=e.getElementsByClassName("habu-entity-text")[0];t.parentNode.replaceChild(n,t)}})(oe(),t.html),le(e,t),Object.hasOwnProperty.call(t,"type")&&"neutral"===t.type||(()=>{const e=["radio","email"],t=document.getElementById(g).querySelector("div form");t?t.querySelectorAll("input").forEach((t=>{e.includes(t.type)&&t.addEventListener("change",(e=>localStorage.setItem("__Habu_currentAnswerValue",e.target.value)),!1)})):k()({type:x.INFO,msg:"Wrong html structure. Expected: questionSlot > div > form",action:"Utils: Init User Input Widget with event listeners",pageUrl:`${window.location.hostname}${window.location.pathname}`})})()}function de({ns:e,widgetConfigID:t},n){const o=ae(t),i=M(e,f),r=I(i);return function(e,t){C("https://fulcrum-antenna.imhd.io/collect/declared/4a2fc4b9-60f8-4a90-a8af-e830308e5495/imhd",{method:"POST",body:S({...r,...o,questionID:e,answer:t}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)}}function me({ns:e,widgetConfigID:t},n){const o=ae(t),i=M(e,f),r=I(i);return function(e){C(H,{method:"POST",body:S({...r,...o,email:e}),mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)}}const fe={"ID":"8416018b-1fcb-4c56-a99d-e18e13e35753","CreatedAt":"2021-02-12T18:51:32.117948Z","CreatedByUserID":"712da422-c774-4192-a71d-a2d7da509853","UpdatedAt":"2021-04-22T23:31:34.399469Z","UpdatedByUserID":"712da422-c774-4192-a71d-a2d7da509853","DeletedAt":null,"propertyID":"08ebc1ef-cb36-4d75-9dd3-bbd672bb4b19","orgID":"dcb23cff-c1dd-4d41-9b54-ddd56b1cd280","details":{"bowline":{"highlights":[{"key":"author","match":"dataLayer.[0].author","type":"pageAttribute"},{"key":"category","match":"dataLayer.[0].category","type":"pageAttribute"},{"key":"datePublished","match":"dataLayer.[0].datePublished","type":"pageAttribute"},{"key":"pageType","match":"dataLayer.[0].pageType","type":"pageAttribute"},{"key":"paywallState","match":"dataLayer.[0].paywallState","type":"pageAttribute"},{"key":"vertical","match":"dataLayer.[0].vertical","type":"pageAttribute"},{"key":"secondaryVerticals","match":"dataLayer.[0].secondaryVerticals","type":"pageAttribute"},{"key":"anonymous_id","match":"anonymous_id","type":"userIdentifier"},{"key":"permutive-id","match":"permutive-id","type":"userIdentifier"}],"match":"window"},"collectPageViews":"true","partners":["throtle"],"version":"steady"},"namespace":"8416018b-1fcb-4c56-a99d-e18e13e35753"};(()=>{if(!Object.hasOwnProperty.call(fe,"details")||!Object.hasOwnProperty.call(fe.details,"version"))return void k()({type:x.ERROR,msg:"Quarterdeck: Missing/Malformed config",action:"Habu.js: Load config",domain:window.location.hostname,pageUrl:`${window.location.hostname}${window.location.pathname}`,...fe});const e=fe.details,t=fe.ID;var n;B(),L(t),J(t,{[f]:fe}),n=t,window.__Habu&&window.__Habu[n]||L(n),window.__Habu[n].do=K(n),window.__Habu.do=K(window.__Habu.ns),((e,t)=>{Object.hasOwnProperty.call(e,"accelerator")&&"data"===e.accelerator&&setTimeout((()=>(e=>{oe()?function(e){const t=R(),n=M(e,f);if(!t)throw ne({type:x.ERROR,msg:"Client error: Missing configurationID",action:"Forefoot: Locate native data accelerator div",...I(n)}),h.missingConfiguration;window.__Habu={...window.__Habu,sendAnswer:de({ns:e,widgetConfigID:t},(()=>ue(e))),sendEmail:me({ns:e,widgetConfigID:t},(()=>ue(e)))},ie(t),se().then((()=>ue(e)))}(e):function(e){const t=M(e,f),n=I(t);window.addEventListener("message",(t=>{const{data:o}=t;if(o&&o.from===y&&o.to===b&&Object.values(w).includes(o.type))if(o.type===w.wave){const{widgetConfigID:i}=o;if(!i)throw ne({type:x.ERROR,msg:"Client error: Missing configurationID",action:"Forefoot: Locate iframe with data accelerator",...n}),h.missingConfiguration;window.__Habu={...window.__Habu,sendAnswer:de({ns:e,widgetConfigID:i}),sendEmail:me({ns:e,widgetConfigID:i})},ie(i),se().then((()=>t.source.postMessage({to:y,from:b,type:w.wave},t.origin)))}else if(o.type===w.transmitQuestions){const n=ce();le(e,n),t.source.postMessage({...n,to:y,from:b,type:w.transmitQuestions},t.origin)}else t.isTrusted&&o.type===w.recordAnswers?window.__Habu.sendAnswer(o.questionID,o.answer):t.isTrusted&&o.type===w.recordEmail?window.__Habu.sendEmail(o.email):console.trace(t)}))}(e)})(t))),e.collectPageViews&&setTimeout((()=>Z(t)))})(e,t)})()})();