(window.webpackJsonp=window.webpackJsonp||[]).push([["0f7b"],{"+ZRA":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b}));var r=n("Go3r"),s=n("g8Fj"),i=n("w8nz"),a=n("rQBq"),o=n("E0mJ"),c=n("944x"),l=n("GlcG"),d=n("QD4+"),u=n("n/YO"),p=n("eSmw"),h=n("4cd8");function m({searchContext:e,responseFilters:t,currentTab:n,maxItemIndex:i,info:a={}}){var o;const h=Object(l.a)(t),m=Object(c.a)(n||d.g.ALL),_=Object(u.a)(a,e=>null==e),f=(null==t||null===(o=t.refinement_paths)||void 0===o?void 0:o[0])||void 0;s.a.logJitneyEvent({schema:r.a,event_data:Object.assign({},Object(p.a)(h,"refinement_paths"),{section_id:e.section_id,section_type_uid:e.section_type_uid,subtab:m,search_context:Object.assign({},e,h,{subtab:m}),page:"explore",info:_,max_item_index:i,refinement_path:f})})}function _({itemIndex:e,exploreElement:t,responseFilters:n,searchContext:r,stagedFilters:s,exploreAdditionalInfo:i,exploreFilterName:o,exploreOperationTarget:c}){(s&&Object.getOwnPropertyNames(s).length>0?a.b:a.m)({searchContext:r,operation:2,exploreAdditionalInfo:i,exploreElement:t,exploreFilterName:o,exploreOperationTarget:c,searchFilterLast:{common_filters:Object(a.kb)(n)},searchFilter:{common_filters:Object(a.kb)(s)},itemIndex:e})}function f(e){let{exploreOperationTarget:t}=e,n=babelHelpers.objectWithoutPropertiesLoose(e,["exploreOperationTarget"]);_(Object.assign({},n,{exploreElement:7,exploreOperationTarget:t}))}function b({itemIndex:e,responseFilters:t,stagedFilters:n,searchContext:r,section:s,exploreAdditionalInfo:c,productId:l,logger:d,tripTemplateItemType:u,exploreElement:p,exploreOperationTarget:m}){const{result_type:f,isMock:b}=s;if(Object(h.a)(s))switch(f){case i.u.RECENTLY_VIEWED_LISTINGS:case i.u.LISTINGS:return void _({itemIndex:e,searchContext:r,exploreElement:3,exploreOperationTarget:"listing",exploreAdditionalInfo:c,responseFilters:t,stagedFilters:n});case i.u.REFINEMENTS:var g,I;if(s.section_type_uid===i.v.CHINA_CITY_SUGGESTION)return void _({itemIndex:e,searchContext:r,exploreElement:4,exploreOperationTarget:null==s||null===(g=s.refinements)||void 0===g||null===(I=g[e||0])||void 0===I?void 0:I.title,exploreAdditionalInfo:c,responseFilters:t,stagedFilters:n});break;case i.u.CHINA_HOT_DESTINATIONS:case i.u.CHINA_HOST_PROMOTION:if(p&&m)return void _({itemIndex:e,searchContext:r,exploreElement:p,exploreOperationTarget:m,exploreAdditionalInfo:c,responseFilters:t,stagedFilters:n});break;case i.u.CHINA_POPULAR_SUMMER_DESTINATIONS:var S,E;return void _({itemIndex:e,searchContext:r,exploreElement:4,exploreOperationTarget:null==s||null===(S=s.static_destinations)||void 0===S||null===(E=S[e||0])||void 0===E?void 0:E.query,exploreAdditionalInfo:c,responseFilters:t,stagedFilters:n})}const O=Object(o.a)({resultType:f,tripTemplateItemType:u});l&&O&&!b&&Object(a.db)(l,O,r),b||"function"!=typeof d||d({itemIndex:e,responseFilters:t,stagedFilters:n,searchContext:r})}},"0B1W":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=class{constructor({maxNumberOfItems:e}){this.cacheMap={},this.maxNumberOfItems=void 0,this.maxNumberOfItems=e&&e>0?e:50,this.cacheMap=new Map}has(e){return this.cacheMap.has(e)}size(){return this.cacheMap.size}clear(){return this.cacheMap.clear()}wrapValue(e,{key:t,onSuccess:n,onFailure:r}={}){return Promise.resolve(e).then(e=>n?n(e):e).catch(e=>(this.delete(t),r?r(e):Promise.reject(e)))}set(e,t,n={}){const r=this.wrapValue(t,Object.assign({key:e},n));if(this.cacheMap.size>=this.maxNumberOfItems){const e=this.cacheMap.keys().next().value;this.delete(e)}this.cacheMap.set(e,r)}get(e){if(this.cacheMap.has(e)){const t=this.cacheMap.get(e);this.cacheMap.delete(e),this.cacheMap.set(e,t)}return this.cacheMap.get(e)}delete(e){this.cacheMap.delete(e)}};const s={};function i(e,t={}){if(e in s)return s[e];const n=new r(t);return s[e]=n,n}},"3fIs":function(e,t,n){"use strict";var r=n("q1tI"),s=n.n(r),i=n("Vc5N"),a=n("h0Qv");t.a=Object(i.d)(({dls19:e})=>({container:{display:"none"},smallAndAbove:{[e.responsive.queries.smallAndAbove]:{display:"block"}},mediumAndAbove:{[e.responsive.queries.mediumAndAbove]:{display:"block"}},mediumPlusAndAbove:{[e.responsive.queries.mediumPlusAndAbove]:{display:"block"}},largeAndAbove:{[e.responsive.queries.largeAndAbove]:{display:"block"}},xlargeAndAbove:{[e.responsive.queries.xlargeAndAbove]:{display:"block"}}}))((function({breakpoint:e,children:t,css:n,styles:r}){return"compact"===Object(a.a)()&&"smallAndAbove"!==e?null:s.a.createElement("div",n(r.container,r[e]),t)}))},"4/rA":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI");function s(e=!1){const[t,n]=Object(r.useState)(e);return{setFalse:Object(r.useCallback)(()=>n(!1),[]),setTrue:Object(r.useCallback)(()=>n(!0),[]),toggle:Object(r.useCallback)(()=>n(e=>!e),[]),value:t}}},"4cd8":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("w8nz");function s(e){const{section_type_uid:t}=e||{};return(null==t?void 0:t.includes("CHINA"))||t===r.v.HOME_GROUPING_RECENTLY_VIEWED||t===r.v.HOME_GROUPING_RECENTLY_VIEWED_CHECKOUTS}},"5M3b":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("I9Za"),s=n.n(r),i=n("Ri7V");function a(){return"zh"===s.a.language()&&i.a.getBootstrap("china_prefetch_homes_pagination")}},"8jnk":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("OLV9"),s=n.n(r);function i(){const e={screen_size:s.a.is("sm")?"small":s.a.is("md")?"medium":"large"};return e.screen_width=window.innerWidth,e.screen_height=window.innerHeight,e}},"9jjl":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return h}));var r=n("cVPA"),s=n.n(r),i=n("30Mm"),a=n("a0RG");const o=["#9b3143","#62564b","#734f21","#572533","#14275e","#a02f18","#585a3a","#714e33","#39576a","#531210","#341e13","#4c5629","#231341","#441a05","#a52903","#4e4126","#03150d","#584c3e"],c={FILLED:"filled",OUTLINED:"outlined"},l={LUXURY:"luxury",PLUS:"plus"};function d(e,t){switch(t){case a.c.LUXURY:return i.a.brand.luxury;case a.c.PLUS:return i.a.core.plusberry;default:return o[e%o.length||0]}}function u({listing:e,verified:t,showBedroomBathroomInfo:n=!1,showCity:r=!1,showRoomAndPropertyType:i=!1}){const{bathrooms:a,bedrooms:o,beds:c,localized_city:l,room_and_property_type:d,space_type:u}=e,p=[],{badge_secondary_text:h,enabled:m}=t||{},_=Boolean(t&&m);if(_&&h&&(p.push(h),p.push("%{dot_start}%{dot_end}")),i&&!_)return p.push(d),p.join("");const f=0===c||c>0,b=n&&!_&&(0===o||o>0),g=n&&!_&&a>0;return f||b||g||_?(u&&!_&&(p.push(u),p.push("%{dot_start}%{dot_end}")),r?(p.push(l),p.join("")):(b&&(0===o?p.push(s.a.t("china_p2_card.info.singleroom")):p.push(s.a.t("china_p2_card.info.rooms",{smart_count:o}))),g&&p.push(s.a.t("china_p2_card.info.bathrooms",{smart_count:a})),f&&(b||g?p.push(s.a.t("china_p2_card.info.beds",{smart_count:c})):p.push(s.a.t("list_your_space.bedrooms_step.beds",{smart_count:c}))),p.join(""))):(p.push(u),p.join(""))}function p(e){const{messages:t}=e,n=[];return t.forEach(e=>{-1!==e.indexOf("0åºŠ")?n.push(e.replace("0åºŠ","")):n.push(e)}),Object.assign({},e,{messages:n})}function h(e){const{beds:t,kicker_content:n,wide_kicker_content:r}=e||{};return t?e:Object.assign({},e,{kicker_content:n?p(n):n,wide_kicker_content:r?p(r):r})}},DI3f:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n("q1tI"),s=n.n(r),i=n("+D8X"),a=n.n(i),o=n("xWc1"),c=n.n(o),l=n("fHbK");function d({children:e,direction:t,inline:n}){const{stylesInterface:i,stylesTheme:o}=Object(r.useContext)(a.a),l=Object(r.useMemo)(()=>({stylesInterface:i,stylesTheme:o,direction:t}),[t,i,o]);return s.a.createElement(c.a,{direction:t,inline:n},s.a.createElement(a.a.Provider,{value:l},e))}n.d(t,"a",(function(){return l.DIRECTIONS}))},NXy6:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("6aHl");function s(){const e=Object(r.b)();return e&&e.location&&e.location.pathname.includes("luxury")}},Qit3:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("q1tI"),s=n.n(r),i=n("fHbK"),a=n.n(i),o=n("Ty+R"),c=n("Vc5N"),l=n("4gyw");let d;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.WIDE=1]="WIDE"}(d||(d={}));const u={alignItemsMiddle:!1,children:null,compensateBoxShadow:!1,padding:d.DEFAULT,disableFlex:!1};function p({css:e,children:t,direction:n,compensateBoxShadow:r,alignItemsMiddle:a,padding:c,styles:l,disableFlex:u}){const p=n===i.DIRECTIONS.RTL?1e4:0;return s.a.createElement("div",e(l.wrapper),s.a.createElement(o.a,{hideHorizontalScrollbar:!0,scrollLeft:p},s.a.createElement("div",e(!u&&l.forceEqualHeight),s.a.Children.map(t,t=>t?s.a.createElement("div",e(l.item,!u&&l.forceEqualHeightChild,c===d.WIDE&&l.item__widePadding,r&&l.item__extraMargin,a&&l.alignItemsMiddle),t):null))))}p.defaultProps=u,t.b=a()(Object(c.d)(({responsive:e,unit:t})=>{const n=t*l.h;return{wrapper:{marginRight:-n,marginLeft:-n,overflowY:"hidden",overflowX:"hidden",[e.largeAndAbove]:{marginLeft:0,marginRight:0}},item:{display:"inline-block",paddingRight:.5*t,paddingLeft:.5*t,":first-child":{paddingLeft:n,[e.largeAndAbove]:{paddingLeft:0}},":last-child":{paddingRight:n,[e.largeAndAbove]:{paddingRight:0}}},item__widePadding:{paddingRight:.75*t,paddingLeft:.75*t},item__extraMargin:{paddingTop:.5*t,paddingBottom:t},forceEqualHeight:{display:"flex"},forceEqualHeightChild:{flex:1},alignItemsMiddle:{verticalAlign:"middle"}}})(p))},RPwf:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("eENn");function s(e){return!(!e||Object(r.a)(e)||e.isP1Sections||!e.explore_tabs)}},VpQe:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("q1tI"),s=n.n(r),i=n("hOkf"),a=n("3fIs"),o=n("r3st");const c=["smallAndAbove","mediumAndAbove","mediumPlusAndAbove","largeAndAbove","xlargeAndAbove"];function l(e){const t=[];let n;return c.forEach(r=>{void 0!==e[r]&&(n?t.push(s.a.createElement(i.a,{showAt:n,hideAt:r,key:n},e[n])):t.push(s.a.createElement(o.a,{breakpoint:r,key:"xsmallAndAbove"},e.xsmallAndAbove)),n=r)}),n&&t.push(s.a.createElement(a.a,{breakpoint:n,key:n},e[n])),s.a.createElement(s.a.Fragment,null,t)}},YyhW:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return _})),n.d(t,"c",(function(){return f}));var r={defaultProps:{schema:"com.airbnb.jitney.event.logging.Explore:ExploreSearchEvent:1.0.0",event_name:"explore_search",page:"explore"},propTypes:{},fullyQualifiedName:"Explore.v1.ExploreSearchEvent"},s=n("g8Fj"),i=n("6J+J");function a(e){return e?Object.keys(e).reduce((t,n)=>Object.assign({},t,{[n]:String(e[n])}),{}):e}function o({operation:e,didTriggerSearch:t=!1,exploreTarget:n,searchContext:i,target:o,searchFilters:c,searchFiltersAdded:l,searchFiltersRemoved:d,sectionId:u,sectionTypeUid:p,productId:h,productType:m}){s.a.logJitneyEvent({schema:r,event_data:{page:"explore",search_context:i,operation:e,explore_target:n,did_trigger_search:t,product_id:h,product_type:m,target:o,search_filter:{common_filters:a(c)},search_filter_added:{common_filters:a(l)},search_filter_removed:{common_filters:a(d)},section_id:u,section_type_uid:p}})}function c(e,t){o({operation:2,exploreTarget:4,target:t,searchContext:e})}function l(e,t){o({operation:2,exploreTarget:3,target:t,searchContext:e})}const d=Object.freeze({[i.a]:l,[i.f]:c,guest_bar:c});function u(){}function p({searchContext:e,filterId:t,updateObj:n}){const r=d[t]||u;Object.keys(n||{}).map(t=>r(e,t))}function h(e){o({operation:2,exploreTarget:9,target:"show_map",searchContext:e})}function m(e,t,n){o({operation:2,exploreTarget:9,target:"redo_search",searchContext:e,didTriggerSearch:!0,searchFilters:t,searchFiltersAdded:Object(i.B)(t,n),searchFiltersRemoved:Object(i.F)(t,n)})}function _(e){o({operation:2,exploreTarget:9,target:"close",searchContext:e})}function f(e){o({operation:10,exploreTarget:18,searchContext:e})}},ZFTB:function(e,t,n){"use strict";var r=n("Vc5N"),s=n("/OlG"),i=n("dQ8x"),a=n("/sth"),o=n("kI+3"),c=n("Zv6G");const l=Object(s.a)(i.b,a.a,o.a,c.a);t.a=Object(r.d)(l)(i.a)},bW8z:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));const r="/v2/explore_tabs",s="P2/Explore",i=["last_search_session_id","federated_search_session_id","s_tag","from_prefetch"],a={maxNumberOfItems:17},o=5e3},hFVO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("I9Za"),s=n.n(r),i=n("PuV7"),a=n("Ri7V");function o(){return!!a.a.getBootstrap("china_p2_default_open_map_force_in")||"zh"===s.a.language()&&(!!a.a.getBootstrap("china_p2_default_open_map")&&i.a.deliverExperiment("china_p2_default_open_map",{treatment:()=>!0,control:()=>!1,treatment_unknown:()=>!1}))}},hOkf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),s=n.n(r),i=n("3fIs"),a=n("r3st");function o({showAt:e,hideAt:t,children:n}){return s.a.createElement(i.a,{breakpoint:e},s.a.createElement(a.a,{breakpoint:t},n))}},ijcl:function(e,t,n){"use strict";class r extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class s{static fn(e){return(...t)=>new s((n,r,s)=>{t.push(s),e(...t).then(n,r)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,n)=>{this._reject=n;const r=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(r,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e(e=>{this._isCanceled&&r.shouldReject||(this._isPending=!1,t(e))},e=>{this._isPending=!1,n(e)},r)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new r(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(s.prototype,Promise.prototype),e.exports=s,e.exports.CancelError=r},jnJK:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),s=n.n(r),i=n("BsrZ");const a=Object(i.c)(()=>{return e=new Promise((function(e){Promise.all([window._phrasesManifest._getPhrases(["fc23"],"cVPA","58dW",n),n.e("fc23")]).then(function(t){e(babelHelpers.interopRequireWildcard(n("p0hY")))}.bind(null,n)).catch(n.oe)})),t="FooterToggle",e.chunkName=t,e;var e,t});function o(e){return s.a.createElement(i.b,Object.assign({loader:a,renderPlaceholder:i.d},e))}},"k0/h":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="api_v2_explore_tabs"},nbJO:function(e,t,n){"use strict";var r=n("fHbK"),s=n.n(r);t.a=s()((function({children:e,direction:t}){return e(t===r.DIRECTIONS.RTL)}))},r3st:function(e,t,n){"use strict";var r=n("q1tI"),s=n.n(r),i=n("Vc5N"),a=n("h0Qv");t.a=Object(i.d)(({dls19:e})=>({smallAndAbove:{[e.responsive.queries.smallAndAbove]:{display:"none"}},mediumAndAbove:{[e.responsive.queries.mediumAndAbove]:{display:"none"}},mediumPlusAndAbove:{[e.responsive.queries.mediumPlusAndAbove]:{display:"none"}},largeAndAbove:{[e.responsive.queries.largeAndAbove]:{display:"none"}},xlargeAndAbove:{[e.responsive.queries.xlargeAndAbove]:{display:"none"}}}))((function({breakpoint:e,children:t,css:n,styles:r}){return"wide"===Object(a.a)()&&["smallAndAbove","mediumAndAbove"].includes(e)?null:s.a.createElement("div",n(r[e]),t)}))},sbcA:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),s=n.n(r),i=n("fArA"),a=n("ZesN"),o=n("t9z+"),c=n("w8nz"),l=n("P0j4"),d=n("ZzhY"),u=n("Lci3"),p=n("9D2L"),h=n("li9v"),m=n("1gdf"),_=n("YCTf"),f=n("hwQJ"),b=n("1oMv"),g=n("hQHc"),I=n("WsJm"),S=n("3AED"),E=n("Vc5N"),O=n("2Ih9"),v=n("px4C"),x=n("qBR9"),A=n("HnpV"),C=n("6J+J"),y=n("rQBq"),T=n("bss5");const j={onCarouselScroll(){},onPress(){},openInNewWindow:!1,responseFilters:{},setItemStats(){}};function P(e){const t=Object(r.useRef)(0),n=(t,n)=>()=>{const{responseFilters:r,onPress:s}=e,i=Object(C.w)(n,r);s({logger:y.j,stagedFilters:i,itemIndex:t})},{css:i,breakpoints:a,destinations:o,onCarouselScroll:c,openInNewWindow:l,responseFilters:d}=e,u=o.map(({canonical_url:e,image:t,kicker_text:r,search_params:i,title:a},o)=>{const c=Object(C.w)(i,d),u=e||Object(A.d)({responseFilters:d,stagedFilters:c,searchType:T.c.SECTION_NAVIGATION});return s.a.createElement(O.a,{href:u,title:a,kickerText:r,imageUrl:t.picture,key:a,onPress:n(o,i),openInNewWindow:l,previewEncodedPNG:(t||{}).preview_encoded_png,searchParams:i})});if(!a[S.b])return s.a.createElement(x.a,{numColumns:2},u);let p=4;return a[S.a]&&(p=5),s.a.createElement("div",i({marginTop:8,marginBottom:12}),s.a.createElement(v.a,{enableFloatingButton:!0,onCarouselScroll:c,numColumns:p,impressionLoggingCallback:n=>{const{setItemStats:r}=e,s=(n||[]).map(e=>e.index),i=Math.max(...s,t.current);t.current!==i&&r&&r({maxItemIndex:i}),t.current=i}},u))}P.defaultProps=j;var w=Object(i.compose)(Object(E.d)(),I.a)(P);var F=n("wUZ3");function N(e){const{section:t}=e;switch(t.result_type){case c.u.ENTRY_CARDS:return Object(l.a)(e);case c.u.EXPERIENCES:return Object(o.a)(e);case c.u.INSERTS:return Object(d.a)(e);case c.u.RECENTLY_VIEWED_LISTINGS:return Object(u.a)(e);case c.u.REFINEMENTS:return t.section_type_uid===c.v.CHINA_CITY_SUGGESTION?function(e){const{onCarouselScroll:t,section:n,openItemInNewWindow:r,onPress:i,setItemStats:a}=e,o=n.refinements.map(e=>({search_params:e.search_params,title:e.title,image:e.image,display_name:e.title,kicker_text:e.subtitle}));return s.a.createElement(w,{destinations:o,onCarouselScroll:t,openInNewWindow:r,onPress:i,setItemStats:a})}(e):Object(p.a)(e);case c.u.STORIES:return Object(h.a)(e);case c.u.CHINA_HOT_DESTINATIONS:return Object(m.a)(e);case c.u.CHINA_HOST_PROMOTION:return Object(_.a)(e);case c.u.CHINA_POPULAR_SUMMER_DESTINATIONS:return Object(f.a)(e);case c.u.CHINA_TRUST_AND_SAFETY_EDUCATION:return Object(b.a)(e);case c.u.EDUCATON_BANNER:return Object(g.a)(e);case c.u.LISTINGS:return Object(F.a)(e);default:return null}}var k=n("X3aX"),R=n.n(k),M=n("I9Za"),L=n.n(M),W=n("3qZH"),D=n("YA1u"),H=n("mak+"),B=n("JG/b"),U=n("KUSo"),G=n("7jyO"),q=n("EdYE"),V=n("DzJC"),Y=n.n(V),z=n("DE9g"),J=n("nBiR"),X=n("YyhW");const Z=Object.assign({},J.f);class $ extends s.a.Component{constructor(e){super(e),this.loggedFirstScroll=void 0,this.loggedFirstScroll=!1,this.handleScroll=Y()(this.handleScroll.bind(this),300)}handleScroll(){!this.loggedFirstScroll&&window.scrollY>10&&(this.loggedFirstScroll=!0,Object(X.c)(this.props.searchContext))}render(){return s.a.createElement(z.a,{target:"window",type:"scroll",onEvent:this.handleScroll,passive:!0})}}$.defaultProps=Z;var Q=Object(J.a)($),K=n("+6xy"),ee=n("PGlZ"),te=n("i6ap"),ne=n("4PRr"),re=n("ANar"),se=n("K/Jt"),ie=n("7CWy"),ae=n("S//p"),oe=n("qM3i"),ce=n("q1Ma");class le extends r.Component{render(){const{brand:e,currentTab:t,fixedWidthContentPanel:n,fullWidth:r,hasNextPage:i,onBlur:a,onCarouselScroll:o,onInsertCTAClick:c,onPress:l,onShowAllPress:d,openItemInNewWindow:u,passElementWhenReadyForFocus:p,postAirbnbInteractive:h,responseFilters:m,sTag:_,section:f,sectionContentProvider:b,setItemStats:g,showMap:I,showSaveCheckBoxes:S,showSideFilterPanel:E,showWishlistButton:O,sideFilterXLMapVisible:v,source:x,trackingParams:A,urlSlug:C,uiActions:y}=this.props,T=b({brand:e,currentTab:t,fixedWidthContentPanel:n,fullWidth:r,hasNextPage:i,onBlur:a,onCarouselScroll:o,onInsertCTAClick:c,onPress:l,onShowAllPress:d,openItemInNewWindow:u,passElementWhenReadyForFocus:p,postAirbnbInteractive:h,responseFilters:m,sTag:_,section:f,setItemStats:g,showMap:I,showSaveCheckBoxes:S,showSideFilterPanel:E,showWishlistButton:O,sideFilterXLMapVisible:v,source:x,trackingParams:A,urlSlug:C,uiActions:y});return T||(Object(re.a)("explore_web_unknown_section_type",1,`current_tab:${t},section_type:${f.result_type}`),s.a.createElement("div",null))}}var de=le,ue=n("sEH+"),pe=n("D7ix"),he=n("Ywic"),me=n("E0mJ"),_e=n("cZrc"),fe=n("50Or"),be=n("sfZj"),ge=n("OfY+"),Ie=n("+ZRA"),Se=n("4cd8");function Ee(e){Object(re.a)("explore_section_not_focused",1,["section_uid:"+e.section_type_uid,"result_type:"+e.result_type,"bankai_id:"+e.bankai_section_id])}function Oe(){}const ve={allowSectionSubtitleOnly:!1,brand:te.b,currentTab:null,customFooter:null,customHeader:null,fixedWidthContentPanel:!1,fullWidth:!1,hasNextPage:!1,hideFooters:!1,onCarouselScroll(){},onPress(){},onShowAllPress(){},openItemInNewWindow:!1,postAirbnbInteractive:!0,responseFilters:{},sectionOffset:void 0,showMap:!1,showSaveCheckBoxes:!1,showWishlistButton:!1,sideFilterXLMapVisible:!1,source:"p2",sTag:"",trackingParams:{searchContext:J.b},urlSlug:null,uiActions:{isGuidebookTranslated:!1,setGuidebookTranslation(){}}},xe=new Set([c.u.LIST_HEADERS,c.u.EXPERIENCE_IMMERSIVE_CATEGORY_HEADER]);class Ae extends s.a.Component{constructor(...e){super(...e),this.state={numCardsShown:null,maxItemIndex:-1},this.triggeredFocus=!1,this.onHeaderSeeAllClick=()=>{const{currentTab:e,responseFilters:t,section:n}=this.props,r=this.getSearchContextWithSectionAttributes();this.handleImportantSeeAllPressed(),Object(be.a)(e,t,n,r)},this.setItemStats=({numCardsShown:e,maxItemIndex:t}={})=>{if(this.state.numCardsShown!==e&&this.setState({numCardsShown:e}),null!=t&&Number.isInteger(t)&&t>this.state.maxItemIndex){for(let e=this.state.maxItemIndex+1;e<=t;e++)this.logImportantSectionImpression(e);this.setState({maxItemIndex:t})}},this.handleInsertCTAPress=(e={})=>{var t;const{itemIndex:n,stagedFilters:r}=e,{responseFilters:s,section:i}=this.props;Object(y.n)({searchContext:this.getSearchContextWithSectionAttributes(),variant:null==i||null===(t=i.display_configuration)||void 0===t?void 0:t.variant,responseFilters:s,stagedFilters:r,itemIndex:n})},this.handleImportantCarouselScroll=e=>{const{currentTab:t,responseFilters:n,section:r,sectionOffset:s,onCarouselScroll:i}=this.props,{title:a,section_name:o}=r,c=this.getSearchContextWithSectionAttributes();Object(y.bb)(c),Object(pe.a)({carouselTitle:a,currentTab:t,responseFilters:n,scrollDirection:e,searchContext:c,sectionName:o,sectionOffset:s,size:Object(_e.a)(r)&&Object(_e.a)(r).length||0}),i(e)},this.handleImportantSeeAllPressed=({tabbedSeeAllInfo:e}={})=>{const{onShowAllPress:t,responseFilters:n,section:{see_all_info:r}}=this.props,s=e||r||{},i=this.getSearchContextWithSectionAttributes(),a=s.search_params||{},o=Object(C.w)(a,n);Object(Ie.c)({searchContext:i,responseFilters:n,stagedFilters:o,exploreOperationTarget:null==s?void 0:s.title}),t()},this.handleImportantItemBlur=(e={})=>{let{productId:t,tripTemplateItemType:n}=e,r=babelHelpers.objectWithoutPropertiesLoose(e,["productId","tripTemplateItemType"]);const{section:{isMock:s,result_type:i}}=this.props,a=this.getSearchContextWithSectionAttributes(),o=Object(me.a)({resultType:i,tripTemplateItemType:n});t&&o&&!s&&Object(y.cb)(t,o,a,r)},this.handleImportantItemPress=(e={})=>{const{onPress:t,responseFilters:n,section:r}=this.props,{itemIndex:s,logger:i,stagedFilters:a={},tripTemplateItemType:o,productId:c,exploreElement:l,exploreOperationTarget:d}=e,u=this.getSearchContextWithSectionAttributes();Object(Ie.b)({itemIndex:s,responseFilters:n,stagedFilters:a,searchContext:u,exploreElement:l,exploreOperationTarget:String(d),section:r,productId:c,tripTemplateItemType:o,logger:i}),t(e)},this.logImportantSectionImpression=e=>{const{currentTab:t,responseFilters:n,section:r}=this.props,{backend_search_id:s,display_type:i,isMock:a}=r,o=this.getSearchContextWithSectionAttributes();if(a)return;if(!Number.isInteger(e)&&(i===c.d.CAROUSEL||i===c.d.TABBED_GRID)&&Object(Se.a)(r))return;const l={backend_search_id:s,hasCTA:Object(G.a)(r,"inserts[0].cta_text")?"1":"0"};Object(Ie.a)({searchContext:o,responseFilters:n,currentTab:t,info:l,maxItemIndex:e})},this.handleFirstElementFocus=e=>{e&&this.props.shouldSetFocus&&!this.triggeredFocus&&setTimeout(()=>{e&&document.body.contains(e)&&(Object(ne.a)(e),this.triggeredFocus=!0)},1)}}componentDidUpdate({section:e,shouldSetFocus:t}){const{section:n}=this.props;e&&n&&e.section_id!==n.section_id&&(t&&!this.triggeredFocus&&Ee(e),this.triggeredFocus=!1)}componentWillUnmount(){this.props.shouldSetFocus&&!this.triggeredFocus&&Ee(this.props.section)}getSearchContextWithSectionAttributes(){const{section:{section_id:e,section_type_uid:t,bankai_section_id:n},trackingParams:{searchContext:r}}=this.props;return Object.assign({},r,{section_id:e,section_type_uid:t,bankai_section_id:n})}shouldShowSeeAll(){var e,t;const{section:n}=this.props,{numCardsShown:r}=this.state;if(!Object(oe.a)(n))return!1;if(n.result_type===c.u.LANDING_PAGE_MARQUEE)return!1;const s=null==n||null===(e=n.see_all_info)||void 0===e?void 0:e.total_count,i=!!Object(oe.b)(n)&&!(null==n||null===(t=n.see_all_info)||void 0===t||!t.cta_url);return null==r||null==s||r<s||i}hasClickableTitle(){var e;const{section:t}=this.props;return!(null==t||null===(e=t.see_all_info)||void 0===e||!e.section_title_clickable)}render(){const{allowSectionSubtitleOnly:e,brand:t,currentTab:n,customFooter:r,customHeader:i,fixedWidthContentPanel:a,fullWidth:o,hasNextPage:l,hideFooters:d,openItemInNewWindow:u,postAirbnbInteractive:p,responseFilters:h,section:m,sectionContentProvider:_,showMap:f,showSaveCheckBoxes:b,showSideFilterPanel:g,showWishlistButton:I,sideFilterXLMapVisible:S,source:E,sTag:O,trackingParams:v,urlSlug:x,uiActions:A}=this.props;if(!Object(_e.c)(m)||m.result_type===c.u.EXPERIMENT_DUMMY)return null;const C=m.result_type===c.u.THEMED_LIST||m.result_type===c.u.GUIDEBOOK_HEADER,y=m.result_type===c.u.REFINEMENTS,T=m.result_type===c.u.LANDING_PAGE_MARQUEE,j=m.result_type===c.u.SPOTLIGHT_EXPERIENCES,P=m.display_type===c.d.IMMERSIVE_CAROUSEL||m.result_type===c.u.IMMERSIVE_EXPERIENCES_GROUPINGS,w=(!!m.title||e)&&!P&&!C&&!T,F=m.section_type_uid===c.v.LUXURY_PROMOTION_HOMES,N=m.result_type===c.u.CHINA_BILLBOARD,k=this.shouldShowSeeAll(),R=k&&this.hasClickableTitle();let M;return M=P||F||C||T||j||N?null:i||(m.title||m.subtitle?s.a.createElement("div",{ref:R?this.handleFirstElementFocus:Oe},s.a.createElement(ce.a,{title:m.title,subtitle:m.subtitle,titleBadgeURL:m.title_badge,halfWidthLargeAndAbove:!g&&!f&&!e,hasSeeAll:R,allowSectionSubtitleOnly:!0,onShowAllPressed:this.onHeaderSeeAllClick})):xe.has(m.result_type)?null:s.a.createElement(U.a,{top:3},s.a.createElement("div",null))),s.a.createElement(ae.a,{verticalSpacing:w,reducedSpacing:y,beyondFullWidth:m.result_type===c.u.INSERTS},M,s.a.createElement(ee.a,{onChange:e=>e&&this.logImportantSectionImpression(),triggerOnce:!0},s.a.createElement(de,{brand:t,currentTab:n,fixedWidthContentPanel:a,passElementWhenReadyForFocus:R?Oe:this.handleFirstElementFocus,fullWidth:o,hasNextPage:l,urlSlug:x,onInsertCTAClick:this.handleInsertCTAPress,onBlur:this.handleImportantItemBlur,onCarouselScroll:this.handleImportantCarouselScroll,onPress:this.handleImportantItemPress,onShowAllPress:this.handleImportantSeeAllPressed,openItemInNewWindow:u,postAirbnbInteractive:p,responseFilters:h,sTag:O,section:m,sectionContentProvider:_,setItemStats:this.setItemStats,showMap:f,showSaveCheckBoxes:b,showSideFilterPanel:g,showWishlistButton:I,sideFilterXLMapVisible:S,source:E,trackingParams:v,uiActions:A})),!d&&(r||!(F||j)&&k&&s.a.createElement(ue.a,{brand:t,currentTab:n,searchContext:this.getSearchContextWithSectionAttributes(),section:m,onShowAllPressed:this.handleImportantSeeAllPressed})))}}Ae.defaultProps=ve;var Ce=Object(ie.a)(Ae,Object(a.a)((function(e){return{showSideFilterPanel:Object(ge.H)(e)||!1}})),Object(fe.a)({shouldReset:({section:e},{section:t})=>!Object(se.a)(e,t),logError({error:e,info:t,props:{section:n,trackingParams:r}}){Object(he.b)(n,{boundaryLocation:he.a.SECTION_CONTAINER,error:e,info:t,searchContext:r.searchContext,tags:["explore_deprecated"]})},getAdditionalFields:e=>e.section?{tags:{react_error_boundary_name:"frontend:explore:ExploreSectionDeprecated"},extra:{exploreSectionTypeUid:e.section.section_type_uid}}:{}})),ye=n("ATpx"),Te=n("joRx"),je=n("hpu4"),Pe=n("8jnk");var we=Object(E.d)(({color:e,unit:t})=>({header:{color:e.dark.rausch,paddingTop:t,paddingBottom:t,fontSize:2*t,fontFamily:"Menlo, Monaco, monospace"}}))(({error_backtrace:e,error_message:t,styles:n})=>s.a.createElement("div",null,s.a.createElement("div",Object(E.c)(n.header),t),s.a.createElement("pre",null,e.join("\n")))),Fe=n("jnJK"),Ne=n("QD4+"),ke=n("GlcG");const Re={apiResponse:null,tab:Ne.g.ALL,fullWidth:!1,fetchP1Success(){},updateCalendarMetadata(){},hideFooterToggleBeforeScroll:null,hideFooterToggle:!1,isPage0:!1},Me={fetchP1Success:q.e,updateCalendarMetadata:q.h};function Le(e){let t,n,r=[],s=!1,i=0;if(e.explore_tabs&&e.explore_tabs[0]){const a=e.explore_tabs[0];r=a.sections,a.pagination_metadata&&(s=a.pagination_metadata.has_next_page,i=a.pagination_metadata.section_offset),a.empty_state_metadata&&(t=a.empty_state_metadata.description,n=a.empty_state_metadata.cta)}return{sections:r,hasNextPage:s,sectionOffset:i,errorDescription:t,errorCTA:n,partialExploreTabMetadata:e.metadata||{}}}class We extends s.a.Component{constructor(e,t){super(e,t),this.prefetchedSectionCount=void 0,this.sectionOffset=void 0,this.sectionOffset=0,this.prefetchedSectionCount=0,this.fetchSections=this.fetchSections.bind(this),this.state={searchId:"",federatedSearchId:"",fetchError:null,sections:[],hasNextPage:!0,isLoading:!0,devErrorDebugInfo:null,currentRefinementPaths:[]}}UNSAFE_componentWillMount(){const{apiResponse:e}=this.props;if(e){const t=Le(e);this.prefetchedSectionCount=t.sections.length,this.setState(this.updateSectionsAndGetNewState(t))}}componentDidMount(){const{apiResponse:e}=this.props,{hasNextPage:t}=this.state;e&&Object(y.mb)({triggeredSearchId:Object(G.a)(e,"metadata.federated_search_id")}),t&&this.fetchSections().then(e=>{Object(y.mb)({triggeredSearchId:Object(G.a)(e,"response.metadata.federated_search_id"),error:e.error})})}fetchData(){const{tab:e,isPage0:t}=this.props,{federatedSearchSessionId:n}=this.state,r=Object.assign({tab_id:e,section_offset:this.sectionOffset,federated_search_session_id:n},Object(Pe.a)());return"zh"===L.a.locale()&&(r.section_limit=4),t&&(r.source="p0_landing",r.is_from_p0=!0),K.a.getP1(r,{need_cache:r.section_offset===this.prefetchedSectionCount})}fetchSections(){const{isLoading:e,fetchError:t}=this.state;return this.sectionOffset>0&&!e&&this.setState({isLoading:!0}),t&&this.setState({fetchError:null}),this.fetchData().then(e=>(this.setState(this.updateSectionsAndGetNewState(Le(e)),A.m),Promise.resolve({response:e})),e=>(this.setState({devErrorDebugInfo:null,fetchError:e,isLoading:!1}),Promise.resolve({error:e})))}updateSectionsAndGetNewState(e){const{sections:t,hasNextPage:n,sectionOffset:r,errorDescription:s,errorCTA:i,partialExploreTabMetadata:a}=e;this.sectionOffset?a.calendar_metadata&&this.props.updateCalendarMetadata(a.calendar_metadata):this.props.fetchP1Success({response:{metadata:a,isP1Sections:!0}}),r&&(this.sectionOffset=r);let o=this.state.sections.concat(t);return"zh"===L.a.language()&&"CN"===L.a.country()&&"undefined"!==window.location&&"/"===window.location.pathname&&(o=o.filter((e,t)=>t===o.findIndex(t=>e.bankai_section_id===t.bankai_section_id&&e.result_type===t.result_type&&e.title===t.title&&e.section_type_uid===t.section_type_uid))),{federatedSearchId:a.federated_search_id,federatedSearchSessionId:a.federated_search_session_id,sections:o,searchId:a.search_id,hasNextPage:n,isLoading:n,errorDescription:s,errorCTA:i,currentRefinementPaths:null==a?void 0:a.current_refinement_paths}}render(){const{federatedSearchId:e,federatedSearchSessionId:t,fetchError:n,sections:r,searchId:i,hasNextPage:a,isLoading:o,devErrorDebugInfo:c,errorDescription:l,errorCTA:d,currentRefinementPaths:u}=this.state,{sectionContentProvider:p,fullWidth:h,tab:m,hideFooterToggleBeforeScroll:_,hideFooterToggle:f}=this.props;return s.a.createElement("div",null,s.a.createElement(Q,null),!f&&s.a.createElement(Fe.a,{hideFooterToggleBeforeScroll:_}),s.a.createElement(je.a,{savingFrom:Te.a.P1_FOR_YOU}),!r.length&&l&&s.a.createElement(U.a,{vertical:2},s.a.createElement(H.c,{level:2,noHeading:!0},l),s.a.createElement(W.a,{small:!0},d)),s.a.createElement("div",{itemProp:"itemList",itemScope:!0,itemType:"http://schema.org/ItemList"},r.map((n,o)=>s.a.createElement("div",{key:`${n.result_type}_${o}`},s.a.createElement(Ce,{fullWidth:h,section:n,sectionContentProvider:p,currentTab:m,source:"p1",trackingParams:{pdpReferrer:1,searchContext:Object.assign({search_id:i||"",mobile_search_session_id:"",federated_search_id:e||"",federated_search_session_id:t||"",section_id:n.section_id,section_type_uid:n.section_type_uid},Object(ke.a)({refinement_paths:u}))},responseFilters:{refinement_paths:u}}),a&&r.length>this.prefetchedSectionCount&&(r.length<2||o===r.length-2)&&s.a.createElement(ye.a,{onEnter:this.fetchSections,uniqueId:`page${this.sectionOffset}-${e}`})))),n&&s.a.createElement(U.a,{top:2},s.a.createElement(D.a,{danger:!0,withIcon:!0,title:Object(G.a)(n,"responseJSON.error_message")||s.a.createElement(R.a,{k:"generic_error"})})),o&&s.a.createElement("div",{style:{position:"relative",height:100}},s.a.createElement(B.a,{large:!0})),s.a.createElement(U.a,{top:15},s.a.createElement("div",null)),c&&s.a.createElement(we,c))}}We.defaultProps=Re;var De=Object(a.a)(null,Me)(We);t.default=Object(a.a)(void 0,e=>Object(i.bindActionCreators)({clearFiltersAndResponse:q.a},e))((function(e){let{clearFiltersAndResponse:t}=e,n=babelHelpers.objectWithoutPropertiesLoose(e,["clearFiltersAndResponse"]);return t(),s.a.createElement(De,Object.assign({},n,{sectionContentProvider:N}))}))},uuk6:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("I9Za"),s=n.n(r),i=n("cVPA"),a=n.n(i),o=n("g8Fj"),c=n("PuV7"),l=n("ANar");function d(e,t,n,r={}){Object(l.a)("mario.deliver_param.js.attempt",1,"mario_group:"+t);try{return function(e,t,n,r={}){(!e||Object.keys(e).includes("schema_verion")&&Object.keys(e).includes("parameters")&&Object.keys(e).includes("strategies"))&&Object(l.a)("mario.deliver_param.js.missing_bootstrap",1,"mario_group:"+t);const i=e.strategies[n],o=s.a.language();let d,u,p;if(d=Object.keys(i).includes(o)?i[o]:i.default,"erf"===d.delivery_type){const e=d.setup,t=Object.keys(d).reduce((e,t)=>{const n={};return"setup"!==t&&"delivery_type"!==t&&(n[t]=()=>t),Object.assign({},e,n)},{});u=d[c.a.deliverExperiment(e,t)],p=!1}else u=d.static,p=!0;const h=e.parameters[n];if("translation"===h.type){const e=h.values[u];if("multi_language"===e.type){let e;return p?(e=`${t}.${n}`,a.a.t(e,r)):(e=`${t}.${n}.${u}`,a.a.t(e,r))}if("single_language"===e.type){let t=e.literal;return Object.entries(r).forEach(([e,n])=>{t=t.replace(`%{${e}}`,n)}),t}}else{if("string"===h.type)return h.values[u];if("scalar"===h.type)return h.values[u];Object(l.a)("mario.deliver_param.js.unknown_param_type",1,"mario_group:"+t)}return""}(e,t,n,r)}catch(e){return o.a.logEvent({event_name:"mario.deliver_param.js.error",event_data:{group:t,param:n,error:e},datadog_key:"mario.deliver_param.js.error",datadog_count:1,datadog_tags:["mario_group:"+t]}),""}}},"x/kb":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("cVPA"),s=n.n(r);function i(e,t){const n=`legacy_mario.${e}.${t}`;if(s.a.has(n))return n;const r=`${e}.${t}`;return s.a.has(r)?r:null}},xoSD:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n("LNDz");function s({id:e}){return{type:r.a,payload:{id:e}}}const i=e=>s({id:e}),a=()=>s({id:null})}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/PageSlot-ExploreController-1268fb6e.js.map