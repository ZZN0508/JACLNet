(self.webpackChunkmagnolia_resources=self.webpackChunkmagnolia_resources||[]).push([[6345],{91606:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i}),n(74916),n(23123),n(15306),n(92222);var o=n(74376),a=n(55464);function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ENV_DEV="dev",this.ENV_STAGING="staging",this.ENV_PRODUCTION="production",this.env=e||o.Z.getEnvironment(),this.localizedPrefix=this.getLocalizedPrefix()}var e,n;return e=t,(n=[{key:"getLocalizedPrefix",value:function(){var t=window.location.hostname.split(".")[0];return"www"!==t&&"wac"!==t&&"qa-wac"!==t&&"localhost"!==t&&t}},{key:"wrapForI18n",value:function(t){return this.localizedPrefix?t.replace("//www.","//".concat(this.localizedPrefix,".")):t}},{key:"wacBasePath",value:function(){var t={production:this.wrapForI18n("https://www.atlassian.com"),staging:"".concat(window.location.hostname.indexOf("qa-wac")>-1?"https://qa-wac.internal.atlassian.com":a.Z.stgWacInternalUrl),dev:"http://localhost:8090/wac"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"idBasePath",value:function(){var t={production:"https://id.atlassian.com",staging:"https://id.stg.internal.atlassian.com",dev:"http://auth.bizbox.atlassian.com:8888"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"idLoginUrl",value:function(t,e){var n=this.getReturnUrl(t,e);return"".concat(this.idBasePath(),"/login?continue=").concat(n)}},{key:"idLogoutUrl",value:function(t){var e=this.getReturnUrl(t);return"".concat(this.idBasePath(),"/logout?continue=").concat(e)}},{key:"idLogoutLoginUrl",value:function(t){return this.idLogoutUrl(this.idLoginUrl(t,!0))}},{key:"macBasePath",value:function(){var t={production:"https://my.atlassian.com",staging:"https://my.stg.internal.atlassian.com",dev:"http://my.bizbox.atlassian.com:8888"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"macConfigUrl",value:function(){return"".concat(this.macBasePath(),"/ondemand/config")}},{key:"atlProxyBasePath",value:function(){var t={production:"/gateway/api",staging:"https://wac.stg.atlassian.com/gateway/api",dev:"https://wac.stg.atlassian.com/gateway/api"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"wacCofsBasePath",value:function(){var t={production:"/apis/prod/cofs",staging:"/apis/stg/cofs",dev:"/apis/stg/cofs"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"wacHamletBasePath",value:function(){var t={production:"/hamlet/1.0",staging:"/apis/stg/hamlet/1.0",dev:"/apis/stg/hamlet/1.0"};return t.hasOwnProperty(this.env)?t[this.env]:t.production}},{key:"getReturnUrl",value:function(t,e){return t=t||window.location.href,e||(t=encodeURIComponent(t)),t}}])&&r(e.prototype,n),t}()},74376:(t,e,n)=>{"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,{Z:()=>i}),n(74916),n(23123);var a="staging",r="production",i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getEnvironment",value:function(){var t=r;switch(window.location.hostname.split(".")[0]){case"wac":case"qa-wac":case"author":t=a;break;case"localhost":t="dev";break;default:t=r}return t}},{key:"production",value:function(){return r}},{key:"staging",value:function(){return a}},{key:"dev",value:function(){return"dev"}}],null&&o(e.prototype,null),n&&o(e,n),t}()},94662:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y}),n(19601),n(92222),n(30489),n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),n(38264);var o=n(67294),a=n(99095),r=n(26322),i=n(10944),c=n(23784),s=n(91606),l=n(97458),u=n(45232);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(k,t);var e,n,p,g,y=(p=k,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(p);if(g){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return v(this,t)});function k(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,k),m(b(e=y.call(this,t)),"onManageProfileClick",(function(){var t={label:e.props.labels["JoinSiteUserDropdown.profile"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.manage.profile",Object.assign(e.props.defaultTrackProperties,f(f({},t),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=e.basePaths.idBasePath()+"/manage-profile"})),m(b(e),"onManageLicensesClick",(function(){var t={label:e.props.labels["JoinSiteUserDropdown.licenses"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.manage.licenses",Object.assign(e.props.defaultTrackProperties,f(f({},t),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=u.Z.getMacUrl()})),m(b(e),"onLogOutClick",(function(){var t={label:e.props.labels["JoinSiteUserDropdown.logOut"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.logout",Object.assign(e.props.defaultTrackProperties,f(f({},t),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=u.Z.getLogoutUrl()})),m(b(e),"onLogInClick",(function(){var t=u.Z.getIdentityBaseUrl(),n=e.origin.addToUrl(t+"/start"),o={label:e.props.labels["JoinSiteUserDropdown.logIn"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.login",Object.assign(e.props.defaultTrackProperties,f(f({},o),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href="".concat(t,"/login?continue=").concat(encodeURIComponent(n))})),m(b(e),"onJoinYourTeamClick",(function(){var t=u.Z.getIdentityBaseUrl(),n=e.origin.addToUrl(t+"/start"),o={label:e.props.labels["JoinSiteUserDropdown.joinTeam"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.join.team",Object.assign(e.props.defaultTrackProperties,f(f({},o),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href="".concat(t,"/login?continue=").concat(encodeURIComponent(n))})),m(b(e),"onCreateAcountClick",(function(){var t="".concat(u.Z.getIdentityBaseUrl(),"/signup?"),n=u.Z.getStartUrl(),o={label:e.props.labels["JoinSiteUserDropdown.createAccount"]};imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.click.create.account",Object.assign(e.props.defaultTrackProperties,f(f({},o),e.origin.toAnalyticsAttributes({hasGeneratedId:!0})))),window.location.href=t+"&continue=".concat(encodeURIComponent(n))})),e.state={isLoading:!0,labels:t.labels,isLoggedIn:!1},e.basePaths=new s.Z,e.performanceBoost=!0,e.origin=new i.Z({product:"wac-globaldropdown"}),e}return e=k,(n=[{key:"componentDidMount",value:function(){var t=this;this.getUser().then((function(e){t.setState(f(f({},e),{},{isLoading:!1})),e.isLoggedIn&&imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.user.loggedin")})).catch((function(t){imkt.utils.tracking.trackEvent("bxp.globalnavdropdown.user.getusererror")}))}},{key:"render",value:function(){var t=this.state,e=t.displayName,n=t.avatar,i=t.email,c=t.isLoggedIn,s=t.isLoading,u=t.labels;return s?o.createElement("div",{className:"global-nav--wac__container--dropdown"},o.createElement(r.Z,null)):c?o.createElement("div",{className:"global-nav--wac__container--dropdown wac-dropdown-loggedin"},o.createElement(a.Pj,{locale:document.documentElement.lang,messages:u},o.createElement(l.wy,{userName:e,userEmail:i,avatarSrc:n,isLoggedIn:c,onManageLicenses:this.onManageLicensesClick,onManageProfile:this.onManageProfileClick,onLogOutClick:this.onLogOutClick,onLogInClick:this.onLogInClick,onJoinYourTeam:this.onJoinYourTeamClick}))):o.createElement("div",{className:"global-nav--wac__container--dropdown"},o.createElement(a.Pj,{locale:document.documentElement.lang,messages:u},o.createElement(l.wy,{userName:e,userEmail:i,avatarSrc:n,isLoggedIn:c,onManageLicenses:this.onManageLicensesClick,onManageProfile:this.onManageProfileClick,onLogOutClick:this.onLogOutClick,onLogInClick:this.onLogInClick,onJoinYourTeam:this.onJoinYourTeamClick})))}},{key:"getUser",value:function(){return c.VR.getStargateProfile(this.performanceBoost).then((function(){var t=c.VR.getUserEmail()||"";return{displayName:c.VR.getDisplayName(),avatar:c.VR.getAvatar(),email:t,isLoggedIn:c.VR.isLoggedIn()}}))}}])&&d(e.prototype,n),k}(o.Component)}}]);