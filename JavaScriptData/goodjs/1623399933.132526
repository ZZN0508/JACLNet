//v2.1.59
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).getVPAIDAd=e()}(function(){return function n(r,a,o){function s(t,e){if(!a[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);throw(i=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",i}i=a[t]={exports:{}},r[t][0].call(i.exports,function(e){return s(r[t][1][e]||e)},i,i.exports,n,r,a,o)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,i){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=null,r=30,a=50,o=242500,l="hidden",c="visible",d=1,h=5,f="",p="",m="",v="length",g="textBaseline",y="fillStyle",b="fillText",w="performance",A="getEntriesByType",T="resource",E="function",S="https://beap-bc.yahoo.com/ym?",_="getAttribute",k="100",I="1.0.246",n="inViewPercentage",C="unload",V="beforeunload",P=20,x=20,O=5,M=5,D=10,R=.9,U=255;function N(e,t,i){i=i||"";try{i=e&&t in e?e[t]:i}catch(e){}return i}function j(e){return parseFloat(e,10)}function L(e){return e===+e&&e===(0|e)}var H,B,F,W,z,G,q,X,Y,J,Q,$,K=navigator.sendBeacon?function(e,t){navigator.sendBeacon(e,t)}:function(e,t){(new Image).src=e+(t=t||"")},Z=window,ee=document,te=N(Z,"screen",s),ie=N(Z,"navigator",s),ne=N(Z,"location",s),re=N(ie,"language",""),ae=N(ie,"platform",""),oe=N(ie,"userAgent",""),se=oe.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i),ue=RegExp.$1.toLowerCase(),le=parseFloat(oe.match(/version\/([\d]+)/i)&&RegExp.$1||se&&se[2]||""),ce=(oe.match(/((ip)(hone|ad|od)|playbook|hp-tablet)/i)&&RegExp.$1.toLowerCase(),oe.match(/(android|blackberry|bb10|macintosh|webos|windows)/i)&&RegExp.$1.toLowerCase(),!1),de=!1,he=!1,fe=!1,pe=!1,me=(new Date).getTime();function ve(e){var t=1;try{""===(t=(Z.getComputedStyle&&Z.getComputedStyle(e,s)||e.currentStyle).opacity)&&(t=1)}catch(e){}return t}function ge(e,t){return ve(e)<=t}function ye(e){var t={width:0,height:0,valid:!0};try{var i=Z.getComputedStyle&&Z.getComputedStyle(e,s)||e.currentStyle;t.width=j(i.width)||0,t.height=j(i.height)||0}catch(e){t.width=0,t.height=0,t.valid=!1}return t}function be(e,t,i){e=ye(e);return e.width<=t||e.height<=i}function we(e,t,i,n,r){if(r=r||function(){return!0},!be(e,i,n))return e;for(var a=0;a<t.length;a++)for(var o=e.getElementsByTagName(t[a]),s=0;s<o.length;s++)if(!be(o[s],i,n)&&r(o[s]))return o[s]}function Ae(e,t){z=0<arguments.length&&L(e)&&L(t)?(G=e,t):(t=function(){var t,i;if(he)try{t=ee.documentElement&&Math.max(ee.documentElement.clientWidth,ee.documentElement.scrollWidth)||Z.frameElement&&Z.frameElement.width||s,i=ee.documentElement&&Math.max(ee.documentElement.clientHeight,ee.documentElement.scrollHeight)||Z.frameElement&&Z.frameElement.height||s}catch(e){t=Z.innerWidth||ee.body&&ee.body.clientWidth||s,i=Z.innerHeight||ee.body&&ee.body.clientHeight||s}else{var e=ye(J);t=e.width||s,i=e.height||s}return[t,i]}(),G=t[0],t[1]),X=(q=o<=G*z)?r:a}function Te(e,t,i,n,r,a){if(!(i<P||n<x)){for(var o=function(e,t,i,n){for(var r=[],a=Math.floor(t/n),o=Math.floor(i/n),s=Math.max(0,e.left),u=e.top,l=1;l<n;l++)for(var c=s+a*l,d=1;d<n;d++)r[r.length]=[c,u+o*d];return r}(t,i,n,D),s=0,u=0,l=o.length;u<l;u++){var c=o[u][0],d=o[u][1],d=a&&a.elementFromPoint&&a.elementFromPoint(c,d);d&&d!==e&&!function(e,t){for(var i=t&&t.parentNode;null!==i;){if(i===e)return 1;i=i.parentNode}}(e,d)&&!function(e,t){if("IFRAME"===e.nodeName&&"IFRAME"===t.nodeName)for(var i=e.contentWindow;i!==Z.top;)if((i=i.parent).frameElement===t)return 1}(e,d)&&ve(d)>R&&!function e(t){var i=Z.top.getComputedStyle?Z.top.getComputedStyle(t,null):t.currentStyle;if("none"===i.display||"hidden"===i.visibility)return 1;if("img"!==t.tagName.toLowerCase()&&"video"!==t.tagName.toLowerCase()&&("transparent"===i.backgroundColor||0===parseFloat(i.backgroundColor.split(",")[3]))){for(var n=0;n<t.childNodes.length;n++)if(!e(t.childNodes[n]))return;return 1}}(d)&&s++}return 100-s/o.length*100<r}}function Ee(e,t){var i;return t=void 0===t?{top:0,left:0}:t,e!==e.top&&(i=e.frameElement.getBoundingClientRect(),t.left+=i.left,t.top+=i.top,t=Ee(e.parent,t)),t}function Se(){try{var e=function(){var e,t;try{if(he){if(!fe)return s;e=Z.top.document,t=Z.top}else e=ee,t=Z;return{height:t.innerHeight||e.documentElement.clientHeight||e.body&&e.body.clientHeight,width:t.innerWidth||e.documentElement.clientWidth||e.body&&e.body.clientWidth}}catch(e){return s}}();if(he&&e)for(var t=["div","video","iframe"],i=0;i<t.length;i++)for(var n=ee.body.getElementsByTagName(t[i]),r=0;r<n.length;r++)if(function e(t){if("img"===t.tagName.toLowerCase()||"video"===t.tagName.toLowerCase())return 1;for(var i=0;i<t.childNodes.length;i++)if(e(t.childNodes[i]))return 1}(n[r])&&!be(n[r],P,x)){var a=n[r].getBoundingClientRect(),o=Ee(Z,{top:a.top,left:a.left});if(o&&(o.left>=e.width||o.left+a.width<=0||o.top>=e.height||o.top+a.height<=0))return 1}}catch(e){}return 0}function _e(){return(ke(P,x)<<1)+(ke(O,M)<<2)+((function(e,t,i,n){if(n=n||function(){return!0},!ge(e,t))return e;for(var r=0;r<i.length;r++)for(var a=e.getElementsByTagName(i[r]),o=0;o<a.length;o++)if(!ge(a[o],t)&&n(a[o]))return a[o]}(J,0,["div","iframe"])?0:1)<<3)}function ke(e,t){var i;try{i=we(J,["div","video","iframe","ins"],e,t)}catch(e){}return i?0:1}function Ie(e,t){if(Y=e,function(){try{fe=!!Z.top.document}catch(e){}}(),H=fe&&de?Z.parent:Z,pe=Z.$sf&&Z.$sf.ext&&"function"==typeof Z.$sf.ext[n]||!1,function(){try{ce=/((iPhone|iPod|iPad).*AppleWebKit(?!.*(Safari|CriOS)))/i.test(oe)||"chrome"===ue&&(/wv\).* Chrome.* Mobile/i.test(oe)||/Version\/\d*\.\d* (?:Chrome.* Mobile)?/i.test(oe))||/(MSAppHost\/.*|WebView)/.test(oe)}catch(e){}}(),B=-1!==oe.indexOf("Chrome/")?1:-1!==oe.indexOf("Firefox/")?2:-1!==oe.indexOf("; MSIE")?3:-1!==oe.indexOf("Safari/")?4:-1!==oe.indexOf("WebKit")?5:-1!==oe.indexOf("Gecko")?6:7,void 0!==ee.hidden?(F="hidden",W="visibilitychange"):void 0!==ee.mozHidden?(F="mozHidden",W="mozvisibilitychange"):void 0!==ee.webkitHidden?(F="webkitHidden",W="webkitvisibilitychange"):void 0!==ee.msHidden&&(F="msHidden",W="msvisibilitychange"),t)J=t;else if(he)if(fe)try{J=Z.frameElement}catch(e){J=s}else{t=we(J=ee.body||s,["div","video"],P,x);t&&(J=t)}else J=Y&&(Y.parentElement||Y.parentNode)||s;var i;return 0!==(Q=_e())&&(i=setInterval(function(){0===(Q=_e())&&clearInterval(i)},1e3),setTimeout(function(){i&&clearInterval(i)},1e4)),Y!==s&&void 0!==Y&&J!==s&&void 0!==J}function Ce(e){var t,i="";if(e&&"string"==typeof e)try{(t=e.match(/^https?:\/\/([-\w\.]*)(:\d+)?([\/\?#]|$)/))&&t[1]&&(i=t[1])}catch(e){i=""}return i}function Ve(e,t){return Math.floor((t-e)/1e3)}function Pe(e,t,i){(i=i||Z).addEventListener?i.addEventListener(e,t):i.attachEvent&&i.attachEvent("on"+e,t)}function xe(e,t,i){(i=i||Z).removeEventListener?i.removeEventListener(e,t):i.detachEvent&&i.detachEvent("on"+e,t)}function Oe(e,t){for(var i,n,r,a=d<e?e-d:0,o=d<t?t-d:0,s=[],u={},l=.5;l<h;l+=1)for(n=Math.round(l*a/h),i=.5;i<h;i+=1)u[r=n+"_"+Math.round(i*o/h)]||(s.push(r),u[r]=1);return s}function Me(r){var e=(new Date).getTime();r.scr=1,r.sct||(r.sct=Ve(me,e)),r.scrollStartTime&&0!==r.scrollStartTime||(r.scrollStartTime=e,r.scrollStartY=H.scrollY),$||clearTimeout($),$=setTimeout(function(){var e,t,i,n;e=r,t=(new Date).getTime(),i=Ve(e.scrollStartTime,t),n=H.scrollY-e.scrollStartY,t=(t=H.document.body.clientHeight)||H.document.body.height,(t=Math.round(H.scrollY/t*100))>e.scd&&(e.scd=t),0<n?(e.scrolledDownPixels+=n,e.scrolledDownTime+=i):(e.scrolledUpPixels-=n,e.scrolledUpTime+=i),e.scrollStartTime=0},250)}function De(i){Pe("mouseover",function(){var e,t;e=i,t=(new Date).getTime(),e.hov=1,e.tth||(e.tth=Ve(me,t)),e.hoverStartTime=t}),Pe("mouseout",function(){var e,t;e=i,t=(new Date).getTime(),500<Ve(e.hoverStartTime,t)&&(e.intt=1,e.intl=t,e.tti=Ve(me,t))})}function Re(e){var t=(new Date).getTime();ee[F]&&0<e.dwellStartTime?e.adt+=Ve(e.dwellStartTime,t):(e.foc=1,e.dwellStartTime=t)}!function(){try{var e=Z.parent,t=Z.top;de=!(!t||!e||t!=e||t==Z),he=!(!e||e==Z)}catch(e){}}();var Ue={w:0,h:0,mw:-1,mh:-1,bl:-1,bt:-1,ew:-1,eh:-1,ex:-1,ey:-1,vw:-1,vh:-1,sx:-1,sy:-1,ivp:-1,ivd:-1,pt:-1,mi:-1,b:-1,gm0:0,gm1:0,m:-1,tivt:0,hov:2,tth:0,intt:2,intl:0,tti:0,st:0,foc:2,adt:0,scr:2,scd:0,svd:0,svu:0,sct:0,mivp:0,mivt:0,ls:0,winl:"",winr:"",lvl:0,al:3,ae:0,bct:2,ph:-1,dwellStartTime:0,scrolledUpPixels:0,scrolledUpTime:0,scrolledDownPixels:0,scrolledDownTime:0,avoc:0,avoc_debug:0,firstInViewTime:Number.MAX_SAFE_INTEGER};function Ne(){var e,t,a;he&&De(Ue),e=Ue,ee[F]||Re(e),Pe(W,function(){Re(e)},ee),(!he||fe&&de)&&(t=Ue,Pe("scroll",function(){Me(t)},H)),a=Z.onerror,Z.onerror=function(e,t,i,n,r){return Ue.ae+=1,!!a&&a(e,t,i,n,r)}}function je(e){var t="tp="+(q?"2":"1");return t+=":mt="+e.measurementBucket}var Le,He;Le=(new Date).getTime()-Be(1e5),He=Be(100);function Be(e){return Math.floor(Math.random()*(10*e))}function Fe(e,t,i,n){for(var r=!1,a=0;a<t.length;a++)-1<e.indexOf(t[a])&&(e=e.replace(new RegExp(t[a],"g"),n),r=!0);return r||(e+="&"+i+"="+n),e}var We="0123456789abcdef".split(""),ze=String.prototype.substring,Ge=10,qe=11,Xe=12,Ye=13,Je=14,Qe=15,$e=16,Ke=17,Ze=20,et=21,tt=22,it=23,nt=24,rt=32,at=64,ot=function(e,t){return e+t&4294967295},st=128,ut=Qe;function lt(e,t){return e.charCodeAt(t)}function ct(e,t){var i=ht(i=e[0],a=e[1],r=e[2],n=e[3],t[0],7,-680876936),n=ht(n,i,a,r,t[1],Xe,-389564586),r=ht(r,n,i,a,t[2],Ke,606105819),a=ht(a,r,n,i,t[3],tt,-1044525330);i=ht(i,a,r,n,t[4],7,-176418897),n=ht(n,i,a,r,t[5],Xe,1200080426),r=ht(r,n,i,a,t[6],Ke,-1473231341),a=ht(a,r,n,i,t[7],tt,-45705983),i=ht(i,a,r,n,t[8],7,1770035416),n=ht(n,i,a,r,t[9],Xe,-1958414417),r=ht(r,n,i,a,t[Ge],Ke,-42063),a=ht(a,r,n,i,t[qe],tt,-1990404162),i=ht(i,a,r,n,t[Xe],7,1804603682),n=ht(n,i,a,r,t[Ye],Xe,-40341101),r=ht(r,n,i,a,t[Je],Ke,-1502002290),i=ft(i,a=ht(a,r,n,i,t[Qe],tt,1236535329),r,n,t[1],5,-165796510),n=ft(n,i,a,r,t[6],9,-1069501632),r=ft(r,n,i,a,t[qe],Je,643717713),a=ft(a,r,n,i,t[0],Ze,-373897302),i=ft(i,a,r,n,t[5],5,-701558691),n=ft(n,i,a,r,t[Ge],9,38016083),r=ft(r,n,i,a,t[Qe],Je,-660478335),a=ft(a,r,n,i,t[4],Ze,-405537848),i=ft(i,a,r,n,t[9],5,568446438),n=ft(n,i,a,r,t[Je],9,-1019803690),r=ft(r,n,i,a,t[3],Je,-187363961),a=ft(a,r,n,i,t[8],Ze,1163531501),i=ft(i,a,r,n,t[Ye],5,-1444681467),n=ft(n,i,a,r,t[2],9,-51403784),r=ft(r,n,i,a,t[7],Je,1735328473),i=pt(i,a=ft(a,r,n,i,t[Xe],Ze,-1926607734),r,n,t[5],4,-378558),n=pt(n,i,a,r,t[8],qe,-2022574463),r=pt(r,n,i,a,t[qe],$e,1839030562),a=pt(a,r,n,i,t[Je],it,-35309556),i=pt(i,a,r,n,t[1],4,-1530992060),n=pt(n,i,a,r,t[4],qe,1272893353),r=pt(r,n,i,a,t[7],$e,-155497632),a=pt(a,r,n,i,t[Ge],it,-1094730640),i=pt(i,a,r,n,t[Ye],4,681279174),n=pt(n,i,a,r,t[0],qe,-358537222),r=pt(r,n,i,a,t[3],$e,-722521979),a=pt(a,r,n,i,t[6],it,76029189),i=pt(i,a,r,n,t[9],4,-640364487),n=pt(n,i,a,r,t[Xe],qe,-421815835),r=pt(r,n,i,a,t[Qe],$e,530742520),i=mt(i,a=pt(a,r,n,i,t[2],it,-995338651),r,n,t[0],6,-198630844),n=mt(n,i,a,r,t[7],Ge,1126891415),r=mt(r,n,i,a,t[Je],Qe,-1416354905),a=mt(a,r,n,i,t[5],et,-57434055),i=mt(i,a,r,n,t[Xe],6,1700485571),n=mt(n,i,a,r,t[3],Ge,-1894986606),r=mt(r,n,i,a,t[Ge],Qe,-1051523),a=mt(a,r,n,i,t[1],et,-2054922799),i=mt(i,a,r,n,t[8],6,1873313359),n=mt(n,i,a,r,t[Qe],Ge,-30611744),r=mt(r,n,i,a,t[6],Qe,-1560198380),a=mt(a,r,n,i,t[Ye],et,1309151649),i=mt(i,a,r,n,t[4],6,-145523070),n=mt(n,i,a,r,t[qe],Ge,-1120210379),r=mt(r,n,i,a,t[2],Qe,718787259),a=mt(a,r,n,i,t[9],et,-343485551),e[0]=ot(i,e[0]),e[1]=ot(a,e[1]),e[2]=ot(r,e[2]),e[3]=ot(n,e[3])}function dt(e,t,i,n,r,a){return t=ot(ot(t,e),ot(n,a)),ot(t<<r|t>>>rt-r,i)}function ht(e,t,i,n,r,a,o){return dt(t&i|~t&n,e,t,r,a,o)}function ft(e,t,i,n,r,a,o){return dt(t&n|i&~n,e,t,r,a,o)}function pt(e,t,i,n,r,a,o){return dt(t^i^n,e,t,r,a,o)}function mt(e,t,i,n,r,a,o){return dt(i^(t|~n),e,t,r,a,o)}function vt(e){for(var t,i,n,r,a,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=at;l<=o;l+=at)ct(s,function(e){var t,i=[];for(t=0;t<at;t+=4)i[t>>2]=lt(e,t)+(lt(e,t+1)<<8)+(lt(e,t+2)<<$e)+(lt(e,t+3)<<nt);return i}((t=e,i=l-at,n=l,ze.call(t,i,n)))),l+=at;for(r=e,a=l-at,l=0,o=(e=ze.call(r,a)).length;l<o;l++)u[l>>2]|=lt(e,l)<<(l%4<<3);if(u[l>>2]|=st<<(l%4<<3),55<l)for(ct(s,u),l=0;l<$e;l++)u[l]=0;return u[Je]=8*o,ct(s,u),s}function gt(e){for(var t,i=0,n=e.length;i<n;i++)e[i]=(t=e[i],[We[t>>4&ut],We[t>>0&ut],We[t>>Xe&ut],We[t>>8&ut],We[t>>Ze&ut],We[t>>$e&ut],We[t>>nt+4&ut],We[t>>nt&ut]].join(""));return e.join("")}function yt(){return"5d41402abc4b2a76b9719d911017c592"===bt("hello")}function bt(e){return gt(vt(e))}var wt=(yt()?1:(ot=function(e,t){var i=(65535&e)+(65535&t);return(e>>$e)+(t>>$e)+(i>>$e)<<$e|65535&i},yt()?1:0))?bt:function(e){return""},At=ee.createElement("canvas"),Tt=[{type:"api",name:"ancestorOrigins",base:ne,mockCheck:function(e,t){return It(Z,"DOMStringList")||!(e[t]instanceof Z.DOMStringList)}},{type:"api",name:"WritableStream",base:Z},{type:"api",name:"SharedWorker",base:Z},{type:"api",name:"AudioContext",base:Z},{type:"api",name:"AmbientLightSensor",base:Z},{type:"api",name:"PointerEvent",base:Z},{type:"api",name:"ondeviceproximity",base:Z,mockCheck:function(){return!1}},{type:"api",name:"openDatabase",base:Z},{type:"api",name:"getGamepads",base:ie},{type:"api",name:"share",base:ie},{type:"api",name:"registerProtocolHandler",base:ie},{type:"api",name:"type",base:ie&&ie.connection,mockCheck:function(){return It(Z,"NetworkInformation")}},{type:"api",fieldName:"query",base:ie&&ie.permissions},{type:"api",name:"toBlob",base:At}],Et=[{type:"css-selector",selector:"div:-webkit-full-screen"},{type:"css-selector",selector:"div:dir(ltr)"},{type:"css-selector",selector:"div::backdrop"}],St=[{type:"css-rule",rule:"caret-color: transparent"},{type:"css-rule",rule:"-ms-wrap-flow: both"},{type:"css-rule",rule:"background: filter(url(img.jpg), blur(5px))"},{type:"css-rule",rule:"display: flow-root"},{type:"css-rule",rule:"font-smoothing: antialiased"},{type:"css-rule",rule:"-webkit-font-smoothing: antialiased"},{type:"css-rule",rule:"-moz-osx-font-smoothing: grayscale"}];function _t(e){return new RegExp("function "+e+"\\s*\\(\\)\\s*\\{\\s*\\[native code\\]\\s*\\}")}var kt=_t("toString");function It(e,t){return!_t(t).test(e[t].toString())||!kt.test(e[t].toString.toString())}function Ct(e){var t;switch(e.type){case"api":t=function(e,t,i){try{return e&&t in e?i(e,t)?2:1:0}catch(e){}return 3}(e.base,e.name,e.mockCheck||It);break;case"css-selector":t=function(e){try{return ee.querySelector(e),1}catch(e){}return 0}(e.selector);break;case"css-rule":t=function(e){try{return Z.CSS.supports("( "+e+" )")?1:0}catch(e){}return 3}(e.rule);break;default:t=3}return t}function Vt(e,t){for(var i=0,n=0;n<e.length;n++){var r=Ct(e[n]);if(t<=r)return-1;i=r+t*i}return i}var Pt=[{nodeName:"button"},{nodeName:"a",additionalSetup:function(e){e.setAttribute("href","https://yahoo.com")}},{nodeName:"input"}],xt=[{getData:function(){return!(ie.plugins instanceof PluginArray)||0===ie.plugins.length}},{getData:function(){return""===ie.languages}},{value:0,bits:3,init:function(i){var n=ee.createElement("div");n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.border=0,n.style.padding=0,n.style.margin=0,n.style.overflow="hidden",J.appendChild(n);for(var r=0;r<Pt.length;r++)!function(){var e=r,t=ee.createElement(Pt[r].nodeName);t.onclick=function(){i.value|=1<<e},Pt[r].additionalSetup&&Pt[r].additionalSetup(t),n.appendChild(t)}()}}];var Ot=encodeURIComponent,Mt=0;function Dt(e,t){return t-e}function Rt(e,t){for(var i,n=[],r=ee.getElementsByTagName(e),a=0;a<r.length;a++)(i=r[a][_](t))&&n.push(i);return n}function Ut(e,t){var i,n,r,a=e.length,o=t.length;if(a===o){for(i=0;i<a;i++){for(r=!1,n=0;n<o;n++)-1!==e[i].indexOf(t[n])&&(r=!0);if(!r)return}return 1}}function Nt(e,t,i,n,r){var a="",o=(new Date).getTime(),s=function(){var t={count:-1,hash:f},i={},e=[];if(Z.performance&&Z.URL)try{t.count=0,(e=(e=e.concat(Z.performance.getEntriesByType("resource"))).concat(Z.performance.getEntriesByType("frame"))).forEach(function(e){e=new Z.URL(e.name);i[e.host]||(i[e.host]=1,t.count++)}),t.hash=wt(Object.keys(i).sort().join(":"))}catch(e){}return t}();return a+="gm0="+i.inView100For0Sec,a+="&gm1="+i.inView100For1Sec,a+="&tivt="+i.lastTotalInViewTime,a+="&hov="+e.hov,a+="&tth="+e.tth,a+="&intt="+e.intt,a+="&intl="+e.intl,a+="&tti="+e.tti,a+="&st="+(o-me),a+="&foc="+e.foc,ee&&!ee[F]&&(e.adt+=Dt(e.dwellStartTime,o)),a+="&adt="+e.adt,a+="&scr="+e.scr,a+="&ph="+e.ph,a+="&scd="+e.scd,a+="&svd="+(0<e.scrolledDownTime?Math.round(e.scrolledDownPixels/e.scrolledDownTime):0),a+="&svu="+(0<e.scrolledUpTime?Math.round(e.scrolledUpPixels/e.scrolledUpTime):0),a+="&sct="+e.sct,a+="&mivp="+i.maxInViewPercentage,a+="&mivt="+i.maxInViewTime,a+="&ls="+i.measurementBucket,a+="&winl="+Ot(Ce(ne)),a+="&winr="+Ot(Ce(ee&&ee.referrer)),a+="&lvl="+function(){var e,t=0,i=Z.top;try{if(i==Z)t=0;else for(e=Z.parent,t++;i!=e;)e=e.parent,t++}catch(e){t=-1}return t}(),a+="&atf=0",a+="&al="+function(){var e,t,i,n,r,a=3,o=[],s=[],u=[];if(Z&&Z.performance&&Z.performance.getEntriesByType&&"function"==typeof Z.performance.getEntriesByType){for(e=Rt("img","src"),t=Rt("script","src"),i=Rt("object","data"),n=Z.performance.getEntriesByType("resource"),r=0;r<n.length;r++)"img"===n[r].initiatorType?o.push(n[r].name):"script"===n[r].initiatorType?s.push(n[r].name):"object"===n[r].initiatorType&&u.push(n[r].name);Ut(e,o)||(a=2),Ut(t,s)||(a=2),2!==(a=!Ut(i,u)?2:a)&&(a=1)}return a}(),a+="&ae="+e.ae,a+="&aw="+function(){var e,t,i,n=0,r=0,a=0,o=[],s=/(r\-(.*)\.html)|(sf(.*?)\.js)/gi;try{(e=Z[w])&&u(e[A])===E&&(o=e[A](T))}catch(e){o=[]}for(;t=o[r++];){try{i=t.name,a=t.transferSize}catch(e){i=f,a=0}a&&0<a&&i&&-1===i.search(s)&&(n+=a)}return n}(),a+="&ao="+function(t){var e,i,n="";try{if(i=ne&&ne.ancestorOrigins){if(e=i.length)for(var n=Ce(i[e-1]),r=0,a=Ce(i[0]);r<e-1&&n.length+(0===r?m:p).length+a.length<=U;a=Ce(i[++r]))n+=(0===r?m:p)+a;t.sao=e||0}else t.sao=-1}catch(e){n="",t.sao=-1}return n}(e),a+="&sao="+e.sao,a+="&lang="+Ot(re),a+="&sw="+(te?te.width:0),a+="&sh="+(te?te.height:0),a+="&tzo="+(new Date).getTimezoneOffset(),a+="&plgn="+Ot(s.hash),a+="&ci="+Ot(function(){var e,t,i;try{var n=ee.createElement("canvas");return n.style.border="1px solid black",n.width=16,n.height=22,(i=n.getContext("2d")).font="15px 'Arial'",i[g]="alphabetic",i[y]="#ffa",i.fillRect(1,1,15,20),i[y]="#00a",i[b]("yj",2,15),i[y]="rgba(100, 100, 100, 0.7)",i[b]("yj",4,17),t=(e=n.toDataURL("image/png")).split(","),wt(2===t[v]?t[1]:e)}catch(e){}return wt(f)}()),a+="&b="+k,a+="&ad=jv="+I+(r?":"+r:"")+":"+(o="querySelector"in ee&&!It(ee,"querySelector"),e="CSS"in Z&&"supports"in Z.CSS&&!It(Z.CSS,"supports"),r="apif="+Vt(Tt,4),o=o?Vt(Et,2):-1,r+=-1!==o?":cslm=0:cslf="+o:":cslm=1:cslf=0",e=e?Vt(St,2):-1,r+=-1!==e?":csrm=0:csrf="+e:":csrm=1:csrf=0")+":aih="+(i.adIsVideo?i.aihv+(i.adStackedInView<<4)+(i.adStuffedInView<<5):Q+(i.adStackedInView<<4)+(i.adStuffedInView<<5))+":dc="+s.count+":ab="+function(){for(var e=0,t=0,i=0;i<xt.length;i++){var n,r=1;if(xt[i].getData)try{n=xt[i].getData(xt[i])}catch(e){}else n=xt[i].value;e+=n<<t,t+=r=xt[i].bits?xt[i].bits:r}return e}()+":pf="+ae+":bt="+(function(){var e;try{e=ie.battery||ie.mozBattery||ie.webkitBattery}catch(e){}return e}()?1:0)+":ac="+(function(){var e;try{e=Z.OfflineAudioContext||Z.webkitOfflineAudioContext}catch(e){}return e}()?1:0)+":wg="+(function(){var e,t;try{e=ee.createElement("canvas")}catch(e){}try{t=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){}return t}()?1:0)+":dlm="+((s=ie.connection||ie.webkitConnection)&&s.type&&s.downlinkMax?s.downlinkMax:1/0)+":zi="+(function(e,t){var i;try{i=we(J,["div","video","iframe","img","a"],e,t,function(e){e=Z.getComputedStyle&&Z.getComputedStyle(e)||e.currentStyle;return e&&e.zIndex&&""!==e.zIndex})}catch(e){}return i}(P,x)?1:0)+":lt="+Mt+":aiff="+(he&&fe?1:0)+":aisf="+(pe?1:0)+":fwd="+G+":fht="+z+":aihi="+Q+":ads="+i.adStackedInView+":stu="+i.adStuffedInView+":aihv="+i.aihv+":"+je(i),n&&(a+="&"+n),a}Pe("load",function(){Mt=(new Date).getTime()-me});function jt(e){this.adWidth=e.adWidth,this.adHeight=e.adHeight,this.inViewCallback=e.inViewCallback,this.outOfViewCallback=e.outOfViewCallback,this.thresholdPercentage=e.thresholdPercentage||X,this.inViewPercentage=0,this.inViewPercentages=[],this.maxInViewPercentage=0,this.inView=!1,this.isMeasurable=!0,this.isCurrentlyInView=!1,this.currentTimestamp=0,this.lastTimestamp=0,this.nextTimestamp=0,this.totalInViewTime=0,this.lastTotalInViewTime=0,this.maxInViewTime=0,this.totalInView100Time=0,this.inView100StartTime=0,this.lastInView100Timestamp=0,this.inView100For0Sec=0,this.inView100For1Sec=0,this.stopCallbacks=!1,this.adLoaded=e.adLoaded,this.playerId=e.playerId,this.adUnit=e.adUnit,this.adSizeChanged=e.adSizeChanged,this.adVideoComplete=e.adVideoComplete,this.adIsVideo=!1,this.adVideoIsPlayingInView=!1,this.flashNotSupported=0,this.trackedElement=J}jt.prototype.beaconTimeout=1e3,jt.prototype.measurementBucket="2",jt.prototype.aihv=0,jt.prototype.adStackedInView=0,jt.prototype.hasCheckedAdStacked=!1,jt.prototype.adStuffedInView=0,jt.prototype.hasCheckedAdStuffed=!1,jt.prototype.init=function(){var e=this;try{Pe(W,function(){e.currentEntry&&e.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e.currentEntry.intersectionRatio})},ee)}catch(e){}this.registerInViewListener()},jt.prototype.canApplyMethod=function(){return!1},jt.prototype.registerInViewListener=function(){},jt.prototype.inViewListenerCallback=function(e){this.currentEntry=e,this.currentTimestamp=e.time,this.updateInViewPercentages(e),this.isInView()&&!ee[F]?(this.updateTimestamps(),this.isCurrentlyInView,this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback(),this.isInView100()?this.updateTimestamps100():this.resetTimestamps100(),this.aihv=_e(),this.hasCheckedAdStacked&&1!==this.adStackedInView||(this.adStackedInView=function(){var e;try{if(he){if(!fe)return 0;e=Z.top.document}else e=ee;var t=J.getBoundingClientRect(),i=t.width*t.height>=o?r:a,n=he?Ee(Z):{top:t.top,left:t.left};return Te(J,n,t.width,t.height,i,e)?1:0}catch(e){return 0}}(),this.hasCheckedAdStacked=!0),this.hasCheckedAdStuffed&&1!==this.adStuffedInView||(this.adStuffedInView=Se(),this.hasCheckedAdStuffed=!0),this.adIsVideo&&(this.aihv=this.aihv&&this.adVideoIsPlayingInView,this.adStackedInView=this.adStackedInView&&this.adVideoIsPlayingInView,this.adStuffedInView=this.adStuffedInView&&this.adVideoIsPlayingInView)):(this.isCurrentlyInView,this.resetTimestamps(),this.resetTimestamps100(),this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks||this.outOfViewCallback())},jt.prototype.metViewableStandard=function(){this.inView=this.isCurrentlyInView,this.stopCallbacks=!0,this.currentTimestamp=(new Date).getTime(),this.isCurrentlyInView?this.updateTimestamps():this.resetTimestamps(),this.lastTotalInViewTime=this.totalInViewTime},jt.prototype.updateInViewPercentages=function(e){this.inViewPercentage=e.intersectionRatio,this.maxInViewPercentage<this.inViewPercentage&&(this.maxInViewPercentage=this.inViewPercentage),this.inViewPercentages.push(this.inViewPercentage)},jt.prototype.updateTimestamps=function(){return 0<this.lastTimestamp&&(this.totalInViewTime+=this.currentTimestamp-this.lastTimestamp,this.maxInViewTime<this.totalInViewTime&&(this.maxInViewTime=this.totalInViewTime),this.lastTotalInViewTime=this.totalInViewTime),this.lastTimestamp=this.currentTimestamp,this.lastTimestamp},jt.prototype.isInView=function(){return this.inViewPercentage>=this.thresholdPercentage},jt.prototype.isSufficientlyInView=function(){return this.totalInViewTime>=this.beaconTimeout},jt.prototype.resetTimestamps=function(){this.updateTimestamps(),this.lastTimestamp=this.nextTimestamp=this.totalInViewTime=0,this.inViewPercentages=[]},jt.prototype.updateTimestamps100=function(){this.inView100For0Sec=1,0<this.lastInView100Timestamp?this.totalInView100Time+=this.currentTimestamp-this.lastInView100Timestamp:this.inView100StartTime=this.currentTimestamp,this.lastInView100Timestamp=this.currentTimestamp,this.totalInView100Time>this.beaconTimeout&&(this.inView100For1Sec=1)},jt.prototype.isInView100=function(){return 99<this.inViewPercentage},jt.prototype.resetTimestamps100=function(){this.lastInView100Timestamp=this.totalInView100Time=this.inView100StartTime=0},jt.prototype.cleanup=function(){},jt.prototype.reset=function(){},jt.extend=function(){function t(e){t.parent.call(this,e)}((t.prototype=void 0!==Object.create?Object.create(this.prototype):new this({})).constructor=t).parent=this,t.extend=this.extend;for(var e=0;e<arguments.length;e++){var i,n=arguments[e];for(i in n=void 0!==n.prototype?n.prototype:n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i])}return t},jt.prototype.getAverageInViewPercentage=function(){for(var e=this.inViewPercentages.length,t=0,i=0;i<e;i++)t+=this.inViewPercentages[i];return e?Math.round(t/e):0},jt.prototype.updateTrackingElement=function(e){this.markAsNotMeasurable()},jt.prototype.markAsNotMeasurable=function(){this.isMeasurable=!1,this.cleanup(),this.stopCallbacks||(this.stopCallbacks=!0,this.outOfViewCallback(!0))};var Lt,Ht=jt.extend({fineTimeout:100,coarseTimeout:750,registerInViewListener:function(){var e=this;this.timeout=this.notInViewTimerWrapper(function(){e.fireInViewListenerCallback()})},fireInViewListenerCallback:function(){var e={intersectionRatio:this.getInViewPercentage(),time:(new Date).getTime()},t=this;this.inViewListenerCallback(e),this.timeout=this[this.isCurrentlyInView?"inViewTimerWrapper":"notInViewTimerWrapper"](function(){t.fireInViewListenerCallback()})},getInViewPercentage:function(){return 0},notInViewTimerWrapper:function(e){return setTimeout(e,this.coarseTimeout)},inViewTimerWrapper:function(e){return setTimeout(e,this.fineTimeout)},cleanup:function(){clearTimeout(this.timeout)},measurementBucket:"0"});function Bt(e){var t={x:0,y:0};return e.x>=e.scrlX&&e.x+e.halfWidth<e.scrlX+e.viewportWidth?t.x=e.scrlX+e.viewportWidth-e.x:e.x+e.halfWidth>e.scrlX&&e.x+e.adWidth<=e.scrlX+e.viewportWidth?t.x=e.x+e.adWidth-e.scrlX:e.x<e.scrlX&&e.x+e.adWidth>e.scrlX+e.viewportWidth&&e.viewportWidth>=e.halfWidth&&(t.x=e.viewportWidth),e.y>=e.scrlY&&e.y+e.halfHeight<e.scrlY+e.viewportHeight?t.y=e.scrlY+e.viewportHeight-e.y:e.y+e.halfHeight>e.scrlY&&e.y+e.adHeight<=e.scrlY+e.viewportHeight?t.y=e.y+e.adHeight-e.scrlY:e.y<e.scrlY&&e.y+e.adHeight>e.scrlY+e.viewportHeight&&e.viewportHeight>=e.halfHeight&&(t.y=e.viewportHeight),t}function Ft(e){return e.scrlX=0,e.scrlY=0,Bt(e)}var Wt=Ht.extend({init:function(){1===B||4===B||5===B||7===B?Lt=Bt:2!==B&&3!==B&&6!==B||(Lt=Ft),this.registerInViewListener()},getBoundingClientRect:function(){return this.trackedElement.getBoundingClientRect()},getInViewPercentage:function(){try{return e={bcr:this.getBoundingClientRect(),adWidth:G,adHeight:z},t=e.bcr,i=e.adWidth,n=e.adHeight,r=i&&n?i*n:0,a=Z.parent,o=a.document,s=o.body,(e={}).x=Math.round(t.left+s.scrollLeft),e.y=Math.round(t.top+s.scrollTop),e.adWidth=i,e.adHeight=n,e.halfWidth=Math.floor(i/2),e.halfHeight=Math.floor(n/2),e.viewportWidth=Math.max(o.documentElement.clientWidth,Z.innerWidth||0),e.viewportHeight=Math.max(o.documentElement.clientHeight,Z.innerHeight||0),e.scrlX=a.scrollX,e.scrlY=a.scrollY,(e=Lt(e)).x>i&&(e.x=i),e.y>n&&(e.y=n),r?Math.round(100*e.x*e.y/r):0}catch(e){}var e,t,i,n,r,a,o,s;return 0},updateTrackingElement:function(e){this.trackedElement=e}}),zt=Wt.extend({canApplyMethod:function(){return!ce&&!he},measurementBucket:"6"}),Gt=Wt.extend({canApplyMethod:function(){return!ce&&fe&&de},getBoundingClientRect:function(){if(this.trackedElement.ownerDocument!==ee)return this.trackedElement.getBoundingClientRect();var e,t=this.trackedElement.getBoundingClientRect(),t={left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height};try{Z.frameElement!==this.trackedElement&&(e=Z.frameElement.getBoundingClientRect(),t.left+=e.left,t.right+=e.left,t.top+=e.top,t.bottom+=e.top)}catch(e){}return t},measurementBucket:"2"}),qt=Ht.extend({coarseTimeout:100,canApplyMethod:function(){return!ce&&pe},getInViewPercentage:function(){return Z.$sf.ext[n]()},getGeometrics:function(){return Z.$sf.ext.geom()},measurementBucket:"1"});function Xt(e){var t,i,n,r,a;for(e.tags=Oe(G,z),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((n=(i=e).tags[t],a=r=void 0,2===(a=n.split("_")).length&&((r=ee.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.lastMozPaintCounts[n]=0,i.paintCounts[n]=0,i.paintTimestamps[n]=0,i.lastPaintCounts[n]=0,i.lastPaintTimestamps[n]=0),r));for(t=0;t<e.numTag;t++)ee.body.appendChild(e.tagArray[t])}function Yt(t,i){var e,n=Z.requestAnimationFrame||Z.mozRequestAnimationFrame||s;e=i,(e=ee.getElementById(e))&&(e.style.visibility=e.style.visibility===l?c:l),n&&n(function(e){!function(e,t,i){var n,r;if((e.paintTimestamps[i]=t)>e.lastPaintTimestamps[i]&&(r=ee.getElementById(i))){try{(n=r.contentWindow).document||(n=s)}catch(e){n=s}n&&n.mozPaintCount>e.lastMozPaintCounts[i]&&(e.paintCounts[i]+=1,e.lastMozPaintCounts[i]=n.mozPaintCount)}}(t,e,i)})}function Jt(e){for(var t=0;t<e.numTag;t++)Yt(e,e.tags[t])}var Qt=Ht.extend({canApplyMethod:function(){return!ce&&"mozPaintCount"in Z},init:function(){this.lastMozPaintCounts={},this.paintCounts={},this.paintTimestamps={},this.lastPaintCounts={},this.lastPaintTimestamps={},Xt(this),Jt(this),this.registerInViewListener()},getInViewPercentage:function(){var e=function(e){for(var t,i=0,n=0;n<e.numTag;n++)t=e.tags[n],e.paintTimestamps[t]>e.lastPaintTimestamps[t]&&(e.paintCounts[t]>e.lastPaintCounts[t]&&(i+=1),e.lastPaintCounts[t]=e.paintCounts[t],e.lastPaintTimestamps[t]=e.paintTimestamps[t]);return i}(this);return Jt(this),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){Jt(t),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){Jt(t),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)ee.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),Xt(this)},measurementBucket:"3"}),se=jt.extend({canApplyMethod:function(){return!ce&&(fe&&!!Z.top.IntersectionObserver||!fe&&!!Z.IntersectionObserver)&&!pe},registerInViewListener:function(){for(var n=this,e=[],t=this.thresholdPercentage/100;t<1;t+=.05)e.push(t);e.push(1);var i=Z.IntersectionObserver;fe&&(i=Z.top.IntersectionObserver),this.io=new i(function(e){for(var t,i=0;i<e.length;i++)if(e[i].target===n.trackedElement){t=e[i];break}t&&n.inViewListenerCallback({intersectionRatio:100*e[0].intersectionRatio,time:(new Date).getTime()})},{threshold:e}),this.io.observe(this.trackedElement)},cleanup:function(){this.io&&this.io.disconnect()},updateTrackingElement:function(e){this.io.unobserve(this.trackedElement),this.io.observe(e),this.trackedElement=e},measurementBucket:"7"}),At=jt.extend({canApplyMethod:function(){return ce&&void 0!==Z.mraid},registerInViewListener:function(){var t=this;t.mraidVersion=Z.mraid.getVersion&&Z.mraid.getVersion(),"3.0"===t.mraidVersion?(this.viewableChangeEventListener=function(e){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:e})},Z.mraid.addEventListener("exposureChange",this.viewableChangeEventListener)):(this.viewableChangeEventListener=function(){t.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:Z.mraid.isViewable()?100:0})},Z.mraid.addEventListener("viewableChange",this.viewableChangeEventListener))},cleanup:function(){"3.0"===this.mraidVersion?Z.mraid.removeEventListener("exposureChange",this.viewableChangeEventListener):Z.mraid.removeEventListener("viewableChange",this.viewableChangeEventListener)},measurementBucket:"8"}),Wt=jt.extend({canApplyMethod:function(){return!ce&&!pe&&void 0!==Z.context&&void 0!==Z.context.observeIntersection},registerInViewListener:function(){var t=this;t.cleanup=Z.context.observeIntersection(function(e){e.sort(function(e,t){return e.time>t.time}).forEach(function(e){t.inViewListenerCallback({time:e.time,intersectionRatio:100*e.intersectionRatio})})})},measurementBucket:"9"});function $t(e){var t,i,n,r,a;for(e.tags=Oe(G,z),e.numTag=e.tags.length,e.tagArray=[],t=0;t<e.numTag;t++)e.tagArray.push((n=(i=e).tags[t],a=r=void 0,2===(a=n.split("_")).length&&((r=ee.createElement("iframe")).style.cssText="width:"+d+"px;height:"+d+"px;left:"+a[0]+"px;top:"+a[1]+"px;position:absolute;background-color:transparent;",r.scrolling="no",r.allowtransparency="true",r.hidefocus="true",r.setAttribute("frameBorder","0"),r.id=n,i.painted[n]=0),r));for(t=0;t<e.numTag;t++)ee.body.appendChild(e.tagArray[t])}var Ht=Ht.extend({canApplyMethod:function(){return!ce&&"requestAnimationFrame"in Z&&"cancelAnimationFrame"in Z&&"safari"===ue&&10<=Number(le)},setupHandlerPerTag:function(t){var i=this.tagArray[t].contentWindow,n=this;i&&(i.prevTimestamp=(new Date).getTime(),i.animationFrameRequest&&(i.cancelAnimationFrame(i.animationFrameRequest),this.painted[t]=0),i.animationFrameRequest=i.requestAnimationFrame(function(){var e=(new Date).getTime();e-i.prevTimestamp<n.fineTimeout/2?n.painted[t]=1:n.painted[t]=0,i.prevTimestamp=e}))},setupHandlers:function(){for(var e=0;e<this.numTag;e++)this.setupHandlerPerTag(e)},init:function(){this.painted={},$t(this),this.setupHandlers(),this.registerInViewListener()},getInViewPercentage:function(){for(var e=0,t=0;t<this.numTag;t++)e+=this.painted[t],this.painted[t]=0;return this.setupHandlers(),this.numTag?100*e/this.numTag:0},notInViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(e){var t=this;return setTimeout(function(){t.setupHandlers(),t.timeout=setTimeout(e,.5*t.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var e=0;e<this.numTag;e++)ee.body.removeChild(this.tagArray[e])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),$t(this)},measurementBucket:"10"}),Kt=jt.extend({canApplyMethod:function(){return!0},init:function(){this.isMeasurable=!1;var e=this;setTimeout(function(){e.outOfViewCallback(!0)})},measurementBucket:"5"}),Zt=jt.extend({init:function(){this.adClicked=!1,this.adErrored=!1,this.minVolume=999,this.timeAtMinVolume=0,this.maxTimeAtMinVolume=0,this.currentlyAtMinVolume=!1,this.maxVolume=0,this.timeAtMaxVolume=0,this.maxTimeAtMaxVolume=0,this.currentlyAtMaxVolume=!1,this.playerWidth=0,this.playerHeight=0,this.playerSizeIsValid=!1,this.adHasLoaded=!1,this.adHasStarted=!1,this.adImpressionFired=!1,this.adVideoCompleteFired=!1,this.adUserCloseFired=!1,this.adSkippedFired=!1,this.adStoppedFired=!1,this.adIsPlaying=!1,this.adUnit&&this.subscribeToEvents()},subscribeToEvents:function(){this.adUnit.subscribe(this.adLoadedWrapper,"AdLoaded",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdStarted",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdVideoStart",this,this.playerId),this.adUnit.subscribe(this.adImpressionHandler,"AdImpression",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdPlaying",this,this.playerId),this.adUnit.subscribe(this.adStoppedPlaying,"AdPaused",this,this.playerId),this.adUnit.subscribe(this.adStoppedHandler,"AdStopped",this,this.playerId),this.adUnit.subscribe(this.adVideoCompleteHandler,"AdVideoComplete",this,this.playerId),this.adUnit.subscribe(this.adUserCloseHandler,"AdUserClose",this,this.playerId),this.adUnit.subscribe(this.adSkippedHandler,"AdSkipped",this,this.playerId),this.adUnit.subscribe(this.playerError,"AdError",this,this.playerId),this.adUnit.subscribe(this.adClickedHandler,"AdClickThru",this,this.playerId),this.adUnit.subscribe(this.adSizeChangeHandler,"AdSizeChange",this,this.playerId),this.adUnit.subscribe(this.adExpandedChangeHandler,"AdExpandedChange",this,this.playerId),this.adUnit.subscribe(this.adVolumeChangeHandler,"AdVolumeChange",this,this.playerId)},unsubscribeToEvents:function(){this.adUnit.unsubscribe(this.adLoadedWrapper,"AdLoaded",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdStarted",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdVideoStart",this.playerId),this.adUnit.unsubscribe(this.adImpressionHandler,"AdImpression",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdPlaying",this.playerId),this.adUnit.unsubscribe(this.adStoppedPlaying,"AdPaused",this.playerId),this.adUnit.unsubscribe(this.adStoppedHandler,"AdStopped",this.playerId),this.adUnit.unsubscribe(this.adVideoCompleteHandler,"AdVideoComplete",this.playerId),this.adUnit.unsubscribe(this.adUserCloseHandler,"AdUserClose",this.playerId),this.adUnit.unsubscribe(this.adSkippedHandler,"AdSkipped",this.playerId),this.adUnit.unsubscribe(this.playerError,"AdError",this.playerId),this.adUnit.unsubscribe(this.adClickedHandler,"AdClickThru",this.playerId),this.adUnit.unsubscribe(this.adSizeChangeHandler,"AdSizeChange",this.playerId),this.adUnit.unsubscribe(this.adExpandedChangeHandler,"AdExpandedChange",this.playerId),this.adUnit.unsubscribe(this.adVolumeChangeHandler,"AdVolumeChange",this.playerId)},updateTimestamps:function(){var e;this.currentTimestamp=(new Date).getTime(),0<this.lastTimestamp&&(e=this.currentTimestamp-this.lastTimestamp,this.adUnit&&this.adUnit.getAdVolume&&(this.currentlyAtMinVolume&&(this.timeAtMinVolume+=e,this.timeAtMinVolume>this.maxTimeAtMinVolume&&(this.maxTimeAtMinVolume=this.timeAtMinVolume)),this.currentlyAtMaxVolume&&(this.timeAtMaxVolume+=e,this.timeAtMaxVolume>this.maxTimeAtMaxVolume&&(this.maxTimeAtMaxVolume=this.timeAtMaxVolume)))),this.constructor.parent.prototype.updateTimestamps.call(this)},resetVolumeTimestamps:function(){this.timeAtMinVolume=this.timeAtMaxVolume=0},resetTimestamps:function(){this.resetVolumeTimestamps(),this.constructor.parent.prototype.resetTimestamps.call(this)},updateAdVolume:function(){var e;this.adUnit&&this.adUnit.getAdVolume&&((e=this.adUnit.getAdVolume())<this.minVolume?(this.minVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMinVolume=!0):e!==this.minVolume&&(this.currentlyAtMinVolume=!1),e>this.maxVolume?(this.maxVolume=e,this.resetVolumeTimestamps(),this.currentlyAtMaxVolume=!0):e!==this.maxVolume&&(this.currentlyAtMaxVolume=!1))},adLoadedWrapper:function(){this.adHasLoaded=!0,this.updatePlayerSize(),this.adLoaded()},adStartedPlaying:function(){this.adHasStarted=!0,this.adIsPlaying=!0,this.updateAdVolume(),this.updateTimestamps(),this.adSizeChangeHandler(),this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback()},adImpressionHandler:function(){this.adImpressionFired=!0},adStoppedPlaying:function(e){this.currentTimestamp=(new Date).getTime(),this.resetTimestamps(),this.isCurrentlyInView=!1,this.adIsPlaying=!1,this.stopCallbacks&&!e||this.outOfViewCallback(e)},endAd:function(){this.adStoppedPlaying(!0),this.unsubscribeToEvents()},adStoppedHandler:function(){this.adStoppedFired=!0,this.endAd()},adVideoCompleteHandler:function(){this.updateAdVolume(),this.adVideoCompleteFired=!0,this.adVideoComplete(),this.endAd()},adUserCloseHandler:function(){this.adUserCloseFired=!0,this.endAd()},adSkippedHandler:function(){this.adSkippedFired=!0,this.endAd()},playerError:function(){this.updateTimestamps(),this.isMeasurable=this.adImpressionFired,this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks=!0,this.adErrored=!0,this.outOfViewCallback(!0),this.unsubscribeToEvents()},adClickedHandler:function(){this.updateTimestamps(),this.adClicked=!0,this.stopCallbacks||this.inViewCallback(!0),this.stopCallbacks=!0,this.unsubscribeToEvents()},updatePlayerSize:function(){var e=ye(Y);this.playerWidth=e.width,this.playerHeight=e.height,this.playerSizeIsValid=e.valid},adSizeChangeHandler:function(){this.updateTimestamps(),Ae(this.adUnit.adWidth,this.adUnit.adHeight),this.updatePlayerSize(),this.stopCallbacks||this.adSizeChanged()},adExpandedChangeHandler:function(){this.updateTimestamps(),Ae(this.adUnit.adWidth,this.adUnit.adHeight),this.stopCallbacks||this.adSizeChanged()},adVolumeChangeHandler:function(){this.updateAdVolume(),this.updateTimestamps()},metViewableStandard:function(){this.constructor.parent.prototype.metViewableStandard.call(this),this.isMeasurable=this.adHasLoaded&&this.adHasStarted&&this.adImpressionFired&&this.isMeasurable,this.inView=this.isMeasurable&&this.inView},cleanup:function(){this.unsubscribeToEvents()},getVideoEventBits:function(){return(this.adHasLoaded<<0)+(this.adHasStarted<<1)+(this.adImpressionFired<<2)+(this.adVideoCompleteFired<<3)+(this.adUserCloseFired<<4)+(this.adSkippedFired<<5)+(this.adStoppedFired<<6)}});function ei(e,t){this.timeout=e,this.callback=t,this.timeoutRef=0}ei.prototype.startTimer=function(e){var t=this;e?this.callback(e):this.timeoutRef||(this.timeoutRef=setTimeout(function(){t.callback(e)},this.timeout))};var ti,ii,ni,ri=[At,se,Wt,zt,Gt,qt,Qt,Ht,Kt],ai="",oi=!(ei.prototype.stopTimer=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=0,e&&this.callback(e)}),si=!1,ui=!1,li="2",ci=!1,di=!1,hi=!1;function fi(){var e="vd=1";return e+=":vv="+li,e+=":vpov="+(hi?1:0)}function pi(){return"sek="+(n="sek=",(e=ai)&&-1!==(t=e.indexOf(n))?(-1===(i=e.indexOf("&",t+n.length))&&(i=e.length),e.substring(t+n.length,i)):f)+"&plw="+ii.playerWidth+"&plh="+ii.playerHeight+(0<=Ue.avoc?"&avoc="+Ue.avoc:"")+"&mivl="+ii.minVolume+"&mivlt="+ii.maxTimeAtMinVolume+"&mxvl="+ii.maxVolume+"&mxvlt="+ii.maxTimeAtMaxVolume;var e,t,i,n}function mi(e){si||(ii.metViewableStandard(),ti.metViewableStandard(),function(e,t,i,n,r,a,o){var s=(new Date).getTime();if(e)try{e=Fe(e,["%InViewPercentage%","{pctview}"],"iv",r.getAverageInViewPercentage()),e=Fe(e,["%Viewable%","{initview}"],"v",i?"1":"2"),e=Fe(e,["%Measurable%","{Measurable}"],"im",n?"1":"2"),e=Fe(e,["%MeasurementType%","{MeasurementType}"],"m",t),e=Fe(e,["%Timestamp%","{Timestamp}"],"r",s),e=Fe(e,["%BucketId%","{BucketId}"],"b",k),e=Fe(e,["%AdditionalData%","{AdditionalData}"],"ad","jv="+I+(o&&""!==o?":"+o:"")+":"+je(r)),a&&(e+="&"+a),K(e)}catch(e){}}(ai,"2",ii.inView&&ti.inView,ii.isMeasurable&&ti.isMeasurable,ti,"plw="+ii.playerWidth+"&plh="+ii.playerHeight,fi()+":fu="+(e?"1":"0"))),si=!0}function vi(){ui||function(e,t,i,n){try{K(S+Nt(e,0,t,i,n))}catch(e){}}(Ue,ti,pi(),fi()),ui=!0}function gi(){mi(!0),vi(),ii.cleanup(),ti.cleanup()}function yi(){gi(),xe(C,bi),xe(V,wi)}function bi(){gi(),xe(C,bi)}function wi(){gi(),xe(V,wi)}function Ai(e){di=!1,e?yi():ii.isCurrentlyInView&&ti.isCurrentlyInView&&ni.startTimer(),ti.adVideoIsPlayingInView=ii.adHasStarted&&ii.adIsPlaying}function Ti(e){ni.stopTimer(),di=!0;var t=ii.adHasStarted&&ii.adIsPlaying;ii.adVideoCompleteFired||(hi=di&&t),e&&yi()}i.default=function(e){if(e&&(ai=e.adParams&&e.adParams.viewabilityBeaconUrl)&&""!==ai){var t;if(e.vpaidVersion&&(li=e.vpaidVersion),e.videoSlot&&!be(e.videoSlot,P,x)?ci=Ie(e.videoSlot,e.videoSlot):e.slot&&(ci=Ie(e.slot)),Ae(e.adWidth,e.adHeight),ni=new ei(2e3,mi),ci){for(var i=0;i<ri.length&&!ri[i].prototype.canApplyMethod(e.adParams);i++);t=ri[i]}else t=Kt;(ti=new t({adWidth:G,adHeight:z,inViewCallback:Ai,outOfViewCallback:Ti})).adIsVideo=!0,(ii=new Zt({adUnit:e.vpaidJSWrapper,playerId:e.adParams.playerId,inViewCallback:Ai,outOfViewCallback:Ti,adLoaded:function(){ti.init(),oi=!0},adSizeChanged:function(){oi&&ti.reset()},adVideoComplete:function(){ii.isCurrentlyInView&&ti.isCurrentlyInView&&(0<ii.minVolume&&999!==ii.minVolume?Ue.avoc=1:999===ii.minVolume&&(Ue.avoc=-1)),ii.adUnit&&ii.adUnit.getAdVolume?Ue.avoc_debug=0<ii.adUnit.getAdVolume()?"1":"2":Ue.avoc_debug="0"}})).init(),Pe("resize",function(){Ae(),oi&&ti.reset()}),Pe(C,bi),Pe(V,wi),Ne(),function(){for(var e=0;e<xt.length;e++)if(xt[e].init)try{xt[e].init(xt[e])}catch(e){}}()}}},{}],2:[function(e,t,i){"use strict";t.exports=function(r,e,t,i){function n(n){return function(){var e,t=-1;if("number"==typeof(e=r&&r.getAdVolume?r.getAdVolume():e)&&!isNaN(e)&&0<=e&&(t=e),o.addEvent({type:n,adVolume:t}),-1!==h.indexOf(n)&&r&&r.unsubscribe&&!d)for(var i in d=!0,c)if(c.hasOwnProperty&&c.hasOwnProperty(i))try{r.unsubscribe(c[i],i)}catch(e){}}}var a=document.createElement("script"),o={events:[],addEvent:function(e){s.sendEvent?(o.events&&(s.sendEvent(o.events),o.events=!1),s.sendEvent(e)):o.events.push(e)}},s={adData:{ids:t,vpaid:r,build:"cc07a80-clean"},dispatchEvent:o.addEvent};t="_moatApi"+Math.floor(1e8*Math.random());var u,l,c={AdStarted:n("AdStarted"),AdStopped:n("AdStopped"),AdSkipped:n("AdSkipped"),AdLoaded:n("AdLoaded"),AdLinearChange:n("AdLinearChange"),AdSizeChange:n("AdSizeChange"),AdExpandedChange:n("AdExpandedChange"),AdSkippableStateChange:n("AdSkippableStateChange"),AdDurationChange:n("AdDurationChange"),AdRemainingTimeChange:n("AdRemainingTimeChange"),AdVolumeChange:n("AdVolumeChange"),AdImpression:n("AdImpression"),AdClickThru:n("AdClickThru"),AdInteraction:n("AdInteraction"),AdVideoStart:n("AdVideoStart"),AdVideoFirstQuartile:n("AdVideoFirstQuartile"),AdVideoMidpoint:n("AdVideoMidpoint"),AdVideoThirdQuartile:n("AdVideoThirdQuartile"),AdVideoComplete:n("AdVideoComplete"),AdUserAcceptInvitation:n("AdUserAcceptInvitation"),AdUserMinimize:n("AdUserMinimize"),AdUserClose:n("AdUserClose"),AdPaused:n("AdPaused"),AdPlaying:n("AdPlaying"),AdError:n("AdError")},d=!1,h=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(r&&r.subscribe)for(var e in c)c.hasOwnProperty&&c.hasOwnProperty(e)&&r.subscribe(c[e],e)}();try{l=(u=e.ownerDocument).defaultView||u.parentWindow}catch(e){u=document,l=window}return l[t]=s,a.type="text/javascript",e&&e.insertBefore(a,e.childNodes[0]||null),a.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t,s}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default="2.1.59"},{}],4:[function(e,B,t){!function(j,L,H){!function(){!function(){var e,v={};function g(){}function r(e){return e}function t(e){return!!e}function i(e){return!e}var n="object"==typeof self&&self.self===self&&self||"object"==typeof L&&L.global===L&&L||this;function c(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function y(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}null!=n&&(e=n.async),v.noConflict=function(){return n.async=e,v};var a=Object.prototype.toString,b=Array.isArray||function(e){return"[object Array]"===a.call(e)};function o(e){return b(e)||"number"==typeof e.length&&0<=e.length&&e.length%1==0}function w(e,t){for(var i=-1,n=e.length;++i<n;)t(e[i],i,e)}function s(e,t){for(var i=-1,n=e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function u(e){return s(Array(e),function(e,t){return t})}function A(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var T=Object.keys||function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i};function d(e){var t,i,n=-1;return o(e)?(t=e.length,function(){return++n<t?n:null}):(i=T(e),t=i.length,function(){return++n<t?i[n]:null})}function E(n,r){return r=null==r?n.length-1:+r,function(){for(var e=Math.max(arguments.length-r,0),t=Array(e),i=0;i<e;i++)t[i]=arguments[i+r];switch(r){case 0:return n.call(this,t);case 1:return n.call(this,arguments[0],t)}}}function l(n){return function(e,t,i){return n(e,i)}}var h="function"==typeof H&&H,f=h?function(e){h(e)}:function(e){setTimeout(e,0)};function p(l){return function(i,n,r){r=y(r||g);var a=d(i=i||[]);if(l<=0)return r(null);var o=!1,s=0,u=!1;!function t(){if(o&&s<=0)return r(null);for(;s<l&&!u;){var e=a();if(null===e)return o=!0,void(s<=0&&r(null));s+=1,n(i[e],e,c(function(e){--s,e?(r(e),u=!0):t()}))}}()}}function m(n){return function(e,t,i){return n(v.eachOf,e,t,i)}}function S(r){return function(e,t,i,n){return r(p(t),e,i,n)}}function _(n){return function(e,t,i){return n(v.eachOfSeries,e,t,i)}}function k(e,t,r,i){i=y(i||g);var a=o(t=t||[])?[]:{};e(t,function(e,i,n){r(e,function(e,t){a[i]=t,n(e)})},function(e){i(e,a)})}function I(e,t,r,i){var a=[];e(t,function(t,i,n){r(t,function(e){e&&a.push({index:i,value:t}),n()})},function(){i(s(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,i,n){I(e,t,function(e,t){i(e,function(e){t(!e)})},n)}function V(o,s,u){return function(e,t,n,r){function i(){r&&r(u(!1,void 0))}function a(t,e,i){if(!r)return i();n(t,function(e){r&&s(e)&&(r(u(!0,t)),r=n=!1),i()})}3<arguments.length?o(e,t,a,i):(r=n,n=t,o(e,a,i))}}function P(e,t){return t}function x(e,t,i){i=i||g;var r=o(t)?[]:{};e(t,function(e,i,n){e(E(function(e,t){t.length<=1&&(t=t[0]),r[i]=t,n(e)}))},function(e){i(e,r)})}function O(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(e,t){r=r.concat(t||[]),i(e)})},function(e){i(e,r)})}function M(i,e,t){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function n(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=!b(e)?[e]:e).length&&t.idle())return v.setImmediate(function(){t.drain()});w(e,function(e){e={data:e,callback:n||g};i?t.tasks.unshift(e):t.tasks.push(e),t.tasks.length===t.concurrency&&t.saturated()}),v.setImmediate(t.process)}var r=0,a=[],o={tasks:[],concurrency:e,payload:t,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(e,t){n(o,e,!1,t)},kill:function(){o.drain=g,o.tasks=[]},unshift:function(e,t){n(o,e,!0,t)},process:function(){for(;!o.paused&&r<o.concurrency&&o.tasks.length;){var e=o.payload?o.tasks.splice(0,o.payload):o.tasks.splice(0,o.tasks.length),t=s(e,function(e){return e.data});0===o.tasks.length&&o.empty(),r+=1,a.push(e[0]);e=c(function(t,i){return function(){--r;var n=!1,e=arguments;w(i,function(i){w(a,function(e,t){e!==i||n||(a.splice(t,1),n=!0)}),i.callback.apply(i,e)}),t.tasks.length+r===0&&t.drain(),t.process()}}(o,e));i(t,e)}},length:function(){return o.tasks.length},running:function(){return r},workersList:function(){return a},idle:function(){return o.tasks.length+r===0},pause:function(){o.paused=!0},resume:function(){if(!1!==o.paused){o.paused=!1;for(var e=Math.min(o.concurrency,o.tasks.length),t=1;t<=e;t++)v.setImmediate(o.process)}}};return o}function D(i){return E(function(e,t){e.apply(null,t.concat([E(function(e,t){"object"==typeof console&&(e||console[i]&&w(t,function(e){}))})]))})}function R(n){return function(e,t,i){n(u(e),t,i)}}function U(a){return E(function(t,e){var i=E(function(n){var r=this,e=n.pop();return a(t,function(e,t,i){e.apply(r,n.concat([i]))},e)});return e.length?i.apply(this,e):i})}function N(n){return E(function(e){var t=e.pop();e.push(function(){var e=arguments;i?v.setImmediate(function(){t.apply(null,e)}):t.apply(null,e)});var i=!0;n.apply(this,e),i=!1})}"object"==typeof j&&"function"==typeof j.nextTick?v.nextTick=j.nextTick:v.nextTick=f,v.setImmediate=h?f:v.nextTick,v.forEach=v.each=function(e,t,i){return v.eachOf(e,l(t),i)},v.forEachSeries=v.eachSeries=function(e,t,i){return v.eachOfSeries(e,l(t),i)},v.forEachLimit=v.eachLimit=function(e,t,i,n){return p(t)(e,l(i),n)},v.forEachOf=v.eachOf=function(e,t,i){i=y(i||g);for(var n,r=d(e=e||[]),a=0;null!=(n=r());)a+=1,t(e[n],n,c(o));function o(e){a--,e?i(e):null===n&&a<=0&&i(null)}0===a&&i(null)},v.forEachOfSeries=v.eachOfSeries=function(e,n,r){r=y(r||g);var a=d(e=e||[]),o=a();!function t(){var i=!0;if(null===o)return r(null);n(e[o],o,c(function(e){if(e)r(e);else{if(null===(o=a()))return r(null);i?v.setImmediate(t):t()}})),i=!1}()},v.forEachOfLimit=v.eachOfLimit=function(e,t,i,n){p(t)(e,i,n)},v.map=m(k),v.mapSeries=_(k),v.mapLimit=S(k),v.inject=v.foldl=v.reduce=function(e,n,r,t){v.eachOfSeries(e,function(e,t,i){r(n,e,function(e,t){n=t,i(e)})},function(e){t(e,n)})},v.foldr=v.reduceRight=function(e,t,i,n){e=s(e,r).reverse();v.reduce(e,t,i,n)},v.transform=function(e,n,r,t){3===arguments.length&&(t=r,r=n,n=b(e)?[]:{}),v.eachOf(e,function(e,t,i){r(n,e,t,i)},function(e){t(e,n)})},v.select=v.filter=m(I),v.selectLimit=v.filterLimit=S(I),v.selectSeries=v.filterSeries=_(I),v.reject=m(C),v.rejectLimit=S(C),v.rejectSeries=_(C),v.any=v.some=V(v.eachOf,t,r),v.someLimit=V(v.eachOfLimit,t,r),v.all=v.every=V(v.eachOf,i,i),v.everyLimit=V(v.eachOfLimit,i,i),v.detect=V(v.eachOf,r,P),v.detectSeries=V(v.eachOfSeries,r,P),v.detectLimit=V(v.eachOfLimit,r,P),v.sortBy=function(e,t,i){function n(e,t){e=e.criteria,t=t.criteria;return e<t?-1:t<e?1:0}v.map(e,function(i,n){t(i,function(e,t){e?n(e):n(null,{value:i,criteria:t})})},function(e,t){return e?i(e):void i(null,s(t.sort(n),function(e){return e.value}))})},v.auto=function(s,u,l){"function"==typeof arguments[1]&&(l=u,u=null),l=y(l||g);var e=T(s),t=e.length;if(!t)return l(null);u=u||t;var c={},d=0,h=!1,i=[];function f(e){i.unshift(e)}function p(e){e=A(i,e);0<=e&&i.splice(e,1)}function m(){t--,w(i.slice(0),function(e){e()})}f(function(){t||l(null,c)}),w(e,function(a){if(!h){for(var e,t=b(s[a])?s[a]:[s[a]],i=E(function(e,t){var i,n,r;d--,t.length<=1&&(t=t[0]),e?(i={},r=function(e,t){i[t]=e},w(T(n=c),function(e){r(n[e],e)}),i[a]=t,h=!0,l(e,i)):(c[a]=t,v.setImmediate(m))}),o=t.slice(0,t.length-1),n=o.length;n--;){if(!(e=s[o[n]]))throw new Error("Has nonexistent dependency in "+o.join(", "));if(b(e)&&0<=A(e,a))throw new Error("Has cyclic dependencies")}r()?(d++,t[t.length-1](i,c)):f(function e(){r()&&(d++,p(e),t[t.length-1](i,c))})}function r(){return d<u&&(n=function(e,t){return e&&c.hasOwnProperty(t)},r=!0,w(o,function(e,t,i){r=n(r,e,t,i)}),r)&&!c.hasOwnProperty(a);var n,r}})},v.retry=function(e,t,i){var n=[],r={times:5,interval:0};var a=arguments.length;if(a<1||3<a)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function o(i,t){for(;r.times;){var e=!--r.times;n.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(r.task,e)),!e&&0<r.interval&&n.push(function(t){return function(e){setTimeout(function(){e(null)},t)}}(r.interval))}v.series(n,function(e,t){t=t[t.length-1],(i||r.callback)(t.err,t.result)})}return a<=2&&"function"==typeof e&&(i=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||5;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||5,e.interval=parseInt(t.interval,10)||0}}(r,e),r.callback=i,r.task=t,r.callback?o():o},v.waterfall=function(e,r){if(r=y(r||g),!b(e)){var t=new Error("First argument to waterfall must be an array of functions");return r(t)}if(!e.length)return r();!function i(n){return E(function(e,t){e?r.apply(null,[e].concat(t)):((e=n.next())?t.push(i(e)):t.push(r),N(n).apply(null,t))})}(v.iterator(e))()},v.parallel=function(e,t){x(v.eachOf,e,t)},v.parallelLimit=function(e,t,i){x(p(t),e,i)},v.series=function(e,t){x(v.eachOfSeries,e,t)},v.iterator=function(n){return function e(t){function i(){return n.length&&n[t].apply(null,arguments),i.next()}return i.next=function(){return t<n.length-1?e(t+1):null},i}(0)},v.apply=E(function(t,i){return E(function(e){return t.apply(null,i.concat(e))})}),v.concat=m(O),v.concatSeries=_(O),v.whilst=function(i,n,r){var a;r=r||g,i()?(a=E(function(e,t){e?r(e):i.apply(this,t)?n(a):r.apply(null,[null].concat(t))}),n(a)):r(null)},v.doWhilst=function(e,t,i){var n=0;return v.whilst(function(){return++n<=1||t.apply(this,arguments)},e,i)},v.until=function(e,t,i){return v.whilst(function(){return!e.apply(this,arguments)},t,i)},v.doUntil=function(e,t,i){return v.doWhilst(e,function(){return!t.apply(this,arguments)},i)},v.during=function(i,n,r){r=r||g;var a=E(function(e,t){e?r(e):(t.push(o),i.apply(this,t))}),o=function(e,t){e?r(e):t?n(a):r(null)};i(o)},v.doDuring=function(e,t,i){var n=0;v.during(function(e){n++<1?e(null,!0):t.apply(this,arguments)},e,i)},v.queue=function(i,e){return M(function(e,t){i(e[0],t)},e,1)},v.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(t,e,i,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(t.started=!0,0===(e=!b(e)?[e]:e).length)return v.setImmediate(function(){t.drain()});w(e,function(e){e={data:e,priority:i,callback:"function"==typeof n?n:g};t.tasks.splice(function(e,t,i){for(var n=-1,r=e.length-1;n<r;){var a=n+(r-n+1>>>1);0<=i(t,e[a])?n=a:r=a-1}return n}(t.tasks,e,r)+1,0,e),t.tasks.length===t.concurrency&&t.saturated(),v.setImmediate(t.process)})}var a=v.queue(e,t);return a.push=function(e,t,i){n(a,e,t,i)},delete a.unshift,a},v.cargo=function(e,t){return M(e,1,t)},v.log=D("log"),v.dir=D("dir"),v.memoize=function(i,n){var a={},o={},s=Object.prototype.hasOwnProperty;n=n||r;var e=E(function(e){var t=e.pop(),r=n.apply(null,e);s.call(a,r)?v.setImmediate(function(){t.apply(null,a[r])}):s.call(o,r)?o[r].push(t):(o[r]=[t],i.apply(null,e.concat([E(function(e){a[r]=e;var t=o[r];delete o[r];for(var i=0,n=t.length;i<n;i++)t[i].apply(null,e)})])))});return e.memo=a,e.unmemoized=i,e},v.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},v.times=R(v.map),v.timesSeries=R(v.mapSeries),v.timesLimit=function(e,t,i,n){return v.mapLimit(u(e),t,i,n)},v.seq=function(){var t=arguments;return E(function(e){var n=this,i=e[e.length-1];"function"==typeof i?e.pop():i=g,v.reduce(t,e,function(e,t,i){t.apply(n,e.concat([E(function(e,t){i(e,t)})]))},function(e,t){i.apply(n,[e].concat(t))})})},v.compose=function(){return v.seq.apply(null,Array.prototype.reverse.call(arguments))},v.applyEach=U(v.eachOf),v.applyEachSeries=U(v.eachOfSeries),v.forever=function(e,t){var i=c(t||g),n=N(e);!function e(t){if(t)return i(t);n(e)}()},v.ensureAsync=N,v.constant=E(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),v.wrapSync=v.asyncify=function(r){return E(function(e){var t,i,n=e.pop();try{t=r.apply(this,e)}catch(e){return n(e)}("function"==(e=typeof(i=t))||"object"==e&&i)&&"function"==typeof t.then?t.then(function(e){n(null,e)}).catch(function(e){n(e.message?e:new Error(e))}):n(null,t)})},"object"==typeof B&&B.exports?B.exports=v:n.async=v}()}.call(this)}.call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:5,timers:6}],5:[function(e,t,i){var n,r,t=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new p(e,t)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(u,e,l){!function(i,s){!function(){var n=u("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,a={},o=0;function t(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof i?i:function(e){var t=o++,i=!(arguments.length<2)&&r.call(arguments,1);return a[t]=!0,n(function(){a[t]&&(i?e.apply(null,i):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof s?s:function(e){delete a[e]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":5,timers:6}],7:[function(e,T,E){!function(r,d){"use strict";var h="function",i="undefined",e="model",t="name",n="type",a="vendor",o="version",s="architecture",u="console",l="mobile",c="tablet",f="smarttv",p="wearable",m={extend:function(e,t){var i,n={};for(i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:d},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t==i?e:e.substring(0,255)}},v={rgx:function(e,t){for(var i,n,r,a,o,s=0;s<t.length&&!a;){for(var u=t[s],l=t[s+1],c=i=0;c<u.length&&!a;)if(a=u[c++].exec(e))for(n=0;n<l.length;n++)o=a[++i],"object"==typeof(r=l[n])&&0<r.length?2==r.length?typeof r[1]==h?this[r[0]]=r[1].call(this,o):this[r[0]]=r[1]:3==r.length?typeof r[1]!=h||r[1].exec&&r[1].test?this[r[0]]=o?o.replace(r[1],r[2]):d:this[r[0]]=o?r[1].call(this,o,r[2]):d:4==r.length&&(this[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):d):this[r]=o||d;s+=2}},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&0<t[i].length){for(var n=0;n<t[i].length;n++)if(m.has(t[i][n],e))return"?"===i?d:i}else if(m.has(t[i],e))return"?"===i?d:i;return e}},g={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[o,[t,"Chrome"]],[/(?:edgios|edga|edg)\/([\w\.]+)/i],[o,[t,"Edge"]],[/edge\/([\w\.]+)/i],[[o,v.str,g.browser.oldEdge.version],[t,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,o],[/opios[\/\s]+([\w\.]+)/i],[o,[t,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[o,[t,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|instagram)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[t,o],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[o,[t,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[o,[t,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[o,[t,"WeChat"]],[/konqueror\/([\w\.]+)/i],[o,[t,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[o,[t,"IE"]],[/yabrowser\/([\w\.]+)/i],[o,[t,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[t,/(.+)/,"$1 Secure Browser"],o],[/focus\/([\w\.]+)/i],[o,[t,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[o,[t,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[o,[t,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[o,[t,"Dolphin"]],[/coast\/([\w\.]+)/i],[o,[t,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[o,[t,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[o,[t,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[t,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[t,/(.+)/,"$1 Browser"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],o],[/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[t,o],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[t],[/;fbav\/([\w\.]+);/i],[o,[t,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[t,"Facebook"]],[/\s(electron)\/([\w\.]+)\ssafari/i,/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i],[t,o],[/\bgsa\/([\w\.]+)\s.*safari\//i],[o,[t,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[o,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,"Chrome WebView"],o],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[o,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,o],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[o,[t,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[o,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[o,v.str,g.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,m.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-p(?:605|610|587)|sm-t\w+|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus\s10)/i],[e,[a,"Samsung"],[n,c]],[/(s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[e,[a,"Samsung"],[n,l]],[/\((ip(?:hone|od)[\s\w]*);/i],[e,[a,"Apple"],[n,l]],[/\((ipad);[\w\s\),;-]+(apple)/i],[e,a,[n,c]],[/applecoremedia\/[\w\.]+\s\((ipad)/i],[e,[a,"Apple"],[n,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[e,[a,"Huawei"],[n,l]],[/\b(bah2?-a?[lw]\d{2})/i],[e,[a,"Huawei"],[n,c]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\s+build\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[e,/_/g," "],[a,"Xiaomi"],[n,l]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[e,/_/g," "],[a,"Xiaomi"],[n,c]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[e,[a,"OPPO"],[n,l]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[e,[a,"Vivo"],[n,l]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[e,[a,"Realme"],[n,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot[\s-](\w*)/i,/(moto[\s\w\(\)]+(?=\sbuild|\)))/i,/(xt\d{3,4})\sbuild\//i,/(nexus\s6)/i],[e,[a,"Motorola"],[n,l]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[a,"Motorola"],[n,c]],[/((?=lg)?[vl]k\-?\d{3})\s+build|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[e,[a,"LG"],[n,c]],[/(nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\s+build/i],[e,[a,"LG"],[n,l]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|[\w-]+)/i],[e,[a,"Lenovo"],[n,c]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[e,[a,"Nokia"],[n,l]],[/droid.+;\s(pixel\sc)[\s)]/i],[e,[a,"Google"],[n,c]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[e,[a,"Google"],[n,l]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[a,"Sony"],[n,l]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[e,"Xperia Tablet"],[a,"Sony"],[n,c]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\s+build/i,/\boneplus\s(a\d{4})[\s)]/i],[e,[a,"OnePlus"],[n,l]],[/(alexa)webm/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[e,[a,"Amazon"],[n,c]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[e,"Fire Phone"],[a,"Amazon"],[n,l]],[/\((playbook);[\w\s\),;-]+(rim)/i],[e,a,[n,c]],[/\(bb10;\s(\w+)/i],[e,[a,"BlackBerry"],[n,l]],[/\b(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00c)/i],[e,[a,"ASUS"],[n,c]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[e,[a,"ASUS"],[n,l]],[/(nexus\s9)/i],[e,[a,"HTC"],[n,c]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[a,[e,/_/g," "],[n,l]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[a,"Acer"],[n,c]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[e,[a,"Meizu"],[n,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,e,[n,l]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[a,e,[n,c]],[/\s(surface\sduo)\s/i],[e,[a,"Microsoft"],[n,c]],[/\s(u304aa)\sbuild/i],[e,[a,"AT&T"],[n,l]],[/sie-(\w*)/i],[e,[a,"Siemens"],[n,l]],[/[;\/]\s?(rct\w+)\sbuild/i],[e,[a,"RCA"],[n,c]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[e,[a,"Dell"],[n,c]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[e,[a,"Verizon"],[n,c]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[e,[a,"Barnes & Noble"],[n,c]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[e,[a,"NuVision"],[n,c]],[/;\s(k88)\sbuild/i],[e,[a,"ZTE"],[n,c]],[/;\s(nx\d{3}j)\sbuild/i],[e,[a,"ZTE"],[n,l]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[e,[a,"Swiss"],[n,l]],[/[;\/]\s?(zur\d{3})\sbuild/i],[e,[a,"Swiss"],[n,c]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[e,[a,"Zeki"],[n,c]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[a,"Dragon Touch"],e,[n,c]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[e,[a,"Insignia"],[n,c]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[e,[a,"NextBook"],[n,c]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[a,"Voice"],e,[n,l]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[a,"LvTel"],e,[n,l]],[/;\s(ph-1)\s/i],[e,[a,"Essential"],[n,l]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[e,[a,"Envizen"],[n,c]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[e,[a,"MachSpeed"],[n,c]],[/[;\/]\s?tu_(1491)\sbuild/i],[e,[a,"Rotor"],[n,c]],[/(shield[\w\s]+)\sbuild/i],[e,[a,"Nvidia"],[n,c]],[/(sprint)\s(\w+)/i],[a,e,[n,l]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[a,"Microsoft"],[n,l]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[e,[a,"Zebra"],[n,c]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[e,[a,"Zebra"],[n,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[a,e,[n,u]],[/droid.+;\s(shield)\sbuild/i],[e,[a,"Nvidia"],[n,u]],[/(playstation\s[345portablevi]+)/i],[e,[a,"Sony"],[n,u]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[e,[a,"Microsoft"],[n,u]],[/smart-tv.+(samsung)/i],[a,[n,f],e],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[a,"Samsung"],[n,f]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[a,"LG"],e,[n,f]],[/(apple)\s?tv/i],[a,[e,"Apple TV"],[n,f]],[/crkey/i],[[e,"Chromecast"],[a,"Google"],[n,f]],[/droid.+aft([\w])(\sbuild\/|\))/i],[e,[a,"Amazon"],[n,f]],[/\(dtv[\);].+(aquos)/i],[e,[a,"Sharp"],[n,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,m.trim],[e,m.trim],[n,f]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[n,f]],[/((pebble))app\/[\d\.]+\s/i],[a,e,[n,p]],[/droid.+;\s(glass)\s\d/i],[e,[a,"Google"],[n,p]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[e,[a,"Zebra"],[n,p]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[e,[n,l]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[e,[n,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,m.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[a,"Generic"]],[/(phone)/i],[[n,l]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[o,[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,o],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[o,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[t,[o,v.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[o,v.str,g.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[o,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[t,"Mac OS"],[o,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i],[t,o],[/\(bb(10);/i],[o,[t,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[o,[t,"Symbian"]],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[o,[t,"webOS"]],[/crkey\/([\d\.]+)/i],[o,[t,"Chromecast"]],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],o],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i],[t,o],[/(haiku)\s(\w+)/i],[t,o],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,o]]},b=function(e,t){if("object"==typeof e&&(t=e,e=d),!(this instanceof b))return new b(e,t).getResult();var i=e||(void 0!==r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?m.extend(y,t):y;return this.getBrowser=function(){var e={name:d,version:d};return v.rgx.call(e,i,n.browser),e.major=m.major(e.version),e},this.getCPU=function(){var e={architecture:d};return v.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:d,model:d,type:d};return v.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:d,version:d};return v.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:d,version:d};return v.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=255<e.length?m.trim(e,255):e,this},this.setUA(i),this};b.VERSION="0.7.26",b.BROWSER={NAME:t,MAJOR:"major",VERSION:o},b.CPU={ARCHITECTURE:s},b.DEVICE={MODEL:e,VENDOR:a,TYPE:n,CONSOLE:u,MOBILE:l,SMARTTV:f,TABLET:c,WEARABLE:p,EMBEDDED:"embedded"},b.ENGINE={NAME:t,VERSION:o},b.OS={NAME:t,VERSION:o},typeof E!=i?(E=typeof T!=i&&T.exports?T.exports=b:E).UAParser=b:void 0!==r&&(r.UAParser=b);var w,A=void 0!==r&&(r.jQuery||r.Zepto);A&&!A.ua&&(w=new b,A.ua=w.getResult(),A.ua.get=function(){return w.getUA()},A.ua.set=function(e){w.setUA(e);var t,i=w.getResult();for(t in i)A.ua[t]=i[t]})}("object"==typeof window?window:this)},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels=e.pixels||[],e.sources=e.sources||[],e.features=e.features||[],e.options=e.options||{},e.videoClicks=e.videoClicks||{},e.videoClicks.clickTracking=e.videoClicks.clickTracking||[],e.error=e.error||[],e.metadata=e.metadata||{},e.metadata.demandSourceId=e.metadata.demandSourceId||0,t(null,e)}},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.metadata.protocol=(0,n.getTrueUrlInfo)().topUrl.match(/^(\w+):/)[1]||"https",e.metadata.vpaidJSWrapperVersion=r.vpaidJSWrapperVersion,t(null,e)};var n=e("../util/url"),r=e("../metadata.json")},{"../metadata.json":28,"../util/url":37}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;e=e("../constants.js");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=e.NODE_TYPE.TEXT_NODE,s=e.NODE_TYPE.CDATA_SECTION_NODE,u=e.NODE_TYPE.COMMENT_NODE;i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"allImmediateChildrenByNames",value:function(e,i){var n={};return e&&(e=e.childNodes||[],Array.prototype.forEach.call(e,function(e){var t=e.nodeName;1===e.nodeType&&(!i||0===i.length||-1<i.indexOf(t))&&(n[t]||(n[t]=[]),n[t].push(e))})),n}},{key:"getText",value:function(e){return function e(t){for(var i,n,r="",a=0;i=t[a++];)i.nodeType===o||i.nodeType===s?(n=i.nodeValue&&i.nodeValue.trim())&&(r+=n):i.nodeType!==u&&(r+=e(i.childNodes));return r}([e])}}],(i=null)&&r(t.prototype,i),n&&r(t,n),e}()},{"../constants.js":19}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){new r.default(e).fire("VISTA_LOADED"),t(null,e)};var n,r=(n=e("../diag"))&&n.__esModule?n:{default:n}},{"../diag":20}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){!function(e,t,i){t[0]&&(t[0]=n.default.apply(t[0],e));n.default.waterfall(t,i)}(e,[r.default,a.default,o.default,s.default,u.default,l.default,c.default],t)};var n=d(e("async")),r=d(e("./parse_yahoo_adparams.js")),a=d(e("./add_defaults.js")),o=d(e("./add_metadata.js")),s=d(e("./fire_init_pixels.js")),u=d(e("./vast_parser.js")),l=d(e("./map_vast_vpaid.js")),c=d(e("./process_click_tracking.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./add_defaults.js":8,"./add_metadata.js":9,"./fire_init_pixels.js":11,"./map_vast_vpaid.js":13,"./parse_yahoo_adparams.js":15,"./process_click_tracking.js":16,"./vast_parser.js":17,async:4}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){e.pixels.forEach(function(e){"progress"===e.event&&void 0!==e.offset&&(e.offset=function(e){var t=e.match(/^(\d{2}):(\d{2}):(\d{2})(.(\d{3}))?$/);if(t)return{type:"time",offset:3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseInt(t[3],10)+(t[5]?parseInt(t[5],10)/1e3:0)};e=e.match(/^(\d+)%$/);if(e)return{type:"percentage",offset:parseInt(e[1],10)};return null}(e.offset));var t=n[e.event];t&&(e.event=t)}),t(null,e)};var n={skip:"AdSkipped",creativeView:"AdStarted",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",acceptInvitation:"AdUserAcceptInvitation",collapse:"AdUserMinimize",close:"AdUserClose",pause:"AdPaused",resume:"AdPlaying",error:"AdError"}},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=new o.default;t.width=+e.getAttribute("width")||0,t.height=+e.getAttribute("height")||0,t.xPosition=+e.getAttribute("xPosition")||e.getAttribute("xPosition"),t.yPosition=+e.getAttribute("yPosition")||e.getAttribute("yPosition"),t.offset=(0,a.timeToSec)(e.getAttribute("offset")||""),t.duration=(0,a.timeToSec)(e.getAttribute("duration")||"");var i=s.default.allImmediateChildrenByNames(e),n=i.IconClicks[0],r=s.default.allImmediateChildrenByNames(n),e=r.IconClickThrough&&r.IconClickThrough[0],n=r.IconClickTracking&&r.IconClickTracking[0];i.StaticResource&&i.StaticResource[0]&&(r=i.StaticResource[0],t.staticResourceUrl=s.default.getText(r).trim(),t.staticResourceType=r.getAttribute("creativeType"));i.IconViewTracking&&i.IconViewTracking[0]&&(t.viewTrackingUrl=s.default.getText(i.IconViewTracking[0]).trim());e&&(t.clickThroughUrl=s.default.getText(e).trim());n&&(t.clickTrackingUrl=s.default.getText(n).trim());return t};var a=e("../util/timeToSec.js"),o=n(e("../model/icon.js")),s=n(e("./dom.js"));function n(e){return e&&e.__esModule?e:{default:e}}},{"../model/icon.js":29,"../util/timeToSec.js":36,"./dom.js":10}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i=null,n=null;if("object"===a(t))i=t;else try{i=function(e){var t={};try{var i=JSON.parse(e);if(i){f(i.viewableImpression,function(e){t.viewabilityBeaconUrl=e}),t.pixels=t.pixels||[];var n=i.impression;t.pixels=t.pixels.concat(p(n).map(function(e){return{event:"impression",url:e}})),t.sources=i.sources||[];var r=i.mediaFiles;t.sources=t.sources.concat(p(r).map(function(e){return{url:e.value&&e.value.replace(/^\s+|\s+$/g,""),mimetype:e.type,apiFramework:e.apiFramework,bitrate:e.bitrate}}));var a=i.vastAdTagURI;t.sources=t.sources.concat(p(a).map(function(e){return{url:e&&e.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"}}));var o=i.trackingEvents;t.pixels=t.pixels.concat(p(o).map(function(e){return{event:e.eventType,url:e.value,offset:e.offset}}));var s,u=i.error;t.error=t.error||[],t.error=t.error.concat(p(u).map(function(e){return{event:"error",url:e}})),t.videoClicks=t.videoClicks||{},t.videoClicks.clickTracking=t.videoClicks.clickTracking||[],i.videoClicks&&i.videoClicks.clickTracking&&(s=i.videoClicks.clickTracking,t.videoClicks.clickTracking=t.videoClicks.clickTracking.concat(p(s).map(function(e){return e}))),i.videoClicks&&i.videoClicks.clickThrough&&f(i.videoClicks.clickThrough,function(e){t.videoClicks.clickThrough=e}),t.metadata=t.metadata||{};var l=i.moatParams;if(l)for(var c in l){var d=c,h=l[c];d&&h&&(t.metadata[d]=h)}}}catch(e){throw new Error("JSON parsing error: "+e.message)}return t}(t)}catch(e){try{i=function(e){var i={};try{t=window.atob(e)}catch(e){throw new Error("XML parsing error: "+e.message)}if(null!==t)try{if(0<(n=(0,r.parseXml)(t)).getElementsByTagName("parsererror").length||n.parseError&&0!==n.parseError.errorCode)throw new Error(n.getElementsByTagName("parsererror")[0].nodeValue)}catch(e){throw new Error("XML parsing error: "+e.message)}{var t,n;"YahooViewability"===n.documentElement.nodeName&&(o(n.getElementsByTagName("ViewableImpression"),function(e){i.viewabilityBeaconUrl=e.textContent}),i.pixels=i.pixels||[],o(n.getElementsByTagName("Impression"),function(e){i.pixels.push({event:"impression",url:e.textContent})}),i.sources=i.sources||[],o(n.getElementsByTagName("MediaFile"),function(e){i.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework")})}),o(n.getElementsByTagName("VASTAdTagURI"),function(e){i.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"})}),o(n.getElementsByTagName("Tracking"),function(e){i.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),t=n.getElementsByTagName("Error"),i.error=i.error||[],o(t,function(e){i.error.push({event:e.getAttribute("event"),url:e.textContent})}),i.videoClicks=i.videoClicks||{},i.videoClicks.clickTracking=i.videoClicks.clickTracking||[],o(n.getElementsByTagName("ClickTracking"),function(e){i.videoClicks.clickTracking.push(e.textContent)}),(t=n.getElementsByTagName("ClickThrough")[0])&&(i.videoClicks.clickThrough=t.textContent),i.metadata=i.metadata||{},(n=function(e){e=e.getElementsByTagName("MOATparams")[0];if(e)return e.childNodes}(n))&&o(n,function(e){var t=e.nodeName,e=e.textContent;t&&e&&(i.metadata[t]=e)}))}return i}(t)}catch(e){n=e}}return e(n,i)};var r=e("../util/xml.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){[].forEach.call(e=e||[],t)}function f(e,t){e?Array.isArray(e)||(e=[e]):e=[],e.forEach(t)}function p(e){return e?Array.isArray(e)||(e=[e]):e=[],e}},{"../util/xml.js":39}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){t.videoClicks.clickTracking.forEach(function(e){return t.pixels.push({event:"AdClickThru",url:e})}),e(null,t)}},{}],17:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){var i=function(e){var t=e.sources,i=null;t&&(e.sources=t.filter(function(e){return"application/xml"!==e.mimetype||(i=e.url,!1)}));return i}(e);e.debugData={vastUri:i},e.vastXmls=[],e.icons=[],i?c(i,e,t,0):t(null,e)};var h=r(e("../diag.js")),n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var i,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in e){var a;Object.prototype.hasOwnProperty.call(e,i)&&((a=r?Object.getOwnPropertyDescriptor(e,i):null)&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i])}n.default=e,t&&t.set(e,n);return n}(e("../macros")),f=e("../constants.js"),l=r(e("./parse_icon_element.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=5;function c(o,s,u,l){var c,d=new h.default(s);o=n.expand(o,null,[n.pageUrl]),a<=l?d.fire("VAST_MAX_DEPTH",function(){u(new Error("max VAST unwrapping depth reached"))}):(c=new XMLHttpRequest,-1===o.indexOf("s.yimg.com")&&-1===o.indexOf("l.yimg.com")&&(c.withCredentials=!0),0<=[].indexOf(o)&&(c.withCredentials=!1),c.onreadystatechange=function(){var e,t,i,n,r,a;4===c.readyState&&((e=function(e,t,i){var n=p({},f.DM_MSG.REQ_STATUS,e.status),r={generalError:!1,corsError:!1};200!==e.status?null!==e.responseURL&&0===e.responseURL.length&&null===e.responseXML?r.corsError=!0:(t.fire("VAST_NOT_FOUND",function(){i(new Error("parseVast error: response status: "+e.status))},n),r.generalError=!0):e.responseXML||(t.fire("VAST_PARSER_ERROR",function(){i(new Error("parseVast error: missing responseXML"))},n),r.generalError=!0);return r}(c,d,u)).generalError||(e.corsError?(e=o,t=s,i=u,n=l,r=d,(a=new XMLHttpRequest).onreadystatechange=function(){var e=p({},f.DM_MSG.REQ_STATUS,a.status);4===a.readyState&&(200===a.status?m(t,a,i,n,r):r.fire("VAST_CORS_ERROR",function(){i(new Error("VAST_CORS_ERROR"))},e))},a.withCredentials=!1,a._url=e,a.open("GET",e),a.send()):m(s,c,u,l,d)))},c._url=o,c.open("GET",o),c.send())}function m(e,t,i,n,r){e.vastXmls.push(t.responseXML);var a,o,s=function(e){e=e.getElementsByTagName("Ad")[0];if(e)return e.firstElementChild.tagName;return null}(t.responseXML);switch(s){case"Wrapper":var u=function(e){e=e.getElementsByTagName("VASTAdTagURI")[0];if(e)return e.textContent;return null}(t.responseXML);u?c(u,e,i,n+1):r.fire("VAST_WRAPPER_URI_MISSING",function(){i(new Error("VASTAdTag URI not found"))});break;case"InLine":try{(o=e).vastXmls.forEach(function(e){return function(t,e){var i=new h.default(t),e=e.getElementsByTagName("Ad")[0];if(!e||1!==e.childElementCount||"null"===e)throw i.fire("VAST_MALFORMED"),Error("parseVastXml error: invalid VAST format");d(e.getElementsByTagName("Impression"),function(e){t.pixels.push({event:"impression",url:e.textContent})});for(var n=e.getElementsByTagName("Creative"),r=[],a=0,o=n.length;a<o;a++)r.push(n[a]);r.sort(function(e,t){return(e.getAttribute("sequence")||0)-(t.getAttribute("sequence")||0)});var s=[];r.forEach(function(e){var t,i=e.getElementsByTagName("MediaFile");for(t in i)1===i[t].nodeType&&s.push(i[t])}),s.length<1&&(s=e.getElementsByTagName("MediaFile"));t.sources=[],d(s,function(e){t.sources.push({url:e.textContent&&e.textContent.replace(/^\s+|\s+$/g,""),mimetype:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework"),bitrate:e.getAttribute("bitrate")})}),d(e.getElementsByTagName("Tracking"),function(e){t.pixels.push({event:e.getAttribute("event"),url:e.textContent})}),d(e.getElementsByTagName("ClickTracking"),function(e){t.videoClicks.clickTracking.push(e.textContent)});i=e.getElementsByTagName("ClickThrough")[0];i&&(t.videoClicks.clickThrough=i.textContent);i=e.getElementsByTagName("AdParameters")[0];i&&(t.thirdPartyAdParams=i.textContent);e=function(e){var t=null,e=e.getElementsByTagName("Icons")[0];!e||(e=e.getElementsByTagName("Icon")[0])&&(t=(0,l.default)(e));return t}(e);e&&t.icons.push(e)}(o,e)}),a=o}catch(e){return void i(new Error("addAdParams error: "+e.message))}i(null,a);break;default:r.fire("VAST_MISSING_AD_TYPE",function(){i(new Error("vast error: no ad type found"))},p({},f.DM_MSG.AD_TYPE,s))}}function d(e,t){[].forEach.call(e=e||[],t)}},{"../constants.js":19,"../diag.js":20,"../macros":27,"./parse_icon_element.js":14}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default={adPlaybackTimeout:6e5,vpaidCreativeMethodTimeout:2e4,scoutWatchShouldFire:{AdImpression:!0,AdVideoStart:!0,AdVideoFirstQuartile:!0,AdVideoMidpoint:!0,AdVideoThirdQuartile:!0,AdVideoComplete:!0,AdStopped:!0,AdError:!0,AdClickThru:!0,AdSizeChange:!0,AdDurationChange:!0}}},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IMAGE_TYPES=i.NODE_TYPE=i.VIDEO_MEDIA_ERR=i.DM_MSG=void 0;i.DM_MSG={ERROR_MSG:"errMsg",TAG_STATUS_CODE:"tagStatusCode",REQ_STATUS:"reqStatus",AD_TYPE:"adType",MIME:"mime",URL:"url",ELAPSED_TIME:"et"};i.VIDEO_MEDIA_ERR={ABORTED:1,NETWORK:2,DECODE:3,SRC_NOT_SUPPORTED:4};i.NODE_TYPE={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};i.IMAGE_TYPES=["image/jpeg","image/jpg","image/gif","image/png"]},{}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.MAX_DM_URL_LENGTH=void 0;var r=n(e("./util/fire.js")),a=n(e("../lib/version.js")),o=e("./constants.js"),s=e("./util/url.js"),u=n(e("./util/sanitizeUrl.js"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=e("ua-parser-js");i.MAX_DM_URL_LENGTH=800;var d={VAST_NOT_FOUND:20001,VAST_PARSER_ERROR:20002,VAST_WRAPPER_URI_MISSING:20003,VAST_MALFORMED:20004,VAST_NO_AD:20005,VAST_MAX_DEPTH:20006,VAST_MISSING_AD_TYPE:20007,VAST_CORS_ERROR:20009,VPAID_HANDSHAKE_FAIL:20010,VPAID_LOAD_ERROR:20011,VPAID_LOAD_TIMEOUT:20012,VPAID_PROTOCOL_NOT_SUPPORTED:20014,VPAID_INTERNAL_ERROR:20015,NO_VIDEO_SLOT:20201,VPAID_NONVITAL_METHOD_TIMEOUT:20202,VPAID_STATE_INCONSISTENCY:20203,AD_DURATION_NOT_SUPPORTED:20204,SUBSCRIBER_ERROR:20206,VISTA_UNCAUGHT_ERROR:20207,NO_COMPATIBLE_VIDEO:20208,PUBLISHER_UNCAUGHT_ERROR:20209,VIDEO_MEDIA_ERR_ABORTED:20210,VIDEO_MEDIA_ERR_NETWORK:20211,VIDEO_MEDIA_ERR_DECODE:20212,VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED:20213,VIDEO_MEDIA_ERR_UNKNOWN:20214,VPAID_HANDSHAKE_TIMEOUT:20215,VPAID_INIT_AD_TIMEOUT:20216,VPAID_START_AD_TIMEOUT:20217,VPAID_STOP_AD_TIMEOUT:20218,VISTA_LOADED:6e4,VISTA_IMP:60001,VISTA_AD_VIDEO_COMPLETE:60002,VISTA_AD_VIDEO_START:60003,VISTA_AD_VIDEO_STOP:60004,VISTA_AD_VIDEO_START_STARTING:60005,VISTA_AD_VIDEO_LOADED_STARTING:60006,VISTA_AD_VIDEO_LOADED:60007},h={AdImpression:"VISTA_IMP"},f=/:/g,p=/\//g;i.default=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.adParams=e||{},this.version=a.default,this.pageUrl="undefined"==typeof window?null:(0,u.default)((0,s.getTrueUrlInfo)().topUrl)}var e,i,n;return e=t,(i=[{key:"addDesiredBitrateInfo",value:function(e){this.adParams.desiredBitrate=e}},{key:"addServedBitrateInfo",value:function(e){this.adParams.servedBitrate=e}},{key:"_getUrlForName",value:function(e,t){var i="JS-"+d[e];if(void 0===this.adParams.browser)try{var n=this._getUserAgent();this.adParams.browser=this._getBrowserFromUserAgent(n)}catch(e){}e=this.adParams.error&&this.adParams.error[0]&&this.adParams.error[0].url||"";this.adParams&&this.adParams.browser&&(i=i+",rb:"+this.adParams.browser),this.adParams&&this.adParams.selectedFileType&&(i=i+",rm:"+this.adParams.selectedFileType),t&&Object.prototype.hasOwnProperty.call(t,o.DM_MSG.ERROR_MSG)&&(i+=",emsg:"+t[o.DM_MSG.ERROR_MSG].trim().substring(0,800).replace(f,"_")),i+=",vv:"+this.version,i+=",pu:"+this.pageUrl.replace(f,"_").replace(p,"");n={};return t&&(n[o.DM_MSG.TAG_STATUS_CODE]=t[o.DM_MSG.TAG_STATUS_CODE],n[o.DM_MSG.REQ_STATUS]=t[o.DM_MSG.REQ_STATUS],n[o.DM_MSG.AD_TYPE]=t[o.DM_MSG.AD_TYPE],n[o.DM_MSG.MIME]=t[o.DM_MSG.MIME],n[o.DM_MSG.ELAPSED_TIME]=t[o.DM_MSG.ELAPSED_TIME]),i+=",dm:"+btoa(JSON.stringify(n)),e.replace(/(##|\[)ERRORCODE(##|\])/gi,i)}},{key:"getUrlByEvent",value:function(e){e=h[e];return e&&this._getUrlForName(e)}},{key:"fire",value:function(e,t,i){(0,r.default)(this._getUrlForName(e,i),t)}},{key:"_getUserAgent",value:function(){return navigator&&navigator.userAgent}},{key:"_getBrowserFromUserAgent",value:function(e){e=c(e);return e&&e.browser&&e.browser.name+e.browser.major}}])&&l(e.prototype,i),n&&l(e,n),t}()},{"../lib/version.js":3,"./constants.js":19,"./util/fire.js":32,"./util/sanitizeUrl.js":35,"./util/url.js":37,"ua-parser-js":7}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("async")),s=n(e("../util/fire.js")),r=n(e("./providers/index.js"));function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){var n=e[i];n&&(e[i]=n.filter(function(e){return e.callback!==t}))}function l(e,t,i){t=e[t];i&&(Array&&Array.isArray&&Array.isArray(i)||(i=[i])),t&&t.forEach(function(e){var t=e.callback,e=e.context;return t.apply(e||null,i)})}i.default=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=e,this.pixelProviders=(0,r.default)(e),this.diag=null,this.internalSubscribers={},this.externalSubscribers={}}var e,i,n;return e=t,(i=[{key:"init",value:function(e){for(var t in this.pixelProviders)this.pixelProviders[t].init(e);this.diag=e.diag}},{key:"addExternalSubscriber",value:function(e,t,i){var n=this.externalSubscribers[t]||[];n.push({callback:e,context:i}),this.externalSubscribers[t]=n}},{key:"addInternalSubscriber",value:function(e,t,i){var n=this.internalSubscribers[t]||[];n.push({callback:e,context:i}),this.internalSubscribers[t]=n}},{key:"removeSubscriber",value:function(e,t){u(this.internalSubscribers,e,t),u(this.externalSubscribers,e,t)}},{key:"fire",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){try{l(r.internalSubscribers,i,e),l(r.externalSubscribers,i,e)}catch(e){return void r.handleFireException(i,e,n)}t&&t()})}},{key:"fireSync",value:function(i,e,n,t){var r=this,a=this.pixelProviders&&Object.keys(this.pixelProviders).reduce(function(e,t){return e.concat(r.pixelProviders[t].getUris(i,n))},[]);try{l(this.internalSubscribers,i,e),l(this.externalSubscribers,i,e)}catch(e){this.handleFireException(i,e,n)}o.default.each(a,function(e,t){(0,s.default)(e,t)},function(){t&&t()})}},{key:"handleFireException",value:function(e,t,i){var n,r,a=this;"AdError"!==e&&(null!==t&&(n=t.message,(r=t.stack.toString().split(/\r\n|\n/))&&1<r.length&&(n+=" "+window.btoa("stack1: "+r[1]+"stackn: "+r[r.length-1]))),this.diag&&this.diag.fire("SUBSCRIBER_ERROR",function(){a.fire("AdError",["Error occurred when firing ".concat(e," event handlers: ").concat(t.message)],i)},e+" event handlers: "+n))}},{key:"getProviders",value:function(){return this.pixelProviders}}])&&a(e.prototype,i),n&&a(e,n),t}()},{"../util/fire.js":32,"./providers/index.js":24,async:4}],22:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventPixelMap={},this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){var i=this;this.adParams=e.adParams,this.adParams.pixels.forEach(function(e){var t=e.event,e=e.url;t&&e&&"progress"!==t&&(i.eventPixelMap[t]=i.eventPixelMap[t]||[],i.eventPixelMap[t].push(e))})}},{key:"getUris",value:function(e){return this.eventPixelMap[e]||[]}}])&&r(t.prototype,i),n&&r(t,n),e}()},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("../../diag"))&&n.__esModule?n:{default:n};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diag=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.diag=new r.default(e.adParams)}},{key:"getUris",value:function(e,t){if(this.diag){e=this.diag.getUrlByEvent(e);return e?[e]:[]}return[]}}])&&a(t.prototype,i),n&&a(t,n),e}()},{"../../diag":20}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){return{AdParamsProvider:new n.default(e),MoatProvider:new a.default(e),DiagProvider:new r.default(e),InsideVideoProvider:new o.default(e)}};var n=s(e("./ad_params")),r=s(e("./diag")),a=s(e("./moat")),o=s(e("./inside-video"));function s(e){return e&&e.__esModule?e:{default:e}}},{"./ad_params":22,"./diag":23,"./inside-video":25,"./moat":26}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("../../../lib/inside-video"))&&n.__esModule?n:{default:n};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.adParams=e.adParams;this.adParams.metadata;this.adParams&&(e.vpaidJSWrapper&&e.vpaidJSWrapper.videoSlot&&(e.adWHeight=e.vpaidJSWrapper.videoSlot.offsetHeight,e.adWidth=e.vpaidJSWrapper.videoSlot.offsetWidth,e.videoSlot=e.vpaidJSWrapper.videoSlot),e.slot&&(0,r.default)(e))}},{key:"getUris",value:function(e){return[]}}])&&a(t.prototype,i),n&&a(t,n),e}()},{"../../../lib/inside-video":1}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("../../../lib/moat"))&&n.__esModule?n:{default:n};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adParams=null}var t,i,n;return t=e,(i=[{key:"init",value:function(e){this.adParams=e.adParams;var t=this.adParams.metadata;this.adParams&&this.adParams.metadata&&(t={level1:"Yahoo!",level2:t.campaignID,level3:t.lineItemID,level4:t.creativeID,slicer1:t.publisherID,slicer2:t.sitePlacementID,sampling:"1.0",viewMode:"normal",zMoatAuctionID:t.auctionID,zMoatAdReqDomain:t.adRequestDomainName},e.slot&&(0,r.default)(e.vpaidJSWrapper,e.slot,t,"yahoovpaidtwoint215831825037"))}},{key:"getUris",value:function(e){return[]}}])&&a(t.prototype,i),n&&a(t,n),e}()},{"../../../lib/moat":2}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.expand=function(i,n,e){return e.forEach(function(e){var t;try{t=e.replacement(n)}catch(e){t="undefined"}i=i.replace(e.regex,t)}),i},i.xtraHacker=i.xtra=i.timeStamp=i.publisher=i.protocol=i.pageUrl=i.sitePlacementId=i.lineItemId=i.insertionOrderId=i.vpaidJSWrapperVersion=i.demandSourceId=i.creativeIdHacker=i.creativeId=i.adRequestDomainName=void 0;var n=e("./util/url.js");i.adRequestDomainName={regex:/##AD_REQUEST_DOMAIN_NAME##/gi,replacement:function(e){return String(e.metadata.adRequestDomainName)}},i.creativeId={regex:/(##|\[)CREATIVE_ID(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.creativeIdHacker={regex:/(##|\[)CREATIVE_ID_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.creativeId)}},i.demandSourceId={regex:/(\[)demand_source_id(\])/gi,replacement:function(e){return String(e.metadata.demandSourceId)}},i.vpaidJSWrapperVersion={regex:/(##|\[)VISTA_VERSION(##|\])/gi,replacement:function(e){return String(e.metadata.vpaidJSWrapperVersion)}},i.insertionOrderId={regex:/(##|\[)IO_ID(##|\])/gi,replacement:function(e){return String(e.metadata.insertionOrderId)}},i.lineItemId={regex:/(##|\[)LINE_ITEM_ID(##|\])/gi,replacement:function(e){return String(e.metadata.lineItemId)}},i.sitePlacementId={regex:/(##|\[)(SITE_PLACEMENT_ID|SITE_ID|SITE_PLACEMENT)(##|\])/gi,replacement:function(e){return String(e.metadata.sitePlacementId)}},i.pageUrl={regex:/(##|\[)PAGE_URL(##|\])/gi,replacement:function(e){return String((0,n.getTrueUrlInfo)().topUrl)}},i.protocol={regex:/(##|\[)PROTOCOL(##|\])/gi,replacement:function(e){return String(e.metadata.protocol)}},i.publisher={regex:/(##|\[)(PUBLISHER|PUBLISHER_ID)(##|\])/gi,replacement:function(e){return String(e.metadata.publisherId)}},i.timeStamp={regex:/(##|%|\[)TIMESTAMP(##|%|\])/gi,replacement:function(e){return(new Date).toUTCString()}},i.xtra={regex:/(##|\[)XTRA(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}},i.xtraHacker={regex:/(##|\[)XTRA_HACKER(##|\])/gi,replacement:function(e){return String(e.metadata.xtra)}}},{"./util/url.js":37}],28:[function(e,t,i){t.exports={vpaidJSWrapperVersion:"VISTA_1_2_VERSION"}},{}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=e("../constants.js");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=null,this.height=null,this.xPosition="",this.yPosition="",this.staticResourceUrl="",this.staticResourceType="",this.clickThroughUrl="",this.clickTrackingUrl="",this.viewTrackingUrl="",this.offset=null,this.duration=null}var t,i,n;return t=e,(i=[{key:"hasSupportedResource",value:function(){var e=(this.staticResourceType||"").toLowerCase();return this.staticResourceUrl&&-1!==r.IMAGE_TYPES.indexOf(e)}}])&&a(t.prototype,i),n&&a(t,n),e}()},{"../constants.js":19}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,a=(n=e("./util/fire.js"))&&n.__esModule?n:{default:n};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasCPVPixel=!1,this.events=[]}var t,i,n;return t=e,(i=[{key:"addListenerPercentage",value:function(e,t,i){this.events.push({offset:{percentage:t,time:1/0},callback:{method:e,context:i},uri:""})}},{key:"addURI",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:1/0,time:t},callback:{method:null,context:null},uri:e})}},{key:"addURIPercentage",value:function(e,t){this.hasCPVPixel=!0,this.events.push({offset:{percentage:t,time:1/0},callback:{method:null,context:null},uri:e})}},{key:"checkAndFire",value:function(t,e,i,n){var r=(t*=1.04)/e*100;this.events=this.events.filter(function(e){return!(e.offset.time<=t||e.offset.percentage<=r)||(e.uri&&(0,a.default)(e.uri),e.callback.method&&e.callback.method.apply(e.callback.context||null,i),!1)}),n&&n()}},{key:"hasProgressPixel",value:function(){return this.hasCPVPixel}}])&&r(t.prototype,i),n&&r(t,n),e}()},{"./util/fire.js":32}],31:[function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){return(new Date).getTime()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.startTime=a()}var t,i,n;return t=e,(i=[{key:"getCurrentTime",value:function(){return(a()-this.startTime)/1e3}}])&&r(t.prototype,i),n&&r(t,n),e}()},{}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){function n(){t&&t()}var r=new Image;r.onload=n,r.onerror=n,r.src=e}},{}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=(e=(e=(e=e.substring(0,-1===e.indexOf("#")?e.length:e.indexOf("#"))).substring(0,-1===e.indexOf("?")?e.length:e.indexOf("?"))).substring(e.lastIndexOf("/")+1,e.length)).substring(e.lastIndexOf(".")+1,e.length);if(e!==t&&t.length<5)return t}},{}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var i={},t=e&&e.match(/^\s*(\w+):/);t&&t[1]?i.protocol=t[1]:i.protocol="https";e=e&&e.split("?")[1];e&&e.split("&").forEach(function(e){var t=e.split("=");switch(t[0]){case"p":i.publisherId=t[1];break;case"s":i.sitePlacementId=t[1];break;case"l":i.lineItemId=t[1];break;case"ds":i.demandSourceId=t[1];break;case"ic":i.creativeId=t[1];break;case"x":i.xtra=t[1];break;case"au":i.auctionId=t[1];break;case"debug":i.debug="y"===t[1]}});return i}},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",i=0;return["?","#"].forEach(function(e){-1!==(i=t.indexOf(e))&&(t=t.substring(0,i))}),t}},{}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.timeToSec=function(e){if(""===e)return 0;e=e.split(".")[0];var t=0,i=e.split(":");i.reverse();for(var n=[1,60,3600],r=0;r<i.length;r++)t+=i[r]*n[r];return t}},{}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getTrueUrlInfo=function(){var e,t,i,n,r=window.location.href,a="0",o="",s="",u="",l="";if(window.self===window.top)l=s=r,u="noFrames";else if(a="1",function(){try{return void 0!==window.top.location.href}catch(e){return!1}}())o=window.parent.location.href,s=window.top.location.href,l=r+"||"+o+"||"+s,u="sameDomain";else if(function(){try{return void 0!==window.location.ancestorOrigins}catch(e){return!1}}()){for(e=window.location.ancestorOrigins,t=[],n=0;n<e.length;n+=1)t[n]=e[n];i=t.join("||"),l=r+"||"+i,o=t[0],s=t[t.length-1],u="ancestorOrigins"}else o=document.referrer,s=""!==o?o:r,l=r+"||"+o,u="referer";return{inIframe:a,currentUrl:r,parentUrl:o,topUrl:s,detectionMethod:u,domainChainString:l,encodedDomainChainString:encodeURIComponent(l)}},i.getVpaidJSWrapperUrl=function(){for(var e=document.getElementsByTagName("script")||[],t=null,i=0;i<e.length;i++){var n=e[i].getAttribute("src");if(n&&n.match(/\/vista\.js/)){t=n;break}}return t}},{}],38:[function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,i){(e=l(e)).forEach(function(e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e.style[t]=i[t])})}function n(e){return c(e,"String")}function r(e){return Array.isArray(e)||s(e)||u(e)}function s(e){return c(e,"HTMLCollection")}function u(e){return c(e,"NodeList")}function l(e){return null!=e?r(e)?e:[e]:[]}function c(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}Object.defineProperty(i,"__esModule",{value:!0}),i.removeFromParent=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},i.createElement=function(e,t){var i=null,n=null,r=null;for(n in i=document.createElement(e),t=t||{})Object.prototype.hasOwnProperty.call(t,n)&&null!==(r=t[n])&&("style"===n&&"object"===a(r)?o(i,r):i.setAttribute(n,Array.isArray(r)?r.join(" "):r));return i},i.setStyle=o,i.isString=n,i.isCollection=r,i.isHtmlCollection=s,i.isNodeList=u,i.toCollection=l,i.openLinkInNewTab=function(e){n(e)&&window.open(e,"_blank")}},{}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseXml=function(e){{if(void 0!==window.DOMParser)return(new window.DOMParser).parseFromString(e,"text/xml");if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}throw new Error("No XML parser found")}}},{}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=e("../util/fire.js"))&&n.__esModule?n:{default:n},a=e("../util/utils");function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.default=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.icon=e,this.url=this.icon&&this.icon.staticResourceUrl||"",this.adView=null,this.iconContainerEl=null,this.iconEl=null,this.isShowing=!1,this._iconEvents={}}var e,i,n;return e=t,(i=[{key:"showInAd",value:function(e){!this.isShowing&&this.icon&&this.icon.hasSupportedResource()&&(this.isShowing=!0,this.adView=e,this.iconContainerEl=this.createIconContainer(),function(){var e="string"==typeof this.icon.xPosition?this.icon.xPosition.toLowerCase():"",t="string"==typeof this.icon.yPosition?this.icon.yPosition.toLowerCase():"";switch(this.iconContainerEl.style.height="".concat(this.icon.height,"px"),this.iconContainerEl.style.width="".concat(this.icon.width,"px"),e){case"left":this.iconContainerEl.style.left="0px";break;case"right":this.iconContainerEl.style.right="0px";break;default:"number"==typeof this.icon.xPosition&&(this.iconContainerEl.style.left="".concat(this.icon.xPosition,"px"))}"bottom"===t?this.iconContainerEl.style.bottom="0px":this.iconContainerEl.style.top="".concat("number"==typeof this.icon.yPosition?this.icon.yPosition:0,"px")}.call(this),this.iconEl=this.createIcon(),e={height:"".concat(this.icon.height,"px"),width:"".concat(this.icon.width,"px")},(0,a.setStyle)(this.iconEl,e))}},{key:"onImageError",value:function(){(0,a.setStyle)(this.iconEl,{display:"none"})}},{key:"onIconClickTracking",value:function(e){e.stopPropagation(),(0,r.default)(this.icon.clickTrackingUrl)}},{key:"onIconClickThrough",value:function(e){e.stopPropagation(),(0,a.openLinkInNewTab)(this.icon.clickThroughUrl)}},{key:"onImageLoaded",value:function(){this.icon.clickThroughUrl&&(this.iconEl.addEventListener("click",this.onIconClickThrough.bind(this)),function(){var e="img:hover{ opacity: 0.6 }",t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),this.iconEl.appendChild(t)}.call(this)),this.icon.clickTrackingUrl&&this.iconEl.addEventListener("click",this.onIconClickTracking.bind(this)),this.iconContainerEl.appendChild(this.iconEl),this.adView.appendChild(this.iconContainerEl),this.icon.viewTrackingUrl&&r.default.call(this,this.icon.viewTrackingUrl)}},{key:"createIconContainer",value:function(){return(0,a.createElement)("div",{style:{position:"absolute",overflow:"hidden"}})}},{key:"createIcon",value:function(){var e,t,i=(0,a.createElement)("img",{style:{position:"absolute",cursor:"pointer"}});for(t in this._iconEvents=(o(e={},"load",this.onImageLoaded.bind(this)),o(e,"error",this.onImageError.bind(this)),e),this._iconEvents)i.addEventListener(t,this._iconEvents[t],!1);return i.src=this.url.replace(/\s+/g,""),i}},{key:"cleanUp",value:function(){if(this.iconEl)for(var e in this._iconEvents)this.iconEl.removeEventListener(e,this._iconEvents[e],!1);(0,a.removeFromParent)(this.iconContainerEl)}}])&&s(e.prototype,i),n&&s(e,n),t}()},{"../util/fire.js":32,"../util/utils":38}],41:[function(e,t,i){"use strict";var r=m(e("./config.js")),h=m(e("./diag.js")),o=m(e("./event/event_handler.js")),n=e("./util/url.js"),s=m(e("./util/getMediaFileType.js")),f=m(e("./ad_parser/index.js")),a=m(e("./util/query_params.js")),u=m(e("./util/clock.js")),l=m(e("./progress_events.js")),c=m(e("./vpaid_handler.js")),d=e("./constants.js"),p=m(e("./view/icon-element.js"));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){},b=(0,n.getVpaidJSWrapperUrl)(),w=(0,a.default)(b),n=function(){function n(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.videoSlot=null,this.adSlot=null,this.debug=w.debug||!1,this.initialized=!1,this.stopAdCalled=!1,this.errorTimeout=null,this.progressEvents=new l.default,this.eventHandler=new o.default,this.vpaidHandler=new c.default(this.eventHandler),this.diag=null,this.props=null,this.loadAdClock=null,this.startAdClock=null,this.adChoiceIcon=null,this.eventHandler.addInternalSubscriber(function(e){a._cleanUp()},"AdError"),window.onerror=function(e,t,i,n){var r=v({},d.DM_MSG.ERROR_MSG,e);b===t?a.diag&&a.diag.fire("VISTA_UNCAUGHT_ERROR",function(){return a._adError("Vista error occurred: "+e),!0},r):a.diag&&a.diag.fire("PUBLISHER_UNCAUGHT_ERROR",y,r)};var e=0,t=!1,i=!1;this.slotListeners={timeupdate:function(){0===e&&(!i&&0<a.videoSlot.currentTime&&(a._callEventSync("AdImpression"),i=!0),a._callEvent("AdRemainingTimeChange"),a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration))},play:function(){1===e&&(a.videoSlot.currentTime=0,e=2)},playing:function(){var e;t||(void 0!==a.videoSlot.src&&a.diag&&a.diag.adParams&&(a.diag.adParams.selectedFileType=(0,s.default)(a.videoSlot.src)),a.adChoiceIcon&&a.adSlot&&a.adChoiceIcon.showInAd(a.adSlot),e=a.startAdClock&&a.startAdClock.getCurrentTime()||-1,a.diag&&a.diag.fire("VISTA_AD_VIDEO_START",y,v({},d.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdStarted"),t=!0)},seeking:function(){0===e&&(e=1)},seeked:function(){2===e&&(e=0)},ended:function(){0===e&&a.progressEvents.checkAndFire(a.videoSlot.currentTime,a.videoSlot.duration,[],function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_COMPLETE"),a._callEvent("AdVideoComplete",[],function(){a.stopAdCalled||(a._cleanUp(),a._callEvent("AdStopped"))})})},loadstart:function(){a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),a.loadAdClock=new u.default,a.initialized&&a.videoSlot.networkState===HTMLMediaElement.NETWORK_NO_SOURCE&&a._adError("No valid video sources found")},loadedmetadata:function(){a._callEvent("AdDurationChange")},loadeddata:function(){var e=a.loadAdClock&&a.loadAdClock.getCurrentTime()||-1;a.diag&&a.diag.fire("VISTA_AD_VIDEO_LOADED",y,v({},d.DM_MSG.ELAPSED_TIME,e)),a._callEvent("AdLoaded")},canplay:function(){},click:function(){a._onClick()},contextmenu:function(e){e.preventDefault()},error:function(){var e=a.videoSlot.error&&a.videoSlot.error.code||"",t="";switch(e){case d.VIDEO_MEDIA_ERR.ABORTED:t="VIDEO_MEDIA_ERR_ABORTED";break;case d.VIDEO_MEDIA_ERR.NETWORK:t="VIDEO_MEDIA_ERR_NETWORK";break;case d.VIDEO_MEDIA_ERR.DECODE:t="VIDEO_MEDIA_ERR_DECODE";break;case d.VIDEO_MEDIA_ERR.SRC_NOT_SUPPORTED:t="VIDEO_MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:t="VIDEO_MEDIA_ERR_UNKNOWN"}a.diag&&a.diag.fire(t,function(){a._adError("Error occurred when playing video with code "+e)})}}}var e,t,i;return e=n,(t=[{key:"_callEventSync",value:function(e,t,i){this._callEvent(e,t,i,!0)}},{key:"_callEvent",value:function(e,t,i,n){(n?this.eventHandler.fireSync:this.eventHandler.fire).call(this.eventHandler,e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_setTrackingPixels",value:function(e){var r=this;e.forEach(function(e){var t=e.event,i=e.url;if(t&&i&&"progress"===t&&void 0!==e.offset){var n=e.offset;switch(n.type){case"time":r.progressEvents.addURI(i,n.offset);break;case"percentage":r.progressEvents.addURIPercentage(i,n.offset)}}})}},{key:"_setPlaybackEvents",value:function(){var e,t=this,i={AdVideoStart:0,AdVideoFirstQuartile:25,AdVideoMidpoint:50,AdVideoThirdQuartile:75};for(e in i)this.progressEvents.addListenerPercentage(function(e){return function(){t._callEvent(e)}}(e),i[e])}},{key:"_sortByBitrate",value:function(e,t){return t.bitrate-e.bitrate}},{key:"_sortByPlayability",value:function(e,t){var i={probably:2,maybe:1,"":0},e=i[e.isPlayable];return i[t.isPlayable]-e}},{key:"_sortByBitrateValidity",value:function(e,t,i){e=e.bitrate<=i?1:0;return(t.bitrate<=i?1:0)-e}},{key:"_videoChoiceSorter",value:function(i){var n=this;return function(e,t){return e.bitrate>i!=t.bitrate>i?n._sortByBitrateValidity(e,t,i):e.isPlayable!==t.isPlayable?n._sortByPlayability(e,t):n._sortByBitrate(e,t)}}},{key:"_selectVideo",value:function(e,t){var i=this,n=[];e.forEach(function(e){e.isPlayable=i.videoSlot.canPlayType(e.mimetype),n.push(e.mimetype)});e=e.filter(function(e){return""!==e.isPlayable});return e.length||this.diag&&this.diag.fire("NO_COMPATIBLE_VIDEO",y,v({},d.DM_MSG.MIME,n)),e.sort(this._videoChoiceSorter(t))[0]}},{key:"_setVideoSources",value:function(e,t,i){if(e){i=this._selectVideo(e,i);if(i)return this.diag&&this.diag.addServedBitrateInfo(i.bitrate),this.videoSlot.src=i.url,i.url}else this._adError("No videos")}},{key:"_setAdSize",value:function(e,t){this.videoSlot&&(this.videoSlot.width=e,this.videoSlot.height=t,this._callEvent("AdSizeChange"))}},{key:"_onClick",value:function(){var e;this.videoSlot.paused?(this.videoSlot.play(),this._callEvent("AdPlaying")):(e=this.props.adParameters.videoClicks.clickThrough,this._callEvent("AdClickThru",[e||null,"",!1]),window.open(e,"_blank"))}},{key:"_cleanUp",value:function(){if(this.videoSlot)for(var e in this.slotListeners)this.videoSlot.removeEventListener&&this.videoSlot.removeEventListener(e,this.slotListeners[e],!1);this.adSlot&&this.adChoiceIcon&&this.adChoiceIcon.cleanUp(),this.errorTimeout&&window.clearTimeout(this.errorTimeout),this.progressEvents=new l.default}},{key:"_readFeatures",value:function(e){var t=this;e.features.forEach(function(e){"debug"===e&&(t.debug=!0)})}},{key:"initAd",value:function(r,a,o,s,u,l){for(var c=this,d=new Array(arguments.length),e=0;e<arguments.length;++e)d[e]=arguments[e];var t="string"==typeof u?u:u.AdParameters;(0,f.default)(t,function(e,t){if(c.diag=new h.default(t),e)c._adError(e.message);else if(c.props={adExpanded:!1,adLinear:!0,adSkippableState:!1,adCompanions:"",adIcons:!1,adVolume:1},c.props.width=r,c.props.height=a,c.props.viewMode=o,c.props.desiredBitrate=s,c.videoSlot=l.videoSlot,c._videoSlotCanAutoPlay=l.videoSlotCanAutoPlay,c.diag.addDesiredBitrateInfo(s),c.videoSlot){void 0===c.videoSlot.volume&&(c.videoSlot.volume=c.videoSlot.muted?0:1),c.videoSlot.style&&(c.videoSlot.style.cursor="pointer");e=l.slot;if((c.adSlot=e)&&(e.style.cursor="pointer",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style["z-index"]="100"),c.videoSlot.autoplay=!1,c._readFeatures(t),c.props.adParameters=t,c.initialized=!0,c.eventHandler.init({adParams:t,vpaidJSWrapper:c,slot:e,diag:c.diag}),c.props.adParameters.pixels&&c._setTrackingPixels(c.props.adParameters.pixels),c.props.adParameters.sources){t=function(e){var t=null;e&&e.some(function(e){return-1<["application/javascript","application/x-javascript"].indexOf(e.mimetype)&&"VPAID"===e.apiFramework&&(t=e.url,!0)});return t}(c.props.adParameters.sources);if(function(e,t){if(e&&t)for(var i=0;i<t.length;i++){var n=t[i];if(""!==e.canPlayType(n.mimetype))return!0}return!1}(c.videoSlot,c.props.adParameters.sources)||null===t){for(var i in c._setPlaybackEvents(),c.slotListeners)c.videoSlot.addEventListener(i,c.slotListeners[i],!1);e&&(c.props.adParameters.icons&&c.props.adParameters.icons.length&&(c.adChoiceIcon=new p.default(c.props.adParameters.icons[0])),e.addEventListener("click",function(){c._onClick()})),c._setVideoSources(c.props.adParameters.sources,c.props.adParameters.debugData,s)?c.videoSlot.load():c._adError("NO_COMPATIBLE_VIDEO")}else{for(var n=0;n<d.length;++n)d[n]===u&&(d[n]={AdParameters:c.props.adParameters.thirdPartyAdParams});c.vpaidHandler.loadVPAIDAd(t,c.videoSlot,c.props,c.debug,c.diag,d,c.progressEvents)}}}else c.diag.fire("NO_VIDEO_SLOT",function(){c._adError("No video slot!")})})}},{key:"handshakeVersion",value:function(e){return"2.0"}},{key:"startAd",value:function(){var e=this;this.vpaidHandler.hasAd()?this.vpaidHandler.startAd():(this.diag&&this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new u.default,this.videoSlot.play(),this.errorTimeout=setTimeout(function(){e._adError("Ad playback timed out")},r.default.adPlaybackTimeout))}},{key:"stopAd",value:function(){var e;this.vpaidHandler.hasAd()?this.vpaidHandler.stopAd():(this.videoSlot&&this.videoSlot.pause(),this._cleanUp(),this.progressEvents=new l.default,this.stopAdCalled=!0,e=this.startAdClock&&this.startAdClock.getCurrentTime()||-1,this.diag&&this.diag.fire("VISTA_AD_VIDEO_STOP",y,v({},d.DM_MSG.ELAPSED_TIME,e)),this._callEvent("AdStopped"))}},{key:"setAdVolume",value:function(e){0<=e&&e<=1&&this.videoSlot&&(this.props.adVolume=e,this.vpaidHandler.hasAd()?this.vpaidHandler.setAdVolume(e):(0===this.videoSlot.volume&&0<e?this._callEvent("unmute"):0<this.videoSlot.volume&&0===e&&this._callEvent("mute"),this.videoSlot.volume=e,this._callEvent("AdVolumeChange")))}},{key:"getAdVolume",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdVolume():this.videoSlot?this.videoSlot.volume:void 0}},{key:"resizeAd",value:function(e,t,i){"fullscreen"!==(this.props.viewMode=i)&&(this.props.width=e,this.props.height=t),this.vpaidHandler.hasAd()?this.vpaidHandler.resizeAd(e,t,i):("fullscreen"!==this.props.viewMode&&"fullscreen"===i?this._callEvent("fullscreen"):"fullscreen"===this.props.viewMode&&"fullscreen"!==i&&this._callEvent("exitFullscreen"),this._setAdSize(e,t))}},{key:"pauseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.pauseAd():(this.videoSlot.pause(),this._callEvent("AdPaused"))}},{key:"resumeAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.resumeAd():(this.videoSlot.play(),this._callEvent("AdPlaying"))}},{key:"expandAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.expandAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!0}},{key:"getAdExpanded",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdExpanded():this.props.adExpanded}},{key:"getAdSkippableState",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdSkippableState():this.props.adSkippableState}},{key:"collapseAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.collapseAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!1}},{key:"skipAd",value:function(){this.vpaidHandler.hasAd()?this.vpaidHandler.skipAd():this.props.adSkippableState&&this._callEvent("AdSkipped")}},{key:"subscribe",value:function(e,t,i){this.eventHandler.addExternalSubscriber(e,t,i)}},{key:"unsubscribe",value:function(e,t){this.eventHandler.removeSubscriber(e,t)}},{key:"getAdWidth",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdWidth():this.videoSlot?this.props.width:void 0}},{key:"getAdHeight",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdHeight():this.videoSlot?this.props.height:void 0}},{key:"getAdRemainingTime",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration-this.videoSlot.currentTime}},{key:"getAdDuration",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration}},{key:"getAdCompanions",value:function(){return this.props.adCompanions}},{key:"getAdIcons",value:function(){return this.props.adIcons}},{key:"getAdLinear",value:function(){return this.vpaidHandler.hasAd()&&(this.props.adLinear=this.vpaidHandler.getAdLinear()),this.props.adLinear}}])&&g(e.prototype,t),i&&g(e,i),n}();var A,a=(A=new n,function(){return A});"undefined"!=typeof TEST&&TEST&&(a.Vista=n),t.exports=a},{"./ad_parser/index.js":12,"./config.js":18,"./constants.js":19,"./diag.js":20,"./event/event_handler.js":21,"./progress_events.js":30,"./util/clock.js":31,"./util/getMediaFileType.js":33,"./util/query_params.js":34,"./util/url.js":37,"./view/icon-element.js":40,"./vpaid_handler.js":42}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=n(e("./config.js")),r=n(e("./util/getMediaFileType.js")),l=n(e("./util/clock.js")),a=e("./constants.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],d=["AdSkipped","AdLinearChange","AdExpandedChange","AdSkippableStateChange","AdDurationChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdInteraction","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdUserAcceptInvitation","AdUserMinimize","AdUserClose"],h=function(){};i.default=function(){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventHandler=e,this.iFrame,this.adUnit,this.adDuration,this.stopped=!1,this.insideJsWorkAround={waitingForAdVideoComplete:!1,receivedAdStop:!1},this.videoSlot=null,this.debug=null,this.props=null,this.diag=null,this.progressEvents=null,this.timeouts={load:null,handshake:null,initAd:null,startAd:null,pauseAd:null,resumeAd:null,stopAd:null},this.adPlayingState=null,this.loadAdClock=null,this.startAdClock=null,this.adEventCBs={AdLoaded:function(){clearTimeout(n.timeouts.initAd);var e=n.loadAdClock&&n.loadAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_LOADED",h,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdLoaded")},AdStarted:function(){n.adPlayingState="AdPlaying",clearTimeout(n.timeouts.startAd),void 0!==n.videoSlot.src&&n.diag&&n.diag.adParams&&(n.diag.adParams.selectedFileType=(0,r.default)(n.videoSlot.src)),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n.adDuration=n.adUnit.getAdDuration(),-1===n.adDuration?n.diag.fire("AD_DURATION_NOT_SUPPORTED"):n.progressEvents.hasProgressPixel()&&n._progressEventCron();var e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1;n.diag.fire("VISTA_AD_VIDEO_START",h,o({},a.DM_MSG.ELAPSED_TIME,e)),n._callEvent("AdStarted")},AdStopped:function(){var e;n.insideJsWorkAround.waitingForAdVideoComplete?n.insideJsWorkAround.receivedAdStop=!0:(n.adPlayingState="AdStopped",clearTimeout(n.timeouts.stopAd),n.stopped||(n.stopped=!0,n._callEvent("AdStopped"),e=n.startAdClock&&n.startAdClock.getCurrentTime()||-1,n.diag.fire("VISTA_AD_VIDEO_STOP",h,o({},a.DM_MSG.ELAPSED_TIME,e))))},AdLog:function(e){n._callEvent("AdLog",e)},AdSizeChange:function(){"fullscreen"!==n.props.viewMode&&(n.props.width>n.videoSlot.width||n.props.height>n.videoSlot.height)&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdSizeChange")},AdPaused:function(){clearTimeout(n.timeouts.pauseAd),n.videoSlot.paused||n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPaused")},AdPlaying:function(){clearTimeout(n.timeouts.resumeAd),n.videoSlot.paused&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdPlaying")},AdVolumeChange:function(){n.props.adVolume!==n.adUnit.getAdVolume()&&n.diag.fire("VPAID_STATE_INCONSISTENCY"),n._callEvent("AdVolumeChange")},AdDurationChange:function(){n.adDuration=n.adUnit.getAdDuration(),n._callEvent("AdDurationChange")},AdClickThru:function(e,t,i){e=e||(e||n.props.adParameters.videoClicks.clickThrough),n._callEventSync("AdClickThru",[e||null,t||"",i])},AdVideoComplete:function(){0<n.adDuration&&(n.insideJsWorkAround.waitingForAdVideoComplete=!0,n.progressEvents.checkAndFire(n.adDuration,n.adDuration,[],function(){n.diag.fire("VISTA_AD_VIDEO_COMPLETE"),n._callEvent("AdVideoComplete",[],function(){n.insideJsWorkAround.waitingForAdVideoComplete&&(n.insideJsWorkAround.receivedAdStop?(n.insideJsWorkAround.waitingForAdVideoComplete=!1,n.insideJsWorkAround.receivedAdStop=!1,n.adEventCBs.AdStopped()):n.insideJsWorkAround.waitingForAdVideoComplete=!1)})}))},AdError:function(e){n.diag.fire("VPAID_INTERNAL_ERROR",function(){n._callEvent("AdError",e)},o({},a.DM_MSG.ERROR_MSG,e))}},d.forEach(function(e){n.adEventCBs[e],n.adEventCBs[e]=function(){n._callEvent(e)}})}var e,i,n;return e=t,(i=[{key:"_callEventSync",value:function(e,t,i){this.eventHandler.fireSync(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_callEvent",value:function(e,t,i){this.eventHandler.fire(e,t,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},i)}},{key:"_progressEventCron",value:function(){var t=setInterval(function(){this.adDuration=this.adUnit.getAdDuration();var e=this.adUnit.getAdRemainingTime();0<=e&&(e=this.adDuration-e,this.progressEvents.checkAndFire(e,this.adDuration),e>=this.adDuration&&clearInterval(t)),this._callEvent("AdRemainingTimeChange")}.bind(this),250)}},{key:"_adError",value:function(e){this._callEvent("AdError",[e])}},{key:"_fireDiagError",value:function(e){var t=this;this.diag.fire(e,function(){return t._adError(e)})}},{key:"_subscribeAdEvents",value:function(e){for(var t in this.adEventCBs)this.adUnit.subscribe(this.adEventCBs[t],t,this)}},{key:"loadVPAIDAd",value:function(i,e,t,n,r,a,o){var s=this;this.videoSlot=e,this.props=t,this.debug=n,this.diag=r,this.progressEvents=o,this.diag.fire("VISTA_AD_VIDEO_LOADED_STARTING"),this.loadAdClock=new l.default,this.iFrame=document.createElement("iframe"),this.iFrame.id="3rd-party-vpaid-frame",this.iFrame.setAttribute("style","border:0 none"),this.iFrame.setAttribute("width","100%;"),this.iFrame.setAttribute("height","100%;"),this.iFrame.onload=function(){var e=s.iFrame.contentWindow.document,t=e.createElement("script");s.timeouts.load=setTimeout(function(){s._fireDiagError("VPAID_LOAD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),t.onload=function(){clearTimeout(s.timeouts.load);var t,e=s.iFrame.contentWindow.getVPAIDAd;e&&"function"==typeof e?(s.adUnit=e(),s.timeouts.handshake=setTimeout(function(){s.diag.fire("VPAID_HANDSHAKE_TIMEOUT",function(){s._adError("handshake timed out")})},u.default.vpaidCreativeMethodTimeout),e=s.adUnit.handshakeVersion("2.0"),clearTimeout(s.timeouts.handshake),t=s.adUnit,c.every(function(e){e=t[e];return e&&"function"==typeof e})?(e=e)&&2<=parseFloat(e)?(s._subscribeAdEvents(s.adUnit),s.timeouts.initAd=setTimeout(function(){s.diag.fire("VPAID_INIT_AD_TIMEOUT",function(){s._adError("initAd timed out")})},u.default.vpaidCreativeMethodTimeout),s.adUnit.initAd.apply(s.adUnit,a)):s._fireDiagError("VPAID_HANDSHAKE_FAIL"):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")):s._fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")},t.onerror=function(e){clearTimeout(s.timeouts.load),s._fireDiagError("VPAID_LOAD_ERROR")},t.src=i,t.type="text/javascript",e.body.appendChild(t)},document.body.appendChild(this.iFrame)}},{key:"hasAd",value:function(){return!!this.adUnit}},{key:"startAd",value:function(){var e=this;"AdPlaying"!==this.adPlayingState&&(clearTimeout(this.timeouts.startAd),this.timeouts.startAd=setTimeout(function(){e.diag.fire("VPAID_START_AD_TIMEOUT",function(){e._adError("startAd timed out")})},u.default.vpaidCreativeMethodTimeout),this.diag.fire("VISTA_AD_VIDEO_START_STARTING"),this.startAdClock=new l.default,this.adUnit.startAd())}},{key:"resizeAd",value:function(e,t,i){this.adUnit.resizeAd(e,t,i)}},{key:"stopAd",value:function(){var e=this;clearTimeout(this.timeouts.stopAd),this.timeouts.stopAd=setTimeout(function(){e.diag.fire("VPAID_STOP_AD_TIMEOUT",function(){e._adError("stopAd timed out")})},u.default.vpaidCreativeMethodTimeout),this.adUnit.stopAd()}},{key:"pauseAd",value:function(){var e=this;clearTimeout(this.timeouts.pauseAd),this.timeouts.pauseAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),this.adUnit.pauseAd()}},{key:"resumeAd",value:function(){var e=this;clearTimeout(this.timeouts.resumeAd),this.timeouts.resumeAd=setTimeout(function(){e.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT")},u.default.vpaidCreativeMethodTimeout),this.adUnit.resumeAd()}},{key:"expandAd",value:function(){this.adUnit.expandAd()}},{key:"collapseAd",value:function(){this.adUnit.collapseAd()}},{key:"skipAd",value:function(){this.adUnit.skipAd()}},{key:"getAdLinear",value:function(){return this.adUnit.getAdLinear()}},{key:"getAdWidth",value:function(){return this.adUnit.getAdWidth()}},{key:"getAdHeight",value:function(){return this.adUnit.getAdHeight()}},{key:"getAdExpanded",value:function(){return this.adUnit.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.props.adSkippableState=this.adUnit.getAdSkippableState(),this.props.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.adUnit.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.adUnit.getAdDuration()}},{key:"setAdVolume",value:function(e){this.adUnit.setAdVolume(e)}},{key:"getAdVolume",value:function(){return this.adUnit.getAdVolume()}},{key:"getAdCompanions",value:function(){return this.adUnit.getAdCompanions()}},{key:"getAdIcons",value:function(){return this.adUnit.getAdIcons()}}])&&s(e.prototype,i),n&&s(e,n),t}()},{"./config.js":18,"./constants.js":19,"./util/clock.js":31,"./util/getMediaFileType.js":33}]},{},[41])(41)});
//# sourceMappingURL=vista-2-1-59.js.map