YUI.add("af-sync",function(e){"use strict";var r=e.Af.Transport,o=e.Object.owns;function t(){}t._NON_ATTRS_CFG=["resource","readonly","consolidate","syncContext","postForRead","crumbForGET"],t.prototype={resource:"",consolidate:!0,readonly:!1,syncContext:{},postForRead:!1,crumbForGET:!0,initializer:function(e){o(e=e||{},"resource")&&(this.resource=e.resource||"")},sync:function(){var r,o,t,c=this,s=arguments[0];arguments[1]===c?(((r=arguments[2]).error||r.success)&&(t=function(e,o){e?r.error&&r.error(e):r.success&&r.success(o)}),o={},e.Object.each(r,function(e,r){"error"!==r&&"success"!==r&&"parse"!==r&&(o[r]=e)}),c._sync(s,o,t)):c._sync.apply(c,arguments)},_sync:function(t,c,s){var n,a,i,u,d,f={},p=this;if(p.readonly&&"read"!==t)return s("Read-only");switch(c&&(o(c,"resource")||o(c,"params")||o(c,"context")||(c={params:c})),n=c.resource||p.resource,(i=e.Af.Utils.objectMerge({config:{consolidate:!!p.consolidate,post_for_read:p.postForRead,crumbForGET:p.crumbForGET}},p.syncContext,c.context)).config.id_param=u=p.idAttribute||"id",(d=p.get(p.idAttribute||"id"))&&(f[u]=d),f=e.merge(f,c.params),t){case"create":case"update":return a=c.body||p.toJSON(),void r[t](n,f,a,i,s);case"read":case"delete":return void r[t](n,f,i,s);default:s("Invalid action: "+t)}}},e.namespace("Af").Sync=t},"@VERSION@",{requires:["af-transport","af-utils"]});