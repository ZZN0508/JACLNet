/** @license: OpenAdViewability (BSD-3 License): https://github.com/picatcha/OpenAdViewability/ */
!function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(){this.getViewabilityState=function(t,e){var n,i=c();if(i.area===1/0)return{error:"Failed to determine viewport"};var o=t.getBoundingClientRect(),r=o.width*o.height,a=l(window.top),d=u(t,e);return n=i.area/r<.5?Math.floor(100*i.area/r):(d.bottom>a.height&&(d.height-=d.bottom-a.height),d.top<0&&(d.height+=d.top),d.left<0&&(d.width+=d.left),d.right>a.width&&(d.width-=d.right-a.width),Math.floor(d.width*d.height*100/r)),{clientWidth:a.width,clientHeight:a.height,objTop:o.top,objBottom:o.bottom,objLeft:o.left,objRight:o.right,percentViewable:n}};var c=function(){for(var t=l(window),e=t.area,n=window;n!==window.top;){n=n.parent;var i=l(n);i.area<e&&(e=i.area,t=i)}return t},l=function(t){var e={width:1/0,height:1/0,area:1/0};return!isNaN(t.document.body.clientWidth)&&0<t.document.body.clientWidth&&(e.width=t.document.body.clientWidth),!isNaN(t.document.body.clientHeight)&&0<t.document.body.clientHeight&&(e.height=t.document.body.clientHeight),t.document.documentElement&&t.document.documentElement.clientWidth&&!isNaN(t.document.documentElement.clientWidth)&&(e.width=t.document.documentElement.clientWidth),t.document.documentElement&&t.document.documentElement.clientHeight&&!isNaN(t.document.documentElement.clientHeight)&&(e.height=t.document.documentElement.clientHeight),t.innerWidth&&!isNaN(t.innerWidth)&&(e.width=Math.min(e.width,t.innerWidth)),t.innerHeight&&!isNaN(t.innerHeight)&&(e.height=Math.min(e.height,t.innerHeight)),e.area=e.height*e.width,e},u=function t(e,n){var i=n,o=n.parent,r={width:0,height:0,left:0,right:0,top:0,bottom:0};if(e){var a=h(e,n);if(a.width=a.right-a.left,a.height=a.bottom-a.top,r=a,i!==o){var d=t(i.frameElement,o);d.bottom<r.bottom&&(d.bottom<r.top&&(r.top=d.bottom),r.bottom=d.bottom),d.right<r.right&&(d.right<r.left&&(r.left=d.right),r.right=d.right),r.width=r.right-r.left,r.height=r.bottom-r.top}}return r},h=function t(e,n){var i=n,o=n.parent,r={left:0,right:0,top:0,bottom:0};if(e){var a=e.getBoundingClientRect();i!==o&&(r=t(i.frameElement,o)),r={left:a.left+r.left,right:a.right+r.left,top:a.top+r.top,bottom:a.bottom+r.top}}return r}}!function(l,u,o){function t(){}l.console=l.console||{log:t,warn:t,error:t,dir:t},Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(e=n[r],t.call(o,e,r,n))return r;return-1}),Array.prototype.filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e,n,i,o=Object(this),r=o.length>>>0,a=[];if("function"!=typeof t)throw new TypeError;for(a=[],e=2<=arguments.length?arguments[1]:void 0,n=0;n<r;n++)n in o&&(i=o[n],t.call(e,i,n,o)&&a.push(i));return a}),l.requestAnimFrame=l.requestAnimFrame||l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(t){l.setTimeout(t,1e3/60)},l.cancelAFrame=l.cancelAnimationFrame||l.webkitCancelAnimationFrame||l.mozCancelAnimationFrame||l.oCancelAnimationFrame||function(t){l.clearTimeout(t)};var e=!1;function n(){}function i(){e||"loading"===u.readyState||(e=!0,l.setTimeout(function(){r(u)},0))}function r(t){var e,n,i,o,r=[],a=[],d=t.querySelectorAll("ins.adsbyfalcon");for(e=0,n=d.length;e<n;e++){var c,l=d[e],u=l.getAttribute("data-ad-slot"),h=E(l.getAttribute("data-ad-sizes")),s=l.getAttribute("data-merge-position"),f=l.getAttribute("data-next-position"),m=l.getAttribute("data-next-merge-position"),p=l.offsetWidth||0,g=l.offsetHeight||0;if(u&&!S(l,"processing")&&!M(l)){if(r.push(u),h&&(u=(c=w((i=y(h),void 0,o=v(),i.concat([o])).sort(_)))?c.slot:u),2199==u||1101==u||2268==u){var b=[{id:u,width:p,height:g,element:l,mergePosition:s}];A(l),x(b);continue}a.push({id:u,width:p,height:g,element:l,mergePosition:s,nextPosition:f,nextMergePosition:m}),A(l)}}r.length&&x(a)}function w(t){var e,n=v().width;if(1===(e=t.filter(function(t){return n>=t.width})).length)return(e=(e=t.reverse().slice(0,2)).filter(function(t){return{}.hasOwnProperty.call(t,"slot")}))[0];var i,o,r=e.findIndex(function(t){return!t.slot&&t.width===n}),a=r-1,d=r+1,c=t[r].width;return 0===r?e[1]:e.length-1===r?e[a]:(i=e[a].width,o=e[d].width,Math.abs(o-c)<Math.abs(i-c)?e[d]:e[a])}function v(){var t=Math.max(l.innerWidth,u.documentElement.clientWidth);return 793<=t&&t<=807&&(t=800),1017<=t&&t<=1031&&(t=1024),{width:t,height:Math.max(l.innerHeight,u.documentElement.clientHeight)}}function y(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push({resolution:e,slot:t[e],width:Math.floor(e.match(/^\d+/)[0]),height:Math.floor(e.match(/\d+$/)[0])});return n}function _(t,e){return t.width!==e.width?e.width>t.width?1:e.width<t.width?-1:0:e.height>t.height?1:e.height<t.height?-1:0}function a(t,e){(l._piq||[]).push(["trackEvent",t,e])}function h(t,e){var n=e.ad_list[0].type,i=e.ad_list[0].hashid;"3542"===e.ad_list[0].position_id&&a("slideopen-ad-sales_3542_336-280",t+"_"+n+"_desktop_"+i+"_v0"),"3342"===e.ad_list[0].position_id&&a("inread-ad-adn_3342_336-280",t+"_"+n+"_desktop_"+i+"_v0"),"2982"===e.ad_list[0].position_id&&a("backdrop-ad-sales_2982_336-280",t+"_"+n+"_mobile_"+i+"_v0"),"3372"===e.ad_list[0].position_id&&a("inread-ad-adn_3372_336-280",t+"_"+n+"_mobile_"+i+"_v0")}function s(t,e,n,i){if("false"===t.getAttribute("data-embed"))return t.innerHTML=i,void function t(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(d(e),e),e;var n=0,i=e.childNodes;l.pix&&"INS"===e.tagName&&e&&e.classList&&e.classList.add("pixnet-ad");for(;n<i.length;)t(i[n++]);return e}(t);l.pix&&t&&t.classList&&t.classList.add("pixnet-ad");var o=u.createElement("iframe"),r="margin:0;padding:0;overflow:hidden;background-color:transparent;";o.setAttribute("allowfullscreen","auto"),o.setAttribute("style",r+"border:none;width:"+e+"px;height:"+n+"px;"),o.setAttribute("scrolling","no"),t.innerHTML="",t.appendChild(o),o.contentDocument.open(),o.contentDocument.write(i),o.contentDocument.body&&o.contentDocument.body.setAttribute("style",r),o.contentDocument.close()}function d(t){var e=u.createElement("script");e.text=t.innerHTML;for(var n=t.attributes.length-1;0<=n;n--)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e}function x(e){var t,n="11"!==g("preview_mib_fly_mobile_image_ad")?g("demo_ad_no"):"75ecc55cd322ced48ae2d4c7717a0891",i=n?"&demo_ad_no="+n:"",o=m("falcon:blogcategory"),r=m("falcon:articlecategory"),a=l.location.origin.match(/(\.[0-9a-z_]+\.(alpha|test)\.pixnet(\.work)?$)/)||"",d="https";a&&(d="http",a=a[0]),t=d+"://"+(function(){for(var t=u.getElementsByTagName("script"),e=/\/\/([^.]*falcon)-asset\.pixfs\.net/g,n=0,i=t.length;n<i;n++){var o=e.exec(t[n].getAttribute("src"));if(o)return o[1]}}()||"falcon")+".pixnet.net"+a+"/ad/json?"+function(t){for(var e="",n=0,i=t.length;n<i;n++)e=e+f(t[n])+(n!==i-1?"&":"");return e}(e)+"&version=2&sdk_version=20210415v1&t="+(new Date).getTime()+i,o&&(t+="&blog_category="+o),r&&(t+="&article_category="+r),u.referrer&&(t+="&referrer="+encodeURI(u.referrer));var c=new XMLHttpRequest;l.XDomainRequest&&((c=new XDomainRequest).onprogress=function(){},c.ontimeout=function(){},c.onerror=function(){}),c.onload=function(){var t=E(this.responseText);(function(t){return t&&t instanceof Array})(t.ad_slots)&&t.ad_slots.length&&function(t,e){for(;e.length;){for(var n=e.shift(),i=t.shift();n.pos_id!==i.id;)i=t.shift();if(i&&!M(i.element)){if(0===n.ad_num){if(!i.nextPosition){var o=i.element.getAttribute("data-ad-passback");if(""!=o&&"function"==typeof l[o]){p(i.element),l[o](i.element);continue}i.element.parentNode.removeChild(i.element),-1!==["3869","3879","3874","3884"].indexOf(i.id)&&q(l,"activateInReadSticky")}"1101"!==i.id&&"2199"!==i.id&&"2268"!==i.id||(u.querySelector("#main > .header-fixed-area").style.display="none"),i.nextPosition&&(i.id=i.nextPosition,i.mergePosition=i.nextMergePosition,i.nextPosition="",i.nextMergePosition="",x([i]));continue}if(h("load",n),("2982"===i.id&&0<n.ad_list.length&&"3372"===n.ad_list[0].position_id||"3372"===i.id)&&i.element.parentNode&&i.element.parentNode.classList.contains("in-read-ad--sticky")&&i.element.parentNode.parentNode.classList.remove("disable-sticky"),"2982"===i.id&&0<n.ad_list.length&&"2982"===n.ad_list[0].position_id&&l.location.hostname==="falcondemo.pixnet.net"+pix.domain_append&&"on"===g("is_ignore_backdrop"))continue;s(i.element,i.width,i.height,n.html),p(i.element),void 0!==l.pix&&(("3869"===n.pos_id||"3879"===n.pos_id||"3874"===n.pos_id||"3983"===n.pos_id)&&0<n.ad_list.length&&"js"===n.ad_list[0].type?(r=n,void 0,(new Image).src=r.ad_list[0].activeview_url):b(i.element,n))}}var r}(e,t.ad_slots)},c.addEventListener&&c.addEventListener("error",function(){},!1),c.open("get",t,!0),c.withCredentials=!0,c.send()}function f(t){var e="";return t.mergePosition&&(e=","+t.mergePosition),"pos[]="+t.id+","+t.width+","+t.height+e}function m(t){var e=u.querySelector('meta[property="'+t+'"]');return e&&e.getAttribute("content")}function A(t){return c(t,"processing")}function M(t){return S(t,"done")}function p(t){return c(t,"done")}function S(t,e){return!!t&&e===t.getAttribute("data-adsbyfalcon-status")}function c(t,e){return!!t&&t.setAttribute("data-adsbyfalcon-status",e)}function E(t){try{return JSON.parse(t)}catch(t){return{}}}function g(t){if(!t)return"";for(var e=l.location,n=(e.search.substring(1)||e.hash.split("?")[1]||"").split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]===t)return decodeURIComponent(o[1].replace(/\+/g," "))}return""}function b(n,i){var o=n.querySelector("[data-falcon-ad], [data-falcon-ad-video]")||n.querySelector("img, iframe"),r=function(t){return!!t.match(/backdrop/)}(n.innerHTML),a=function(t){return!!t.match(/oneadIRDFPTag/)}(n.innerHTML),d=function(t){return!!t.match(/truvid/)}(n.innerHTML),t=function(t){return!!t.match(/popIn_recommend/)}(n.innerHTML),c="load";!t||o?o?0!==i.ad_list.length&&(n.querySelector("[data-falcon-ad-video]")&&(c="loadedmetadata"),o.addEventListener(c,function t(){var e=n.querySelector("[data-falcon-ad-container]")||o;r&&(e=n.querySelector("div[data-type]")),a&&(e=n.querySelector("#video_click_area0")),d&&(e=n.querySelector(".trvd_video_player")),N(e,i),o.removeEventListener(c,t,!1)})):n.addEventListener("DOMSubtreeModified",function t(){(n.querySelector("[data-falcon-ad], [data-falcon-ad-video]")||n.querySelector("img, iframe"))&&(b(n,i),n.removeEventListener("DOMSubtreeModified",t,!1))}):n.addEventListener("DOMSubtreeModified",function t(){n.removeEventListener("DOMSubtreeModified",t,!1),N(n,i)})}function N(t,e){var n=e.ad_list[0].activeview_url,i=new o;n&&i.checkViewability(t,function(t){t.viewabilityStatus&&((new Image).src=n,h("view",e))})}function q(t,e){var n=u.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}u.addEventListener("readystatechange",i),l.PIXFalcon=(n.prototype.placeAds=function(t){var e,n,i;if(u!==t){if(0!==(n=(e=u.querySelectorAll(t)).length))for(i=0;i<n;i++)r(e[i])}else r(u)},n.prototype.placeAdByNode=function(t){r(t)},n),i()}(window,document,function(){var m={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0};this.DEBUG_MODE=!1,this.checkViewability=function(o,r){var a=l(),d=this,c=window.requestAnimFrame(function t(){h(o)||(a=l(),u());var e=l()-a;var n=o.querySelector("[data-falcon-ad-video]")?2e3:1e3;var i=n<=e;m.duration=e;i?(m.viewabilityStatus=!0,d.DEBUG_MODE||window.cancelAFrame(c)):c=window.requestAnimFrame(t);r(m)});function l(){return"object"===t(window.performance)?window.performance.now():(new Date).getTime()}};var u=function(){m.percentObscured=0,m.duration=0,m.viewabilityStatus=!1},h=function(t){var e=t.getBoundingClientRect();return 242500<=e.width*e.height&&(m.acceptedViewablePercentage=30),!i(t)&&(!o(t)&&(!n(t).error&&(!(m.percentViewable&&m.percentViewable<m.acceptedViewablePercentage)&&m.percentViewable)))},n=function(t){var e=new a;m.percentObscured=m.percentObscured||0;var n=e.getViewabilityState(t,window);return n.error||(m.percentViewable=n.percentViewable-m.percentObscured),n},i=function(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("visibility"),i=e.getPropertyValue("display");return"hidden"===n||"none"===i},o=function(t){var e=t.getBoundingClientRect(),n=e.left+12,i=e.right-12,o=Math.max(0,e.top+12),r=e.bottom-12,a=Math.floor(e.left+e.width/2),d=Math.floor(e.top+e.height/2),c=[{x:n,y:o},{x:a,y:o},{x:i,y:o},{x:n,y:d},{x:a,y:d},{x:i,y:d},{x:n,y:r},{x:a,y:r},{x:i,y:r}],l=[];for(var u in c)if(c.hasOwnProperty(u)&&c[u]&&0<=c[u].x&&0<=c[u].y){var h=document.elementFromPoint(c[u].x,c[u].y);if(g(t,h)){var s=h.getBoundingClientRect();if(e.top>s.bottom)continue;var f=b(e,s);if(0<f&&(p(l,h)||l.push({el:h,area:f}),m.percentObscured>100-m.acceptedViewablePercentage))return!0}}return m.percentObscured=0<l.length?100*l.map(function(t){return t.area}).reduce(function(t,e){return Math.max(t,e)}):0,m.percentViewable=100-m.percentObscured,!1},p=function(t,e){return 0<t.length&&t.map(function(t){return t.el}).some(function(t){return t===e})},g=function(t,e){return null!==e&&t!==e&&!t.contains(e)&&!e.contains(t)&&!r(t,e)},r=function(t,e){var n=e.nodeName,i=window.getComputedStyle(e,null),o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),a=o.top===r.top&&o.bottom===r.bottom&&o.left===r.left&&o.right===r.right&&o.height===r.height&&o.width===r.width;return 0===e.childNodes.length&&("DIV"===n||"SPAN"===n)&&"none"===i.backgroundImage&&"none"===i.borderStyle&&"rgba(0, 0, 0, 0)"===i.backgroundColor&&a},b=function(t,e){var n=t.width*t.height;return Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top))/n}})}();