/*! For license information please see bfa.54b3345e900b22ee9528.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}));var r=n(17),i=n(62);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.properties,r=void 0===n?["any"]:n,i=["transitionend","webkitTransitionEnd","mozTransitionEnd","oTransitionEnd"],a={},o=[];function s(e){"any"in a?a.any(e):e.propertyName in a&&a[e.propertyName](e)}r.forEach((function(e){var t,n=new Promise((function(e){return t=e}));o.push(n),a[e]=t})),i.forEach((function(t){return e.addEventListener(t,s)}));var c=Promise.all(o);return c.unsubscribe=function(){i.forEach((function(t){return e.removeEventListener(t,s)}))},c.then(c.unsubscribe),c}function o(e,t,n){var i=e.getBoundingClientRect(),a=r.a.getViewportHeight();n=n||0;var o=0-(t=t||0),s=a+t,c={top:i.top-n,bottom:i.bottom-n};return{isHidden:function(){return!e.offsetParent},isWithinViewport:function(){return c.top>=0&&c.bottom<=a},isWithinLookahead:function(){return c.top>=o&&c.bottom<=s},isPartiallyInViewport:function(){return c.top>=0&&c.top<=a||c.bottom>0&&c.bottom<a},isPartiallyInLookahead:function(){return c.top>0?c.top<t+a:c.bottom>0||Math.abs(c.bottom)<t},isNearBottom:function(){return parseInt(i.bottom,10)<=t}}}n.d(t,"a",(function(){return i.a})),"undefined"!=typeof document&&(function(){if(!(document.createElementNS("http://www.w3.org/2000/svg","g").classList instanceof DOMTokenList))try{Object.defineProperty(SVGElement.prototype,"classList",Object.getOwnPropertyDescriptor(HTMLElement.prototype,"classList")||Object.getOwnPropertyDescriptor(Element.prototype,"classList"))}catch(e){}}(),function(){try{var e=document.createElement("div");if(e.classList.add("foo","bar"),e.classList.contains("bar"))return;var t=DOMTokenList.prototype.add,n=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var e=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(n){return t.call(e,n)}))},DOMTokenList.prototype.remove=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach((function(t){return n.call(e,t)}))}}catch(e){}}()),"undefined"!=typeof NodeList&&(NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach)),t.b={stringToHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes},arrayFromNodeList:function(e){return[].slice.call(e)},withNodeList:function(e,t){return"string"==typeof e&&(e=this.stringToHTML(e)),e instanceof HTMLElement&&(e=[e]),(e instanceof NodeList||Array.isArray(e))&&Array.prototype.slice.call(e).forEach((function(e){return t(e)})),this},append:function(e,t){void 0===t&&(t=e,e=document.body);return this.withNodeList(t,(function(t){return e.appendChild(t)}))},prepend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;void 0===t&&(t=e,e=document.body);var r=e.children[n],i=function(t){return e.insertBefore(t,r)};return this.withNodeList(t,i)},remove:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t instanceof Element&&t.parentNode&&e.push(t.parentNode.removeChild(t))})),e},find:function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))},findOne:function(e,t){return e.querySelector(t)},closest:function(e,t){return Object(i.a)(e,t,!0)},addClass:function(e,t){Array.isArray(e)||(e=[e]);var n=t.split(" ");e.forEach((function(e){return n.forEach((function(t){return e.classList.add(t)}))}))},removeClass:function(e,t){Array.isArray(e)||(e=[e]);var n=t.split(" ");e.forEach((function(e){return n.forEach((function(t){return e.classList.remove(t)}))}))},hasClass:function(e,t){return Array.isArray(e)||(e=[e]),e.some((function(e){return e.classList.contains(t)}))},toggleClass:function(e,t){Array.isArray(e)||(e=[e]),"string"==typeof e&&(e=this.find(e)),t.split(" ").forEach((function(t){return e.forEach((function(e){return e.classList.toggle(t)}))}))},matches:function(){if("undefined"==typeof Element)return function(){return!1};var e=Element.prototype,t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){return[].indexOf.call(document.querySelectorAll(e),this)>-1};return function(e,n){return t.call(e,n)}}(),getViewPosition:o,on:function(e,t,n,r){"function"==typeof n&&void 0===r&&(r=n,n=null),t.split(" ").forEach((function(t){return e.addEventListener(t,r)}))},one:function(e,t,n,r){var i=this;"function"==typeof n&&(r=n,n=null);var a=function n(a){r.call(this,a),i.off(e,t,n)};return i.on(e,t,a),a},off:function(e,t,n){t.split(" ").forEach((function(t){return e.removeEventListener(t,n)}))},trigger:function(e,t){document.createEvent&&t.split(" ").forEach((function(t){var n=document.createEvent("Event");n.initEvent&&(n.initEvent(t,!1,!0),e.dispatchEvent(n))}))},hide:function(e,t){var n=t?this.find(e,t):e;return this.addClass(n,"js-hidden"),this},show:function(e,t){var n=this,r=t?this.find(e,t):e;return this.hasClass(r,"js-hidden")?this.removeClass(r,"js-hidden"):(Array.isArray(r)||(r=[r]),r.forEach((function(e){return n.setStyle(e,{display:"block"})}))),this},getData:function(e,t){return"string"==typeof e&&(e=this.stringToHTML(e)[0]),e.getAttribute("data-".concat(t))},setData:function(e,t,n){return"string"==typeof e&&(e=this.stringToHTML(e)[0]),e.setAttribute("data-".concat(t),n),!0},getStyle:function(e,t){return e.style[t]},setStyle:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return this},getAttr:function(e,t){return e.getAttribute(t)},setAttr:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return this},removeAttr:function(e,t){return e.removeAttribute(t),this},hasAttr:function(e,t){return e.hasAttribute(t)},getText:function(e,t){var n=t?this.findOne(e,t):e;return n?n.textContent:""},setText:function(e,t,n){var r=n?this.findOne(e,n):e;return r&&(r.textContent=t),this},setHTML:function(e,t,n){var r=n?this.findOne(e,n):e;return r&&(r.innerHTML=t),this},parent:function(e,t){return Object(i.a)(e,t)},getModuleConfig:function(e,t){var n=e.querySelector("script");return t?n:n?JSON.parse(n.text):null},createElement:function(e,t){var n=document.createElement(e);return this.setAttr(n,t),n},scrollIntoView:function(e,t){var n=this;t?setTimeout((function(){n.scrollIntoView(e)}),t):e.scrollIntoView?e.scrollIntoView():window.scrollTo(0,e.offsetTop)},offset:function(e,t){var n=t?this.findOne(e,t):e;return n?{top:n.offsetTop,left:n.offsetLeft}:{}},size:function(e){return{width:e.offsetWidth,height:e.offsetHeight}},detectTransitionEnd:a}},11:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(12);r.Application.addService("solid",(function(){return i.a}));var a=new r.EventTarget;i.a.breakpointObserver.subscribe(a),t.b=i.a},111:function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],d=!1,l=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!d){var e=s(f);d=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||d||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},12:function(e,t,n){"use strict";(function(e){var r,i=n(162),a=n.n(i),o="undefined"!=typeof window?window:e,s={xs:"(max-width:39.9rem)",sm:"(min-width:40rem) and (max-width:51.9rem)",md:"(min-width:52rem) and (max-width:63.9rem)",lg:"(min-width:64rem)"};function c(e){return"screen and ".concat(s[e])}var u={observers:new Set,init:function(){var e=this;"matchMedia"in o&&Object.keys(s).forEach((function(t){var n=o.matchMedia(c(t));n.addListener((function(n){n.matches&&e.observers.forEach((function(e){e.fire(t),e.fire("match",{breakpoint:t})}))})),e[t]=n}))}};u.init(),r={_getWindowWidth:function(){return Number(o.innerWidth||0)},_isRetinaDevice:function(){return"matchMedia"in o&&o.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches},_makeSizeMediaQuery:c,_mediaMatches:function(e){return e in s&&u[e].matches},isBreakpoint:function(e){return r._mediaMatches(e)},isXsmall:function(){return r._mediaMatches("xs")},isSmall:function(){return r._mediaMatches("sm")},isMedium:function(){return r._mediaMatches("md")},isLarge:function(){return r._mediaMatches("lg")},isAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a()(e,r._mediaMatches)},isSmallerThan:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inclusive,i=void 0===n||n;return"xs"===e?!!i&&r.isXsmall():"sm"===e?i?r.isAny(["xs","sm"]):r.isXsmall():"md"===e?i?r.isAny(["xs","sm","md"]):r.isAny(["xs","sm"]):"lg"===e&&(!!i||r.isAny(["xs","sm","md"]))},isLargerThan:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inclusive,i=void 0===n||n;return"xs"===e?!!i||r.isAny(["sm","md","lg"]):"sm"===e?i?r.isAny(["sm","md","lg"]):r.isAny(["md","lg"]):"md"===e?i?r.isAny(["md","lg"]):r.isLarge():"lg"===e&&(!!i&&r.isLarge())},breakPoint:function(e){return r._mediaMatches(e)},getBreakPoint:function(){var e;for(var t in s)if(r.breakPoint(t)){e=t;break}return e},getWindowWidth:function(){return r._isRetinaDevice()?2*r._getWindowWidth():r._getWindowWidth()},get cssBreakpoints(){return{xs:null,sm:"40rem",md:"52rem",lg:"64rem"}},breakpointObserver:{subscribe:function(e){return u.observers.add(e)},unsubscribe:function(e){return u.observers.delete(e)}}},t.a=r}).call(this,n(56))},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),i=n(32),a=n(9),o=n(27);var s,c=(s=function(e){var t=!1,n=e.abeagle;return f?Promise.resolve(!0):function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}((function(){if(d.needsConsent())return e=l.hasConsented("permutive"),n=function(e){if(!e||o.a.isMobileApp())return t=!0,Promise.resolve(!1)},r?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e);var e,n,r}),(function(e){return t?e:n.getExperimentVariant("ADSGROUP-442-permutive").catch((function(e){return e&&"ExperimentNotFound"===e.type?"on":null})).then((function(e){return Promise.resolve("on"===e)}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),u={queryStringToObject:r.c},d=a.a.framework,l=a.a.rules;var f="undefined"!=typeof window&&"permutive-test"in(u.queryStringToObject(window.location.search)||{});t.b={isTest:f,checkIsOn:function(){return c({abeagle:i.a})}}},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m}));n(11),n(21);var r="id",i="type",a="contentCategory",o="unit",s="unitType",c="unit_name",u="position",d="position_in_unit",l="dataSource",f="subUnit",p="variationId",h=function(e){return"Feed"===e.l&&"FeedItem"===e.n},g=function(e,t,n,h){if(!t)throw new Error("unit must be specified for tracking");return'\n    data-bfa-impressions="true"\n    data-bfa="@a:FeedItem; @e:{ '.concat(r,":").concat(n.id,",\n                                ").concat(i,":").concat(n.type||"buzz",",\n                                ").concat(a,":").concat(n.category||"",",\n                                ").concat(o,":").concat(t,",\n                                ").concat(s,":").concat(e,",\n                                ").concat(c,":").concat(h,",\n                                ").concat(u,":").concat(n.number||n.position||-1,",\n                                ").concat(d,":").concat(n.position,",\n                                ").concat(l,":").concat(n.dataSource||n.data_source,",\n                                ").concat(f,":").concat(n.sub_unit||"",",\n                                ").concat(p,":").concat(n.variationId||"",'\n                              };"\n  ')},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.createMapTemplate("gaFeedTmpl");n.addMapTo("category").mapFrom((function(e){return"".concat(e.data[s],":").concat(e.data[o])})),n.addMapTo("label").mapFrom((function(e){return"".concat(e.data[i]||"buzz",":").concat(e.data[r])})),n.addMapTo("value").mapFrom((function(e){return e.data[u]}));var a=e.getOrCreateRouter("track/click").createConfigForRoute(h);if(a.applyTemplateByName("gaFeedTmpl"),a.addMapTo("action","click"),t){var c=e.getOrCreateRouter("track/scroll/impression").createConfigForRoute(h);c.applyTemplateByName("gaFeedTmpl"),c.addMapTo("action","impression")}}},14:function(e,t,n){"use strict";function r(e,t){var n=e.match(t);return n&&n.length?n[0]:null}t.a={getBuzzfeedSubdomainOrWildcard:function(e){var t=r(e,"(dev|stage|www).(buzzfeed|buzzfeednews).(com|io)$");return t||r(e,".?[a-z]+.[a-z]+$")},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e,"=");if("undefined"==typeof document)return t;for(var r=document.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return t},set:function(e){var t=e.name,n=e.value,r=e.days,i=e.domain,a="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),a="; expires=".concat(o.toGMTString())}var s="";return void 0!==i&&(s="; domain=".concat(i)),document.cookie="".concat(t,"=").concat(n).concat(a).concat(s,"; path=/")},remove:function(e,t){return this.set({name:e,value:"",days:-1,domain:t})}}},141:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},15:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return(e+="").indexOf("#")>-1?e.substr(e.indexOf("#"),e.length):""}function o(e){return(e+="").indexOf("#")>-1?e.substr(0,e.indexOf("#")):e}function s(e){return e.indexOf("?")>-1}function c(e){if(""===e||null==e)return{};e.indexOf("?")>-1&&(e=e.substr(e.indexOf("?")+1,e.length));var t=(e=o(e)).split("&"),n={};return t.forEach((function(e){var t=r(e.split("="),2),i=t[0],a=t[1],o=void 0===a?null:a;n[i]=o})),n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?",n=[];return Object.keys(e).forEach((function(t){n.push("".concat(t,"=").concat(encodeURIComponent(e[t])))})),(t||"")+n.join("&")}n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return l}));function d(e){return c(function(e){var t="";return s(e=o(e))&&(t=e.substr(e.indexOf("?"),e.length)),t}(e))}function l(e){return e=function(e){if(!s(e))return e;var t=a(e);return(e=o(e)).substr(0,e.indexOf("?"))+t}(e=o(e))}},152:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(201),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(56))},17:function(e,t,n){"use strict";var r,i="undefined"!=typeof document?document.documentElement:null,a="undefined"!=typeof document&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o=function(){try{return localStorage.setItem("ls_test",!0),localStorage.removeItem("ls_test"),!0}catch(e){return!1}}();i&&!a&&i.classList.add("no-svg"),"undefined"!=typeof document&&(navigator.userAgent.match(/Pinterest/i)||document.referrer.match(/pinterest.com/i))&&i.classList.add("pinterest"),t.a={hasTouch:(r="undefined"!=typeof window&&"ontouchstart"in window,r&&i.classList.add("has-touch"),r),os:"undefined"==typeof document?"":navigator.userAgent.match(/android/i)?(i.classList.add("is-android"),"android"):navigator.userAgent.match(/iphone|ipad|ipod/i)?(i.classList.add("is-ios"),"ios"):"",referrer:function(){if("undefined"==typeof window)return"";var e=document.referrer,t=window.location.search,n=navigator.userAgent.match(/fban|twitter|pinterest/i),r=n?n[0]:"";return t.match("referrer=pinterest")||e.match("pinterest")||"pinterest"===r?"pinterest":t.match("referrer=twitter")||e.match("t.co")||"twitter"===r?"tweet":t.match("referrer=facebook")||e.match("m.facebook")||"fban"===r?"facebook":""}(),supportsLocalStorage:o,isVideoSupported:function(){return"android"===this.os},autoplaysVideo:function(){return!1},getViewportHeight:function(){return window.innerHeight||i.clientHeight},getViewportWidth:function(){return window.innerWidth||i.clientWidth}}},181:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return jt})),n.d(t,"e",(function(){return Lt})),n.d(t,"d",(function(){return Bt})),n.d(t,"a",(function(){return Ut})),n.d(t,"b",(function(){return zt})),n.d(t,"f",(function(){return Vt}));var r=n(9),i=n(32),a=n(6),o=n(41),s=n.n(o),c=n(58),u=n.n(c);function d(e,t){var n=e.match(t);return n&&n.length?n[0]:null}var l={getBuzzfeedSubdomainOrWildcard:function(e){var t=d(e,"(dev|stage|www).(buzzfeed|buzzfeednews).(com|io)$");return t||d(e,".?[a-z]+.[a-z]+$")},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e,"=");if("undefined"==typeof document)return t;for(var r=document.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return t},set:function(e){var t=e.name,n=e.value,r=e.days,i=e.domain,a="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),a="; expires=".concat(o.toGMTString())}var s="";return void 0!==i&&(s="; domain=".concat(i)),document.cookie="".concat(t,"=").concat(n).concat(a).concat(s,"; path=/")},remove:function(e,t){return this.set({name:e,value:"",days:-1,domain:t})}},f=n(30),p=n.n(f),h=n(59),g=n.n(h),m=n(165),v=n.n(m),y=n(166),b=n.n(y),w=n(99),_=n.n(w),k=n(167),T=n.n(k),O=n(51),S=n.n(O),E=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^function(){try{return crypto.getRandomValues(new Uint8Array(1))[0]}catch(e){return 255*Math.random()}}()&15>>e/4).toString(16)}))};function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var i=_()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b()(this,n)}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){return String(e).replace(/[^\w\s-_/]/g,"").replace(/\s+/g,"_").toLowerCase()},P=function(e){return e.map((function(e){return"undefined"===e?"":e}))},A=function(e){return null===e||isNaN(Number(e))?null:Number(e)},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&Array.isArray(e)?e:t},D=function(){var e=u()(s.a.mark((function e(t){var n,r,i,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.context,r=t.layers,i=void 0===r?[]:r,a={},o=0;case 3:if(!(o<i.length)){e.next=13;break}if("function"!=typeof(c=i[o])){e.next=9;break}return e.next=8,c(n);case 8:c=e.sent;case 9:a=M(M({},a),c);case 10:o++,e.next=3;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client_id_cookie_name,n=void 0===t?"_amp_pd":t,r=e.expires,i=void 0===r?365:r,a=l.get(n);if(!a){var o=window.location.hostname.split(".").splice(-2,2).join(".");a="amp-".concat(E()),l.set({name:n,value:a,days:i,domain:o})}return a},j=function(e){v()(n,e);var t=C(n);function n(e){var r;return g()(this,n),(r=t.call(this,e)).name="ClientEventSchemaLayerError",r}return n}(T()(Error)),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new j('Missing required field: "'.concat(e,'"'))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0!==n&&n,i=Object.entries(e).filter((function(e){var t=p()(e,2)[1];return!(t instanceof j)||(r&&console.warn(t),!1)})),a=i.reduce((function(e,t){var n=p()(t,2),r=n[0],i=n[1];return e[r]=i,e}),{});return a},B={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},U=Array.prototype.slice;function z(e){var t=e.length;return t?1===t?[e[0]]:2===t?[e[0],e[1]]:3===t?[e[0],e[1],e[2]]:U.call(e,0):[]}function V(e,t){return e===t||e!=e&&t!=t}function q(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var H=function(){function e(e){this.keys=[],this.values=[],this.options=e;var t="function"==typeof e.isMatchingKey;t?this.getKeyIndex=this._getKeyIndexFromMatchingKey:e.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey="function"==typeof e.transformKey,this.shouldCloneArguments=this.canTransformKey||t,this.shouldUpdateOnAdd="function"==typeof e.onCacheAdd,this.shouldUpdateOnChange="function"==typeof e.onCacheChange,this.shouldUpdateOnHit="function"==typeof e.onCacheHit}return Object.defineProperty(e.prototype,"size",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapshot",{get:function(){return{keys:z(this.keys),size:this.size,values:z(this.values)}},enumerable:!0,configurable:!0}),e.prototype._getKeyIndexFromMatchingKey=function(e){var t=this.options,n=t.isMatchingKey,r=t.maxSize,i=this.keys,a=i.length;if(!a)return-1;if(n(i[0],e))return 0;if(r>1)for(var o=1;o<a;o++)if(n(i[o],e))return o;return-1},e.prototype._getKeyIndexForMany=function(e){var t=this.options.isEqual,n=this.keys,r=n.length;if(!r)return-1;if(1===r)return this._getKeyIndexForSingle(e);var i,a,o=e.length;if(o>1){for(var s=0;s<r;s++)if((i=n[s]).length===o){for(a=0;a<o&&t(i[a],e[a]);a++);if(a===o)return s}}else for(s=0;s<r;s++)if((i=n[s]).length===o&&t(i[0],e[0]))return s;return-1},e.prototype._getKeyIndexForSingle=function(e){var t=this.keys;if(!t.length)return-1;var n=t[0],r=n.length;if(e.length!==r)return-1;var i=this.options.isEqual;if(r>1){for(var a=0;a<r;a++)if(!i(n[a],e[a]))return-1;return 0}return i(n[0],e[0])?0:-1},e.prototype.orderByLru=function(e,t,n){for(var r=this.keys,i=this.values,a=r.length,o=n;o--;)r[o+1]=r[o],i[o+1]=i[o];r[0]=e,i[0]=t;var s=this.options.maxSize;a===s&&n===a?(r.pop(),i.pop()):n>=s&&(r.length=i.length=s)},e.prototype.updateAsyncCache=function(e){var t=this,n=this.options,r=n.onCacheChange,i=n.onCacheHit,a=this.keys[0],o=this.values[0];this.values[0]=o.then((function(n){return t.shouldUpdateOnHit&&i(t,t.options,e),t.shouldUpdateOnChange&&r(t,t.options,e),n}),(function(e){var n=t.getKeyIndex(a);throw-1!==n&&(t.keys.splice(n,1),t.values.splice(n,1)),e}))},e}();var G=function e(t,n){if(void 0===n&&(n={}),function(e){return"function"==typeof e&&e.isMemoized}(t))return e(t.fn,q(t.options,n));if("function"!=typeof t)throw new TypeError("You must pass a function to `memoize`.");var r=n.isEqual,i=void 0===r?V:r,a=n.isMatchingKey,o=n.isPromise,s=void 0!==o&&o,c=n.maxSize,u=void 0===c?1:c,d=n.onCacheAdd,l=n.onCacheChange,f=n.onCacheHit,p=n.transformKey,h=q({isEqual:i,isMatchingKey:a,isPromise:s,maxSize:u,onCacheAdd:d,onCacheChange:l,onCacheHit:f,transformKey:p},function(e){var t={};for(var n in e)B[n]||(t[n]=e[n]);return t}(n)),g=new H(h),m=g.keys,v=g.values,y=g.canTransformKey,b=g.shouldCloneArguments,w=g.shouldUpdateOnAdd,_=g.shouldUpdateOnChange,k=g.shouldUpdateOnHit,T=function e(){var n=b?z(arguments):arguments;y&&(n=p(n));var r=m.length?g.getKeyIndex(n):-1;if(-1!==r)k&&f(g,h,e),r&&(g.orderByLru(m[r],v[r],r),_&&l(g,h,e));else{var i=t.apply(this,arguments),a=b?n:z(arguments);g.orderByLru(a,i,m.length),s&&g.updateAsyncCache(e),w&&d(g,h,e),_&&l(g,h,e)}return v[0]};return T.cache=g,T.fn=t,T.isMemoized=!0,T.options=h,T};function W(e){return(e+="").indexOf("#")>-1?e.substr(e.indexOf("#"),e.length):""}function K(e){return(e+="").indexOf("#")>-1?e.substr(0,e.indexOf("#")):e}function Z(e){return e.indexOf("?")>-1}function J(e){return e=function(e){if(!Z(e))return e;var t=W(e);return(e=K(e)).substr(0,e.indexOf("?"))+t}(e=K(e))}var $=n(81),Q=n.n($),Y=function(e){return e.match(/^stage\./)?"https://".concat(e):"https://www.".concat(e)},X=function(){function e(t){var n=this,r=t.sourceOfTruthDomain,i=t.localDomain,a=t.namespace,o=t.env,s=void 0===o?"dev":o,c=t.updateInterval,u=void 0===c?3e5:c,d=t.iframeTimeout,l=void 0===d?3e3:d;g()(this,e),this.sourceOfTruthDomain=r,this.localDomain=i,this.env=s,this.namespace=a,this.iframeTimeout=l,this.cookies={},r!==i&&this.initIframe().then((function(){setInterval(n.updateFromIframe.bind(n),u)})).catch((function(){}))}return Q()(e,[{key:"get",value:function(e){var t=this;return this.sourceOfTruthDomain===this.localDomain?Promise.resolve(l.get(e)):this.initIframe().then((function(){return t.cookies[e]||l.get(e)})).catch((function(){return l.get(e)}))}},{key:"set",value:function(e){var t=this,n=e.name,r=e.value,i=e.days,a=e.secureOnly,o=void 0===a||a;l.set({name:n,value:r,days:i,domain:this.localDomain}),this.sourceOfTruthDomain!==this.localDomain&&this.initIframe().then((function(){var e={namespace:t.namespace,msgType:"destination-sync-write",cookieName:n,cookieVal:r,expiresDays:i,secureOnly:o},a=Y(t.sourceOfTruthDomain);t.iframe.contentWindow.postMessage(JSON.stringify(e),a)})).catch((function(){return l.set({name:n,value:r,days:i,domain:t.localDomain})}))}},{key:"cleanup",value:function(){if(this.boundOnMessage&&window.removeEventListener("message",this.boundOnMessage),this.iframe){var e=new ErrorEvent({message:"XDomainCookies were cleaned up before ready"});this.iframe.dispatchEvent(e),this.iframe.remove()}this.iframeReady=null}},{key:"initIframe",value:function(){var e=this;if(this.iframeReady)return this.iframeReady;var t,n=new Promise((function(t,n){e.boundOnMessage=function(n){e.onMessage(n,t)},window.addEventListener("message",e.boundOnMessage),e.createIframe(n)}));return this.iframeReady=Promise.race([(t=this.iframeTimeout,new Promise((function(e,n){var r={type:"timeout",msg:"".concat(t,"ms timeout exceeded")};setTimeout((function(){return n(r)}),t)}))),n]).catch((function(t){throw"prod"===e.env&&window.raven&&window.raven.captureException("timeout"===t.type?new Error("Destination Sync: ".concat(t.msg)):t),console.error(t),t})),this.iframeReady}},{key:"createIframe",value:function(e){var t="xdomaincookies-".concat(this.namespace),n=document.getElementById(t);if(n)return n.addEventListener("error",(function(t){e(t)})),this.iframe=n,void(this.iframe.dataset.loaded&&this.updateFromIframe());var r=JSON.stringify({namespace:this.namespace,windowOrigin:window.location.origin}),i=document.createElement("iframe");i.style.display="none",i.addEventListener("error",(function(t){e(t)})),i.id=t,i.src=function(e,t){return"".concat(Y(e),"/").concat("destination-sync.html","#").concat(encodeURIComponent(t))}(this.sourceOfTruthDomain,r),this.iframe=i,document.body.appendChild(i)}},{key:"updateFromIframe",value:function(){var e={namespace:this.namespace,msgType:"destination-sync-read"},t=Y(this.sourceOfTruthDomain);this.iframe.contentWindow.postMessage(JSON.stringify(e),t)}},{key:"onMessage",value:function(e,t){var n={};try{n=JSON.parse(e.data)}catch(e){}n.namespace===this.namespace&&("destination-sync-init"===n.msgType&&(this.iframe.dataset.loaded=!0),"destination-sync-init"!==n.msgType&&"destination-sync-read"!==n.msgType||(this.cookies=n.cookies),t())}}]),e}(),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"dev"===e?"dev.buzzfeed.io":"prod"===e||"app-west"===e?"buzzfeed.com":"stage.buzzfeed.com"},te=function(){function e(t){var n=t.cookieName,r=t.daysExpiry,i=t.env,a=t.namespace,o=t.sourceOfTruthDomain,s=t.throttleTimer,c=void 0===s?null:s,u=t.secureOnly,d=void 0===u||u,l=t.localDomain,f=void 0===l?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.location.hostname,n=["buzzfeed","buzzfeednews","tasty"],r=t.split(".")[0];return r&&"stage"!==r&&-1===n.indexOf(r)&&t.split(".").length>=3&&(t=t.substring(r.length+1)),t}():l;g()(this,e),i="live"===i?"prod":i,this.xDomainCookies=new X({sourceOfTruthDomain:o||ee(i),namespace:a,localDomain:f,env:i}),this.cookieName=n,this.daysExpiry=r,this.secureOnly=d,this.throttleTimer=c,this.inMemoryValue=null}return Q()(e,[{key:"get",value:function(){var e=this;return this.throttle?Promise.resolve(this.inMemoryValue):this.xDomainCookies.get(this.cookieName).then((function(t){return e.inMemoryValue=t,e.resetThrottle(),t}))}},{key:"set",value:function(e){return this.inMemoryValue=e,this.xDomainCookies.set({name:this.cookieName,value:e,days:this.daysExpiry,secureOnly:this.secureOnly})}},{key:"resetThrottle",value:function(){var e=this;this.throttleTimer&&(this.throttle=setTimeout((function(){e.throttle=null}),this.throttleTimer))}}]),e}();function ne(e,t,n){var r,i,a,o,s,c,u;for(this.version="1.0.1",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(t,10)>0?t:0,this.salt="string"==typeof e?e:"","string"==typeof n&&(this.alphabet=n),r="",i=0,o=this.alphabet.length;i!==o;i++)-1===r.indexOf(this.alphabet[i])&&(r+=this.alphabet[i]);if(this.alphabet=r,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(i=0,o=this.seps.length;i!==o;i++)-1===(a=this.alphabet.indexOf(this.seps[i]))?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,a)+" "+this.alphabet.substr(a+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(1===(s=Math.ceil(this.alphabet.length/this.sepDiv))&&s++,s>this.seps.length?(c=s-this.seps.length,this.seps+=this.alphabet.substr(0,c),this.alphabet=this.alphabet.substr(c)):this.seps=this.seps.substr(0,s)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),u=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}ne.prototype.encode=function(){var e,t,n="",r=Array.prototype.slice.call(arguments);if(!r.length)return n;for(r[0]instanceof Array&&(r=r[0]),e=0,t=r.length;e!==t;e++)if("number"!=typeof r[e]||r[e]%1!=0||r[e]<0)return n;return this._encode(r)},ne.prototype.decode=function(e){return e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]},ne.prototype.encodeHex=function(e){var t,n,r;if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(t=0,n=(r=e.match(/[\w\W]{1,12}/g)).length;t!==n;t++)r[t]=parseInt("1"+r[t],16);return this.encode.apply(this,r)},ne.prototype.decodeHex=function(e){var t,n,r=[],i=this.decode(e);for(t=0,n=i.length;t!==n;t++)r+=i[t].toString(16).substr(1);return r},ne.prototype._encode=function(e){var t,n,r,i,a,o,s,c,u,d,l,f=this.alphabet,p=e.length,h=0;for(r=0,i=e.length;r!==i;r++)h+=e[r]%(r+100);for(n=t=f[h%f.length],r=0,i=e.length;r!==i;r++)a=e[r],o=n+this.salt+f,f=this.consistentShuffle(f,o.substr(0,f.length)),t+=s=this.hash(a,f),r+1<p&&(c=(a%=s.charCodeAt(0)+r)%this.seps.length,t+=this.seps[c]);for(t.length<this.minHashLength&&(u=(h+t[0].charCodeAt(0))%this.guards.length,(t=this.guards[u]+t).length<this.minHashLength&&(u=(h+t[2].charCodeAt(0))%this.guards.length,t+=this.guards[u])),d=parseInt(f.length/2,10);t.length<this.minHashLength;)(l=(t=(f=this.consistentShuffle(f,f)).substr(d)+t+f.substr(0,d)).length-this.minHashLength)>0&&(t=t.substr(l/2,this.minHashLength));return t},ne.prototype._decode=function(e,t){var n,r,i,a,o=[],s=0,c=new RegExp("["+this.guards+"]","g"),u=e.replace(c," "),d=u.split(" ");if(3!==d.length&&2!==d.length||(s=1),void 0!==(u=d[s])[0]){for(n=u[0],u=u.substr(1),c=new RegExp("["+this.seps+"]","g"),s=0,r=(d=(u=u.replace(c," ")).split(" ")).length;s!==r;s++)i=d[s],a=n+this.salt+t,t=this.consistentShuffle(t,a.substr(0,t.length)),o.push(this.unhash(i,t));this._encode(o)!==e&&(o=[])}return o},ne.prototype.consistentShuffle=function(e,t){var n,r,i,a,o,s;if(!t.length)return e;for(a=e.length-1,o=0,s=0;a>0;a--,o++)s+=n=t[o%=t.length].charCodeAt(0),i=e[r=(n+o+s)%a],e=(e=e.substr(0,r)+e[a]+e.substr(r+1)).substr(0,a)+i+e.substr(a+1);return e},ne.prototype.hash=function(e,t){var n="",r=t.length;do{n=t[e%r]+n,e=parseInt(e/r,10)}while(e);return n},ne.prototype.unhash=function(e,t){var n,r=0;for(n=0;n<e.length;n++)r+=t.indexOf(e[n])*Math.pow(t.length,e.length-n-1);return r};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=parseInt(1e10*Math.random(),10),oe=E(),se=function(e){if(0!==e.indexOf(".")){var t=/[0-9A-Za-z]+/.exec(e);return null!==t&&t[0]===e&&parseInt(e,36)}var n=e.substr(1,2);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt,r=void 0===n?null:n;return new ne(r).decode(e)[0]}(e.substr(3),{salt:n})},ce=function(e){var t=parseInt(25*Math.random()+10,10).toString(36)+parseInt(25*Math.random()+10,10).toString(36);return".".concat(t).concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt,r=void 0===n?null:n,i=t.length,a=void 0===i?32:i;return new ne(r,a).encode(e)}(e,{salt:t,length:0}))},ue=function(e){var t=e.env,n=e.legacy,r=void 0===n||n,i=new te({namespace:"bf-xdomain-tracking",cookieName:"bf_visit",daysExpiry:1e4,env:t});return i.get().then((function(e){var t=function(e){var t=decodeURIComponent(e).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=p()(t,2),r=n[0],i=n[1];return ie(ie({},e),{},S()({},r,i))}),{}),n=t.u,r=t.uuid;return{legacyIdentifier:se(n||""),identifier:r}}(e),n=t.legacyIdentifier,a=t.identifier,o=ce(ae);return r?n||(i.set(encodeURIComponent("u=".concat(o,"&uuid=").concat(a||oe,"&v=2"))),ae):a||n?a||String(n):(i.set(encodeURIComponent("u=".concat(o,"&uuid=").concat(oe,"&v=2"))),oe)}))};function de(e){return e+"|expiration"}var le=function(){try{return localStorage.setItem("ls_test",!0),localStorage.removeItem("ls_test"),!0}catch(e){return!1}}(),fe={set:function(e){le&&void 0!==e&&(localStorage.setItem(e.key,e.value),e.expires&&localStorage.setItem(de(e.key),Date.now()+e.expires))},get:function(e){return le?function(e){var t=localStorage.getItem(de(e));return t&&t<=Date.now()}(e)?(this.remove(e),null):localStorage.getItem(e):null},sessionSet:function(e){le&&void 0!==e&&sessionStorage.setItem(e.key,e.value)},sessionGet:function(e){return le?sessionStorage.getItem(e):null},remove:function(e){le&&(localStorage.removeItem(de(e)),localStorage.removeItem(e))},clear:function(){le&&localStorage.clear()}},pe={dev:{tracking_url:"https://nsq-api-public.dev.buzzfeed.io",debug:!0},test:{tracking_url:"https://nsq-api-public.dev.buzzfeed.io",debug:!0},stage:{tracking_url:"https://pixiedust-stage.buzzfeed.com",debug:!0},prod:{tracking_url:"https://pixiedust.buzzfeed.com",debug:!1},"app-west":{tracking_url:"https://pixiedust.buzzfeed.com",debug:!1}},he=1,ge=3,me=4,ve=5,ye=6,be="feed",we=function(e){var t=fe.get("cet-page_session_id");if(window.CLIENT_EVENT_TRACKING=window.CLIENT_EVENT_TRACKING||{},window.CLIENT_EVENT_TRACKING.current_page_session_url===e&&t)return{page_session_id:t,previous_page_session_id:fe.get("pdv3-previous_page_session_id")||""};window.CLIENT_EVENT_TRACKING.current_page_session_url=e,t=E()||"00000000-0000-0000-0000-000000000000";var n=fe.get("cet-page_session_id")||"";return fe.set({key:"cet-page_session_id",value:t}),fe.set({expires:18e5,key:"pdv3-previous_page_session_id",value:n}),{page_session_id:t,previous_page_session_id:n}};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=G((function(e){var t,n=e.url;return G(function(){var e=u()(s.a.mark((function e(r){var i,a,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.env,t=new te({env:i,namespace:"bf-xdomain-tracking",cookieName:"bf-xdomain-session-uuid",daysExpiry:.5/24,throttleTimer:18e4}),e.next=4,Promise.all([ue({env:i,legacy:!1}),t.get()]);case 4:return a=e.sent,o=p()(a,2),c=o[0],u=o[1],c=String(c),u=u&&"null"!==u?u:E(),t.set(u),e.abrupt("return",ke({client_uuid:c,client_session_id:u,random_user_uuid:l.get("user_uuid","unauthenticated"),referrer_uri:document.referrer},we(J(n))));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{transformKey:JSON.stringify})}),{transformKey:function(e){return J(p()(e,1)[0].url)}}),Oe=function(){return function(){return{event_uri:document.URL,event_ts:Math.round(Date.now()/1e3),event_uuid:E()}}},Se=n(80),Ee=n.n(Se),Ce=G((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track_amp,n=void 0!==t&&t,r=Ee()(e,["track_amp"]);return n?G((function(){return{amp_id:N(r)}}),{transformKey:JSON.stringify}):{}}),{transformKey:JSON.stringify}),xe=function(e){var t=e.page_edition,n=void 0===t?R("page_edition"):t;return function(){return{mode:window.matchMedia("screen and (max-width:51.9rem)").matches?"mobile":"desktop",page_edition:n,viewport_size:{width:window.screen.width,height:window.screen.height}}}},Me=function(e){var t=e.type,n=void 0===t?R("type"):t,r=e.source,i=void 0===r?R("source"):r;return function(){return{type:n,source:i}}};function Ie(e){var t=e.env,n=void 0===t?"dev":t,r=function(e){var t,n=e.debug,r=e.tracking_url,i=[],a=function(){if(i.length&&"undefined"!=typeof window){var e=JSON.stringify(i);if(n)window.fetch("".concat(r,"/events"),{method:"POST",body:e,keepalive:!0}).then((function(e){return e.json()})).then((function(e){e.errors&&e.debug&&(console.group("%c 🚨 Rejected client events 🚨","background-color: #250201; color: #ee8783; border: 1px solid #540b06"),e.debug.forEach((function(e){return console.table(e.validation)})),console.groupEnd())})).catch((function(){var t=JSON.parse(e);console.group("%cClient Event Tracking: %crun nsq_api_public to verify events","font-weight: bold;","color: gray; font-size: .5rem;"),t.forEach((function(e){console.groupCollapsed('"%c'.concat(e.type,'"'),"font-weight: bold; font-family: monospace;"),console.table(e),console.groupEnd()})),console.groupEnd()}));else{var a;if(navigator&&navigator.sendBeacon)a=navigator.sendBeacon("".concat(r,"/events"),e);else{var o=new XMLHttpRequest;o.open("POST","".concat(r,"/events"),!1),o.onerror=function(){},o.setRequestHeader("Accept","*/*"),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a=o.send(e)}!a&&window.raven&&Math.random()<.1&&window.raven.captureException("Client Event Tracking: sendBeacon could not process a queue.")}clearTimeout(t),t=null,i=[]}};return[function(e){i.push(e),10===i.length&&a(),t||(t=setTimeout(a,200))},a]}(pe[n]),i=p()(r,2),a=i[0],o=i[1];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flush,i=void 0!==r&&r,s=L(e,{debug:pe[n].debug});a(s),i&&o()}}var Pe=n(164),Ae=n.n(Pe);function Fe(){var e="true"===l.get("is_bot");if(window.location.search.includes("e2e_test"))try{return{e2e_test:new URLSearchParams(window.location.search).get("e2e_test"),is_bot:!0}}catch(e){}return e?{is_bot:!0}:{}}var De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.threshold,r=void 0===n?.5:n,i=t.visibility_time,a=void 0===i?1e3:i;if("undefined"==typeof window)return function(){};var o=new Map,s=new Map,c=function(e,t){e.forEach((function(e){if(o.has(e.target)){if(!e.isIntersecting)return clearTimeout(s.get(e.target)),void s.delete(e.target);if(!(s.has(e.target)||e.intersectionRatio<r)){var n=setTimeout((function(){o.get(e.target).call(null),t.unobserve(e.target),s.delete(e.target)}),a);s.set(e.target,n)}}}))},u=new IntersectionObserver(c,{threshold:[0,r,1]}),d=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.has(t)||(o.set(t,(function(){return e.apply(void 0,r)})),u.observe(t)),function(){o.delete(t),u.unobserve(t),s.has(t)&&(clearTimeout(s.get(t)),s.delete(t))}};return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,[e].concat(n))}},Ne=function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=function(t){e.apply(void 0,[{event:t,layers:[{click_type:"left"}]}].concat(r))},o=function(t){e.apply(void 0,[{event:t,layers:[{click_type:"right"}]}].concat(r))};return t.addEventListener("click",a),t.addEventListener("contextmenu",o),function(){t.removeEventListener("click",a),t.removeEventListener("contextmenu",o)}}},je=function(e){var t=e.context_page_id,n=void 0===t?R("context_page_id"):t,r=e.context_page_type,i=void 0===r?R("context_page_type"):r,a=e.destination,o=void 0===a?R("destination"):a;return function(){return{context_page_id:String(n),context_page_type:i,destination:o}}},Re=function(e){var t=e.data_source_algorithm,n=e.data_source_algorithm_version,r=e.data_source_name,i=void 0===r?"":r;return function(){return{data_source_algorithm:P(F(t)),data_source_algorithm_version:P(F(n)),data_source_name:decodeURIComponent(i)}}},Le=function(e){var t=e.item_name,n=void 0===t?R("item_name"):t,r=e.target_content_id,i=void 0===r?n:r,a=e.target_content_type,o=void 0===a?R("target_content_type"):a;return function(){return{target_content_id:String(i),target_content_type:o}}},Be=function(e){var t=e.item_name,n=void 0===t?R("item_name"):t,r=e.item_type,i=void 0===r?R("item_type"):r,a=e.position_in_subunit,o=e.position_in_unit;return function(){return{item_name:String(n),item_type:i,position_in_subunit:A(a),position_in_unit:A(o)}}},Ue=function(e){var t=e.subunit_name,n=void 0===t?"":t,r=e.subunit_type,i=void 0===r?"":r;return function(){return{subunit_name:I(n.toString()),subunit_type:i}}},ze=function(e){var t=e.unit_name,n=void 0===t?R("unit_name"):t,r=e.unit_type,i=void 0===r?R("unit_type"):r;return function(){return{unit_type:i,unit_name:I(n)}}},Ve={required_layers:[je,Re,Le,Be,Ue,ze],type:"web_impression"},qe={flush:!0,required_layers:[je,Re,Le,Be,Ue,ze],type:"web_internal_link"},He={flush:!0,required_layers:[je,function(e){var t=e.target_content_url,n=void 0===t?R("target_content_url"):t;return function(){return{target_content_url:n}}},Be,Ue,ze],type:"web_external_link"},Ge={flush:!0,required_layers:[function(e){var t=e.action_type,n=void 0===t?R("action_type"):t,r=e.action_value,i=void 0===r?R("action_value"):r;return function(){return{action_type:n,action_value:i.toString()}}},je,Be,Ue,ze],type:"web_content_action"},We={required_layers:[je,function(e){var t=e.experiment_id,n=void 0===t?R("experiment_id"):t;return{experiment_id:F(n)}}],type:"web_ab_test"},Ke={required_layers:[je],type:"web_pageview"},Ze=function(){return function(){return{connection_type:(e="undefined"!=typeof navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection),e?e.effectiveType:"")};var e}};function Je(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e,t){var n=t.flush,r=void 0===n?function(){}:n,i=t.layers,a=void 0===i?[]:i,o=t.sample_rate,s=void 0===o?.1:o,c=t.type;return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(void 0,[{flush:r,required_layers:[je,Ze],sample_rate:s,type:c}].concat(Je(a),n))}},Ye=function(){"__trackAbandons"in window&&document.removeEventListener("visibilitychange",window.__trackAbandons)},Xe=function(e){if("LayoutShift"in window){var t=0,n=0,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=new PerformanceObserver((function(e){e.getEntries().forEach((function(e){e.hadRecentInput||((e.startTime-r>5e3||e.startTime-i>1e3)&&(r=e.startTime,n=0),i=e.startTime,n+=e.value,t=Math.max(t,n))}))}));a.observe({type:"layout-shift",buffered:!0}),document.addEventListener("visibilitychange",(function n(){"hidden"===document.visibilityState&&(a.takeRecords(),a.disconnect(),e({metric_name:"cumulative-layout-shift-window",metric_type:"custom",metric_value:t}),document.removeEventListener("visibilitychange",n))}))}},et=n(37),tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n="";try{for(;e&&9!==e.nodeType;){var r=e.id?"#".concat(e.id):e.nodeName.toLowerCase()+(e.className&&e.className.length?".".concat(Array.from(e.classList.values()).join(".")):"");if(n.length+r.length>t-1)return n||r;if(n=n?"".concat(r," > ").concat(n):r,e.id)break;e=e.parentNode}}catch(e){}return n};function nt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){Object(et.a)((function(t){var n=t.entries;if(n.length)try{var r=nt(n);r.sort((function(e,t){return e&&e.value>t.value?-1:1})),r.slice(0,3).forEach((function(t,n){if(t&&t.sources&&t.sources.length){var r=t.sources.reduce((function(e,t){return!!e.node&&(e.previousRect.width*e.previousRect.height>t.previousRect.width*t.previousRect.height?e:t)}));e({metric_name:"largest-layout-shift-node-".concat(n),metric_type:"custom",metric_value:t.value,metric_metadata_type:"css-selector",metric_metadata_value:tt(r.node)||""})}}))}catch(e){}}))};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){st(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.layers,r=void 0===n?[]:n,i=t.sample_rate,a=void 0===i?.1:i,o={layers:r,sample_rate:a,type:"web_performance_metric"},s=Qe(e,ot({},o,{flush:!0}));Ye(),Xe(s),it(s)},ut=function(e){Object(et.a)((function(t){e({metric_name:"cumulative-layout-shift",metric_type:"web-vital",metric_value:t.value})}))},dt=function(e){Object(et.b)((function(t){e({metric_name:"first-contentful-paint",metric_type:"web-vital",metric_value:t.value})}))},lt=function(e){Object(et.c)((function(t){e({metric_name:"first-input-delay",metric_type:"web-vital",metric_value:t.value})}))},ft=function(e){Object(et.d)((function(t){e({metric_name:"largest-contentful-paint",metric_type:"web-vital",metric_value:t.value})}))};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.layers,r=void 0===n?[]:n,i=t.sample_rate,a=void 0===i?.1:i,o={layers:r,sample_rate:a,type:"web_performance_metric"},s=Qe(e,o),c=Qe(e,ht({},o,{flush:!0}));ut(c),dt(s),lt(c),ft(c)};function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bt=function(e){if("PerformanceNavigationTiming"in window){var t=function(){var t=vt(performance.getEntriesByType("navigation"),1)[0];e({timing_duration:t.duration,timing_name:t.name,timing_start_time:t.startTime,timing_type:t.entryType,resource_connect_end:t.connectEnd,resource_connect_start:t.connectStart,resource_decoded_body_size:void 0===t.decodedBodySize?null:t.decodedBodySize,resource_domain_lookup_end:t.domainLookupEnd,resource_domain_lookup_start:t.domainLookupStart,resource_encoded_body_size:void 0===t.encodedBodySize?null:t.encodedBodySize,resource_fetch_start:t.fetchStart,resource_initiator_type:t.initiatorType,resource_next_hop_protocol:void 0===t.nextHopProtocol?null:t.nextHopProtocol,resource_redirect_end:t.redirectEnd,resource_redirect_start:t.redirectStart,resource_request_start:t.requestStart,resource_response_end:t.responseEnd,resource_response_start:t.responseStart,resource_secure_connection_start:void 0===t.secureConnectionStart?null:t.secureConnectionStart,resource_transfer_size:void 0===t.transferSize?null:t.transferSize,resource_worker_start:void 0===t.workerStart?null:t.workerStart,navigation_dom_complete:t.domComplete,navigation_dom_content_loaded_event_end:t.domContentLoadedEventEnd,navigation_dom_content_loaded_event_start:t.domContentLoadedEventStart,navigation_dom_interactive:t.domInteractive,navigation_load_event_end:t.loadEventEnd,navigation_load_event_start:t.loadEventStart,navigation_redirect_count:t.redirectCount,navigation_type:t.type,navigation_unload_event_end:t.unloadEventEnd,navigation_unload_event_start:t.unloadEventStart})};"complete"===document.readyState?t():window.addEventListener("load",(function(){return requestAnimationFrame(t)}))}},wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.layers,r=void 0===n?[]:n,i=t.sample_rate,a=void 0===i?.1:i,o={layers:r,sample_rate:a,type:"web_performance_navigation_timing"};bt(Qe(e,o))},_t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.layers,r=void 0===n?[]:n,i=t.sample_rate,a=void 0===i?.1:i,o={layers:r,sample_rate:a};mt(e,o),wt(e,o),ct(e,o)};function kt(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot=function(e){var t=e.amp_options,n=void 0===t?{}:t,r=e.env,i=e.source;if("undefined"==typeof window)return function(){};var a=Ie({env:r});return function(){var e=u()(s.a.mark((function e(t){var o,c,u,d,l,f,p,h,g,m,v,y,b,w,_,k=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=t.flush,c=void 0!==o&&o,u=t.required_layers,d=void 0===u?[]:u,l=t.sample_rate,f=void 0===l?1:l,p=t.type,h=k.length,g=new Array(h>1?h-1:0),m=1;m<h;m++)g[m-1]=k[m];return e.next=4,D({context:{env:r},layers:g});case 4:return v=e.sent,y=v.page_edition,b=Ee()(v,["page_edition"]),w=[Me({source:i,type:p}),Oe(),Te({url:document.URL}),Ce(n),xe({page_edition:y})].concat(g,Ae()(d.map((function(e){return e(b)}))),[Fe()]),e.next=10,D({context:{env:r},layers:w});case 10:_=e.sent,(window.location.search.includes("e2e_test")||Math.random()<=f)&&a(_,{flush:c});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({env:BZFD.Config.env,source:"web_bf"}),St=function(){return{page_edition:BZFD.Context.page.localization.country,context_page_id:Rt(BZFD.Context.page.name),context_page_type:be,destination:"buzzfeed"}},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ot.apply(void 0,[e,St].concat(r,kt(t.layers?t.layers:[])))}},Ct=Et(Ve),xt=Et(qe),Mt=Et(He),It=Et(Ge),Pt=Et(We),At=De(Ct),Ft=Ne(xt),Dt=Ne(Mt),Nt=Ne(It),jt=function(){window.clientEventTracking={getPageContextLayer:function(){return St},env:BZFD.Config.env}};function Rt(e){switch(e){case"home":return he;case"vertical":return ge;case"tag":return me;case"badge":return ve;case"home-flipped":return"home-flipped";default:return ye}}var Lt=function(){Ot(Ke,St)},Bt=function(){return function(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}(i.b,(function(e){if("home"===BZFD.Context.page.name){var t="".concat("dsl25_frhf","_tracked"),n=a.a.get("dsl25_frhf"),r=a.a.get(t);n&&e.push("".concat("dsl25_frhf","|").concat("dsl25_frhf","|1|").concat(n,"|1")),r&&e.push("".concat(t,"|").concat("dsl25_frhf","|1|1|1"))}Pt({},{experiment_id:e})}))},Ut=function(e,t){e&&t&&(At(e,{},t),t.target_content_url?Dt(e,t):Ft(e,t))},zt=function(e){e&&e.querySelectorAll("[data-pixiedust]").forEach((function(e){if(e.getAttribute("data-pixiedust").length){var t=JSON.parse(decodeURIComponent(e.getAttribute("data-pixiedust")));t.target_content_url||!e.getAttribute("href")||Object(r.g)(e.getAttribute("href"))||(t.target_content_url=e.href),t.target_content_url?t.include_external_impression?At(e,{},t):Dt(e,t):t.action_type&&t.action_value?Nt(e,t):(At(e,{},t),Ft(e,t))}}))},Vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];_t(Ot,{layers:t})}},2:function(e,t,n){"use strict";var r=n(1),i=n(4);n.d(t,"a",(function(){return i.a})),r.Application.addService("util",(function(){return i.c})),t.b=i.c},201:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,c=1,u={},d=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){a.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(d)setTimeout(h,0,e);else{var t=u[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(56),n(111))},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(20),i=n.n(r),a=n(6),o=n(97);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){try{return window.BZFD.Context.page.localization}catch(e){return{}}},d=function(){return u().translations||{}},l={de:["de"],en:["au","ca","in","uk","us"],es:["es","mx"],fr:["fr"],ja:["jp"],pt:["br"]};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={useCountryCookie:!0};i()(e)&&(e="feedpager"===e?{useCountryCookie:!1}:{}),e=Object.assign({},t,e);var n=u().country,r=n.split("-"),o=s(r,2),c=o[0],d=o[1],f=void 0===d?"":d;if("en"===u().language&&e.useCountryCookie){var p=a.a.get("country");p||(p=f||"us");var h=p.split("-"),g=s(h,2);c=g[0],(f=g[1])||"es"===c||(f=c,c=Object.keys(l).filter((function(e){return-1!==l[e].indexOf(c)}))[0])}return l[c]&&-1!==l[c].indexOf(f)?"".concat(c,"-").concat(f):"es"===c?"es":"en-us"}function p(e){return d()[e]||""}t.a={getEdition:f,getRawPageLanguage:function(){return-1!==Object.keys(l).indexOf(u().language)?u().language:"en"},getPageLocale:function(){return u().locale},getUserCountry:function(){return a.a.get("country")||"us"},getTranslation:function(e,t,n){if(!d()[e])throw new Error("Missing translation "+e+" for "+this.getRawPageLanguage());var r=n?{delimiters:n}:{};return o.a.renderString(d()[e],t,r)},getTranslationStr:p,getDateFormatTemplate:function(){switch(u().language){case"de":return"{{D}}. {{MM}} {{Y}}, {{H}}:{{m}} Uhr";case"es":return"{{D}} de {{MM}} de {{Y}}, {{h}}:{{m}} {{a}}";case"fr":return"{{D}} {{MM}}, {{Y}} &agrave; {{H}} h {{m}}";case"ja":return"{{Y}}/{{M}}/{{DD}} {{H}}:{{m}}";case"pt":return"{{D}} de {{MM}} de {{Y}}, {{h}}:{{m}} {{a}}";default:return"{{MM}} {{D}}, {{Y}}, at {{h}}:{{m}} {{a}}"}}}},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=[755],i=[360,361],a={INFORMATION_STORAGE:1,BASIC_ADS:2,CREATE_PERSONALISED_ADS:3,SELECT_PERSONALISED_ADS:4,CREATE_PERSONALISED_CONTENT_PROFILE:5,SELECT_PERSONALISED_CONTENT:6,MEASURE_AD_PERFORMANCE:7,MEASURE_CONTENT_PERFORMANCE:8,APPLY_MARKET_RESEARCH:9,DEVELOP_PRODUCTS:10}},26:function(e,t,n){"use strict";var r=n(72),i=n(49),a=n(157),o=n.n(a);function s(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!==r&&""!==r&&void 0!==r&&t.push(n+"="+r)}return t.join("&")}function c(e){return new Promise((function(t,n){setTimeout((function(){return n({type:"timeout",msg:"".concat(e,"ms timeout exceeded")})}),e)}))}function u(e){var t=e.url;return function(e){return Object(i.a)("xhr",e.type||"error",{url:t,status:e.status||0}),Promise.reject(e)}}function d(e){return new Promise((function(t,n){o()(e,(function(e,r){return e?n(e):t(r)}))}))}function l(e){return e.ok?Promise.resolve(e):Promise.reject({type:"error",status:e.status,statusText:e.statusText,response:e})}function f(e){return e.json()}function p(e){return e.text()}function h(e){if("dev"!==BZFD.Config.env)return e;var t=e.indexOf("?")>-1?"&":"?";return e+t+"eca385331012a621bc93fcda0a953a97"}t.a={get:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.type,a=void 0===i?"json":i,o=n.data,g=void 0===o?{}:o,m=n.params,v=void 0===m?{}:m,y=n.skipAuth,b=n.timeout;if(!e)return Promise.reject("URL parameter is required");var w=Object.assign({credentials:"same-origin"},v),_=e,k=s(g);switch(k&&(_+=(_.indexOf("?")>-1?"&":"?")+k),y&&(_=h(_)),a){case"json":t=Object(r.a)(_,w).then(l).then(f);break;case"text":t=Object(r.a)(_,w).then(l).then(p);break;case"jsonp":t=d(_);break;default:t=Promise.reject("Unsupported type ".concat(a))}return(b?Promise.race([c(b),t]):t).catch(u({url:e}))},post:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.data,a=n.type,o=void 0===a?"json":a,d=n.params,g=void 0===d?{}:d,m=n.skipAuth,v=void 0!==m&&m,y=n.raw,b=void 0!==y&&y,w=n.timeout;if(!e)return Promise.reject("URL parameter is required");if(!i)return Promise.reject("Can not send POST request without data");v&&(e=h(e));var _=Object.assign({headers:{"Content-type":"application/x-www-form-urlencoded"},credentials:"same-origin"},g);switch(_.method="POST",_.body=b?i:s(i),o){case"json":t=Object(r.a)(e,_).then(l).then(f);break;case"text":t=Object(r.a)(e,_).then(l).then(p);break;default:t=Promise.reject("Unsupported type ".concat(o))}return(w?Promise.race([c(w),t]):t).catch(u({url:e}))}}},27:function(e,t,n){"use strict";var r={};r.isMobileApp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CDN_URL?window.CDN_URL:window.location.href;return-1!==e.search("[?&]?s=mobile_app([&#]|$)")};r.isNewsApp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CDN_URL?window.CDN_URL:window.location.href;return-1!==e.search("[?&]?app=news([&#]|$)")};r.isNews2App=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CDN_URL?window.CDN_URL:window.location.href;return-1!==e.search("[?&]?app=buzznews([&#]|$)")};r.isIOS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CDN_URL?window.CDN_URL:window.location.href;return-1!==e.search("[?&]?os=ios([&#]|$)")};r.isAndroid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CDN_URL?window.CDN_URL:window.location.href;return-1!==e.search("[?&]?os=android([&#]|$)")};t.a=r},304:function(e,t,n){"use strict";(function(e){var r=n(305),i=n.n(r),a=n(225),o=n.n(a),s=n(57),c=n.n(s),u=n(50),d=n.n(u),l=n(5),f=n.n(l),p=n(22),h=n.n(p),g=n(25),m=n.n(g),v=n(33),y=n.n(v),b=n(63),w=n.n(b),_=n(20),k=n.n(_),T=n(64),O=n(38),S=n(308),E=n(40),C=n.n(E);function x(){this._modules={},this._plugins={},this._instances={},this._router=new S.a,this.inited=new C.a,this.active=new C.a,this.crashed=new C.a,this._inited=!1,this._active=!1,this._crashed=!1,this.crashed.add((function(){this._crashed=!0,this.log.error("CRASHED")}),this,Number.MAX_VALUE),this._router.sub("bfa/subscribe/{action}/{eventName}",this._subscribe,this,{action:["add","addOnce","remove"],eventName:function(e){return k()(e)&&e.length>0}}),this.inited.add((function(){this._inited=!0}),this,Number.MAX_VALUE),this.active.add((function(){this._active=!0}),this,Number.MAX_VALUE),this.Sandbox=function(e,t,n,r){return this.instanceId=t,this.moduleInited=new C.a,this.moduleActive=new C.a,this.fillModuleRoute=function(e){return"module/"+t+"/"+e},this.subOn=function(t,n,r){e._router.sub(t,n,r)},this.settings=n||{},this.moduleId=r,this.utils=e.utils,this.defs=e.defs,this},this.construct.dispatch(this)}x.prototype.log={error:function(e){window.console&&window.console.error("BFA [ BFACore ] "+e)},log:function(){},info:function(){},warn:function(){},enabled:function(){}},x.prototype.construct=new C.a,x.prototype.utils=T.a,x.prototype.defs=O.a,x.prototype._subscribe=function(e,t){return w()(e)&&w()(t)&&this[t.eventName]instanceof C.a&&y()(e.fn)&&e.context&&this[t.eventName][t.action](e.fn,e.context),this},x.prototype.registerModule=function(e,t,n){if(!0===this._inited)return this.log.warn("You can't register module after activation"),this;t=t||{};var r=this.utils.checkType("function",e,"module")||this.utils.checkType("object",t,"settings");if(r)throw new TypeError(r);if(!k()(n)&&k()(e.defaultId)&&(n=e.defaultId),!k()(n)||0===n.length)throw new TypeError("moduleId has to be specified (as third argument or as `id` property of module) and must be not empty string");return m()(this._modules,n)?(this.log.warn("module "+n+" was already registered"),this):(this.push("module/"+n+"/added"),this._modules[n]={Creator:e,settings:t,id:n},this)},x.prototype.plugin=function(e,t,n){if(!0===this._inited)return this.log.warn("You can't add plugins after activation"),this;t=t||{};var r=this.utils.checkType("function",e,"plugin")||this.utils.checkType("object",t,"settings");if(r)throw new TypeError(r);if(!k()(n)&&k()(e.defaultId)&&(n=e.defaultId),!k()(n)||0===n.length)throw new TypeError("pluginId has to be specified (as third argument or as `id` property of plugin) and must be not empty string");return m()(this._plugins,n)?(this.log.warn("plugin "+n+" was already registered"),this):(this._plugins[n]={Creator:e,instance:null,settings:t,id:n},this)},x.prototype.activatePlugins=function(){if(!0!==this._crashed){var e=[],t={},n=this;try{this.utils.forOwn(this._plugins,(function(r){!function r(i,a){h()(a)||(a=[]),a.push(i),t[i]=!0,f()(n._plugins[i],"Creator.require",[]).forEach((function(e){if(d()(n._plugins[e]))throw new Error("Can't resolve \""+e+'" for "'+i+'" plugin');if(a.indexOf(e)>=0)throw new Error('Circular dependency "'+e+'" is required by "'+i+'" plugin: '+a.join(" -> "));t[e]||r(e,a.slice(0))}),n),e.indexOf(i)<0&&e.push(i)}(r.id)}),this);for(var r=0;r<e.length;r++){var i=e[r];null===this._plugins[i].instance?(this._plugins[i].instance=new this._plugins[i].Creator(this,this._plugins[i].settings),this.push("plugin/"+i+"/added")):this.log.warn("Plugin "+i+" already added and activated")}}catch(e){return void 0===window.BZFD||"live"!==window.BZFD.Config.env&&"prod"!==window.BZFD.Config.env||!window.raven||raven.captureException(e),this.log.error(e),this.log.error("Plugins activation interrupted"),void this.crashed.dispatch()}}else this.log.error("Plugins activation interrupted")},x.prototype.activate=function(){if(!0!==this._inited)if(this.activatePlugins(),!0!==this._crashed){var t=this;this.utils.forOwn(this._modules,(function(t){var n=t.Creator.defaultId,r=!1;k()(t.settings.instanceId)&&(n=t.settings.instanceId);var i=new this.Sandbox(this,n,t.settings,t.Creator.defaultId);if(h()(t.Creator.require)&&t.Creator.require.length>0)for(var a=0;a<t.Creator.require.length;a++){var o=t.Creator.require[a];if(!m()(this._plugins,o)||!m()(this._plugins[o].instance,"modifySBInstance")){r="Module "+t.Creator.defaultId+" require plugin "+o;break}this._plugins[o].instance.modifySBInstance(i)}if(!r){var s=new t.Creator(i);m()(s,"init")?(this._instances[n]={module:s,sandbox:i},this.push("module/"+n+"/added")):r="Constructor of module "+e.defaultId+" returned not valid object"}r&&(this.log.error(r),this.log.error("Instance "+n+" of module "+e.defaultId+" is not added properly"))}),this);var n=c()(this._instances).length,r=o()(n,(function(){t.inited.dispatch(t)})),a=o()(n,(function(){t.active.dispatch(t)}));this.utils.forOwn(this._instances,(function(e){e.sandbox.moduleInited.addOnce(r),e.sandbox.moduleActive.addOnce(a),i()(e.module.init)}),this)}else this.log.error("Activation interrupted");else this.log.warn("Already initialized")},x.prototype.push=function(){this._router.pub.apply(this._router,arguments)},t.a=x}).call(this,n(181)(e))},308:function(e,t,n){"use strict";var r=n(25),i=n.n(r),a=n(29),o=n.n(a),s=n(33),c=n.n(s),u=n(309),d=n.n(u),l=n(55),f=n.n(l),p=n(131),h=n.n(p),g=n(310),m=n.n(g),v=n(20),y=n.n(v),b=n(226),w=n.n(b);function _(){this._router=w.a.create(),this._routes={},this._router.normalizeFn=w.a.NORM_AS_OBJECT,this._router.ignoreState=!0,this._router.greedy=!0,this._routes=[]}_.prototype.pub=function(e){if(y()(e)){var t,n=m()(arguments,1);1===n.length?t=n[0]:n.length>1&&(t=n),this._router.parse(e,[t])}return this},_.prototype.modifySubCB=function(e,t,n){return h()(e,"track/")?function(){t.apply(n,f()(Array.prototype.slice.call(arguments)))}:t},_.prototype.sub=function(e,t,n,r,a){if(!y()(e)||d()(e))return this.log.error("`route` must be not empty string"),this;if(!c()(t))return this.log.error("`cb` must be a function"),this;if(r&&!o()(r))return this.log.error("`rules` must be an object or not specified"),this;var s=this.modifySubCB(e,t,n),u=a?"addOnce":"add";if(i()(this._routes,e)||r)if(r){var l=this._router.addRoute(e);l.rules=r,l.matched[u](s,n)}else this._routes[e].matched[u](s,n);else this._routes[e]=this._router.addRoute(e),this._routes[e].matched[u](s,n);return this},_.prototype.log={error:function(){},log:function(){},info:function(){},warn:function(){},enabled:function(){}},t.a=_},31:function(e,t,n){"use strict";var r=n(0),i={},a={},o={},s=document.getElementsByTagName("head")[0];var c={getUrl:function(){return"".concat(a.base_url,"/").concat(o.username,"/").concat(o.uri)}};c.getAuthor=function(){return(e="author",n="",i=r.b.find(s,'meta[property="'+e+'"]'),i.length>0&&(t=i[0].getAttribute("content"))&&(n=t),n).replace(/,$/g,"");var e,t,n,i},c.getTitle=function(){return i.title||document.title},c.getDescription=function(){return i.description},c.getCaption=function(){var e=document.domain,t=c.getAuthor();return t&&(e+=" | By "+t),e},c.getPicture=function(){return i.picture},c.getAll=function(){return{url:c.getUrl(),author:c.getAuthor(),title:c.getTitle(),description:c.getDescription(),caption:c.getCaption(),picture:c.getPicture()}},t.a=c},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(156),i=n.n(r),a=n(47),o=n(15);var s=n(26),c=n(6);function u(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var d,l,f=function(){return u(l,(function(){return Promise.resolve(y)}))},p=(d=function(e,t){if(e.asyncIsEligible)return u(e.asyncIsEligible(),(function(n){n&&w(e.name,t)}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(d.apply(this,e))}catch(e){return Promise.reject(e)}}),h=[],g={},m={},v={},y=[],b=function(){return c.a.getBuzzfeedSubdomainOrWildcard(window.location.hostname)};function w(e,t){m[e]=t,g[e]&&g[e].forEach((function(e){return e.resolve(t)}))}function _(){h.forEach((function(e){e.asyncIsEligible?p(e,null):e.isEligible()&&w(e.name,null)}))}function k(e,t){var n=window.location.hostname.replace("www","");c.a.remove(e,".".concat(n));var r=b(),i=r==="www.".concat(n)?14:1;c.a.set({name:e,value:t,days:i,domain:r})}function T(e,t){window.bfa(e,{data:t})}function O(e){return Object.keys(e).forEach((function(t){var n="".concat(t,"_version"),r=e[t],i=r.value,a=r.version,o=r.error,s=r.resolved;if(o){var u={type:"ExperimentServerError",name:t,error:o};return v[t]=u,void(g[t]&&g[t].forEach((function(e){return e.resolve(null)})))}if(s&&(i=i||"control"),w(t,i),null===i){var d=b();return c.a.remove(t,d),void c.a.remove(n,d)}y.push([t,r.id,r.version,r.value,r.variant_id].join("|"));var l=c.a.get(t)===String(i),f=c.a.get(n)===String(a);l&&f||(k(t,i),k(n,a),T("".concat("track/abtest","/").concat(t),{experiment:t,variation:r}))})),y}function S(e,t){var n=[];h.forEach((function(e){"boolean"==typeof e.storeResponse&&e.storeResponse&&n.push(e.name)})),0!==n.length&&e.forEach((function(e){if(-1!==n.indexOf(e)){var r=t[e];if(!r||r.error||null===r.value)w(e,null);else{var i=e+"_metadata",a=r;a=JSON.stringify(a),a=escape(a),c.a.get(i)!==a&&k(i,a)}}}))}function E(e){return Object(o.c)(window.location.search)["abeagle_".concat(e)]}t.a={registerExperiments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h=e,l=null},getExperimentMetaData:function(e){var t={};return e.forEach((function(e){var n=c.a.get(e+"_metadata");try{n=unescape(n),n=JSON.parse(n),t[e]=n}catch(e){return}})),t},getExperimentVariant:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rejectErrors,r=void 0===n||n,i=t.defaultVariantIfUnbucketed,a=void 0===i?"control":i,o=t.errorVariant,s=void 0===o?null:o,c=E(e);if(c)return Promise.resolve(c);var u,d=h.filter((function(t){return t.name===e}))[0],l=v[e];return d?d.isEligible()||d.asyncIsEligible||(l={type:"ExperimentNotEligible",name:e}):l={type:"ExperimentNotFound",name:e},l?!1===r?(this.defaultErrorHandler(l),u=Promise.resolve(s)):u=Promise.reject(l):u=e in m?Promise.resolve(m[e]):new Promise((function(t,n){g[e]?g[e].push({resolve:t,reject:n}):g[e]=[{resolve:t,reject:n}]})),null!==a&&(u=u.then((function(e){return null===e?a:e}))),u},isOn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on";return i()(t)?Promise.reject("onValue cannot be null or undefined"):this.getExperimentVariant(e,{rejectErrors:!1}).then((function(e){return e===t}))},defaultErrorHandler:function(e){if(e instanceof Error)throw e;if("prod"!==window.BZFD.Config.env)switch(e.type){case"ExperimentNotFound":console.log('Experiment "'.concat(e.name,'" is not registered'));break;case"ExperimentNotEligible":console.log('Experiment "'.concat(e.name,'" is not eligible'));break;case"ExperimentServerError":console.log("Experiment ".concat(e.name," error: ").concat(e.error))}},getVariants:function(e){if(e)return h.forEach((function(e){var t=c.a.get(e.name);e.asyncIsEligible?p(e,t):e.isEligible()&&w(e.name,t)})),Promise.resolve();if(l)return Promise.resolve();var t=h.filter((function(e){return e.isEligible()})).map((function(e){return e.name}));return t.length?this.requestVariants(t):Promise.resolve()},requestVariants:function(e){var t=(new Date).getTime();return Object(a.a)({env:BZFD.Config.env}).then((function(n){return l=s.a.get("".concat(window.BZFD.Config.abeagle.url,"/public/v2/experiment_variants"),{data:{experiment_names:e.join(";"),user_id:n,client_id:"buzz_web"},timeout:1500}).then((function(n){T("track/abeagle/request",{responseTime:Date.now()-t}),O(n),S(e,n)})).catch(_)}))},requestVariantsAsync:function(e){try{var t=this;if(!e.asyncIsEligible)return;return u(e.asyncIsEligible(),(function(n){if(delete e.asyncIsEligible,n){e.isEligible=function(){return!0};var r=c.a.get(e.name);r?w(e.name,r):t.requestVariants([e.name])}else w(e.name,null)}))}catch(e){return Promise.reject(e)}},saveExperiments:function(e){void 0!==e.experimentsMap&&void 0!==e.experimentNames&&(O(e.experimentsMap),S(e.experimentNames,e.experimentsMap))},start:function(e){var t=this;this.getVariants(e),e?e.start(h):h.forEach((function(e){if(e.asyncIsEligible)t.requestVariantsAsync(e);else if(e.isEligible()){var n=c.a.get(e.name);n&&w(e.name,n)}else w(e.name,null)}))},reset:function(){h=[],g={},v={},m={},l=null,y=[]}}},38:function(e,t,n){"use strict";var r={platform:{desktop:1,mobileweb:2,bflite:3},bfaMode:{develop:1,prod:2,test:3},trackingBehavior:{byDefault:1,ifSpecified:2}};Object.freeze(r),t.a=r},4:function(e,t,n){"use strict";n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return _})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return S}));var r=n(39),i=n.n(r),a=n(33),o=n.n(a),s=n(5),c=n.n(s),u=n(49);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v={};function y(e,t){return e+"-"+t.id}function b(e){var t=new Date(1e3*e).toISOString().substr(11,8);return e<3600&&(t=t.substr(3,5)),t.replace(/^0+(\d:)/,"$1")}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.bfa&&window.bfa instanceof Function&&window.bfaBinder&&window.bfa(e,t)}function _(){if(screen.orientation&&screen.orientation.type)return screen.orientation.type.replace("-primary","");if(window.orientation)return 90===Math.abs(window.orientation)?"landscape":"portrait";if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return"portrait";if(window.matchMedia("(orientation: landscape)").matches)return"landscape"}return"landscape"}v.getKeys=function(e){var t;if(Object.keys)return Object.keys(e);for(var n in t=[],e)e.hasOwnProperty(n)&&t.push(n);return t},v.getUniqueEventName=y,v.capitalize=function(e){return"string"!=typeof e?e:e.replace(/\w+/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},v.hasQueryString=function(e){return e.indexOf("?")>-1},v.removeHash=function(e){return(e+="").indexOf("#")>-1?e.substr(0,e.indexOf("#")):e},v.removeQueryString=function(e){return(e+="").indexOf("?")>-1?-1===e.indexOf("#")?e.substr(0,e.indexOf("?")):e.substr(0,e.indexOf("?"))+e.substr("#",e.length):e},v.getQueryString=function(e){var t="";return(e=v.removeHash(e)).indexOf("?")>-1&&(t=e.substr(e.indexOf("?"),e.length)),t},v.getHash=function(e){return(e+="").indexOf("#")>-1?e.substr(e.indexOf("#"),e.length):""},v.queryStringToObject=function(e){if(""===e||null==e)return{};var t,n=e.split("&"),r={};return v.each(n,(function(e,n){""===(t=n.split("="))[1]&&(t[1]=null),r[t[0]]=t[1]})),r},v.objectToQueryString=function(e){var t=[];return v.each(e,(function(e,n){t.push(e+"="+n)})),"?"+t.join("&")},v.getBaseUrl=function(e){return e=v.removeHash(e),e=v.removeQueryString(e)},v.addParams=function(e,t){var n,r,i=v.getQueryString(e),a=v.getHash(e);return e=v.removeHash(e),e=v.removeQueryString(e),i=v.queryStringToObject(i.substr(1,i.length)),v.each(t,(function(e,t){n=t[0],r=t[1],i[n]=r})),e+v.objectToQueryString(i)+a},v.removeParams=function(e,t){var n=v.getBaseUrl(e),r=v.getQueryString(e),i=v.getHash(e),a=v.queryStringToObject(r.substr(1,r.length));return v.each(t,(function(e,t){delete a[t]})),n+v.objectToQueryString(a)+i},v.prepareUrl=function(e,t){var n=[];return v.each(t,(function(e,t){void 0!==t&&n.push([e,encodeURIComponent(t)])})),v.addParams(e,n)},v.redirect=function(e){"string"==typeof e&&e&&(window.location.href=e)},v.openPopup=function(e,t){if("string"==typeof e&&e){var n="_blank",r="";if(t&&t.height&&t.width){var i=window.screen.height/2-t.height/2,a=window.screen.width/2-t.width/2;r="scrollbars=yes, toolbar=0, status=0, width="+t.width+", height="+t.height+", top="+i+", left="+a,n=t.name?t.name:n}window.open(e,n,r)}},v.urlToId=function(e){var t=e;try{t=new URL(e).pathname}catch(e){}return"/"===t.charAt(0)&&(t=t.slice(1,t.length)),t.replace(/\//g,"_")},v.each=function(e,t){if(Array.isArray(e))e.forEach((function(e,n){return t(n,e)}));else for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},v.extend=i.a,v.getQueryParams=function(){if("undefined"==typeof window)return{};var e=window.location.search.substring(1),t={};return e&&e.split("&").forEach((function(e){var n=e.split("="),r=decodeURIComponent(n[0]),i=decodeURIComponent(n.slice(1).join("="));t[r]=i})),t},v.addQueryParam=function(e,t,n){return(e=e||window.location.href)+(e.split("?")[1]?"&":"?")+t+"="+n},v.largeNumberNotation=function(e){return e<1e3?e:e<1e4?e.toString().charAt(0)+","+e.toString().substring(1):e>=1e6?(e/1e6).toFixed(e%1e6!=0)+"M":(e/1e3).toFixed(e%1e3!=0)+"K"},v.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},v.min=function(){return Math.min.apply(Math,Array.prototype.filter.call(arguments,(function(e){return!isNaN(+e)})))},v.toQueryString=function(e){var t=[];return this.each(e,(function(e,n){null!==n&&""!==n&&void 0!==n&&t.push(e+"="+n)})),t.join("&")},v.getMessageHandler=function(e){return function(t,n){var r=e[t];"function"==typeof r&&r.call(this,n)}},v.getEventHandler=function(e){return function(t,n,r){var i=e[r];"function"==typeof i&&i.call(this,t,n)}},v.padLeft=function(e,t,n){for(var r=n-e.toString().length,i="",a=0;a<r;a++)i+=t;return i+e},v.freeFormFormat=function(e){return e.replace(/["'"“’ ]/g,"").toLowerCase()},v.secondsToTimeStamp=b,v.timeSince=function(e){var t,n=["year","years"],r=["month","months"],i=["day","days"],a=["hour","hours"],o=["minute","minutes"],s=["just now"],c=Math.floor(((new Date).getTime()-new Date(e).getTime())/1e3);return(t=Math.floor(c/31536e3))>=1?{type:"year",value:t,text:t+" "+(1===t?n[0]:n[1])+" ago"}:(t=Math.floor(c/2592e3))>=1?{type:"month",value:t,text:t+" "+(1===t?r[0]:r[1])+" ago"}:(t=Math.floor(c/86400))>=1?{type:"day",value:t,text:t+" "+(1===t?i[0]:i[1])+" ago"}:(t=Math.floor(c/3600))>=1?{type:"hour",value:t,text:t+" "+(1===t?a[0]:a[1])+" ago"}:(t=Math.floor(c/60))>1?{type:"minute",value:t,text:t+" "+(1===t?o[0]:o[1])+" ago"}:{type:"now",value:"",text:s[0]}},v.bulkDelete=function(e,t){v.each(e,(function(e,n){delete t[n]}))},v.bfaTrack=w,v.getScreenOrientation=_,v.isIOSIPad="undefined"!=typeof navigator&&!!navigator.userAgent.toLowerCase().match(/ipad/),v.isIOSMobile="undefined"!=typeof navigator&&!!navigator.userAgent.toLowerCase().match(/iphone|ipod/);var k=v.isIOSIPad||v.isIOSMobile;v.isIOS=k;var T="undefined"!=typeof window&&(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString());function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e;return function(){return t++}}v.isSafari=T,v.createScript=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.head,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(r,i){var a=document.createElement("script");a.onload=function(){return r(a)},a.onerror=function(e){Object(u.a)("script","error",{url:c()(e,"currentTarget.src","").split("?")[0]}),i("Script failed to load")},a.src=e,a.async=n,t.appendChild(a)}))},v.createStyleSheet=function(e){return new Promise((function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=function(){return t(r)},r.onerror=function(){return n("".concat(e," failed to load"))},document.head.appendChild(r)}))},v.stripHTML=function(e){var t=Array.isArray(e)?[]:{},n=document.createElement("div");switch(m(e)){case"string":return n.innerHTML=e,n.textContent||"";case"object":return v.each(e,(function(e,n){return t[e]=v.stripHTML(n)})),t}return e},v.truncate=function(e,t){if(!e||!e.textContent||!e.textContent.length)return 0;var n=e.textContent,r=e.textContent.substring(0,t),i=e.innerHTML?e.innerHTML.substring(0,t):null;if(!e.innerHTML||r===i)return e.textContent=n===r?r:r.replace(/\s*$/,"")+"...",r.length;var a=0;return v.each(e.childNodes,(function(n,r){a>=t?e.removeChild(r):a+=v.truncate(r,t-a)})),e.textContent.length},v.decorateWithMixins=function(e){if(!o()(e))throw new TypeError("".concat(e," is not a function"));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(e,t){if(void 0===e)throw new TypeError("Mixin at position ".concat(t," is undefined"))}));var i=[e];return n.forEach((function(e){var t=i[0],n=function(e){l(n,e);var t=p(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(t);o()(e)&&(e=e(t.prototype)),Object.assign(n.prototype,e),i.unshift(n)})),i[0]},v.idGenerator=O;var S=function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.unsubscribe,a=void 0===i?function(){}:i;d(this,e);var o=new Promise((function(e,r){t=e,n=r}));return o.resolve=t,o.reject=n,o.unsubscribe=a,o};v.Deferred=S,v.moduleIsInContext=function(){return!0},t.c=v},45:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.head,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(r,i){var a=document.createElement("script");a.onload=function(){return r(a)},a.onerror=function(){i("Script at url ".concat(e," failed to load"))},a.src=e,a.async=n,a.type="text/javascript",t.appendChild(a)}))}n.d(t,"a",(function(){return r}))},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(48);function i(e,t,n){var r,i,a,o,s,c,u;for(this.version="1.0.1",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(t,10)>0?t:0,this.salt="string"==typeof e?e:"","string"==typeof n&&(this.alphabet=n),r="",i=0,o=this.alphabet.length;i!==o;i++)-1===r.indexOf(this.alphabet[i])&&(r+=this.alphabet[i]);if(this.alphabet=r,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(i=0,o=this.seps.length;i!==o;i++)-1===(a=this.alphabet.indexOf(this.seps[i]))?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,a)+" "+this.alphabet.substr(a+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(1===(s=Math.ceil(this.alphabet.length/this.sepDiv))&&s++,s>this.seps.length?(c=s-this.seps.length,this.seps+=this.alphabet.substr(0,c),this.alphabet=this.alphabet.substr(c)):this.seps=this.seps.substr(0,s)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),u=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,u),this.seps=this.seps.substr(u)):(this.guards=this.alphabet.substr(0,u),this.alphabet=this.alphabet.substr(u))}i.prototype.encode=function(){var e,t,n="",r=Array.prototype.slice.call(arguments);if(!r.length)return n;for(r[0]instanceof Array&&(r=r[0]),e=0,t=r.length;e!==t;e++)if("number"!=typeof r[e]||r[e]%1!=0||r[e]<0)return n;return this._encode(r)},i.prototype.decode=function(e){return e.length&&"string"==typeof e?this._decode(e,this.alphabet):[]},i.prototype.encodeHex=function(e){var t,n,r;if(e=e.toString(),!/^[0-9a-fA-F]+$/.test(e))return"";for(t=0,n=(r=e.match(/[\w\W]{1,12}/g)).length;t!==n;t++)r[t]=parseInt("1"+r[t],16);return this.encode.apply(this,r)},i.prototype.decodeHex=function(e){var t,n,r=[],i=this.decode(e);for(t=0,n=i.length;t!==n;t++)r+=i[t].toString(16).substr(1);return r},i.prototype._encode=function(e){var t,n,r,i,a,o,s,c,u,d,l,f=this.alphabet,p=e.length,h=0;for(r=0,i=e.length;r!==i;r++)h+=e[r]%(r+100);for(n=t=f[h%f.length],r=0,i=e.length;r!==i;r++)a=e[r],o=n+this.salt+f,f=this.consistentShuffle(f,o.substr(0,f.length)),t+=s=this.hash(a,f),r+1<p&&(c=(a%=s.charCodeAt(0)+r)%this.seps.length,t+=this.seps[c]);for(t.length<this.minHashLength&&(u=(h+t[0].charCodeAt(0))%this.guards.length,(t=this.guards[u]+t).length<this.minHashLength&&(u=(h+t[2].charCodeAt(0))%this.guards.length,t+=this.guards[u])),d=parseInt(f.length/2,10);t.length<this.minHashLength;)(l=(t=(f=this.consistentShuffle(f,f)).substr(d)+t+f.substr(0,d)).length-this.minHashLength)>0&&(t=t.substr(l/2,this.minHashLength));return t},i.prototype._decode=function(e,t){var n,r,i,a,o=[],s=0,c=new RegExp("["+this.guards+"]","g"),u=e.replace(c," "),d=u.split(" ");if(3!==d.length&&2!==d.length||(s=1),void 0!==(u=d[s])[0]){for(n=u[0],u=u.substr(1),c=new RegExp("["+this.seps+"]","g"),s=0,r=(d=(u=u.replace(c," ")).split(" ")).length;s!==r;s++)i=d[s],a=n+this.salt+t,t=this.consistentShuffle(t,a.substr(0,t.length)),o.push(this.unhash(i,t));this._encode(o)!==e&&(o=[])}return o},i.prototype.consistentShuffle=function(e,t){var n,r,i,a,o,s;if(!t.length)return e;for(a=e.length-1,o=0,s=0;a>0;a--,o++)s+=n=t[o%=t.length].charCodeAt(0),i=e[r=(n+o+s)%a],e=(e=e.substr(0,r)+e[a]+e.substr(r+1)).substr(0,a)+i+e.substr(a+1);return e},i.prototype.hash=function(e,t){var n="",r=t.length;do{n=t[e%r]+n,e=parseInt(e/r,10)}while(e);return n},i.prototype.unhash=function(e,t){var n,r=0;for(n=0;n<e.length;n++)r+=t.indexOf(e[n])*Math.pow(t.length,e.length-n-1);return r};var a=n(61);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=parseInt(1e10*Math.random(),10),l=Object(a.a)(),f=function(e){if(0!==e.indexOf(".")){var t=/[0-9A-Za-z]+/.exec(e);return null!==t&&t[0]===e&&parseInt(e,36)}var n=e.substr(1,2);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt,r=void 0===n?null:n;return new i(r).decode(e)[0]}(e.substr(3),{salt:n})},p=function(e){var t=parseInt(25*Math.random()+10,10).toString(36)+parseInt(25*Math.random()+10,10).toString(36);return".".concat(t).concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.salt,r=void 0===n?null:n,a=t.length,o=void 0===a?32:a;return new i(r,o).encode(e)}(e,{salt:t,length:0}))},h=function(e){var t=decodeURIComponent(e).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=c(t,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,s({},n[0],n[1]))}),{}),n=t.u,r=t.uuid;return{legacyIdentifier:f(n||""),identifier:r}},g=function(e){var t=e.env,n=e.legacy,i=void 0===n||n,a=new r.a({namespace:"bf-xdomain-tracking",cookieName:"bf_visit",daysExpiry:1e4,env:t});return a.get().then((function(e){var t=h(e),n=t.legacyIdentifier,r=t.identifier,o=p(d);return i?n||(a.set(encodeURIComponent("u=".concat(o,"&uuid=").concat(r||l,"&v=2"))),d):r||n?r||String(n):(a.set(encodeURIComponent("u=".concat(o,"&uuid=").concat(l,"&v=2"))),l)}))}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(74),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev";return"dev"===e?"dev.buzzfeed.io":"prod"===e||"app-west"===e?"buzzfeed.com":"stage.buzzfeed.com"};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=t.cookieName,a=t.daysExpiry,o=t.env,s=t.namespace,c=t.sourceOfTruthDomain,u=t.throttleTimer,d=void 0===u?null:u,l=t.secureOnly,f=void 0===l||l,p=t.localDomain,h=void 0===p?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.location.hostname,n=["buzzfeed","buzzfeednews","tasty"],r=t.split(".")[0];return r&&"stage"!==r&&-1===n.indexOf(r)&&t.split(".").length>=3&&(t=t.substring(r.length+1)),t}():p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o="live"===o?"prod":o,this.xDomainCookies=new r.a({sourceOfTruthDomain:c||i(o),namespace:s,localDomain:h,env:o}),this.cookieName=n,this.daysExpiry=a,this.secureOnly=f,this.throttleTimer=d,this.inMemoryValue=null}var t,n,o;return t=e,(n=[{key:"get",value:function(){var e=this;return this.throttle?Promise.resolve(this.inMemoryValue):this.xDomainCookies.get(this.cookieName).then((function(t){return e.inMemoryValue=t,e.resetThrottle(),t}))}},{key:"set",value:function(e){return this.inMemoryValue=e,this.xDomainCookies.set({name:this.cookieName,value:e,days:this.daysExpiry,secureOnly:this.secureOnly})}},{key:"resetThrottle",value:function(){var e=this;this.throttleTimer&&(this.throttle=setTimeout((function(){e.throttle=null}),this.throttleTimer))}}])&&a(t.prototype,n),o&&a(t,o),e}()},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(96),i=["samplingRate"];function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"==typeof window.bfa){i.some((function(e){return n.hasOwnProperty(e)}))&&(a=n,n={});var o=a,s=o.samplingRate,c=o.platform,u={data:{target:e,value:t,tags:n}};c&&(u.data.platform=a.platform),s&&(s>1?"dev"===window.BZFD.Config.env&&console.error("Your sampling rate is above 100%."):Object.assign(u,{opts:{samplingRate:s}})),window.bfa(r.b,u)}else void 0!==window.raven&&window.raven.captureException(new Error("Instrumentation tracking issue: BFA is not available"))}},56:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},6:function(e,t,n){"use strict";function r(e,t){var n=e.match(t);return n&&n.length?n[0]:null}function i(){return"prod"===window.BZFD.Config.env?"buzzfeed.com":window.location.hostname}t.a={getBuzzfeedSubdomainOrWildcard:function(e){var t=r(e,"(dev|stage|www).(buzzfeed|buzzfeednews).(com|io)$");return t||r(e,".?[a-z]+.[a-z]+$")},get:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var a=r[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return t},set:function(e){var t=e.name,n=e.value,r=e.days,a=e.domain;a=a||i();var o="";if(r){var s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3),o="; expires=".concat(s.toGMTString())}return document.cookie="".concat(t,"=").concat(n).concat(o,"; path=/; domain=").concat(a)},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i();return this.set({name:e,value:"",days:-1,domain:t})}}},61:function(e,t,n){"use strict";t.a=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^function(){try{return crypto.getRandomValues(new Uint8Array(1))[0]}catch(e){return 255*Math.random()}}()&15>>e/4).toString(16)}))}},62:function(e,t,n){"use strict";t.a=function(e,t,n){for(var r=n?e:e.parentNode;r&&r!==document;){if(r.matches(t))return r;r=r.parentNode}return null}},630:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n.n(r),a={Core:n(304).a},o=n(128),s=n(4),c=n(39),u=n.n(c);var d=function(e){this.defaultConfig={start:"@",end:";",separator:":",objectPropertySeparator:",",objectStart:"{",objectEnd:"}",arrayStart:"[",arrayEnd:"]",parts:{action:"a",description:"d",location:"l",data:"e",options:"o"}},this.config=e||this.defaultConfig,this.parse=function(e){var t={},n=e.getAttribute("data-bfa");return""===(t=null===n||""===n?{action:"",location:"",description:"",data:{},options:{}}:this.processAttribute(n)).location&&(t.location=this.findLocation(e.parentElement)),t.action=this.grabDataSource(t.action),t.location=this.grabDataSource(t.location),t.description=this.grabDataSource(t.description),t},this.processAttribute=function(e){var t=[];for(var n in this.config.parts)if(this.config.parts.hasOwnProperty(n)){var r=e.indexOf(this.config.start+this.config.parts[n]+this.config.separator);r>-1&&t.push({part:n,idx:r})}t=t.sort((function(e,t){return e.idx<t.idx?-1:e.idx===t.idx?0:1}));for(var i={action:"",location:"",description:"",data:"",options:""},a=0;a<t.length;a++)a<t.length-1?i[t[a].part]=e.substring(t[a].idx,t[a+1].idx):i[t[a].part]=e.substring(t[a].idx);for(var o in i)i.hasOwnProperty(o)&&(i[o]=i[o].replace(this.config.start+this.config.parts[o]+this.config.separator,"").trim(),i[o][i[o].length-1]===this.config.end&&(i[o]=i[o].substring(0,i[o].length-1)));return i.data=this.convertToObject(i.data),i.options=this.convertToObject(i.options),i},this.findLocation=function(e){for(;null!==e&&e.getAttribute;){var t=e.getAttribute("data-bfa");if(null!==t&&""!==t){var n=this.processAttribute(t);if(""===n.location){e=e.parentElement;continue}return n.location}e=e.parentElement}return""},this.objectParseMode={propertyName:1,propertyValue:2,propertyArray:4},this.convertToObject=function(e){var t={};if("string"!=typeof(e=e.trim().replace('"',"").replace("'",""))||0!==e.indexOf(this.defaultConfig.objectStart)||e.indexOf(this.defaultConfig.objectEnd)!==e.length-1)return t;for(var n="",r="",i="",a=this.objectParseMode.propertyName,o=1;o<e.length-1;o++)if(e[o]!==this.defaultConfig.separator||a!==this.objectParseMode.propertyName)switch(a){case this.objectParseMode.propertyArray:if(r||(r=[]),e[o]===this.defaultConfig.arrayEnd){r.push(i.trim()),t[n.trim()]=r,n="",i="",r="",a=this.objectParseMode.propertyName;break}if(e[o]===this.defaultConfig.objectPropertySeparator){r.push(i),i="";break}i+=e[o];break;case this.objectParseMode.propertyValue:e[o]===this.defaultConfig.objectPropertySeparator||o===e.length-2?(t[n.trim()]=(r+(e[o]!==this.defaultConfig.objectPropertySeparator?e[o]:"")).trim(),n="",r="",a=this.objectParseMode.propertyName):r+=e[o];break;case this.objectParseMode.propertyName:e[o]!==this.defaultConfig.objectPropertySeparator&&(n+=e[o])}else e[o+1]&&e[o+1]===this.defaultConfig.arrayStart?(a=this.objectParseMode.propertyArray,o++):a=this.objectParseMode.propertyValue;return t},this.grabDataSource=function(e){if(e.indexOf("source:")>-1){var t=e.replace("source:","").trim();if(t&&window){for(var n=window,r=t.split("."),i=r.pop(),a=0;a<r.length;a++)n=n[r[a]];var o=n[i];if(o)return o()}}return e}},l=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");function f(e){if(null==e||!("string"==typeof e||e instanceof String))return null;var t=e.match(l);return{url:t[0]?t[0]:"",scheme:t[2]?t[2]:"",host:t[4]?t[4]:"",path:t[5]?t[5]:"",cleanedPath:t[5]?t[5]:"",query:t[7]?t[7]:"",fragment:t[9]?t[9]:""}}function p(e){return!(e.scheme.length>0&&e.host.length>0&&-1===e.host.indexOf("buzzfeed.com")||0===e.url.indexOf("javascript:;"))}function h(e){return!(!e.host||!e.scheme||e.host.indexOf("buzzfeed.com")>-1||-1===e.scheme.indexOf("http"))}function g(e){return e.path+(e.query?"?"+e.query:"")}function m(e){return e.url}function v(e){var t=f(e);return null===t?"":h(t)?m(t):p(t)?g(t):""}function y(e){return!(e&&e.ignore instanceof Array)||-1===e.ignore.indexOf("bfaBinder")&&-1===e.ignore.indexOf("all")||e.force instanceof Array&&-1!==e.force.indexOf("bfaBinder")}var b={ATagWithInternalLinkHandler:function(e,t){if(null===e||"A"!==e.nodeName||e.hasAttribute("data-bfa"))return!1;var n=f(e.getAttribute("href"));if(null===n||!p(n))return!1;var r=["track/click/Nav-Link",{t:"click",n:"Nav-Link",l:(new d).findLocation(e),data:{url:g(n)}}];return t&&window[t]instanceof Function&&window[t].apply(this,r),!0},ATagWithExternalLinkHandler:function(e,t){if(null===e||"A"!==e.nodeName||e.hasAttribute("data-bfa"))return!1;var n=f(e.getAttribute("href"));if(!n||!h(n))return!1;var r={t:"click",n:"Exit-Link",l:(new d).findLocation(e),data:{url:m(n),anchorDesc:e.innerHTML}};if(e.hasAttribute("data-affiliate")){for(var i={},a=0,o=e.attributes.length;a<o;a++){var s=e.attributes[a];s.name.startsWith("data-vars")&&(i[s.name.replace("data-vars-","")]=s.value)}r.data=Object.assign(r.data,i)}var c=["track/click/Exit-Link",r];return t&&window[t]instanceof Function&&window[t].apply(this,c),!0},ATagDefaultHandler:function(e,t,n){if(null===e||"A"!==e.nodeName||!e.hasAttribute("data-bfa"))return!1;var r=(new d).parse(e);if(!y(r.options))return!1;r.data.url=v(e.getAttribute("href"));var i=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return t&&window[t]instanceof Function&&window[t].apply(this,i),!0},SelectTagChangedClickHandler:function(e,t){if(null===e||"SELECT"!==e.nodeName)return!1;var n=e.options[e.selectedIndex];if(!n)return!1;if(!n.hasAttribute("data-bfa"))return!1;var r=(new d).parse(n);if(!y(r.options))return!1;n.hasAttribute("data-href")&&(r.data.url=v(n.getAttribute("data-href")));var i=["track/click/"+r.action,{t:"click",n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return t&&window[t]instanceof Function&&window[t].apply(this,i),!0},DefaultHandler:function(e,t,n){if(null===e||!e.hasAttribute("data-bfa"))return!1;var r=(new d).parse(e);if(!y(r.options))return!1;var i=["track/"+n+"/"+r.action,{t:n,n:r.action,l:r.location,d:r.description,data:r.data,opt:r.options}];return t&&window[t]instanceof Function&&window[t].apply(this,i),!0}};var w=function(e,t){this.events=[],this.matches=document.documentElement.matches||document.documentElement.webkitMatchesSelector||document.documentElement.mozMatchesSelector||document.documentElement.oMatchesSelector||document.documentElement.msMatchesSelector,this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t],r=0;r<n.length;r++)n[r].trackMethod=t,this.events.push(n[r])},this.subscribeForEvents=function(){var e=document.body||document.documentElement,t=this;this.events=this.events.map((function(n){return n.handler=t.getHandler(),e.addEventListener(n.event,n.handler),n}))},this.getHandler=function(){var e=this;return function(t){if(!t.bfaHandled&&t.target)for(var n=t.target;n;){for(var r=0;r<e.events.length;r++){var i=e.events[r];if(n.nodeType&&9!==n.nodeType&&i.event===t.type&&e.matches.call(n,i.selector)){var a=i.options?i.options.handlers:null;e.trackElement(n,i.trackMethod,a),t.bfaHandled=!0;break}}if(t.bfaHandled)break;n=n.parentNode}}},this.trackElement=function(e,n,r){if(r)for(var i=0;i<r.length&&!b[r[i]](e,t,n);i++);else(0,b.DefaultHandler)(e,t,n)},this.disable=function(){for(var e=document.body||document.documentElement,t=0;t<this.events.length;t++)e.removeEventListener(this.events[t].event,this.events[t].handler)}};var _=function(e,t){this.events=[],this.init=function(){this.processMapping(),this.subscribeForEvents()},this.processMapping=function(){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t],r=0;r<n.length;r++)n[r].trackMethod=t,this.events.push(n[r])},this.subscribeForEvents=function(){var e=this;this.events=this.events.map((function(t){var n=document.querySelector(t.selector);if(n){var r=t.options?t.options.handlers:null;t.handler=e.getHandler(t.trackMethod,r),n.addEventListener(t.event,t.handler)}return t}))},this.getHandler=function(e,t){var n=this;return function(r){n.trackElement(this,e,t),r.bfaHandled=!0}},this.trackElement=function(e,n,r){if(r)for(var i=0;i<r.length&&!b[r[i]](e,t,n);i++);else(0,b.DefaultHandler)(e,t,n)},this.disable=function(){for(var e=0;e<this.events.length;e++){var t=document.querySelector(this.events[e].selector);t&&t.removeEventListener(this.events[e].event,this.events[e].handler)}}};var k=function(e){this.visibilityProps={hidden:null,visibilityChange:null},this.trackedByVisibility=!1,this.trackedByUnload=!1;var t=this;this.init=function(){this.visibilityProps=this.getVisibilityProps(),this.visibilityProps.hidden&&this.visibilityProps.visibilityChange&&document.addEventListener(this.visibilityProps.visibilityChange,this.visibilityHandler,!1),window.addEventListener("beforeunload",this.unloadHandler,!1),window.addEventListener("unload",this.unloadHandler,!1),window.addEventListener("pagehide",this.unloadHandler,!1)},this.visibilityHandler=function(){document[t.visibilityProps.hidden]||t.trackedByVisibility||(t.trackedByVisibility=!0,window[e].apply(this,["track/page/exit"]))},this.unloadHandler=function(){t.trackedByUnload||(t.trackedByUnload=!0,window[e].apply(this,["track/page/exit"]))},this.getVisibilityProps=function(){var e=null,t=null;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}}};var T=function(e,t){this.mapping=e,this.executable=t,this.parser=new d,this.init=function(){var e=this,t=0,n=setInterval((function(){t>=10&&clearInterval(n),window.FB&&(clearInterval(n),e.processMappings()),t++}),1e3)},this.processMappings=function(){if(void 0!==e)for(var t=0;t<e.length;t++)"like"===e[t]&&this.bindLikes(),"unlike"===e[t]&&this.bindDislikes(),"comment"===e[t]&&this.bindComments()},this.bindLikes=function(){var e=this;window.FB.Event.subscribe("edge.create",(function(t,n){if(null!==n&&n.getAttribute){var r=e.parser.parse(n),i=["track/click/"+r.action,{t:"click",n:r.action,d:r.description,l:r.location,data:r.data,opt:r.options}];e.executable&&window[e.executable]instanceof Function&&window[e.executable].apply(this,i)}}))},this.bindDislikes=function(){var e=this;window.FB.Event.subscribe("edge.remove",(function(t,n){var r=e.parser.parse(n),i=["track/click/"+r.action,{t:"click",n:r.action,d:r.description,l:r.location,data:r.data,opt:r.options}];e.executable&&window[e.executable]instanceof Function&&window[e.executable].apply(this,i)}))},this.bindComments=function(){var e=this;window.FB.Event.subscribe("comment.create",(function(){e.executable&&window[e.executable]instanceof Function&&window[e.executable].apply(this,["track/click/Submit",{t:"click",n:"Submit",d:"Facebook",l:"Contributions"}])}))}},O=n(65),S=n.n(O);var E=function(e,t){this.options=e||{},this.executable=t,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){var e,t,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight+1,i=document.documentElement.clientTop||document.body.clientTop||0,a=n+r,o=0;for(e=0;e<this.options.bottomBounds.length&&!(t=document.querySelector(this.options.bottomBounds[e]));e++);if(t){var s=t.getBoundingClientRect().top+n-i;a>=s&&o<100&&(o=100),a<=s&&(o=a/s*100)}for(e=0;e<this.options.checkpoints.length;e++)if(this.points[e].percentage<=o&&!this.points[e].passed){this.points[e].passed=!0;var c=["track/scroll/post",{t:"scroll",n:"post",d:this.points[e].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,c)}},this.fillCheckPoints=function(){for(var e=0;e<this.options.checkpoints.length;e++)this.points.push({percentage:this.options.checkpoints[e],passed:!1})}};var C=function(e,t){this.options=e||{},this.executable=t,this.points=[],this.init=function(){this.fillCheckPoints()},this.track=function(){if(this.options.elementMode.element&&this.options.elementMode.expected){var e,t=window.pageYOffset+document.documentElement.clientHeight+1,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientTop||document.body.clientTop||0,i=document.querySelectorAll(this.options.elementMode.element),a=0;for(e=0;e<i.length;e++){i[e].getBoundingClientRect().top+n-r<=t&&a++}var o=a/this.options.elementMode.expected*100,s=null;for(e=0;e<this.options.bottomBounds.length&&!(s=document.querySelector(this.options.bottomBounds[e]));e++);if(s)t>=s.getBoundingClientRect().top+n-r&&o<100&&(o=100);for(e=0;e<this.options.checkpoints.length;e++)if(this.points[e].percentage<=o&&!this.points[e].passed){this.points[e].passed=!0;var c=["track/scroll/post",{t:"scroll",n:"post",d:this.points[e].percentage.toString()}];this.executable&&window[this.executable]instanceof Function&&window[this.executable].apply(this,c)}}},this.fillCheckPoints=function(){for(var e=0;e<this.options.checkpoints.length;e++)this.points.push({percentage:this.options.checkpoints[e],passed:!1})}};var x=function(e,t){this.options=e||{},this.executable=t,this.scrollHandler=null,this.keyPressHandler=null,this.init=function(){window&&e&&t&&(this.scrollHandler=this.getScrollHandler(),this.keyPressHandler=this.getKeyPressScrollHandler(),this.scrollHandler&&window.addEventListener("scroll",S()(this.scrollHandler,200)),this.keyPressHandler&&document.addEventListener("keydown",S()(this.keyPressHandler,200)))},this.getScrollHandler=function(){var t=null,n=null;return this.options.pixelMode.enabled&&(t=new E(this.options,this.executable)).init(),this.options.elementMode.enabled&&(n=new C(this.options,this.executable)).init(),function(){e.elementMode.enabled?document.querySelectorAll(e.elementMode.element).length!==e.elementMode.expected?n.track():e.pixelMode.enabled&&t.track():e.pixelMode.enabled&&t.track()}},this.getKeyPressScrollHandler=function(){var e=this;return function(t){if(!(32===t.which||33===t.which||34===t.which||38===t.which||40===t.which||t.ctrlKey&&35===t.which||t.ctrlKey&&36===t.which&&e.scrollHandler))return null;e.scrollHandler()}}},M=new d;var I=function(e,t){var n=this;this.options=e||{},this.executable=t,this.init=function(){e&&e.locators&&t&&"function"==typeof window[t]&&(this.observedElements=[],this.elementQuery=this.options.locators.join(","),this.updateTargets())},this.updateTargets=function(){var e=Array.from(document.querySelectorAll(n.elementQuery)),t=e.filter((function(e){return n.observedElements.indexOf(e)<0}));n.observedElements=e,t.length&&n.observeElements(t)},this.onObserve=function(e,t){e.forEach((function(e){var r,i,a;e.isIntersecting&&(r=window[n.executable],i=e.target,a=M.parse(i),r("track/scroll/impression",{t:"scroll",n:a.action,l:a.location,d:a.description,data:a.data,opt:a.options}),t.unobserve(e.target))}))},this.observeElements=function(e){var t=new IntersectionObserver(n.onObserve,{threshold:.5});e.forEach((function(e){return t.observe(e)}))}};var P=function(e){this.inited=!1;var t=this;window.bfaYoutubeIframePlayerTracking||(window.bfaYoutubeIframePlayerTracking=function(e){t.processVideo(e)}),this.init=function(){this.inited=!0},this.processVideo=function(n){var r=n.getIframe(),i=r.getAttribute("id"),a=r.getAttribute("data-published"),o=r.getAttribute("src");n.addEventListener("onStateChange",(function(n){if(t.inited){var r={id:i,duration:n.target.getDuration(),currentTime:n.target.getCurrentTime(),published:a,url:n.target.getVideoUrl(),source:"youtube",type:"embed"};switch(n.data){case 1:window[e].apply(this,["track/video/play",{data:r}]);break;case 2:window[e].apply(this,["track/video/pause",{data:r}]);break;case 0:window[e].apply(this,["track/video/finish",{data:r}]);break;case 3:window[e].apply(this,["track/video/startedBuffering",{data:r}])}}})),n.addEventListener("onError",(function(n){if(t.inited){var r={id:i,published:a,url:o,source:"youtube",errorCode:n.data};window[e].apply(this,["track/video/error",{data:r}])}}))}};var A=function(e){this.inited=!1;var t=this;function n(e){/^https?:\/\/player.vimeo.com/.test(e.origin)&&t.processVideo(e)}window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n,!1),this.init=function(){this.inited=!0},this.processVideo=function(n){var r=JSON.parse(n.data);if("ready"===r.event&&this.registerListeners(r.player_id),this.inited)switch(r.event){case"play":window[e].apply(this,["track/video/play",{data:t.getVideoData(r)}]);break;case"pause":window[e].apply(this,["track/video/pause",{data:t.getVideoData(r)}]);break;case"finish":window[e].apply(this,["track/video/finish",{data:t.getVideoData(r)}])}},this.registerListeners=function(e){var t=document.getElementById(e);t.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"play"}),"*"),t.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"pause"}),"*"),t.contentWindow.postMessage(JSON.stringify({method:"addEventListener",value:"finish"}),"*")},this.getVideoData=function(e){var t=document.getElementById(e.player_id);return{id:e.player_id,duration:e.data.duration,currentTime:e.data.seconds,published:t.getAttribute("data-published")||t.parentElement.getAttribute("data-published"),url:t.getAttribute("src"),source:"vimeo"}}};var F=function(e){var t=this;this.initCounter=0,this.init=function(){window.FB?window.FB.Event.subscribe("xfbml.ready",(function(e){"video"===e.type&&t.processVideo(e)})):this.initCounter<10&&(this.initCounter++,setTimeout((function(){t.init()}),500))},this.processVideo=function(t){var n=document.getElementById(t.id),r=t.instance,i={id:t.id,published:n.getAttribute("data-published"),url:n.getAttribute("data-video-url"),source:"facebook",type:"embed"};r.subscribe("startedPlaying",(function(){i.duration=t.instance.getDuration(),i.currentTime=t.instance.getCurrentPosition(),window[e].apply(this,["track/video/play",{data:i}])})),r.subscribe("paused",(function(){i.duration=t.instance.getDuration(),i.currentTime=t.instance.getCurrentPosition(),window[e].apply(this,["track/video/pause",{data:i}])})),r.subscribe("finishedPlaying",(function(){i.duration=t.instance.getDuration(),i.currentTime=t.instance.getCurrentPosition(),window[e].apply(this,["track/video/finish",{data:i}])})),r.subscribe("startedBuffering",(function(){i.duration=t.instance.getDuration(),i.currentTime=t.instance.getCurrentPosition(),window[e].apply(this,["track/video/startedBuffering",{data:i}])})),r.subscribe("finishedBuffering",(function(){i.duration=t.instance.getDuration(),i.currentTime=t.instance.getCurrentPosition(),window[e].apply(this,["track/video/finishedBuffering",{data:i}])})),r.subscribe("error",(function(){window[e].apply(this,["track/video/error",{data:i}])}))}};var D=function(){var e;this.domBinders=[],this.socialBinders=[],this.scrollBinders=[],this.generalBinders=[],this.videoBinders=[],this.parser=new d,this.init=function(){for(e=0;e<this.domBinders.length;e++)this.domBinders[e].init();for(e=0;e<this.socialBinders.length;e++)this.socialBinders[e].init();for(e=0;e<this.scrollBinders.length;e++)this.scrollBinders[e].init();for(e=0;e<this.generalBinders.length;e++)this.generalBinders[e].init();for(e=0;e<this.videoBinders.length;e++)this.videoBinders[e].init()},this.trigger=function(e){"updateTargets"===e.type&&this.scrollBinders.forEach((function(e){"function"==typeof e.updateTargets&&e.updateTargets()}))}};function N(){}N.prototype.buildConfig={bfaFunctionName:null,domBinder:{delegatedMapping:null,directMapping:null},generalBinder:{pageExitBinder:!1},inViewImpressionBinder:{enabled:!1,locators:[]},scrollBinder:{pixelMode:{enabled:!1},elementMode:{enabled:!1,element:"",expected:0},checkpoints:[],bottomBounds:[]},socialBinder:{facebookMapping:null},videoBinder:{youtube:!1,vimeo:!1,facebook:!1}},N.prototype.useDomDelegatedBinder=function(e){return this.buildConfig.domBinder.delegatedMapping=e,this},N.prototype.useDomDirectBinder=function(e){return this.buildConfig.domBinder.directMapping=e,this},N.prototype.usePageExitBinder=function(){return this.buildConfig.generalBinder.pageExitBinder=!0,this},N.prototype.useInViewImpressionBinder=function(e){return this.buildConfig.inViewImpressionBinder.enabled=!0,this.buildConfig.inViewImpressionBinder.locators=e,this},N.prototype.useScrollPixelModeBinder=function(){return this.buildConfig.scrollBinder.pixelMode.enabled=!0,this},N.prototype.useScrollElementsModeBinder=function(e,t){return this.buildConfig.scrollBinder.elementMode.enabled=!0,this.buildConfig.scrollBinder.elementMode.element=e,this.buildConfig.scrollBinder.elementMode.expected=t,this},N.prototype.useSocialBinder=function(e){return this.buildConfig.socialBinder.mapping=e,this},N.prototype.setBottomBoundElements=function(e){return this.buildConfig.bottomBounds=e,this},N.prototype.setPercentageCheckpoints=function(e){this.scrollBinder.checkpoints=e},N.prototype.useBfaFunction=function(e){this.bfaFunctionName=e},N.prototype.useVideoBinder=function(){this.buildConfig.videoBinder.youtube=!0,this.buildConfig.videoBinder.vimeo=!0,this.buildConfig.videoBinder.facebook=!0},N.prototype.build=function(){if(!this.buildConfig.bfaFunctionName)return null;var e=new D;if(this.buildConfig.domBinder.delegatedMapping){var t=new w(this.buildConfig.domBinder.delegatedMapping,this.buildConfig.bfaFunctionName);e.domBinders.push(t)}if(this.buildConfig.domBinder.directMapping){var n=new _(this.buildConfig.domBinder.directMapping,this.buildConfig.bfaFunctionName);e.domBinders.push(n)}if(this.buildConfig.generalBinder.pageExitBinder){var r=new k(this.buildConfig.bfaFunctionName);e.generalBinders.push(r)}if(this.buildConfig.socialBinder.facebookMapping){var i=new T(this.buildConfig.socialBinder.facebookMapping,this.buildConfig.bfaFunctionName);e.socialBinders.push(i)}if(this.buildConfig.videoBinder.youtube){var a=new P(this.buildConfig.bfaFunctionName);e.videoBinders.push(a)}if(this.buildConfig.videoBinder.vimeo){var o=new A(this.buildConfig.bfaFunctionName);e.videoBinders.push(o)}if(this.buildConfig.videoBinder.facebook){var s=new F(this.buildConfig.bfaFunctionName);e.videoBinders.push(s)}if(this.buildConfig.scrollBinder.elementMode.enabled||this.buildConfig.scrollBinder.pixelMode.enabled){var c=new x(this.buildConfig.scrollBinder,this.buildConfig.bfaFunctionName);e.scrollBinders.push(c)}if(this.buildConfig.inViewImpressionBinder.enabled){var u=new I({locators:this.buildConfig.inViewImpressionBinder.locators},this.buildConfig.bfaFunctionName);e.scrollBinders.push(u)}return e.init(),e};var j=N;function R(e,t){this.settings=t||{},this._binderBuilder=new j;var n=this;return e._router.sub("plugin/binder/activate",(function(t){u()(n.settings,t||{}),u()(n._binderBuilder.buildConfig,n.settings),e.domi.onDomReady((function(){var t=n._binderBuilder.build();null!==t&&(window.bfaBinder=t,e._router.sub("plugin/binder/trigger",window.bfaBinder.trigger.bind(window.bfaBinder)))}))}),this,null,!0),{}}window.bfaBinder={parser:new d},R.defaultId="binder",R.require=["domi"];var L=R,B=n(20),U=n.n(B),z=n(25),V=n.n(z),q=n(50),H=n.n(q),G=n(115),W=n.n(G),K=n(29),Z=n.n(K);function J(e,t,n,r,i,a){this.t=e||"",this.n=t||"",this.l=n||"",this.d=r||"",this.data=Z()(i)?i:{},this.opt=Z()(a)?a:{}}J.tryParse=function(e){var t=i()(e,"t",""),n=i()(e,"n","");return U()(t)&&0!==t.length&&U()(n)&&0!==n.length?new J(t,n,i()(e,"l",""),i()(e,"d",""),i()(e,"data",{}),i()(e,"opt",{})):null};var $=J,Q={logger:"loggerAppender",sessionStorage:"sessionStorageAppender"};function Y(e,t){t=t||{},this.defaultSettings={storageKeyName:"bfa_debugStore",appendersConfig:{}},this.defaultSettings.appendersConfig[e.defs.bfaMode.develop]=[Q.logger],this.defaultSettings.appendersConfig[e.defs.bfaMode.test]=[Q.sessionStorage,Q.logger],this.settings=W()(t,this.defaultSettings),this._bfaMode=e._generalSettings.mode,e._onGeneralSettingsChange.add((function(){this._bfaMode=e._generalSettings.mode}),this);var n=this;function r(t,r){if(t instanceof $&&r){if(!V()(n.settings.appendersConfig,n._bfaMode))return;for(var i=n.settings.appendersConfig[n._bfaMode],a=0;a<i.length;a++)V()(n,i[a])&&n[i[a]].trackEvent(this.instanceId,t,r)}else e.log.warn("DebugTracker: can't store event data for "+this.instanceId+": not valid arguments")}function i(e){if(!U()(e)||""===e)throw new Error("Error occurred on _createDebugTracker call: instanceId arg has to be not empty string");return{instanceId:e,trackEvent:r}}return this[Q.sessionStorage]={trackEvent:function(e,t,r){var i,a=sessionStorage.getItem(n.settings.storageKeyName);i=null===a?{pageHref:document.location.href}:JSON.parse(a),H()(i[e])&&(i[e]=[]),i[e].push({eventType:t.t,eventName:t.n,eventLocation:t.l,eventDescription:t.d,dataObject:r}),sessionStorage.setItem(n.settings.storageKeyName,JSON.stringify(i))}},this[Q.logger]={trackEvent:function(e,t,n){this.logger.event(e,t,n)}},this[Q.logger].logger=e.createLogger("DebugTracker_"+Q.logger),e.createDebugTracker=i,{modifySBInstance:function(e){e.debugTracker=i(e.instanceId)}}}Y.defaultId="debugTracker",Y.require=["generalSettings","logger"],Y.debugTrackerAppenderTypes=Q;var X=Y,ee=n(33),te=n.n(ee),ne=n(40),re=n.n(ne),ie=n(64);function ae(e){this._core=e,this._isDomReady=!1,this._domReady=new re.a,this._domReady.addOnce((function(){this._isDomReady=!0}),this,Number.MAX_VALUE);var t=this;return this._installDomi=function(e){e.domi={onDomReady:function(e,n){t._isDomReady?e.call(n):t._domReady.addOnce(e,n)},loadScript:function(e,t,n,r){var i=document.createElement("script");i.type=e.type||"text/javascript",i.charset=e.charset||"utf8",i.src=e.src,!1!==e.async&&(i.async=!0),H()(e.attrs)||ie.a.forOwn(e.attrs,(function(e,t){i.setAttribute(t,e)})),te()(t)&&(i.onload=function(){this.onerror=null,this.onload=null,t.apply(r)}),te()(n)&&(i.onerror=function(){this.onerror=null,this.onload=null,n.apply(r)});var a=document.body||document.getElementsByTagName("body")[0];a&&a.appendChild(i)}}},this._installDomi(e),function(){if("complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)if(document.addEventListener)document.addEventListener("DOMContentLoaded",t._domReady.dispatch,!1);else if(document.attachEvent)document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&t._domReady.dispatch()}));else{var e=window.onload;window.onload=function(){e&&e(),t._domReady.dispatch()}}else t._domReady.dispatch()}(),{modifySBInstance:function(e){t._installDomi(e)}}}ae.defaultId="domi";var oe=ae,se=n(160),ce=n.n(se),ue=n(36),de=n.n(ue),le=n(23),fe=n.n(le),pe=n(57),he=n.n(pe),ge=n(38),me=n(9);function ve(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var ye=me.a.rules;function be(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function we(e){var t={trackingBehavior:ge.a.trackingBehavior.byDefault,extTrackerGlobalName:"fbq",tracker:null,configMapsDelegate:null,extFilesPaths:[],facebookId:"260954170738952",isEnabled:Promise.resolve(!0)};this._inited=!1,this._active=!1,this.settings=de()(e.settings||{},t),this.generalSettings=e.getGeneralSettings();var n=this,r=["ViewContent","Search","Lead","AddToCart","AddToWishlist","InitiateCheckout","AddPaymentInfo","Purchase","CompleteRegistration"];this.activate=be((function(){var t=this;return ve(t.settings.isEnabled,(function(r){var i,a,o=!1;if(r&&!n._active&&n._inited)return i=function(r){if(o)return r;t.page&&n.user&&(t._active=!0,e.moduleActive.dispatch())},(a=function(){if(!t.tracker)return function(){if(window[t.settings.extTrackerGlobalName])return t.tracker=window[t.settings.extTrackerGlobalName],ve(ye.fetchCCPAOptOut(),(function(e){e?t.tracker("dataProcessingOptions",["LDU"],1,1e3):t.tracker("dataProcessingOptions",[]),t.tracker("init",t.settings.facebookId)}));o=!0}()}())&&a.then?a.then(i):i(a)}))})),e.onGeneralSettingsChange((function(){n.generalSettings=e.getGeneralSettings()}),this),e.onPageReady((function(){n.page=e.getPageInfo(),n.activate()}),this),e.onPageChanged((function(){n.page=e.getPageInfo()}),this),e.onUserReady((function(){n.user=e.getUserInfo(),n.activate()}),this),e.onUserChanged((function(){n.user=e.getUserInfo()}),this),this.getEventInfo=function(t,n,r){var i=e.tryConvertToEventInfo(t,n,r);return e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i.data.user=this.user,i):(e.log.warn(e.moduleId+" cannot track current event. Type: "+n+"; Name: "+r+";"),null)},this._trackDefault=function(t,n){if(t&&null!==n&&he()(n).length>0){var i="";"fbEventName"in n&&(i=n.fbEventName,delete n.fbEventName),ce()(r,i)?this.tracker("track",i,n):this.tracker("trackCustom",i,n),e.debugTracker.trackEvent(t,n)}},this._trackPage=function(t){if(this._active){var n=this.getEventInfo(t,"page","view");if(e.mapper.isExists("track/page/view")){var r=e.mapper.map("track/page/view",n,{});this._trackDefault(n,r)}else e.log.warn("Mapping for `track/page/view` doesn't exist")}else e.moduleActive.addOnce(fe()(this._trackPage,this,t),this)},e.subOn("track/page/view",this._trackPage,this),this._trackClick=be((function(t,n){if(this._active){var r,a,o=this.getEventInfo(t,"click",n.eventName);if(o){if(e.mapper.isExists("track/click")){var s=e.mapper.map("track/click",o,{});return this._trackDefault(o,s),i()(this.page,"post.flags.ad",!1)&&"Share"===o.n&&(r=de()({n:"Lead"},o),a=e.mapper.map("track/click",r,{}),this._trackDefault(r,a)),ve()}e.log.warn("Mapping for `track/click` doesn't exist")}}else e.moduleActive.addOnce(fe()(this._trackClick,this,t,n),this)})),e.subOn("track/click/{eventName}",this._trackClick,this),this._trackQuiz=function(t,n){if(this._active){var r=this.getEventInfo(t,"quiz",n.eventName);if(e.mapper.isExists("track/quiz")){var i=e.mapper.map("track/quiz",r,{});this._trackDefault(r,i)}else e.log.warn("Mapping for `track/quiz` doesn't exist")}else e.moduleActive.addOnce(fe()(this._trackQuiz,this,t,n),this)},e.subOn("track/quiz/{eventName}",this._trackQuiz,this),this._trackNewsletterSuccess=function(t,n){if(this._active){var r=this.getEventInfo(t,"signup","email-success"),i=e.mapper.map(n.request_,r,{});this._trackDefault(r,i)}else e.moduleActive.addOnce(fe()(this._trackNewsletterSuccess,this,t),this)},e.subOn("track/signup/email-success",this._trackNewsletterSuccess,this),e.subOn("track/click/newsletter-signup",this._trackNewsletterSuccess,this),this._trackVideo=function(t,n){if(this._active){var r=this.getEventInfo(t,"video",n.eventName);if(e.mapper.isExists("track/video")){var i=e.mapper.map("track/video",r,{});this._trackDefault(r,i)}else e.log.warn("Mapping for `track/video` doesn't exist")}else e.moduleActive.addOnce(fe()(this._trackVideo,this,t,n),this)},e.subOn("track/video/{eventName}",this._trackVideo,this),this._trackAbVariation=function(t,n){if(this._active){var r=this.getEventInfo(t,"abtest",n.eventName);if(e.mapper.isExists("track/abtest")){var i=e.mapper.map("track/abtest",r,{});this._trackDefault(r,i)}else e.log.warn("Mapping for `track/abtest` doesn't exist")}else e.moduleActive.addOnce(fe()(this._trackAbVariation,this,t,n),this)},e.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._trackImpression=function(t,n){if(this._active)if(e.mapper.isExists("track/scroll/impression")){var r=this.getEventInfo(t,"impression",n.eventName),i=e.mapper.map("track/scroll/impression",r,{});this._trackDefault(r,i)}else e.log.warn("Mapping for `track/scroll/impression` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackImpression,this,t,n),this)},e.subOn("track/scroll/impression",this._trackImpression,this),this._trackBids=function(t,n){if(this._active)if(e.mapper.isExists("track/bids")){var r=this.getEventInfo(t,"bids",n.eventName),i=e.mapper.map("track/bids",r,{});this._trackDefault(r,i)}else e.log.warn("Mapping for `track/bids` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackBids,this,t,n),this)},e.subOn("track/bids",this._trackBids,this),this._declare=function(){var e,t=window;t.fbq||(e=t.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},t._fbq||(t._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[])},this.init=function(){n.settings.configMapsDelegate(e.mapper),n.tracker=n.settings.tracker,!n.tracker&&!window[n.extTrackerGlobalName]&&n.settings.extFilesPaths&&n.settings.extFilesPaths.length>0&&(n._declare(),e.domi.onDomReady((function(){n.settings.extFilesPaths.forEach((function(t){e.domi.loadScript({src:t},n.activate,null,n)}))}),n)),n._inited=!0,e.moduleInited.dispatch(),n.activate()}}we.defaultId="FacebookIntegration",we.require=["logger","domi","pageInfo","userInfo","mapper","trackingUtils","generalSettings","debugTracker"];var _e=we,ke=n(21),Te=n(11),Oe=function(e){var t=Te.b.isXsmall()||Te.b.isSmall()?"mobile":"desktop",n=ke.a.getEdition();function r(e){return function(e){return-1!==e.n.indexOf("dfp")&&(e.n.match("|")&&(e.n=e.n.replace(/\|/g,"/")),!0)}(e)&&("display_card"===e.data.type||"dfp_native_video"===e.data.type)}var a=e.getOrCreateMap("track/page/view");a.addMapTo("page","").mapFrom("data.url"),a.addMapTo("fbEventName").mapFrom((function(e){return i()(e,"data.url","").match(/\?p=(\d)/)?"PageScroll":"PageView"}));var o=e.getOrCreateMap("track/signup/email-success");o.addMapTo("fbEventName","newsletterSignup"),o.addMapTo("category").mapFrom("d");var s=e.getOrCreateRouter("track/click"),c=s.createConfigForRoute((function(e){return"Share"===e.l}));c.addMapTo("share","").mapFrom("d"),c.addMapTo("fbEventName","Share");var u=e.getOrCreateRouter("track/video").createConfigForRoute((function(e){return"in_feed"===e.l}));u.applyTemplateByName("gaTemplate"),u.addMapTo("action","").mapFrom("n"),u.addMapTo("label","").mapFrom("d"),u.addMapTo("value","").mapFrom((function(e){var t;return e.opt&&(e.opt.dimension5&&screen.orientation&&screen.orientation.type&&(e.opt.dimension5=screen.orientation.type.replace("-primary","")),t=e.opt),t})),u.addMapTo("fbEventName","Video");var d=e.createMapTemplate("adUnit");d.addMapTo("creative_id","").mapFrom((function(e){return e.data.creativeId})),d.addMapTo("unit_type","").mapFrom((function(e){return e.data.type})),d.addMapTo("mode",t),d.addMapTo("page_edition",n),d.addMapTo("page_type","feed"),d.addMapTo("unit","").mapFrom((function(e){return e.l}));var l=e.getOrCreateMap("track/bids");l.addMapTo("fbEventName","CompleteRegistration"),l.addMapTo("value").mapFrom((function(e){return e.data.value})),l.addMapTo("currency").mapFrom((function(e){return e.data.currency}));var f=e.getOrCreateRouter("track/scroll/impression").createConfigForRoute((function(e){return r(e)}));f.addMapTo("fbEventName","UnitImpression"),f.applyTemplateByName("adUnit");var p=s.createConfigForRoute((function(e){return r(e)}));p.addMapTo("fbEventName","UnitClick"),p.applyTemplateByName("adUnit")};function Se(e){var t={trackingBehavior:e.defs.trackingBehavior.byDefault,extTrackerGlobalName:"ga",googleAnalyticsId:"",tracker:null,extFilePath:"//www.google-analytics.com/analytics.js",configMapsDelegate:null};this._inited=!1,this._active=!1,this.settings=de()(e.settings||{},t),this.generalSettings=e.getGeneralSettings();var n=this;return this.activate=function(){if(!this._active&&this._inited){if(!this.tracker&&this.generalSettings.mode===e.defs.bfaMode.prod){if(!window[this.settings.extTrackerGlobalName])return;this.tracker=window[this.settings.extTrackerGlobalName],this.tracker("create",this.settings.googleAnalyticsId,"auto"),this.tracker("set","anonymizeIp",!0)}this.page&&this.user&&(this._active=!0,e.moduleActive.dispatch())}},e.onGeneralSettingsChange((function(){this.generalSettings=e.getGeneralSettings()}),this),e.onPageReady((function(){this.page=e.getPageInfo(),this.activate()}),this),e.onUserReady((function(){this.user=e.getUserInfo(),this.activate()}),this),this._trackDefault=function(t,n,r){if(this._active){if(t||n||r){"videoplayer"!==n||t||(t={});var i=e.tryConvertToEventInfo(t,n,r);if(e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,i))if(i.data.page=this.page,i.data.user=this.user,e.mapper.isExists("track/"+n)){var a,o=e.mapper.map("track/"+n,i,{label:"(no label)",value:(a=t.opt,screen&&screen.orientation&&screen.orientation.type&&a&&(a.dimension5=screen.orientation.type.replace("-primary","")),a||"")});switch(this.generalSettings.mode){case e.defs.bfaMode.prod:this.tracker("send","event",o.category,o.action,o.label,o.value);break;default:e.debugTracker.trackEvent(i,o)}}else e.log.error("Mapping for `track/"+n+"` doesn't exist")}}else e.moduleActive.addOnce(fe()(this._trackDefault,this,t,n,r),this)},this._trackPage=function(t){var n="";if(this._active){var r=e.tryConvertToEventInfo(t,"page","view");if(e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,r))if(e.mapper.isExists("track/page/view")){var i=e.mapper.map("track/page/view",r);i.page.match(/p=\d+/)&&(n="?"+i.page.match(/p=\d+/)[0]),he()(i).length>0?(this.generalSettings.mode===e.defs.bfaMode.prod&&(this.tracker("set","page",window.location.pathname),this.tracker("send","pageview",window.location.pathname+n,{dimension1:"feedpager"})),e.debugTracker.trackEvent(r,i)):e.log.warn("Event won't be tracked to GA, because object is empty after mapping. Type: "+r.t+"; Name: "+r.n+";")}else e.log.error("Mapping for `track/page/view` doesn't exist")}else e.moduleActive.addOnce(fe()(this._trackPage,this,t),this)},e.subOn("track/page/view",this._trackPage,this),this._trackClick=function(e,t){e.n.match("|")&&(e.n=e.n.replace(/\|/g,"/")),t.eventName.match("|")&&(t.eventName=t.eventName.replace(/\|/g,"/")),this._trackDefault(e,"click",t.eventName)},e.subOn("track/click/{eventName}",this._trackClick,this),this._trackPageExit=function(e,t){e={n:"Page-Exit",data:{scrolledDistance:Math.round(window.scrollY/(document.documentElement.offsetHeight-window.innerHeight)*100)}},this._trackDefault(e,"page",t.eventName),this._trackDefault({l:"Feed",n:"last-cell-visible",d:n.feedIndex},"update/feedindex")},this._trackGDPR=function(e,t){this._trackDefault(e,"gdpr",t.eventName)},this._trackNewsletter=function(e,t){this._trackDefault(e,"signup",t.eventName)},this._trackVideo=function(e,t){"share"!==t.eventName&&this._trackDefault(e,"video",t.eventName)},this._updateFeedIndex=function(e){e.feedItemTrack&&e.cardIndex&&(n.feedIndex=e.cardIndex)},this._trackAbVariation=function(e,t){this._trackDefault(e,"abtest",t.abTestName)},this._trackScroll=function(e,t){void 0===e.data||void 0===e.d||"1"!==e.d&&"0"!==e.d||void 0===e.data.type||"package/hp-shopping"!==e.data.type?("NewsletterPromo"===e.l||"welcome-message"===e.l||0===e.l.indexOf("Package")||0===e.l.indexOf("mega-package")||"Nav"===e.l||-1!==e.l.indexOf("Feed:package")||-1!==e.l.indexOf("buzzblocks/Package"))&&this._trackDefault(e,"scroll",t.eventName):this._trackDefault(e,"scroll",t.eventName)},e.subOn("track/scroll/{eventName}",this._trackScroll,this),e.subOn("track/video/{eventName}",this._trackVideo,this),e.subOn("track/page/exit",this._trackPageExit,this),e.subOn("track/signup/{eventName}",this._trackNewsletter,this),e.subOn("track/gdpr/{eventName}",this._trackGDPR,this),e.subOn("track/update/feedindex",this._updateFeedIndex,this),e.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._trackVideoPlayer=function(e,t){this._trackDefault(e,"videoplayer",t.eventName)},e.subOn("track/videoplayer/{eventName}",this._trackVideoPlayer,this),this._trackRawEvent=function(t){if(this._active){var n=e.tryConvertToEventInfo(t,"raw","ga");if(e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,n)){var r=n.data,i=r.category,a=r.action,o=r.label,s=void 0===o?"(no label)":o,c=r.value,u=void 0===c?null:c;switch(this.generalSettings.mode){case e.defs.bfaMode.prod:this.tracker("send","event",i,a,s,u);break;default:console.groupCollapsed("GA tracked raw event"),console.table({category:i,action:a,label:s,value:u}),console.groupEnd()}}}else e.moduleActive.addOnce(fe()(this._trackRawEvent,this,t),this)},e.subOn("track/raw/ga",this._trackRawEvent,this),{init:function(){U()(n.settings.googleAnalyticsId)?te()(n.settings.configMapsDelegate)?(n.settings.configMapsDelegate(e.mapper),n.generalSettings.mode===e.defs.bfaMode.prod?(n.tracker=n.settings.tracker,n.tracker||window[n.settings.extTrackerGlobalName]||!n.settings.extFilePath||e.domi.loadScript({src:n.settings.extFilePath},n.activate,null,n)):n.tracker={},n._inited=!0,e.moduleInited.dispatch(),n.activate()):e.log.error("Value of configMapsDelegate (in settings) property must be a `function` that have to set up mapping"):e.log.error("Must set googleAnalyticsId")}}}Se.defaultId="GAIntegration",Se.require=["logger","domi","trackingUtils","generalSettings","mapper","debugTracker","pageInfo","userInfo"];var Ee=Se;var Ce=n(130);var xe=function(e){e.addUtility("capitalize",(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),e.addUtility("cleanLink",(function(e){return e.replace("http://","").replace("https://","").replace("www.","")})),e.addUtility("getIdFromObjectId",(function(e){return"string"==typeof e&&e.indexOf(":")>-1&&(e=e.split(":")[1]),e})),e.addUtility("isNumeric",(function(e){return!isNaN(parseFloat(e))&&isFinite(e)}));var t=e.getOrCreateRouter("track/click"),n=e.getOrCreateRouter("track/video");e.createMapTemplate("gaTemplate").addMapTo("category","").mapFrom((function(e){var t;return"in_feed"===e.l&&(e.l="Feed"),e.data.type?(e.data.type.match("news-package")&&(e.data.type="news"),t=e.l+":"+e.data.type):t=e.l,t}));var r=t.createConfigForRoute((function(e){return-1!==e.n.indexOf("dfp")}));r.applyTemplateByName("gaTemplate"),r.addMapTo("action","").mapFrom((function(e){var t=e.n;return e.n.match("|")&&(t=e.n.replace(/\|/g,"/")),t})),r.addMapTo("label","").mapFrom((function(e){return e.d}));var a=t.createConfigForRoute((function(e){return"Advertise"===e.n}));a.applyTemplateByName("gaTemplate"),a.addMapTo("action","").mapFrom("t"),a.addMapTo("category","").mapFrom("l"),a.addMapTo("label","").mapFrom("d");var o=t.createConfigForRoute((function(e){return"awareness"===e.l}));o.applyTemplateByName("gaTemplate"),o.addMapTo("action","").mapFrom("t"),o.addMapTo("category","").mapFrom("l"),o.addMapTo("label","").mapFrom("d");var s=n.createConfigForRoute((function(e){return"in_feed"===e.l}));s.applyTemplateByName("gaTemplate"),s.addMapTo("action","").mapFrom("n"),s.addMapTo("label","").mapFrom("d");var c=t.createConfigForRoute((function(e){return"Feed"===e.l&&!["FeedItem","Nav-Link"].includes(e.n)}));c.addMapTo("action","click"),c.addMapTo("category").mapFrom((function(e){var t="in_feed"===e.l?"Feed":e.l;if(e.data.type){var n=e.data.type.match("news-package")?"news":e.data.type;return"list:".concat(t,"/").concat(n)}return"list:".concat(t)})),c.addMapTo("label").mapFrom((function(e){return"".concat(e.data.obj_type||"buzz",":").concat(e.data.obj_id)})),c.addMapTo("value").mapFrom((function(e){return parseInt(e.d,10)||0}));var u=t.createConfigForRoute((function(e){return"Share"===e.l}));u.addMapTo("category","Share"),u.addMapTo("action","").mapFrom((function(e){return"facebook"===e.d?"click:feed-module":"open-share-sheet"===e.n?"click:open-share-sheet":"click:feed-module/share-sheet"})),u.addMapTo("label","").mapFrom((function(e){return e.d})),e.getOrCreateMap("track/page/view").addMapTo("page","").mapFrom("data.url");var d=e.getOrCreateRouter("track/page").createConfigForRoute((function(e){return"Page-Exit"===e.n}));d.applyTemplateByName("gaTemplate"),d.addMapTo("action","").mapFrom("n",[e.formatters.strToLowerCase]),d.addMapTo("label","").mapFrom((function(e){return e.data.scrolledDistance+"%"}));var l=e.getOrCreateRouter("track/update/feedindex").createConfigForRoute((function(e){return"Feed"===e.l}));l.applyTemplateByName("gaTemplate"),l.addMapTo("action","last-cell-visible"),l.addMapTo("label","").mapFrom((function(e){return e.d}));var f=t.createConfigForRoute((function(e){return"feed-filters"===e.l}));f.addMapTo("category","").mapFrom((function(e){return void 0!==e.data.page_name&&e.data.page_name?"Feed/"+e.data.page_name:e.l})),f.addMapTo("action","").mapFrom("n"),f.addMapTo("label","").mapFrom("d"),f.addMapTo("value",null);var p=t.createConfigForRoute((function(e){return"Topic-Filters"===e.l}));p.addMapTo("category","Topic-Filters"),p.addMapTo("action","filter:click"),p.addMapTo("label","").mapFrom("d");var h=t.createConfigForRoute((function(e){return"Bringme-Footer"===e.l}));h.addMapTo("category","Bringme-Footer"),h.addMapTo("action","link:click"),h.addMapTo("label","").mapFrom("d");var g=e.getOrCreateRouter("track/signup").createConfigForRoute((function(e){return"NewsletterPromo"===e.l}));g.addMapTo("action","").mapFrom("n"),g.addMapTo("category","").mapFrom("l"),g.addMapTo("label","").mapFrom((function(e){return e.d||"(no label)"}));var m=t.createConfigForRoute((function(e){return"NewsletterPromo"===e.l}));m.addMapTo("category","").mapFrom("l"),m.addMapTo("action","").mapFrom((function(e){return"click:"+e.n})),m.addMapTo("label","").mapFrom("d");var v=t.createConfigForRoute((function(e){return"FeedSearch"===e.l}));v.addMapTo("action","").mapFrom("n"),v.addMapTo("label","").mapFrom("data.d"),v.addMapTo("category","").mapFrom((function(e){return void 0!==e.data.page_name&&e.data.page_name?"Feed/"+e.data.page_name:e.l})),v.addMapTo("value",null),Object(Ce.b)(e),function(e){var t=e.getOrCreateRouter("track/videoplayer"),n=t.createDefaultConfig(),r=e.createMapTemplate("videoTemplate");n.applyTemplateByName("videoTemplate"),n.addMapTo("category","VideoPlayer"),n.addMapTo("action","").mapFrom((function(e){return"video_finish"===e.n?"video:playback":e.n})),n.addMapTo("label","").mapFrom((function(e){return"video_finish"===e.n?"100%":e.data.play_start_type})),r.addMapTo("value","").mapFrom((function(e){return{dimension3:e.data.video_id,dimension4:e.data.video_title,dimension5:e.data.orientation,dimension14:e.data.duration||0,dimension15:e.data.video_ts,dimension16:e.data.youtube_id}}))}(e),function(e){var t={feedpager:"Feed",bpager:"Buzz"},n=e.getOrCreateRouter("track/click"),r=e.getOrCreateRouter("track/scroll"),a=n.createConfigForRoute((function(e){return"Package/reviews"===e.l}));a.addMapTo("category","").mapFrom((function(e){return V()(t,i()(e,"data.page.platform"))?t[i()(e,"data.page.platform")]:i()(e,"data.page.platform")})),a.addMapTo("action","").mapFrom((function(e){return e.n.match("|")&&(e.n=e.n.replace(/\|/g,"/")),e.n})),a.addMapTo("label","").mapFrom("d"),a.addMapTo("value","").mapFrom((function(e){return{dimension6:i()(e,"data.url")}}));var o=r.createConfigForRoute((function(e){return"Package/reviews"===e.l}));o.addMapTo("category","").mapFrom((function(e){return V()(t,i()(e,"data.page.platform"))?t[i()(e,"data.page.platform")]:i()(e,"data.page.platform")})),o.addMapTo("action","impression"),o.addMapTo("label","").mapFrom("d")}(e),function(e){var t={feedpager:"Feed",bpager:"Buzz"},n=e.getOrCreateRouter("track/click"),r=e.getOrCreateRouter("track/scroll"),a=n.createConfigForRoute((function(e){return"buzzblocks/Package"===e.l}));a.addMapTo("category","").mapFrom((function(e){return(V()(t,i()(e,"data.page.platform"))?t[i()(e,"data.page.platform")]:i()(e,"data.page.platform"))+":package"})),a.addMapTo("action","").mapFrom((function(e){return e.n.match("|")&&(e.n=e.n.replace(/\|/g,"/")),"click:"+e.n})),a.addMapTo("label","").mapFrom("d");var o=r.createConfigForRoute((function(e){return"buzzblocks/Package"===e.l}));o.addMapTo("category","").mapFrom((function(e){return(V()(t,i()(e,"data.page.platform"))?t[i()(e,"data.page.platform")]:i()(e,"data.page.platform"))+":package"})),o.addMapTo("action","impression"),o.addMapTo("label","").mapFrom((function(e){var t=e.d;return 0===e.n.indexOf("post|package")&&(t+=e.n.replace("post|package|","/")),t}))}(e),function(e){e||console.log("Cannot bind GA mapping for feed-header: No mapper defined");var t=e.getOrCreateRouter("track/click"),n=t.createConfigForRoute((function(e){return"FeedHeader"===e.l&&"FeedHeaderBrand"===e.n}));n.addMapTo("action","click:link"),n.addMapTo("category","feed_header"),n.addMapTo("label","brand");var r=t.createConfigForRoute((function(e){return"FeedHeader"===e.l&&"FeedHeaderSponsor"===e.n}));r.addMapTo("action","click:link"),r.addMapTo("category","feed_header"),r.addMapTo("label","sponsor")}(e);var y=t.createConfigForRoute((function(e){return"Package"===e.l||"mega-package"===e.l}));y.addMapTo("category","Feed").mapFrom((function(e){var t=e.l;return e.n.match("|")&&(t=":"+t.replace(/\|/g,"/")),"Feed"+t.toLowerCase()})),y.addMapTo("action","").mapFrom((function(e){return e.n.match("|")&&(e.n=e.n.replace(/\|/g,"/")),"click:"+e.n})),y.addMapTo("label","").mapFrom("d")},Me=n(55),Ie=n.n(Me);function Pe(e,t){var n={mode:e.defs.bfaMode.prod,debug:!1,isConsentRequired:!1,approvedModules:[]};this._core=e;var r=de()(t||{},n),i=new re.a;return this.setSettings=function(t){e._generalSettings=Ie()(t||{}),e._onGeneralSettingsChange.dispatch(Ie()(e._generalSettings))},this.updateSettings=function(t){e._generalSettings=u()(e._generalSettings||{},t||{}),e._onGeneralSettingsChange.dispatch(Ie()(e._generalSettings))},e._onGeneralSettingsChange=i,this.setSettings(r),this._core._router.sub("general/settings/set",this.setSettings,this),this._core._router.sub("general/settings/update",this.updateSettings,this),{modifySBInstance:function(t){t.getGeneralSettings=function(){return Ie()(e._generalSettings)},t.onGeneralSettingsChange=function(t,n){e._onGeneralSettingsChange.add(t,n)},t.isApproved=function(t){return!e._generalSettings.isConsentRequired||-1!==e._generalSettings.approvedModules.indexOf(t)}}}}Pe.defaultId="generalSettings";var Ae=Pe,Fe=n(131),De=n.n(Fe),Ne=n(311),je=n.n(Ne),Re=n(22),Le=n.n(Re);function Be(e,t){if(this.settings=de()(t||{},{varName:"bfa",eventsArrayName:"c"}),this.unhandledEventsArray=null,V()(window,this.settings.varName)){var n=i()(window,this.settings.varName);if(V()(n,this.settings.eventsArrayName)&&Le()(n[this.settings.eventsArrayName]))if(this.unhandledEventsArray=n[this.settings.eventsArrayName],this.unhandledEventsArray.length>0)je()(this.unhandledEventsArray,(function(e){return e[0]&&!De()(e[0],"track")&&!De()(e[0],"module")})).forEach((function(t){e.push.apply(e,t)}),this)}return e.inited.addOnce((function(){window[this.settings.varName]=function(){e.push.apply(e,arguments)},this.unhandledEventsArray&&this.unhandledEventsArray.length>0&&this.unhandledEventsArray.forEach((function(t){e.push.apply(e,t)}),this),window.location.search.indexOf("e2e_test")>-1&&document.documentElement.setAttribute("data-bfa-ready","true")}),this),{}}Be.defaultId="globalBfaEndpoint";var Ue=Be;function ze(e){return e instanceof Error?e.stack||e.message:e.toString()}function Ve(e,t){return{logLevel:t||1,log:function(e,t){Array.isArray(t)||(t=[t]),!0===Ve._enabled&&window.console&&window.console[e].apply(window.console,t)},event:function(e,t,n){if(3===this.logLevel){var r=e+" '"+t.t+"'";t.printType&&n.type&&(r=r+" '"+n.type+"'"),this.log("groupCollapsed",r),this.log("log","EventInfo"),this.log("table",[[t]]),this.log("log","DataObject"),this.log("table",[[n]]),t.prettyPrintData&&this.log("log",JSON.stringify(n,null,2)),this.log("groupEnd")}},error:function(t){this.logLevel>=1&&this.log("error","BFA ["+e+"] "+ze(t))},warn:function(t){this.logLevel>=2&&this.log("warn","BFA ["+e+"] "+ze(t))}}}Ve._enabled=!1,Ve.enabled=function(e){return void 0!==e&&(Ve._enabled=!!e),Ve._enabled};var qe=Ve;function He(e){function t(t){t.mode===e.defs.bfaMode.develop||!0===t.debug?!0!==e.log.enabled()&&e.log.enabled(!0):!0===e.log.enabled()&&e.log.enabled(!1)}return e.log=qe("BFACore",e._generalSettings.logLevel),e._router.log=e.log,e.createLogger=function(t){return U()(t)&&""!==t||e.log.error("core.createLogger: `loggerName` argument must be a not empty string"),qe(t,e._generalSettings.logLevel)},e.log.enabled=function(e){return qe.enabled(e)},t(e._generalSettings),e._onGeneralSettingsChange.add(t,this),{modifySBInstance:function(t){t.log=qe(t.instanceId,e._generalSettings.logLevel)}}}He.defaultId="logger",He.require=["generalSettings"];var Ge=He,We=n(76),Ke=n.n(We),Ze=n(227),Je=n.n(Ze);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){if(!1===U()(e)||e.length<=0)throw new TypeError('"mapTo" should be a non empty string');H()(t)&&(t=null),this.destinationVarPath=e,this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=void 0,this.preFormatters=[],this.defaultValue=t}function Ye(e){this.options=e,this.mapToCollection=[]}function Xe(e){Ye.call(this,e),this.templatesToApply=[]}function et(e,t){if(!e||!te()(e))throw new Error("routeFunc should be a function that receives src object as parameter and returns bool");if(!(t&&t instanceof Ye))throw new Error("mapConfig should be an instance of BfaMapperMapConfig");this.routeFunc=e,this.mapConfig=t}function tt(e,t){this.mapName=e,this.options=t,this.routers=[],this.defaultMapConfig=null}function nt(){this.mapRouters={},this.mapTemplates={},this._utils={utils:ie.a,defs:ge.a}}function rt(e,t){if(!1===U()(e)||e.length<=0)throw new TypeError('"mapTo" should be a non empty string');H()(t)&&(t=null),this.destinationVarPath=e,this.mappings=[],this.defaultValue=t}Qe.prototype.mappingTypes={sourcePath:1,function:2},Qe.prototype.mapFrom=function(e,t){if(te()(e))this.mappingType=this.mappingTypes.function,this.mappingFrom=e;else{if(!(U()(e)&&e.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+$e(e).toString());this.mappingType=this.mappingTypes.sourcePath,this.mappingFrom=e}return Le()(t)&&Je()(t,(function(e){return e instanceof Function}))&&this.preFormatters.push.apply(this.preFormatters,t),this},Qe.prototype.map=function(e,t,n){var r=this.defaultValue;if(!H()(this.mappingFrom))switch(this.mappingType){case this.mappingTypes.function:r=this.mappingFrom.call(n,e,t);break;case this.mappingTypes.sourcePath:r=i()(e,this.mappingFrom,this.defaultValue)}return H()(r)&&(r=this.defaultValue),this.preFormatters.length>0&&this.preFormatters.forEach((function(e){r=e.call(n,r)})),Ke()(t,this.destinationVarPath,r),r},Ye.prototype.addMapTo=function(e,t){var n=new Qe(e,t);return this.mapToCollection.push(n),n},Xe.prototype=Object.create(Ye.prototype),Xe.prototype.constructor=Xe,Xe.prototype.applyTemplateByName=function(e){-1===this.templatesToApply.indexOf(e)&&this.templatesToApply.push(e)},tt.prototype.getMapConfig=function(e,t){for(var n=null,r=0;r<this.routers.length;r++){var i=this.routers[r];if(!0===i.routeFunc.call(t,e)){n=i.mapConfig;break}}return null===n&&(n=this.defaultMapConfig),n},tt.prototype.createConfigForRoute=function(e){var t=new et(e,new Xe(this.options));return this.routers.push(t),t.mapConfig},tt.prototype.createDefaultConfig=function(){return this.defaultMapConfig=new Xe(this.options),this.defaultMapConfig},nt.prototype.addUtility=function(e,t){if(!this.validateName(e))throw new TypeError("`utilityName` have to be not empty string");if(V()(this._utils,e))throw new Error("utility with "+e+" already exists");return this._utils[e]=t,this},nt.prototype.getOrCreateMap=function(e,t){if(!this.validateName(e))throw new TypeError("mapName must be a not empty string");if(this.mapRouters[e])return this.mapRouters[e].defaultMapConfig;var n=new tt(e,t);return this.mapRouters[e]=n,n.createDefaultConfig()},nt.prototype.isExists=function(e){return V()(this.mapRouters,e)},nt.prototype.getOrCreateRouter=function(e,t){if(!this.validateName(e))throw new TypeError("`routeName` should be not empty string");if(V()(this.mapRouters,e))return this.mapRouters[e];var n=new tt(e,t);return this.mapRouters[e]=n,n},nt.prototype.createMapTemplate=function(e,t){if(!this.validateName(e))throw new TypeError("`templateName` should be not empty string");if(V()(this.mapTemplates[e]))return this.mapTemplates[e];var n=new Ye(t);return this.mapTemplates[e]=n,n},nt.prototype.validateName=function(e){return!(!1===U()(e)||e.length<=0)},nt.prototype.map=function(e,t,n){var r=this;if((H()(n)||null===n)&&(n={}),H()(t)||null===t)return n;if(!V()(this.mapRouters,e))return n;var i=this.mapRouters[e].getMapConfig(t,r._utils);if(null===i)return n;var a=i.mapToCollection;a.length>0&&a.forEach((function(e){e.map(t,n,r._utils)}));var o=i.templatesToApply;return o.length>0&&o.forEach((function(e){V()(r.mapTemplates,e)&&r.mapTemplates[e].mapToCollection.forEach((function(e){e.map(t,n,r._utils)}))})),n},nt.prototype.formatters={strToLowerCase:function(e){return U()(e)?e.toLowerCase():e},strCutTo255Characters:function(e){return U()(e)&&e.length>255?e.substr(0,255):e},strToInt:function(e){try{return parseInt(e)}catch(t){return e}}},rt.prototype.mappingTypes={sourcePath:1,function:2},rt.prototype.mapFrom=function(e,t){var n={mappingFrom:e,preFormatters:[]};if(te()(e))n.mappingType=this.mappingTypes.function;else{if(!(U()(e)&&e.length>0))throw new TypeError('"mapFrom" is object of wrong type: '+$e(e).toString());n.mappingType=this.mappingTypes.sourcePath}return Le()(t)&&Je()(t,(function(e){return e instanceof Function}))&&n.preFormatters.push.apply(this.preFormatters,t),this.mappings.push(n),this},rt.prototype.map=function(e,t,n){var r=this,a=i()(t,this.destinationVarPath);if(a||(a=[]),!Le()(a))throw new TypeError('"Destination" is an object of wrong type: '+$e(a).toString()+". Array is expected");this.mappings.forEach((function(o){var s=r.defaultValue;if(!H()(o.mappingFrom))switch(o.mappingType){case r.mappingTypes.function:s=o.mappingFrom.call(n,e,t);break;case r.mappingTypes.sourcePath:s=i()(e,o.mappingFrom,r.defaultValue)}H()(s)&&(s=r.defaultValue),o.preFormatters.length>0&&o.preFormatters.forEach((function(e){s=e.call(n,s)})),a.push(s)})),Ke()(t,this.destinationVarPath,a)},Ye.prototype.addMapToArray=function(e,t){var n=new rt(e,t);return this.mapToCollection.push(n),n};var it=nt;function at(e){this._core=e;var t=this;return this._installMapper=function(e){e.mapper=new it},{modifySBInstance:function(e){t._installMapper(e)}}}at.defaultId="mapper";var ot=at;function st(e){var t={trackingBehavior:ge.a.trackingBehavior.byDefault,extTrackerGlobalName:"NOLCMB",staticTracker:null,videoTracker:null,staticConfig:{apid:"P7A907367-6D97-4DFD-AF90-B51EDF8D9AC5",sfcode:"dcr",nsdkv:"511",apn:"BuzzFeed Webapp Static"},videoConfig:{apid:"P3816F089-E5B5-4BF1-9D71-A955F54BCDE3",sfcode:"dcr",nsdkv:"511",apn:"buzzfeedVideos"},configMapsDelegate:null,extFilesPaths:[],trackers:[],isEnabled:Promise.resolve(!0)};this._inited=!1,this._active=!1,this.settings=de()(e.settings||{},t),this.generalSettings=e.getGeneralSettings();var n,r=this;function i(e,t){r._playheadCounter&&c({playheadPosition:r._playheadCounter}),e.playheadPosition=t||0,r._playheadCounter=e.playheadPosition,r._lastPlayed=e.assetid,r._loadedData=!0,r._videoPlaying=!1,r.videoTracker.ggPM("loadMetadata",e),r._loadedVideos||(r._loadedVideos={}),r._loadedVideos[e.assetid]||(r._loadedVideos[e.assetid]=e),o(e)}function a(e){r._playheadInterval&&(clearInterval(r._playheadInterval),r._playheadInterval=null),r._playheadCounter=e.playheadPosition,!r._playheadInterval&&r._videoPlaying&&(r.videoTracker.ggPM("play",e.playheadPosition),u(),r._playheadInterval=setInterval((function(){u()}),1e3))}function o(e){if(r._lastPlayed!==e.assetid)return r._playheadInterval&&(clearInterval(r._playheadInterval),r._playheadInterval=null),void(r._loadedVideos&&r._loadedVideos[e.assetid]&&i(r._loadedVideos[e.assetid],e.playheadPosition));!r._loadedData&&r._loadedVideos&&r._loadedVideos[e.assetid]?i(r._loadedVideos[e.assetid]):(r._playheadCounter=e.playheadPosition,r._playheadInterval||(r.videoTracker.ggPM("play",e.playheadPosition),u(),r._videoPlaying=!0,r._playheadInterval=setInterval((function(){u()}),1e3)))}function s(e){r._playheadInterval&&(r._videoPlaying=!1,clearInterval(r._playheadInterval),r._playheadInterval=null,r._playheadCounter=e.playheadPosition,r.videoTracker.ggPM("stop",r._playheadCounter))}function c(e){r._playheadCounter&&(r._videoPlaying=!1,clearInterval(r._playheadInterval),r._playheadCounter=e.playheadPosition,r.videoTracker.ggPM("end",r._playheadCounter),r._playheadInterval=null,r._playheadCounter=null,r._loadedData=!1)}function u(){r.videoTracker.ggPM("setPlayheadPosition",r._playheadCounter),r._playheadCounter++}this._canInitializeTracker=function(e){return 0===this.settings.trackers.length||-1!==this.settings.trackers.indexOf(e)},this.activate=(n=function(){var t,n,i,a=this;return t=a.settings.isEnabled,n=function(t){if(!a._active&&a._inited&&(e.isApproved(r.constructor.defaultId)||t)){if(a.generalSettings.mode===ge.a.bfaMode.prod){if(!window[a.settings.extTrackerGlobalName])return;var n=window[a.settings.extTrackerGlobalName];!a.staticTracker&&a._canInitializeTracker("static")&&(a.staticTracker=n.getInstance("static_instance"),a.staticTracker.ggInitialize(a.settings.staticConfig)),!a.videoTracker&&a._canInitializeTracker("video")&&(a.videoTracker=n.getInstance("video_instance"),a.videoTracker.ggInitialize(a.settings.videoConfig))}a.page&&(r._active=!0,e.moduleActive.dispatch())}},i?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(e){return Promise.reject(e)}}),e.onGeneralSettingsChange((function(){r.generalSettings=e.getGeneralSettings(),e.isApproved(r.constructor.defaultId)&&r.activate()}),this),e.onPageReady((function(){r.page=e.getPageInfo(),r.activate()}),this),e.onPageChanged((function(){r.page=e.getPageInfo()}),this),this.getEventInfo=function(t,n,r){var i=e.tryConvertToEventInfo(t,n,r);return e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i):(e.log.warn("Event won't be tracked to Nielsen because of `Event type` and `Tracking behavior`. Type: "+i.t+"; Name: "+i.n+"; Location: "+i.l+"; Desc: "+i.d+";"),null)},this._trackPage=function(t){if(this._active)if(e.mapper.isExists("track/page/view")){var n=this.getEventInfo(t,"page","view");if(n){var r=e.mapper.map("track/page/view",n,{});this.generalSettings.mode===ge.a.bfaMode.prod?this.staticTracker.ggPM("staticstart",r):e.debugTracker.trackEvent(n,r)}}else e.log.warn("Mapping for `track/page/view` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackPage,this,t),this)},e.subOn("track/page/view",this._trackPage,this),this._trackVideoplayer=function(t,n){if(this._active)if(e.mapper.isExists("track/videoplayer")){var r=this.getEventInfo(t,"video",n.eventName);if(r){var u=e.mapper.map("track/videoplayer",r,{});if(u.assetid&&"undefined"!==u.assetid)switch(n.eventName){case"video_view":i(u);break;case"resume":o(u);break;case"pause":s(u);break;case"flush":c(u);break;case"scrub":a(u)}}}else e.log.warn("Mapping for `track/videoplayer` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackVideoplayer,this,t,n),this)},e.subOn("track/videoplayer/{eventName}",this._trackVideoplayer,this),this._trackVideo=function(t,n){if(this._active)if(e.mapper.isExists("track/video")){var r=this.getEventInfo(t,"video",n.eventName);if(r){var u=e.mapper.map("track/video",r,{});if(this.generalSettings.mode===ge.a.bfaMode.prod)switch(n.eventName){case"load":i(u);break;case"play":o(u);break;case"pause":s(u);break;case"finish":c(u);break;case"scrub":a(u)}else e.debugTracker.trackEvent(r,u)}}else e.log.warn("Mapping for `track/video` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackVideo,this,t,n),this)},e.subOn("track/video/{eventName}",this._trackVideo,this),this.init=function(){r.settings.configMapsDelegate(e.mapper),r.generalSettings.mode===ge.a.bfaMode.prod?(r.staticTracker=r.settings.staticTracker,r.videoTracker=r.settings.videoTracker,!r.staticTracker&&!r.videoTracker&&!window[r.extTrackerGlobalName]&&r.settings.extFilesPaths&&r.settings.extFilesPaths.length>0&&e.domi.onDomReady((function(){r.settings.extFilesPaths.forEach((function(t){e.domi.loadScript({src:t},r.activate,null,r)}))}),r)):(r.staticTracker={ggPM:function(){},ggInitialize:function(){}},r.videoTracker={ggPM:function(){},ggInitialize:function(){}}),r._inited=!0,e.moduleInited.dispatch(),r.activate()}}st.defaultId="NielsenIntegration",st.require=["logger","domi","pageInfo","mapper","trackingUtils","generalSettings","debugTracker"];var ct=st;var ut=function(e){var t=e.getOrCreateMap("track/page/view");t.addMapTo("type","static"),t.addMapTo("assetid","").mapFrom((function(){return parseInt(Date.now()+1e10*Math.random(),10).toString(16)})),t.addMapTo("section","").mapFrom((function(){return"home"}),[e.formatters.strToLowerCase]),t.addMapTo("segA","").mapFrom((function(e){return i()(e,"data.page.post.isPromoted")?"sponsored":"editorial"})),t.addMapTo("segB","desktop"),t.addMapTo("segC","").mapFrom("data.page.country");var n=e.getOrCreateRouter("track/video"),r=n.createConfigForRoute((function(e){return"video_view"===e.data.e}));r.addMapTo("type","content"),r.addMapTo("assetid","").mapFrom("d"),r.addMapTo("isfullepisode","n"),r.addMapTo("program").mapFrom((function(e){return e.data.a||"BuzzFeed Video"})),r.addMapTo("title","").mapFrom("data.n"),r.addMapTo("length","").mapFrom((function(e){return Math.round(e.data.d)})),r.addMapTo("mediaURL","").mapFrom("data.u"),r.addMapTo("segB","desktop"),r.addMapTo("segC","").mapFrom("data.page.country"),r.addMapTo("airdate","").mapFrom((function(e){return e.data.ut.replace(/-/g,"").replace("T"," ").replace("Z","")})),r.addMapTo("adloadtype","2"),r.addMapTo("hasAds","0");var a=n.createConfigForRoute((function(e){return"play"===e.data.e||"resume"===e.data.e}));a.addMapTo("playheadPosition","").mapFrom("data.d"),a.addMapTo("assetid","").mapFrom("d"),n.createConfigForRoute((function(e){return"pause"===e.data.e})).addMapTo("playheadPosition","").mapFrom("data.d"),n.createConfigForRoute((function(e){return"scrub"===e.data.e})).addMapTo("playheadPosition","").mapFrom((function(e){return parseInt(e.data.st,10)})),n.createConfigForRoute((function(e){return"100%"===e.d})).addMapTo("playheadPosition","").mapFrom("data.d"),function(e){var t=e.getOrCreateRouter("track/videoplayer"),n=t.createDefaultConfig();n.addMapTo("type","content"),n.addMapTo("adloadtype","2"),n.addMapTo("title","").mapFrom((function(e){return"".concat(e.data.video_title)})),n.addMapTo("assetid","").mapFrom((function(e){return"".concat(e.data.video_id||e.data.transcoder_path||"").replace(/\//g,"")})),n.addMapTo("segB","").mapFrom((function(e){return"".concat(e.data.platform)})),n.addMapTo("segC","").mapFrom((function(e){return"".concat(e.data.page.country)})),n.addMapTo("program","").mapFrom((function(e){return"".concat(e.data.author)})),n.addMapTo("isfullepisode","y"),n.addMapTo("length","").mapFrom((function(e){return Math.round((e.data.length||0)/1e3)})),n.addMapTo("airdate","").mapFrom((function(e){return e.data.releasedAt?e.data.releasedAt.replace(/-/g,"").replace("T"," ").replace("Z","").replace(/\.[0-9]+/,""):""})),n.addMapTo("playheadPosition","").mapFrom((function(e){return Math.round((e.data.video_ts||0)/1e3)}))}(e)},dt=n(63),lt=n.n(dt);function ft(e,t){t=t||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,pageInfo:{uri:r()}},function(){if(!window.history||!window.history.replaceState||!document.location.search)return;var e=["bfseed"],t=ie.a.queryStringToObject(document.location.search),n=Object.keys(t).filter((function(n){return-1===e.indexOf(n)||(Ke()(window,"BZFD.Context.page.".concat(n),t[n]),!1)})).map((function(e){return void 0===t[e]?encodeURIComponent(e):"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");try{window.history.replaceState(null,null,"?".concat(n).concat(document.location.hash))}catch(e){window.raven&&window.raven.captureException(e)}}(),this.pageReady=new re.a,this.pageChanged=new re.a,this.settings=de()(t,this.defaultSettings);var n=this;function r(){return{href:document.location.href.replace(/\/p\/\.[0-9a-zA-Z]+\//,"/"),host:document.location.host,path:document.location.pathname.replace(/^\/p\/\.[0-9a-zA-Z]+\//,"/"),search:document.location.search,hash:document.location.hash,protocol:document.location.protocol}}function i(e,t){!0===n.settings.isReady&&e.call(t),n.pageReady.add(e,t)}function a(){return Ie()(n.settings.pageInfo)}return e._router.sub("general/page/{action}",(function(t,n){if("ready"!==n.action)if(lt()(t)){switch(n.action){case"set":this.settings.pageInfo=u()({uri:r()},t);break;case"update":default:this.settings.pageInfo=u()(this.settings.pageInfo,t)}this.pageChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&(this.settings.isReady=!0,this.pageReady.dispatch())}else e.log.warn("page info must be a plain object");else this.isReady||(this.isReady=!0,this.pageReady.dispatch())}),this,{action:["ready","update","set"]}),e._onPageReady=function(e,t){i(e,t)},e._getPageInfo=function(){return a()},{modifySBInstance:function(e){e.getPageInfo=function(){return a()},e.onPageReady=function(e,t){i(e,t)},e.onPageChanged=function(e,t,r){n.pageChanged[r?"addOnce":"add"](e,t)}}}}ft.defaultId="pageInfo";var pt=ft,ht=n(163),gt=n.n(ht);function mt(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}function vt(){return n.e(8).then(n.bind(null,636))}var yt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;if(!t||!n)return[];var r=[];return t.hasAttribute&&t.hasAttribute("data-".concat(n))?r=t.getAttribute("data-".concat(n)).split(","):t.querySelectorAll(".subbuzz[data-".concat(n,"]")).forEach((function(t){r=r.concat(e(t,n))})),Array.from(new Set(r))},bt=function(e){return yt(e,"retailers")},wt=n(47);function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Tt={enabled:Promise.resolve(!1)},Ot=function e(t){switch(kt(t)){case"string":var n=document.createElement("textarea");return n.innerHTML=t,n.value;case"object":var r=!0,i=Array.isArray(t)?[]:{};for(var a in t)r=!1,i[a]=e(t[a]);return r?void 0:i}return t},St=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.configureSandbox(),this.settings=de()(t.settings||{},Tt),this.generalSettings=t.getGeneralSettings(),this.init=function(){n.inited=!0,n.sandbox.moduleInited.dispatch(),n.activate()}}var t,n,r;return t=e,(n=[{key:"activate",value:function(){var e=this;if(!this.active&&this.inited&&this.page&&this.user){var t=this.settings.enabled;Promise.resolve(t)===t?(this.active=!0,t.then((function(t){t&&(e.enabled=!0,e.identifyUser(e.user),e.trackPage(e.transformPageMeta()),e.sandbox.moduleActive.dispatch())}))):sandbox.log.warn(sandbox.moduleId+" enabled setting should be a promise.")}}},{key:"configureSandbox",value:function(){var e=this;this.sandbox.onPageReady((function(){e.page=e.sandbox.getPageInfo(),e.activate()})),this.sandbox.onUserReady((function(){e.user=e.sandbox.getUserInfo(),e.activate()})),this.sandbox.onUserChanged((function(){e.user=e.sandbox.getUserInfo(),e.identifyUser(e.user)})),this.sandbox.subOn("track/page/view",(function(){return e.onPageView()})),this.sandbox.subOn("track/click/Exit-Link",(function(t){var n=t.data;return e.onAffiliateLinkClick(n)}))}},{key:"onPageView",value:function(){var e=this.sandbox.getPageInfo();e&&!gt()(this.page,e)&&(this.page=e,this.trackPage(this.transformPageMeta()))}},{key:"onAffiliateLinkClick",value:function(e){if("affiliate"in e){var t=Ot({affiliate:e.affiliate,campaign:e.campaign,href:e.url,name:e.anchorDesc,price:e.price,redirectUrl:e.redirectUrl,keywords:e.keywords,retailers:e.retailers});this.trackEvent("AffiliateLinkClick",t)}}},{key:"transformPageMeta",value:function(){var e,t=this.page||{},n=t.post||{},r={page:{meta:{bf_buzzid:n.id,bf_userid:n.authorId,type:t.hasQuiz?"quiz":n.format?n.format.type:"feed",section:("section"===t.name?t.section:void 0)||t.category||t.name,publisher:t.destination||"buzzfeed",title:n.title,description:t.description,author:n.author,tags:n.tags,platform:"web",edition:t.country?t.country.replace(/.*-/,""):void 0,categories:t.sections,badges:n.badges?n.badges.map((function(e){return e.name})):void 0,keywords:yt(e,"keywords"),retailers:bt()}}};return Ot(r)}},{key:"identifyUser",value:function(e){var t=this;if(this.enabled&&e&&e.clientId){var n=this.generalSettings.env||"dev";Object(wt.a)({env:n,legacy:!1}).then((function(e){if(e){var n=[{id:e,tag:"buzzfeedUserId"}];r=n,mt(vt,(function(e){(0,e.trackUser)({eventData:r})})),t.logEvent(n,"user","identify")}var r}))}}},{key:"trackPage",value:function(e){var t;this.enabled&&(t={eventData:e}.eventData,mt(vt,(function(e){(0,e.trackPageView)({eventData:t})})),this.logEvent(e,"page","view"))}},{key:"trackEvent",value:function(e,t){var n=this;this.enabled&&function(e){var t=e.eventType,n=e.eventData,r=e.options;mt(vt,(function(e){(0,e.trackEvent)({eventType:t,eventData:n,options:r})}))}({eventType:e,eventData:t,options:{success:function(){return n.logEvent(t,e,"track")}}})}},{key:"logEvent",value:function(e,t,n){e=Object.assign({},e);var r=this.sandbox.tryConvertToEventInfo(e,t,n);this.sandbox.debugTracker.trackEvent(r,e)}}])&&_t(t.prototype,n),r&&_t(t,r),e}();St.defaultId="PermutiveIntegration",St.require=["domi","pageInfo","logger","debugTracker","trackingUtils","userInfo","generalSettings"];var Et=n(48),Ct=n(61),xt=n(116),Mt=n.n(xt),It="dev",Pt={},At={dev:{trackingURL:"https://nsq-api-public.dev.buzzfeed.io",debug:!0},stage:{trackingURL:"https://pixiedust-stage.buzzfeed.com",debug:!0},prod:{trackingURL:"https://pixiedust.buzzfeed.com",debug:!1},"app-west":{trackingURL:"https://pixiedust.buzzfeed.com",debug:!1}};At.live=At.prod;var Ft={apiVersion:"1",delay:200,urlLengthLimit:2e3,batch:!0,samplingRate:0,requiredFields:["type","source","session_id"],acceptedDataTypes:["string","boolean","number"]};var Dt={init:function(e){At[e]?It=e:console.warn("Pixiedust: environment not recognized:",e)},get:function(e){if(e in Pt&&void 0!==Pt[e])return Pt[e];var t=At[It];return t&&e in t?t[e]:Ft[e]},set:function(e,t){var n={};Z()(e)?n=e:n[e]=t,Mt()(Pt,n)}};var Nt=n(312),jt=n.n(Nt),Rt=n(216),Lt=n.n(Rt);function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return r=null==r?"":r,t[n]=r,t}),{})}function zt(){var e={};return{queue:[],timeout:null,history:[],push:function(t){var n=W()({},t,e);if(!this.validateData(n))return!1;var r=this.queue[this.queue.length-1];return r&&r.type!==n.type?(this.sendData(),this.push(n),!0):(this.queue.push(n),this.getURL(this.queue).length>Dt.get("urlLengthLimit")?(this.queue.pop(),this.sendData(),this.push(n),!0):(Dt.get("batch")?this.timeout||(this.timeout=setTimeout(this.sendData.bind(this),Dt.get("delay"))):this.sendData(),!0))},validateData:function(e){for(var t=Dt.get("requiredFields"),n=0,r=t.length;n<r;n++)if(!(t[n]in e)){if(Dt.get("debug"))throw new Error("Pixiedust required event field: "+t[n]);return!1}var i=Dt.get("acceptedDataTypes");for(var a in e){var o=e[a],s=Bt(e[a]);if(null!=o&&-1===i.indexOf(s)){if(Dt.get("debug"))throw new Error('Pixiedust: field "'+a+'" is invalid data type: '+s);return!1}}if(this.getURL([e]).length>Dt.get("urlLengthLimit")){if(Dt.get("debug"))throw new Error("Pixiedust: single event exceeds url length limit",e);return!1}return!0},sendData:function(){var e;this.queue&&this.queue.length&&(e=this.getURL(this.queue),this.createPixel(e),this.history.push(e)),this.queue=[],clearTimeout(this.timeout),this.timeout=null},createPixel:function(e){(new Image).src=e},getURL:function(e){var t=jt()(Lt()(e.map(Object.keys)));e.forEach((function(e){Object.keys(e).forEach((function(t){var n=e[t];null==n&&(e[t]="")}))})),e=e.map(Ut);var n=t.reduce((function(t,n){return t[n]=e.map((function(e){return e[n]})),t}),{});n._z=Date.now(),n._d="\v",n._n=e.length;var r=Object.keys(n).map((function(e){var t=n[e];return t=Array.isArray(t)?t:[t],encodeURIComponent(e)+"="+encodeURIComponent(t.join("\v"))}));return this.url()+"?"+r.join("&")},setSessionVars:function(t){Object.keys(t).forEach((function(e){var n=t[e];null==n&&(t[e]="")})),e=Mt()(e,Ut(t))},url:function(){return Dt.get("trackingURL")+"/v"+Dt.get("apiVersion")+".gif"},getHistory:function(){return this.history.slice()}}}var Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch;this.enabled=!1,this.started=!1,this.version="1.1.0",this.dispatch=t||new zt,this.queue=[]};Vt.prototype.push=function(e){return this.started&&this.enabled?(this.updateSessionUuid(),e.visit_id=this.sessionUuid,this.dispatch.push(e)):(this.queue.push(e),!0)},Vt.prototype.start=function(e,t){var n=this;if(this.started){if(Dt.get("debug"))throw new Error("Pixiedust instance may only be started once")}else if(e=e||{},Dt.init(e.env),Dt.set({samplingRate:e.sampling_rate,requiredFields:e.required_fields}),this.enabled=Math.random()<Dt.get("samplingRate"),Dt.get("debug")&&this.setupTestMethods(),this.enabled){var r="live"===e.env?"prod":e.env;this.sessionUuidCookieManager=new Et.a({env:r,namespace:"bf-xdomain-tracking",cookieName:"bf-xdomain-session-uuid",daysExpiry:.5/24,throttleTimer:18e4}),this.updateSessionUuid().then((function(){for(n.started=!0;n.queue.length;)n.push(n.queue.shift());t&&t()}))}},Vt.prototype.updateSessionUuid=function(){var e=this;return this.sessionUuidCookieManager.get().then((function(t){e.sessionUuid=t||Object(Ct.a)(),e.sessionUuidCookieManager.set(e.sessionUuid)})).catch((function(e){console.log("Error getting session UUID: ".concat(e))}))},Vt.prototype.setupTestMethods=function(){this.__testHistory=function(){if(!this.enabled&&Dt.get("debug"))throw new Error("Pixiedust is not enabled (perhaps due to sampling)");return this.dispatch.getHistory()}},Vt.prototype.setSessionVars=function(e){return this.dispatch.setSessionVars(e)},Vt.prototype.flush=function(){return this.dispatch.sendData()};var qt=Vt;function Ht(e){var t=this,n=ie.a.queryStringToObject(document.location.search),r={sessionId:Date.now().toString(32)+(1e8*Math.random()|0).toString(32),e2e:n.e2e_test,impressionsSamplingRate:1,scrollDepthSamplingRate:1,instrumentationSamplingRate:1};this._inited=!1,this._active=!1,this.generalSettings=e.getGeneralSettings(),this.settings=de()(e.settings||{},r);var a=this;this.activate=function(){!a._active&&a._inited&&this.page&&this.user&&this.user.clientId&&(a.pixiedust=new qt,a.pixiedust.setSessionVars({session_id:a.settings.sessionId,client_id:a.user.clientId,source:a.settings.source||"buzz_web"}),a.pixiedust.start({env:a.generalSettings.env,sampling_rate:a.settings.samplingRate||0}),a._active=!0,e.moduleActive.dispatch())},e.onGeneralSettingsChange((function(){a.generalSettings=e.getGeneralSettings()}),this),e.onPageReady((function(){a.page=e.getPageInfo(),a.activate()}),this),e.onPageChanged((function(){a.page=e.getPageInfo()}),this),e.onUserReady((function(){a.user=e.getUserInfo(),a.activate()}),this),e.onUserChanged((function(){a.user=e.getUserInfo()}),this),this.getEventInfo=function(t,n,r){var i=e.tryConvertToEventInfo(t,n,r);return e.canTrackEvent(e.moduleId,this.settings.trackingBehavior,i)?(i.data.page=this.page,i.data.user=this.user,i.data.seedSocialFlags={},i):(e.log.warn(e.moduleId+" cannot track current event. Type: "+n+"; Name: "+r+";"),null)},this._shouldTrack=function(e){return!("dev"!==t.generalSettings.env&&!t.generalSettings.debug)||t.user.clientId&&t.user.clientId%100<100*e},this._shouldSample=function(e){return!("dev"!==t.generalSettings.env&&!t.generalSettings.debug)||Math.random()<e},this._isDocumentVisible=function(){return!document.visibilityState||"visible"===document.visibilityState},this._trackPage=function(t){if(this._active)if(e.mapper.isExists("track/page/view"))if(this._isDocumentVisible()){var n=a.getEventInfo(t,"page","view");this._trackDefault(n,"track/page/view")}else ie.a.onDocumentVisible(fe()(this._trackPage,this,t));else e.log.warn("Mapping for `pixiedust: track/page/view` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackPage,this,t),this)},e.subOn("track/page/view",this._trackPage,this),this._trackPageExit=function(t){if(this._active)if(e.mapper.isExists("track/page/exit")){var n=a.getEventInfo(t,"page","exit");this._trackDefault(n,"track/page/exit",!0)}else e.log.warn("Mapping for `pixiedust: track/page/exit` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackPageExit,this,t),this)},e.subOn("track/page/exit",this._trackPageExit,this),this._trackClick=function(t,n){if(this._active)if(e.mapper.isExists("track/click")){var r=this.getEventInfo(t,"click",n.eventName);this._trackDefault(r,"track/click",!0)}else e.log.warn("Mapping for `track/click` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackClick,this,t,n),this)},e.subOn("track/click/{eventName}",this._trackClick,this),this._trackVideo=function(t,n){if(this._active)if(e.mapper.isExists("track/video")){var r=this.getEventInfo(t,"video",n.eventName);this._trackDefault(r,"track/video")}else e.log.warn("Mapping for `track/video` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackVideo,this,t,n),this)},e.subOn("track/video/{eventName}",this._trackVideo,this),this._trackVideoPlayer=function(t,n){if(this._active)if(e.mapper.isExists("track/videoplayer")){var r=this.getEventInfo(t,"videoplayer",n.eventName);if(r&&"flush"===r.n)return this.pixiedust.flush();this._trackDefault(r,"track/videoplayer")}else e.log.warn("Mapping for `track/videoplayer` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackVideoPlayer,this,t,n),this)},e.subOn("track/videoplayer/{eventName}",this._trackVideoPlayer,this),this._trackImpression=function(t,n){if(this._active)if(e.mapper.isExists("track/scroll/impression")){var r=this.getEventInfo(t,"impression",n.eventName);this._shouldTrack(i()(r,"opt.samplingRate",0)||this.settings.impressionsSamplingRate)?this._trackDefault(r,"track/scroll/impression"):e.log.warn("`track/scroll/impression` will not be tracked: events from current user are not being sampled")}else e.log.warn("Mapping for `track/scroll/impression` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackImpression,this,t,n),this)},e.subOn("track/scroll/impression",this._trackImpression,this),this._trackScrollPost=function(t,n){if(this._active)if(e.mapper.isExists("track/scroll/post"))if(this._shouldTrack(this.settings.scrollDepthSamplingRate)){var r=this.getEventInfo(t,"post",n.eventName);this._trackDefault(r,"track/scroll/post")}else e.log.warn("`track/scroll/post` will not be tracked: events from current user are not being sampled");else e.log.warn("Mapping for `track/scroll/post` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackScrollPost,this,t,n),this)},e.subOn("track/scroll/post",this._trackScrollPost,this),this._trackAbVariation=function(t,n){if(this._active)if(e.mapper.isExists("track/abtest")){var r=this.getEventInfo(t,"abtest",n.abTestName);this._trackDefault(r,"track/abtest")}else e.log.warn("Mapping for `track/abtest` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackAbVariation,this,t,n),this)},e.subOn("track/abtest/{abTestName}",this._trackAbVariation,this),this._trackAbeagleRequest=function(t,n){if(this._active)if(e.mapper.isExists("track/abeagle/request")){var r=this.getEventInfo(t,"abeagle","request");this._trackDefault(r,"track/abeagle/request")}else e.log.warn("Mapping for `track/abeagle/request` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackAbeagleRequest,this,t,n),this)},e.subOn("track/abeagle/request",this._trackAbeagleRequest,this),this._trackQuiz=function(t,n){if(this._active)if(e.mapper.isExists("track/quiz")){var r=this.getEventInfo(t,"quiz",n.eventName);this._trackDefault(r,"track/quiz")}else e.log.warn("Mapping for `track/quiz` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackQuiz,this,t,n),this)},e.subOn("track/quiz/{eventName}",this._trackQuiz,this),this._trackBfp=function(t,n){if(this._active)if(e.mapper.isExists("track/bfp")){var r=this.getEventInfo(t,"bfp",n.eventName);this._trackDefault(r,"track/bfp")}else e.log.warn("Mapping for `track/bfp` doesn't exist");else e.moduleActive.addOnce(fe()(this._trackBfp,this,t,n),this)},e.subOn("track/bfp/{eventName}",this._trackBfp,this),this._trackInstrumentation=function(n){if(t._active)if(e.mapper.isExists("track/website/instrumentation")){var r=i()(n,"opts.samplingRate",t.settings.instrumentationSamplingRate);if(t._shouldSample(r)){var o=a.getEventInfo(n,"website","instrumentation");t._trackDefault(o,"track/website/instrumentation")}else e.log.warn("`track/website/instrumentation` event will not be tracked, because it was not sampled.")}else e.log.warn("Mapping for `track/website/instrumentation` doesn't exist");else e.moduleActive.addOnce(fe()(t._trackInstrumentation,t,n),t)},e.subOn("track/website/instrumentation",this._trackInstrumentation,this),this._trackDefault=function(t,n,r){if(t){t.data.env=this.generalSettings.mode===ge.a.bfaMode.prod?"prod":"dev",t.data.debug=this.generalSettings.debug;var i=e.mapper.map(n,t,{});Object.keys(i).length>0&&(this.settings.e2e&&(i.e2e_test=this.settings.e2e),this.pixiedust.push(i),r&&this.pixiedust.flush(),this.generalSettings.mode!==ge.a.bfaMode.prod&&(t.printType=!0,t.prettyPrintData=!0,e.debugTracker.trackEvent(t,i)))}},this.init=function(){a.settings.configMapsDelegate(e.mapper),a._inited=!0,e.moduleInited.dispatch(),a.activate()}}Ht.defaultId="PixiedustIntegration",Ht.require=["logger","pageInfo","userInfo","debugTracker","mapper","trackingUtils","generalSettings"];var Gt=Ht,Wt=n(96),Kt=n(6);n(26);var Zt=function(){return BZFD.Config.bfwInfoCookie},Jt=function(){return!!Kt.a.get(Zt())};function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Qt=function(e){e.addUtility("capitalize",(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),e.addUtility("isNumeric",(function(e){return!isNaN(parseFloat(e))&&isFinite(e)})),e.addUtility("strToInt",(function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(t)?t:""})),e.addUtility("getIdFromObjectId",(function(e){return"string"==typeof e&&e.indexOf(":")>-1&&(e=e.split(":")[1]),e}));var t,n,r=e.getOrCreateRouter("track/page/view").createConfigForRoute((function(e){var t=i()(e,"data.url","");return""===t||!t.match(/\?p=(\d)/)}));n=["page","v"],(t=r).addMapTo("source","buzz_web"),t.addMapTo("user_agent",navigator.userAgent.toLowerCase()),t.addMapTo("screen_resolution","").mapFrom((function(){return window.screen.availWidth+" x "+window.screen.availHeight})),t.addMapTo("referrer","").mapFrom((function(){return window.document.referrer})),t.addMapTo("url","").mapFrom((function(e){var t=i()(e,"data.page.uri.path",null);return void 0===$t(t)&&(t=null),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),null===t&&"Home"===window.BZFD.Context.page.name&&(t="/index"),null===t&&(t=i()(e,"data.page.uri.href")),null===t&&(t=document.location.href),!t||t.startsWith("http://")||t.startsWith("https://")||(t=document.location.origin+t+i()(e,"data.page.uri.search","")),t})),t.addMapTo("page","").mapFrom((function(e){return window.BZFD.Context.page.name?this.capitalize(window.BZFD.Context.page.name):this.capitalize(e.data.page.category)})),t.addMapTo("author",""),t.addMapTo("author_id",""),t.addMapTo("buzz",""),t.addMapTo("buzz_id",""),t.addMapTo("page_edition","").mapFrom((function(e){return i()(e,"data.page.country",null)})),void 0!==n&&n.forEach((function(n){switch(n){case"page_type":t.addMapTo("page_type","feed");break;case"variation_id":t.addMapTo("variation_id","").mapFrom((function(e){return e.data.variation_id?e.data.variation_id:""}));break;case"unit":t.addMapTo("unit","").mapFrom("l",[e.formatters.strToLowerCase]);break;case"mode":t.addMapTo("mode","desktop");break;case"page_url":t.addMapTo("page_url","").mapFrom((function(e){var t=i()(e,"data.page.uri.path",null);return"Home"===window.BZFD.Context.page.name&&window.BZFD.Config.tracking.pixiedust.page_view_url&&(t=window.BZFD.Config.tracking.pixiedust.page_view_url.startsWith("/")?window.BZFD.Config.tracking.pixiedust.page_view_url:"/"+window.BZFD.Config.tracking.pixiedust.page_view_url),null===t&&"Home"===window.BZFD.Context.page.name&&(t="/index"),null===t&&(t=i()(e,"data.page.uri.href")),null===t&&(t=document.location.href),t.startsWith("http://")||t.startsWith("https://")||(t=document.location.origin+t+i()(e,"data.page.uri.search","")),t}));break;case"os":t.addMapTo("os",(r="Linux",a="MacOs",o="Unix",s="Unknown",c="Windows",-1!==navigator.appVersion.indexOf("Win")?c:-1!==navigator.appVersion.indexOf("Mac")?a:-1!==navigator.appVersion.indexOf("X11")?o:-1!==navigator.appVersion.indexOf("Linux")?r:s));break;case"position":t.addMapTo("position","").mapFrom((function(e){if(e.data&&e.data.p)return this.strToInt(e.data.p)}));break;case"content_id":t.addMapTo("content_id","").mapFrom((function(e){if(e.opt.dimension2)return"buzz:"+this.strToInt(e.opt.dimension2);if(e.opt.dimension3)return"video:"+this.strToInt(e.opt.dimension3);if(e.opt.dimension13){var t=e.opt.dimension13;return"adxbackfill"!==t&&this.strToInt(t),"creative:"+t}return"".concat(e.data.target_content_type,":").concat(e.data.target_content_id)}));break;case"post_category":t.addMapTo("post_category","").mapFrom((function(e){if(e.data&&e.data.post_category)return e.data.post_category}));break;case"unit_client_id":t.addMapTo("unit_client_id","");break;case"data_source":t.addMapTo("data_source","").mapFrom((function(e){return i()(e,"data.data_source",null)}));break;case"treatment":t.addMapTo("treatment","").mapFrom((function(e){return i()(e,"data.treatment",null)}));break;case"sub_unit":t.addMapTo("sub_unit","").mapFrom((function(e){return i()(e,"data.sub_unit",null)}));break;case"v":t.addMapTo("v","").mapFrom((function(e){return i()(e,"data.platform","feedpager")}))}var r,a,o,s,c})),r.addMapTo("type","pageview"),r.addMapTo("is_logged_in",Jt()),Object(Wt.a)(e)};function Yt(e,t){t=t||{},this.defaultSettings={cookieName:"bfa_test"},this.settings=de()(t,this.defaultSettings);var n=e.utils.readCookie(this.settings.cookieName);return this._isTestMode=n.length>0&&"true"===n[0].value,this.updateGeneralSettings=function(t){t.mode!==e.defs.bfaMode.test&&e.push("general/settings/update",{mode:e.defs.bfaMode.test})},this._isTestMode&&(this.updateGeneralSettings(e._generalSettings),e._onGeneralSettingsChange.add(this.updateGeneralSettings,this)),{}}Yt.defaultId="testMode",Yt.require=["generalSettings"];var Xt=Yt,en=n(75),tn=n.n(en),nn=n(313),rn=n.n(nn);function an(){function e(e,t,n){if(!U()(e)||0===e.length)return!1;if(!(n instanceof $))return!1;var r=-1!==rn()(tn()(ge.a.trackingBehavior),t)?t:ge.a.trackingBehavior.byDefault,i=n.opt,a=!1;switch(r){case ge.a.trackingBehavior.ifSpecified:lt()(i)&&Le()(i.force)&&(-1!==i.force.indexOf("all")||-1!==i.force.indexOf(e))&&(a=!0);break;case ge.a.trackingBehavior.byDefault:default:(!lt()(i)||!Le()(i.ignore)||-1===i.ignore.indexOf("all")&&-1===i.ignore.indexOf(e)||Le()(i.force)&&-1!==i.force.indexOf(e))&&(a=!0)}return a}function t(e,t,n){return(e=e||{})instanceof $?e:(U()(e.t)&&0!==e.t.length||(e.t=t),U()(e.n)&&0!==e.n.length||(e.n=n),$.tryParse(e))}return{modifySBInstance:function(n){n.canTrackEvent=e,n.tryConvertToEventInfo=t}}}an.defaultId="trackingUtils";var on=an;function sn(e,t){t=t||{},this.defaultSettings={readyOnFirstUpdate:!0,isReady:!1,userInfo:{isLoggedIn:!1,referrer:document.referrer,userAgent:navigator.userAgent,inApp:!1,clientId:null}};var n=this;function r(e,t){!0===n.settings.isReady&&e.call(t),n.userReady.add(e,t)}function i(){return Ie()(n.settings.userInfo)}return this.userReady=new re.a,this.userChanged=new re.a,this.settings=de()(t,this.defaultSettings),e._router.sub("general/user/{action}",(function(t,n){var r=this;if("update"===n.action)if(lt()(t)){this.settings.userInfo=u()(this.settings.userInfo,t);var i=this.settings.userInfo,a=e.utils.getAppReferrer(i.userAgent,i.referrer);a&&(i.referrer=a,i.inApp=!0),this.userChanged.dispatch(),!this.settings.isReady&&this.settings.readyOnFirstUpdate&&Object(wt.a)({env:e._generalSettings.env}).then((function(e){r.settings.userInfo.clientId=e,r.settings.isReady=!0,r.userReady.dispatch()}))}else e.log.warn("user info must be a plain object");else e.log.warn("user info can only be updated")}),this,{action:["ready","update","set"]}),e._onUserReady=function(e,t){r(e,t)},e._getUserInfo=function(){return i()},{modifySBInstance:function(e){e.getUserInfo=function(){return i()},e.onUserReady=function(e,t){r(e,t)},e.onUserChanged=function(e,t,r){n.userChanged[r?"addOnce":"add"](e,t)}}}}sn.defaultId="userInfo";var cn,un,dn,ln,fn,pn,hn,gn,mn,vn=sn,yn=n(19),bn=me.a.framework,wn=me.a.rules,_n=s.c.getQueryParams();cn=bn.needsConsent()?wn.hasConsented("tracking"):Promise.resolve(!0),un=new a.Core,dn=window.BZFD,ln=dn.Config,fn=dn.Context,pn="true"===_n.bfadebug,hn={mode:"dev"===ln.env||pn?un.defs.bfaMode.develop:un.defs.bfaMode.prod,webRoot:ln.webRoot,staticRoot:ln.staticRoot,env:ln.env,isConsentRequired:"quantcast"===_n.bfadebug||ln.isConsentRequired,logLevel:pn?3:1,debug:pn,source:"feedpager"},gn={id:i()(fn,"page.id"),country:i()(fn,"page.localization.country"),type:"feed",language:i()(fn,"page.localization.language"),name:i()(fn,"page.name"),category:"",platform:"feedpager",uri:{cleanedPath:document.location.pathname}},mn={referrer:document.referrer},un.plugin(Ae,hn).plugin(Ge).plugin(oe).plugin(Ue).plugin(ot).plugin(pt).plugin(vn).plugin(on).plugin(Xt).plugin(X).plugin(L,{bfaFunctionName:"bfa",domBinder:{delegatedMapping:{click:[{event:"click",selector:"a",options:{handlers:["ATagWithExternalLinkHandler","ATagWithInternalLinkHandler","ATagDefaultHandler"]}},{event:"click",selector:"input"},{event:"click",selector:"button"}]}}}),un.registerModule(Ee,{extFilePath:"//www.google-analytics.com/analytics.js",googleAnalyticsId:i()(ln,"tracking.googleAnalytics.id"),configMapsDelegate:xe}).registerModule(ct,{extFilesPaths:["https://cdn-gl.imrworldwide.com/novms/js/2/ggcmb510.js"],configMapsDelegate:ut,isEnabled:cn}).registerModule(Gt,{samplingRate:"1",configMapsDelegate:Qt,instrumentationSamplingRate:i()(ln,"tracking.pixiedust.instrumentation_sampling_rate")}).registerModule(_e,{extFilesPaths:["https://connect.facebook.net/en_US/fbevents.js"],configMapsDelegate:Oe}).registerModule(St,{enabled:o.b.checkIsOn()}),un.activatePlugins(),un.push("general/page/update",gn),un.push("general/user/update",mn),un.domi.onDomReady((function(){un.push("plugin/binder/activate")})),un.activate(),Object(yn.e)(),Object(yn.d)(),Object(yn.c)();var kn,Tn=n(82),On=me.a.rules,Sn=me.a.api,En=function(e){e.AppEvents.logPageView()};!function e(){return On.hasConsented("tracking").then((function(t){t?Tn.a.init().then(En):kn||(kn=Sn.setTCFListener(e))}))}()},64:function(e,t,n){"use strict";var r=n(306),i=n.n(r),a=n(307),o=n.n(a),s=n(23),c=n.n(s);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a={forOwn:function(e,t,n){o.a.apply(this,[e,c()(t,n)])},queryStringToObject:function(e){return e?(-1!==e.indexOf("?")&&(e=e.split("?")[1]),i()(e.split("&").map((function(e){return e.split("=").map(decodeURIComponent)})))):{}},readCookie:function(e){for(var t,n=document.cookie.split(";"),r=[],i=0;i<n.length;i++){if(n[i]=n[i].trim(),"object"===u(e)&&e.exec)if(new RegExp(e).test(n[i])){(t=/(.*)=(.*)$/g.exec(n[i]))&&r.push({name:t[1],value:t[2]})}if("string"==typeof e){var a=RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");(t=n[i].match(a))&&r.push({name:e,value:t[1]})}}return r},setCookie:function(e,t,n){var r=new Date;r.setTime(r.getTime()+1e3*n*60*60*24);var i="".concat(e,"=").concat(encodeURIComponent(t),";expires=").concat(r.toUTCString(),";path=/");document.cookie=i},checkType:function(e,t,n,r){return u(t)!==e?n+" has to be a "+e:!0===r&&isEmpty(t)?n+" has to be not empty":void 0},getAppReferrer:function(e,t){var n=e&&e.match(/fban(\/messenger)?|twitter|pinterest/i);if(n)switch(n[0].toLowerCase()){case"fban/messenger":return"http://msgr.facebook.com";case"fban":if(t&&-1===t.indexOf("m.facebook"))return"http://app.facebook.com";break;default:return"http://app."+n[0].toLowerCase()+".com"}return""},onDocumentVisible:function(e){document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))},rejectOnTimeout:function(e){return new Promise((function(t,n){setTimeout((function(){return n({type:"timeout",msg:"".concat(e,"ms timeout exceeded")})}),e)}))}}},70:function(e,t,n){"use strict";var r=n(17);function i(e){return e+"|expiration"}t.a={set:function(e){r.a.supportsLocalStorage&&void 0!==e&&(localStorage.setItem(e.key,e.value),e.expires&&localStorage.setItem(i(e.key),Date.now()+e.expires))},get:function(e){return r.a.supportsLocalStorage?function(e){var t=localStorage.getItem(i(e));return t&&t<=Date.now()}(e)?(this.remove(e),null):localStorage.getItem(e):null},sessionSet:function(e){r.a.supportsLocalStorage&&void 0!==e&&sessionStorage.setItem(e.key,e.value)},sessionGet:function(e){return r.a.supportsLocalStorage?sessionStorage.getItem(e):null},remove:function(e){r.a.supportsLocalStorage&&(localStorage.removeItem(i(e)),localStorage.removeItem(e))},clear:function(){r.a.supportsLocalStorage&&localStorage.clear()}}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e){return e.match(/^stage\./)?"https://".concat(e):"https://www.".concat(e)},o=function(){function e(t){var n=this,r=t.sourceOfTruthDomain,i=t.localDomain,a=t.namespace,o=t.env,s=void 0===o?"dev":o,c=t.updateInterval,u=void 0===c?3e5:c,d=t.iframeTimeout,l=void 0===d?3e3:d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceOfTruthDomain=r,this.localDomain=i,this.env=s,this.namespace=a,this.iframeTimeout=l,this.cookies={},r!==i&&this.initIframe().then((function(){setInterval(n.updateFromIframe.bind(n),u)})).catch((function(){}))}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this;return this.sourceOfTruthDomain===this.localDomain?Promise.resolve(r.a.get(e)):this.initIframe().then((function(){return t.cookies[e]||r.a.get(e)})).catch((function(){return r.a.get(e)}))}},{key:"set",value:function(e){var t=this,n=e.name,i=e.value,o=e.days,s=e.secureOnly,c=void 0===s||s;r.a.set({name:n,value:i,days:o,localDomain:this.localDomain}),this.sourceOfTruthDomain!==this.localDomain&&this.initIframe().then((function(){var e={namespace:t.namespace,msgType:"destination-sync-write",cookieName:n,cookieVal:i,expiresDays:o,secureOnly:c},r=a(t.sourceOfTruthDomain);t.iframe.contentWindow.postMessage(JSON.stringify(e),r)})).catch((function(){return r.a.set({name:n,value:i,days:o,localDomain:t.localDomain})}))}},{key:"cleanup",value:function(){if(this.boundOnMessage&&window.removeEventListener("message",this.boundOnMessage),this.iframe){var e=new ErrorEvent({message:"XDomainCookies were cleaned up before ready"});this.iframe.dispatchEvent(e),this.iframe.remove()}this.iframeReady=null}},{key:"initIframe",value:function(){var e=this;if(this.iframeReady)return this.iframeReady;var t,n=new Promise((function(t,n){e.boundOnMessage=function(n){e.onMessage(n,t)},window.addEventListener("message",e.boundOnMessage),e.createIframe(n)}));return this.iframeReady=Promise.race([(t=this.iframeTimeout,new Promise((function(e,n){var r={type:"timeout",msg:"".concat(t,"ms timeout exceeded")};setTimeout((function(){return n(r)}),t)}))),n]).catch((function(t){throw"prod"===e.env&&window.raven&&window.raven.captureException("timeout"===t.type?new Error("Destination Sync: ".concat(t.msg)):t),console.error(t),t})),this.iframeReady}},{key:"createIframe",value:function(e){var t="xdomaincookies-".concat(this.namespace),n=document.getElementById(t);if(n)return n.addEventListener("error",(function(t){e(t)})),this.iframe=n,void(this.iframe.dataset.loaded&&this.updateFromIframe());var r=JSON.stringify({namespace:this.namespace,windowOrigin:window.location.origin}),i=document.createElement("iframe");i.style.display="none",i.addEventListener("error",(function(t){e(t)})),i.id=t,i.src=function(e,t){return"".concat(a(e),"/").concat("destination-sync.html","#").concat(encodeURIComponent(t))}(this.sourceOfTruthDomain,r),this.iframe=i,document.body.appendChild(i)}},{key:"updateFromIframe",value:function(){var e={namespace:this.namespace,msgType:"destination-sync-read"},t=a(this.sourceOfTruthDomain);this.iframe.contentWindow.postMessage(JSON.stringify(e),t)}},{key:"onMessage",value:function(e,t){var n={};try{n=JSON.parse(e.data)}catch(e){}n.namespace===this.namespace&&("destination-sync-init"===n.msgType&&(this.iframe.dataset.loaded=!0),"destination-sync-init"!==n.msgType&&"destination-sync-read"!==n.msgType||(this.cookies=n.cookies),t())}}])&&i(t.prototype,n),o&&i(t,o),e}()},82:function(e,t,n){"use strict";var r,i,a=n(0),o=n(70),s=n(2),c=n(17),u=n(31),d=window.BZFD.Config.facebookApi.appId||null,l=window.BZFD.Config.facebookApi.version;function f(){return i||(i=new Promise((function(e){window.fbAsyncInit=function(){(r=window.FB).init({version:l,appId:d,status:!0,cookie:!0,xfbml:!0}),e(r)}})),s.b.createScript("//connect.facebook.net/en_US/sdk.js")),i}function p(){var e=o.a.sessionGet("offset");e&&window.scrollTo(0,e)}var h={parse:function(e){return f().then((function(t){return t.XFBML.parse(e)}))},subscribe:function(e,t){return f().then((function(n){return n.Event.subscribe(e,t)}))},unsubscribe:function(e,t){return f().then((function(n){return n.Event.unsubscribe(e,t)}))},ui:function(e,t){r.ui(e,t)}};h.openFeedDialog=function(e){var t=s.b.extend({},{method:"share",app_id:d,href:u.a.getUrl(),caption:u.a.getCaption(),description:u.a.getDescription(),name:u.a.getTitle(),picture:u.a.getPicture(),ref:"mobile_share",iframe_test:!0},e);if(t.app_id=d,e.redirect_uri=e.redirectUri||e.url,r){o.a.sessionSet({key:"offset",value:window.scrollY}),h.ui(t,p);var n=a.b.findOne(document,"#fb_dialog_loader_close");n&&a.b.one(n,"click",(function(e){return e.preventDefault()}))}else s.b.openPopup(s.b.prepareUrl("https://www.facebook.com/dialog/"+t.method+"/?",t))},h.share=function(e,t){"android"===c.a.os&&(e.display="popup",e.iframe_test=!1),t&&t.preventDefault(),h.openFeedDialog(e)},h.init=f,t.a=h},9:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return i.a})),n.d(t,"h",(function(){return b.a})),n.d(t,"c",(function(){return _})),n.d(t,"e",(function(){return k.a})),n.d(t,"f",(function(){return M})),n.d(t,"d",(function(){return I.a})),n.d(t,"g",(function(){return A}));var r=n(14),i=n(94);n(92);function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function c(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function u(e,t){return e&&e.then?e.then(t):t(e)}function d(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var l=d((function(e,t){return!t||t<2||t>8?e:s(function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onabort=r.onerror=n,r.src=e}))}(e),(function(e){var n=e.width,r=e.height,i=document.createElement("canvas"),a=i.getContext("2d");switch(4<t&&t<9?(i.width=r,i.height=n):(i.width=n,i.height=r),t){case 2:return void a.transform(-1,0,0,1,n,0);case 3:return void a.transform(-1,0,0,-1,n,r);case 4:return void a.transform(1,0,0,-1,0,r);case 5:return void a.transform(0,1,1,0,0,0);case 6:return void a.transform(0,1,-1,0,r,0);case 7:return void a.transform(0,-1,-1,0,r,n);case 8:return void a.transform(0,-1,1,0,0,n);default:return}return a.drawImage(e,0,0),i.toDataURL()}))})),f=d((function(e){return s(function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onabort=r.onerror=n,r.readAsArrayBuffer(e)}))}(e),(function(e){var t=new DataView(e);if(65496!==t.getUint16(0,!1))return-2;for(var n=t.byteLength,r=2;r<n;){if(t.getUint16(r+2,!1)<=8)return-1;var i=t.getUint16(r,!1);if(r+=2,65505===i){if(1165519206!==t.getUint32(r+=2,!1))return-1;var a=18761===t.getUint16(r+=6,!1);r+=t.getUint32(r+4,a);var o=t.getUint16(r,a);r+=2;for(var s=0;s<o;s++)if(274===t.getUint16(r+12*s,a))return t.getUint16(r+12*s+8,a)}else{if(65280!=(65280&i))return;r+=t.getUint16(r,!1)}}return-1}))})),p=(d((function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fixOrientation,i=void 0===r||r;if(!e)throw g;if(!y(e))throw m;return u(c((function(){return s(p(e),(function(e){t=e}))}),(function(){t=v(e)})),(function(){return i?c((function(){return s(f(e),(function(e){return s(l(t,e))}))}),(function(){return t})):t}))})),d((function(e){return s(function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){e&&e.target&&e.target.result?t(e.target.result):n(h)},r.onabort=r.onerror=function(){return n(h)},r.readAsDataURL(e)}))}(e),(function(e){if(!e||-1===e.indexOf("image"))throw h;return e}))}))),h="Unable to read file",g="`file` is required",m="Wrong file type";function v(e){var t=window.URL||window.webkitURL;return e&&t&&t.createObjectURL?t.createObjectURL(e):null}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["image/jpg","image/jpeg","image/png","image/gif"].concat(a(t));return!(!e||!e.type)&&-1!==n.indexOf(e.type)}var b=n(45),w=n(48),_=function(e){var t=e.env;return new w.a({namespace:"bf-xdomain-tracking",cookieName:"bf-xdomain-session-uuid",env:t}).get().then((function(e){return e=e||""})).catch((function(e){console.log("Error getting session UUID: ".concat(e))}))};var k=n(47);n(61),n(74),n(15),n(159);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var E;E=function(e){var t,n,r=e.context,i=e.layers,a=void 0===i?[]:i,o={};return t=function(e,t,n){var r,i,a=-1;return function o(s){try{for(;++a<e.length&&(!n||!n());)if((s=t(a))&&s.then){if(!((c=s)instanceof x&&1&c.s))return void s.then(o,i||(i=C.bind(null,r=new x,2)));s=s.v}r?C(r,1,s):r=s}catch(e){C(r||(r=new x),2,e)}var c}(),r}(a,(function(e){var t=a[e];return function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}((function(){if("function"==typeof t)return S(t(r()),(function(e){t=e}))}),(function(){o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{},t)}))})),n=function(){return o},t&&t.then?t.then(n):n(t)};function C(e,t,n){if(!e.s){if(n instanceof x){if(!n.s)return void(n.o=C.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(C.bind(null,e,t),C.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var x=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var a=1&i?t:n;if(a){try{C(r,1,a(this.v))}catch(e){C(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?C(r,1,t?t(i):i):n?C(r,1,n(i)):C(r,2,i)}catch(e){C(r,2,e)}},r},e}();function M(e){return!!(e?e.toLowerCase():navigator.userAgent.toLowerCase()).match(/gsa/)}var I=n(93);function P(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}"".concat("sticky:","members-update"),new Map,new Map;var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buzzfeed.com";try{var n=new URL(e);if(n.hostname.includes(t))return!0}catch(t){if("/"===e[0])return!0}return!1}},92:function(e,t,n){"use strict";function r(e){return e+"|expiration"}var i=function(){try{return localStorage.setItem("ls_test",!0),localStorage.removeItem("ls_test"),!0}catch(e){return!1}}();t.a={set:function(e){i&&void 0!==e&&(localStorage.setItem(e.key,e.value),e.expires&&localStorage.setItem(r(e.key),Date.now()+e.expires))},get:function(e){return i?function(e){var t=localStorage.getItem(r(e));return t&&t<=Date.now()}(e)?(this.remove(e),null):localStorage.getItem(e):null},sessionSet:function(e){i&&void 0!==e&&sessionStorage.setItem(e.key,e.value)},sessionGet:function(e){return i?sessionStorage.getItem(e):null},remove:function(e){i&&(localStorage.removeItem(r(e)),localStorage.removeItem(e))},clear:function(){i&&localStorage.clear()}}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14);function i(){return r.a.get("bf-geo-country")||"US"}},94:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"needsConsent",(function(){return l})),n.d(r,"isConsentStringCookieSet",(function(){return f})),n.d(r,"getConsentFramework",(function(){return p})),n.d(r,"getConsentFrameworkAsString",(function(){return h}));var i={};n.r(i),n.d(i,"init",(function(){return k})),n.d(i,"pingTCF",(function(){return T})),n.d(i,"setTCFListener",(function(){return O})),n.d(i,"getTCData",(function(){return S})),n.d(i,"uspApi",(function(){return E})),n.d(i,"pingUSP",(function(){return C})),n.d(i,"getUSPData",(function(){return x})),n.d(i,"setUSPDefaultData",(function(){return M}));var a={};n.r(a),n.d(a,"fetchAdPurposeConsent",(function(){return A})),n.d(a,"isEligibleForCCPA",(function(){return F})),n.d(a,"fetchCCPAValue",(function(){return D})),n.d(a,"fetchCCPAOptOut",(function(){return N})),n.d(a,"fetchRawVendorConsents",(function(){return j})),n.d(a,"fetchRawPublisherConsents",(function(){return R})),n.d(a,"fetchTrackingConsent",(function(){return L})),n.d(a,"hasConsented",(function(){return B}));var o=n(14),s=n(15),c=function(){return"undefined"==typeof window},u=function(){return c()?"":window.location.search};function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(){if(c())return!1;var e=Object(s.c)(u())["display-consent"]||"";if(["quantcast","gdpr","ccpa"].includes(e))return!0;var t=o.a.get("gdpr"),n=o.a.get("ccpa");return"string"==typeof t?"true"===t:"string"==typeof n&&"true"===n},f=function(){if(c())return!1;var e=o.a.get("euconsent-v2")||o.a.get("euconsent"),t=o.a.get("usprivacy");return"string"==typeof e||"string"==typeof t&&"Y"===t.charAt(2)},p=function(){return function(){var e=0;!function(){for(var e,t=[],n=window;n;){try{if(n.frames.__tcfapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}e||(!function e(){var t=n.document,r=!!n.frames.__tcfapiLocator;if(!r)if(t.body){var i=t.createElement("iframe");i.style.cssText="display:none",i.name="__tcfapiLocator",t.body.appendChild(i)}else setTimeout(e,5);return!r}(),n.__tcfapi=function(){var e,n=arguments;if(!n.length)return t;if("setGdprApplies"===n[0])n.length>3&&2===n[2]&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0));else if("ping"===n[0]){var r={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof n[2]&&n[2](r)}else t.push(n)},n.addEventListener("message",(function(e){var t="string"==typeof e.data,n={};try{n=t?JSON.parse(e.data):e.data}catch(e){}var r=n.__tcfapiCall;r&&window.__tcfapi(r.command,r.version,(function(n,i){var a={__tcfapiReturn:{returnValue:n,success:i,callId:r.callId}};t&&(a=JSON.stringify(a)),e.source.postMessage(a,"*")}),r.parameter)}),!1))}();var t=function e(){var t=arguments;d(window.__uspapi)!==e&&setTimeout((function(){void 0!==window.__uspapi&&window.__uspapi.apply(window.__uspapi,t)}),500)};if(void 0===window.__uspapi){window.__uspapi=t;var n=setInterval((function(){e++,window.__uspapi===t&&e<3?console.warn("USP is not accessible"):clearInterval(n)}),6e3)}}},h=function(){return"(".concat(p().toString(),")();")},g=n(24),m=n(45),v=n(158);function y(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var b="https://quantcast.mgr.consensu.org/choice";function w(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function _(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}var k=n.n(v)()(w((function(){var e,t,n,r,i=window.location.hostname,a="".concat(b,"/3aud4J6uA4Z6Y/").concat(i,"/choice.js"),o=document.querySelector('script[src^="'.concat(a,'"]'));return t=Object(s.c)(u())["display-consent"]||"",["gdpr","ccpa"].includes(t)&&window.__tcfapi("addEventListener",2,(function(e,n){n&&"cmpuishown"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus&&("gdpr"===t&&e.gdprApplies?window.__tcfapi("displayConsentUi",2,(function(){})):"ccpa"!==t||e.gdprApplies||window.__uspapi("displayUspUi"))})),o?null:(n=function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return y(Object(m.a)("".concat(a,"?timestamp=").concat(Date.now())),(function(t){e=t}))}),(function(){return y(Object(m.a)("".concat(b,".js")),(function(t){e=t}))})),r=function(){return e},n&&n.then?n.then(r):r(n))}))),T=function(){return _(k,(function(){return new Promise((function(e){window.__tcfapi("ping",2,(function(t){e(t)}))}))}))},O=function(e){return _(k,(function(){window.__tcfapi("addEventListener",2,(function(t,n){e({tcData:t,success:n})}))}))},S=function(){return _(k,(function(){return new Promise((function(e){window.__tcfapi("getTCData",2,(function(t,n){e({tcData:t,success:n})}))}))}))},E=w((function(e){return new Promise((function(t){window.__uspapi(e,1,(function(e,n){t({uspData:e,success:n})}))}))})),C=function(){return _(k,(function(){return E("uspPing")}))},x=function(){return _(k,(function(){return E("getUSPData")}))},M=function(){return _(k,(function(){return E("setUspDftData")}))};function I(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(e){return Promise.reject(e)}}var P,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I(S,(function(t){var n=t.success,r=t.tcData;if(r&&"gdprApplies"in r&&!r.gdprApplies)return!0;var i=r.purpose.consents;if(!i[g.c.INFORMATION_STORAGE])return!1;var a=r.vendor.consents||{},o=null===e||e&&a&&e.every((function(e){return a[e]}));return n&&i&&!!i[g.c.INFORMATION_STORAGE]&&!!i[g.c.CREATE_PERSONALISED_ADS]&&!!i[g.c.SELECT_PERSONALISED_ADS]&&!!i[g.c.APPLY_MARKET_RESEARCH]&&!!i[g.c.DEVELOP_PRODUCTS]&&o}))},F=function(){return I(C,(function(e){var t=e.success,n=e.uspData,r=n.mode,i=n.location,a=n.jurisdiction;return t&&r.includes("USP")&&a.includes(i.toUpperCase())}))},D=function(){return I(F,(function(e){return e&&document.querySelector("html").classList.add("show-ccpa"),o.a.get("usprivacy")}))},N=function(){return I(D,(function(e){return"string"==typeof e&&"Y"===e.charAt(2)}))},j=function(e){return I(S,(function(t){var n=t.tcData.vendor.consents;if(!e)return n;var r={};return e.forEach((function(e){r[e]=n[e]})),r}))},R=function(e){return I(S,(function(t){var n=t.tcData.publisher.consents;if(!e)return n;var r={};return e.forEach((function(e){r[e]=n[e]})),r}))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return I(N,(function(t){return!t&&I(S,(function(t){var n=t.tcData,r=t.success;try{if("gdprApplies"in n&&!n.gdprApplies)return!0;var i=n.vendor.consents||{},a=n.purpose.consents||{},o=null===e||e&&i&&e.every((function(e){return i[e]}));return r&&a&&!!a[g.c.INFORMATION_STORAGE]&&!!a[g.c.CREATE_PERSONALISED_CONTENT_PROFILE]&&o}catch(e){return!1}}))}))},B=(P=function(e){var t={ads:A,google:A.bind(null,g.a),tracking:L,permutive:L.bind(null,g.b)}[e];return!!t&&t()},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(P.apply(this,e))}catch(e){return Promise.reject(e)}});t.a={framework:r,rules:a,api:i}},96:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(5),i=n.n(r),a="track/website/instrumentation";function o(e){var t=e.getOrCreateMap(a);return t.addMapTo("type","instrumentation"),t.addMapTo("platform","").mapFrom((function(e){return i()(e,"data.".concat("platform"))||i()(e,"data.page.platform")})),t.addMapTo("edition","").mapFrom("data.page.country"),t.addMapTo("category","").mapFrom((function(e){return i()(e,"data.page.category")||"home"})),t.addMapTo("target","").mapFrom("data.".concat("target")),t.addMapTo("value","").mapFrom("data.".concat("value")),t.addMapTo("tags","").mapFrom((function(e){return JSON.stringify(i()(e,"data.".concat("tags"),""))})),t}},97:function(e,t,n){"use strict";var r=n(161),i=n.n(r);t.a={renderString:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.a.compile(e,n).render(t)}}}},[[630,0,1]]]);
//# sourceMappingURL=bfa.54b3345e900b22ee9528.js.map