if(!Opdb){function o_getTimestamp(t){return t?o_ts:(new Date).getTime()}var o_pvuid=0;function NodeStatus(t,i){this.t=t;this.i=!1;this.s=0;this.watch=!1;this.o=null;this.h=i}function OpdbInstance(){this.u={prefix:"pdb",watchedAttributes:["zid","sc","idc","ta","vi"],pixelURL:"//mp.woopic.com/adv/_pdb.gif",groupCalls:10,flushTimeout:1e3,flushOnExit:!0,transport:"beacon",method:"get",disableObserver:!1,debug:!1,plugin:void 0};this.l=[];this.interval=null}var o_ts=o_getTimestamp();OpdbInstance.prototype={o:null,v:!(NodeStatus.prototype={p:function(){return this.t},m:function(t){this.t=t},g:function(){return this.i},_:function(){this.i=!0;this.O()},k:function(){return this.s},S:function(){this.s=o_getTimestamp()},T:function(){return this.watch},C:function(){this.watch=!0},N:null,L:function(){this.k(),o_getTimestamp();if(0===this.k()||1e3<o_getTimestamp()-this.k()){this.S();this.h.click(this)}},A:function(){if(this.t&&this.t.nodeType){this.N=this.L.bind(this);this.t.addEventListener("mousedown",this.N,!0)}},I:function(){if(this.t&&this.t.nodeType){this.t.removeEventListener("mousedown",this.N,!0);this.N=null}},o:null,observe:function(){if("MutationObserver"in window&&!this.o){this.o=new MutationObserver(function(){this.h.M(this)}.bind(this));this.o.observe(this.t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}this.h.observe(this)},O:function(){this.o&&this.o.disconnect()}}),init:function(t){(t=t||{}).prefix&&(this.u.prefix=t.prefix);t.watchedAttributes&&(this.u.watchedAttributes=t.watchedAttributes);t.pixelURL&&(this.u.pixelURL=t.pixelURL);t.groupCalls&&(this.u.groupCalls=t.groupCalls);t.flushTimeout&&(this.u.flushTimeout=t.flushTimeout);void 0!==t.flushOnExit&&(this.u.flushOnExit=t.flushOnExit);t.transport?this.u.transport="beacon"===t.transport?navigator&&"sendBeacon"in navigator?"beacon":"pixel":t.transport:this.u.transport=navigator&&"sendBeacon"in navigator?"beacon":"pixel";t.method&&(this.u.method=t.method);void 0!==t.disableObserver&&(this.u.disableObserver=t.disableObserver);void 0!==t.debug&&(this.u.debug=t.debug);void 0!==t.plugin&&o_pdb.plugins[t.plugin]&&(this.u.plugin=o_pdb.plugins[t.plugin]);this.watch()},click:function(t){this.send("click",t)},view:function(t){this.send("view",t)},D:function(t){if(!(t instanceof Element))throw Error("DomUtil: elem is not an element.");var i=getComputedStyle(t);if("none"===i.display)return!1;if("visible"!==i.visibility)return!1;if(i.opacity<.1)return!1;if(t.offsetWidth+t.offsetHeight+t.getBoundingClientRect().height+t.getBoundingClientRect().width===0)return!1;var e={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2};if(e.x<0)return!1;if(e.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(e.y<0)return!1;if(e.y>(document.documentElement.clientHeight||window.innerHeight))return!1;var n=document.elementFromPoint(e.x,e.y);do{if(null===n)break;if(n===t)return!0}while(n=n.parentNode);var s=t;"string"==typeof s&&(s=document.querySelector(s));var r=function(t){var i=getComputedStyle(t);if("0"===i.opacity||"none"===i.display||"hidden"===i.visibility)return!1;var e=t.parentNode;if(e){if(e===document)return!0;var n=getComputedStyle(e).overflow,s=t.getBoundingClientRect(),o=e.getBoundingClientRect();if("hidden"===n||"scroll"===n){if(!(s.top+2>=o.top&&s.right-2<=o.right+e.scrollLeft&&s.bottom-2<=o.bottom+e.scrollTop&&s.left+2>=o.left))return!1}return r(e)}return!0};return!(!s||!function(t){for(;t=t.parentNode;)if(t===document)return!0;return!1}(s))&&r(s)},G:null,P:function(){if(!this.G){this.G=this.R.bind(this);document.addEventListener("scroll",this.G)}},U:function(){document.removeEventListener("scroll",this.G);this.G=null},W:0,R:function(){window.setTimeout(function(){var t=o_getTimestamp();if(t>this.W+200){this.W=t;var i,e;for(i in this.l)(e=this.l[i]).g()||this.M(e)}else this.W=t}.bind(this),200)},M:function(t){t.t;if(!t.i)if(!document.hidden&&this.D(t.t)){t._();this.view(t);this.B(!0);t.A()}else if(!t.T()){t.C();this.F();t.observe()}},H:function(t){for(var i in this.l)if(i.t===t)return this.l[i];return!1},O:function(){this.o&&setTimeout(function(){this.o&&this.o.disconnect()}.bind(this),500)},J:function(){this.P();if("MutationObserver"in window){this.o=new MutationObserver(function(t){this.R()}.bind(this));this.o.observe(document.body,{attributes:!0,childList:!0,characterData:!1,subtree:!0})}},observe:function(t){this.o||this.J();var i={root:document.body,attributes:!0,characterData:!1,childList:!0};this.o.observe(t.t,i)},F:function(){this.P();this.o||this.u.disableObserver||this.J()},B:function(t){if(t)for(var i in this.l)if(!this.l[i].g())return;this.U();this.O()},check:function(t){this.watch(t)},q:function(i){var t=this.l.filter(function(t){return t.t===i})[0];if(t)this.M(t);else{var e=new NodeStatus(i,this);this.l.push(e);this.M(e);this.l}},watch:function(t){var i=t&&"object"==typeof t&&"nodeType"in t?t:document.querySelector(t&&"string"==typeof t?t:"body");(!i||1<i.length)&&(i=document.querySelector("body"));for(var e=this.u.watchedAttributes.map(function(t){return"*[data-"+this.u.prefix+"-"+t+"]"}.bind(this)).join(", "),n=i.querySelectorAll(e),s=0;s<n.length;s++)this.q(n[s])},X:function(t){var i,e,n={pvuid:function(t){if(o_pvuid&&!t)return o_pvuid;var i,e,n=o_getTimestamp(!t)+document.location.hostname+window.o_sGetCookie("_ga")||window.o_sGetCookie("_gid")||"noGA";if((o_pvuid=0)===n.length)return o_pvuid;for(i=0;i<n.length;i++){e=n.charCodeAt(i);o_pvuid=(o_pvuid<<5)-o_pvuid+e;o_pvuid&=o_pvuid}return o_pvuid=Math.abs(o_pvuid)}(),ts:o_getTimestamp(),url:document.location.href};for(i=0;i<this.u.watchedAttributes.length;i++)n[e=this.u.watchedAttributes[i]]=this.getAttribute(t,e);n.gaProps=this.V.j();n.gaClientId=this.V.K();return n},getAttribute:function(t,i){var e=t.t.getAttribute("data-"+this.u.prefix+"-"+i);return e=e},Y:function(){var t=arguments.callee.caller;if(this.u.plugin&&this.u.plugin[t.name]){this.u.plugin[t.name].Z.apply(this,t.arguments);return!!this.u.plugin[t.name].$}return!1},send:function(t,i){if(!this.Y()){var e=this.X(i);e.eventType=t;this.u.transport;switch(this.u.transport){case"beacon":switch(this.u.method.toLowerCase()){case"post":e=this.V.tt(e);navigator.sendBeacon(this.u.pixelURL,e);break;case"get":default:navigator.sendBeacon(this.u.pixelURL+"?"+this.V.it(e))}break;case"xhr":var n=new XMLHttpRequest;switch(this.u.method.toLowerCase()){case"post":n.open("POST",this.u.pixelURL,!0);n.send(e);break;case"get":default:n.open("GET",this.u.pixelURL+"?"+this.V.it(e),!0);n.send()}break;case"pixel":default:if(!this.v){this.v=new Image;this.v.onload=function(){this.v.et=!1;if(0<this.v.nt.length){this.v.et=!0;this.v.src=this.v.nt.shift()}}.bind(this);this.v.onerror=function(){this.v.et=!1;if(0<this.v.nt.length){this.v.et=!0;this.v.src=this.v.nt.shift()}}.bind(this);this.v.id="o-pdb";this.v.height="1";this.v.width="1";this.v.style="border-style:none;";this.v.alt="";this.v.nt=[]}if(this.v.et)this.v.nt.push(this.u.pixelURL+"?"+this.V.it(e));else{this.v.et=!0;this.v.src=this.u.pixelURL+"?"+this.V.it(e)}}}},V:{it:function(t){var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return i.join("&")},j:function(){var i=[];"ga"in window&&"getAll"in ga&&"function"==typeof ga.getAll&&ga.getAll().forEach(function(t){i.push(t.get("trackingId"))});return i.join("|")},K:function(){var i=null;"ga"in window&&"getAll"in ga&&"function"==typeof ga.getAll&&ga.getAll().forEach(function(t){i=t.get("clientId")});return i},tt:function(t){var i=new FormData;for(var e in t)t.hasOwnProperty(e)&&i.append(e,t[e]);return i}},log:function(t){if(this.u.debug&&"from"in Array){var i=["%c[PDB]%c %s","color: #ff8500; font-weight: bold","color: normal; font-weight: normal",t],e=Array.from(arguments);e.splice(0,1);i=i.concat(e)}}};var Opdb=function(){};Opdb.prototype={st:{},ot:function(t){var i,e={watchedAttributes:t.watchedAttributes||void 0,pixelURL:t.pixelURL||void 0},n=JSON.stringify(e),s=0;if(0===n.length)return s;for(i=0;i<n.length;i++){s=(s<<5)-s+n.charCodeAt(i);s|=0}return s},init:function(t){var i=this.ot(t);if(this.st[i]){this.st[i].watch();return this.st[i]}var e=new OpdbInstance;e.init(t);this.st[i]=e;if("complete"!==window.document.readyState){e.interval=setInterval(function(){e.watch()}.bind(this),500);document.addEventListener("readystatechange",function(t){if("complete"===document.readyState){clearInterval(e.interval);this.st[i].watch()}}.bind(this))}},watch:function(){},plugins:{adviseCapping:{send:{$:!0,Z:function(t,i){var e=this.X(i);e.eventType=t;this.u.transport;var n=new XMLHttpRequest;e.cappingdata=e.cappingdata.replace(/'/g,'"');e.canal=e.canal?e.canal:"0a7";e.cappingdata=JSON.parse(e.cappingdata);e.cappingdata.a="view"===t?"display":"enter";e.cappingdata=JSON.stringify([{type:"view"===t?0:1,codes:[e.cappingdata]}]);delete e.eventType;delete e.gaProps;delete e.pvuid;delete e.ts;delete e.gaClientId;e=this.V.it(e);n.open("POST",this.u.pixelURL,!0);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.withCredentials=!0;n.send(e)}}}}}}window.o_pdb=window.o_pdb||new Opdb;