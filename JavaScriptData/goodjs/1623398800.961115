(window.webpackJsonp=window.webpackJsonp||[]).push([[445],{1361:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var c=n(230),a=n.n(c),o=n(138),r=n.n(o),s=n(18);var i=n(20),d=n.n(i);async function u(t,e={}){const n=(new Date).getTime(),{responseHeaders:c,...o}=t,i=r.a.format(o),u=Object(s.createLogger)("dal",{url:i});try{const t=await fetch(i,e),o=await async function(t){const{ok:e,status:n,statusText:c}=t,a={ok:e,status:n,statusText:c};let o="";try{if(o=await t.text(),!e)return{...a,data:{text:o}};const n=JSON.parse(o);return{...a,data:n}}catch(t){return{...a,data:{text:o}}}}(t);if(c){const e=function(t,e){return d()(e).call(e,(e,n)=>({...e,[n]:t.headers.get(n)}),{})}(t,c);o.data={...o.data,responseHeaders:e}}return u.info({responseTime:a()()-n+"ms",fetchOptions:e},"dal request"),o}catch(t){switch(!0){case"FetchError"===t.name&&"request-timeout"===t.type:throw new Error("Timeout exceeded for "+i);case"FetchError"===t.name&&"invalid-json"===t.type:throw new Error("Got non-JSON or invalid JSON response for "+i);default:throw t}}}},2118:function(t,e,n){"use strict";n.r(e),n.d(e,"clientLoader",(function(){return f}));var c=n(5),a=n(74),o=n(1361),r=n(174);const s=Object(r.a)("UPS2","HOST","PURCHASE"),i=Object(r.a)("UPS2","PROTOCOL","PURCHASE","https");var d=n(48);function*u(){yield Object(c.c)(b),yield Object(c.c)(O)}function*O(){const t=yield Object(c.i)(a.h),e=yield Object(c.i)(a.g),n=Object(a.d)(e),o=Object(a.b)(e);t&&(n&&!o)&&(yield Object(c.c)(l))}function*b(){const t=yield Object(c.i)(a.h),{SubsSdk:e}=window;if(t&&e){const t=yield Object(c.i)(a.g),n=Object(a.b)(t),o=Object(d.getEnv)("PIANO_APP_ID"),r=Object(d.getEnv)("PIANO_TINYPASS_HOST"),s=Object(d.getEnv)("PIANO_WX_API_HOST"),i=n;yield Object(c.c)([e,e.init],{pianoAppID:o,tinyPassHost:r,pianoKeyHost:s,disableAdBlocker:i})}}function*l(){const t={host:s,protocol:i,pathname:"/purchase/token"};yield Object(c.c)(o.a,t,{credentials:"include"})}async function f(t){await t.runSaga(u)}}}]);
//# sourceMappingURL=445.subscription.1249818b809b58ec5f3d.js.map