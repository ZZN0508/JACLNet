(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[964],{14778:function(n,e,t){"use strict";t.r(e),t.d(e,{PopupUtilsSymbol:function(){return o.zC},PopupsLinkUtilsAPISymbol:function(){return o.wk},PopupsSymbol:function(){return o.r_},editor:function(){return E},editorPage:function(){return R},name:function(){return o.u2},page:function(){return S},site:function(){return L}});var o=t(23228),u=t(5096),r=t(55031),p=t(59032),i=t(31191),a=t(43757),c=t(61049),l=t(55048),d=t(51831),s=t(8562),f=t(24263),P=t(96456),g=(0,a.ff)([f.xf,u.ZQ,(0,a.t6)(c.Wf,"popups"),l.QZ,(0,a.t6)(c.jC,o.u2),f.JR,P.O],(function(n,e,t,o,u,r,a){var c,l=n.initPage,f=[],P=[],g=null,v=a.isDuringNavigation()?a.waitForNavigationEnd():Promise.resolve(),m=function(n){"Escape"===n.key&&C()},C=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,o,u;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return(n=I())?[4,r(n,n)]:[2];case 1:return o=a.sent(),u=o.getAllImplementersOf(p.j.PageWillUnmountHandler),[4,Promise.all(u.map((function(e){return e.pageWillUnmount({pageId:n,contextId:n})})))];case 2:return a.sent(),(0,d.i)(),O(n),(0,s.yF)(e)||e.removeEventListener("keydown",m),g&&(g(),g=null),P.length>0&&P.forEach((function(n){n&&n()})),t.update((function(n){return(0,i.pi)((0,i.pi)({},n),{pageWillLoadHandler:null,currentPopupId:void 0,pendingPopupId:void 0})})),[2]}}))}))},I=function(){return t.get()?t.get().currentPopupId:void 0},h=function(n){var e,t=o.getPageWrapperComponentId(n,n);return o.addComponentToDynamicStructure("POPUPS_ROOT",{componentType:"PopupRoot",components:[t],uiType:u.isResponsive?"Responsive":"Classic"},((e={})[t]={componentType:"PageMountUnmount",components:[n]},e))},O=function(n){var e=o.getPageWrapperComponentId(n,n);o.removeComponentFromDynamicStructure(e),o.removeComponentFromDynamicStructure("POPUPS_ROOT")},_=function(n,o){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return r=n,(null==(p=t.get())?void 0:p.currentPopupId)===r||(null==p?void 0:p.pendingPopupId)===r?[2]:(t.update((function(e){return(0,i.pi)((0,i.pi)({},e),{pendingPopupId:n})})),(0,d.U)(),[4,l({pageId:n,contextId:n})]);case 1:return u.sent(),o&&(g=o),f.length>0&&f.forEach((function(e){e&&e(n)})),(0,s.yF)(e)||e.addEventListener("keydown",m),[4,h(n)];case 2:return u.sent(),t.update((function(e){return(0,i.pi)((0,i.pi)({},e),{pageWillLoadHandler:C,currentPopupId:n})})),[2]}var r,p}))}))};return{isPopupPage:function(n){return u.popupPages[n]},openPopupPage:function(n,e){return void 0===e&&(e=null),v=v.then((function(){return _(n,e)}))},closePopupPage:C,registerToPopupEvent:function(n,t){switch(n){case"popupScroll":c=t;var o=e.document.getElementById("POPUPS_ROOT");o&&o.addEventListener("scroll",c);break;case"popupOpen":f.push(t);break;case"popupClose":P.push(t)}},getCurrentPopupId:I}})),v=(0,a.ff)([(0,a.t6)(c.Wf,"popups")],(function(n){return{appWillLoadPage:function(){var e=n.get();e&&e.pageWillLoadHandler&&e.pageWillLoadHandler()}}})),m=t(31428),C=t(19238),I=["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"],h=(0,a.ff)([o.r_,C.Iz],(function(n,e){return{handleClick:function(t){var o=t.getAttribute("data-popupid");if(o)return n.openPopupPage(o),!0;var u=e.getFullUrlWithoutQueryParams(),r=!!n.getCurrentPopupId(),p=t.getAttribute("href"),i=u===(p&&(0,m.Gw)(p)),a=t.getAttribute("data-anchor")||"",c=I.includes(a);return!(!r||!i&&!c)&&(n.closePopupPage(),!0)}}})),O=t(11552),_=(0,a.ff)([o.r_,O.G],(function(n,e){return{componentTypes:["PopupCloseIconButton"],componentWillMount:function(t){e.register(t.id,"onClick",n.closePopupPage)}}})),y=(0,a.ff)([(0,a.t6)(c.$e,o.u2),o.r_,O.G],(function(n,e,t){var o=n.closeSiteButtons;return{componentTypes:["SiteButton"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}})),W=(0,a.ff)([(0,a.t6)(c.$e,o.u2),o.r_,O.G],(function(n,e,t){var o=n.popupsWithCloseOnOverlayClick;return{componentTypes:["PopupPage","ResponsivePopupPage"],componentWillMount:function(n){o[n.id]&&t.register(n.id,"onClick",e.closePopupPage)}}})),k=(0,a.ff)([(0,a.t6)(c.jC,o.u2),(0,a.t6)(c.Wf,o.u2)],(function(n,e){return{getPopupPages:function(){return n.popupPages},getCurrentOrPendingPopupId:function(){var n,t;return(null===(n=e.get())||void 0===n?void 0:n.currentPopupId)||(null===(t=e.get())||void 0===t?void 0:t.pendingPopupId)}}})),T=(0,a.ff)([(0,a.t6)(c.jC,o.u2),(0,a.t6)(c.Wf,o.u2)],(function(n,e){return{isPopupPage:function(e){return n.popupPages[e]},getCurrentPopupId:function(){var n;return null===(n=e.get())||void 0===n?void 0:n.currentPopupId}}})),b=(0,a.ff)([o.wk],(function(n){return{get platformEnvData(){return{popups:{popupPages:n.getPopupPages()}}}}})),w=t(65482),L=function(n){n(o.r_).to(g),n(u.nB).to(b),n(o.zC).to(T),n(o.wk).to(k),n(r.QV).to(h),n(p.j.AppWillLoadPageHandler).to(v)},S=function(n){n(w.Vx).to(_),n(w.Vx).to(y),n(w.Vx).to(W)},E=L,R=S}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/popups.8598d6cd.chunk.min.js.map