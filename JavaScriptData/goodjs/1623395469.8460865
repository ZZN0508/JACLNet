/*! v3.4.0 */!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=304)}([function(e,t,n){(function(t){e.exports=t.React=n(572)}).call(this,n(22))},function(e,t,n){var r=n(6),i=n(39),o=n(30),a=n(31),s=n(40),u=function(e,t,n){var c,l,f,h,d=e&u.F,p=e&u.G,v=e&u.S,m=e&u.P,g=e&u.B,y=p?r:v?r[t]||(r[t]={}):(r[t]||{}).prototype,_=p?i:i[t]||(i[t]={}),b=_.prototype||(_.prototype={});for(c in p&&(n=t),n)f=((l=!d&&y&&void 0!==y[c])?y:n)[c],h=g&&l?s(f,r):m&&"function"==typeof f?s(Function.call,f):f,y&&a(y,c,f,e&u.U),_[c]!=f&&o(_,c,h),m&&b[c]!=f&&(b[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";var r=function(){function e(e){this.parsedOriginalChat=e,this._borderLineColor="",this._params={},this._content=e.content,this._vposMs=10*this.vpos}return e.prototype.reset=function(){this._content=this.parsedOriginalChat.content,this._params={}},e.prototype.addParam=function(e,t){this._params[e]=t},e.prototype.getParam=function(e){return this._params[e]},e.prototype.existCommand=function(e){return!!e&&this.commands.indexOf(e.toLowerCase())>=0},e.prototype.isMatchedUser=function(e){return this.userId&&this.userId===e},Object.defineProperty(e.prototype,"originalContent",{get:function(){return this.parsedOriginalChat.content||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content||""},set:function(e){this._content=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thread",{get:function(){return this.parsedOriginalChat.thread},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vpos",{get:function(){return this.parsedOriginalChat.vpos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vposMs",{get:function(){return this._vposMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mail",{get:function(){return this.parsedOriginalChat.mail||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.parsedOriginalChat.position||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.parsedOriginalChat.size||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorName",{get:function(){return this.parsedOriginalChat.colorName||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorCode",{get:function(){return this.parsedOriginalChat.colorCode||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.parsedOriginalChat.color||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this.parsedOriginalChat.font||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"atNumber",{get:function(){return this.parsedOriginalChat.atNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commands",{get:function(){return this.parsedOriginalChat.commands||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleted",{get:function(){return!!this.parsedOriginalChat.deletedStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletedStatus",{get:function(){return this.parsedOriginalChat.deletedStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.parsedOriginalChat.userId||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"no",{get:function(){return this.parsedOriginalChat.no},set:function(e){this.parsedOriginalChat.no=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this.parsedOriginalChat.date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateUsec",{get:function(){return this.parsedOriginalChat.dateUsec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPremium",{get:function(){return 0!=(1&this.parsedOriginalChat.premium)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"premium",{get:function(){return this.parsedOriginalChat.premium},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anonymous",{get:function(){return this.parsedOriginalChat.anonymous},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nicoru",{get:function(){return this.parsedOriginalChat.nicoru},set:function(e){this.parsedOriginalChat.nicoru=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastNicoruDate",{get:function(){return this.parsedOriginalChat.lastNicoruDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valhalla",{get:function(){return this.parsedOriginalChat.valhalla},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"device",{get:function(){return this.parsedOriginalChat.device||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.parsedOriginalChat.score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderLineColor",{get:function(){return this._borderLineColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fork",{get:function(){return void 0===this.parsedOriginalChat.fork?0:this.parsedOriginalChat.fork},enumerable:!0,configurable:!0}),e.prototype.setBorderLine=function(t){e.isColorCodeCommand(t)?this._borderLineColor=t:this._borderLineColor=""},e}();!function(e){function t(e){return/^#([\da-fA-F]{6})$/.test(e)}e.POSITIONS={get ue(){return"ue"},get naka(){return"naka"},get shita(){return"shita"}},e.DEFAULT_POSITION=e.POSITIONS.naka,e.SIZES={get big(){return"big"},get medium(){return"medium"},get small(){return"small"}},e.DEFAULT_SIZE=e.SIZES.medium,e.COLORS={get white(){return"#ffffff"},get red(){return"#ff0000"},get pink(){return"#ff8080"},get orange(){return"#ffc000"},get yellow(){return"#ffff00"},get green(){return"#00ff00"},get cyan(){return"#00ffff"},get blue(){return"#0000ff"},get purple(){return"#c000ff"},get black(){return"#000000"}},e.PREMIUM_COLORS={get white2(){return"#cccc99"},get niconicowhite(){return"#cccc99"},get red2(){return"#cc0033"},get truered(){return"#cc0033"},get orange2(){return"#ff6600"},get passionorange(){return"#ff6600"},get yellow2(){return"#999900"},get madyellow(){return"#999900"},get green2(){return"#00cc66"},get elementalgreen(){return"#00cc66"},get blue2(){return"#3399ff"},get marineblue(){return"#3399ff"},get purple2(){return"#6633cc"},get nobleviolet(){return"#6633cc"},get pink2(){return"#ff33cc"},get cyan2(){return"#00cccc"},get black2(){return"#666666"}},e.DEFAULT_COLOR=e.COLORS.white,e.FONTS={get defont(){return"defont"},get gothic(){return"gothic"},get mincho(){return"mincho"}},e.DEFAULT_FONT=e.FONTS.defont,e.isPositionCommand=function(t){return e.POSITIONS_ARRAY.indexOf(t)>=0},e.isSizeCommand=function(t){return e.SIZES_ARRAY.indexOf(t)>=0},e.isColorNameCommand=function(t){return e.COLORS_ARRAY.indexOf(t)>=0},e.isPremiumColorNameCommand=function(t){return e.PREMIUM_COLORS_ARRAY.indexOf(t)>=0},e.isColorCodeCommand=t,e.resolveToColorCode=function(n){return e.COLORS[n]||e.PREMIUM_COLORS[n]||t(n)&&n||e.DEFAULT_COLOR},e.isFontCommand=function(t){return e.FONTS_ARRAY.indexOf(t)>=0},e.AT_NUMBER_REG_EXP="@\\d+(?:\\.\\d+)?",e.extractAtNumber=function(t){var n=(t||"").match(new RegExp("(?:^|\\s)("+e.AT_NUMBER_REG_EXP+")(?:\\s|$)"));return n&&n[1]?1e3*Number(n[1].replace("@","")):null},e.POSITIONS_ARRAY=Object.keys(e.POSITIONS).map((function(t){return e.POSITIONS[t]})),e.SIZES_ARRAY=Object.keys(e.SIZES).map((function(t){return e.SIZES[t]})),e.COLORS_ARRAY=Object.keys(e.COLORS),e.PREMIUM_COLORS_ARRAY=Object.keys(e.PREMIUM_COLORS),e.FONTS_ARRAY=Object.keys(e.FONTS).map((function(t){return e.FONTS[t]}))}(r||(r={})),t.a=r},function(e,t,n){
/**
 * @file        Main export of the PIXI core library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
var r=e.exports=Object.assign(n(11),n(28),{utils:n(24),ticker:n(650),DisplayObject:n(241),Container:n(108),Sprite:n(245),ParticleContainer:n(654),SpriteRenderer:n(655),ParticleRenderer:n(659),Text:n(662),Graphics:n(663),GraphicsData:n(253),GraphicsRenderer:n(664),Texture:n(83),BaseTexture:n(106),RenderTexture:n(159),VideoBaseTexture:n(242),TextureUvs:n(243),CanvasRenderer:n(667),CanvasGraphics:n(162),CanvasBuffer:n(160),WebGLRenderer:n(109),WebGLManager:n(70),ShaderManager:n(248),Shader:n(111),TextureShader:n(110),PrimitiveShader:n(250),ComplexPrimitiveShader:n(249),ObjectRenderer:n(84),RenderTarget:n(107),AbstractFilter:n(161),FXAAFilter:n(252),SpriteMaskFilter:n(251),autoDetectRenderer:function(e,t,n,i){return e=e||800,t=t||600,!i&&r.utils.isWebGLSupported()?new r.WebGLRenderer(e,t,n):new r.CanvasRenderer(e,t,n)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clipboard=t.ProgramSearch=t.ProgramAudienceFingerprint=t.Recommend=t.UserProgramWatch=t.UserProgramReservation=t.Message=t.Enquete=t.Service=t.IchibaItem=t.Seat=t.MessageServer=t.Nicoex=t.Ng=t.Wall=t.User=t.Thumbnail=t.TrackingParams=t.Tag=t.SocialGroup=t.Program=t.Comment=t.Player=t.Timeshift=t.UserFollow=t.Stream=t.Quote=t.MyList=t.ChannelFollow=t.BroadcasterComment=t.BroadcastStream=t.Api=t.Akashic=t.AdsJs=t.Ad=void 0;var r=n(583);t.Ad=r;var i=n(584);t.AdsJs=i;var o=n(585);t.Akashic=o;var a=n(586);t.Api=a;var s=n(587);t.BroadcastStream=s;var u=n(588);t.BroadcasterComment=u;var c=n(589);t.ChannelFollow=c;var l=n(590);t.Comment=l;var f=n(594);t.Enquete=f;var h=n(595);t.IchibaItem=h;var d=n(596);t.ProgramAudienceFingerprint=d;var p=n(597);t.ProgramSearch=p;var v=n(603);t.MessageServer=v;var m=n(604);t.MyList=m;var g=n(605);t.Ng=g;var y=n(606);t.Nicoex=y;var _=n(607);t.Player=_;var b=n(234);t.Program=b;var E=n(608);t.Quote=E;var S=n(609);t.Recommend=S;var T=n(610);t.Seat=T;var w=n(611);t.Service=w;var O=n(612);t.SocialGroup=O;var R=n(613);t.Stream=R;var A=n(614);t.Tag=A;var P=n(615);t.Thumbnail=P;var x=n(616);t.Timeshift=x;var C=n(617);t.TrackingParams=C;var M=n(618);t.User=M;var L=n(619);t.UserFollow=L;var k=n(620);t.UserProgramReservation=k;var I=n(621);t.UserProgramWatch=I;var D=n(622);t.Wall=D;var N=n(14);t.Message=N;var F=n(623);t.Clipboard=F},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function m(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise((function(n,r){l.push([e,t,n,r])>1||i(e,t)}))})}function i(e,t){try{(n=c[e](t)).value instanceof v?Promise.resolve(n.value.v).then(o,a):s(l[0][2],n)}catch(e){s(l[0][3],e)}var n}function o(e){i("next",e)}function a(e){i("throw",e)}function s(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function g(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:v(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",(function(e){throw e})),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}n.r(t),n.d(t,"__extends",(function(){return r})),n.d(t,"__assign",(function(){return T})),n.d(t,"__rest",(function(){return i})),n.d(t,"__decorate",(function(){return o})),n.d(t,"__param",(function(){return a})),n.d(t,"__metadata",(function(){return s})),n.d(t,"__awaiter",(function(){return u})),n.d(t,"__generator",(function(){return c})),n.d(t,"__exportStar",(function(){return l})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return d})),n.d(t,"__spreadArrays",(function(){return p})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return m})),n.d(t,"__asyncDelegator",(function(){return g})),n.d(t,"__asyncValues",(function(){return y})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return b})),n.d(t,"__importDefault",(function(){return E}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},T=function(){return(T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){var r=n(88)("wks"),i=n(61),o=n(6).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n={VERSION:"__VERSION__",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=n},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(508),i=n(513),o=n(216);t.StreamQuality=o.StreamQuality;var a=n(215);t.StreamProtocol=a.StreamProtocol;var s=n(210);t.NicolivePlayerUsecase=s.NicolivePlayerUsecase;var u=n(223);t.EdgeStream=u.EdgeStream;var c=n(104);t.EdgeStreamResource=c.EdgeStreamResource;var l=n(221);t.Room=l.Room;var f=n(222);t.RoomProtocol=f.RoomProtocol;var h=n(571);t.Shimesaba=h.Shimesaba;var d=n(220);t.Niwavided=d.Niwavided;var p=n(103);t.EdgeStreamProtocol=p.EdgeStreamProtocol;var v=n(225);t.Rtmp=v.Rtmp;var m=n(226);t.WebRtc=m.WebRtc;var g=n(149);t.DmcHls=g.DmcHls;var y=n(150);t.DmcRtmp=y.DmcRtmp;var _=n(151);t.DmcWebRtc=_.DmcWebRtc;var b=n(224);t.Hls=b.Hls;var E=n(207);t.Program=E.Program;var S=n(208);t.LiveCycle=S.LiveCycle;var T=n(217);t.SeatWasTakenOverEvent=T.SeatWasTakenOverEvent;var w=n(218);t.Postkey=w.Postkey;var O=n(211);t.Statistics=O.Statistics;var R=n(213);t.Akashic=R.Akashic,t.isSupportedEnvironment=function(){return!!("WebSocket"in window)},t.createPlayerUsecase=function(e){var t=new r.NicolivePlayerExternalInterface(e);return new i.NicolivePlayerInterfaceAdapter(t,e).usecase}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Payload=t.createDataFactory=void 0;var r=n(9);t.createDataFactory=function(e){return e},function(e){var t="DataFactory",n="Message";e.prepareFactory=function(e){var i={};return Object.keys(e).forEach((function(o){var a=e[o]&&e[o][n]&&e[o][n][t];a&&Object.keys(a).forEach((function(e){var t=a[e];i[o]||(i[o]={}),i[o][e]={domain:o,code:e,create:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return{domain:o,code:e,data:r.__assign({},t.apply(void 0,n))}}}}))})),i},e.EMPTY_PARAMS=Object.freeze({})}(t.Payload||(t.Payload={}))},function(e,t,n){e.exports=!n(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5),i=n(172),o=n(45),a=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(47),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";function r(){r.init.call(this)}function i(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function o(e,t,n,r){var o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=i(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn}return e}function a(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,d(this.listener,this.target,e))}function s(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function u(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):l(i,i.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function l(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}var f,h="object"==typeof Reflect?Reflect:null,d=h&&"function"==typeof h.apply?h.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};f=h&&"function"==typeof h.ownKeys?h.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var p=Number.isNaN||function(e){return e!=e};e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var v=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(e){if("number"!=typeof e||e<0||p(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");v=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||p(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return i(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)d(s,this,t);else{var u=s.length,c=l(s,u);for(n=0;n<u;++n)d(c[n],this,t)}return!0},r.prototype.addListener=function(e,t){return o(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return o(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,s(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,s(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return u(this,e,!0)},r.prototype.rawListeners=function(e){return u(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},r.prototype.listenerCount=c,r.prototype.eventNames=function(){return this._eventsCount>0?f(this._events):[]}},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function f(e,t){return!!(null==e?0:e.length)&&b(e,t,0)>-1}function h(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function d(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function p(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function v(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function m(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function _(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function b(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):_(e,S,n)}function E(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function S(e){return e!=e}function T(e,t){var n=null==e?0:e.length;return n?A(e,t)/n:be}function w(e){return function(t){return null==t?V:t[e]}}function O(e){return function(t){return null==e?V:e[t]}}function R(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function A(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==V&&(n=n===V?o:n+o)}return n}function P(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function x(e){return function(t){return e(t)}}function C(e,t){return d(t,(function(t){return e[t]}))}function M(e,t){return e.has(t)}function L(e,t){for(var n=-1,r=e.length;++n<r&&b(t,e[n],0)>-1;);return n}function k(e,t){for(var n=e.length;n--&&b(t,e[n],0)>-1;);return n}function I(e){return"\\"+dn[e]}function D(e){return sn.test(e)}function N(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function F(e,t){return function(n){return e(t(n))}}function U(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==X||(e[n]=X,o[i++]=n)}return o}function j(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function G(e){return D(e)?function(e){var t=on.lastIndex=0;for(;on.test(e);)++t;return t}(e):Cn(e)}function H(e){return D(e)?function(e){return e.match(on)||[]}(e):function(e){return e.split("")}(e)}var V,z=200,W="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Y="Expected a function",q="__lodash_hash_undefined__",K=500,X="__lodash_placeholder__",$=1,J=2,Q=4,Z=1,ee=2,te=1,ne=2,re=4,ie=8,oe=16,ae=32,se=64,ue=128,ce=256,le=512,fe=30,he="...",de=800,pe=16,ve=1,me=2,ge=1/0,ye=9007199254740991,_e=17976931348623157e292,be=NaN,Ee=4294967295,Se=Ee-1,Te=Ee>>>1,we=[["ary",ue],["bind",te],["bindKey",ne],["curry",ie],["curryRight",oe],["flip",le],["partial",ae],["partialRight",se],["rearg",ce]],Oe="[object Arguments]",Re="[object Array]",Ae="[object AsyncFunction]",Pe="[object Boolean]",xe="[object Date]",Ce="[object DOMException]",Me="[object Error]",Le="[object Function]",ke="[object GeneratorFunction]",Ie="[object Map]",De="[object Number]",Ne="[object Null]",Fe="[object Object]",Ue="[object Proxy]",je="[object RegExp]",Be="[object Set]",Ge="[object String]",He="[object Symbol]",Ve="[object Undefined]",ze="[object WeakMap]",We="[object WeakSet]",Ye="[object ArrayBuffer]",qe="[object DataView]",Ke="[object Float32Array]",Xe="[object Float64Array]",$e="[object Int8Array]",Je="[object Int16Array]",Qe="[object Int32Array]",Ze="[object Uint8Array]",et="[object Uint8ClampedArray]",tt="[object Uint16Array]",nt="[object Uint32Array]",rt=/\b__p \+= '';/g,it=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,at=/&(?:amp|lt|gt|quot|#39);/g,st=/[&<>"']/g,ut=RegExp(at.source),ct=RegExp(st.source),lt=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,ht=/<%=([\s\S]+?)%>/g,dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,gt=RegExp(mt.source),yt=/^\s+|\s+$/g,_t=/^\s+/,bt=/\s+$/,Et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,St=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,wt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ot=/\\(\\)?/g,Rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Pt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,Ct=/^\[object .+?Constructor\]$/,Mt=/^0o[0-7]+$/i,Lt=/^(?:0|[1-9]\d*)$/,kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,It=/($^)/,Dt=/['\n\r\u2028\u2029\\]/g,Nt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ft="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ut="[\\ud800-\\udfff]",jt="["+Ft+"]",Bt="["+Nt+"]",Gt="\\d+",Ht="[\\u2700-\\u27bf]",Vt="[a-z\\xdf-\\xf6\\xf8-\\xff]",zt="[^\\ud800-\\udfff"+Ft+Gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Wt="\\ud83c[\\udffb-\\udfff]",Yt="[^\\ud800-\\udfff]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Xt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",$t="(?:"+Vt+"|"+zt+")",Jt="(?:"+Xt+"|"+zt+")",Qt="(?:"+Bt+"|"+Wt+")"+"?",Zt="[\\ufe0e\\ufe0f]?"+Qt+("(?:\\u200d(?:"+[Yt,qt,Kt].join("|")+")[\\ufe0e\\ufe0f]?"+Qt+")*"),en="(?:"+[Ht,qt,Kt].join("|")+")"+Zt,tn="(?:"+[Yt+Bt+"?",Bt,qt,Kt,Ut].join("|")+")",nn=RegExp("['窶兢","g"),rn=RegExp(Bt,"g"),on=RegExp(Wt+"(?="+Wt+")|"+tn+Zt,"g"),an=RegExp([Xt+"?"+Vt+"+(?:['窶兢(?:d|ll|m|re|s|t|ve))?(?="+[jt,Xt,"$"].join("|")+")",Jt+"+(?:['窶兢(?:D|LL|M|RE|S|T|VE))?(?="+[jt,Xt+$t,"$"].join("|")+")",Xt+"?"+$t+"+(?:['窶兢(?:d|ll|m|re|s|t|ve))?",Xt+"+(?:['窶兢(?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gt,en].join("|"),"g"),sn=RegExp("[\\u200d\\ud800-\\udfff"+Nt+"\\ufe0e\\ufe0f]"),un=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,cn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ln=-1,fn={};fn[Ke]=fn[Xe]=fn[$e]=fn[Je]=fn[Qe]=fn[Ze]=fn[et]=fn[tt]=fn[nt]=!0,fn[Oe]=fn[Re]=fn[Ye]=fn[Pe]=fn[qe]=fn[xe]=fn[Me]=fn[Le]=fn[Ie]=fn[De]=fn[Fe]=fn[je]=fn[Be]=fn[Ge]=fn[ze]=!1;var hn={};hn[Oe]=hn[Re]=hn[Ye]=hn[qe]=hn[Pe]=hn[xe]=hn[Ke]=hn[Xe]=hn[$e]=hn[Je]=hn[Qe]=hn[Ie]=hn[De]=hn[Fe]=hn[je]=hn[Be]=hn[Ge]=hn[He]=hn[Ze]=hn[et]=hn[tt]=hn[nt]=!0,hn[Me]=hn[Le]=hn[ze]=!1;var dn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pn=parseFloat,vn=parseInt,mn="object"==typeof e&&e&&e.Object===Object&&e,gn="object"==typeof self&&self&&self.Object===Object&&self,yn=mn||gn||Function("return this")(),_n=t&&!t.nodeType&&t,bn=_n&&"object"==typeof r&&r&&!r.nodeType&&r,En=bn&&bn.exports===_n,Sn=En&&mn.process,Tn=function(){try{var e=bn&&bn.require&&bn.require("util").types;return e||Sn&&Sn.binding&&Sn.binding("util")}catch(e){}}(),wn=Tn&&Tn.isArrayBuffer,On=Tn&&Tn.isDate,Rn=Tn&&Tn.isMap,An=Tn&&Tn.isRegExp,Pn=Tn&&Tn.isSet,xn=Tn&&Tn.isTypedArray,Cn=w("length"),Mn=O({"ﾃ":"A","ﾃ�":"A","ﾃ�":"A","ﾃ�":"A","ﾃ�":"A","ﾃ�":"A","ﾃ�":"a","ﾃ｡":"a","ﾃ｢":"a","ﾃ｣":"a","ﾃ､":"a","ﾃ･":"a","ﾃ�":"C","ﾃｧ":"c","ﾃ�":"D","ﾃｰ":"d","ﾃ�":"E","ﾃ�":"E","ﾃ�":"E","ﾃ�":"E","ﾃｨ":"e","ﾃｩ":"e","ﾃｪ":"e","ﾃｫ":"e","ﾃ�":"I","ﾃ�":"I","ﾃ�":"I","ﾃ�":"I","ﾃｬ":"i","ﾃｭ":"i","ﾃｮ":"i","ﾃｯ":"i","ﾃ�":"N","ﾃｱ":"n","ﾃ�":"O","ﾃ�":"O","ﾃ�":"O","ﾃ�":"O","ﾃ�":"O","ﾃ�":"O","ﾃｲ":"o","ﾃｳ":"o","ﾃｴ":"o","ﾃｵ":"o","ﾃｶ":"o","ﾃｸ":"o","ﾃ�":"U","ﾃ�":"U","ﾃ�":"U","ﾃ�":"U","ﾃｹ":"u","ﾃｺ":"u","ﾃｻ":"u","ﾃｼ":"u","ﾃ�":"Y","ﾃｽ":"y","ﾃｿ":"y","ﾃ�":"Ae","ﾃｦ":"ae","ﾃ�":"Th","ﾃｾ":"th","ﾃ�":"ss","ﾄ":"A","ﾄ�":"A","ﾄ�":"A","ﾄ�":"a","ﾄ�":"a","ﾄ�":"a","ﾄ�":"C","ﾄ�":"C","ﾄ�":"C","ﾄ�":"C","ﾄ�":"c","ﾄ�":"c","ﾄ�":"c","ﾄ�":"c","ﾄ�":"D","ﾄ�":"D","ﾄ�":"d","ﾄ�":"d","ﾄ�":"E","ﾄ�":"E","ﾄ�":"E","ﾄ�":"E","ﾄ�":"E","ﾄ�":"e","ﾄ�":"e","ﾄ�":"e","ﾄ�":"e","ﾄ�":"e","ﾄ�":"G","ﾄ�":"G","ﾄ�":"G","ﾄ｢":"G","ﾄ�":"g","ﾄ�":"g","ﾄ｡":"g","ﾄ｣":"g","ﾄ､":"H","ﾄｦ":"H","ﾄ･":"h","ﾄｧ":"h","ﾄｨ":"I","ﾄｪ":"I","ﾄｬ":"I","ﾄｮ":"I","ﾄｰ":"I","ﾄｩ":"i","ﾄｫ":"i","ﾄｭ":"i","ﾄｯ":"i","ﾄｱ":"i","ﾄｴ":"J","ﾄｵ":"j","ﾄｶ":"K","ﾄｷ":"k","ﾄｸ":"k","ﾄｹ":"L","ﾄｻ":"L","ﾄｽ":"L","ﾄｿ":"L","ﾅ�":"L","ﾄｺ":"l","ﾄｼ":"l","ﾄｾ":"l","ﾅ":"l","ﾅ�":"l","ﾅ�":"N","ﾅ�":"N","ﾅ�":"N","ﾅ�":"N","ﾅ�":"n","ﾅ�":"n","ﾅ�":"n","ﾅ�":"n","ﾅ�":"O","ﾅ�":"O","ﾅ�":"O","ﾅ�":"o","ﾅ�":"o","ﾅ�":"o","ﾅ�":"R","ﾅ�":"R","ﾅ�":"R","ﾅ�":"r","ﾅ�":"r","ﾅ�":"r","ﾅ�":"S","ﾅ�":"S","ﾅ�":"S","ﾅ�":"S","ﾅ�":"s","ﾅ�":"s","ﾅ�":"s","ﾅ｡":"s","ﾅ｢":"T","ﾅ､":"T","ﾅｦ":"T","ﾅ｣":"t","ﾅ･":"t","ﾅｧ":"t","ﾅｨ":"U","ﾅｪ":"U","ﾅｬ":"U","ﾅｮ":"U","ﾅｰ":"U","ﾅｲ":"U","ﾅｩ":"u","ﾅｫ":"u","ﾅｭ":"u","ﾅｯ":"u","ﾅｱ":"u","ﾅｳ":"u","ﾅｴ":"W","ﾅｵ":"w","ﾅｶ":"Y","ﾅｷ":"y","ﾅｸ":"Y","ﾅｹ":"Z","ﾅｻ":"Z","ﾅｽ":"Z","ﾅｺ":"z","ﾅｼ":"z","ﾅｾ":"z","ﾄｲ":"IJ","ﾄｳ":"ij","ﾅ�":"Oe","ﾅ�":"oe","ﾅ�":"'n","ﾅｿ":"s"}),Ln=O({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),kn=O({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),In=function e(t){function n(e){if(uo(e)&&!eu(e)&&!(e instanceof O)){if(e instanceof i)return e;if(Zo.call(e,"__wrapped__"))return Ii(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=V}function O(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function Nt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ft(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ut;++t<n;)this.add(e[t])}function Bt(e){var t=this.__data__=new Ft(e);this.size=t.size}function Gt(e,t){var n=eu(e),r=!n&&Zs(e),i=!n&&!r&&nu(e),o=!n&&!r&&!i&&su(e),a=n||r||i||o,s=a?P(e.length,Yo):[],u=s.length;for(var c in e)!t&&!Zo.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_i(c,u))||s.push(c);return s}function Ht(e){var t=e.length;return t?e[ir(0,t-1)]:V}function Vt(e,t){return Mi(Dr(e),Qt(t,0,e.length))}function zt(e){return Mi(Dr(e))}function Wt(e,t,n){(n===V||eo(e[t],n))&&(n!==V||t in e)||$t(e,t,n)}function Yt(e,t,n){var r=e[t];Zo.call(e,t)&&eo(r,n)&&(n!==V||t in e)||$t(e,t,n)}function qt(e,t){for(var n=e.length;n--;)if(eo(e[n][0],t))return n;return-1}function Kt(e,t,n,r){return Ja(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Xt(e,t){return e&&Nr(t,To(t),e)}function $t(e,t,n){"__proto__"==t&&ga?ga(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jt(e,t){for(var n=-1,r=t.length,i=jo(r),o=null==e;++n<r;)i[n]=o?V:Eo(e,t[n]);return i}function Qt(e,t,n){return e==e&&(n!==V&&(e=e<=n?e:n),t!==V&&(e=e>=t?e:t)),e}function Zt(e,t,n,r,i,o){var a,u=t&$,c=t&J,l=t&Q;if(n&&(a=i?n(e,r,i,o):n(e)),a!==V)return a;if(!so(e))return e;var f=eu(e);if(f){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Zo.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Dr(e,a)}else{var h=cs(e),d=h==Le||h==ke;if(nu(e))return xr(e,u);if(h==Fe||h==Oe||d&&!i){if(a=c||d?{}:gi(e),!u)return c?function(e,t){return Nr(e,us(e),t)}(e,function(e,t){return e&&Nr(t,wo(t),e)}(a,e)):function(e,t){return Nr(e,ss(e),t)}(e,Xt(a,e))}else{if(!hn[h])return i?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case Ye:return Cr(e);case Pe:case xe:return new r(+e);case qe:return function(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Ke:case Xe:case $e:case Je:case Qe:case Ze:case et:case tt:case nt:return Mr(e,n);case Ie:return new r;case De:case Ge:return new r(e);case je:return function(e){var t=new e.constructor(e.source,At.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Be:return new r;case He:return i=e,Ka?zo(Ka.call(i)):{}}var i}(e,h,u)}}o||(o=new Bt);var p=o.get(e);if(p)return p;o.set(e,a),au(e)?e.forEach((function(r){a.add(Zt(r,t,n,r,e,o))})):iu(e)&&e.forEach((function(r,i){a.set(i,Zt(r,t,n,i,e,o))}));var v=f?V:(l?c?ci:ui:c?wo:To)(e);return s(v||e,(function(r,i){v&&(r=e[i=r]),Yt(a,i,Zt(r,t,n,i,e,o))})),a}function en(e,t,n){var r=n.length;if(null==e)return!r;for(e=zo(e);r--;){var i=n[r],o=t[i],a=e[i];if(a===V&&!(i in e)||!o(a))return!1}return!0}function tn(e,t,n){if("function"!=typeof e)throw new qo(Y);return hs((function(){e.apply(V,n)}),t)}function on(e,t,n,r){var i=-1,o=f,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=d(t,x(n))),r?(o=h,a=!1):t.length>=z&&(o=M,a=!1,t=new jt(t));e:for(;++i<s;){var l=e[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,a&&p==p){for(var v=c;v--;)if(t[v]===p)continue e;u.push(l)}else o(t,p,r)||u.push(l)}return u}function sn(e,t){var n=!0;return Ja(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function dn(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===V?a==a&&!ho(a):n(a,s)))var s=a,u=o}return u}function mn(e,t){var n=[];return Ja(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gn(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yi),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?gn(s,t-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function _n(e,t){return e&&Za(e,t,To)}function bn(e,t){return e&&es(e,t,To)}function Sn(e,t){return l(t,(function(t){return io(e[t])}))}function Tn(e,t){for(var n=0,r=(t=Ar(t,e)).length;null!=e&&n<r;)e=e[Li(t[n++])];return n&&n==r?e:V}function Cn(e,t,n){var r=t(e);return eu(e)?r:p(r,n(e))}function Dn(e){return null==e?e===V?Ve:Ne:ma&&ma in zo(e)?function(e){var t=Zo.call(e,ma),n=e[ma];try{e[ma]=V;var r=!0}catch(e){}var i=na.call(e);r&&(t?e[ma]=n:delete e[ma]);return i}(e):function(e){return na.call(e)}(e)}function Nn(e,t){return e>t}function Fn(e,t){return null!=e&&Zo.call(e,t)}function Un(e,t){return null!=e&&t in zo(e)}function jn(e,t,n){for(var r=n?h:f,i=e[0].length,o=e.length,a=o,s=jo(o),u=1/0,c=[];a--;){var l=e[a];a&&t&&(l=d(l,x(t))),u=xa(l.length,u),s[a]=!n&&(t||i>=120&&l.length>=120)?new jt(a&&l):V}l=e[0];var p=-1,v=s[0];e:for(;++p<i&&c.length<u;){var m=l[p],g=t?t(m):m;if(m=n||0!==m?m:0,!(v?M(v,g):r(c,g,n))){for(a=o;--a;){var y=s[a];if(!(y?M(y,g):r(e[a],g,n)))continue e}v&&v.push(g),c.push(m)}}return c}function Bn(e,t,n){var r=null==(e=Ai(e,t=Ar(t,e)))?e:e[Li(ji(t))];return null==r?V:o(r,e,n)}function Gn(e){return uo(e)&&Dn(e)==Oe}function Hn(e,t,n,r,i){return e===t||(null==e||null==t||!uo(e)&&!uo(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=eu(e),s=eu(t),u=a?Re:cs(e),c=s?Re:cs(t),l=(u=u==Oe?Fe:u)==Fe,f=(c=c==Oe?Fe:c)==Fe,h=u==c;if(h&&nu(e)){if(!nu(t))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new Bt),a||su(e)?ai(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case qe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ye:return!(e.byteLength!=t.byteLength||!o(new ua(e),new ua(t)));case Pe:case xe:case De:return eo(+e,+t);case Me:return e.name==t.name&&e.message==t.message;case je:case Ge:return e==t+"";case Ie:var s=N;case Be:var u=r&Z;if(s||(s=j),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=ee,a.set(e,t);var l=ai(s(e),s(t),r,i,o,a);return a.delete(e),l;case He:if(Ka)return Ka.call(e)==Ka.call(t)}return!1}(e,t,u,n,r,i,o);if(!(n&Z)){var d=l&&Zo.call(e,"__wrapped__"),p=f&&Zo.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return o||(o=new Bt),i(v,m,n,r,o)}}if(!h)return!1;return o||(o=new Bt),function(e,t,n,r,i,o){var a=n&Z,s=ui(e),u=s.length,c=ui(t).length;if(u!=c&&!a)return!1;var l=u;for(;l--;){var f=s[l];if(!(a?f in t:Zo.call(t,f)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var d=!0;o.set(e,t),o.set(t,e);var p=a;for(;++l<u;){f=s[l];var v=e[f],m=t[f];if(r)var g=a?r(m,v,f,t,e,o):r(v,m,f,e,t,o);if(!(g===V?v===m||i(v,m,n,r,o):g)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var y=e.constructor,_=t.constructor;y!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,o)}(e,t,n,r,Hn,i))}function Vn(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=zo(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(c===V&&!(u in e))return!1}else{var f=new Bt;if(r)var h=r(c,l,u,e,t,f);if(!(h===V?Hn(l,c,Z|ee,r,f):h))return!1}}return!0}function zn(e){return!(!so(e)||(t=e,ta&&ta in t))&&(io(e)?oa:Ct).test(ki(e));var t}function Wn(e){return"function"==typeof e?e:null==e?Mo:"object"==typeof e?eu(e)?Jn(e[0],e[1]):$n(e):Do(e)}function Yn(e){if(!Ti(e))return Aa(e);var t=[];for(var n in zo(e))Zo.call(e,n)&&"constructor"!=n&&t.push(n);return t}function qn(e){if(!so(e))return function(e){var t=[];if(null!=e)for(var n in zo(e))t.push(n);return t}(e);var t=Ti(e),n=[];for(var r in e)("constructor"!=r||!t&&Zo.call(e,r))&&n.push(r);return n}function Kn(e,t){return e<t}function Xn(e,t){var n=-1,r=to(e)?jo(e.length):[];return Ja(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function $n(e){var t=pi(e);return 1==t.length&&t[0][2]?Oi(t[0][0],t[0][1]):function(n){return n===e||Vn(n,e,t)}}function Jn(e,t){return Ei(e)&&wi(t)?Oi(Li(e),t):function(n){var r=Eo(n,e);return r===V&&r===t?So(n,e):Hn(t,r,Z|ee)}}function Qn(e,t,n,r,i){e!==t&&Za(t,(function(o,a){if(i||(i=new Bt),so(o))!function(e,t,n,r,i,o,a){var s=Pi(e,n),u=Pi(t,n),c=a.get(u);if(c)return void Wt(e,n,c);var l=o?o(s,u,n+"",e,t,a):V,f=l===V;if(f){var h=eu(u),d=!h&&nu(u),p=!h&&!d&&su(u);l=u,h||d||p?eu(s)?l=s:no(s)?l=Dr(s):d?(f=!1,l=xr(u,!0)):p?(f=!1,l=Mr(u,!0)):l=[]:lo(u)||Zs(u)?(l=s,Zs(s)?l=_o(s):so(s)&&!io(s)||(l=gi(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));Wt(e,n,l)}(e,t,a,n,Qn,r,i);else{var s=r?r(Pi(e,a),o,a+"",e,t,i):V;s===V&&(s=o),Wt(e,a,s)}}),wo)}function Zn(e,t){var n=e.length;if(n)return _i(t+=t<0?n:0,n)?e[t]:V}function er(e,t,n){var r=-1;return t=d(t.length?t:[Mo],x(hi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Xn(e,(function(e,n,i){return{criteria:d(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Lr(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function tr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Tn(e,a);n(s,a)&&cr(o,Ar(a,e),s)}return o}function nr(e,t,n,r){var i=r?E:b,o=-1,a=t.length,s=e;for(e===t&&(t=Dr(t)),n&&(s=d(e,x(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&da.call(s,u,1),da.call(e,u,1);return e}function rr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;_i(i)?da.call(e,i,1):_r(e,i)}}return e}function ir(e,t){return e+Sa(La()*(t-e+1))}function or(e,t){var n="";if(!e||t<1||t>ye)return n;do{t%2&&(n+=e),(t=Sa(t/2))&&(e+=e)}while(t);return n}function ar(e,t){return ds(Ri(e,t,Mo),e+"")}function sr(e){return Ht(Ro(e))}function ur(e,t){var n=Ro(e);return Mi(n,Qt(t,0,n.length))}function cr(e,t,n,r){if(!so(e))return e;for(var i=-1,o=(t=Ar(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=Li(t[i]),c=n;if(i!=a){var l=s[u];(c=r?r(l,u,s):V)===V&&(c=so(l)?l:_i(t[i+1])?[]:{})}Yt(s,u,c),s=s[u]}return e}function lr(e){return Mi(Ro(e))}function fr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=jo(i);++r<i;)o[r]=e[r+t];return o}function hr(e,t){var n;return Ja(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function dr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=Te){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ho(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return pr(e,t,Mo,n)}function pr(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!=t,s=null===t,u=ho(t),c=t===V;i<o;){var l=Sa((i+o)/2),f=n(e[l]),h=f!==V,d=null===f,p=f==f,v=ho(f);if(a)var m=r||p;else m=c?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!v):!d&&!v&&(r?f<=t:f<t);m?i=l+1:o=l}return xa(o,Se)}function vr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!eo(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function mr(e){return"number"==typeof e?e:ho(e)?be:+e}function gr(e){if("string"==typeof e)return e;if(eu(e))return d(e,gr)+"";if(ho(e))return Xa?Xa.call(e):"";var t=e+"";return"0"==t&&1/e==-ge?"-0":t}function yr(e,t,n){var r=-1,i=f,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=h;else if(o>=z){var c=t?null:os(e);if(c)return j(c);a=!1,i=M,u=new jt}else u=t?[]:s;e:for(;++r<o;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,a&&d==d){for(var p=u.length;p--;)if(u[p]===d)continue e;t&&u.push(d),s.push(l)}else i(u,d,n)||(u!==s&&u.push(d),s.push(l))}return s}function _r(e,t){return null==(e=Ai(e,t=Ar(t,e)))||delete e[Li(ji(t))]}function br(e,t,n,r){return cr(e,t,n(Tn(e,t)),r)}function Er(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?fr(e,r?0:o,r?o+1:i):fr(e,r?o+1:0,r?i:o)}function Sr(e,t){var n=e;return n instanceof O&&(n=n.value()),v(t,(function(e,t){return t.func.apply(t.thisArg,p([e],t.args))}),n)}function Tr(e,t,n){var r=e.length;if(r<2)return r?yr(e[0]):[];for(var i=-1,o=jo(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=on(o[i]||a,e[s],t,n));return yr(gn(o,1),t,n)}function wr(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:V;n(a,e[r],s)}return a}function Or(e){return no(e)?e:[]}function Rr(e){return"function"==typeof e?e:Mo}function Ar(e,t){return eu(e)?e:Ei(e,t)?[e]:ps(bo(e))}function Pr(e,t,n){var r=e.length;return n=n===V?r:n,!t&&n>=r?e:fr(e,t,n)}function xr(e,t){if(t)return e.slice();var n=e.length,r=ca?ca(n):new e.constructor(n);return e.copy(r),r}function Cr(e){var t=new e.constructor(e.byteLength);return new ua(t).set(new ua(e)),t}function Mr(e,t){var n=t?Cr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Lr(e,t){if(e!==t){var n=e!==V,r=null===e,i=e==e,o=ho(e),a=t!==V,s=null===t,u=t==t,c=ho(t);if(!s&&!c&&!o&&e>t||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function kr(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=Pa(o-a,0),l=jo(u+c),f=!r;++s<u;)l[s]=t[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function Ir(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=Pa(o-s,0),f=jo(l+c),h=!r;++i<l;)f[i]=e[i];for(var d=i;++u<c;)f[d+u]=t[u];for(;++a<s;)(h||i<o)&&(f[d+n[a]]=e[i++]);return f}function Dr(e,t){var n=-1,r=e.length;for(t||(t=jo(r));++n<r;)t[n]=e[n];return t}function Nr(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):V;u===V&&(u=e[s]),i?$t(n,s,u):Yt(n,s,u)}return n}function Fr(e,t){return function(n,r){var i=eu(n)?a:Kt,o=t?t():{};return i(n,e,hi(r,2),o)}}function Ur(e){return ar((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:V,a=i>2?n[2]:V;for(o=e.length>3&&"function"==typeof o?(i--,o):V,a&&bi(n[0],n[1],a)&&(o=i<3?V:o,i=1),t=zo(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}function jr(e,t){return function(n,r){if(null==n)return n;if(!to(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=zo(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Br(e){return function(t,n,r){for(var i=-1,o=zo(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Gr(e){return function(t){var n=D(t=bo(t))?H(t):V,r=n?n[0]:t.charAt(0),i=n?Pr(n,1).join(""):t.slice(1);return r[e]()+i}}function Hr(e){return function(t){return v(xo(Po(t).replace(nn,"")),e,"")}}function Vr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$a(e.prototype),r=e.apply(n,t);return so(r)?r:n}}function zr(e){return function(t,n,r){var i=zo(t);if(!to(t)){var o=hi(n,3);t=To(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:V}}function Wr(e){return si((function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new qo(Y);if(o&&!s&&"wrapper"==li(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){var u=li(a=t[r]),c="wrapper"==u?as(a):V;s=c&&Si(c[0])&&c[1]==(ue|ie|ae|ce)&&!c[4].length&&1==c[9]?s[li(c[0])].apply(s,c[3]):1==a.length&&Si(a)?s[u]():s.thru(a)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&eu(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Yr(e,t,n,r,i,o,a,s,u,c){var l=t&ue,f=t&te,h=t&ne,d=t&(ie|oe),p=t&le,v=h?V:Vr(e);return function m(){for(var g=arguments.length,y=jo(g),_=g;_--;)y[_]=arguments[_];if(d)var b=fi(m),E=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,b);if(r&&(y=kr(y,r,i,d)),o&&(y=Ir(y,o,a,d)),g-=E,d&&g<c){var S=U(y,b);return Zr(e,t,Yr,m.placeholder,n,y,S,s,u,c-g)}var T=f?n:this,w=h?T[e]:e;return g=y.length,s?y=function(e,t){var n=e.length,r=xa(t.length,n),i=Dr(e);for(;r--;){var o=t[r];e[r]=_i(o,n)?i[o]:V}return e}(y,s):p&&g>1&&y.reverse(),l&&u<g&&(y.length=u),this&&this!==yn&&this instanceof m&&(w=v||Vr(w)),w.apply(T,y)}}function qr(e,t){return function(n,r){return function(e,t,n,r){return _n(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Kr(e,t){return function(n,r){var i;if(n===V&&r===V)return t;if(n!==V&&(i=n),r!==V){if(i===V)return r;"string"==typeof n||"string"==typeof r?(n=gr(n),r=gr(r)):(n=mr(n),r=mr(r)),i=e(n,r)}return i}}function Xr(e){return si((function(t){return t=d(t,x(hi())),ar((function(n){var r=this;return e(t,(function(e){return o(e,r,n)}))}))}))}function $r(e,t){var n=(t=t===V?" ":gr(t)).length;if(n<2)return n?or(t,e):t;var r=or(t,Ea(e/G(t)));return D(t)?Pr(H(r),0,e).join(""):r.slice(0,e)}function Jr(e){return function(t,n,r){return r&&"number"!=typeof r&&bi(t,n,r)&&(n=r=V),t=vo(t),n===V?(n=t,t=0):n=vo(n),function(e,t,n,r){for(var i=-1,o=Pa(Ea((t-e)/(n||1)),0),a=jo(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=r===V?t<n?1:-1:vo(r),e)}}function Qr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=yo(t),n=yo(n)),e(t,n)}}function Zr(e,t,n,r,i,o,a,s,u,c){var l=t&ie;t|=l?ae:se,(t&=~(l?se:ae))&re||(t&=~(te|ne));var f=[e,t,i,l?o:V,l?a:V,l?V:o,l?V:a,s,u,c],h=n.apply(V,f);return Si(e)&&fs(h,f),h.placeholder=r,xi(h,e,t)}function ei(e){var t=Vo[e];return function(e,n){if(e=yo(e),(n=null==n?0:xa(mo(n),292))&&Oa(e)){var r=(bo(e)+"e").split("e");return+((r=(bo(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function ti(e){return function(t){var n=cs(t);return n==Ie?N(t):n==Be?B(t):function(e,t){return d(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function ni(e,t,n,r,i,a,s,u){var c=t&ne;if(!c&&"function"!=typeof e)throw new qo(Y);var l=r?r.length:0;if(l||(t&=~(ae|se),r=i=V),s=s===V?s:Pa(mo(s),0),u=u===V?u:mo(u),l-=i?i.length:0,t&se){var f=r,h=i;r=i=V}var d=c?V:as(e),p=[e,t,n,r,i,f,h,a,s,u];if(d&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<(te|ne|ue),a=r==ue&&n==ie||r==ue&&n==ce&&e[7].length<=t[8]||r==(ue|ce)&&t[7].length<=t[8]&&n==ie;if(!o&&!a)return e;r&te&&(e[2]=t[2],i|=n&te?0:re);var s=t[3];if(s){var u=e[3];e[3]=u?kr(u,s,t[4]):s,e[4]=u?U(e[3],X):t[4]}(s=t[5])&&(u=e[5],e[5]=u?Ir(u,s,t[6]):s,e[6]=u?U(e[5],X):t[6]);(s=t[7])&&(e[7]=s);r&ue&&(e[8]=null==e[8]?t[8]:xa(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(p,d),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(u=p[9]=p[9]===V?c?0:e.length:Pa(p[9]-l,0))&&t&(ie|oe)&&(t&=~(ie|oe)),t&&t!=te)v=t==ie||t==oe?function(e,t,n){var r=Vr(e);return function i(){for(var a=arguments.length,s=jo(a),u=a,c=fi(i);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:U(s,c);return(a-=l.length)<n?Zr(e,t,Yr,i.placeholder,V,s,l,V,V,n-a):o(this&&this!==yn&&this instanceof i?r:e,this,s)}}(e,t,u):t!=ae&&t!=(te|ae)||i.length?Yr.apply(V,p):function(e,t,n,r){var i=t&te,a=Vr(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=r.length,f=jo(l+u),h=this&&this!==yn&&this instanceof t?a:e;++c<l;)f[c]=r[c];for(;u--;)f[c++]=arguments[++s];return o(h,i?n:this,f)}}(e,t,n,r);else var v=function(e,t,n){var r=t&te,i=Vr(e);return function t(){return(this&&this!==yn&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return xi((d?ts:fs)(v,p),e,t)}function ri(e,t,n,r){return e===V||eo(e,$o[n])&&!Zo.call(r,n)?t:e}function ii(e,t,n,r,i,o){return so(e)&&so(t)&&(o.set(t,e),Qn(e,t,V,ii,o),o.delete(t)),e}function oi(e){return lo(e)?V:e}function ai(e,t,n,r,i,o){var a=n&Z,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,h=n&ee?new jt:V;for(o.set(e,t),o.set(t,e);++l<s;){var d=e[l],p=t[l];if(r)var v=a?r(p,d,l,t,e,o):r(d,p,l,e,t,o);if(v!==V){if(v)continue;f=!1;break}if(h){if(!g(t,(function(e,t){if(!M(h,t)&&(d===e||i(d,e,n,r,o)))return h.push(t)}))){f=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function si(e){return ds(Ri(e,V,Fi),e+"")}function ui(e){return Cn(e,To,ss)}function ci(e){return Cn(e,wo,us)}function li(e){for(var t=e.name+"",n=Ga[t],r=Zo.call(Ga,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function fi(e){return(Zo.call(n,"placeholder")?n:e).placeholder}function hi(){var e=n.iteratee||Lo;return e=e===Lo?Wn:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function pi(e){for(var t=To(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,wi(i)]}return t}function vi(e,t){var n=function(e,t){return null==e?V:e[t]}(e,t);return zn(n)?n:V}function mi(e,t,n){for(var r=-1,i=(t=Ar(t,e)).length,o=!1;++r<i;){var a=Li(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ao(i)&&_i(a,i)&&(eu(e)||Zs(e))}function gi(e){return"function"!=typeof e.constructor||Ti(e)?{}:$a(la(e))}function yi(e){return eu(e)||Zs(e)||!!(pa&&e&&e[pa])}function _i(e,t){var n=typeof e;return!!(t=null==t?ye:t)&&("number"==n||"symbol"!=n&&Lt.test(e))&&e>-1&&e%1==0&&e<t}function bi(e,t,n){if(!so(n))return!1;var r=typeof t;return!!("number"==r?to(n)&&_i(t,n.length):"string"==r&&t in n)&&eo(n[t],e)}function Ei(e,t){if(eu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ho(e))||(pt.test(e)||!dt.test(e)||null!=t&&e in zo(t))}function Si(e){var t=li(e),r=n[t];if("function"!=typeof r||!(t in O.prototype))return!1;if(e===r)return!0;var i=as(r);return!!i&&e===i[0]}function Ti(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$o)}function wi(e){return e==e&&!so(e)}function Oi(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==V||e in zo(n)))}}function Ri(e,t,n){return t=Pa(t===V?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Pa(r.length-t,0),s=jo(a);++i<a;)s[i]=r[t+i];i=-1;for(var u=jo(t+1);++i<t;)u[i]=r[i];return u[t]=n(s),o(e,this,u)}}function Ai(e,t){return t.length<2?e:Tn(e,fr(t,0,-1))}function Pi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function xi(e,t,n){var r=t+"";return ds(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Et,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return s(we,(function(n){var r="_."+n[0];t&n[1]&&!f(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(St);return t?t[1].split(Tt):[]}(r),n)))}function Ci(e){var t=0,n=0;return function(){var r=Ca(),i=pe-(r-n);if(n=r,i>0){if(++t>=de)return arguments[0]}else t=0;return e.apply(V,arguments)}}function Mi(e,t){var n=-1,r=e.length,i=r-1;for(t=t===V?r:t;++n<t;){var o=ir(n,i),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}function Li(e){if("string"==typeof e||ho(e))return e;var t=e+"";return"0"==t&&1/e==-ge?"-0":t}function ki(e){if(null!=e){try{return Qo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ii(e){if(e instanceof O)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=Dr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Di(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:mo(n);return i<0&&(i=Pa(r+i,0)),_(e,hi(t,3),i)}function Ni(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==V&&(i=mo(n),i=n<0?Pa(r+i,0):xa(i,r-1)),_(e,hi(t,3),i,!0)}function Fi(e){return(null==e?0:e.length)?gn(e,1):[]}function Ui(e){return e&&e.length?e[0]:V}function ji(e){var t=null==e?0:e.length;return t?e[t-1]:V}function Bi(e,t){return e&&e.length&&t&&t.length?nr(e,t):e}function Gi(e){return null==e?e:ka.call(e)}function Hi(e){if(!e||!e.length)return[];var t=0;return e=l(e,(function(e){if(no(e))return t=Pa(e.length,t),!0})),P(t,(function(t){return d(e,w(t))}))}function Vi(e,t){if(!e||!e.length)return[];var n=Hi(e);return null==t?n:d(n,(function(e){return o(t,V,e)}))}function zi(e){var t=n(e);return t.__chain__=!0,t}function Wi(e,t){return t(e)}function Yi(e,t){return(eu(e)?s:Ja)(e,hi(t,3))}function qi(e,t){return(eu(e)?u:Qa)(e,hi(t,3))}function Ki(e,t){return(eu(e)?d:Xn)(e,hi(t,3))}function Xi(e,t,n){return t=n?V:t,t=e&&null==t?e.length:t,ni(e,ue,V,V,V,V,t)}function $i(e,t){var n;if("function"!=typeof t)throw new qo(Y);return e=mo(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=V),n}}function Ji(e,t,n){function r(t){var n=u,r=c;return u=c=V,p=t,f=e.apply(r,n)}function i(e){var n=e-d;return d===V||n>=t||n<0||m&&e-p>=l}function o(){var e=Gs();if(i(e))return a(e);h=hs(o,function(e){var n=t-(e-d);return m?xa(n,l-(e-p)):n}(e))}function a(e){return h=V,g&&u?r(e):(u=c=V,f)}function s(){var e=Gs(),n=i(e);if(u=arguments,c=this,d=e,n){if(h===V)return function(e){return p=e,h=hs(o,t),v?r(e):f}(d);if(m)return is(h),h=hs(o,t),r(d)}return h===V&&(h=hs(o,t)),f}var u,c,l,f,h,d,p=0,v=!1,m=!1,g=!0;if("function"!=typeof e)throw new qo(Y);return t=yo(t)||0,so(n)&&(v=!!n.leading,l=(m="maxWait"in n)?Pa(yo(n.maxWait)||0,t):l,g="trailing"in n?!!n.trailing:g),s.cancel=function(){h!==V&&is(h),p=0,u=d=c=h=V},s.flush=function(){return h===V?f:a(Gs())},s}function Qi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new qo(Y);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Qi.Cache||Ut),n}function Zi(e){if("function"!=typeof e)throw new qo(Y);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function eo(e,t){return e===t||e!=e&&t!=t}function to(e){return null!=e&&ao(e.length)&&!io(e)}function no(e){return uo(e)&&to(e)}function ro(e){if(!uo(e))return!1;var t=Dn(e);return t==Me||t==Ce||"string"==typeof e.message&&"string"==typeof e.name&&!lo(e)}function io(e){if(!so(e))return!1;var t=Dn(e);return t==Le||t==ke||t==Ae||t==Ue}function oo(e){return"number"==typeof e&&e==mo(e)}function ao(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ye}function so(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function uo(e){return null!=e&&"object"==typeof e}function co(e){return"number"==typeof e||uo(e)&&Dn(e)==De}function lo(e){if(!uo(e)||Dn(e)!=Fe)return!1;var t=la(e);if(null===t)return!0;var n=Zo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Qo.call(n)==ra}function fo(e){return"string"==typeof e||!eu(e)&&uo(e)&&Dn(e)==Ge}function ho(e){return"symbol"==typeof e||uo(e)&&Dn(e)==He}function po(e){if(!e)return[];if(to(e))return fo(e)?H(e):Dr(e);if(va&&e[va])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[va]());var t=cs(e);return(t==Ie?N:t==Be?j:Ro)(e)}function vo(e){return e?(e=yo(e))===ge||e===-ge?(e<0?-1:1)*_e:e==e?e:0:0===e?e:0}function mo(e){var t=vo(e),n=t%1;return t==t?n?t-n:t:0}function go(e){return e?Qt(mo(e),0,Ee):0}function yo(e){if("number"==typeof e)return e;if(ho(e))return be;if(so(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=so(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(yt,"");var n=xt.test(e);return n||Mt.test(e)?vn(e.slice(2),n?2:8):Pt.test(e)?be:+e}function _o(e){return Nr(e,wo(e))}function bo(e){return null==e?"":gr(e)}function Eo(e,t,n){var r=null==e?V:Tn(e,t);return r===V?n:r}function So(e,t){return null!=e&&mi(e,t,Un)}function To(e){return to(e)?Gt(e):Yn(e)}function wo(e){return to(e)?Gt(e,!0):qn(e)}function Oo(e,t){if(null==e)return{};var n=d(ci(e),(function(e){return[e]}));return t=hi(t),tr(e,n,(function(e,n){return t(e,n[0])}))}function Ro(e){return null==e?[]:C(e,To(e))}function Ao(e){return ku(bo(e).toLowerCase())}function Po(e){return(e=bo(e))&&e.replace(kt,Mn).replace(rn,"")}function xo(e,t,n){return e=bo(e),(t=n?V:t)===V?function(e){return un.test(e)}(e)?function(e){return e.match(an)||[]}(e):function(e){return e.match(wt)||[]}(e):e.match(t)||[]}function Co(e){return function(){return e}}function Mo(e){return e}function Lo(e){return Wn("function"==typeof e?e:Zt(e,$))}function ko(e,t,n){var r=To(t),i=Sn(t,r);null!=n||so(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sn(t,To(t)));var o=!(so(n)&&"chain"in n&&!n.chain),a=io(e);return s(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Dr(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,p([this.value()],arguments))})})),e}function Io(){}function Do(e){return Ei(e)?w(Li(e)):function(e){return function(t){return Tn(t,e)}}(e)}function No(){return[]}function Fo(){return!1}var Uo,jo=(t=null==t?yn:In.defaults(yn.Object(),t,In.pick(yn,cn))).Array,Bo=t.Date,Go=t.Error,Ho=t.Function,Vo=t.Math,zo=t.Object,Wo=t.RegExp,Yo=t.String,qo=t.TypeError,Ko=jo.prototype,Xo=Ho.prototype,$o=zo.prototype,Jo=t["__core-js_shared__"],Qo=Xo.toString,Zo=$o.hasOwnProperty,ea=0,ta=(Uo=/[^.]+$/.exec(Jo&&Jo.keys&&Jo.keys.IE_PROTO||""))?"Symbol(src)_1."+Uo:"",na=$o.toString,ra=Qo.call(zo),ia=yn._,oa=Wo("^"+Qo.call(Zo).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=En?t.Buffer:V,sa=t.Symbol,ua=t.Uint8Array,ca=aa?aa.allocUnsafe:V,la=F(zo.getPrototypeOf,zo),fa=zo.create,ha=$o.propertyIsEnumerable,da=Ko.splice,pa=sa?sa.isConcatSpreadable:V,va=sa?sa.iterator:V,ma=sa?sa.toStringTag:V,ga=function(){try{var e=vi(zo,"defineProperty");return e({},"",{}),e}catch(e){}}(),ya=t.clearTimeout!==yn.clearTimeout&&t.clearTimeout,_a=Bo&&Bo.now!==yn.Date.now&&Bo.now,ba=t.setTimeout!==yn.setTimeout&&t.setTimeout,Ea=Vo.ceil,Sa=Vo.floor,Ta=zo.getOwnPropertySymbols,wa=aa?aa.isBuffer:V,Oa=t.isFinite,Ra=Ko.join,Aa=F(zo.keys,zo),Pa=Vo.max,xa=Vo.min,Ca=Bo.now,Ma=t.parseInt,La=Vo.random,ka=Ko.reverse,Ia=vi(t,"DataView"),Da=vi(t,"Map"),Na=vi(t,"Promise"),Fa=vi(t,"Set"),Ua=vi(t,"WeakMap"),ja=vi(zo,"create"),Ba=Ua&&new Ua,Ga={},Ha=ki(Ia),Va=ki(Da),za=ki(Na),Wa=ki(Fa),Ya=ki(Ua),qa=sa?sa.prototype:V,Ka=qa?qa.valueOf:V,Xa=qa?qa.toString:V,$a=function(){function e(){}return function(t){if(!so(t))return{};if(fa)return fa(t);e.prototype=t;var n=new e;return e.prototype=V,n}}();n.templateSettings={escape:lt,evaluate:ft,interpolate:ht,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=$a(r.prototype),i.prototype.constructor=i,O.prototype=$a(r.prototype),O.prototype.constructor=O,Nt.prototype.clear=function(){this.__data__=ja?ja(null):{},this.size=0},Nt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nt.prototype.get=function(e){var t=this.__data__;if(ja){var n=t[e];return n===q?V:n}return Zo.call(t,e)?t[e]:V},Nt.prototype.has=function(e){var t=this.__data__;return ja?t[e]!==V:Zo.call(t,e)},Nt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ja&&t===V?q:t,this},Ft.prototype.clear=function(){this.__data__=[],this.size=0},Ft.prototype.delete=function(e){var t=this.__data__,n=qt(t,e);return!(n<0)&&(n==t.length-1?t.pop():da.call(t,n,1),--this.size,!0)},Ft.prototype.get=function(e){var t=this.__data__,n=qt(t,e);return n<0?V:t[n][1]},Ft.prototype.has=function(e){return qt(this.__data__,e)>-1},Ft.prototype.set=function(e,t){var n=this.__data__,r=qt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Ut.prototype.clear=function(){this.size=0,this.__data__={hash:new Nt,map:new(Da||Ft),string:new Nt}},Ut.prototype.delete=function(e){var t=di(this,e).delete(e);return this.size-=t?1:0,t},Ut.prototype.get=function(e){return di(this,e).get(e)},Ut.prototype.has=function(e){return di(this,e).has(e)},Ut.prototype.set=function(e,t){var n=di(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},jt.prototype.add=jt.prototype.push=function(e){return this.__data__.set(e,q),this},jt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.clear=function(){this.__data__=new Ft,this.size=0},Bt.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Bt.prototype.get=function(e){return this.__data__.get(e)},Bt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ft){var r=n.__data__;if(!Da||r.length<z-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ut(r)}return n.set(e,t),this.size=n.size,this};var Ja=jr(_n),Qa=jr(bn,!0),Za=Br(),es=Br(!0),ts=Ba?function(e,t){return Ba.set(e,t),e}:Mo,ns=ga?function(e,t){return ga(e,"toString",{configurable:!0,enumerable:!1,value:Co(t),writable:!0})}:Mo,rs=ar,is=ya||function(e){return yn.clearTimeout(e)},os=Fa&&1/j(new Fa([,-0]))[1]==ge?function(e){return new Fa(e)}:Io,as=Ba?function(e){return Ba.get(e)}:Io,ss=Ta?function(e){return null==e?[]:(e=zo(e),l(Ta(e),(function(t){return ha.call(e,t)})))}:No,us=Ta?function(e){for(var t=[];e;)p(t,ss(e)),e=la(e);return t}:No,cs=Dn;(Ia&&cs(new Ia(new ArrayBuffer(1)))!=qe||Da&&cs(new Da)!=Ie||Na&&"[object Promise]"!=cs(Na.resolve())||Fa&&cs(new Fa)!=Be||Ua&&cs(new Ua)!=ze)&&(cs=function(e){var t=Dn(e),n=t==Fe?e.constructor:V,r=n?ki(n):"";if(r)switch(r){case Ha:return qe;case Va:return Ie;case za:return"[object Promise]";case Wa:return Be;case Ya:return ze}return t});var ls=Jo?io:Fo,fs=Ci(ts),hs=ba||function(e,t){return yn.setTimeout(e,t)},ds=Ci(ns),ps=function(e){var t=Qi(e,(function(e){return n.size===K&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(vt,(function(e,n,r,i){t.push(r?i.replace(Ot,"$1"):n||e)})),t})),vs=ar((function(e,t){return no(e)?on(e,gn(t,1,no,!0)):[]})),ms=ar((function(e,t){var n=ji(t);return no(n)&&(n=V),no(e)?on(e,gn(t,1,no,!0),hi(n,2)):[]})),gs=ar((function(e,t){var n=ji(t);return no(n)&&(n=V),no(e)?on(e,gn(t,1,no,!0),V,n):[]})),ys=ar((function(e){var t=d(e,Or);return t.length&&t[0]===e[0]?jn(t):[]})),_s=ar((function(e){var t=ji(e),n=d(e,Or);return t===ji(n)?t=V:n.pop(),n.length&&n[0]===e[0]?jn(n,hi(t,2)):[]})),bs=ar((function(e){var t=ji(e),n=d(e,Or);return(t="function"==typeof t?t:V)&&n.pop(),n.length&&n[0]===e[0]?jn(n,V,t):[]})),Es=ar(Bi),Ss=si((function(e,t){var n=null==e?0:e.length,r=Jt(e,t);return rr(e,d(t,(function(e){return _i(e,n)?+e:e})).sort(Lr)),r})),Ts=ar((function(e){return yr(gn(e,1,no,!0))})),ws=ar((function(e){var t=ji(e);return no(t)&&(t=V),yr(gn(e,1,no,!0),hi(t,2))})),Os=ar((function(e){var t=ji(e);return t="function"==typeof t?t:V,yr(gn(e,1,no,!0),V,t)})),Rs=ar((function(e,t){return no(e)?on(e,t):[]})),As=ar((function(e){return Tr(l(e,no))})),Ps=ar((function(e){var t=ji(e);return no(t)&&(t=V),Tr(l(e,no),hi(t,2))})),xs=ar((function(e){var t=ji(e);return t="function"==typeof t?t:V,Tr(l(e,no),V,t)})),Cs=ar(Hi),Ms=ar((function(e){var t=e.length,n=t>1?e[t-1]:V;return n="function"==typeof n?(e.pop(),n):V,Vi(e,n)})),Ls=si((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Jt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof O&&_i(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Wi,args:[o],thisArg:V}),new i(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(V),e}))):this.thru(o)})),ks=Fr((function(e,t,n){Zo.call(e,n)?++e[n]:$t(e,n,1)})),Is=zr(Di),Ds=zr(Ni),Ns=Fr((function(e,t,n){Zo.call(e,n)?e[n].push(t):$t(e,n,[t])})),Fs=ar((function(e,t,n){var r=-1,i="function"==typeof t,a=to(e)?jo(e.length):[];return Ja(e,(function(e){a[++r]=i?o(t,e,n):Bn(e,t,n)})),a})),Us=Fr((function(e,t,n){$t(e,n,t)})),js=Fr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),Bs=ar((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bi(e,t[0],t[1])?t=[]:n>2&&bi(t[0],t[1],t[2])&&(t=[t[0]]),er(e,gn(t,1),[])})),Gs=_a||function(){return yn.Date.now()},Hs=ar((function(e,t,n){var r=te;if(n.length){var i=U(n,fi(Hs));r|=ae}return ni(e,r,t,n,i)})),Vs=ar((function(e,t,n){var r=te|ne;if(n.length){var i=U(n,fi(Vs));r|=ae}return ni(t,r,e,n,i)})),zs=ar((function(e,t){return tn(e,1,t)})),Ws=ar((function(e,t,n){return tn(e,yo(t)||0,n)}));Qi.Cache=Ut;var Ys,qs=rs((function(e,t){var n=(t=1==t.length&&eu(t[0])?d(t[0],x(hi())):d(gn(t,1),x(hi()))).length;return ar((function(r){for(var i=-1,a=xa(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return o(e,this,r)}))})),Ks=ar((function(e,t){var n=U(t,fi(Ks));return ni(e,ae,V,t,n)})),Xs=ar((function(e,t){var n=U(t,fi(Xs));return ni(e,se,V,t,n)})),$s=si((function(e,t){return ni(e,ce,V,V,V,t)})),Js=Qr(Nn),Qs=Qr((function(e,t){return e>=t})),Zs=Gn(function(){return arguments}())?Gn:function(e){return uo(e)&&Zo.call(e,"callee")&&!ha.call(e,"callee")},eu=jo.isArray,tu=wn?x(wn):function(e){return uo(e)&&Dn(e)==Ye},nu=wa||Fo,ru=On?x(On):function(e){return uo(e)&&Dn(e)==xe},iu=Rn?x(Rn):function(e){return uo(e)&&cs(e)==Ie},ou=An?x(An):function(e){return uo(e)&&Dn(e)==je},au=Pn?x(Pn):function(e){return uo(e)&&cs(e)==Be},su=xn?x(xn):function(e){return uo(e)&&ao(e.length)&&!!fn[Dn(e)]},uu=Qr(Kn),cu=Qr((function(e,t){return e<=t})),lu=Ur((function(e,t){if(Ti(t)||to(t))Nr(t,To(t),e);else for(var n in t)Zo.call(t,n)&&Yt(e,n,t[n])})),fu=Ur((function(e,t){Nr(t,wo(t),e)})),hu=Ur((function(e,t,n,r){Nr(t,wo(t),e,r)})),du=Ur((function(e,t,n,r){Nr(t,To(t),e,r)})),pu=si(Jt),vu=ar((function(e,t){e=zo(e);var n=-1,r=t.length,i=r>2?t[2]:V;for(i&&bi(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=wo(o),s=-1,u=a.length;++s<u;){var c=a[s],l=e[c];(l===V||eo(l,$o[c])&&!Zo.call(e,c))&&(e[c]=o[c])}return e})),mu=ar((function(e){return e.push(V,ii),o(Eu,V,e)})),gu=qr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=na.call(t)),e[t]=n}),Co(Mo)),yu=qr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=na.call(t)),Zo.call(e,t)?e[t].push(n):e[t]=[n]}),hi),_u=ar(Bn),bu=Ur((function(e,t,n){Qn(e,t,n)})),Eu=Ur((function(e,t,n,r){Qn(e,t,n,r)})),Su=si((function(e,t){var n={};if(null==e)return n;var r=!1;t=d(t,(function(t){return t=Ar(t,e),r||(r=t.length>1),t})),Nr(e,ci(e),n),r&&(n=Zt(n,$|J|Q,oi));for(var i=t.length;i--;)_r(n,t[i]);return n})),Tu=si((function(e,t){return null==e?{}:function(e,t){return tr(e,t,(function(t,n){return So(e,n)}))}(e,t)})),wu=ti(To),Ou=ti(wo),Ru=Hr((function(e,t,n){return t=t.toLowerCase(),e+(n?Ao(t):t)})),Au=Hr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Pu=Hr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),xu=Gr("toLowerCase"),Cu=Hr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Mu=Hr((function(e,t,n){return e+(n?" ":"")+ku(t)})),Lu=Hr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ku=Gr("toUpperCase"),Iu=ar((function(e,t){try{return o(e,V,t)}catch(e){return ro(e)?e:new Go(e)}})),Du=si((function(e,t){return s(t,(function(t){t=Li(t),$t(e,t,Hs(e[t],e))})),e})),Nu=Wr(),Fu=Wr(!0),Uu=ar((function(e,t){return function(n){return Bn(n,e,t)}})),ju=ar((function(e,t){return function(n){return Bn(e,n,t)}})),Bu=Xr(d),Gu=Xr(c),Hu=Xr(g),Vu=Jr(),zu=Jr(!0),Wu=Kr((function(e,t){return e+t}),0),Yu=ei("ceil"),qu=Kr((function(e,t){return e/t}),1),Ku=ei("floor"),Xu=Kr((function(e,t){return e*t}),1),$u=ei("round"),Ju=Kr((function(e,t){return e-t}),0);return n.after=function(e,t){if("function"!=typeof t)throw new qo(Y);return e=mo(e),function(){if(--e<1)return t.apply(this,arguments)}},n.ary=Xi,n.assign=lu,n.assignIn=fu,n.assignInWith=hu,n.assignWith=du,n.at=pu,n.before=$i,n.bind=Hs,n.bindAll=Du,n.bindKey=Vs,n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return eu(e)?e:[e]},n.chain=zi,n.chunk=function(e,t,n){t=(n?bi(e,t,n):t===V)?1:Pa(mo(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,a=jo(Ea(r/t));i<r;)a[o++]=fr(e,i,i+=t);return a},n.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=jo(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return p(eu(n)?Dr(n):[n],gn(t,1))},n.cond=function(e){var t=null==e?0:e.length,n=hi();return e=t?d(e,(function(e){if("function"!=typeof e[1])throw new qo(Y);return[n(e[0]),e[1]]})):[],ar((function(n){for(var r=-1;++r<t;){var i=e[r];if(o(i[0],this,n))return o(i[1],this,n)}}))},n.conforms=function(e){return function(e){var t=To(e);return function(n){return en(n,e,t)}}(Zt(e,$))},n.constant=Co,n.countBy=ks,n.create=function(e,t){var n=$a(e);return null==t?n:Xt(n,t)},n.curry=function e(t,n,r){var i=ni(t,ie,V,V,V,V,V,n=r?V:n);return i.placeholder=e.placeholder,i},n.curryRight=function e(t,n,r){var i=ni(t,oe,V,V,V,V,V,n=r?V:n);return i.placeholder=e.placeholder,i},n.debounce=Ji,n.defaults=vu,n.defaultsDeep=mu,n.defer=zs,n.delay=Ws,n.difference=vs,n.differenceBy=ms,n.differenceWith=gs,n.drop=function(e,t,n){var r=null==e?0:e.length;return r?fr(e,(t=n||t===V?1:mo(t))<0?0:t,r):[]},n.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?fr(e,0,(t=r-(t=n||t===V?1:mo(t)))<0?0:t):[]},n.dropRightWhile=function(e,t){return e&&e.length?Er(e,hi(t,3),!0,!0):[]},n.dropWhile=function(e,t){return e&&e.length?Er(e,hi(t,3),!0):[]},n.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&bi(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=mo(n))<0&&(n=-n>i?0:i+n),(r=r===V||r>i?i:mo(r))<0&&(r+=i),r=n>r?0:go(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},n.filter=function(e,t){return(eu(e)?l:mn)(e,hi(t,3))},n.flatMap=function(e,t){return gn(Ki(e,t),1)},n.flatMapDeep=function(e,t){return gn(Ki(e,t),ge)},n.flatMapDepth=function(e,t,n){return n=n===V?1:mo(n),gn(Ki(e,t),n)},n.flatten=Fi,n.flattenDeep=function(e){return(null==e?0:e.length)?gn(e,ge):[]},n.flattenDepth=function(e,t){return(null==e?0:e.length)?gn(e,t=t===V?1:mo(t)):[]},n.flip=function(e){return ni(e,le)},n.flow=Nu,n.flowRight=Fu,n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},n.functions=function(e){return null==e?[]:Sn(e,To(e))},n.functionsIn=function(e){return null==e?[]:Sn(e,wo(e))},n.groupBy=Ns,n.initial=function(e){return(null==e?0:e.length)?fr(e,0,-1):[]},n.intersection=ys,n.intersectionBy=_s,n.intersectionWith=bs,n.invert=gu,n.invertBy=yu,n.invokeMap=Fs,n.iteratee=Lo,n.keyBy=Us,n.keys=To,n.keysIn=wo,n.map=Ki,n.mapKeys=function(e,t){var n={};return t=hi(t,3),_n(e,(function(e,r,i){$t(n,t(e,r,i),e)})),n},n.mapValues=function(e,t){var n={};return t=hi(t,3),_n(e,(function(e,r,i){$t(n,r,t(e,r,i))})),n},n.matches=function(e){return $n(Zt(e,$))},n.matchesProperty=function(e,t){return Jn(e,Zt(t,$))},n.memoize=Qi,n.merge=bu,n.mergeWith=Eu,n.method=Uu,n.methodOf=ju,n.mixin=ko,n.negate=Zi,n.nthArg=function(e){return e=mo(e),ar((function(t){return Zn(t,e)}))},n.omit=Su,n.omitBy=function(e,t){return Oo(e,Zi(hi(t)))},n.once=function(e){return $i(2,e)},n.orderBy=function(e,t,n,r){return null==e?[]:(eu(t)||(t=null==t?[]:[t]),eu(n=r?V:n)||(n=null==n?[]:[n]),er(e,t,n))},n.over=Bu,n.overArgs=qs,n.overEvery=Gu,n.overSome=Hu,n.partial=Ks,n.partialRight=Xs,n.partition=js,n.pick=Tu,n.pickBy=Oo,n.property=Do,n.propertyOf=function(e){return function(t){return null==e?V:Tn(e,t)}},n.pull=Es,n.pullAll=Bi,n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?nr(e,t,hi(n,2)):e},n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?nr(e,t,V,n):e},n.pullAt=Ss,n.range=Vu,n.rangeRight=zu,n.rearg=$s,n.reject=function(e,t){return(eu(e)?l:mn)(e,Zi(hi(t,3)))},n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=hi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return rr(e,i),n},n.rest=function(e,t){if("function"!=typeof e)throw new qo(Y);return ar(e,t=t===V?t:mo(t))},n.reverse=Gi,n.sampleSize=function(e,t,n){return t=(n?bi(e,t,n):t===V)?1:mo(t),(eu(e)?Vt:ur)(e,t)},n.set=function(e,t,n){return null==e?e:cr(e,t,n)},n.setWith=function(e,t,n,r){return r="function"==typeof r?r:V,null==e?e:cr(e,t,n,r)},n.shuffle=function(e){return(eu(e)?zt:lr)(e)},n.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&bi(e,t,n)?(t=0,n=r):(t=null==t?0:mo(t),n=n===V?r:mo(n)),fr(e,t,n)):[]},n.sortBy=Bs,n.sortedUniq=function(e){return e&&e.length?vr(e):[]},n.sortedUniqBy=function(e,t){return e&&e.length?vr(e,hi(t,2)):[]},n.split=function(e,t,n){return n&&"number"!=typeof n&&bi(e,t,n)&&(t=n=V),(n=n===V?Ee:n>>>0)?(e=bo(e))&&("string"==typeof t||null!=t&&!ou(t))&&!(t=gr(t))&&D(e)?Pr(H(e),0,n):e.split(t,n):[]},n.spread=function(e,t){if("function"!=typeof e)throw new qo(Y);return t=null==t?0:Pa(mo(t),0),ar((function(n){var r=n[t],i=Pr(n,0,t);return r&&p(i,r),o(e,this,i)}))},n.tail=function(e){var t=null==e?0:e.length;return t?fr(e,1,t):[]},n.take=function(e,t,n){return e&&e.length?fr(e,0,(t=n||t===V?1:mo(t))<0?0:t):[]},n.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?fr(e,(t=r-(t=n||t===V?1:mo(t)))<0?0:t,r):[]},n.takeRightWhile=function(e,t){return e&&e.length?Er(e,hi(t,3),!1,!0):[]},n.takeWhile=function(e,t){return e&&e.length?Er(e,hi(t,3)):[]},n.tap=function(e,t){return t(e),e},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new qo(Y);return so(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ji(e,t,{leading:r,maxWait:t,trailing:i})},n.thru=Wi,n.toArray=po,n.toPairs=wu,n.toPairsIn=Ou,n.toPath=function(e){return eu(e)?d(e,Li):ho(e)?[e]:Dr(ps(bo(e)))},n.toPlainObject=_o,n.transform=function(e,t,n){var r=eu(e),i=r||nu(e)||su(e);if(t=hi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:so(e)&&io(o)?$a(la(e)):{}}return(i?s:_n)(e,(function(e,r,i){return t(n,e,r,i)})),n},n.unary=function(e){return Xi(e,1)},n.union=Ts,n.unionBy=ws,n.unionWith=Os,n.uniq=function(e){return e&&e.length?yr(e):[]},n.uniqBy=function(e,t){return e&&e.length?yr(e,hi(t,2)):[]},n.uniqWith=function(e,t){return t="function"==typeof t?t:V,e&&e.length?yr(e,V,t):[]},n.unset=function(e,t){return null==e||_r(e,t)},n.unzip=Hi,n.unzipWith=Vi,n.update=function(e,t,n){return null==e?e:br(e,t,Rr(n))},n.updateWith=function(e,t,n,r){return r="function"==typeof r?r:V,null==e?e:br(e,t,Rr(n),r)},n.values=Ro,n.valuesIn=function(e){return null==e?[]:C(e,wo(e))},n.without=Rs,n.words=xo,n.wrap=function(e,t){return Ks(Rr(t),e)},n.xor=As,n.xorBy=Ps,n.xorWith=xs,n.zip=Cs,n.zipObject=function(e,t){return wr(e||[],t||[],Yt)},n.zipObjectDeep=function(e,t){return wr(e||[],t||[],cr)},n.zipWith=Ms,n.entries=wu,n.entriesIn=Ou,n.extend=fu,n.extendWith=hu,ko(n,n),n.add=Wu,n.attempt=Iu,n.camelCase=Ru,n.capitalize=Ao,n.ceil=Yu,n.clamp=function(e,t,n){return n===V&&(n=t,t=V),n!==V&&(n=(n=yo(n))==n?n:0),t!==V&&(t=(t=yo(t))==t?t:0),Qt(yo(e),t,n)},n.clone=function(e){return Zt(e,Q)},n.cloneDeep=function(e){return Zt(e,$|Q)},n.cloneDeepWith=function(e,t){return Zt(e,$|Q,t="function"==typeof t?t:V)},n.cloneWith=function(e,t){return Zt(e,Q,t="function"==typeof t?t:V)},n.conformsTo=function(e,t){return null==t||en(e,t,To(t))},n.deburr=Po,n.defaultTo=function(e,t){return null==e||e!=e?t:e},n.divide=qu,n.endsWith=function(e,t,n){e=bo(e),t=gr(t);var r=e.length,i=n=n===V?r:Qt(mo(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},n.eq=eo,n.escape=function(e){return(e=bo(e))&&ct.test(e)?e.replace(st,Ln):e},n.escapeRegExp=function(e){return(e=bo(e))&&gt.test(e)?e.replace(mt,"\\$&"):e},n.every=function(e,t,n){var r=eu(e)?c:sn;return n&&bi(e,t,n)&&(t=V),r(e,hi(t,3))},n.find=Is,n.findIndex=Di,n.findKey=function(e,t){return y(e,hi(t,3),_n)},n.findLast=Ds,n.findLastIndex=Ni,n.findLastKey=function(e,t){return y(e,hi(t,3),bn)},n.floor=Ku,n.forEach=Yi,n.forEachRight=qi,n.forIn=function(e,t){return null==e?e:Za(e,hi(t,3),wo)},n.forInRight=function(e,t){return null==e?e:es(e,hi(t,3),wo)},n.forOwn=function(e,t){return e&&_n(e,hi(t,3))},n.forOwnRight=function(e,t){return e&&bn(e,hi(t,3))},n.get=Eo,n.gt=Js,n.gte=Qs,n.has=function(e,t){return null!=e&&mi(e,t,Fn)},n.hasIn=So,n.head=Ui,n.identity=Mo,n.includes=function(e,t,n,r){e=to(e)?e:Ro(e),n=n&&!r?mo(n):0;var i=e.length;return n<0&&(n=Pa(i+n,0)),fo(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&b(e,t,n)>-1},n.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:mo(n);return i<0&&(i=Pa(r+i,0)),b(e,t,i)},n.inRange=function(e,t,n){return t=vo(t),n===V?(n=t,t=0):n=vo(n),function(e,t,n){return e>=xa(t,n)&&e<Pa(t,n)}(e=yo(e),t,n)},n.invoke=_u,n.isArguments=Zs,n.isArray=eu,n.isArrayBuffer=tu,n.isArrayLike=to,n.isArrayLikeObject=no,n.isBoolean=function(e){return!0===e||!1===e||uo(e)&&Dn(e)==Pe},n.isBuffer=nu,n.isDate=ru,n.isElement=function(e){return uo(e)&&1===e.nodeType&&!lo(e)},n.isEmpty=function(e){if(null==e)return!0;if(to(e)&&(eu(e)||"string"==typeof e||"function"==typeof e.splice||nu(e)||su(e)||Zs(e)))return!e.length;var t=cs(e);if(t==Ie||t==Be)return!e.size;if(Ti(e))return!Yn(e).length;for(var n in e)if(Zo.call(e,n))return!1;return!0},n.isEqual=function(e,t){return Hn(e,t)},n.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:V)?n(e,t):V;return r===V?Hn(e,t,V,n):!!r},n.isError=ro,n.isFinite=function(e){return"number"==typeof e&&Oa(e)},n.isFunction=io,n.isInteger=oo,n.isLength=ao,n.isMap=iu,n.isMatch=function(e,t){return e===t||Vn(e,t,pi(t))},n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:V,Vn(e,t,pi(t),n)},n.isNaN=function(e){return co(e)&&e!=+e},n.isNative=function(e){if(ls(e))throw new Go(W);return zn(e)},n.isNil=function(e){return null==e},n.isNull=function(e){return null===e},n.isNumber=co,n.isObject=so,n.isObjectLike=uo,n.isPlainObject=lo,n.isRegExp=ou,n.isSafeInteger=function(e){return oo(e)&&e>=-ye&&e<=ye},n.isSet=au,n.isString=fo,n.isSymbol=ho,n.isTypedArray=su,n.isUndefined=function(e){return e===V},n.isWeakMap=function(e){return uo(e)&&cs(e)==ze},n.isWeakSet=function(e){return uo(e)&&Dn(e)==We},n.join=function(e,t){return null==e?"":Ra.call(e,t)},n.kebabCase=Au,n.last=ji,n.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==V&&(i=(i=mo(n))<0?Pa(r+i,0):xa(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):_(e,S,i,!0)},n.lowerCase=Pu,n.lowerFirst=xu,n.lt=uu,n.lte=cu,n.max=function(e){return e&&e.length?dn(e,Mo,Nn):V},n.maxBy=function(e,t){return e&&e.length?dn(e,hi(t,2),Nn):V},n.mean=function(e){return T(e,Mo)},n.meanBy=function(e,t){return T(e,hi(t,2))},n.min=function(e){return e&&e.length?dn(e,Mo,Kn):V},n.minBy=function(e,t){return e&&e.length?dn(e,hi(t,2),Kn):V},n.stubArray=No,n.stubFalse=Fo,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Xu,n.nth=function(e,t){return e&&e.length?Zn(e,mo(t)):V},n.noConflict=function(){return yn._===this&&(yn._=ia),this},n.noop=Io,n.now=Gs,n.pad=function(e,t,n){e=bo(e);var r=(t=mo(t))?G(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return $r(Sa(i),n)+e+$r(Ea(i),n)},n.padEnd=function(e,t,n){e=bo(e);var r=(t=mo(t))?G(e):0;return t&&r<t?e+$r(t-r,n):e},n.padStart=function(e,t,n){e=bo(e);var r=(t=mo(t))?G(e):0;return t&&r<t?$r(t-r,n)+e:e},n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Ma(bo(e).replace(_t,""),t||0)},n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&bi(e,t,n)&&(t=n=V),n===V&&("boolean"==typeof t?(n=t,t=V):"boolean"==typeof e&&(n=e,e=V)),e===V&&t===V?(e=0,t=1):(e=vo(e),t===V?(t=e,e=0):t=vo(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=La();return xa(e+i*(t-e+pn("1e-"+((i+"").length-1))),t)}return ir(e,t)},n.reduce=function(e,t,n){var r=eu(e)?v:R,i=arguments.length<3;return r(e,hi(t,4),n,i,Ja)},n.reduceRight=function(e,t,n){var r=eu(e)?m:R,i=arguments.length<3;return r(e,hi(t,4),n,i,Qa)},n.repeat=function(e,t,n){return t=(n?bi(e,t,n):t===V)?1:mo(t),or(bo(e),t)},n.replace=function(){var e=arguments,t=bo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},n.result=function(e,t,n){var r=-1,i=(t=Ar(t,e)).length;for(i||(i=1,e=V);++r<i;){var o=null==e?V:e[Li(t[r])];o===V&&(r=i,o=n),e=io(o)?o.call(e):o}return e},n.round=$u,n.runInContext=e,n.sample=function(e){return(eu(e)?Ht:sr)(e)},n.size=function(e){if(null==e)return 0;if(to(e))return fo(e)?G(e):e.length;var t=cs(e);return t==Ie||t==Be?e.size:Yn(e).length},n.snakeCase=Cu,n.some=function(e,t,n){var r=eu(e)?g:hr;return n&&bi(e,t,n)&&(t=V),r(e,hi(t,3))},n.sortedIndex=function(e,t){return dr(e,t)},n.sortedIndexBy=function(e,t,n){return pr(e,t,hi(n,2))},n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=dr(e,t);if(r<n&&eo(e[r],t))return r}return-1},n.sortedLastIndex=function(e,t){return dr(e,t,!0)},n.sortedLastIndexBy=function(e,t,n){return pr(e,t,hi(n,2),!0)},n.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=dr(e,t,!0)-1;if(eo(e[n],t))return n}return-1},n.startCase=Mu,n.startsWith=function(e,t,n){return e=bo(e),n=null==n?0:Qt(mo(n),0,e.length),t=gr(t),e.slice(n,n+t.length)==t},n.subtract=Ju,n.sum=function(e){return e&&e.length?A(e,Mo):0},n.sumBy=function(e,t){return e&&e.length?A(e,hi(t,2)):0},n.template=function(e,t,r){var i=n.templateSettings;r&&bi(e,t,r)&&(t=V),e=bo(e),t=hu({},t,i,ri);var o,a,s=hu({},t.imports,i.imports,ri),u=To(s),c=C(s,u),l=0,f=t.interpolate||It,h="__p += '",d=Wo((t.escape||It).source+"|"+f.source+"|"+(f===ht?Rt:It).source+"|"+(t.evaluate||It).source+"|$","g"),p="//# sourceURL="+(Zo.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++ln+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(Dt,I),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var v=Zo.call(t,"variable")&&t.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(rt,""):h).replace(it,"$1").replace(ot,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Iu((function(){return Ho(u,p+"return "+h).apply(V,c)}));if(m.source=h,ro(m))throw m;return m},n.times=function(e,t){if((e=mo(e))<1||e>ye)return[];var n=Ee,r=xa(e,Ee);t=hi(t),e-=Ee;for(var i=P(r,t);++n<e;)t(n);return i},n.toFinite=vo,n.toInteger=mo,n.toLength=go,n.toLower=function(e){return bo(e).toLowerCase()},n.toNumber=yo,n.toSafeInteger=function(e){return e?Qt(mo(e),-ye,ye):0===e?e:0},n.toString=bo,n.toUpper=function(e){return bo(e).toUpperCase()},n.trim=function(e,t,n){if((e=bo(e))&&(n||t===V))return e.replace(yt,"");if(!e||!(t=gr(t)))return e;var r=H(e),i=H(t);return Pr(r,L(r,i),k(r,i)+1).join("")},n.trimEnd=function(e,t,n){if((e=bo(e))&&(n||t===V))return e.replace(bt,"");if(!e||!(t=gr(t)))return e;var r=H(e);return Pr(r,0,k(r,H(t))+1).join("")},n.trimStart=function(e,t,n){if((e=bo(e))&&(n||t===V))return e.replace(_t,"");if(!e||!(t=gr(t)))return e;var r=H(e);return Pr(r,L(r,H(t))).join("")},n.truncate=function(e,t){var n=fe,r=he;if(so(t)){var i="separator"in t?t.separator:i;n="length"in t?mo(t.length):n,r="omission"in t?gr(t.omission):r}var o=(e=bo(e)).length;if(D(e)){var a=H(e);o=a.length}if(n>=o)return e;var s=n-G(r);if(s<1)return r;var u=a?Pr(a,0,s).join(""):e.slice(0,s);if(i===V)return u+r;if(a&&(s+=u.length-s),ou(i)){if(e.slice(s).search(i)){var c,l=u;for(i.global||(i=Wo(i.source,bo(At.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===V?s:f)}}else if(e.indexOf(gr(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r},n.unescape=function(e){return(e=bo(e))&&ut.test(e)?e.replace(at,kn):e},n.uniqueId=function(e){var t=++ea;return bo(e)+t},n.upperCase=Lu,n.upperFirst=ku,n.each=Yi,n.eachRight=qi,n.first=Ui,ko(n,(Ys={},_n(n,(function(e,t){Zo.call(n.prototype,t)||(Ys[t]=e)})),Ys),{chain:!1}),n.VERSION="4.17.15",s(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){n[e].placeholder=n})),s(["drop","take"],(function(e,t){O.prototype[e]=function(n){n=n===V?1:Pa(mo(n),0);var r=this.__filtered__&&!t?new O(this):this.clone();return r.__filtered__?r.__takeCount__=xa(n,r.__takeCount__):r.__views__.push({size:xa(n,Ee),type:e+(r.__dir__<0?"Right":"")}),r},O.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),s(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==ve||3==n;O.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:hi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),s(["head","last"],(function(e,t){var n="take"+(t?"Right":"");O.prototype[e]=function(){return this[n](1).value()[0]}})),s(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");O.prototype[e]=function(){return this.__filtered__?new O(this):this[n](1)}})),O.prototype.compact=function(){return this.filter(Mo)},O.prototype.find=function(e){return this.filter(e).head()},O.prototype.findLast=function(e){return this.reverse().find(e)},O.prototype.invokeMap=ar((function(e,t){return"function"==typeof e?new O(this):this.map((function(n){return Bn(n,e,t)}))})),O.prototype.reject=function(e){return this.filter(Zi(hi(e)))},O.prototype.slice=function(e,t){e=mo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new O(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==V&&(n=(t=mo(t))<0?n.dropRight(-t):n.take(t-e)),n)},O.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},O.prototype.toArray=function(){return this.take(Ee)},_n(O.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=n[o?"take"+("last"==t?"Right":""):t],s=o||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,u=o?[1]:arguments,c=t instanceof O,l=u[0],f=c||eu(t),h=function(e){var t=a.apply(n,p([e],u));return o&&d?t[0]:t};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var d=this.__chain__,v=!!this.__actions__.length,m=s&&!d,g=c&&!v;if(!s&&f){t=g?t:new O(this);var y=e.apply(t,u);return y.__actions__.push({func:Wi,args:[h],thisArg:V}),new i(y,d)}return m&&g?e.apply(this,u):(y=this.thru(h),m?o?y.value()[0]:y.value():y)})})),s(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ko[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(eu(n)?n:[],e)}return this[r]((function(n){return t.apply(eu(n)?n:[],e)}))}})),_n(O.prototype,(function(e,t){var r=n[t];if(r){var i=r.name+"";Zo.call(Ga,i)||(Ga[i]=[]),Ga[i].push({name:t,func:r})}})),Ga[Yr(V,ne).name]=[{name:"wrapper",func:V}],O.prototype.clone=function(){var e=new O(this.__wrapped__);return e.__actions__=Dr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Dr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Dr(this.__views__),e},O.prototype.reverse=function(){if(this.__filtered__){var e=new O(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},O.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=eu(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=xa(t,e+a);break;case"takeRight":e=Pa(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=xa(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Sr(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[c+=t];++v<f;){var g=l[v],y=g.iteratee,_=g.type,b=y(m);if(_==me)m=b;else if(!b){if(_==ve)continue e;break e}}p[h++]=m}return p},n.prototype.at=Ls,n.prototype.chain=function(){return zi(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===V&&(this.__values__=po(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?V:this.__values__[this.__index__++]}},n.prototype.plant=function(e){for(var t,n=this;n instanceof r;){var i=Ii(n);i.__index__=0,i.__values__=V,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof O){var t=e;return this.__actions__.length&&(t=new O(this)),(t=t.reverse()).__actions__.push({func:Wi,args:[Gi],thisArg:V}),new i(t,this.__chain__)}return this.thru(Gi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return Sr(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,va&&(n.prototype[va]=function(){return this}),n}();yn._=In,(i=function(){return In}.call(t,n,t,r))===V||(r.exports=i)}).call(this)}).call(this,n(22),n(233)(e))},function(e,t,n){var r=n(46);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,r||e,o),s=c?c+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)u.call(e,t)&&n.push(c?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=c?c+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(e){var t=c?c+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,i,o){var a=c?c+e:e;if(!this._events[a])return!1;var s,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(u=1,s=new Array(f-1);u<f;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var h,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!s)for(h=1,s=new Array(f-1);h<f;h++)s[h-1]=arguments[h];l[u].fn.apply(l[u].context,s)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var i=c?c+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||a(this,i);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=c?c+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,e.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var r,i,o,a,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var l=a.path,f=l.substring(0,l.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(f)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){function r(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw e};var r=t(t.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var a=t.toString(),c=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return o;for(var l,f=c[1],h=new RegExp("(\\\\n|\\W)"+i(f)+u,"g");l=h.exec(a);)"dll-reference"!==l[3]&&o[r].push(l[3]);for(h=new RegExp("\\("+i(f)+'\\("(dll-reference\\s('+s+'))"\\)\\)'+u,"g");l=h.exec(a);)e[l[2]]||(o[r].push(l[1]),e[l[2]]=n(l[1]).m),o[l[2]]=o[l[2]]||[],o[l[2]].push(l[4]);for(var d,p=Object.keys(o),v=0;v<p.length;v++)for(var m=0;m<o[p[v]].length;m++)d=o[p[v]][m],isNaN(1*d)||(o[p[v]][m]=1*o[p[v]][m]);return o}function a(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}var s="[\\.|\\-|\\+|\\w|/|@]+",u="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+s+").*?\\)";e.exports=function(e,t){t=t||{};var i={main:n.m},s=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),u=0;u<s.length;u++){var c=s[u],l=n[c].pop();if(i[c]=i[c]||{},!i[c][l]&&e[c][l]){i[c][l]=!0,r[c]=r[c]||[],r[c].push(l);for(var f=o(e,e[c][l],c),h=Object.keys(f),d=0;d<h.length;d++)n[h[d]]=n[h[d]]||[],n[h[d]]=n[h[d]].concat(f[h[d]])}}return r}(i,e),u="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),u=u+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var c=new window.Blob([u],{type:"text/javascript"});if(t.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),f=new window.Worker(l);return f.objectURL=l,f}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),i=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),o=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,u=s[0],c=s[1],l=s[2],f=s[3],h=new Uint32Array(256),d=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[d]=m,t[m]=d;var g=h[d],y=h[g],_=h[y],b=257*h[m]^16843008*m;r[d]=b<<24|b>>>8,i[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,a[d]=b,b=16843009*_^65537*y^257*g^16843008*d,u[m]=b<<24|b>>>8,c[m]=b<<16|b>>>16,l[m]=b<<8|b>>>24,f[m]=b,d?(d=g^h[h[h[_^g]]],p^=h[h[p]]):d=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,u,c=this.ksRows=4*(i+6+1),l=this.keySchedule=new Uint32Array(c),f=this.invKeySchedule=new Uint32Array(c),h=this.sBox,d=this.rcon,p=this.invSubMix,v=p[0],m=p[1],g=p[2],y=p[3];for(o=0;o<c;o++)o<i?s=l[o]=t[o]:(u=s,o%i==0?(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=d[o/i|0]<<24):i>6&&o%i==4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),l[o]=s=(l[o-i]^u)>>>0);for(a=0;a<c;a++)o=c-a,u=3&a?l[o]:l[o-4],f[a]=a<4||o<=4?u:v[h[u>>>24]]^m[h[u>>>16&255]]^g[h[u>>>8&255]]^y[h[255&u]],f[a]=f[a]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n,r){for(var i,o,a,s,u,c,l,f,h,d,p,v,m,g,y,_,b,E=this.keySize+6,S=this.invKeySchedule,T=this.invSBox,w=this.invSubMix,O=w[0],R=w[1],A=w[2],P=w[3],x=this.uint8ArrayToUint32Array_(n),C=x[0],M=x[1],L=x[2],k=x[3],I=new Int32Array(e),D=new Int32Array(I.length),N=this.networkToHostOrderSwap;t<I.length;){for(h=N(I[t]),d=N(I[t+1]),p=N(I[t+2]),v=N(I[t+3]),u=h^S[0],c=v^S[1],l=p^S[2],f=d^S[3],m=4,g=1;g<E;g++)i=O[u>>>24]^R[c>>16&255]^A[l>>8&255]^P[255&f]^S[m],o=O[c>>>24]^R[l>>16&255]^A[f>>8&255]^P[255&u]^S[m+1],a=O[l>>>24]^R[f>>16&255]^A[u>>8&255]^P[255&c]^S[m+2],s=O[f>>>24]^R[u>>16&255]^A[c>>8&255]^P[255&l]^S[m+3],u=i,c=o,l=a,f=s,m+=4;i=T[u>>>24]<<24^T[c>>16&255]<<16^T[l>>8&255]<<8^T[255&f]^S[m],o=T[c>>>24]<<24^T[l>>16&255]<<16^T[f>>8&255]<<8^T[255&u]^S[m+1],a=T[l>>>24]<<24^T[f>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^S[m+2],s=T[f>>>24]<<24^T[u>>16&255]<<16^T[c>>8&255]<<8^T[255&l]^S[m+3],m+=3,D[t]=N(i^C),D[t+1]=N(s^M),D[t+2]=N(a^L),D[t+3]=N(o^k),C=h,M=d,L=p,k=v,t+=4}return r?(y=D.buffer,_=y.byteLength,(b=_&&new DataView(y).getUint8(_-1))?y.slice(0,_-b):y):D.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),a=n("./src/errors.ts"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),c=n("./src/utils/get-self-scope.js"),l=Object(c.getSelfScope)(),f=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=l.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,n,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new o),c.expandKey(t),a(c.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(l,t)),this.fastAesKey.expandKey().then((function(i){new r(l,n).decrypt(e,i).catch((function(r){u.onWebCryptoError(r,e,t,n,a)})).then((function(e){a(e)}))})).catch((function(r){u.onWebCryptoError(r,e,t,n,a)}))}},t.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=f},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){"use strict";function r(e,t){return 255===e[t]&&240==(246&e[t+1])}function i(e,t){return 1&e[t+1]?7:9}function o(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function a(e,t){return!!(t+1<e.length&&r(e,t))}function s(e,t){if(a(e,t)){var n=i(e,t);t+5<e.length&&(n=o(e,t));var s=t+n;if(s===e.length||s+1<e.length&&r(e,s))return!0}return!1}function u(e,t,n,r,i){if(!e.samplerate){var o=function(e,t,n,r){var i,o,a,s,u,c=navigator.userAgent.toLowerCase(),l=r,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(i=1+((192&t[n+2])>>>6),!((o=(60&t[n+2])>>>2)>f.length-1))return s=(1&t[n+2])<<2,s|=(192&t[n+3])>>>6,_.logger.log("manifest codec:"+r+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+f[o]+"Hz],channelConfig:"+s),/firefox/i.test(c)?o>=6?(i=5,u=new Array(4),a=o-3):(i=2,u=new Array(2),a=o):-1!==c.indexOf("android")?(i=2,u=new Array(2),a=o):(i=5,u=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&o>=6?a=o-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(o>=6&&1===s||/vivaldi/i.test(c))||!r&&1===s)&&(i=2,u=new Array(2)),a=o)),u[0]=i<<3,u[0]|=(14&o)>>1,u[1]|=(1&o)<<7,u[1]|=s<<3,5===i&&(u[1]|=(14&a)>>1,u[2]=(1&a)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:f[o],channelCount:s,codec:"mp4a.40."+i,manifestCodec:l};e.trigger(v.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o})}(t,n,r,i);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,_.logger.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function c(e){return 9216e4/e}function l(e,t,n,r,a){var s=function(e,t,n,r,a){var s,u,c=e.length;if(s=i(e,t),u=o(e,t),(u-=s)>0&&t+s+u<=c)return{headerLength:s,frameLength:u,stamp:n+r*a}}(t,n,r,a,c(e.samplerate));if(s){var u=s.stamp,l=s.headerLength,f=s.frameLength,h={unit:t.subarray(n+l,n+l+f),pts:u,dts:u};return e.samples.push(h),{sample:h,length:f+l}}}function f(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function h(e,t){return void 0===t&&(t=!1),f(e,1e3,1/I,t)}function d(e,t){return void 0===t&&(t=1),f(e,I,1/t)}n.r(t);var p,v=n("./src/events.js"),m=n("./src/errors.ts"),g=n("./src/crypt/decrypter.js"),y=n("./src/polyfills/number-isFinite.js"),_=n("./src/utils/logger.js"),b=n("./src/utils/get-self-scope.js"),E=n("./src/demux/id3.js"),S=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(E.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(s(e,t))return _.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=this._audioTrack,o=E.default.getID3Data(e,0)||[],s=E.default.getTimeStamp(o),c=Object(y.isFiniteNumber)(s)?90*s:9e4*t,f=0,h=c,d=e.length,p=o.length,v=[{pts:h,dts:h,data:o}];p<d-1;)if(a(e,p)&&p+5<d){u(i,this.observer,e,p,i.manifestCodec);var m=l(i,e,p,c,f);if(!m){_.logger.log("Unable to parse AAC frame");break}p+=m.length,h=m.sample.pts,f++}else E.default.isHeader(e,p)?(o=E.default.getID3Data(e,p),v.push({pts:h,dts:h,data:o}),p+=o.length):p++;this.remuxer.remux(i,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),T=n("./src/demux/mp4demuxer.js"),w={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3,a=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==o){var s=3===n?3-r:3===r?3:4,u=1e3*w.BitratesMap[14*s+i-1],c=3===n?0:2===n?1:2,l=w.SamplingRateMap[3*c+o],f=e[t+3]>>6==3?1:2,h=w.SamplesCoefficients[n][r],d=w.BytesInSlot[r],p=8*h*d;return{sampleRate:l,channelCount:f,frameLength:parseInt(h*u/l+a,10)*d,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},O=w,R=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&_.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},t.readSPS=function(){var e,t,n,r,i,o,a,s=0,u=0,c=0,l=0,f=this.readUByte.bind(this),h=this.readBits.bind(this),d=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),m=this.skipEG.bind(this),g=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(f(),e=f(),h(5),v(3),f(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=d();if(3===_&&v(1),g(),g(),v(1),p())for(o=3!==_?8:12,a=0;a<o;a++)p()&&y(a<6?16:64)}g();var b=d();if(0===b)d();else if(1===b)for(v(1),m(),m(),t=d(),a=0;a<t;a++)m();g(),v(1),n=d(),r=d(),0===(i=h(1))&&v(1),v(1),p()&&(s=d(),u=d(),c=d(),l=d());var E=[1,1];if(p()&&p())switch(f()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(c+l),pixelRatio:E}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),A=function(){function e(e,t,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new g.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,(function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},t.decryptAvcSample=function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,(function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,n+1,r)}))},t.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},e}(),P={video:1,audio:2,id3:3,text:4},x=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new A(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0||(n&&_.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:P[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},t.resetTimeStamp=function(){},t.append=function(t,n,r,i){var o,a,s,u,c,l=t.length,f=!1;this.contiguous=r;var h=this.pmtParsed,d=this._avcTrack,p=this._audioTrack,g=this._id3Track,y=d.pid,b=p.pid,E=g.pid,S=this._pmtId,T=d.pesData,w=p.pesData,O=g.pesData,R=this._parsePAT,A=this._parsePMT,P=this._parsePES,x=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),M=this._parseMPEGPES.bind(this),L=this._parseID3PES.bind(this),k=e._syncOffset(t);for(l-=(l+k)%188,o=k;o<l;o+=188)if(71===t[o]){if(a=!!(64&t[o+1]),s=((31&t[o+1])<<8)+t[o+2],(48&t[o+3])>>4>1){if((u=o+5+t[o+4])===o+188)continue}else u=o+4;switch(s){case y:a&&(T&&(c=P(T))&&void 0!==c.pts&&x(c,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(u,o+188)),T.size+=o+188-u);break;case b:a&&(w&&(c=P(w))&&void 0!==c.pts&&(p.isAAC?C(c):M(c)),w={data:[],size:0}),w&&(w.data.push(t.subarray(u,o+188)),w.size+=o+188-u);break;case E:a&&(O&&(c=P(O))&&void 0!==c.pts&&L(c),O={data:[],size:0}),O&&(O.data.push(t.subarray(u,o+188)),O.size+=o+188-u);break;case 0:a&&(u+=t[u]+1),S=this._pmtId=R(t,u);break;case S:a&&(u+=t[u]+1);var I=A(t,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=I.avc)>0&&(d.pid=y),(b=I.audio)>0&&(p.pid=b,p.isAAC=I.isAAC),(E=I.id3)>0&&(g.pid=E),f&&!h&&(_.logger.log("reparse from beginning"),f=!1,o=k-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(v.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(c=P(T))&&void 0!==c.pts?(x(c,!0),d.pesData=null):d.pesData=T,w&&(c=P(w))&&void 0!==c.pts?(p.isAAC?C(c):M(c),p.pesData=null):(w&&w.size&&_.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=w),O&&(c=P(O))&&void 0!==c.pts?(L(c),g.pesData=null):g.pesData=O,null==this.sampleAes?this.remuxer.remux(p,d,g,this._txtTrack,n,r,i):this.decryptAndRemux(p,d,g,this._txtTrack,n,r,i)},t.decryptAndRemux=function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)}))}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},t.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,r,i,o,a)}))}else this.remuxer.remux(e,t,n,r,i,o,a)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,n,r){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){_.logger.log("unknown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!r){_.logger.log("unknown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):_.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:_.logger.warn("HEVC stream type found, not supported for now");break;default:_.logger.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},t._parsePES=function(e){var t,n,r,i,o,a,s,u,c=0,l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;){var f=new Uint8Array(l[0].length+l[1].length);f.set(l[0]),f.set(l[1],l[0].length),l[0]=f,l.splice(1,1)}if(1===((t=l[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;if(192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(_.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),u=(i=t[8])+9,e.size<=u)return null;e.size-=u,o=new Uint8Array(e.size);for(var h=0,d=l.length;h<d;h++){var p=(t=l[h]).byteLength;if(u){if(u>p){u-=p;continue}t=t.subarray(u),p-=u,u=0}o.set(t,c),c+=p}return r&&(r-=i+3),{data:o,pts:a,dts:s,len:r}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&_.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var n,r,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,l=this.pushAccesUnit.bind(this),f=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,u&&s.length&&!a.audFound&&(l(u,a),u=this.avcSample=f(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(c&&s.length>4){var h=new R(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(u.key=!0)}break;case 5:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(n=new R(o.discardEPB(t.data))).readUByte();for(var d=0,p=0,v=!1,m=0;!v&&n.bytesAvailable>1;){d=0;do{d+=m=n.readUByte()}while(255===m);p=0;do{p+=m=n.readUByte()}while(255===m);if(4===d&&0!==n.bytesAvailable){if(v=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var g=n.readUByte(),y=31&g,_=[g,n.readUByte()];for(i=0;i<y;i++)_.push(n.readUByte()),_.push(n.readUByte()),_.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(5===d&&0!==n.bytesAvailable){if(v=!0,p>16){var b=[];for(i=0;i<16;i++)b.push(n.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||b.push("-");var S=p-16,T=new Uint8Array(S);for(i=0;i<S;i++)T[i]=n.readUByte();o._insertSampleInOrder(o._txtTrack.samples,{pts:e.pts,payloadType:d,uuid:b.join(""),userDataBytes:T,userData:Object(E.utf8ArrayToStr)(T.buffer)})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,c=!0,!a.sps){var w=(n=new R(t.data)).readSPS();a.width=w.width,a.height=w.height,a.pixelRatio=w.pixelRatio,a.sps=[t.data],a.duration=o._duration;var O=t.data.subarray(1,4),A="avc1.";for(i=0;i<3;i++){var P=O[i].toString(16);P.length<2&&(P="0"+P),A+=P}a.codec=A}break;case 8:r=!0,a.pps||(a.pps=[t.data]);break;case 9:r=!1,a.audFound=!0,u&&l(u,a),u=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&r&&u.units.push(t)})),t&&u&&(l(u,a),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},t._parseAVCNALu=function(e){var t,n,r,i,o=0,a=e.byteLength,s=this._avcTrack,u=s.naluState||0,c=u,l=[],f=-1;for(-1===u&&(f=0,i=31&e[0],u=0,o=1);o<a;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,o-u-1),type:i},l.push(r);else{var h=this._getLastNalUnit();if(h&&(c&&o<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(n=o-u-1)>0)){var d=new Uint8Array(h.data.byteLength+n);d.set(h.data,0),d.set(e.subarray(0,n),h.data.byteLength),h.data=d}}o<a?(f=o,i=31&e[o],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f>=0&&u>=0&&(r={data:e.subarray(f,a),type:i,state:u},l.push(r)),0===l.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=u,l},t.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},t._parseAACPES=function(e){var t,n,r,i,o,s,f,h=this._audioTrack,d=e.data,p=e.pts,g=this.aacOverFlow,y=this.aacLastPTS;if(g){var b=new Uint8Array(g.byteLength+d.byteLength);b.set(g,0),b.set(d,g.byteLength),d=b}for(r=0,o=d.length;r<o-1&&!a(d,r);r++);if(!r||(r<o-1?(s="AAC PES did not start with ADTS header,offset:"+r,f=!1):(s="no ADTS header found in AAC PES",f=!0),_.logger.warn("parsing error:"+s),this.observer.trigger(v.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:f,reason:s}),!f)){if(u(h,this.observer,d,r,this.audioCodec),n=0,t=c(h.samplerate),g&&y){var E=y+t;Math.abs(E-p)>1&&(_.logger.log("AAC: align PTS for overlapping frames by "+Math.round((E-p)/90)),p=E)}for(;r<o;)if(a(d,r)&&r+5<o){var S=l(h,d,r,p,n);if(!S)break;r+=S.length,i=S.sample.pts,n++}else r++;g=r<o?d.subarray(r,o):null,this.aacOverFlow=g,this.aacLastPTS=i}},t._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,o=e.pts;i<n;)if(O.isHeader(t,i)){var a=O.appendFrame(this._audioTrack,t,i,o,r);if(!a)break;i+=a.length,r++}else i++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),C=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,n,r=E.default.getID3Data(e,0);if(r&&void 0!==E.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(O.probe(e,t))return _.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,n,r){for(var i=E.default.getID3Data(e,0),o=E.default.getTimeStamp(i),a=o?90*o:9e4*t,s=i.length,u=e.length,c=0,l=0,f=this._audioTrack,h=[{pts:a,dts:a,data:i}];s<u;)if(O.isHeader(e,s)){var d=O.appendFrame(f,e,s,a,c);if(!d)break;s+=d.length,l=d.sample.pts,c++}else E.default.isHeader(e,s)?(i=E.default.getID3Data(e,s),h.push({pts:l,dts:l,data:i}),s+=i.length):s++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,r)},t.destroy=function(){},e}(),M=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),L=Math.pow(2,32)-1,k=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(L+1)),i=Math.floor(n%(L+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(L+1)),i=Math.floor(n%(L+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,c=t.height,l=t.pixelRatio[0],f=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,f>>24,f>>16&255,f>>8&255,255&f])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,o=t.height,a=Math.floor(r/(L+1)),s=Math.floor(r%(L+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),i=t.id,o=Math.floor(n/(L+1)),a=Math.floor(n%(L+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,o,a,s,u,c=t.samples||[],l=c.length,f=12+16*l,h=new Uint8Array(f);for(n+=8+f,h.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<l;r++)o=(i=c[r]).duration,a=i.size,s=i.flags,u=i.cts,h.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}(),I=9e4,D=d(10),N=d(.2),F=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,n,r,i,o,a){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var s=e.samples.length,u=t.samples.length,c=i,l=i;if(s&&u){var f=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;c+=Math.max(0,f),l+=Math.max(0,-f)}if(s){e.timescale||(_.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h,d=this.remuxAudio(e,c,o,a);u&&(d&&(h=d.endPTS-d.startPTS),t.timescale||(_.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,l,o,h,a))}else if(u){var p=this.remuxVideo(t,l,o,0,a);p&&e.codec&&this.remuxEmptyAudio(e,c,o,p)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(v.default.FRAG_PARSED)},t.generateIS=function(e,t,n){var r,i,o=this.observer,a=e.samples,s=t.samples,u=this.typeSupported,c="audio/mp4",l={},f={tracks:l},h=void 0===this._initPTS;if(h&&(r=i=1/0),e.config&&a.length&&(e.timescale=e.samplerate,_.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(c="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),l.audio={container:c,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:k.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(r=i=a[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&s.length){var d=t.inputTimeScale;t.timescale=d,l.video={container:"video/mp4",codec:t.codec,initSegment:k.initSegment([t]),metadata:{width:t.width,height:t.height}},h&&(r=Math.min(r,s[0].pts-d*n),i=Math.min(i,s[0].dts-d*n),this.observer.trigger(v.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(l).length?(o.trigger(v.default.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,h&&(this._initPTS=r,this._initDTS=i)):o.trigger(v.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,n,r,i){var o,a,s,u,c,l,f,d=8,p=e.timescale,g=e.samples,y=[],b=g.length,E=this._PTSNormalize,S=this._initPTS,T=this.nextAvcDts,w=this.isSafari;if(0!==b){w&&(n|=g.length&&T&&(i&&Math.abs(t-T/p)<.1||Math.abs(g[0].pts-T-S)<p/5)),n||(T=t*p),g.forEach((function(e){e.pts=E(e.pts-S,T),e.dts=E(e.dts-S,T)})),g.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id}));var O=g.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*N)}),0);if(O<0){_.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+h(O,!0)+" ms to overcome this issue");for(var R=0;R<g.length;R++)g[R].dts+=O}var A=g[0];c=Math.max(A.dts,0),u=Math.max(A.pts,0);var P=c-T;n&&P&&(P>1?_.logger.log("AVC: "+h(P,!0)+" ms hole between fragments detected,filling it"):P<-1&&_.logger.log("AVC: "+h(-P,!0)+" ms overlapping between fragments detected"),c=T,g[0].dts=c,u=Math.max(u-P,T),g[0].pts=u,_.logger.log("Video: PTS/DTS adjusted: "+h(u,!0)+"/"+h(c,!0)+", delta: "+h(P,!0)+" ms")),A=g[g.length-1],f=Math.max(A.dts,0),l=Math.max(A.pts,0,f),w&&(o=Math.round((f-c)/(g.length-1)));for(var x=0,C=0,M=0;M<b;M++){for(var L=g[M],I=L.units,D=I.length,F=0,U=0;U<D;U++)F+=I[U].data.length;C+=F,x+=D,L.length=F,L.dts=w?c+M*o:Math.max(L.dts,c),L.pts=Math.max(L.pts,L.dts)}var j=C+4*x+8;try{a=new Uint8Array(j)}catch(e){return void this.observer.trigger(v.default.ERROR,{type:m.ErrorTypes.MUX_ERROR,details:m.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var B=new DataView(a.buffer);B.setUint32(0,j),a.set(k.types.mdat,4);for(var G=0;G<b;G++){for(var H=g[G],V=H.units,z=0,W=void 0,Y=0,q=V.length;Y<q;Y++){var K=V[Y],X=K.data,$=K.data.byteLength;B.setUint32(d,$),d+=4,a.set(X,d),d+=$,z+=4+$}if(w)W=Math.max(0,o*Math.round((H.pts-H.dts)/o));else{if(G<b-1)o=g[G+1].dts-H.dts;else{var J=this.config,Q=H.dts-g[G>0?G-1:G].dts;if(J.stretchShortVideoTrack){var Z=J.maxBufferHole,ee=Math.floor(Z*p),te=(r?u+r*p:this.nextAudioPts)-H.pts;te>ee?((o=te-Q)<0&&(o=Q),_.logger.log("It is approximately "+h(te,!1)+" ms to the next segment; using duration "+h(o,!1)+" ms for the last video frame.")):o=Q}else o=Q}W=Math.round(H.pts-H.dts)}y.push({size:z,duration:o,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:H.key?2:1,isNonSync:H.key?0:1}})}this.nextAvcDts=f+o;var ne=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=y[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=y,s=k.moof(e.sequenceNumber++,c,e),e.samples=[];var ie={data1:s,data2:a,startPTS:u/p,endPTS:(l+o)/p,startDTS:c/p,endDTS:this.nextAvcDts/p,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:ne};return this.observer.trigger(v.default.FRAG_PARSING_DATA,ie),ie}},t.remuxAudio=function(e,t,n,r){var i,o,a,s,u,c,l=e.inputTimeScale,f=e.timescale,d=l/f,p=(e.isAAC?1024:1152)*d,g=this._PTSNormalize,y=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,E=b?0:8,S=e.samples,T=[],w=this.nextAudioPts;if(n|=S.length&&w&&(r&&Math.abs(t-w/l)<.1||Math.abs(S[0].pts-w-y)<20*p),S.forEach((function(e){e.pts=e.dts=g(e.pts-y,t*l)})),0!==(S=S.filter((function(e){return e.pts>=0}))).length){if(n||(w=r?t*l:S[0].pts),e.isAAC)for(var O=this.config.maxAudioFramesDrift,R=0,A=w;R<S.length;){var P,x=S[R];if((P=x.pts-A)<=-O*p)_.logger.warn("Dropping 1 audio frame @ "+h(A,!0)+" ms due to "+h(P,!0)+" ms overlap."),S.splice(R,1);else if(P>=O*p&&P<D&&A){var C=Math.round(P/p);_.logger.warn("Injecting "+C+" audio frames @ "+h(A,!0)+" ms due to "+h(A,!0)+" ms gap.");for(var L=0;L<C;L++){var I=Math.max(A,0);(o=M.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(_.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),o=x.unit.subarray()),S.splice(R,0,{unit:o,pts:I,dts:I}),A+=p,R++}x.pts=x.dts=A,A+=p,R++}else Math.abs(P),x.pts=x.dts=A,A+=p,R++}for(var N=S.length,F=0;N--;)F+=S[N].unit.byteLength;for(var U=0,j=S.length;U<j;U++){var B=S[U],G=B.unit,H=B.pts;if(void 0!==c)i.duration=Math.round((H-c)/d);else{var V=H-w,z=0;if(n&&e.isAAC&&V){if(V>0&&V<D)z=Math.round((H-w)/p),_.logger.log(h(V,!0)+" ms hole between AAC samples detected,filling it"),z>0&&((o=M.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o=G.subarray()),F+=z*o.length);else if(V<-12){_.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+h(w,!0)+" ms / "+h(H,!0)+" ms / "+h(-V,!0)+" ms"),F-=G.byteLength;continue}H=w}if(u=H,!(F>0))return;F+=E;try{a=new Uint8Array(F)}catch(e){return void this.observer.trigger(v.default.ERROR,{type:m.ErrorTypes.MUX_ERROR,details:m.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}b||(new DataView(a.buffer).setUint32(0,F),a.set(k.types.mdat,4));for(var W=0;W<z;W++)(o=M.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(_.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),o=G.subarray()),a.set(o,E),E+=o.byteLength,i={size:o.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(i)}a.set(G,E);var Y=G.byteLength;E+=Y,i={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(i),c=H}var q=0;if((N=T.length)>=2&&(q=T[N-2].duration,i.duration=q),N){this.nextAudioPts=w=c+d*q,e.samples=T,s=b?new Uint8Array:k.moof(e.sequenceNumber++,u/d,e),e.samples=[];var K=u/l,X=w/l,$={data1:s,data2:a,startPTS:K,endPTS:X,startDTS:K,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(v.default.FRAG_PARSING_DATA,$),$}return null}},t.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,o=i/(e.samplerate?e.samplerate:i),a=this.nextAudioPts,s=(void 0!==a?a:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,c=1024*o,l=Math.ceil((u-s)/c),f=M.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(_.logger.warn("remux empty Audio"),f){for(var h=[],d=0;d<l;d++){var p=s+d*c;h.push({unit:f,pts:p,dts:p})}e.samples=h,this.remuxAudio(e,t,n)}else _.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS,o=this._initDTS;if(n){for(var a=0;a<n;a++)(t=e.samples[a]).pts=(t.pts-i)/r,t.dts=(t.dts-o)/r;this.observer.trigger(v.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var o=0;o<n;o++)(t=e.samples[o]).pts=(t.pts-i)/r;this.observer.trigger(v.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),U=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,n,r,i,o,a,s){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(v.default.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(v.default.FRAG_PARSED)},e}(),j=Object(b.getSelfScope)();try{p=j.performance.now.bind(j.performance)}catch(e){_.logger.debug("Unable to use Performance API on this environment"),p=j.Date.now}var B=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,n,r,i,o,a,s,u,c,l,f){var h=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var d=this.decrypter;null==d&&(d=this.decrypter=new g.default(this.observer,this.config));var m=p();d.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var d=p();h.observer.trigger(v.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:d}}),h.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,o,a,s,u,c,l,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,i,o,a,s,u,c,l,f)},t.pushDecrypted=function(e,t,n,r,i,o,a,s,u,c,l,f){var h=this.demuxer;if(!h||(a||s)&&!this.probe(e)){for(var d=this.observer,p=this.typeSupported,g=this.config,y=[{demux:x,remux:F},{demux:T.default,remux:U},{demux:S,remux:F},{demux:C,remux:F}],_=0,b=y.length;_<b;_++){var E=y[_],w=E.demux.probe;if(w(e)){var O=this.remuxer=new E.remux(d,g,p,this.vendor);h=new E.demux(d,O,g,p),this.probe=w;break}}if(!h)return void d.trigger(v.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var R=this.remuxer;(a||s)&&(h.resetInitSegment(n,r,i,c),R.resetInitSegment()),a&&(h.resetTimeStamp(f),R.resetTimeStamp(f)),"function"==typeof h.setDecryptData&&h.setDecryptData(t),h.append(e,o,u,l)},e}();t.default=B},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=n(/*! ../events */"./src/events.js"),o=n(/*! ../utils/logger */"./src/utils/logger.js"),a=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new r.default(t,a.typeSupported,s,a.vendor),Object(o.enableLogs)(s.debug),n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,(function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)}))}},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,n){"use strict";function r(){var e=Object(o.getSelfScope)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder("utf-8")),i}n.r(t),n.d(t,"utf8ArrayToStr",(function(){return s}));var i,o=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);)i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i;if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),o=(n+=10)+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=r();if(n){var i=n.decode(e);if(t){var o=i.indexOf("\0");return-1!==o?i.substring(0,o):i}return i.replace(/\0/g,"")}for(var a,s,u,c=e.length,l="",f=0;f<c;){if(0===(a=e[f++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:s=e[f++],l+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[f++],u=e[f++],l+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&u)<<0)}}return l},e}(),s=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../utils/logger */"./src/utils/logger.js"),i=n(/*! ../events */"./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,n,r,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,o,a,s,u,c=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!n.length)return null;for(r=s;r<o;)u=(i=e.readUint32(t,r))>1?r+i:o,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:u}):(a=e.findBox({data:t,start:r+8,end:u},n.slice(1))).length&&(c=c.concat(a))),r=u;return c},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;n=[];var s=(a=a[0]).data[0];o=0===s?8:16;var u=e.readUint32(a,o);o+=4,o+=0===s?8:16,o+=2;var c=a.end+0,l=e.readUint16(a,o);o+=2;for(var f=0;f<l;f++){var h=o,d=e.readUint32(a,h);h+=4;var p=2147483647&d;if(1==(2147483648&d)>>>31)return;var v=e.readUint32(a,h);h+=4,n.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:c,end:c+p-1}}),c+=p,o=h+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:l,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var c=e.readUint32(u,a),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var f={soun:"audio",vide:"video"}[e.bin2str(l.data.subarray(l.start+8,l.start+12))];if(f){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var d=e.bin2str(h.data.subarray(h.start+12,h.start+16));r.logger.log("MP4Demuxer:"+f+":"+d+" found")}n[s]={timescale:c,type:f},n[f]={timescale:c,id:s}}}}}})),n},e.getStartDTS=function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var i,o;return i=e.readUint32(r,4),o=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r}))[0]/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),u=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}}))}))}))},t.append=function(t,n,r,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var c=e.getStartDTS(a,t);this.initPTS=u=c-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,o,t)},t.destroy=function(){},e}();t.default=a},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"ErrorTypes",(function(){return r})),n.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(r||(r={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}function s(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object($.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function u(){return window.MediaSource||window.WebKitMediaSource}function c(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function l(e,t,n){var r=e[t],i=e[n],o=i.startPTS;Object($.isFiniteNumber)(o)?n>t?(r.duration=o-r.start,r.duration<0&&Q.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&Q.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=n>t?r.start+r.duration:Math.max(r.start-i.duration,0)}function f(e,t,n,r,i,o){var a=n;if(Object($.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-n);Object($.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,a=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),o=Math.max(o,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=a,t.endPTS=r,t.startDTS=i,t.endDTS=o,t.duration=r-n;var c,f,h,d=t.sn;if(!e||d<e.startSN||d>e.endSN)return 0;for(c=d-e.startSN,(f=e.fragments)[c]=t,h=c;h>0;h--)l(f,h,h-1);for(h=c;h<f.length-1;h++)l(f,h,h+1);return e.PTSKnown=!0,u}function h(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,r=0;if(d(e,t,(function(e,i){r=e.cc-i.cc,Object($.isFiniteNumber)(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,n=i),t.PTSKnown=!0})),t.PTSKnown){if(r){Q.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,o=0;o<i.length;o++)i[o].cc+=r}n?f(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(!(n<0||n>r.length))for(var o=0;o<i.length;o++)i[o].start+=r[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function d(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=r;a<=i;a++){var s=e.fragments[o+a],u=t.fragments[a];if(!s||!u)break;n(s,u,a)}}function p(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}function v(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function m(e,t,n){!function(e,t,n){if(function(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,n,t)){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;Q.logger.log("No frag in previous level to align on")}else Q.logger.log("No fragments to align")}(n.details,t);r&&(Q.logger.log("Adjusting PTS using last level due to CC increase within current level"),v(r.start,t))}}(e,n,t),!n.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,r=(e.fragments[0].programDateTime-n)/1e3+t.fragments[0].start;Object($.isFiniteNumber)(r)&&(Q.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),v(r,e))}}(n,t.details)}function g(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object($.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(b(t,n,i))return i}return null}function y(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!_(n,r,i)?i:Re.search(t,_.bind(null,n,r))}function _(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function b(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function w(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ut,this.regionList=[]}function C(){this.values=Object.create(null)}function M(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);2===a.length&&t(a[0],a[1])}}function L(e,t,n){function r(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}var o=e;if(i(),t.startTime=r(),i(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);e=e.substr(3),i(),t.endTime=r(),i(),function(e,t){var r=new C;M(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",lt,"end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",lt,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",lt,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===ct.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",lt);var o=r.get("position","auto");"auto"===o&&50===ct.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function k(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function I(e,t,n,r){for(var i,o,a,s,u,c=window.VTTCue||TextTrackCue,l=0;l<r.rows.length;l++)if(a=!0,s=0,u="",!(i=r.rows[l]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&a?s++:(u+=i.chars[f].uchar,a=!1);i.cueStartTime=t,t===n&&(n+=1e-4),o=new c(t,n,k(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=l+1:o.line=l>7?l-2:l+1,o.align="left",o.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(o)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}n.r(t);var W={};n.r(W),n.d(W,"newCue",(function(){return I}));var Y,q,K=n("./node_modules/url-toolkit/src/url-toolkit.js"),X=n("./src/errors.ts"),$=n("./src/polyfills/number-isFinite.js"),J=n("./src/events.js"),Q=n("./src/utils/logger.js"),Z={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},ee=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(Z[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){Q.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.OTHER_ERROR,details:X.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(Y||(Y={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(q||(q={}));var te,ne=n("./src/demux/mp4demuxer.js"),re=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,n,i;return t=e,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(K.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&r(t.prototype,n),i&&r(t,i),e}();!function(e){e.AUDIO="audio",e.VIDEO="video"}(te||(te={}));var ie,oe=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[te.AUDIO]=!1,e[te.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,n,r,o=e.prototype;return o.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},o.addElementaryStream=function(e){this._elementaryStreams[e]=!0},o.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},o.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},o.setDecryptDataFromLevelKey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new re(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},t=e,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(K.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&Q.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object($.isFiniteNumber)(this.programDateTime))return null;var e=Object($.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&i(t.prototype,n),r&&i(t,r),e}(),ae=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,n,r;return t=e,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object($.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&o(t.prototype,n),r&&o(t,r),e}(),se=/^(\d+)x(\d+)$/,ue=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,ce=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=se.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(ue.lastIndex=0;null!==(t=ue.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}(),le={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},fe=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,he=/#EXT-X-MEDIA:(.*)/g,de=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),pe=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ve=/\.(mp4|m4s|m4v|m4a)$/i,me=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return K.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){function r(e,t){["video","audio"].forEach((function(n){var r=e.filter((function(e){return function(e,t){var n=le[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}var i,o=[];for(fe.lastIndex=0;null!=(i=fe.exec(t));){var a={},s=a.attrs=new ce(i[1]);a.url=e.resolve(i[2],n);var u=s.decimalResolution("RESOLUTION");u&&(a.width=u.width,a.height=u.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,r([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=e.convertAVC1ToAVCOTI(a.videoCodec)),o.push(a)}return o},e.parseMasterPlaylistMedia=function(t,n,r,i){var o;void 0===i&&(i=[]);var a=[],s=0;for(he.lastIndex=0;null!==(o=he.exec(t));){var u=new ce(o[1]);if(u.TYPE===r){var c={id:s++,groupId:u["GROUP-ID"],name:u.NAME||u.LANGUAGE,type:r,default:"YES"===u.DEFAULT,autoselect:"YES"===u.AUTOSELECT,forced:"YES"===u.FORCED,lang:u.LANGUAGE};if(u.URI&&(c.url=e.resolve(u.URI,n)),i.length){var l=e.findGroup(i,c.groupId);c.audioCodec=l?l.codec:i[0].codec}a.push(c)}}return a},e.parseLevelPlaylist=function(e,t,n,r,i){var o,a,u,c=0,l=0,f=new ae(t),h=0,d=null,p=new oe,v=null;for(de.lastIndex=0;null!==(o=de.exec(e));){var m=o[1];if(m){p.duration=parseFloat(m);var g=(" "+o[2]).slice(1);p.title=g||null,p.tagList.push(g?["INF",m,g]:["INF",m])}else if(o[3]){if(Object($.isFiniteNumber)(p.duration)){var y=c++;p.type=r,p.start=l,u&&(p.levelkey=u),p.sn=y,p.level=n,p.cc=h,p.urlId=i,p.baseurl=t,p.relurl=(" "+o[3]).slice(1),s(p,d),f.fragments.push(p),d=p,l+=p.duration,p=new oe}}else if(o[4]){var _=(" "+o[4]).slice(1);d?p.setByteRange(_,d):p.setByteRange(_)}else if(o[5])p.rawProgramDateTime=(" "+o[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===v&&(v=f.fragments.length);else{if(!(o=o[0].match(pe))){Q.logger.warn("No matches on slow regex match for level playlist!");continue}for(a=1;a<o.length&&void 0===o[a];a++);var b=(" "+o[a+1]).slice(1),E=(" "+o[a+2]).slice(1);switch(o[a]){case"#":p.tagList.push(E?[b,E]:[b]);break;case"PLAYLIST-TYPE":f.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":c=f.startSN=parseInt(b);break;case"TARGETDURATION":f.targetduration=parseFloat(b);break;case"VERSION":f.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":h++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(b);break;case"KEY":var S=new ce(b),T=S.enumeratedString("METHOD"),w=S.URI,O=S.hexadecimalInteger("IV");T&&(u=new re(t,w),w&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)>=0&&(u.method=T,u.key=null,u.iv=O));break;case"START":var R=new ce(b).decimalFloatingPoint("TIME-OFFSET");Object($.isFiniteNumber)(R)&&(f.startTimeOffset=R);break;case"MAP":var A=new ce(b);p.relurl=A.URI,A.BYTERANGE&&p.setByteRange(A.BYTERANGE),p.baseurl=t,p.level=n,p.type=r,p.sn="initSegment",f.initSegment=p,(p=new oe).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:Q.logger.warn("line parsed but not handled: "+o)}}}return(p=d)&&!p.relurl&&(f.fragments.pop(),l-=p.duration),f.totalduration=l,f.averagetargetduration=l/f.fragments.length,f.endSN=c-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=h,!f.initSegment&&f.fragments.length&&f.fragments.every((function(e){return ve.test(e.relurl)}))&&(Q.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new oe).relurl=f.fragments[0].relurl,p.baseurl=t,p.level=n,p.type=r,p.sn="initSegment",f.initSegment=p,f.needSidxRanges=!0),v&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(f.fragments,v),f},e}(),ge=window.performance,ye=function(e){function t(t){var n;return(n=e.call(this,t,J.default.MANIFEST_LOADING,J.default.LEVEL_LOADING,J.default.AUDIO_TRACK_LOADING,J.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,t.canHaveQualityLevels=function(e){return e!==Y.AUDIO_TRACK&&e!==Y.SUBTITLE_TRACK},t.mapContextToLevelType=function(e){switch(e.type){case Y.AUDIO_TRACK:return q.AUDIO;case Y.SUBTITLE_TRACK:return q.SUBTITLE;default:return q.MAIN}},t.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var i=t.prototype;return i.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},i.getInternalLoader=function(e){return this.loaders[e.type]},i.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},i.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},i.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},i.onManifestLoading=function(e){this.load({url:e.url,type:Y.MANIFEST,level:0,id:null,responseType:"text"})},i.onLevelLoading=function(e){this.load({url:e.url,type:Y.LEVEL,level:e.level,id:e.id,responseType:"text"})},i.onAudioTrackLoading=function(e){this.load({url:e.url,type:Y.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},i.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:Y.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},i.load=function(e){var t=this.hls.config;Q.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,r,i,o,a=this.getInternalLoader(e);if(a){var s=a.context;if(s&&s.url===e.url)return Q.logger.trace("playlist request ongoing"),!1;Q.logger.warn("aborting previous loader for type: "+e.type),a.abort()}switch(e.type){case Y.MANIFEST:n=t.manifestLoadingMaxRetry,r=t.manifestLoadingTimeOut,i=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case Y.LEVEL:n=0,o=0,i=0,r=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,r=t.levelLoadingTimeOut,i=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}a=this.createInternalLoader(e);var u={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:o},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return Q.logger.debug("Calling internal loader delegate for URL: "+e.url),a.load(e,u,c),!0},i.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=ge.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},i.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},i.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},i._handleMasterPlaylist=function(e,n,r,i){var o=this.hls,a=e.data,s=t.getResponseUrl(e,r),u=me.parseMasterPlaylist(a,s);if(u.length){var c=u.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),l=me.parseMasterPlaylistMedia(a,s,"AUDIO",c),f=me.parseMasterPlaylistMedia(a,s,"SUBTITLES");if(l.length){var h=!1;l.forEach((function(e){e.url||(h=!0)})),!1===h&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(Q.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}o.trigger(J.default.MANIFEST_LOADED,{levels:u,audioTracks:l,subtitles:f,url:s,stats:n,networkDetails:i})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},i._handleTrackOrLevelPlaylist=function(e,n,r,i){var o=this.hls,a=r.id,s=r.level,u=r.type,c=t.getResponseUrl(e,r),l=Object($.isFiniteNumber)(a)?a:0,f=Object($.isFiniteNumber)(s)?s:l,h=t.mapContextToLevelType(r),d=me.parseLevelPlaylist(e.data,c,f,h,l);if(d.tload=n.tload,u===Y.MANIFEST){var p={url:c,details:d};o.trigger(J.default.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:c,stats:n,networkDetails:i})}if(n.tparsed=ge.now(),d.needSidxRanges){var v=d.initSegment.url;this.load({url:v,isSidxRequest:!0,type:u,level:s,levelDetails:d,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=d,this._handlePlaylistLoaded(e,n,r,i)},i._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=ne.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach((function(e,t){var n=e.info;if(i){var r=i.fragments[t];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},i._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.NETWORK_ERROR,details:X.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},i._handleNetworkError=function(e,t,n,r){var i,o;void 0===n&&(n=!1),void 0===r&&(r=null),Q.logger.info("A network error occured while loading a "+e.type+"-type playlist");var a=this.getInternalLoader(e);switch(e.type){case Y.MANIFEST:i=n?X.ErrorDetails.MANIFEST_LOAD_TIMEOUT:X.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case Y.LEVEL:i=n?X.ErrorDetails.LEVEL_LOAD_TIMEOUT:X.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case Y.AUDIO_TRACK:i=n?X.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:X.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}a&&(a.abort(),this.resetInternalLoader(e.type));var s={type:X.ErrorTypes.NETWORK_ERROR,details:i,fatal:o,url:e.url,loader:a,context:e,networkDetails:t};r&&(s.response=r),this.hls.trigger(J.default.ERROR,s)},i._handlePlaylistLoaded=function(e,n,r,i){var o=r.type,a=r.level,s=r.id,u=r.levelDetails;if(u&&u.targetduration)if(t.canHaveQualityLevels(r.type))this.hls.trigger(J.default.LEVEL_LOADED,{details:u,level:a||0,id:s||0,stats:n,networkDetails:i});else switch(o){case Y.AUDIO_TRACK:this.hls.trigger(J.default.AUDIO_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:i});break;case Y.SUBTITLE_TRACK:this.hls.trigger(J.default.SUBTITLE_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},t}(ee),_e=function(e){function t(t){var n;return(n=e.call(this,t,J.default.FRAG_LOADING)||this).loaders={},n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){var t=this.loaders;for(var n in t){var r=t[n];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,o=i.fLoader,a=i.loader;t.loaded=0;var s,u,c,l=r[n];l&&(Q.logger.warn("abort previous fragment loader for type: "+n),l.abort()),l=r[n]=t.loader=i.fLoader?new o(i):new a(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,h=t.byteRangeEndOffset;Object($.isFiniteNumber)(f)&&Object($.isFiniteNumber)(h)&&(s.rangeStart=f,s.rangeEnd=h),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(s,u,c)},i.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(J.default.FRAG_LOADED,{payload:i,frag:o,stats:t,networkDetails:r})},i.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.NETWORK_ERROR,details:X.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},i.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.NETWORK_ERROR,details:X.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},i.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(J.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},t}(ee),be=function(e){function t(t){var n;return(n=e.call(this,t,J.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},i.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n];if(t.decryptdata){var i=t.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;if(r&&(Q.logger.warn("abort previous key loader for type:"+n),r.abort()),!i)return void Q.logger.warn("key uri is falsy");t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=i,this.decryptkey=null;var a={url:i,frag:t,responseType:"arraybuffer"},s={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(a,s,u)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(J.default.KEY_LOADED,{frag:t}))}else Q.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(e,t,n){var r=n.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(J.default.KEY_LOADED,{frag:r})):Q.logger.error("after key load, decryptdata unset")},i.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.NETWORK_ERROR,details:X.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},i.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.NETWORK_ERROR,details:X.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(ee),Ee="NOT_LOADED",Se="APPENDING",Te="PARTIAL",we="OK",Oe=function(e){function t(t){var n;return(n=e.call(this,t,J.default.BUFFER_APPENDED,J.default.FRAG_BUFFERED,J.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,ee.prototype.destroy.call(this),e.prototype.destroy.call(this)},i.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},i.detectEvictedFragments=function(e,t){var n,r,i=this;Object.keys(this.fragments).forEach((function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){n=s.time;for(var u=0;u<n.length;u++)if(r=n[u],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(a.body);break}}}}))},i.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},i.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},i.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},i.getPartialFragment=function(e){var t,n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach((function(s){var u=i.fragments[s];i.isPartial(u)&&(n=u.body.startPTS-i.bufferPadding,r=u.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(o=u.body,a=t)))})),o},i.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=Ee;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?Te:we:Se),r},i.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},i.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},i.onFragLoaded=function(e){var t=e.frag;Object($.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},i.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},i.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},i.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},i.removeAllFragments=function(){this.fragments=Object.create(null)},t}(ee),Re={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){var a=t(o=e[i=(n+r)/2|0]);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}},Ae=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r,i=e.buffered,o=[];for(r=0;r<i.length;r++)o.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(o,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(n)for(var i=0;i<e.length;i++){var o=r.length;if(o){var a=r[o-1].end;e[i].start-a<n?e[i].end>a&&(r[o-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var s,u=0,c=t,l=t,f=0;f<r.length;f++){var h=r[f].start,d=r[f].end;if(t+n>=h&&t<d)c=h,u=(l=d)-t;else if(t+n<h){s=h;break}}return{len:u,start:c,end:l,nextStart:s}},e}(),Pe=n("./node_modules/eventemitter3/index.js"),xe=n("./node_modules/webworkify-webpack/index.js"),Ce=n("./src/demux/demuxer-inline.js"),Me=n("./src/utils/get-self-scope.js"),Le=function(e){function t(){return e.apply(this,arguments)||this}var n,r;return r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,t.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))},t}(Pe.EventEmitter),ke=Object(Me.getSelfScope)(),Ie=u()||{isTypeSupported:function(){return!1}},De=function(){function e(e,t){var n=this;this.hls=e,this.id=t;var r=this.observer=new Le,i=e.config,o=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};r.on(J.default.FRAG_DECRYPTED,o),r.on(J.default.FRAG_PARSING_INIT_SEGMENT,o),r.on(J.default.FRAG_PARSING_DATA,o),r.on(J.default.FRAG_PARSED,o),r.on(J.default.ERROR,o),r.on(J.default.FRAG_PARSING_METADATA,o),r.on(J.default.FRAG_PARSING_USERDATA,o),r.on(J.default.INIT_PTS_FOUND,o);var a={mp4:Ie.isTypeSupported("video/mp4"),mpeg:Ie.isTypeSupported("audio/mpeg"),mp3:Ie.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var u;Q.logger.log("demuxing in webworker");try{u=this.w=xe(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(t){e.trigger(J.default.ERROR,{type:X.ErrorTypes.OTHER_ERROR,details:X.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:a,vendor:s,id:t,config:JSON.stringify(i)})}catch(e){Q.logger.warn("Error in worker:",e),Q.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&ke.URL.revokeObjectURL(u.objectURL),this.demuxer=new Ce.default(r,a,i,s),this.w=void 0}}else this.demuxer=new Ce.default(r,a,i,s)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function(e,t,n,r,i,o,a,s){var u=this.w,c=Object($.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,l=i.decryptdata,f=this.frag,h=!(f&&i.cc===f.cc),d=!(f&&i.level===f.level),p=f&&i.sn===f.sn+1,v=!d&&p;if(h&&Q.logger.log(this.id+":discontinuity detected"),d&&Q.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:l,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:c,discontinuity:h,trackSwitch:d,contiguous:v,duration:o,accurateTimeOffset:a,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,l,t,n,r,c,h,d,v,o,a,s)}},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":ke.URL.revokeObjectURL(this.w.objectURL);break;case J.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}(),Ne={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}},Fe=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,n=this.media,r=this.stalled,i=n.currentTime,o=n.seeking,a=this.seeking&&!o,s=!this.seeking&&o;if(this.seeking=o,i===e){if((s||a)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var u=Ae.bufferInfo(n,i,0),c=u.len>0,l=u.nextStart||0;if(c||l){if(o){if(u.len>2||!l||l-i>2)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(l,u.start||0)-i;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var h=self.performance.now();if(null!==r){var d=h-r;!o&&d>=250&&this._reportStall(u.len);var p=Ae.bufferInfo(n,i,t.maxBufferHole);this._tryFixBufferStall(p,d)}else this.stalled=h}}}else if(this.moved=!0,null!==r){if(this.stallReported){var v=self.performance.now()-r;Q.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,o=r.getPartialFragment(i);o&&this._trySkipBufferHole(o)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(Q.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,Q.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,r=this.media,i=r.currentTime,o=0,a=0;a<r.buffered.length;a++){var s=r.buffered.start(a);if(i+t.maxBufferHole>=o&&i<s){var u=Math.max(s+.05,r.currentTime+.1);return Q.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+u),this.moved=!0,this.stalled=null,r.currentTime=u,e&&n.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+u,frag:e}),u}o=r.buffered.end(a)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var o=r+i*e.nudgeOffset;Q.logger.warn("Nudging 'currentTime' from "+r+" to "+o),n.currentTime=o,t.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else Q.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}(),Ue=function(e){function t(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(n=e.call.apply(e,[this,t].concat(i))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},t}(ee),je={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Be=function(e){function t(){return e.apply(this,arguments)||this}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=je.STOPPED},i._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===Te||i===we}return!1},i.onMediaSeeking=function(){var e=this.config,t=this.media,n=this.mediaBuffer,r=this.state,i=t?t.currentTime:null,o=Ae.bufferInfo(n||t,i,this.config.maxBufferHole);if(Object($.isFiniteNumber)(i)&&Q.logger.log("media seeking to "+i.toFixed(3)),r===je.FRAG_LOADING){var a=this.fragCurrent;if(0===o.len&&a){var s=e.maxFragLookUpTolerance,u=a.start-s,c=a.start+a.duration+s;i<u||i>c?(a.loader&&(Q.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=je.IDLE):Q.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===je.ENDED&&(0===o.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=je.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=je.STOPPED,this.fragmentTracker=null},i.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},t}(Ue),Ge=function(e){function t(t,n){var r;return(r=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHING,J.default.MANIFEST_LOADING,J.default.MANIFEST_PARSED,J.default.LEVEL_LOADED,J.default.KEY_LOADED,J.default.FRAG_LOADED,J.default.FRAG_LOAD_EMERGENCY_ABORTED,J.default.FRAG_PARSING_INIT_SEGMENT,J.default.FRAG_PARSING_DATA,J.default.FRAG_PARSED,J.default.ERROR,J.default.AUDIO_TRACK_SWITCHING,J.default.AUDIO_TRACK_SWITCHED,J.default.BUFFER_CREATED,J.default.BUFFER_APPENDED,J.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=je.STOPPED,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(Q.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=je.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=je.STOPPED},s.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},s.doTick=function(){switch(this.state){case je.BUFFER_FLUSHING:this.fragLoadError=0;break;case je.IDLE:this._doTickIdle();break;case je.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=je.IDLE);break;case je.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(Q.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=je.IDLE);break;case je.ERROR:case je.STOPPED:case je.FRAG_LOADING:case je.PARSING:case je.PARSED:case je.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},s._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var a,s=o.bitrate;a=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,a=Math.min(a,t.maxMaxBufferLength);var u=Ae.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),c=u.len;if(!(c>=a)){Q.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var l=o.details;if(!l||l.live&&this.levelLastLoaded!==i)this.state=je.WAITING_LEVEL;else{if(this._streamEnded(u,l)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(J.default.BUFFER_EOS,f),void(this.state=je.ENDED)}this._fetchPayloadOrEos(r,u,l)}}}}},s._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s,u=o[0].start,c=o[a-1].start+o[a-1].duration,l=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var f=this.config.initialLiveManifestSize;if(a<f)return void Q.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+f);if(null===(s=this._ensureFragmentAtLivePoint(n,l,u,c,r,o,a)))return}else l<u&&(s=o[0]);s||(s=this._findFragment(u,r,a,o,l,c,n)),s&&(s.encrypted?(Q.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(Q.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+l.toFixed(3)),this._loadFragment(s)))}},s._ensureFragmentAtLivePoint=function(e,t,n,r,i,o,a){var s,u=this.hls.config,c=this.media,l=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-u.maxFragLookUpTolerance,r-l)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);Q.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&!c.paused&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)Q.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=g(o,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var h=i.sn+1;if(h>=e.startSN&&h<=e.endSN){var d=o[h-e.startSN];i.cc===d.cc&&(s=d,Q.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=Re.search(o,(function(e){return i.cc-e.cc})))&&Q.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=o[Math.min(a-1,Math.round(a/2))],Q.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},s._findFragment=function(e,t,n,r,i,o,a){var s,u=this.hls.config;if(s=i<o?y(t,r,i,i>o-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):r[n-1]){var c=s.sn-a.startSN,l=t&&s.level===t.level,f=r[c-1],h=r[c+1];if(t&&s.sn===t.sn)if(l&&!s.backtracked)if(s.sn<a.endSN){var d=t.deltaPTS;d&&d>u.maxBufferHole&&t.dropped&&c?(s=f,Q.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=h,Q.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(h&&h.backtracked?(Q.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(Q.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:c&&(s=null)))}return s},s._loadKey=function(e){this.state=je.KEY_LOADING,this.hls.trigger(J.default.KEY_LOADING,{frag:e})},s._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object($.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===Ee||t===Te?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(J.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new De(this.hls,"main")),this.state=je.FRAG_LOADING):t===Se&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},s.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,q.MAIN)},s.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},s._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),Ae.isBuffered(n,t)?e=this.getBufferedFrag(t):Ae.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(J.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(J.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},s.immediateLevelSwitch=function(){if(Q.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},s.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,Ae.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},s.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n,r;if((n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},s.flushMainBuffer=function(e,t){this.state=je.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(J.default.BUFFER_FLUSHING,n)},s.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new Fe(n,t,this.fragmentTracker,this.hls)},s.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(Q.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},s.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object($.isFiniteNumber)(t)&&Q.logger.log("media seeked to "+t.toFixed(3)),this.tick()},s.onManifestLoading=function(){Q.logger.log("trigger BUFFER_RESET"),this.hls.trigger(J.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},s.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&Q.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},s.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],o=t.totalduration,a=0;if(Q.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live){var s=i.details;s&&t.fragments.length>0?(h(s,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),t.PTSKnown&&Object($.isFiniteNumber)(a)?Q.logger.log("live playlist sliding:"+a.toFixed(3)):(Q.logger.log("live playlist - outdated PTS, unknown sliding"),m(this.fragPrevious,r,t))):(Q.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,m(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(J.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;Object($.isFiniteNumber)(u)?(u<0&&(Q.logger.log("negative start time offset "+u+", count from end of last fragment"),u=a+o+u),Q.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):t.live?(this.startPosition=this.computeLivePosition(a,t),Q.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===je.WAITING_LEVEL&&(this.state=je.IDLE),this.tick()},s.onKeyLoaded=function(){this.state===je.KEY_LOADING&&(this.state=je.IDLE,this.tick())},s.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,o=e.frag;if(this.state===je.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,s=r[t.level],u=s.details;if(this.bitrateTest=!1,this.stats=a,Q.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),o.bitrateTest&&n.nextLoadLevel)this.state=je.IDLE,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),n.trigger(J.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=je.IDLE,a.tparsed=a.tbuffered=window.performance.now(),u.initSegment.data=e.payload,n.trigger(J.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{Q.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=je.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var c=!(i&&i.seeking)&&(u.PTSKnown||!u.live),l=u.initSegment?u.initSegment.data:[],f=this._getAudioCodec(s);(this.demuxer=this.demuxer||new De(this.hls,"main")).push(e.payload,l,f,s.videoCodec,t,u.totalduration,c)}}this.fragLoadError=0},s.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===je.PARSING){var r,i,o=e.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(Q.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",Q.logger.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=e.id}for(r in(i=o.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(J.default.BUFFER_CODECS,o),o){i=o[r],Q.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(J.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}},s.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===je.PARSING){var i=this.levels[this.level],o=n;if(Object($.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&o.addElementaryStream(te.AUDIO),!0===e.hasVideo&&o.addElementaryStream(te.VIDEO),Q.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)Q.logger.warn("Already backtracked on this fragment, appending with the gap",o.sn);else{var a=i.details;if(!a||o.sn!==a.startSN)return Q.logger.warn("missing video frame(s), backtracking fragment",o.sn),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=je.IDLE,this.fragPrevious=o,void this.tick();Q.logger.warn("missing video frame(s) on first frag, appending with gap",o.sn)}else o.backtracked=!1;var s=f(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),u=this.hls;u.trigger(J.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&t.state===je.PARSING&&(t.appended=!0,t.pendingBuffering=!0,u.trigger(J.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},s.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===je.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=je.PARSED,this._checkAppendedParsed())},s.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){Q.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(Q.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=je.IDLE}var i=this.hls;i.trigger(J.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(J.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},s.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(Q.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},s.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var o in r){var a=r[o];"main"===a.id?(n=o,t=a,"video"===o&&(this.videoBuffer=r[o].buffer)):i=!0}i&&t?(Q.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},s.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==je.PARSING&&t!==je.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},s._checkAppendedParsed=function(){if(!(this.state!==je.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;Q.logger.log("main buffered : "+Ne.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(J.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=je.IDLE}this.tick()}},s.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&Ae.isBuffered(this.media,this.media.currentTime)&&Ae.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case X.ErrorDetails.FRAG_LOAD_ERROR:case X.ErrorDetails.FRAG_LOAD_TIMEOUT:case X.ErrorDetails.KEY_LOAD_ERROR:case X.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);Q.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=je.FRAG_LOADING_WAITING_RETRY}else Q.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=je.ERROR;break;case X.ErrorDetails.LEVEL_LOAD_ERROR:case X.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==je.ERROR&&(e.fatal?(this.state=je.ERROR,Q.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==je.WAITING_LEVEL||(this.state=je.IDLE));break;case X.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==je.PARSING&&this.state!==je.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=je.IDLE):(Q.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},s._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,Q.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},s._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},s.onFragLoadEmergencyAborted=function(){this.state=je.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},s.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(te.VIDEO,e.buffered),this.state=je.IDLE,this.fragPrevious=null},s.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},s._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&n>=0&&(Q.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},s._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(Q.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},i=t,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,Q.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(J.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&E(i.prototype,o),a&&E(i,a),t}(Be),He=(window.performance,function(e){function t(t){var n;return(n=e.call(this,t,J.default.MANIFEST_LOADED,J.default.LEVEL_LOADED,J.default.AUDIO_TRACK_SWITCHED,J.default.FRAG_LOADED,J.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,ie=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,s,u=t.prototype;return u.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},u.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},u.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},u.stopLoad=function(){this.canload=!1},u.onManifestLoaded=function(e){var t,n=[],r=[],i={},o=null,s=!1,u=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,s=s||!!e.videoCodec,u=u||!!e.audioCodec,ie&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(o=i[e.bitrate])?o.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(u=!0,c(o||e,"audio",t.AUDIO)),t.SUBTITLES&&c(o||e,"text",t.SUBTITLES))})),s&&u&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||a(t,"audio"))&&(!n||a(n,"video"))})),e.audioTracks&&(r=e.audioTracks.filter((function(e){return!e.audioCodec||a(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var l=0;l<n.length;l++)if(n[l].bitrate===t){this._firstLevel=l,Q.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(J.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:s,altAudio:r.some((function(e){return!!e.url}))})}else this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},u.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){Q.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(J.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||o.live){var a=i.urlId;n.trigger(J.default.LEVEL_LOADING,{url:i.url[a],level:e,id:a})}}else n.trigger(J.default.ERROR,{type:X.ErrorTypes.OTHER_ERROR,details:X.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},u.onError=function(e){if(e.fatal)e.type===X.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case X.ErrorDetails.FRAG_LOAD_ERROR:case X.ErrorDetails.FRAG_LOAD_TIMEOUT:case X.ErrorDetails.KEY_LOAD_ERROR:case X.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case X.ErrorDetails.LEVEL_LOAD_ERROR:case X.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case X.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},u.recoverLevel=function(e,t,n,r){var i,o,a,s=this,u=this.hls.config,c=e.details,l=this._levels[t];if(l.loadError++,l.fragmentError=r,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return Q.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),o),e.levelRetry=!0,this.levelRetryCount++,Q.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=l.url.length)>1&&l.loadError<i?(l.urlId=(l.urlId+1)%i,l.details=void 0,Q.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+l.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,Q.logger.warn("level controller, "+c+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):r&&(Q.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},u.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},u.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var o=p(i.details,r,e.stats.trequest);Q.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),o)}else this.clearTimer()}},u.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},u.loadLevel=function(){if(Q.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];Q.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(J.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},i=t,(o=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&S(i.prototype,o),s&&S(i,s),t}(ee)),Ve=n("./src/demux/id3.js"),ze=function(e){function t(t){var n;return(n=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHING,J.default.FRAG_PARSING_METADATA,J.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){ee.prototype.destroy.call(this)},i.onMediaAttached=function(e){this.media=e.media,this.media},i.onMediaDetaching=function(){w(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return T(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=Ve.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;a===s?s+=1e-4:a>s&&(Q.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=a+.25);for(var u=0;u<o.length;u++){var c=o[u];if(!Ve.default.isTimeStampFrame(c)){var l=new r(a,s,"");l.value=c,this.id3Track.addCue(l)}}}}},i.onLiveBackBufferReached=function(e){var t=e.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var r=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,r=e.length-1;n<=r;){var i=Math.floor((r+n)/2);if(t<e[i].endTime)r=i-1;else{if(!(t>e[i].endTime))return e[i];n=i+1}}return e[n].endTime-t<t-e[r].endTime?e[n]:e[r]}(n.cues,t);if(r)for(;n.cues[0]!==r;)n.removeCue(n.cues[0])}},t}(ee),We=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Ye=function(){function e(e,t,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new We(t),this.fast_=new We(n)}var t=e.prototype;return t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}(),qe=window.performance,Ke=function(e){function t(t){var n;return(n=e.call(this,t,J.default.FRAG_LOADING,J.default.FRAG_LOADED,J.default.FRAG_BUFFERED,J.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.destroy=function(){this.clearTimer(),ee.prototype.destroy.call(this)},s.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,o=i.config,a=t.level;i.levels[a].details.live?(n=o.abrEwmaFastLive,r=o.abrEwmaSlowLive):(n=o.abrEwmaFastVoD,r=o.abrEwmaSlowVoD),this._bwEstimator=new Ye(i,r,n,o.abrEwmaDefaultEstimate)}},s._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return Q.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=r.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var a=qe.now()-o.trequest,s=Math.abs(t.playbackRate);if(a>500*n.duration/s){var u=e.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),l=u[n.level],f=l.realBitrate?Math.max(l.realBitrate,l.bitrate):l.bitrate,h=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*f/8)),d=t.currentTime,p=(h-o.loaded)/c,v=(Ae.bufferInfo(t,d,e.config.maxBufferHole).end-d)/s;if(v<2*n.duration/s&&p>v){var m;for(m=n.level-1;m>i;m--){var g=u[m].realBitrate?Math.max(u[m].realBitrate,u[m].bitrate):u[m].bitrate;if(n.duration*g/(6.4*c)<v)break}void 0<p&&(Q.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+p.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(a,o.loaded),r.abort(),this.clearTimer(),e.trigger(J.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}}},s.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object($.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}},s.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object($.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;Q.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},s.onError=function(e){switch(e.details){case X.ErrorDetails.FRAG_LOAD_ERROR:case X.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},s.clearTimer=function(){clearInterval(this.timer),this.timer=null},s._findBestLevel=function(e,t,n,r,i,o,a,s,u){for(var c=i;c>=r;c--){var l=u[c];if(l){var f=l.details,h=f?f.totalduration/f.fragments.length:t,d=!!f&&f.live,p=void 0;p=c<=e?a*n:s*n;var v=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,m=v*h/p;if(Q.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+v+"/"+h+"/"+o+"/"+m),p>v&&(!m||d&&!this.bitrateTestDelay||m<o))return c}}return-1},i=t,(o=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,l=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,f=(Ae.bufferInfo(o,u,r.maxBufferHole).end-u)/c,h=this._findBestLevel(a,s,l,i,t,f,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(h>=0)return h;Q.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var d=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;m&&(d=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,Q.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*d)+" ms"),p=v=1)}return h=this._findBestLevel(a,s,l,i,t,f+d,p,v,n),Math.max(h,0)}}])&&O(i.prototype,o),a&&O(i,a),t}(ee),Xe=u(),$e=function(e){function t(t){var n;return(n=e.call(this,t,J.default.MEDIA_ATTACHING,J.default.MEDIA_DETACHING,J.default.MANIFEST_PARSED,J.default.BUFFER_RESET,J.default.BUFFER_APPENDING,J.default.BUFFER_CODECS,J.default.BUFFER_EOS,J.default.BUFFER_FLUSHING,J.default.LEVEL_PTS_UPDATED,J.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){Q.logger.log("media source opened"),n.hls.trigger(J.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){Q.logger.log("media source closed")},n._onMediaSourceEnded=function(){Q.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;Q.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,r=n.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),i={},o=n.sourceBuffer;for(var a in o){var s=o[a];if(!s)throw Error("handling source buffer update end error: source buffer for "+a+" uninitilized and unable to update buffered TimeRanges.");i[a]=s.buffered}n.hls.trigger(J.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){Q.logger.error("sourceBuffer error:",e),n.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=t.config,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){ee.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){Q.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(Q.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},i.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,Q.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Xe){var n=this.mediaSource=new Xe;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},i.onMediaDetaching=function(){Q.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){Q.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):Q.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(J.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in e)if(!t[r]){var i=e[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var o=i.levelCodec||i.codec,a=i.container+";codecs="+o;Q.logger.log("creating sourceBuffer("+a+")");try{var s=t[r]=n.addSourceBuffer(a);s.addEventListener("updateend",this._onSBUpdateEnd),s.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:s,codec:o,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(e){Q.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(J.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},i.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,Q.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}Q.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){Q.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;o>=0;o--){var a=r[o],s=n[a];if(s){var u=s.buffered;u.length>0&&i>u.start(0)&&this.removeBufferRange(a,s,0,i)&&this.hls.trigger(J.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else Q.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(Q.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object($.isFiniteNumber)(e))&&(Q.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(t+=i.buffered.length)}}catch(e){Q.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(J.default.BUFFER_FLUSHED)}},i.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void Q.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var o=r[i.type];if(!o)return void this._onSBUpdateEnd();if(o.updating)return void n.unshift(i);o.ended=!1,this.parent=i.parent,o.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){Q.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);var a={type:X.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],a.details=X.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=X.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(Q.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),t.trigger(J.default.ERROR,a)}}}},i.flushBuffer=function(e,t,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),Q.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return Q.logger.warn("abort flushing too many retries"),!0;var o=r[n];if(o){if(o.ended=!1,o.updating)return Q.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,o,e,t))return this.flushBufferCounter++,!1}return Q.logger.log("buffer flushed"),!0},i.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),s=Math.max(o,n),u=Math.min(a,r);if(Math.min(u,a)-s>.5){var c="null";return this.media&&(c=this.media.currentTime.toString()),Q.logger.log("sb remove "+e+" ["+s+","+u+"], of ["+o+","+a+"], pos:"+c),t.remove(s,u),!0}}}catch(e){Q.logger.warn("removeBufferRange failed",e)}return!1},t}(ee),Je=function(e){function t(t){var n;return(n=e.call(this,t,J.default.FPS_DROP_LEVEL_CAPPING,J.default.MEDIA_ATTACHING,J.default.MANIFEST_PARSED,J.default.BUFFER_CODECS,J.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,i){return t.isLevelAllowed(i,n.restrictedLevels)&&i<=e}));return t.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},t.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[a+1])||r.width!==i.width||r.height!==i.height)){o=a;break}}return o},i=t,a=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(o=[{key:"mediaWidth",get:function(){var e,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}])&&R(i.prototype,o),a&&R(i,a),t}(ee),Qe=window.performance,Ze=function(e){function t(t){return e.call(this,t,J.default.MEDIA_ATTACHING)||this}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},i.checkFPS=function(e,t,n){var r=Qe.now();if(t){if(this.lastTime){var i=r-this.lastTime,o=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/i,u=this.hls;if(u.trigger(J.default.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),s>0&&o>u.config.fpsDroppedMonitoringThreshold*a){var c=u.currentLevel;Q.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(J.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},i.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(ee),et=window,tt=et.performance,nt=et.XMLHttpRequest,rt=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:tt.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new nt;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(tt.now(),r.trequest)),4===n){var a=t.status;if(a>=200&&a<300){var s,u;r.tload=Math.max(r.tfirst,tt.now()),u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,r,i,t)}else r.retry>=o.maxRetry||a>=400&&a<499?(Q.logger.error(a+" while loading "+i.url),this.callbacks.onError({code:a,text:t.statusText},i,t)):(Q.logger.warn(a+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.loadtimeout=function(){Q.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}(),it=function(e){function t(t){var n;return(n=e.call(this,t,J.default.MANIFEST_LOADING,J.default.MANIFEST_PARSED,J.default.AUDIO_TRACK_LOADED,J.default.AUDIO_TRACK_SWITCHED,J.default.LEVEL_LOADED,J.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},s.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(J.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},s.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)Q.logger.warn("Invalid audio track id:",e.id);else{if(Q.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},s.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},s.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},s.onError=function(e){e.type===X.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===X.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(Q.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},s._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)Q.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)Q.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];Q.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(J.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},s.doTick=function(){this._updateTrack(this._trackId)},s._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:Q.logger.warn("No default audio tracks defined")}var o=!1,a=function(){t.forEach((function(t){o||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),o=!0)}))};a(),o||(r=null,a()),o||(Q.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:X.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},s._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live||!n)},s._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;Q.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(J.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},s._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,Q.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},s._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;Q.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var o=e,a=0;a<this.tracks.length;a++)if(!this.trackIdBlacklist[a]&&this.tracks[a].name===n){o=a;break}o!==e?(Q.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):Q.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},i=t,(o=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&A(i.prototype,o),a&&A(i,a),t}(Ue),ot=window.performance,at=function(e){function t(t,n){var r;return(r=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHING,J.default.AUDIO_TRACKS_UPDATED,J.default.AUDIO_TRACK_SWITCHING,J.default.AUDIO_TRACK_LOADED,J.default.KEY_LOADED,J.default.FRAG_LOADED,J.default.FRAG_PARSING_INIT_SEGMENT,J.default.FRAG_PARSING_DATA,J.default.FRAG_PARSED,J.default.ERROR,J.default.BUFFER_RESET,J.default.BUFFER_CREATED,J.default.BUFFER_APPENDED,J.default.BUFFER_FLUSHED,J.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=je.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,Q.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===je.WAITING_INIT_PTS&&this.tick())},s.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(Q.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=je.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=je.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=je.STOPPED},s.doTick=function(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case je.ERROR:case je.PAUSED:case je.BUFFER_FLUSHING:break;case je.STARTING:this.state=je.WAITING_TRACK,this.loadedmetadata=!1;break;case je.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,u=Ae.bufferInfo(a,e,i.maxBufferHole),c=Ae.bufferInfo(s,e,i.maxBufferHole),l=u.len,f=u.end,h=this.fragPrevious,d=Math.min(i.maxBufferLength,i.maxMaxBufferLength),p=Math.max(d,c.len),v=this.audioSwitch,m=this.trackId;if((l<p||v)&&m<o.length){if(void 0===(n=o[m].details)){this.state=je.WAITING_TRACK;break}if(!v&&this._streamEnded(u,n))return this.hls.trigger(J.default.BUFFER_EOS,{type:"audio"}),void(this.state=je.ENDED);var g,y=n.fragments,_=y.length,b=y[0].start,E=y[_-1].start+y[_-1].duration;if(v)if(n.live&&!n.PTSKnown)Q.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),f=0;else if(f=e,n.PTSKnown&&e<b){if(!(u.end>b||u.nextStart))return;Q.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)g=n.initSegment;else if(f<=b){if(g=y[0],null!==this.videoTrackCC&&g.cc!==this.videoTrackCC&&(g=function(e,t){return Re.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(y,this.videoTrackCC)),n.live&&g.loadIdx&&g.loadIdx===this.fragLoadIdx){var S=u.nextStart?u.nextStart:b;return Q.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var T,w=i.maxFragLookUpTolerance,O=h?y[h.sn-y[0].sn+1]:void 0,R=function(e){var t=Math.min(w,e.duration);return e.start+e.duration-t<=f?1:e.start-t>f&&e.start?-1:0};f<E?(f>E-w&&(w=0),T=O&&!R(O)?O:Re.search(y,R)):T=y[_-1],T&&(g=T,b=T.start,h&&g.level===h.level&&g.sn===h.sn&&(g.sn<n.endSN?(g=y[g.sn+1-n.startSN],Q.logger.log("SN just loaded, load next one: "+g.sn)):g=null))}g&&(g.encrypted?(Q.logger.log("Loading key for "+g.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=je.KEY_LOADING,r.trigger(J.default.KEY_LOADING,{frag:g})):(Q.logger.log("Loading "+g.sn+", cc: "+g.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", currentTime:"+e+",bufferEnd:"+f.toFixed(3)),this.fragCurrent=g,(v||this.fragmentTracker.getState(g)===Ee)&&("initSegment"!==g.sn&&(this.startFragRequested=!0),Object($.isFiniteNumber)(g.sn)&&(this.nextLoadPosition=g.start+g.duration),r.trigger(J.default.FRAG_LOADING,{frag:g}),this.state=je.FRAG_LOADING)))}break;case je.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=je.IDLE);break;case je.FRAG_LOADING_WAITING_RETRY:var A=ot.now(),P=this.retryDate,x=(a=this.media)&&a.seeking;(!P||A>=P||x)&&(Q.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=je.IDLE);break;case je.WAITING_INIT_PTS:var C=this.videoTrackCC;if(void 0===this.initPTS[C])break;var M=this.waitingFragment;if(M){var L=M.frag.cc;C!==L?(t=this.tracks[this.trackId]).details&&t.details.live&&(Q.logger.warn("Waiting fragment CC ("+L+") does not match video track CC ("+C+")"),this.waitingFragment=null,this.state=je.IDLE):(this.state=je.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=je.IDLE;break;case je.STOPPED:case je.FRAG_LOADING:case je.PARSING:case je.PARSED:case je.ENDED:}},s.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},s.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(Q.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},s.onAudioTracksUpdated=function(e){Q.logger.log("audio tracks updated"),this.tracks=e.audioTracks},s.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=je.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=je.IDLE),this.tick()},s.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,o=0;if(Q.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var a=r.details;a&&t.fragments.length>0?(h(a,t),o=t.fragments[0].start,t.PTSKnown?Q.logger.log("live audio playlist sliding:"+o.toFixed(3)):Q.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,Q.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object($.isFiniteNumber)(s)?(Q.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(o,t),Q.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===je.WAITING_TRACK&&(this.state=je.IDLE),this.tick()},s.onKeyLoaded=function(){this.state===je.KEY_LOADING&&(this.state=je.IDLE,this.tick())},s.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===je.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=t.level,s=t.sn,u=t.cc,c=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",l=this.stats=e.stats;if("initSegment"===s)this.state=je.IDLE,l.tparsed=l.tbuffered=ot.now(),i.initSegment.data=e.payload,this.hls.trigger(J.default.FRAG_BUFFERED,{stats:l,frag:t,id:"audio"}),this.tick();else{this.state=je.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new De(this.hls,"audio"));var f=this.initPTS[u],h=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==f?(this.pendingBuffering=!0,Q.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.demuxer.push(e.payload,h,c,null,t,o,!1,f)):(Q.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=je.WAITING_INIT_PTS)}}this.fragLoadError=0},s.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===je.PARSING){var r,i=e.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(J.default.BUFFER_CODECS,i),Q.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(J.default.BUFFER_APPENDING,a))}this.tick()}}},s.onFragParsingData=function(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===je.PARSING){var i=this.trackId,o=this.tracks[i],a=this.hls;Object($.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(te.AUDIO),Q.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),f(o.details,n,e.startPTS,e.endPTS);var s=this.audioSwitch,u=this.media,c=!1;if(s)if(u&&u.readyState){var l=u.currentTime;Q.logger.log("switching audio track : currentTime:"+l),l>=e.startPTS&&(Q.logger.log("switching audio track : flushing all audio"),this.state=je.BUFFER_FLUSHING,a.trigger(J.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,a.trigger(J.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(J.default.AUDIO_TRACK_SWITCHED,{id:i});var h=this.pendingData;if(!h)return Q.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void a.trigger(J.default.ERROR,{type:X.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&h.push({type:e.type,data:t,parent:"audio",content:"data"})})),!c&&h.length&&(h.forEach((function(e){t.state===je.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(J.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},s.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===je.PARSING&&(this.stats.tparsed=ot.now(),this.state=je.PARSED,this._checkAppendedParsed())},s.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},s.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},s.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==je.PARSING&&t!==je.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},s._checkAppendedParsed=function(){if(!(this.state!==je.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=ot.now(),n.trigger(J.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&Q.logger.log("audio buffered : "+Ne.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(J.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=je.IDLE}this.tick()}},s.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case X.ErrorDetails.FRAG_LOAD_ERROR:case X.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var o=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);Q.logger.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=ot.now()+o,this.state=je.FRAG_LOADING_WAITING_RETRY}else Q.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=je.ERROR}break;case X.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case X.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case X.ErrorDetails.KEY_LOAD_ERROR:case X.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==je.ERROR&&(this.state=e.fatal?je.ERROR:je.IDLE,Q.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case X.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===je.PARSING||this.state===je.PARSED)){var a=this.mediaBuffer,s=this.media.currentTime;if(a&&Ae.isBuffered(a,s)&&Ae.isBuffered(a,s+.5)){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,Q.logger.warn("AudioStreamController: reduce max buffer length to "+u.maxMaxBufferLength+"s")),this.state=je.IDLE}else Q.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=je.BUFFER_FLUSHING,this.hls.trigger(J.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},s.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(Q.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(J.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=je.PARSED):(this.state=je.IDLE,this.fragPrevious=null,this.tick())},i=t,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,Q.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&P(i.prototype,o),a&&P(i,a),t}(Be),st=function(){function e(e){return"string"==typeof e&&!!o[e.toLowerCase()]&&e.toLowerCase()}function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function n(n,o,a){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var c="",l=!1,f=n,h=o,d=a,p=null,v="",m=!0,g="auto",y="start",_=50,b="middle",E=50,S="middle";Object.defineProperty(s,"id",t({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",t({},u,{get:function(){return l},set:function(e){l=!!e}})),Object.defineProperty(s,"startTime",t({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",t({},u,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",t({},u,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",t({},u,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",t({},u,{get:function(){return v},set:function(e){var t=function(e){return"string"==typeof e&&!!i[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",t({},u,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",t({},u,{get:function(){return g},set:function(e){if("number"!=typeof e&&e!==r)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",t({},u,{get:function(){return y},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",t({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",t({},u,{get:function(){return b},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",t({},u,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",t({},u,{get:function(){return S},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");S=n,this.hasBeenReset=!0}})),s.displayState=void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",i={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}(),ut=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};C.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var ct=new st(0,0,0),lt="middle"===ct.align?"middle":"center";x.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=k(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i=(r=t()).match(/^(ﾃｯﾂｻﾂｿ)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=t(),n.state){case"HEADER":/:/.test(r)?M(r,(function(e,t){}),/:/):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new st(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{L(r,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ft,ht=x,dt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},pt=function(e){var t=e;return dt.hasOwnProperty(e)&&(t=dt[e]),String.fromCharCode(t)},vt=15,mt=100,gt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},yt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_t={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},bt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Et=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(ft||(ft={}));var St,Tt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},wt=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Ot=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Rt=function(){function e(e,t,n,r,i,o){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Ot(t,n,r,i,o)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),At=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<mt;e++)this.chars.push(new Rt);this.pos=0,this.currPenState=new Ot}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<mt;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<mt;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<mt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Tt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>mt&&(Tt.log("ERROR","Too large cursor position "+this.pos),this.pos=mt)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=pt(e);this.pos>=mt?Tt.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<mt;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<mt;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Pt=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<vt;e++)this.rows.push(new At);this.currRow=vt-1,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<vt;e++)this.rows[e].clear();this.currRow=vt-1},t.equals=function(e){for(var t=!0,n=0;n<vt;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<vt;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<vt;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){Tt.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){Tt.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<vt;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[r].cueStartTime;if(o&&Tt.time&&o<Tt.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(i.rows[r+a])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,c=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[c].penState.foreground}var l={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(l)},t.setBkgData=function(e){Tt.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){Tt.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Tt.log("INFO","Rolling up")}else Tt.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<vt;i++){var o=this.rows[i].getTextString();o&&(r=i+1,e?t.push("Row "+r+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),xt=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Pt,this.nonDisplayedMemory=new Pt,this.lastOutputScreen=new Pt,this.currRollUpRow=this.displayedMemory.rows[vt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[vt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,Tt.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Tt.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Tt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){Tt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){Tt.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){Tt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){Tt.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){Tt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){Tt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){Tt.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){Tt.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){Tt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){Tt.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){Tt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(Tt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Tt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){Tt.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}Tt.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=Tt.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Ct=function(){function e(e,t,n){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,n],this.channels=[new xt(1,t),new xt(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,i,o=!1;this.lastTime=e,Tt.setTime(e);for(var a=0;a<t.length;a+=2)r=127&t[a],i=127&t[a+1],0!==r||0!==i?(Tt.log("DATA","["+wt([t[a],t[a+1]])+"] -> ("+wt([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(o=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(o):Tt.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,Tt.log("WARNING","Couldn't parse cleaned data "+wt([r,i])+" orig: "+wt([t[a],t[a+1]])))):this.dataCounters.padding+=2},t.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Tt.log("DEBUG","Repeated command ("+wt([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(Tt.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),Tt.log("DEBUG","MIDROW ("+wt([e,t])+")"),!0))},t.parsePAC=function(e,t){var n,r=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=t>=64&&t<=95?1===n?gt[e]:_t[e]:1===n?yt[e]:bt[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){var o=t;o=17===i?t+80:18===i?t+112:t+144,Tt.log("INFO","Special char '"+pt(o)+"' in channel "+n),r=[o]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var a=wt(r);Tt.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},t.parseBackgroundAttributes=function(e,t){var n,r,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=Et[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),Mt=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Lt=function(e,t,n){return e.substr(n||0,t.length)===t},kt=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},It={parse:function(e,t,n,r,i,o){var a,s=Object(Ve.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,l=0,f=0,h=[],d=!0,p=!1,v=new ht;v.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==l?i=n.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(n,r,f)),f&&(i=f-n.presentationOffset),p&&(e.startTime+=i-l,e.endTime+=i-l),e.id=kt(e.startTime.toString())+kt(e.endTime.toString())+kt(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&h.push(e)},v.onparsingerror=function(e){a=e},v.onflush=function(){a&&o?o(a):i(h)},s.forEach((function(e){if(d){if(Lt(e,"X-TIMESTAMP-MAP=")){d=!1,p=!0,e.substr(16).split(",").forEach((function(e){Lt(e,"LOCAL:")?u=e.substr(6):Lt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*n[r].start||0)<0&&(t+=8589934592),c-=t,l=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object($.isFiniteNumber)(t)&&Object($.isFiniteNumber)(n)&&Object($.isFiniteNumber)(r)&&Object($.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*r,t+=36e5*i}(u)/1e3,f=c/9e4}catch(e){p=!1,a=e}return}""===e&&(d=!1)}v.parse(e+"\n")})),v.flush()}},Dt=function(e){function t(t){var n;if((n=e.call(this,t,J.default.MEDIA_ATTACHING,J.default.MEDIA_DETACHING,J.default.FRAG_PARSING_USERDATA,J.default.FRAG_DECRYPTED,J.default.MANIFEST_LOADING,J.default.MANIFEST_LOADED,J.default.FRAG_LOADED,J.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties=void 0,n.cea608Parser=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=null,n.hls=t,n.config=t.config,n.Cues=t.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new Mt(D(n),"textTrack1"),i=new Mt(D(n),"textTrack2");n.cea608Parser=new Ct(0,r,i)}return n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.addCues=function(e,t,n,r){for(var i,o,a,s,u=this.cueRanges,c=!1,l=u.length;l--;){var f=u[l],h=(i=f[0],o=f[1],a=t,s=n,Math.min(o,s)-Math.max(i,a));if(h>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),c=!0,h/(n-t)>.5))return}c||u.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},i.onInitPtsFound=function(e){var t=this,n=e.frag,r=e.id,i=e.initPTS,o=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),o.length&&(this.unparsedVttFrags=[],o.forEach((function(e){t.onFragLoaded(e)})))},i.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},i.createCaptionsTrack=function(e){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],o=i.label,a=i.languageCode;if(!n[e]){var s=this.getExistingTrack(e);if(s)n[e]=s,w(n[e]),T(n[e],r);else{var u=this.createTextTrack("captions",o,a);u&&(u[e]=!0,n[e]=u)}}},i.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},i.destroy=function(){e.prototype.destroy.call(this)},i.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},i.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){w(e[t]),delete e[t]}))},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},i._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)w(t[n])}},i.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var i;if(r<n.length){for(var o=null,a=0;a<n.length;a++)if(N(n[a],e)){o=n[a];break}o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}},i.onFragLoaded=function(e){var t=e.frag,n=e.payload,r=this.cea608Parser,i=this.initPTS,o=this.lastSn,a=this.unparsedVttFrags;if("main"===t.type){var s=t.sn;t.sn!==o+1&&r&&r.reset(),this.lastSn=s}else if("subtitle"===t.type)if(n.byteLength){if(!Object($.isFiniteNumber)(i[t.cc]))return a.push(e),void(i.length&&this.hls.trigger(J.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var u=t.decryptdata;null!=u&&null!=u.key&&"AES-128"===u.method||this._parseVTTs(t,n)}else this.hls.trigger(J.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},i._parseVTTs=function(e,t){var n=this.hls,r=this.prevCC,i=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:r,new:!0},this.prevCC=e.cc),It.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){var r=i[e.level];"disabled"!==r.mode?(t.forEach((function(e){if(!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){Q.logger.debug("Failed occurred on adding cues: "+n);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}})),n.trigger(J.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):n.trigger(J.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){Q.logger.log("Failed to parse VTT cue: "+t),n.trigger(J.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},i.onFragDecrypted=function(e){var t=e.frag,n=e.payload;if("subtitle"===t.type){if(!Object($.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,n)}},i.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var n=e.samples[t].bytes;if(n){var r=this.extractCea608Data(n);this.cea608Parser.addData(e.samples[t].pts,r)}}},i.extractCea608Data=function(e){for(var t,n,r,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],n=127&e[o++],r=127&e[o++],0===n&&0===r||0!=(4&t)&&0==(3&t)&&(a.push(n),a.push(r));return a},t}(ee),Nt=function(e){function t(t){var n;return(n=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHING,J.default.MANIFEST_LOADED,J.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.destroy=function(){ee.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object($.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object($.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),U(this.media.textTracks).forEach((function(e){w(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(J.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,r=e.details,i=this.trackId,o=this.tracks,a=o[i];if(n>=o.length||n!==i||!a||this.stopped)this._clearReloadTimer();else if(Q.logger.log("subtitle track "+n+" loaded"),r.live){var s=p(a.details,r,e.stats.trequest);Q.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,r=t[e];e<0||!r||r.details&&!r.details.live||(Q.logger.log("Loading subtitle track "+e),n.trigger(J.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=U(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var o=i[r];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object($.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,Q.logger.log("Switching to subtitle track "+e),t.trigger(J.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=U(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},i=t,(o=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&F(i.prototype,o),a&&F(i,a),t}(ee),Ft=n("./src/crypt/decrypter.js"),Ut=window.performance,jt=function(e){function t(t,n){var r;return(r=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHING,J.default.ERROR,J.default.KEY_LOADED,J.default.FRAG_LOADED,J.default.SUBTITLE_TRACKS_UPDATED,J.default.SUBTITLE_TRACK_SWITCH,J.default.SUBTITLE_TRACK_LOADED,J.default.SUBTITLE_FRAG_PROCESSED,J.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=t.config,r.state=je.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new Ft.default(t,t.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=t.prototype;return i.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=je.IDLE,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,o=t.start,a=0;a<r.length;a++)if(o>=r[a].start&&o<=r[a].end){i=r[a];break}var s=t.start+t.duration;i?i.end=s:(i={start:o,end:s},r.push(i))}}},i.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=je.IDLE},i.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=je.STOPPED)},i.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=je.IDLE)},i.onSubtitleTracksUpdated=function(e){var t=this;Q.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},i.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,o=i[r];t>=i.length||t!==r||!o||(n.live&&function(e,t,n){void 0===n&&(n=0);var r=-1;d(e,t,(function(e,t,n){t.start=e.start,r=n}));var i=t.fragments;if(r<0)i.forEach((function(e){e.start+=n}));else for(var o=r+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration}(o.details,n,this.lastAVStart),o.details=n,this.setInterval(500))},i.onKeyLoaded=function(){this.state===je.KEY_LOADING&&(this.state=je.IDLE)},i.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===je.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var o=Ut.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,(function(e){var t=Ut.now();i.trigger(J.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:o,tdecrypt:t}})}))}},i.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case je.IDLE:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var o,a=e.maxBufferHole,s=e.maxFragLookUpTolerance,u=Math.min(e.maxBufferLength,e.maxMaxBufferLength),c=Ae.bufferedInfo(this._getBuffered(),r.currentTime,a),l=c.end,f=c.len,h=i[t].details,d=h.fragments,p=d.length,v=d[p-1].start+d[p-1].duration;if(f>u)return;var m=this.fragPrevious;l<v?(m&&h.hasProgramDateTime&&(o=g(d,m.endProgramDateTime,s)),o||(o=y(m,d,l,s))):o=d[p-1],o&&o.encrypted?(Q.logger.log("Loading key for "+o.sn),this.state=je.KEY_LOADING,this.hls.trigger(J.default.KEY_LOADING,{frag:o})):o&&n.getState(o)===Ee&&(this.fragCurrent=o,this.state=je.FRAG_LOADING,this.hls.trigger(J.default.FRAG_LOADING,{frag:o}))}else this.state=je.IDLE},i.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){this.fragPrevious=null},t}(Be);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(St||(St={}));var Bt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null,Gt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:rt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ke,bufferController:$e,capLevelController:Je,fpsController:Ze,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Bt},{cueHandler:W,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"},{subtitleStreamController:jt,subtitleTrackController:Nt,timelineController:Dt,audioStreamController:at,audioTrackController:it,emeController:function(e){function t(t){var n;return(n=e.call(this,t,J.default.MEDIA_ATTACHED,J.default.MEDIA_DETACHED,J.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(e){Q.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},n._config=t.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i,o,a,s=t.prototype;return s.getLicenseServerUrl=function(e){switch(e){case St.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},s._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n){switch(e){case St.WIDEVINE:return function(e,t){var n={videoCapabilities:[]};return t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+e)}}(e,0,n);Q.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then((function(t){r._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){Q.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},s._onMediaKeySystemAccessObtained=function(e,t){var n=this;Q.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r),t.createMediaKeys().then((function(t){r.mediaKeys=t,Q.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})).catch((function(e){Q.logger.error("Failed to create media-keys:",e)}))},s._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},s._onNewMediaKeySession=function(e){var t=this;Q.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},s._onKeySessionMessage=function(e,t){Q.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){Q.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},s._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return Q.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});Q.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},s._generateRequestWithPreferredKeySession=function(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return Q.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)Q.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return Q.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return Q.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});Q.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){Q.logger.debug("Key-session generation succeeded")})).catch((function(e){Q.logger.error("Error generating key-session request:",e),n.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},s._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},s._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,Q.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&Q.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(e.response);else{if(Q.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;Q.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},s._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case St.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},s._requestLicense=function(e,t){Q.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return Q.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);Q.logger.log("Sending license request to URL: "+r);var o=this._generateLicenseRequestChallenge(n,e);i.send(o)}catch(e){Q.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(J.default.ERROR,{type:X.ErrorTypes.KEY_SYSTEM_ERROR,details:X.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},s.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},s.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},s.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),n=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(St.WIDEVINE,t,n)}},i=t,(o=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&j(i.prototype,o),a&&j(i,a),t}(ee)});n.d(t,"default",(function(){return Ht}));var Ht=function(e){function t(n){var r;void 0===n&&(n={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}({},i,n);var o=H(r).config;if(void 0!==o.liveMaxLatencyDurationCount&&o.liveMaxLatencyDurationCount<=o.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==o.liveMaxLatencyDuration&&(void 0===o.liveSyncDuration||o.liveMaxLatencyDuration<=o.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(Q.enableLogs)(o.debug),r._autoLevelCapping=-1;var a=r.abrController=new o.abrController(H(r)),s=new o.bufferController(H(r)),u=r.capLevelController=new o.capLevelController(H(r)),c=new o.fpsController(H(r)),l=new ye(H(r)),f=new _e(H(r)),h=new be(H(r)),d=new ze(H(r)),p=r.levelController=new He(H(r)),v=new Oe(H(r)),m=[p,r.streamController=new Ge(H(r),v)],g=o.audioStreamController;g&&m.push(new g(H(r),v)),r.networkControllers=m;var y=[l,f,h,a,s,u,c,d,v];if(g=o.audioTrackController){var _=new g(H(r));r.audioTrackController=_,y.push(_)}if(g=o.subtitleTrackController){var b=new g(H(r));r.subtitleTrackController=b,m.push(b)}if(g=o.emeController){var E=new g(H(r));r.emeController=E,y.push(E)}return(g=o.subtitleStreamController)&&m.push(new g(H(r),v)),(g=o.timelineController)&&y.push(new g(H(r))),r.coreComponents=y,r}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,t.isSupported=function(){return function(){var e=u();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}()},z(t,null,[{key:"version",get:function(){return"0.13.1"}},{key:"Events",get:function(){return J.default}},{key:"ErrorTypes",get:function(){return X.ErrorTypes}},{key:"ErrorDetails",get:function(){return X.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Gt},set:function(e){t.defaultConfig=e}}]);var i=t.prototype;return i.destroy=function(){Q.logger.log("destroy"),this.trigger(J.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(e){Q.logger.log("attachMedia"),this.media=e,this.trigger(J.default.MEDIA_ATTACHING,{media:e})},i.detachMedia=function(){Q.logger.log("detachMedia"),this.trigger(J.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(e){e=K.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),Q.logger.log("loadSource:"+e),this.url=e,this.trigger(J.default.MANIFEST_LOADING,{url:e})},i.startLoad=function(e){void 0===e&&(e=-1),Q.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},i.stopLoad=function(){Q.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},i.swapAudioCodec=function(){Q.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){Q.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},z(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){Q.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){Q.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){Q.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){Q.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){Q.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){Q.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),t}(Le);Ht.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":
/*!******************************************!*\
  !*** ./src/polyfills/number-isFinite.js ***!
  \******************************************/
/*! exports provided: isFiniteNumber */function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",(function(){return r}));var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,n){"use strict";function r(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",(function(){return r}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,n){"use strict";function r(){}function i(e,t){return t="["+e+"] > "+t}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.forEach((function(t){u[t]=e[t]?e[t].bind(e):function(e){var t=c.console[e];return t?function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r[0]&&(r[0]=i(e,r[0])),t.apply(c.console,r)}:r}(t)}))}n.r(t),n.d(t,"enableLogs",(function(){return l})),n.d(t,"logger",(function(){return f}));var a=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),s={trace:r,debug:r,log:r,warn:r,info:r,error:r},u=s,c=Object(a.getSelfScope)(),l=function(e){if(c.console&&!0===e||"object"==typeof e){o(e,"debug","log","info","warn","error");try{u.log()}catch(e){u=s}}else u=s},f=u}}).default},e.exports=r())},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ReactPureComponent=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(0).PureComponent);t.ReactPureComponent=o},function(e,t,n){var r=n(11),i=e.exports={_uid:0,_saidHello:!1,EventEmitter:n(75),pluginTarget:n(647),async:n(240),uid:function(){return++i._uid},hex2rgb:function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},hex2string:function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;n.src=e+"AP804Oa6"+t;var r=new Image;r.src=e+"/wCKxvRF"+t;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(n,0,0),o.drawImage(r,2,0);var a=o.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(e){if(e>0&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t},isPowerOfTwo:function(e,t){return e>0&&0==(e&e-1)&&t>0&&0==(t&t-1)},getResolutionOfUrl:function(e){var t=r.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):1},sayHello:function(e){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c Pixi.js "+r.VERSION+" - 笨ｰ "+e+" 笨ｰ  %c  %c  http://www.pixijs.com/  %c %c 笙･%c笙･%c笙･ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("Pixi.js "+r.VERSION+" - "+e+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var e={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);return!(!n||!n.getContextAttributes().stencil)}catch(e){return!1}},sign:function(e){return e?e<0?-1:1:0},removeItems:function(e,t,n){var r=e.length;if(!(t>=r||0===n)){for(var i=t,o=r-(n=t+n>r?r-t:n);i<o;++i)e[i]=e[i+n];e.length=o}},TextureCache:{},BaseTextureCache:{}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(146),a=function(){function e(e){this.reliveServerSession=null,this.requestCanceller=[],this.reliveServerSession=e}return e.prototype.dispose=function(){this.isDisposed(this.reliveServerSession)||(this.requestCanceller.forEach((function(e){return e()})),this.requestCanceller=[],this.reliveServerSession=null)},e.prototype.isDisposed=function(e){return null===e},e.prototype.addToRequestCanceller=function(e){this.requestCanceller.push(e)},e}();t.ReliveServerSender=a;var s=function(e){function t(t){var n=e.call(this)||this;return n.reliveServerSession=null,n.reliveServerSession=t,n}return i(t,e),t.prototype.dispose=function(){this.isDisposed(this.reliveServerSession)||(this.offAll(),this.stop(),this.reliveServerSession=null)},t.prototype.isDisposed=function(e){return null===e},t}(o.EventDispatcher);t.ReliveServerReceiver=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.TAKEOVER="TAKEOVER",e.NO_PERMISSION="NO_PERMISSION",e.CROWDED="CROWDED",e.SERVICE_TEMPORARILY_UNAVAILABLE="SERVICE_TEMPORARILY_UNAVAILABLE",e.TOO_MANY_WATCHINGS="TOO_MANY_WATCHINGS",e.END_PROGRAM="END_PROGRAM",e.PING_TIMEOUT="PING_TIMEOUT",e.TOO_MANY_CONNECTIONS="TOO_MANY_CONNECTIONS",e.TEMPORARILY_CROWDED="TEMPORARILY_CROWDED",e.USER_BANNED="USER_BANNED",e.MAINTENANCE_IN="MAINTENANCE_IN",e.TIMESHIFT_PERMISSION_EXPIRED="TIMESHIFT_PERMISSION_EXPIRED",e}();t.DisconnectReason=r,t.RoomProtocol={WebSocket:"webSocket",XmlSocket:"xmlSocket",TlsWebSocket:"tls+webSocket"},function(e){e.Hls="hls",e.Rtmp="rtmp",e.TlsHls="tls+hls",e.HlsFmp4="hls+fmp4",e.Webrtc="webrtc"}(t.StreamingProtocol||(t.StreamingProtocol={})),function(e){e.SHIMESABA="shimesaba",e.NIWAVIDED="niwavided"}(t.MessageServerType||(t.MessageServerType={}))},function(e,t,n){e.exports={Point:n(157),Matrix:n(238),GroupD8:n(239),Circle:n(643),Ellipse:n(644),Polygon:n(645),Rectangle:n(158),RoundedRectangle:n(646)}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t){var n=t/1e6;return n<1e-6?""+e:""+(e+n)}n.r(t);var u=n(18),c=n.n(u),l=function(){function e(t){var n=t.server,r=t.userId,i=void 0===r?"":r,o=t.isPremium,a=void 0!==o&&o,s=t.protocol,u=void 0===s?e.PROTOCOL.HTTP:s;this._server=void 0,this._protocol=void 0,this._userId=void 0,this._isPremium=void 0,this._server=n,this._protocol=u,this._userId=i,this._isPremium=a}return a(e,null,[{key:"PROTOCOL",get:function(){return{get HTTP(){return"http"},get WEB_SOCKET_PROXY(){return"webSocket proxy"},get WEB_SOCKET(){return"webSocket"}}}}]),a(e,[{key:"server",set:function(e){this._server=e},get:function(){return this._server}},{key:"protocol",set:function(e){this._protocol=e},get:function(){return this._protocol}},{key:"userId",set:function(e){this._userId=e},get:function(){return this._userId}},{key:"isPremium",set:function(e){this._isPremium=e},get:function(){return this._isPremium}}]),e}(),f=function(){function e(e,t){void 0===t&&(t={}),this._fetchers={},this._userkey=void 0,this._threadkeyMap=new Map,this._waybackkeyMap=new Map,this._nicorukeyMap=new Map,this._postkeyMap=new Map,this._fetchers=e,this._userkey={userkey:t.defaultUserkey}}var t=e.prototype;return t.fetchThreadkey=function(e){var t=this,n=e.thread,r=n.id;if(!r)throw new Error("thread id is empty");return this._threadkeyMap.has(r)?this._threadkeyMap.get(r):(this._threadkeyMap.set(r,this._getFetcher("fetchThreadkey")(n)),this._threadkeyMap.get(r).catch((function(){t.clearThreadkey({thread:n})})))},t.fetchUserkey=function(){var e=this;return this._userkey?this._userkey:(this._userkey=this._getFetcher("fetchUserkey")(),this._userkey.catch((function(){e.clearUserkey()})))},t.fetchNicorukey=function(e){var t=this,n=e.thread.id;if(!n)throw new Error("thread id is empty");return this._nicorukeyMap.has(n)?this._nicorukeyMap.get(n):(this._nicorukeyMap.set(n,this._getFetcher("fetchNicorukey")(e.thread)),this._nicorukeyMap.get(n).catch((function(){t.clearNicorukey({thread:e.thread})})))},t.fetchWaybackkey=function(e){var t=this,n=e.thread,r=n.id;if(!r)throw new Error("thread id is empty");return this._waybackkeyMap.has(r)?this._waybackkeyMap.get(r):(this._waybackkeyMap.set(r,this._getFetcher("fetchWaybackkey")(n)),this._waybackkeyMap.get(r).catch((function(){t.clearWaybackkey({thread:n})})))},t.fetchKeysForThread=function(e){var t=e.thread,n=!e.userId||t.isPrivate||t.whenSec?void 0:this.fetchUserkey(),r=t.isPrivate?this.fetchThreadkey({thread:t}):void 0,i=t.whenSec?this.fetchWaybackkey({thread:t}):void 0;return Promise.all([n,r,i]).then((function(e){return Object.assign.apply(Object,[{}].concat(e))}))},t.fetchPostkey=function(e){var t=this,n=e.thread,r=e.yugi,i=n.id;if(!i)throw new Error("thread id is empty");return this._postkeyMap.has(i)?this._postkeyMap.get(i):(this._postkeyMap.set(i,this._getFetcher("fetchPostkey")(n,r)),this._postkeyMap.get(i).catch((function(e){return t.clearPostkey({thread:n}),Promise.reject(e)})))},t.fetchUpdatekey=function(e){var t=e.thread;if(!t.id)throw new Error("thread id is empty");var n=t.ticket;if(!n)throw new Error("ticket is empty");return this._getFetcher("fetchUpdatekey")({thread:t,ticket:n})},t.fetchDeletekey=function(e){var t=e.thread,n=e.isUndelete,r=void 0!==n&&n,i=e.chatNos,o=void 0===i?[]:i;if(!t.id)throw new Error("thread id is empty");if(void 0===t.revision)throw new Error("thread revision is empty");var a=t.language;return this._getFetcher("fetchDeletekey")({thread:t,isUndelete:r,language:a,chatNos:o})},t.clearThreadkey=function(e){var t=e.thread;this._threadkeyMap.delete(t.id)},t.clearUserkey=function(){this._userkey=void 0},t.clearWaybackkey=function(e){var t=e.thread;this._waybackkeyMap.delete(t.id)},t.clearPostkey=function(e){var t=e.thread;this._postkeyMap.delete(t.id)},t.clearNicorukey=function(e){this._nicorukeyMap.delete(e.thread.id)},t._getFetcher=function(e){if(!this._fetchers.hasOwnProperty(e))throw new Error(e+" is not defined");return this._fetchers[e]},e}(),h=function(){function e(e){this._number=void 0,this._number=e}e.generateForNicovideo=function(t){var n=t.videoLengthSec,r=t.isNicos,i=-1e3;return n<60?i=-100:n<300?i=-250:n<600&&(i=-500),void 0!==r&&r&&(i/=2),new e(i)};var t=e.prototype;return t.valueOf=function(){return this._number},t.toString=function(){return""+this._number},e}(),d=function(e){function t(t,n){var r,i=n.id,o=n.service,a=n.fork,s=n.language,u=n.leafExpression,c=n.nicoru,l=n.whenSec,f=n.isPrivate,h=n.noLeaf,d=n.withGlobal,p=n.ticket,v=n.revision;return(r=e.call(this)||this)._client=void 0,r._id=void 0,r._service=void 0,r._fork=void 0,r._language=void 0,r._leafExpression=void 0,r._whenSec=void 0,r._isPrivate=void 0,r._noLeaf=void 0,r._lastRes=void 0,r._viewCounter=void 0,r._globalNumRes=void 0,r._leaves=[],r._chatMap=new Map,r._chats=[],r._isChatsLatest=!1,r._controlMap=new Map,r._controls=[],r._isControlsLatest=!1,r._locked=void 0,r._revision=void 0,r._resOffset=void 0,r._buttonIgnored=void 0,r._clickRevision=void 0,r._numClicks=void 0,r._ngResult=void 0,r._withGlobal=void 0,r._ticket=void 0,r._revision=void 0,r._nicoru=void 0,r._client=t,r._id=i,r._service=o,r._fork=a,r._language=s,r._leafExpression=u,r._whenSec=l,r._isPrivate=f,r._noLeaf=h,r._withGlobal=d,r._lastRes=0,r._ticket=p,r._revision=v,r._nicoru=c,r}i(t,e);var n=t.prototype;return n.clone=function(){var e=new t(this._client,{id:this.id,fork:this.fork,language:this.language,leafExpression:this.leafExpression,whenSec:this.whenSec,isPrivate:this.isPrivate,noLeaf:this.noLeaf,withGlobal:this.withGlobal,ticket:this.ticket,revision:this.revision,nicoru:this.nicoru});return e._chats=this._chats.map((function(t){return Object.assign({},t,{thread:e})})),e.lastRes=this.lastRes,e._leaves=[].concat(this._leaves),e},n.addChat=function(e){var t=this._mergeNecessaryDefaultValue(e),n=t.no?t.no:t.date+t.date_usec/1e6;this._chatMap.set(n,t),this._isChatsLatest=!1},n.addControl=function(e){var t=this._mergeNecessaryDefaultValue(e),n=t.no?t.no:t.date+t.date_usec/1e6;this._controlMap.set(n,t),this._isControlsLatest=!1},n.dispose=function(){this.removeAllListeners()},n.pushChat=function(e){var t=this._mergeNecessaryDefaultValue(e);this.addChat(t),this.emit("receive:chat",t)},n.pushControl=function(e){var t=this._mergeNecessaryDefaultValue(e);this.addControl(t),this.emit("receive:control",t)},n._mergeNecessaryDefaultValue=function(e){return Object.assign({thread:"",vpos:0,date:0,date_usec:0},e)},n.fetch=function(){var e=this;return this._client.fetchThread({thread:this}).then((function(){return e}))},n.fetchLatest=function(){return this._client.fetchThreadLatest({thread:this}).then((function(e){return e[0]}))},n.post=function(e){return this._client.postChat(Object.assign({},e,{thread:this}))},n.nicoruChat=function(e){return this._client.nicoruChat({chatId:e.chatId,content:e.content,postdate:e.postdate,player_version:e.player_version,thread:this.id,fork:this.fork,language:this.language,service:this.service})},n.update=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this._client.updateThread({thread:this,chats:n}).then((function(t){e._chatMap.clear();var r=1;return n.forEach((function(t){e.addChat(Object.assign({},t,{no:r++}))})),e._ticket=t.ticket,e._isChatsLatest=!1,t}))},n.unjoin=function(){throw new Error("譛ｪ螳溯｣�")},n.deleteComments=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this._client.fetchThread({thread:this}).then((function(){return e._client.deleteComments({thread:e,chatNos:n})})).then((function(t){return n.forEach((function(t){e._chatMap.get(t).deleted=1})),t}))},n.undeleteComments=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this._client.fetchThread({thread:this}).then((function(){return e._client.undeleteComments({thread:e,chatNos:n})})).then((function(t){return n.forEach((function(t){e._chatMap.get(t).deleted=0})),t}))},n.copy=function(){throw new Error("譛ｪ螳溯｣�")},a(t,[{key:"id",get:function(){return this._id}},{key:"fork",get:function(){return this._fork}},{key:"leafExpression",set:function(e){this._leafExpression=e},get:function(){return this._leafExpression}},{key:"whenSec",set:function(e){this._whenSec=e},get:function(){return this._whenSec}},{key:"isPrivate",set:function(e){this._isPrivate=e},get:function(){return this._isPrivate}},{key:"noLeaf",set:function(e){this._noLeaf=e},get:function(){return this._noLeaf}},{key:"withGlobal",get:function(){return this._withGlobal}},{key:"language",get:function(){return this._language}},{key:"viewCounter",set:function(e){this._viewCounter=e},get:function(){return this._viewCounter}},{key:"globalNumRes",set:function(e){this._globalNumRes=e},get:function(){return this._globalNumRes}},{key:"leaves",get:function(){return this._leaves}},{key:"chats",get:function(){if(!this._isChatsLatest){var e=[];this._chatMap.forEach((function(t,n){return e.push([n,t])})),this._chats=e.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),this._isChatsLatest=!0}return this._chats}},{key:"controls",get:function(){if(!this._isControlsLatest){var e=[];this._controlMap.forEach((function(t,n){return e.push([n,t])})),this._controls=e.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),this._isControlsLatest=!0}return this._controls}},{key:"lastRes",set:function(e){this._lastRes=e},get:function(){return this._lastRes}},{key:"locked",set:function(e){this._locked=e},get:function(){return this._locked}},{key:"revision",set:function(e){this._revision=e},get:function(){return this._revision}},{key:"resOffset",set:function(e){this._resOffset=e},get:function(){return this._resOffset}},{key:"buttonIgnored",set:function(e){this._buttonIgnored=e},get:function(){return this._buttonIgnored}},{key:"clickRevision",set:function(e){this._clickRevision=e},get:function(){return this._clickRevision}},{key:"numClicks",set:function(e){this._numClicks=e},get:function(){return this._numClicks}},{key:"ngResult",set:function(e){this._ngResult=e},get:function(){return this._ngResult}},{key:"ticket",get:function(){return this._ticket},set:function(e){this._ticket=e}},{key:"service",get:function(){return this._service},set:function(e){this._service=e}},{key:"nicoru",get:function(){return this._nicoru},set:function(e){this._nicoru=e}}]),t}(c.a),p=function(){function e(){this._threads=new Map}var t=e.prototype;return t.create=function(e,t){var n=new d(e,t);return this._threads.set(this._getMapKey(t.id,t.fork,t.language,t.whenSec),n),n},t.get=function(e){var t=e.id,n=e.fork,r=e.language,i=e.whenSec;return this._threads.get(this._getMapKey(t,n,r,i))},t._getMapKey=function(e,t,n,r){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),e+":"+t+":"+n+":"+r},e}(),v=function(){function e(){}return a(e,null,[{key:"POST_SUCCESS",get:function(){return 0}},{key:"POST_FAILURE",get:function(){return 1}},{key:"POST_INVALID_THREAD",get:function(){return 2}},{key:"POST_INVALID_TICKET",get:function(){return 3}},{key:"POST_INVALID_POSTKEY",get:function(){return 4}},{key:"POST_LOCKED",get:function(){return 5}},{key:"POST_READONLY",get:function(){return 6}},{key:"POST_NOT_IMPLEMENTED",get:function(){return 7}},{key:"POST_INVALID_184",get:function(){return 8}}]),e}(),m=function(){function e(){}return a(e,null,[{key:"NICORU_SUCCESS",get:function(){return 0}},{key:"NICORU_FAILURE",get:function(){return 1}},{key:"NICORU_TOO_OLD_NICORUKEY",get:function(){return 2}},{key:"NICORU_INVALID_NICORUKEY",get:function(){return 3}},{key:"NICORU_ALREADY_DONE",get:function(){return 4}},{key:"NICORU_DELETED_COMMENT",get:function(){return 5}},{key:"NICORU_LIMIT_EXCEEDED",get:function(){return 6}}]),e}(),g=function(){function e(){}return a(e,null,[{key:"THREAD_FOUND",get:function(){return 0}},{key:"THREAD_NOT_FOUND",get:function(){return 1}},{key:"THREAD_INVALID",get:function(){return 2}},{key:"THREAD_VERSION",get:function(){return 3}},{key:"THREAD_INVALID_WAYBACKKEY",get:function(){return 4}},{key:"THREAD_TOO_OLD_WAYBACKKEY",get:function(){return 5}},{key:"THREAD_INVALID_ADMINKEY",get:function(){return 6}},{key:"THREAD_TOO_OLD_ADMINKEY",get:function(){return 7}},{key:"THREAD_INVALID_THREADKEY",get:function(){return 8}},{key:"THREAD_TOO_OLD_THREADKEY",get:function(){return 9}},{key:"THREAD_ADMIN_CONFLICT",get:function(){return 10}},{key:"THREAD_LEAF_NOT_ACTIVATED",get:function(){return 11}},{key:"THREAD_LEAF_LOADING",get:function(){return 12}},{key:"THREAD_INVALID_LANGUAGE",get:function(){return 13}},{key:"THREAD_INVALID_USERKEY",get:function(){return 14}},{key:"THREAD_TOO_OLD_USERKEY",get:function(){return 15}},{key:"THREAD_CONFLICT_USERKEY_AND_OTHERKEY",get:function(){return 16}},{key:"THREAD_USER_CONFLICT",get:function(){return 17}}]),e}(),y=function(){function e(){}return a(e,null,[{key:"DELETE_SUCCESS",get:function(){return 0}},{key:"DELETE_FAILURE",get:function(){return 1}},{key:"DELETE_INVALID_DELETEKEY",get:function(){return 2}},{key:"DELETE_LOCKED",get:function(){return 3}},{key:"DELETE_REVISED",get:function(){return 4}}]),e}(),_=function(){function e(){}return a(e,null,[{key:"UPDATE_SUCCESS",get:function(){return 0}},{key:"UPDATE_FAILURE",get:function(){return 1}},{key:"UPDATE_LOCKED",get:function(){return 2}},{key:"UPDATE_INVALID_TICKET",get:function(){return 3}},{key:"UPDATE_INVALID_UPDATEKEY",get:function(){return 4}},{key:"UPDATE_INVALID_THREAD",get:function(){return 5}},{key:"UPDATE_COUNT_MISSMATCH",get:function(){return 6}}]),e}(),b=function(){function e(t){var n=t.$meta;this.needsResponse=!0,this._id=void 0,this._$meta=void 0,this._response=[],this._id=e.currentId++%e.ID_MAX_VALUE,this.$meta=n}var t=e.prototype;return t.toRequestFormat=function(){throw new Error("not implemented.")},t.addResponse=function(e){this._response.push(e)},t.clearResponse=function(){this._response=[]},a(e,[{key:"id",get:function(){return this._id}},{key:"response",get:function(){return this._response}},{key:"$meta",set:function(e){this._$meta=e},get:function(){return this._$meta}}]),e}();b.ID_MAX_VALUE=1e13,b.currentId=0;var E=function(e){function t(t){var n,r=t.thread,i=t.fork,o=t.language,a=t.when,s=t.userId,u=t.scores,c=void 0===u?0:u,l=t.nicoru,f=void 0===l?0:l;return(n=e.call(this,arguments[0])||this)._thread=void 0,n._fork=void 0,n._language=void 0,n._userId=void 0,n._when=void 0,n._force184=void 0,n._scores=void 0,n._nicoru=void 0,n._userkey=void 0,n._threadkey=void 0,n._waybackkey=void 0,n._updatekey=void 0,n._deletekey=void 0,n._revision=void 0,n.thread=r,n.fork=i,n.language=o,n.when=a,n.userId=s,n.scores=c,n.nicoru=f,n}return i(t,e),t.prototype.extractResultCode=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.thread)return i.thread.resultcode}},a(t,[{key:"thread",set:function(e){this._thread=e},get:function(){return this._thread}},{key:"nicoru",get:function(){return this._nicoru},set:function(e){this._nicoru=e}},{key:"fork",set:function(e){this._fork=e},get:function(){return this._fork}},{key:"language",set:function(e){this._language=e},get:function(){return this._language}},{key:"userId",set:function(e){this._userId=e},get:function(){return this._userId}},{key:"when",set:function(e){this._when=e},get:function(){return this._when}},{key:"force184",set:function(e){this._force184=e},get:function(){return this._force184}},{key:"userkey",set:function(e){this._userkey=e},get:function(){return this._userkey}},{key:"threadkey",set:function(e){this._threadkey=e},get:function(){return this._threadkey}},{key:"waybackkey",set:function(e){this._waybackkey=e},get:function(){return this._waybackkey}},{key:"updatekey",get:function(){return this._updatekey},set:function(e){this._updatekey=e}},{key:"deletekey",get:function(){return this._deletekey},set:function(e){this._deletekey=e}},{key:"revision",get:function(){return this._revision},set:function(e){this._revision=e}}]),t}(b),S=function(e){function t(t){var n,r=t.vpos,i=t.mail,o=t.name,a=void 0===o?"":o,s=t.content;return(n=e.call(this,arguments[0])||this).needsResponse=!1,n._vpos=void 0,n._mail=void 0,n._content=void 0,n._name=void 0,n.vpos=r,n.mail=i,n.name=a,n.content=s,n}i(t,e);var n=t.prototype;return n.extractStatus=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.status}},n.extractNo=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.no}},n.toRequestFormat=function(){return{add_thread_item:{vpos:this.vpos,mail:this.mail,name:this.name,content:this.content}}},a(t,[{key:"thread",set:function(e){this._thread=e},get:function(){return this._thread}},{key:"vpos",set:function(e){this._vpos=e},get:function(){return this._vpos}},{key:"mail",set:function(e){this._mail=e},get:function(){return this._mail}},{key:"name",set:function(e){this._name=e},get:function(){return this._name}},{key:"content",set:function(e){this._content=e},get:function(){return this._content}}]),t}(b),T=function(e){function t(t){var n,r=t.thread,i=t.userId,o=t.count,a=t.updatekey,s=t.ticket,u=t.premium;return(n=e.call(this,arguments[0])||this)._thread=void 0,n._userId=void 0,n._count=void 0,n._ticket=void 0,n._updatekey=void 0,n._premium=void 0,n.thread=r,n.userId=i,n.count=o,n.ticket=s,n.updatekey=a,n.premium=u,n}i(t,e);var n=t.prototype;return n.toRequestFormat=function(){return{update_thread:{thread:this.thread,user_id:this.userId,count:this.count,ticket:this.ticket,updatekey:this.updatekey,premium:this.premium}}},n.extractStatus=function(){var e=this.extractResponse();return e?e.status:void 0},n.extractResponse=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.update_thread)return i.update_thread}},a(t,[{key:"thread",get:function(){return this._thread},set:function(e){this._thread=e}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"count",get:function(){return this._count},set:function(e){this._count=e}},{key:"ticket",get:function(){return this._ticket},set:function(e){this._ticket=e}},{key:"updatekey",get:function(){return this._updatekey},set:function(e){this._updatekey=e}},{key:"premium",get:function(){return this._premium},set:function(e){this._premium=e}}]),t}(b),w=function(e){function t(t){var n,r=t.thread,i=t.userId,o=t.deletekey,a=t.revision,s=t.chatNos,u=t.isUndelete,c=void 0!==u&&u;return(n=e.call(this,arguments[0])||this)._thread=void 0,n._userId=void 0,n._deletekey=void 0,n._chatNos=void 0,n._revision=void 0,n._isUndelete=void 0,n.thread=r,n.userId=i,n.deletekey=o,n.revision=a,n.chatNos=s,n.isUndelete=c,n}i(t,e);var n=t.prototype;return n.extractStatus=function(){var e=this.extractResponse();return e?e.status:void 0},n.extractResponse=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.delete_comments)return i.delete_comments}},n.toRequestFormat=function(){return{delete_comments:{thread:this.thread,user_id:this.userId,deletekey:this.deletekey,revision:this.revision,undelete:this.isUndelete?"1":void 0,content:this.chatNos.join(",")}}},a(t,[{key:"thread",set:function(e){this._thread=e},get:function(){return this._thread}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"deletekey",get:function(){return this._deletekey},set:function(e){this._deletekey=e}},{key:"chatNos",get:function(){return this._chatNos||[]},set:function(e){this._chatNos=e}},{key:"revision",get:function(){return this._revision},set:function(e){this._revision=e}},{key:"isUndelete",get:function(){return this._isUndelete},set:function(e){this._isUndelete=e}}]),t}(b),O=function(e){function t(t){var n;return n=e.call(this,t)||this,Object.assign(r(n),t),n}i(t,e);var n=t.prototype;return n.toRequestFormat=function(){return{nicoru:Object.assign({thread:this.thread,user_id:this.user_id,premium:this.premium,fork:this.fork,language:this.language,id:this.chatId,content:this.content,postdate:this.postdate,service:this.service,player_version:this.player_version},this.nicorukeyResponse)}},n.extractStatus=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.nicoru_result)return i.nicoru_result.status}},t}(b),R=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.send=function(){return Promise.reject((function(){return new Error("not implemented.")}))},n.disconnect=function(){},t}(c.a),A=function(e){function t(n,r){var i;return(i=e.call(this,{content:t._makeSeparateContent(n,r)})||this)._type=void 0,i._targetId=void 0,i._type=n,i._targetId=r,i}return i(t,e),t.parse=function(e){var t=e.ping.content.split(":"),n=t[0],r=t[1];return{type:n,id:parseInt(r,10)}},t.isRequestIdentifier=function(e){if(!e.ping||!e.ping.content)return!1;var n=e.ping.content.split(":")[0];return[t.REQUEST.START,t.REQUEST.FINISH].includes(n)},t.isPacketIdentifier=function(e){if(!e.ping||!e.ping.content)return!1;var n=e.ping.content.split(":")[0];return[t.PACKET.START,t.PACKET.FINISH].includes(n)},t._makeSeparateContent=function(e,t){return e+":"+t},a(t,[{key:"type",get:function(){return this._type}},{key:"targetId",get:function(){return this._targetId}}]),t}(function(e){function t(t){var n,r=t.content;return(n=e.call(this,arguments[0])||this)._content=void 0,n.content=r,n}return i(t,e),t.prototype.toRequestFormat=function(){return{ping:{content:this.content}}},a(t,[{key:"content",set:function(e){this._content=e},get:function(){return this._content}}]),t}(b));A.REQUEST={START:"rs",FINISH:"rf"},A.PACKET={START:"ps",FINISH:"pf"};var P=function(){function e(t){var n=this;this._id=void 0,this._packetMap=void 0,this._receivingPacket=void 0,this._promise=void 0,this._resolve=void 0,this._reject=void 0,this._id=e.currentId++%b.ID_MAX_VALUE,this._packetMap=new Map(t.map((function(e){return[e.id,e]}))),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t}))}var t=e.prototype;return t.addResponse=function(e){if(A.isPacketIdentifier(e)){var t=A.parse(e),n=t.type,r=t.id;switch(n){case A.PACKET.START:return void(this._receivingPacket=this._packetMap.get(r));case A.PACKET.FINISH:return void(this._receivingPacket=null)}}if(!this._receivingPacket)throw new Error("can not resolve packet identifier: "+JSON.stringify(e)+".");this._receivingPacket.addResponse(e)},t.toString=function(){var e=[new A(A.REQUEST.START,this.id)];return this._packetMap.forEach((function(t){t.needsResponse?(e.push(new A(A.PACKET.START,t.id)),e.push(t),e.push(new A(A.PACKET.FINISH,t.id))):e.push(t)})),e.push(new A(A.REQUEST.FINISH,this.id)),JSON.stringify(e.map((function(e){return e.toRequestFormat()})))},t.resolve=function(){this._resolve(Array.from(this._packetMap.values()))},t.reject=function(e){this._reject(e)},a(e,[{key:"id",get:function(){return this._id}},{key:"promise",get:function(){return this._promise}}]),e}();P.currentId=0;var x=function(e){function t(t){var n;return(n=e.call(this)||this)._httpAPIURL=void 0,n._httpAPIURL=encodeURI(t).replace("/api/","/api.json/"),n}return i(t,e),t.prototype.send=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new P(t);return fetch(this._httpAPIURL,{method:"post",body:r.toString()}).then((function(e){return e.json()})).then((function(e){var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}var a=o;if(A.isRequestIdentifier(a)){var s=A.parse(a),u=s.type;s.id;switch(u){case A.REQUEST.START:case A.REQUEST.FINISH:continue}}r.addResponse(a)}r.resolve()})).catch((function(e){r.reject(e)})),r.promise},t}(R),C=function(e){function t(n,r,i){var o;return void 0===i&&(i={}),(o=e.call(this)||this)._url=void 0,o._subProtocols=void 0,o._ready=null,o._socket=null,o._onOpen=function(){return o.emit("open")},o._onMessage=function(e){return e&&e.data&&o._onData(e.data)},o._onError=function(e){return o.emit("error",e)},o._onClose=function(e){o.disconnect(),o.emit("close",e)},o._requests={},o._pingTimerId=NaN,o._receivingRequest=void 0,o._url=n,o._subProtocols=r,o.isKeepAliveEnabled=void 0!==i.keepAlive?i.keepAlive:t.KEEP_ALIVE.ENABLED,o.keepAliveIntervalMS=void 0!==i.intervalMS?i.intervalMS:t.KEEP_ALIVE.INTERVAL_MS,o}i(t,e);var n=t.prototype;return n.send=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=new P(n);return this._requests[i.id]=i,this._connect().then((function(){e._socket.send(i.toString())})).then((function(){return i.promise}))},n.disconnect=function(){this._socket&&(this._socket.removeEventListener("open",this._onOpen),this._socket.removeEventListener("message",this._onMessage),this._socket.removeEventListener("error",this._onError),this._socket.removeEventListener("close",this._onClose),this._socket.close(),this._ready=null,this._socket=null),this._stopKeepAlive()},n._connect=function(){var e=this;return this._ready||(this._ready=new Promise((function(t,n){e._socket=new WebSocket(e._url,e._subProtocols),e._socket.addEventListener("open",e._onOpen),e._socket.addEventListener("message",e._onMessage),e._socket.addEventListener("error",e._onError),e._socket.addEventListener("close",e._onClose),e.isKeepAliveEnabled&&e._startKeepAlive();var r=function r(i){e.removeListener("open",r),e.removeListener("error",r),e._socket.readyState===WebSocket.OPEN?t(i):n(i)};e.on("open",r),e.on("error",r)}))),this._ready},n._startKeepAlive=function(){var e=this;this._pingTimerId=setInterval((function(){e._socket.send("")}),this.keepAliveIntervalMS)},n._stopKeepAlive=function(){clearInterval(this._pingTimerId),this._pingTimerId=NaN},n._onData=function(e){var t=[],n=this._toArrayWrapedJson(e),r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;switch(Object.keys(a)[0]){case"ping":if(A.isRequestIdentifier(a)){var s=A.parse(a),u=s.type,c=s.id;switch(u){case A.REQUEST.START:this._receivingRequest=this._requests[c];continue;case A.REQUEST.FINISH:this._receivingRequest.resolve(),this._receivingRequest=null;continue}}}this._receivingRequest?this._receivingRequest.addResponse(a):t.push(a)}t.length>0&&this.emit("packets",t)},n._toArrayWrapedJson=function(e){try{var t=JSON.parse(e);return Array.isArray(t)?t:[t]}catch(e){throw new Error(e)}},t}(R);C.SUB_PROTOCOL={JSON:"msg.nicovideo.jp#json"},C.KEEP_ALIVE={ENABLED:!0,INTERVAL_MS:6e4};var M=function(e){function t(t){var n,r=t.thread,i=t.ticket,o=t.vpos,a=t.userId,s=t.premium,u=t.content,c=t.postkeyResponse,l=t.mail,f=t.sage,h=t.yugi,d=t.staff,p=t.sex,v=t.immunity,m=t.locale,g=t.count,y=t.origin;return(n=e.call(this,arguments[0])||this)._thread=void 0,n._vpos=void 0,n._mail=void 0,n._ticket=void 0,n._userId=void 0,n._premium=void 0,n._content=void 0,n._postkeyResponse=void 0,n._sage=void 0,n._yugi=void 0,n._staff=void 0,n._sex=void 0,n._immunity=void 0,n._locale=void 0,n._count=void 0,n._origin=void 0,n.thread=r,n.ticket=i,n.vpos=o,n.userId=a,n.premium=s,n.content=u,n._postkeyResponse=c,n.mail=l,n.sage=f,n._yugi=h,n.staff=d,n.sex=p,n.immunity=v,n.locale=m,n.count=g,n.origin=y,n}i(t,e);var n=t.prototype;return n.setPostkeyResponse=function(e){this._postkeyResponse=e},n.extractStatus=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.status}},n.extractNo=function(){var e=this.response,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.no}},n.toRequestFormat=function(){return{chat:Object.assign({thread:this.thread,vpos:this.vpos,mail:this.mail,ticket:this.ticket,user_id:this.userId,premium:this.premium,content:this.content,sage:this.sage,staff:this.staff,sex:this.sex,immunity:this.immunity,locale:this.locale,count:this.count,origin:this.origin},this._postkeyResponse)}},a(t,[{key:"thread",set:function(e){this._thread=e},get:function(){return this._thread}},{key:"vpos",set:function(e){this._vpos=e},get:function(){return this._vpos}},{key:"mail",set:function(e){this._mail=e},get:function(){return this._mail}},{key:"ticket",set:function(e){this._ticket=e},get:function(){return this._ticket}},{key:"userId",set:function(e){this._userId=e},get:function(){return this._userId}},{key:"content",set:function(e){this._content=e},get:function(){return this._content}},{key:"premium",set:function(e){this._premium=e},get:function(){return this._premium}},{key:"sage",set:function(e){this._sage=e},get:function(){return this._sage}},{key:"yugi",get:function(){return this._yugi}},{key:"staff",set:function(e){this._staff=e},get:function(){return this._staff}},{key:"sex",set:function(e){this._sex=e},get:function(){return this._sex}},{key:"immunity",set:function(e){this._immunity=e},get:function(){return this._immunity}},{key:"locale",set:function(e){this._locale=e},get:function(){return this._locale}},{key:"count",set:function(e){this._count=e},get:function(){return this._count}},{key:"origin",set:function(e){this._origin=e},get:function(){return this._origin}}]),t}(b),L=function(e){function t(t){var n,r=t.version,i=t.service,o=t.thread,a=t.fork,s=t.language,u=t.when,c=t.userId,l=t.resFrom,f=t.withGlobal,h=void 0===f?1:f,d=t.numRes,p=t.scores,v=void 0===p?0:p,m=t.nicoru,g=void 0===m?0:m,y=t.$meta;return(n=e.call(this,{thread:o,fork:a,language:s,when:u,userId:c,scores:v,nicoru:g,$meta:y})||this)._version=void 0,n._resFrom=void 0,n._numRes=void 0,n._withGlobal=void 0,n._service=void 0,n.resFrom=l,n.numRes=d,n.withGlobal=h,n.version=r,n.service=i,n}return i(t,e),t.prototype.toRequestFormat=function(){return{thread:{thread:this.thread,version:this.version,fork:this.fork,language:this.language,when:this.when,user_id:this.userId,res_from:this.resFrom,num_res:this.numRes,force_184:this.force184,with_global:this.withGlobal,scores:this.scores,nicoru:this.nicoru,userkey:this.userkey,threadkey:this.threadkey,waybackkey:this.waybackkey,service:this.service}}},a(t,[{key:"version",set:function(e){this._version=e},get:function(){return this._version}},{key:"resFrom",set:function(e){this._resFrom=e},get:function(){return this._resFrom}},{key:"numRes",set:function(e){this._numRes=e},get:function(){return this._numRes}},{key:"withGlobal",set:function(e){this._withGlobal=e},get:function(){return this._withGlobal}},{key:"service",set:function(e){this._service=e},get:function(){return this._service}}]),t}(E),k=function(e){function t(t){var n,r=t.thread,i=t.content,o=t.fork,a=t.language,s=t.when,u=t.userId,c=t.scores,l=void 0===c?0:c,f=t.nicoru,h=void 0===f?0:f,d=t.$meta;return(n=e.call(this,{thread:r,fork:o,language:a,when:s,userId:u,scores:l,nicoru:h,$meta:d})||this)._content=void 0,n.content=i,n}return i(t,e),t.prototype.toRequestFormat=function(){return{thread_leaves:{thread:this.thread,fork:this.fork,language:this.language,when:this.when,user_id:this.userId,content:this.content,scores:this.scores,nicoru:this.nicoru,force_184:this.force184,userkey:this.userkey,threadkey:this.threadkey,waybackkey:this.waybackkey}}},a(t,[{key:"content",set:function(e){this._content=e},get:function(){return this._content}}]),t}(E),I=function(e){function t(t){var n,i=t.context,o=t.keyRepository;switch((n=e.call(this)||this)._context=void 0,n._keyRepository=void 0,n._connection=void 0,n._threadRepository=void 0,n._context=i,n._keyRepository=o,n._threadRepository=new p,i.protocol){case l.PROTOCOL.HTTP:n._connection=new x(i.server);break;case l.PROTOCOL.WEB_SOCKET_PROXY:n._connection=new C(i.server);break;case l.PROTOCOL.WEB_SOCKET:n._connection=new C(i.server,C.SUB_PROTOCOL.JSON);break;default:throw new Error(i.protocol+" protocol can not use. see Context.PROTOCOL.")}return n._boundDispatchPushedPackets=n._dispatchPushedPackets.bind(r(n)),n._boundDispatchConnectionError=n._dispatchConnectionError.bind(r(n)),n._boundDispatchConnectionClose=n._dispatchConnectionClose.bind(r(n)),n._connection.on("packets",n._boundDispatchPushedPackets),n._connection.on("error",n._boundDispatchConnectionError),n._connection.on("close",n._boundDispatchConnectionClose),n}i(t,e);var n=t.prototype;return n.dispose=function(){this._connection.removeListener("packets",this._boundDispatchPushedPackets),this._connection.removeListener("error",this._boundDispatchConnectionError),this._connection.removeListener("close",this._boundDispatchConnectionClose),this._connection.disconnect(),this._connection=null,this._context=null,this._keyRepository=null;var e=this._threadRepository._threads.keys(),t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}var i=r;this._threadRepository._threads.get(i).dispose()}this._threadRepository=null},n._dispatchPushedPackets=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i;switch(Object.keys(o)[0]){case"chat":this._threadRepository.get({id:o.chat.thread,fork:o.chat.fork}).pushChat(o.chat);break;case"control":this._threadRepository.get({id:o.control.thread,fork:o.control.fork}).pushControl(o.control)}}},n._dispatchConnectionError=function(e){this.emit("connection:error",e)},n._dispatchConnectionClose=function(e){this.emit("connection:close",e)},n.createThread=function(e){var t=e.id,n=e.service,r=e.fork,i=e.language,o=e.leafExpression,a=e.nicoru,s=e.whenSec,u=e.isPrivate,c=e.noLeaf,l=e.withGlobal,f=e.revision;return void 0===l&&(l=i?0:1),this._threadRepository.create(this,{id:t,service:n,fork:r,language:i,nicoru:a,leafExpression:o,whenSec:s,isPrivate:u,noLeaf:c,withGlobal:l,revision:f})},n.fetchThread=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i in n){var o=n[i];if(!o.thread)throw new Error("too few arguments. expect $thread$ property.");"number"!=typeof o.resFrom||isNaN(o.resFrom)||(o.resFrom=new h(o.resFrom));for(var a=0;a<i;a++)if(n[a].thread.fork===o.thread.fork&&n[a].thread.whenSec===o.thread.whenSec&&n[a].thread.id===o.thread.id)throw new Error("invalid argument. can not specify same threadId at the same time.");void 0===o.leafExpression&&(o.leafExpression=o.thread.leafExpression),o.thread.noLeaf&&(o.leafExpression=null)}var s=n.reduce((function(t,n){return t.concat(e._createThreadPackets(n))}),[]);return this._fetchThread.apply(this,s).then((function(){var t=[],n=s,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;switch(a.extractResultCode()){case g.THREAD_TOO_OLD_THREADKEY:e._keyRepository.clearThreadkey({thread:a.$meta.thread}),t.push(a);break;case g.THREAD_TOO_OLD_USERKEY:e._keyRepository.clearUserkey(),t.push(a);break;case g.THREAD_TOO_OLD_WAYBACKKEY:e._keyRepository.clearWaybackkey({thread:a.$meta.thread}),t.push(a)}}for(var u=0,c=t;u<c.length;u++){c[u].clearResponse()}return e._fetchThread.apply(e,t)})).then((function(){var t=s,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i;if(o.extractResultCode()!==g.THREAD_FOUND)return Promise.reject(o.response)}return e._parseThreadPackets(s)})).then((function(){return n.map((function(e){return e.thread}))}))},n._fetchThread=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(0===n.length)return Promise.resolve();var i=n.map((function(t){return e._keyRepository?e._keyRepository.fetchKeysForThread({thread:t.$meta.thread,userId:t.userId}).then((function(e){return t.threadkey=e.threadkey,t.force184=e.force_184,t.userkey=e.userkey,t.waybackkey=e.waybackkey,t})):Promise.resolve(t)}));return Promise.all(i).then((function(t){var n;return(n=e._connection).send.apply(n,t)}))},n.fetchThreadLatest=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];o.thread&&(o.leafExpression=null,o.resFrom=1+(0|o.thread.lastRes))}return this.fetchThread.apply(this,t).then((function(e){return t.map((function(e){return e.thread?e.thread.chats.filter((function(t){return t.no>=e.resFrom})):[]}))}))},n.postChat=function(e){var t=this;return this._postChat(e).then((function(n){return n.extractStatus()===v.POST_INVALID_POSTKEY?(t._keyRepository.clearPostkey({thread:e.thread}),e.thread.lastRes=n.extractNo(),t._postChat(e)):n})).then((function(e){return e.extractStatus()!==v.POST_SUCCESS?Promise.reject(e.response):[e.response]}))},n.nicoruChat=function(e,t){var n=this;void 0===t&&(t=0);var r=this._threadRepository.get({id:e.thread,fork:e.fork,language:e.language});if(!r)throw new Error("thread is not detected.");return this._keyRepository.fetchNicorukey({thread:r}).then((function(t){var i=new O({thread:e.thread,user_id:n._context.userId,chatId:e.chatId,content:e.content,postdate:e.postdate,nicorukeyResponse:t,premium:n._context.isPremium?1:0,fork:r.fork,language:r.language,service:r.service,player_version:e.player_version});return n._connection.send(i).then((function(){return i}))})).then((function(e){return e.extractStatus()!==m.NICORU_SUCCESS?Promise.reject(e):e.response[0].nicoru_result})).catch((function(i){return i.extractStatus()===m.NICORU_TOO_OLD_NICORUKEY&&t<1?(n._keyRepository.clearNicorukey({thread:r}),n.nicoruChat(e,t+1)):Promise.reject(i.response[0].nicoru_result)}))},n._deleteComments=function(e){var t,n=this,r=e.thread,i=e.chatNos,o=e.isUndelete,a=void 0!==o&&o;return i.length<1?Promise.reject():this._keyRepository.fetchDeletekey({thread:r,chatNos:i,isUndelete:a}).then((function(e){return t=n._createDeleteCommentsPacket({thread:r,deletekey:e.deletekey,userId:n._context.userId,revision:r.revision,isUndelete:a,chatNos:i}),n._connection.send(t)})).then((function(){return t.extractStatus()!==y.DELETE_SUCCESS?Promise.reject(t.extractResponse()):t.extractResponse()}))},n.deleteComments=function(e){var t=e.thread,n=e.chatNos;return this._deleteComments({thread:t,chatNos:n})},n.undeleteComments=function(e){var t=e.thread,n=e.chatNos;return this._deleteComments({thread:t,chatNos:n,isUndelete:!0})},n.updateThread=function(e){var t,n=this,r=e.thread,i=e.chats,o=r.id,a=r.ticket,s=i.map((function(e){return n._createAddThreadItemPacket({vpos:e.vpos,mail:e.mail,content:e.content})}));return this._keyRepository.fetchUpdatekey({thread:r}).then((function(e){var r;return t=n._createUpdateThreadPacket({threadId:o,ticket:a,count:i.length,updatekey:e.updatekey}),s.push(t),(r=n._connection).send.apply(r,s)})).then((function(){return t.extractStatus()!==_.UPDATE_SUCCESS?Promise.reject(t.extractResponse()):t.extractResponse()}))},n._postChat=function(e){var t=this;return this._keyRepository.fetchPostkey({thread:e.thread,yugi:e.yugi}).then((function(n){return t._createChatPacket(Object.assign({postkeyResponse:n},e))})).then((function(e){return t._connection.send(e)})).then((function(e){return e[0]}))},n._parseThreadPackets=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i;if(o instanceof E){var a=o.$meta.thread,s=o.response,u=Array.isArray(s),c=0;for(s=u?s:s[Symbol.iterator]();;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var f=l,h=Object.keys(f).shift(),d=f[h];switch(h){case"thread":a.lastRes=d.last_res,a.ticket=d.ticket,a.locked=d.locked,a.revision=d.revision,a.resOffset=d.res_offset,a.buttonIgnored=d.button_ignored,a.clickRevision=d.click_revision,a.numClicks=d.num_clicks,a.ngResult=d.ng_result,a.ticket=d.ticket,a.revision=d.revision;break;case"chat":a.addChat(d);break;case"control":a.addControl(d);break;case"leaf":a.leaves.push(d);break;case"view_counter":a.viewCounter=d;break;case"global_num_res":a.globalNumRes=d.num_res}}}}},n._createThreadPackets=function(e){var t=e.thread,n=e.numRes,r=e.scores,i=e.resFrom,o=void 0===i?new h(-1e3):i,a=e.leafExpression,s=void 0===a?null:a,u=[],c=s?"20090904":"20061206";return u.push(new L({version:c,thread:t.id,service:t.service,numRes:n,scores:r,resFrom:s?void 0:o.valueOf(),fork:t.fork,nicoru:t.nicoru,language:t.language,when:t.whenSec,userId:this._context.userId,withGlobal:t.withGlobal,$meta:{thread:t}})),s&&u.push(new k({thread:t.id,language:t.language,when:t.whenSec,nicoru:t.nicoru,userId:this._context.userId,content:s.toString(),scores:r,$meta:{thread:t}})),u},n._createChatPacket=function(e){var t=e.thread,n=e.content,r=e.vpos,i=e.postkeyResponse,o=e.mail,a=void 0===o?"":o,s=e.sage,u=e.staff,c=e.sex,l=e.immunity,f=e.locale,h=e.count,d=e.origin;return new M({thread:t.id,content:n,vpos:r,mail:this._filterMail(a),ticket:t.ticket,userId:this._context.userId,premium:this._context.isPremium?1:void 0,sage:s,staff:u,sex:c,immunity:l,locale:f,count:h,origin:d,postkeyResponse:i,$meta:{thread:t}})},n._filterMail=function(e){return e.toLowerCase().split(" ").filter((function(e){return 0!==e.indexOf("_")})).join(" ")},n._createUpdateThreadPacket=function(e){var t=e.threadId,n=e.count,r=e.ticket,i=e.updatekey;return new T({thread:t,userId:this._context.userId,count:n,ticket:r,updatekey:i,premium:this._context.isPremium?1:0})},n._createAddThreadItemPacket=function(e){var t=e.vpos,n=e.mail,r=e.content;return new S({vpos:t,mail:n,content:r})},n._createDeleteCommentsPacket=function(e){var t=e.thread,n=e.userId,r=e.deletekey,i=e.revision,o=e.chatNos,a=e.isUndelete,s=void 0!==a&&a;return new w({thread:t.id,userId:n,deletekey:r,revision:i,chatNos:o,isUndelete:s})},t}(c.a),D=function(){function e(t){var n=t.videoLengthSec,r=t.isUnion,i=t.withNewNicoru,o=void 0!==i&&i;this._leafNum=void 0,this._commentNumPerLeaf=void 0,this._leafUnionString=void 0,this._withNewNicoru=void 0,this._leafNum=Math.ceil(n/60),this._commentNumPerLeaf=e.DEFAULT_COMMENT_NUM_PER_LEAF,n>e.BORDER_TIME_FOR_CALCULATION&&(this._commentNumPerLeaf=Math.ceil(e.BORDER_TIME_FOR_CALCULATION*e.DEFAULT_COMMENT_NUM_PER_LEAF/n)),this._leafUnionString=r?","+e.getUnion(n):"",this._withNewNicoru=o}return e.generateForNicovideo=function(t){var n=t.videoLengthSec,r=t.withNewNicoru,i=void 0!==r&&r,o=t.isUnion;return new e({videoLengthSec:n,isUnion:void 0===o||o,withNewNicoru:i})},e.getUnion=function(e){return e<60?100:e<300?250:e<600?500:1e3},e.prototype.toString=function(){return"0-"+this._leafNum+":"+this._commentNumPerLeaf+this._leafUnionString+(this._withNewNicoru?",nicoru:100":"")},e}();D.BORDER_TIME_FOR_CALCULATION=43200,D.DEFAULT_COMMENT_NUM_PER_LEAF=100,n.d(t,"Client",(function(){return I})),n.d(t,"Context",(function(){return l})),n.d(t,"KeyRepository",(function(){return f})),n.d(t,"LeafExpression",(function(){return D})),n.d(t,"ResFrom",(function(){return h})),n.d(t,"Thread",(function(){return d})),n.d(t,"postdate",(function(){return s}))},function(e,t,n){var r=n(16),i=n(60);e.exports=n(15)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(6),i=n(30),o=n(34),a=n(61)("src"),s=Function.toString,u=(""+s).split("toString");n(39).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(1),i=n(7),o=n(46),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";function r(e){return"[object Array]"===c.call(e)}function i(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===c.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var u=n(283),c=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===c.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:i,isDate:function(e){return"[object Date]"===c.call(e)},isFile:function(e){return"[object File]"===c.call(e)},isBlob:function(e){return"[object Blob]"===c.call(e)},isFunction:a,isStream:function(e){return o(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:s,merge:function e(){function t(t,r){"object"==typeof n[r]&&"object"==typeof t?n[r]=e(n[r],t):n[r]=t}for(var n={},r=0,i=arguments.length;r<i;r++)s(arguments[r],t);return n},deepMerge:function e(){function t(t,r){"object"==typeof n[r]&&"object"==typeof t?n[r]=e(n[r],t):n[r]="object"==typeof t?e({},t):t}for(var n={},r=0,i=arguments.length;r<i;r++)s(arguments[r],t);return n},extend:function(e,t,n){return s(t,(function(t,r){e[r]=n&&"function"==typeof t?u(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(78),i=n(46);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(79),i=n(60),o=n(35),a=n(45),s=n(34),u=n(172),c=Object.getOwnPropertyDescriptor;t.f=n(15)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(34),i=n(20),o=n(122)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";(function(e,r){function i(e,t){function n(){this.constructor=e}Xe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}function s(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:et}function u(){return++xt.mobxGuid}function c(e){throw l(!1,e),"X"}function l(e,t){if(!e)throw new Error("[mobx] "+(t||Je))}function f(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}function h(e){return null!==e&&"object"==typeof e}function d(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function p(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function v(e,t,n){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function m(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return h(e)&&!0===e[n]}}function g(e){return void 0!==s().Map&&e instanceof s().Map}function y(e){return e instanceof Set}function _(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}function b(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function E(e){return null===e?null:"object"==typeof e?""+e:e}function S(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function T(e,t){v(e,S(),t)}function w(e){return e[S()]=R,e}function O(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function R(){return this}function A(e,t,n){void 0===t&&(t=tt),void 0===n&&(n=tt);var r,i=new nt(e);return be("onBecomeObserved",i,t,r),_e(i,n),i}function P(e,t){return e===t}function x(e,t){var n=t?ot:at;return n[e]||(n[e]={configurable:!0,enumerable:t,get:function(){return C(this),this[e]},set:function(t){C(this),this[e]=t}})}function C(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var n in p(e,"__mobxDidRunLazyInitializers",!0),t){var r=t[n];r.propertyCreator(e,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function M(e,t){return function(){var n,r=function(r,i,o,a){if(!0===a)return t(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s=r.__mobxDecorators;p(r,"__mobxDecorators",$e({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:t,descriptor:o,decoratorTarget:r,decoratorArguments:n},x(i,e)};return L(arguments)?(n=Qe,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function L(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function k(e,t,n){return Oe(e)?e:Array.isArray(e)?pt.array(e,{name:n}):d(e)?pt.object(e,void 0,{name:n}):g(e)?pt.map(e,{name:n}):y(e)?pt.set(e,{name:n}):e}function I(e){return e}function D(e){var t=M(!0,(function(t,n,r,i,o){Be(t,n,r?r.initializer?r.initializer.call(t):r.value:void 0,e)})),n=(void 0!==r&&r.env,t);return n.enhancer=e,n}function N(e){return null==e?st:"string"==typeof e?{name:e,deep:!0}:e}function F(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?I:k}function U(e){c("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}function j(e){return e instanceof bt}function B(e){switch(e.dependenciesState){case vt.UP_TO_DATE:return!1;case vt.NOT_TRACKING:case vt.STALE:return!0;case vt.POSSIBLY_STALE:for(var t=q(!0),n=W(),r=e.observing,i=r.length,o=0;o<i;o++){var a=r[o];if(Ot(a)){if(xt.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return Y(n),K(t),!0}if(e.dependenciesState===vt.STALE)return Y(n),K(t),!0}}return X(e),Y(n),K(t),!1}}function G(e){var t=e.observers.length>0;xt.computationDepth>0&&t&&c(!1),xt.allowStateChanges||!t&&"strict"!==xt.enforceActions||c(!1)}function H(e,t,n){var r=q(!0);X(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++xt.runId;var i,o=xt.trackingDerivation;if(xt.trackingDerivation=e,!0===xt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new bt(e)}return xt.trackingDerivation=o,function(e){for(var t=e.observing,n=e.observing=e.newObserving,r=vt.UP_TO_DATE,i=0,o=e.unboundDepsCount,a=0;a<o;a++){0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=i,e.newObserving=null,o=t.length;for(;o--;){0===(s=t[o]).diffValue&&te(s,e),s.diffValue=0}for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,ee(s,e))}r!==vt.UP_TO_DATE&&(e.dependenciesState=r,e.onBecomeStale())}(e),e.observing.length,K(r),i}function V(e){var t=e.observing;e.observing=[];for(var n=t.length;n--;)te(t[n],e);e.dependenciesState=vt.NOT_TRACKING}function z(e){var t=W(),n=e();return Y(t),n}function W(){var e=xt.trackingDerivation;return xt.trackingDerivation=null,e}function Y(e){xt.trackingDerivation=e}function q(e){var t=xt.allowStateReads;return xt.allowStateReads=e,t}function K(e){xt.allowStateReads=e}function X(e){if(e.dependenciesState!==vt.UP_TO_DATE){e.dependenciesState=vt.UP_TO_DATE;for(var t=e.observing,n=t.length;n--;)t[n].lowestObserverState=vt.UP_TO_DATE}}function $(e,t){var n=function(){return J(e,t,this,arguments)};return n.isMobxAction=!0,n}function J(e,t,n,r){var i=function(e,t,n){var r=ce()&&!!e,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];fe({type:"action",name:e,object:t,arguments:a})}var u=W();re();var c=Q(!0),l=q(!0),f={prevDerivation:u,prevAllowStateChanges:c,prevAllowStateReads:l,notifySpy:r,startTime:i,actionId:St++,parentActionId:Et};return Et=f.actionId,f}(e,n,r);try{return t.apply(n,r)}catch(e){throw i.error=e,e}finally{!function(e){Et!==e.actionId&&c("invalid action stack. did you forget to finish an action?");Et=e.parentActionId,void 0!==e.error&&(xt.suppressReactionErrors=!0);Z(e.prevAllowStateChanges),K(e.prevAllowStateReads),ie(),Y(e.prevDerivation),e.notifySpy&&he({time:Date.now()-e.startTime});xt.suppressReactionErrors=!1}(i)}}function Q(e){var t=xt.allowStateChanges;return xt.allowStateChanges=e,t}function Z(e){xt.allowStateChanges=e}function ee(e,t){var n=e.observers.length;n&&(e.observersIndexes[t.__mapid]=n),e.observers[n]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function te(e,t){if(1===e.observers.length)e.observers.length=0,ne(e);else{var n=e.observers,r=e.observersIndexes,i=n.pop();if(i!==t){var o=r[t.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[t.__mapid]}}function ne(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,xt.pendingUnobservations.push(e))}function re(){xt.inBatch++}function ie(){if(0==--xt.inBatch){se();for(var e=xt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof wt&&n.suspend())}xt.pendingUnobservations=[]}}function oe(e){var t=xt.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&xt.inBatch>0&&ne(e),!1)}function ae(e,t){if(e.isTracing===mt.BREAK){var n=[];!function e(t,n,r){if(n.length>=1e3)return void n.push("(and many more)");n.push(""+new Array(r).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,n,r+1)}))}((r=e,Se(ze(r,i))),n,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof wt?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r,i}function se(){xt.inBatch>0||xt.isRunningReactions||Lt(ue)}function ue(){xt.isRunningReactions=!0;for(var e=xt.pendingReactions,t=0;e.length>0;){++t===Mt&&e.splice(0);for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}xt.isRunningReactions=!1}function ce(){return!!xt.spyListeners.length}function le(e){if(xt.spyListeners.length)for(var t=xt.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function fe(e){le($e($e({},e),{spyReportStart:!0}))}function he(e){le(e?$e($e({},e),{spyReportEnd:!0}):It)}function de(){c(!1)}function pe(e){return function(t,n,r){if(r){if(r.value)return{value:$(e,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return $(e,i.call(this))}}}return ve(e).apply(this,arguments)}}function ve(e){return function(t,n,r){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,get:function(){},set:function(t){p(this,n,Dt(e,t))}})}}function me(e,t,n){p(e,t,$(t,n.bind(e)))}function ge(e,t){function n(){e(r)}void 0===t&&(t=Ze);var r,i=t&&t.name||e.name||"Autorun@"+u();if(!t.scheduler&&!t.delay)r=new Ct(i,(function(){this.track(n)}),t.onError,t.requiresObservable);else{var o=ye(t),a=!1;r=new Ct(i,(function(){a||(a=!0,o((function(){a=!1,r.isDisposed||r.track(n)})))}),t.onError,t.requiresObservable)}return r.schedule(),r.getDisposer()}function ye(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Nt}function _e(e,t,n){return be("onBecomeUnobserved",e,t,n)}function be(e,t,n,r){var i="function"==typeof r?ze(t,n):ze(t),o="function"==typeof r?r:n,a=i[e];return"function"!=typeof a?c(!1):(i[e]=function(){a.call(this),o.call(this)},function(){i[e]=a})}function Ee(e,t,n,r){var i=(r=N(r)).defaultDecorator||(!1===r.deep?ft:ct);C(e),je(e,r.name,i.enhancer),re();try{for(var o in t){var a=Object.getOwnPropertyDescriptor(t,o);0;var s=(n&&o in n?n[o]:a.get?gt:i)(e,o,a,!0);s&&Object.defineProperty(e,o,s)}}finally{ie()}return e}function Se(e){var t,n,r={name:e.name};return e.observing&&e.observing.length>0&&(r.dependencies=(t=e.observing,n=[],t.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n).map(Se)),r}function Te(){this.message="FLOW_CANCELLED"}function we(e,t){if(null==e)return!1;if(void 0!==t){if(Ve(e)){var n=e.$mobx;return n.values&&!!n.values[t]}return!1}return Ve(e)||!!e.$mobx||rt(e)||kt(e)||Ot(e)}function Oe(e){return 1!==arguments.length&&c(!1),we(e)}function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!1;"boolean"==typeof e[e.length-1]&&(n=e.pop());var r=function(e){switch(e.length){case 0:return xt.trackingDerivation;case 1:return ze(e[0]);case 2:return ze(e[0],e[1])}}(e);if(!r)return c(!1);r.isTracing,mt.NONE,r.isTracing=n?mt.BREAK:mt.LOG}function Ae(e,t){void 0===t&&(t=void 0),re();try{return e.apply(t)}finally{ie()}}function Pe(e){return void 0!==e.interceptors&&e.interceptors.length>0}function xe(e,t){var n=e.interceptors||(e.interceptors=[]);return n.push(t),f((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Ce(e,t){var n=W();try{var r=e.interceptors;if(r)for(var i=0,o=r.length;i<o&&(l(!(t=r[i](t))||t.type,"Intercept handlers should return nothing or a change object"),t);i++);return t}finally{Y(n)}}function Me(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Le(e,t){var n=e.changeListeners||(e.changeListeners=[]);return n.push(t),f((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ke(e,t){var n=W(),r=e.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);Y(n)}}function Ie(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function De(e){Object.defineProperty(Wt.prototype,""+e,Ie(e))}function Ne(e){for(var t=Ht;t<e;t++)De(t);Ht=e}function Fe(e){return h(e)&&qt(e.$mobx)}function Ue(e){return e&&e.toString?e.toString():new String(e).toString()}function je(e,t,n){void 0===t&&(t=""),void 0===n&&(n=k);var r=e.$mobx;return r||(d(e)||(t=(e.constructor.name||"ObservableObject")+"@"+u()),t||(t="ObservableObject@"+u()),v(e,"$mobx",r=new en(e,t,n)),r)}function Be(e,t,n,r){var i=je(e);if(Pe(i)){var o=Ce(i,{object:e,name:t,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[t]=new Tt(n,r,i.name+"."+t,!1)).value,Object.defineProperty(e,t,function(e){return tn[e]||(tn[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),i.keys&&i.keys.push(t),function(e,t,n,r){var i=Me(e),o=ce(),a=i||o?{type:"add",object:t,name:n,newValue:r}:null;o&&fe($e($e({},a),{name:e.name,key:n}));i&&ke(e,a);o&&he()}(i,e,t,n)}function Ge(e,t,n){var r=je(e);n.name=r.name+"."+t,n.context=e,r.values[t]=new wt(n),Object.defineProperty(e,t,function(e){return nn[e]||(nn[e]={configurable:xt.computedConfigurable,enumerable:!1,get:function(){return He(this).read(this,e)},set:function(t){He(this).write(this,e,t)}})}(t))}function He(e){var t=e.$mobx;return t||(C(e),e.$mobx)}function Ve(e){return!!h(e)&&(C(e),rn(e.$mobx))}function ze(e,t){if("object"==typeof e&&null!==e){if(Fe(e))return void 0!==t&&c(!1),e.$mobx.atom;if(Zt(e))return e.$mobx;if($t(e)){var n=e;return void 0===t?ze(n._keys):((r=n._data.get(t)||n._hasMap.get(t))||c(!1),r)}var r;if(C(e),t&&!e.$mobx&&e[t],Ve(e))return t?((r=e.$mobx.values[t])||c(!1),r):c(!1);if(rt(e)||Ot(e)||kt(e))return e}else if("function"==typeof e&&kt(e.$mobx))return e.$mobx;return c(!1)}function We(e,t){return e||c("Expecting some object"),void 0!==t?We(ze(e,t)):rt(e)||Ot(e)||kt(e)?e:$t(e)||Zt(e)?e:(C(e),e.$mobx?e.$mobx:void c(!1))}function Ye(e,t,n){return void 0===n&&(n=-1),function e(t,n,r,i,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var a=typeof t;if("function"!==a&&"object"!==a&&"object"!=typeof n)return!1;t=qe(t),n=qe(n);var s=on.call(t);if(s!==on.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(n)}var u="[object Array]"===s;if(!u){if("object"!=typeof t||"object"!=typeof n)return!1;var c=t.constructor,l=n.constructor;if(c!==l&&!("function"==typeof c&&c instanceof c&&"function"==typeof l&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}if(0===r)return!1;r<0&&(r=-1);o=o||[];var f=(i=i||[]).length;for(;f--;)if(i[f]===t)return o[f]===n;if(i.push(t),o.push(n),u){if((f=t.length)!==n.length)return!1;for(;f--;)if(!e(t[f],n[f],r-1,i,o))return!1}else{var h=Object.keys(t),d=void 0;if(f=h.length,Object.keys(n).length!==f)return!1;for(;f--;)if(d=h[f],!Ke(n,d)||!e(t[d],n[d],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(e,t,n)}function qe(e){return Fe(e)?e.peek():g(e)||$t(e)?_(e.entries()):y(e)||Zt(e)?_(e.entries()):e}function Ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,"a",(function(){return Dt})),n.d(t,"b",(function(){return _t})),n.d(t,"c",(function(){return Ve})),n.d(t,"d",(function(){return pt}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Xe=function(e,t){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},$e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Je="An invariant failed, however the error is obfuscated because this is an production build.",Qe=[];Object.freeze(Qe);var Ze={};Object.freeze(Ze);var et={},tt=function(){},nt=function(){function e(e){void 0===e&&(e="Atom@"+u()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=vt.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return oe(this)},e.prototype.reportChanged=function(){re(),function(e){if(e.lowestObserverState!==vt.STALE){e.lowestObserverState=vt.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===vt.UP_TO_DATE&&(r.isTracing!==mt.NONE&&ae(r,e),r.onBecomeStale()),r.dependenciesState=vt.STALE}}}(this),ie()},e.prototype.toString=function(){return this.name},e}(),rt=m("Atom",nt),it={identity:P,structural:function(e,t){return Ye(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||P(e,t)},shallow:function(e,t){return Ye(e,t,1)}},ot={},at={},st={deep:!0,name:void 0,defaultDecorator:void 0},ut={deep:!1,name:void 0,defaultDecorator:void 0};Object.freeze(st),Object.freeze(ut);var ct=D(k),lt=D((function(e,t,n){return null==e?e:Ve(e)||Fe(e)||$t(e)||Zt(e)?e:Array.isArray(e)?pt.array(e,{name:n,deep:!1}):d(e)?pt.object(e,void 0,{name:n,deep:!1}):g(e)?pt.map(e,{name:n,deep:!1}):y(e)?pt.set(e,{name:n,deep:!1}):c(!1)})),ft=D(I),ht=D((function(e,t,n){return Ye(e,t)?t:e})),dt={box:function(e,t){arguments.length>2&&U("box");var n=N(t);return new Tt(e,F(n),n.name,!0,n.equals)},shallowBox:function(e,t){return arguments.length>2&&U("shallowBox"),pt.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&U("array");var n=N(t);return new Wt(e,F(n),n.name)},shallowArray:function(e,t){return arguments.length>2&&U("shallowArray"),pt.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&U("map");var n=N(t);return new Xt(e,F(n),n.name)},shallowMap:function(e,t){return arguments.length>2&&U("shallowMap"),pt.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&U("set");var n=N(t);return new Qt(e,F(n),n.name)},object:function(e,t,n){"string"==typeof arguments[1]&&U("object");var r=N(n);return Ee({},e,t,r)},shallowObject:function(e,t){return"string"==typeof arguments[1]&&U("shallowObject"),pt.object(e,{},{name:t,deep:!1})},ref:ft,shallow:lt,deep:ct,struct:ht},pt=function(e,t,n){if("string"==typeof arguments[1])return ct.apply(null,arguments);if(Oe(e))return e;var r=d(e)?pt.object(e,t,n):Array.isArray(e)?pt.array(e,t):g(e)?pt.map(e,t):y(e)?pt.set(e,t):e;if(r!==e)return r;c(!1)};Object.keys(dt).forEach((function(e){return pt[e]=dt[e]}));var vt,mt,gt=M(!1,(function(e,t,n,r,i){var o=n.get,a=n.set,s=i[0]||{};Ge(e,t,$e({get:o,set:a},s))})),yt=gt({equals:it.structural}),_t=function(e,t,n){if("string"==typeof t)return gt.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return gt.apply(null,arguments);var r="object"==typeof t?t:{};return r.get=e,r.set="function"==typeof t?t:r.set,r.name=r.name||e.name||"",new wt(r)};_t.struct=yt,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(vt||(vt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(mt||(mt={}));var bt=function(e){this.cause=e},Et=0,St=1,Tt=function(e){function t(t,n,r,i,o){void 0===r&&(r="ObservableValue@"+u()),void 0===i&&(i=!0),void 0===o&&(o=it.default);var a=e.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(t,void 0,r),i&&ce()&&le({type:"create",name:a.name,newValue:""+a.value}),a}return i(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==xt.UNCHANGED){var n=ce();n&&fe({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),n&&he()}},t.prototype.prepareNewValue=function(e){if(G(this),Pe(this)){var t=Ce(this,{object:this,type:"update",newValue:e});if(!t)return xt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?xt.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),Me(this)&&ke(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return xe(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Le(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return E(this.get())},t}(nt);Tt.prototype[b()]=Tt.prototype.valueOf;m("ObservableValue",Tt);var wt=function(){function e(e){this.dependenciesState=vt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=vt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+u(),this.value=new bt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=mt.NONE,this.derivation=e.get,this.name=e.name||"ComputedValue@"+u(),e.set&&(this.setter=$(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?it.structural:it.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState===vt.UP_TO_DATE){e.lowestObserverState=vt.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===vt.UP_TO_DATE&&(r.dependenciesState=vt.POSSIBLY_STALE,r.isTracing!==mt.NONE&&ae(r,e),r.onBecomeStale())}}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&c("Cycle detected in computation "+this.name+": "+this.derivation),0!==xt.inBatch||0!==this.observers.length||this.keepAlive?(oe(this),B(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState!==vt.STALE){e.lowestObserverState=vt.STALE;for(var t=e.observers,n=t.length;n--;){var r=t[n];r.dependenciesState===vt.POSSIBLY_STALE?r.dependenciesState=vt.STALE:r.dependenciesState===vt.UP_TO_DATE&&(e.lowestObserverState=vt.UP_TO_DATE)}}}(this)):B(this)&&(this.warnAboutUntrackedRead(),re(),this.value=this.computeValue(!1),ie());var e=this.value;if(j(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(j(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){l(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else l(!1,!1)},e.prototype.trackAndCompute=function(){ce()&&le({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===vt.NOT_TRACKING,n=this.computeValue(!0),r=t||j(e)||j(n)||!this.equals(e,n);return r&&(this.value=n),r},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,xt.computationDepth++,e)t=H(this,this.derivation,this.scope);else if(!0===xt.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new bt(e)}return xt.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(V(this),this.value=void 0)},e.prototype.observe=function(e,t){var n=this,r=!0,i=void 0;return ge((function(){var o=n.get();if(!r||t){var a=W();e({type:"update",object:n,newValue:o,oldValue:i}),Y(a)}r=!1,i=o}))},e.prototype.warnAboutUntrackedRead=function(){},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return E(this.get())},e}();wt.prototype[b()]=wt.prototype.valueOf;var Ot=m("ComputedValue",wt),Rt=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},At=!0,Pt=!1,xt=function(){var e=s();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(At=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Rt).version&&(At=!1),At?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Rt):(setTimeout((function(){Pt||c("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Rt)}(),Ct=function(){function e(e,t,n,r){void 0===e&&(e="Reaction@"+u()),void 0===r&&(r=!1),this.name=e,this.onInvalidate=t,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=vt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+u(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=mt.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,xt.pendingReactions.push(this),se())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(re(),this._isScheduled=!1,B(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&ce()&&le({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}ie()}},e.prototype.track=function(e){re();var t,n=ce();n&&(t=Date.now(),fe({name:this.name,type:"reaction"})),this._isRunning=!0;var r=H(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&V(this),j(r)&&this.reportExceptionInDerivation(r.cause),n&&he({time:Date.now()-t}),ie()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(xt.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";xt.suppressReactionErrors,ce()&&le({type:"error",name:this.name,message:n,error:""+e}),xt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(re(),V(this),ie()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),Re(this,e)},e}(),Mt=100,Lt=function(e){return e()},kt=m("Reaction",Ct),It={spyReportEnd:!0},Dt=function(e,t,n,r){return 1===arguments.length&&"function"==typeof e?$(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?$(e,t):1===arguments.length&&"string"==typeof e?pe(e):!0!==r?pe(t).apply(null,arguments):void(e[t]=$(e.name||t,n.value))};Dt.bound=function(e,t,n,r){return!0===r?(me(e,t,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return me(this,t,n.value||n.initializer.call(this)),this[t]},set:de}:{enumerable:!1,configurable:!0,set:function(e){me(this,t,e)},get:function(){}}};var Nt=function(e){return e()};Te.prototype=Object.create(Error.prototype);var Ft,Ut,jt,Bt,Gt=(Ft=!1,Ut={},Object.defineProperty(Ut,"0",{set:function(){Ft=!0}}),Object.create(Ut)[0]=1,!1===Ft),Ht=0,Vt=function(){};jt=Vt,Bt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(jt.prototype,Bt):void 0!==jt.prototype.__proto__?jt.prototype.__proto__=Bt:jt.prototype=Bt,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(e){Object.defineProperty(Vt.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var zt=function(){function e(e,t,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new nt(e||"ObservableArray@"+u()),this.enhancer=function(n,r){return t(n,r,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return xe(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Le(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>Ht&&Ne(e+t+1)},e.prototype.spliceWithArray=function(e,t,n){var r=this;G(this.atom);var i=this.values.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=Qe),Pe(this)){var o=Ce(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!o)return Qe;t=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map((function(e){return r.enhancer(e,void 0)}))).length-t;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice(e,n,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,a([e,t],n));var i=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),i},e.prototype.notifyArrayChildUpdate=function(e,t,n){var r=!this.owned&&ce(),i=Me(this),o=i||r?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;r&&fe($e($e({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&ke(this,o),r&&he()},e.prototype.notifyArraySplice=function(e,t,n){var r=!this.owned&&ce(),i=Me(this),o=i||r?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&fe($e($e({},o),{name:this.atom.name})),this.atom.reportChanged(),i&&ke(this,o),r&&he()},e}(),Wt=function(e){function t(t,n,r,i){void 0===r&&(r="ObservableArray@"+u()),void 0===i&&(i=!1);var o=e.call(this)||this,a=new zt(r,n,o,i);if(v(o,"$mobx",a),t&&t.length){var s=Q(!0);o.spliceWithArray(0,0,t),Z(s)}return Gt&&Object.defineProperty(a.array,"0",Yt),o}return i(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return Fe(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,n){void 0===n&&(n=0),arguments.length;var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},t.prototype.findIndex=function(e,t,n){void 0===n&&(n=0),arguments.length;for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(e.call(t,r[o],o,this))return o;return-1},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,n)},t.prototype.spliceWithArray=function(e,t,n){return this.$mobx.spliceWithArray(e,t,n)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,e),n.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$mobx;return n.spliceWithArray(0,0,e),n.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function n(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(n.call(this,e),n.call(this,t),e!==t){var r,i=this.$mobx.values;r=e<t?a(i.slice(0,e),i.slice(e+1,t+1),[i[e]],i.slice(t+1)):a(i.slice(0,t),[i[e]],i.slice(t,e),i.slice(e+1)),this.replace(r)}},t.prototype.get=function(e){var t=this.$mobx;if(t&&e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e])},t.prototype.set=function(e,t){var n=this.$mobx,r=n.values;if(e<r.length){G(n.atom);var i=r[e];if(Pe(n)){var o=Ce(n,{type:"update",object:this,index:e,newValue:t});if(!o)return;t=o.newValue}(t=n.enhancer(t,i))!==i&&(r[e]=t,n.notifyArrayChildUpdate(e,t,i))}else{if(e!==r.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+r.length);n.spliceWithArray(e,0,[t])}},t}(Vt);T(Wt.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return w({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Wt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),p(Wt.prototype,O(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){var t=Array.prototype[e];l("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),p(Wt.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),function(e,t){for(var n=0;n<t.length;n++)p(e,t[n],e[t[n]])}(Wt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var Yt=Ie(0);Ne(1e3);var qt=m("ObservableArrayAdministration",zt),Kt={},Xt=function(){function e(e,t,n){if(void 0===t&&(t=k),void 0===n&&(n="ObservableMap@"+u()),this.enhancer=t,this.name=n,this.$mobx=Kt,this._keys=new Wt(void 0,I,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!xt.trackingDerivation)return this._has(e);var n=this._hasMap.get(e);if(!n){var r=n=new Tt(this._has(e),I,this.name+"."+Ue(e)+"?",!1);this._hasMap.set(e,r),_e(r,(function(){return t._hasMap.delete(e)}))}return n.get()},e.prototype.set=function(e,t){var n=this._has(e);if(Pe(this)){var r=Ce(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(Pe(this)&&!(i=Ce(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=ce(),r=Me(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return n&&fe($e($e({},i),{name:this.name,key:e})),Ae((function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),r&&ke(this,i),n&&he(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap.get(e);n&&n.setNewValue(t)},e.prototype._updateValue=function(e,t){var n=this._data.get(e);if((t=n.prepareNewValue(t))!==xt.UNCHANGED){var r=ce(),i=Me(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;r&&fe($e($e({},o),{name:this.name,key:e})),n.setNewValue(t),i&&ke(this,o),r&&he()}},e.prototype._addValue=function(e,t){var n=this;Ae((function(){var r=new Tt(t,n.enhancer,n.name+"."+Ue(e),!1);n._data.set(e,r),t=r.value,n._updateHasMapEntry(e,!0),n._keys.push(e)}));var r=ce(),i=Me(this),o=i||r?{type:"add",object:this,name:e,newValue:t}:null;r&&fe($e($e({},o),{name:this.name,key:e})),i&&ke(this,o),r&&he()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[S()]()},e.prototype.values=function(){var e=this,t=0;return w({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return w({next:function(){if(t<e._keys.length){var n=e._keys[t++];return{value:[n,e.get(n)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var n=this;this._keys.forEach((function(r){return e.call(t,n.get(r),r,n)}))},e.prototype.merge=function(e){var t=this;return $t(e)&&(e=e.toJS()),Ae((function(){d(e)?Object.keys(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=o(e,2),r=n[0],i=n[1];return t.set(r,i)})):g(e)?e.constructor!==Map?c("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,n){return t.set(n,e)})):null!=e&&c("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;Ae((function(){z((function(){e._keys.slice().forEach((function(t){return e.delete(t)}))}))}))},e.prototype.replace=function(e){var t=this;return Ae((function(){for(var n,r=g(n=e)||$t(n)?n:Array.isArray(n)?new Map(n):d(n)?new Map(Object.entries(n)):c("Cannot convert to map from '"+n+"'"),i=t._keys,o=Array.from(r.keys()),a=!1,s=0;s<i.length;s++){var u=i[s];i.length===o.length&&u!==o[s]&&(a=!0),r.has(u)||(a=!0,t.delete(u))}r.forEach((function(e,n){t._data.has(n)||(a=!0),t.set(n,e)})),a&&t._keys.replace(o)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach((function(n){return t["symbol"==typeof n?n:Ue(n)]=e.get(n)})),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach((function(n){return t.set(n,e.get(n))})),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map((function(t){return Ue(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return Le(this,e)},e.prototype.intercept=function(e){return xe(this,e)},e}();T(Xt.prototype,(function(){return this.entries()})),v(Xt.prototype,O(),"Map");var $t=m("ObservableMap",Xt),Jt={},Qt=function(){function e(e,t,n){if(void 0===t&&(t=k),void 0===n&&(n="ObservableSet@"+u()),this.name=n,this.$mobx=Jt,this._data=new Set,this._atom=A(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,r){return t(e,r,n)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;Ae((function(){z((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var n=this;this._data.forEach((function(r){e.call(t,r,r,n)}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((G(this._atom),Pe(this))&&!(i=Ce(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){Ae((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var n=ce(),r=Me(this),i=r||n?{type:"add",object:this,newValue:e}:null;0,r&&ke(this,i)}return this},e.prototype.delete=function(e){var t=this;if(Pe(this)&&!(i=Ce(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var n=ce(),r=Me(this),i=r||n?{type:"delete",object:this,oldValue:e}:null;return Ae((function(){t._atom.reportChanged(),t._data.delete(e)})),r&&ke(this,i),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=_(this.keys()),n=_(this.values());return w({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,n=0;return void 0!==this._data.values?e=_(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),w({next:function(){return n<e.length?{value:t.dehanceValue(e[n++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return Zt(e)&&(e=e.toJS()),Ae((function(){Array.isArray(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):y(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&c("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return Le(this,e)},e.prototype.intercept=function(e){return xe(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+_(this.keys()).join(", ")+" ]"},e}();T(Qt.prototype,(function(){return this.values()})),v(Qt.prototype,O(),"Set");var Zt=m("ObservableSet",Qt),en=function(){function e(e,t,n){this.target=e,this.name=t,this.defaultEnhancer=n,this.values={}}return e.prototype.read=function(e,t){if(this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,n){var r=this.target;r!==e&&this.illegalAccess(e,t);var i=this.values[t];if(i instanceof wt)i.set(n);else{if(Pe(this)){if(!(s=Ce(this,{type:"update",object:r,name:t,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==xt.UNCHANGED){var o=Me(this),a=ce(),s=o||a?{type:"update",object:r,oldValue:i.value,name:t,newValue:n}:null;a&&fe($e($e({},s),{name:this.name,key:t})),i.setNewValue(n),o&&ke(this,s),a&&he()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(Pe(this))if(!(o=Ce(this,{object:t,name:e,type:"remove"})))return;try{re();var n=Me(this),r=ce(),i=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var o=n||r?{type:"remove",object:t,oldValue:i,name:e}:null;r&&fe($e($e({},o),{name:this.name,key:e})),n&&ke(this,o),r&&he()}finally{ie()}}},e.prototype.illegalAccess=function(e,t){},e.prototype.observe=function(e,t){return Le(this,e)},e.prototype.intercept=function(e){return xe(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new Wt(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Tt})),I,"keys("+this.name+")",!0)),this.keys.slice()},e}(),tn=Object.create(null),nn=Object.create(null),rn=m("ObservableObjectAdministration",en),on=Object.prototype.toString;"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return xt.spyListeners.push(e),f((function(){xt.spyListeners=xt.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:function(e,t){return(void 0!==t?ze(e,t):Ve(e)||$t(e)||Zt(e)?We(e):ze(e)).name}},$mobx:"$mobx"})}).call(this,n(22),n(82))},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(25);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(7);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NoPermission=0]="NoPermission",e[e.Crowded=1]="Crowded",e[e.ServiceTemporarilyUnavailable=2]="ServiceTemporarilyUnavailable",e[e.TooManyWatchings=3]="TooManyWatchings",e[e.UserBanned=4]="UserBanned",e[e.TooManyConnections=5]="TooManyConnections",e[e.TemporarilyCrowded=6]="TemporarilyCrowded",e[e.Aborted=7]="Aborted",e[e.MaintenanceIn=8]="MaintenanceIn",e[e.TimeshiftPermissionExpired=9]="TimeshiftPermissionExpired"}(t.AudiencePermissionDeniedReason||(t.AudiencePermissionDeniedReason={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(723);t.default=r.Player,t.HlsFmp4LivePlayer=r.Player,t.HlsFmp4LivePlayerEvents=r.PlayerEvents,t.HlsFmp4LivePlayerOptions=r.PlayerOptions},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(1),i=n(39),o=n(7);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(40),i=n(78),o=n(20),a=n(17),s=n(139);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var v,m,g=o(t),y=i(g),_=r(s,p,3),b=a(y.length),E=0,S=n?d(t,b):u?d(t,0):void 0;b>E;E++)if((h||E in y)&&(m=_(v=y[E],E,g),e))if(n)S[E]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return E;case 2:S.push(v)}else if(l)return!1;return f?-1:c||l?l:S}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),i=function(e){this.reason=e,this.name="permission_error",this.message=r.AudiencePermissionDeniedReason[e]};t.AudiencePermissionDeniedEvent=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return i(t,e),t}(Error));t.RuntimeError=o},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){}}}(),e.exports=n(574)},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.toQueryString=r.toQueryString;var i=n(2);t.ImageLogger=i.ImageLogger;var o=n(3);t.FetchLogger=o.FetchLogger;var a=n(4);t.ClientLogger=a.ClientLogger;var s=n(6);t.isFlashEnabled=s.isFlashEnabled;var u=n(7);t.ConsoleLogger=u.ConsoleLogger,t.LogLevel=u.LogLevel},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryString=function(e){var t=[];t.push("id="+e.id);var n=e.params;for(var r in n)n.hasOwnProperty(r)&&t.push(r+"="+encodeURIComponent(n[r]));return"?"+t.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.resourcePath=e}return e.prototype.log=function(e){var t=this;return new Promise((function(n,i){var o=t.resourcePath+r.toQueryString(e),a=document.createElement("img");a.onload=function(){return n(o)},a.onerror=function(){return i(new Error("Not Found"))},a.src=o}))},e}();t.ImageLogger=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.resourcePath=e}return e.prototype.log=function(e){var t=this.resourcePath+r.toQueryString(e);return fetch(t,{mode:"cors",credentials:"include"})},e}();t.FetchLogger=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=function(){function e(e){this.apiBaseUrl=e}return e.prototype.log=function(t){var n=r(this.apiBaseUrl,"client_logs"),i=new Headers({Accept:"application/json","Content-Type":"application/json"}),o=t;o.time=o.time||e.toTimeFormat(new Date),o.reporter=o.reporter||e.DEFAULT_REPOTER,o.clientVersion=o.clientVersion||e.DEFAULT_CLIENT_VERSION;try{var a=JSON.stringify(o)}catch(e){throw new Error("parameter error:"+e)}return fetch(n,{method:"POST",headers:i,body:a,mode:"cors",credentials:"include"})},e.toTimeFormat=function(e){return e.getTime()/1e3},e}();i.DEFAULT_REPOTER="NONE",i.DEFAULT_CLIENT_VERSION="NONE",t.ClientLogger=i},function(e,t,n){var r,i,o;o=function(){function e(e,t){return(e=(e=(e=e.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|&|#[^!])/g,"$1")).replace(/(\?.+)\?/g,"$1&")}return function(){var t=arguments;"object"==typeof arguments[0]&&(t=arguments[0],arguments[1]);var n=[].slice.call(t,0).join("/");return e(n)}},void 0!==e&&e.exports?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFlashEnabled=function(){var e="undefined",t="Shockwave Flash",n="application/x-shockwave-flash",r=navigator.plugins;if(typeof r!==e&&"object"==typeof r[t]){var i=navigator.mimeTypes;if(r[t].description&&typeof i!==e&&i[n]&&i[n].enabledPlugin)return!0}else if(typeof window.ActiveXObject!==e)try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){return!1}return!1}},function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.NONE=99]="NONE"}(n=t.LogLevel||(t.LogLevel={}));var r=function(){function e(e,t){void 0===e&&(e=n.ERROR),void 0===t&&(t="undefined"),this.logLevel=e,this.targetName=t,this.fatal=this.createExtraConsoleMethod(n.FATAL,(function(){return console.error})),this.error=this.createExtraConsoleMethod(n.ERROR,(function(){return console.error})),this.warn=this.createExtraConsoleMethod(n.WARN,(function(){return console.warn})),this.info=this.createExtraConsoleMethod(n.INFO,(function(){return console.info})),this.debug=this.createExtraConsoleMethod(n.DEBUG,(function(){return console.log})),this.verbose=this.createExtraConsoleMethod(n.VERBOSE,(function(){return console.log})),this.infoGroupCollapsed=this.attachLogLevelChecker(n.INFO,(function(){return console.groupCollapsed})),this.infoGroupEnd=this.attachLogLevelChecker(n.INFO,(function(){return console.groupEnd}))}return e.prototype.infoGroup=function(e,t){var r=this.attachLogLevelChecker(n.INFO,(function(){return t}));this.infoGroupCollapsed(e),r(),this.infoGroupEnd()},e.prototype.attachFormatter=function(e,t){var n=this;return function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.apply(void 0,[n.format(e,r)].concat(i))}},e.prototype.attachLogLevelChecker=function(e,t){var n=this;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!(e<n.logLevel))try{var o=t();o.apply(void 0,r)}catch(e){}}},e.prototype.createExtraConsoleMethod=function(e,t){return this.attachFormatter(e,this.attachLogLevelChecker(e,t))},e.prototype.format=function(e,t){return"string"!=typeof t?t:"["+n[e]+"]["+this.targetName+"]:"+t},e.prototype.setLevel=function(e){this.logLevel=e},e}();t.ConsoleLogger=r}])},function(e,t,n){"use strict";if(n(15)){var r=n(58),i=n(6),o=n(7),a=n(1),s=n(99),u=n(145),c=n(40),l=n(67),f=n(60),h=n(30),d=n(69),p=n(47),v=n(17),m=n(198),g=n(63),y=n(45),_=n(34),b=n(80),E=n(8),S=n(20),T=n(136),w=n(64),O=n(37),R=n(65).f,A=n(138),P=n(61),x=n(10),C=n(49),M=n(89),L=n(96),k=n(141),I=n(73),D=n(93),N=n(66),F=n(140),U=n(188),j=n(16),B=n(36),G=j.f,H=B.f,V=i.RangeError,z=i.TypeError,W=i.Uint8Array,Y=Array.prototype,q=u.ArrayBuffer,K=u.DataView,X=C(0),$=C(2),J=C(3),Q=C(4),Z=C(5),ee=C(6),te=M(!0),ne=M(!1),re=k.values,ie=k.keys,oe=k.entries,ae=Y.lastIndexOf,se=Y.reduce,ue=Y.reduceRight,ce=Y.join,le=Y.sort,fe=Y.slice,he=Y.toString,de=Y.toLocaleString,pe=x("iterator"),ve=x("toStringTag"),me=P("typed_constructor"),ge=P("def_constructor"),ye=s.CONSTR,_e=s.TYPED,be=s.VIEW,Ee=C(1,(function(e,t){return Re(L(e,e[ge]),t)})),Se=o((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),Te=!!W&&!!W.prototype.set&&o((function(){new W(1).set({})})),we=function(e,t){var n=p(e);if(n<0||n%t)throw V("Wrong offset!");return n},Oe=function(e){if(E(e)&&_e in e)return e;throw z(e+" is not a typed array!")},Re=function(e,t){if(!(E(e)&&me in e))throw z("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Pe(L(e,e[ge]),t)},Pe=function(e,t){for(var n=0,r=t.length,i=Re(e,r);r>n;)i[n]=t[n++];return i},xe=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},Ce=function(e){var t,n,r,i,o,a,s=S(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=A(s);if(null!=h&&!T(h)){for(a=h.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,n=v(s.length),i=Re(this,n);n>t;t++)i[t]=f?l(s[t],t):s[t];return i},Me=function(){for(var e=0,t=arguments.length,n=Re(this,t);t>e;)n[e]=arguments[e++];return n},Le=!!W&&o((function(){de.call(new W(1))})),ke=function(){return de.apply(Le?fe.call(Oe(this)):Oe(this),arguments)},Ie={copyWithin:function(e,t){return U.call(Oe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Oe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Oe(this),arguments)},filter:function(e){return Ae(this,$(Oe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Oe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(Oe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Oe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Oe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Oe(this),arguments)},lastIndexOf:function(e){return ae.apply(Oe(this),arguments)},map:function(e){return Ee(Oe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Oe(this),arguments)},reduceRight:function(e){return ue.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return J(Oe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Oe(this),e)},subarray:function(e,t){var n=Oe(this),r=n.length,i=g(e,r);return new(L(n,n[ge]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===t?r:g(t,r))-i))}},De=function(e,t){return Ae(this,fe.call(Oe(this),e,t))},Ne=function(e){Oe(this);var t=we(arguments[1],1),n=this.length,r=S(e),i=v(r.length),o=0;if(i+t>n)throw V("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Fe={entries:function(){return oe.call(Oe(this))},keys:function(){return ie.call(Oe(this))},values:function(){return re.call(Oe(this))}},Ue=function(e,t){return E(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},je=function(e,t){return Ue(e,t=y(t,!0))?f(2,e[t]):H(e,t)},Be=function(e,t,n){return!(Ue(e,t=y(t,!0))&&E(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};ye||(B.f=je,j.f=Be),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:je,defineProperty:Be}),o((function(){he.call({})}))&&(he=de=function(){return ce.call(this)});var Ge=d({},Ie);d(Ge,Fe),h(Ge,pe,Fe.values),d(Ge,{slice:De,set:Ne,constructor:function(){},toString:he,toLocaleString:ke}),xe(Ge,"buffer","b"),xe(Ge,"byteOffset","o"),xe(Ge,"byteLength","l"),xe(Ge,"length","e"),G(Ge,ve,{get:function(){return this[_e]}}),e.exports=function(e,t,n,u){var c=e+((u=!!u)?"Clamped":"")+"Array",f="get"+e,d="set"+e,p=i[c],g=p||{},y=p&&O(p),_=!p||!s.ABV,S={},T=p&&p.prototype,A=function(e,n){G(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[f](n*t+r.o,Se)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*t+i.o,r,Se)}(this,n,e)},enumerable:!0})};_?(p=n((function(e,n,r,i){l(e,p,c,"_d");var o,a,s,u,f=0,d=0;if(E(n)){if(!(n instanceof q||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return _e in n?Pe(p,n):Ce.call(p,n);o=n,d=we(r,t);var g=n.byteLength;if(void 0===i){if(g%t)throw V("Wrong length!");if((a=g-d)<0)throw V("Wrong length!")}else if((a=v(i)*t)+d>g)throw V("Wrong length!");s=a/t}else s=m(n),o=new q(a=s*t);for(h(e,"_d",{b:o,o:d,l:a,e:s,v:new K(o)});f<s;)A(e,f++)})),T=p.prototype=w(Ge),h(T,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&D((function(e){new p,new p(null),new p(1.5),new p(e)}),!0)||(p=n((function(e,n,r,i){var o;return l(e,p,c),E(n)?n instanceof q||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,we(r,t),i):void 0!==r?new g(n,we(r,t)):new g(n):_e in n?Pe(p,n):Ce.call(p,n):new g(m(n))})),X(y!==Function.prototype?R(g).concat(R(y)):R(g),(function(e){e in p||h(p,e,g[e])})),p.prototype=T,r||(T.constructor=p));var P=T[pe],x=!!P&&("values"==P.name||null==P.name),C=Fe.values;h(p,me,!0),h(T,_e,c),h(T,be,!0),h(T,ge,p),(u?new p(1)[ve]==c:ve in T)||G(T,ve,{get:function(){return c}}),S[c]=p,a(a.G+a.W+a.F*(p!=g),S),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){g.of.call(p,1)})),c,{from:Ce,of:Me}),"BYTES_PER_ELEMENT"in T||h(T,"BYTES_PER_ELEMENT",t),a(a.P,c,Ie),N(c),a(a.P+a.F*Te,c,{set:Ne}),a(a.P+a.F*!x,c,Fe),r||T.toString==he||(T.toString=he),a(a.P+a.F*o((function(){new p(1).slice()})),c,{slice:De}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),c,{toLocaleString:ke}),I[c]=x?P:C,r||x||h(T,pe,C)}}else e.exports=function(){}},function(e,t,n){var r=n(193),i=n(1),o=n(88)("metadata"),a=o.store||(o.store=new(n(196))),s=function(e,t,n){var i=a.get(e);if(!i){if(!n)return;a.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o};e.exports={store:a,map:s,has:function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){s(n,r,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright ﾂｩ 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(i,o){"use strict";var a="model",s="name",u="type",c="vendor",l="version",f="mobile",h="tablet",d="smarttv",p={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},v={rgx:function(e,t){for(var n,r,i,o,a,s,u=0;u<t.length&&!a;){var c=t[u],l=t[u+1];for(n=r=0;n<c.length&&!a;)if(a=c[n++].exec(e))for(i=0;i<l.length;i++)s=a[++r],"object"==typeof(o=l[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(p.has(t[n][r],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,l],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,l],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],l],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],l],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],l],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[s,l],[/(QQ)\/([\d\.]+)/i],[s,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,l],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,l],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],l],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[l,v.str,m.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,c,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[c,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[c,"Apple"],[u,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[c,a,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[c,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,v.str,m.device.amazon.model],[c,"Amazon"],[u,f]],[/android.+aft([bms])\sbuild/i],[a,[c,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,c,[u,f]],[/\((ip[honed|\s\w*]+);/i],[a,[c,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[c,a,[u,f]],[/\(bb10;\s(\w+)/i],[a,[c,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[c,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[c,"Sony"],[a,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[c,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[c,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[c,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[c,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[c,v.str,m.device.sprint.vendor],[a,v.str,m.device.sprint.model],[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[c,[a,/_/g," "],[u,f]],[/(nexus\s9)/i],[a,[c,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[c,"Huawei"],[u,f]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[c,"Huawei"],[u,h]],[/(microsoft);\s(lumia[\s\w]+)/i],[c,a,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[c,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[c,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[c,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[c,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[c,p.trim],[a,p.trim],[u,d]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[c,"Samsung"],[u,d]],[/\(dtv[\);].+(aquos)/i],[a,[c,"Sharp"],[u,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[c,"Samsung"],a,[u,h]],[/smart-tv.+(samsung)/i],[c,[u,d],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[c,"Samsung"],a,[u,f]],[/sie-(\w*)/i],[a,[c,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[c,"Nokia"],a,[u,f]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[c,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[c,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,"LG"],a,[u,h]],[/(lg) netcast\.tv/i],[c,a,[u,d]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[c,"LG"],[u,f]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[c,a,[u,h]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[c,"Lenovo"],[u,h]],[/(lenovo)[_\s-]?([\w-]+)/i],[c,a,[u,f]],[/linux;.+((jolla));/i],[c,a,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[c,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[c,a,[u,f]],[/crkey/i],[[a,"Chromecast"],[c,"Google"],[u,d]],[/android.+;\s(glass)\s\d/i],[a,[c,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[c,"Google"],[u,h]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[c,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[c,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[c,"Meizu"],[u,f]],[/(mz)-([\w-]{2,})/i],[[c,"Meizu"],a,[u,f]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[c,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[c,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[c,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[c,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[c,"Barnes & Noble"],a,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[c,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[a,[c,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[c,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[c,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[c,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[c,"Dragon Touch"],a,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[c,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[c,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[c,"Voice"],a,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[c,"LvTel"],a,[u,f]],[/android.+;\s(PH-1)\s/i],[a,[c,"Essential"],[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[c,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[c,a,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[c,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[c,a,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[c,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[a,[c,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[c,a,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.lowerize],c,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,d]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[c,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[l,v.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[l,v.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],l],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,l],[/(haiku)\s(\w+)/i],[s,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,l]]},y=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof y))return new y(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?p.extend(g,t):g;return this.getBrowser=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,n,r.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return v.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return v.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};y.VERSION="0.7.21",y.BROWSER={NAME:s,MAJOR:"major",VERSION:l},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:a,VENDOR:c,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:d,TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:s,VERSION:l},y.OS={NAME:s,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=y),t.UAParser=y):void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r);var _=i&&(i.jQuery||i.Zepto);if(_&&!_.ua){var b=new y;_.ua=b.getResult(),_.ua.get=function(){return b.getUA()},_.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)_.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t,n){var r=n(61)("meta"),i=n(8),o=n(34),a=n(16).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(7)((function(){return u(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t){e.exports=!1},function(e,t,n){var r=n(10)("unscopables"),i=Array.prototype;null==i[r]&&n(30)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(174),i=n(123);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(5),i=n(175),o=n(123),a=n(122)("IE_PROTO"),s=function(){},u=function(){var e,t=n(120)("iframe"),r=o.length;for(t.style.display="none",n(124).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(174),i=n(123).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(6),i=n(16),o=n(15),a=n(10)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(40),i=n(186),o=n(136),a=n(5),s=n(17),u=n(138),c={},l={};(t=e.exports=function(e,t,n,f,h){var d,p,v,m,g=h?function(){return e}:u(e),y=r(n,f,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>_;_++)if((m=t?y(a(p=e[_])[0],p[1]):y(e[_]))===c||m===l)return m}else for(v=g.call(e);!(p=v.next()).done;)if((m=i(v,y,p.value,t))===c||m===l)return m}).BREAK=c,t.RETURN=l},function(e,t,n){var r=n(31);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){function n(e){this.renderer=e,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},function(e,t,n){var r=n(16).f,i=n(34),o=n(10)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(1),i=n(46),o=n(7),a=n(126),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"窶仰�"!="窶仰�"[e]()})),u=i[e]=s?t(f):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=l},function(e,t){e.exports={}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)o.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var u=0,c=o.length;u<c;u++)(o[u].fn!==t||r&&!o[u].once||n&&o[u].context!==n)&&s.push(o[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,t,n){e.exports=n(715)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),i=function(){function e(){}return e.completeUrl=function(e,t){return 0==t.indexOf("http://")?t:0==t.indexOf("https://")?t:0==t.indexOf("/")?t:e.replace(/(.+)\/[^\/]*$/,"$1")+"/"+t},e.shiftNonEmptyLine=function(e){for(;;){var t=e.shift();if(null==t)return;if(""!=(t=t.trim()))return t}},e.parseUnsigned64bitBigEndianInt=function(e,t){var n=Math.pow(2,21)-1,r=e.getUint32(t,!1);if(!(r>n)){var i=e.getUint32(t+4,!1);return r*Math.pow(2,32)+i}},e.split64bitInt=function(e){return[Math.floor(e/Math.pow(2,32)),e%Math.pow(2,32)]},e.isFirefox=function(){return"firefox"===this.getBrowserName()},e.getBrowserName=function(){var e=navigator.userAgent,t=(new r.UAParser).setUA(e).getBrowser().name;return void 0!==t?t.toLowerCase():void 0},e}();t.default=i},function(e,t,n){var r=n(41);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(41),i=n(10)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Link=void 0;var o=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("a",{className:this.props.className,href:this.props.href,target:this.target,onTouchStart:this.props.onTouchStart},this.props.children)},Object.defineProperty(t.prototype,"target",{get:function(){return this.props.openInNewWindow?"_blank":"_top"},enumerable:!1,configurable:!0}),t}(n(23).ReactPureComponent);t.Link=a},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){p&&h&&(p=!1,h.length?d=h.concat(d):v=-1,d.length&&a())}function a(){if(!p){var e=i(o);p=!0;for(var t=d.length;t;){for(h=d,d=[];++v<t;)h&&h[v].run();v=-1,t=d.length}h=null,p=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var c,l,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var h,d=[],p=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new s(e,t)),1!==d.length||p||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){function r(e,t,n,i,o){if(s.call(this),this.noFrame=!1,t||(this.noFrame=!0,t=new u.Rectangle(0,0,1,1)),e instanceof r&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=n||t,this._rotate=+(o||0),!0===o)this._rotate=2;else if(this._rotate%2!=0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";e.hasLoaded?(this.noFrame&&(t=new u.Rectangle(0,0,e.width,e.height),e.on("update",this.onBaseTextureUpdated,this)),this.frame=t):e.once("loaded",this.onBaseTextureLoaded,this)}var i=n(106),o=n(242),a=n(243),s=n(75),u=n(28),c=n(24);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{frame:{get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,this.width=e.width,this.height=e.height,!this.trim&&!this.rotate&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=e,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}}}),r.prototype.update=function(){this.baseTexture.update()},r.prototype.onBaseTextureLoaded=function(e){this.noFrame?this.frame=new u.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.emit("update",this)},r.prototype.onBaseTextureUpdated=function(e){this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},r.prototype.destroy=function(e){this.baseTexture&&(e&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},r.prototype.clone=function(){return new r(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},r.prototype._updateUvs=function(){this._uvs||(this._uvs=new a),this._uvs.set(this.crop,this.baseTexture,this.rotate)},r.fromImage=function(e,t,n){var o=c.TextureCache[e];return o||(o=new r(i.fromImage(e,t,n)),c.TextureCache[e]=o),o},r.fromFrame=function(e){var t=c.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},r.fromCanvas=function(e,t){return new r(i.fromCanvas(e,t))},r.fromVideo=function(e,t){return"string"==typeof e?r.fromVideoUrl(e,t):new r(o.fromVideo(e,t))},r.fromVideoUrl=function(e,t){return new r(o.fromUrl(e,t))},r.addTextureToCache=function(e,t){c.TextureCache[t]=e},r.removeTextureFromCache=function(e){var t=c.TextureCache[e];return delete c.TextureCache[e],delete c.BaseTextureCache[e],t},r.EMPTY=new r(new i)},function(e,t,n){function r(e){i.call(this,e)}var i=n(70);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(e){}},function(e,t,n){var r;r=this,e.exports=function(e){"use strict";function t(e){!function(e){e.prototype.flatMap=e.prototype.chain=e.prototype.bind,e.pure=e.unit=e.of,e.prototype.of=e.of,null!=e.prototype.append&&(e.prototype.concat=e.prototype.append),e.prototype.point=e.prototype.pure=e.prototype.unit=e.prototype.of}(e),function(e){e.prototype.join=function(){return this.flatMap(i)},e.map2=function(e){return function(t,n){return t.flatMap((function(t){return n.map((function(n){return e(t,n)}))}))}}}(e),function(e){null==e.prototype.map&&(e.prototype.map=function(e){return s.call(this,e)})}(e),function(e){e.prototype.takeLeft=function(e){return u(this,e,(function(e,t){return e}))},e.prototype.takeRight=function(e){return u(this,e,(function(e,t){return t}))}}(e)}var n=function(e,t){return function(){var r=t.append(c.fromArray(Array.prototype.slice.call(arguments)));return r.size()>=e.length?e.apply(this,r.toArray().slice(0,r.size())):n(e,r)}},r=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},i=function(e){return e},o=e.Monet={},a=o.swap=function(e){return function(t,n){return e(n,t)}},s=function(e){return this.bind(this.of.compose(e))},u=o.apply2=function(e,t,n){return t.ap(e.map(n.curry()))};o.curry=function(e){return n(e,b)},Function.prototype.curry=function(){return n(this,b)};var c=e.List=function(e,t){return new c.fn.init(e,t)},l=function(e,t){return f(e,t).run()},f=function(e,t){return t.isNil?U(t):F((function(){return f(e,t.tail())})).map(_.curry()(e(t.head())))},h=function(e,t){t.isNil||(e(t.head()),h(e,t.tail()))},d=function(e,t,n){return function t(n,r){return r.isNil?U(n):F((function(){return t(e(n,r.head()),r.tail())}))}(t,n).run()},p=function(e,t,n){return function t(n,r){return n.isNil?U(r):F((function(){return t(n.tail(),r)})).map((function(t){return e(n.head(),t)}))}(t,n).run()},v=function(e,t){return function e(t,n){return t.isNil?U(n):F((function(){return e(t.tail(),n).map((function(e){return e.cons(t.head())}))}))}(e,t).run()},m=function(e,t){return e.foldRight(t.of(b))(t.map2(_))},g=function(e){return e.foldLeft(b)(a(_))},y=function(e,t){return e.foldRight(b)((function(e,n){return t(e)?_(e,n):n}))},_=function(e,t){return t.cons(e)};c.fn=c.prototype={init:function(e,t){null==e?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=e,this.tail_=null==t?b:t,this.size_=null==t?0:t.size()+1)},of:function(e){return new c(e)},size:function(){return this.size_},cons:function(e){return c(e,this)},snoc:function(e){return this.concat(c(e))},map:function(e){return l(e,this)},toArray:function(){return d((function(e,t){return e.push(t),e}),[],this)},foldLeft:function(e){var t=this;return function(n){return d(n,e,t)}},foldRight:function(e){var t=this;return function(n){return p(n,t,e)}},append:function(e){return v(this,e)},filter:function(e){return y(this,e)},flatten:function(){return p(v,this,b)},flattenMaybe:function(){return this.flatMap(S.toList)},reverse:function(){return g(this)},bind:function(e){return this.map(e).flatten()},each:function(e){h(e,this)},sequenceMaybe:function(){return m(this,S)},sequenceValidation:function(){return function(e){return e.foldLeft(R(b))((function(e,t){return e.ap(t.map((function(e){return function(t){return _(e,t)}})))})).map(g)}(this)},sequenceEither:function(){return m(this,L)},sequenceIO:function(){return m(this,M)},sequenceReader:function(){return m(this,D)},sequence:function(e){return m(this,e)},head:function(){return this.head_},headMaybe:function(){return this.isNil?w():T(this.head_)},tail:function(){return this.isNil?b:this.tail_},tails:function(){return this.isNil?c(b,b):this.tail().tails().cons(this)},ap:function(e){return t=e,this.bind((function(e){return t.map((function(t){return t(e)}))}));var t},isNEL:function(){return!1}},c.fn.init.prototype=c.fn;var b=e.Nil=new c.fn.init;c.prototype.empty=function(){return b},c.fromArray=function(e){for(var t=b,n=e.length;n--;n<=0)t=t.cons(e[n]);return t},c.of=function(e){return new c(e,b)};var E=e.NEL=e.NonEmptyList=function(e,t){if(null==e)throw"Cannot create an empty Non-Empty List.";return new E.fn.init(e,t)};E.of=function(e){return E(e,b)},E.fn=E.prototype={init:function(e,t){null==e?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=e,this.tail_=null==t?b:t,this.size_=this.tail_.size()+1)},map:function(e){return E(e(this.head_),l(e,this.tail_))},bind:function(e){var t=e(this.head_);if(!t.isNEL())throw"function must return a NonEmptyList.";var n=this.tail().foldLeft(b.snoc(t.head()).append(t.tail()))((function(t,n){var r=e(n).toList();return t.snoc(r.head()).append(r.tail())}));return new E(n.head(),n.tail())},head:function(){return this.head_},tail:function(){return this.tail_},tails:function(){var e=this.toList().tails().map(E.fromList).flattenMaybe();return E(e.head(),e.tail())},toList:function(){return c(this.head_,this.tail_)},reverse:function(){if(this.tail().isNil)return this;var e=this.tail().reverse();return E(e.head(),e.tail().append(c(this.head())))},foldLeft:function(e){return this.toList().foldLeft(e)},foldRight:function(e){return this.toList().foldRight(e)},reduceLeft:function(e){return this.tail().foldLeft(this.head())(e)},filter:function(e){return y(this.toList(),e)},append:function(e){return E.fromList(this.toList().append(e.toList())).some()},cobind:function(e){return this.cojoin().map(e)},size:function(){return this.size_},isNEL:function(){return!0}},E.fromList=function(e){return e.isNil?w():T(E(e.head(),e.tail()))},E.fn.init.prototype=E.fn,E.prototype.toArray=c.prototype.toArray,E.prototype.extract=E.prototype.copure=E.prototype.head,E.prototype.cojoin=E.prototype.tails,E.prototype.coflatMap=E.prototype.mapTails=E.prototype.cobind,E.prototype.ap=c.prototype.ap;var S=e.Maybe={};S.fromNull=function(e){return null==e?S.None():S.Some(e)},S.of=function(e){return T(e)};var T=S.Just=S.Some=e.Some=e.Just=function(e){return new S.fn.init(!0,e)},w=S.Nothing=S.None=e.None=function(){return new S.fn.init(!1,null)};S.toList=function(e){return e.toList()},S.fn=S.prototype={init:function(e,t){if(this.isValue=e,null==t&&e)throw"Illegal state exception";this.val=t},isSome:function(){return this.isValue},isNone:function(){return!this.isSome()},bind:function(e){return this.isValue?e(this.val):this},some:function(){if(this.isValue)return this.val;throw"Illegal state exception"},orSome:function(e){return this.isValue?this.val:e},orElse:function(e){return this.isValue?this:e},ap:function(e){var t=this.val;return this.isValue?e.map((function(e){return e(t)})):this},toList:function(){return this.map(c).orSome(b)},toEither:function(e){return this.isSome()?k(this.val):I(e)},toValidation:function(e){return this.isSome()?R(this.val):A(e)},fold:function(e){var t=this;return function(n){return t.isSome()?n(t.val):e}},cata:function(e,t){return this.isSome()?t(this.val):e()},filter:function(e){var t=this;return t.flatMap((function(n){return e(n)?t:w()}))}},S.prototype.orJust=S.prototype.orSome,S.prototype.just=S.prototype.some,S.prototype.isJust=S.prototype.isSome,S.prototype.isNothing=S.prototype.isNone,S.fn.init.prototype=S.fn;var O=e.Validation={},R=O.Success=O.success=e.Success=function(e){return new O.fn.init(e,!0)},A=O.Fail=O.fail=e.Fail=function(e){return new O.fn.init(e,!1)};O.of=function(e){return R(e)},O.fn=O.prototype={init:function(e,t){this.val=e,this.isSuccessValue=t},success:function(){if(this.isSuccess())return this.val;throw"Illegal state. Cannot call success() on a Validation.fail"},isSuccess:function(){return this.isSuccessValue},isFail:function(){return!this.isSuccessValue},fail:function(){if(this.isSuccess())throw"Illegal state. Cannot call fail() on a Validation.success";return this.val},bind:function(e){return this.isSuccess()?e(this.val):this},ap:function(e){var t=this.val;return this.isSuccess()?e.map((function(e){return e(t)})):e.isFail()?O.Fail(x.append(t,e.fail())):this},acc:function(){var e=function(){return e};return this.isSuccessValue?O.success(e):this},cata:function(e,t){return this.isSuccessValue?t(this.val):e(this.val)},failMap:function(e){return this.isFail()?A(e(this.val)):this},bimap:function(e,t){return this.isSuccessValue?this.map(t):this.failMap(e)},toMaybe:function(){return this.isSuccess()?T(this.val):w()},toEither:function(){return(this.isSuccess()?k:I)(this.val)}},O.fn.init.prototype=O.fn;var P,x=e.Semigroup={};x.append=function(e,t){if(e instanceof Array)return e.concat(t);if("string"==typeof e)return e+t;if(r(e.concat))return e.concat(t);throw"Couldn't find a semigroup appender in the environment, please specify your own append function"};var C=P=e.monadTransformer=e.MonadT=e.monadT=function(e){return new C.fn.init(e)};C.of=function(e){return C(e)},C.fn=C.prototype={init:function(e){this.monad=e},map:function(e){return P(this.monad.map((function(t){return t.map(e)})))},bind:function(e){return P(this.monad.map((function(t){return t.flatMap(e)})))},ap:function(e){return P(this.monad.flatMap((function(t){return e.perform().map((function(e){return t.ap(e)}))})))},perform:function(){return this.monad}},C.fn.init.prototype=C.fn;var M=e.IO=e.io=function(e){return new M.fn.init(e)};M.of=function(e){return M((function(){return e}))},M.fn=M.prototype={init:function(e){if(!r(e))throw"IO requires a function";this.effectFn=e},map:function(e){var t=this;return M((function(){return e(t.effectFn())}))},bind:function(e){var t=this;return M((function(){return e(t.effectFn()).run()}))},ap:function(e){var t=this;return e.map((function(e){return e(t.effectFn())}))},run:function(){return this.effectFn()}},M.fn.init.prototype=M.fn,M.prototype.perform=M.prototype.performUnsafeIO=M.prototype.run;var L=e.Either={};L.of=function(e){return k(e)};var k=L.Right=e.Right=function(e){return new L.fn.init(e,!0)},I=L.Left=e.Left=function(e){return new L.fn.init(e,!1)};L.fn=L.prototype={init:function(e,t){this.isRightValue=t,this.value=e},bind:function(e){return this.isRightValue?e(this.value):this},ap:function(e){var t=this;return this.isRightValue?e.map((function(e){return e(t.value)})):this},leftMap:function(e){return this.isLeft()?I(e(this.value)):this},isRight:function(){return this.isRightValue},isLeft:function(){return!this.isRight()},right:function(){if(this.isRightValue)return this.value;throw"Illegal state. Cannot call right() on a Either.left"},left:function(){if(this.isRightValue)throw"Illegal state. Cannot call left() on a Either.right";return this.value},cata:function(e,t){return this.isRightValue?t(this.value):e(this.value)},bimap:function(e,t){return this.isRightValue?this.map(t):this.leftMap(e)},toMaybe:function(){return this.isRight()?T(this.value):w()},toValidation:function(){return this.isRight()?R(this.value):A(this.value)}},L.fn.init.prototype=L.fn;var D=e.Reader=function(e){return new D.fn.init(e)};D.of=function(e){return D((function(t){return e}))},D.ask=function(){return D(i)},D.fn=D.prototype={init:function(e){this.f=e},run:function(e){return this.f(e)},bind:function(e){var t=this;return D((function(n){return e(t.run(n)).run(n)}))},ap:function(e){var t=this;return e.bind((function(e){return D((function(n){return e(t.run(n))}))}))},map:function(e){var t=this;return D((function(n){return e(t.run(n))}))},local:function(e){var t=this;return D((function(n){return t.run(e(n))}))}},D.fn.init.prototype=D.fn;var N=e.Free={},F=N.Suspend=e.Suspend=function(e){return new N.fn.init(e,!0)},U=N.Return=e.Return=function(e){return new N.fn.init(e,!1)};N.of=function(e){return U(e)},N.liftF=function(e){return F(e.map(U))},N.fn=N.prototype={init:function(e,t){this.isSuspend=t,t?this.functor=e:this.val=e},run:function(){return this.go((function(e){return e()}))},bind:function(e){return this.isSuspend?F(this.functor.map((function(t){return t.bind(e)}))):e(this.val)},ap:function(e){return this.bind((function(t){return e.map((function(e){return e(t)}))}))},resume:function(){return this.isSuspend?I(this.functor):k(this.val)},go1:function(e){return function t(n){return n.resume().cata((function(n){return t(e(n))}),i)}(this)},go:function(e){for(var t=this.resume();t.isLeft();){var n=e(t.left());t=n.resume()}return t.right()}},N.fn.init.prototype=N.fn;var j=e.Identity=function(e){return new j.fn.init(e)};return j.of=function(e){return new j(e)},j.fn=j.prototype={init:function(e){this.val=e},bind:function(e){return e(this.val)},get:function(){return this.val}},j.fn.init.prototype=j.fn,Function.prototype.io=function(){return M(this)},Function.prototype.io1=function(){var e=this;return function(t){return M((function(){return e(t)}))}},Function.prototype.reader=function(){var e=function(t,n){return function(){var r=n.append(c.fromArray(Array.prototype.slice.call(arguments))),i=this;return r.size()+1==t.length?D((function(e){return t.apply(i,r.append(c(e)).toArray())})):e(t,r)}};return e(this,b)},Function.prototype.compose=Function.prototype.o=function(e){var t=this;return function(n){return t(e(n))}},Function.prototype.andThen=Function.prototype.map=function(e){var t=this;return function(n){return e(t(n))}},t(C),t(L),t(S),t(M),t(E),t(c),t(O),t(D),t(N),t(j),e}(r)},function(e,t,n){"use strict";var r,i=n(2);!function(e){e.convertList=function(t){return t?t.map((function(t){return e.convert(t)})):[]},e.convert=function(e){return e?new i.a((t={thread:e.thread,no:e.no,content:e.content,vpos:e.vpos,mail:e.mail?e.mail.split(/\s+/):[],date:e.date,dateUsec:e.date_usec,userId:e.user_id,premium:e.premium,nicoru:e.nicoru||0,lastNicoruDate:e.last_nicoru_date,valhalla:1===e.valhalla,deletedStatus:e.deleted||0,anonymous:1===e.anonymity,commands:[],score:e.score,fork:e.fork},n=!1,r=!1,o=!1,a=!1,t.mail.reduce((function(e,t){var s=t.toLowerCase();if(i.a.isPositionCommand(s))return n||(e.position=s,n=!0),e;if(i.a.isSizeCommand(s))return r||(e.size=s,r=!0),e;if(i.a.isColorNameCommand(s))return o||(e.colorName=s,e.color=i.a.COLORS[s],o=!0),e;if(i.a.isPremiumColorNameCommand(s))return o||(e.colorName=s,e.color=i.a.PREMIUM_COLORS[s],o=!0),e;if(i.a.isColorCodeCommand(s))return o||(e.colorCode=e.color=s,o=!0),e;if(i.a.isFontCommand(s))return a||(e.font=s,a=!0),e;var u=i.a.extractAtNumber(t);if(null!==u)return e.atNumber=u/1e3,e;var c=t.match(/^device:(.+)$/);return c?(e.device=c[1],e):(e.commands.push(s),e)}),t))):null;var t,n,r,o,a}}(r||(r={})),t.a=r},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r,i=n(118),o=n(294),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=e.requestAnimationFrame,u=e.cancelAnimationFrame,c=function(e){function t(t){var n=e.call(this)||this;return n.timingMode="timeout",n.maxDelta=0,n.paused=!1,n._frameInterval=1,n._inited=!1,n._startTime=null,n._pausedTime=0,n._ticks=0,n._pausedTicks=0,n._interval=50,n._lastTime=0,n._times=null,n._tickTimes=null,n._timerId=null,n._raf=!0,n._frameCount=0,n._handleSynch=function(){n._timerId=null,n._setupTick(),n._getTime()-n._lastTime>=.97*(n._interval-1)&&n._tick()},n._handleRAF=function(){n._timerId=null,n._setupTick(),n._frameCount++%n._frameInterval==0&&n._tick()},n._handleTimeout=function(){n._timerId=null,n._setupTick(),n._tick()},n.name=t,n}return a(t,e),Object.defineProperty(t.prototype,"interval",{get:function(){return this._interval},set:function(e){this._interval=e,this._inited&&this._setupTick()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framerate",{get:function(){return 1e3/this._interval},set:function(e){this.interval=1e3/e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameSkip",{get:function(){return this._frameInterval-1},set:function(e){this._frameInterval=Math.max(e+1,1)},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._inited||(this._inited=!0,this._times=[],this._tickTimes=[],this._startTime=this._getTime(),this._times.push(this._lastTime=0),this._setupTick())},t.prototype.reset=function(){if(this._raf){u&&u(this._timerId)}else clearTimeout(this._timerId);this.removeAllEventListeners("tick"),this._timerId=this._times=this._tickTimes=null,this._startTime=this._lastTime=this._ticks=0,this._inited=!1},t.prototype.addEventListener=function(t,n,r){return void 0===r&&(r=!1),!this._inited&&this.init(),e.prototype.addEventListener.call(this,t,n,r)},t.prototype.getMeasuredTickTime=function(e){var t=this._tickTimes;return!t||t.length<1?-1:(e=Math.min(t.length,e||0|this.framerate),t.reduce((function(e,t){return e+t}),0)/e)},t.prototype.getMeasuredFPS=function(e){var t=this._times;return!t||t.length<2?-1:(e=Math.min(t.length-1,e||0|this.framerate),1e3/((t[0]-t[e])/e))},t.prototype.getTime=function(e){return void 0===e&&(e=!1),this._startTime?this._getTime()-(e?this._pausedTime:0):-1},t.prototype.getEventTime=function(e){return void 0===e&&(e=!1),this._startTime?(this._lastTime||this._startTime)-(e?this._pausedTime:0):-1},t.prototype.getTicks=function(e){return void 0===e&&(e=!1),this._ticks-(e?this._pausedTicks:0)},t.prototype._setupTick=function(){if(null==this._timerId){var e=this.timingMode||this._raf&&t.RAF;if(e===t.RAF_SYNCHED||e===t.RAF){var n=s;if(n)return this._timerId=n(e===t.RAF?this._handleRAF:this._handleSynch),void(this._raf=!0)}this._raf=!1,this._timerId=setTimeout(this._handleTimeout,this._interval)}},t.prototype._tick=function(){var e=this.paused,t=this._getTime(),n=t-this._lastTime;if(this._lastTime=t,this._ticks++,e&&(this._pausedTicks++,this._pausedTime+=n),this.hasEventListener("tick")){var r=new i.a("tick"),o=this.maxDelta;r.set({delta:o&&n>o?o:n,paused:e,time:t,runtTime:t-this._pausedTime}),this.dispatchEvent(r)}for(this._tickTimes.unshift(this._getTime()-t);this._tickTimes.length>100;)this._tickTimes.pop();for(this._times.unshift(t);this._times.length>100;)this._times.pop()},t.prototype._getTime=function(){var e=window.performance&&window.performance.now;return(e&&e.call(performance)||(new Date).getTime())-this._startTime},t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t}(o.a)}).call(this,n(22))},function(e,t,n){var r=n(39),i=n(6),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(58)?"pure":"global",copyright:"ﾂｩ 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(35),i=n(17),o=n(63);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(41);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(8),i=n(41),o=n(10)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(10)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(30),i=n(31),o=n(7),a=n(46),s=n(10);e.exports=function(e,t,n){var u=s(e),c=n(a,u,""[e]),l=c[0],f=c[1];o((function(){var t={};return t[u]=function(){return 7},7!=""[e](t)}))&&(i(String.prototype,e,l),r(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,n){var r=n(5),i=n(25),o=n(10)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(6).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(6),i=n(1),o=n(31),a=n(69),s=n(57),u=n(68),c=n(67),l=n(8),f=n(7),h=n(93),d=n(71),p=n(127);e.exports=function(e,t,n,v,m,g){var y=r[e],_=y,b=m?"set":"add",E=_&&_.prototype,S={},T=function(e){var t=E[e];o(E,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(g||E.forEach&&!f((function(){(new _).entries().next()})))){var w=new _,O=w[b](g?{}:-0,1)!=w,R=f((function(){w.has(1)})),A=h((function(e){new _(e)})),P=!g&&f((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));A||((_=t((function(t,n){c(t,_,e);var r=p(new y,t,_);return null!=n&&u(n,m,r[b],r),r}))).prototype=E,E.constructor=_),(R||P)&&(T("delete"),T("has"),m&&T("get")),(P||O)&&T(b),g&&E.clear&&delete E.clear}else _=v.getConstructor(t,e,m,b),a(_.prototype,n),s.NEED=!0;return d(_,e),S[e]=_,i(i.G+i.W+i.F*(_!=y),S),g||v.setStrong(_,e,m),_}},function(e,t,n){for(var r,i=n(6),o=n(30),a=n(61),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){"use strict";e.exports=n(58)||!n(7)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(6)[e]}))},function(e,t,n){"use strict";var r=n(1);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(1),i=n(25),o=n(40),a=n(68);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),null==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,(function(e){n.push(s(e,r++))}))):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.EdgeStreamProtocol=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.EdgeStreamResource=r},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){function r(e,t,n){a.call(this),this.uid=i.uid(),this.resolution=n||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=t||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},e&&this.loadSource(e)}var i=n(24),o=n(11),a=n(75);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},r.prototype.loadSource=function(e){var t=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=e,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!e.getContext){this.isLoading=!0;var n=this;e.onload=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),n.emit("loaded",n))},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src&&(this.isLoading=!1,e.onload=null,e.onerror=null,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},r.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},r.fromImage=function(e,t,n){var o=i.BaseTextureCache[e];if(void 0===t&&0!==e.indexOf("data:")&&(t=!0),!o){var a=new Image;t&&(a.crossOrigin=""),(o=new r(a,n)).imageUrl=e,a.src=e,i.BaseTextureCache[e]=o,o.resolution=i.getResolutionOfUrl(e)}return o},r.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+i.uid());var n=i.BaseTextureCache[e._pixiId];return n||(n=new r(e,t),i.BaseTextureCache[e._pixiId]=n),n}},function(e,t,n){var r=n(28),i=n(24),o=n(11),a=n(652),s=function(e,t,n,s,u,c){(this.gl=e,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=u||o.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new a,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=s||o.SCALE_MODES.DEFAULT,this.root=c,this.root)||(this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s===o.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s===o.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),i.isPowerOfTwo(t,n)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0));this.resize(t,n)};s.prototype.constructor=s,e.exports=s,s.prototype.clear=function(e){var t=this.gl;e&&t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},s.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var e=this.gl;this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},s.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer);var t=this.frame||this.size;this.calculateProjection(t),this.transform&&this.projectionMatrix.append(this.transform),e.viewport(0,0,t.width*this.resolution,t.height*this.resolution)},s.prototype.calculateProjection=function(e){var t=this.projectionMatrix;t.identity(),this.root?(t.a=1/e.width*2,t.d=-1/e.height*2,t.tx=-1-e.x*t.a,t.ty=1-e.y*t.d):(t.a=1/e.width*2,t.d=1/e.height*2,t.tx=-1-e.x*t.a,t.ty=-1-e.y*t.d)},s.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){if(this.size.width=e,this.size.height=t,!this.root){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e*this.resolution,t*this.resolution,0,n.RGBA,n.UNSIGNED_BYTE,null),this.stencilBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencilBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e*this.resolution,t*this.resolution))}var r=this.frame||this.size;this.calculateProjection(r)}},s.prototype.destroy=function(){var e=this.gl;e.deleteRenderbuffer(this.stencilBuffer),e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},function(e,t,n){function r(){a.call(this),this.children=[]}var i=n(28),o=n(24),a=n(241),s=n(159),u=new i.Matrix;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}}),r.prototype.onChildrenChange=function(){},r.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.addChild(arguments[n]);else e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},r.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.onChildrenChange(t),e.emit("added",this),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},r.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);if(n<0||r<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},r.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},r.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(e);o.removeItems(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},r.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[e]},r.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var n=0;n<t;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(e);if(-1===r)return;e.parent=null,o.removeItems(this.children,r,1),this.onChildrenChange(r),e.emit("removed",this)}return e},r.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,o.removeItems(this.children,e,1),this.onChildrenChange(e),t.emit("removed",this),t},r.prototype.removeChildren=function(e,t){var n,r,i=e||0,o="number"==typeof t?t:this.children.length,a=o-i;if(a>0&&a<=o){for(n=this.children.splice(i,a),r=0;r<n.length;++r)n[r].parent=null;for(this.onChildrenChange(e),r=0;r<n.length;++r)n[r].emit("removed",this);return n}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.generateTexture=function(e,t,n){var r=this.getLocalBounds(),i=new s(e,0|r.width,0|r.height,n,t);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var e=0,t=this.children.length;e<t;++e)this.children[e].updateTransform()}},r.prototype.containerUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var e,t,n,r=1/0,o=1/0,a=-1/0,s=-1/0,u=!1,c=0,l=this.children.length;c<l;++c){this.children[c].visible&&(u=!0,r=r<(e=this.children[c].getBounds()).x?r:e.x,o=o<e.y?o:e.y,a=a>(t=e.width+e.x)?a:t,s=s>(n=e.height+e.y)?s:n)}if(!u)return i.Rectangle.EMPTY;var f=this._bounds;f.x=r,f.y=o,f.width=a-r,f.height=s-o,this._currentBounds=f}return this._currentBounds},r.prototype.containerGetBounds=r.prototype.getBounds,r.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var t=0,n=this.children.length;t<n;++t)this.children[t].updateTransform();return this.worldTransform=e,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},r.prototype.renderWebGL=function(e){var t,n;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(e.currentRenderer.flush(),this._filters&&this._filters.length&&e.filterManager.pushFilter(this,this._filters),this._mask&&e.maskManager.pushMask(this,this._mask),e.currentRenderer.start(),this._renderWebGL(e),t=0,n=this.children.length;t<n;t++)this.children[t].renderWebGL(e);e.currentRenderer.flush(),this._mask&&e.maskManager.popMask(this,this._mask),this._filters&&e.filterManager.popFilter(),e.currentRenderer.start()}else for(this._renderWebGL(e),t=0,n=this.children.length;t<n;++t)this.children[t].renderWebGL(e)},r.prototype._renderWebGL=function(e){},r.prototype._renderCanvas=function(e){},r.prototype.renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask,e),this._renderCanvas(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},r.prototype.destroy=function(e){if(a.prototype.destroy.call(this),e)for(var t=0,n=this.children.length;t<n;++t)this.children[t].destroy(e);this.removeChildren(),this.children=null}},function(e,t,n){function r(e,t,n){n=n||{},i.call(this,"WebGL",e,t,n),this.type=p.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!n.forceFXAA&&n.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:n.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new a(this),this.stencilManager=new s(this),this.filterManager=new u(this),this.blendModeManager=new c(this),this.currentRenderTarget=null,this.currentRenderer=new f(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var i=n(247),o=n(248),a=n(656),s=n(657),u=n(244),c=n(658),l=n(107),f=n(84),h=n(252),d=n(24),p=n(11);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,d.pluginTarget.mixin(r),r.glContextId=0,r.prototype._createContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=r.glContextId++,e.id=this.glContextId,e.renderer=this},r.prototype._initContext=function(){var e=this.gl;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.renderTarget=new l(e,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",e),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!e.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new h])},r.prototype.render=function(e){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=e,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,e.filterArea=this.renderTarget.size,e.filters=this._FXAAFilter);var t=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t;var n=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?n.clearColor(0,0,0,0):n.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),n.clear(n.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.renderTarget),this.emit("postrender")}},r.prototype.renderDisplayObject=function(e,t,n){this.setRenderTarget(t),n&&t.clear(),this.filterManager.setFilterStack(t.filterStack),e.renderWebGL(this),this.currentRenderer.flush()},r.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},r.prototype.setRenderTarget=function(e){this.currentRenderTarget!==e&&(this.currentRenderTarget=e,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(e.stencilMaskStack))},r.prototype.resize=function(e,t){i.prototype.resize.call(this,e,t),this.filterManager.resize(e,t),this.renderTarget.resize(e,t),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},r.prototype.updateTexture=function(e){if((e=e.baseTexture||e).hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture(),e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e)),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===p.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===p.SCALE_MODES.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===p.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._glTextures[t.id]}},r.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded&&e._glTextures[this.gl.id]&&(this.gl.deleteTexture(e._glTextures[this.gl.id]),delete e._glTextures[this.gl.id],!t)){var n=this._managedTextures.indexOf(e);-1!==n&&d.removeItems(this._managedTextures,n,1)}},r.prototype.handleContextLost=function(e){e.preventDefault()},r.prototype.handleContextRestored=function(){this._initContext();for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.gl.id]&&delete t._glTextures[this.gl.id]}},r.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var t=0;t<this._managedTextures.length;++t){var n=this._managedTextures[t];this.destroyTexture(n,!0),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this)}i.prototype.destroy.call(this,e),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl.flush(),this.gl=null},r.prototype._mapGlModes=function(){var e=this.gl;this.blendModes||(this.blendModes={},this.blendModes[p.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],this.blendModes[p.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[p.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[p.DRAW_MODES.POINTS]=e.POINTS,this.drawModes[p.DRAW_MODES.LINES]=e.LINES,this.drawModes[p.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,this.drawModes[p.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLES]=e.TRIANGLES,this.drawModes[p.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN)}},function(e,t,n){function r(e,t,n,o,a){var s={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var u in o)s[u]=o[u];var c={aVertexPosition:0,aTextureCoord:0,aColor:0};if(a)for(var l in a)c[l]=a[l];t=t||r.defaultVertexSrc,n=n||r.defaultFragmentSrc,i.call(this,e,t,n,s,c)}var i=n(111);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),r.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},function(e,t,n){function r(e,t,n,r,o){if(!t||!n)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=i.uid(),this.gl=e.renderer.gl,this.shaderManager=e,this.program=null,this.uniforms=r||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=t,this.fragmentSrc=n,this.init()}var i=n(24);r.prototype.constructor=r,e.exports=r,r.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},r.prototype.cacheUniformLocations=function(e){for(var t=0;t<e.length;++t)this.uniforms[e[t]]._location=this.gl.getUniformLocation(this.program,e[t])},r.prototype.cacheAttributeLocations=function(e){for(var t=0;t<e.length;++t)this.attributes[e[t]]=this.gl.getAttribLocation(this.program,e[t])},r.prototype.compile=function(){var e=this.gl,t=this._glCompile(e.VERTEX_SHADER,this.vertexSrc),n=this._glCompile(e.FRAGMENT_SHADER,this.fragmentSrc),r=e.createProgram();return e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||(e.getProgramInfoLog(r),e.deleteProgram(r),r=null),e.deleteShader(t),e.deleteShader(n),this.program=r},r.prototype.syncUniform=function(e){var t,n,r=e._location,o=e.value,a=this.gl;switch(e.type){case"b":case"bool":case"boolean":a.uniform1i(r,o?1:0);break;case"i":case"1i":a.uniform1i(r,o);break;case"f":case"1f":a.uniform1f(r,o);break;case"2f":a.uniform2f(r,o[0],o[1]);break;case"3f":a.uniform3f(r,o[0],o[1],o[2]);break;case"4f":a.uniform4f(r,o[0],o[1],o[2],o[3]);break;case"v2":a.uniform2f(r,o.x,o.y);break;case"v3":a.uniform3f(r,o.x,o.y,o.z);break;case"v4":a.uniform4f(r,o.x,o.y,o.z,o.w);break;case"1iv":a.uniform1iv(r,o);break;case"2iv":a.uniform2iv(r,o);break;case"3iv":a.uniform3iv(r,o);break;case"4iv":a.uniform4iv(r,o);break;case"1fv":a.uniform1fv(r,o);break;case"2fv":a.uniform2fv(r,o);break;case"3fv":a.uniform3fv(r,o);break;case"4fv":a.uniform4fv(r,o);break;case"m2":case"mat2":case"Matrix2fv":a.uniformMatrix2fv(r,e.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":a.uniformMatrix3fv(r,e.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":a.uniformMatrix4fv(r,e.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),a.uniform3f(r,o[0],o[1],o[2]);break;case"iv1":a.uniform1iv(r,o);break;case"iv":a.uniform3iv(r,o);break;case"fv1":a.uniform1fv(r,o);break;case"fv":a.uniform3fv(r,o);break;case"v2v":for(e._array||(e._array=new Float32Array(2*o.length)),t=0,n=o.length;t<n;++t)e._array[2*t]=o[t].x,e._array[2*t+1]=o[t].y;a.uniform2fv(r,e._array);break;case"v3v":for(e._array||(e._array=new Float32Array(3*o.length)),t=0,n=o.length;t<n;++t)e._array[3*t]=o[t].x,e._array[3*t+1]=o[t].y,e._array[3*t+2]=o[t].z;a.uniform3fv(r,e._array);break;case"v4v":for(e._array||(e._array=new Float32Array(4*o.length)),t=0,n=o.length;t<n;++t)e._array[4*t]=o[t].x,e._array[4*t+1]=o[t].y,e._array[4*t+2]=o[t].z,e._array[4*t+3]=o[t].w;a.uniform4fv(r,e._array);break;case"t":case"sampler2D":if(!e.value||!e.value.baseTexture.hasLoaded)break;a.activeTexture(a["TEXTURE"+this.textureCount]);var s=e.value.baseTexture._glTextures[a.id];s||(this.initSampler2D(e),s=e.value.baseTexture._glTextures[a.id]),a.bindTexture(a.TEXTURE_2D,s),a.uniform1i(e._location,this.textureCount),this.textureCount++}},r.prototype.syncUniforms=function(){for(var e in this.textureCount=1,this.uniforms)this.syncUniform(this.uniforms[e])},r.prototype.initSampler2D=function(e){var t=this.gl,n=e.value.baseTexture;if(n.hasLoaded)if(e.textureData){var r=e.textureData;n._glTextures[t.id]=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,r.luminance?t.LUMINANCE:t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r.magFilter?r.magFilter:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r.wrapS?r.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r.wrapS?r.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r.wrapT?r.wrapT:t.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(n)},r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},r.prototype._glCompile=function(e,t){var n=this.gl.createShader(e);return this.gl.shaderSource(n,t),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:null}},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,o.readFileSync(t+"/blurX.vert","utf8"),o.readFileSync(t+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n,r){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(i,t,n,r);else{for(var o=e.filterManager.getRenderTarget(!0),a=t,s=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,a,s,!0);var c=s;s=a,a=c}e.filterManager.applyFilter(i,a,n,r),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})}).call(this,"/")},function(e,t,n){"use strict";e.exports=n(701),e.exports.Resource=n(165),e.exports.middleware={caching:{memory:n(702)},parsing:{blob:n(703)}},e.exports.async=n(261)},function(e,t,n){function r(e,t,n,o,a){i.Container.call(this),this._texture=null,this.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=t||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=a||r.DRAW_MODES.TRIANGLE_MESH,this.texture=e,this.shader=null}var i=n(3),o=new i.Point,a=new i.Polygon;r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}}),r.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.mesh),e.plugins.mesh.render(this)},r.prototype._renderCanvas=function(e){var t=e.context,n=this.worldTransform,i=e.resolution;e.roundPixels?t.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):t.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),this.drawMode===r.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(t):this._renderCanvasTriangles(t)},r.prototype._renderCanvasTriangleMesh=function(e){for(var t=this.vertices,n=this.uvs,r=t.length/2,i=0;i<r-2;i++){var o=2*i;this._renderCanvasDrawTriangle(e,t,n,o,o+2,o+4)}},r.prototype._renderCanvasTriangles=function(e){for(var t=this.vertices,n=this.uvs,r=this.indices,i=r.length,o=0;o<i;o+=3){var a=2*r[o],s=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(e,t,n,a,s,u)}},r.prototype._renderCanvasDrawTriangle=function(e,t,n,r,i,o){var a=this._texture.baseTexture,s=a.source,u=a.width,c=a.height,l=t[r],f=t[i],h=t[o],d=t[r+1],p=t[i+1],v=t[o+1],m=n[r]*a.width,g=n[i]*a.width,y=n[o]*a.width,_=n[r+1]*a.height,b=n[i+1]*a.height,E=n[o+1]*a.height;if(this.canvasPadding>0){var S=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,w=(l+f+h)/3,O=(d+p+v)/3,R=l-w,A=d-O,P=Math.sqrt(R*R+A*A);l=w+R/P*(P+S),d=O+A/P*(P+T),A=p-O,f=w+(R=f-w)/(P=Math.sqrt(R*R+A*A))*(P+S),p=O+A/P*(P+T),A=v-O,h=w+(R=h-w)/(P=Math.sqrt(R*R+A*A))*(P+S),v=O+A/P*(P+T)}e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(f,p),e.lineTo(h,v),e.closePath(),e.clip();var x=m*b+_*y+g*E-b*y-_*g-m*E,C=l*b+_*h+f*E-b*h-_*f-l*E,M=m*f+l*y+g*h-f*y-l*g-m*h,L=m*b*h+_*f*y+l*g*E-l*b*y-_*g*h-m*f*E,k=d*b+_*v+p*E-b*v-_*p-d*E,I=m*p+d*y+g*v-p*y-d*g-m*v,D=m*b*v+_*p*y+d*g*E-d*b*y-_*g*v-m*p*E;e.transform(C/x,k/x,M/x,I/x,L/x,D/x),e.drawImage(s,0,0,u*a.resolution,c*a.resolution,0,0,u,c),e.restore()},r.prototype.renderMeshFlat=function(e){var t=this.context,n=e.vertices,r=n.length/2;t.beginPath();for(var i=1;i<r-2;i++){var o=2*i,a=n[o],s=n[o+2],u=n[o+4],c=n[o+1],l=n[o+3],f=n[o+5];t.moveTo(a,c),t.lineTo(s,l),t.lineTo(u,f)}t.fillStyle="#FF0000",t.fill(),t.closePath()},r.prototype._onTextureUpdate=function(){this.updateFrame=!0},r.prototype.getBounds=function(e){if(!this._currentBounds){for(var t=e||this.worldTransform,n=t.a,r=t.b,o=t.c,a=t.d,s=t.tx,u=t.ty,c=-1/0,l=-1/0,f=1/0,h=1/0,d=this.vertices,p=0,v=d.length;p<v;p+=2){var m=d[p],g=d[p+1],y=n*m+o*g+s,_=a*g+r*m+u;f=y<f?y:f,h=_<h?_:h,c=y>c?y:c,l=_>l?_:l}if(f===-1/0||l===1/0)return i.Rectangle.EMPTY;var b=this._bounds;b.x=f,b.width=c-f,b.y=h,b.height=l-h,this._currentBounds=b}return this._currentBounds},r.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,o);var t,n,i=this.vertices,s=a.points;if(this.drawMode===r.DRAW_MODES.TRIANGLES){var u=this.indices;for(n=this.indices.length,t=0;t<n;t+=3){var c=2*u[t],l=2*u[t+1],f=2*u[t+2];if(s[0]=i[c],s[1]=i[c+1],s[2]=i[l],s[3]=i[l+1],s[4]=i[f],s[5]=i[f+1],a.contains(o.x,o.y))return!0}}else for(n=i.length,t=0;t<n;t+=6)if(s[0]=i[t],s[1]=i[t+1],s[2]=i[t+2],s[3]=i[t+3],s[4]=i[t+4],s[5]=i[t+5],a.contains(o.x,o.y))return!0;return!1},r.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamState=void 0,function(e){e[e.FirstPreparing=0]="FirstPreparing",e[e.Reloading=1]="Reloading",e[e.Ready=2]="Ready",e[e.Playing=3]="Playing"}(t.StreamState||(t.StreamState={})),function(e){e.isWatching=function(t){return t===e.Reloading||t===e.Playing}}(t.StreamState||(t.StreamState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(272);t.XHRError=r.XHRError,t.XHRLoader=r.XHRLoader;var i=n(273);t.FetchError=i.FetchError,t.FetchLoader=i.FetchLoader;var o=n(727);t.BinaryChunkLoader=o.BinaryChunkLoader},function(e,t,n){"use strict";function r(e){return"hidariue"===e||"ue"===e||"migiue"===e||"hidari"===e||"center"===e||"migi"===e||"hidarishita"===e||"shita"===e||"migishita"===e||"naka"===e}function i(e){return"small"===e||"s"===e||"middle"===e||"m"===e||"large"===e||"l"===e||"big"===e||"b"===e}function o(e){switch(e){case"naka":return"center";default:return e}}function a(e){switch(e){case"s":return"small";case"m":return"middle";case"l":case"big":case"b":return"large";default:return e}}function s(e){return Object(v.isPlainObject)(e)}function u(e){return 10*e}function c(e){return e instanceof d.Thread}n.r(t);var l={};n.r(l),n.d(l,"BASIC_SIZE_COMMANDS",(function(){return R})),n.d(l,"PREMIUM_SIZE_COMMANDS",(function(){return A})),n.d(l,"SIZE_COMMANDS",(function(){return P})),n.d(l,"BASIC_SIZE_COMMANDS_PATTERN",(function(){return x})),n.d(l,"PREMIUM_SIZE_COMMANDS_PATTERN",(function(){return C})),n.d(l,"SIZE_COMMANDS_PATTERN",(function(){return M})),n.d(l,"BASIC_POSITION_COMMANDS",(function(){return k})),n.d(l,"PREMIUM_POSITION_COMMANDS",(function(){return I})),n.d(l,"POSITION_COMMANDS",(function(){return D})),n.d(l,"BASIC_POSITION_COMMANDS_PATTERN",(function(){return N})),n.d(l,"PREMIUM_POSITION_COMMANDS_PATTERN",(function(){return F})),n.d(l,"POSITION_COMMANDS_PATTERN",(function(){return U})),n.d(l,"BASIC_COLOR_COMMANDS",(function(){return B})),n.d(l,"PREMIUM_COLOR_COMMANDS",(function(){return G})),n.d(l,"PREMIUM_COLOR_COMMANDS_ALIAS",(function(){return H})),n.d(l,"COLOR_COMMANDS",(function(){return V})),n.d(l,"COLOR_COMMANDS_WITH_ALIAS",(function(){return z})),n.d(l,"BASIC_COLOR_COMMANDS_PATTERN",(function(){return W})),n.d(l,"COLOR_COMMANDS_WITH_ALIAS_PATTERN",(function(){return Y})),n.d(l,"ALL_COLOR_COMMANDS_PATTERN",(function(){return q}));var f={};n.r(f),n.d(f,"findFirst",(function(){return Mn})),n.d(f,"overwrite",(function(){return Ln}));var h,d=n(29),p=n(86),v=n(19);!function(e){function t(e){return Object(v.flow)(o,i,r,n)(e)}function n(e){return u?u(e):e}function r(e){var t=/^[@��][0-9��-�兢+$/;return e.mail=a(e).filter((function(e){return!t.test(e)})).join(" "),e}function i(e){var t=a(e);return s(t)&&-1===t.indexOf("full")&&(e.mail=e.mail+" full"),e}function o(e){return s(a(e))||(e.vpos=e.vpos+200),e}function a(e){return(e.mail||"").split(" ")}function s(e){return-1!==e.indexOf("ue")||-1!==e.indexOf("shita")}var u=null;e.convertList=function(e){return p.a.convertList(e.map(t))},e.convert=function(e){return p.a.convert(t(e))},e.setCustomConversion=function(e){u=e}}(h||(h={}));var m,g=n(170),y=n(2),_=n(293),b=n.n(_);!function(e){function t(e){var t=function(t){return(t.score||0)>e};return t[s]=a.NG_SCORING,t}function n(e,t,n){if(!e)return e;for(var r=[],i=e.toLowerCase(),o=t.toLowerCase(),a=t.length,s=0;;){var u=i.indexOf(o,s);if(u<0){r.push(e.substring(s));break}r.push(e.substring(s,u)),s=u+a}return r.join(n)}function r(e,t,n){return e&&e.includes(t)?n:e}function i(e,t){if(0===t.length)return!1;if(t.indexOf("all")>=0)return e.mail="",!1;var n=t.map((function(e){return new RegExp("(\\s|^)"+b()(e)+"(\\s|$)","gi")}));return n.every((function(t){return t.test(e.mail)}))?(n.forEach((function(t){return e.mail=e.mail.replace(t," ")})),e.mail=e.mail.trim(),!0):void 0}function o(e,t){return t.startMs<=e&&e<t.endMs}var a,s=Symbol("filterOrderSymbol");!function(e){e[e.DELETED=0]="DELETED",e[e.IYAYO=1]="IYAYO",e[e.OLD_PATISSIER=2]="OLD_PATISSIER",e[e.NG_SCORING=3]="NG_SCORING",e[e.SEKACHAKU=4]="SEKACHAKU",e[e.DEFAULT_SMALL=5]="DEFAULT_SMALL",e[e.AT_NUMBER=6]="AT_NUMBER",e[e.CHANNEL_NG=7]="CHANNEL_NG",e[e.OWNER_NG=8]="OWNER_NG",e[e.USER_NG=9]="USER_NG",e[e.PREMIUM_COLOR=10]="PREMIUM_COLOR",e[e.DEFAULT_SETTING=11]="DEFAULT_SETTING",e[e.REPLACE_SETTING=12]="REPLACE_SETTING",e[e.NICORU_CA=13]="NICORU_CA"}(a||(a={})),e.create=function(e,t){return void 0===t&&(t=[]),new g.default(e.filter((function(e){return void 0!==e[s]})).sort((function(e,t){return e[s]-t[s]})).concat(t))},e.ngScoring=t,function(e){e.THRESHOLD_HIGH=-1e3,e.THRESHOLD_MIDDLE=-4800,e.THRESHOLD_LOW=-1e4}(t=e.ngScoring||(e.ngScoring={})),e.userNg=function(e){var t=function(e){var t=[],n=[],r=[];return e.filter((function(e){return e.source})).forEach((function(e){var i;switch(e.type){case"word":i=t;break;case"id":i=n;break;case"command":i=r;break;default:throw new Error("unknown ng type")}i.push(e)})),{ngWordClients:t,ngIdClients:n,ngCommandClients:r}}(e),n=t.ngWordClients,r=t.ngIdClients,i=t.ngCommandClients,o=function(){return!0},u=n.length?function(e){var t=e.content;return!t||(t=t.toLowerCase(),!n.some((function(e){return e.matchByWord(t)&&e.updateLastMatched()})))}:o,c=r.map((function(e){return e.source})),l=r.length?function(e){return!c.includes(e.user_id)||(r.some((function(t){return t.matchById(e.user_id)&&t.updateLastMatched()})),!1)}:o,f=i.some((function(e){return"184"===e.source})),h=i.length?function(e){var t=(e.mail||"").trim();if(!t)return!0;if("184"===t)return!f;var n=t.toLowerCase().split(/\s+/);return!i.some((function(e){return e.matchByCommands(n)&&e.updateLastMatched()}))}:o,d=function(e){return u(e)&&l(e)&&h(e)};return d[s]=a.USER_NG,d},e.channelNg=function(e){var t=function(t){return e.forEach((function(e){var i=e.source,o=e.destination;i&&0!==i.indexOf("/")&&(t.content=0===i.indexOf("*")?r(t.content,i.substring(1),o):n(t.content,i,o))})),!0};return t[s]=a.CHANNEL_NG,t},e.ownerNg=function(e){var t=function(t){return e.forEach((function(e){var i=e.source,o=e.destination;i&&(t.content=0===i.indexOf("*")?r(t.content,i.substring(1),o):n(t.content,i,o))})),!0};return t[s]=a.OWNER_NG,t},e.deleted=function(){var e=function(e){return!e.deleted};return e[s]=a.DELETED,e},e.nicoruCA=function(e,t){var n=d.LeafExpression.getUnion(e),r=/(\s|^)(patissier|ca)(\s|$)/i,i=function(e){return!r.test(e.mail)||!t.some((function(t){return void 0!==e.thread&&e.thread===t.threadId&&void 0!==e.no&&e.no<=t.lastRes-n}))||1!=e.valhalla};return i[s]=a.NICORU_CA,i},e.iyayo=function(){var e=function(e){return!/(\s|^)184(\s|$)/.test(e.mail)};return e[s]=a.IYAYO,e},e.sekachaku=function(){var e=function(e){return!/(\s|^)_live(\s|$)/.test(e.mail)};return e[s]=a.SEKACHAKU,e},e.defaultSmall=function(){var e=new RegExp("(\\s|^)("+y.a.SIZES_ARRAY.join("|")+")(\\s|$)","i"),t=function(t){return e.test(t.mail)||(t.mail=t.mail+" "+y.a.SIZES.small),!0};return t[s]=a.DEFAULT_SMALL,t},e.atNumber=function(){var e=new RegExp("(?:\\s|^)("+y.a.AT_NUMBER_REG_EXP+")(?:\\s|$)","i"),t=function(t){if("string"!=typeof t.mail)return!0;var n=t.mail.match(e);return n&&n[1]&&i(t,[n[1]]),!0};return t[s]=a.AT_NUMBER,t},e.oldPatissier=function(e,t){var n=d.LeafExpression.getUnion(e),r=new RegExp("(\\s|^)(patissier)(\\s|$)","i"),i=function(e){return!r.test(e.mail)||!t.some((function(t){return void 0!==e.thread&&e.thread===t.threadId&&void 0!==e.no&&e.no<=t.lastRes-n}))};return i[s]=a.OLD_PATISSIER,i};var u=y.a.PREMIUM_COLORS_ARRAY.concat("#[\\da-fA-F]{6}"),c=y.a.COLORS_ARRAY.concat(u);e.premiumColor=function(){var e=function(e){return e.mail&&0==(1&e.premium)&&(e.mail=e.mail.split(/\s+/).filter((function(e){return!y.a.PREMIUM_COLORS_ARRAY.includes(e.toLowerCase())&&!/^#[\da-f]{6}$/i.test(e)})).join(" ").trim()),!0};return e[s]=a.PREMIUM_COLOR,e},e.defaultSetting=function(e){var t=new RegExp("(\\s|^)("+y.a.POSITIONS_ARRAY.join("|")+")(\\s|$)","i"),n=new RegExp("(\\s|^)("+y.a.SIZES_ARRAY.join("|")+")(\\s|$)","i"),r=new RegExp("(\\s|^)("+c.join("|")+")(\\s|$)","i"),i=new RegExp("(\\s|^)("+y.a.FONTS_ARRAY.join("|")+")(\\s|$)","i");e.sort((function(e,t){var n=t.timeRange.startMs-e.timeRange.startMs;return 0===n&&(n=t.createdUnixTimestamp-e.createdUnixTimestamp),n})),e.forEach((function(e){var t=e.commands;e.settingPositionEnabled=y.a.isPositionCommand(t.position),e.settingSizeEnabled=y.a.isSizeCommand(t.size),e.settingColorEnabled=y.a.isColorNameCommand(t.color)||y.a.isPremiumColorNameCommand(t.color)||y.a.isColorCodeCommand(t.color),e.settingFontEnabled=y.a.isFontCommand(t.font)}));var u=function(a){return e.forEach((function(e){if(o(10*a.vpos,e.timeRange)){var s=e.commands;e.settingPositionEnabled&&!t.test(a.mail)&&(a.mail=a.mail+" "+s.position),e.settingSizeEnabled&&!n.test(a.mail)&&(a.mail=a.mail+" "+s.size),e.settingColorEnabled&&!r.test(a.mail)&&(a.mail=a.mail+" "+s.color),e.settingFontEnabled&&!i.test(a.mail)&&(a.mail=a.mail+" "+s.font)}})),!0};return u[s]=a.DEFAULT_SETTING,u},e.replaceSetting=function(e){e.sort((function(e,t){var n=e.timeRange.startMs-t.timeRange.startMs;return 0===n&&(n=e.createdUnixTimestamp-t.createdUnixTimestamp),n}));var t=e.map((function(e){var t=e.commands||{},n=t.position,r=void 0===n?"":n,i=t.size,o=void 0===i?"":i,a=t.color,s=void 0===a?"":a,u=t.font,l=void 0===u?"":u,f=[],h=[];return y.a.isPositionCommand(r)&&(h=h.concat(y.a.POSITIONS_ARRAY),f.push(r)),y.a.isSizeCommand(o)&&(h=h.concat(y.a.SIZES_ARRAY),f.push(o)),(y.a.isColorNameCommand(s)||y.a.isPremiumColorNameCommand(s)||y.a.isColorCodeCommand(s))&&(h=h.concat(c),f.push(s)),y.a.isFontCommand(l)&&(h=h.concat(y.a.FONTS_ARRAY),f.push(l)),{replaceSettingParams:e,mailReplacer:h.length?{regExp:new RegExp("(\\s+|^)"+h.join("|")+"(\\s+|$)","i"),toAdd:f.join(" ")}:null}})),r=function(e){return t.forEach((function(t){var r=t.replaceSettingParams,i=t.mailReplacer;if(o(10*e.vpos,r.timeRange)){var a=r.replaceInfo;if((a.perfectMatching?e.content===a.source:e.content&&e.content.includes(a.source))&&(e.content=a.replaceAll?a.destination:n(e.content,a.source,a.destination||""),i)){var s=i.regExp,u=i.toAdd,c=e.mail?e.mail.split(s).join(" ").trim():"";e.mail=c?c+" "+u:u}}})),!0};return r[s]=a.REPLACE_SETTING,r},e.removeCommand=i}(m||(m={}));var E,S=m,T=n(4),w=function(e){return new RegExp("^(?:"+e.join("|")+")$","i")},O=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},R=[T.Comment.Size.SizeCommand.Medium,T.Comment.Size.SizeCommand.Small],A=[T.Comment.Size.SizeCommand.Big],P=O(R,A),x=w(R),C=w(A),M=w(P),L=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},k=[T.Comment.Position.PositionCommand.Naka],I=[T.Comment.Position.PositionCommand.Ue,T.Comment.Position.PositionCommand.Shita],D=L(k,I),N=w(k),F=w(I),U=w(D),j=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},B=[T.Comment.Color.BasicColorCommand.White,T.Comment.Color.BasicColorCommand.Red,T.Comment.Color.BasicColorCommand.Pink,T.Comment.Color.BasicColorCommand.Orange,T.Comment.Color.BasicColorCommand.Yellow,T.Comment.Color.BasicColorCommand.Green,T.Comment.Color.BasicColorCommand.Cyan,T.Comment.Color.BasicColorCommand.Blue,T.Comment.Color.BasicColorCommand.Purple,T.Comment.Color.BasicColorCommand.Black],G=[T.Comment.Color.PremiumColorCommand.White2,T.Comment.Color.PremiumColorCommand.Red2,T.Comment.Color.PremiumColorCommand.Pink2,T.Comment.Color.PremiumColorCommand.Orange2,T.Comment.Color.PremiumColorCommand.Yellow2,T.Comment.Color.PremiumColorCommand.Green2,T.Comment.Color.PremiumColorCommand.Cyan2,T.Comment.Color.PremiumColorCommand.Blue2,T.Comment.Color.PremiumColorCommand.Purple2,T.Comment.Color.PremiumColorCommand.Black2],H=[T.Comment.Color.PremiumColorCommandAlias.Niconicowhite,T.Comment.Color.PremiumColorCommandAlias.Truered,T.Comment.Color.PremiumColorCommandAlias.Passionorange,T.Comment.Color.PremiumColorCommandAlias.Madyellow,T.Comment.Color.PremiumColorCommandAlias.Elementalgreen,T.Comment.Color.PremiumColorCommandAlias.Marineblue,T.Comment.Color.PremiumColorCommandAlias.Nobleviolet],V=j(B,G),z=j(B,G,H),W=w(B),Y=w(z),q=w(j(z,[T.Comment.Color.COLOR_CODE_PATTERN.source]));!function(e){!function(e){e[e.USER=0]="USER",e[e.YUGI=1]="YUGI",e[e.STAFF=2]="STAFF"}(e.Sender||(e.Sender={})),function(e){e[e.STANDARD=0]="STANDARD",e[e.PREMIUM=1]="PREMIUM"}(e.AccountType||(e.AccountType={})),function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.MALE=1]="MALE",e[e.FEMALE=2]="FEMALE"}(e.Sex||(e.Sex={}))}(E||(E={}));var K,X=function(){function e(){}return e.isStandard=function(t){return!e.isPremium(t)},e.isPremium=function(t){return e.checkPremiumBit(t.premium,e.PREMIUM)},e.isYugi=function(t){return e.checkPremiumBit(t.premium,e.YUGI)},e.isStaff=function(t){return e.checkPremiumBit(t.premium,e.STAFF)},e.isOperator=function(t){return e.isYugi(t)||e.isStaff(t)},e.isOperatorCommand=function(t){return e.isOperator(t)&&e.isCommandContent(t)},e.isOperatorComment=function(t){return e.isOperator(t)&&!e.isCommandContent(t)},e.judgeSender=function(t){return e.isYugi(t)?E.Sender.YUGI:e.isStaff(t)?E.Sender.STAFF:E.Sender.USER},e.judgeAccountType=function(t){return e.isStandard(t)?E.AccountType.STANDARD:e.isPremium(t)?E.AccountType.PREMIUM:E.AccountType.STANDARD},e.judgeSex=function(t){return e.checkPremiumBit(t,e.HAS_SEX)?e.checkPremiumBit(t,e.SEX_FEMALE)?E.Sex.FEMALE:E.Sex.MALE:E.Sex.UNDEFINED},e.isCommandContent=function(e){return void 0!==e.content&&"/"===e.content.charAt(0)},e.checkPremiumBit=function(e,t){return void 0!==e&&Boolean(e&t)},e.PREMIUM=1,e.YUGI=2,e.STAFF=4,e.HAS_SEX=8,e.SEX_FEMALE=16,e}(),$=function(){function e(e){this.niwavideApiChat=e,this.accountType=X.judgeAccountType(e),this.sex=X.judgeSex(e.premium),this.commandToLowerCase(),this.removePremiumMeritViolation()}return Object.defineProperty(e.prototype,"isDeleted",{get:function(){return!(void 0===this.niwavideApiChat.deleted||0===this.niwavideApiChat.deleted)},enumerable:!0,configurable:!0}),e.prototype.removePremiumMeritViolation=function(){this.removeColorPremiumMeritViolation(),this.removeNicolivePremiumMeritViolation()},e.prototype.removeColorPremiumMeritViolation=function(){S.premiumColor()(this.niwavideApiChat)},e.prototype.commandToLowerCase=function(){this.niwavideApiChat.mail&&(this.niwavideApiChat.mail=this.niwavideApiChat.mail.toLowerCase())},e.prototype.removeNicolivePremiumMeritViolation=function(){this.niwavideApiChat.mail&&this.accountType===E.AccountType.STANDARD&&(this.niwavideApiChat.mail=this.niwavideApiChat.mail.split(/\s+/).filter((function(e){return!C.test(e)&&!F.test(e)})).join(" "))},e}(),J=function(){function e(){}return e.prototype.parse=function(e){var t=e.match(/(\S+)\s+(.+)/);if(t&&t.length>2){var n=t.slice(1),r=n[0],i=n[1];try{if("object"==typeof JSON.parse(i))return[r,i]}catch(e){}}return null},e}(),Q=function(){function e(){}return e.prototype.parse=function(e){for(var t=[],n="",r=K.START,i=0,o=e;i<o.length;i++){var a=o[i];switch(r){case K.START:" "===a||"\t"===a?r=K.START:'"'===a?r=K.QUOTED:(r=K.RUNNING,n+=a);break;case K.RUNNING:" "===a||"\t"===a?(t.push(n),n="",r=K.START):"\\"===a?r=K.RESC:n+=a;break;case K.RESC:n+=a,r=K.RUNNING;break;case K.QUOTED:'"'===a?(t.push(n),n="",r=K.START):"\\"===a?r=K.QESC:n+=a;break;case K.QESC:n+=a,r=K.QUOTED}}return n.length>0&&t.push(n),t},e}();!function(e){e[e.START=0]="START",e[e.RUNNING=1]="RUNNING",e[e.RESC=2]="RESC",e[e.QUOTED=3]="QUOTED",e[e.QESC=4]="QESC"}(K||(K={}));var Z,ee,te=function(e,t){this.vpos=e,this.content=t;var n=t.match(/^(\/\S+)\s*/);this.commandName=n&&n[1]?n[1]:""},ne=function(){function e(){this.jsonParser=new J,this.lineParser=new Q}return e.prototype.create=function(e){if(!X.isOperatorCommand(e))return null;var t=void 0===e.content?"":e.content,n=this.jsonParser.parse(t)||this.lineParser.parse(t);return this.createCommand(e,t,n)},e}(),re=(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=function(e){function t(n,r,i,o,a,s){var u=e.call(this,s?s.vpos:t.DefaultVpos,i)||this;return u.isPermanent=n,u.body=r,u.content=i,u.name=o,u.mail=a,u.niwavideApiChat=s,u.commandToLowerCase(),u}return re(t,e),t.prototype.commandToLowerCase=function(){this.mail&&(this.mail=this.mail.toLowerCase()),this.niwavideApiChat&&this.niwavideApiChat.mail&&(this.niwavideApiChat.mail=this.niwavideApiChat.mail.toLowerCase())},t.DefaultVpos=0,t}(te),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return re(t,e),t.prototype.createCommand=function(e,t,n){if("/perm"===n[0]){var r=n.slice(1).join(" "),i=e.name||"",o=e.mail||"";return new ie(!0,r,t,i,o,e)}return null},t}(ne),ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.question=n,a.items=r,a.othersCommand=i,a.content=o,a}return ae(t,e),t}(te),ue=function(e){function t(t,n){return e.call(this,t,n)||this}return ae(t,e),t}(te),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ae(t,e),t.prototype.createCommand=function(e,t,n){return"/attributecomment"!==n[0]?null:ee.createAttributeComment(e.vpos,t,n[1],n.slice(2))},t}(ne);!function(e){e.createAttributeComment=function(e,t,n,r){var i=null;switch(n){case"start":if(r&&r.length>2){var o=r.splice(0,1)[0],a=function(e,t){var n=0,r=[],i=Math.floor(e.length/t);for(;n<i;)r[n]=e.splice(0,t),n++;return r}(r,2).map((function(e){return{answer:e[0],command:e[1]}})),s=r[0]?r[0]:"";i=new se(e,o,a,s,t)}break;case"stop":i=new ue(e,t)}return i}}(ee||(ee={}));var le,fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),he=function(e){function t(t,n){return e.call(this,t,n)||this}return fe(t,e),t}(te),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fe(t,e),t.prototype.createCommand=function(e,t,n){return"/clear"===n[0]||"/cls"===n[0]?new he(e.vpos,t):null},t}(ne),pe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.ON=0]="ON",e[e.OFF=1]="OFF"}(le||(le={}));var ve,me=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.vpos=t,i.locked=n,i.content=r,i}return pe(t,e),Object.defineProperty(t.prototype,"isLocked",{get:function(){return this.locked===le.ON},enumerable:!0,configurable:!0}),t}(te),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pe(t,e),t.prototype.createCommand=function(e,t,n){if("/commentlock"===n[0])switch(n[1]){case"on":return new me(e.vpos,le.ON,t);case"off":return new me(e.vpos,le.OFF,t);default:return null}return null},t}(ne),ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.vpos=t,i.mode=n,i.content=r,i}return ye(t,e),Object.defineProperty(t.prototype,"isModeNormal",{get:function(){return this.isNormal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNormal",{get:function(){return"normal"===this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBackground",{get:function(){return"background"===this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSplitTop",{get:function(){return"splittop"===this.mode},enumerable:!0,configurable:!0}),t}(te),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ye(t,e),t.prototype.createCommand=function(e,t,n){if("/commentmode"!==n[0])return null;var r=Ee.create(n[1]);return null===r?null:new _e(e.vpos,r,t)},t}(ne),Ee=function(){function e(){}return e.create=function(e){switch(e){case"background":return"background";case"normal":return"normal";case"splittop":return"splittop";default:return null}},e}(),Se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Te=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.vpos=t,i.couponDetails=n,i.content=r,i}return Se(t,e),t}(te),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Se(t,e),t.prototype.createCommand=function(e,t,n){if("/coupon"===n[0])try{var r=JSON.parse(n[1]);return new Te(e.vpos,r,t)}catch(e){return null}return null},t}(ne),Oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.message=n,o.niwavideApiChat=r,o.content=i,o}return Oe(t,e),t}(te),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype.createCommand=function(e,t,n){return"/cruise"===n[0]&&n[1]?new Re(e.vpos,n[1],e,t):null},t}(ne),Pe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.vpos=t,r.content=n,r}return Pe(t,e),t}(te),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),t.prototype.createCommand=function(e,t,n){return"/disconnect"===n[0]?new xe(e.vpos,t):null},t}(ne),Me=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.position=n,a.size=r,a.displayTime=i,a.content=o,a}return Me(t,e),t}(te),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Me(t,e),t}(te),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Me(t,e),t.prototype.createCommand=function(e,t,n){if("/fingerprint"===n[0]){if("off"===n[1])return new ke(e.vpos,t);var s="shita",u="small",c=3;n.shift();for(var l=0,f=n;l<f.length;l++){var h=f[l],d=parseInt(h,10);if(r(h))s=o(h);else if(i(h))u=a(h);else{if(isNaN(d))return null;c=d}}return new Le(e.vpos,s,u,c,t)}return null},t}(ne),De=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(e){function t(t,n){return e.call(this,t,n)||this}return De(t,e),t}(te),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return De(t,e),t.prototype.createCommand=function(e,t,n){return"/gameupdate"===n[0]?new Ne(e.vpos,t):null},t}(ne),Ue=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(t,n,r,i,o,a,s,u,c,l){var f=e.call(this,t,c)||this;return f.vpos=t,f.itemId=n,f.userId=r,f.advertiserName=i,f.point=o,f.message=a,f.itemName=s,f.niwavideApiChat=u,f.content=c,f.contributionRank=l,f}return Ue(t,e),t}(te),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ue(t,e),t.prototype.createCommand=function(e,t,n){if("/gift"===n[0]){var r=n[1],i="NULL"===n[2]?null:n[2],o=n[3],a=parseInt(n[4],10);if(isNaN(a))return null;var s=n[5]||"",u=n[6];if(n.length<8)return new je(e.vpos,r,i,o,a,s,u,e,t);var c=parseInt(n[7],10);return isNaN(c)?null:new je(e.vpos,r,i,o,a,s,u,e,t,c)}return null},t}(ne),Ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.NEW_ICHIBA_ITEMS=1]="NEW_ICHIBA_ITEMS",e[e.NEW_COMMUNITY_MEMBERS=2]="NEW_COMMUNITY_MEMBERS",e[e.EXTENSION=3]="EXTENSION",e[e.TIMESHIFT_UNVIEWED=4]="TIMESHIFT_UNVIEWED",e[e.NEW_TAG_ITEMS=5]="NEW_TAG_ITEMS",e[e.EARTHQUAKE_QUICK=6]="EARTHQUAKE_QUICK",e[e.EARTHQUAKE_FIXED=7]="EARTHQUAKE_FIXED",e[e.RANKING_IN=8]="RANKING_IN",e[e.RANKING_UPDATE=9]="RANKING_UPDATE"}(ve||(ve={}));var He,Ve=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.type=n,a.message=r,a.niwavideApiChat=i,a.content=o,a}return Ge(t,e),t}(te),ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t.prototype.createCommand=function(e,t,n){var r=parseInt(n[1],10);return"/info"!==n[0]||Object(v.isUndefined)(ve[r])?null:new Ve(e.vpos,r,n.slice(2).join(" "),e,t)},t}(ne),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.programId=n,a.title=r,a.waitTimeSeed=i,a.content=o,a}return We(t,e),t}(te),qe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.vpos=t,r.content=n,r}return We(t,e),t}(te),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return We(t,e),t.prototype.createCommand=function(e,t,n){return"/jump"===n[0]?"clear"===n[1]?new qe(e.vpos,t):new Ye(e.vpos,n[1],n[2],parseInt(n[3],10),t):null},t}(ne),Xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(e){return s(e)&&"string"==typeof e.advertiser&&"number"==typeof e.rank&&("number"==typeof e.userRank||void 0===e.userRank)&&("string"==typeof e.message||void 0===e.message)}e.isValidLatestNicoad=function(e){return s(e)&&"string"==typeof e.advertiser&&"number"==typeof e.point&&("string"==typeof e.message||void 0===e.message)},e.isValidContributionRanking=function(e){if(!s(e)||"number"!=typeof e.totalPoint)return!1;var n=e.ranking;return n instanceof Array&&n.reduce((function(e,n){return e&&t(n)}),!0)},e.isValidRanking=t}(He||(He={}));var $e=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.latestNicoad=n,a.contributionRanking=r,a.niwavideApiChat=i,a.content=o,a}return Xe(t,e),t}(te),Je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe="1",Ze=function(e){function t(t,n,r,i,o){var a=e.call(this,t,i)||this;return a.vpos=t,a.totalAdPoint=n,a.niwavideApiChat=r,a.content=i,a.message=o,a}return Je(t,e),t}(te),et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return et(t,e),t.prototype.createCommand=function(e,t,n){if("/nicoad"===n[0])try{var r=JSON.parse(n[1]);return s(i=r)&&void 0===i.version&&He.isValidLatestNicoad(i.latestNicoad)&&He.isValidContributionRanking(i.contributionRanking)?new $e(e.vpos,r.latestNicoad,r.contributionRanking,e,t):function(e){return s(e)&&e.version===Qe&&"number"==typeof e.totalAdPoint&&("string"==typeof e.message||void 0===e.message)}(r)?new Ze(e.vpos,r.totalAdPoint,e,t,r.message):null}catch(e){return null}var i;return null},t}(ne),nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.vpos=t,i.line=n,i.content=r,i}return nt(t,e),t}(te),it=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,a)||this;return s.vpos=t,s.color=n,s.message=r,s.name=i,s.niwavideApiChat=o,s.content=a,s}return nt(t,e),t}(te),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nt(t,e),t.prototype.createCommand=function(e,t,n){var r=n[0],i=n[1];if("/press"===r){if("line"===i)return new rt(e.vpos,parseInt(n[2],10),t);if("show"===i){var o=n[2],a=n.slice(3),s=a.findIndex((function(e){return"@"===e})),u=a.slice(0,s).join(" "),c=a.slice(s+1,a.length).join(" ");return new it(e.vpos,o,u,c,e,t)}}return null},t}(ne),at=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.message=n,o.niwavideApiChat=r,o.content=i,o}return at(t,e),t}(te),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),t.prototype.createCommand=function(e,t,n){return"/quote"===n[0]&&n[1]?new st(e.vpos,n[1],e,t):null},t}(ne),ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.url=n,a.title=r,a.waitTimeSeed=i,a.content=o,a}return ct(t,e),t}(te),ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.vpos=t,r.content=n,r}return ct(t,e),t}(te),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),t.prototype.createCommand=function(e,t,n){return"/redirect"===n[0]?"clear"===n[1]?new ft(e.vpos,t):new lt(e.vpos,n[1],n[2],parseInt(n[3],10),t):null},t}(ne),dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.message=n,o.niwavideApiChat=r,o.content=i,o}return dt(t,e),t}(te),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dt(t,e),t.prototype.createCommand=function(e,t,n){return"/spi"===n[0]&&n[1]?new pt(e.vpos,n[1],e,t):null},t}(ne),mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.mode=n,a.caption=r,a.message=i,a.content=o,a}return mt(t,e),t}(te),yt=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.vpos=t,a.mode=n,a.caption=r,a.message=i,a.content=o,a}return mt(t,e),t}(te),_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mt(t,e),t.prototype.createCommand=function(e,t,n){var r="/telop"===n[0],i="/koukoku"===n[0];if(r||i){var o=n[1],a=null,s=null;return"on"===o?a=n.slice(2).join(" "):"show"===o||"perm"===o||"show0"===o?s=n.slice(2).join(" "):"show2"===o&&(a=n[2],s=n.slice(3).join(" ")),r?new gt(e.vpos,o,a,s,t):i?new yt(e.vpos,o,a,s,t):null}return null},t}(ne),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.displayMode=n,o.commentMode=r,o.content=i,o}return bt(t,e),t}(te);!function(e){!function(e){e.ON="on",e.OFF="off"}(e.DisplayMode||(e.DisplayMode={})),function(e){e.ENABLED="0",e.TRANSPARENT="1",e.DISABLED="2"}(e.CommentMode||(e.CommentMode={}))}(Et||(Et={}));var St,Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bt(t,e),t.prototype.createCommand=function(e,t,n){return"/trialpanel"===n[0]?new Et(e.vpos,n[1],n[2],t):null},t}(ne),wt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.programId=n,o.point=r,o.content=i,o}return wt(t,e),t}(te),Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wt(t,e),t.prototype.createCommand=function(e,t,n){if("/uadpoint"===n[0]){var r=parseInt(n[1],10),i=parseInt(n[2],10);return isNaN(r)||isNaN(i)?null:new Ot(e.vpos,r,i,t)}return null},t}(ne),At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(e){function t(t){var n=e.call(this,t.vpos,t.content||"")||this;return n.niwavideApiChat=t,n}return At(t,e),t}(te),xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ct=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.message=n,o.niwavideApiChat=r,o.content=i,o}return xt(t,e),t}(te),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xt(t,e),t.prototype.createCommand=function(e,t,n){return"/user.follow"===n[0]?new Ct(e.vpos,n[1],e,t):null},t}(ne),Lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.message=n,o.niwavideApiChat=r,o.content=i,o}return Lt(t,e),t}(te),It=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lt(t,e),t.prototype.createCommand=function(e,t,n){return"/user.levelup"===n[0]?new kt(e.vpos,n[1],e,t):null},t}(ne),Dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nt=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.vpos=t,o.question=n,o.answers=r,o.content=i,o}return Dt(t,e),t}(te),Ft=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.mode=n,o.results=r,o.content=i,o}return Dt(t,e),t}(te),Ut=function(e){function t(t,n){return e.call(this,t,n)||this}return Dt(t,e),t}(te),jt=function(e){function t(t,n){return e.call(this,t,n)||this}return Dt(t,e),t}(te),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dt(t,e),t.prototype.createCommand=function(e,t,n){return"/vote"!==n[0]?null:St.createVote(e.vpos,n[1],n.slice(2),t)},t}(ne);!function(e){function t(e){var t=null;switch(e){case"percent":case"per":case"text_percent":case"text_per":t=e}return t}e.createVote=function(e,n,r,i){var o=null;switch(n){case"start":r&&r.length>1&&(o=new Nt(e,r[0],r.slice(1),i));break;case"showresult":r&&r.length>1&&(o=new Ft(e,t(r[0]),r.slice(1).map((function(e){return parseInt(e,10)/10})),i));break;case"save":o=new Ut(e,i);break;case"stop":o=new jt(e,i)}return o},e.createVoteResultMode=t}(St||(St={}));var Gt,Ht=function(){function e(){}return e.assort=function(e){var t=this.factories.reduce((function(t,n){return null!==t?t:n.create(e)}),null);if(null!==t)return t;if(X.isOperatorCommand(e))return new Pt(e);if(X.isOperatorComment(e)){var n=e.content||"",r=e.name||"",i=e.mail||"";return new ie(!1,n,n,r,i,e)}return new $(e)},e.factories=[new de,new ge,new be,new Ke,new ht,new oe,new Bt,new ze,new _t,new ot,new Ce,new Rt,new we,new ce,new Ie,new Fe,new Tt,new tt,new Be,new vt,new ut,new Ae,new Mt,new It],e}(),Vt=function(){function e(){}return e.isUserComment=function(e){return Ht.assort(e)instanceof $},e}(),zt=function(){function e(){this._tag=null,this._enabled=!0}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!0,configurable:!0}),e}();!function(e){e.PASSING="passing",e.RANGE="range"}(Gt||(Gt={}));var Wt,Yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(e){function t(t){var n=e.call(this)||this;return n._params=t,n._checked=!1,void 0!==t.tag&&(n._tag=t.tag),n}return Yt(t,e),Object.defineProperty(t.prototype,"positionMs",{get:function(){return this._params.positionMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triggerType",{get:function(){return Gt.PASSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},enumerable:!0,configurable:!0}),t.prototype.onTimeUpdate=function(e){this.enabled&&(this._params.oneTime&&this._checked||(this._checked?e<this._params.positionMs&&(this._checked=!1):this._params.positionMs<=e&&(this._checked=!0,this._params.callback(e))))},t}(zt),Kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xt=function(){function e(e){this._range=e}return e.isValidRange=function(e){return e.enterPositionMs<e.exitPositionMs},e.prototype.isInner=function(e){return void 0!==e&&this._range.enterPositionMs<=e&&e<this._range.exitPositionMs},e}(),$t=function(e){function t(t){var n=e.call(this)||this;return n._params=t,n.timeRangeInfoList=[],void 0!==t.tag&&(n._tag=t.tag),n.createTimeRangeInfoList(),n}return Kt(t,e),t.prototype.createTimeRangeInfoList=function(){var e=this;this.timeRangeInfoList=[],this._params.rangeList.sort((function(e,t){return e.enterPositionMs-t.enterPositionMs}));for(var t=function(t){for(var n,r=t.startIndex+1,i=e._params.rangeList.length;r<i&&(n=e._params.rangeList[r]).enterPositionMs<=t.exitPositionMs;r++)t.exitPositionMs=Math.max(t.exitPositionMs,n.exitPositionMs),t.lastIndex=r;return t},n=0,r=this._params.rangeList.length;n<r;n++){var i=this._params.rangeList[n],o=t({startIndex:n,lastIndex:n,enterPositionMs:i.enterPositionMs,exitPositionMs:i.exitPositionMs});Xt.isValidRange(o)&&this.timeRangeInfoList.push(new Xt(o)),n=o.lastIndex}},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){var t=this;if(this._enabled&&!e){var n=!1;this.timeRangeInfoList.forEach((function(e){e.isInner(t.lastTimeMs)&&(n=!0)})),n&&this._params.exitCallback(this.lastTimeMs)}this._enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeList",{get:function(){return this._params.rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triggerType",{get:function(){return Gt.RANGE},enumerable:!0,configurable:!0}),t.prototype.onTimeUpdate=function(e){var t=this;if(this.enabled){var n=this.timeRangeInfoList.some((function(e){return e.isInner(t.lastTimeMs)})),r=this.timeRangeInfoList.some((function(t){return t.isInner(e)}));n!==r&&(r?this._params.enterCallback(e):this._params.exitCallback(e)),this.lastTimeMs=e}},t}(zt),Jt=function(){function e(e,t){this.process=e,this.intervalMs=t,this.id=null}return e.prototype.start=function(){var e,t,n=this;this.stop();var r=function(){e=Date.now(),n.process(),(t=n.intervalMs-(Date.now()-e))<0&&(t=0),n.id=window.setTimeout(r,t)};this.id=window.setTimeout(r,0)},e.prototype.stop=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null)},e}();!function(e){e.create=function(e){return new en(e)}}(Wt||(Wt={}));var Qt,Zt=Wt,en=function(){function e(e){void 0===e&&(e=function(){return 0}),this._processUpdatingTime=e,this._triggerList=[],this.repeatScheduler=null,this.setupMonitoringSchedule()}return Object.defineProperty(e.prototype,"processUpdatingTime",{set:function(e){this._processUpdatingTime=e},enumerable:!0,configurable:!0}),e.prototype.getVideoTimeMs=function(){return this._processUpdatingTime()},e.prototype.getTriggerList=function(){return this._triggerList.concat()},e.prototype.setupMonitoringSchedule=function(){var e=this;this.repeatScheduler=new Jt((function(){var t=e.getVideoTimeMs();e._triggerList.forEach((function(e){e.onTimeUpdate(t)}))}),100)},e.prototype.start=function(){this.repeatScheduler.start()},e.prototype.stop=function(){this.repeatScheduler.stop()},e.prototype.makePassing=function(e){return new qt(e)},e.prototype.makeTimeRange=function(e){return new $t(e)},e.prototype.add=function(e){this._triggerList.push(e)},e.prototype.remove=function(e){var t=this;this._triggerList.some((function(n,r){return n===e&&(t._triggerList.splice(r,1),!0)}))},e.prototype.removeAll=function(){this._triggerList.length=0},e.prototype.dispose=function(){this.repeatScheduler.stop()},e}(),tn=function(){function e(e){this.getCurrentVposMs=e,this.timeProgressTriggerHandler=null,this.timeProgressTriggerHandler=Zt.create(e),this.timeProgressTriggerHandler.start()}return e.prototype.dispose=function(){null!==this.timeProgressTriggerHandler&&this.timeProgressTriggerHandler.dispose()},e.prototype.waitIfFuture=function(e,t){this.isFuture(e)?this.reserve(e,t):t()},e.prototype.reserve=function(e,t){var n=this;if(null!==this.timeProgressTriggerHandler){var r=this.timeProgressTriggerHandler.makePassing({callback:function(){t(),null!==n.timeProgressTriggerHandler&&n.timeProgressTriggerHandler.remove(r)},oneTime:!0,positionMs:u(e)});this.timeProgressTriggerHandler.add(r)}},e.prototype.toCurrentVpos=function(e){return e.niwavideApiChat.vpos=this.getCurrentVposMs()/10,e},e.prototype.isFuture=function(e){return u(e)>this.getCurrentVposMs()},e.prototype.isPast=function(e){return u(e)<this.getCurrentVposMs()},e}(),nn=function(){function e(){}return e.isRestrictedComment=function(e){return e===E.Sex.FEMALE},e.isRestrictedCommentWithPremiumFlag=function(t){var n=X.judgeSex(t);return e.isRestrictedComment(n)},e}(),rn=1006,on=n(18),an=function(e,t){void 0===t&&(t=0),this.control=e,this.delayRangeMs=t},sn=function(){function e(){}return e.prototype.create=function(e){return this.createCommand(e)},e}(),un=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.userId=n,a.contentId=r,a.errorCode=i,a}return un(t,e),t}(an),ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return un(t,e),t.prototype.createCommand=function(e){return"nx:error"===e.type?new cn(e,e.user_id,e.content_id,e.error_code,e.delay_range):null},t}(sn),fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hn=function(e){function t(t,n,r,i,o,a,s){var u=e.call(this,t,s)||this;return u.text=n,u.url=r,u.filters=i,u.timeWait=o,u.command=a,u}return fn(t,e),t}(an),dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fn(t,e),t.prototype.createCommand=function(e){var t;return"nx:notify"===e.type?void 0!==e.time_wait&&isNaN(parseInt(e.time_wait,10))?null:new hn(e,e.text?e.text:null,e.url?e.url:null,void 0===(t=e.filters)||""===t?[]:t.split(",").filter((function(e){return"_publisher"===e||"_watcher"===e||"_orphan"===e})),e.time_wait?e.time_wait:null,e.command?e.command:null,e.delay_range):null},t}(sn),pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.contentId=n,i}return pn(t,e),t}(an),mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pn(t,e),t.prototype.createCommand=function(e){return"nx:program_changed"===e.type?new vn(e,e.content_id,e.delay_range):null},t}(sn),gn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.text=n,a.category=r,a.priority=i,a}return gn(t,e),t}(an),_n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gn(t,e),t.prototype.createCommand=function(e){if("nx:telop"===e.type){var t=parseInt(e.priority,10);return new yn(e,e.text,e.category,t,e.delay_range)}return null},t}(sn),bn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=function(e){function t(t){var n=e.call(this,t,t.delay_range)||this;return n.control=t,n}return bn(t,e),t}(an),Sn=function(){function e(){}return e.assort=function(e){var t=this.factories.reduce((function(t,n){return null!==t?t:n.create(e)}),null);return null!==t?t:new En(e)},e.factories=[new dn,new _n,new ln,new mn],e}(),Tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emitReceiveThread=function(e){t.emit("receive:thread",e)},t.onReceiveRealtimeChat=function(e){t.emit("receive:realtime_chat",Ht.assort(e)),t.emit("receive:realtime_raw_message",e)},t.emitReceivePooledChat=function(e){t.emit("receive:pooled_chats",e.map((function(e){return Ht.assort(e)})))},t.emitReceiveRealtimeControl=function(e){t.emit("receive:realtime_control",Sn.assort(e)),t.emit("receive:realtime_raw_message",e)},t.emitReceivePooledControl=function(e){t.emit("receive:pooled_controls",e.map((function(e){return Sn.assort(e)})))},t.emitRetryFailed=function(){t.emit("error:retry_failed")},t.emitFetchThreadFailed=function(e){t.emit("error:fetch_thread_failed",e)},t}return Tn(t,e),t}(on.EventEmitter),On=function(){return(On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Rn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},An=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Pn=[1e3,2e3,3e3,5e3,1e4,2e4],xn=function(){function e(){this.retryIndex=0,this.threadMap={},this.messageServerClient=null,this.subject=new wn,this.pollingIntervalIds=new Map}return e.createMessageServerClient=function(e){var t=new d.Context(e),n=new d.KeyRepository(e.fetchers||{});return new d.Client({context:t,keyRepository:n})},e.prototype.initialize=function(e,t){var n=this;this.messageServerClient&&this.messageServerClient.dispose(),this.messageServerClient=e,this.messageServerClient.on("connection:close",(function(e){e.code===rn&&n.reconnect()}))},Object.defineProperty(e.prototype,"liveMessageServerObservable",{get:function(){return this.subject},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this;this.retryIndex<10?setTimeout((function(){return Promise.all(Object(v.map)(e.threadMap,(function(t){return e.fetch({id:t.id,service:t.service,isPrivate:t.isPrivate,whenSec:t.whenSec})}))).then((function(){e.retryIndex=0}))}),Pn[Math.min(this.retryIndex++,Pn.length-1)]):this.subject.emitRetryFailed()},e.prototype.fetch=function(e,t){var n=this;if(null===this.messageServerClient)return Promise.reject(new Error("messageServerClient is null"));var r,i=this.threadMap[e.id]=this.messageServerClient.createThread(e);return i.removeListener("receive:chat",this.subject.onReceiveRealtimeChat),i.removeListener("receive:control",this.subject.emitReceiveRealtimeControl),i.on("receive:chat",this.subject.onReceiveRealtimeChat),i.on("receive:control",this.subject.emitReceiveRealtimeControl),r=t?On({thread:i,scores:1},t):{thread:i,scores:1},this.messageServerClient.fetchThread(r).then((function(e){var t=e[0];return n.subject.emitReceiveThread(t),n.subject.emitReceivePooledChat(t.chats),n.subject.emitReceivePooledControl(t.controls),t})).catch(this.subject.emitFetchThreadFailed)},e.prototype.fetchSinceTime=function(e,t){var n=this;void 0===t&&(t={numRes:1e3,resFrom:-50});var r=this.messageServerClient;return null===r?Promise.reject(new Error("messageServerClient is null")):void 0===e.whenSec?Promise.reject(new Error("whenSec is undefined")):r.fetchThread({thread:r.createThread(e),scores:1,resFrom:t.resFrom}).then((function(e){var t=e[0];return t?(n.subject.emitReceiveThread(t),n.subject.emitReceivePooledChat(t.chats),t.lastRes>0?t.lastRes:0):Promise.reject(new Error("Missing thread"))})).then((function(r){var i={id:e.id,isPrivate:e.isPrivate,service:e.service};return n.fetchResFrom(i,{resFrom:r+1,numRes:t.numRes})})).catch(this.subject.emitFetchThreadFailed)},e.prototype.fetchResFrom=function(e,t){var n=this;void 0===t&&(t={numRes:1e3,resFrom:0});var r=this.messageServerClient;return null===r?Promise.reject(new Error("messageServerClient is null")):r.fetchThread({thread:r.createThread(e),scores:1,resFrom:t.resFrom,numRes:t.numRes}).then((function(e){var t=e[0];return t?(n.subject.emitReceiveThread(t),n.subject.emitReceivePooledChat(t.chats),n.subject.emitReceivePooledControl(t.controls),t):Promise.reject(new Error("Missing thread"))})).catch(this.subject.emitFetchThreadFailed)},e.prototype.polling=function(e,t){return Rn(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l=this;return An(this,(function(f){switch(f.label){case 0:if(null===this.messageServerClient)throw new Error("messageServerClient is null");if(this.pollingIntervalIds.has(e.id))throw new Error("polling is running");n=t.intervalSec&&t.intervalSec>=30?t.intervalSec:30,r=t.resFrom&&t.resFrom<0?t.resFrom:-100,i=void 0!==t.endless&&t.endless,100,o=t.whenSecRange||100,a=0,f.label=1;case 1:return f.trys.push([1,7,,8]),[4,this.fetchWhenSec(e,{resFrom:r,endless:i})];case 2:a=f.sent(),s=0,f.label=3;case 3:return s<2?(e.whenSec=e.whenSec+o,[4,this.fetchWhenSec(e,{resFrom:a,endless:i})]):[3,6];case 4:a=f.sent(),f.label=5;case 5:return s++,[3,3];case 6:return[3,8];case 7:return"end"===(u=f.sent()).message?[2]:(this.subject.emitFetchThreadFailed(u),[2]);case 8:return c=setInterval((function(){return Rn(l,void 0,void 0,(function(){var t,n;return An(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e.whenSec=e.whenSec+o,[4,this.fetchWhenSec(e,{resFrom:a,endless:i})];case 1:return a=r.sent(),[3,3];case 2:return t=r.sent(),(n=this.pollingIntervalIds.get(e.id))&&(clearInterval(n),this.pollingIntervalIds.delete(e.id)),"end"===t.message?[2]:(this.subject.emitFetchThreadFailed(t),[3,3]);case 3:return[2]}}))}))}),1e3*n),this.pollingIntervalIds.set(e.id,c),[2]}}))}))},e.prototype.postComment=function(e,t){var n=this;if(null===this.messageServerClient)return Promise.reject(new Error("messageServerClient is null"));var r=this.threadMap[e.id];return null===r?Promise.reject(new Error("saved thread mapping is null")):this.messageServerClient.postChat({thread:r,vpos:Math.floor(t.vposMs/10),content:t.content,mail:t.command,sex:t.sex}).then((function(e){return Object(v.forEach)(e[0],(function(e){if(Object(v.has)(e,"chat")){var t=e;n.subject.onReceiveRealtimeChat(t.chat)}})),e}))},e.prototype.dispose=function(){this.clear(),null!==this.messageServerClient&&(this.messageServerClient.dispose(),this.messageServerClient=null)},e.prototype.clear=function(){var e=this;this.pollingIntervalIds.forEach((function(e){clearInterval(e)})),this.pollingIntervalIds=new Map,Object(v.forEach)(this.threadMap,(function(t,n){e.threadMap[n]=null,delete e.threadMap[n]})),this.threadMap={},this.subject.removeAllListeners()},e.prototype.fetchWhenSec=function(e,t){var n=this;if(null===this.messageServerClient)return Promise.reject(new Error("messageServerClient is null"));var r=this.messageServerClient.createThread(e);return this.messageServerClient.fetchThread({thread:r,scores:1,resFrom:t.resFrom}).then((function(e){var r=e[0];return r?void 0===r.lastRes||r.lastRes<=0?void 0===t.resFrom||t.resFrom<0?t.resFrom:Promise.reject(new Error("Missing thread")):(n.subject.emitReceiveThread(r),n.subject.emitReceivePooledChat(r.chats),n.subject.emitReceivePooledControl(r.controls),r.lastRes>=r.globalNumRes?t.endless?r.lastRes:Promise.reject(new Error("end")):0===r.chats.length&&0===r.controls.length?r.lastRes:r.lastRes+1):Promise.reject(new Error("Missing thread"))}))},e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILURE=1]="FAILURE",e[e.INVALID_THREAD=2]="INVALID_THREAD",e[e.INVALID_TICKET=3]="INVALID_TICKET",e[e.INVALID_POST_KEY=4]="INVALID_POST_KEY",e[e.THREAD_LOCKED=5]="THREAD_LOCKED",e[e.READONLY=6]="READONLY",e[e.NOT_IMPLEMENTED=7]="NOT_IMPLEMENTED",e[e.INVALID_184=8]="INVALID_184",e[e.INVALID_LANGUAGE=9]="INVALID_LANGUAGE"}(Qt||(Qt={}));var Cn=function(e){return Array.isArray(e)&&void 0!==e[0]&&Object(v.has)(e[0],"chat_result")},Mn=function(e,t){var n=e.split(/\s+/).find((function(e){return t.test(e)}));return n||null},Ln=function(e,t,n){return[n].concat(e.split(/\s+/).filter((function(e){return!t.test(e)})).filter((function(e){return e.length>0}))).join(" ")};n.d(t,"Chat",(function(){return d.Chat})),n.d(t,"Context",(function(){return d.Context})),n.d(t,"Control",(function(){return d.Control})),n.d(t,"LiveChatConverter",(function(){return h})),n.d(t,"LiveChatFilter",(function(){return Vt})),n.d(t,"ChatSynchronizer",(function(){return tn})),n.d(t,"ChatPrivilegeJudge",(function(){return X})),n.d(t,"ChatRestrictedJudge",(function(){return nn})),n.d(t,"LiveMessageServerClient",(function(){return xn})),n.d(t,"ChatResponseStatus",(function(){return Qt})),n.d(t,"isChatErrorResponse",(function(){return Cn})),n.d(t,"isThread",(function(){return c})),n.d(t,"Attribute",(function(){return E})),n.d(t,"UserComment",(function(){return $})),n.d(t,"OperatorComment",(function(){return ie})),n.d(t,"OperatorCommentFactory",(function(){return oe})),n.d(t,"OperatorCommand",(function(){return te})),n.d(t,"UndefinedOperatorCommand",(function(){return Pt})),n.d(t,"CommentLock",(function(){return me})),n.d(t,"CommentLockType",(function(){return le})),n.d(t,"CommentMode",(function(){return _e})),n.d(t,"CommentModeTypeFactory",(function(){return Ee})),n.d(t,"VoteStart",(function(){return Nt})),n.d(t,"VoteShowResult",(function(){return Ft})),n.d(t,"VoteSave",(function(){return Ut})),n.d(t,"VoteStop",(function(){return jt})),n.d(t,"VoteFactory",(function(){return Bt})),n.d(t,"ClearOperatorComment",(function(){return he})),n.d(t,"Jump",(function(){return Ye})),n.d(t,"ClearJump",(function(){return qe})),n.d(t,"Redirect",(function(){return lt})),n.d(t,"ClearRedirect",(function(){return ft})),n.d(t,"Disconnect",(function(){return xe})),n.d(t,"Koukoku",(function(){return yt})),n.d(t,"Telop",(function(){return gt})),n.d(t,"TrialPanel",(function(){return Et})),n.d(t,"Info",(function(){return Ve})),n.d(t,"InfoType",(function(){return ve})),n.d(t,"PressShow",(function(){return it})),n.d(t,"PressLine",(function(){return rt})),n.d(t,"UadPoint",(function(){return Ot})),n.d(t,"Coupon",(function(){return Te})),n.d(t,"Fingerprint",(function(){return Le})),n.d(t,"ClearFingerprint",(function(){return ke})),n.d(t,"AttributeCommentStart",(function(){return se})),n.d(t,"AttributeCommentStop",(function(){return ue})),n.d(t,"GameUpdate",(function(){return Ne})),n.d(t,"Nicoad",(function(){return $e})),n.d(t,"NicoadV1",(function(){return Ze})),n.d(t,"NicoadContext",(function(){return He})),n.d(t,"Gift",(function(){return je})),n.d(t,"Spi",(function(){return pt})),n.d(t,"Quote",(function(){return st})),n.d(t,"Cruise",(function(){return Re})),n.d(t,"UserFollow",(function(){return Ct})),n.d(t,"UserLevelup",(function(){return kt})),n.d(t,"NxOperatorCommand",(function(){return an})),n.d(t,"NxNotify",(function(){return hn})),n.d(t,"NxTelop",(function(){return yn})),n.d(t,"NxError",(function(){return cn})),n.d(t,"NxProgramChanged",(function(){return vn})),n.d(t,"NxUndefinedOperatorCommand",(function(){return En})),n.d(t,"CommandDefinitions",(function(){return l})),n.d(t,"CommandParser",(function(){return f}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.target=null,this.currentTarget=null,this.eventPhase=0,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1,this.type=e,this.bubbles=t,this.cancelable=n,this.target=null,this.currentTarget=null,this.eventPhase=0,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}return e.prototype.preventDefault=function(){return this.defaultPrevented=this.cancelable,this},e.prototype.stopPropagation=function(){return this.propagationStopped=!0,this},e.prototype.stopImmediatePropagation=function(){return this.immediatePropagationStopped=this.propagationStopped=!0,this},e.prototype.remove=function(){return this.removed=!0,this},e.prototype.clone=function(){var t=new e(this.type,this.bubbles,this.cancelable);for(var n in this)this.hasOwnProperty(n)&&(t[n]=this[n]);return t},e.prototype.set=function(e){for(var t in e)this[t]=e[t];return this},e.prototype.toString=function(){return"["+this.constructor.name+" (type="+this.type+")]"},e}()},function(e,t,n){"use strict";function r(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}var i=n(764),o=n(105);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=o({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(i),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,i){return null===n?[r(t,e),"[",i,"]"].join(""):[r(t,e),"[",r(i,e),"]=",r(n,e)].join("")};case"bracket":return function(t,n){return null===n?r(t,e):[r(t,e),"[]=",r(n,e)].join("")};default:return function(t,n){return null===n?r(t,e):[r(t,e),"=",r(n,e)].join("")}}}(t=o({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(i){var o=e[i];if(void 0===o)return"";if(null===o)return r(i,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(n(i,e,a.length))})),a.join("&")}return r(i,t)+"="+r(o,t)})).filter((function(e){return e.length>0})).join("&"):""}},function(e,t,n){var r=n(8),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(6),i=n(39),o=n(58),a=n(173),s=n(16).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(88)("keys"),i=n(61);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(8),i=n(5),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(40)(Function.call,n(36).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r ﾂ�癩癶寂窶≫や�����遺俄岩ｯ竅溘\u2028\u2029\ufeff"},function(e,t,n){var r=n(8),i=n(125).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(47),i=n(46);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(47),i=n(46);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(58),i=n(1),o=n(31),a=n(30),s=n(73),u=n(133),c=n(71),l=n(37),f=n(10)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,v,m,g){u(n,t,p);var y,_,b,E=function(e){if(!h&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T="values"==v,w=!1,O=e.prototype,R=O[f]||O["@@iterator"]||v&&O[v],A=R||E(v),P=v?T?E("entries"):A:void 0,x="Array"==t&&O.entries||R;if(x&&(b=l(x.call(new e)))!==Object.prototype&&b.next&&(c(b,S,!0),r||"function"==typeof b[f]||a(b,f,d)),T&&R&&"values"!==R.name&&(w=!0,A=function(){return R.call(this)}),r&&!g||!h&&!w&&O[f]||a(O,f,A),s[t]=A,s[S]=d,v)if(y={values:T?A:E("values"),keys:m?A:E("keys"),entries:P},g)for(_ in y)_ in O||o(O,_,y[_]);else i(i.P+i.F*(h||w),t,y);return y}},function(e,t,n){"use strict";var r=n(64),i=n(60),o=n(71),a={};n(30)(a,n(10)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(92),i=n(46);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(10)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(73),i=n(10)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(16),i=n(60);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(80),i=n(10)("iterator"),o=n(73);e.exports=n(39).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(397);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(20),i=n(63),o=n(17);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(59),i=n(189),o=n(73),a=n(35);e.exports=n(132)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r,i,o,a=n(40),s=n(179),u=n(124),c=n(120),l=n(6),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){y.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},d=function(e){delete g[e]},"process"==n(41)(f)?r=function(e){f.nextTick(a(y,e,1))}:v&&v.now?r=function(e){v.now(a(y,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,n){var r=n(6),i=n(142).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(41)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=i(t),this.reject=i(n)}var i=n(25);e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";function r(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?U(2,-24)-U(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for((e=F(e))!=e||e===D?(i=e!=e?1:0,r=u):(r=j(B(e)/G),e*(o=U(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?l/o:l*U(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*U(2,t),r+=c):(i=e*U(2,c-1)*U(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function i(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-D:D;r+=U(2,t),l-=a}return(c?-1:1)*r*U(2,l-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function a(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function c(e){return r(e,52,8)}function l(e){return r(e,23,4)}function f(e,t,n){R(e[x],t,{get:function(){return this[n]}})}function h(e,t,n,r){var i=w(+n);if(i+t>e[V])throw I(C);var o=e[H]._b,a=i+e[z],s=o.slice(a,a+t);return r?s:s.reverse()}function d(e,t,n,r,i,o){var a=w(+n);if(a+t>e[V])throw I(C);for(var s=e[H]._b,u=a+e[z],c=r(+i),l=0;l<t;l++)s[u+l]=c[o?l:t-l-1]}var p=n(6),v=n(15),m=n(58),g=n(99),y=n(30),_=n(69),b=n(7),E=n(67),S=n(47),T=n(17),w=n(198),O=n(65).f,R=n(16).f,A=n(140),P=n(71),x="prototype",C="Wrong index!",M=p.ArrayBuffer,L=p.DataView,k=p.Math,I=p.RangeError,D=p.Infinity,N=M,F=k.abs,U=k.pow,j=k.floor,B=k.log,G=k.LN2,H=v?"_b":"buffer",V=v?"_l":"byteLength",z=v?"_o":"byteOffset";if(g.ABV){if(!b((function(){M(1)}))||!b((function(){new M(-1)}))||b((function(){return new M,new M(1.5),new M(NaN),"ArrayBuffer"!=M.name}))){for(var W,Y=(M=function(e){return E(this,M),new N(w(e))})[x]=N[x],q=O(N),K=0;q.length>K;)(W=q[K++])in M||y(M,W,N[W]);m||(Y.constructor=M)}var X=new L(new M(2)),$=L[x].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||_(L[x],{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},!0)}else M=function(e){E(this,M,"ArrayBuffer");var t=w(e);this._b=A.call(new Array(t),0),this[V]=t},L=function(e,t,n){E(this,L,"DataView"),E(e,M,"DataView");var r=e[V],i=S(t);if(i<0||i>r)throw I("Wrong offset!");if(i+(n=void 0===n?r-i:T(n))>r)throw I("Wrong length!");this[H]=e,this[z]=i,this[V]=n},v&&(f(M,"byteLength","_l"),f(L,"buffer","_b"),f(L,"byteLength","_l"),f(L,"byteOffset","_o")),_(L[x],{getInt8:function(e){return h(this,1,e)[0]<<24>>24},getUint8:function(e){return h(this,1,e)[0]},getInt16:function(e){var t=h(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=h(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return o(h(this,4,e,arguments[1]))},getUint32:function(e){return o(h(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(h(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(h(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){d(this,1,e,a,t)},setUint8:function(e,t){d(this,1,e,a,t)},setInt16:function(e,t){d(this,2,e,s,t,arguments[2])},setUint16:function(e,t){d(this,2,e,s,t,arguments[2])},setInt32:function(e,t){d(this,4,e,u,t,arguments[2])},setUint32:function(e,t){d(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){d(this,4,e,l,t,arguments[2])},setFloat64:function(e,t){d(this,8,e,c,t,arguments[2])}});P(M,"ArrayBuffer"),P(L,"DataView"),y(L[x],g.VIEW,!0),t.ArrayBuffer=M,t.DataView=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(206),i=function(){function e(){this.emitter=new r}return e.prototype.on=function(e,t,n){this.emitter.on(e,t,n)},e.prototype.once=function(e,t,n){this.emitter.once(e,t,n)},e.prototype.off=function(e,t,n){this.emitter.off(e,t,n)},e.prototype.dispatch=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.emitter).emit.apply(t,[e].concat(n))},e.prototype.offAll=function(){this.emitter.removeAllListeners()},e}();t.EventDispatcher=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215),i=n(27);t.streamProtocolToString=function(e){switch(e){case r.StreamProtocol.HLS:return i.StreamingProtocol.Hls;case r.StreamProtocol.RTMP:return i.StreamingProtocol.Rtmp;case r.StreamProtocol.TLSHLS:return i.StreamingProtocol.TlsHls;case r.StreamProtocol.HLSFMP4:return i.StreamingProtocol.HlsFmp4;case r.StreamProtocol.WEBRTC:return i.StreamingProtocol.Webrtc;default:return}},t.createGetStreamCommandCreator=function(){return{type:"getStream"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(216);t.toWsStreamQuality=function(e){switch(e){case r.StreamQuality.BroadcasterHigh:return"broadcaster_high";case r.StreamQuality.BroadcasterLow:return"broadcaster_low";case r.StreamQuality.Abr:return"abr";case r.StreamQuality.SuperHigh:return"super_high";case r.StreamQuality.High:return"high";case r.StreamQuality.Normal:return"normal";case r.StreamQuality.Low:return"low";case r.StreamQuality.SuperLow:return"super_low";case r.StreamQuality.AudioHigh:return"audio_high";default:return"normal"}},t.toStreamQuality=function(e){switch(e){case"broadcaster_high":return r.StreamQuality.BroadcasterHigh;case"broadcaster_low":return r.StreamQuality.BroadcasterLow;case"abr":return r.StreamQuality.Abr;case"super_high":return r.StreamQuality.SuperHigh;case"high":return r.StreamQuality.High;case"normal":return r.StreamQuality.Normal;case"low":return r.StreamQuality.Low;case"super_low":return r.StreamQuality.SuperLow;case"audio_high":return r.StreamQuality.AudioHigh;default:return r.StreamQuality.Normal}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this,r=t.split(/[\/|?|=|&|#]/),i=r[3];if(n.baseUri=r[0]+"//"+r[2],"hlslive"!==i&&"hlsarchive"!==i&&"hlsdvr"!==i)throw new Error("Unsupported DmcHls type:"+i);return n.type=i,n.streamId=r[5],n.authentication={key:r[4],value:r[8]},n}return i(t,e),t}(n(103).EdgeStreamProtocol);t.DmcHls=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(103).EdgeStreamProtocol);t.DmcRtmp=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(103).EdgeStreamProtocol);t.DmcWebRtc=o},function(e,t,n){(function(t){function n(e){return M.test(e)}function r(e){return n(e)?function(e){var t=C.lastIndex=0;for(;C.test(e);)t++;return t}(e):N(e)}function i(e){return n(e)?function(e){return e.match(C)||[]}(e):function(e){return e.split("")}(e)}function o(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=B(t/2))&&(e+=e)}while(t);return n}function a(e){if("string"==typeof e)return e;if(c(e))return H?H.call(e):"";var t=e+"";return"0"==t&&1/e==-h?"-0":t}function s(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&F.call(e)==m}function l(e){return e?(e=function(e){if("number"==typeof e)return e;if(c(e))return v;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var n=_.test(e);return n||b.test(e)?L(e.slice(2),n?2:8):y.test(e)?v:+e}(e))===h||e===-h?(e<0?-1:1)*p:e==e?e:0:0===e?e:0}var f,h=1/0,d=9007199254740991,p=17976931348623157e292,v=NaN,m="[object Symbol]",g=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,b=/^0o[0-7]+$/i,E="[\\ud800-\\udfff]",S="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",T="\\ud83c[\\udffb-\\udfff]",w="[^\\ud800-\\udfff]",O="(?:\\ud83c[\\udde6-\\uddff]){2}",R="[\\ud800-\\udbff][\\udc00-\\udfff]",A="(?:"+S+"|"+T+")"+"?",P="[\\ufe0e\\ufe0f]?"+A+("(?:\\u200d(?:"+[w,O,R].join("|")+")[\\ufe0e\\ufe0f]?"+A+")*"),x="(?:"+[w+S+"?",S,O,R,E].join("|")+")",C=RegExp(T+"(?="+T+")|"+x+P,"g"),M=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),L=parseInt,k="object"==typeof t&&t&&t.Object===Object&&t,I="object"==typeof self&&self&&self.Object===Object&&self,D=k||I||Function("return this")(),N=(f="length",function(e){return null==e?void 0:e[f]}),F=Object.prototype.toString,U=D.Symbol,j=Math.ceil,B=Math.floor,G=U?U.prototype:void 0,H=G?G.toString:void 0;e.exports=function(e,t,u){var c;e=null==(c=e)?"":a(c);var f=(t=function(e){var t=l(e),n=t%1;return t==t?n?t-n:t:0}(t))?r(e):0;return t&&f<t?function(e,t){var u=(t=void 0===t?" ":a(t)).length;if(u<2)return u?o(t,e):t;var c=o(t,j(e/r(t)));return n(t)?s(i(c),0,e).join(""):c.slice(0,e)}(t-f,u)+e:e}}).call(this,n(22))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDictionary=void 0;var r={};t.setDictionary=function(e){r=e},t.default=function(e){return r.hasOwnProperty(e)?r[e]:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var r=n(155);t.Tag=r.defineObjectEnum({Common:"荳闊ｬ(縺昴�莉�)",Politics:"謾ｿ豐ｻ",Animal:"蜍慕黄",Cooking:"譁咏炊",Play:"貍泌･上＠縺ｦ縺ｿ縺�",Sing:"豁後▲縺ｦ縺ｿ縺�",Dance:"雕翫▲縺ｦ縺ｿ縺�",Draw:"謠上＞縺ｦ縺ｿ縺�",Lecture:"隰帛ｺｧ",Live:"繧ｲ繝ｼ繝�",LiveOld2:"繧ｲ繝ｼ繝�螳滓ｳ�",LiveOld:"繝励Ξ繧､螳滓ｳ�",Request:"蜍慕判邏ｹ莉�",RequestOld:"蜍慕判邏ｹ莉九�繝ｪ繧ｯ繧ｨ繧ｹ繝�",Face:"鬘泌�縺�",Totu:"蜃ｸ蠕�■",SmartPhoneBroadcast:"繧ｹ繝槭�繝医ヵ繧ｩ繝ｳ驟堺ｿ｡"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineObjectEnum=void 0,t.defineObjectEnum=function(e){return Object.freeze(e)}},function(e,t,n){var r=n(626).Symbol;e.exports=r},function(e,t){function n(e,t){this.x=e||0,this.y=t||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(e){this.set(e.x,e.y)},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)}},function(e,t,n){function r(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this.type=i.SHAPES.RECT}var i=n(11);r.prototype.constructor=r,e.exports=r,r.EMPTY=new r(0,0,0,0),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}},function(e,t,n){function r(e,t,n,r,f){if(!e)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");t=t||100,n=n||100,f=f||l.RESOLUTION;var h=new i;if(h.width=t,h.height=n,h.resolution=f,h.scaleMode=r||l.SCALE_MODES.DEFAULT,h.hasLoaded=!0,o.call(this,h,new c.Rectangle(0,0,t,n)),this.width=t,this.height=n,this.resolution=f,this.render=null,this.renderer=e,this.renderer.type===l.RENDERER_TYPE.WEBGL){var d=this.renderer.gl;this.textureBuffer=new a(d,this.width,this.height,h.scaleMode,this.resolution),this.baseTexture._glTextures[d.id]=this.textureBuffer.texture,this.filterManager=new s(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(t,n),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new u(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=n(106),o=n(83),a=n(107),s=n(244),u=n(160),c=n(28),l=n(11),f=new c.Matrix;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.resize=function(e,t,n){e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=this._frame.width=this.crop.width=e,this.height=this._frame.height=this.crop.height=t,n&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},r.prototype.clear=function(){this.valid&&(this.renderer.type===l.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},r.prototype.renderWebGL=function(e,t,n,r){if(this.valid){if(r=void 0===r||r,//!updateTransform;
this.textureBuffer.transform=t,this.textureBuffer.activate(),e.worldAlpha=1,r){e.worldTransform.identity(),e.currentBounds=null;var i,o,a=e.children;for(i=0,o=a.length;i<o;++i)a[i].updateTransform()}var s=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(e,this.textureBuffer,n),this.renderer.filterManager=s}},r.prototype.renderCanvas=function(e,t,n,r){if(this.valid){r=!!r;var i=f;i.identity(),t&&i.append(t);var o=e.worldTransform;e.worldTransform=i,e.worldAlpha=1;var a,s,u=e.children;for(a=0,s=u.length;a<s;++a)u[a].updateTransform();n&&this.textureBuffer.clear();var c=this.textureBuffer.context,l=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,c),this.renderer.resolution=l,e.worldTransform===i&&(e.worldTransform=o)}},r.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},r.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},r.prototype.getBase64=function(){return this.getCanvas().toDataURL()},r.prototype.getCanvas=function(){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var e=this.renderer.gl,t=this.textureBuffer.size.width,n=this.textureBuffer.size.height,r=new Uint8Array(4*t*n);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,n,e.RGBA,e.UNSIGNED_BYTE,r),e.bindFramebuffer(e.FRAMEBUFFER,null);var i=new u(t,n),o=i.context.getImageData(0,0,t,n);return o.data.set(r),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},r.prototype.getPixels=function(){var e,t;if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl;e=this.textureBuffer.size.width,t=this.textureBuffer.size.height;var r=new Uint8Array(4*e*t);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(0,0,e,t,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return e=this.textureBuffer.canvas.width,t=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,e,t).data},r.prototype.getPixel=function(e,t){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(e,t,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return this.textureBuffer.canvas.getContext("2d").getImageData(e,t,1,1).data}},function(e,t){function n(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},height:{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t},n.prototype.destroy=function(){this.context=null,this.canvas=null}},function(e,t,n){function r(e,t,n){this.shaders=[],this.padding=0,this.uniforms=n||{},this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc}var i=n(110);r.prototype.constructor=r,e.exports=r,r.prototype.getShader=function(e){var t=e.gl,n=this.shaders[t.id];return n||(n=new i(e.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[t.id]=n),n},r.prototype.applyFilter=function(e,t,n,r){var i=this.getShader(e);e.filterManager.applyFilter(i,t,n,r)},r.prototype.syncUniform=function(e){for(var t=0,n=this.shaders.length;t<n;++t)this.shaders[t].syncUniform(e)}},function(e,t,n){var r=n(11),i={};e.exports=i,i.renderGraphics=function(e,t){var n=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],a=o.shape,s=o._fillTint,u=o._lineTint;if(t.lineWidth=o.lineWidth,o.type===r.SHAPES.POLY){t.beginPath();var c=a.points;t.moveTo(c[0],c[1]);for(var l=1;l<c.length/2;l++)t.lineTo(c[2*l],c[2*l+1]);a.closed&&t.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*n,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===r.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*n,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fillRect(a.x,a.y,a.width,a.height)),o.lineWidth&&(t.globalAlpha=o.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.strokeRect(a.x,a.y,a.width,a.height));else if(o.type===r.SHAPES.CIRC)t.beginPath(),t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*n,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke());else if(o.type===r.SHAPES.ELIP){var f=2*a.width,h=2*a.height,d=a.x-f/2,p=a.y-h/2;t.beginPath();var v=f/2*.5522848,m=h/2*.5522848,g=d+f,y=p+h,_=d+f/2,b=p+h/2;t.moveTo(d,b),t.bezierCurveTo(d,b-m,_-v,p,_,p),t.bezierCurveTo(_+v,p,g,b-m,g,b),t.bezierCurveTo(g,b+m,_+v,y,_,y),t.bezierCurveTo(_-v,y,d,b+m,d,b),t.closePath(),o.fill&&(t.globalAlpha=o.fillAlpha*n,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}else if(o.type===r.SHAPES.RREC){var E=a.x,S=a.y,T=a.width,w=a.height,O=a.radius,R=Math.min(T,w)/2|0;O=O>R?R:O,t.beginPath(),t.moveTo(E,S+O),t.lineTo(E,S+w-O),t.quadraticCurveTo(E,S+w,E+O,S+w),t.lineTo(E+T-O,S+w),t.quadraticCurveTo(E+T,S+w,E+T,S+w-O),t.lineTo(E+T,S+O),t.quadraticCurveTo(E+T,S,E+T-O,S),t.lineTo(E+O,S),t.quadraticCurveTo(E,S,E,S+O),t.closePath(),(o.fillColor||0===o.fillColor)&&(t.globalAlpha=o.fillAlpha*n,t.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.fill()),o.lineWidth&&(t.globalAlpha=o.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.stroke())}}},i.renderGraphicsMask=function(e,t){var n=e.graphicsData.length;if(0!==n){t.beginPath();for(var i=0;i<n;i++){var o=e.graphicsData[i],a=o.shape;if(o.type===r.SHAPES.POLY){var s=a.points;t.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)t.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===r.SHAPES.RECT)t.rect(a.x,a.y,a.width,a.height),t.closePath();else if(o.type===r.SHAPES.CIRC)t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath();else if(o.type===r.SHAPES.ELIP){var c=2*a.width,l=2*a.height,f=a.x-c/2,h=a.y-l/2,d=c/2*.5522848,p=l/2*.5522848,v=f+c,m=h+l,g=f+c/2,y=h+l/2;t.moveTo(f,y),t.bezierCurveTo(f,y-p,g-d,h,g,h),t.bezierCurveTo(g+d,h,v,y-p,v,y),t.bezierCurveTo(v,y+p,g+d,m,g,m),t.bezierCurveTo(g-d,m,f,y+p,f,y),t.closePath()}else if(o.type===r.SHAPES.RREC){var _=a.x,b=a.y,E=a.width,S=a.height,T=a.radius,w=Math.min(E,S)/2|0;T=T>w?w:T,t.moveTo(_,b+T),t.lineTo(_,b+S-T),t.quadraticCurveTo(_,b+S,_+T,b+S),t.lineTo(_+E-T,b+S),t.quadraticCurveTo(_+E,b+S,_+E,b+S-T),t.lineTo(_+E,b+T),t.quadraticCurveTo(_+E,b,_+E-T,b),t.lineTo(_+T,b),t.quadraticCurveTo(_,b,_,b+T),t.closePath()}}}},i.updateGraphicsTint=function(e){if(16777215!==e.tint||e._prevTint!==e.tint){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,n=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;i++){var o=e.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}}}},function(e,t,n){
/**
 * @file        Main export of the PIXI extras library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
n(669),n(670),n(671),e.exports={MovieClip:n(672),TilingSprite:n(673),BitmapText:n(674)}},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,o.readFileSync(t+"/blurY.vert","utf8"),o.readFileSync(t+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n,r){var i=this.getShader(e);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(i,t,n,r);else{for(var o=e.filterManager.getRenderTarget(!0),a=t,s=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,a,s,!0);var c=s;s=a,a=c}e.filterManager.applyFilter(i,a,n,r),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})}).call(this,"/")},function(e,t,n){"use strict";function r(e,t,n){if(a.call(this),n=n||{},"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");this.name=e,this.url=t,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(e){return e.toString().replace("object ","")}function o(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}var a=n(262),s=n(260),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},r.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(void 0!==this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},r.prototype.load=function(e){if(!this.isLoading)if(this.isComplete){if(e){var t=this;setTimeout((function(){e(t)}),1)}}else switch(e&&this.once("complete",e),this.isLoading=!0,this.emit("start",this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var t="is"+e[0].toUpperCase()+e.substring(1);!1===this[t]&&(this[t]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this["is"+e[0].toUpperCase()+e.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element "+e)},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=r.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},r.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){e.send()}),0)},r.prototype._createSource=function(e,t,n){n||(n=e+"/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=n,r},r.prototype._onError=function(e){this.abort("Failed to load element using "+e.target.nodeName)},r.prototype._onProgress=function(e){e&&e.lengthComputable&&this.emit("progress",this,e.loaded/e.total)},r.prototype._xhrOnError=function(){var e=this.xhr;this.abort(i(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},r.prototype._xhrOnAbort=function(){this.abort(i(this.xhr)+" Request was aborted by the user.")},r.prototype._xdrOnTimeout=function(){this.abort(i(this.xhr)+" Request timed out.")},r.prototype._xhrOnLoad=function(){var e=this.xhr,t=void 0===e.status?e.status:200;if(200===t||204===t||0===t&&e.responseText.length>0){if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=e.responseText;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e.responseText),this.isJson=!0}catch(e){return void this.abort("Error trying to parse loaded json:",e)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(e.responseText,"text/xml")}else{var i=document.createElement("div");i.innerHTML=e.responseText,this.data=i}this.isXml=!0}catch(e){return void this.abort("Error trying to parse loaded xml:",e)}else this.data=e.response||e.responseText;this.complete()}else this.abort("["+e.status+"]"+e.statusText+":"+e.responseURL)},r.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,c||(c=document.createElement("a")),c.href=e;var n=!(e=s(c.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&n&&r===t.protocol?"":"anonymous"},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this._getExtension()]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this._getExtension()]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?");-1!==r&&(e=e.substring(0,r)),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},r.prototype._getMimeFromXhrType=function(e){switch(e){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT},r.setExtensionLoadType=function(e,t){o(r._loadTypeMap,e,t)},r.setExtensionXhrType=function(e,t){o(r._xhrTypeMap,e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(278);t.InitSegment=r.default;var i=n(732);t.InitSegmentParser=i.default;var o=n(168);t.MediaSegmentChunk=o.default;var a=n(280);t.MediaSegmentEditor=a.default;var s=n(169);t.MediaSegmentHeader=s.default;var u=n(733);t.MediaSegmentNormalizer=u.default;var c=n(281);t.MediaSegmentParser=c.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.slice=function(e,t,n){return new DataView(e.buffer,e.byteOffset+t,n)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i,o,a){this.mediaSegmentHeader=e,this.trackId=t,this.baseMediaDecodeTime=n,this.firstPts=r,this.lastPts=i,this.duration=o,this.data=a};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){this.id=e,this.url=t,this.duration=n,this.baseMediaDecodeTime=r,this.firstPts=i};t.default=r},function(e,t,n){"use strict";n.r(t);var r=function(){function e(e){void 0===e&&(e=[]),this.filters=e}return e.prototype.addFilter=function(e){this.filters.push(e)},e.prototype.apply=function(e){var t=this;return e.map((function(e){return Object.assign({},e)})).filter((function(e){return t.filters.every((function(t){return t(e)&&!!e.content}))}))},e}();t.default=r},function(e,t,n){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */function r(e,t){try{return t(e)}catch(t){return e}}t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},s=e.split(a),u=o.decode||i,c=0;c<s.length;c++){var l=s[c],f=l.indexOf("=");if(!(f<0)){var h=l.substr(0,f).trim(),d=l.substr(++f,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==n[h]&&(n[h]=r(d,u))}}return n},t.serialize=function(e,t,n){var r=n||{},i=r.encode||o;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=i(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(c)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return u};var i=decodeURIComponent,o=encodeURIComponent,a=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,n){e.exports=!n(15)&&!n(7)((function(){return 7!=Object.defineProperty(n(120)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(10)},function(e,t,n){var r=n(34),i=n(35),o=n(89)(!1),a=n(122)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(16),i=n(5),o=n(62);e.exports=n(15)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(35),i=n(65).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(62),i=n(90),o=n(79),a=n(20),s=n(78),u=Object.assign;e.exports=!u||n(7)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,m=0;v>m;)f.call(d,h=p[m++])&&(n[h]=d[h]);return n}:u},function(e,t,n){"use strict";var r=n(25),i=n(8),o=n(179),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6).parseInt,i=n(72).trim,o=n(126),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(6).parseFloat,i=n(72).trim;e.exports=1/r(n(126)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(41);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(8),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(129),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<u?c*(i/u/a+1/o-1/o)*u*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var r=n(5);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(25),i=n(20),o=n(78),a=n(17);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),f=a(c.length),h=u?f-1:0,d=u?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=d;break}if(h+=d,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=d)h in l&&(s=t(s,l[h],h,c));return s}},function(e,t,n){"use strict";var r=n(20),i=n(63),o=n(17);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){n(15)&&"g"!=/./g.flags&&n(16).f(RegExp.prototype,"flags",{configurable:!0,get:n(94)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(5),i=n(8),o=n(144);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(194),i=n(74);e.exports=n(98)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(16).f,i=n(64),o=n(69),a=n(40),s=n(67),u=n(68),c=n(132),l=n(189),f=n(66),h=n(15),d=n(57).fastKey,p=n(74),v=h?"_s":"size",m=function(e,t){var n,r=d(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&u(r,n,e[c],e)}));return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),h&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=d(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(194),i=n(74);e.exports=n(98)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(49)(0),o=n(31),a=n(57),s=n(177),u=n(197),c=n(8),l=n(7),f=n(74),h=a.getWeak,d=Object.isExtensible,p=u.ufstore,v={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(c(e)){var t=h(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,"WeakMap"),e,t)}},y=e.exports=n(98)("WeakMap",m,g,u,!0,!0);l((function(){return 7!=(new y).set((Object.freeze||Object)(v),7).get(v)}))&&(s((r=u.getConstructor(m,"WeakMap")).prototype,g),a.NEED=!0,i(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];o(t,e,(function(t,i){if(c(t)&&!d(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(69),i=n(57).getWeak,o=n(5),a=n(8),s=n(67),u=n(68),c=n(49),l=n(34),f=n(74),h=c(5),d=c(6),p=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},g=function(e,t){return h(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=d(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=r&&u(r,n,e[o],e)}));return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(f(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},function(e,t,n){var r=n(47),i=n(17);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(65),i=n(90),o=n(5),a=n(6).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(91),i=n(8),o=n(17),a=n(40),s=n(10)("isConcatSpreadable");e.exports=function e(t,n,u,c,l,f,h,d){for(var p,v,m=l,g=0,y=!!h&&a(h,d,3);g<c;){if(g in u){if(p=y?y(u[g],g,n):u[g],v=!1,i(p)&&(v=void 0!==(v=p[s])?!!v:r(p)),v&&f>0)m=e(t,n,p,o(p.length),m,f-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=p}m++}g++}return m}},function(e,t,n){var r=n(17),i=n(128),o=n(46);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,c=void 0===n?" ":String(n),l=r(t);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(e,t,n){var r=n(62),i=n(35),o=n(79).f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t,n){var r=n(80),i=n(204);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(68);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)o.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(e,t){var n=a?a+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(e,t,n,r,i,o){var s=a?a+e:e;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(e,t,n){var i=new r(t,n||this),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(e,t,n){var i=new r(t,n||this,!0),o=a?a+e:e;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(e,t,n,r){var i=a?a+e:e;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(t)if(o.fn)(o.fn!==t||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var u=0,c=o.length;u<c;u++)(o[u].fn!==t||r&&!o[u].once||n&&o[u].context!==n)&&s.push(o[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[a?a+e:e]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(208),i=function(){function e(e,t,n,r,i,o,a,s,u){void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===u&&(u=null),this.title=e,this.openTimeMs=t,this.beginTimeMs=n,this.endTimeMs=r,this.vposBaseTimeMs=i,this.watchCount=o,this.commentCount=a,this.adPoint=s,this.giftPoint=u}return e.prototype.getLiveCycle=function(e){return e<this.openTimeMs?r.LiveCycle.BeforeOpen:null!==this.endTimeMs&&e>=this.endTimeMs?r.LiveCycle.Ended:r.LiveCycle.OnAir},e.prototype.copy=function(t){return new e(void 0===t.title?this.title:t.title,void 0===t.openTimeMs?this.openTimeMs:t.openTimeMs,void 0===t.beginTimeMs?this.beginTimeMs:t.beginTimeMs,void 0===t.endTimeMs?this.endTimeMs:t.endTimeMs,void 0===t.vposBaseTimeMs?this.vposBaseTimeMs:t.vposBaseTimeMs,void 0===t.watchCount?this.watchCount:t.watchCount,void 0===t.commentCount?this.commentCount:t.commentCount,void 0===t.adPoint?this.adPoint:t.adPoint,void 0===t.giftPoint?this.giftPoint:t.giftPoint)},e}();t.Program=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BeforeOpen=0]="BeforeOpen",e[e.OnAir=1]="OnAir",e[e.Ended=2]="Ended"}(t.LiveCycle||(t.LiveCycle={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.token=e};t.AudienceToken=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(515),u=n(516),c=n(517),l=n(518),f=n(519),h=n(146),d=n(520),p=n(521),v=n(522);t.ErrorCode=v.ErrorCode;var m=n(523),g=n(524),y=n(525),_=n(526),b=n(211),E=n(527),S=n(528),T=n(529),w=n(530),O=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.reliveServerClient=t,o.program=n,o.audienceToken=r,o.serverTime=i,o.CONNECTION_RETRY_DELAY_MS=3e3,o.CONNECTION_RETRY_COUNT=10,o.isPlaying=!1,o.isReloading=!1,o.hasGotSeat=!1,o.permissionRequest=null,o.audiencePermissionRequester=null,o.availableRoomsUpdater=null,o.edgeStreamUpdater=null,o.enqueteAnswerSender=null,o.heartbeatSender=null,o.postkeyRequester=null,o.programUpdater=null,o.reliveServerSession=null,o.roomChanger=null,o.roomUpdater=null,o.serverReconnector=null,o.serverTimeSynchronizer=null,o.streamRequester=null,o.akashicRequester=null,o.changeStreamSender=null,o.postCommentSender=null,o}return i(t,e),t.prototype.play=function(e){var t=this;return this.isPlaying?Promise.reject("縺吶〒縺ｫ譏�蜒上ｒ蜀咲函荳ｭ縺ｧ縺�"):(this.isPlaying=!0,this.permissionRequest=e,this.connectWithRetry().then((function(n){return n.isConnected?(t.serverReconnector=new m.ServerReconnector(n),t.serverReconnector.on("requested",t.onReconnectRequest,t),t.serverReconnector.start(),t.serverTimeSynchronizer=new w.ServerTimeSynchronizer(n),t.serverTime=t.serverTimeSynchronizer.start(t.serverTime),t.audiencePermissionRequester=new u.AudiencePermissionRequester(n),t.heartbeatSender=new c.BroadcastHeartbeatSender(n),t.heartbeatSender.start(),t.programUpdater=new p.ProgramUpdater(n,t.serverTime),t.programUpdater.on("update",t.onProgramUpdated,t),t.programUpdater.on("end",t.onProgramEnded,t),t.programUpdater.start(t.program),t.edgeStreamUpdater=new S.EdgeStreamUpdater(n),t.edgeStreamUpdater.on("update",t.onEdgeStreamUpdated,t),t.edgeStreamUpdater.start(),t.roomUpdater=new _.RoomUpdater(n),t.roomUpdater.on("update",t.onRoomUpdated,t),t.roomUpdater.start(),t.availableRoomsUpdater=new g.AvailableRoomsUpdater(n),t.availableRoomsUpdater.on("update",t.onAvailableRoomsUpdated,t),t.availableRoomsUpdater.start(),t.hasGotSeat?t.audiencePermissionRequester.requestAsSameAudience(e):t.audiencePermissionRequester.requestAsNewAudience(e)):Promise.reject("Server session was disconnected")})).catch((function(e){return t.stop().then((function(){return Promise.reject(e)})).catch((function(){return Promise.reject(e)}))})))},t.prototype.stop=function(){var e=this;return this.isPlaying?(this.isPlaying=!1,(this.reliveServerSession?this.reliveServerSession.disconnect():Promise.resolve()).then((function(){e.disposeService()}))):Promise.resolve()},t.prototype.reload=function(e){var t=this;this.dispatch("reload_log","start"),this.isReloading=!0,void 0!==e&&(this.audienceToken=e);var n=function(){return t.dispatch("reload_log","missing_request"),t.isReloading=!1,Promise.reject("隕冶�荳崎�迥ｶ諷九�縺溘ａ蜀埼幕縺ｧ縺阪∪縺帙ｓ")};return this.permissionRequest?this.stop().then((function(){return t.permissionRequest?t.play(t.permissionRequest).then((function(){t.dispatch("reload_log","success"),t.isReloading=!1})).catch((function(e){return t.dispatch("reload_log","fail"),t.isReloading=!1,Promise.reject(e)})):n()})).catch((function(e){return t.dispatch("reload_log","stop_fail"),Promise.reject(e)})):n()},t.prototype.end=function(){var e=this;return this.isPlaying?(this.isPlaying=!1,this.reliveServerSession?this.reliveServerSession.disconnect().then((function(){e.disposeService(),e.disposePlayingSetting()})):Promise.resolve(void 0)):Promise.reject(new Error("Not playing"))},t.prototype.getPostkey=function(){var e=this;return this.connectWithRetry().then((function(t){return e.postkeyRequester=new d.PostkeyRequester(t),e.postkeyRequester.get()}))},t.prototype.getAkashic=function(e){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){return[2,this.connectWithRetry().then((function(n){return t.akashicRequester=new s.AkashicRequester(n),t.akashicRequester.get(e)}))]}))}))},t.prototype.changeRoom=function(e){var t=this;return this.isPlaying?null===e.id?Promise.reject("available_rooms_updated 繧､繝吶Φ繝医°繧牙ｾ励ｉ繧後◆驛ｨ螻九ｒ蜈･蜉帙＠縺ｦ縺上□縺輔＞"):this.connectWithRetry().then((function(n){return t.roomChanger||(t.roomChanger=new y.RoomChanger(n)),t.permissionRequest?(t.roomChanger.change(e,t.permissionRequest.connectableRoomProtocol),Promise.resolve()):Promise.reject("隕冶�險ｭ螳壹′縺ｪ縺�◆繧∝�譖ｿ縺ｧ縺阪∪縺帙ｓ")})):Promise.reject("隕冶�荳ｭ縺ｧ縺ｪ縺�◆繧∝�譖ｿ縺ｧ縺阪∪縺帙ｓ")},t.prototype.answerEnquete=function(e){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){switch(n.label){case 0:return[4,this.connectWithRetry().then((function(n){return t.enqueteAnswerSender=new f.EnqueteAnswerSender(n),t.enqueteAnswerSender.answerEnquete(e)}))];case 1:return n.sent(),[2]}}))}))},t.prototype.changeStream=function(e){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){switch(n.label){case 0:if(!this.edgeStreamUpdater)throw new Error("no edgeStreamUpdater");return[4,this.connectWithRetry().then((function(n){return t.changeStreamSender=new E.ChangeStreamSender(n),t.changeStreamSender.changeStream(e)})).then((function(){t.permissionRequest&&(t.permissionRequest.priorStreamQuality=e.priorStreamQuality,t.permissionRequest.watchableStreamProtocol=e.watchableStreamProtocol,void 0!==e.useLowLatencyStream&&(t.permissionRequest.useLowLatencyStream=e.useLowLatencyStream),void 0!==e.isChasePlay&&(t.permissionRequest.isChasePlay=e.isChasePlay))}))];case 1:return n.sent(),[2]}}))}))},t.prototype.getStream=function(){return o(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return[4,this.connectWithRetry().then((function(t){return e.streamRequester=new T.StreamRequester(t),e.streamRequester.getStream()}))];case 1:return t.sent(),[2]}}))}))},t.prototype.postComment=function(e){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){switch(n.label){case 0:return[4,this.connectWithRetry().then((function(n){return t.postCommentSender=new l.PostCommentSender(n),t.postCommentSender.postComment(e)}))];case 1:return n.sent(),[2]}}))}))},t.prototype.currentElapsedTimeFromOpenTime=function(){return this.serverTime.getCurrentTimeMs()-this.program.openTimeMs},t.prototype.currentElapsedTimeFromBeginTime=function(){return this.serverTime.getCurrentTimeMs()-this.program.beginTimeMs},t.prototype.currentElapsedTimeFromVposBaseTime=function(){return this.serverTime.getCurrentTimeMs()-this.program.vposBaseTimeMs},t.prototype.currentServerTime=function(){return this.serverTime.getCurrentTimeMs()},t.prototype.currentProgram=function(){return this.program},t.prototype.connect=function(){var e=this;return this.reliveServerSession?Promise.resolve(this.reliveServerSession):this.reliveServerClient.createSession().then((function(t){return e.reliveServerSession=t,e.reliveServerSession.on("seat",(function(){e.hasGotSeat=!0}),e),e.reliveServerSession.on("connection_error",e.onConnectionError,e),e.reliveServerSession.on("ping_timeout",(function(){return e.onDisconnectableEvent("ping_timeout")}),e),e.reliveServerSession.on("no_permission",(function(){return e.onDisconnectableEvent("no_permission")}),e),e.reliveServerSession.on("crowded",(function(){return e.onDisconnectableEvent("crowded")}),e),e.reliveServerSession.on("service_temporarily_unavailable",(function(){return e.onDisconnectableEvent("service_temporarily_unavailable")}),e),e.reliveServerSession.on("too_many_watchings",(function(){return e.onDisconnectableEvent("too_many_watchings")}),e),e.reliveServerSession.on("seat_was_taken_over",(function(t){return e.onDisconnectableEvent("seat_was_taken_over",t)}),e),e.reliveServerSession.on("too_many_connections",(function(){return e.onDisconnectableEvent("too_many_connections")}),e),e.reliveServerSession.on("temporarily_crowded",(function(){return e.onDisconnectableEvent("temporarily_crowded")}),e),e.reliveServerSession.on("user_banned",(function(){return e.onDisconnectableEvent("user_banned")}),e),e.reliveServerSession.on("maintenance_in",(function(){return e.onDisconnectableEvent("maintenance_in")}),e),e.reliveServerSession.on("timeshift_permission_expired",(function(){return e.onDisconnectableEvent("timeshift_permission_expired")}),e),e.reliveServerSession.on("statistics_updated",e.onStatisticsUpdated,e),e.reliveServerSession.on("post_comment_result",e.onPostCommentResult,e),e.reliveServerSession.on("error_message",e.onErrorMessage,e),Promise.resolve(e.reliveServerSession)}))},t.prototype.connectWithRetry=function(){for(var e=this,t=null,n=function(){return t?Promise.resolve(t):e.connect()},r=[],i=0;i<this.CONNECTION_RETRY_COUNT;++i)r.push(n);return r.reduce((function(n,r){return n.then((function(e){return!t&&e&&(t=e),r()})).catch((function(t){return new Promise((function(t){return setTimeout(t,e.CONNECTION_RETRY_DELAY_MS)}))}))}),Promise.resolve()).then((function(){return t?Promise.resolve(t):Promise.reject("retry out")}))},t.prototype.disposeService=function(){this.reliveServerSession&&(this.reliveServerSession=null),this.audiencePermissionRequester&&(this.audiencePermissionRequester.dispose(),this.audiencePermissionRequester=null),this.serverTimeSynchronizer&&(this.serverTimeSynchronizer.dispose(),this.serverTimeSynchronizer=null),this.heartbeatSender&&(this.heartbeatSender.dispose(),this.heartbeatSender=null),this.programUpdater&&(this.programUpdater.dispose(),this.programUpdater=null),this.serverReconnector&&(this.serverReconnector.dispose(),this.serverReconnector=null),this.edgeStreamUpdater&&(this.edgeStreamUpdater.dispose(),this.edgeStreamUpdater=null),this.roomUpdater&&(this.roomUpdater.dispose(),this.roomUpdater=null),this.availableRoomsUpdater&&(this.availableRoomsUpdater.dispose(),this.availableRoomsUpdater=null),this.roomChanger&&(this.roomChanger.dispose(),this.roomChanger=null),this.akashicRequester&&(this.akashicRequester.dispose(),this.akashicRequester=null),this.postkeyRequester&&(this.postkeyRequester.dispose(),this.postkeyRequester=null),this.enqueteAnswerSender&&(this.enqueteAnswerSender.dispose(),this.enqueteAnswerSender=null),this.changeStreamSender&&(this.changeStreamSender.dispose(),this.changeStreamSender=null),this.postCommentSender&&(this.postCommentSender.dispose(),this.postCommentSender=null)},t.prototype.disposePlayingSetting=function(){this.permissionRequest=null},t.prototype.onReconnectRequest=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.reload(e.audienceToken)];case 1:return t.sent(),[2]}}))}))},t.prototype.onEdgeStreamUpdated=function(e){null!==this.permissionRequest&&(this.permissionRequest.priorStreamQuality=e.quality),this.dispatch("edge_stream_updated",e)},t.prototype.onRoomUpdated=function(e){this.dispatch("room_updated",e)},t.prototype.onAvailableRoomsUpdated=function(e){this.dispatch("available_rooms_updated",e)},t.prototype.onProgramUpdated=function(e){this.program=e,this.dispatch("program_updated",e)},t.prototype.onProgramEnded=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.program=e,[4,this.onDisconnectableEvent("program_ended",e)];case 1:return t.sent(),[2]}}))}))},t.prototype.onDisconnectableEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.dispatch.apply(this,[e].concat(t)),[4,this.stop()];case 1:return n.sent(),[2]}}))}))},t.prototype.onConnectionError=function(e){var t=this;this.reload(this.audienceToken).catch((function(n){t.dispatch("connection_error",e)}))},t.prototype.onStatisticsUpdated=function(e){this.dispatch("statistics_updated",new b.Statistics(e.watchCount,e.commentCount,e.adPoints,e.giftPoints))},t.prototype.onPostCommentResult=function(e){this.dispatch("post_comment_result",e)},t.prototype.onErrorMessage=function(e){this.dispatch("error_message",e)},t}(h.EventDispatcher);t.NicolivePlayerUsecase=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.watchCount=e,this.commentCount=t,this.adPoints=n,this.giftPoints=r};t.Statistics=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.ConnectionError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.playConfig=e}return e.prototype.getPlayConfig=function(){return this.playConfig},e}();t.Akashic=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WebSocket="webSocket",e.XmlSocket="xmlSocket"}(t.MessageServerProtocol||(t.MessageServerProtocol={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HLS=0]="HLS",e[e.RTMP=1]="RTMP",e[e.TLSHLS=2]="TLSHLS",e[e.HLSFMP4=3]="HLSFMP4",e[e.WEBRTC=4]="WEBRTC"}(t.StreamProtocol||(t.StreamProtocol={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BroadcasterHigh=0]="BroadcasterHigh",e[e.BroadcasterLow=1]="BroadcasterLow",e[e.Abr=2]="Abr",e[e.SuperHigh=3]="SuperHigh",e[e.High=4]="High",e[e.Normal=5]="Normal",e[e.Low=6]="Low",e[e.SuperLow=7]="SuperLow",e[e.AudioHigh=8]="AudioHigh"}(t.StreamQuality||(t.StreamQuality={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.SeatWasTakenOverEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.hash=e,this.reason=t,this.expireSec=n}return Object.defineProperty(e.prototype,"isCommentBanned",{get:function(){return 0===this.reason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSumo",{get:function(){return 1===this.reason},enumerable:!0,configurable:!0}),e}();t.Postkey=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=n(221),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return this.commandToRoom(e.data)},e.prototype.commandToRoom=function(e,t){var n=this.messageServer(e);return n?new i.Room(n,e.name,e.isFirst,t,e.waybackkey,e.yourPostKey):null},e.prototype.messageServer=function(e){return e.messageServer.type===o.MessageServerType.NIWAVIDED?new r.Niwavided(e.messageServer.uri,e.threadId):null},e}();t.RoomUpdatedEventDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.baseUrl=e,this.threadId=t};t.Niwavided=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i,o){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.messageServer=e,this.name=t,this.isFirst=n,this.id=r,this.waybackkey=i,this.yourPostKey=o};t.Room=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.WebSocket=0]="WebSocket",e[e.XmlSocket=1]="XmlSocket",e[e.TlsWebSocket=2]="TlsWebSocket"}(t.RoomProtocol||(t.RoomProtocol={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(149),i=n(150),o=n(151),a=function(){function e(e,t,n,r){this.protocol=e,this.resource=t,this.quality=n,this.availableQuality=r}return e.prototype.isDmcHls=function(){return this.protocol instanceof r.DmcHls},e.prototype.isDmcRtmp=function(){return this.protocol instanceof i.DmcRtmp},e.prototype.isDmcWebRtc=function(){return this.protocol instanceof o.DmcWebRtc},e}();t.EdgeStream=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this;return n.playlistUrl=t,n}return i(t,e),t}(n(104).EdgeStreamResource);t.Hls=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this)||this;return r.fmsUrl=t,r.streamName=n,r}return i(t,e),t}(n(104).EdgeStreamResource);t.Rtmp=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this)||this;return n.contentUri=t,n}return i(t,e),t}(n(104).EdgeStreamResource);t.WebRtc=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalLive=t.LiveCycle=void 0,function(e){e[e.BEFORE_OPEN=0]="BEFORE_OPEN",e[e.ONAIR=1]="ONAIR",e[e.ENDED=2]="ENDED"}(r=t.LiveCycle||(t.LiveCycle={}));var i=function(){function e(e,t,n,r,i,o,a,s,u,c,l,f,h){this.programId=e,this.programTitle=t,this.broadcastId=n,this.serverTime=r,this.openTime=i,this.beginTime=o,this.endTime=a,this.vposBaseTime=s,this.audienceToken=l,this.assetsBaseUrl=f,this.webSocketEndpointUrl=h,this.bannerUrl=null===u?this.getDefaultBannerUrl():u,this.linkUrl=this.addParameterIfWatchOrGate(c)}return Object.defineProperty(e.prototype,"liveCycle",{get:function(){return this.serverTime<=this.openTime?r.BEFORE_OPEN:null!==this.endTime?r.ENDED:r.ONAIR},enumerable:!1,configurable:!0}),e.prototype.addParameterIfWatchOrGate=function(e){if(e.match(/.*\.nicovideo\.jp\/(watch|gate)/)){var t=e.indexOf("?")<0?"?":"&";return""+e+t+"ref=extplayer&po=extplayer"}return e},e.prototype.getDefaultBannerUrl=function(){return this.assetsBaseUrl+"externalPlayer/images/default-bg.jpg"},e}();t.ExternalLive=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessageCreator=t.WindowMessage=t.WindowMessageHandler=void 0;var r=n(578);Object.defineProperty(t,"WindowMessageHandler",{enumerable:!0,get:function(){return r.WindowMessageHandler}});var i=n(579);Object.defineProperty(t,"WindowMessage",{enumerable:!0,get:function(){return i.WindowMessage}}),Object.defineProperty(t,"WindowMessageCreator",{enumerable:!0,get:function(){return i.WindowMessageCreator}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStateEvent=t.PlayingStateEvent=t.InitializeStateEvent=t.WindowMessageDataType=void 0,t.WindowMessageDataType={PLAYING_STATE:"PLAYING_STATE",AUDIO_STATE:"AUDIO_STATE",INITIALIZE_STATE:"INITIALIZE_STATE"},t.InitializeStateEvent={COMPLETE:"COMPLETE"},t.PlayingStateEvent={PLAY:"PLAY",STOP:"STOP"},t.AudioStateEvent={VOLUME_SET:"VOLUME_SET",VOLUME_UP:"VOLUME_UP",VOLUME_DOWN:"VOLUME_DOWN",MUTE:"MUTE",UNMUTE:"UNMUTE"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Gate=t.GateType=void 0;var o,a=n(152),s=n(0),u=n(153),c=n(228),l=n(81),f=n(23),h=n(231);!function(e){e[e.BeforeOpen=0]="BeforeOpen",e[e.AlreadyEnded=1]="AlreadyEnded",e[e.StoppedByUser=2]="StoppedByUser",e[e.StoppedByEnd=3]="StoppedByEnd",e[e.Full=4]="Full",e[e.UnSupportedError=5]="UnSupportedError",e[e.ConnectionError=6]="ConnectionError",e[e.Unknown=7]="Unknown"}(o=t.GateType||(t.GateType={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.windowMessage=new c.WindowMessage,t}return i(t,e),t.prototype.componentDidMount=function(){this.windowMessage.post(c.WindowMessageCreator.createInitializeCompleteMessage({audio:void 0}))},t.prototype.render=function(){return s.createElement("main",null,this.renderTitle(),s.createElement("div",{className:"content-block"},s.createElement("div",{className:"banner-container"},this.renderImage())),this.renderStatus())},t.prototype.renderTitle=function(){return this.props.noUI?null:s.createElement(l.Link,{href:this.props.linkUrl,className:"title-link",openInNewWindow:this.props.openInNewWindow},s.createElement("h1",{className:"title"},this.props.title))},t.prototype.renderImage=function(){var e=s.createElement("img",{src:this.props.bannerUrl,className:"banner",alt:this.props.title});return this.props.noUI?e:s.createElement(l.Link,{href:this.props.linkUrl,className:"external-player-link",openInNewWindow:this.props.openInNewWindow},e)},t.prototype.renderStatus=function(){return!this.props.statusVisible||this.props.noUI?null:s.createElement(h.Status,{extClassName:this.statusClassName,niconicoLink:{openInNewWindow:this.props.openInNewWindow,url:this.props.linkUrl,visible:this.props.niconicoLinkVisible}},this.message)},Object.defineProperty(t.prototype,"beginTime",{get:function(){var e=this.props.beginTime;return a(e.getFullYear().toString(),2,"0")+"/"+a((e.getMonth()+1).toString(),2,"0")+"/"+a(e.getDate().toString(),2,"0")+" "+a(e.getHours().toString(),2,"0")+":"+a(e.getMinutes().toString(),2,"0")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){var e=this.props.beginTime,t=this.props.endTime,n=t.getFullYear(),r=a((t.getMonth()+1).toString(),2,"0"),i=a(t.getDate().toString(),2,"0"),o=a(t.getHours().toString(),2,"0"),s=a(t.getMinutes().toString(),2,"0");return e.getFullYear()!==t.getFullYear()?n+"/"+r+"/"+i+" "+o+":"+s:e.getMonth()!==t.getMonth()||e.getDate()!==t.getDate()?r+"/"+i+" "+o+":"+s:o+":"+s},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusClassName",{get:function(){switch(this.props.type){case o.BeforeOpen:return"future";case o.AlreadyEnded:return"passed";case o.StoppedByEnd:case o.StoppedByUser:case o.Full:case o.UnSupportedError:case o.ConnectionError:case o.Unknown:default:return"error"}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){switch(this.props.type){case o.BeforeOpen:return this.beginTime+"窶�"+u.default("beforeOpen");case o.AlreadyEnded:return this.beginTime+"窶�"+this.endTime+" "+u.default("ended");case o.StoppedByEnd:return u.default("endProgram");case o.Full:return u.default("fullAudience");case o.UnSupportedError:return u.default("unsupportedEnvironment");case o.StoppedByUser:case o.ConnectionError:case o.Unknown:default:return u.default("otherError")}},enumerable:!1,configurable:!0}),t}(f.ReactPureComponent);t.Gate=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;var a=n(0),s=n(232),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return a.createElement("div",{className:"status-block"},a.createElement("h2",{className:this.headerClassName},a.createElement("p",null,this.props.children),a.createElement(s.NiconicoLink,o({},this.props.niconicoLink))))},Object.defineProperty(t.prototype,"headerClassName",{get:function(){return"status "+(this.props.extClassName?this.props.extClassName:"")},enumerable:!1,configurable:!0}),t}(n(23).ReactPureComponent);t.Status=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.NiconicoLink=void 0;var o=n(0),a=n(580),s=n(81),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return this.props.visible?o.createElement(s.Link,{href:this.props.url,className:"niconico",openInNewWindow:this.props.openInNewWindow},o.createElement(a.default,null)):null},t}(n(23).ReactPureComponent);t.NiconicoLink=u},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveStatusTypeCode=t.MediaServerType=t.Status=t.ProviderType=t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.WATCH_FAILED_TEMPORARILY_CROWD="WatchFailedTemporarilyCrowd",e.WATCH_FAILED_TOO_MANY_CONNECTIONS="WatchFailedTooManyConnections",e.WATCH_FAILED_TOO_MANY_WATCHINGS="WatchFailedTooManyWatchings",e.WATCH_FAILED_MAYBE_TOO_MANY_WATCHINGS="WatchFailedMaybeTooManyWatchings",e.WATCH_FAILED_CROWDED="WatchFailedCrowded",e.WATCH_DENIED_USER_PENALTY="WatchDeniedUserPenalty",e.WATCH_DENIED_NO_PERMISSION="WatchDeniedNoPermission",e.END_CONFIRM="EndConfirm",e.BEGIN_FAILED="BeginFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.WATCH_FAILED_TEMPORARILY_CROWD]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_FAILED_TOO_MANY_CONNECTIONS]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_FAILED_TOO_MANY_WATCHINGS]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_FAILED_MAYBE_TOO_MANY_WATCHINGS]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_FAILED_CROWDED]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_DENIED_USER_PENALTY]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_DENIED_NO_PERMISSION]=function(){return r.Payload.EMPTY_PARAMS},t[n.END_CONFIRM]=function(){return r.Payload.EMPTY_PARAMS},t[n.BEGIN_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={})),function(e){e.Official="official",e.Channel="channel",e.Community="community"}(t.ProviderType||(t.ProviderType={})),function(e){e.BeforeRelease="BEFORE_RELEASE",e.Released="RELEASED",e.Onair="ON_AIR",e.Ended="ENDED"}(t.Status||(t.Status={})),function(e){e.DMC="DMC",e.Limelight="Limelight"}(t.MediaServerType||(t.MediaServerType={})),function(e){e.Onair="onair",e.ComingSoon="comingsoon",e.Closed="closed"}(t.LiveStatusTypeCode||(t.LiveStatusTypeCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategoryTag=void 0;var r=n(154),i=n(155);t.CategoryTag=i.defineObjectEnum({Common:r.Tag.Common,Politics:r.Tag.Politics,Animal:r.Tag.Animal,Cooking:r.Tag.Cooking,Play:r.Tag.Play,Sing:r.Tag.Sing,Dance:r.Tag.Dance,Draw:r.Tag.Draw,Lecture:r.Tag.Lecture,Live:r.Tag.Live,LiveOld2:r.Tag.LiveOld2,LiveOld:r.Tag.LiveOld,Request:r.Tag.Request,RequestOld:r.Tag.RequestOld,Face:r.Tag.Face,Totu:r.Tag.Totu})},function(e,t,n){"use strict";function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function s(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function c(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:m.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:m.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():m.arrayBuffer&&m.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||y(e))?this._bodyArrayBuffer=l(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e,t,n,r=s(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=u(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var n,r,i=(t=t||{}).body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),_.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function d(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function p(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}function v(e,t){return new Promise((function(n,r){function i(){s.abort()}var o=new h(e,t);if(o.signal&&o.signal.aborted)return r(new E("Aborted","AbortError"));var s=new XMLHttpRequest;s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new a,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new p(i,r))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new E("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&m.blob&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",i),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",i)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}n.r(t),n.d(t,"Headers",(function(){return a})),n.d(t,"Request",(function(){return h})),n.d(t,"Response",(function(){return p})),n.d(t,"DOMException",(function(){return E})),n.d(t,"fetch",(function(){return v}));var m={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};a.prototype.append=function(e,t){e=r(e),t=i(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},a.prototype.delete=function(e){delete this.map[r(e)]},a.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},a.prototype.set=function(e,t){this.map[r(e)]=i(t)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),o(e)},a.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),o(e)},a.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),o(e)},m.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];p.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})};var E=self.DOMException;try{new E}catch(e){(E=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),E.prototype.constructor=E}v.polyfill=!0,self.fetch||(self.fetch=v,self.Headers=a,self.Request=h,self.Response=p)},function(e,t,n){(function(t){n(639);var r=e.exports=n(3);r.extras=n(163),r.filters=n(254),r.interaction=n(697),r.loaders=n(699),r.mesh=n(267),r.accessibility=n(709),r.loader=new r.loaders.Loader,Object.assign(r,n(711)),t.PIXI=r}).call(this,n(22))},function(e,t,n){function r(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=n(157);r.prototype.constructor=r,e.exports=r,r.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},r.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},r.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(e,t){t=t||new i;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},r.prototype.applyInverse=function(e,t){t=t||new i;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,o=e.y;return t.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},r.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},r.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},r.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},r.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},r.prototype.setTransform=function(e,t,n,r,i,o,a,s,u){var c,l,f,h,d,p,v,m,g,y;return d=Math.sin(a),p=Math.cos(a),v=Math.cos(u),m=Math.sin(u),g=-Math.sin(s),y=Math.cos(s),c=p*i,l=d*i,f=-d*o,h=p*o,this.a=v*c+m*f,this.b=v*l+m*h,this.c=g*c+y*f,this.d=g*l+y*h,this.tx=e+(n*c+r*f),this.ty=t+(n*l+r*h),this},r.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},r.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r.IDENTITY=new r,r.TEMP_MATRIX=new r},function(e,t,n){function r(e){return e<0?-1:e>0?1:0}var i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],s=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=n(238),l=[];!function(){for(var e=0;e<16;e++){var t=[];l.push(t);for(var n=0;n<16;n++)for(var f=r(i[e]*i[n]+a[e]*o[n]),h=r(o[e]*i[n]+s[e]*o[n]),d=r(i[e]*a[n]+a[e]*s[n]),p=r(o[e]*a[n]+s[e]*s[n]),v=0;v<16;v++)if(i[v]===f&&o[v]===h&&a[v]===d&&s[v]===p){t.push(v);break}}for(e=0;e<16;e++){var m=new c;m.set(i[e],o[e],a[e],s[e],0,0),u.push(m)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return i[e]},uY:function(e){return o[e]},vX:function(e){return a[e]},vY:function(e){return s[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return l[e][t]},sub:function(e,t){return l[e][f.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?f.S:f.N:2*Math.abs(t)<=Math.abs(e)?e>0?f.E:f.W:t>0?e>0?f.SE:f.SW:e>0?f.NE:f.NW},matrixAppendRotationInv:function(e,t,n,r){var i=u[f.inv(t)];n=n||0,r=r||0,i.tx=n,i.ty=r,e.append(i)}};e.exports=f},function(e,t,n){(function(n,r,i){var o;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */!function(){function a(){}function s(e){return e}function u(e){return!!e}function c(e){return!e}function l(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function f(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function h(e){return H(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function d(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e)}function p(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function v(e){return p(Array(e),(function(e,t){return t}))}function m(e,t,n){return d(e,(function(e,r,i){n=t(n,e,r,i)})),n}function g(e,t){d(V(e),(function(n){t(e[n],n)}))}function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function _(e){var t,n,r=-1;return h(e)?(t=e.length,function(){return++r<t?r:null}):(n=V(e),t=n.length,function(){return++r<t?n[r]:null})}function b(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r)}}}function E(e){return function(t,n,r){return e(t,r)}}function S(e){return function(t,n,r){r=f(r||a);var i=_(t=t||[]);if(e<=0)return r(null);var o=!1,s=0,u=!1;!function a(){if(o&&s<=0)return r(null);for(;s<e&&!u;){var c=i();if(null===c)return o=!0,void(s<=0&&r(null));s+=1,n(t[c],c,l((function(e){s-=1,e?(r(e),u=!0):a()})))}}()}}function T(e){return function(t,n,r){return e(j.eachOf,t,n,r)}}function w(e){return function(t,n,r,i){return e(S(n),t,r,i)}}function O(e){return function(t,n,r){return e(j.eachOfSeries,t,n,r)}}function R(e,t,n,r){r=f(r||a);var i=h(t=t||[])?[]:{};e(t,(function(e,t,r){n(e,(function(e,n){i[t]=n,r(e)}))}),(function(e){r(e,i)}))}function A(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(n){n&&i.push({index:t,value:e}),r()}))}),(function(){r(p(i.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))}function P(e,t,n,r){A(e,t,(function(e,t){n(e,(function(e){t(!e)}))}),r)}function x(e,t,n){return function(r,i,o,a){function s(){a&&a(n(!1,void 0))}function u(e,r,i){if(!a)return i();o(e,(function(r){a&&t(r)&&(a(n(!0,e)),a=o=!1),i()}))}arguments.length>3?e(r,i,u,s):(a=o,o=i,e(r,u,s))}}function C(e,t){return t}function M(e,t,n){n=n||a;var r=h(t)?[]:{};e(t,(function(e,t,n){e(b((function(e,i){i.length<=1&&(i=i[0]),r[t]=i,n(e)})))}),(function(e){n(e,r)}))}function L(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(e,t){i=i.concat(t||[]),r(e)}))}),(function(e){r(e,i)}))}function k(e,t,n){function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,H(t)||(t=[t]),0===t.length&&e.idle())return j.setImmediate((function(){e.drain()}));d(t,(function(t){var i={data:t,callback:r||a};n?e.tasks.unshift(i):e.tasks.push(i),e.tasks.length===e.concurrency&&e.saturated()})),j.setImmediate(e.process)}function i(e,t){return function(){o-=1;var n=!1,r=arguments;d(t,(function(e){d(s,(function(t,r){t!==e||n||(s.splice(r,1),n=!0)})),e.callback.apply(e,r)})),e.tasks.length+o===0&&e.drain(),e.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,s=[],u={tasks:[],concurrency:t,payload:n,saturated:a,empty:a,drain:a,started:!1,paused:!1,push:function(e,t){r(u,e,!1,t)},kill:function(){u.drain=a,u.tasks=[]},unshift:function(e,t){r(u,e,!0,t)},process:function(){for(;!u.paused&&o<u.concurrency&&u.tasks.length;){var t=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=p(t,(function(e){return e.data}));0===u.tasks.length&&u.empty(),o+=1,s.push(t[0]);var r=l(i(u,t));e(n,r)}},length:function(){return u.tasks.length},running:function(){return o},workersList:function(){return s},idle:function(){return u.tasks.length+o===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=Math.min(u.concurrency,u.tasks.length),t=1;t<=e;t++)j.setImmediate(u.process)}}};return u}function I(e){return b((function(t,n){t.apply(null,n.concat([b((function(t,n){"object"==typeof console&&(t?console.error:console[e]&&d(n,(function(e){})))}))]))}))}function D(e){return function(t,n,r){e(v(t),n,r)}}function N(e){return b((function(t,n){var r=b((function(n){var r=this,i=n.pop();return e(t,(function(e,t,i){e.apply(r,n.concat([i]))}),i)}));return n.length?r.apply(this,n):r}))}function F(e){return b((function(t){var n=t.pop();t.push((function(){var e=arguments;r?j.setImmediate((function(){n.apply(null,e)})):n.apply(null,e)}));var r=!0;e.apply(this,t),r=!1}))}var U,j={},B="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=B&&(U=B.async),j.noConflict=function(){return B.async=U,j};var G=Object.prototype.toString,H=Array.isArray||function(e){return"[object Array]"===G.call(e)},V=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},z="function"==typeof r&&r,W=z?function(e){z(e)}:function(e){setTimeout(e,0)};"object"==typeof i&&"function"==typeof i.nextTick?j.nextTick=i.nextTick:j.nextTick=W,j.setImmediate=z?W:j.nextTick,j.forEach=j.each=function(e,t,n){return j.eachOf(e,E(t),n)},j.forEachSeries=j.eachSeries=function(e,t,n){return j.eachOfSeries(e,E(t),n)},j.forEachLimit=j.eachLimit=function(e,t,n,r){return S(t)(e,E(n),r)},j.forEachOf=j.eachOf=function(e,t,n){function r(e){s--,e?n(e):null===i&&s<=0&&n(null)}n=f(n||a);for(var i,o=_(e=e||[]),s=0;null!=(i=o());)s+=1,t(e[i],i,l(r));0===s&&n(null)},j.forEachOfSeries=j.eachOfSeries=function(e,t,n){n=f(n||a);var r=_(e=e||[]),i=r();!function o(){var a=!0;if(null===i)return n(null);t(e[i],i,l((function(e){if(e)n(e);else{if(null===(i=r()))return n(null);a?j.setImmediate(o):o()}}))),a=!1}()},j.forEachOfLimit=j.eachOfLimit=function(e,t,n,r){S(t)(e,n,r)},j.map=T(R),j.mapSeries=O(R),j.mapLimit=w(R),j.inject=j.foldl=j.reduce=function(e,t,n,r){j.eachOfSeries(e,(function(e,r,i){n(t,e,(function(e,n){t=n,i(e)}))}),(function(e){r(e,t)}))},j.foldr=j.reduceRight=function(e,t,n,r){var i=p(e,s).reverse();j.reduce(i,t,n,r)},j.transform=function(e,t,n,r){3===arguments.length&&(r=n,n=t,t=H(e)?[]:{}),j.eachOf(e,(function(e,r,i){n(t,e,r,i)}),(function(e){r(e,t)}))},j.select=j.filter=T(A),j.selectLimit=j.filterLimit=w(A),j.selectSeries=j.filterSeries=O(A),j.reject=T(P),j.rejectLimit=w(P),j.rejectSeries=O(P),j.any=j.some=x(j.eachOf,u,s),j.someLimit=x(j.eachOfLimit,u,s),j.all=j.every=x(j.eachOf,c,c),j.everyLimit=x(j.eachOfLimit,c,c),j.detect=x(j.eachOf,s,C),j.detectSeries=x(j.eachOfSeries,s,C),j.detectLimit=x(j.eachOfLimit,s,C),j.sortBy=function(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}j.map(e,(function(e,n){t(e,(function(t,r){t?n(t):n(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,p(t.sort(r),(function(e){return e.value})))}))},j.auto=function(e,t,n){function r(e){p.unshift(e)}function i(e){var t=y(p,e);t>=0&&p.splice(t,1)}function o(){u--,d(p.slice(0),(function(e){e()}))}"function"==typeof arguments[1]&&(n=t,t=null),n=f(n||a);var s=V(e),u=s.length;if(!u)return n(null);t||(t=u);var c={},l=0,h=!1,p=[];r((function(){u||n(null,c)})),d(s,(function(a){function s(){return l<t&&m(p,(function(e,t){return e&&c.hasOwnProperty(t)}),!0)&&!c.hasOwnProperty(a)}if(!h){for(var u,f=H(e[a])?e[a]:[e[a]],d=b((function(e,t){if(l--,t.length<=1&&(t=t[0]),e){var r={};g(c,(function(e,t){r[t]=e})),r[a]=t,h=!0,n(e,r)}else c[a]=t,j.setImmediate(o)})),p=f.slice(0,f.length-1),v=p.length;v--;){if(!(u=e[p[v]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(H(u)&&y(u,a)>=0)throw new Error("Has cyclic dependencies")}s()?(l++,f[f.length-1](d,c)):r((function e(){s()&&(l++,i(e),f[f.length-1](d,c))}))}}))},j.retry=function(e,t,n){function r(e,t){if("number"==typeof t)e.times=parseInt(t,10)||o;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||a}}function i(e,t){function n(e,n){return function(r){e((function(e,t){r(!e||n,{err:e,result:t})}),t)}}function r(e){return function(t){setTimeout((function(){t(null)}),e)}}for(;u.times;){var i=!(u.times-=1);s.push(n(u.task,i)),!i&&u.interval>0&&s.push(r(u.interval))}j.series(s,(function(t,n){n=n[n.length-1],(e||u.callback)(n.err,n.result)}))}var o=5,a=0,s=[],u={times:o,interval:a},c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return c<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&r(u,e),u.callback=n,u.task=t,u.callback?i():i},j.waterfall=function(e,t){if(t=f(t||a),!H(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!function e(n){return b((function(r,i){if(r)t.apply(null,[r].concat(i));else{var o=n.next();o?i.push(e(o)):i.push(t),F(n).apply(null,i)}}))}(j.iterator(e))()},j.parallel=function(e,t){M(j.eachOf,e,t)},j.parallelLimit=function(e,t,n){M(S(t),e,n)},j.series=function(e,t){M(j.eachOfSeries,e,t)},j.iterator=function(e){return function t(n){function r(){return e.length&&e[n].apply(null,arguments),r.next()}return r.next=function(){return n<e.length-1?t(n+1):null},r}(0)},j.apply=b((function(e,t){return b((function(n){return e.apply(null,t.concat(n))}))})),j.concat=T(L),j.concatSeries=O(L),j.whilst=function(e,t,n){if(n=n||a,e()){var r=b((function(i,o){i?n(i):e.apply(this,o)?t(r):n.apply(null,[null].concat(o))}));t(r)}else n(null)},j.doWhilst=function(e,t,n){var r=0;return j.whilst((function(){return++r<=1||t.apply(this,arguments)}),e,n)},j.until=function(e,t,n){return j.whilst((function(){return!e.apply(this,arguments)}),t,n)},j.doUntil=function(e,t,n){return j.doWhilst(e,(function(){return!t.apply(this,arguments)}),n)},j.during=function(e,t,n){n=n||a;var r=b((function(t,r){t?n(t):(r.push(i),e.apply(this,r))})),i=function(e,i){e?n(e):i?t(r):n(null)};e(i)},j.doDuring=function(e,t,n){var r=0;j.during((function(e){r++<1?e(null,!0):t.apply(this,arguments)}),e,n)},j.queue=function(e,t){return k((function(t,n){e(t[0],n)}),t,1)},j.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var r=j.queue(e,t);return r.push=function(e,t,i){!function(e,t,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(e.started=!0,H(t)||(t=[t]),0===t.length)return j.setImmediate((function(){e.drain()}));d(t,(function(t){var o={data:t,priority:r,callback:"function"==typeof i?i:a};e.tasks.splice(function(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r}(e.tasks,o,n)+1,0,o),e.tasks.length===e.concurrency&&e.saturated(),j.setImmediate(e.process)}))}(r,e,t,i)},delete r.unshift,r},j.cargo=function(e,t){return k(e,1,t)},j.log=I("log"),j.dir=I("dir"),j.memoize=function(e,t){var n={},r={},i=Object.prototype.hasOwnProperty;t=t||s;var o=b((function(o){var a=o.pop(),s=t.apply(null,o);i.call(n,s)?j.setImmediate((function(){a.apply(null,n[s])})):i.call(r,s)?r[s].push(a):(r[s]=[a],e.apply(null,o.concat([b((function(e){n[s]=e;var t=r[s];delete r[s];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,e)}))])))}));return o.memo=n,o.unmemoized=e,o},j.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},j.times=D(j.map),j.timesSeries=D(j.mapSeries),j.timesLimit=function(e,t,n,r){return j.mapLimit(v(e),t,n,r)},j.seq=function(){var e=arguments;return b((function(t){var n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=a,j.reduce(e,t,(function(e,t,r){t.apply(n,e.concat([b((function(e,t){r(e,t)}))]))}),(function(e,t){r.apply(n,[e].concat(t))}))}))},j.compose=function(){return j.seq.apply(null,Array.prototype.reverse.call(arguments))},j.applyEach=N(j.eachOf),j.applyEachSeries=N(j.eachOfSeries),j.forever=function(e,t){var n=l(t||a),r=F(e);!function e(t){if(t)return n(t);r(e)}()},j.ensureAsync=F,j.constant=b((function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}})),j.wrapSync=j.asyncify=function(e){return b((function(t){var n,r,i,o=t.pop();try{n=e.apply(this,t)}catch(e){return o(e)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then((function(e){o(null,e)})).catch((function(e){o(e.message?e:new Error(e))})):o(null,n)}))},e.exports?e.exports=j:void 0===(o=function(){return j}.apply(t,[]))||(e.exports=o)}()}).call(this,n(22),n(648).setImmediate,n(82))},function(e,t,n){function r(){a.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.skew=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var i=n(28),o=n(159),a=n(75),s=n(11),u=new i.Matrix,c={worldTransform:new i.Matrix,worldAlpha:1,children:[]};r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}}),r.prototype.updateTransform=function(){var e,t,n,r,i,o,a=this.parent.worldTransform,c=this.worldTransform;this.skew.x||this.skew.y?(u.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),c.a=u.a*a.a+u.b*a.c,c.b=u.a*a.b+u.b*a.d,c.c=u.c*a.a+u.d*a.c,c.d=u.c*a.b+u.d*a.d,c.tx=u.tx*a.a+u.ty*a.c+a.tx,c.ty=u.tx*a.b+u.ty*a.d+a.ty):this.rotation%s.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,n=-this._sr*this.scale.y,r=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*e+this.pivot.y*n,o-=this.pivot.x*t+this.pivot.y*r),c.a=e*a.a+t*a.c,c.b=e*a.b+t*a.d,c.c=n*a.a+r*a.c,c.d=n*a.b+r*a.d,c.tx=i*a.a+o*a.c+a.tx,c.ty=i*a.b+o*a.d+a.ty):(e=this.scale.x,r=this.scale.y,i=this.position.x-this.pivot.x*e,o=this.position.y-this.pivot.y*r,c.a=e*a.a,c.b=e*a.b,c.c=r*a.c,c.d=r*a.d,c.tx=i*a.a+o*a.c+a.tx,c.ty=i*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},r.prototype.displayObjectUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(e){return i.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},r.prototype.toGlobal=function(e){return this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(e)},r.prototype.toLocal=function(e,t,n){return t&&(e=t.toGlobal(e)),this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(e,n)},r.prototype.renderWebGL=function(e){},r.prototype.renderCanvas=function(e){},r.prototype.generateTexture=function(e,t,n){var r=this.getLocalBounds(),i=new o(e,0|r.width,0|r.height,t,n);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},r.prototype.setTransform=function(e,t,n,r,i,o,a,s,u){return this.position.x=e||0,this.position.y=t||0,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i||0,this.skew.x=o||0,this.skew.y=a||0,this.pivot.x=s||0,this.pivot.y=u||0,this},r.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},function(e,t,n){function r(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),o.call(this,e,t),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),e.complete||(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=t,n}var o=n(106),a=n(24);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},r.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},r.prototype._onPlayStop=function(){this.autoUpdate=!1},r.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},r.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete a.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},r.fromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+a.uid());var n=a.BaseTextureCache[e._pixiId];return n||(n=new r(e,t),a.BaseTextureCache[e._pixiId]=n),n},r.fromUrl=function(e,t){var n=document.createElement("video");if(Array.isArray(e))for(var o=0;o<e.length;++o)n.appendChild(i(e[o].src||e[o],e[o].mime));else n.appendChild(i(e.src||e,e.mime));return n.load(),n.play(),r.fromVideo(n,t)},r.fromUrls=r.fromUrl},function(e,t,n){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=r;var i=n(239);r.prototype.set=function(e,t,n){var r=t.width,o=t.height;if(n){var a=i.isSwapWidthHeight(n),s=(a?e.height:e.width)/2/r,u=(a?e.width:e.height)/2/o,c=e.x/r+s,l=e.y/o+u;n=i.add(n,i.NW),this.x0=c+s*i.uX(n),this.y0=l+u*i.uY(n),n=i.add(n,2),this.x1=c+s*i.uX(n),this.y1=l+u*i.uY(n),n=i.add(n,2),this.x2=c+s*i.uX(n),this.y2=l+u*i.uY(n),n=i.add(n,2),this.x3=c+s*i.uX(n),this.y3=l+u*i.uY(n)}else this.x0=e.x/r,this.y0=e.y/o,this.x1=(e.x+e.width)/r,this.y1=e.y/o,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/o,this.x3=e.x/r,this.y3=(e.y+e.height)/o}},function(e,t,n){function r(e){i.call(this,e),this.filterStack=[],this.filterStack.push({renderTarget:e.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new u.Rectangle(0,0,e.width,e.height),this.currentFrame=null}var i=n(70),o=n(107),a=n(11),s=n(653),u=n(28);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onContextChange=function(){this.texturePool.length=0;var e=this.renderer.gl;this.quad=new s(e)},r.prototype.setFilterStack=function(e){this.filterStack=e},r.prototype.pushFilter=function(e,t){var n=e.filterArea?e.filterArea.clone():e.getBounds();n.x=0|n.x,n.y=0|n.y,n.width=0|n.width,n.height=0|n.height;var r=0|t[0].padding;if(n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;n.x+=i.tx,n.y+=i.ty,this.capFilterArea(n),n.x-=i.tx,n.y-=i.ty}else this.capFilterArea(n);if(n.width>0&&n.height>0){this.currentFrame=n;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:t})}else this.filterStack.push({renderTarget:null,filter:t})},r.prototype.popFilter=function(){var e=this.filterStack.pop(),t=this.filterStack[this.filterStack.length-1],n=e.renderTarget;if(e.renderTarget){var r=t.renderTarget,i=this.renderer.gl;this.currentFrame=n.frame,this.quad.map(this.textureSize,n.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=e.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,n,r),this.returnRenderTarget(n);else{for(var s=n,u=this.getRenderTarget(!0),c=0;c<o.length-1;c++){var l=o[c];l.uniforms.dimensions&&(l.uniforms.dimensions.value[0]=this.renderer.width,l.uniforms.dimensions.value[1]=this.renderer.height,l.uniforms.dimensions.value[2]=this.quad.vertices[0],l.uniforms.dimensions.value[3]=this.quad.vertices[5]),l.applyFilter(this.renderer,s,u);var f=s;s=u,u=f}o[o.length-1].applyFilter(this.renderer,s,r),this.returnRenderTarget(s),this.returnRenderTarget(u)}return e.filter}},r.prototype.getRenderTarget=function(e){var t=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,a.SCALE_MODES.LINEAR,this.renderer.resolution*a.FILTER_RESOLUTION);return t.frame=this.currentFrame,e&&t.clear(!0),t},r.prototype.returnRenderTarget=function(e){this.texturePool.push(e)},r.prototype.applyFilter=function(e,t,n,r){var i=this.renderer.gl;this.renderer.setRenderTarget(n),r&&n.clear(),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.renderer.drawCount++},r.prototype.calculateMappedMatrix=function(e,t,n){var r=t.worldTransform.copy(u.Matrix.TEMP_MATRIX),i=t._texture.baseTexture,o=n.identity(),a=this.textureSize.height/this.textureSize.width;o.translate(e.x/this.textureSize.width,e.y/this.textureSize.height),o.scale(1,a);var s=this.textureSize.width/i.width,c=this.textureSize.height/i.height;return r.tx/=i.width*s,r.ty/=i.width*s,r.invert(),o.prepend(r),o.scale(1,1/a),o.scale(s,c),o.translate(t.anchor.x,t.anchor.y),o},r.prototype.capFilterArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.textureSize.width&&(e.width=this.textureSize.width-e.x),e.y+e.height>this.textureSize.height&&(e.height=this.textureSize.height-e.y)},r.prototype.resize=function(e,t){this.textureSize.width=e,this.textureSize.height=t;for(var n=0;n<this.texturePool.length;n++)this.texturePool[n].resize(e,t)},r.prototype.destroy=function(){this.quad.destroy(),i.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null}},function(e,t,n){function r(e){a.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=c.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=e||o.EMPTY}var i=n(28),o=n(83),a=n(108),s=n(246),u=n(24),c=n(11),l=new i.Point,f=i.GroupD8,h=new i.Matrix;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(e){var t=u.sign(this.scale.x)||1;this.scale.x=t*e/this.texture._frame.width,this._width=e}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(e){var t=u.sign(this.scale.y)||1;this.scale.y=t*e/this.texture._frame.height,this._height=e}},texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}}),r.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=u.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=u.sign(this.scale.y)*this._height/this.texture.frame.height)},r.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this)},r.prototype.getBounds=function(e){if(!this._currentBounds){var t,n,r,i,o=this._texture._frame.width,a=this._texture._frame.height,s=o*(1-this.anchor.x),u=o*-this.anchor.x,c=a*(1-this.anchor.y),l=a*-this.anchor.y,f=e||this.worldTransform,h=f.a,d=f.b,p=f.c,v=f.d,m=f.tx,g=f.ty,y=h*u+p*l+m,_=v*l+d*u+g,b=h*s+p*l+m,E=v*l+d*s+g,S=h*s+p*c+m,T=v*c+d*s+g,w=h*u+p*c+m,O=v*c+d*u+g;if(t=w<(t=S<(t=b<(t=y)?b:t)?S:t)?w:t,r=O<(r=T<(r=E<(r=_)?E:r)?T:r)?O:r,n=w>(n=S>(n=b>(n=y)?b:n)?S:n)?w:n,i=O>(i=T>(i=E>(i=_)?E:i)?T:i)?O:i,this.children.length){var R=this.containerGetBounds();s=R.x,u=R.x+R.width,t=t<s?t:s,r=r<(c=R.y)?r:c,n=n>u?n:u,i=i>(l=R.y+R.height)?i:l}var A=this._bounds;A.x=t,A.width=n-t,A.y=r,A.height=i-r,this._currentBounds=A}return this._currentBounds},r.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,l);var t,n=this._texture._frame.width,r=this._texture._frame.height,i=-n*this.anchor.x;return l.x>i&&l.x<i+n&&(t=-r*this.anchor.y,l.y>t&&l.y<t+r)},r.prototype._renderCanvas=function(e){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var t=e.blendModes[this.blendMode];if(t!==e.context.globalCompositeOperation&&(e.context.globalCompositeOperation=t),this.texture.valid){var n,r,i=this._texture,o=this.worldTransform,a=i.crop.width,u=i.crop.height;e.context.globalAlpha=this.worldAlpha;var l=i.baseTexture.scaleMode===c.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==l&&(e.context[e.smoothProperty]=l),2==(3&i.rotate)&&(a=i.crop.height,u=i.crop.width),i.trim?(n=i.crop.width/2+i.trim.x-this.anchor.x*i.trim.width,r=i.crop.height/2+i.trim.y-this.anchor.y*i.trim.height):(n=(.5-this.anchor.x)*i._frame.width,r=(.5-this.anchor.y)*i._frame.height),i.rotate&&(o.copy(h),o=h,f.matrixAppendRotationInv(o,i.rotate,n,r),n=0,r=0),n-=a/2,r-=u/2,e.roundPixels?(e.context.setTransform(o.a,o.b,o.c,o.d,o.tx*e.resolution|0,o.ty*e.resolution|0),n|=0,r|=0):e.context.setTransform(o.a,o.b,o.c,o.d,o.tx*e.resolution,o.ty*e.resolution);var d=i.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,a*d,u*d,n*e.resolution,r*e.resolution,a*e.resolution,u*e.resolution)):e.context.drawImage(i.baseTexture.source,i.crop.x*d,i.crop.y*d,a*d,u*d,n*e.resolution,r*e.resolution,a*e.resolution,u*e.resolution)}}},r.prototype.destroy=function(e,t){a.prototype.destroy.call(this),this.anchor=null,e&&this._texture.destroy(t),this._texture=null,this.shader=null},r.fromFrame=function(e){var t=u.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new r(t)},r.fromImage=function(e,t,n){return new r(o.fromImage(e,t,n))}},function(e,t,n){var r=n(24),i={};e.exports=i,i.getTintedTexture=function(e,t){var n=e.texture,r="#"+("00000"+(0|(t=i.roundColor(t))).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(n,t,o),i.convertTintToImage){var a=new Image;a.src=o.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=o,i.canvas=null;return o},i.tintWithMultiply=function(e,t,n){var r=n.getContext("2d"),i=e.baseTexture.resolution,o=e.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithOverlay=function(e,t,n){var r=n.getContext("2d"),i=e.baseTexture.resolution,o=e.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithPerPixel=function(e,t,n){var i=n.getContext("2d"),o=e.baseTexture.resolution,a=e.crop.clone();a.x*=o,a.y*=o,a.width*=o,a.height*=o,n.width=a.width,n.height=a.height,i.globalCompositeOperation="copy",i.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);for(var s=r.hex2rgb(t),u=s[0],c=s[1],l=s[2],f=i.getImageData(0,0,a.width,a.height),h=f.data,d=0;d<h.length;d+=4)h[d+0]*=u,h[d+1]*=c,h[d+2]*=l;i.putImageData(f,0,0)},i.roundColor=function(e){var t=i.cacheStepsPerColorChannel,n=r.hex2rgb(e);return n[0]=Math.min(255,n[0]/t*t),n[1]=Math.min(255,n[1]/t*t),n[2]=Math.min(255,n[2]/t*t),r.rgb2hex(n)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=r.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},function(e,t,n){function r(e,t,n,r){if(s.call(this),i.sayHello(e),r)for(var u in a.DEFAULT_RENDER_OPTIONS)void 0===r[u]&&(r[u]=a.DEFAULT_RENDER_OPTIONS[u]);else r=a.DEFAULT_RENDER_OPTIONS;this.type=a.RENDERER_TYPE.UNKNOWN,this.width=t||800,this.height=n||600,this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.roundPixels=r.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=n(24),o=n(28),a=n(11),s=n(75);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=i.hex2string(e),i.hex2rgb(e,this._backgroundColorRgb)}}}),r.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},r.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},function(e,t,n){function r(e){i.call(this,e),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=n(70),o=n(110),a=n(249),s=n(250),u=n(24);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,u.pluginTarget.mixin(r),e.exports=r,r.prototype.onContextChange=function(){this.initPlugins();var e=this.renderer.gl;this.maxAttibs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.defaultShader=new o(this),this.primitiveShader=new s(this),this.complexPrimitiveShader=new a(this)},r.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(var n in e)this.tempAttribState[e[n]]=!0;var r=this.renderer.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.attribState[t]?r.enableVertexAttribArray(t):r.disableVertexAttribArray(t))},r.prototype.setShader=function(e){return this._currentId!==e.uid&&(this._currentId=e.uid,this.currentShader=e,this.renderer.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},r.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},function(e,t,n){function r(e){i.call(this,e,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=n(111);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){function r(e){i.call(this,e,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=n(111);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){(function(t){function r(e){var n=new o.Matrix;i.call(this,a.readFileSync(t+"/spriteMaskFilter.vert","utf8"),a.readFileSync(t+"/spriteMaskFilter.frag","utf8"),{mask:{type:"sampler2D",value:e._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:n.toArray(!0)}}),this.maskSprite=e,this.maskMatrix=n}var i=n(161),o=n(28),a=n(12);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager;this.uniforms.mask.value=this.maskSprite._texture,r.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(e);r.applyFilter(i,t,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}},offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.call(this,o.readFileSync(t+"/FXAA.vert","utf8"),o.readFileSync(t+"/FXAA.frag","utf8"),{resolution:{type:"v2",value:{x:1,y:1}}})}var i=n(161),o=n(12);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager,i=this.getShader(e);r.applyFilter(i,t,n)}}).call(this,"/")},function(e,t){function n(e,t,n,r,i,o,a){this.lineWidth=e,this.lineColor=t,this.lineAlpha=n,this._lineTint=t,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=a,this.type=a.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},function(e,t,n){
/**
 * @file        Main export of the PIXI filters library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={AsciiFilter:n(675),BloomFilter:n(676),BlurFilter:n(677),BlurXFilter:n(112),BlurYFilter:n(164),BlurDirFilter:n(678),ColorMatrixFilter:n(679),ColorStepFilter:n(680),ConvolutionFilter:n(681),CrossHatchFilter:n(682),DisplacementFilter:n(683),DotScreenFilter:n(684),GrayFilter:n(685),DropShadowFilter:n(686),InvertFilter:n(688),NoiseFilter:n(689),PixelateFilter:n(690),RGBSplitFilter:n(691),ShockwaveFilter:n(692),SepiaFilter:n(693),SmartBlurFilter:n(694),TiltShiftFilter:n(695),TiltShiftXFilter:n(255),TiltShiftYFilter:n(257),TwistFilter:n(696)}},function(e,t,n){function r(){i.call(this)}var i=n(256);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=e/n,this.uniforms.delta.value.y=t/n}},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/tiltShift.frag","utf8"),{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(e){this.uniforms.blur.value=e}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(e){this.uniforms.gradientBlur.value=e}},start:{get:function(){return this.uniforms.start.value},set:function(e){this.uniforms.start.value=e,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(e){this.uniforms.end.value=e,this.updateDelta()}}})}).call(this,"/")},function(e,t,n){function r(){i.call(this)}var i=n(256);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=-t/n,this.uniforms.delta.value.y=e/n}},function(e,t,n){function r(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=n(3);r.prototype.constructor=r,e.exports=r,r.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}},function(e,t){e.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},function(e,t,n){"use strict";e.exports=function(e,t){t=t||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(e,t,r){t&&(i[n.q.name][t]=r)})),i}},function(e,t,n){"use strict";function r(){}function i(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}e.exports={eachSeries:function(e,t,n){var r=0,i=e.length;!function o(a){a||r===i?n&&n(a):t(e[r++],o)}()},queue:function(e,t){function n(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(s.started=!0,null==e&&s.idle())setTimeout((function(){s.drain()}),1);else{var i={data:e,callback:"function"==typeof n?n:r};t?s._tasks.unshift(i):s._tasks.push(i),setTimeout((function(){s.process()}),1)}}function o(e){return function(){a-=1,e.callback.apply(e,arguments),null!=arguments[0]&&s.error(arguments[0],e.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:t,saturated:r,unsaturated:r,buffer:t/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){s.drain=r,s._tasks=[]},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var t=s._tasks.shift();0===s._tasks.length&&s.empty(),(a+=1)===s.concurrency&&s.saturated(),e(t.data,i(o(t)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var e=1;e<=s.concurrency;e++)s.process()}}};return s}}},function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)a.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},o.prototype.emit=function(e,t,n,r,i,o){var a=s?s+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(e,t,n){var r=new i(t,n||this),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(e,t,n,i){var o=s?s+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,e.exports=o},function(e,t,n){var r=n(3);e.exports=function(){return function(e,t){if(e.data&&e.isImage){var n=new r.BaseTexture(e.data,null,r.utils.getResolutionOfUrl(e.url));n.imageUrl=e.url,e.texture=new r.Texture(n),r.utils.BaseTextureCache[e.url]=n,r.utils.TextureCache[e.url]=e.texture}t()}}},function(e,t,n){var r=n(113).Resource,i=n(265),o=n(3),a=n(240),s=1e3;e.exports=function(){return function(e,t){var n=e.name+"_image";if(!e.data||!e.isJson||!e.data.frames||this.resources[n])return t();var u={crossOrigin:e.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata},c=i.dirname(e.url.replace(this.baseUrl,""));this.add(n,c+"/"+e.data.meta.image,u,(function(n){function r(t,r){for(var a=t;a-t<r&&a<u.length;){var s=i[u[a]],l=s.frame;if(l){var f=null,h=null;if(f=s.rotated?new o.Rectangle(l.x,l.y,l.h,l.w):new o.Rectangle(l.x,l.y,l.w,l.h),s.trimmed&&(h=new o.Rectangle(s.spriteSourceSize.x/c,s.spriteSourceSize.y/c,s.sourceSize.w/c,s.sourceSize.h/c)),s.rotated){var d=f.width;f.width=f.height,f.height=d}f.x/=c,f.y/=c,f.width/=c,f.height/=c,e.textures[u[a]]=new o.Texture(n.texture.baseTexture,f,f.clone(),h,s.rotated),o.utils.TextureCache[u[a]]=e.textures[u[a]]}a++}}e.textures={};var i=e.data.frames,u=Object.keys(i),c=o.utils.getResolutionOfUrl(e.url),l=0;u.length<=s?(r(0,s),t()):a.whilst((function(){return l*s<u.length}),(function(e){r(l*s,s),l++,setTimeout(e,0)}),t)}))}}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(82))},function(e,t,n){function r(e,t){var n={},r=e.data.getElementsByTagName("info")[0],i=e.data.getElementsByTagName("common")[0];n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(i.getAttribute("lineHeight"),10),n.chars={};for(var s=e.data.getElementsByTagName("char"),u=0;u<s.length;u++){var c=parseInt(s[u].getAttribute("id"),10),l=new o.Rectangle(parseInt(s[u].getAttribute("x"),10)+t.frame.x,parseInt(s[u].getAttribute("y"),10)+t.frame.y,parseInt(s[u].getAttribute("width"),10),parseInt(s[u].getAttribute("height"),10));n.chars[c]={xOffset:parseInt(s[u].getAttribute("xoffset"),10),yOffset:parseInt(s[u].getAttribute("yoffset"),10),xAdvance:parseInt(s[u].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(t.baseTexture,l)}}var f=e.data.getElementsByTagName("kerning");for(u=0;u<f.length;u++){var h=parseInt(f[u].getAttribute("first"),10),d=parseInt(f[u].getAttribute("second"),10),p=parseInt(f[u].getAttribute("amount"),10);n.chars[d]&&(n.chars[d].kerning[h]=p)}e.bitmapFont=n,a.BitmapText.fonts[n.font]=n}var i=n(113).Resource,o=n(3),a=n(163),s=n(265);e.exports=function(){return function(e,t){if(!e.data||!e.isXml)return t();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return t();var n=s.dirname(e.url);"."===n&&(n=""),this.baseUrl&&n&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/"),n=n.replace(this.baseUrl,"")),n&&"/"!==n.charAt(n.length-1)&&(n+="/");var a=n+e.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[a])r(e,o.utils.TextureCache[a]),t();else{var u={crossOrigin:e.crossOrigin,loadType:i.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata};this.add(e.name+"_image",a,u,(function(n){r(e,n.texture),t()}))}}}},function(e,t,n){
/**
 * @file        Main export of the PIXI extras library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={Mesh:n(114),Plane:n(705),Rope:n(706),MeshRenderer:n(707),MeshShader:n(708)}},function(e,t){e.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayer=void 0;var a=n(813),s=n(13),u=n(0),c=n(56),l=n(775),f=n(797);n(798);var h=function(e){return void 0===e||(e>1||e<0)?.5:e},d=function(e){function t(t){var n=e.call(this,t)||this;return n.autoStopTimerId=null,n.hlsVideo=null,n.replayControler=new f.ReplayController,n.onError=n._onError.bind(n),n.onMuteButtonClick=n.handleMuteButtonClick.bind(n),n.onPlayFailed=n.props.onPlayFailed.bind(n),n.onRefUpdate=n._onRefUpdate.bind(n),n.onResize=n.handleResize.bind(n),n.onStopButtonClick=n.handleStopButtonClick.bind(n),n.onVolumeSliderChange=n.handleVolumeSliderChange.bind(n),n.onLoadStart=function(e){n.props.onLoadStart(e)},n.state={videoWidth:window.document.body.clientWidth,videoHeight:window.document.body.clientHeight,volume:h(n.props.defaultAudioVolume),isMuted:n.props.isDefaultMute},n}return i(t,e),t.suitableStreamProtocol=function(){return a.isHlsVideoSupported(!0)?s.StreamProtocol.HLS:null},t.isSupportedEnvironment=function(){return null!==t.suitableStreamProtocol()},t.prototype.componentDidMount=function(){var e=this;window.addEventListener("resize",this.onResize),this.props.onMount&&(this.props.onMount({audio:{volume:{set:function(t){e.setState({volume:Math.min(1,Math.max(0,t))})},up:function(t){void 0===t&&(t=.1),e.setState({volume:Math.min(1,(e.state.volume||0)+t)})},down:function(t){void 0===t&&(t=.1),e.setState({volume:Math.max(0,(e.state.volume||0)-t)})}},mute:function(){e.setState({isMuted:!0})},unmute:function(){e.setState({isMuted:!1})}}}),this.props.onInitialized&&this.props.onInitialized({volume:this.state.volume,isMute:this.state.isMuted}))},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.stopAutoStopTimer()},t.prototype.render=function(){return u.createElement(l.Controller,{streamState:this.props.streamState,linkUrl:this.props.linkUrl,niconicoLinkVisible:this.props.niconicoLinkVisible,bannerUrl:this.props.bannerUrl,isVideoClickable:this.props.isVideoClickable,title:this.props.title,commentButtonVisible:this.props.isCommentSwitchable,commentVisible:this.props.isCommentVisible,onCommentButtonClick:this.props.onCommentButtonClick,openInNewWindow:this.props.openInNewWindow,volume:this.state.volume,isMuted:this.state.isMuted,beginTime:this.props.beginTime,watchCount:this.props.watchCount,commentCount:this.props.commentCount,onPlayButtonClick:this.props.onPlayButtonClick,onPauseButtonClick:this.onStopButtonClick,onReloadButtonClick:this.props.onReloadButtonClick,onVolumeSliderChange:this.onVolumeSliderChange,onMuteButtonClick:this.onMuteButtonClick,noUI:this.props.noUI},u.createElement("div",{className:"video-container"},this.renderHlsVideo(this.props.edgeStream)))},t.prototype.renderHlsVideo=function(e){if(!e)return null;var t,n,r,i={context:{},isNativePlayerDevice:this.props.isNativePlayerDevice,width:this.state.videoWidth,height:this.state.videoHeight,volume:this.state.volume,isMuted:this.state.isMuted,edgeStream:e,onError:this.onError,onLoadStart:this.onLoadStart,onPlayFailed:this.onPlayFailed};return a.useHlsJs((t=(new c.UAParser).setUA(navigator.userAgent),n=t.getBrowser().name,r=t.getOS().name,["Safari"].indexOf(n)<0&&["Android","iOS"].indexOf(r)<0))?this.renderHlsJsVideo(e,i,this.hlsJsOnError):this.renderNativeHlsVideo(e,i)},t.prototype.renderHlsJsVideo=function(e,t,n){var r=o(o({},t),{context:o(o({},t.context),{autoReplay:this.findAutoReplay(e)}),hlsJsOnError:n});return u.createElement(a.HlsJsVideo.Component,o({},r,{ref:this.onRefUpdate}))},t.prototype.renderNativeHlsVideo=function(e,t){var n=o(o({},t),{context:o({},t.context),reloadOnStalled:!1});return u.createElement(a.NativeHlsVideo.Component,o({},n,{ref:this.onRefUpdate}))},t.prototype.findAutoReplay=function(e){return e.protocol instanceof s.DmcHls&&a.HlsDmcVideo.AUTO_REPLAY},t.prototype._onRefUpdate=function(e){this.hlsVideo=e},t.prototype.play=function(){var e=this;this.hlsVideo&&(window.setTimeout((function(){e.hlsVideo.play()}),0),this.startAutoStopTimer())},t.prototype.stop=function(){this.hlsVideo&&this.hlsVideo.stop(),this.stopAutoStopTimer(),this.props.onStop()},t.prototype.replay=function(){this.stopAutoStopTimer(),this.hlsVideo&&(this.hlsVideo.stop(),this.hlsVideo.replay(),this.startAutoStopTimer())},t.prototype.currentDelayMs=function(e){var t=this.props.edgeStream;return(t&&t.protocol)instanceof s.DmcHls?a.HlsDmcVideo.getCurrentDelayMs(t,e):Promise.resolve(0)},t.prototype.handleResize=function(){this.setState({videoWidth:window.document.body.clientWidth,videoHeight:window.document.body.clientHeight})},t.prototype.handleStopButtonClick=function(){this.stop()},t.prototype.handleVolumeSliderChange=function(e){this.setState({isMuted:!1,volume:e})},t.prototype.handleMuteButtonClick=function(){this.setState({isMuted:!this.state.isMuted})},t.prototype.startAutoStopTimer=function(){var e=this,t=this.props.autoStopSec;isNaN(t)||(this.autoStopTimerId=window.setTimeout((function(){return e.stop()}),1e3*t))},t.prototype.stopAutoStopTimer=function(){this.autoStopTimerId&&clearTimeout(this.autoStopTimerId)},t.prototype._onError=function(e){var t=this;this.replayControler.assign((function(){return t.replay()}))},t.prototype.hlsJsOnError=function(e,t,n){if(t.fatal)switch(t.type){case"networkError":n.startLoad();break;case"mediaError":n.recoverMediaError();break;default:n.destroy(),this.props.onError(t.details)}},t}(u.Component);t.VideoPlayer=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51);t.ERROR_CODE_MASTER_PLAYLIST_NO_ENTRY="MASTER_PLAYLIST_NO_ENTRY";var a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.MasterPlaylistError=a;var s=function(){function e(e,n,r){var i=this;if(this.url=e,this.text=n,this.entries=r,0===r.length)throw new a(t.ERROR_CODE_MASTER_PLAYLIST_NO_ENTRY);this.entries=this.entries.sort((function(e,t){return i.entryBandwidth(e)-i.entryBandwidth(t)}))}return e.prototype.minBandwidth=function(){return this.entries[0]},e.prototype.maxBandwidth=function(){return this.entries[this.entries.length-1]},e.prototype.best=function(e){for(var t=this.entries[0],n=this.entries.length,r=1;r<n;r++){var i=this.entries[r];if(this.entryBandwidth(i)>e)break;t=i}return t},e.prototype.random=function(){var e=Math.floor(Math.random()*this.entries.length);return this.entries[e]},e.prototype.at=function(e){return this.entries[e]},e.prototype.each=function(e){this.entries.forEach(e)},e.prototype.map=function(e){return this.entries.map(e)},e.prototype.find=function(e){for(var t=this.entries.length,n=0;n<t;n++){var r=this.entries[n];if(e(r))return r}},e.prototype.entryBandwidth=function(e){return void 0!==e.averageBandwidth?e.averageBandwidth:e.bandwidth},e}();t.MasterPlaylist=s,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){this.url=e,this.bandwidth=t,this.averageBandwidth=n};t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.url=n,i.xhr=r,i}return i(t,e),t}(n(51).RuntimeError);t.XHRError=o;var a=function(){function e(){}return e.loadText=function(e,t){this.load(e,"text",t)},e.loadBinary=function(e,t){this.load(e,"arraybuffer",t)},e.load=function(e,t,n){var r=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,i.onload=function(){try{200===i.status?"text"===t?n.onLoad(i.responseText):n.onLoad(i.response):n.onError(r.createBadStatusError(e,i))}catch(e){n.onError(e)}},i.onerror=function(){n.onError(r.createXHROnErrorError(e,i))},i.onabort=function(){n.onError(r.createXHROnAbortError(e,i))},i.ontimeout=function(){n.onError(r.createXHROnTimeoutError(e,i))},i.send()},e.createBadStatusError=function(e,t){var n=t.status;return new o("badstatus: url = "+e+", status = "+n,e,t)},e.createXHROnErrorError=function(e,t){return new o("xhrerror: url = "+e,e,t)},e.createXHROnAbortError=function(e,t){return new o("xhrabort: url = "+e,e,t)},e.createXHROnTimeoutError=function(e,t){return new o("xhrtimeout: url = "+e,e,t)},e}();t.XHRLoader=a,t.default=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.url=n,i.response=r,i}return i(t,e),t}(n(51).RuntimeError);t.FetchError=o;var a=function(){function e(){}return e.load=function(e,t){var n=this;fetch(e).then((function(r){if(r.ok)if(r.body)n.readLoop(r.body.getReader(),t);else{var i="fetcherror: failed to get reader";t.onError(new o(i,e,r))}else{i="fetcherror: url = "+e;t.onError(new o(i,e,r))}})).catch((function(e){t.onError(e)}))},e.readLoop=function(e,t){var n=this;e.read().then((function(r){try{r.value&&t.onProgress(r.value),r.done?t.onComplete():n.readLoop(e,t)}catch(n){t.onError(n),e.cancel()}})).catch((function(n){t.onError(n),e.cancel().catch((function(e){t.onError(e)}))}))},e}();t.FetchLoader=a,t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(275);t.MediaPlaylist=r.default;var i=n(276);t.MediaPlaylistEntryExtinf=i.MediaPlaylistEntryExtinf,t.MediaPlaylistEntryExtXMap=i.MediaPlaylistEntryExtXMap;var o=n(730);t.MediaPlaylistLoader=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODE_MEDIA_PLAYLIST_INVALID_RANGE="MEDIA_PLAYLIST_INVALID_RANGE";var r=function(){function e(e,t,n,r,i){this.url=e,this.text=t,this.mediaSequence=n,this.targetDuration=r,this.entries=i}return e.prototype.at=function(e){if(e>=this.entries.length)throw new RangeError(t.ERROR_CODE_MEDIA_PLAYLIST_INVALID_RANGE);return this.entries[e]},e.prototype.size=function(){return this.entries.length},e}();t.MediaPlaylist=r,t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.MediaPlaylistEntry=o,t.default=o;var a=function(e){function t(t,n){var r=e.call(this)||this;return r.url=t,r.duration=n,r}return i(t,e),t}(o);t.MediaPlaylistEntryExtinf=a;var s=function(e){function t(t){var n=e.call(this)||this;return n.url=t,n}return i(t,e),t}(o);t.MediaPlaylistEntryExtXMap=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.add=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return""+e+n+"__poll__="+t},e.strip=function(e){return e.replace(/([?&])__poll__=[0-9]+(&|$)/,"$1").replace(/[?&]$/,"")},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.url=e,this.timescale=t,this.handlerTypes=n,this.data=r};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(167),i=function(){function e(){}return e.findBox=function(e,t){var n=this.findOneOrAllBox(e,t,!0);return n.length>0?n[0]:null},e.findAllBoxes=function(e,t){return this.findOneOrAllBox(e,t,!1)},e.checkBoxType=function(e,t){return e===this.getBoxType(t)},e.getBoxType=function(e){var t=e.buffer,n=new Uint8Array(t,e.byteOffset+4,4);return String.fromCharCode.apply("",n)},e.getBoxSize=function(e){return e.getUint32(0,!1)},e.findOneOrAllBox=function(e,t,n){for(var i=[],o=(t.buffer,0);o+4<=t.byteLength;){var a=this.getBoxSize(r.default.slice(t,o,4));if(t.byteLength<o+a)break;var s=r.default.slice(t,o,a);if(this.checkBoxType(e,s)&&(i.push(s),n))break;o+=a}return i},e}();t.default=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(77),s=n(281);t.ERROR_CODE_MEDIA_SEGMENT_EDITOR_BAD_OFFSET="MEDIA_SEGMENT_EDITOR_BAD_OFFSET";var u=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.MediaSegmentEditorError=u;var c=function(){function e(){}return e.addOffsetToTfdtBaseMediaDecodeTime=function(e,n){var r=s.default.findTfdtBox(e),i=s.default.getTfdtBaseMediaDecodeTime(r)+n;if(i<0)throw new u(t.ERROR_CODE_MEDIA_SEGMENT_EDITOR_BAD_OFFSET);if(1===r.getUint8(8)){var o=a.default.split64bitInt(i),c=o[0],l=o[1];r.setUint32(12,c,!1),r.setUint32(16,l,!1)}else r.setUint32(12,i,!1)},e.addOffsetToTrunSampleCompositionTimeOffset=function(e,t){var n=s.default.findTrunBox(e),r=n.getUint32(0),i=n.getUint8(8),o=n.getUint8(11),a=n.getUint8(10),u=(1&a)>0?4:0,c=(2&a)>0?4:0,l=(4&a)>0?4:0,f=(8&a)>0?4:0,h=16+((1&o)>0?4:0)+((4&o)>0?4:0);if(0===f||0===r)return!1;var d=u+c+l+f,p=u+c+l;n.setUint8(8,1);for(var v=h;v<r;v+=d){var m=void 0;m=0===i?n.getUint32(v+p):n.getInt32(v+p),m+=t,n.setInt32(v+p,m,!1)}return!0},e}();t.default=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(77),s=n(167),u=n(279),c=n(168),l=n(169);t.ERROR_CODE_MEDIA_SEGMENT_PARSER_MOOF_NOT_FOUND="MEDIA_SEGMENT_PARSER_MOOF_NOT_FOUND",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRAF_NOT_FOUND="MEDIA_SEGMENT_PARSER_TRAF_NOT_FOUND",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TFHD_NOT_FOUND="MEDIA_SEGMENT_PARSER_TFHD_NOT_FOUND",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TFDT_NOT_FOUND="MEDIA_SEGMENT_PARSER_TFDT_NOT_FOUND",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRUN_NOT_FOUND="MEDIA_SEGMENT_PARSER_TRUN_NOT_FOUND",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_DEFAULT_SAMPLE_DURATION_IS_UNSUPPORTED="MEDIA_SEGMENT_PARSER_DEFAULT_SAMPLE_DURATION_IS_UNSUPPORTED",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TOO_LARGE_BASEMEDIADECODETIME="MEDIA_SEGMENT_PARSER_TOO_LARGE_BASEMEDIADECODETIME",t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRUN_IS_EMPTY="MEDIA_SEGMENT_PARSER_TRUN_IS_EMPTY";var f=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.MediaSegmentParserError=f;var h=function(){function e(){}return e.tryParseMediaSegmentHeader=function(e,t,n,r){return u.default.findBox("mdat",r)?this.parseMediaSegmentHeader(e,t,n,r):null},e.tryExtractMediaSegmentChunk=function(e,t){var n=this.extractOneChunk(t),r=n[0],i=n[1];return r?[this.parseMediaSegmentChunk(e,r),i]:[null,t]},e.parseMediaSegmentHeader=function(e,t,n,r){var i=this.findTfdtBox(r),o=this.getTfdtBaseMediaDecodeTime(i),a=this.findTrunBox(r),s=this.getTrunTotalSampleDurationAndPts(a,o),u=(s[0],s[1]);s[2];return new l.default(e,t,n,o,u)},e.parseMediaSegmentChunk=function(e,t){var n=this.findTfhdBox(t),r=this.getTfhdTrackId(n),i=this.findTfdtBox(t),o=this.getTfdtBaseMediaDecodeTime(i),a=this.findTrunBox(t),s=this.getTrunTotalSampleDurationAndPts(a,o),u=s[0],l=s[1],f=s[2];return new c.default(e,r,o,l,f,u,t)},e.findTfdtBox=function(e){var n=this.findTrafBox(e),r=u.default.findBox("tfdt",s.default.slice(n,8));if(!r)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TFDT_NOT_FOUND);return r},e.getTfdtBaseMediaDecodeTime=function(e){if(1===e.getUint8(8)){var n=a.default.parseUnsigned64bitBigEndianInt(e,12);if(void 0===n)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TOO_LARGE_BASEMEDIADECODETIME);return n}return e.getUint32(12,!1)},e.extractOneChunk=function(e){var t=u.default.findBox("mdat",e);if(t){var n=e.buffer,r=e.byteOffset,i=t.byteOffset+t.byteLength;return[new DataView(n,r,i-r),new DataView(n,i)]}return[null,e]},e.findTrafBox=function(e){var n=u.default.findBox("moof",e);if(!n)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_MOOF_NOT_FOUND);var r=u.default.findBox("traf",s.default.slice(n,8));if(!r)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRAF_NOT_FOUND);return r},e.findTrunBox=function(e){var n=this.findTrafBox(e),r=u.default.findBox("trun",s.default.slice(n,8));if(!r)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRUN_NOT_FOUND);return r},e.findTfhdBox=function(e){var n=this.findTrafBox(e),r=u.default.findBox("tfhd",s.default.slice(n,8));if(!r)throw new f(t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TFHD_NOT_FOUND);return r},e.getTfhdTrackId=function(e){return e.getUint32(12)},e.getTrunTotalSampleDurationAndPts=function(e,n){var r=e.getUint32(0),i=e.getUint8(8),o=e.getUint8(11),a=e.getUint8(10),s=(e.getUint32(12),(1&a)>0?4:0),u=(2&a)>0?4:0,c=(4&a)>0?4:0,l=(8&a)>0?4:0,h=16+((1&o)>0?4:0)+((4&o)>0?4:0);if(!s){var d=t.ERROR_CODE_MEDIA_SEGMENT_PARSER_DEFAULT_SAMPLE_DURATION_IS_UNSUPPORTED;throw new f(d)}if(r<=0){d=t.ERROR_CODE_MEDIA_SEGMENT_PARSER_TRUN_IS_EMPTY;throw new f(d)}var p=s+u+c+l,v=null;l>0&&(v=s+u+c);for(var m=0,g=n,y=1/0,_=0,b=h;b<r;b+=p){var E=e.getUint32(b+0),S=0;null!==v&&(S=0===i?e.getUint32(b+v):e.getInt32(b+v));var T=g+S;y=Math.min(y,T),_=Math.max(_,T+E),g+=E,m+=E}return[m,y,_]},e}();t.MediaSegmentParser=h,t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(734);t.MSEPlayer=r.MSEPlayer,t.MSEPlayerEvents=r.MSEPlayerEvents},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(33);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,o=n(33),a=n(752),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:("undefined"!=typeof XMLHttpRequest?i=n(287):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(i=n(287)),i),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){u.headers[e]=o.merge(s)})),e.exports=u}).call(this,n(82))},function(e,t,n){"use strict";var r=n(33),i=n(753),o=n(284),a=n(755),s=n(758),u=n(759),c=n(288);e.exports=function(e){return new Promise((function(t,l){var f=e.data,h=e.headers;r.isFormData(f)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password||"";h.Authorization="Basic "+btoa(p+":"+v)}var m=a(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?s(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};i(t,l,r),d=null}},d.onabort=function(){d&&(l(c("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){l(c("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(c(t,e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=n(760),y=(e.withCredentials||u(m))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}if("setRequestHeader"in d&&r.forEach(h,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),l(e),d=null)})),void 0===f&&(f=null),d.send(f)}))}},function(e,t,n){"use strict";var r=n(754);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";var r=n(33);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=i.concat(o).concat(a),u=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(u,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({id:"initializing",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},e),i.createElement("rect",{width:"100",height:"100",fill:"#424242",rx:"4",ry:"4"}),i.createElement("rect",{x:"2",y:"2",width:"96",height:"96",rx:"4",ry:"4"}),i.createElement("circle",{fill:"#ccc",cx:"50",cy:"20",r:"9"}),i.createElement("circle",{fill:"#ccc",cx:"71",cy:"29",r:"6"}),i.createElement("circle",{cx:"80",cy:"50",r:"9"}),i.createElement("circle",{cx:"71",cy:"71",r:"5"}),i.createElement("circle",{cx:"50",cy:"80",r:"9"}),i.createElement("circle",{cx:"29",cy:"71",r:"5"}),i.createElement("circle",{cx:"20",cy:"50",r:"9"}),i.createElement("circle",{fill:"#ccc",cx:"29",cy:"29",r:"6"}))}},function(e,t,n){var r=n(624),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(118),i=function(){function e(){this._listeners={},this._captureListeners={},this._listeners=null,this._captureListeners=null}return e.initialize=function(t){var n=e.prototype;t.addEventListener=n.addEventListener,t.on=n.on,t.removeEventListener=t.off=n.removeEventListener,t.removeAllEventListeners=n.removeAllEventListeners,t.hasEventListener=n.hasEventListener,t.dispatchEvent=n.dispatchEvent,t._dispatchEvent=n._dispatchEvent,t.willTrigger=n.willTrigger},e.prototype.addEventListener=function(e,t,n){var r;void 0===n&&(n=!1);var i=(r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[e];return i&&(this.removeEventListener(e,t,n),i=r[e]),i?i.push(t):r[e]=[t],t},e.prototype.on=function(e,t,n,r,i,o){return void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i={}),void 0===o&&(o=!1),t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,(function(e){t.call(n,e,i),r&&e.remove()}),o)},e.prototype.removeEventListener=function(e,t,n){void 0===n&&(n=!1);var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var o=0,a=i.length;o<a;o++)if(i[o]===t){1===a?delete r[e]:i.splice(o,1);break}}},e.prototype.off=function(e,t,n){void 0===n&&(n=!1),this.removeEventListener(e,t,n)},e.prototype.removeAllEventListeners=function(e){void 0===e&&(e=null),e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},e.prototype.dispatchEvent=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),"string"==typeof e){var i=this._listeners;if(!(t||i&&i[e]))return!0;e=new r.a(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var o=this,a=[o];o.parent;)a.push(o=o.parent);var s=a.length,u=void 0;for(u=s-1;u>=0&&!e.propagationStopped;u--)a[u]._dispatchEvent(e,1+(0==u?1:0));for(u=1;u<s&&!e.propagationStopped;u++)a[u]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},e.prototype.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},e.prototype.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},e.prototype.toString=function(){return"["+(this.constructor.name+this.name?" "+this.name:"")+"]"},e.prototype._dispatchEvent=function(e,t){var n=1===t?this._captureListeners:this._listeners;if(e&&n){var r=n[e.type],i=void 0;if(!r||0===(i=r.length))return;try{e.currentTarget=this}catch(e){}try{e.eventPhase=t}catch(e){}e.removed=!1,r=r.slice();for(var o=0;o<i&&!e.immediatePropagationStopped;o++){var a=r[o];a.handleEvent?a.handleEvent(e):a(e),e.removed&&(this.off(e.type,a,1===t),e.removed=!1)}}},e}()},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyResize=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(0)),a=n(52),s=n(76),u=r(n(717)),c=r(n(718)),l=o.default.createElement("div",{style:{display:"none"},"data-name":"@zippytech/react-observer-placeholder"}),f=function(){},h=function(e){return e()},d={contain:"strict",position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1,overflow:"hidden",display:"block",pointerEvents:"none",opacity:0,direction:"ltr",textAlign:"start"},p={contain:"strict",position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"auto"},v={contain:"strict",position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"auto"},m={contain:"strict",position:"absolute",top:0,left:0,width:"200%",height:"200%"},g=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.checkResize=t.checkResize.bind(t),t.onResize=t.onResize.bind(t),e.notifyResizeDelay>0&&(t.onResize=(0,c.default)(t.onResize,e.notifyResizeDelay)),e.checkResizeDelay>0&&(t.checkResize=(0,c.default)(t.checkResize,e.checkResizeDelay)),t.refNotifyResize=function(e){t.notifyResizeNode=e},t.refContractTool=function(e){t.contractToolNode=e},t.refExpandTool=function(e){t.expandToolNode=e},t.refExpandToolInner=function(e){t.expandToolInnerNode=e},t.state={notifyResizeWidth:0,notifyResizeHeight:0,expandToolWidth:0,expandToolHeight:0,contractToolWidth:0,contractToolHeight:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),i(n,[{key:"shouldComponentUpdate",value:function(e,t){return"function"==typeof e.shouldComponentUpdate?e.shouldComponentUpdate(e,this.props,t,this.state):!(0,u.default)(t,this.state)||!(0,u.default)(e,this.props)}},{key:"componentWillUnmount",value:function(){this.__willUnmount=!0,this.observer&&(this.observer.unobserve&&this.observer.unobserve(this.target),this.observer.disconnect&&this.observer.disconnect(),delete this.observer),delete this.target}},{key:"componentDidMount",value:function(){var t=this,n=e.ResizeObserver||this.props.ResizeObserver;if(this.props.useNativeIfAvailable&&n){var r=(0,a.findDOMNode)(this).parentNode;this.target=r;var i=new n((function(e){t.props.onObserverResize&&t.props.onObserverResize(e);var n=e[0];n&&t.onResize(n.contentRect)}));i.observe(r),this.observer=i}"function"==typeof this.props.onMount&&this.props.onMount(this),this.observer||this.resetResizeTool((function(){if(t.props.notifyOnMount){var e=t.state,n=e.notifyResizeWidth,r=e.notifyResizeHeight;t.onResize({width:n,height:r})}}))}},{key:"render",value:function(){var t=e.ResizeObserver||this.props.ResizeObserver;return this.props.useNativeIfAvailable&&t?l:o.default.createElement("div",{ref:this.refNotifyResize,style:d,onScroll:this.checkResize},this.renderExpandTool(),this.renderContractTool())}},{key:"renderExpandTool",value:function(){return o.default.createElement("div",{ref:this.refExpandTool,style:p},o.default.createElement("div",{ref:this.refExpandToolInner,style:{position:"absolute",top:0,left:0,width:this.state.expandToolWidth,height:this.state.expandToolHeight}}))}},{key:"renderContractTool",value:function(){return o.default.createElement("div",{ref:this.refContractTool,style:v},o.default.createElement("div",{ref:"contractInner",style:m}))}},{key:"resetResizeTool",value:function(e){var t=this;this.setDimensions((function(){t.scrollToBottomExpandTool(),"function"==typeof e&&e()}))}},{key:"setDimensions",value:function(e){var t=this;this.getDimensions((function(n){var r=n.notifyResizeWidth,i=n.notifyResizeHeight;t.__willUnmount||t.setState({notifyResizeWidth:r,notifyResizeHeight:i,expandToolWidth:r+1,expandToolHeight:i+1},e)}))}},{key:"getDimensions",value:function(e){var t=this;e&&"function"==typeof e||(e=f);var n=this.notifyResizeNode;if(n){var r=n.parentElement||n,i=void 0;(this.props.useRaf?requestAnimationFrame:h)((function(){i="function"==typeof t.props.measureSize?t.props.measureSize(r,n):{width:r.offsetWidth,height:r.offsetHeight},e({notifyResizeWidth:i.width,notifyResizeHeight:i.height})}))}}},{key:"scrollToBottomExpandTool",value:function(e){var t=this;this.notifyResizeNode&&requestAnimationFrame((function(){var n=t.expandToolNode,r=t.contractToolNode,i=void 0,o=void 0,a=void 0,s=void 0;n&&(i=n.scrollHeight,o=n.scrollWidth),r&&(a=r.scrollHeight,s=r.scrollWidth),n&&(n.scrollTop=i,n.scrollLeft=o),r&&(r.scrollTop=a,r.scrollLeft=s),"function"==typeof e&&e()}))}},{key:"checkResize",value:function(){var e=this;this.getDimensions((function(t){var n=t.notifyResizeWidth,r=t.notifyResizeHeight;n===e.state.notifyResizeWidth&&r===e.state.notifyResizeHeight||(e.onResize({width:n,height:r}),e.resetResizeTool())}))}},{key:"onResize",value:function(e){var t=e.width,n=e.height;this.__willUnmount||"function"==typeof this.props.onResize&&this.props.onResize({width:t,height:n})}}]),n}(o.default.Component);g.defaultProps={useNativeIfAvailable:!0,useWillChange:!1,useRaf:!0},g.propTypes={ResizeObserver:s.func,onResize:s.func,onObserverResize:s.func,useNativeIfAvailable:s.bool,onMount:s.func,useWillChange:s.bool,useRaf:s.bool,notifyOnMount:s.bool,notifyResizeDelay:s.number,checkResizeDelay:s.number},t.default=g,t.NotifyResize=g}).call(this,n(22))},function(e,t,n){e.exports=n(747)},function(e,t,n){"use strict";
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */function r(e){if("number"==typeof e){if(!r[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!r[t])throw new Error("invalid status code: "+t);return t}if(!(t=r[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return t}var i=n(763);e.exports=r,r.STATUS_CODES=i,r.codes=function(e,t){var n=[];return Object.keys(t).forEach((function(r){var i=t[r],o=Number(r);e[o]=i,e[i]=o,e[i.toLowerCase()]=o,n.push(o)})),n}(r,i),r.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},r.empty={204:!0,205:!0,304:!0},r.retry={502:!0,503:!0,504:!0}},function(e,t,n){var r;!function(i){"use strict";function o(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}function a(e){return function(t,n,r){var i=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)}}function s(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var u={},c=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,l=/\d\d?/,f=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,h=/\[([^]*?)\]/gm,d=function(){},p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],m=o(v,3),g=o(p,3);u.i18n={dayNamesShort:g,dayNames:p,monthNamesShort:m,monthNames:v,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var y={D:function(e){return e.getDate()},DD:function(e){return s(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return s(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return s(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return String(e.getFullYear()).substr(2)},YYYY:function(e){return s(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return s(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return s(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return s(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return s(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return s(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return s(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+s(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},_={D:[l,function(e,t){e.day=t}],Do:[new RegExp(l.source+f.source),function(e,t){e.day=parseInt(t,10)}],M:[l,function(e,t){e.month=t-1}],YY:[l,function(e,t){var n=+(""+(new Date).getFullYear()).substr(0,2);e.year=""+(t>68?n-1:n)+t}],h:[l,function(e,t){e.hour=t}],m:[l,function(e,t){e.minute=t}],s:[l,function(e,t){e.second=t}],YYYY:[/\d{4}/,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[/\d{3}/,function(e,t){e.millisecond=t}],d:[l,d],ddd:[f,d],MMM:[f,a("monthNamesShort")],MMMM:[f,a("monthNames")],a:[f,function(e,t,n){var r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(e,t){"Z"===t&&(t="+00:00");var n,r=(t+"").match(/([\+\-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),e.timezoneOffset="+"===r[0]?n:-n)}]};_.dd=_.d,_.dddd=_.ddd,_.DD=_.D,_.mm=_.m,_.hh=_.H=_.HH=_.h,_.MM=_.M,_.ss=_.s,_.A=_.a,u.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},u.format=function(e,t,n){var r=n||u.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=u.masks[t]||t||u.masks.default;var i=[];return(t=(t=t.replace(h,(function(e,t){return i.push(t),"??"}))).replace(c,(function(t){return t in y?y[t](e,r):t.slice(1,t.length-1)}))).replace(/\?\?/g,(function(){return i.shift()}))},u.parse=function(e,t,n){var r=n||u.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=u.masks[t]||t,e.length>1e3)return!1;var i=!0,o={};if(t.replace(c,(function(t){if(_[t]){var n=_[t],a=e.search(n[0]);~a?e.replace(n[0],(function(t){return n[1](o,t,r),e=e.substr(a+t.length),t})):i=!1}return _[t]?"":t.slice(1,t.length-1)})),!i)return!1;var a,s=new Date;return!0===o.isPm&&null!=o.hour&&12!=+o.hour?o.hour=+o.hour+12:!1===o.isPm&&12==+o.hour&&(o.hour=0),null!=o.timezoneOffset?(o.minute=+(o.minute||0)-+o.timezoneOffset,a=new Date(Date.UTC(o.year||s.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0))):a=new Date(o.year||s.getFullYear(),o.month||0,o.day||1,o.hour||0,o.minute||0,o.second||0,o.millisecond||0),a},e.exports?e.exports=u:void 0===(r=function(){return u}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&a.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}var o=n(770),a=n(771);t.parse=i,t.resolve=function(e,t){return i(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},t.format=function(e){return a.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)},t.Url=r;var s=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(l),h=["%","/","?",";","#"].concat(f),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(772);r.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",u=e.split(i);u[0]=u[0].replace(/\\/g,"/");var l=e=u.join(i);if(l=l.trim(),!n&&1===e.split("#").length){var b=c.exec(l);if(b)return this.path=l,this.href=l,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var E=s.exec(l);if(E){var S=(E=E[0]).toLowerCase();this.protocol=S,l=l.substr(E.length)}if(n||E||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===l.substr(0,2);!T||E&&g[E]||(l=l.substr(2),this.slashes=!0)}if(!g[E]&&(T||E&&!y[E])){for(var w,O,R=-1,A=0;A<d.length;A++){-1!==(P=l.indexOf(d[A]))&&(-1===R||P<R)&&(R=P)}-1!==(O=-1===R?l.lastIndexOf("@"):l.lastIndexOf("@",R))&&(w=l.slice(0,O),l=l.slice(O+1),this.auth=decodeURIComponent(w)),R=-1;for(A=0;A<h.length;A++){var P;-1!==(P=l.indexOf(h[A]))&&(-1===R||P<R)&&(R=P)}-1===R&&(R=l.length),this.host=l.slice(0,R),l=l.slice(R),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var C=this.hostname.split(/\./),M=(A=0,C.length);A<M;A++){var L=C[A];if(L&&!L.match(p)){for(var k="",I=0,D=L.length;I<D;I++)L.charCodeAt(I)>127?k+="x":k+=L[I];if(!k.match(p)){var N=C.slice(0,A),F=C.slice(A+1),U=L.match(v);U&&(N.push(U[1]),F.unshift(U[2])),F.length&&(l="/"+F.join(".")+l),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=o.toASCII(this.hostname));var j=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+j,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!m[S])for(A=0,M=f.length;A<M;A++){var G=f[A];if(-1!==l.indexOf(G)){var H=encodeURIComponent(G);H===G&&(H=escape(G)),l=l.split(G).join(H)}}var V=l.indexOf("#");-1!==V&&(this.hash=l.substr(V),l=l.slice(0,V));var z=l.indexOf("?");if(-1!==z?(this.search=l.substr(z),this.query=l.substr(z+1),t&&(this.query=_.parse(this.query)),l=l.slice(0,z)):t&&(this.search="",this.query={}),l&&(this.pathname=l),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(a.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=b||_||n.host&&e.pathname,S=E,T=n.pathname&&n.pathname.split("/")||[],w=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),E=E&&(""===p[0]||""===T[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(w)n.hostname=n.host=T.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=T.slice(-1)[0],R=(n.host||e.host||T.length>1)&&("."===O||".."===O)||""===O,A=0,P=T.length;P>=0;P--)"."===(O=T[P])?T.splice(P,1):".."===O?(T.splice(P,1),A++):A&&(T.splice(P,1),A--);if(!E&&!S)for(;A--;A)T.unshift("..");!E||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var x,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);w&&(n.hostname=n.host=C?"":T.length?T.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift()));return(E=E||n.host&&T.length)&&!C&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var r,i,o;o=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var i=e[r];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(r>0&&(i=i.replace(/^[\/]+/,"")),i=r<e.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),t.push(i))}var o=t.join("/"),a=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return o=a.shift()+(a.length>0?"?":"")+a.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},,,,function(e,t,n){n(305),e.exports=n(507)},function(e,t,n){"use strict";(function(e){function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(306),n(503),n(504),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(22))},function(e,t,n){n(307),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(387),n(388),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(141),n(411),n(412),n(190),n(413),n(414),n(415),n(416),n(417),n(193),n(195),n(196),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),e.exports=n(39)},function(e,t,n){"use strict";var r=n(6),i=n(34),o=n(15),a=n(1),s=n(31),u=n(57).KEY,c=n(7),l=n(88),f=n(71),h=n(61),d=n(10),p=n(173),v=n(121),m=n(308),g=n(91),y=n(5),_=n(8),b=n(35),E=n(45),S=n(60),T=n(64),w=n(176),O=n(36),R=n(16),A=n(62),P=O.f,x=R.f,C=w.f,M=r.Symbol,L=r.JSON,k=L&&L.stringify,I=d("_hidden"),D=d("toPrimitive"),N={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),j=l("op-symbols"),B=Object.prototype,G="function"==typeof M,H=r.QObject,V=!H||!H.prototype||!H.prototype.findChild,z=o&&c((function(){return 7!=T(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=P(B,t);r&&delete B[t],x(e,t,n),r&&e!==B&&x(B,t,r)}:x,W=function(e){var t=U[e]=T(M.prototype);return t._k=e,t},Y=G&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},q=function(e,t,n){return e===B&&q(j,t,n),y(e),t=E(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),n=T(n,{enumerable:S(0,!1)})):(i(e,I)||x(e,I,S(1,{})),e[I][t]=!0),z(e,t,n)):x(e,t,n)},K=function(e,t){y(e);for(var n,r=m(t=b(t)),i=0,o=r.length;o>i;)q(e,n=r[i++],t[n]);return e},X=function(e){var t=N.call(this,e=E(e,!0));return!(this===B&&i(U,e)&&!i(j,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,I)&&this[I][e])||t)},$=function(e,t){if(e=b(e),t=E(t,!0),e!==B||!i(U,t)||i(j,t)){var n=P(e,t);return!n||!i(U,t)||i(e,I)&&e[I][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=C(b(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==I||t==u||r.push(t);return r},Q=function(e){for(var t,n=e===B,r=C(n?j:b(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(B,t)||o.push(U[t]);return o};G||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(j,n),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),z(this,e,S(1,n))};return o&&V&&z(B,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),O.f=$,R.f=q,n(65).f=w.f=J,n(79).f=X,n(90).f=Q,o&&!n(58)&&s(B,"propertyIsEnumerable",X,!0),p.f=function(e){return W(d(e))}),a(a.G+a.W+a.F*!G,{Symbol:M});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=A(d.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?T(e):K(T(e),t)},defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),L&&a(a.S+a.F*(!G||c((function(){var e=M();return"[null]"!=k([e])||"{}"!=k({a:e})||"{}"!=k(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!Y(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,k.apply(L,r)}}),M.prototype[D]||n(30)(M.prototype,D,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(62),i=n(90),o=n(79);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(64)})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(15),"Object",{defineProperty:n(16).f})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(15),"Object",{defineProperties:n(175)})},function(e,t,n){var r=n(35),i=n(36).f;n(48)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(20),i=n(37);n(48)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(20),i=n(62);n(48)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(48)("getOwnPropertyNames",(function(){return n(176).f}))},function(e,t,n){var r=n(8),i=n(57).onFreeze;n(48)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8),i=n(57).onFreeze;n(48)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8),i=n(57).onFreeze;n(48)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(8);n(48)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(8);n(48)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(8);n(48)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(177)})},function(e,t,n){var r=n(1);r(r.S,"Object",{is:n(324)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(125).set})},function(e,t,n){"use strict";var r=n(80),i={};i[n(10)("toStringTag")]="z",i+""!="[object z]"&&n(31)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(178)})},function(e,t,n){var r=n(16).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(15)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(8),i=n(37),o=n(10)("hasInstance"),a=Function.prototype;o in a||n(16).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(1),i=n(180);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(1),i=n(181);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(6),i=n(34),o=n(41),a=n(127),s=n(45),u=n(7),c=n(65).f,l=n(36).f,f=n(16).f,h=n(72).trim,d=r.Number,p=d,v=d.prototype,m="Number"==o(n(64)(v)),g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=g?t.trim():h(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof d&&(m?u((function(){v.valueOf.call(n)})):"Number"!=o(n))?a(new p(y(t)),n,d):y(t)};for(var _,b=n(15)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)i(p,_=b[E])&&!i(d,_)&&f(d,_,l(p,_));d.prototype=v,v.constructor=d,n(31)(r,"Number",d)}},function(e,t,n){"use strict";var r=n(1),i=n(47),o=n(182),a=n(128),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=u(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,l),c=i(e),v="",m="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*p(2,69,1))-69)<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=t-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),m=d()}else f(0,n),f(1<<-t,0),m=d()+a.call("0",c);return m=c>0?v+((s=m.length)<=c?"0."+a.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c)):v+m}})},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(182),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(1),i=n(6).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{isInteger:n(183)})},function(e,t,n){var r=n(1);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(1),i=n(183),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(1),i=n(181);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(1),i=n(180);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(1),i=n(184),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(1),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(1),i=n(129);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(1),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(1),i=n(130);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(1);r(r.S,"Math",{fround:n(185)})},function(e,t,n){var r=n(1),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(1),i=Math.imul;r(r.S+r.F*n(7)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log1p:n(184)})},function(e,t,n){var r=n(1);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(1);r(r.S,"Math",{sign:n(129)})},function(e,t,n){var r=n(1),i=n(130),o=Math.exp;r(r.S+r.F*n(7)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(1),i=n(130),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(1),i=n(63),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(1),i=n(35),o=n(17);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(72)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(131)(!0);n(132)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(1),i=n(131)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(1),i=n(17),o=n(134),a="".endsWith;r(r.P+r.F*n(135)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(1),i=n(134);r(r.P+r.F*n(135)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(1);r(r.P,"String",{repeat:n(128)})},function(e,t,n){"use strict";var r=n(1),i=n(17),o=n(134),a="".startsWith;r(r.P+r.F*n(135)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(32)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(32)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(32)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(32)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(32)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(32)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(32)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(32)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(32)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(32)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(32)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(32)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(32)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(1),i=n(20),o=n(45);r(r.P+r.F*n(7)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(1),i=n(386);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(7),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(31)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(10)("toPrimitive"),i=Date.prototype;r in i||n(30)(i,r,n(389))},function(e,t,n){"use strict";var r=n(5),i=n(45);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(1);r(r.S,"Array",{isArray:n(91)})},function(e,t,n){"use strict";var r=n(40),i=n(1),o=n(20),a=n(186),s=n(136),u=n(17),c=n(137),l=n(138);i(i.S+i.F*!n(93)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,h=o(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(h);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),null==y||d==Array&&s(y))for(n=new d(t=u(h.length));t>g;g++)c(n,g,m?v(h[g],g):h[g]);else for(f=y.call(h),n=new d;!(i=f.next()).done;g++)c(n,g,m?a(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(1),i=n(137);r(r.S+r.F*n(7)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(1),i=n(35),o=[].join;r(r.P+r.F*(n(78)!=Object||!n(42)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(1),i=n(124),o=n(41),a=n(63),s=n(17),u=[].slice;r(r.P+r.F*n(7)((function(){i&&u.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(e,t,n){"use strict";var r=n(1),i=n(25),o=n(20),a=n(7),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(42)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(1),i=n(49)(0),o=n(42)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(8),i=n(91),o=n(10)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(1),i=n(49)(1);r(r.P+r.F*!n(42)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(49)(2);r(r.P+r.F*!n(42)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(49)(3);r(r.P+r.F*!n(42)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(49)(4);r(r.P+r.F*!n(42)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(187);r(r.P+r.F*!n(42)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(1),i=n(187);r(r.P+r.F*!n(42)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(1),i=n(89)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(42)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),i=n(35),o=n(47),a=n(17),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(42)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(1);r(r.P,"Array",{copyWithin:n(188)}),n(59)("copyWithin")},function(e,t,n){var r=n(1);r(r.P,"Array",{fill:n(140)}),n(59)("fill")},function(e,t,n){"use strict";var r=n(1),i=n(49)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(59)("find")},function(e,t,n){"use strict";var r=n(1),i=n(49)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(59)(o)},function(e,t,n){n(66)("Array")},function(e,t,n){var r=n(6),i=n(127),o=n(16).f,a=n(65).f,s=n(92),u=n(94),c=r.RegExp,l=c,f=c.prototype,h=/a/g,d=/a/g,p=new c(h)!==h;if(n(15)&&(!p||n(7)((function(){return d[n(10)("match")]=!1,c(h)!=h||c(d)==d||"/a/i"!=c(h,"i")})))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),n?this:f,c)};for(var v=function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},m=a(l),g=0;m.length>g;)v(m[g++]);f.constructor=c,c.prototype=f,n(31)(r,"RegExp",c)}n(66)("RegExp")},function(e,t,n){"use strict";n(190);var r=n(5),i=n(94),o=n(15),a=/./.toString,s=function(e){n(31)(RegExp.prototype,"toString",e,!0)};n(7)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){n(95)("match",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]}))},function(e,t,n){n(95)("replace",2,(function(e,t,n){return[function(r,i){"use strict";var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]}))},function(e,t,n){n(95)("search",1,(function(e,t,n){return[function(n){"use strict";var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]}))},function(e,t,n){n(95)("split",2,(function(e,t,r){"use strict";var i=n(92),o=r,a=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(n,e,t);var r,u,c,l,f,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,d+"g");for(s||(r=new RegExp("^"+m.source+"$(?!\\s)",d));(u=m.exec(n))&&!((c=u.index+u[0].length)>p&&(h.push(n.slice(p,u.index)),!s&&u.length>1&&u[0].replace(r,(function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(u[f]=void 0)})),u.length>1&&u.index<n.length&&a.apply(h,u.slice(1)),l=u[0].length,p=c,h.length>=v));)m.lastIndex===u.index&&m.lastIndex++;return p===n.length?!l&&m.test("")||h.push(""):h.push(n.slice(p)),h.length>v?h.slice(0,v):h}}else"0".split(void 0,0).length&&(r=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,i){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]}))},function(e,t,n){"use strict";var r,i,o,a,s=n(58),u=n(6),c=n(40),l=n(80),f=n(1),h=n(8),d=n(25),p=n(67),v=n(68),m=n(96),g=n(142).set,y=n(143)(),_=n(144),b=n(191),E=n(97),S=n(192),T=u.TypeError,w=u.process,O=w&&w.versions,R=O&&O.v8||"",A=u.Promise,P="process"==l(w),x=function(){},C=i=_.f,M=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(10)("species")]=function(e){e(x,x)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t&&0!==R.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},k=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&N(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(T("Promise-chain cycle")):(o=L(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){g.call(u,(function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=b((function(){P?w.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=P||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){g.call(u,(function(){var t;P?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),k(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw T("Promise can't be resolved itself");(t=L(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,c(U,r,1),c(F,r,1))}catch(e){F.call(r,e)}})):(n._v=e,n._s=1,k(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};M||(A=function(e){p(this,A,"Promise","_h"),d(e),r.call(this);try{e(c(U,this,1),c(F,this,1))}catch(e){F.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(69)(A.prototype,{then:function(e,t){var n=C(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(U,e,1),this.reject=c(F,e,1)},_.f=C=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!M,{Promise:A}),n(71)(A,"Promise"),n(66)("Promise"),a=n(39).Promise,f(f.S+f.F*!M,"Promise",{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!M),"Promise",{resolve:function(e){return S(s&&this===a?A:this,e)}}),f(f.S+f.F*!(M&&n(93)((function(e){A.all(e).catch(x)}))),"Promise",{all:function(e){var t=this,n=C(t),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;v(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,i=b((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(197),i=n(74);n(98)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(1),i=n(99),o=n(145),a=n(5),s=n(63),u=n(17),c=n(8),l=n(6).ArrayBuffer,f=n(96),h=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,v=h.prototype.slice,m=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&m in e}}),r(r.P+r.U+r.F*n(7)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(f(this,h))(u(i-r)),c=new d(this),l=new d(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(66)("ArrayBuffer")},function(e,t,n){var r=n(1);r(r.G+r.W+r.F*!n(99).ABV,{DataView:n(145).DataView})},function(e,t,n){n(54)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(54)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(54)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(1),i=n(25),o=n(5),a=(n(6).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(7)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(1),i=n(64),o=n(25),a=n(5),s=n(8),u=n(7),c=n(178),l=(n(6).Reflect||{}).construct,f=u((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!u((function(){l((function(){}))}));r(r.S+r.F*(f||h),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},function(e,t,n){var r=n(16),i=n(1),o=n(5),a=n(45);i(i.S+i.F*n(7)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),i=n(36).f,o=n(5);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(1),i=n(5),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(133)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(36),i=n(37),o=n(34),a=n(1),s=n(8),u=n(5);a(a.S,"Reflect",{get:function e(t,n){var a,c,l=arguments.length<3?t:arguments[2];return u(t)===l?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(t))?e(c,n,l):void 0}})},function(e,t,n){var r=n(36),i=n(1),o=n(5);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(1),i=n(37),o=n(5);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(1),i=n(5),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(199)})},function(e,t,n){var r=n(1),i=n(5),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(16),i=n(36),o=n(37),a=n(34),s=n(1),u=n(60),c=n(5),l=n(8);s(s.S,"Reflect",{set:function e(t,n,s){var f,h,d=arguments.length<4?t:arguments[3],p=i.f(c(t),n);if(!p){if(l(h=o(t)))return e(h,n,s,d);p=u(0)}if(a(p,"value")){if(!1===p.writable||!l(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(d,n,f)}else r.f(d,n,u(0,s));return!0}return void 0!==p.set&&(p.set.call(d,s),!0)}})},function(e,t,n){var r=n(1),i=n(125);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(1),i=n(89)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(59)("includes")},function(e,t,n){"use strict";var r=n(1),i=n(200),o=n(20),a=n(17),s=n(25),u=n(139);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(59)("flatMap")},function(e,t,n){"use strict";var r=n(1),i=n(200),o=n(20),a=n(17),s=n(47),u=n(139);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=u(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(59)("flatten")},function(e,t,n){"use strict";var r=n(1),i=n(131)(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(1),i=n(201),o=n(97);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(1),i=n(201),o=n(97);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(72)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(72)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";var r=n(1),i=n(46),o=n(17),a=n(92),s=n(94),u=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};n(133)(c,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in u?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new c(r,t)}})},function(e,t,n){n(121)("asyncIterator")},function(e,t,n){n(121)("observable")},function(e,t,n){var r=n(1),i=n(199),o=n(35),a=n(36),s=n(137);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,t=c[f++]))&&s(l,t,n);return l}})},function(e,t,n){var r=n(1),i=n(202)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(1),i=n(202)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(1),i=n(20),o=n(25),a=n(16);n(15)&&r(r.P+n(100),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),i=n(20),o=n(25),a=n(16);n(15)&&r(r.P+n(100),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),i=n(20),o=n(45),a=n(37),s=n(36).f;n(15)&&r(r.P+n(100),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(1),i=n(20),o=n(45),a=n(37),s=n(36).f;n(15)&&r(r.P+n(100),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(1);r(r.P+r.R,"Map",{toJSON:n(203)("Map")})},function(e,t,n){var r=n(1);r(r.P+r.R,"Set",{toJSON:n(203)("Set")})},function(e,t,n){n(101)("Map")},function(e,t,n){n(101)("Set")},function(e,t,n){n(101)("WeakMap")},function(e,t,n){n(101)("WeakSet")},function(e,t,n){n(102)("Map")},function(e,t,n){n(102)("Set")},function(e,t,n){n(102)("WeakMap")},function(e,t,n){n(102)("WeakSet")},function(e,t,n){var r=n(1);r(r.G,{global:n(6)})},function(e,t,n){var r=n(1);r(r.S,"System",{global:n(6)})},function(e,t,n){var r=n(1),i=n(41);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(1),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(1),i=n(205),o=n(185);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(1),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(1);r(r.S,"Math",{scale:n(205)})},function(e,t,n){var r=n(1);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(1),i=n(39),o=n(6),a=n(96),s=n(192);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(1),i=n(144),o=n(191);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(55),i=n(5),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(55),i=n(5),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var u=s.get(t);return u.delete(n),!!u.size||s.delete(t)}})},function(e,t,n){var r=n(55),i=n(5),o=n(37),a=r.has,s=r.get,u=r.key,c=function(e,t,n){if(a(e,t,n))return s(e,t,n);var r=o(t);return null!==r?c(e,r,n):void 0};r.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(195),i=n(204),o=n(55),a=n(5),s=n(37),u=o.keys,c=o.key,l=function(e,t){var n=u(e,t),o=s(e);if(null===o)return n;var a=l(o,t);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(55),i=n(5),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(55),i=n(5),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(55),i=n(5),o=n(37),a=r.has,s=r.key,u=function(e,t,n){if(a(e,t,n))return!0;var r=o(t);return null!==r&&u(e,r,n)};r.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(55),i=n(5),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(55),i=n(5),o=n(25),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(1),i=n(143)(),o=n(6).process,a="process"==n(41)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(1),i=n(6),o=n(39),a=n(143)(),s=n(10)("observable"),u=n(25),c=n(5),l=n(67),f=n(69),h=n(30),d=n(68),p=d.RETURN,v=function(e){return null==e?void 0:u(e)},m=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,m(e))},_=function(e,t){c(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&m(this)};_.prototype=f({},{unsubscribe:function(){y(this)}});var b=function(e){this._s=e};b.prototype=f({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{m(t)}finally{throw e}}return m(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{m(t)}finally{throw e}}return m(t),e}}});var E=function(e){l(this,E,"Observable","_f")._f=u(e)};f(E.prototype,{subscribe:function(e){return new _(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)((function(n,r){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})}))}}),f(E,{from:function(e){var t="function"==typeof this?this:E,n=v(c(e)[s]);if(n){var r=c(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var n=!1;return a((function(){if(!n){try{if(d(e,!1,(function(e){if(t.next(e),n)return p}))===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:E)((function(e){var t=!1;return a((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),h(E.prototype,s,(function(){return this})),r(r.G,{Observable:E}),n(66)("Observable")},function(e,t,n){var r=n(6),i=n(1),o=n(97),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(1),i=n(142);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(141),i=n(62),o=n(31),a=n(6),s=n(30),u=n(73),c=n(10),l=c("iterator"),f=c("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),v=0;v<p.length;v++){var m,g=p[v],y=d[g],_=a[g],b=_&&_.prototype;if(b&&(b[l]||s(b,l,h),b[f]||s(b,f,g),u[g]=h,y))for(m in r)b[m]||o(b,m,r[m],!0)}},function(e,t,n){(function(t){!function(t){"use strict";function n(e,t,n,o){var a=t&&t.prototype instanceof i?t:i,s=Object.create(a.prototype),u=new h(o||[]);return s._invoke=function(e,t,n){var i=w;return function(o,a){if(i===R)throw new Error("Generator is already running");if(i===A){if("throw"===o)throw a;return p()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===P)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===w)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=R;var l=r(e,t,n);if("normal"===l.type){if(i=n.done?A:O,l.arg===P)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=A,n.method="throw",n.arg=l.arg)}}}(e,n,u),s}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function u(e){function n(t,i,o,a){var s=r(e[t],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&g.call(c,"__await")?Promise.resolve(c.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),a)}a(s.arg)}var i;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function r(){return new Promise((function(r,i){n(e,t,r,i)}))}return i=i?i.then(r,r):r()}}function c(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return P;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,P;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,P):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function d(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:p}}function p(){return{value:v,done:!0}}var v,m=Object.prototype,g=m.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},_=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",E=y.toStringTag||"@@toStringTag",S="object"==typeof e,T=t.regeneratorRuntime;if(T)S&&(e.exports=T);else{(T=t.regeneratorRuntime=S?e.exports:{}).wrap=n;var w="suspendedStart",O="suspendedYield",R="executing",A="completed",P={},x={};x[_]=function(){return this};var C=Object.getPrototypeOf,M=C&&C(C(d([])));M&&M!==m&&g.call(M,_)&&(x=M);var L=a.prototype=i.prototype=Object.create(x);o.prototype=L.constructor=a,a.constructor=o,a[E]=o.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,E in e||(e[E]="GeneratorFunction")),e.prototype=Object.create(L),e},T.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[b]=function(){return this},T.AsyncIterator=u,T.async=function(e,t,r,i){var o=new u(n(e,t,r,i));return T.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},s(L),L[E]="Generator",L[_]=function(){return this},L.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},T.values=d,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:d(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(22))},function(e,t,n){n(505),e.exports=n(39).RegExp.escape},function(e,t,n){var r=n(1),i=n(506)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),i=n(0),o=n(52),a=n(56),s=n(577),u=n(799),c=n(230),l=n(800),f=n(802),h=n(269),d=n(803),p=n(153),v=n(808),m=function(){function e(e,t,n,r,i){this.userAgent=(new a.UAParser).getResult(),p.setDictionary(i),this.parentElement=e,this.apiBaseUrl=t,this.webSocketBaseUrl=n,this.externalLiveFetcher=new d.ExternalLiveFetcher(t,r)}return e.prototype.play=function(e){var t=this,n=null;try{this.showInitializing(),n=v.PlayerSettingsParser.parse(v.PlayerSettingsParser.getSearchParams()),this.externalLiveFetcher.fetch(e).then((function(e){t.isSupportedEnvironment()?null===e.audienceToken&&null===e.webSocketEndpointUrl?t.showUnSupportedError(e,n):t.showExternalPlayerView(e,n):t.showUnSupportedError(e,n)})).catch((function(e){t.showInitializationError(e,n)}))}catch(e){this.showInitializationError(e,n)}},e.prototype.isSupportedEnvironment=function(){return!this.isUnsupportedIE()&&!this.isUnSupportedIOS()&&h.VideoPlayer.isSupportedEnvironment()&&r.isSupportedEnvironment()},e.prototype.isUnsupportedIE=function(){return"IE"===this.userAgent.browser.name&&parseInt(this.userAgent.browser.version.split(":")[0],10)<11},e.prototype.isUnSupportedIOS=function(){return"iOS"===this.userAgent.os.name&&parseInt(this.userAgent.os.version.split(".")[0],10)<6},e.prototype.isNativePlayerDevice=function(){var e=this.userAgent.device.model,t=this.userAgent.os.version,n=parseInt(t.split(".")[0],10);return("iPhone"===e||"iPod"===e)&&n<10},e.prototype.showInitializing=function(){var e=this;window.addEventListener("DOMContentLoaded",(function(){o.render(i.createElement(f.Initializing,null),e.parentElement)}))},e.prototype.showInitializationError=function(e,t){t&&t.linkUrl&&t.bannerUrl?o.render(i.createElement(u.AlternateGate,{bannerUrl:t.bannerUrl,linkUrl:t.linkUrl,openInNewWindow:t.openInNewWindow,noUI:t.noUI}),this.parentElement):o.render(i.createElement(l.InitializationError,{error:e}),this.parentElement)},e.prototype.showUnSupportedError=function(e,t){o.render(i.createElement(c.Gate,{bannerUrl:t.bannerUrl||e.bannerUrl,beginTime:e.beginTime,endTime:e.endTime,statusVisible:t.gateStatusVisible,linkUrl:t.linkUrl||e.linkUrl,niconicoLinkVisible:t.niconicoLinkVisible,openInNewWindow:t.openInNewWindow,title:e.programTitle,type:c.GateType.UnSupportedError,noUI:t.noUI}),this.parentElement)},e.prototype.showExternalPlayerView=function(e,t){o.render(i.createElement(s.ExternalPlayerView,{apiBaseUrl:this.apiBaseUrl,externalLive:e,isNativePlayerDevice:this.isNativePlayerDevice(),playerSettings:t,webSocketEndpointUrl:this.getWebSocketEndpointUrl(e)}),this.parentElement)},e.prototype.getWebSocketEndpointUrl=function(e){return e.webSocketEndpointUrl?e.webSocketEndpointUrl:""+this.webSocketBaseUrl+e.broadcastId+"?audience_token="+e.audienceToken},e}(),g=window;g.Nicolive=g.Nicolive||{},g.Nicolive.ExternalPlayer=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(509),i=function(e){this.config=e,this.webSocketApiClient=new r.ReliveWebSocketApiClient(this.config.webSocketUrl,this.config.frontendId)};t.NicolivePlayerExternalInterface=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(510),i=function(){function e(e,t){this.webSocketBaseUrl=e,this.frontendId=t}return e.prototype.create=function(){return new r.ReliveWebSocketApiSessionImpl(this.webSocketBaseUrl,this.frontendId)},e}();t.ReliveWebSocketApiClient=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(206),i=n(511),o=n(512),a=function(){function e(e,t){this.baseUrl=e,this.frontendId=t,this.eventEmitter=new r,this.isConnecting=!1}return e.prototype.on=function(e,t,n){return this.eventEmitter.on(e,t,n),this},e.prototype.off=function(e,t,n){return this.eventEmitter.off(e,t,n),this},e.prototype.open=function(){var e=this;return new Promise((function(t,n){if(e.isConnecting)n(new Error("already websocket is opened."));else{var r=e.baseUrl+"&frontend_id="+e.frontendId;e.webSocket=e.createWebSocket(r),e.webSocket.onopen=function(){e.isConnecting=!0,t(e)},e.webSocket.onclose=function(){return e.eventEmitter.emit("close")},e.webSocket.onerror=function(){e.eventEmitter.emit("internal_error"),e.isConnecting||n(new Error("websocket connection to failed."))},e.webSocket.onmessage=e.onMessage.bind(e)}}))},e.prototype.send=function(e){if(null===this.webSocket)throw new Error("no WebSocket");if(!this.isConnecting)throw new Error("not conneted WebSocket");this.webSocket.send(JSON.stringify(e))},e.prototype.close=function(){var e=this;this.isConnecting=!1,this.webSocket&&(this.webSocket.onclose=function(){null!==e.webSocket&&(e.webSocket.onopen=function(){return null},e.webSocket.onclose=function(){return null},e.webSocket.onerror=function(){return null},e.webSocket.onmessage=function(){return null},e.eventEmitter.emit("close"))},this.webSocket.close())},e.prototype.createWebSocket=function(e){return new WebSocket(e)},e.prototype.onMessage=function(e){var t=JSON.parse(e.data);o.isPing(t)?this.sendWebSocketHeartbeat():i.isErrorMessage(t)?this.eventEmitter.emit("error_message",t):this.eventEmitter.emit(t.type,t)},e.prototype.sendWebSocketHeartbeat=function(){this.send(e.PONG)},e.PONG={type:"pong"},e}();t.ReliveWebSocketApiSessionImpl=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorMessage=function(e){return"error"===e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPing=function(e){return"ping"===e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i=n(209),o=n(514),a=n(210),s=n(531),u=function(e,t){this.externalInterface=e,this.reliveServerClient=new s.ReliveServerClientImpl(this.externalInterface.webSocketApiClient);var n=new r.Program(t.programTitle,t.openTimeMs,t.beginTimeMs,t.endTimeMs,t.vposBaseTimeMs,null,null),u=new i.AudienceToken(t.audienceToken),c=new o.ServerTime(t.serverTimeMs);this.usecase=new a.NicolivePlayerUsecase(this.reliveServerClient,n,u,c)};t.NicolivePlayerInterfaceAdapter=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.sync(e)}return e.prototype.sync=function(e){this.syncedAt=this.getClientCurrentTimeMs(),this.latestServerTimeMs=e},e.prototype.getCurrentTimeMs=function(){return this.latestServerTimeMs+this.getClientCurrentTimeMs()-this.syncedAt},e.prototype.getClientCurrentTimeMs=function(){return Date.now()},e}();t.ServerTime=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.get=function(e){var t,n=this;return this.isDisposed(this.reliveServerSession)?Promise.reject(new Error("AkashicRequester is already disposed")):new Promise((function(r,i){var o=function(e){return r(e)};if(n.addToRequestCanceller(i),t=function(){n.isDisposed(n.reliveServerSession)||n.reliveServerSession.off("akashic",o)},n.isDisposed(n.reliveServerSession))throw Promise.reject(new Error("already disposed"));n.reliveServerSession.on("akashic",o),n.reliveServerSession.requestAkashic(e)})).then((function(e){return t(),e}),(function(e){return t(),Promise.reject(e)}))},t}(n(26).ReliveServerSender);t.AkashicRequester=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(26),s=n(50),u=n(43),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestAsNewAudience=function(e){return t.request(o({},e,{asNewAudience:!0}))},t.requestAsSameAudience=function(e){return t.request(o({},e,{asNewAudience:!1}))},t}return i(t,e),t.prototype.request=function(e){var t,n=this;return this.isDisposed(this.reliveServerSession)?Promise.reject(new Error("already disposed")):new Promise((function(r,i){var o=function(){return r()},a=function(e){return i(e)};if(n.addToRequestCanceller((function(){return i(new s.AudiencePermissionDeniedEvent(u.AudiencePermissionDeniedReason.Aborted))})),t=function(){n.isDisposed(n.reliveServerSession)||(n.reliveServerSession.off("edge_stream_updated",o),n.reliveServerSession.off("no_permission",a),n.reliveServerSession.off("crowded",a),n.reliveServerSession.off("service_temporarily_unavailable",a),n.reliveServerSession.off("maintenance_in",a),n.reliveServerSession.off("timeshift_permission_expired",a))},n.isDisposed(n.reliveServerSession))return Promise.reject(new Error("already disposed"));n.reliveServerSession.on("edge_stream_updated",o),n.reliveServerSession.on("no_permission",a),n.reliveServerSession.on("crowded",a),n.reliveServerSession.on("service_temporarily_unavailable",a),n.reliveServerSession.on("maintenance_in",a),n.reliveServerSession.on("timeshift_permission_expired",a),n.reliveServerSession.sendAudiencePermissionRequest(e)})).then((function(){t()}),(function(e){return t(),Promise.reject(e)}))},t}(a.ReliveServerSender);t.AudiencePermissionRequester=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){var r=e.call(this,n)||this;return r.timerId=NaN,r.intervalMs=t.DEFAULT_INTERVAL_MS,r}return i(t,e),t.prototype.start=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.on("heartbeat_interval",this.onHeartbeatInterval,this),this.reset()},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||(this.reliveServerSession.off("heartbeat_interval",this.onHeartbeatInterval,this),this.stopTimer(),this.intervalMs=t.DEFAULT_INTERVAL_MS)},t.prototype.sendHeartbeat=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.isConnected?this.reliveServerSession.sendHeartbeat():this.stop()},t.prototype.reset=function(){this.stopTimer(),this.timerId=window.setInterval(this.sendHeartbeat.bind(this),this.intervalMs)},t.prototype.stopTimer=function(){clearInterval(this.timerId),this.timerId=NaN},t.prototype.onHeartbeatInterval=function(e){this.intervalMs!==e.intervalMs&&(this.intervalMs=e.intervalMs,this.reset())},t.DEFAULT_INTERVAL_MS=3e3,t}(n(26).ReliveServerReceiver);t.BroadcastHeartbeatSender=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.postComment=function(e){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.postComment(e)},t}(n(26).ReliveServerSender);t.PostCommentSender=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.answerEnquete=function(e){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.answerEnquete(e)},t}(n(26).ReliveServerSender);t.EnqueteAnswerSender=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.get=function(){var e,t=this;return this.isDisposed(this.reliveServerSession)?Promise.reject(new Error("PostkeyRequester is already disposed")):new Promise((function(n,r){var i=function(e){return n(e)};if(t.addToRequestCanceller(r),e=function(){t.isDisposed(t.reliveServerSession)||t.reliveServerSession.off("postkey",i)},t.isDisposed(t.reliveServerSession))return Promise.reject(new Error("PostkeyRequester is already disposed"));t.reliveServerSession.on("postkey",i),t.reliveServerSession.getPostkey()})).then((function(t){return e(),t}),(function(t){return e(),Promise.reject(t)}))},t}(n(26).ReliveServerSender);t.PostkeyRequester=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.serverTime=n,r}return i(t,e),t.prototype.start=function(e){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");return this.reliveServerSession.on("statistics_updated",this.updateStatistics,this),this.reliveServerSession.on("schedule_updated",this.updateSchedule,this),this.reliveServerSession.on("program_ended",this.endProgram,this),this.program=e,this.program},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||(this.reliveServerSession.off("statistics_updated",this.updateStatistics,this),this.reliveServerSession.off("schedule_updated",this.updateSchedule,this),this.reliveServerSession.off("program_ended",this.endProgram,this),this.program=null)},t.prototype.updateStatistics=function(e){if(null===this.program)throw new Error("no program");this.program=this.program.copy({watchCount:e.watchCount,commentCount:e.commentCount,adPoint:e.adPoints,giftPoint:e.giftPoints}),this.dispatch("update",this.program)},t.prototype.updateSchedule=function(e){if(null===this.program)throw new Error("no program");this.program=this.program.copy({beginTimeMs:e.beginTimeMs,endTimeMs:e.endTimeMs}),this.dispatch("update",this.program)},t.prototype.endProgram=function(e){if(null===this.program)throw new Error("no program");this.program=this.program.copy({endTimeMs:this.serverTime.getCurrentTimeMs()}),this.dispatch("update",this.program),this.dispatch("end",this.program)},t}(n(26).ReliveServerReceiver);t.ProgramUpdater=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INVALID_MESSAGE="INVALID_MESSAGE",e.CONNECT_ERROR="CONNECT_ERROR",e.BROADCAST_NOT_FOUND="BROADCAST_NOT_FOUND",e.INTERNAL_SERVERERROR="INTERNAL_SERVERERROR",e.INVALID_STREAM_QUALITY="INVALID_STREAM_QUALITY",e.NO_THREAD_AVAILABLE="NO_THREAD_AVAILABLE",e.NO_ROOM_AVAILABLE="NO_ROOM_AVAILABLE",e.NO_PERMISSION="NO_PERMISSION",e.NOT_ON_AIR="NOT_ON_AIR",e.COMMENT_LOCKED="COMMENT_LOCKED",e.NO_STREAM_AVAILABLE="NO_STREAM_AVAILABLE",e.CONTENT_NOT_READY="CONTENT_NOT_READY",e.COMMENT_POST_FAILURE="COMMENT_POST_FAILURE",e.COMMENT_POST_CONTINUOUS="COMMENT_POST_CONTINUOUS",e.COMMENT_POST_BAN="COMMENT_POST_BAN"}(t.ErrorCode||(t.ErrorCode={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitTimerId=NaN,t}return i(t,e),t.prototype.start=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.on("reconnect_request",this.onReconnectRequest,this)},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||(this.reliveServerSession.off("reconnect_request",this.onReconnectRequest,this),this.stopWaiting())},t.prototype.onReconnectRequest=function(e){this.stopWaiting(),this.startWaiting(e.waitTime,e)},t.prototype.startWaiting=function(e,t){var n=this;this.waitTimerId=window.setTimeout((function(){return n.dispatchReconnectEvent(t)}),e)},t.prototype.stopWaiting=function(){clearTimeout(this.waitTimerId),this.waitTimerId=NaN},t.prototype.dispatchReconnectEvent=function(e){this.dispatch("requested",e)},t}(n(26).ReliveServerReceiver);t.ServerReconnector=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.on("available_rooms_updated",this.updateRooms,this)},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||this.reliveServerSession.off("available_rooms_updated",this.updateRooms,this)},t.prototype.updateRooms=function(e){this.dispatch("update",e)},t}(n(26).ReliveServerReceiver);t.AvailableRoomsUpdater=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.change=function(e,t){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.changeRoom(e,t)},t}(n(26).ReliveServerSender);t.RoomChanger=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("room is already disposed");this.reliveServerSession.on("room_updated",this.updateRoom,this)},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||this.reliveServerSession.off("room_updated",this.updateRoom,this)},t.prototype.updateRoom=function(e){this.currentRoom=e,this.dispatch("update",this.currentRoom)},t}(n(26).ReliveServerReceiver);t.RoomUpdater=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.changeStream=function(e){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.changeStream(e)},t}(n(26).ReliveServerSender);t.ChangeStreamSender=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("edge stream is already disposed");this.reliveServerSession.on("edge_stream_updated",this.updateStream,this)},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||this.reliveServerSession.off("edge_stream_updated",this.updateStream,this)},t.prototype.updateStream=function(e){this.currentEdgeStream=e.edgeStream,this.dispatch("update",this.currentEdgeStream)},t}(n(26).ReliveServerReceiver);t.EdgeStreamUpdater=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getStream=function(){if(this.isDisposed(this.reliveServerSession))throw new Error("already disposed");this.reliveServerSession.getStream()},t}(n(26).ReliveServerSender);t.StreamRequester=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(e){if(this.isDisposed(this.reliveServerSession))throw new Error("already diposed");return this.reliveServerSession.on("server_time_sync",this.sync,this),this.serverTime=e,this.serverTime},t.prototype.stop=function(){this.isDisposed(this.reliveServerSession)||this.reliveServerSession.off("server_time_sync",this.sync,this)},t.prototype.sync=function(e){this.serverTime.sync(e.severTime)},t}(n(26).ReliveServerReceiver);t.ServerTimeSynchronizer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(532),i=function(){function e(e){this.webSocketApiClient=e}return e.prototype.createSession=function(){var e=this.webSocketApiClient.create(),t=new r.ReliveServerSessionImpl(e);return e.open().then((function(){return t}))},e}();t.ReliveServerClientImpl=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(146),u=n(212),c=n(533),l=n(534),f=n(535),h=n(536),d=n(537),p=n(538),v=n(539),m=n(540),g=n(541),y=n(542),_=n(543),b=n(544),E=n(545),S=n(546),T=n(547),w=n(548),O=n(549),R=n(550),A=n(551),P=n(552),x=n(554),C=n(555),M=n(556),L=n(558),k=n(560),I=n(562),D=n(563),N=n(219),F=n(564),U=n(566),j=n(567),B=n(147),G=n(569),H=function(e){function t(t){var n=e.call(this)||this;return n.webSocketSession=t,n.isConnected=!1,n.heartbeatEncoder=new A.HeartbeatEncoder,n.audiencePermissionRequestEncoder=new f.AudiencePermissionRequestEncoder,n.isConnected=!0,t.on("internal_error",n.onError,n),t.on("close",n.onClosed,n),t.on("statistics",n.toServerEvent("statistics_updated",new F.StatisticsUpdatedEventDecoder)),t.on("schedule",n.toServerEvent("schedule_updated",new L.ScheduleUpdatedEventDecoder)),t.on("serverTime",n.toServerEvent("server_time_sync",new G.ServerTimeNotifiedEventDecoder)),t.on("seat",n.toServerEvent("heartbeat_interval",new P.HeartbeatIntervalNotifiedEventDecoder)),t.on("stream",n.toServerEvent("edge_stream_updated",new j.EdgeStreamUpdatedEventDecoder)),t.on("room",n.toServerEvent("room_updated",new N.RoomUpdatedEventDecoder)),t.on("rooms",n.toServerEvent("available_rooms_updated",new I.AvailableRoomsUpdatedEventDecoder)),t.on("reconnect",n.toServerEvent("reconnect_request",new k.ReconnectRequestDecoder)),t.on("postkey",n.toServerEvent("postkey",new C.PostkeyCommandDecoder)),t.on("akashic",n.toServerEvent("akashic",new c.AkashicCommandDecoder)),t.on("postCommentResult",n.toServerEvent("post_comment_result",new T.PostCommentResultCommandDecoder)),t.on("error_message",n.toServerEvent("error_message",new R.ErrorMessageDecoder)),t.on("disconnect",n.toDisconnectableServerEvent([{eventId:"program_ended",decoder:new M.ProgramEndedEventDecoder},{eventId:"seat_was_taken_over",decoder:new E.SeatWasTakenOverEventDecoder},{eventId:"ping_timeout",decoder:new O.PingTimeoutErrorDecoder},{eventId:"no_permission",decoder:new p.NoPermissionErrorDecoder},{eventId:"crowded",decoder:new h.CrowdedErrorDecoder},{eventId:"service_temporarily_unavailable",decoder:new v.ServiceTemporarilyUnavailableErrorDecoder},{eventId:"too_many_watchings",decoder:new _.TooManyWatchingsErrorDecoder},{eventId:"too_many_connections",decoder:new y.TooManyConnectionsErrorDecoder},{eventId:"temporarily_crowded",decoder:new m.TemporarilyCrowdedErrorDecoder},{eventId:"user_banned",decoder:new b.UserBannedErrorDecoder},{eventId:"maintenance_in",decoder:new d.MaintenanceErrorDecoder},{eventId:"timeshift_permission_expired",decoder:new g.TimeshiftPermissionExpiredErrorDecoder}])),n}return i(t,e),t.prototype.sendAudiencePermissionRequest=function(e){this.webSocketSession.send(this.audiencePermissionRequestEncoder.encode(e))},t.prototype.sendHeartbeat=function(){this.webSocketSession.send(this.heartbeatEncoder.encode())},t.prototype.getPostkey=function(){this.webSocketSession.send(x.createGetPostkeyCommand())},t.prototype.changeRoom=function(e,t){try{this.webSocketSession.send(D.createChangeRoomCommand(e,t))}catch(e){}},t.prototype.answerEnquete=function(e){this.webSocketSession.send(w.createAnswerEnqueteCommand(e))},t.prototype.changeStream=function(e){this.webSocketSession.send(U.createChangeStreamCommand(e))},t.prototype.getStream=function(){this.webSocketSession.send(B.createGetStreamCommandCreator())},t.prototype.requestAkashic=function(e){this.webSocketSession.send(l.createGetAkashicCommandCreator(e))},t.prototype.postComment=function(e){this.webSocketSession.send(S.createPostCommentCommand(e))},t.prototype.disconnect=function(){var e=this;return this.isConnected?(this.isConnected=!1,this.offAll(),new Promise((function(t){e.webSocketSession.on("close",(function(){return t()})),e.webSocketSession.close()})).then((function(){e.dispose()}))):Promise.resolve(void 0)},t.prototype.toServerEvent=function(e,t){var n=this;return function(r){var i=t.decode(r);i&&n.dispatch(e,i)}},t.prototype.toDisconnectableServerEvent=function(e){var t=this;return function(n){return o(t,void 0,void 0,(function(){var t=this;return a(this,(function(r){switch(r.label){case 0:return e.forEach((function(e){return t.toServerEvent(e.eventId,e.decoder)(n)})),[4,this.disconnect()];case 1:return r.sent(),[2]}}))}))}},t.prototype.dispose=function(){this.offAll()},t.prototype.onError=function(){this.webSocketSession.close()},t.prototype.onClosed=function(){this.isConnected&&(this.isConnected=!1,this.dispatch("connection_error",new u.ConnectionError),this.dispose())},t}(s.EventDispatcher);t.ReliveServerSessionImpl=H},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(213),i=function(){function e(){}return e.prototype.decode=function(e){var t=e.data;return"ready"===t.status?new r.Akashic({playId:t.playId,playToken:t.token,playlogServerUrl:t.logServerUrl,playerId:t.playerId,contentUrl:t.contentUrl}):new r.Akashic},e}();t.AkashicCommandDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGetAkashicCommandCreator=function(e){return{type:"getAkashic",data:{chasePlay:!!e&&e.isChasePlay}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(214),i=n(147),o=n(148),a=function(){function e(){}return e.prototype.encode=function(e){var t={type:"startWatching",data:{stream:{quality:o.toWsStreamQuality(e.priorStreamQuality),protocol:i.streamProtocolToString(e.watchableStreamProtocol),latency:e.useLowLatencyStream?"low":"high"},room:{protocol:r.MessageServerProtocol.WebSocket,commentable:e.isCommentableClient},reconnect:!e.asNewAudience}};return void 0!==e.isChasePlay&&(t.data.stream.chasePlay=e.isChasePlay),void 0!==e.dwc&&(t.data.dwc=e.dwc),t},e}();t.AudiencePermissionRequestEncoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.CROWDED?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.Crowded):null},e}();t.CrowdedErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.MAINTENANCE_IN?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.MaintenanceIn):null},e}();t.MaintenanceErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.NO_PERMISSION?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.NoPermission):null},e}();t.NoPermissionErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.SERVICE_TEMPORARILY_UNAVAILABLE?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.ServiceTemporarilyUnavailable):null},e}();t.ServiceTemporarilyUnavailableErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.TEMPORARILY_CROWDED?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.TemporarilyCrowded):null},e}();t.TemporarilyCrowdedErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.TIMESHIFT_PERMISSION_EXPIRED?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.TimeshiftPermissionExpired):null},e}();t.TimeshiftPermissionExpiredErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.TOO_MANY_CONNECTIONS?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.TooManyConnections):null},e}();t.TooManyConnectionsErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.TOO_MANY_WATCHINGS?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.TooManyWatchings):null},e}();t.TooManyWatchingsErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50),i=n(43),o=n(27),a=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===o.DisconnectReason.USER_BANNED?new r.AudiencePermissionDeniedEvent(i.AudiencePermissionDeniedReason.UserBanned):null},e}();t.UserBannedErrorDecoder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(217),i=n(27),o=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===i.DisconnectReason.TAKEOVER?new r.SeatWasTakenOverEvent:null},e}();t.SeatWasTakenOverEventDecoder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPostCommentCommand=function(e){var t={type:"postComment",data:{text:e.text,vpos:Math.round(e.vposMs/10)}};return e.isAnonymous&&(t.data.isAnonymous=e.isAnonymous),e.color&&(t.data.color=e.color),e.size&&(t.data.size=e.size),e.position&&(t.data.position=e.position),t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.decode=function(e){return r({},e.data.chat)},e}();t.PostCommentResultCommandDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnswerEnqueteCommand=function(e){return{type:"answerEnquete",data:{answer:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(212),i=n(27),o=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===i.DisconnectReason.PING_TIMEOUT?new r.ConnectionError:null},e}();t.PingTimeoutErrorDecoder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.decode=function(e){return e.data.code},e}();t.ErrorMessageDecoder=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.encode=function(){return{type:"keepSeat"}},e}();t.HeartbeatEncoder=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(553),i=function(){function e(){}return e.prototype.decode=function(e){var t=1e3*e.data.keepIntervalSec;return new r.HeartbeatIntervalNotifiedEvent(t)},e}();t.HeartbeatIntervalNotifiedEventDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.intervalMs=e};t.HeartbeatIntervalNotifiedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGetPostkeyCommand=function(){return{type:"getPostkey"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),i=function(){function e(){}return e.prototype.decode=function(e){var t=(new Date(e.data.expireAt).getTime()-(new Date).getTime())/1e3;return new r.Postkey(e.data.value,e.data.mode||null,t)},e}();t.PostkeyCommandDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(557),i=n(27),o=function(){function e(){}return e.prototype.decode=function(e){return e.data.reason===i.DisconnectReason.END_PROGRAM?new r.ProgramEndedEvent:null},e}();t.ProgramEndedEventDecoder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.ProgramEndedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(559),i=function(){function e(){}return e.prototype.decode=function(e){var t=new Date(e.data.begin).getTime(),n=new Date(e.data.end).getTime();return new r.ScheduleUpdatedEvent(t,n)},e}();t.ScheduleUpdatedEventDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.beginTimeMs=e,this.endTimeMs=t};t.ScheduleUpdatedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(209),i=n(561),o=function(){function e(){}return Object.defineProperty(e.prototype,"MIN_DELAY_MS",{get:function(){return 3e3},enumerable:!0,configurable:!0}),e.prototype.decode=function(e){var t=new r.AudienceToken(e.data.audienceToken),n=Math.max(this.MIN_DELAY_MS,1e3*e.data.waitTimeSec+1e3*Math.random());return new i.ReconnectRequest(t,n)},e}();t.ReconnectRequestDecoder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.audienceToken=e,this.waitTime=t};t.ReconnectRequest=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=function(){function e(){this.roomDecoder=new r.RoomUpdatedEventDecoder}return e.prototype.decode=function(e){var t=this;return e.data.rooms.map((function(e,n){return t.roomDecoder.commandToRoom(e,n)})).filter((function(e){return null!==e}))},e}();t.AvailableRoomsUpdatedEventDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(222),i=n(214);t.createChangeRoomCommand=function(e,t){if(null===e.id)throw new Error("room id is null");return{type:"changeRoom",data:{roomId:e.id,protocol:o(t)}}};var o=function(e){switch(e){case r.RoomProtocol.WebSocket:return i.MessageServerProtocol.WebSocket;case r.RoomProtocol.XmlSocket:return i.MessageServerProtocol.XmlSocket;default:return}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(565),i=function(e){return void 0===e?null:e},o=function(){function e(){}return e.prototype.decode=function(e){var t=i(e.data.viewers),n=i(e.data.comments),o=i(e.data.adPoints),a=i(e.data.giftPoints);return new r.StatisticsUpdatedEvent(t,n,o,a)},e}();t.StatisticsUpdatedEventDecoder=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){this.watchCount=e,this.commentCount=t,this.adPoints=n,this.giftPoints=r};t.StatisticsUpdatedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(147),i=n(148);t.createChangeStreamCommand=function(e){var t={type:"changeStream",data:{quality:i.toWsStreamQuality(e.priorStreamQuality),protocol:r.streamProtocolToString(e.watchableStreamProtocol),latency:e.useLowLatencyStream?"low":"high"}};return void 0!==e.isChasePlay&&(t.data.chasePlay=e.isChasePlay),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(223),i=n(568),o=n(149),a=n(150),s=n(151),u=n(224),c=n(225),l=n(226),f=n(27),h=n(148),d=function(){function e(){}return e.prototype.decode=function(e){var t=this.generateProtocol(e);if(!t)return null;var n=this.generateResource(e);return n?new i.EdgeStreamUpdatedEvent(new r.EdgeStream(t,n,h.toStreamQuality(e.data.quality),this.toAvailableQuality(e.data.availableQualities))):null},e.prototype.toAvailableQuality=function(e){return e?e.map(h.toStreamQuality):[]},e.prototype.generateProtocol=function(e){try{switch(e.data.protocol){case f.StreamingProtocol.Hls:return new o.DmcHls(e.data.uri);case f.StreamingProtocol.Rtmp:return new a.DmcRtmp;case f.StreamingProtocol.Webrtc:return new s.DmcWebRtc;default:return null}}catch(e){return null}},e.prototype.generateResource=function(e){switch(e.data.protocol){case f.StreamingProtocol.Hls:return new u.Hls(e.data.uri);case f.StreamingProtocol.Rtmp:return new c.Rtmp(e.data.uri,e.data.name||"");case f.StreamingProtocol.Webrtc:return new l.WebRtc(e.data.uri);default:return null}},e}();t.EdgeStreamUpdatedEventDecoder=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.edgeStream=e};t.EdgeStreamUpdatedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(570),i=function(){function e(){}return e.prototype.decode=function(e){var t=new Date(e.data.currentMs).getTime();return new r.ServerTimeNotifiedEvent(t)},e}();t.ServerTimeNotifiedEventDecoder=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.severTime=e};t.ServerTimeNotifiedEvent=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.baseUrl=e,this.threadId=t,this.forks=n,this.importedForks=r}return Object.defineProperty(e.prototype,"allForks",{get:function(){return this.forks.concat(this.importedForks)},enumerable:!0,configurable:!0}),e}();t.Shimesaba=r},function(e,t,n){"use strict";e.exports=n(573)},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e,t,n){this.props=e,this.context=t,this.refs=L,this.updater=n||M}function o(){}function a(e,t,n){this.props=e,this.context=t,this.refs=L,this.updater=n||M}function s(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)D.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:_,type:e,key:o,ref:a,props:i,_owner:I.current}}function u(e){return"object"==typeof e&&null!==e&&e.$$typeof===_}function c(e,t,n,r){if(U.length){var i=U.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function l(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>U.length&&U.push(e)}function f(e,t,n){return null==e?0:function e(t,n,i,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var s=!1;if(null===t)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case _:case b:s=!0}}if(s)return i(o,t,""===n?"."+h(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+h(a=t[u],u);s+=e(a,c,i,o)}else if(null===t||"object"!=typeof t?c=null:c="function"==typeof(c=C&&t[C]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)s+=e(a=a.value,c=n+h(a,u++),i,o);else if("object"===a)throw i=""+t,Error(r(31,"[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return s}(e,"",t,n)}function h(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function d(e,t){e.func.call(e.context,t,e.count++)}function p(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?v(e,r,n,(function(e){return e})):null!=e&&(u(e)&&(e=function(e,t){return{$$typeof:_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(F,"$&/")+"/")+n)),r.push(e))}function v(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(F,"$&/")+"/"),f(e,p,t=c(t,o,r,i)),l(t)}function m(){var e=j.current;if(null===e)throw Error(r(321));return e}var g=n(105),y="function"==typeof Symbol&&Symbol.for,_=y?Symbol.for("react.element"):60103,b=y?Symbol.for("react.portal"):60106,E=y?Symbol.for("react.fragment"):60107,S=y?Symbol.for("react.strict_mode"):60108,T=y?Symbol.for("react.profiler"):60114,w=y?Symbol.for("react.provider"):60109,O=y?Symbol.for("react.context"):60110,R=y?Symbol.for("react.forward_ref"):60112,A=y?Symbol.for("react.suspense"):60113,P=y?Symbol.for("react.memo"):60115,x=y?Symbol.for("react.lazy"):60116,C="function"==typeof Symbol&&Symbol.iterator,M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L={};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(r(85));this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=i.prototype;var k=a.prototype=new o;k.constructor=a,g(k,i.prototype),k.isPureReactComponent=!0;var I={current:null},D=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},F=/\/+/g,U=[],j={current:null},B={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:g};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return v(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;f(e,d,t=c(null,null,t,n)),l(t)},count:function(e){return f(e,(function(){return null}),null)},toArray:function(e){var t=[];return v(e,t,null,(function(e){return e})),t},only:function(e){if(!u(e))throw Error(r(143));return e}},t.Component=i,t.Fragment=E,t.Profiler=T,t.PureComponent=a,t.StrictMode=S,t.Suspense=A,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null==e)throw Error(r(267,e));var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=I.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)D.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:_,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:O,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:w,_context:e},e.Consumer=e},t.createElement=s,t.createFactory=function(e){var t=s.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:R,render:e}},t.isValidElement=u,t.lazy=function(e){return{$$typeof:x,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:P,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return m().useCallback(e,t)},t.useContext=function(e,t){return m().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return m().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return m().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return m().useLayoutEffect(e,t)},t.useMemo=function(e,t){return m().useMemo(e,t)},t.useReducer=function(e,t,n){return m().useReducer(e,t,n)},t.useRef=function(e){return m().useRef(e)},t.useState=function(e){return m().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function o(e,t,n,r,o,a,s,u,c){_i=!1,bi=null,i.apply(Ti,arguments)}function a(e,t,n){var i=e.type||"unknown-event";e.currentTarget=Ri(n),function(e,t,n,i,a,s,u,c,l){if(o.apply(this,arguments),_i){if(!_i)throw Error(r(198));var f=bi;_i=!1,bi=null,Ei||(Ei=!0,Si=f)}}(i,t,void 0,e),e.currentTarget=null}function s(){if(Ai)for(var e in Pi){var t=Pi[e],n=Ai.indexOf(e);if(!(-1<n))throw Error(r(96,e));if(!xi[n]){if(!t.extractEvents)throw Error(r(97,e));for(var i in xi[n]=t,n=t.eventTypes){var o=void 0,a=n[i],s=t,c=i;if(Ci.hasOwnProperty(c))throw Error(r(99,c));Ci[c]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&u(l[o],s,c);o=!0}else a.registrationName?(u(a.registrationName,s,c),o=!0):o=!1;if(!o)throw Error(r(98,i,e))}}}}function u(e,t,n){if(Mi[e])throw Error(r(100,e));Mi[e]=t,Li[e]=t.eventTypes[n].dependencies}function c(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!Pi.hasOwnProperty(t)||Pi[t]!==i){if(Pi[t])throw Error(r(102,t));Pi[t]=i,n=!0}}n&&s()}function l(e){if(e=Oi(e)){if("function"!=typeof Ii)throw Error(r(280));var t=e.stateNode;t&&(t=wi(t),Ii(e.stateNode,e.type,t))}}function f(e){Di?Ni?Ni.push(e):Ni=[e]:Di=e}function h(){if(Di){var e=Di,t=Ni;if(Ni=Di=null,l(e),t)for(e=0;e<t.length;e++)l(t[e])}}function d(e,t){return e(t)}function p(e,t,n,r,i){return e(t,n,r,i)}function v(){}function m(){null===Di&&null===Ni||(v(),h())}function g(e,t,n){if(ji)return e(t,n);ji=!0;try{return Fi(e,t,n)}finally{ji=!1,m()}}function y(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=zi.hasOwnProperty(t)?zi[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Gi.call(Vi,e)||!Gi.call(Hi,e)&&(Bi.test(e)?Vi[e]=!0:(Hi[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function E(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=lo&&e[lo]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Qi:return"Fragment";case Ji:return"Portal";case eo:return"Profiler";case Zi:return"StrictMode";case oo:return"Suspense";case ao:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case no:return"Context.Consumer";case to:return"Context.Provider";case io:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case so:return S(e.type);case co:return S(e.render);case uo:if(e=1===e._status?e._result:null)return S(e)}return null}function T(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=S(e.type);n=null,r&&(n=S(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ki,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function w(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function O(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function R(e){e._valueTracker||(e._valueTracker=function(e){var t=O(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function A(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=O(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function P(e,t){var n=t.checked;return gi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function x(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=w(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function C(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function M(e,t){C(e,t);var n=w(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?k(e,t.type,n):t.hasOwnProperty("defaultValue")&&k(e,t.type,w(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function L(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function k(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function I(e,t){return e=gi({children:void 0},t),(t=function(e){var t="";return mi.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function D(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+w(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function N(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return gi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function F(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:w(n)}}function U(e,t){var n=w(t.value),r=w(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function j(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function B(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?B(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function H(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function V(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function z(e){if(mo[e])return mo[e];if(!vo[e])return e;var t,n=vo[e];for(t in n)if(n.hasOwnProperty(t)&&t in go)return mo[e]=n[t];return e}function W(e){var t=Ro.get(e);return void 0===t&&(t=new Map,Ro.set(e,t)),t}function Y(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function q(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function K(e){if(Y(e)!==e)throw Error(r(188))}function X(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Y(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(i=o.return)){n=i;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return K(o),e;if(a===i)return K(o),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=o,i=a;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}if(!s)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $(e,t){if(null==t)throw Error(r(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function J(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function Q(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)a(e,t[r],n[r]);else t&&a(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Z(e){if(null!==e&&(Ao=$(Ao,e)),e=Ao,Ao=null,e){if(J(e,Q),Ao)throw Error(r(95));if(Ei)throw e=Si,Ei=!1,Si=null,e}}function ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function te(e){if(!ki)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function ne(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Po.length&&Po.push(e)}function re(e,t,n,r){if(Po.length){var i=Po.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ie(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Fe(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ee(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<xi.length;u++){var c=xi[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=$(s,c))}Z(s)}}function oe(e,t,n){if(!n.has(e)){switch(e){case"scroll":ge(t,"scroll",!0);break;case"focus":case"blur":ge(t,"focus",!0),ge(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":te(e)&&ge(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Oo.indexOf(e)&&me(e,t)}n.set(e,null)}}function ae(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function se(e,t){switch(e){case"focus":case"blur":Mo=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Io.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(t.pointerId)}}function ue(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ae(t,n,r,i,o),null!==t&&(null!==(t=Ue(t))&&_o(t)),e):(e.eventSystemFlags|=r,e)}function ce(e){var t=Fe(e.target);if(null!==t){var n=Y(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=q(n)))return e.blockedOn=t,void yi.unstable_runWithPriority(e.priority,(function(){bo(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function le(e){if(null!==e.blockedOn)return!1;var t=Ee(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Ue(t);return null!==n&&_o(n),e.blockedOn=t,!1}return!0}function fe(e,t,n){le(e)&&n.delete(t)}function he(){for(xo=!1;0<Co.length;){var e=Co[0];if(null!==e.blockedOn){null!==(e=Ue(e.blockedOn))&&yo(e);break}var t=Ee(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:Co.shift()}null!==Mo&&le(Mo)&&(Mo=null),null!==Lo&&le(Lo)&&(Lo=null),null!==ko&&le(ko)&&(ko=null),Io.forEach(fe),Do.forEach(fe)}function de(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,he)))}function pe(e){function t(t){return de(t,e)}if(0<Co.length){de(Co[0],e);for(var n=1;n<Co.length;n++){var r=Co[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mo&&de(Mo,e),null!==Lo&&de(Lo,e),null!==ko&&de(ko,e),Io.forEach(t),Do.forEach(t),n=0;n<No.length;n++)(r=No[n]).blockedOn===e&&(r.blockedOn=null);for(;0<No.length&&null===(n=No[0]).blockedOn;)ce(n),null===n.blockedOn&&No.shift()}function ve(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Go.set(r,t),Bo.set(r,o),jo[i]=o}}function me(e,t){ge(t,e,!1)}function ge(e,t,n){var r=Go.get(t);switch(void 0===r?2:r){case 0:r=ye.bind(null,t,1,e);break;case 1:r=_e.bind(null,t,1,e);break;default:r=be.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function ye(e,t,n,r){Ui||v();var i=be,o=Ui;Ui=!0;try{p(i,e,t,n,r)}finally{(Ui=o)||m()}}function _e(e,t,n,r){Yo(Wo,be.bind(null,e,t,n,r))}function be(e,t,n,r){if(qo)if(0<Co.length&&-1<Fo.indexOf(e))e=ae(null,e,t,n,r),Co.push(e);else{var i=Ee(e,t,n,r);if(null===i)se(e,r);else if(-1<Fo.indexOf(e))e=ae(i,e,t,n,r),Co.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return Mo=ue(Mo,e,t,n,r,i),!0;case"dragenter":return Lo=ue(Lo,e,t,n,r,i),!0;case"mouseover":return ko=ue(ko,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Io.set(o,ue(Io.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Do.set(o,ue(Do.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){se(e,r),e=re(e,r,null,t);try{g(ie,e)}finally{ne(e)}}}}function Ee(e,t,n,r){if(null!==(n=Fe(n=ee(r)))){var i=Y(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=q(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=re(e,r,n,t);try{g(ie,e)}finally{ne(e)}return null}function Se(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Ko.hasOwnProperty(e)&&Ko[e]?(""+t).trim():t+"px"}function Te(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Se(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function we(e,t){if(t){if($o[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62,""))}}function Oe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Re(e,t){var n=W(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=Li[t];for(var r=0;r<t.length;r++)oe(t[r],e,n)}function Ae(){}function Pe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function xe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ce(e,t){var n,r=xe(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xe(r)}}function Me(){for(var e=window,t=Pe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Pe((e=t.contentWindow).document)}return t}function Le(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ke(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ie(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function De(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ne(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Qo||n===ta||n===ea){if(0===t)return e;t--}else n===Zo&&t++}e=e.previousSibling}return null}function Fe(e){var t=e[sa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ca]||n[sa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ne(e);null!==e;){if(n=e[sa])return n;e=Ne(e)}return t}n=(e=n).parentNode}return null}function Ue(e){return!(e=e[sa]||e[ca])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function je(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Be(e){return e[ua]||null}function Ge(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function He(e,t){var n=e.stateNode;if(!n)return null;var i=wi(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}function Ve(e,t,n){(t=He(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=$(n._dispatchListeners,t),n._dispatchInstances=$(n._dispatchInstances,e))}function ze(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ge(t);for(t=n.length;0<t--;)Ve(n[t],"captured",e);for(t=0;t<n.length;t++)Ve(n[t],"bubbled",e)}}function We(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=He(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=$(n._dispatchListeners,t),n._dispatchInstances=$(n._dispatchInstances,e))}function Ye(e){e&&e.dispatchConfig.registrationName&&We(e._targetInst,null,e)}function qe(e){J(e,ze)}function Ke(){if(ha)return ha;var e,t,n=fa,r=n.length,i="value"in la?la.value:la.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ha=i.slice(e,1<t?1-t:void 0)}function Xe(){return!0}function $e(){return!1}function Je(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Xe:$e,this.isPropagationStopped=$e,this}function Qe(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ze(e){if(!(e instanceof this))throw Error(r(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function et(e){e.eventPool=[],e.getPooled=Qe,e.release=Ze}function tt(e,t){switch(e){case"keyup":return-1!==va.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function nt(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function rt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Oa[e.type]:"textarea"===t}function it(e,t,n){return(e=Je.getPooled(Ra.change,e,t,n)).type="change",f(n),qe(e),e}function ot(e){Z(e)}function at(e){if(A(je(e)))return e}function st(e,t){if("change"===e)return t}function ut(){Aa&&(Aa.detachEvent("onpropertychange",ct),Pa=Aa=null)}function ct(e){if("value"===e.propertyName&&at(Pa))if(e=it(Pa,e,ee(e)),Ui)Z(e);else{Ui=!0;try{d(ot,e)}finally{Ui=!1,m()}}}function lt(e,t,n){"focus"===e?(ut(),Pa=n,(Aa=t).attachEvent("onpropertychange",ct)):"blur"===e&&ut()}function ft(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return at(Pa)}function ht(e,t){if("click"===e)return at(t)}function dt(e,t){if("input"===e||"change"===e)return at(t)}function pt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=La[e])&&!!t[e]}function vt(){return pt}function mt(e,t){if(Ga(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Ha.call(t,n[r])||!Ga(e[n[r]],t[n[r]]))return!1;return!0}function gt(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ka||null==Wa||Wa!==Pe(n)?null:("selectionStart"in(n=Wa)&&Le(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},qa&&mt(qa,n)?null:(qa=n,(e=Je.getPooled(za.select,Ya,e,t)).type="select",e.target=Wa,qe(e),e))}function yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function _t(e){0>hs||(e.current=fs[hs],fs[hs]=null,hs--)}function bt(e,t){hs++,fs[hs]=e.current,e.current=t}function Et(e,t){var n=e.type.contextTypes;if(!n)return ds;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function St(e){return null!=(e=e.childContextTypes)}function Tt(){_t(vs),_t(ps)}function wt(e,t,n){if(ps.current!==ds)throw Error(r(168));bt(ps,t),bt(vs,n)}function Ot(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in e))throw Error(r(108,S(t)||"Unknown",o));return gi({},n,{},i)}function Rt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ds,ms=ps.current,bt(ps,e),bt(vs,vs.current),!0}function At(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=Ot(e,t,ms),i.__reactInternalMemoizedMergedChildContext=e,_t(vs),_t(ps),bt(ps,e)):_t(vs),bt(vs,n)}function Pt(){switch(Ss()){case Ts:return 99;case ws:return 98;case Os:return 97;case Rs:return 96;case As:return 95;default:throw Error(r(332))}}function xt(e){switch(e){case 99:return Ts;case 98:return ws;case 97:return Os;case 96:return Rs;case 95:return As;default:throw Error(r(332))}}function Ct(e,t){return e=xt(e),gs(e,t)}function Mt(e,t,n){return e=xt(e),ys(e,t,n)}function Lt(e){return null===Ms?(Ms=[e],Ls=ys(Ts,It)):Ms.push(e),Ps}function kt(){if(null!==Ls){var e=Ls;Ls=null,_s(e)}It()}function It(){if(!ks&&null!==Ms){ks=!0;var e=0;try{var t=Ms;Ct(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ms=null}catch(t){throw null!==Ms&&(Ms=Ms.slice(e+1)),ys(Ts,kt),t}finally{ks=!1}}}function Dt(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Nt(e,t){if(e&&e.defaultProps)for(var n in t=gi({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function Ft(){js=Us=Fs=null}function Ut(e){var t=Ns.current;_t(Ns),e.type._context._currentValue=t}function jt(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Bt(e,t){Fs=e,js=Us=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(du=!0),e.firstContext=null)}function Gt(e,t){if(js!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(js=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Us){if(null===Fs)throw Error(r(308));Us=t,Fs.dependencies={expirationTime:0,firstContext:t,responders:null}}else Us=Us.next=t;return e._currentValue}function Ht(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Vt(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function zt(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function Wt(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Yt(e,t){var n=e.alternate;null!==n&&Vt(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function qt(e,t,n,r){var i=e.updateQueue;Bs=!1;var o=i.baseQueue,a=i.shared.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}o=a,i.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=a))}if(null!==o){s=o.next;var u=i.baseState,c=0,l=null,f=null,h=null;if(null!==s)for(var d=s;;){if((a=d.expirationTime)<r){var p={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===h?(f=h=p,l=u):h=h.next=p,a>c&&(c=a)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),kr(a,d.suspenseConfig);e:{var v=e,m=d;switch(a=t,p=n,m.tag){case 1:if("function"==typeof(v=m.payload)){u=v.call(p,u,a);break e}u=v;break e;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(a="function"==typeof(v=m.payload)?v.call(p,u,a):v))break e;u=gi({},u,a);break e;case 2:Bs=!0}}null!==d.callback&&(e.effectTag|=32,null===(a=i.effects)?i.effects=[d]:a.push(d))}if(null===(d=d.next)||d===s){if(null===(a=i.shared.pending))break;d=o.next=a.next,a.next=s,i.baseQueue=o=a,i.shared.pending=null}}null===h?l=u:h.next=f,i.baseState=l,i.baseQueue=h,Ir(c),e.expirationTime=c,e.memoizedState=u}}function Kt(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(null!==o){if(i.callback=null,i=o,o=n,"function"!=typeof i)throw Error(r(191,i));i.call(o)}}}function Xt(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:gi({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}function $t(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!mt(n,r)||!mt(i,o))}function Jt(e,t,n){var r=!1,i=ds,o=t.contextType;return"object"==typeof o&&null!==o?o=Gt(o):(i=St(t)?ms:ps.current,o=(r=null!=(r=t.contextTypes))?Et(e,i):ds),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qt(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Zt(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Hs,Ht(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Gt(o):(o=St(t)?ms:ps.current,i.context=Et(e,o)),qt(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Xt(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),qt(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}function en(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===Hs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function tn(e,t){if("textarea"!==e.type)throw Error(r(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function nn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Qr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=ti(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=en(e,t,n),r.return=e,r):((r=Zr(n.type,n.key,n.props,null,e.mode,r)).ref=en(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ni(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=ei(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ti(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case $i:return(n=Zr(t.type,t.key,t.props,null,e.mode,n)).ref=en(e,null,t),n.return=e,n;case Ji:return(t=ni(t,e.mode,n)).return=e,t}if(zs(t)||E(t))return(t=ei(t,e.mode,n,null)).return=e,t;tn(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case $i:return n.key===i?n.type===Qi?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case Ji:return n.key===i?l(e,t,n,r):null}if(zs(n)||E(n))return null!==i?null:f(e,t,n,r,null);tn(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case $i:return e=e.get(null===r.key?n:r.key)||null,r.type===Qi?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case Ji:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(zs(r)||E(r))return f(t,e=e.get(n)||null,r,i,null);tn(t,r)}return null}function v(r,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(r,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(r,f),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===s.length)return n(r,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(r,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=i(r,f);v<s.length;v++)null!==(m=p(f,r,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(r,e)})),c}function m(o,s,u,c){var l=E(u);if("function"!=typeof l)throw Error(r(150));if(null==(u=l.call(u)))throw Error(r(151));for(var f=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var _=d(o,v,y.value,c);if(null===_){null===v&&(v=g);break}e&&v&&null===_.alternate&&t(o,v),s=a(_,s,m),null===f?l=_:f.sibling=_,f=_,v=g}if(y.done)return n(o,v),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(o,y.value,c))&&(s=a(y,s,m),null===f?l=y:f.sibling=y,f=y);return l}for(v=i(o,v);!y.done;m++,y=u.next())null!==(y=p(v,o,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(o,e)})),l}return function(e,i,a,u){var c="object"==typeof a&&null!==a&&a.type===Qi&&null===a.key;c&&(a=a.props.children);var l="object"==typeof a&&null!==a;if(l)switch(a.$$typeof){case $i:e:{for(l=a.key,c=i;null!==c;){if(c.key===l){switch(c.tag){case 7:if(a.type===Qi){n(e,c.sibling),(i=o(c,a.props.children)).return=e,e=i;break e}break;default:if(c.elementType===a.type){n(e,c.sibling),(i=o(c,a.props)).ref=en(e,c,a),i.return=e,e=i;break e}}n(e,c);break}t(e,c),c=c.sibling}a.type===Qi?((i=ei(a.props.children,e.mode,u,a.key)).return=e,e=i):((u=Zr(a.type,a.key,a.props,null,e.mode,u)).ref=en(e,i,a),u.return=e,e=u)}return s(e);case Ji:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=o(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=ni(a,e.mode,u)).return=e,e=i}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=o(i,a)).return=e,e=i):(n(e,i),(i=ti(a,e.mode,u)).return=e,e=i),s(e);if(zs(a))return v(e,i,a,u);if(E(a))return m(e,i,a,u);if(l&&tn(e,a),void 0===a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(r(152,e.displayName||e.name||"Component"))}return n(e,i)}}function rn(e){if(e===qs)throw Error(r(174));return e}function on(e,t){switch(bt($s,t),bt(Xs,e),bt(Ks,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G(null,"");break;default:t=G(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_t(Ks),bt(Ks,t)}function an(){_t(Ks),_t(Xs),_t($s)}function sn(e){rn($s.current);var t=rn(Ks.current),n=G(t,e.type);t!==n&&(bt(Xs,e),bt(Ks,n))}function un(e){Xs.current===e&&(_t(Ks),_t(Xs))}function cn(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===ea||n.data===ta))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ln(e,t){return{responder:e,props:t}}function fn(){throw Error(r(321))}function hn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ga(e[n],t[n]))return!1;return!0}function dn(e,t,n,i,o,a){if(eu=a,tu=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Qs.current=null===e||null===e.memoizedState?au:su,e=n(i,o),t.expirationTime===eu){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(r(301));a+=1,ru=nu=null,t.updateQueue=null,Qs.current=uu,e=n(i,o)}while(t.expirationTime===eu)}if(Qs.current=ou,t=null!==nu&&null!==nu.next,eu=0,ru=nu=tu=null,iu=!1,t)throw Error(r(300));return e}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ru?tu.memoizedState=ru=e:ru=ru.next=e,ru}function vn(){if(null===nu){var e=tu.alternate;e=null!==e?e.memoizedState:null}else e=nu.next;var t=null===ru?tu.memoizedState:ru.next;if(null!==t)ru=t,nu=e;else{if(null===e)throw Error(r(310));e={memoizedState:(nu=e).memoizedState,baseState:nu.baseState,baseQueue:nu.baseQueue,queue:nu.queue,next:null},null===ru?tu.memoizedState=ru=e:ru=ru.next=e}return ru}function mn(e,t){return"function"==typeof t?t(e):t}function gn(e){var t=vn(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=nu,o=i.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}i.baseQueue=o=a,n.pending=null}if(null!==o){o=o.next,i=i.baseState;var u=s=a=null,c=o;do{var l=c.expirationTime;if(l<eu){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=i):u=u.next=f,l>tu.expirationTime&&(tu.expirationTime=l,Ir(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),kr(l,c.suspenseConfig),i=c.eagerReducer===e?c.eagerState:e(i,c.action);c=c.next}while(null!==c&&c!==o);null===u?a=i:u.next=s,Ga(i,t.memoizedState)||(du=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function yn(e){var t=vn(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);Ga(a,t.memoizedState)||(du=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function _n(e){var t=pn();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:mn,lastRenderedState:e}).dispatch=In.bind(null,tu,e),[t.memoizedState,e]}function bn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=tu.updateQueue)?(t={lastEffect:null},tu.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function En(){return vn().memoizedState}function Sn(e,t,n,r){var i=pn();tu.effectTag|=e,i.memoizedState=bn(1|t,n,void 0,void 0===r?null:r)}function Tn(e,t,n,r){var i=vn();r=void 0===r?null:r;var o=void 0;if(null!==nu){var a=nu.memoizedState;if(o=a.destroy,null!==r&&hn(r,a.deps))return void bn(t,n,o,r)}tu.effectTag|=e,i.memoizedState=bn(1|t,n,o,r)}function wn(e,t){return Sn(516,4,e,t)}function On(e,t){return Tn(516,4,e,t)}function Rn(e,t){return Tn(4,2,e,t)}function An(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Pn(e,t,n){return n=null!=n?n.concat([e]):null,Tn(4,2,An.bind(null,t,e),n)}function xn(){}function Cn(e,t){return pn().memoizedState=[e,void 0===t?null:t],e}function Mn(e,t){var n=vn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ln(e,t){var n=vn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function kn(e,t,n){var r=Pt();Ct(98>r?98:r,(function(){e(!0)})),Ct(97<r?97:r,(function(){var r=Zs.suspense;Zs.suspense=void 0===t?null:t;try{e(!1),n()}finally{Zs.suspense=r}}))}function In(e,t,n){var r=br(),i=Gs.suspense;i={expirationTime:r=Er(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===tu||null!==o&&o===tu)iu=!0,i.expirationTime=eu,tu.expirationTime=eu;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Ga(s,a))return}catch(e){}Sr(e,r)}}function Dn(e,t){var n=$r(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Nn(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fn(e){if(fu){var t=lu;if(t){var n=t;if(!Nn(e,t)){if(!(t=De(n.nextSibling))||!Nn(e,t))return e.effectTag=-1025&e.effectTag|2,fu=!1,void(cu=e);Dn(cu,n)}cu=e,lu=De(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,fu=!1,cu=e}}function Un(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;cu=e}function jn(e){if(e!==cu)return!1;if(!fu)return Un(e),fu=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ie(t,e.memoizedProps))for(t=lu;t;)Dn(e,t),t=De(t.nextSibling);if(Un(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Zo){if(0===t){lu=De(e.nextSibling);break e}t--}else n!==Qo&&n!==ta&&n!==ea||t++}e=e.nextSibling}lu=null}}else lu=cu?De(e.stateNode.nextSibling):null;return!0}function Bn(){lu=cu=null,fu=!1}function Gn(e,t,n,r){t.child=null===e?Ys(t,null,n,r):Ws(t,e.child,n,r)}function Hn(e,t,n,r,i){n=n.render;var o=t.ref;return Bt(t,i),r=dn(e,t,n,r,o,i),null===e||du?(t.effectTag|=1,Gn(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),er(e,t,i))}function Vn(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Jr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Zr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zn(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:mt)(i,r)&&e.ref===t.ref)?er(e,t,o):(t.effectTag|=1,(e=Qr(a,r)).ref=t.ref,e.return=t,t.child=e)}function zn(e,t,n,r,i,o){return null!==e&&mt(e.memoizedProps,r)&&e.ref===t.ref&&(du=!1,i<o)?(t.expirationTime=e.expirationTime,er(e,t,o)):Yn(e,t,n,r,o)}function Wn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Yn(e,t,n,r,i){var o=St(n)?ms:ps.current;return o=Et(t,o),Bt(t,i),n=dn(e,t,n,r,o,i),null===e||du?(t.effectTag|=1,Gn(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),er(e,t,i))}function qn(e,t,n,r,i){if(St(n)){var o=!0;Rt(t)}else o=!1;if(Bt(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Jt(t,n,r),Zt(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=Gt(c):c=Et(t,c=St(n)?ms:ps.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Qt(t,a,r,c),Bs=!1;var h=t.memoizedState;a.state=h,qt(t,r,a,i),u=t.memoizedState,s!==r||h!==u||vs.current||Bs?("function"==typeof l&&(Xt(t,n,l,r),u=t.memoizedState),(s=Bs||$t(t,n,s,r,h,u,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,Vt(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Nt(t.type,s),u=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=Gt(c):c=Et(t,c=St(n)?ms:ps.current),(f="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Qt(t,a,r,c),Bs=!1,u=t.memoizedState,a.state=u,qt(t,r,a,i),h=t.memoizedState,s!==r||u!==h||vs.current||Bs?("function"==typeof l&&(Xt(t,n,l,r),h=t.memoizedState),(l=Bs||$t(t,n,s,r,u,h,c))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Kn(e,t,n,r,o,i)}function Kn(e,t,n,r,i,o){Wn(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&At(t,n,!1),er(e,t,o);r=t.stateNode,hu.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ws(t,e.child,null,o),t.child=Ws(t,null,s,o)):Gn(e,t,s,o),t.memoizedState=r.state,i&&At(t,n,!0),t.child}function Xn(e){var t=e.stateNode;t.pendingContext?wt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&wt(0,t.context,!1),on(e,t.containerInfo)}function $n(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Js.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),bt(Js,1&a),null===e){if(void 0!==o.fallback&&Fn(t),s){if(s=o.fallback,(o=ei(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=ei(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=pu,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Ys(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Qr(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Qr(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=pu,t.child=n,i}return n=Ws(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=ei(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=ei(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=pu,t.child=o,n}return t.memoizedState=null,t.child=Ws(t,e,o.children,n)}function Jn(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),jt(e.return,t)}function Qn(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Zn(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Gn(e,t,r.children,n),0!=(2&(r=Js.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jn(e,n);else if(19===e.tag)Jn(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bt(Js,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cn(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qn(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cn(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qn(t,!0,n,null,o,t.lastEffect);break;case"together":Qn(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function er(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&Ir(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Qr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function tr(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nr(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return St(t.type)&&Tt(),null;case 3:return an(),_t(vs),_t(ps),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!jn(t)||(t.effectTag|=4),us(t),null;case 5:un(t),n=rn($s.current);var o=t.type;if(null!==e&&null!=t.stateNode)cs(e,t,o,i,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!i){if(null===t.stateNode)throw Error(r(166));return null}if(e=rn(Ks.current),jn(t)){i=t.stateNode,o=t.type;var a=t.memoizedProps;switch(i[sa]=t,i[ua]=a,o){case"iframe":case"object":case"embed":me("load",i);break;case"video":case"audio":for(e=0;e<Oo.length;e++)me(Oo[e],i);break;case"source":me("error",i);break;case"img":case"image":case"link":me("error",i),me("load",i);break;case"form":me("reset",i),me("submit",i);break;case"details":me("toggle",i);break;case"input":x(i,a),me("invalid",i),Re(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!a.multiple},me("invalid",i),Re(n,"onChange");break;case"textarea":F(i,a),me("invalid",i),Re(n,"onChange")}for(var s in we(o,a),e=null,a)if(a.hasOwnProperty(s)){var u=a[s];"children"===s?"string"==typeof u?i.textContent!==u&&(e=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(e=["children",""+u]):Mi.hasOwnProperty(s)&&null!=u&&Re(n,s)}switch(o){case"input":R(i),L(i,a,!0);break;case"textarea":R(i),j(i);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(i.onclick=Ae)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===Jo&&(e=B(o)),e===Jo?"script"===o?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof i.is?e=s.createElement(o,{is:i.is}):(e=s.createElement(o),"select"===o&&(s=e,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):e=s.createElementNS(e,o),e[sa]=t,e[ua]=i,ss(e,t,!1,!1),t.stateNode=e,s=Oe(o,i),o){case"iframe":case"object":case"embed":me("load",e),u=i;break;case"video":case"audio":for(u=0;u<Oo.length;u++)me(Oo[u],e);u=i;break;case"source":me("error",e),u=i;break;case"img":case"image":case"link":me("error",e),me("load",e),u=i;break;case"form":me("reset",e),me("submit",e),u=i;break;case"details":me("toggle",e),u=i;break;case"input":x(e,i),u=P(e,i),me("invalid",e),Re(n,"onChange");break;case"option":u=I(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},u=gi({},i,{value:void 0}),me("invalid",e),Re(n,"onChange");break;case"textarea":F(e,i),u=N(e,i),me("invalid",e),Re(n,"onChange");break;default:u=i}we(o,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?Te(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&po(e,l):"children"===a?"string"==typeof l?("textarea"!==o||""!==l)&&H(e,l):"number"==typeof l&&H(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Mi.hasOwnProperty(a)?null!=l&&Re(n,a):null!=l&&b(e,a,l,s))}switch(o){case"input":R(e),L(e,i,!1);break;case"textarea":R(e),j(e);break;case"option":null!=i.value&&e.setAttribute("value",""+w(i.value));break;case"select":e.multiple=!!i.multiple,null!=(n=i.value)?D(e,!!i.multiple,n,!1):null!=i.defaultValue&&D(e,!!i.multiple,i.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=Ae)}ke(o,i)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)ls(e,t,e.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));n=rn($s.current),rn(Ks.current),jn(t)?(n=t.stateNode,i=t.memoizedProps,n[sa]=t,n.nodeValue!==i&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[sa]=t,t.stateNode=n)}return null;case 13:return _t(Js),i=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==i,i=!1,null===e?void 0!==t.memoizedProps.fallback&&jn(t):(i=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Js.current)?Du===Ou&&(Du=Pu):(Du!==Ou&&Du!==Pu||(Du=xu),0!==Bu&&null!==Lu&&(oi(Lu,Iu),ai(Lu,Bu)))),(n||i)&&(t.effectTag|=4),null);case 4:return an(),us(t),null;case 10:return Ut(t),null;case 17:return St(t.type)&&Tt(),null;case 19:if(_t(Js),null===(i=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(a=i.rendering)){if(o)tr(i,!1);else if(Du!==Ou||null!==e&&0!=(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=cn(a))){for(t.effectTag|=64,tr(i,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=t.child;null!==i;)a=n,(o=i).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),i=i.sibling;return bt(Js,1&Js.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=cn(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),tr(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Ds()-i.renderingStartTime>i.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,tr(i,!1),t.expirationTime=t.childExpirationTime=n-1);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=i.last)?n.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=Ds()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Ds(),n.sibling=null,t=Js.current,bt(Js,o?1&t|2:1&t),n):null}throw Error(r(156,t.tag))}function rr(e){switch(e.tag){case 1:St(e.type)&&Tt();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(an(),_t(vs),_t(ps),0!=(64&(t=e.effectTag)))throw Error(r(285));return e.effectTag=-4097&t|64,e;case 5:return un(e),null;case 13:return _t(Js),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return _t(Js),null;case 4:return an(),null;case 10:return Ut(e),null;default:return null}}function ir(e,t){return{value:e,source:t,stack:T(t)}}function or(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=T(n)),null!==n&&S(n.type),t=t.value,null!==e&&1===e.tag&&S(e.type)}function ar(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Yr(e,t)}else t.current=null}function sr(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Nt(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(r(163))}function ur(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function cr(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lr(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void cr(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:Nt(n.type,t.memoizedProps);e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&Kt(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Kt(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&ke(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&pe(n)))));case 19:case 17:case 20:case 21:return}throw Error(r(163))}function fr(e,t,n){switch("function"==typeof nc&&nc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ct(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Yr(i,e)}}e=e.next}while(e!==r)}))}break;case 1:ar(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Yr(e,t)}}(t,n);break;case 5:ar(t);break;case 4:vr(e,t,n)}}function hr(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&hr(t)}function dr(e){return 5===e.tag||3===e.tag||4===e.tag}function pr(e){e:{for(var t=e.return;null!==t;){if(dr(t)){var n=t;break e}t=t.return}throw Error(r(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(r(161))}16&n.effectTag&&(H(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||dr(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}i?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Ae));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function vr(e,t,n){for(var i,o,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(r(160));switch(i=s.stateNode,s.tag){case 5:o=!1;break e;case 3:case 4:i=i.containerInfo,o=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag){e:for(var u=e,c=a,l=n,f=c;;)if(fr(u,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}o?(u=i,c=a.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):i.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,o=!0,a.child.return=a,a=a.child;continue}}else if(fr(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function mr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ur(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,o=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[ua]=i,"input"===e&&"radio"===i.type&&null!=i.name&&C(n,i),Oe(e,o),t=Oe(e,i),o=0;o<a.length;o+=2){var s=a[o],u=a[o+1];"style"===s?Te(n,u):"dangerouslySetInnerHTML"===s?po(n,u):"children"===s?H(n,u):b(n,s,u,t)}switch(e){case"input":M(n,i);break;case"textarea":U(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?D(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?D(n,!!i.multiple,i.defaultValue,!0):D(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(r(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,pe(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,Hu=Ds()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,i?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,o=null!=(o=e.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null,a.style.display=Se("display",o));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gr(t);case 19:return void gr(t);case 17:return}throw Error(r(163))}function gr(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new mu),t.forEach((function(t){var r=Kr.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yr(e,t,n){(n=zt(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Yu=r),or(e,t)},n}function _r(e,t,n){(n=zt(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return or(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===qu?qu=new Set([this]):qu.add(this),or(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function br(){return(Mu&(Tu|wu))!==Eu?1073741821-(Ds()/10|0):0!==ec?ec:ec=1073741821-(Ds()/10|0)}function Er(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var i=Pt();if(0==(4&t))return 99===i?1073741823:1073741822;if((Mu&Tu)!==Eu)return Iu;if(null!==n)e=Dt(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=Dt(e,150,100);break;case 97:case 96:e=Dt(e,5e3,250);break;case 95:e=2;break;default:throw Error(r(326))}return null!==Lu&&e===Iu&&--e,e}function Sr(e,t){if(50<Qu)throw Qu=0,Zu=null,Error(r(185));if(null!==(e=Tr(e,t))){var n=Pt();1073741823===t?(Mu&Su)!==Eu&&(Mu&(Tu|wu))===Eu?Ar(e):(Or(e),Mu===Eu&&kt()):Or(e),(4&Mu)===Eu||98!==n&&99!==n||(null===Ju?Ju=new Map([[e,t]]):(void 0===(n=Ju.get(e))||n>t)&&Ju.set(e,t))}}function Tr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Lu===i&&(Ir(t),Du===xu&&oi(i,Iu)),ai(i,t)),i}function wr(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!ii(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Or(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Lt(Ar.bind(null,e));else{var t=wr(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=br();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ps&&_s(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Lt(Ar.bind(null,e)):Mt(r,Rr.bind(null,e),{timeout:10*(1073741821-t)-Ds()}),e.callbackNode=t}}}function Rr(e,t){if(ec=0,t)return si(e,t=br()),Or(e),null;var n=wr(e);if(0!==n){if(t=e.callbackNode,(Mu&(Tu|wu))!==Eu)throw Error(r(327));if(Vr(),e===Lu&&n===Iu||Cr(e,n),null!==ku){var i=Mu;Mu|=Tu;for(var o=Lr();;)try{Nr();break}catch(t){Mr(e,t)}if(Ft(),Mu=i,_u.current=o,Du===Ru)throw t=Nu,Cr(e,n),oi(e,n),Or(e),t;if(null===ku)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=Du,Lu=null,i){case Ou:case Ru:throw Error(r(345));case Au:si(e,2<n?2:n);break;case Pu:if(oi(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=jr(o)),1073741823===Fu&&10<(o=Hu+Vu-Ds())){if(Gu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,Cr(e,n);break}}if(0!==(a=wr(e))&&a!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=ia(Br.bind(null,e),o);break}Br(e);break;case xu:if(oi(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=jr(o)),Gu&&(0===(o=e.lastPingedTime)||o>=n)){e.lastPingedTime=n,Cr(e,n);break}if(0!==(o=wr(e))&&o!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==Uu?i=10*(1073741821-Uu)-Ds():1073741823===Fu?i=0:(i=10*(1073741821-Fu)-5e3,0>(i=(o=Ds())-i)&&(i=0),(n=10*(1073741821-n)-o)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*yu(i/1960))-i)&&(i=n)),10<i){e.timeoutHandle=ia(Br.bind(null,e),i);break}Br(e);break;case Cu:if(1073741823!==Fu&&null!==ju){a=Fu;var s=ju;if(0>=(i=0|s.busyMinDurationMs)?i=0:(o=0|s.busyDelayMs,i=(a=Ds()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=o?0:o+i-a),10<i){oi(e,n),e.timeoutHandle=ia(Br.bind(null,e),i);break}}Br(e);break;default:throw Error(r(329))}if(Or(e),e.callbackNode===t)return Rr.bind(null,e)}}return null}function Ar(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Mu&(Tu|wu))!==Eu)throw Error(r(327));if(Vr(),e===Lu&&t===Iu||Cr(e,t),null!==ku){var n=Mu;Mu|=Tu;for(var i=Lr();;)try{Dr();break}catch(t){Mr(e,t)}if(Ft(),Mu=n,_u.current=i,Du===Ru)throw n=Nu,Cr(e,t),oi(e,t),Or(e),n;if(null!==ku)throw Error(r(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Lu=null,Br(e),Or(e)}return null}function Pr(e,t){var n=Mu;Mu|=1;try{return e(t)}finally{(Mu=n)===Eu&&kt()}}function xr(e,t){var n=Mu;Mu&=-2,Mu|=Su;try{return e(t)}finally{(Mu=n)===Eu&&kt()}}function Cr(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oa(n)),null!==ku)for(n=ku.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Tt();break;case 3:an(),_t(vs),_t(ps);break;case 5:un(r);break;case 4:an();break;case 13:case 19:_t(Js);break;case 10:Ut(r)}n=n.return}Lu=e,ku=Qr(e.current,null),Iu=t,Du=Ou,Nu=null,Uu=Fu=1073741823,ju=null,Bu=0,Gu=!1}function Mr(e,t){for(;;){try{if(Ft(),Qs.current=ou,iu)for(var n=tu.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(eu=0,ru=nu=tu=null,iu=!1,null===ku||null===ku.return)return Du=Ru,Nu=t,ku=null;e:{var i=e,o=ku.return,a=ku,s=t;if(t=Iu,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!=(1&Js.current),f=o;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var m=new Set;m.add(u),f.updateQueue=m}else v.add(u);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=zt(1073741823,null);g.tag=2,Wt(a,g)}a.expirationTime=1073741823;break e}s=void 0,a=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new gu,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var _=qr.bind(null,i,u,a);u.then(_,_)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);s=Error((S(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+T(a))}Du!==Cu&&(Du=Au),s=ir(s,a),f=o;do{switch(f.tag){case 3:u=s,f.effectTag|=4096,f.expirationTime=t,Yt(f,yr(f,u,t));break e;case 1:u=s;var b=f.type,E=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===qu||!qu.has(E)))){f.effectTag|=4096,f.expirationTime=t,Yt(f,_r(f,u,t));break e}}f=f.return}while(null!==f)}ku=Ur(ku)}catch(e){t=e;continue}break}}function Lr(){var e=_u.current;return _u.current=ou,null===e?ou:e}function kr(e,t){e<Fu&&2<e&&(Fu=e),null!==t&&e<Uu&&2<e&&(Uu=e,ju=t)}function Ir(e){e>Bu&&(Bu=e)}function Dr(){for(;null!==ku;)ku=Fr(ku)}function Nr(){for(;null!==ku&&!xs();)ku=Fr(ku)}function Fr(e){var t=vu(e.alternate,e,Iu);return e.memoizedProps=e.pendingProps,null===t&&(t=Ur(e)),bu.current=null,t}function Ur(e){ku=e;do{var t=ku.alternate;if(e=ku.return,0==(2048&ku.effectTag)){if(t=nr(t,ku,Iu),1===Iu||1!==ku.childExpirationTime){for(var n=0,r=ku.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}ku.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=ku.firstEffect),null!==ku.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=ku.firstEffect),e.lastEffect=ku.lastEffect),1<ku.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=ku:e.firstEffect=ku,e.lastEffect=ku))}else{if(null!==(t=rr(ku)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=ku.sibling))return t;ku=e}while(null!==ku);return Du===Ou&&(Du=Cu),null}function jr(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Br(e){var t=Pt();return Ct(99,Gr.bind(null,e,t)),null}function Gr(e,t){do{Vr()}while(null!==Xu);if((Mu&(Tu|wu))!==Eu)throw Error(r(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=jr(n);if(e.firstPendingTime=o,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Lu&&(ku=Lu=null,Iu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,null!==o){var a=Mu;Mu|=wu,bu.current=null,na=qo;var s=Me();if(Le(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(e){u=null;break e}var h=0,d=-1,p=-1,v=0,m=0,g=s,y=null;t:for(;;){for(var _;g!==u||0!==l&&3!==g.nodeType||(d=h+l),g!==f||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(_=g.firstChild);)y=g,g=_;for(;;){if(g===s)break t;if(y===u&&++v===l&&(d=h),y===f&&++m===c&&(p=h),null!==(_=g.nextSibling))break;y=(g=y).parentNode}g=_}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;ra={activeElementDetached:null,focusedElem:s,selectionRange:u},qo=!1,zu=o;do{try{Hr()}catch(e){if(null===zu)throw Error(r(330));Yr(zu,e),zu=zu.nextEffect}}while(null!==zu);zu=o;do{try{for(s=e,u=t;null!==zu;){var b=zu.effectTag;if(16&b&&H(zu.stateNode,""),128&b){var E=zu.alternate;if(null!==E){var S=E.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(1038&b){case 2:pr(zu),zu.effectTag&=-3;break;case 6:pr(zu),zu.effectTag&=-3,mr(zu.alternate,zu);break;case 1024:zu.effectTag&=-1025;break;case 1028:zu.effectTag&=-1025,mr(zu.alternate,zu);break;case 4:mr(zu.alternate,zu);break;case 8:vr(s,l=zu,u),hr(l)}zu=zu.nextEffect}}catch(e){if(null===zu)throw Error(r(330));Yr(zu,e),zu=zu.nextEffect}}while(null!==zu);if(S=ra,E=Me(),b=S.focusedElem,u=S.selectionRange,E!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&Le(b)&&(E=u.start,void 0===(S=u.end)&&(S=E),"selectionStart"in b?(b.selectionStart=E,b.selectionEnd=Math.min(S,b.value.length)):(S=(E=b.ownerDocument||document)&&E.defaultView||window).getSelection&&(S=S.getSelection(),l=b.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!S.extend&&s>u&&(l=u,u=s,s=l),l=Ce(b,s),f=Ce(b,u),l&&f&&(1!==S.rangeCount||S.anchorNode!==l.node||S.anchorOffset!==l.offset||S.focusNode!==f.node||S.focusOffset!==f.offset)&&((E=E.createRange()).setStart(l.node,l.offset),S.removeAllRanges(),s>u?(S.addRange(E),S.extend(f.node,f.offset)):(E.setEnd(f.node,f.offset),S.addRange(E))))),E=[];for(S=b;S=S.parentNode;)1===S.nodeType&&E.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<E.length;b++)(S=E[b]).element.scrollLeft=S.left,S.element.scrollTop=S.top}qo=!!na,ra=na=null,e.current=n,zu=o;do{try{for(b=e;null!==zu;){var T=zu.effectTag;if(36&T&&lr(b,zu.alternate,zu),128&T){E=void 0;var w=zu.ref;if(null!==w){var O=zu.stateNode;switch(zu.tag){case 5:E=O;break;default:E=O}"function"==typeof w?w(E):w.current=E}}zu=zu.nextEffect}}catch(e){if(null===zu)throw Error(r(330));Yr(zu,e),zu=zu.nextEffect}}while(null!==zu);zu=null,Cs(),Mu=a}else e.current=n;if(Ku)Ku=!1,Xu=e,$u=t;else for(zu=o;null!==zu;)t=zu.nextEffect,zu.nextEffect=null,zu=t;if(0===(t=e.firstPendingTime)&&(qu=null),1073741823===t?e===Zu?Qu++:(Qu=0,Zu=e):Qu=0,"function"==typeof tc&&tc(n.stateNode,i),Or(e),Wu)throw Wu=!1,e=Yu,Yu=null,e;return(Mu&Su)!==Eu?null:(kt(),null)}function Hr(){for(;null!==zu;){var e=zu.effectTag;0!=(256&e)&&sr(zu.alternate,zu),0==(512&e)||Ku||(Ku=!0,Mt(97,(function(){return Vr(),null}))),zu=zu.nextEffect}}function Vr(){if(90!==$u){var e=97<$u?97:$u;return $u=90,Ct(e,zr)}}function zr(){if(null===Xu)return!1;var e=Xu;if(Xu=null,(Mu&(Tu|wu))!==Eu)throw Error(r(331));var t=Mu;for(Mu|=wu,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ur(5,n),cr(5,n)}}catch(t){if(null===e)throw Error(r(330));Yr(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Mu=t,kt(),!0}function Wr(e,t,n){Wt(e,t=yr(e,t=ir(n,t),1073741823)),null!==(e=Tr(e,1073741823))&&Or(e)}function Yr(e,t){if(3===e.tag)Wr(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Wr(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qu||!qu.has(r))){Wt(n,e=_r(n,e=ir(t,e),1073741823)),null!==(n=Tr(n,1073741823))&&Or(n);break}}n=n.return}}function qr(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Lu===e&&Iu===n?Du===xu||Du===Pu&&1073741823===Fu&&Ds()-Hu<Vu?Cr(e,Iu):Gu=!0:ii(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Or(e)))}function Kr(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Er(t=br(),e,null)),null!==(e=Tr(e,t))&&Or(e)}function Xr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function $r(e,t,n,r){return new Xr(e,t,n,r)}function Jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qr(e,t){var n=e.alternate;return null===n?((n=$r(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zr(e,t,n,i,o,a){var s=2;if(i=e,"function"==typeof e)Jr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Qi:return ei(n.children,o,a,t);case ro:s=8,o|=7;break;case Zi:s=8,o|=1;break;case eo:return(e=$r(12,n,t,8|o)).elementType=eo,e.type=eo,e.expirationTime=a,e;case oo:return(e=$r(13,n,t,o)).type=oo,e.elementType=oo,e.expirationTime=a,e;case ao:return(e=$r(19,n,t,o)).elementType=ao,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case to:s=10;break e;case no:s=9;break e;case io:s=11;break e;case so:s=14;break e;case uo:s=16,i=null;break e;case co:s=22;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=$r(s,n,t,o)).elementType=e,t.type=i,t.expirationTime=a,t}function ei(e,t,n,r){return(e=$r(7,e,r,t)).expirationTime=n,e}function ti(e,t,n){return(e=$r(6,e,null,t)).expirationTime=n,e}function ni(e,t,n){return(t=$r(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ri(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ii(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function oi(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function ai(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function si(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function ui(e,t,n,i){var o=t.current,a=br(),s=Gs.suspense;a=Er(a,o,s);e:if(n){t:{if(Y(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(r(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(St(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(r(171))}if(1===n.tag){var c=n.type;if(St(c)){n=Ot(n,c,u);break e}}n=u}else n=ds;return null===t.context?t.context=n:t.pendingContext=n,(t=zt(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),Wt(o,t),Sr(o,a),a}function ci(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function li(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function fi(e,t){li(e,t),(e=e.alternate)&&li(e,t)}function hi(e,t,n){var r=new ri(e,t,n=null!=n&&!0===n.hydrate),i=$r(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,Ht(i),e[ca]=r.current,n&&0!==t&&function(e,t){var n=W(t);Fo.forEach((function(e){oe(e,t,n)})),Uo.forEach((function(e){oe(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function di(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function pi(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=ci(a);s.call(e)}}ui(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new hi(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=ci(a);u.call(e)}}xr((function(){ui(t,a,e,i)}))}return ci(a)}function vi(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!di(t))throw Error(r(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ji,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}var mi=n(0),gi=n(105),yi=n(575);if(!mi)throw Error(r(227));var _i=!1,bi=null,Ei=!1,Si=null,Ti={onError:function(e){_i=!0,bi=e}},wi=null,Oi=null,Ri=null,Ai=null,Pi={},xi=[],Ci={},Mi={},Li={},ki=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ii=null,Di=null,Ni=null,Fi=d,Ui=!1,ji=!1,Bi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gi=Object.prototype.hasOwnProperty,Hi={},Vi={},zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){zi[e]=new y(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];zi[t]=new y(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){zi[e]=new y(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){zi[e]=new y(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){zi[e]=new y(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){zi[e]=new y(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){zi[e]=new y(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){zi[e]=new y(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){zi[e]=new y(e,5,!1,e.toLowerCase(),null,!1)}));var Wi=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Wi,_);zi[t]=new y(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Wi,_);zi[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Wi,_);zi[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){zi[e]=new y(e,1,!1,e.toLowerCase(),null,!1)})),zi.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){zi[e]=new y(e,1,!1,e.toLowerCase(),null,!0)}));var Yi=mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Yi.hasOwnProperty("ReactCurrentDispatcher")||(Yi.ReactCurrentDispatcher={current:null}),Yi.hasOwnProperty("ReactCurrentBatchConfig")||(Yi.ReactCurrentBatchConfig={suspense:null});var qi,Ki=/^(.*)[\\\/]/,Xi="function"==typeof Symbol&&Symbol.for,$i=Xi?Symbol.for("react.element"):60103,Ji=Xi?Symbol.for("react.portal"):60106,Qi=Xi?Symbol.for("react.fragment"):60107,Zi=Xi?Symbol.for("react.strict_mode"):60108,eo=Xi?Symbol.for("react.profiler"):60114,to=Xi?Symbol.for("react.provider"):60109,no=Xi?Symbol.for("react.context"):60110,ro=Xi?Symbol.for("react.concurrent_mode"):60111,io=Xi?Symbol.for("react.forward_ref"):60112,oo=Xi?Symbol.for("react.suspense"):60113,ao=Xi?Symbol.for("react.suspense_list"):60120,so=Xi?Symbol.for("react.memo"):60115,uo=Xi?Symbol.for("react.lazy"):60116,co=Xi?Symbol.for("react.block"):60121,lo="function"==typeof Symbol&&Symbol.iterator,fo="http://www.w3.org/1999/xhtml",ho="http://www.w3.org/2000/svg",po=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==ho||"innerHTML"in e)e.innerHTML=t;else{for((qi=qi||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}})),vo={animationend:V("Animation","AnimationEnd"),animationiteration:V("Animation","AnimationIteration"),animationstart:V("Animation","AnimationStart"),transitionend:V("Transition","TransitionEnd")},mo={},go={};ki&&(go=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);var yo,_o,bo,Eo=z("animationend"),So=z("animationiteration"),To=z("animationstart"),wo=z("transitionend"),Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ro=new("function"==typeof WeakMap?WeakMap:Map),Ao=null,Po=[],xo=!1,Co=[],Mo=null,Lo=null,ko=null,Io=new Map,Do=new Map,No=[],Fo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Uo="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),jo={},Bo=new Map,Go=new Map,Ho=["abort","abort",Eo,"animationEnd",So,"animationIteration",To,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",wo,"transitionEnd","waiting","waiting"];ve("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ve("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ve(Ho,2);for(var Vo="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zo=0;zo<Vo.length;zo++)Go.set(Vo[zo],0);var Wo=yi.unstable_UserBlockingPriority,Yo=yi.unstable_runWithPriority,qo=!0,Ko={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xo=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach((function(e){Xo.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ko[t]=Ko[e]}))}));var $o=gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Jo=fo,Qo="$",Zo="/$",ea="$?",ta="$!",na=null,ra=null,ia="function"==typeof setTimeout?setTimeout:void 0,oa="function"==typeof clearTimeout?clearTimeout:void 0,aa=Math.random().toString(36).slice(2),sa="__reactInternalInstance$"+aa,ua="__reactEventHandlers$"+aa,ca="__reactContainere$"+aa,la=null,fa=null,ha=null;gi(Je.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xe)},persist:function(){this.isPersistent=Xe},isPersistent:$e,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=$e,this._dispatchInstances=this._dispatchListeners=null}}),Je.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Je.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return gi(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=gi({},r.Interface,e),n.extend=r.extend,et(n),n},et(Je);var da=Je.extend({data:null}),pa=Je.extend({data:null}),va=[9,13,27,32],ma=ki&&"CompositionEvent"in window,ga=null;ki&&"documentMode"in document&&(ga=document.documentMode);var ya=ki&&"TextEvent"in window&&!ga,_a=ki&&(!ma||ga&&8<ga&&11>=ga),ba=String.fromCharCode(32),Ea={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Sa=!1,Ta=!1,wa={eventTypes:Ea,extractEvents:function(e,t,n,r){var i;if(ma)e:{switch(e){case"compositionstart":var o=Ea.compositionStart;break e;case"compositionend":o=Ea.compositionEnd;break e;case"compositionupdate":o=Ea.compositionUpdate;break e}o=void 0}else Ta?tt(e,n)&&(o=Ea.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Ea.compositionStart);return o?(_a&&"ko"!==n.locale&&(Ta||o!==Ea.compositionStart?o===Ea.compositionEnd&&Ta&&(i=Ke()):(fa="value"in(la=r)?la.value:la.textContent,Ta=!0)),o=da.getPooled(o,t,n,r),i?o.data=i:null!==(i=nt(n))&&(o.data=i),qe(o),i=o):i=null,(e=ya?function(e,t){switch(e){case"compositionend":return nt(t);case"keypress":return 32!==t.which?null:(Sa=!0,ba);case"textInput":return(e=t.data)===ba&&Sa?null:e;default:return null}}(e,n):function(e,t){if(Ta)return"compositionend"===e||!ma&&tt(e,t)?(e=Ke(),ha=fa=la=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _a&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=pa.getPooled(Ea.beforeInput,t,n,r)).data=e,qe(t)):t=null,null===i?t:null===t?i:[i,t]}},Oa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ra={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Aa=null,Pa=null,xa=!1;ki&&(xa=te("input")&&(!document.documentMode||9<document.documentMode));var Ca={eventTypes:Ra,_isInputEventSupported:xa,extractEvents:function(e,t,n,r){var i=t?je(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=st;else if(rt(i))if(xa)a=dt;else{a=ft;var s=lt}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=ht);if(a&&(a=a(e,t)))return it(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&k(i,"number",i.value)}},Ma=Je.extend({view:null,detail:null}),La={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},ka=0,Ia=0,Da=!1,Na=!1,Fa=Ma.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=ka;return ka=e.screenX,Da?"mousemove"===e.type?e.screenX-t:0:(Da=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ia;return Ia=e.screenY,Na?"mousemove"===e.type?e.screenY-t:0:(Na=!0,0)}}),Ua=Fa.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ja={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Ba={eventTypes:ja,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Fe(t):null)&&(t!==Y(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Fa,u=ja.mouseLeave,c=ja.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Ua,u=ja.pointerLeave,c=ja.pointerEnter,l="pointer");if(e=null==a?o:je(a),o=null==t?o:je(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=a)&&l)e:{for(c=l,a=0,e=s=r;e;e=Ge(e))a++;for(e=0,t=c;t;t=Ge(t))e++;for(;0<a-e;)s=Ge(s),a--;for(;0<e-a;)c=Ge(c),e--;for(;a--;){if(s===c||s===c.alternate)break e;s=Ge(s),c=Ge(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Ge(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Ge(l);for(l=0;l<s.length;l++)We(s[l],"bubbled",u);for(l=r.length;0<l--;)We(r[l],"captured",n);return 0==(64&i)?[u]:[u,n]}},Ga="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ha=Object.prototype.hasOwnProperty,Va=ki&&"documentMode"in document&&11>=document.documentMode,za={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Wa=null,Ya=null,qa=null,Ka=!1,Xa={eventTypes:za,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=W(i),o=Li.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?je(t):window,e){case"focus":(rt(i)||"true"===i.contentEditable)&&(Wa=i,Ya=t,qa=null);break;case"blur":qa=Ya=Wa=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ka=!1,gt(n,r);case"selectionchange":if(Va)break;case"keydown":case"keyup":return gt(n,r)}return null}},$a=Je.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ja=Je.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qa=Ma.extend({relatedTarget:null}),Za={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},es={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ts=Ma.extend({key:function(e){if(e.key){var t=Za[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?es[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:vt,charCode:function(e){return"keypress"===e.type?yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ns=Fa.extend({dataTransfer:null}),rs=Ma.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:vt}),is=Je.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),os=Fa.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),as={eventTypes:jo,extractEvents:function(e,t,n,r){var i=Bo.get(e);if(!i)return null;switch(e){case"keypress":if(0===yt(n))return null;case"keydown":case"keyup":e=ts;break;case"blur":case"focus":e=Qa;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ns;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rs;break;case Eo:case So:case To:e=$a;break;case wo:e=is;break;case"scroll":e=Ma;break;case"wheel":e=os;break;case"copy":case"cut":case"paste":e=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ua;break;default:e=Je}return qe(t=e.getPooled(i,t,n,r)),t}};if(Ai)throw Error(r(101));Ai=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),s(),wi=Be,Oi=Ue,Ri=je,c({SimpleEventPlugin:as,EnterLeaveEventPlugin:Ba,ChangeEventPlugin:Ca,SelectEventPlugin:Xa,BeforeInputEventPlugin:wa});var ss,us,cs,ls,fs=[],hs=-1,ds={},ps={current:ds},vs={current:!1},ms=ds,gs=yi.unstable_runWithPriority,ys=yi.unstable_scheduleCallback,_s=yi.unstable_cancelCallback,bs=yi.unstable_requestPaint,Es=yi.unstable_now,Ss=yi.unstable_getCurrentPriorityLevel,Ts=yi.unstable_ImmediatePriority,ws=yi.unstable_UserBlockingPriority,Os=yi.unstable_NormalPriority,Rs=yi.unstable_LowPriority,As=yi.unstable_IdlePriority,Ps={},xs=yi.unstable_shouldYield,Cs=void 0!==bs?bs:function(){},Ms=null,Ls=null,ks=!1,Is=Es(),Ds=1e4>Is?Es:function(){return Es()-Is},Ns={current:null},Fs=null,Us=null,js=null,Bs=!1,Gs=Yi.ReactCurrentBatchConfig,Hs=(new mi.Component).refs,Vs={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Y(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=br(),i=Gs.suspense;(i=zt(r=Er(r,e,i),i)).payload=t,null!=n&&(i.callback=n),Wt(e,i),Sr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=br(),i=Gs.suspense;(i=zt(r=Er(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),Wt(e,i),Sr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=br(),r=Gs.suspense;(r=zt(n=Er(n,e,r),r)).tag=2,null!=t&&(r.callback=t),Wt(e,r),Sr(e,n)}},zs=Array.isArray,Ws=nn(!0),Ys=nn(!1),qs={},Ks={current:qs},Xs={current:qs},$s={current:qs},Js={current:0},Qs=Yi.ReactCurrentDispatcher,Zs=Yi.ReactCurrentBatchConfig,eu=0,tu=null,nu=null,ru=null,iu=!1,ou={readContext:Gt,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useResponder:fn,useDeferredValue:fn,useTransition:fn},au={readContext:Gt,useCallback:Cn,useContext:Gt,useEffect:wn,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Sn(4,2,An.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sn(4,2,e,t)},useMemo:function(e,t){var n=pn();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pn();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=In.bind(null,tu,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},pn().memoizedState=e},useState:_n,useDebugValue:xn,useResponder:ln,useDeferredValue:function(e,t){var n=_n(e),r=n[0],i=n[1];return wn((function(){var n=Zs.suspense;Zs.suspense=void 0===t?null:t;try{i(e)}finally{Zs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=_n(!1),n=t[0];return t=t[1],[Cn(kn.bind(null,t,e),[t,e]),n]}},su={readContext:Gt,useCallback:Mn,useContext:Gt,useEffect:On,useImperativeHandle:Pn,useLayoutEffect:Rn,useMemo:Ln,useReducer:gn,useRef:En,useState:function(){return gn(mn)},useDebugValue:xn,useResponder:ln,useDeferredValue:function(e,t){var n=gn(mn),r=n[0],i=n[1];return On((function(){var n=Zs.suspense;Zs.suspense=void 0===t?null:t;try{i(e)}finally{Zs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=gn(mn),n=t[0];return t=t[1],[Mn(kn.bind(null,t,e),[t,e]),n]}},uu={readContext:Gt,useCallback:Mn,useContext:Gt,useEffect:On,useImperativeHandle:Pn,useLayoutEffect:Rn,useMemo:Ln,useReducer:yn,useRef:En,useState:function(){return yn(mn)},useDebugValue:xn,useResponder:ln,useDeferredValue:function(e,t){var n=yn(mn),r=n[0],i=n[1];return On((function(){var n=Zs.suspense;Zs.suspense=void 0===t?null:t;try{i(e)}finally{Zs.suspense=n}}),[e,t]),r},useTransition:function(e){var t=yn(mn),n=t[0];return t=t[1],[Mn(kn.bind(null,t,e),[t,e]),n]}},cu=null,lu=null,fu=!1,hu=Yi.ReactCurrentOwner,du=!1,pu={dehydrated:null,retryTime:0};ss=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},us=function(){},cs=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a,s,u=t.stateNode;switch(rn(Ks.current),e=null,n){case"input":o=P(u,o),r=P(u,r),e=[];break;case"option":o=I(u,o),r=I(u,r),e=[];break;case"select":o=gi({},o,{value:void 0}),r=gi({},r,{value:void 0}),e=[];break;case"textarea":o=N(u,o),r=N(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=Ae)}for(a in we(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(s in u=o[a])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Mi.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Mi.hasOwnProperty(a)?(null!=c&&Re(i,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},ls=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var vu,mu="function"==typeof WeakSet?WeakSet:Set,gu="function"==typeof WeakMap?WeakMap:Map,yu=Math.ceil,_u=Yi.ReactCurrentDispatcher,bu=Yi.ReactCurrentOwner,Eu=0,Su=8,Tu=16,wu=32,Ou=0,Ru=1,Au=2,Pu=3,xu=4,Cu=5,Mu=Eu,Lu=null,ku=null,Iu=0,Du=Ou,Nu=null,Fu=1073741823,Uu=1073741823,ju=null,Bu=0,Gu=!1,Hu=0,Vu=500,zu=null,Wu=!1,Yu=null,qu=null,Ku=!1,Xu=null,$u=90,Ju=null,Qu=0,Zu=null,ec=0;vu=function(e,t,n){var i=t.expirationTime;if(null!==e){var o=t.pendingProps;if(e.memoizedProps!==o||vs.current)du=!0;else{if(i<n){switch(du=!1,t.tag){case 3:Xn(t),Bn();break;case 5:if(sn(t),4&t.mode&&1!==n&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:St(t.type)&&Rt(t);break;case 4:on(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,o=t.type._context,bt(Ns,o._currentValue),o._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?$n(e,t,n):(bt(Js,1&Js.current),null!==(t=er(e,t,n))?t.sibling:null);bt(Js,1&Js.current);break;case 19:if(i=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(i)return Zn(e,t,n);t.effectTag|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null),bt(Js,Js.current),!i)return null}return er(e,t,n)}du=!1}}else du=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=Et(t,ps.current),Bt(t,n),o=dn(null,t,i,e,o,n),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(i)){var a=!0;Rt(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ht(t);var s=i.getDerivedStateFromProps;"function"==typeof s&&Xt(t,i,s,e),o.updater=Vs,t.stateNode=o,o._reactInternalFiber=t,Zt(t,i,e,n),t=Kn(null,t,i,!0,a,n)}else t.tag=0,Gn(null,t,o,n),t=t.child;return t;case 16:e:{if(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(o),1!==o._status)throw o._result;switch(o=o._result,t.type=o,a=t.tag=function(e){if("function"==typeof e)return Jr(e)?1:0;if(null!=e){if((e=e.$$typeof)===io)return 11;if(e===so)return 14}return 2}(o),e=Nt(o,e),a){case 0:t=Yn(null,t,o,e,n);break e;case 1:t=qn(null,t,o,e,n);break e;case 11:t=Hn(null,t,o,e,n);break e;case 14:t=Vn(null,t,o,Nt(o.type,e),i,n);break e}throw Error(r(306,o,""))}return t;case 0:return i=t.type,o=t.pendingProps,Yn(e,t,i,o=t.elementType===i?o:Nt(i,o),n);case 1:return i=t.type,o=t.pendingProps,qn(e,t,i,o=t.elementType===i?o:Nt(i,o),n);case 3:if(Xn(t),i=t.updateQueue,null===e||null===i)throw Error(r(282));if(i=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,Vt(e,t),qt(t,i,null,n),(i=t.memoizedState.element)===o)Bn(),t=er(e,t,n);else{if((o=t.stateNode.hydrate)&&(lu=De(t.stateNode.containerInfo.firstChild),cu=t,o=fu=!0),o)for(n=Ys(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Gn(e,t,i,n),Bn();t=t.child}return t;case 5:return sn(t),null===e&&Fn(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,Ie(i,o)?s=null:null!==a&&Ie(i,a)&&(t.effectTag|=16),Wn(e,t),4&t.mode&&1!==n&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Gn(e,t,s,n),t=t.child),t;case 6:return null===e&&Fn(t),null;case 13:return $n(e,t,n);case 4:return on(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ws(t,null,i,n):Gn(e,t,i,n),t.child;case 11:return i=t.type,o=t.pendingProps,Hn(e,t,i,o=t.elementType===i?o:Nt(i,o),n);case 7:return Gn(e,t,t.pendingProps,n),t.child;case 8:case 12:return Gn(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value;var u=t.type._context;if(bt(Ns,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=Ga(u,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823))){if(s.children===o.children&&!vs.current){t=er(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===i&&0!=(l.observedBits&a)){1===u.tag&&((l=zt(n,null)).tag=2,Wt(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),jt(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Gn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,i=(a=t.pendingProps).children,Bt(t,n),i=i(o=Gt(o,a.unstable_observedBits)),t.effectTag|=1,Gn(e,t,i,n),t.child;case 14:return a=Nt(o=t.type,t.pendingProps),Vn(e,t,o,a=Nt(o.type,a),i,n);case 15:return zn(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Nt(i,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,St(i)?(e=!0,Rt(t)):e=!1,Bt(t,n),Jt(t,i,o),Zt(t,i,o,n),Kn(null,t,i,!0,e,n);case 19:return Zn(e,t,n)}throw Error(r(156,t.tag))};var tc=null,nc=null;hi.prototype.render=function(e){ui(e,this._internalRoot,null,null)},hi.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ui(null,e,null,(function(){t[ca]=null}))},yo=function(e){if(13===e.tag){var t=Dt(br(),150,100);Sr(e,t),fi(e,t)}},_o=function(e){13===e.tag&&(Sr(e,3),fi(e,3))},bo=function(e){if(13===e.tag){var t=br();Sr(e,t=Er(t,e,null)),fi(e,t)}},Ii=function(e,t,n){switch(t){case"input":if(M(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=Be(i);if(!o)throw Error(r(90));A(i),M(i,o)}}}break;case"textarea":U(e,n);break;case"select":null!=(t=n.value)&&D(e,!!n.multiple,t,!1)}},d=Pr,p=function(e,t,n,r,i){var o=Mu;Mu|=4;try{return Ct(98,e.bind(null,t,n,r,i))}finally{(Mu=o)===Eu&&kt()}},v=function(){(Mu&(1|Tu|wu))===Eu&&(function(){if(null!==Ju){var e=Ju;Ju=null,e.forEach((function(e,t){si(t,e),Or(t)})),kt()}}(),Vr())},Fi=function(e,t){var n=Mu;Mu|=2;try{return e(t)}finally{(Mu=n)===Eu&&kt()}};var rc,ic,oc={Events:[Ue,je,Be,c,Ci,qe,function(e){J(e,Ye)},f,h,be,Z,Vr,{current:!1}]};ic=(rc={findFiberByHostInstance:Fe,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);tc=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},nc=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(gi({},rc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=X(e))?null:e.stateNode},findFiberByHostInstance:function(e){return ic?ic(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=vi,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw Error(r(268,Object.keys(e)))}return e=null===(e=X(t))?null:e.stateNode},t.flushSync=function(e,t){if((Mu&(Tu|wu))!==Eu)throw Error(r(187));var n=Mu;Mu|=1;try{return Ct(99,e.bind(null,t))}finally{Mu=n,kt()}},t.hydrate=function(e,t,n){if(!di(t))throw Error(r(200));return pi(null,e,t,!0,n)},t.render=function(e,t,n){if(!di(t))throw Error(r(200));return pi(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!di(e))throw Error(r(40));return!!e._reactRootContainer&&(xr((function(){pi(null,null,e,!1,(function(){e._reactRootContainer=null,e[ca]=null}))})),!0)},t.unstable_batchedUpdates=Pr,t.unstable_createPortal=function(e,t){return vi(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!di(n))throw Error(r(200));if(null==e||void 0===e._reactInternalFiber)throw Error(r(38));return pi(e,t,n,!1,i)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(576)},function(e,t,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function r(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function i(e){return void 0===(e=e[0])?null:e}function o(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],u=o+1,c=e[u];if(void 0!==s&&0>a(s,n))void 0!==c&&0>a(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==c&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}return null}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function s(e){for(var t=i(k);null!==t;){if(null===t.callback)o(k);else{if(!(t.startTime<=e))break;o(k),t.sortIndex=t.expirationTime,r(L,t)}t=i(k)}}function u(e){if(j=!1,s(e),!U)if(null!==i(L))U=!0,f(c);else{var t=i(k);null!==t&&h(u,t.startTime-e)}}function c(e,n){U=!1,j&&(j=!1,d()),F=!0;var r=N;try{for(s(n),D=i(L);null!==D&&(!(D.expirationTime>n)||e&&!p());){var a=D.callback;if(null!==a){D.callback=null,N=D.priorityLevel;var c=a(D.expirationTime<=n);n=t.unstable_now(),"function"==typeof c?D.callback=c:D===i(L)&&o(L),s(n)}else o(L);D=i(L)}if(null!==D)var l=!0;else{var f=i(k);null!==f&&h(u,f.startTime-n),l=!1}return l}finally{D=null,N=r,F=!1}}function l(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var f,h,d,p,v;if("undefined"==typeof window||"function"!=typeof MessageChannel){var m=null,g=null,y=function(){if(null!==m)try{var e=t.unstable_now();m(!0,e),m=null}catch(e){throw setTimeout(y,0),e}},_=Date.now();t.unstable_now=function(){return Date.now()-_},f=function(e){null!==m?setTimeout(f,0,e):(m=e,setTimeout(y,0))},h=function(e,t){g=setTimeout(e,t)},d=function(){clearTimeout(g)},p=function(){return!1},v=t.unstable_forceFrameRate=function(){}}else{var b=window.performance,E=window.Date,S=window.setTimeout,T=window.clearTimeout;if("undefined"!=typeof console){window.cancelAnimationFrame;window.requestAnimationFrame}if("object"==typeof b&&"function"==typeof b.now)t.unstable_now=function(){return b.now()};else{var w=E.now();t.unstable_now=function(){return E.now()-w}}var O=!1,R=null,A=-1,P=5,x=0;p=function(){return t.unstable_now()>=x},v=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e||(P=0<e?Math.floor(1e3/e):5)};var C=new MessageChannel,M=C.port2;C.port1.onmessage=function(){if(null!==R){var e=t.unstable_now();x=e+P;try{R(!0,e)?M.postMessage(null):(O=!1,R=null)}catch(e){throw M.postMessage(null),e}}else O=!1},f=function(e){R=e,O||(O=!0,M.postMessage(null))},h=function(e,n){A=S((function(){e(t.unstable_now())}),n)},d=function(){T(A),A=-1}}var L=[],k=[],I=1,D=null,N=3,F=!1,U=!1,j=!1,B=v;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){U||F||(U=!0,f(c))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return i(L)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,o){var a=t.unstable_now();if("object"==typeof o&&null!==o){var s=o.delay;s="number"==typeof s&&0<s?a+s:a,o="number"==typeof o.timeout?o.timeout:l(e)}else o=l(e),s=a;return e={id:I++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,r(k,e),null===i(L)&&e===i(k)&&(j?d():j=!0,h(u,s-a))):(e.sortIndex=o,r(L,e),U||F||(U=!0,f(c))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();s(e);var n=i(L);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||p()},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalPlayerView=void 0;var o,a=n(0),s=n(227),u=n(228),c=n(230),l=n(581);!function(e){e[e.Gate=0]="Gate",e[e.Watch=1]="Watch"}(o||(o={}));var f=function(e){function t(t){var n=e.call(this,t)||this;return n.onEnd=n.endHandle.bind(n),n.onError=n.errorHandle.bind(n),n.onFull=n.fullHandle.bind(n),n.onPlay=n.playHandle.bind(n),n.onStop=n.stopHandle.bind(n),n.windowMessage=new u.WindowMessage,n.windowMessageHandler=new u.WindowMessageHandler,n.driver=null,n.isDefaultMute=void 0,n.defaultAudioVolume=void 0,n.state=n.createInitialState(),n}return i(t,e),t.prototype.render=function(){var e=this,t=this.props.externalLive,n=this.props.playerSettings,r="never"!==n.commentVisible&&!this.props.isNativePlayerDevice,i="on"===n.commentVisible;switch(this.state.playerStatus){case o.Watch:return a.createElement(l.WatchPlayer,{apiBaseUrl:this.props.apiBaseUrl,audienceToken:t.audienceToken,autoStopSec:n.autoStopSec,bannerUrl:n.bannerUrl||t.bannerUrl,beginTime:t.beginTime,broadcastId:t.broadcastId,dwc:n.dwc,endTime:t.endTime,isAutoPlay:n.isAutoPlay,isCommentDefaultVisible:i,isDefaultMute:n.isDefaultMute,defaultAudioVolume:n.defaultAudioVolume,isNativePlayerDevice:this.props.isNativePlayerDevice,isVideoClickable:n.isVideoClickable,linkUrl:t.linkUrl,niconicoLinkVisible:n.niconicoLinkVisible,onEnd:this.onEnd,onError:this.onError,onFull:this.onFull,onPlay:this.onPlay,onStop:this.onStop,openInNewWindow:n.openInNewWindow,openTime:t.openTime,programId:t.programId,serverTime:t.serverTime,vposBaseTime:t.vposBaseTime,streamQuality:n.streamQuality,title:t.programTitle,userCommentRenderEnabled:r,webSocketEndpointUrl:this.props.webSocketEndpointUrl,noUI:n.noUI,onMount:function(t){e.driver=t},onVideoPlayerInitialized:function(t){e.defaultAudioVolume=t.volume,e.isDefaultMute=t.isMute}});case o.Gate:return a.createElement(c.Gate,{bannerUrl:n.bannerUrl||t.bannerUrl,beginTime:t.beginTime,endTime:t.endTime,statusVisible:n.gateStatusVisible,linkUrl:t.linkUrl,niconicoLinkVisible:n.niconicoLinkVisible,openInNewWindow:n.openInNewWindow,title:t.programTitle,type:this.state.gateType,noUI:n.noUI});default:return null}},t.prototype.componentDidMount=function(){var e=this;this.windowMessageHandler.initialize({onPlay:function(){e.setState({playerStatus:o.Watch,gateType:null})},onStop:function(){e.setState({playerStatus:o.Gate,gateType:c.GateType.StoppedByUser})},onAudioVolumeSet:function(t){e.driver&&e.driver.videoPlayer.audio.volume.set(t)},onAudioVolumeUp:function(t){e.driver&&e.driver.videoPlayer.audio.volume.up(t)},onAudioVolumeDown:function(t){e.driver&&e.driver.videoPlayer.audio.volume.down(t)},onAudioMute:function(){e.driver&&e.driver.videoPlayer.audio.mute()},onAudioUnmute:function(){e.driver&&e.driver.videoPlayer.audio.unmute()}}),void 0!==this.isDefaultMute&&void 0!==this.defaultAudioVolume&&this.windowMessage.post(u.WindowMessageCreator.createInitializeCompleteMessage({audio:{volume:this.defaultAudioVolume,isMute:this.isDefaultMute}}))},t.prototype.createInitialState=function(){var e=this.props.externalLive.liveCycle;switch(e){case s.LiveCycle.BEFORE_OPEN:return{playerStatus:o.Gate,gateType:c.GateType.BeforeOpen};case s.LiveCycle.ONAIR:return{playerStatus:o.Watch,gateType:null};case s.LiveCycle.ENDED:return{playerStatus:o.Gate,gateType:c.GateType.AlreadyEnded};default:throw new Error("unknown lifecycle: "+e)}},t.prototype.playHandle=function(){this.windowMessage.post(u.WindowMessageCreator.createPlayMessage())},t.prototype.stopHandle=function(){this.updateGateType(c.GateType.StoppedByUser),this.windowMessage.post(u.WindowMessageCreator.createStopMessage())},t.prototype.endHandle=function(){this.updateGateType(c.GateType.StoppedByEnd)},t.prototype.fullHandle=function(){this.updateGateType(c.GateType.Full)},t.prototype.errorHandle=function(e){this.updateGateType(c.GateType.Unknown)},t.prototype.updateGateType=function(e){var t=this.state.gateType;(null===t||t<e)&&this.setState({playerStatus:o.Gate,gateType:e})},t}(a.Component);t.ExternalPlayerView=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessageHandler=void 0;var r=n(229),i=function(){function e(e){var t=this;void 0===e&&(e=window),this.windowObj=e,this.messageEventHandler=function(e){if(e.data.type)switch(e.data.type){case r.WindowMessageDataType.PLAYING_STATE:t.playingStateMessageHandler(e.data);break;case r.WindowMessageDataType.AUDIO_STATE:t.AudioStateMessageHandler(e.data)}},this.playingStateMessageHandler=function(e){if(t.handlers)switch(e.message){case r.PlayingStateEvent.PLAY:t.handlers.onPlay();break;case r.PlayingStateEvent.STOP:t.handlers.onStop()}},this.AudioStateMessageHandler=function(e){if(t.handlers)switch(e.message){case r.AudioStateEvent.VOLUME_SET:t.handlers.onAudioVolumeSet(e.payload.value);break;case r.AudioStateEvent.VOLUME_UP:t.handlers.onAudioVolumeUp(e.payload&&e.payload.step);break;case r.AudioStateEvent.VOLUME_DOWN:t.handlers.onAudioVolumeDown(e.payload&&e.payload.step);break;case r.AudioStateEvent.MUTE:t.handlers.onAudioMute();break;case r.AudioStateEvent.UNMUTE:t.handlers.onAudioUnmute()}}}return e.prototype.initialize=function(e){return this.handlers=e,!!this.windowObj&&(this.windowObj.removeEventListener("message",this.messageEventHandler),this.windowObj.addEventListener("message",this.messageEventHandler),!0)},e}();t.WindowMessageHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessage=t.WindowMessageCreator=void 0;var r=n(229),i=function(){function e(){}return e.createInitializeCompleteMessage=function(e){return{type:r.WindowMessageDataType.INITIALIZE_STATE,message:r.InitializeStateEvent.COMPLETE,payload:e}},e.createPlayMessage=function(){return{type:r.WindowMessageDataType.PLAYING_STATE,message:r.PlayingStateEvent.PLAY}},e.createStopMessage=function(){return{type:r.WindowMessageDataType.PLAYING_STATE,message:r.PlayingStateEvent.STOP}},e}();t.WindowMessageCreator=i;var o=function(){function e(e){void 0===e&&(e=window),this.windowObj=e}return e.prototype.post=function(e){return!(!this.windowObj||!this.windowObj.parent)&&(this.windowObj.parent.postMessage(e,"*"),!0)},e}();t.WindowMessage=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 73 76"},e),i.createElement("path",{d:"M0 23.65v37.89a6.36 6.36 0 0 0 6.39 6.32h7.53l4.12 6.61a1.51 1.51 0 0 0 1.34.72 1.53 1.53 0 0 0 1.31-.72l4.12-6.61h22.11l4.12 6.61a1.51 1.51 0 0 0 1.34.72 1.53 1.53 0 0 0 1.31-.72l4.13-6.61h8.36a6.35 6.35 0 0 0 6.39-6.32V23.65a6.35 6.35 0 0 0-6.39-6.32H41.99L56.05 3.44 52.56-.03 36.23 16.11 19.92.06l-3.5 3.45 14 13.82h-24A6.36 6.36 0 0 0 0 23.65z",fill:"#fff"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WatchPlayer=void 0;var o=n(582),a=n(117),s=n(13),u=n(0),c=n(635),l=n(637),f=n(638),h=n(714),d=n(115),p=n(269),v=function(e){function t(t){var n=e.call(this,t)||this;return n.isUserGestureNeededToPlay=!1,n.videoPlayer=null,n.userCommentPresenter=null,n.roomConnector=null,n.usecase=null,n.streamProtocol=p.VideoPlayer.suitableStreamProtocol(),n.roomProtocol=s.RoomProtocol.TlsWebSocket,n.isCommentableClient=!1,n.waitVideoReady=new Promise((function(e){n.onLoadStart=e})),n.getCurrentVposMs=n.currentVposMs.bind(n),n.onCommentButtonClick=n.commentButtonClickHandle.bind(n),n.onPlayButtonClick=n.playButtonClickHandle.bind(n),n.onPlayFailed=n._onPlayFailed.bind(n),n.onReloadButtonClick=n.reloadButtonClickHandle.bind(n),n.isUserGestureNeededToPlay=h.needsUserAction(navigator.userAgent,t.isDefaultMute),n.state={streamState:d.StreamState.FirstPreparing,onCanPlay:function(){},room:null,isCommentVisible:t.isCommentDefaultVisible,edgeStream:null,isCommentLocked:!0,isCommentModeNormal:!1},n.setUpUsecase(),n}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this.prefetchEdgeSteamIfNeeded().then((function(){return e.autoPlayOrShowPlayButton()})).catch(this.props.onError);var t=this.props.userCommentRenderEnabled?this.userCommentPresenter.renderUserComment.bind(this.userCommentPresenter):function(){};this.roomConnector=new l.RoomConnector(t,this.handleRealtimeOperatorCommand.bind(this),this.getCurrentVposMs.bind(this))},t.prototype.componentWillUnmount=function(){var e=this;this.usecase.end().then((function(){e.roomConnector.disconnect()})).catch(this.props.onError)},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.didPlayWithRoom(this.state.room,t.streamState,this.state.streamState)||this.didRoomComeWhilePlaying(t.room,this.state.room,this.state.streamState)){var r=this.props.userCommentRenderEnabled?function(e){n.userCommentPresenter.startRenderUserComment(e.chats)}:function(){};this.roomConnector.disconnect(),this.roomConnector.connect(this.state.room).then(r).catch((function(e){n.roomConnector.disconnect()}))}},t.prototype.render=function(){var e=this;return u.createElement("main",null,u.createElement(p.VideoPlayer,{ref:function(t){e.videoPlayer=t},isNativePlayerDevice:this.props.isNativePlayerDevice,isDefaultMute:this.props.isDefaultMute,defaultAudioVolume:this.props.defaultAudioVolume,autoStopSec:this.props.autoStopSec,linkUrl:this.props.linkUrl,niconicoLinkVisible:this.props.niconicoLinkVisible,bannerUrl:this.props.bannerUrl,isVideoClickable:this.props.isVideoClickable,title:this.props.title,isCommentSwitchable:this.props.userCommentRenderEnabled,isCommentVisible:this.state.isCommentVisible,onCommentButtonClick:this.onCommentButtonClick,openInNewWindow:this.props.openInNewWindow,beginTime:this.props.beginTime,streamState:this.state.streamState,watchCount:this.state.watchCount,commentCount:this.state.commentCount,onPlayButtonClick:this.onPlayButtonClick,onStop:this.props.onStop,onReloadButtonClick:this.onReloadButtonClick,onLoadStart:this.onLoadStart,onPlayFailed:this.onPlayFailed,onError:this.props.onError,edgeStream:this.state.edgeStream,noUI:this.props.noUI,onMount:function(t){return e.props.onMount({videoPlayer:t})},onInitialized:function(t){return e.props.onVideoPlayerInitialized(t)}}),e.props.userCommentRenderEnabled?u.createElement(f.UserCommentPresenter,{ref:function(t){e.userCommentPresenter=t},getCurrentVposMs:e.getCurrentVposMs,isCommentIgnored:e.state.isCommentLocked||!e.state.isCommentModeNormal,isCommentVisible:e.state.isCommentVisible,slotCount:f.UserCommentPresenter.DEFAULT_SLOT_COUNT,useWebGL:f.UserCommentPresenter.DEFAULT_USE_WEB_GL}):null)},t.prototype.didPlayWithRoom=function(e,t,n){return null!==e&&!d.StreamState.isWatching(t)&&d.StreamState.isWatching(n)},t.prototype.didRoomComeWhilePlaying=function(e,t,n){return d.StreamState.isWatching(n)&&e!==t&&null!==t},t.prototype.setUpUsecase=function(){this.usecase=s.createPlayerUsecase({webSocketUrl:this.props.webSocketEndpointUrl,programTitle:this.props.title,openTimeMs:this.props.openTime.getTime(),beginTimeMs:this.props.beginTime.getTime(),endTimeMs:this.props.endTime?this.props.endTime.getTime():null,vposBaseTimeMs:this.props.vposBaseTime.getTime(),serverTimeMs:this.props.serverTime.getTime(),audienceToken:this.props.audienceToken,frontendId:o.FRONTEND_ID.relive_ext_player}),this.usecase.on("crowded",this.serverWillDisconnectHandle,this),this.usecase.on("no_permission",this.serverWillDisconnectHandle,this),this.usecase.on("service_temporarily_unavailable",this.serverWillDisconnectHandle,this),this.usecase.on("program_updated",this.programUpdateHandle,this),this.usecase.on("program_ended",this.programEndHandle,this),this.usecase.on("room_updated",this.serverRoomUpdatedHandle,this),this.usecase.on("connection_error",this.props.onError,this),this.usecase.on("seat_was_taken_over",this.props.onFull,this)},t.prototype.prefetchEdgeSteamIfNeeded=function(){return this.isUserGestureNeededToPlay?this.prepareEdgeStream():Promise.resolve()},t.prototype.serverRoomUpdatedHandle=function(e){this.setState({room:e})},t.prototype.autoPlayOrShowPlayButton=function(){this.props.isAutoPlay&&!this.isUserGestureNeededToPlay?this.startPlaying():this.showStreamReady()},t.prototype.startPlaying=function(){var e=this;null!==this.state.edgeStream?this.play():this.prepareEdgeStream().then((function(){e.play()}))},t.prototype.play=function(){this.setState({streamState:d.StreamState.Playing}),this.restorePlayerInitialState(),this.videoPlayer.play(),this.props.onPlay()},t.prototype.replay=function(){this.setState({streamState:d.StreamState.Playing}),this.restorePlayerInitialState(),this.videoPlayer.replay()},t.prototype.reloadButtonClickHandle=function(){var e=this;this.restorePlayerInitialState(),this.rePrepareEdgeStream().then((function(){e.replay()}))},t.prototype.playButtonClickHandle=function(){this.startPlaying()},t.prototype._onPlayFailed=function(e){this.showStreamReady()},t.prototype.waitEdgeStream=function(){var e=this;return new Promise((function(t){e.usecase.once("edge_stream_updated",t)}))},t.prototype.prepareEdgeStream=function(){if(this.state.edgeStream)throw new Error("Can not fetch edge stream twice.");return this.setState({streamState:d.StreamState.FirstPreparing}),this.getPromiseForEdgeStream(),this.usecase.play({connectableRoomProtocol:this.roomProtocol,dwc:this.props.dwc,isCommentableClient:this.isCommentableClient,priorStreamQuality:this.props.streamQuality||s.StreamQuality.Low,useLowLatencyStream:!1,watchableStreamProtocol:this.streamProtocol})},t.prototype.rePrepareEdgeStream=function(){this.setState({streamState:d.StreamState.Reloading});var e=this.getPromiseForEdgeStream();return this.usecase.reload().then((function(){return e}))},t.prototype.getPromiseForEdgeStream=function(){var e=this;return this.waitEdgeStream().then((function(t){return e.setState({edgeStream:t}),e.waitVideoReady})).then((function(){return e.videoPlayer.currentDelayMs(e.usecase.currentElapsedTimeFromOpenTime())})).then((function(t){e.setState({streamDelayMs:t})})).catch(this.props.onError.bind(this))},t.prototype.restorePlayerInitialState=function(){var e=this;c.fetch(c.generatePlayerJsonUrl(this.props.apiBaseUrl,this.props.programId)).then((function(t){e.setState({isCommentLocked:t.isCommentLocked,isCommentModeNormal:t.isCommentModeNormal})}))},t.prototype.showStreamReady=function(){this.setState({streamState:d.StreamState.Ready})},t.prototype.serverWillDisconnectHandle=function(){this.usecase.isReloading||this.props.onStop()},t.prototype.programUpdateHandle=function(e){this.setState({watchCount:e.watchCount,commentCount:e.commentCount})},t.prototype.programEndHandle=function(){this.videoPlayer.stop(),this.props.onEnd()},t.prototype.commentButtonClickHandle=function(){this.setState({isCommentVisible:!this.state.isCommentVisible})},t.prototype.handleRealtimeOperatorCommand=function(e){e instanceof a.CommentLock?this.setState({isCommentLocked:e.isLocked}):e instanceof a.CommentMode&&this.setState({isCommentModeNormal:e.isModeNormal})},t.prototype.currentVposMs=function(){return this.usecase.currentElapsedTimeFromOpenTime()-this.state.streamDelayMs},t}(u.Component);t.WatchPlayer=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.X_PUBLIC_API_TOKEN_KEY="X-Public-Api-Token",t.X_NICOLIVE_AUDIENCE_TOKEN_KEY="X-Nicolive-AudienceToken",t.FRONTEND_ID={nicolive_pc:9,nicolive_sp:10,relive_pc:12,relive_sp:86,relive_ext_player:88,nicoex_pc:91,nicoex_sp:108}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(234)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ads=t.AdData=t.ADS_JS_VERSION=void 0,t.ADS_JS_VERSION="2.29.1",function(e){!function(e){e.Gif="gif",e.Jpeg="Jpeg",e.Png="png",e.Swf="swf",e.Flv="flv",e.F4v="f4v",e.Mp4="mp4",e.Txt="txt",e.Html="html",e.Nil="nil"}(e.ContentType||(e.ContentType={}))}(t.AdData||(t.AdData={})),function(e){e.available=function(){return"undefined"!=typeof window&&void 0!==window.Ads},e.getBannerCountAll=function(){return e.available()?window.Ads.ALL:-1}}(t.Ads||(t.Ads={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.OPERATION_FORBIDDEN_CHASE_PLAYING="OperationForbiddenChasePlaying",e.OPERATION_FORBIDDEN_TIMESHIFT="OperationForbiddenTimeshift",e.OPERATION_FORBIDDEN_NON_LOGIN="OperationForbiddenNonLogin",e.CONTENT_VISIT_EXECUTION="ContentVisitExecution",e.PAGE_VISIT_EXECUTION="PageVisitExecution",e.NICOEX_CONFIRM="NicoexConfirm",e.NICOEX_ALERT="NicoexAlert"}(n=e.Code||(e.Code={})),function(e){e.PREMIUM_REGISTER="PremiumRegister"}(e.VistationTargetName||(e.VistationTargetName={})),e.DataFactory=r.createDataFactory(((t={})[n.OPERATION_FORBIDDEN_CHASE_PLAYING]=function(){return r.Payload.EMPTY_PARAMS},t[n.OPERATION_FORBIDDEN_TIMESHIFT]=function(){return r.Payload.EMPTY_PARAMS},t[n.OPERATION_FORBIDDEN_NON_LOGIN]=function(){return r.Payload.EMPTY_PARAMS},t[n.CONTENT_VISIT_EXECUTION]=function(e){return e},t[n.PAGE_VISIT_EXECUTION]=function(e){return e},t[n.NICOEX_CONFIRM]=function(e){return e},t[n.NICOEX_ALERT]=function(e){return e},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRONTEND_ID=t.X_NICOLIVE_AUDIENCE_TOKEN_KEY=t.X_PUBLIC_API_TOKEN_KEY=void 0,t.X_PUBLIC_API_TOKEN_KEY="X-Public-Api-Token",t.X_NICOLIVE_AUDIENCE_TOKEN_KEY="X-Nicolive-AudienceToken",t.FRONTEND_ID={nicolive_pc:9,nicolive_sp:10,relive_pc:12,relive_sp:86,relive_ext_player:88,nicoex_pc:91,nicoex_sp:108}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.INTRODUCE_START_SUCCESS="IntroduceStartSuccess",e.RESET_START_SUCCESS="ResetStartSuccess",e.RESET_SUCCESS="ResetSuccess",e.RESET_FAILED="ResetFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.INTRODUCE_START_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESET_START_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESET_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESET_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.POST_FAILED_FIRST_CHAR_SLASH="PostFailedFirstCharSlash",e.POST_FAILED_CONTAINS_HTML="PostFailedContainsHtml",e.POST_FAILED="PostFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.POST_FAILED_FIRST_CHAR_SLASH]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_FAILED_CONTAINS_HTML]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.SUCCESS="Success",e.FAILED="Failed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size=t.Position=t.Color=t.Message=void 0;var r=n(14),i=n(591);t.Color=i;var o=n(592);t.Position=o;var a=n(593);t.Size=a,function(e){var t,n;!function(e){e.POST_FAILED="PostFailed",e.POST_FAILED_BLANK_COMMENT="PostFailedBlankComment",e.POST_FAILED_SERVER_UNAVAILABLE="PostFailedServerUnavailable",e.POST_FAILED_CONSECUTIVE="PostFailedConsecutive",e.POST_DENIED_COMMENT_PENALTY="PostDeniedCommentPenalty"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.POST_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_FAILED_BLANK_COMMENT]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_FAILED_SERVER_UNAVAILABLE]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_FAILED_CONSECUTIVE]=function(){return r.Payload.EMPTY_PARAMS},t[n.POST_DENIED_COMMENT_PENALTY]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.COLOR_CODE_PATTERN=t.PREMIUM_COLOR_ALIAS_MAP=t.PremiumColorCommandAlias=t.PremiumColorCommand=t.BasicColorCommand=void 0,function(e){e.White="white",e.Red="red",e.Pink="pink",e.Orange="orange",e.Yellow="yellow",e.Green="green",e.Cyan="cyan",e.Blue="blue",e.Purple="purple",e.Black="black"}(t.BasicColorCommand||(t.BasicColorCommand={})),function(e){e.White2="white2",e.Red2="red2",e.Pink2="pink2",e.Orange2="orange2",e.Yellow2="yellow2",e.Green2="green2",e.Cyan2="cyan2",e.Blue2="blue2",e.Purple2="purple2",e.Black2="black2"}(r=t.PremiumColorCommand||(t.PremiumColorCommand={})),function(e){e.Niconicowhite="niconicowhite",e.Truered="truered",e.Passionorange="passionorange",e.Madyellow="madyellow",e.Elementalgreen="elementalgreen",e.Marineblue="marineblue",e.Nobleviolet="nobleviolet"}(t.PremiumColorCommandAlias||(t.PremiumColorCommandAlias={})),t.PREMIUM_COLOR_ALIAS_MAP={niconicowhite:r.White2,truered:r.Red2,passionorange:r.Orange2,madyellow:r.Yellow2,elementalgreen:r.Green2,marineblue:r.Blue2,nobleviolet:r.Purple2},t.COLOR_CODE_PATTERN=/^#[\da-f]{6}$/i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionCommand=void 0,function(e){e.Ue="ue",e.Naka="naka",e.Shita="shita"}(t.PositionCommand||(t.PositionCommand={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeCommand=void 0,function(e){e.Big="big",e.Medium="medium",e.Small="small"}(t.SizeCommand||(t.SizeCommand={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.START_FAILED="StartFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.START_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.DELETE_DENIED_USING="DeleteDeniedUsing"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.DELETE_DENIED_USING]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size=t.Position=void 0,function(e){e.UE="ue",e.SHITA="shita",e.HIDARI="hidari",e.MIGI="migi",e.HIDARI_UE="hidariue",e.HIDARI_SHITA="hidarishita",e.MIGI_UE="migiue",e.MIGI_SHITA="migishita",e.CENTER="center"}(t.Position||(t.Position={})),function(e){e.SMALL="small",e.MIDDLE="middle",e.LARGE="large",e.S="s",e.M="m",e.B="b",e.BIG="big"}(t.Size||(t.Size={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);r.__exportStar(n(598),t),r.__exportStar(n(602),t),r.__exportStar(n(154),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);r.__exportStar(n(599),t),r.__exportStar(n(235),t),r.__exportStar(n(600),t),r.__exportStar(n(601),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Category=void 0,function(e){e.Common="common",e.Tries="try",e.Live="live",e.Req="req",e.Face="face",e.Totu="totu"}(t.Category||(t.Category={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CategorySearchWord=void 0;var r=n(235);t.CategorySearchWord=Object.freeze({Common:[r.CategoryTag.Common,r.CategoryTag.Politics,r.CategoryTag.Animal,r.CategoryTag.Cooking,r.CategoryTag.Play,r.CategoryTag.Sing,r.CategoryTag.Dance,r.CategoryTag.Lecture,r.CategoryTag.Draw].join(" OR "),CommonExcludingTry:[r.CategoryTag.Common,r.CategoryTag.Politics,r.CategoryTag.Animal].join(" OR "),Tries:[r.CategoryTag.Cooking,r.CategoryTag.Play,r.CategoryTag.Sing,r.CategoryTag.Dance,r.CategoryTag.Lecture,r.CategoryTag.Draw].join(" OR "),Game:[r.CategoryTag.Live,r.CategoryTag.LiveOld,r.CategoryTag.LiveOld2].join(" OR "),Req:[r.CategoryTag.Request,r.CategoryTag.RequestOld].join(" OR "),Face:[r.CategoryTag.Face].join(" OR "),Totu:[r.CategoryTag.Totu].join(" OR ")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExcludeTag=void 0;var r=n(154),i=n(155);t.ExcludeTag=i.defineObjectEnum({Face:r.Tag.Face,SmartPhoneBroadcast:r.Tag.SmartPhoneBroadcast})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortOrder=t.SortKey=void 0,function(e){e.UploadTime="uploadTime",e.OpenTime="openTime",e.StartTime="startTime",e.LiveEndTime="liveEndTime",e.UserId="userId",e.ChannelId="channelId",e.CommunityId="communityId",e.ViewCounter="viewCounter",e.CommentCounter="commentCounter",e.TimeshiftMode="timeshiftMode",e.TimeshiftExpired="timeshiftExpired",e.ScoreTimeshiftReserved="scoreTimeshiftReserved",e.CommunityLevel="communityLevel",e.CommunityUserCount="communityUserCount",e.CommunityCreated="communityCreated",e.CommentsPerMinutes="commentsPerMinutes",e.RecentExcitedIndex="recentExcitedIndex",e.Popular="_popular",e.LiveRecent="_liveRecent",e.UserLevel="userLevel",e.Focus="focus"}(t.SortKey||(t.SortKey={})),function(e){e.Asc="asc",e.Desc="desc"}(t.SortOrder||(t.SortOrder={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.SERVER_UNAVAILABLE="ServerUnavailable",e.SERVER_UNAVAILABLE_WEBSOCKET="ServerUnavailableWebsocket",e.CONNECTION_FAILED_PING_TIMEOUT="ConnectionFailedPingTimeout"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.SERVER_UNAVAILABLE]=function(){return r.Payload.EMPTY_PARAMS},t[n.SERVER_UNAVAILABLE_WEBSOCKET]=function(){return r.Payload.EMPTY_PARAMS},t[n.CONNECTION_FAILED_PING_TIMEOUT]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.REGISTER_SUCCESS="RegisterSuccess",e.REGISTER_FAILED="RegisterFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.REGISTER_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.REGISTER_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.REGISTER_FAILED_UPPER_LIMIT="RegisterFailedUpperLimit",e.REGISTER_FAILED="RegisterFailed",e.DELETE_FAILED="DeleteFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.REGISTER_FAILED_UPPER_LIMIT]=function(){return r.Payload.EMPTY_PARAMS},t[n.REGISTER_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t[n.DELETE_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.CONFIRM_DIALOG_SHOW="ConfirmDialogShow",e.ALERT_DIALOG_SHOW="AlertDialogShow",e.NICOPOINT_BUY_CONFIRM="NicopointBuyConfirm"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.CONFIRM_DIALOG_SHOW]=function(e){return e},t[n.ALERT_DIALOG_SHOW]=function(e){return e},t[n.NICOPOINT_BUY_CONFIRM]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamQuality=t.StreamAllocationType=t.Name=void 0,function(e){e.Leo="leo",e.Virgo="virgo"}(t.Name||(t.Name={})),function(e){e.Single="single",e.AllHigh="allHigh",e.PremiumHigh="premiumHigh"}(t.StreamAllocationType||(t.StreamAllocationType={})),function(e){e.BroadcasterHigh="broadcaster_high",e.BroadcasterLow="broadcaster_low",e.Abr="abr",e.SuperHigh="super_high",e.High="high",e.Normal="normal",e.Low="low",e.SuperLow="super_low"}(t.StreamQuality||(t.StreamQuality={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.START_FAILED="StartFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.START_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentType=void 0,function(e){e.Video="video",e.Manga="manga",e.Illust="illust"}(t.ContentType||(t.ContentType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.TAKEOVER_NOT_PREMIUM="TakeoverNotPremium",e.TAKEOVER_HAVE_NOT_TICKET="TakeoverHaveNotTicket",e.TAKEOVER_HAVE_NOT_OFFICIAL_TICKET="TakeoverHaveNotOfficialTicket",e.TAKEOVER_NOT_CHANNEL_MEMBER="TakeoverNotChannelMember"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.TAKEOVER_NOT_PREMIUM]=function(){return r.Payload.EMPTY_PARAMS},t[n.TAKEOVER_HAVE_NOT_TICKET]=function(){return r.Payload.EMPTY_PARAMS},t[n.TAKEOVER_HAVE_NOT_OFFICIAL_TICKET]=function(){return r.Payload.EMPTY_PARAMS},t[n.TAKEOVER_NOT_CHANNEL_MEMBER]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.SERVER_UNAVAILABLE_TEMPORARILY="ServerUnavailableTemporarily",e.UNDER_MAINTENANCE="UnderMaintenance"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.SERVER_UNAVAILABLE_TEMPORARILY]=function(){return r.Payload.EMPTY_PARAMS},t[n.UNDER_MAINTENANCE]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0,function(e){e.Channel="channel",e.Community="community"}(t.Type||(t.Type={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.QUALITY_CHANGE_DENIED_NOT_PREMIUM="QualityChangeDeniedNotPremium"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.QUALITY_CHANGE_DENIED_NOT_PREMIUM]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0,function(e){e.Normal="",e.Category="category",e.System="system"}(t.Type||(t.Type={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.PLAYBACK_RATE_CHANGE_DENIED_NOT_PREMIUM="PlaybackRateChangeDeniedNotPremium",e.CHASE_PLAY_START_CHANGE_DENIED_NOT_PREMIUM="ChasePlayStartChangeDeniedNotPremium",e.CHASE_PLAY_START_SUCCESS="ChasePlayStartSuccess",e.LIVE_PLAY_START_SUCCESS="LivePlayStartSuccess",e.RESUME_PLAY_START_SUCCESS="ResumePlayStartSuccess",e.WATCH_FAILED_EXPIRED="WatchFailedExpired"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.PLAYBACK_RATE_CHANGE_DENIED_NOT_PREMIUM]=function(){return r.Payload.EMPTY_PARAMS},t[n.CHASE_PLAY_START_CHANGE_DENIED_NOT_PREMIUM]=function(){return r.Payload.EMPTY_PARAMS},t[n.CHASE_PLAY_START_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.LIVE_PLAY_START_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESUME_PLAY_START_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.WATCH_FAILED_EXPIRED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramStatus=t.Mode=t.PageId=void 0,function(e){e.Editstream="editstream",e.History="history",e.Index="index",e.My="my",e.Ranking="ranking",e.Recent="recent",e.Timetable="timetable",e.Watch="watch"}(t.PageId||(t.PageId={})),function(e){e.Landing="landing"}(t.Mode||(t.Mode={})),function(e){e.Onair="onair",e.ComingSoon="comingsoon",e.Closed="closed"}(t.ProgramStatus||(t.ProgramStatus={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermittedActions=t.AccountType=void 0,function(e){e.Premium="premium",e.Standard="standard",e.Non="non"}(t.AccountType||(t.AccountType={})),function(e){e.OPERATOR_COMMENT="OPERATOR_COMMENT",e.DISABLE_COMMENT="DISABLE_COMMENT",e.COMMENT_LOCK="COMMENT_LOCK",e.JUMP="JUMP",e.IGNORE_JUMP="IGNORE_JUMP",e.ENQUETE="ENQUETE",e.STATISTICS="STATISTICS",e.SWITCH_PREMIUM="SWITCH_PREMIUM",e.END_PROGRAM="END_PROGRAM",e.CHANGE_ROOM="CHANGE_ROOM",e.SHOW_STREAMS="SHOW_STREAMS",e.COMMENT_MONITORING="COMMENT_MONITORING",e.FINGER_PRINTING="FINGER_PRINTING",e.VIDEO_AD="VIDEO_AD",e.IGNORE_VIDEO_AD="IGNORE_VIDEO_AD",e.NO_STREAM="NO_STREAM",e.CHANGE_STREAMS="CHANGE_STREAMS",e.POST_BSP_COMMENT="POST_BSP_COMMENT",e.GET_BROADCAST_STREAM_LOCATION="GET_BROADCAST_STREAM_LOCATION",e.START_PROGRAM="START_PROGRAM",e.EXTEND_PROGRAM="EXTEND_PROGRAM",e.EDIT_TAG="EDIT_TAG",e.EDIT_SSNG_COMMENT_FILTER="EDIT_SSNG_COMMENT_FILTER",e.ALLEGATE_COMMENT="ALLEGATE_COMMENT",e.ALLEGRATE_COMMENT="ALLEGRATE_COMMENT",e.BROADCASTER_COMMENT="BROADCASTER_COMMENT",e.CHANGE_TRIAL_WATCH="CHANGE_TRIAL_WATCH",e.QUOTE_VIDEO="QUOTE_VIDEO",e.ADD_ICHIBA_ITEM="ADD_ICHIBA_ITEM",e.CHASE_PLAY="CHASE_PLAY",e.USE_FIXED_STREAM_URI="USE_FIXED_STREAM_URI"}(t.PermittedActions||(t.PermittedActions={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.FOLLOW_SUCCESS="FollowSuccess",e.UNFOLLOW_SUCCESS="UnfollowSuccess",e.FOLLOW_FAILED="FollowFailed",e.UNFOLLOW_FAILED="UnfollowFailed"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.FOLLOW_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.UNFOLLOW_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.FOLLOW_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t[n.UNFOLLOW_FAILED]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.RESERVE_FAILED_NON_LOGIN="reserveFailedNonLogin",e.RESERVE_FAILED_DUPLICATED_RESERVATION="reserveFailedDuplicatedReservation",e.RESERVE_FAILED_USED_VIEWING_RIGHTS="reserveFailedUsedViewingRights",e.RESERVE_FAILED_SYSTEM_ERROR="reserveFailedSystemError",e.RESERVE_FAILED_FULL_RESERVATION="reserveFailedFullReservation",e.RESERVE_FAILED_PAST_DEADLINE="reserveFailedPastDeadline",e.RESERVE_SUCCESS="reserveSuccess",e.DELETE_FAILED_NON_LOGIN="deleteFailedNonLogin",e.DELETE_FAILED_INVALID_PROGRAM_ID="deleteFailedInvalidProgramId",e.DELETE_FAILED_SYSTEM_ERROR="deleteFailedSystemError",e.DELETE_SUCCESS="deleteSuccess",e.DELETE_CONFIRM="deleteConfirm"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.RESERVE_FAILED_NON_LOGIN]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESERVE_FAILED_DUPLICATED_RESERVATION]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESERVE_FAILED_USED_VIEWING_RIGHTS]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESERVE_FAILED_SYSTEM_ERROR]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESERVE_FAILED_FULL_RESERVATION]=function(e){return e},t[n.RESERVE_FAILED_PAST_DEADLINE]=function(){return r.Payload.EMPTY_PARAMS},t[n.RESERVE_SUCCESS]=function(e){return e},t[n.DELETE_FAILED_NON_LOGIN]=function(){return r.Payload.EMPTY_PARAMS},t[n.DELETE_FAILED_INVALID_PROGRAM_ID]=function(){return r.Payload.EMPTY_PARAMS},t[n.DELETE_FAILED_SYSTEM_ERROR]=function(){return r.Payload.EMPTY_PARAMS},t[n.DELETE_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t[n.DELETE_CONFIRM]=function(){return r.Payload.EMPTY_PARAMS},t)),function(e){e.PREMIUM_REGISTRATION="premiumRegistration",e.OVERWRITE="overwrite",e.OVERWRITE_THEN_USE_TICKET="overwriteThenUseTicket",e.EDIT_RESERVATION_LIST="editReservationList"}(e.SolutionToFullReservation||(e.SolutionToFullReservation={}))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.START_ACCEPTING_SERIAL_CODE_AUTHENTICATION_SUCCESS="StartAcceptingSerialCodeAuthenticationSuccess"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.START_ACCEPTING_SERIAL_CODE_AUTHENTICATION_SUCCESS]=function(e){return e},t))}(t.Message||(t.Message={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdAreaName=void 0,function(e){e.SidewallLeft="sidewallLeft",e.SidewallRight="sidewallRight"}(t.AdAreaName||(t.AdAreaName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(14);!function(e){var t,n;!function(e){e.RESOURCE_COPY_SUCCESS="ResourceCopySuccess"}(n=e.Code||(e.Code={})),e.DataFactory=r.createDataFactory(((t={})[n.RESOURCE_COPY_SUCCESS]=function(){return r.Payload.EMPTY_PARAMS},t))}(t.Message||(t.Message={}))},function(e,t,n){var r=n(625);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(156),i=n(628),o=n(629),a=n(630),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t,n){var r=n(627),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(22))},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(631),i=n(634),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(156),i=n(632),o=n(633),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:u&&u in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(156),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";function r(e){return new o.PlayerInitialState(e.data.isCommentLocked,i.CommentModeTypeFactory.create(e.data.commentMode))}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePlayerJson=t.fetch=t.generatePlayerJsonUrl=void 0;var i=n(117);n(236);var o=n(636);t.generatePlayerJsonUrl=function(e,t){return e+"programs/"+t+"/external/player.json"+"?"+("cache_busting="+(new Date).getTime())},t.fetch=function(e){return window.fetch(e,{credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){return e})).then(r)},t.parsePlayerJson=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerInitialState=void 0;var r=function(e,t){this.isCommentLocked=e,this.commentMode=t,this.isCommentModeNormal="normal"===t};t.PlayerInitialState=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoomConnector=void 0;var r=n(29),i=n(117),o=n(13),a=function(){function e(e,t,n){this.handleRealtimeUserComment=e,this.handleRealtimeOperatorCommand=t,this.getCurrentVposMs=n,this.liveMessageServerClient=null,this.chatSynchronizer=null}return e.prototype.connect=function(e){if(null==e)throw new Error("room is not valid");var t=e.messageServer;return t instanceof o.Niwavided?(this.disposeLiveMessageServerClient(),this.createLiveMessageServerClient(t.baseUrl),this.liveMessageServerClient.fetch({id:t.threadId},{resFrom:0})):null},e.prototype.disconnect=function(){this.disposeLiveMessageServerClient(),this.disposeChatSynchronizer()},e.prototype.disposeLiveMessageServerClient=function(){null!==this.liveMessageServerClient&&this.liveMessageServerClient.dispose(),this.liveMessageServerClient=null},e.prototype.disposeChatSynchronizer=function(){null!==this.chatSynchronizer&&this.chatSynchronizer.dispose(),this.chatSynchronizer=null},e.prototype.onReceiveRealtimeUserComment=function(e){e.isDeleted||(this.chatSynchronizer.toCurrentVpos(e),this.handleRealtimeUserComment(e))},e.prototype.onReceiveRealtimeOperatorCommand=function(e){var t=this;this.chatSynchronizer.waitIfFuture(e.vpos,(function(){t.handleRealtimeOperatorCommand(e)}))},e.prototype.onReceiveRealtimeAssortedChat=function(e){e instanceof i.UserComment?this.onReceiveRealtimeUserComment(e):e instanceof i.OperatorCommand&&this.onReceiveRealtimeOperatorCommand(e)},e.prototype.createLiveMessageServerClient=function(e){var t=r.Context.PROTOCOL.WEB_SOCKET;this.liveMessageServerClient=new i.LiveMessageServerClient,this.liveMessageServerClient.initialize(i.LiveMessageServerClient.createMessageServerClient({server:e,protocol:t}),null),this.chatSynchronizer=new i.ChatSynchronizer(this.getCurrentVposMs),this.liveMessageServerClient.liveMessageServerObservable.on("receive:realtime_chat",this.onReceiveRealtimeAssortedChat.bind(this))},e}();t.RoomConnector=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.UserCommentPresenter=void 0;var o=n(170),a=n(812),s=n(117),u=n(0),c=n(712);n(713);var l=function(e){function t(t){var n=e.call(this,t)||this;return n.renderer=null,n.threadProcessor=null,n.onResize=n.handleResize.bind(n),n.state={width:window.document.body.clientWidth,height:window.document.body.clientHeight},n}return i(t,e),t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.disposeRenderer()},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize)},t.prototype.componentDidUpdate=function(e,t){null!==this.renderer&&(t.width===this.state.width&&t.height===this.state.height||this.renderer.onResizedParent())},t.prototype.render=function(){return u.createElement("div",{id:t.COMMENT_CONTAINER_ID,style:{width:this.state.width,height:this.state.height,visibility:this.props.isCommentVisible?"visible":"hidden"}})},t.prototype.renderUserComment=function(e){!this.props.isCommentIgnored&&this.threadProcessor&&this.threadProcessor.addReceivedChatListByStreaming([e.niwavideApiChat])},t.prototype.startRenderUserComment=function(e){var t=this.props.isCommentIgnored?[]:e;this.disposeRenderer(),this.createRenderer(),this.createThreadProcessor(t),this.renderer.play()},t.prototype.handleResize=function(){this.setState({width:window.document.body.clientWidth,height:window.document.body.clientHeight}),this.renderer&&(this.renderer.resolution=this.getRendererResolution())},t.prototype.disposeRenderer=function(){null!==this.renderer&&(null!==this.threadProcessor&&(this.renderer.deleteThread(this.threadProcessor),this.threadProcessor=null),this.renderer.pause(),this.renderer=null)},t.prototype.createRenderer=function(){a.default.frameRate=a.default.AUTO_FRAME_RATE,this.renderer=new a.default(t.COMMENT_CONTAINER_ID,{slotCount:this.props.slotCount,processUpdatingContentTime:this.props.getCurrentVposMs,useWebGL:this.props.useWebGL,resolution:this.getRendererResolution()})},t.prototype.getRendererResolution=function(){return!/iPhone|iPod|iPad|Android/.test(navigator.userAgent)&&this.state.width>=640&&this.state.height>=360?2:1},t.prototype.createThreadProcessor=function(e){var t={chatList:e,useStreamingFromMessageServer:!0};this.threadProcessor=this.renderer.createThread(t,s.LiveChatConverter),this.threadProcessor.applyFilter(new o.default([s.LiveChatFilter.isUserComment,c.ChatFilter.isAcceptableByNgScoring]))},t.DEFAULT_SLOT_COUNT=50,t.DEFAULT_USE_WEB_GL=!1,t.COMMENT_CONTAINER_ID="comment-container",t}(u.Component);t.UserCommentPresenter=l},function(e,t,n){n(640),n(641),n(642)},function(e,t,n){Object.assign||(Object.assign=n(105))},function(e,t,n){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[r[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[i]+"CancelAnimationFrame"]||e[r[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),r=16+n-t;return r<0&&(r=0),n=t,setTimeout((function(){n=Date.now(),e(performance.now())}),r)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}).call(this,n(22))},function(e,t){Math.sign||(Math.sign=function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1})},function(e,t,n){function r(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0,this.type=o.SHAPES.CIRC}var i=n(158),o=n(11);r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.x-e,r=this.y-t;return(n*=n)+(r*=r)<=this.radius*this.radius},r.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},function(e,t,n){function r(e,t,n,r){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this.type=o.SHAPES.ELIP}var i=n(158),o=n(11);r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},r.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},function(e,t,n){function r(e){var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}if(t[0]instanceof i){for(var r=[],a=0,s=t.length;a<s;a++)r.push(t[a].x,t[a].y);t=r}this.closed=!0,this.points=t,this.type=o.SHAPES.POLY}var i=n(157),o=n(11);r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.points.slice())},r.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1];s>t!=c>t&&e<(u-a)*(t-s)/(c-s)+a&&(n=!n)}return n}},function(e,t,n){function r(e,t,n,r,o){this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=n(11);r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height)}},function(e,t){e.exports={mixin:function(e){!function(e){e.__plugins={},e.registerPlugin=function(t,n){e.__plugins[t]=n},e.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}(e)}}},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(649),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(22))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){delete f[e]}function i(e){if(h)setTimeout(i,0,e);else{var t=f[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{r(e),h=!1}}}}if(!e.setImmediate){var o,a,s,u,c,l=1,f={},h=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){i(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){i(e.data)},o=function(e){s.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,o=function(e){var t=d.createElement("script");t.onreadystatechange=function(){i(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):o=function(e){setTimeout(i,0,e)}:(u="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(u)&&i(+t.data.slice(u.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),o=function(t){e.postMessage(u+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return f[l]=r,o(l),l++},p.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(22),n(82))},function(e,t,n){var r=n(651),i=new r;i.autoStart=!0,e.exports={shared:i,Ticker:r}},function(e,t,n){function r(){var e=this;this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(a,!0)&&(e._requestId=requestAnimationFrame(e._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=n(11),o=n(75),a="tick";Object.defineProperties(r.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/t}}}),r.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(a,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(e,t){return this._emitter.on(a,e,t),this._startIfPossible(),this},r.prototype.addOnce=function(e,t){return this._emitter.once(a,e,t),this._startIfPossible(),this},r.prototype.remove=function(e,t){return this._emitter.off(a,e,t),this._emitter.listeners(a,!0)||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.update=function(e){var t;e=e||performance.now(),(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*i.TARGET_FPMS*this.speed,this._emitter.emit(a,this.deltaTime),this.lastTime=e},e.exports=r},function(e,t){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,e.exports=n},function(e,t){function n(e){this.gl=e,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(e,t){var n=0,r=0;this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.upload()},n.prototype.upload=function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e.exports=n},function(e,t,n){function r(e,t,n){i.call(this);(n=n||15e3)>16384&&(n=16384),n>(e=e||15e3)&&(n=e),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(t)}var i=n(108),o=n(11);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(e){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},r.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},r.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0,u=e.blendModes[this.blendMode];u!==t.globalCompositeOperation&&(t.globalCompositeOperation=u),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var c=0;c<this.children.length;++c){var l=this.children[c];if(l.visible){var f=l.texture.frame;if(t.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(t.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),i=l.anchor.x*(-f.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-f.height*l.scale.y)+l.position.y+.5,a=f.width*l.scale.x,s=f.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var h=l.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,0|h.tx,0|h.ty):t.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),i=l.anchor.x*-f.width+.5,o=l.anchor.y*-f.height+.5,a=f.width,s=f.height}t.drawImage(l.texture.baseTexture.source,f.x,f.y,f.width,f.height,i,o,a,s)}}}},r.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null}},function(e,t,n){function r(e){i.call(this,e),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=a.SPRITE_BATCH_SIZE;var t=4*this.size*this.vertByteSize,n=6*this.size;this.vertices=new ArrayBuffer(t),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(n);for(var r=0,o=0;r<n;r+=6,o+=4)this.indices[r+0]=o+0,this.indices[r+1]=o+1,this.indices[r+2]=o+2,this.indices[r+3]=o+0,this.indices[r+4]=o+2,this.indices[r+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var i=n(84),o=n(109),a=n(11);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,o.registerPlugin("sprite",r),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(e){var t=e._texture;this.currentBatchSize>=this.size&&this.flush();var n=t._uvs;if(n){var r,i,o,a,s=e.anchor.x,u=e.anchor.y;if(t.trim&&void 0===e.tileScale){var c=t.trim;r=(i=c.x-s*c.width)+t.crop.width,o=(a=c.y-u*c.height)+t.crop.height}else r=t._frame.width*(1-s),i=t._frame.width*-s,o=t._frame.height*(1-u),a=t._frame.height*-u;var l=this.currentBatchSize*this.vertByteSize,f=e.worldTransform,h=f.a,d=f.b,p=f.c,v=f.d,m=f.tx,g=f.ty,y=this.colors,_=this.positions;if(this.renderer.roundPixels){var b=this.renderer.resolution;_[l]=((h*i+p*a+m)*b|0)/b,_[l+1]=((v*a+d*i+g)*b|0)/b,_[l+5]=((h*r+p*a+m)*b|0)/b,_[l+6]=((v*a+d*r+g)*b|0)/b,_[l+10]=((h*r+p*o+m)*b|0)/b,_[l+11]=((v*o+d*r+g)*b|0)/b,_[l+15]=((h*i+p*o+m)*b|0)/b,_[l+16]=((v*o+d*i+g)*b|0)/b}else _[l]=h*i+p*a+m,_[l+1]=v*a+d*i+g,_[l+5]=h*r+p*a+m,_[l+6]=v*a+d*r+g,_[l+10]=h*r+p*o+m,_[l+11]=v*o+d*r+g,_[l+15]=h*i+p*o+m,_[l+16]=v*o+d*i+g;_[l+2]=n.x0,_[l+3]=n.y0,_[l+7]=n.x1,_[l+8]=n.y1,_[l+12]=n.x2,_[l+13]=n.y2,_[l+17]=n.x3,_[l+18]=n.y3;var E=e.tint;y[l+4]=y[l+9]=y[l+14]=y[l+19]=(E>>16)+(65280&E)+((255&E)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t,n,r,i=this.renderer.gl;if(this.currentBatchSize>.5*this.size)i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);else{var o=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);i.bufferSubData(i.ARRAY_BUFFER,0,o)}for(var a,s=0,u=0,c=null,l=this.renderer.blendModeManager.currentBlendMode,f=null,h=!1,d=!1,p=0,v=this.currentBatchSize;p<v;p++)t=(a=this.sprites[p])._texture.baseTexture,h=l!==(n=a.blendMode),d=f!==(r=a.shader||this.shader),(c!==t||h||d)&&(this.renderBatch(c,s,u),u=p,s=0,c=t,h&&(l=n,this.renderer.blendModeManager.setBlendMode(l)),d&&((e=(f=r).shaders?f.shaders[i.id]:f)||(e=f.getShader(this.renderer)),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),i.activeTexture(i.TEXTURE0))),s++;this.renderBatch(c,s,u),this.currentBatchSize=0}},r.prototype.renderBatch=function(e,t,n){if(0!==t){var r=this.renderer.gl;e._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,e._glTextures[r.id]):this.renderer.updateTexture(e),r.drawElements(r.TRIANGLES,6*t,r.UNSIGNED_SHORT,6*n*2),this.renderer.drawCount++}},r.prototype.start=function(){var e=this.renderer.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.vertByteSize;e.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,e.FLOAT,!1,t,0),e.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,e.FLOAT,!1,t,8),e.vertexAttribPointer(this.shader.attributes.aColor,4,e.UNSIGNED_BYTE,!0,t,16)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},function(e,t,n){function r(e){i.call(this,e),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=n(70),o=n(251);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(e,t){t.texture?this.pushSpriteMask(e,t):this.pushStencilMask(e,t)},r.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.popStencilMask(e,t)},r.prototype.pushSpriteMask=function(e,t){var n=this.alphaMaskPool.pop();n||(n=[new o(t)]),n[0].maskSprite=t,this.renderer.filterManager.pushFilter(e,n)},r.prototype.popSpriteMask=function(){var e=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(e)},r.prototype.pushStencilMask=function(e,t){this.renderer.stencilManager.pushMask(t)},r.prototype.popStencilMask=function(e,t){this.renderer.stencilManager.popMask(t)}},function(e,t,n){function r(e){i.call(this,e),this.stencilMaskStack=null}var i=n(70),o=n(24);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.stencilStack.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},r.prototype.pushStencil=function(e,t){this.renderer.currentRenderTarget.attachStencilBuffer();var n=this.renderer.gl,r=this.stencilMaskStack;this.bindGraphics(e,t),0===r.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),r.reverse=!0,r.count=0),r.stencilStack.push(t);var i=r.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===t.mode?(n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),r.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),r.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),r.reverse=!r.reverse):(r.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),r.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),r.count++},r.prototype.bindGraphics=function(e,t){var n,r=this.renderer.gl;1===t.mode?(n=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(e.tint)),r.uniform3fv(n.uniforms.color._location,t.color),r.uniform1f(n.uniforms.alpha._location,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,8,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(n=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(e.tint)),r.uniform1f(n.uniforms.alpha._location,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},r.prototype.popStencil=function(e,t){var n=this.renderer.gl,r=this.stencilMaskStack;if(r.stencilStack.pop(),r.count--,0===r.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=r.count;this.bindGraphics(e,t),n.colorMask(!1,!1,!1,!1),1===t.mode?(r.reverse=!r.reverse,r.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(r.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.renderer.drawCount++,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r.prototype.pushMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),e.dirty&&this.renderer.plugins.graphics.updateGraphics(e,this.renderer.gl),e._webGL[this.renderer.gl.id].data.length&&this.pushStencil(e,e._webGL[this.renderer.gl.id].data[0])},r.prototype.popMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(e,e._webGL[this.renderer.gl.id].data[0])}},function(e,t,n){function r(e){i.call(this,e),this.currentBlendMode=99999}var i=n(70);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(t[0],t[1]),!0}},function(e,t,n){function r(e){i.call(this,e);this.indices=new Uint16Array(98304);for(var t=0,n=0;t<98304;t+=6,n+=4)this.indices[t+0]=n+0,this.indices[t+1]=n+1,this.indices[t+2]=n+2,this.indices[t+3]=n+0,this.indices[t+4]=n+2,this.indices[t+5]=n+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new u.Matrix}var i=n(84),o=n(109),a=n(660),s=n(661),u=n(28);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,o.registerPlugin("particle",r),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new a(this.renderer.shaderManager),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},r.prototype.start=function(){var e=this.renderer.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.shader;this.renderer.shaderManager.setShader(t)},r.prototype.render=function(e){var t=e.children,n=t.length,r=e._maxSize,i=e._batchSize;if(0!==n){n>r&&(n=r),e._buffers||(e._buffers=this.generateBuffers(e)),this.renderer.blendModeManager.setBlendMode(e.blendMode);var o=this.renderer.gl,a=e.worldTransform.copy(this.tempMatrix);a.prepend(this.renderer.currentRenderTarget.projectionMatrix),o.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,a.toArray(!0)),o.uniform1f(this.shader.uniforms.uAlpha._location,e.worldAlpha);var s=t[0]._texture.baseTexture;if(s._glTextures[o.id])o.bindTexture(o.TEXTURE_2D,s._glTextures[o.id]);else{if(!this.renderer.updateTexture(s))return;e._properties[0]&&e._properties[3]||(e._bufferToUpdate=0)}for(var u=0,c=0;u<n;u+=i,c+=1){var l=n-u;l>i&&(l=i);var f=e._buffers[c];f.uploadDynamic(t,u,l),e._bufferToUpdate===c&&(f.uploadStatic(t,u,l),e._bufferToUpdate=c+1),f.bind(this.shader),o.drawElements(o.TRIANGLES,6*l,o.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},r.prototype.generateBuffers=function(e){var t,n=this.renderer.gl,r=[],i=e._maxSize,o=e._batchSize,a=e._properties;for(t=0;t<i;t+=o)r.push(new s(n,this.properties,a,o));return r},r.prototype.uploadVertices=function(e,t,n,r,i,o){for(var a,s,u,c,l,f,h,d,p,v=0;v<n;v++)s=(a=e[t+v])._texture,c=a.scale.x,l=a.scale.y,s.trim?(f=(h=(u=s.trim).x-a.anchor.x*u.width)+s.crop.width,d=(p=u.y-a.anchor.y*u.height)+s.crop.height):(f=s._frame.width*(1-a.anchor.x),h=s._frame.width*-a.anchor.x,d=s._frame.height*(1-a.anchor.y),p=s._frame.height*-a.anchor.y),r[o]=h*c,r[o+1]=p*l,r[o+i]=f*c,r[o+i+1]=p*l,r[o+2*i]=f*c,r[o+2*i+1]=d*l,r[o+3*i]=h*c,r[o+3*i+1]=d*l,o+=4*i},r.prototype.uploadPosition=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},r.prototype.uploadRotation=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},r.prototype.uploadUvs=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},r.prototype.uploadAlpha=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].alpha;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},function(e,t,n){function r(e){i.call(this,e,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=n(110);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},function(e,t){function n(e,t,n,r){this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;i++){var o=t[i];n[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var e,t,n=this.gl,r=0;for(this.dynamicStride=0,e=0;e<this.dynamicProperties.length;e++)(t=this.dynamicProperties[e]).offset=r,r+=t.size,this.dynamicStride+=t.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferData(n.ARRAY_BUFFER,this.dynamicData,n.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,e=0;e<this.staticProperties.length;e++)(t=this.staticProperties[e]).offset=i,i+=t.size,this.staticStride+=t.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferData(n.ARRAY_BUFFER,this.staticData,n.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(e,t,n){for(var r=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(e,t,n,this.dynamicData,this.dynamicStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(e,t,n){for(var r=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(e,t,n,this.staticData,this.staticStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var e,t,n=this.gl;for(n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),e=0;e<this.dynamicProperties.length;e++)t=this.dynamicProperties[e],n.vertexAttribPointer(t.attribute,t.size,n.FLOAT,!1,4*this.dynamicStride,4*t.offset);for(n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),e=0;e<this.staticProperties.length;e++)t=this.staticProperties[e],n.vertexAttribPointer(t.attribute,t.size,n.FLOAT,!1,4*this.staticStride,4*t.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},function(e,t,n){function r(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||u.RESOLUTION,this._text=null,this._style=null;var r=o.fromCanvas(this.canvas);r.trim=new a.Rectangle,i.call(this,r),this.text=e,this.style=t}var i=n(245),o=n(83),a=n(28),s=n(24),u=n(11);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.fontPropertiesCache={},r.fontPropertiesCanvas=document.createElement("canvas"),r.fontPropertiesContext=r.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(r.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(e){this.scale.x=e/this._texture._frame.width,this._width=e}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(e){this.scale.y=e/this._texture._frame.height,this._height=e}},style:{get:function(){return this._style},set:function(e){"number"==typeof(e=e||{}).fill&&(e.fill=s.hex2string(e.fill)),"number"==typeof e.stroke&&(e.stroke=s.hex2string(e.stroke)),"number"==typeof e.dropShadowColor&&(e.dropShadowColor=s.hex2string(e.dropShadowColor)),e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.breakWords=e.breakWords||!1,e.letterSpacing=e.letterSpacing||0,e.dropShadow=e.dropShadow||!1,e.dropShadowColor=e.dropShadowColor||"#000000",e.dropShadowAngle=void 0!==e.dropShadowAngle?e.dropShadowAngle:Math.PI/6,e.dropShadowDistance=void 0!==e.dropShadowDistance?e.dropShadowDistance:5,e.dropShadowBlur=void 0!==e.dropShadowBlur?e.dropShadowBlur:0,e.padding=e.padding||0,e.textBaseline=e.textBaseline||"alphabetic",e.lineJoin=e.lineJoin||"miter",e.miterLimit=e.miterLimit||10,this._style=e,this.dirty=!0}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),r.prototype.updateText=function(){var e=this._style;this.context.font=e.font;for(var t=(e.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),n=new Array(t.length),r=0,i=this.determineFontProperties(e.font),o=0;o<t.length;o++){var a=this.context.measureText(t[o]).width+(t[o].length-1)*e.letterSpacing;n[o]=a,r=Math.max(r,a)}var s=r+e.strokeThickness;e.dropShadow&&(s+=e.dropShadowDistance),this.canvas.width=Math.ceil((s+this.context.lineWidth)*this.resolution);var u,c,l=this.style.lineHeight||i.fontSize+e.strokeThickness,f=l*t.length;if(e.dropShadow&&(f+=e.dropShadowDistance),this.canvas.height=Math.ceil((f+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=e.font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit,e.dropShadow){e.dropShadowBlur>0?(this.context.shadowColor=e.dropShadowColor,this.context.shadowBlur=e.dropShadowBlur):this.context.fillStyle=e.dropShadowColor;var h=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,d=Math.sin(e.dropShadowAngle)*e.dropShadowDistance;for(o=0;o<t.length;o++)u=e.strokeThickness/2,c=e.strokeThickness/2+o*l+i.ascent,"right"===e.align?u+=r-n[o]:"center"===e.align&&(u+=(r-n[o])/2),e.fill&&this.drawLetterSpacing(t[o],u+h,c+d+e.padding)}for(this.context.fillStyle=e.fill,o=0;o<t.length;o++)u=e.strokeThickness/2,c=e.strokeThickness/2+o*l+i.ascent,"right"===e.align?u+=r-n[o]:"center"===e.align&&(u+=(r-n[o])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(t[o],u,c+e.padding,!0),e.fill&&this.drawLetterSpacing(t[o],u,c+e.padding);this.updateTexture()},r.prototype.drawLetterSpacing=function(e,t,n,r){var i=this._style.letterSpacing;if(0!==i)for(var o,a=String.prototype.split.call(e,""),s=0,u=t;s<e.length;)o=a[s++],r?this.context.strokeText(o,u,n):this.context.fillText(o,u,n),u+=this.context.measureText(o).width+i;else r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n)},r.prototype.updateTexture=function(){var e=this._texture,t=this._style;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.crop.width=e._frame.width=this.canvas.width/this.resolution,e.crop.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=0,e.trim.y=-t.padding,e.trim.width=e._frame.width,e.trim.height=e._frame.height-2*t.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,e.baseTexture.emit("update",e.baseTexture),this.dirty=!1},r.prototype.renderWebGL=function(e){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,e)},r.prototype._renderCanvas=function(e){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,e)},r.prototype.determineFontProperties=function(e){var t=r.fontPropertiesCache[e];if(!t){t={};var n=r.fontPropertiesCanvas,i=r.fontPropertiesContext;i.font=e;var o=Math.ceil(i.measureText("|Mﾃ衛").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,n.width=o,n.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mﾃ衛",0,a);var u,c,l=i.getImageData(0,0,o,s).data,f=l.length,h=4*o,d=0,p=!1;for(u=0;u<a;u++){for(c=0;c<h;c+=4)if(255!==l[d+c]){p=!0;break}if(p)break;d+=h}for(t.ascent=a-u,d=f-h,p=!1,u=s;u>a;u--){for(c=0;c<h;c+=4)if(255!==l[d+c]){p=!0;break}if(p)break;d-=h}t.descent=u-a,t.fontSize=t.ascent+t.descent,r.fontPropertiesCache[e]=t}return t},r.prototype.wordWrap=function(e){for(var t="",n=e.split("\n"),r=this._style.wordWrapWidth,i=0;i<n.length;i++){for(var o=r,a=n[i].split(" "),s=0;s<a.length;s++){var u=this.context.measureText(a[s]).width;if(this._style.breakWords&&u>r)for(var c=a[s].split(""),l=0;l<c.length;l++){var f=this.context.measureText(c[l]).width;f>o?(t+="\n"+c[l],o=r-f):(0===l&&(t+=" "),t+=c[l],o-=f)}else{var h=u+this.context.measureText(" ").width;0===s||h>o?(s>0&&(t+="\n"),t+=a[s],o=r-u):(o-=h,t+=" "+a[s])}}i<n.length-1&&(t+="\n")}return t},r.prototype.getBounds=function(e){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,e)},r.prototype.destroy=function(e){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===e||e)}},function(e,t,n){function r(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new c.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=n(108),o=n(83),a=n(160),s=n(162),u=n(253),c=n(28),l=n(11),f=new c.Point;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){var e=new r;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=!0,e.glDirty=!0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},r.prototype.lineStyle=function(e,t,n){if(this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===n?1:n,this.currentPath)if(this.currentPath.shape.points.length){var r=new c.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},r.prototype.moveTo=function(e,t){var n=new c.Polygon([e,t]);return n.closed=!1,this.drawShape(n),this},r.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},r.prototype.quadraticCurveTo=function(e,t,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var s=a[a.length-2],u=a[a.length-1],c=0,l=1;l<=20;++l)i=s+(e-s)*(c=l/20),o=u+(t-u)*c,a.push(i+(e+(n-e)*c-i)*c,o+(t+(r-t)*c-o)*c);return this.dirty=this.boundsDirty=!0,this},r.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,u,c,l,f=this.currentPath.shape.points,h=f[f.length-2],d=f[f.length-1],p=0,v=1;v<=20;++v)u=(s=(a=1-(p=v/20))*a)*a,l=(c=p*p)*p,f.push(u*h+3*s*p*e+3*a*c*n+l*i,u*d+3*s*p*t+3*a*c*r+l*o);return this.dirty=this.boundsDirty=!0,this},r.prototype.arcTo=function(e,t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1]-t,u=a-e,c=r-t,l=n-e,f=Math.abs(s*l-u*c);if(f<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var h=s*s+u*u,d=c*c+l*l,p=s*c+u*l,v=i*Math.sqrt(h)/f,m=i*Math.sqrt(d)/f,g=v*p/h,y=m*p/d,_=v*l+m*u,b=v*c+m*s,E=u*(m+g),S=s*(m+g),T=l*(v+y),w=c*(v+y),O=Math.atan2(S-b,E-_),R=Math.atan2(w-b,T-_);this.arc(_+e,b+t,i,O,R,u*c>l*s)}return this.dirty=this.boundsDirty=!0,this},r.prototype.arc=function(e,t,n,r,i,o){if(r===i)return this;!(o=o||!1)&&i<=r?i+=2*Math.PI:o&&r<=i&&(r+=2*Math.PI);var a=o?-1*(r-i):i-r,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=e+Math.cos(r)*n,c=t+Math.sin(r)*n;this.currentPath?this.currentPath.shape.points.push(u,c):this.moveTo(u,c);for(var l=this.currentPath.shape.points,f=a/(2*s),h=2*f,d=Math.cos(f),p=Math.sin(f),v=s-1,m=v%1/v,g=0;g<=v;g++){var y=f+r+h*(g+m*g),_=Math.cos(y),b=-Math.sin(y);l.push((d*_+p*b)*n+e,(d*-b+p*_)*n+t)}return this.dirty=this.boundsDirty=!0,this},r.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(e,t,n,r){return this.drawShape(new c.Rectangle(e,t,n,r)),this},r.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new c.RoundedRectangle(e,t,n,r,i)),this},r.prototype.drawCircle=function(e,t,n){return this.drawShape(new c.Circle(e,t,n)),this},r.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new c.Ellipse(e,t,n,r)),this},r.prototype.drawPolygon=function(e){var t=e,n=!0;if(t instanceof c.Polygon&&(n=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}var i=new c.Polygon(t);return i.closed=n,this.drawShape(i),this},r.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},r.prototype.generateTexture=function(e,t,n){t=t||1;var r=this.getLocalBounds(),i=new a(r.width*t,r.height*t),u=o.fromCanvas(i.canvas,n);return u.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-r.x,-r.y),s.renderGraphics(this,i.context),u},r.prototype._renderWebGL=function(e){this.glDirty&&(this.dirty=!0,this.glDirty=!1),e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this)},r.prototype._renderCanvas=function(e){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var t=e.context,n=this.worldTransform,r=e.blendModes[this.blendMode];r!==t.globalCompositeOperation&&(t.globalCompositeOperation=r);var i=e.resolution;t.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),s.renderGraphics(this,t)}},r.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return c.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var t=this._localBounds,n=t.x,r=t.width+t.x,i=t.y,o=t.height+t.y,a=e||this.worldTransform,s=a.a,u=a.b,l=a.c,f=a.d,h=a.tx,d=a.ty,p=s*r+l*o+h,v=f*o+u*r+d,m=s*n+l*o+h,g=f*o+u*n+d,y=s*n+l*i+h,_=f*i+u*n+d,b=s*r+l*i+h,E=f*i+u*r+d,S=p,T=v,w=p,O=v;w=b<(w=y<(w=m<w?m:w)?y:w)?b:w,O=E<(O=_<(O=g<O?g:O)?_:O)?E:O,S=b>(S=y>(S=m>S?m:S)?y:S)?b:S,T=E>(T=_>(T=g>T?g:T)?_:T)?E:T,this._bounds.x=w,this._bounds.width=S-w,this._bounds.y=O,this._bounds.height=T-O,this._currentBounds=this._bounds}return this._currentBounds},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,f);for(var t=this.graphicsData,n=0;n<t.length;n++){var r=t[n];if(r.fill&&(r.shape&&r.shape.contains(f.x,f.y)))return!0}return!1},r.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0;if(this.graphicsData.length)for(var i,o,a,s,u,c,f=0;f<this.graphicsData.length;f++){var h=this.graphicsData[f],d=h.type,p=h.lineWidth;if(i=h.shape,d===l.SHAPES.RECT||d===l.SHAPES.RREC)a=i.x-p/2,s=i.y-p/2,e=a<e?a:e,t=a+(u=i.width+p)>t?a+u:t,n=s<n?s:n,r=s+(c=i.height+p)>r?s+c:r;else if(d===l.SHAPES.CIRC)a=i.x,s=i.y,e=a-(u=i.radius+p/2)<e?a-u:e,t=a+u>t?a+u:t,n=s-(c=i.radius+p/2)<n?s-c:n,r=s+c>r?s+c:r;else if(d===l.SHAPES.ELIP)a=i.x,s=i.y,e=a-(u=i.width+p/2)<e?a-u:e,t=a+u>t?a+u:t,n=s-(c=i.height+p/2)<n?s-c:n,r=s+c>r?s+c:r;else{o=i.points;for(var v=0;v<o.length;v+=2)e=(a=o[v])-p<e?a-p:e,t=a+p>t?a+p:t,n=(s=o[v+1])-p<n?s-p:n,r=s+p>r?s+p:r}}else e=0,t=0,n=0,r=0;var m=this.boundsPadding;this._localBounds.x=e-m,this._localBounds.width=t-e+2*m,this._localBounds.y=n-m,this._localBounds.height=r-n+2*m},r.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===l.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty=this.boundsDirty=!0,t},r.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var t in this._webgl)for(var n=0;n<this._webgl[t].data.length;++n)this._webgl[t].data[n].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},function(e,t,n){function r(e){s.call(this,e),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var i=n(24),o=n(28),a=n(11),s=n(84),u=n(109),c=n(665),l=n(666);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,u.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){s.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},r.prototype.render=function(e){var t,n=this.renderer,r=n.gl,o=n.shaderManager.plugins.primitiveShader;!e.dirty&&e._webGL[r.id]||this.updateGraphics(e);var a=e._webGL[r.id];n.blendModeManager.setBlendMode(e.blendMode);for(var s=0,u=a.data.length;s<u;s++)t=a.data[s],1===a.data[s].mode?(n.stencilManager.pushStencil(e,t),r.uniform1f(n.shaderManager.complexPrimitiveShader.uniforms.alpha._location,e.worldAlpha*t.alpha),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilManager.popStencil(e,t)):(o=n.shaderManager.primitiveShader,n.shaderManager.setShader(o),r.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),r.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,n.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(o.uniforms.tint._location,i.hex2rgb(e.tint)),r.uniform1f(o.uniforms.alpha._location,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(o.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(o.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,t.indices.length,r.UNSIGNED_SHORT,0)),n.drawCount++},r.prototype.updateGraphics=function(e){var t,n,r=this.renderer.gl,i=e._webGL[r.id];if(i||(i=e._webGL[r.id]={lastIndex:0,data:[],gl:r}),e.dirty=!1,e.clearDirty){for(e.clearDirty=!1,t=0;t<i.data.length;t++){var o=i.data[t];o.reset(),this.graphicsDataPool.push(o)}i.data=[],i.lastIndex=0}for(t=i.lastIndex;t<e.graphicsData.length;t++){var s=e.graphicsData[t];if(s.type===a.SHAPES.POLY){if(s.points=s.shape.points.slice(),s.shape.closed&&(s.points[0]===s.points[s.points.length-2]&&s.points[1]===s.points[s.points.length-1]||s.points.push(s.points[0],s.points[1])),s.fill)if(s.points.length>=6)if(s.points.length<2*this.maximumSimplePolySize)n=this.switchMode(i,0),this.buildPoly(s,n)||(n=this.switchMode(i,1),this.buildComplexPoly(s,n));else n=this.switchMode(i,1),this.buildComplexPoly(s,n);s.lineWidth>0&&(n=this.switchMode(i,0),this.buildLine(s,n))}else n=this.switchMode(i,0),s.type===a.SHAPES.RECT?this.buildRectangle(s,n):s.type===a.SHAPES.CIRC||s.type===a.SHAPES.ELIP?this.buildCircle(s,n):s.type===a.SHAPES.RREC&&this.buildRoundedRectangle(s,n);i.lastIndex++}for(t=0;t<i.data.length;t++)(n=i.data[t]).dirty&&n.upload()},r.prototype.switchMode=function(e,t){var n;return e.data.length?((n=e.data[e.data.length-1]).points.length>32e4||n.mode!==t||1===t)&&((n=this.graphicsDataPool.pop()||new c(e.gl)).mode=t,e.data.push(n)):((n=this.graphicsDataPool.pop()||new c(e.gl)).mode=t,e.data.push(n)),n.dirty=!0,n},r.prototype.buildRectangle=function(e,t){var n=e.shape,r=n.x,o=n.y,a=n.width,s=n.height;if(e.fill){var u=i.hex2rgb(e.fillColor),c=e.fillAlpha,l=u[0]*c,f=u[1]*c,h=u[2]*c,d=t.points,p=t.indices,v=d.length/6;d.push(r,o),d.push(l,f,h,c),d.push(r+a,o),d.push(l,f,h,c),d.push(r,o+s),d.push(l,f,h,c),d.push(r+a,o+s),d.push(l,f,h,c),p.push(v,v,v+1,v+2,v+3,v+3)}if(e.lineWidth){var m=e.points;e.points=[r,o,r+a,o,r+a,o+s,r,o+s,r,o],this.buildLine(e,t),e.points=m}},r.prototype.buildRoundedRectangle=function(e,t){var n=e.shape,r=n.x,o=n.y,a=n.width,s=n.height,u=n.radius,c=[];if(c.push(r,o+u),this.quadraticBezierCurve(r,o+s-u,r,o+s,r+u,o+s,c),this.quadraticBezierCurve(r+a-u,o+s,r+a,o+s,r+a,o+s-u,c),this.quadraticBezierCurve(r+a,o+u,r+a,o,r+a-u,o,c),this.quadraticBezierCurve(r+u,o,r,o,r,o+u+1e-10,c),e.fill){var f=i.hex2rgb(e.fillColor),h=e.fillAlpha,d=f[0]*h,p=f[1]*h,v=f[2]*h,m=t.points,g=t.indices,y=m.length/6,_=l(c,null,2),b=0;for(b=0;b<_.length;b+=3)g.push(_[b]+y),g.push(_[b]+y),g.push(_[b+1]+y),g.push(_[b+2]+y),g.push(_[b+2]+y);for(b=0;b<c.length;b++)m.push(c[b],c[++b],d,p,v,h)}if(e.lineWidth){var E=e.points;e.points=c,this.buildLine(e,t),e.points=E}},r.prototype.quadraticBezierCurve=function(e,t,n,r,i,o,a){function s(e,t,n){return e+(t-e)*n}for(var u,c,l,f,h,d,p=a||[],v=0,m=0;m<=20;m++)u=s(e,n,v=m/20),c=s(t,r,v),l=s(n,i,v),f=s(r,o,v),h=s(u,l,v),d=s(c,f,v),p.push(h,d);return p},r.prototype.buildCircle=function(e,t){var n,r,o=e.shape,s=o.x,u=o.y;e.type===a.SHAPES.CIRC?(n=o.radius,r=o.radius):(n=o.width,r=o.height);var c=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),l=2*Math.PI/c,f=0;if(e.fill){var h=i.hex2rgb(e.fillColor),d=e.fillAlpha,p=h[0]*d,v=h[1]*d,m=h[2]*d,g=t.points,y=t.indices,_=g.length/6;for(y.push(_),f=0;f<c+1;f++)g.push(s,u,p,v,m,d),g.push(s+Math.sin(l*f)*n,u+Math.cos(l*f)*r,p,v,m,d),y.push(_++,_++);y.push(_-1)}if(e.lineWidth){var b=e.points;for(e.points=[],f=0;f<c+1;f++)e.points.push(s+Math.sin(l*f)*n,u+Math.cos(l*f)*r);this.buildLine(e,t),e.points=b}},r.prototype.buildLine=function(e,t){var n=0,r=e.points;if(0!==r.length){var a=new o.Point(r[0],r[1]),s=new o.Point(r[r.length-2],r[r.length-1]);if(a.x===s.x&&a.y===s.y){(r=r.slice()).pop(),r.pop();var u=(s=new o.Point(r[r.length-2],r[r.length-1])).x+.5*(a.x-s.x),c=s.y+.5*(a.y-s.y);r.unshift(u,c),r.push(u,c)}var l,f,h,d,p,v,m,g,y,_,b,E,S,T,w,O,R,A,P,x,C,M,L=t.points,k=t.indices,I=r.length/2,D=r.length,N=L.length/6,F=e.lineWidth/2,U=i.hex2rgb(e.lineColor),j=e.lineAlpha,B=U[0]*j,G=U[1]*j,H=U[2]*j;for(h=r[0],d=r[1],p=r[2],y=-(d-(v=r[3])),_=h-p,y/=M=Math.sqrt(y*y+_*_),_/=M,y*=F,_*=F,L.push(h-y,d-_,B,G,H,j),L.push(h+y,d+_,B,G,H,j),n=1;n<I-1;n++)h=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],v=r[2*n+1],m=r[2*(n+1)],g=r[2*(n+1)+1],y=-(d-v),_=h-p,y/=M=Math.sqrt(y*y+_*_),_/=M,y*=F,_*=F,b=-(v-g),E=p-m,b/=M=Math.sqrt(b*b+E*E),E/=M,R=(-y+h)*(-_+v)-(-y+p)*(-_+d),x=(-(b*=F)+m)*(-(E*=F)+v)-(-b+p)*(-E+g),C=(w=-_+d-(-_+v))*(P=-b+p-(-b+m))-(A=-E+g-(-E+v))*(O=-y+p-(-y+h)),Math.abs(C)<.1?(C+=10.1,L.push(p-y,v-_,B,G,H,j),L.push(p+y,v+_,B,G,H,j)):((l=(O*x-P*R)/C)-p)*(l-p)+((f=(A*R-w*x)/C)-v)*(f-v)>19600?(S=y-b,T=_-E,S/=M=Math.sqrt(S*S+T*T),T/=M,S*=F,T*=F,L.push(p-S,v-T),L.push(B,G,H,j),L.push(p+S,v+T),L.push(B,G,H,j),L.push(p-S,v-T),L.push(B,G,H,j),D++):(L.push(l,f),L.push(B,G,H,j),L.push(p-(l-p),v-(f-v)),L.push(B,G,H,j));for(h=r[2*(I-2)],d=r[2*(I-2)+1],p=r[2*(I-1)],y=-(d-(v=r[2*(I-1)+1])),_=h-p,y/=M=Math.sqrt(y*y+_*_),_/=M,y*=F,_*=F,L.push(p-y,v-_),L.push(B,G,H,j),L.push(p+y,v+_),L.push(B,G,H,j),k.push(N),n=0;n<D;n++)k.push(N++);k.push(N-1)}},r.prototype.buildComplexPoly=function(e,t){var n=e.points.slice();if(!(n.length<6)){var r=t.indices;t.points=n,t.alpha=e.fillAlpha,t.color=i.hex2rgb(e.fillColor);for(var o,a,s=1/0,u=-1/0,c=1/0,l=-1/0,f=0;f<n.length;f+=2)s=(o=n[f])<s?o:s,u=o>u?o:u,c=(a=n[f+1])<c?a:c,l=a>l?a:l;n.push(s,c,u,c,u,l,s,l);var h=n.length/2;for(f=0;f<h;f++)r.push(f)}},r.prototype.buildPoly=function(e,t){var n=e.points;if(!(n.length<6)){var r=t.points,o=t.indices,a=n.length/2,s=i.hex2rgb(e.fillColor),u=e.fillAlpha,c=s[0]*u,f=s[1]*u,h=s[2]*u,d=l(n,null,2);if(!d)return!1;var p=r.length/6,v=0;for(v=0;v<d.length;v+=3)o.push(d[v]+p),o.push(d[v]+p),o.push(d[v+1]+p),o.push(d[v+2]+p),o.push(d[v+2]+p);for(v=0;v<a;v++)r.push(n[2*v],n[2*v+1],c,f,h,u);return!0}}},function(e,t){function n(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var e=this.gl;this.glPoints=new Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndices,e.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r,s,u,c,l,d,v,m=t&&t.length,g=m?t[0]*n:e.length,y=i(e,0,g,n,!0),_=[];if(!y)return _;if(m&&(y=function(e,t,n,r){var a,s,u,c,l,d=[];for(a=0,s=t.length;a<s;a++)u=t[a]*r,c=a<s-1?t[a+1]*r:e.length,(l=i(e,u,c,r,!1))===l.next&&(l.steiner=!0),d.push(p(l));for(d.sort(f),a=0;a<d.length;a++)h(d[a],n),n=o(n,n.next);return n}(e,t,y,n)),e.length>80*n){r=u=e[0],s=c=e[1];for(var b=n;b<g;b+=n)(l=e[b])<r&&(r=l),(d=e[b+1])<s&&(s=d),l>u&&(u=l),d>c&&(c=d);v=0!==(v=Math.max(u-r,c-s))?1/v:0}return a(y,_,n,r,s,v),_}function i(e,t,n,r,i){var o,a;if(i===O(e,t,n,r)>0)for(o=t;o<n;o+=r)a=S(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=S(o,e[o],e[o+1],a);return a&&y(a,a.next)&&(T(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,i,f,h){if(e){!h&&f&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,f);for(var p,v,m=e;e.prev!==e.next;)if(p=e.prev,v=e.next,f?u(e,r,i,f):s(e))t.push(p.i/n),t.push(e.i/n),t.push(v.i/n),T(e),e=v.next,m=v.next;else if((e=v)===m){h?1===h?a(e=c(e,t,n),t,n,r,i,f,2):2===h&&l(e,t,n,r,i,f):a(o(e),t,n,r,i,f,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(v(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,n,r){var i=e.prev,o=e,a=e.next;if(g(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=d(s,u,t,n,r),h=d(c,l,t,n,r),p=e.prevZ,m=e.nextZ;p&&p.z>=f&&m&&m.z<=h;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==e.prev&&m!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=h;){if(m!==e.prev&&m!==e.next&&v(i.x,i.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!y(i,o)&&_(i,r,r.next,o)&&b(i,o)&&b(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),T(r),T(r.next),r=e=o),r=r.next}while(r!==e);return r}function l(e,t,n,r,i,s){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&m(u,c)){var l=E(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,t,n,r,i,s),void a(l,t,n,r,i,s)}c=c.next}u=u.next}while(u!==e)}function f(e,t){return e.x-t.x}function h(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,f=n.y,h=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&v(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&b(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=E(t,e);o(n,n.next)}}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function v(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&_(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&b(e,t)&&b(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,n,r){return!!(y(e,t)&&y(n,r)||y(e,r)&&y(n,t))||g(e,t,n)>0!=g(e,t,r)>0&&g(n,r,e)>0!=g(n,r,t)>0}function b(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function E(e,t){var n=new w(e.i,e.x,e.y),r=new w(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(e,t,n,r){var i=new w(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function w(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(O(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*n,l=s<u-1?t[s+1]*n:e.length;a-=Math.abs(O(e,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},function(e,t,n){function r(e,t,n){n=n||{},i.call(this,"Canvas",e,t,n),this.type=u.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1},this.resize(e,t)}var i=n(247),o=n(668),a=n(24),s=n(28),u=n(11);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,a.pluginTarget.mixin(r),r.prototype.render=function(e){this.emit("prerender");var t=e.parent;this._lastObjectRendered=e,e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e,this.context),this.emit("postrender")},r.prototype.destroy=function(e){this.destroyPlugins(),i.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},r.prototype.renderDisplayObject=function(e,t){var n=this.context;this.context=t,e.renderCanvas(this),this.context=n},r.prototype.resize=function(e,t){i.prototype.resize.call(this,e,t),this.smoothProperty&&(this.context[this.smoothProperty]=u.SCALE_MODES.DEFAULT===u.SCALE_MODES.LINEAR)},r.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},a.canUseNewCanvasBlendModes()?(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[u.BLEND_MODES.SCREEN]="screen",this.blendModes[u.BLEND_MODES.OVERLAY]="overlay",this.blendModes[u.BLEND_MODES.DARKEN]="darken",this.blendModes[u.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[u.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[u.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[u.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[u.BLEND_MODES.HUE]="hue",this.blendModes[u.BLEND_MODES.SATURATION]="saturate",this.blendModes[u.BLEND_MODES.COLOR]="color",this.blendModes[u.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[u.BLEND_MODES.SCREEN]="source-over",this.blendModes[u.BLEND_MODES.OVERLAY]="source-over",this.blendModes[u.BLEND_MODES.DARKEN]="source-over",this.blendModes[u.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[u.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[u.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[u.BLEND_MODES.HUE]="source-over",this.blendModes[u.BLEND_MODES.SATURATION]="source-over",this.blendModes[u.BLEND_MODES.COLOR]="source-over",this.blendModes[u.BLEND_MODES.LUMINOSITY]="source-over"))}},function(e,t,n){function r(){}var i=n(162);r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(e,t){t.context.save();var n=e.alpha,r=e.worldTransform,o=t.resolution;t.context.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),e.texture||(i.renderGraphicsMask(e,t.context),t.context.clip()),e.worldAlpha=n},r.prototype.popMask=function(e){e.context.restore()},r.prototype.destroy=function(){}},function(e,t,n){var r=n(3),i=r.DisplayObject,o=new r.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cachedSprite.worldAlpha=this.worldAlpha,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(e){if(!this._cachedSprite){e.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;t.x-=n,t.y-=n,t.width+=2*n,t.height+=2*n}var i=e.currentRenderTarget,a=e.filterManager.filterStack,s=new r.RenderTexture(e,0|t.width,0|t.height),u=o;u.tx=-t.x,u.ty=-t.y,this.renderWebGL=this._originalRenderWebGL,s.render(this,u,!0,!0),e.setRenderTarget(i),e.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(s),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(e))},i.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cachedSprite){var t=this.getLocalBounds(),n=e.context,i=new r.RenderTexture(e,0|t.width,0|t.height),a=o;a.tx=-t.x,a.ty=-t.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,a,!0),e.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},function(e,t,n){var r=n(3);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},function(e,t,n){var r=n(3);r.DisplayObject.prototype.getGlobalPosition=function(e){return e=e||new r.Point,this.parent?(this.displayObjectUpdateTransform(),e.x=this.worldTransform.tx,e.y=this.worldTransform.ty):(e.x=this.position.x,e.y=this.position.y),e}},function(e,t,n){function r(e){i.Sprite.call(this,e[0]instanceof i.Texture?e[0]:e[0].texture),this._textures=null,this._durations=null,this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=n(3);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(e){if(e[0]instanceof i.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}}},currentFrame:{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}}),r.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},r.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},r.prototype.gotoAndStop=function(e){this.stop(),this._currentTime=e,this._texture=this._textures[this.currentFrame]},r.prototype.gotoAndPlay=function(e){this._currentTime=e,this.play()},r.prototype.update=function(e){var t=this.animationSpeed*e;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},r.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},r.fromFrames=function(e){for(var t=[],n=0;n<e.length;++n)t.push(new i.Texture.fromFrame(e[n]));return new r(t)},r.fromImages=function(e){for(var t=[],n=0;n<e.length;++n)t.push(new i.Texture.fromImage(e[n]));return new r(t)}},function(e,t,n){function r(e,t,n){i.Sprite.call(this,e),this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this._width=t||100,this._height=n||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var i=n(3),o=new i.Point,a=n(246);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(e){this._width=e}},height:{get:function(){return this._height},set:function(e){this._height=e}}}),r.prototype._onTextureUpdate=function(){},r.prototype._renderWebGL=function(e){var t=this._texture;if(t&&t._uvs){var n=t._uvs,r=t._frame.width,i=t._frame.height,o=t.baseTexture.width,a=t.baseTexture.height;t._uvs=this._uvs,t._frame.width=this.width,t._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/a,this.shader.uniforms.uFrame.value[0]=n.x0,this.shader.uniforms.uFrame.value[1]=n.y0,this.shader.uniforms.uFrame.value[2]=n.x1-n.x0,this.shader.uniforms.uFrame.value[3]=n.y2-n.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(r*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=a/this._height*this.tileScale.y,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this),t._uvs=n,t._frame.width=r,t._frame.height=i}},r.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var n=e.context,r=this.worldTransform,o=e.resolution,s=t.baseTexture,u=this.tilePosition.x/this.tileScale.x%t._frame.width,c=this.tilePosition.y/this.tileScale.y%t._frame.height;if(!this._canvasPattern){var l=new i.CanvasBuffer(t._frame.width*o,t._frame.height*o);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(s.source,-t._frame.x*o,-t._frame.y*o),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),n.scale(this.tileScale.x/o,this.tileScale.y/o),n.translate(u+this.anchor.x*-this._width,c+this.anchor.y*-this._height);var f=e.blendModes[this.blendMode];f!==e.context.globalCompositeOperation&&(n.globalCompositeOperation=f),n.fillStyle=this._canvasPattern,n.fillRect(-u,-c,this._width*o/this.tileScale.x,this._height*o/this.tileScale.y)}},r.prototype.getBounds=function(){var e,t,n,r,i=this._width,o=this._height,a=i*(1-this.anchor.x),s=i*-this.anchor.x,u=o*(1-this.anchor.y),c=o*-this.anchor.y,l=this.worldTransform,f=l.a,h=l.b,d=l.c,p=l.d,v=l.tx,m=l.ty,g=f*s+d*c+v,y=p*c+h*s+m,_=f*a+d*c+v,b=p*c+h*a+m,E=f*a+d*u+v,S=p*u+h*a+m,T=f*s+d*u+v,w=p*u+h*s+m;e=T<(e=E<(e=_<(e=g)?_:e)?E:e)?T:e,n=w<(n=S<(n=b<(n=y)?b:n)?S:n)?w:n,t=T>(t=E>(t=_>(t=g)?_:t)?E:t)?T:t,r=w>(r=S>(r=b>(r=y)?b:r)?S:r)?w:r;var O=this._bounds;return O.x=e,O.width=t-e,O.y=n,O.height=r-n,this._currentBounds=O,O},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,o);var t,n=this._width,r=this._height,i=-n*this.anchor.x;return o.x>i&&o.x<i+n&&(t=-r*this.anchor.y,o.y>t&&o.y<t+r)},r.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},r.fromFrame=function(e,t,n){var o=i.utils.TextureCache[e];if(!o)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new r(o,t,n)},r.fromImage=function(e,t,n,o,a){return new r(i.Texture.fromImage(e,o,a),t,n)}},function(e,t,n){function r(e,t){i.Container.call(this),t=t||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==t.tint?t.tint:16777215,align:t.align||"left",name:null,size:0},this.font=t.font,this._text=e,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var i=n(3);r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{tint:{get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):r.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),r.prototype.updateText=function(){for(var e=r.fonts[this._font.name],t=new i.Point,n=null,o=[],a=0,s=0,u=[],c=0,l=this._font.size/e.size,f=-1,h=0,d=0;d<this.text.length;d++){var p=this.text.charCodeAt(d);if(f=/(\s)/.test(this.text.charAt(d))?d:f,/(?:\r\n|\r|\n)/.test(this.text.charAt(d)))u.push(a),s=Math.max(s,a),c++,t.x=0,t.y+=e.lineHeight,n=null;else if(-1!==f&&this.maxWidth>0&&t.x*l>this.maxWidth)i.utils.removeItems(o,f,d-f),d=f,f=-1,u.push(a),s=Math.max(s,a),c++,t.x=0,t.y+=e.lineHeight,n=null;else{var v=e.chars[p];v&&(n&&v.kerning[n]&&(t.x+=v.kerning[n]),o.push({texture:v.texture,line:c,charCode:p,position:new i.Point(t.x+v.xOffset,t.y+v.yOffset)}),a=t.x+(v.texture.width+v.xOffset),t.x+=v.xAdvance,h=Math.max(h,v.yOffset+v.texture.height),n=p)}}u.push(a),s=Math.max(s,a);var m=[];for(d=0;d<=c;d++){var g=0;"right"===this._font.align?g=s-u[d]:"center"===this._font.align&&(g=(s-u[d])/2),m.push(g)}var y=o.length,_=this.tint;for(d=0;d<y;d++){var b=this._glyphs[d];b?b.texture=o[d].texture:(b=new i.Sprite(o[d].texture),this._glyphs.push(b)),b.position.x=(o[d].position.x+m[o[d].line])*l,b.position.y=o[d].position.y*l,b.scale.x=b.scale.y=l,b.tint=_,b.parent||this.addChild(b)}for(d=y;d<this._glyphs.length;++d)this.removeChild(this._glyphs[d]);this.textWidth=s*l,this.textHeight=(t.y+e.lineHeight)*l,this.maxLineHeight=h*l},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.fonts={}},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/ascii.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})}).call(this,"/")},function(e,t,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a,this.defaultFilter=new i.AbstractFilter}var i=n(3),o=n(112),a=n(164);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(e,t,n),this.blurXFilter.applyFilter(e,t,r),e.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(e,r,n),e.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),e.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},function(e,t,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a}var i=n(3),o=n(112),a=n(164);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(e,t,r),this.blurYFilter.applyFilter(e,r,n),e.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.padding=.5*Math.abs(e),this.blurXFilter.blur=this.blurYFilter.blur=e}},passes:{get:function(){return this.blurXFilter.passes},set:function(e){this.blurXFilter.passes=this.blurYFilter.passes=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},function(e,t,n){(function(t){function r(e,n){i.AbstractFilter.call(this,o.readFileSync(t+"/blurDir.vert","utf8"),o.readFileSync(t+"/blurDir.frag","utf8"),{strength:{type:"1f",value:1},dirX:{type:"1f",value:e||0},dirY:{type:"1f",value:n||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=e||0,this.dirY=n||0,this.strength=4}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n,r){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(i,t,n,r);else{var o=e.filterManager.getRenderTarget(!0);e.filterManager.applyFilter(i,t,o,r);for(var a=0;a<this.passes-2;a++)e.filterManager.applyFilter(i,o,o,r);e.filterManager.applyFilter(i,o,n,r),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}},dirX:{get:function(){return this.dirX},set:function(e){this.uniforms.dirX.value=e}},dirY:{get:function(){return this.dirY},set:function(e){this.uniforms.dirY.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/colorMatrix.frag","utf8"),{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._loadMatrix=function(e,t){var n=e;(t=!!t)&&(this._multiply(n,this.uniforms.m.value,e),n=this._colorMatrix(n)),this.uniforms.m.value=n},r.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19],e},r.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},r.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.grayscale=r.prototype.greyscale,r.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},r.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=[.213+.787*n+-.213*r,.715+-.715*n+-.715*r,.072+-.072*n+.928*r,0,0,.213+-.213*n+.143*r,.715+n*(1-.715)+.14*r,.072+-.072*n+-.283*r,0,0,.213+-.213*n+-.787*r,.715+-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.contrast=function(e,t){var n=(e||0)+1,r=-128*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.saturate=function(e,t){var n=2*(e||0)/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},r.prototype.desaturate=function(e){this.saturate(-1)},r.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},r.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},r.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},r.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},r.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},r.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},r.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},r.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},r.prototype.colorTone=function(e,t,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,l=(255&r)/255,f=[.3,.59,.11,0,0,o,a,s,e=e||.2,0,u,c,l,t=t||.15,0,o-u,a-c,s-l,0,0];this._loadMatrix(f,i)},r.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},r.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(e){this.uniforms.m.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/colorStep.frag","utf8"),{step:{type:"1f",value:5}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(e,n,r){i.AbstractFilter.call(this,null,o.readFileSync(t+"/convolution.frag","utf8"),{matrix:{type:"1fv",value:new Float32Array(e)},texelSize:{type:"v2",value:{x:1/n,y:1/r}}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=new Float32Array(e)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(e){this.uniforms.texelSize.value.x=1/e}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(e){this.uniforms.texelSize.value.y=1/e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/crosshatch.frag","utf8"))}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r}).call(this,"/")},function(e,t,n){(function(t){function r(e,n){var r=new i.Matrix;e.renderable=!1,i.AbstractFilter.call(this,o.readFileSync(t+"/displacement.vert","utf8"),o.readFileSync(t+"/displacement.frag","utf8"),{mapSampler:{type:"sampler2D",value:e.texture},otherMatrix:{type:"mat3",value:r.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=e,this.maskMatrix=r,null==n&&(n=20),this.scale=new i.Point(n,n)}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager;r.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/t.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/t.frame.height);var i=this.getShader(e);r.applyFilter(i,t,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(e){this.uniforms.mapSampler.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/dotScreen.frag","utf8"),{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/gray.frag","utf8"),{gray:{type:"1f",value:1}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}})}).call(this,"/")},function(e,t,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new a,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=n(3),o=n(112),a=n(687);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(e,t,r),e.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(e,r,n),e.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(e,t,n),e.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYTintFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(e){this.blurYTintFilter.blur=e}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(e){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(e)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(e){this.blurYTintFilter.uniforms.alpha.value=e}},distance:{get:function(){return this._distance},set:function(e){this._dirtyPosition=!0,this._distance=e}},angle:{get:function(){return this._angle},set:function(e){this._dirtyPosition=!0,this._angle=e}}})},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,o.readFileSync(t+"/blurYTint.vert","utf8"),o.readFileSync(t+"/blurYTint.frag","utf8"),{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n,r){var i=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(i,t,n,r);else{for(var o=e.filterManager.getRenderTarget(!0),a=t,s=o,u=0;u<this.passes-1;u++){e.filterManager.applyFilter(i,a,s,r);var c=s;s=a,a=c}e.filterManager.applyFilter(i,a,n,r),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/invert.frag","utf8"),{invert:{type:"1f",value:1}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/noise.frag","utf8"),{noise:{type:"1f",value:.5}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(e){this.uniforms.noise.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/pixelate.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/rgbSplit.frag","utf8"),{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}},green:{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}},blue:{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/shockwave.frag","utf8"),{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(e){this.uniforms.center.value=e}},params:{get:function(){return this.uniforms.params.value},set:function(e){this.uniforms.params.value=e}},time:{get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/sepia.frag","utf8"),{sepia:{type:"1f",value:1}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}})}).call(this,"/")},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/smartBlur.frag","utf8"),{delta:{type:"v2",value:{x:.1,y:0}}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r}).call(this,"/")},function(e,t,n){function r(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new a}var i=n(3),o=n(255),a=n(257);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(e,t,n){var r=e.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(e,t,r),this.tiltShiftYFilter.applyFilter(e,r,n),e.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}}})},function(e,t,n){(function(t){function r(){i.AbstractFilter.call(this,null,o.readFileSync(t+"/twist.frag","utf8"),{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=n(3),o=n(12);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}},radius:{get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})}).call(this,"/")},function(e,t,n){
/**
 * @file        Main export of the PIXI interactions library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={InteractionData:n(258),InteractionManager:n(698),interactiveTarget:n(259)}},function(e,t,n){function r(e,t){t=t||{},this.renderer=e,this.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=n(3),o=n(258);Object.assign(i.DisplayObject.prototype,n(259)),r.prototype.constructor=r,e.exports=r,r.prototype.setTargetElement=function(e,t){this.removeEvents(),this.interactionDOMElement=e,this.resolution=t||1,this.addEvents()},r.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},r.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},r.prototype.update=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.interactionDOMElement&&(this.didMove?this.didMove=!1:(this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor))))},r.prototype.dispatchEvent=function(e,t,n){n.stopped||(n.target=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},r.prototype.mapPositionToPoint=function(e,t,n){var r=this.interactionDOMElement.getBoundingClientRect();e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},r.prototype.processInteractive=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=!1,a=i=t.interactive||i;if(t.hitArea&&(a=!1),t.interactiveChildren)for(var s=t.children,u=s.length-1;u>=0;u--){var c=s[u];if(this.processInteractive(e,c,n,r,a)){if(!c.parent)continue;o=!0,a=!1,r=!1}}return i&&(r&&!o&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),o=t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):t.containsPoint&&(o=t.containsPoint(e))),t.interactive&&n(t,o)),o},r.prototype.onMouseDown=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},r.prototype.processMouseDown=function(e,t){var n=this.mouse.originalEvent,r=2===n.button||3===n.which;t&&(e[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(e,r?"rightdown":"mousedown",this.eventData))},r.prototype.onMouseUp=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},r.prototype.processMouseUp=function(e,t){var n=this.mouse.originalEvent,r=2===n.button||3===n.which,i=r?"_isRightDown":"_isLeftDown";t?(this.dispatchEvent(e,r?"rightup":"mouseup",this.eventData),e[i]&&(e[i]=!1,this.dispatchEvent(e,r?"rightclick":"click",this.eventData))):e[i]&&(e[i]=!1,this.dispatchEvent(e,r?"rightupoutside":"mouseupoutside",this.eventData))},r.prototype.onMouseMove=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},r.prototype.processMouseMove=function(e,t){this.processMouseOverOut(e,t),this.moveWhenInside&&!t||this.dispatchEvent(e,"mousemove",this.eventData)},r.prototype.onMouseOut=function(e){this.mouse.originalEvent=e,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},r.prototype.processMouseOverOut=function(e,t){t?(e._over||(e._over=!0,this.dispatchEvent(e,"mouseover",this.eventData)),e.buttonMode&&(this.cursor=e.defaultCursor)):e._over&&(e._over=!1,this.dispatchEvent(e,"mouseout",this.eventData))},r.prototype.onTouchStart=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,n=t.length,r=0;r<n;r++){var i=t[r],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},r.prototype.processTouchStart=function(e,t){t&&(e._touchDown=!0,this.dispatchEvent(e,"touchstart",this.eventData))},r.prototype.onTouchEnd=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,n=t.length,r=0;r<n;r++){var i=t[r],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},r.prototype.processTouchEnd=function(e,t){t?(this.dispatchEvent(e,"touchend",this.eventData),e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"tap",this.eventData))):e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"touchendoutside",this.eventData))},r.prototype.onTouchMove=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,n=t.length,r=0;r<n;r++){var i=t[r],o=this.getTouchData(i);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(o)}},r.prototype.processTouchMove=function(e,t){this.moveWhenInside&&!t||this.dispatchEvent(e,"touchmove",this.eventData)},r.prototype.getTouchData=function(e){var t=this.interactiveDataPool.pop();return t||(t=new o),t.identifier=e.identifier,this.mapPositionToPoint(t.global,e.clientX,e.clientY),navigator.isCocoonJS&&(t.global.x=t.global.x/this.resolution,t.global.y=t.global.y/this.resolution),e.globalX=t.global.x,e.globalY=t.global.y,t},r.prototype.returnTouchData=function(e){this.interactiveDataPool.push(e)},r.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",r),i.CanvasRenderer.registerPlugin("interaction",r)},function(e,t,n){
/**
 * @file        Main export of the PIXI loaders library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={Loader:n(700),bitmapFontParser:n(266),spritesheetParser:n(264),textureParser:n(263),Resource:n(113).Resource}},function(e,t,n){function r(e,t){i.call(this,e,t);for(var n=0;n<r._pixiMiddleware.length;++n)this.use(r._pixiMiddleware[n]())}var i=n(113),o=n(263),a=n(264),s=n(266);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r._pixiMiddleware=[i.middleware.parsing.blob,o,a,s],r.addPixiMiddleware=function(e){r._pixiMiddleware.push(e)};var u=i.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},function(e,t,n){"use strict";function r(e,t){s.call(this),t=t||u,this.baseUrl=e||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,t),this.resources={}}var i=n(260),o=n(261),a=n(165),s=n(262),u=10;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.add=r.prototype.enqueue=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(r=t||e.callback||e.onComplete,n=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.resources[e])throw new Error('Resource with name "'+e+'" already exists.');return t=this._prepareUrl(t),this.resources[e]=new a(e,t,n),"function"==typeof r&&this.resources[e].once("afterMiddleware",r),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[e]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[e]),this._progressChunk=100/this._buffer.length),this},r.prototype.before=r.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},r.prototype.after=r.prototype.use=function(e){return this._afterMiddleware.push(e),this},r.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources){var t=this.resources[e];t.off("complete",this._onLoad,this),t.isLoading&&t.abort()}return this.resources={},this},r.prototype.load=function(e){if("function"==typeof e&&this.once("complete",e),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var t=0;t<this._buffer.length;++t)this._queue.push(this._buffer[t]);return this._buffer.length=0,this},r.prototype._prepareUrl=function(e){var t=i(e,{strictMode:!0});return t.protocol||!t.path||0===t.path.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e},r.prototype._loadResource=function(e,t){var n=this;e._dequeue=t,o.eachSeries(this._beforeMiddleware,(function(t,r){t.call(n,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?n._onLoad(e):(e.once("complete",n._onLoad,n),e.load())}))},r.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},r.prototype._onLoad=function(e){var t=this;o.eachSeries(this._afterMiddleware,(function(n,r){n.call(t,e,r)}),(function(){e.emit("afterMiddleware",e),t._numToLoad--,t.progress+=t._progressChunk,t.emit("progress",t,e),e.error?t.emit("error",e.error,t,e):t.emit("load",t,e),0===t._numToLoad&&(t.progress=100,t._onComplete())})),e._dequeue()},r.LOAD_TYPE=a.LOAD_TYPE,r.XHR_RESPONSE_TYPE=a.XHR_RESPONSE_TYPE},function(e,t,n){"use strict";var r={};e.exports=function(){return function(e,t){r[e.url]?(e.data=r[e.url],e.complete()):e.once("complete",(function(){r[this.url]=this.data})),t()}}},function(e,t,n){"use strict";var r=n(165),i=n(704),o=window.URL||window.webkitURL;e.exports=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===r.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=o.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.isImage=!0,void(e.data.onload=function(){o.revokeObjectURL(n),e.data.onload=null,t()})}}else{var a=e.xhr.getResponseHeader("content-type");if(a&&0===a.indexOf("image"))return e.data=new Image,e.data.src="data:"+a+";base64,"+i.encodeBinary(e.xhr.responseText),e.isImage=!0,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}}},function(e,t,n){"use strict";e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(e){for(var t,n="",r=new Array(4),i=0,o=0;i<e.length;){for(t=new Array(3),o=0;o<t.length;o++)i<e.length?t[o]=255&e.charCodeAt(i++):t[o]=0;switch(r[0]=t[0]>>2,r[1]=(3&t[0])<<4|t[1]>>4,r[2]=(15&t[1])<<2|t[2]>>6,r[3]=63&t[2],i-(e.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(o=0;o<r.length;o++)n+=this._keyStr.charAt(r[o])}return n}}},function(e,t,n){function r(e,t,n){i.call(this,e),this._ready=!0,this.segmentsX=t||10,this.segmentsY=n||10,this.drawMode=i.DRAW_MODES.TRIANGLES,this.refresh()}var i=n(114);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.refresh=function(){var e=this.segmentsX*this.segmentsY,t=[],n=[],r=[],i=this.texture,o=this.segmentsX-1,a=this.segmentsY-1,s=0,u=i.width/o,c=i.height/a;for(s=0;s<e;s++){var l=s%this.segmentsX,f=s/this.segmentsX|0;t.push(l*u,f*c),n.push(i._uvs.x0+(i._uvs.x1-i._uvs.x0)*(l/(this.segmentsX-1)),i._uvs.y0+(i._uvs.y3-i._uvs.y0)*(f/(this.segmentsY-1)))}var h=o*a;for(s=0;s<h;s++){var d=s%o,p=s/o|0,v=p*this.segmentsX+d,m=p*this.segmentsX+d+1,g=(p+1)*this.segmentsX+d,y=(p+1)*this.segmentsX+d+1;r.push(v,m,g),r.push(m,y,g)}this.vertices=new Float32Array(t),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r)},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},function(e,t,n){function r(e,t){i.call(this,e),this.points=t,this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length),this._ready=!0,this.refresh()}var i=n(114),o=n(3);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){var t=this.uvs,n=this.indices,r=this.colors,i=this._texture._uvs,a=new o.Point(i.x0,i.y0),s=new o.Point(i.x2-i.x0,i.y2-i.y0);t[0]=0+a.x,t[1]=0+a.y,t[2]=0+a.x,t[3]=1*s.y+a.y,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var u,c,l=e.length,f=1;f<l;f++)e[f],c=f/(l-1),t[u=4*f]=c*s.x+a.x,t[u+1]=0+a.y,t[u+2]=c*s.x+a.x,t[u+3]=1*s.y+a.y,r[u=2*f]=1,r[u+1]=1,n[u=2*f]=u,n[u+1]=u+1;this.dirty=!0}},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},r.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){for(var t,n,r,i,o,a=e[0],s=0,u=0,c=this.vertices,l=e.length,f=0;f<l;f++)n=e[f],r=4*f,u=-((t=f<e.length-1?e[f+1]:n).x-a.x),s=t.y-a.y,10*(1-f/(l-1))>1&&1,s/=i=Math.sqrt(s*s+u*u),u/=i,s*=o=this._texture.height/2,u*=o,c[r]=n.x+s,c[r+1]=n.y+u,c[r+2]=n.x-s,c[r+3]=n.y-u,a=n;this.containerUpdateTransform()}}},function(e,t,n){function r(e){i.ObjectRenderer.call(this,e),this.indices=new Uint16Array(15e3);for(var t=0,n=0;t<15e3;t+=6,n+=4)this.indices[t+0]=n+0,this.indices[t+1]=n+1,this.indices[t+2]=n+2,this.indices[t+3]=n+0,this.indices[t+4]=n+2,this.indices[t+5]=n+3;this.currentShader=null}var i=n(3),o=n(114);r.prototype=Object.create(i.ObjectRenderer.prototype),r.prototype.constructor=r,e.exports=r,i.WebGLRenderer.registerPlugin("mesh",r),r.prototype.onContextChange=function(){},r.prototype.render=function(e){e._vertexBuffer||this._initWebGL(e);var t=this.renderer,n=t.gl,r=e._texture.baseTexture,i=e.shader,a=e.drawMode===o.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;t.blendModeManager.setBlendMode(e.blendMode),i=i?i.shaders[n.id]||i.getShader(t):t.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(i),i.uniforms.translationMatrix.value=e.worldTransform.toArray(!0),i.uniforms.projectionMatrix.value=t.currentRenderTarget.projectionMatrix.toArray(!0),i.uniforms.alpha.value=e.worldAlpha,i.syncUniforms(),e.dirty?(e.dirty=!1,n.bindBuffer(n.ARRAY_BUFFER,e._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,e.vertices,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,e._uvBuffer),n.bufferData(n.ARRAY_BUFFER,e.uvs,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.indices,n.STATIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,e._vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,e.vertices),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,e._uvBuffer),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e._indexBuffer),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,e.indices)),n.drawElements(a,e.indices.length,n.UNSIGNED_SHORT,0)},r.prototype._initWebGL=function(e){var t=this.renderer.gl;e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),e.colors&&(e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)},r.prototype.flush=function(){},r.prototype.start=function(){this.currentShader=null},r.prototype.destroy=function(){i.ObjectRenderer.prototype.destroy.call(this)}},function(e,t,n){function r(e){i.Shader.call(this,e,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=n(3);r.prototype=Object.create(i.Shader.prototype),r.prototype.constructor=r,e.exports=r,i.ShaderManager.registerPlugin("meshShader",r)},function(e,t,n){
/**
 * @file        Main export of the PIXI accessibility library
 * @author      Mat Groves <mat@goodboydigital.com>
 * @copyright   2013-2015 GoodBoyDigital
 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
 */
e.exports={accessibleTarget:n(268),AccessibilityManager:n(710)}},function(e,t,n){function r(e){var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=2,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var i=n(3);Object.assign(i.DisplayObject.prototype,n(268)),r.prototype.constructor=r,e.exports=r,r.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(e){if(e.visible&&(e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId),e.interactiveChildren))for(var t=e.children,n=t.length-1;n>=0;n--)this.updateAccessibleObjects(t[n])},r.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,n=e.height/this.renderer.height,r=this.div;r.style.left=e.left+"px",r.style.top=e.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var a=this.children[o];if(a.renderId!==this.renderId)a._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{r=a._accessibleDiv;var s=a.hitArea,u=a.worldTransform;a.hitArea?(r.style.left=(u.tx+s.x*u.a)*t+"px",r.style.top=(u.ty+s.y*u.d)*n+"px",r.style.width=s.width*u.a*t+"px",r.style.height=s.height*u.d*n+"px"):(s=a.getBounds(),this.capHitArea(s),r.style.left=s.x*t+"px",r.style.top=s.y*n+"px",r.style.width=s.width*t+"px",r.style.height=s.height*n+"px")}}this.renderId++},r.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},r.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.title=e.accessibleTitle||"displayObject "+this.tabIndex,e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},r.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},r.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},r.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},r.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},r.prototype._onMouseMove=function(){this.deactivate()},r.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.WebGLRenderer.registerPlugin("accessibility",r),i.CanvasRenderer.registerPlugin("accessibility",r)},function(e,t,n){var r=n(3),i=n(267),o=n(163),a=n(254);r.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},r.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(r,{Stage:{get:function(){return r.Container}},DisplayObjectContainer:{get:function(){return r.Container}},Strip:{get:function(){return i.Mesh}},Rope:{get:function(){return i.Rope}},MovieClip:{get:function(){return o.MovieClip}},TilingSprite:{get:function(){return o.TilingSprite}},BitmapText:{get:function(){return o.BitmapText}},blendModes:{get:function(){return r.BLEND_MODES}},scaleModes:{get:function(){return r.SCALE_MODES}},BaseTextureCache:{get:function(){return r.utils.BaseTextureCache}},TextureCache:{get:function(){return r.utils.TextureCache}},math:{get:function(){return r}}}),r.Sprite.prototype.setTexture=function(e){this.texture=e},o.BitmapText.prototype.setText=function(e){this.text=e},r.Text.prototype.setText=function(e){this.text=e},r.Text.prototype.setStyle=function(e){this.style=e},r.Texture.prototype.setFrame=function(e){this.frame=e},Object.defineProperties(a,{AbstractFilter:{get:function(){return r.AbstractFilter}},FXAAFilter:{get:function(){return r.FXAAFilter}},SpriteMaskFilter:{get:function(){return r.SpriteMaskFilter}}}),r.utils.uuid=function(){return r.utils.uid()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatFilter=void 0,function(e){var t=-4800;e.isAcceptableByNgScoring=function(e){return!(e.score&&e.score<=t)}}(t.ChatFilter||(t.ChatFilter={}))},function(e,t,n){try{var r=n(237);r.interaction.InteractionManager.prototype.mapPositionToPoint=function(e,t,n){var r;r=null===this.interactionDOMElement.parentElement?{x:0,y:0,width:0,height:0}:this.interactionDOMElement.getBoundingClientRect(),e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},window.pixijs=r}catch(e){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.needsUserAction=void 0;var r=n(56);t.needsUserAction=function(e,t){var n=new r.UAParser(e);if("Android"===n.getOS().name)return!0;var i=parseInt(n.getBrowser().major,10);switch(n.getBrowser().name){case"Chrome":return i>=66&&!t;case"Safari":return i>=11&&!t;case"Mobile Safari":return i<=10||!t;default:return!1}}},function(e,t,n){"use strict";function r(){}function i(){}var o=n(716);i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":r(e))||null===e||"object"!==(void 0===t?"undefined":r(t))||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=!0,a=0,s=n.length;a<s;a++){var u=n[a];if(e[u]!==t[u]){o=!1;break}}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,c=function n(){var c=Date.now()-s;c<t&&c>=0?i=setTimeout(n,t-c):(i=null,r||(u=e.apply(a,o),i||(a=null,o=null)))};return function(){for(var l=arguments.length,f=Array(l),h=0;h<l;h++)f[h]=arguments[h];var d=r&&!i;return a=n,o=f,s=Date.now(),i||(i=setTimeout(c,t)),d&&(u=e.apply(a,o),a=o=null),u}}},function(e,t,n){var r=n(720),i=n(721);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1},a=(r("!!../../../../css-loader/dist/cjs.js??ref--5-1!../../../../postcss-loader/src/index.js!../../../../sass-loader/dist/cjs.js??ref--5-3!./video.scss",i,o),i.locals?i.locals:{});e.exports=a},function(e,t,n){"use strict";function r(e,t,n){e=n.base?e+n.base:e,l[e]||(l[e]=[]);for(var r=0;r<t.length;r++){var i=t[r],o={css:i[1],media:i[2],sourceMap:i[3]},a=l[e];a[r]?a[r].updater(o):a.push({updater:s(o,n)})}for(var u=t.length;u<l[e].length;u++)l[e][u].updater();l[e].length=t.length,0===l[e].length&&delete l[e]}function i(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=h(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}function o(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function a(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function s(e,t){var n,r,s;if(t.singleton){var u=v++;n=p||(p=i(t)),r=o.bind(null,n,u,!1),s=o.bind(null,n,u,!0)}else n=i(t),r=a.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}var u,c,l={},f=function(){return void 0===u&&(u=Boolean(window&&document&&document.all&&!window.atob)),u},h=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")}),p=null,v=0;e.exports=function(e,t,n){return(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=f()),r(e,t,n),function(t){r(e,t||[],n)}}},function(e,t,n){(t=n(722)(!1)).push([e.i,'.___loading-wrapper___3OB-h{display:block;position:absolute;top:50%;left:50%;width:8%;min-width:32px;height:auto;min-height:32px;transform:translate(-50%, -50%);opacity:.4;border-radius:4px;background-color:#000}.___loading-wrapper___3OB-h:before{display:block;padding-top:100%;content:""}svg.___loading___11ueC{display:block;position:absolute;top:0;right:0;bottom:0;left:0;transform-origin:50% 50% 0;animation-name:___spin___z9yOE;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}@keyframes ___spin___z9yOE{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes ___spin___z9yOE{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}',""]),t.locals={"loading-wrapper":"___loading-wrapper___3OB-h",loadingWrapper:"___loading-wrapper___3OB-h",loading:"___loading___11ueC",spin:"___spin___z9yOE"},e.exports=t},function(e,t,n){"use strict";function r(e,t){var n,r,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot).concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=r(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r=0;r<e.length;r++){var i=[].concat(e[r]);n&&(i[2]?i[2]="".concat(n," and ").concat(i[2]):i[2]=n),t.push(i)}},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(724);t.Player=r.Player,t.PlayerEvents=r.PlayerEvents,t.PlayerOptions=r.PlayerOptions},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(18),o=n(725),a=n(274),s=n(166),u=n(282),c=n(735),l=n(737),f=n(742),h=n(743),d=n(744),p=n(77);!function(e){e.PLAYABLE="PLAYABLE",e.MASTER_PLAYLIST_LOADED="MASTER_PLAYLIST_LOADED",e.MEDIA_PLAYLIST_LOADED="MEDIA_PLAYLIST_LOADED",e.MEDIA_PLAYLIST_SWITCHED="MEDIA_PLAYLIST_SWITCHED",e.INIT_SEGMENT_LOADED="INIT_SEGMENT_LOADED",e.MEDIA_SEGMENT_HEADER_LOADED="MEDIA_SEGMENT_HEADER_LOADED",e.MEDIA_SEGMENT_CHUNK_LOADED="MEDIA_SEGMENT_CHUNK_LOADED",e.MEDIA_SEGMENT_LOAD_COMPLETED="MEDIA_SEGMENT_LOAD_COMPLETED",e.BUFFER_UPDATED="BUFFER_UPDATED",e.BUFFER_LOW="BUFFER_LOW",e.BUFFER_FILL="BUFFER_FILL",e.BUFFER_STALLED="BUFFER_STALLED",e.BUFFER_STUCK="BUFFER_STUCK",e.BUFFER_MONITORED="BUFFER_MONITORED",e.TIMESTAMP_ADJUSTED="TIMESTAMP_ADJUSTED",e.NETWORK_BANDWIDTH_CALCULATED="NETWORK_BANDWIDTH_CALCULATED",e.ERROR="ERROR",e.FATAL="FATAL"}(r=t.PlayerEvents||(t.PlayerEvents={}));var v=function(){this.debug=!0,this.maxInitialBufferDurationSec=.5,this.playStartPositionFixTimeoutSec=.2,this.bufferMonitorIntervalSec=.2,this.bufferLowThresholdSec=.2,this.bufferFillThresholdSec=.3,this.bufferStallThresholdSec=2,this.bufferStuckThresholdCount=3,this.maximumDelaySec=2,this.bufferSkipRemainSec=.5,this.statsHistoryLimit=50,this.abrNetworkBandwidthHistorySize=5,this.essentialDataLoadRetry=5};t.PlayerOptions=v;var m=["chrome","firefox","opera"],g=function(){function e(e){var t=this;this.iseq=new l.InstructionSequence,this.isLoading=!1,this.isDestroied=!1,this.eventEmitter=new i.EventEmitter,this.currentInsn=null,this.isMediaPlaylistLoaded=!1,this.initSegments={},this.baseMediaDecodeTimeOffset=0,this.handlerTypeToLastMediaSegmentChunk={},this.mimeType='video/mp4; codecs="avc1.640014,mp4a.40.2"',this.loadedDurationSec=0,this.playStartPositionSec=0,this.isPlayStartPositionFixed=!1,this.isPlayStartPositionFixTimerScheduled=!1,this.isInitialBufferReady=!1,this.isMSEPlayerPlayable=!1,this.isPlayableEventHandled=!1,this.onStepDone=function(e){setTimeout((function(){t.currentInsn===e&&(t.currentInsn=null,t.step())}),0)},this.onMasterPlaylistLoaded=function(e){t.masterPlaylist=e,t.abrSelector=new d.ABRSelector(t.masterPlaylist,t.networkStats,t.options.abrNetworkBandwidthHistorySize),t.fireEvent(r.MASTER_PLAYLIST_LOADED,[e.text]),t.selectAndSwitchMediaPlaylist()},this.onMediaPlaylistLoaded=function(e){for(var n,i=e.size(),o=e.mediaSequence,s=0,u=[],c=0;c<i;c++){var f=e.at(c);if(f instanceof a.MediaPlaylistEntryExtinf){if(!n){s++;continue}t.isMediaPlaylistLoaded||(u=[]);var h=new l.EnsureInitSegmentInstruction(e.url,n,{isInitSegmentLoaded:t.isInitSegmentCached,onInitSegmentLoaded:t.onInitSegmentLoaded,onError:t.onError,onFatal:t.onFatal},t.options.essentialDataLoadRetry),d=o+s,p=f.url,v=f.duration,m=new l.LoadMediaSegmentInstruction(e.url,d,p,v,{onMediaSegmentHeaderLoaded:t.onMediaSegmentHeaderLoaded,onMediaSegmentChunkLoaded:t.onMediaSegmentChunkLoaded,onMediaSegmentLoadCompleted:t.onMediaSegmentLoadCompleted,onNetworkBandwidthCalculated:t.onNetworkBandwidthCalculated,onError:t.onError});u.push(new l.InstructionBlock(h,m)),s++}else f instanceof a.MediaPlaylistEntryExtXMap&&(n=f.url)}t.isMediaPlaylistLoaded=!0,t.iseq.update(u),t.step(),t.msePlayer.setBufferKeepDuration(2*e.targetDuration),t.fireEvent(r.MEDIA_PLAYLIST_LOADED,[e.text])},this.isInitSegmentCached=function(e,n){return!!t.initSegments[e]&&t.initSegments[e].url===n},this.onInitSegmentLoaded=function(e,n){n.url,n.timescale;t.initSegments[e]=n,t.fireEvent(r.INIT_SEGMENT_LOADED,[n.url])},this.onMediaSegmentHeaderLoaded=function(e,n){void 0===t.firstMediaSegmentId&&(t.firstMediaSegmentId=n.id,t.baseMediaDecodeTimeOffset=-n.baseMediaDecodeTime),t.isPlayStartPositionFixTimerScheduled||(t.isPlayStartPositionFixTimerScheduled=!0,setTimeout((function(){t.fixPlayStartPosition()}),Math.floor(1e3*t.options.playStartPositionFixTimeoutSec))),t.fireEvent(r.MEDIA_SEGMENT_HEADER_LOADED,[n.url])},this.onMediaSegmentChunkLoaded=function(e,n){var i=n.trackId,o=t.initSegments[e],a=o.handlerTypes[i];if(void 0===t.baseHandlerType&&(t.baseHandlerType=a),void 0!==t.handlerTypeToLastMediaSegmentChunk[a]){var u=t.handlerTypeToLastMediaSegmentChunk[a],c=u.mediaSegmentHeader.id,l=n.mediaSegmentHeader.id;if(a===t.baseHandlerType&&c!==l){var f=u.lastPts-n.firstPts;Math.abs(f)>1&&(t.baseMediaDecodeTimeOffset+=f,t.fireEvent(r.TIMESTAMP_ADJUSTED,[a,f]))}}s.MediaSegmentEditor.addOffsetToTfdtBaseMediaDecodeTime(n.data,t.baseMediaDecodeTimeOffset),t.msePlayer.appendBuffer(t.mimeType,o.data,n.data);var h=o.timescale,d=n.duration,p=(n.baseMediaDecodeTime+t.baseMediaDecodeTimeOffset+d)/h;t.loadedDurationSec=Math.max(t.loadedDurationSec,p),t.handlerTypeToLastMediaSegmentChunk[a]=n,t.fireEvent(r.MEDIA_SEGMENT_CHUNK_LOADED,[n.mediaSegmentHeader.url])},this.onMediaSegmentLoadCompleted=function(e,n){t.isPlayStartPositionFixed||t.fixPlayStartPosition(),t.fireEvent(r.MEDIA_SEGMENT_LOAD_COMPLETED,[n.url])},this.onMSEPlayerPlayable=function(){t.isMSEPlayerPlayable=!0,t.isPlayable&&t.onPlayable()},this.onBufferUpdated=function(e,n){if(t.isPlayStartPositionFixed&&(e>=t.playStartPositionSec&&(t.isInitialBufferReady=!0),t.isPlayable&&t.onPlayable()),t.isPlayable&&t.msePlayer.isPlaying()){var i=t.msePlayer.getPosition();if(e-i>t.options.maximumDelaySec){var o=Math.max(e-t.options.bufferSkipRemainSec,0);t.debug("position adjusted: "+i+" -> "+o),t.msePlayer.setPosition(o)}}t.fireEvent(r.BUFFER_UPDATED,[e,n])},this.onBufferLow=function(e,n){t.debug("buffer low: buffered = "+e+", rest = "+n),t.abrSelector&&(t.abrSelector.setBufferLow(),t.selectAndSwitchMediaPlaylist()),t.fireEvent(r.BUFFER_LOW,[e,n])},this.onBufferFill=function(e,n){t.debug("buffer fill: buffered = "+e+", rest = "+n),t.abrSelector&&(t.abrSelector.clearBufferLow(),t.selectAndSwitchMediaPlaylist()),t.fireEvent(r.BUFFER_FILL,[e,n])},this.onBufferStalled=function(e,n){t.debug("buffer stalled: buffered = "+e+", rest = "+n),t.fireEvent(r.BUFFER_STALLED,[e,n])},this.onBufferStuck=function(e,n){t.debug("buffer stuck: buffered = "+e+", rest = "+n),t.fireEvent(r.BUFFER_STUCK,[e,n])},this.onBufferMonitored=function(e,n){t.fireEvent(r.BUFFER_MONITORED,[e,n])},this.onNetworkBandwidthCalculated=function(e){t.networkStats.updateBandwidth(e),t.selectAndSwitchMediaPlaylist(),t.fireEvent(r.NETWORK_BANDWIDTH_CALCULATED,[e])},this.onPlayable=function(){t.isPlayableEventHandled||(t.isPlayableEventHandled=!0,t.msePlayer.setPosition(t.playStartPositionSec),t.bufferMonitor.start(),t.fireEvent(r.PLAYABLE,[],t.onFatal))},this.onError=function(e){t.debug({onError:e}),t.fireEvent(r.ERROR,[e],null)},this.onFatal=function(e){try{t.debug({onFatal:e}),t.fireEvent(r.FATAL,[e],null)}finally{t.destroy()}},this.options=e||new v,this.msePlayer=new u.MSEPlayer,this.msePlayer.on(u.MSEPlayerEvents.PLAYABLE,this.onMSEPlayerPlayable),this.msePlayer.on(u.MSEPlayerEvents.ERROR,this.onError),this.msePlayer.on(u.MSEPlayerEvents.FATAL,this.onFatal),this.bufferMonitor=new f.MSEPlayerBufferMonitor(this.msePlayer,this.options.bufferMonitorIntervalSec,this.options.bufferLowThresholdSec,this.options.bufferFillThresholdSec,this.options.bufferStallThresholdSec,this.options.bufferStuckThresholdCount,{onBufferMonitored:this.onBufferMonitored,onBufferUpdated:this.onBufferUpdated,onBufferLow:this.onBufferLow,onBufferFill:this.onBufferFill,onBufferStalled:this.onBufferStalled,onBufferStuck:this.onBufferStuck,onError:this.onError}),this.networkStats=new c.NetworkStats(this.options.statsHistoryLimit)}return e.isSupported=function(){var e=p.default.getBrowserName();return void 0!==e&&m.indexOf(e)>=0},e.prototype.on=function(e,t){return this.eventEmitter.on(e,t),this},e.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t),this},e.prototype.once=function(e,t){return this.eventEmitter.once(e,t),this},e.prototype.attach=function(e){return!this.isDestroied&&this.msePlayer.attach(e)},e.prototype.load=function(e){return!this.isLoading&&!this.isDestroied&&(this.isLoading=!0,this.loadMasterPlaylist(e),!0)},e.prototype.destroy=function(){this.isDestroied||(this.msePlayer.destroy(),this.bufferMonitor.destroy(),this.mediaPlaylistUpdater&&this.mediaPlaylistUpdater.destroy(),this.isDestroied=!0)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return this.isPlayStartPositionFixed&&this.isInitialBufferReady&&this.isMSEPlayerPlayable},enumerable:!0,configurable:!0}),e.prototype.getBufferedDurationSec=function(){return this.msePlayer.getBufferedDuration()},e.prototype.getRestSecOfBuffer=function(){try{return this.msePlayer.getRestOfBuffer()}catch(e){return this.onError(e),NaN}},e.prototype.getMediaPlaylistUrls=function(){if(this.masterPlaylist)return this.masterPlaylist.map((function(e){return e.url}))},e.prototype.getMediaPlaylistBandwidths=function(){if(this.masterPlaylist){var e={};return this.masterPlaylist.each((function(t){return e[t.url]=t.averageBandwidth?t.averageBandwidth:t.bandwidth})),e}},e.prototype.fixMediaPlaylistUrl=function(e){return!this.isDestroied&&(void 0!==this.abrSelector&&(!!this.abrSelector.fix(e)&&(this.selectAndSwitchMediaPlaylist(),!0)))},e.prototype.unfixMediaPlaylistUrl=function(){return!this.isDestroied&&(void 0!==this.abrSelector&&(this.abrSelector.unfix(),this.selectAndSwitchMediaPlaylist(),!0))},e.prototype.getFirstMediaSegmentId=function(){return this.firstMediaSegmentId},e.prototype.step=function(){if(!this.isDestroied&&!this.currentInsn){var e=this.iseq.shift();e&&(this.currentInsn=e,e.exec(this.onStepDone.bind(this,e)))}},e.prototype.loadMasterPlaylist=function(e){o.MasterPlaylistLoader.load(e,{onLoad:this.onMasterPlaylistLoaded,onError:this.onError,onFatal:this.onFatal},this.options.essentialDataLoadRetry)},e.prototype.fixPlayStartPosition=function(){if(!this.isPlayStartPositionFixed){var e=Math.max(0,this.loadedDurationSec-this.options.maxInitialBufferDurationSec);this.playStartPositionSec=e,this.debug("play start position = "+e),this.isPlayStartPositionFixed=!0,this.msePlayer.getBufferedDuration()>this.playStartPositionSec&&(this.isInitialBufferReady=!0),this.isPlayable&&this.onPlayable()}},e.prototype.selectAndSwitchMediaPlaylist=function(){if(void 0!==this.abrSelector){var e=this.abrSelector.select();this.currentMediaPlaylistUrl!==e&&this.switchMediaPlaylist(e)}},e.prototype.switchMediaPlaylist=function(e){this.currentMediaPlaylistUrl=e,this.iseq.switchMediaPlaylist(e),this.mediaPlaylistUpdater?this.mediaPlaylistUpdater.switchMediaPlaylist(e):(this.mediaPlaylistUpdater=new h.MediaPlaylistUpdater(e,{onMediaPlaylistLoaded:this.onMediaPlaylistLoaded,onError:this.onError,onFatal:this.onFatal}),this.mediaPlaylistUpdater.start()),this.fireEvent(r.MEDIA_PLAYLIST_SWITCHED,[e])},e.prototype.fireEvent=function(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=this.onError);try{(r=this.eventEmitter).emit.apply(r,[e].concat(t))}catch(e){n&&n(e)}},e.prototype.debug=function(e){this.options.debug},e.Events=r,e}();t.Player=g,t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(270);t.MasterPlaylist=r.default;var i=n(271);t.MasterPlaylistEntry=i.default;var o=n(726);t.MasterPlaylistLoader=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(729),o=function(){function e(){}return e.load=function(e,t,n){var o=this;void 0===n&&(n=0),r.XHRLoader.loadText(e,{onLoad:function(n){t.onLoad(i.default.parse(e,n))},onError:function(r){if(n>0)try{t.onError(r)}finally{o.load(e,t,n-1)}else t.onFatal(r)}})},e}();t.MasterPlaylistLoader=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(273),i=n(728),o=n(77),a=function(){function e(){}return e.load=function(e,t){return o.default.isFirefox()?i.FirefoxBinaryChunkLoader.load(e,t):r.FetchLoader.load(e,t)},e}();t.BinaryChunkLoader=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(272),i=function(){function e(){}return e.load=function(e,t){var n=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="moz-chunked-arraybuffer",r.onload=function(){try{200===r.status?(null!==r.response&&t.onProgress(r.response),t.onComplete()):t.onError(n.createBadStatusError(e,r))}catch(e){t.onError(e)}},r.onprogress=function(){try{200===r.status?t.onProgress(r.response):t.onError(n.createBadStatusError(e,r))}catch(e){t.onError(e)}},r.onerror=function(){t.onError(n.createXHROnErrorError(e,r))},r.onabort=function(){t.onError(n.createXHROnAbortError(e,r))},r.ontimeout=function(){t.onError(n.createXHROnTimeoutError(e,r))},r.send()},e.createBadStatusError=function(e,t){var n="badstatus: url = "+e+", status = "+t.status;return new r.XHRError(n,e,t)},e.createXHROnErrorError=function(e,t){var n="xhrerror: url = "+e;return new r.XHRError(n,e,t)},e.createXHROnAbortError=function(e,t){var n="xhrabort: url = "+e;return new r.XHRError(n,e,t)},e.createXHROnTimeoutError=function(e,t){var n="xhrtimeout: url = "+e;return new r.XHRError(n,e,t)},e}();t.FirefoxBinaryChunkLoader=i,t.default=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(270),a=n(271),s=n(51),u=n(77);t.ERROR_CODE_MASTER_PLAYLIST_PARSER_NO_BANDWIDTH="MASTER_PLAYLIST_PARSER_NO_BANDWIDTH";var c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(s.RuntimeError);t.MasterPlaylistParserError=c;var l=function(){function e(){}return e.parse=function(e,t){for(var n=t.split(/\r?\n/),r=[];;){var i=u.default.shiftNonEmptyLine(n);if(void 0===i)break;if(0===i.indexOf("#EXT-X-STREAM-INF:")){var s=this.parseBandwidth(i),c=this.parseAverageBandwidth(i),l=u.default.shiftNonEmptyLine(n);if(void 0===l)break;var f=u.default.completeUrl(e,l);r.push(new a.default(f,s,c))}}return new o.default(e,t,r)},e.parseBandwidth=function(e){var n=e.match(/[:,]BANDWIDTH=([0-9]+)/);if(n)return parseInt(n[1],10);throw new c(t.ERROR_CODE_MASTER_PLAYLIST_PARSER_NO_BANDWIDTH)},e.parseAverageBandwidth=function(e){var t=e.match(/[:,]AVERAGE-BANDWIDTH=([0-9]+)/);return t?parseInt(t[1],10):void 0},e}();t.MasterPlaylistParser=l,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(277),o=n(731),a=function(){function e(){}return e.load=function(e,t,n){var a,s=this;void 0===n&&(n=null),a=null==n?e:i.default.add(e,n),r.XHRLoader.loadText(a,{onLoad:function(n){t.onLoad(o.default.parse(e,n))},onError:function(e){e instanceof r.XHRError&&s.isFatalErrorCode(e.xhr.status)?t.onFatal(e):t.onError(e)}})},e.isFatalErrorCode=function(e){return 403===e||404===e},e}();t.MediaPlaylistLoader=a,t.default=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(275),s=n(276),u=n(277),c=n(77);t.ERROR_CODE_MEDIA_PLAYLIST_PARSER_TARGETDURATION_NOT_FOUND="MEDIA_PLAYLIST_PARSER_TARGETDURATION_NOT_FOUND",t.ERROR_CODE_MEDIA_PLAYLIST_PARSER_MEDIA_SEQUENCE_NOT_FOUND="MEDIA_PLAYLIST_PARSER_MEDIA_SEQUENCE_NOT_FOUND";var l=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.MediaPlaylistParserError=l;var f=function(){function e(){}return e.parse=function(e,n){for(var r,i,o=n.split(/\r?\n/),u=[];;){var f=c.default.shiftNonEmptyLine(o);if(void 0===f)break;if(0===f.indexOf("#EXTINF:")){if(null!=(v=/#EXTINF:\s*([0-9.]+)\s*/.exec(f))){var h=parseFloat(v[1]);if(void 0===(p=c.default.shiftNonEmptyLine(o)))break;var d=c.default.completeUrl(e,this.stripLongPollingParam(p));u.push(new s.MediaPlaylistEntryExtinf(d,h))}}else if(0===f.indexOf("#EXT-X-MAP:")){if(null!=(v=/#EXT-X-MAP:.*URI=['"]([^'"]+)['"]/.exec(f))){var p=v[1];d=c.default.completeUrl(e,this.stripLongPollingParam(p));u.push(new s.MediaPlaylistEntryExtXMap(d))}}else if(0===f.indexOf("#EXT-X-MEDIA-SEQUENCE:")){null!=(v=/#EXT-X-MEDIA-SEQUENCE:\s*([0-9]+)\s*/.exec(f))&&(r=parseInt(v[1],10))}else if(0===f.indexOf("#EXT-X-TARGETDURATION:")){var v;null!=(v=/#EXT-X-TARGETDURATION:\s*([0-9]+)\s*/.exec(f))&&(i=parseInt(v[1],10))}}if(void 0===r)throw new l(t.ERROR_CODE_MEDIA_PLAYLIST_PARSER_MEDIA_SEQUENCE_NOT_FOUND);if(void 0===i)throw new l(t.ERROR_CODE_MEDIA_PLAYLIST_PARSER_TARGETDURATION_NOT_FOUND);return new a.default(e,n,r,i,u)},e.stripLongPollingParam=function(e){return u.default.strip(e)},e}();t.MediaPlaylistParser=f,t.default=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(167),s=n(278),u=n(279);t.ERROR_CODE_INIT_SEGMENT_PARSER_MOOV_NOT_FOUND="INIT_SEGMENT_PARSER_MOOV_NOT_FOUND",t.ERROR_CODE_INIT_SEGMENT_PARSER_MVHD_NOT_FOUND="INIT_SEGMENT_PARSER_MVHD_NOT_FOUND",t.ERROR_CODE_INIT_SEGMENT_PARSER_TRAK_NOT_FOUND="INIT_SEGMENT_PARSER_TRAK_NOT_FOUND",t.ERROR_CODE_INIT_SEGMENT_PARSER_TKHD_NOT_FOUND="INIT_SEGMENT_PARSER_TKHD_NOT_FOUND",t.ERROR_CODE_INIT_SEGMENT_PARSER_MDIA_NOT_FOUND="INIT_SEGMENT_PARSER_MDIA_NOT_FOUND",t.ERROR_CODE_INIT_SEGMENT_PARSER_HDLR_NOT_FOUND="INIT_SEGMENT_PARSER_HDLR_NOT_FOUND";var c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.InitSegmentParserError=c;var l=function(){function e(){}return e.parse=function(e,n){var r=u.default.findBox("moov",n);if(!r)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_MOOV_NOT_FOUND);var i=u.default.findBox("mvhd",a.default.slice(r,8));if(!i)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_MVHD_NOT_FOUND);var o=this.getMvhdTimescale(i),l=u.default.findAllBoxes("trak",a.default.slice(r,8));if(0===l.length)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_TRAK_NOT_FOUND);for(var f={},h=0,d=l;h<d.length;h++){var p=d[h],v=u.default.findBox("tkhd",a.default.slice(p,8));if(!v)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_TKHD_NOT_FOUND);var m=u.default.findBox("mdia",a.default.slice(p,8));if(!m)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_MDIA_NOT_FOUND);var g=u.default.findBox("hdlr",a.default.slice(m,8));if(!g)throw new c(t.ERROR_CODE_INIT_SEGMENT_PARSER_HDLR_NOT_FOUND);var y=this.getTkhdTrackId(v),_=this.getHdlrHandlerType(g);f[y]=_}return new s.default(e,o,f,n)},e.getMvhdTimescale=function(e){return 1===e.getUint8(8)?e.getUint32(28,!1):e.getUint32(20,!1)},e.getTkhdTrackId=function(e){return 1===e.getUint8(8)?e.getUint32(28,!1):e.getUint32(20,!1)},e.getHdlrHandlerType=function(e){var t=new Uint8Array(e.buffer,e.byteOffset+16,4);return String.fromCharCode.apply("",t)},e}();t.InitSegmentParser=l,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(168),i=n(280),o=n(169),a=function(){function e(e){this.dtsDelta=e}return e.prototype.normalizeHeader=function(e){return new o.default(e.id,e.url,e.duration,e.baseMediaDecodeTime+this.dtsDelta,e.firstPts)},e.prototype.normalizeChunk=function(e){var t=i.default.addOffsetToTrunSampleCompositionTimeOffset(e.data,-this.dtsDelta),n=e.baseMediaDecodeTime;return t&&(n+=this.dtsDelta,i.default.addOffsetToTfdtBaseMediaDecodeTime(e.data,this.dtsDelta)),new r.default(e.mediaSegmentHeader,e.trackId,n,e.firstPts,e.lastPts,e.duration,e.data)},e}();t.default=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=n(51);t.ERROR_CODE_MSE_PLAYER_MEDIA_NOT_ATTACHED="MSE_PLAYER_MEDIA_NOT_ATTACHED";var s=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(a.RuntimeError);t.MSEPlayerError=s;var u,c=function(e,t,n){this.mimeType=e,this.initSegment=t,this.mediaSegment=n};!function(e){e.PLAYABLE="PLAYABLE",e.BUFFER_UPDATED="BUFFER_UPDATED",e.ERROR="ERROR",e.FATAL="FATAL"}(u=t.MSEPlayerEvents||(t.MSEPlayerEvents={}));var l=function(){function e(){var e=this;this.eventEmitter=new o.EventEmitter,this.bufferKeepDuration=Number.POSITIVE_INFINITY,this.mediaSourceOpened=!1,this.pendingQueue=[],this.sourceBufferUpdating=!1,this.isPlayable=!1,this.isEos=!1,this.isDestroied=!1,this.lastSweepTime=0,this.onSourceBufferUpdated=function(){e.sourceBufferUpdating=!1;try{e.fireEvent(u.BUFFER_UPDATED)}finally{e.step()}},this.onError=function(t){e.handleErrorEvent(u.ERROR,t)},this.onFatal=function(t){e.handleErrorEvent(u.FATAL,t)},this.mediaSource=new MediaSource,this.mediaSource.addEventListener("sourceopen",(function(){e.mediaSourceOpened=!0,e.step()}),{once:!0})}return e.prototype.on=function(e,t){return this.eventEmitter.on(e,t),this},e.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t),this},e.prototype.attach=function(e){return!this.media&&(this.media=e,this.media.src=URL.createObjectURL(this.mediaSource),!0)},e.prototype.eos=function(){this.isEos=!0,this.step()},e.prototype.destroy=function(){if(!this.isDestroied){if(this.media){if(this.mediaSourceOpened)try{this.mediaSource.endOfStream()}catch(e){}this.media.removeAttribute("src"),this.media.load()}this.isEos=!0,this.isDestroied=!0}},e.prototype.appendBuffer=function(e,t,n){this.isEos||this.isDestroied||(this.pendingQueue.push(new c(e,t,n)),this.step())},e.prototype.setBufferKeepDuration=function(e){this.bufferKeepDuration=Math.max(5,e)},e.prototype.getBufferedDuration=function(){var e=this.media;if(!e)return 0;for(var t=0,n=e.buffered,r=0;r<n.length;r++)t=Math.max(t,n.end(r));return t},e.prototype.getRestOfBuffer=function(){if(!this.media)throw new s(t.ERROR_CODE_MSE_PLAYER_MEDIA_NOT_ATTACHED);return this.getBufferedDuration()-this.media.currentTime},e.prototype.getPosition=function(){if(!this.media)throw new s(t.ERROR_CODE_MSE_PLAYER_MEDIA_NOT_ATTACHED);return this.media.currentTime},e.prototype.setPosition=function(e){if(!this.media)throw new s(t.ERROR_CODE_MSE_PLAYER_MEDIA_NOT_ATTACHED);this.media.currentTime=e},e.prototype.isPlaying=function(){return!!this.media&&!this.media.paused},e.prototype.dumpBuffer=function(){if(this.sourceBuffer)for(var e=this.sourceBuffer.buffered,t=0;t<e.length;t++);},e.prototype.addSourceBuffer=function(e){var t=this.mediaSource.addSourceBuffer(e);return t.mode="segments",t.addEventListener("updateend",this.onSourceBufferUpdated),t.addEventListener("error",this.onFatal),t},e.prototype.sweepBuffer=function(){var e=Date.now();if(this.media&&this.sourceBuffer&&0!==this.sourceBuffer.buffered.length&&!(this.sourceBufferUpdating||e<this.lastSweepTime+5e3)){this.lastSweepTime=e;var t=this.sourceBuffer.buffered,n=this.media.currentTime-t.start(0)-this.bufferKeepDuration;if(n>5){var r=t.start(0),i=Math.min(r+n,t.end(0));this.sourceBuffer.remove(0,i),this.sourceBufferUpdating=!0}}},e.prototype.step=function(){if(!this.isDestroied&&this.mediaSourceOpened&&!this.sourceBufferUpdating)if(0!==this.pendingQueue.length){var e=this.pendingQueue[0],t=e.mimeType,n=e.initSegment,r=e.mediaSegment;if(this.sourceBuffer||(this.sourceBuffer=this.addSourceBuffer(t)),this.currentInitSegment===n?(this.sourceBuffer.appendBuffer(r),this.pendingQueue.shift()):(this.sourceBuffer.appendBuffer(n),this.currentInitSegment=n),this.sourceBufferUpdating=!0,!this.isPlayable)try{this.fireEvent(u.PLAYABLE)}finally{this.isPlayable=!0}}else this.isEos?this.mediaSource.endOfStream():this.sweepBuffer()},e.prototype.handleErrorEvent=function(e,t){var n;n=t instanceof Error?t:t instanceof ErrorEvent?t.error:new s("unexpected error: "+t),this.fireEvent(e,[n],null)},e.prototype.fireEvent=function(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=this.onError);try{(r=this.eventEmitter).emit.apply(r,[e].concat(t))}catch(e){n&&n(e)}},e}();t.MSEPlayer=l,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(736);t.NetworkStats=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.historyLimit=e,this.bandwidthHistory=[]}return e.prototype.updateBandwidth=function(e){this.addHistory(e)},e.prototype.getCurrentBandwidth=function(){return this.bandwidthHistory[this.bandwidthHistory.length-1]},e.prototype.getRecentAverageBandwidth=function(e){void 0===e&&(e=null);var t=e?this.bandwidthHistory.slice(-e):this.bandwidthHistory;return t.length>0?this.calcAvg(t):void 0},e.prototype.addHistory=function(e){this.bandwidthHistory.push(e),this.bandwidthHistory.length>this.historyLimit&&this.bandwidthHistory.shift()},e.prototype.calcAvg=function(e){return e.reduce((function(e,t){return e+t}))/e.length},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(738);t.InstructionBlock=r.default;var i=n(739);t.InstructionSequence=i.default;var o=n(740);t.EnsureInitSegmentInstruction=o.EnsureInitSegmentInstruction;var a=n(741);t.LoadMediaSegmentInstruction=a.LoadMediaSegmentInstruction},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.ensureInitSegmentInstruction=e,this.loadMediaSegmentInstruction=t}return e.prototype.toArray=function(){return[this.ensureInitSegmentInstruction,this.loadMediaSegmentInstruction]},Object.defineProperty(e.prototype,"mediaPlaylistUrl",{get:function(){return this.loadMediaSegmentInstruction.mediaPlaylistUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaSegmentId",{get:function(){return this.loadMediaSegmentInstruction.mediaSegmentId},enumerable:!0,configurable:!0}),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.blocks=[],this.currentBlockRestInsns=[]}return e.prototype.shift=function(){var e=this.currentBlockRestInsns.shift();if(void 0===e){var t=this.blocks.shift();if(void 0===t)return;this.mediaSequence=t.mediaSegmentId,this.currentBlockRestInsns=t.toArray(),e=this.currentBlockRestInsns.shift()}return e},e.prototype.switchMediaPlaylist=function(e){this.currentMediaPlaylistUrl=e},e.prototype.update=function(e){for(var t=this,n=e.filter((function(e){return e.mediaPlaylistUrl===t.currentMediaPlaylistUrl&&(void 0===t.mediaSequence||e.mediaSegmentId>t.mediaSequence)&&(0===t.blocks.length||e.mediaSegmentId>=t.blocks[0].mediaSegmentId)})),r=0;r<this.blocks.length;r++){var i=n[0],o=this.blocks[r];if(void 0===i)break;i.mediaSegmentId===o.mediaSegmentId&&(this.blocks[r]=i,n.shift())}this.blocks=this.blocks.concat(n)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(166),o=function(){function e(e,t,n,r){void 0===r&&(r=0),this.mediaPlaylistUrl=e,this.initSegmentUrl=t,this.handler=n,this.loadRetry=r}return e.prototype.exec=function(e){this.isInitSegmentLoaded()?e():this.loadInitSegment(e)},e.prototype.isInitSegmentLoaded=function(){return this.handler.isInitSegmentLoaded(this.mediaPlaylistUrl,this.initSegmentUrl)},e.prototype.loadInitSegment=function(e){var t=this;r.XHRLoader.loadBinary(this.initSegmentUrl,{onLoad:function(n){try{var r=i.InitSegmentParser.parse(t.initSegmentUrl,new DataView(n));t.handler.onInitSegmentLoaded(t.mediaPlaylistUrl,r)}catch(e){t.handler.onFatal(e)}finally{e()}},onError:function(n){if(t.loadRetry>0){t.loadRetry--;try{t.handler.onError(n)}finally{t.loadInitSegment(e)}}else try{t.handler.onFatal(n)}finally{e()}}})},e}();t.EnsureInitSegmentInstruction=o,t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),a=n(116),s=n(166);t.ERROR_CODE_LOAD_MEDIA_SEGMENT_INSTRUCTION_BAD_PAYLOAD="LOAD_MEDIA_SEGMENT_INSTRUCTION_BAD_PAYLOAD";var u=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t}(o.RuntimeError);t.LoadMediaSegmentInstructionError=u;var c=function(){function e(e,t,n,r,i){this.mediaPlaylistUrl=e,this.mediaSegmentId=t,this.mediaSegmentUrl=n,this.mediaSegmentDuration=r,this.handler=i,this.buffer=new ArrayBuffer(0),this.bufferedLength=0,this.isLoadCompleted=!1,this.retryCount=0}return e.prototype.exec=function(e){this.loadMediaSegment(e)},e.prototype.loadMediaSegment=function(e){var n=this,r=Date.now(),i=0;a.BinaryChunkLoader.load(this.mediaSegmentUrl,{onProgress:function(e){if((i+=e.byteLength)>n.bufferedLength){var t=i-n.bufferedLength;e.byteLength>t&&(e=e.slice(e.byteLength-t)),n.appendBuffer(e)}if(!n.mediaSegmentHeader){var o=n.tryParseMediaSegmentHeader();if(o){n.calcNetworkBandwidthAndNotify(Date.now()-r,n.buffer.byteLength);var a=o.firstPts-o.baseMediaDecodeTime;n.normalizer=new s.MediaSegmentNormalizer(a),n.mediaSegmentHeader=n.normalizer.normalizeHeader(o),n.handler.onMediaSegmentHeaderLoaded(n.mediaPlaylistUrl,n.mediaSegmentHeader)}}if(n.mediaSegmentHeader&&n.normalizer)for(;;){var u=n.tryExtractMediaSegmentChunk(n.mediaSegmentHeader);if(!u)break;var c=n.normalizer.normalizeChunk(u);n.handler.onMediaSegmentChunkLoaded(n.mediaPlaylistUrl,c)}},onComplete:function(){try{if(n.isLoadCompleted=!0,!n.mediaSegmentHeader)throw new u(t.ERROR_CODE_LOAD_MEDIA_SEGMENT_INSTRUCTION_BAD_PAYLOAD);n.handler.onMediaSegmentLoadCompleted(n.mediaPlaylistUrl,n.mediaSegmentHeader)}catch(e){n.handler.onError(e)}finally{e()}},onError:function(t){if(n.canRetry())try{n.handler.onError(t)}finally{n.retryCount++,n.loadMediaSegment(e)}else try{n.handler.onError(t)}finally{e()}}})},e.prototype.canRetry=function(){return!this.isLoadCompleted&&!(this.retryCount>0)},e.prototype.appendBuffer=function(e){var t=new Uint8Array(this.buffer.byteLength+e.byteLength);t.set(new Uint8Array(this.buffer),0),t.set(new Uint8Array(e),this.buffer.byteLength),this.bufferedLength+=e.byteLength,this.buffer=t.buffer},e.prototype.tryParseMediaSegmentHeader=function(){return s.MediaSegmentParser.tryParseMediaSegmentHeader(this.mediaSegmentId,this.mediaSegmentUrl,this.mediaSegmentDuration,new DataView(this.buffer))},e.prototype.tryExtractMediaSegmentChunk=function(e){var t=new DataView(this.buffer),n=s.MediaSegmentParser.tryExtractMediaSegmentChunk(e,t),r=n[0],i=n[1];return this.buffer=i.buffer.slice(i.byteOffset),r},e.prototype.calcNetworkBandwidthAndNotify=function(e,t){var n=t/(e/1e3)*8;try{this.handler.onNetworkBandwidthCalculated(n)}catch(e){this.handler.onError(e)}},e}();t.LoadMediaSegmentInstruction=c,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(282),i=function(){function e(e,t,n,i,o,a,s){var u=this;this.msePlayer=e,this.intervalSec=t,this.bufferLowThresholdSec=n,this.bufferFillThresholdSec=i,this.stallThresholdSec=o,this.stuckThresholdCount=a,this.handler=s,this.isStarted=!1,this.isDestroied=!1,this.isLow=!1,this.isStalled=!1,this.isStuck=!1,this.isScheduled=!1,this.prevBufferedDurationSec=0,this.prevPlayPositionSec=0,this.bufferedDurationNotChangeCount=0,this.playPositionNotChangeSec=0,this.onBufferUpdated=function(){var e=u.msePlayer.getBufferedDuration(),t=u.msePlayer.getRestOfBuffer();e===u.prevBufferedDurationSec?u.bufferedDurationNotChangeCount++:(u.bufferedDurationNotChangeCount=0,u.prevBufferedDurationSec=e),u.bufferedDurationNotChangeCount>u.stuckThresholdCount?u.isStuck||(u.isStuck=!0,u.handler.onBufferStuck(e,t)):u.isStuck=!1,u.handler.onBufferUpdated(e,t)},this.msePlayer.on(r.MSEPlayerEvents.BUFFER_UPDATED,this.onBufferUpdated),this.interval=Math.floor(1e3*this.intervalSec)}return e.prototype.start=function(){this.isStarted||this.isDestroied||(this.isStarted=!0,this.step())},e.prototype.destroy=function(){this.isStarted=!1,this.isDestroied=!0},Object.defineProperty(e.prototype,"isActive",{get:function(){return this.isStarted&&!this.isDestroied},enumerable:!0,configurable:!0}),e.prototype.step=function(){try{if(!this.isActive)return;this.monitor()}catch(e){this.handler.onError(e)}finally{this.schedule()}},e.prototype.monitor=function(){var e=this.msePlayer.getBufferedDuration(),t=this.msePlayer.getRestOfBuffer();!this.isLow&&t<this.bufferLowThresholdSec?(this.isLow=!0,this.handler.onBufferLow(e,t)):this.isLow&&t>this.bufferFillThresholdSec&&(this.isLow=!1,this.handler.onBufferFill(e,t));var n=this.msePlayer.getPosition();this.msePlayer.isPlaying()&&e-n>.5&&n===this.prevPlayPositionSec?this.playPositionNotChangeSec+=this.intervalSec:(this.playPositionNotChangeSec=0,this.prevPlayPositionSec=n),this.playPositionNotChangeSec>this.stallThresholdSec?this.isStalled||(this.isStalled=!0,this.handler.onBufferStalled(e,t)):this.isStalled=!1,this.handler.onBufferMonitored(e,t)},e.prototype.schedule=function(){var e=this;!this.isScheduled&&this.isActive&&(this.isScheduled=!0,setTimeout((function(){e.isScheduled=!1,e.step()}),this.interval))},e}();t.MSEPlayerBufferMonitor=i,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(274),i=function(){function e(e,t){this.mediaPlaylistUrl=e,this.handler=t,this.interval=500,this.onErrorInterval=500,this.longPollingMediaSegmentId=0,this.isInitialLoad=!0,this.isStarted=!1,this.isDestroied=!1,this.isScheduled=!1}return e.prototype.start=function(){this.isStarted||this.isDestroied||(this.isStarted=!0,this.step())},e.prototype.destroy=function(){this.isStarted=!1,this.isDestroied=!0},e.prototype.switchMediaPlaylist=function(e){this.mediaPlaylistUrl!==e&&(this.mediaPlaylistUrl=e,this.isActive&&this.step())},Object.defineProperty(e.prototype,"isActive",{get:function(){return this.isStarted&&!this.isDestroied},enumerable:!0,configurable:!0}),e.prototype.step=function(){var e=this,t=this.mediaPlaylistUrl;r.MediaPlaylistLoader.load(t,{onLoad:function(n){var r=e.mediaPlaylistUrl;if(e.isActive&&t===r)try{var i=e.mediaSegmentSize(n);e.longPollingMediaSegmentId=n.mediaSequence+i,e.handler.onMediaPlaylistLoaded(n),e.isInitialLoad?(e.interval=0,e.isInitialLoad=!1):e.interval=500}catch(t){e.interval=e.onErrorInterval,e.handler.onError(t)}finally{e.schedule()}},onError:function(t){if(e.isActive)try{e.interval=e.onErrorInterval,e.handler.onError(t)}finally{e.schedule()}},onFatal:function(t){e.destroy(),e.handler.onFatal(t)}},this.longPollingMediaSegmentId)},e.prototype.schedule=function(){var e=this;!this.isScheduled&&this.isActive&&(this.isScheduled=!0,setTimeout((function(){e.isScheduled=!1,e.step()}),this.interval))},e.prototype.mediaSegmentSize=function(e){for(var t=0,n=e.size(),i=0;i<n;i++)e.at(i)instanceof r.MediaPlaylistEntryExtinf&&t++;return t},e}();t.MediaPlaylistUpdater=i,t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.masterPlaylist=e,this.networkStats=t,this.networkBandwidthHistorySize=n,this.isBufferLow=!1}return e.prototype.fix=function(e){return void 0!==this.masterPlaylist.find((function(t){return t.url===e}))&&(this.fixedMediaPlaylistUrl=e,!0)},e.prototype.unfix=function(){this.fixedMediaPlaylistUrl=void 0},e.prototype.setBufferLow=function(){this.isBufferLow=!0},e.prototype.clearBufferLow=function(){this.isBufferLow=!1},e.prototype.select=function(){if(void 0!==this.fixedMediaPlaylistUrl)return this.fixedMediaPlaylistUrl;if(this.isBufferLow)return this.minBandwidthUrl();var e=this.networkStats.getCurrentBandwidth();if(void 0===e)return this.minBandwidthUrl();var t=this.networkStats.getRecentAverageBandwidth(this.networkBandwidthHistorySize);if(void 0===t)return this.minBandwidthUrl();var n=Math.min(e,t);return this.masterPlaylist.best(n).url},e.prototype.minBandwidthUrl=function(){return this.masterPlaylist.minBandwidth().url},e}();t.ABRSelector=r,t.default=r},function(e,t,n){"use strict";function r(e,t,n,r,i){var o=u.writeRtpDescription(e.kind,t);if(o+=u.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=u.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(r?r.id:"-")+" "+a+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+u.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+u.localCName+"\r\n"),o}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function s(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var u=n(746);e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function c(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var l=function(n){var r=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&e.urls;var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=u.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw s("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var c=u.writeCandidate(a);o.candidate=Object.assign(o.candidate,u.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=u.getMediaSections(r._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",r._localDescription.sdp=u.getDescription(r._localDescription.sdp)+l.join("");var f=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),s||r._dispatchEvent("icecandidate",o),f&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,r){var o=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:u.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),r&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},l.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=u.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=u.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=u.splitSections(r._remoteDescription.sdp),n=t.shift();var a=u.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=r.transceivers[t],s=o.iceGatherer,c=o.iceTransport,l=o.dtlsTransport,f=o.localCapabilities,h=o.remoteCapabilities;if(!(u.isRejected(e)&&0===u.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=u.getIceParameters(e,n),p=u.getDtlsParameters(e,n);a&&(p.role="server"),r.usingBundle&&0!==t||(r._gather(o.mid,t),"new"===c.state&&c.start(s,d,a?"controlling":"controlled"),"new"===l.state&&l.start(p));var v=i(f,h);r._transceive(o,v.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(r){var l=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(s("TypeError",'Unsupported type "'+r.type+'"'));if(!o("setRemoteDescription",r.type,l.signalingState)||l._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+r.type+" in state "+l.signalingState));var f={};l.remoteStreams.forEach((function(e){f[e.id]=e}));var h=[],d=u.splitSections(r.sdp),p=d.shift(),v=u.matchPrefix(p,"a=ice-lite").length>0,m=u.matchPrefix(p,"a=group:BUNDLE ").length>0;l.usingBundle=m;var g=u.matchPrefix(p,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,d.forEach((function(o,s){var c=u.splitLines(o),d=u.getKind(o),g=u.isRejected(o)&&0===u.matchPrefix(o,"a=bundle-only").length,y=c[0].substr(2).split(" ")[2],_=u.getDirection(o,p),b=u.parseMsid(o),E=u.getMid(o)||u.generateIdentifier();if(g||"application"===d&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[s]={mid:E,kind:d,protocol:y,rejected:!0};else{var S,T,w,O,R,A,P,x,C;!g&&l.transceivers[s]&&l.transceivers[s].rejected&&(l.transceivers[s]=l._createTransceiver(d,!0));var M,L,k=u.parseRtpParameters(o);g||(M=u.getIceParameters(o,p),(L=u.getDtlsParameters(o,p)).role="client"),P=u.parseRtpEncodingParameters(o);var I=u.parseRtcpParameters(o),D=u.matchPrefix(o,"a=end-of-candidates",p).length>0,N=u.matchPrefix(o,"a=candidate:").map((function(e){return u.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!g&&m&&s>0&&l.transceivers[s]&&(l._disposeIceAndDtlsTransports(s),l.transceivers[s].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[s].iceTransport=l.transceivers[0].iceTransport,l.transceivers[s].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[s].rtpSender&&l.transceivers[s].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[s].rtpReceiver&&l.transceivers[s].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==r.type||g){if("answer"===r.type&&!g){T=(S=l.transceivers[s]).iceGatherer,w=S.iceTransport,O=S.dtlsTransport,R=S.rtpReceiver,A=S.sendEncodingParameters,x=S.localCapabilities,l.transceivers[s].recvEncodingParameters=P,l.transceivers[s].remoteCapabilities=k,l.transceivers[s].rtcpParameters=I,N.length&&"new"===w.state&&(!v&&!D||m&&0!==s?N.forEach((function(e){a(S.iceTransport,e)})):w.setRemoteCandidates(N)),m&&0!==s||("new"===w.state&&w.start(T,M,"controlling"),"new"===O.state&&O.start(L)),!i(S.localCapabilities,S.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,l._transceive(S,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!R||"sendrecv"!==_&&"sendonly"!==_?delete S.rtpReceiver:(C=R.track,b?(f[b.stream]||(f[b.stream]=new e.MediaStream),n(C,f[b.stream]),h.push([C,R,f[b.stream]])):(f.default||(f.default=new e.MediaStream),n(C,f.default),h.push([C,R,f.default])))}}else{(S=l.transceivers[s]||l._createTransceiver(d)).mid=E,S.iceGatherer||(S.iceGatherer=l._createIceGatherer(s,m)),N.length&&"new"===S.iceTransport.state&&(!D||m&&0!==s?N.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(N)),x=e.RTCRtpReceiver.getCapabilities(d),t<15019&&(x.codecs=x.codecs.filter((function(e){return"rtx"!==e.name}))),A=S.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var F,U=!1;if("sendrecv"===_||"sendonly"===_){if(U=!S.rtpReceiver,R=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,d),U)C=R.track,b&&"-"===b.stream||(b?(f[b.stream]||(f[b.stream]=new e.MediaStream,Object.defineProperty(f[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(C,"id",{get:function(){return b.track}}),F=f[b.stream]):(f.default||(f.default=new e.MediaStream),F=f.default)),F&&(n(C,F),S.associatedRemoteMediaStreams.push(F)),h.push([C,R,F])}else S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),S.associatedRemoteMediaStreams=[]);S.localCapabilities=x,S.remoteCapabilities=k,S.rtpReceiver=R,S.rtcpParameters=I,S.sendEncodingParameters=A,S.recvEncodingParameters=P,l._transceive(l.transceivers[s],!1,U)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===r.type?"active":"passive"),l._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(f).forEach((function(t){var n=f[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}h.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&c(l,t,r,[n])}))}})),h.forEach((function(e){e[2]||c(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&e.iceTransport.addRemoteCandidate({})}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,o=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(o=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--o<0&&(e.wantReceive=!1)}));i>0||o>0;)i>0&&(n._createTransceiver("audio"),i--),o>0&&(n._createTransceiver("video"),o--);var c=u.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,i){var o=r.track,a=r.kind,s=r.mid||u.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(a);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=c,r.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=r(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+u.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=u.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var a=u.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,s){if(!(s+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var u;if(e.stream)"audio"===e.kind?u=e.stream.getAudioTracks()[0]:"video"===e.kind&&(u=e.stream.getVideoTracks()[0]),u&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=i(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=r(e,c,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(c)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,i){if(!n._remoteDescription)return i(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var c=0;c<n.transceivers.length;c++)if(n.transceivers[c].mid===e.sdpMid){o=c;break}var l=n.transceivers[o];if(!l)return i(s("OperationError","Can not add ICE candidate"));if(l.rejected)return r();var f=Object.keys(e.candidate).length>0?u.parseCandidate(e.candidate):{};if("tcp"===f.protocol&&(0===f.port||9===f.port))return r();if(f.component&&1!==f.component)return r();if((0===o||o>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,f))return i(s("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=u.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(f.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=u.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var d=0;d<n.transceivers.length&&(n.transceivers[d].rejected||(n.transceivers[d].iceTransport.addRemoteCandidate({}),(t=u.getMediaSections(n._remoteDescription.sdp))[d]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=u.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));d++);r()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw s("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var f=["createOffer","createAnswer"];return f.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(f=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],a=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=u.length?r.parseFmtp(u[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),u=s.length>0&&s[0].ssrc,c=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));c.length>0&&c[0].length>1&&c[0][0]===u&&(t=c[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:u,mechanism:a?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&u&&n.push({ssrc:u});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(33),o=n(283),a=n(748),s=n(289),u=r(n(286));u.Axios=a,u.create=function(e){return r(s(u.defaults,e))},u.Cancel=n(290),u.CancelToken=n(761),u.isCancel=n(285),u.all=function(e){return Promise.all(e)},u.spread=n(762),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(33),o=n(284),a=n(749),s=n(750),u=n(289);r.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},r.prototype.getUri=function(e){return e=u(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=r},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(33);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(33),o=n(751),a=n(285),s=n(286);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(33);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(33);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(288);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(756),i=n(757);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(33),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(33);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(33);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}var i=n(290);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e){e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){"use strict";var r=n(766);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(767)),o=r(n(768)),a=r(n(769)),s=function(){function e(){(0,i.default)(this,e),(0,a.default)(this,"_keys",[]),(0,a.default)(this,"_data",Object.create(null))}return(0,o.default)(e,[{key:"key",value:function(e){return(e=Math.floor(Number(e)))>=0&&e<this._keys.length?this._keys[e]:null}},{key:"getItem",value:function(e){return(e=String(e))in this._data?this._data[e]:null}},{key:"setItem",value:function(e,t){(e=String(e))in this._data||this._keys.push(e),this._data[e]=String(t)}},{key:"removeItem",value:function(e){if((e=String(e))in this._data){var t=this._keys.indexOf(e);if(t<0)throw new Error("Should not happen");this._keys.splice(t,1),delete this._data[e]}}},{key:"clear",value:function(){this._keys=[],this._data=Object.create(null)}},{key:"length",get:function(){return this._keys.length}}]),e}();t.default=s,e.exports=t.default,e.exports.default=t.default},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){function a(e){throw new RangeError(x[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+s((e=e.replace(P,".")).split("."),t).join(".")}function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e){return s(e,(function(e){var t="";return e>65535&&(t+=L((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=L(e)})).join("")}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?M(e/S):e>>1,e+=M(e/t);e>C*b>>1;r+=y)e=M(e/C);return M(r+(C+1)*e/(e+E))}function d(e){var t,n,r,i,o,s,u,c,f,d,p,v=[],m=e.length,E=0,S=w,R=T;for((n=e.lastIndexOf(O))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=E,s=1,u=y;i>=m&&a("invalid-input"),((c=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:y)>=y||c>M((g-E)/s))&&a("overflow"),E+=c*s,!(c<(f=u<=R?_:u>=R+b?b:u-R));u+=y)s>M(g/(d=y-f))&&a("overflow"),s*=d;R=h(E-o,t=v.length+1,0==o),M(E/t)>g-S&&a("overflow"),S+=M(E/t),E%=t,v.splice(E++,0,S)}return l(v)}function p(e){var t,n,r,i,o,s,u,l,d,p,v,m,E,S,R,A=[];for(m=(e=c(e)).length,t=w,n=0,o=T,s=0;s<m;++s)(v=e[s])<128&&A.push(L(v));for(r=i=A.length,i&&A.push(O);r<m;){for(u=g,s=0;s<m;++s)(v=e[s])>=t&&v<u&&(u=v);for(u-t>M((g-n)/(E=r+1))&&a("overflow"),n+=(u-t)*E,t=u,s=0;s<m;++s)if((v=e[s])<t&&++n>g&&a("overflow"),v==t){for(l=n,d=y;!(l<(p=d<=o?_:d>=o+b?b:d-o));d+=y)R=l-p,S=y-p,A.push(L(f(p+R%S,0))),l=M(R/S);A.push(L(f(l,0))),o=h(n,E,r==i),n=0,++r}++n,++t}return A.join("")}t&&t.nodeType,e&&e.nodeType;var v="object"==typeof r&&r;v.global!==v&&v.window!==v&&v.self;var m,g=2147483647,y=36,_=1,b=26,E=38,S=700,T=72,w=128,O="-",R=/^xn--/,A=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=y-_,M=Math.floor,L=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:c,encode:l},decode:d,encode:p,toASCII:function(e){return u(e,(function(e){return A.test(e)?"xn--"+p(e):e}))},toUnicode:function(e){return u(e,(function(e){return R.test(e)?d(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(233)(e),n(22))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(773),t.encode=t.stringify=n(774)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,v=e[l].replace(s,"%20"),m=v.indexOf(n);m>=0?(f=v.substr(0,m),h=v.substr(m+1)):(f=v,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),(function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],(function(e){return s+encodeURIComponent(i(e))})).join(t):s+encodeURIComponent(i(e[a]))})).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var o=n(152),a=n(0),s=n(56),u=n(231),c=n(776),l=n(81),f=n(232),h=n(777),d=n(778),p=n(781),v=n(782),m=n(785),g=n(787),y=n(789),_=n(790),b=n(791),E=n(793),S=n(115),T=n(796),w=function(e){function t(t){var n=e.call(this,t)||this;return n.autoHiddenTimerId=NaN,n.onMouseEnter=n.handleMouseEnter.bind(n),n.onMouseLeave=n.handleMouseLeave.bind(n),n.onTouchStart=n.handleTouchStart.bind(n),n.isWatching=function(){return S.StreamState.isWatching(n.props.streamState)},n.state={visible:!0},n}return i(t,e),t.prototype.componentDidMount=function(){this.renderAutoHiddenTimer()},t.prototype.componentWillUnmount=function(){this.cancelAutoHiddenTimer()},t.prototype.componentDidUpdate=function(e,t){this.renderAutoHiddenTimer()},t.prototype.render=function(){var e=this.props.noUI?null:a.createElement("div",{className:"control-container",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderControlToggle(),a.createElement(_.ControllerAnimation,{visible:this.state.visible},a.createElement(T.Title,{linkUrl:this.props.linkUrl,title:this.props.title,openInNewWindow:this.props.openInNewWindow})),a.createElement(b.PlayButton,{streamState:this.props.streamState,onClick:this.props.onPlayButtonClick}),S.StreamState.isWatching(this.props.streamState)?this.renderController():this.renderStatus());return a.createElement("div",{className:"video-control-container"},e,a.createElement("div",{className:"content-block"},a.createElement(h.BannerImage,{streamState:this.props.streamState,alt:this.props.title,imageUrl:this.props.bannerUrl}),this.props.children))},t.isMuteControllable=function(e){var t=new s.UAParser(e||navigator.userAgent);return"iOS"!==t.getOS().name||parseInt(t.getBrowser().major,10)>=11},t.isVideoControllable=function(e){return!/iPhone|iPod|iPad|Android/.test(e||navigator.userAgent)},t.prototype.renderControlToggle=function(){return this.props.isVideoClickable?a.createElement(l.Link,{className:"control-toggle",href:this.props.linkUrl,onTouchStart:this.onTouchStart,openInNewWindow:this.props.openInNewWindow}):a.createElement("div",{className:"control-toggle",onTouchStart:this.onTouchStart})},t.prototype.renderController=function(){return a.createElement(_.ControllerAnimation,{visible:this.state.visible},a.createElement(E.Statistics,{watchCount:this.props.watchCount,commentCount:this.props.commentCount}),a.createElement("div",{className:"controller-block",key:"controller-block"},a.createElement("div",{className:"video-controller",key:"video-controller"},a.createElement(p.ElapsedTime,{beginTime:this.props.beginTime}),a.createElement(m.PauseButton,{onClick:this.props.onPauseButtonClick}),a.createElement(v.MuteButton,{isMuted:this.props.isMuted,onClick:this.props.onMuteButtonClick,visible:t.isMuteControllable()}),a.createElement(y.VolumeSlider,{volume:this.props.volume,onChange:this.props.onVolumeSliderChange,visible:t.isVideoControllable()})),a.createElement("div",{className:"addon-controller",key:"addon-controller"},a.createElement(d.CommentButton,{isCommentVisible:this.props.commentVisible,visible:this.props.commentButtonVisible,onClick:this.props.onCommentButtonClick}),a.createElement(g.ReloadButton,{onClick:this.props.onReloadButtonClick,visible:t.isVideoControllable()}),a.createElement(f.NiconicoLink,{url:this.props.linkUrl,openInNewWindow:this.props.openInNewWindow,visible:this.props.niconicoLinkVisible}))))},t.prototype.renderStatus=function(){return a.createElement(u.Status,{extClassName:"live",niconicoLink:{openInNewWindow:this.props.openInNewWindow,url:this.props.linkUrl,visible:this.props.niconicoLinkVisible}},a.createElement(c.default,null),this.onAirStatusMessage)},t.prototype.handleMouseEnter=function(){this.isWatching()&&this.setState({visible:!0}),this.renderAutoHiddenTimer()},t.prototype.handleMouseLeave=function(){this.isWatching()&&this.setState({visible:!1})},t.prototype.handleTouchStart=function(){this.isWatching()&&this.setState({visible:!this.state.visible})},t.prototype.renderAutoHiddenTimer=function(){this.isWatching()&&(this.state.visible?this.resetAutoHiddenTimer():this.cancelAutoHiddenTimer())},t.prototype.resetAutoHiddenTimer=function(){var e=this;this.cancelAutoHiddenTimer(),this.autoHiddenTimerId=window.setTimeout((function(){e.isWatching()&&e.setState({visible:!1})}),t.AUTO_HIDDEN_DURATION)},t.prototype.cancelAutoHiddenTimer=function(){isNaN(this.autoHiddenTimerId)||clearTimeout(this.autoHiddenTimerId),this.autoHiddenTimerId=NaN},Object.defineProperty(t.prototype,"onAirStatusMessage",{get:function(){var e=this.props.beginTime;return o(e.getFullYear().toString(),2,"0")+"/"+o((e.getMonth()+1).toString(),2,"0")+"/"+o(e.getDate().toString(),2,"0")+" "+o(e.getHours().toString(),2,"0")+":"+o(e.getMinutes().toString(),2,"0")+"窶�"},enumerable:!1,configurable:!0}),t.AUTO_HIDDEN_DURATION=1e4,t}(a.Component);t.Controller=w},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 36 18"},e),i.createElement("title",null,"live"),i.createElement("rect",{width:"36",height:"18",rx:"2",ry:"2",fill:"#f03"}),i.createElement("path",{d:"M8.171 12.346h4.043v.92H7.041V4.734h1.13zM14.752 13.266h-1.125V4.734h1.125zM19.681 11.771l2.438-7.037h1.23l-3.164 8.531h-1l-3.154-8.531h1.225zM29.362 9.322h-3.7v3.023h4.295v.92H24.54V4.734h5.36v.926h-4.235V8.4h3.7z",fill:"#fff"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BannerImage=void 0;var o=n(0),a=n(23),s=n(115),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:"banner-container",style:{visibility:this.visibility}},o.createElement("img",{src:this.props.imageUrl,className:"banner",alt:this.props.alt}))},Object.defineProperty(t.prototype,"visibility",{get:function(){return s.StreamState.isWatching(this.props.streamState)?"hidden":"visible"},enumerable:!1,configurable:!0}),t}(a.ReactPureComponent);t.BannerImage=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CommentButton=void 0;var o=n(0),a=n(779),s=n(780),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return this.props.visible?o.createElement("button",{className:this.className,onClick:this.props.onClick},this.image):null},Object.defineProperty(t.prototype,"image",{get:function(){return this.props.isCommentVisible?o.createElement(s.default,null):o.createElement(a.default,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this.props.isCommentVisible?"comment-hidden-button":"comment-button"},enumerable:!1,configurable:!0}),t}(n(23).ReactPureComponent);t.CommentButton=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 20 20"},e),i.createElement("title",null,"commentHidden"),i.createElement("path",{d:"M4.8 16H1.6A1.6 1.6 0 0 1 0 14.4V1.6A1.6 1.6 0 0 1 1.6 0h16.8A1.6 1.6 0 0 1 20 1.6v12.8a1.6 1.6 0 0 1-1.6 1.6h-7.9l-4.184 3.766a.962.962 0 0 1-.969.173.8.8 0 0 1-.547-.739z",fill:"#fff"}),i.createElement("path",{d:"M10 6.667l2.1-2.1a.8.8 0 0 1 1.131 0l.2.2a.8.8 0 0 1 0 1.131L11.333 8l2.1 2.1a.8.8 0 0 1 0 1.131l-.2.2a.8.8 0 0 1-1.131 0L10 9.333l-2.1 2.1a.8.8 0 0 1-1.131 0l-.2-.2a.8.8 0 0 1 0-1.131l2.1-2.1-2.1-2.1a.8.8 0 0 1 0-1.131l.2-.2a.8.8 0 0 1 1.131 0z"}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 100 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M24 80H8a8 8 0 0 1-8-8V8a8 8 0 0 1 8-8h84a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H52.507l-20.92 18.828c-1.271 1.144-3.183 1.487-4.843.867C25.083 99.076 24 97.618 24 96V80z",fill:"#fff"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ElapsedTime=void 0;var o=n(152),a=n(0),s=function(e){function t(t){var n=e.call(this,t)||this;return n.UPDATE_INTERVAL=500,n.updateTimerId=NaN,n.state={elapsedTime:n.elapsedTime()},n}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this.updateTimerId=window.setInterval((function(){return e.update()}),this.UPDATE_INTERVAL)},t.prototype.componentWillUnmount=function(){clearInterval(this.updateTimerId),this.updateTimerId=NaN},t.prototype.render=function(){return a.createElement("div",{className:"time-info"},this.formattedElapsedTime)},t.prototype.update=function(){this.setState({elapsedTime:this.elapsedTime()})},t.prototype.elapsedTime=function(){return Date.now()-this.props.beginTime.getTime()},Object.defineProperty(t.prototype,"formattedElapsedTime",{get:function(){var e=this.state.elapsedTime/1e3,t="";e<0&&(e*=-1,t+="-");var n=Math.floor(e/3600);n>0&&(t+=n+":",e%=3600);var r=e/60;t+=o(Math.floor(r)+"",2,"0")+":";var i=e%60;return t+=o(Math.floor(i)+"",2,"0")},enumerable:!1,configurable:!0}),t}(n(23).ReactPureComponent);t.ElapsedTime=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.MuteButton=void 0;var o=n(0),a=n(783),s=n(784),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return this.props.visible?o.createElement("button",{className:this.className,onClick:this.props.onClick},this.image):null},Object.defineProperty(t.prototype,"image",{get:function(){return this.props.isMuted?o.createElement(a.default,null):o.createElement(s.default,null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this.props.isMuted?"unmute-button":"mute-button"},enumerable:!1,configurable:!0}),t}(n(23).ReactPureComponent);t.MuteButton=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 100 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M24.122 24L45.228 1.252C46.383.006 48.091-.346 49.567.358 51.042 1.063 52 2.686 52 4.484v91.032c0 1.798-.958 3.421-2.433 4.126-1.476.704-3.184.352-4.339-.894L24.122 76H8a8 8 0 0 1-8-8V32a8 8 0 0 1 8-8h16.122zM80 42.731l11.454-11.454a4.362 4.362 0 0 1 6.168 0l1.101 1.101a4.362 4.362 0 0 1 0 6.168L87.269 50l11.454 11.454a4.362 4.362 0 0 1 0 6.168l-1.101 1.101a4.362 4.362 0 0 1-6.168 0L80 57.269 68.546 68.723a4.362 4.362 0 0 1-6.168 0l-1.101-1.101a4.362 4.362 0 0 1 0-6.168L72.731 50 61.277 38.546a4.362 4.362 0 0 1 0-6.168l1.101-1.101a4.362 4.362 0 0 1 6.168 0L80 42.731z",fill:"#fff"}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 100 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M24.122 24L45.228 1.252C46.383.006 48.091-.346 49.567.358 51.042 1.063 52 2.686 52 4.484v91.032c0 1.798-.958 3.421-2.433 4.126-1.476.704-3.184.352-4.339-.894L24.122 76H8a8 8 0 0 1-8-8V32a8 8 0 0 1 8-8h16.122zm51.364-9.325c.155-.244.338-.473.546-.681.468-.494.959-.985 1.425-1.451a4 4 0 0 1 5.439-.202C93.373 21.519 100 34.992 100 50s-6.627 28.481-17.112 37.649a3.987 3.987 0 0 1-5.422-.201 136.193 136.193 0 0 1-1.447-1.429 4.002 4.002 0 0 1 .219-5.86 40.077 40.077 0 0 0 8.915-11.077l.061-.11.113-.212a38.342 38.342 0 0 0 1.399-2.9 39.533 39.533 0 0 0 2.376-7.402c.264-1.224.472-2.47.621-3.733l.032-.274C89.917 52.99 90 51.505 90 50c0-10.566-4.106-20.181-10.808-27.335l-.112-.12-.064-.067a43.96 43.96 0 0 0-.881-.9l-.155-.153-.119-.115a39.186 39.186 0 0 0-1.612-1.483 4.011 4.011 0 0 1-.908-1.131l-.013-.023-.01-.019-.013-.026-.004-.007a3.976 3.976 0 0 1 .122-3.844l.036-.059.027-.043zM62.189 27.828c.363-.38.73-.747 1.079-1.096a4.001 4.001 0 0 1 5.286-.329 30.77 30.77 0 0 1 2.516 2.229C76.578 34.085 80 41.646 80 50c0 9.562-4.483 18.084-11.46 23.579a3.245 3.245 0 0 1-.15.112l-.077.053a3.964 3.964 0 0 1-2.11.673l-.089.001a3.97 3.97 0 0 1-2.831-1.165 48.55 48.55 0 0 1-.938-.909l-.536-.535a4.014 4.014 0 0 1-.651-.857l-.018-.031-.006-.01-.064-.122a3.995 3.995 0 0 1 1.109-4.963 19.914 19.914 0 0 0 7.122-10.57C69.757 53.581 70 51.819 70 50c0-6.449-3.059-12.19-7.804-15.848a3.973 3.973 0 0 1-.367-5.941l.179-.192.181-.191z",fill:"#fff"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PauseButton=void 0;var o=n(0),a=n(786),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("button",{className:"stop-button",onClick:this.props.onClick},o.createElement(a.default,null))},t}(n(23).ReactPureComponent);t.PauseButton=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 88 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M32 4a3.995 3.995 0 0 0-1.172-2.828A3.995 3.995 0 0 0 28 0H4a3.995 3.995 0 0 0-2.828 1.172A3.995 3.995 0 0 0 0 4v92c0 1.061.421 2.078 1.172 2.828A3.995 3.995 0 0 0 4 100h24a3.995 3.995 0 0 0 2.828-1.172A3.995 3.995 0 0 0 32 96V4zM88 4a3.995 3.995 0 0 0-1.172-2.828A3.995 3.995 0 0 0 84 0H60a3.995 3.995 0 0 0-2.828 1.172A3.995 3.995 0 0 0 56 4v92c0 1.061.421 2.078 1.172 2.828A3.995 3.995 0 0 0 60 100h24a3.995 3.995 0 0 0 2.828-1.172A3.995 3.995 0 0 0 88 96V4z",style:{fill:"#fff"}}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadButton=void 0;var o=n(0),a=n(788),s=function(e){function t(t){var n=e.call(this,t)||this;return n.enableTimerId=NaN,n.onClick=n._onClick.bind(n),n.state={isDisabled:!1},n}return i(t,e),t.prototype.componentWillUnmount=function(){this.cancelCoolDown()},t.prototype.render=function(){return this.props.visible?o.createElement("button",{className:"reload-button",disabled:this.state.isDisabled,onClick:this.onClick},o.createElement(a.default,{xmlSpace:"preserve"})):null},t.prototype._onClick=function(){this.state.isDisabled||(this.disableButton(),this.props.onClick.call(this))},t.prototype.disableButton=function(){this.cancelCoolDown(),this.setState({isDisabled:!0}),this.startCoolDown()},t.prototype.startCoolDown=function(){var e=this;this.enableTimerId=window.setTimeout((function(){e.setState({isDisabled:!1})}),t.COOL_DOWN_TIME)},t.prototype.cancelCoolDown=function(){isNaN(this.enableTimerId)||(clearTimeout(this.enableTimerId),this.enableTimerId=NaN)},t.COOL_DOWN_TIME=3e3,t}(n(23).ReactPureComponent);t.ReloadButton=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 100 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M95.853 60.185a4 4 0 0 1 1.918 4.663C91.427 85.201 72.428 100 50 100c-17.573 0-33.04-9.085-41.958-22.811l-1.989 1.19A4 4 0 0 1 0 74.946V56.734a3.999 3.999 0 0 1 5.913-3.513l15.936 8.68a4 4 0 0 1 .14 6.946l-3.64 2.177C25.161 81.254 36.799 88 50 88c17.278 0 31.878-11.556 36.486-27.354a3.962 3.962 0 0 1 5.713-2.41c1.254.642 2.552 1.349 3.654 1.949zM4.147 39.815a4 4 0 0 1-1.918-4.663C8.573 14.799 27.572 0 50 0c17.573 0 33.04 9.085 41.958 22.811l1.989-1.19A4 4 0 0 1 100 25.054v18.212a3.999 3.999 0 0 1-5.913 3.513l-15.936-8.68a4 4 0 0 1-.14-6.946l3.64-2.177C74.839 18.746 63.201 12 50 12c-17.278 0-31.878 11.556-36.486 27.354a3.962 3.962 0 0 1-5.713 2.41c-1.254-.642-2.552-1.349-3.654-1.949z",fill:"#fff"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VolumeSlider=void 0;var o=n(0),a=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.handleChange.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){this.sliderDom&&this.sliderDom.addEventListener("change",this.onChange)},t.prototype.componentWillUnmount=function(){this.sliderDom&&(this.sliderDom.removeEventListener("change",this.onChange),this.sliderDom=null)},t.prototype.render=function(){var e=this;return this.props.visible?o.createElement("div",{className:"volume"},o.createElement("input",{ref:function(t){return e.sliderDom=t},type:"range",value:(100*this.props.volume).toString(),max:"100",min:"0",name:"volume",onChange:this.onChange})):null},t.prototype.handleChange=function(e){var t=e.target,n=parseInt(t.value,10)/100;n!==this.props.volume&&this.props.onChange(n)},t}(n(23).ReactPureComponent);t.VolumeSlider=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ControllerAnimation=void 0;var o=n(0),a=n(814),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this;return o.Children.map(this.props.children,(function(t){return o.createElement(a.CSSTransition,{classNames:"video-control",appear:!0,timeout:200,in:e.props.visible,unmountOnExit:!0},(function(n){return e.props.visible||"exited"!==n?t:o.createElement(o.Fragment,null)}))}))},t}(o.Component);t.ControllerAnimation=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PlayButton=void 0;var o=n(0),a=n(292),s=n(792),u=n(23),c=n(115),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){switch(this.props.streamState){case c.StreamState.FirstPreparing:case c.StreamState.Reloading:return o.createElement(a.default,null);case c.StreamState.Ready:return o.createElement("button",{className:"play-button",onClick:this.props.onClick},o.createElement(s.default,null));default:return null}},t}(u.ReactPureComponent);t.PlayButton=l},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 88 92"},e),i.createElement("path",{d:"M0 28.71v45.95a7.71 7.71 0 0 0 7.75 7.66h9.13l5 8a1.83 1.83 0 0 0 1.62.87 1.86 1.86 0 0 0 1.59-.87l5-8H56.9l5 8a1.83 1.83 0 0 0 1.62.87 1.86 1.86 0 0 0 1.59-.87l5-8h10.14A7.7 7.7 0 0 0 88 74.67V28.71a7.7 7.7 0 0 0-7.74-7.7H50.91l17-16.84L63.73.01l-19.8 19.57L24.18.11l-4.24 4.18 16.94 16.72H7.78A7.71 7.71 0 0 0 0 28.65z",style:{fill:"rgba(0,0,0,.9)",stroke:"rgba(51,51,51,.9)"}}),i.createElement("path",{className:"cls-1",d:"M55.72 49.07a2.31 2.31 0 0 1 0 4.13L34.34 63.89A2.31 2.31 0 0 1 31 61.83V40.45a2.31 2.31 0 0 1 3.34-2.06z",style:{fill:"rgba(255,255,255,.9)"}}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Statistics=void 0;var o=n(0),a=n(794),s=n(795),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("div",{className:"count-block"},this.renderWatchCount(),this.renderCommentCount())},t.prototype.renderWatchCount=function(){return this.props.watchCount?o.createElement("div",{className:"count-visitors"},o.createElement(s.default,{className:"icon"}),this.formatCount(this.props.watchCount)):null},t.prototype.renderCommentCount=function(){return this.props.commentCount?o.createElement("div",{className:"count-comment"},o.createElement(a.default,{className:"icon"}),this.formatCount(this.props.commentCount)):null},t.prototype.formatCount=function(e){return String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},t}(o.Component);t.Statistics=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 100 100",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421}},e),i.createElement("path",{d:"M24 80H8a8 8 0 0 1-8-8V8a8 8 0 0 1 8-8h84a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H52.507l-20.92 18.828c-1.271 1.144-3.183 1.487-4.843.867C25.083 99.076 24 97.618 24 96V80z",fill:"#fff"}))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 18 18"},e),i.createElement("path",{d:"M4 6.9c0 1.7.9 3.2 2.2 4.1-1.3.9-2.2 2.5-2.2 4.2v.8h10v-.8c0-1.8-.9-3.3-2.2-4.2 1.4-.9 2.2-2.4 2.2-4.1C14 4.2 11.8 2 9 2S4 4.2 4 6.9z",fill:"#FFF"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Title=void 0;var o=n(0),a=n(81),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement(a.Link,{key:"program-title",href:this.props.linkUrl,className:"title-link",openInNewWindow:this.props.openInNewWindow},o.createElement("h1",{className:"title"},this.props.title))},t}(n(23).ReactPureComponent);t.Title=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayController=void 0;var r=function(){function e(){this.timerId=null}return Object.defineProperty(e.prototype,"isAssigned",{get:function(){return null!==this.timerId},enumerable:!1,configurable:!0}),e.prototype.assign=function(t){var n=this;this.isAssigned||(this.timerId=window.setTimeout((function(){return n.clear()}),e.COOL_DOWN_TIME_MSEC),t())},e.prototype.clear=function(){this.isAssigned&&(clearTimeout(this.timerId),this.timerId=null)},e.COOL_DOWN_TIME_MSEC=3e3,e}();t.ReplayController=r},function(e,t){
/*! http://mths.be/startswith v0.2.0 by @mathias */
String.prototype.startsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),t={}.toString,n=function(e){if(null==this)throw TypeError();var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var r=n.length,i=String(e),o=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var u=Math.min(Math.max(s,0),r);if(o+u>r)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(u+c)!=i.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AlternateGate=void 0;var o=n(0),a=n(81),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("main",null,o.createElement("div",{className:"content-block"},o.createElement("div",{className:"banner-container"},this.renderImage())))},t.prototype.renderImage=function(){var e=o.createElement("img",{src:this.props.bannerUrl,className:"banner",alt:this.props.linkUrl});return this.props.noUI?e:o.createElement(a.Link,{href:this.props.linkUrl,className:"external-player-link",openInNewWindow:this.props.openInNewWindow},e)},t}(n(23).ReactPureComponent);t.AlternateGate=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InitializationError=void 0;var o=n(0),a=n(153),s=n(801),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){this.props.error},t.prototype.render=function(){return o.createElement("main",{className:"error-view"},o.createElement("div",{className:"content-block"},o.createElement("p",{className:"message"},a.default("fetchFailed")),o.createElement("div",{className:"banner-container"},o.createElement(s.default,null))))},t}(n(23).ReactPureComponent);t.InitializationError=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default=function(e){return i.createElement("svg",r({viewBox:"0 0 200 200",id:"undefined"},e),i.createElement("title",null,"迴ｾ蝨ｨ繧｢繧ｯ繧ｻ繧ｹ縺ｧ縺阪∪縺帙ｓ"),i.createElement("circle",{fill:"#323232",cx:"99.3",cy:"99.3",r:"91.3"}),i.createElement("path",{fill:"#360702",d:"M0 99.2c0 54.8 44.4 99.2 99.2 99.2 54.8 0 99.2-44.4 99.2-99.2C198.4 44.4 154 0 99.2 0 44.4 0 0 44.4 0 99.2zm19.8 0c0-17.4 5.6-33.4 15-46.5l110.8 110.8c-13.1 9.5-29.1 15-46.5 15-43.7.1-79.3-35.5-79.3-79.3zm32.9-64.3c13.1-9.5 29.1-15 46.5-15 43.8 0 79.4 35.5 79.4 79.4 0 17.4-5.6 33.4-15 46.5L52.7 34.9z"}),i.createElement("path",{d:"M47.6 79.2v53.7c0 5 4 9 9 9h10.6l5.8 9.4c.6.9 1.3 1 1.9 1 .6 0 1.4-.3 1.9-1l5.8-9.4h31.1l5.8 9.4c.6.9 1.3 1 1.9 1 .6 0 1.4-.3 1.8-1l5.8-9.4h11.8c5 0 9-4 9-9V79.2c0-4.9-4-8.9-9-8.9h-34.1l19.8-19.7-4.9-4.9-23 22.9-22.8-22.9-5 4.9 19.7 19.6H56.6c-4.9 0-9 4-9 9z"}),i.createElement("path",{fill:"#323232",d:"M51.2 80.3c0-4 4-6.4 9.9-6.4h20c7 0 11.2 3.5 11.2 6.3 0 4-6.7 5.8-11.7 9.8-2.9 1.5-16 15-17.9 32.7-.4 3.7-11.5-1.3-11.5-11.5V80.3z"}))}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Initializing=void 0;var o=n(0),a=n(292),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return o.createElement("main",{className:"error-view"},o.createElement("div",{className:"content-block"},o.createElement("div",{className:"banner-container"},o.createElement(a.default,null))))},t}(n(23).ReactPureComponent);t.Initializing=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalLiveFetcher=void 0;var r=n(804);n(236);var i=n(227),o=function(){function e(e,t){this.reliveApiBaseUrl=e,this.assetsBaseUrl=t}return e.prototype.fetch=function(e){var t=this,n=r.stringify({cache_busting:(new Date).getTime(),websocket:"v2"}),o=this.reliveApiBaseUrl+"programs/"+e+"/external.json?"+n,a=new Headers;return document.referrer&&a.append("X-Referer",document.referrer),window.fetch(o,{credentials:"include",headers:a}).then((function(e){return e.json()})).then((function(e){if(!e||!t.isExternalProgramResponse(e))return Promise.reject("Illegal response external.json: "+e);var n=e.data;return new i.ExternalLive(n.programId||"",n.programTitle||"",n.broadcastId||"",null!=n.serverTime?new Date(parseInt(n.serverTime,10)):null,null!=n.openTime?new Date(parseInt(n.openTime,10)):null,null!=n.beginTime?new Date(parseInt(n.beginTime,10)):null,null!=n.endTime?new Date(parseInt(n.endTime,10)):null,null!=n.vposBaseTime?new Date(parseInt(n.vposBaseTime,10)):null,n.bannerUrl||null,n.linkUrl||"",n.audienceToken||null,t.assetsBaseUrl,n.websocketEndpointUrl||null)}))},e.prototype.isExternalProgramResponse=function(e){return!!e.data},e}();t.ExternalLiveFetcher=o},function(e,t,n){"use strict";function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function o(e,t){return t.decode?f(e):e}function a(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function s(e){const t=(e=a(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function c(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map(t=>o(t,e)):null===n?n:o(n,e);r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const r of e.split("&")){let[e,a]=h(t.decode?r.replace(/\+/g," "):r,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:o(a,t),n(o(e,t),a,i)}for(const e of Object.keys(i)){const n=i[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=u(n[e],t);else i[e]=u(n,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}const l=n(805),f=n(806),h=n(807);t.extract=s,t.parse=c,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&(e=>null==e)(e[n])||t.skipEmptyString&&""===e[n],o=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[",o,"]"].join("")]:[...n,[i(t,e),"[",i(o,e),"]=",i(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[]"].join("")]:[...n,[i(t,e),"[]=",i(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[i(t,e),"=",i(r,e)].join("")]:[[n,i(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,i(t,e)]:[...n,[i(t,e),"=",i(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const s=Object.keys(a);return!1!==t.sort&&s.sort(t.sort),s.map(n=>{const r=e[n];return void 0===r?"":null===r?i(n,t):Array.isArray(r)?r.reduce(o(n),[]).join("&"):i(n,t)+"="+i(r,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=h(e,"#");return Object.assign({url:n.split("?")[0]||"",query:c(s(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:o(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=a(e.url).split("?")[0]||"",o=t.extract(e.url),s=t.parse(o,{sort:!1}),u=Object.assign(s,e.query);let c=t.stringify(u,n);c&&(c=`?${c}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${i(e.fragmentIdentifier,n)}`),`${r}${c}${l}`}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(o),n=1;n<t.length;n++)t=(e=r(t,n).join("")).match(o);return e}}var o=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"�ｽ�ｽ","%FF%FE":"�ｽ�ｽ"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�ｽ";for(var o=Object.keys(t),s=0;s<o.length;s++){var u=o[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerSettingsParser=void 0;var o=n(809);t.PlayerSettingsParser=o,i(n(811),t)},function(e,t,n){"use strict";function r(e){var t=e.get("comment_visible");return"on"===t||"off"===t?t:"never"}function i(e){var t=parseInt(e.get("auto_stop_sec"),10);return t>0?t:NaN}function o(e){return u(e,"banner_url")}function a(e){return u(e,"link_url")}function s(e){var t=Number.parseFloat(u(e,"default_audio_volume"));if(!isNaN(t))return t}function u(e,t){var n=e.get(t);return n?decodeURIComponent(n):void 0}function c(e,t){return"true"===e.get(t)}function l(e,t){var n=e.get(t);if(n)return function(e){switch(e){case"super_high":return f.StreamQuality.SuperHigh;case"high":return f.StreamQuality.High;case"normal":return f.StreamQuality.Normal;case"low":return f.StreamQuality.Low;case"super_low":return f.StreamQuality.SuperLow;default:return}}(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.getSearchParams=void 0;var f=n(13),h=n(810);t.getSearchParams=function(){return new h(location.search.slice(1))},t.parse=function(e){return{autoStopSec:i(e),bannerUrl:o(e),commentVisible:r(e),dwc:c(e,"dwc")||void 0,gateStatusVisible:!c(e,"gate_status_hidden"),isAutoPlay:c(e,"auto_play"),isDefaultMute:c(e,"default_mute"),isVideoClickable:c(e,"video_clickable"),linkUrl:a(e),niconicoLinkVisible:!c(e,"niconico_link_hidden"),openInNewWindow:c(e,"target_blank"),streamQuality:l(e,"stream_quality"),noUI:c(e,"no_ui"),defaultAudioVolume:s(e)}}},function(e,t,n){"use strict";(function(t){
/*!
Copyright (C) 2015-2017 Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
function n(e){var t,n,a,u,c,l,f=Object.create(null);if(this[d]=f,e)if("string"==typeof e)for("?"===e.charAt(0)&&(e=e.slice(1)),c=0,l=(u=e.split("&")).length;c<l;c++)-1<(t=(a=u[c]).indexOf("="))?i(f,o(a.slice(0,t)),o(a.slice(t+1))):a.length&&i(f,o(a),"");else if(s(e))for(c=0,l=e.length;c<l;c++)i(f,(a=e[c])[0],a[1]);else if(e.forEach)e.forEach(r,f);else for(n in e)i(f,n,e[n])}function r(e,t){i(this,t,e)}function i(e,t,n){var r=s(n)?n.join(","):n;t in e?e[t].push(r):e[t]=[r]}function o(e){return decodeURIComponent(e.replace(l," "))}function a(e){return encodeURIComponent(e).replace(c,h)}var s=Array.isArray,u=n.prototype,c=/[!'\(\)~]|%20|%00/g,l=/\+/g,f={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},h=function(e){return f[e]},d="__URLSearchParams__:"+Math.random();u.append=function(e,t){i(this[d],e,t)},u.delete=function(e){delete this[d][e]},u.get=function(e){var t=this[d];return e in t?t[e][0]:null},u.getAll=function(e){var t=this[d];return e in t?t[e].slice(0):[]},u.has=function(e){return e in this[d]},u.set=function(e,t){this[d][e]=[""+t]},u.forEach=function(e,t){var n=this[d];Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},u.toJSON=function(){return{}},u.toString=function(){var e,t,n,r,i=this[d],o=[];for(t in i)for(n=a(t),e=0,r=i[t];e<r.length;e++)o.push(n+"="+a(r[e]));return o.join("&")},function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();"forEach"in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(r){!r.length||r in n||(n[r]=this.getAll(r)).forEach((function(n){e.call(t,n,r,this)}),this)}),this)}),"keys"in e||(e.keys=function(){var e=[];this.forEach((function(t,n){e.push(n)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"values"in e||(e.values=function(){var e=[];this.forEach((function(t){e.push(t)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"entries"in e||(e.entries=function(){var e=[];this.forEach((function(t,n){e.push([n,t])}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),!t||Symbol.iterator in e||(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,t,n,r=this.entries(),i=r.next(),o=i.done,a=[],s=Object.create(null);!o;)t=(n=i.value)[0],a.push(t),t in s||(s[t]=[]),s[t].push(n[1]),o=(i=r.next()).done;for(a.sort(),e=0;e<a.length;e++)this.delete(a[e]);for(e=0;e<a.length;e++)t=a[e],this.append(t,s[t].shift())})}((n=e.exports=t.URLSearchParams||n).prototype)}).call(this,n(22))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";function r(){return i||((i=n(237)).utils._saidHello=!0,function(e){(function(e){try{e.interaction.InteractionManager.prototype.mapPositionToPoint=function(e,t,n){var r;r=null===this.interactionDOMElement.parentElement?{x:0,y:0,width:0,height:0}:this.interactionDOMElement.getBoundingClientRect(),e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution}}catch(e){}})(e),function(e){try{e.Container.prototype.renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask,e);try{this._renderCanvas(e)}catch(e){}for(var t=0,n=this.children.length;t<n;t++)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}}}catch(e){}}(e)}(i)),i}var i,o;n.r(t),function(e){function t(e){return void 0===e}function n(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}e.isNull=function(e){return null===e},e.isUndefined=t,e.isDefined=function(e){return!t(e)},e.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},e.isEmptyArray=function(e){return Array.isArray(e)&&0===e.length},e.isString=n,e.isEmptyString=function(e){return n(e)&&0===e.length},e.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}}(o||(o={}));var a,s=o;!function(e){e.AUTO_FRAME_RATE=-1,e.AUTO_STAGING_COMMENTS_INTERVAL=-1,e.BASE_FRAME_RATE=60,e.BASE_CANVAS_HEIGHT=384,e.ACTUAL_FRAME_RATE_AT_AUTO=e.BASE_FRAME_RATE,e.NO_CONTENT_LENGTH=-1,e.DEFAULT_SLOT_COUNT=40,e.DEFAULT_RESOLUTION=1,e.DEFAULT_USING_WEBGL_STATUS=!1,e.SUPPORTED_MINIMUM_CHARACTER_SIZE=10}(a||(a={}));var u,c=a,l=n(2),f={family:'Arial, "�ｭ�ｳ �ｰ繧ｴ繧ｷ繝�け", "MS PGothic", MSPGothic, MS-PGothic',adjustBaselinePosition:.01,weight:600},h=f,d={family:'"貂ｸ繧ｴ繧ｷ繝�け菴�", "貂ｸ繧ｴ繧ｷ繝�け", "Yu Gothic", YuGothic, yugothic, YuGo-Medium',adjustBaselinePosition:-.04,weight:400},p={family:'Gulim, "鮟台ｽ�", SimHei',adjustBaselinePosition:.03,weight:400},v={family:[d.family,p.family,f.family].join(", "),adjustBaselinePosition:d.adjustBaselinePosition,weight:d.weight},m={family:'"貂ｸ譏取悃菴�", "貂ｸ譏取悃", "Yu Mincho", YuMincho, yumincho, YuMin-Medium',adjustBaselinePosition:-.01,weight:400},g={family:'"螳倶ｽ�", SimSun',adjustBaselinePosition:.135,weight:400},y={family:[m.family,g.family,f.family].join(", "),adjustBaselinePosition:m.adjustBaselinePosition,weight:m.weight},_={defont:h,gothic:v,mincho:y},b={defont:h,gothic:v,mincho:y},E={family:[d.family,g.family,f.family].join(", "),adjustBaselinePosition:d.adjustBaselinePosition,weight:d.weight},S={defont:h,gothic:E,mincho:y},T={defont:h,gothic:E,mincho:y},w={defont:h,gothic:{family:[p.family,f.family].join(", "),adjustBaselinePosition:p.adjustBaselinePosition,weight:p.weight},mincho:{family:[g.family,f.family].join(", "),adjustBaselinePosition:g.adjustBaselinePosition,weight:g.weight}},O={family:'"繝偵Λ繧ｮ繝手ｧ偵ざ ProN W6", HiraKakuProN-W6, "繝偵Λ繧ｮ繝手ｧ偵ざ ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',adjustBaselinePosition:-.05,weight:600},R={family:'"繝偵Λ繧ｮ繝手ｧ偵ざ ProN W3", HiraKakuProN-W3, "繝偵Λ繧ｮ繝手ｧ偵ざ ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',adjustBaselinePosition:-.04,weight:300},A={family:[d.family,R.family].join(", "),adjustBaselinePosition:d.adjustBaselinePosition,weight:d.weight},P={family:'"繝偵Λ繧ｮ繝取�譛� ProN W3", HiraMinProN-W3, "繝偵Λ繧ｮ繝取�譛� ProN", HiraMinProN, "Hiragino Mincho ProN"',adjustBaselinePosition:-.02,weight:300},x={family:[m.family,P.family,R.family].join(", "),adjustBaselinePosition:m.adjustBaselinePosition,weight:m.weight},C={defont:O,gothic:A,mincho:x},M={defont:O,gothic:A,mincho:x},L={family:'"繝偵Λ繧ｮ繝手ｧ偵ざ繧ｷ繝�け", "Hiragino Sans", HiraginoSans',adjustBaselinePosition:-.05,weight:600},k={family:'"繝偵Λ繧ｮ繝手ｧ偵ざ繧ｷ繝�け", "Hiragino Sans", HiraginoSans',adjustBaselinePosition:-.04,weight:300},I={family:[d.family,k.family].join(", "),adjustBaselinePosition:d.adjustBaselinePosition,weight:d.weight},D={family:[m.family,P.family,k.family].join(", "),adjustBaselinePosition:m.adjustBaselinePosition,weight:m.weight},N={defont:L,gothic:I,mincho:D},F={defont:L,gothic:I,mincho:D},U={defont:O,gothic:R,mincho:P},j={family:'""',adjustBaselinePosition:0,weight:600},B={family:"sans-serif",adjustBaselinePosition:0,weight:400},G={family:"serif",adjustBaselinePosition:0,weight:400},H={defont:j,gothic:B,mincho:G},V={defont:j,gothic:B,mincho:G},z={defont:j,gothic:B,mincho:G},W=function(){function e(){e.initIfNeed(),this.families=Object.assign({},z,e.envFamilies)}return e.initIfNeed=function(){if(!s.isDefined(e.envFamilies)){var t=window.navigator.userAgent.toLowerCase();t.indexOf("windows nt")>=0?/windows nt 6\.1/.test(t)?e.envFamilies=_:/windows nt 6\.2/.test(t)?e.envFamilies=b:/windows nt 6\.3/.test(t)?e.envFamilies=S:/windows nt 10\.[0-9]/.test(t)?e.envFamilies=T:e.envFamilies=w:t.indexOf("mac os x")>=0?/mac os x 10(\.|_)9/.test(t)?e.envFamilies=C:/mac os x 10(\.|_)10/.test(t)?e.envFamilies=M:/mac os x 10(\.|_)11/.test(t)?e.envFamilies=N:/mac os x 10(\.|_)1[2-9]/.test(t)?e.envFamilies=F:e.envFamilies=U:t.indexOf("android ")>=0?e.envFamilies=H:t.indexOf("iphone;")>=0||t.indexOf("ipad;")>=0||t.indexOf("ipod touch;")>=0?e.envFamilies=V:e.envFamilies=z}},e.prototype.setFont=function(e,t){l.a.isFontCommand(e)&&(this.families[e]=t)},e.prototype.resetFont=function(t){l.a.isFontCommand(t)&&(this.families[t]=e.envFamilies[t]||z[t])},e.prototype.getFamilies=function(){return this.families},e}(),Y=function(){function e(e,t,n){void 0===n&&(n=function(){});var r=this;this.id=window.setTimeout((function(){e(),r.id=null,n()}),t)}return e.prototype.cancel=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null)},e}(),q=function(){function e(){this.schedulers=[]}return e.prototype.create=function(e,t){var n=this,r=new Y(e,t,(function(){n.removeScheduler(r)}));this.schedulers.push(r)},e.prototype.removeScheduler=function(e){var t=this.schedulers.indexOf(e);t<0||this.schedulers.splice(t,1)},e.prototype.cancelAll=function(){for(var e=0,t=this.schedulers.length;e<t;e++)this.schedulers[e].cancel();this.schedulers.length=0},e}(),K=function(){function e(e,t){this.process=e,this.intervalMs=t,this.oneTimeSchedulerHandler=new q,this.id=null}return e.prototype.start=function(){var e,t,n=this;this.stop();var r=function(){e=Date.now(),n.process(n.oneTimeSchedulerHandler),(t=n.intervalMs-(Date.now()-e))<0&&(t=0),n.id=window.setTimeout(r,t)};this.id=window.setTimeout(r,0)},e.prototype.stop=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null),this.oneTimeSchedulerHandler.cancelAll()},e}(),X=n(87),$=new X.a("@nico/comment-renderer"),J=function(){function e(e){var t=this;this.oneTimeSchedulerHandler=new q,this.runningProcess=function(n){e(t.oneTimeSchedulerHandler)}}return Object.defineProperty(e,"frameRate",{get:function(){return e._frameRate},set:function(t){e._frameRate=t,t===c.AUTO_FRAME_RATE?($.framerate=c.ACTUAL_FRAME_RATE_AT_AUTO,$.timingMode=X.a.RAF):($.framerate=t,c.BASE_FRAME_RATE/t%1==0?$.timingMode=X.a.RAF_SYNCHED:$.timingMode=X.a.TIMEOUT)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"frameSkip",{get:function(){return $.frameSkip},set:function(e){$.frameSkip=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"actualFrameRate",{get:function(){return $.getMeasuredFPS()},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.stop(),$.addEventListener("tick",this.runningProcess)},e.prototype.stop=function(){$.removeEventListener("tick",this.runningProcess),this.oneTimeSchedulerHandler.cancelAll()},e}(),Q=function(){function e(e){var t=this;this.threadManagementSet=e,this.stagingFilterControl={add:function(e,n){t.threadManagementSet.addStagingFilter(e,n)},remove:function(e){t.threadManagementSet.removeStagingFilter(e)},clear:function(){t.threadManagementSet.clearStagingFilter()},getFilterNameList:function(){return t.threadManagementSet.getStagingFilterNameList()}}}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.threadManagementSet.visible},set:function(e){this.threadManagementSet.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.threadManagementSet.alpha},set:function(e){this.threadManagementSet.alpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScale",{get:function(){return this.threadManagementSet.fontScale},set:function(e){this.threadManagementSet.fontScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseMoving",{get:function(){return this.threadManagementSet.reverseMoving},set:function(e){this.threadManagementSet.reverseMoving=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderArea",{get:function(){return this.threadManagementSet.renderArea},set:function(e){this.threadManagementSet.renderArea=e},enumerable:!0,configurable:!0}),e}(),Z=function(){function e(e){var t=this;this.threadManagementSetList=e,this.stagingFilterControl={add:function(e,n){t.threadManagementSetList.forEach((function(t){t.addStagingFilter(e,n)}))},remove:function(e){t.threadManagementSetList.forEach((function(t){t.removeStagingFilter(e)}))},clear:function(){t.threadManagementSetList.forEach((function(e){e.clearStagingFilter()}))}}}return Object.defineProperty(e.prototype,"visible",{set:function(e){this.threadManagementSetList.forEach((function(t){t.visible=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{set:function(e){this.threadManagementSetList.forEach((function(t){t.alpha=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScale",{set:function(e){this.threadManagementSetList.forEach((function(t){t.fontScale=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseMoving",{set:function(e){this.threadManagementSetList.forEach((function(t){t.reverseMoving=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderArea",{set:function(e){this.threadManagementSetList.forEach((function(t){t.renderArea=e}))},enumerable:!0,configurable:!0}),e}(),ee=n(18),te=n(86),ne=function(){var e=this;this.eventEmitter=new ee.EventEmitter,this.event=function(t){return t?{on:function(n){return e.eventEmitter.on(t,n)&&e},once:function(n){return e.eventEmitter.once(t,n)&&e},off:function(n){return e.eventEmitter.removeListener(t,n)&&e},offAll:function(){return e.eventEmitter.removeAllListeners(t)&&e},emit:function(n){return e.eventEmitter.emit(t,n)}}:{on:function(t){return e},once:function(t){return e},off:function(t){return e},offAll:function(){return e.eventEmitter.removeAllListeners()&&e},emit:function(e){return!0}}}},re=function(){function e(e,t){void 0===t&&(t=te.a),this.threadParams=e,this.chatConverter=t,this._filteredChatList=[],this.filterTimerId=null,this.sortOriginalChatByVpos(),this.eventDispatcher=new ne,this.event=this.eventDispatcher.event.bind(this.eventDispatcher)}return e.prototype.isUsingStreamingFromMessageServer=function(){return!!this.threadParams.useStreamingFromMessageServer},e.prototype.isFilterCompleted=function(){return!!this.chatFilter&&null===this.filterTimerId},e.prototype.getFilteredChatList=function(){return this._filteredChatList.concat()},e.prototype.sortOriginalChatByVpos=function(){var e,t,n;this.threadParams.chatList.sort((function(r,i){return 0===(n=r.vpos-i.vpos)&&0===(n=(s.isDefined(r.no)?r.no:1/0)-(s.isDefined(i.no)?i.no:1/0)||0)&&(e=Number(r.thread),t=Number(i.thread),n=Number.isNaN(e)||Number.isNaN(t)?-1:e-t),n}))},e.prototype.applyFilter=function(e,t,n){var r=this;void 0===t&&(t=this.threadParams.chatList.length),void 0===n&&(n=0),this.eventDispatcher.event("startFiltering").emit(void 0),this.resetFiltering(e),this.filterTimerId=window.setTimeout((function(){r._applyFilter(0,t,r.threadParams.chatList.length,n)}),0)},e.prototype._applyFilter=function(e,t,n,r){var i=this,o=e+t,a=this.chatFilter.apply(this.threadParams.chatList.slice(e,o)).map(this.chatConverter.convert);this._filteredChatList.push.apply(this._filteredChatList,a),this.eventDispatcher.event("filter").emit(a),o>=n?(this.filterTimerId=null,this.eventDispatcher.event("filtered").emit(this._filteredChatList.concat())):this.filterTimerId=window.setTimeout((function(){return i._applyFilter(o,t,n,r)}),r)},e.prototype.addChat=function(e,t,n){var r=this;if(this.isFilterCompleted())this._addChat(e,t,n);else{var i=function(){return r._addChat(e,t,n)};this.eventDispatcher.event("filtered").once(i),t.then((function(t){s.isDefined(t)&&(e.no=t)})).catch((function(){return r.eventDispatcher.event("filtered").off(i)}))}},e.prototype._addChat=function(e,t,n){var r=this;this.insertIntoVposOrderedList(this.threadParams.chatList,e);var i,o=this.chatFilter.apply([e])[0];o&&(i=this.chatConverter.convert(o),this.insertIntoVposOrderedList(this._filteredChatList,i),s.isDefined(n)&&!s.isEmptyString(n)&&i.setBorderLine(n),this.eventDispatcher.event("added").emit(i)),t.then((function(t){s.isDefined(t)&&(e.no=t,i&&(i.no=t))})).catch((function(){r.removeElement(r.threadParams.chatList,e),i&&r.removeElement(r._filteredChatList,i)&&r.eventDispatcher.event("deleted").emit([i])}))},e.prototype.updateChat=function(e,t){var n=this;this.isFilterCompleted()?this._updateChat(e,t):this.eventDispatcher.event("filtered").once((function(){return n._updateChat(e,t)}))},e.prototype._updateChat=function(e,t){if(!s.isUndefined(e.thread)&&!s.isUndefined(e.no)){var n=this.getIndexByThreadAndNo(this.threadParams.chatList,e.thread,e.no);if(!(n<0)){var r=this.threadParams.chatList[n];void 0!==t.content&&r.content!==t.content&&(r.content=t.content),void 0!==t.mail&&r.mail!==t.mail&&(r.mail=t.mail),void 0!==t.vpos&&r.vpos!==t.vpos&&(r.vpos=t.vpos,this.threadParams.chatList.splice(n,1),this.insertIntoVposOrderedList(this.threadParams.chatList,r));var i=this.chatFilter.apply([r])[0],o=i&&this.chatConverter.convert(i);if(void 0!==t.borderLineColor&&o.borderLineColor!==t.borderLineColor&&o.setBorderLine(t.borderLineColor),(n=this.getIndexByThreadAndNo(this._filteredChatList,e.thread,e.no))<0)o&&(this.insertIntoVposOrderedList(this._filteredChatList,o),this.eventDispatcher.event("added").emit(o));else if(o){var a;void 0!==t.vpos?(a=this._filteredChatList.splice(n,1)[0],this.insertIntoVposOrderedList(this._filteredChatList,o)):a=this._filteredChatList.splice(n,1,o)[0],this.eventDispatcher.event("updated").emit({before:a,after:o})}else{var u=this._filteredChatList.splice(n,1)[0];this.eventDispatcher.event("deleted").emit([u])}}}},e.prototype.deleteChats=function(e){var t=this;this.isFilterCompleted()?this._deleteChats(e):this.eventDispatcher.event("filtered").once((function(){return t._deleteChats(e)}))},e.prototype._deleteChats=function(e){var t=this,n=[];e.forEach((function(e){var r=t.getIndexByThreadAndNo(t.threadParams.chatList,e.thread,e.no);if(r>=0){var i=t.threadParams.chatList[r];t.removeElement(t.threadParams.chatList,i)}t.removeElement(t._filteredChatList,e)&&n.push(e)})),n.length&&this.eventDispatcher.event("deleted").emit(e)},e.prototype.addReceivedChatListByStreaming=function(e){var t=this;this.isUsingStreamingFromMessageServer()&&(this.isFilterCompleted()?this._addReceivedChatListByStreaming(e):this.eventDispatcher.event("filtered").once((function(){return t._addReceivedChatListByStreaming(e)})))},e.prototype._addReceivedChatListByStreaming=function(e){var t=this;e.forEach((function(e){t.threadParams.chatList.push(e)}));var n=this.chatFilter.apply(e);if(n.length>0){var r=[];n.forEach((function(e){var n=t.chatConverter.convert(e);t._filteredChatList.push(n),r.push(n)})),this.eventDispatcher.event("receivedByStreaming").emit(r)}},e.prototype.mergeChatList=function(e){var t=this;this.isFilterCompleted()?this._mergeChatList(e):this.eventDispatcher.event("filtered").once((function(){return t._mergeChatList(e)}))},e.prototype._mergeChatList=function(e){var t,n,r=this,i=[];e.forEach((function(e){t=!1,s.isDefined(e.thread)&&s.isDefined(e.no)&&((n=r.getIndexByThreadAndNo(r.threadParams.chatList,e.thread,e.no))>=0&&(r.threadParams.chatList.splice(n,1,e),t=!0),(n=r.getIndexByThreadAndNo(r._filteredChatList,e.thread,e.no))>=0&&i.push(r._filteredChatList.splice(n,1)[0])),t||r.threadParams.chatList.push(e)})),this.sortOriginalChatByVpos();var o={};i.forEach((function(e){s.isDefined(e.thread)&&s.isDefined(e.no)&&!s.isEmptyString(e.borderLineColor)&&(o[e.thread+"_"+e.no]=e.borderLineColor)}));var a=this.chatFilter.apply(e),u=[];a.forEach((function(e){var t=r.chatConverter.convert(e);if(r.insertIntoVposOrderedList(r._filteredChatList,t),s.isDefined(t.thread)&&s.isDefined(t.no)){var n=t.thread+"_"+t.no;o[n]&&t.setBorderLine(o[n])}u.push(t)})),this.eventDispatcher.event("merged").emit({merged:u,all:this._filteredChatList.concat()})},e.prototype.resetFiltering=function(e){null!==this.filterTimerId&&window.clearTimeout(this.filterTimerId),this._filteredChatList.length=0,this.chatFilter=e},e.prototype.insertIntoVposOrderedList=function(e,t){var n=0;e.some((function(e,r){return t.vpos<e.vpos&&(n=r,!0)}))?e.splice(n,0,t):e.push(t)},e.prototype.getIndexByThreadAndNo=function(e,t,n){if(s.isUndefined(t)||s.isUndefined(n))return-1;var r=-1;return e.some((function(e,i){return!(!s.isDefined(e.thread)||e.thread!==t||!s.isDefined(e.no)||e.no!==n)&&(r=i,!0)})),r},e.prototype.removeElement=function(e,t){var n=e.indexOf(t);return n>=0&&(e.splice(n,1),!0)},e.prototype.dispose=function(){this._filteredChatList.length=0,this.eventDispatcher.event().offAll()},e}(),ie=[l.a.POSITIONS.ue,l.a.POSITIONS.shita];!function(e){e.definedAsFixed=function(e){return ie.indexOf(e)>=0}}(u||(u={}));var oe,ae=u,se=3e3,ue={frontAdjustStagingTimeMs:1e3,frontAdjustViewTimeMs:1e3,behindAdjustViewTimeMs:1e3};!function(e){function t(e){return s.isDefined(e.atNumber)?1e3*e.atNumber:se}function n(e){return e.vposMs-ue.frontAdjustViewTimeMs}function r(e){return e.vposMs}function i(e,r){return s.isDefined(r)&&r-(n(e)+ue.frontAdjustStagingTimeMs)<function(e){return t(e)+ue.frontAdjustStagingTimeMs+ue.frontAdjustViewTimeMs}(e)}function o(e,n){return s.isDefined(n)&&n-r(e)<function(e){return t(e)}(e)}e.getViewTimeMs=t,e.getVposInfoForMoving=function(e,r){var o=n(e),a=function(e){return n(e)+ue.frontAdjustViewTimeMs+t(e)}(e);return i(e,r)&&(o=function(e,n){return n-(t(e)+ue.frontAdjustViewTimeMs)}(e,r),a=r),{vStagingMs:o-ue.frontAdjustStagingTimeMs,vStartMs:o,vEndMs:a,vRemoveMs:a+ue.behindAdjustViewTimeMs}},e.getVposInfoForFixed=function(e,n){var i=r(e),a=function(e){return r(e)+t(e)}(e);return o(e,n)&&(i=function(e,n){return n-t(e)}(e,n),a=n),{vStagingMs:i,vStartMs:i,vEndMs:a,vRemoveMs:a}},e.shouldModifyStagingTimeForMoving=i,e.shouldModifyStagingTimeForFixed=o}(oe||(oe={}));var ce,le,fe=oe;(le=ce||(ce={})).sort=function(e,t){var n,r,i,o,a;e.sort((function(e,u){return n=ae.definedAsFixed(e.position)?fe.getVposInfoForFixed(e,t):fe.getVposInfoForMoving(e,t),r=ae.definedAsFixed(u.position)?fe.getVposInfoForFixed(u,t):fe.getVposInfoForMoving(u,t),0==(a=n.vStagingMs-r.vStagingMs)&&0===(a=(s.isDefined(e.no)?e.no:1/0)-(s.isDefined(u.no)?u.no:1/0)||0)&&(i=Number(e.thread),o=Number(u.thread),a=Number.isNaN(i)||Number.isNaN(o)?-1:i-o),a}))},le.getMinimumModifiedStagingTimeMs=function(e,t){if(s.isUndefined(t))return-1;for(var n=-1,r=void 0,i=function(e){(e<n||-1===n)&&(n=e)<0&&(n=0)},o=0,a=e.length;o<a;o++)r=e[o],ae.definedAsFixed(r.position)?fe.shouldModifyStagingTimeForFixed(r,t)&&i(fe.getVposInfoForFixed(r,t).vStagingMs):fe.shouldModifyStagingTimeForMoving(r,t)&&i(fe.getVposInfoForMoving(r,t).vStagingMs);return n};var he,de,pe=ce,ve=function(){function e(e){void 0===e&&(e={}),this.eventEmitter=new ee.EventEmitter,this._contentLengthMs=s.isDefined(e.contentLengthMs)?e.contentLengthMs:c.NO_CONTENT_LENGTH,this._useStreamingFromMessageServer=!!e.useStreamingFromMessageServer,this.clearChatList()}return e.prototype.clearChatList=function(){this.chatList=[],this._completedPreparationForSort=!1,this._resetStagingStatus()},e.prototype.resetStagingStatus=function(){this._resetStagingStatus(),this._useStreamingFromMessageServer&&this.sort()},e.prototype._resetStagingStatus=function(){this.lastChatIndexForMoving=-1,this.lastChatIndexForFixed=-1,this.lastChatForMoving=null,this.lastChatForFixed=null},Object.defineProperty(e.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(e){this._contentLengthMs!==e&&(this._contentLengthMs=e,this.sort(),this.updateIndex())},enumerable:!0,configurable:!0}),e.prototype.isUsingStreamingFromMessageServer=function(){return this._useStreamingFromMessageServer},e.prototype.isCompletedPreparationForSort=function(){return this._completedPreparationForSort},e.prototype.completedPreparationForSort=function(){this._completedPreparationForSort=!0,this.sort(),this.updateIndex()},e.prototype.add=function(e){Array.prototype.push.apply(this.chatList,e),this._completedPreparationForSort&&(this.sort(),this.updateIndex())},e.prototype.remove=function(e){var t=this,n=!1;e.forEach((function(e){var r=t.chatList.indexOf(e);if(!(r<0))if(t.chatList.splice(r,1),t.lastChatForMoving!==e)if(t.lastChatForFixed!==e)n=!0;else{t.lastChatForFixed=null,t.lastChatIndexForFixed=-1;for(i=r-1;i>=0;i--){o=t.chatList[i];if(ae.definedAsFixed(o.position)){t.lastChatForFixed=o,t.lastChatIndexForFixed=i;break}}}else{t.lastChatForMoving=null,t.lastChatIndexForMoving=-1;for(var i=r-1;i>=0;i--){var o=t.chatList[i];if(!ae.definedAsFixed(o.position)){t.lastChatForMoving=o,t.lastChatIndexForMoving=i;break}}}})),n&&this.updateIndex()},e.prototype.change=function(e,t){var n=this.chatList.indexOf(e);this.chatList.splice(n,1,t),this.lastChatForMoving===e&&(this.lastChatForMoving=t),this.lastChatForFixed===e&&(this.lastChatForFixed=t),this._completedPreparationForSort&&(this.sort(),this.updateIndex())},e.prototype.sort=function(){var e=this._contentLengthMs!==c.NO_CONTENT_LENGTH?this._contentLengthMs:void 0,t=this.isUsingStreamingFromMessageServer();!t||-1===this.lastChatIndexForMoving&&-1===this.lastChatIndexForFixed?this._sortAll(e):this._sortOnlyNotStaged(e),t||this._event("checkRefresh").emit(pe.getMinimumModifiedStagingTimeMs(this.chatList,e))},e.prototype._sortOnlyNotStaged=function(e){if(!this.isReachedFinalIndex()){var t=Math.max(this.lastChatIndexForFixed,this.lastChatIndexForMoving)+1,n=this.chatList.splice(t);pe.sort(n,e),Array.prototype.push.apply(this.chatList,n)}},e.prototype._sortAll=function(e){pe.sort(this.chatList,e)},e.prototype.updateIndex=function(){s.isDefined(this.lastChatForMoving)&&!s.isNull(this.lastChatForMoving)?this.lastChatIndexForMoving=this.chatList.indexOf(this.lastChatForMoving):this.lastChatIndexForMoving=-1,s.isDefined(this.lastChatForFixed)&&!s.isNull(this.lastChatForFixed)?this.lastChatIndexForFixed=this.chatList.indexOf(this.lastChatForFixed):this.lastChatIndexForFixed=-1},e.prototype.getStagingChatList=function(e){if(this.isReachedFinalIndex())return[];for(var t,n,r=this.chatList.length,i=this.contentLengthMs!==c.NO_CONTENT_LENGTH?this.contentLengthMs:void 0,o=[],a=-1,u=-1,l=(this.lastChatIndexForMoving<this.lastChatIndexForFixed?this.lastChatIndexForMoving:this.lastChatIndexForFixed)+1;l<r;l++)if(t=this.chatList[l],ae.definedAsFixed(t.position)){if(l>=this.lastChatIndexForFixed+1){if(!((n=fe.getVposInfoForFixed(t,i)).vStagingMs<=e&&e<n.vRemoveMs)){if(fe.getVposInfoForMoving(t,i).vStagingMs<=e)continue;break}o.push(t),u=l}}else if(l>=this.lastChatIndexForMoving+1)if((n=fe.getVposInfoForMoving(t,i)).vStagingMs<=e&&e<n.vRemoveMs)o.push(t),a=l;else if(t.vposMs>e)break;return s.isEmptyArray(o)||(-1!==a&&(this.lastChatIndexForMoving=a,this.lastChatForMoving=this.chatList[a]),-1!==u&&(this.lastChatIndexForFixed=u,this.lastChatForFixed=this.chatList[u])),o},e.prototype.isReachedFinalIndex=function(){var e=this.chatList.length;return 0===e||this._completedPreparationForSort&&(this.lastChatIndexForMoving>=e-1||this.lastChatIndexForFixed>=e-1)},e.prototype.dispose=function(){this.chatList.length=0,this._event().offAll()},e.prototype.event=function(e){return this._event(e)},e.prototype._event=function(e){var t=this;return e?{on:function(n){return t.eventEmitter.on(e,n)&&t},once:function(n){return t.eventEmitter.once(e,n)&&t},off:function(n){return t.eventEmitter.removeListener(e,n)&&t},offAll:function(){return t.eventEmitter.removeAllListeners(e)&&t},emit:function(n){return t.eventEmitter.emit(e,n)}}:{offAll:function(){return t.eventEmitter.removeAllListeners()&&t}}},e}(),me="#000000",ge=1,ye="#FFFFFF",_e='""',be=600,Ee="alphabetic",Se=2,Te="round",we={normalColorArray:[0,0,0],inverseColorArray:[255,255,255],alpha:.4,defaultThickness:3},Oe=/\r\n|\r|\n/,Re=-1,Ae=function(){function e(){this._body=new(r().Container),this.borderLineObject=new(r().Graphics),this.textObject=null,this._text="",this.fontInfo=null,this.borderLineInfo=null,this.measuredSizeInfo=null,this.adjusterCharacterSizeInfo=null,this._lineCount=0,this.maximumWidthLine=Re,this.generated=!1}return Object.defineProperty(e,"context",{get:function(){return e._context||(e._context=new(r().CanvasRenderer)(0,0).context),e._context},enumerable:!0,configurable:!0}),e.prototype.reset=function(){var e=this._body.parent;s.isNull(e)||e.removeChild(this._body),this._body.removeChildren(),this.fontInfo=null,this.borderLineInfo=null,this.borderLineObject.clear(),this.measuredSizeInfo=null,this.adjusterCharacterSizeInfo=null,this.textObject&&(this.textObject.destroy(),this.textObject=null),this._text="",this._lineCount=0,this.maximumWidthLine=Re,this._body.x=0,this._body.y=0,this._body.width=0,this._body.height=0,this._body.visible=!0,this._body.alpha=1,this.generated=!1},e.prototype.generateText=function(t,n,i){void 0===i&&(i={visible:!1}),this.generated&&this.reset(),this._text=t,this.fontInfo=e.convertUseFontInfo(n),this.borderLineInfo=i,this._lineCount=e.getLineCount(t),this.adjusterCharacterSizeInfo=e.getAdjusterCharacterSizeInfo(this.fontInfo.characterSize);var o=this.adjusterCharacterSizeInfo.adjusterScale,a=this.adjusterCharacterSizeInfo.actualCharacterSize,s={font:this.fontInfo.weight+" "+a+"px "+this.fontInfo.family,fill:this.fontInfo.color,textBaseline:this.fontInfo.textBaseline,stroke:e.getShadowColor(this.fontInfo.color,this.fontInfo.shadowAlpha),strokeThickness:this.fontInfo.shadowThickness/o,padding:.5*a,lineHeight:this.fontInfo.lineHeight/o,lineJoin:Te};this.textObject=new(r().Text)(e.getDisplayText(t),s),this.textObject.resolution=this.fontInfo.resolution,1!==o&&(this.textObject.scale.x=o,this.textObject.scale.y=o),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject(),this._body.addChild(this.borderLineObject),this._body.addChild(this.textObject),this.generated=!0},e.prototype.updateText=function(t){this.generated&&(this._text=t,this.textObject.text=e.getDisplayText(t),this._lineCount=e.getLineCount(t),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject())},e.prototype.resize=function(t,n){if(this.generated){this.fontInfo.characterSize=t,this.fontInfo.lineHeight=n,this.adjusterCharacterSizeInfo=e.getAdjusterCharacterSizeInfo(t);var r=this.adjusterCharacterSizeInfo.adjusterScale,i=this.adjusterCharacterSizeInfo.actualCharacterSize,o=this.textObject.style,a=o.font.split(" ");a[1]=i+"px",o.font=a.join(" "),o.padding=.5*i,o.lineHeight=this.fontInfo.lineHeight/r,o.strokeThickness=this.fontInfo.shadowThickness/r,this.textObject.style=o,1!==r&&(this.textObject.scale.x=r,this.textObject.scale.y=r),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject()}},e.prototype._measure=function(t,n,r){return void 0===r&&(r=!1),r||this.generated?e.makeMeasuredSizeInfo(this.measureWidth(t),this.measureHeight(t,n),t,n):null},e.prototype.measure=function(e,t){return this._measure(e,t)},e.prototype.measureByCurrent=function(){return this._measure(this.characterSize,this.lineHeight,!0)},e.prototype.measureWidth=function(t){void 0===t&&(t=this.fontInfo.characterSize);var n=e.getAdjusterCharacterSizeInfo(t);e.context.font=this.fontInfo.weight+" "+n.actualCharacterSize+"px "+this.fontInfo.family;var r=s.isNull(this.textObject)?"":this.textObject.text;return Math.max.apply(null,r.split(Oe).map((function(t){return Math.ceil(e.context.measureText(t).width*n.adjusterScale)})))},e.prototype.measureHeight=function(e,t){return void 0===e&&(e=this.characterSize),void 0===t&&(t=this.lineHeight),this.lineCount>1?t*(this.lineCount-1)+e:e},Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return s.isNull(this.measuredSizeInfo)?0:this.measuredSizeInfo.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return s.isNull(this.measuredSizeInfo)?0:this.measuredSizeInfo.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"characterSize",{get:function(){return s.isNull(this.fontInfo)?0:this.fontInfo.characterSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return s.isNull(this.fontInfo)?0:this.fontInfo.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCount",{get:function(){return this._lineCount},enumerable:!0,configurable:!0}),e.getAdjusterCharacterSizeInfo=function(e){var t=c.SUPPORTED_MINIMUM_CHARACTER_SIZE,n=1,r=.8*e;return r<t?(r>=1&&(r=Math.floor(r)),n=r/t,r=t):r=Math.floor(r),{actualCharacterSize:r,adjusterScale:n}},e.prototype.adjustTextInnerPosition=function(){var e=this.adjusterCharacterSizeInfo.adjusterScale;this.textObject.x=(this.width-this.textObject.width)/2;var t=Math.max(r().Text.fontPropertiesCache[this.textObject.style.font].fontSize+this.textObject.style.strokeThickness,this.lineHeight)+(this.lineCount-1)*this.lineHeight;this.textObject.y=(this.height-t*e)/2+this.fontInfo.adjustBaselinePosition*this.lineHeight*e},e.prototype.borderLineSyncToTextObject=function(){if(this.borderLineObject.clear(),this.borderLineObject.visible=!!this.borderLineInfo.visible){var e=this.borderLineInfo.lineWidth||ge;this.borderLineObject.lineStyle(e,Number((this.borderLineInfo.color||me).replace("#","0x"))),this.borderLineObject.drawRect(-e,0,this.width+2*e,this.height)}},e.convertUseFontInfo=function(e){return{characterSize:e.characterSize,lineHeight:e.lineHeight,color:e.color||ye,family:e.family||_e,adjustBaselinePosition:e.adjustBaselinePosition||0,weight:e.weight||be,shadowThickness:e.shadowThickness||we.defaultThickness,shadowAlpha:e.shadowAlpha||we.alpha,textBaseline:e.textBaseline||Ee,resolution:e.resolution||Se}},e.makeMeasuredSizeInfo=function(e,t,n,r){return{width:e,height:t,characterSize:n,lineHeight:r}},e.getDisplayText=function(e){return e.indexOf("\t")>=0?e.replace(/\t/g,"窶≫�"):e},e.getLineCount=function(e){return s.isDefined(e)?e.split(Oe).length:0},e.getShadowColor=function(e,t){return"rgba("+("#000000"===e?we.inverseColorArray:we.normalColorArray).join(",")+","+t+")"},e}(),Pe=function(){function e(){this._displayObject=new Ae,this._chat=null,this._appliedPosition="",this._appliedSize="",this._appliedColor="",this._appliedFont="",this._vStartMs=0,this._vEndMs=0,this._vStagingMs=0,this._vRemoveMs=0,this._initialX=0,this._targetX=0,this._isFixed=!1,this._isBordered=!1,this._displayObjectGenerated=!1}return e.prototype.reset=function(){this._displayObject.reset(),this._chat=null,this._appliedPosition="",this._appliedSize="",this._appliedColor="",this._appliedFont="",this._vStartMs=0,this._vEndMs=0,this._vStagingMs=0,this._vRemoveMs=0,this._initialX=0,this._targetX=0,this._isFixed=!1,this._isBordered=!1,this._displayObjectGenerated=!1},e.prototype.generate=function(e){this._chat=e.chat,this._appliedPosition=e.position,this._appliedSize=e.size,this._appliedColor=e.color,this._appliedFont=e.font,this._isFixed=e.isFixed,this.generateDisplayObject(e.text,e.fontInfo,e.borderLineInfo)},e.prototype.generateDisplayObject=function(e,t,n){void 0===n&&(n={visible:!1}),this._displayObject.generateText(e,t,n),this._isBordered=n.visible,this._displayObjectGenerated=!0},e.prototype.updateText=function(e){this._displayObject.updateText(e)},e.prototype.measure=function(e,t){return this._displayObject.measure(e,t)},e.prototype.resize=function(e,t){this._displayObject.resize(e,t)},e.prototype.canStaging=function(){return!s.isNull(this._chat)&&this._displayObjectGenerated},e.prototype.setStagingParams=function(e){this._initialX=e.initialX,this._targetX=e.targetX,this._vStartMs=e.vStartMs,this._vEndMs=e.vEndMs,this._vStagingMs=e.vStagingMs,this._vRemoveMs=e.vRemoveMs,this._speed=(this._initialX-this._targetX)/(this._vEndMs-this._vStartMs)},e.prototype.isFixed=function(){return this._isFixed},e.prototype.isBordered=function(){return this._isBordered},e.prototype.setCoordinate=function(e,t){this._displayObject.body.x=e,s.isNumber(t)&&(this._displayObject.body.y=t)},e.prototype.isMatchedUser=function(e){return this._chat&&this._chat.userId&&this._chat.userId===e},Object.defineProperty(e.prototype,"chat",{get:function(){return this._chat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayObject",{get:function(){return this._displayObject.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._displayObject.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"characterSize",{get:function(){return this._displayObject.characterSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._displayObject.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCount",{get:function(){return this._displayObject.lineCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._displayObject.body.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._displayObject.body.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._displayObject.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._displayObject.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appliedPosition",{get:function(){return this._appliedPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appliedSize",{get:function(){return this._appliedSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appliedColor",{get:function(){return this._appliedColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appliedFont",{get:function(){return this._appliedFont},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vposMs",{get:function(){return this._chat&&this._chat.vposMs||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vStartMs",{get:function(){return this._vStartMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vEndMs",{get:function(){return this._vEndMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vStagingMs",{get:function(){return this._vStagingMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vRemoveMs",{get:function(){return this._vRemoveMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialX",{get:function(){return this._initialX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetX",{get:function(){return this._targetX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._displayObject.body.visible},set:function(e){this._displayObject.body.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._displayObject.body.alpha},set:function(e){e>1&&(e=1),e<0&&(e=0),this._displayObject.body.alpha=e},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},e}(),xe=function(){function e(e){void 0===e&&(e=c.DEFAULT_SLOT_COUNT),this._size=e,this.eventEmitter=new ee.EventEmitter,this.reservedList=[];for(var t=0,n=this._size;t<n;t++)this.reservedList.push(new Pe);this._stagingList=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stagingCount",{get:function(){return this._stagingList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stagingList",{get:function(){return this._stagingList},enumerable:!0,configurable:!0}),e.prototype.reset=function(){var e=this;this._stagingList.forEach((function(t){t.reset(),e.addToReserved(t)})),this._stagingList.length=0,this._event("reset").emit(void 0)},e.prototype.getReserved=function(){if(s.isEmptyArray(this.reservedList)){var e=this.getOldestStaging();return this.backToReserved(e),e}return this._getReserved()},e.prototype._getReserved=function(){return this.reservedList[this.reservedList.length-1]},e.prototype.getOldestStaging=function(){return this._stagingList.length>0?this._stagingList[0]:null},e.prototype.setToStaging=function(e){this.removeFromReserved(e),this.addToStaging(e),this._event("staged").emit(e)},e.prototype.backToReserved=function(e){e.reset(),this.removeFromStaging(e),this.addToReserved(e),this._event("reserved").emit(e)},e.prototype.addToStaging=function(e){this._stagingList.indexOf(e)>=0&&this.removeFromStaging(e),this._stagingList.push(e)},e.prototype.removeFromStaging=function(e){var t=this._stagingList.indexOf(e);t<0||this._stagingList.splice(t,1)},e.prototype.addToReserved=function(e){this.reservedList.indexOf(e)>=0&&this.removeFromReserved(e),this.reservedList.push(e)},e.prototype.removeFromReserved=function(e){var t=this.reservedList.indexOf(e);t<0||this.reservedList.splice(t,1)},e.prototype.dispose=function(){this.reservedList.length=0,this._stagingList.length=0,this._event().offAll()},e.prototype.event=function(e){return this._event(e)},e.prototype._event=function(e){var t=this;return e?{on:function(n){return t.eventEmitter.on(e,n)&&t},once:function(n){return t.eventEmitter.once(e,n)&&t},off:function(n){return t.eventEmitter.removeListener(e,n)&&t},offAll:function(){return t.eventEmitter.removeAllListeners(e)&&t},emit:function(n){return t.eventEmitter.emit(e,n)}}:{offAll:function(){return t.eventEmitter.removeAllListeners()&&t}}},e}(),Ce=Symbol("chat"),Me=function(){function e(e,t){this.body=new(r().Container),this._width=e,this._height=t}return Object.defineProperty(e.prototype,"displayObject",{get:function(){return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.body.visible},set:function(e){this.body.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.body.alpha},set:function(e){e>1&&(e=1),e<0&&(e=0),this.body.alpha=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.body.children.forEach((function(e){s.isDefined(e[Ce])&&delete e[Ce]})),this.body.removeChildren()},e.prototype.resize=function(e,t){this._width=e,this._height=t},e.prototype.appendSlot=function(e){e.displayObject[Ce]=e.chat;var t=this.body.children.findIndex((function(t){return e.chat.vpos===t[Ce].vpos?e.chat.no<t[Ce].no:e.chat.vpos<t[Ce].vpos}));t<0?this.body.addChild(e.displayObject):this.body.addChildAt(e.displayObject,t)},e.prototype.removeSlot=function(e){s.isDefined(e.displayObject[Ce])&&delete e.displayObject[Ce],this.body.removeChild(e.displayObject)},e}(),Le=function(){function e(e){this.fontFamiliesProvider=e}return e.prototype.resolve=function(e){var t=this.fontFamiliesProvider.getFamilies();return!s.isUndefined(e)&&l.a.isFontCommand(e)&&t.hasOwnProperty(e)?t[e]:t.defont},e}();(de=he||(he={})).ALPHA_BY_COMMANDS=[{commands:"_live",alpha:.5}],de.resolve=function(e){if(s.isDefined(e.alpha)&&!isNaN(e.alpha))return e.alpha;var t=s.isDefined(e.commands)?function(e){for(var t=NaN,n=0,r=de.ALPHA_BY_COMMANDS.length;n<r;n++)if(e.indexOf(de.ALPHA_BY_COMMANDS[n].commands)>=0){t=de.ALPHA_BY_COMMANDS[n].alpha;break}return t}(e.commands):NaN;return isNaN(t)?1:t};var ke,Ie=he,De={width:4,height:3};!function(e){e.getBaseSize=function(e,t){return e/t>=De.width/De.height?{width:Math.ceil(t*(De.width/De.height)),height:Math.ceil(t)}:{width:Math.ceil(e),height:Math.ceil(t)}}}(ke||(ke={}));var Ne,Fe=ke,Ue=200;!function(e){function t(e,t,n){return void 0===n&&(n=!1),n?e.targetX+(e.initialX-e.targetX)*((t-e.vStartMs)/(e.vEndMs-e.vStartMs)):e.initialX+(e.targetX-e.initialX)*((t-e.vStartMs)/(e.vEndMs-e.vStartMs))}e.getXForMoving=t,e.getStagingY=function(e,n,r){var i,o,a,s=e.appliedPosition;if(e.height>=r.renderAreaRectangle.height)return s===l.a.POSITIONS.shita?r.renderAreaRectangle.y+r.renderAreaRectangle.height-e.height:s===l.a.POSITIONS.ue?r.renderAreaRectangle.y:r.renderAreaRectangle.y-(e.height-r.renderAreaRectangle.height)/2;var u=!1;s===l.a.POSITIONS.shita?(i=r.renderAreaRectangle.y+r.renderAreaRectangle.height-e.height,o=!1,a=r.renderAreaRectangle.y):(i=r.renderAreaRectangle.y,o=!0,a=r.renderAreaRectangle.y+r.renderAreaRectangle.height);var c,f,h=function(e,t,n){return!(n.y+n.height<e||e+t<n.y)},d=function(e,n){return e.initialX<=t(n,e.vStartMs)+n.width||t(e,n.vEndMs)<=n.targetX+n.width};do{c=!1;for(var p=0,v=n.length;p<v;p++)if(s===(f=n[p]).appliedPosition&&h(i,e.height,f)&&d(e,f)){if(ae.definedAsFixed(s)&&f.vEndMs-e.vStartMs<=Ue)continue;o?(i=f.y+f.height+.1)+e.height>=a?u=!0:c=!0:(i=f.y-e.height-.1)<=a?u=!0:c=!0;break}}while(!u&&c);return u?function(e,t){return t.renderAreaRectangle.y+Math.random()*(t.renderAreaRectangle.height-e.height)}(e,r):i},e.getStagingXInfoForMoving=function(e,t){return{initialX:t.width/2+t.baseWidth/2,targetX:t.width/2-t.baseWidth/2-e.width}},e.getStagingXInfoForFixed=function(e,t){var n=t.width/2-e.width/2;return{initialX:n,targetX:n}}}(Ne||(Ne={}));var je,Be=Ne;!function(e){function t(e,t,n,r){e.isFixed()&&!s.isNumber(r)||e.setCoordinate(Be.getXForMoving(e,t,n),r)}e.locateSlot=function(e,n,r){t(e,n,r)},e.locateSlotAtFirst=function(e,n,r,i,o){t(e,n,r,Be.getStagingY(e,i,o))}}(je||(je={}));var Ge,He=je,Ve={big:7.8,medium:11.3,small:16.6},ze={big:8.4,medium:13.1,small:21},We={big:16,medium:25.4,small:38};!function(e){function t(e,t){return t.baseHeight/Ve[e]}e.getCharacterSize=t,e.getLineHeight=function(e,n,r){void 0===r&&(r=!1);var i=t(e,n),o=ze[e];if(r){var a=We[e];return(n.baseHeight-i*(o/a))/(a-1)}return(n.baseHeight-i)/(o-1)}}(Ge||(Ge={}));var Ye,qe=Ge,Ke={ender:"ender",full:"full"},Xe={big:3,medium:5,small:7},$e=1;(Ye||(Ye={})).resizeSlotIfNeed=function(e,t){var n=e.characterSize,r=e.lineHeight,i=function(e,t){return e.chat.existCommand(Ke.full)?t.width:t.baseWidth}(e,t),o=e.width>i,a=function(e){return e.lineCount>=Xe[e.appliedSize]}(e),s=e.isFixed(),u=e.chat.existCommand(Ke.ender);if(o&&s||a&&!u){var c;if(a&&!u){var l=qe.getLineHeight(e.appliedSize,t,!0);c=e.measure(e.characterSize*(l/e.lineHeight),l)}else c=e.measure(e.characterSize,e.lineHeight);var f=(o=c.width>i)&&a&&s&&!u;if(o&&s){var h=c.characterSize,d=void 0,p=void 0;if(d=i/c.width,(c=e.measure(c.characterSize*d,c.lineHeight*d)).width>i)do{p=c.characterSize-$e,c=e.measure(p,c.lineHeight*(p/c.characterSize))}while(c.width>=i);else{var v=void 0;do{v=c,p=c.characterSize+$e,c=e.measure(p,c.lineHeight*(p/c.characterSize))}while(c.width<i);c=v}f&&(d=c.characterSize/h,c.characterSize=n*d,c.lineHeight=r*d)}e.resize(c.characterSize,c.lineHeight)}};var Je,Qe=Ye,Ze={offsetTopRatio:0,heightRatio:1},et=function(){function e(e){this._contentLengthMs=s.isDefined(e.contentLengthMs)?e.contentLengthMs:c.NO_CONTENT_LENGTH,this._resolution=s.isDefined(e.resolution)?e.resolution:c.DEFAULT_RESOLUTION,this._fontScale=1,this._reverseMoving=!1,this.stagingFilterList=[],this.updateRenderScreenInfo(e.width,e.height,Ze),this.fontInfoResolver=new Le(e.fontFamiliesProvider)}return e.prototype.updateRenderScreenInfo=function(e,t,n){var r=Fe.getBaseSize(e,t);this.renderScreenInfo={width:e,height:t,baseWidth:r.width,baseHeight:r.height,renderArea:n,renderAreaRectangle:{x:0,y:t*n.offsetTopRatio,width:e,height:t*n.heightRatio}}},e.prototype.resize=function(e,t){this.updateRenderScreenInfo(e,t,this.renderScreenInfo.renderArea)},Object.defineProperty(e.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(e){this._contentLengthMs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._resolution=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScale",{get:function(){return this._fontScale},set:function(e){this._fontScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseMoving",{get:function(){return this._reverseMoving},set:function(e){this._reverseMoving=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderArea",{get:function(){return this.renderScreenInfo.renderArea},set:function(e){this.updateRenderScreenInfo(this.renderScreenInfo.width,this.renderScreenInfo.height,e)},enumerable:!0,configurable:!0}),e.prototype.addStagingFilter=function(e,t){this.removeStagingFilter(e),this.stagingFilterList.push({name:e,filter:t})},e.prototype.removeStagingFilter=function(e){var t=this.stagingFilterList.findIndex((function(t){return t.name===e}));t>=0&&this.stagingFilterList.splice(t,1)},e.prototype.clearStagingFilter=function(){this.stagingFilterList.length=0},e.prototype.getStagingFilterNameList=function(){return this.stagingFilterList.map((function(e){return e.name}))},e.prototype.applyStagingFilters=function(e){return this._applyStagingFilters(e,{visible:!e.existCommand("invisible"),content:e.content,position:e.position,size:e.size,font:e.font,color:e.color,fontScale:this._fontScale,borderLineColor:e.borderLineColor,alpha:NaN})},e.prototype._applyStagingFilters=function(e,t){if(s.isEmptyString(e.position)&&(t.position=l.a.DEFAULT_POSITION),s.isEmptyString(e.size)&&(t.size=l.a.DEFAULT_SIZE),s.isEmptyString(e.colorCode)&&s.isEmptyString(e.colorName)&&(t.color=l.a.DEFAULT_COLOR),s.isEmptyString(e.font)&&(t.font=l.a.DEFAULT_FONT),s.isEmptyArray(this.stagingFilterList))return t;var n;n=Object.assign({},e);var r=this.stagingFilterList.reduce((function(e,t,r,i){return t.filter(n,e)}),t);return t.color!==r.color&&(r.color=l.a.resolveToColorCode(r.color)),r},e.prototype.makeStagingSlot=function(e,t,n,r,i){try{e.generate({chat:t,text:n.content,isFixed:ae.definedAsFixed(n.position),position:n.position,size:n.size,color:n.color,font:n.font,fontInfo:this.buildFontInfo({color:n.color,size:n.size,font:n.font,fontScale:n.fontScale}),borderLineInfo:this.buildBorderLineInfo(n.borderLineColor)})}catch(e){return null}if(!e.canStaging())return null;try{Qe.resizeSlotIfNeed(e,this.renderScreenInfo)}catch(e){return null}return e.alpha=Ie.resolve({alpha:n.alpha,commands:t.commands}),e.setStagingParams(this.buildStagingParams(e)),He.locateSlotAtFirst(e,i,this.reverseMoving,r,this.renderScreenInfo),e},e.prototype.buildStagingParams=function(e){return e.isFixed()?this.buildStagingParamsForFixed(e):this.buildStagingParamsForMoving(e)},e.prototype.buildStagingParamsForMoving=function(e){var t=fe.getVposInfoForMoving(e.chat,this.contentLengthMs!==c.NO_CONTENT_LENGTH?this.contentLengthMs:void 0),n=Be.getStagingXInfoForMoving(e,this.renderScreenInfo);return{initialX:n.initialX,targetX:n.targetX,vStartMs:t.vStartMs,vEndMs:t.vEndMs,vStagingMs:t.vStagingMs,vRemoveMs:t.vRemoveMs}},e.prototype.buildStagingParamsForFixed=function(e){var t=fe.getVposInfoForFixed(e.chat,this.contentLengthMs!==c.NO_CONTENT_LENGTH?this.contentLengthMs:void 0),n=Be.getStagingXInfoForFixed(e,this.renderScreenInfo);return{initialX:n.initialX,targetX:n.targetX,vStartMs:t.vStartMs,vEndMs:t.vEndMs,vStagingMs:t.vStagingMs,vRemoveMs:t.vRemoveMs}},e.prototype.buildFontInfo=function(e){var t=this.fontInfoResolver.resolve(e.font);return{characterSize:qe.getCharacterSize(e.size,this.renderScreenInfo)*e.fontScale,lineHeight:qe.getLineHeight(e.size,this.renderScreenInfo)*e.fontScale,color:e.color,family:t.family,adjustBaselinePosition:t.adjustBaselinePosition,weight:t.weight,shadowThickness:2.8,shadowAlpha:.4,resolution:this._resolution}},e.prototype.buildBorderLineInfo=function(e){return e?{visible:!0,color:e,lineWidth:1}:{visible:!1}},e.prototype.updateCommentsPosition=function(e,t){var n=this;e.forEach((function(e){He.locateSlot(e,t,n._reverseMoving)}))},e.prototype.getFinishedStagingSlotList=function(e,t){return e.filter((function(e){return e.vRemoveMs<=t}))},e.prototype.dispose=function(){this.stagingFilterList.length=0},e}(),tt=function(){function e(e){this.eventEmitter=new ee.EventEmitter,this._width=e.width,this._height=e.height,this._contentLengthMs=s.isDefined(e.contentLengthMs)?e.contentLengthMs:c.NO_CONTENT_LENGTH,this.thread=new re(Object.assign(e.threadParams,{contentLengthMs:this._contentLengthMs}),e.chatConverter),this.processor=new et({width:this._width,height:this._height,contentLengthMs:this._contentLengthMs,resolution:e.resolution,fontFamiliesProvider:e.fontFamiliesProvider}),this.stagingChatManager=new ve({contentLengthMs:this.contentLengthMs,useStreamingFromMessageServer:e.threadParams.useStreamingFromMessageServer}),this.slotRepository=new xe(e.slotCount),this.layer=new Me(this._width,this._height),this.registerThreadEvents(),this.connectLayerAndSlotRepository()}return e.prototype.registerThreadEvents=function(){var e=this;this.thread.event("startFiltering").on((function(){e.stagingChatManager.clearChatList(),e._event("needClear").emit(void 0)})),this.thread.event("filter").on((function(t){e.stagingChatManager.add(t),e._event("needUpdate").emit(void 0)})),this.thread.event("filtered").on((function(t){e.stagingChatManager.completedPreparationForSort()})),this.thread.event("added").on((function(t){e.stagingChatManager.add([t]),e._event("needRefresh").emit(void 0)})),this.thread.event("deleted").on((function(t){e.stagingChatManager.remove(t),e._event("needRefresh").emit(void 0)})),this.thread.event("updated").on((function(t){e.stagingChatManager.change(t.before,t.after),e._event("needRefresh").emit(void 0)})),this.thread.event("receivedByStreaming").on((function(t){e.stagingChatManager.add(t),e._event("needUpdate").emit(void 0)})),this.thread.event("merged").on((function(t){e.stagingChatManager.clearChatList(),e.stagingChatManager.add(t.all),e.stagingChatManager.completedPreparationForSort(),e._event("needRefresh").emit(void 0)})),this.stagingChatManager.event("checkRefresh").on((function(t){e._event("checkRefresh").emit(t)}))},e.prototype.connectLayerAndSlotRepository=function(){var e=this;this.slotRepository.event("staged").on((function(t){e.layer.appendSlot(t)})),this.slotRepository.event("reserved").on((function(t){e.layer.removeSlot(t)})),this.slotRepository.event("reset").on((function(){e.layer.clear()}))},Object.defineProperty(e.prototype,"slotCount",{get:function(){return this.slotRepository.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayObject",{get:function(){return this.layer.displayObject},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(e){this.stagingChatManager.contentLengthMs=e,this.processor.contentLengthMs=e,this._contentLengthMs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this.processor.resolution},set:function(e){this.processor.resolution=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.layer.visible},set:function(e){this.layer.visible!==e&&(this.layer.visible=e,this._event("needRedraw").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.layer.alpha},set:function(e){e>1&&(e=1),e<0&&(e=0),this.layer.alpha!==e&&(this.layer.alpha=e,this._event("needRedraw").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScale",{get:function(){return this.processor.fontScale},set:function(e){this.processor.fontScale!==e&&(this.processor.fontScale=e,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseMoving",{get:function(){return this.processor.reverseMoving},set:function(e){this.processor.reverseMoving!==e&&(this.processor.reverseMoving=e,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderArea",{get:function(){return this.processor.renderArea},set:function(e){this.processor.renderArea.heightRatio===e.heightRatio&&this.processor.renderArea.offsetTopRatio===e.offsetTopRatio||(this.processor.renderArea=e,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.slotRepository.reset()},e.prototype.resize=function(e,t){this._width=e,this._height=t,this.layer.resize(e,t),this.processor.resize(e,t)},e.prototype.getThreadProcessor=function(){return this.thread},e.prototype.hasSameThreadProcessor=function(e){return e===this.thread},e.prototype.stageComment=function(e,t){var n=this.processor.applyStagingFilters(e);if(n.visible){var r=this.slotRepository.getReserved();if(!s.isNull(r)){var i=this.processor.makeStagingSlot(r,e,n,this.slotRepository.stagingList,t);s.isNull(i)?r.reset():this.slotRepository.setToStaging(i)}}},e.prototype.stageComments=function(e){var t=this;this.stagingChatManager.getStagingChatList(e).forEach((function(n){t.stageComment(n,e)}))},e.prototype.removeFinishedStagingComments=function(e){var t=this;this.processor.getFinishedStagingSlotList(this.slotRepository.stagingList,e).forEach((function(e){t.slotRepository.backToReserved(e)}))},e.prototype.updateCommentsPosition=function(e){this.processor.updateCommentsPosition(this.slotRepository.stagingList,e)},e.prototype.refreshComments=function(e){this.clear(),this.stagingChatManager.resetStagingStatus(),this.stageComments(e),this.updateCommentsPosition(e)},e.prototype.addStagingFilter=function(e,t){this.processor.addStagingFilter(e,t),this._event("needRefresh").emit(void 0)},e.prototype.removeStagingFilter=function(e){this.processor.removeStagingFilter(e),this._event("needRefresh").emit(void 0)},e.prototype.clearStagingFilter=function(){this.processor.clearStagingFilter(),this._event("needRefresh").emit(void 0)},e.prototype.getStagingFilterNameList=function(){return this.processor.getStagingFilterNameList()},e.prototype.getChatAtOffset=function(e,t){return this.slotRepository.stagingList.filter((function(n){return n.hitTest(e,t)})).map((function(e){return e.chat}))},e.prototype.getSlotInfoByChat=function(e){var t=this.slotRepository.stagingList.filter((function(t){return!!t.chat&&(t.chat.no===e.no&&t.chat.thread===e.thread&&t.chat.fork===e.fork)})).pop();return t?{x:t.x,y:t.y,width:t.width,height:t.height,speed:t.speed}:null},e.prototype.dispose=function(){this.thread.dispose(),this.stagingChatManager.dispose(),this.slotRepository.dispose(),this.processor.dispose(),this._event().offAll()},e.prototype.event=function(e){return this._event(e)},e.prototype._event=function(e){var t=this;return e?{on:function(n){return t.eventEmitter.on(e,n)&&t},once:function(n){return t.eventEmitter.once(e,n)&&t},off:function(n){return t.eventEmitter.removeListener(e,n)&&t},offAll:function(){return t.eventEmitter.removeAllListeners(e)&&t},emit:function(n){return t.eventEmitter.emit(e,n)}}:{offAll:function(){return t.eventEmitter.removeAllListeners()&&t}}},e}();!function(e){e[e.STAGE=0]="STAGE",e[e.REMOVE=1]="REMOVE",e[e.UPDATE_POSITION=2]="UPDATE_POSITION"}(Je||(Je={}));var nt,rt=function(){function e(e,t){void 0===t&&(t={}),this.parentElementId=e,this._playing=!1,this.repeatSchedulers=[],this.threadManagementSetList=[],this._processUpdatingContentTime=function(){return 0},this.redrawReserveId=null,this.refreshCommentsPositionReserveId=null,this.clearReserveId=null,this.slotCount=s.isDefined(t.slotCount)?t.slotCount:c.DEFAULT_SLOT_COUNT,this.parentElement=document.getElementById(e),this.updateCanvasSize(),this.pixiRenderer=r().autoDetectRenderer(this._canvasWidth,this._canvasHeight,{transparent:!0,antialias:!0},!(s.isDefined(t.useWebGL)?t.useWebGL:c.DEFAULT_USING_WEBGL_STATUS)),this.parentElement.appendChild(this.pixiRenderer.view),this.fitCanvasToParent(),this.updateParentElementSize(),this.stage=new(r().Container),this.fontFamiliesProvider=new W,this.setFontFamilies(t.fontFamilies),this.contentLengthMs=s.isDefined(t.contentLengthMs)?Math.floor(t.contentLengthMs):c.NO_CONTENT_LENGTH,this.resolution=s.isDefined(t.resolution)?t.resolution:c.DEFAULT_RESOLUTION,s.isDefined(t.processUpdatingContentTime)&&(this.processUpdatingContentTime=t.processUpdatingContentTime),this.stagingCommentsIntervalMs=s.isDefined(t.stagingCommentsIntervalMs)?t.stagingCommentsIntervalMs:c.AUTO_STAGING_COMMENTS_INTERVAL}return e.prototype.getChatAtOffset=function(e,t){var n=[],r=e*(this._canvasWidth/this.parentElement.clientWidth),i=t*(this._canvasHeight/this.parentElement.clientHeight);return this.threadManagementSetList.forEach((function(e){var t=e.getChatAtOffset(r,i);n=n.concat(t)})),n},e.prototype.getSlotInfoByChat=function(e){var t=this.threadManagementSetList.reduce((function(t,n){return n.getSlotInfoByChat(e)||t}),null);if(t){var n=this.parentElement.clientWidth/this._canvasWidth;return{x:t.x*n,y:t.y*n,width:t.width*n,height:t.height*n,speed:t.speed*n}}return null},Object.defineProperty(e.prototype,"element",{get:function(){return this.pixiRenderer.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.stage.visible},set:function(e){this.stage.visible=e,this.reserveRedraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.stage.alpha},set:function(e){e>1&&(e=1),e<0&&(e=0),this.stage.alpha=e,this.reserveRedraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(e){var t=this;this._contentLengthMs=s.isDefined(e)?Math.floor(e):c.NO_CONTENT_LENGTH,this.threadManagementSetList.forEach((function(e){e.contentLengthMs=t._contentLengthMs}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),e.prototype.setFont=function(e,t){this._setFont(e,t,!0)},e.prototype._setFont=function(e,t,n){this.fontFamiliesProvider.setFont(e,t),n&&this.refreshComments()},e.prototype.setFontFamilies=function(e){var t=this;void 0===e&&(e={}),Object.keys(e).forEach((function(n){t._setFont(n,e[n])}))},e.prototype.resetFont=function(e){this.fontFamiliesProvider.resetFont(e),this.refreshComments()},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.pixiRenderer.resolution},set:function(e){this.setResolution(e),this.updateCanvasDisplayOnResize()},enumerable:!0,configurable:!0}),e.prototype.setResolution=function(e){this.pixiRenderer.resolution=e,this.threadManagementSetList.forEach((function(t){t.resolution=e}))},Object.defineProperty(e.prototype,"stagingCommentsIntervalMs",{get:function(){return this._stagingCommentsIntervalMs},set:function(e){var t=s.isUndefined(this._stagingCommentsIntervalMs)||this._stagingCommentsIntervalMs!==e;this._stagingCommentsIntervalMs=e<=0||e===c.AUTO_STAGING_COMMENTS_INTERVAL?c.AUTO_STAGING_COMMENTS_INTERVAL:e,t&&this.setupUpdatingCommentsSchedule(this._stagingCommentsIntervalMs===c.AUTO_STAGING_COMMENTS_INTERVAL)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"processUpdatingContentTime",{set:function(e){this._processUpdatingContentTime=e},enumerable:!0,configurable:!0}),e.prototype.play=function(){this._playing=!0},e.prototype.pause=function(){this._playing=!1},e.prototype.draw=function(){this.pixiRenderer.render(this.stage)},e.prototype.clear=function(){this.pixiRenderer.render(new(r().Container)),this.threadManagementSetList.forEach((function(e){e.clear()}))},e.prototype.onResizedParent=function(e){s.isUndefined(e)&&this.parentWidth===this.parentElement.clientWidth&&this.parentHeight===this.parentElement.clientHeight||(s.isDefined(e)&&this.setResolution(e),this.updateCanvasSize(),this.updateCanvasDisplayOnResize(),this.updateParentElementSize())},e.prototype.updateCanvasSize=function(){this._canvasWidth=Math.ceil(c.BASE_CANVAS_HEIGHT/this.parentElement.clientHeight*this.parentElement.clientWidth),this._canvasHeight=c.BASE_CANVAS_HEIGHT},e.prototype.updateCanvasDisplayOnResize=function(){var e=this;this.clear(),this.pixiRenderer.resize(this._canvasWidth,this._canvasHeight),this.fitCanvasToParent(),this.threadManagementSetList.forEach((function(t){t.resize(e._canvasWidth,e._canvasHeight)})),this.reserveRefreshCommentsPosition()},e.prototype.fitCanvasToParent=function(){var e=this.pixiRenderer.view;e.style.position="absolute",e.style.width=this.parentElement.clientWidth+"px",e.style.height=this.parentElement.clientHeight+"px",e.style.left="0",e.style.top="0"},e.prototype.updateParentElementSize=function(){this.parentWidth=this.parentElement.clientWidth,this.parentHeight=this.parentElement.clientHeight},e.prototype.createThread=function(e,t){var n=new tt({width:this._canvasWidth,height:this._canvasHeight,threadParams:e,chatConverter:t,slotCount:this.slotCount,contentLengthMs:this._contentLengthMs,resolution:this.pixiRenderer.resolution,fontFamiliesProvider:this.fontFamiliesProvider});return this.threadManagementSetList.push(n),this.stage.addChild(n.displayObject),this.registerThreadManagementSetEvents(n),n.getThreadProcessor()},e.prototype.registerThreadManagementSetEvents=function(e){var t=this;e.event("needRedraw").on((function(){t.reserveRedraw()})),e.event("needClear").on((function(){t.reserveClear()})),e.event("needUpdate").on((function(){t._playing||t.updateComments([Je.REMOVE,Je.UPDATE_POSITION,Je.STAGE],!0)})),e.event("needRefresh").on((function(){t.reserveRefreshCommentsPosition()})),e.event("checkRefresh").on((function(e){e>=0&&e<=t.getContentTimeMs()&&t.reserveRefreshCommentsPosition()}))},e.prototype.deleteThread=function(e){var t=this.threadManagementSetList.findIndex((function(t){return t.hasSameThreadProcessor(e)}));if(!(t<0)){var n=this.threadManagementSetList[t].displayObject;n.removeChildren(),this.stage.removeChild(n),this.threadManagementSetList.splice(t,1)}},e.prototype.getThreadList=function(){return this.threadManagementSetList.map((function(e){return e.getThreadProcessor()}))},e.prototype.getThreadEffectControl=function(e){return Array.isArray(e)?this.getMultiThreadEffectControl(e):this.getSingleThreadEffectControl(e)},e.prototype.getAllThreadEffectControl=function(){return 0===this.threadManagementSetList.length?null:new Z(this.threadManagementSetList)},e.prototype.getMultiThreadEffectControl=function(e){var t=this.threadManagementSetList.filter((function(t){return e.some((function(e){return t.hasSameThreadProcessor(e)}))}));return 0===t.length?null:new Z(t)},e.prototype.getSingleThreadEffectControl=function(e){var t=this.threadManagementSetList.find((function(t){return t.hasSameThreadProcessor(e)}));return s.isUndefined(t)?null:new Q(t)},e.prototype.getContentTimeMs=function(){if(s.isNull(this._processUpdatingContentTime))return 0;var e=this._processUpdatingContentTime();return this._contentLengthMs!==c.NO_CONTENT_LENGTH&&this._contentLengthMs<e?this._contentLengthMs:Math.floor(e)},e.prototype.updateComments=function(e,t){this.updateCommentsByTarget(this.getContentTimeMs(),e,t)},e.prototype.updateCommentsByTarget=function(e,t,n){var r=this;void 0===n&&(n=!1),t.forEach((function(t){switch(t){case Je.STAGE:r.stageComments(e);break;case Je.REMOVE:r.removeFinishedStagingComments(e);break;case Je.UPDATE_POSITION:r.updateCommentsPosition(e)}})),n&&this.draw()},e.prototype.refreshComments=function(){this.refreshCommentsByTarget(this.getContentTimeMs())},e.prototype.refreshCommentsByTarget=function(e){this.threadManagementSetList.forEach((function(t){t.refreshComments(e)})),this.draw()},e.prototype.reserveRedraw=function(){var e=this;s.isNull(this.redrawReserveId)&&(this.redrawReserveId=window.setTimeout((function(){e.draw(),e.redrawReserveId=null}),0))},e.prototype.reserveRefreshCommentsPosition=function(){var e=this;s.isNull(this.refreshCommentsPositionReserveId)&&(this.refreshCommentsPositionReserveId=window.setTimeout((function(){e.refreshComments(),e.refreshCommentsPositionReserveId=null}),0))},e.prototype.reserveClear=function(){var e=this;s.isNull(this.clearReserveId)&&(this.clearReserveId=window.setTimeout((function(){e.clear(),e.clearReserveId=null}),0))},e.prototype.stageComments=function(e){this.threadManagementSetList.forEach((function(t){t.stageComments(e)}))},e.prototype.removeFinishedStagingComments=function(e){this.threadManagementSetList.forEach((function(t){t.removeFinishedStagingComments(e)}))},e.prototype.updateCommentsPosition=function(e){this.threadManagementSetList.forEach((function(t){t.updateCommentsPosition(e)}))},e.prototype.startUpdatingCommentsSchedule=function(){this.repeatSchedulers.forEach((function(e){e.start()}))},e.prototype.stopUpdatingCommentsSchedule=function(){this.repeatSchedulers.forEach((function(e){e.stop()})),this.updateComments([Je.REMOVE,Je.UPDATE_POSITION,Je.STAGE],!0)},e.prototype.setupUpdatingCommentsSchedule=function(e){var t=this;if(this.stopUpdatingCommentsSchedule(),this.repeatSchedulers.length=0,e){var n,r=0,i=!1;this.repeatSchedulers.push(new J((function(e){r=t.getContentTimeMs(),t._playing||r!==n?(i=!1,n<=r?(t.draw(),e.create((function(){t.updateCommentsByTarget(r,[Je.REMOVE,Je.UPDATE_POSITION,Je.STAGE])}),0)):t.refreshCommentsByTarget(r),n=r):i||(i=!0,t.draw())})))}else{var o,a,s=0,u=0,c=!1;this.repeatSchedulers.push(new J((function(e){s=t.getContentTimeMs(),t._playing||s!==o?(c=!1,o<=s?(t.draw(),e.create((function(){t.updateCommentsByTarget(s,[Je.UPDATE_POSITION])}),0)):t.refreshCommentsByTarget(s),o=s):c||(c=!0,t.draw())}))),this.repeatSchedulers.push(new K((function(e){u=t.getContentTimeMs(),(t._playing||u!==a)&&(a<=u&&t.updateCommentsByTarget(u,[Je.REMOVE,Je.STAGE]),a=u)}),this._stagingCommentsIntervalMs))}this.startUpdatingCommentsSchedule()},e.prototype.dispose=function(){s.isNull(this.pixiRenderer)||(this.repeatSchedulers.forEach((function(e){e.stop()})),s.isNull(this.redrawReserveId)||window.clearTimeout(this.redrawReserveId),s.isNull(this.refreshCommentsPositionReserveId)||window.clearTimeout(this.refreshCommentsPositionReserveId),s.isNull(this.clearReserveId)||window.clearTimeout(this.clearReserveId),this.clear(),this.parentElement.removeChild(this.pixiRenderer.view),this.threadManagementSetList.forEach((function(e){e.dispose()})),this.threadManagementSetList.length=0,this.pixiRenderer=null)},Object.defineProperty(e,"frameRate",{get:function(){return J.frameRate},set:function(e){e=e<=0||e===c.AUTO_FRAME_RATE?c.AUTO_FRAME_RATE:e,J.frameRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"frameSkip",{get:function(){return J.frameSkip},set:function(e){J.frameSkip=e},enumerable:!0,configurable:!0}),e.getActualFrameRate=function(){return J.actualFrameRate},e}();rt.frameRate=c.AUTO_FRAME_RATE,(nt=rt||(rt={})).AUTO_FRAME_RATE=c.AUTO_FRAME_RATE,nt.AUTO_STAGING_COMMENTS_INTERVAL=c.AUTO_STAGING_COMMENTS_INTERVAL,nt.NO_CONTENT_LENGTH=c.NO_CONTENT_LENGTH;t.default=rt},function(e,t,n){"use strict";function r(e){var t=e.videoWidth/e.videoHeight,n=e.clientWidth,r=e.clientHeight,i=n/r,o=i>t?r*t:n,a=i<t?n/t:r;return{videoWidth:e.videoWidth,videoHeight:e.videoHeight,aspectRatio:t,displayWidth:o,displayHeight:a}}function i(e){return e&&e.resource instanceof q.Hls?e.resource.playlistUrl:null}function o(){return W.HlsFmp4LivePlayer.isSupported()}function a(e,t,n){var r=!1,i=null;t.on(z.Events.BUFFER_CREATED,(function(t,n){null!=n.tracks&&"object"==typeof n.tracks&&("audio"===e&&void 0===n.tracks.audio||"video"===e&&void 0===n.tracks.video)&&(r=!0)})),t.on(z.Events.FRAG_PARSING_DATA,(function(t,n){n.type===e&&r&&null===i&&(i=n.frag.sn)})),t.on(z.Events.FRAG_CHANGED,(function(e,t){r&&null!==i&&i<=t.frag.sn&&(r=!1,i=null,n())}))}function s(){return z.isSupported()}function u(e){try{return!!e.createElement("video").canPlayType("application/x-mpegURL")}catch(e){return!1}}function c(e){Se.__nicolive_swf_external_callback=Se.__nicolive_swf_external_callback||{};var t="callback_"+Ee++;return Se.__nicolive_swf_external_callback[t]=e,be+"."+t}function l(e){Se.__nicolive_swf_external_callback&&Se.__nicolive_swf_external_callback[e]&&(Se.__nicolive_swf_external_callback[e]=null,delete Se.__nicolive_swf_external_callback[e])}function f(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];setTimeout((function(){e.apply(t)}),0)}}function h(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),n=t[0],r=t[1],i=Oe(navigator.plugins["Shockwave Flash"]||window.ActiveXObject),o=i[0],a=i[1]||0;return n<=o||r<=a}function d(e){return e instanceof q.Rtmp}function p(e,t,n){const r=e.status,i=e.errorCode||e["error-code"]||Be[e.status];return{config:t,response:{data:e.errorMessage||e["error-message"],status:r,statusText:i,headers:n,config:t}}}function v(e,t){var n="string"==typeof e?e:et.apply(void 0,e),r="string"==typeof t?t.replace(/^\?/,""):Je.stringify(t||{});if(""===r)return n;var i=n.endsWith("?")?"":e.includes("?")?"&":"?";return""+n+i+r}function m(e){return e.replace(/\/$/,"")}function g(e,t,n){var r=Ze.parse(e),i=r.search?r.search+"&":"?";return r.protocol+"//"+r.host+r.pathname+i+t+"="+n+(r.hash?r.hash:"")}function y(){var e="Edge"===ot.name?"Microsoft Edge":ot.name;return rt.filter((function(t){return t===e}))[0]||""}function _(e){return e&&e.resource instanceof q.WebRtc?e.resource.contentUri:null}function b(e,t){return Et(this,void 0,void 0,(function(){var n,r,i,o,a;return St(this,(function(s){switch(s.label){case 0:return e&&e.protocol instanceof q.DmcHls&&e.resource instanceof q.Hls&&("hlsarchive"===e.protocol.type||"hlsdvr"===e.protocol.type)?(n=e.protocol,r=n.authentication.key+"="+n.authentication.value+"&play_speed="+t,i=n.baseUri+"/"+n.type+"/"+n.authentication.key+"/"+n.streamId+"/play_control.json?"+r,[4,window.fetch(i,{method:"GET"})]):[3,3];case 1:if(!(o=s.sent()).ok)throw new Error(o.statusText);return[4,o.json()];case 2:if(!(a=s.sent().data)||!a.play_control||!a.play_control.play_speed&&0!==a.play_control.play_speed)throw new Error("unexpected response from play_control api");return[2,a.play_control];case 3:return[2,{play_speed:1}]}}))}))}function E(e,t){if(w(e))return Promise.resolve(0);var n=R(e);if(null===n)return Promise.reject(new Error("streamSyncUrl is null"));var r=Date.now();return T(n).then((function(e){if(O(e)){var n=Date.now()-r;return t+n-e.data.stream_sync.segments_metadata[0].beginning_timestamp}return wt})).catch((function(e){return Promise.resolve(wt)}))}function S(e){if(w(e))return Promise.resolve(null);var t=R(e);return null===t?Promise.reject(new Error("streamSyncUrl is null")):T(t).then((function(e){return O(e)?e.data.stream_sync.segments_metadata[0]:null})).catch((function(e){return Promise.resolve(null)}))}function T(e){return window.fetch(e).then((function(e){return e.ok?e:Promise.reject(new Error(e.statusText))})).then((function(e){return e.json()}))}function w(e){return e&&e.protocol instanceof q.DmcHls&&e.resource instanceof q.Hls&&"hlsarchive"===e.protocol.type}function O(e){return e.data&&e.data.stream_sync&&e.data.stream_sync.segments_metadata&&e.data.stream_sync.segments_metadata[0]&&"number"==typeof e.data.stream_sync.segments_metadata[0].beginning_timestamp}function R(e){if(e&&e.protocol instanceof q.DmcHls&&e.resource instanceof q.Hls){var t=e.protocol;return t.baseUri+"/hlslive/"+t.authentication.key+"/"+t.streamId+"/1/stream_sync.json"+"?"+(t.authentication.key+"="+t.authentication.value)}return null}function A(e){if(e&&e.protocol instanceof q.DmcHls&&e.resource instanceof q.Hls&&"hlslive"===e.protocol.type)return Promise.resolve(0);var t=function(e){if(e&&e.protocol instanceof q.DmcHls&&e.resource instanceof q.Hls&&("hlsarchive"===e.protocol.type||"hlsdvr"===e.protocol.type)){var t=e.protocol;return t.baseUri+"/"+t.type+"/"+t.authentication.key+"/"+t.streamId+"/stream_sync.json?"+t.authentication.key+"="+t.authentication.value}return null}(e);return null===t?Promise.reject(new Error("streamSyncUrl is null")):window.fetch(t).then((function(e){return e.json()})).then((function(e){if(e.data&&e.data.stream_sync_timeshift&&e.data.stream_sync_timeshift.segments_metadata){var t=e.data.stream_sync_timeshift.segments_metadata.pop();return t?t.beginning_timestamp:0}return 0})).catch((function(e){return Promise.resolve(0)}))}function P(e,t,n,r,i){var o=t-e.beginning_timestamp,a=function(e){return null!==e&&!isNaN(e)};return a(n)&&a(r)&&a(i)?o+(e.sequence-n-1)*r+i:o}function x(e,t,n,r,i){return null!==n&&null!==r&&null!==i?t-(e.beginning_timestamp+(n-e.sequence)*r)-i:t-e.beginning_timestamp}function C(e){var t=(new nt.UAParser).setUA(e).getBrowser().name;return!("IE"===t||"Safari"===t)}n.r(t);var M={};n.r(M),n.d(M,"Component",(function(){return ne}));var L={};n.r(L),n.d(L,"Component",(function(){return oe})),n.d(L,"findResourceUrl",(function(){return i}));var k={};n.r(k),n.d(k,"isSupported",(function(){return o})),n.d(k,"Component",(function(){return ce})),n.d(k,"PlayerOptions",(function(){return W.HlsFmp4LivePlayerOptions})),n.d(k,"DefaultPlayerOptions",(function(){return ae}));var I={};n.r(I),n.d(I,"isSupported",(function(){return s})),n.d(I,"Component",(function(){return pe})),n.d(I,"DefaultHlsJsConfig",(function(){return fe}));var D={};n.r(D),n.d(D,"isSupported",(function(){return u})),n.d(D,"Component",(function(){return _e})),n.d(D,"MIME_TYPE",(function(){return ve})),n.d(D,"RELOAD_STREAM_INTERVAL_MS",(function(){return me}));var N={};n.r(N),n.d(N,"isSupportedEnvironment",(function(){return xe})),n.d(N,"Component",(function(){return Ce})),n.d(N,"SUPPORTED_FLASH_VERSION",(function(){return Re}));var F={};n.r(F),n.d(F,"Component",(function(){return De})),n.d(F,"DELAY_MS",(function(){return Le}));var U={};n.r(U),n.d(U,"generate",(function(){return v})),n.d(U,"removeLastSlash",(function(){return m})),n.d(U,"addQueryParameter",(function(){return g}));var j={};n.r(j),n.d(j,"knownBrowsers",(function(){return rt})),n.d(j,"ua",(function(){return at})),n.d(j,"getBrowserName",(function(){return y})),n.d(j,"browserName",(function(){return st})),n.d(j,"browserVersion",(function(){return ut})),n.d(j,"EdgeMinorVersion",(function(){return lt}));var B={};n.r(B),n.d(B,"Component",(function(){return yt})),n.d(B,"findResourceUrl",(function(){return _})),n.d(B,"feedbackMap",(function(){return ft})),n.d(B,"statsDict",(function(){return ht}));var G={};n.r(G),n.d(G,"AVERAGE_BAND_WIDTH_FACTOR",(function(){return Tt})),n.d(G,"DEFAULT_DELAY_MS",(function(){return wt})),n.d(G,"AUTO_REPLAY",(function(){return Ot})),n.d(G,"playControl",(function(){return b})),n.d(G,"getCurrentDelayMs",(function(){return E})),n.d(G,"getStreamSyncSegmentsMetadata",(function(){return S})),n.d(G,"getTimeshiftStartPositionMs",(function(){return A})),n.d(G,"calcDelayMs",(function(){return P})),n.d(G,"calcDelayMsForFmp4",(function(){return x}));var H={};n.r(H),n.d(H,"DEFAULT_DELAY_MS",(function(){return Rt})),n.d(H,"AUTO_REPLAY",(function(){return At})),n.d(H,"isBrowserSupportedAvcMp3",(function(){return C}));var V,z=n(21),W=n(44),Y=n(0),q=n(13),K=n(295),X=n(19),$=n(18),J=(V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Q=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this)||this;return r._videoElement=t,r._containsSeekEvents=n,r._timerId=NaN,r._lastCurrentTime=0,r._isStalled=!1,r._pausedByUser=!0,r._pausedByVideoElement=!0,r._videoElement.addEventListener("play",r._onPlay.bind(r)),r._videoElement.addEventListener("seeked",r._onSeeked.bind(r)),r._videoElement.addEventListener("pause",r._onPause.bind(r)),r._videoElement.addEventListener("seeking",r._onSeeking.bind(r)),r._videoElement.addEventListener("ended",r._onEnded.bind(r)),r}return J(t,e),Object.defineProperty(t.prototype,"isStalled",{get:function(){return this._isStalled},enumerable:!0,configurable:!0}),t.prototype.start=function(){this._pausedByUser=!1,this._startTimer()},t.prototype.stop=function(){this._pausedByUser=!0,this._stopTimer()},t.prototype.onChangeStalled=function(e){this.on("playback-stalled-change",e)},t.prototype._onPlay=function(){this._pausedByVideoElement=!1,this._startTimer()},t.prototype._onSeeked=function(){this._containsSeekEvents||this._videoElement.paused||(this._pausedByVideoElement=!1,this._startTimer())},t.prototype._onPause=function(){this._pausedByVideoElement=!0,this._stopTimer()},t.prototype._onSeeking=function(){this._containsSeekEvents||(this._pausedByVideoElement=!0,this._stopTimer())},t.prototype._onEnded=function(){this._pausedByVideoElement=!0,this._stopTimer()},t.prototype._startTimer=function(){this._pausedByUser||this._pausedByVideoElement||!isNaN(this._timerId)||(this._lastCurrentTime=this._videoElement.currentTime,this._timerId=window.setInterval(this._check.bind(this),t.CHECK_INTERVAL_MS))},t.prototype._stopTimer=function(){clearInterval(this._timerId),this._timerId=NaN,this._updateStalled(!1)},t.prototype._check=function(){var e=this._videoElement;this._updateStalled(this._judgeStalled()),this._lastCurrentTime=e.currentTime},t.prototype._judgeStalled=function(){var e=this._videoElement;if(e.paused)return!1;if(e.ended)return!1;if(!this._containsSeekEvents&&e.seeking)return!1;var n=e.currentTime-this._lastCurrentTime,r=1/t.CHECK_INTERVAL_MS*e.playbackRate;return 0<=n&&n<r},t.prototype._updateStalled=function(e){this._isStalled!==e&&(this._isStalled=e,this.emit("playback-stalled-change",e))},t.CHECK_INTERVAL_MS=300,t}($.EventEmitter),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(){return(ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},te=n(719),ne=function(e){function t(t){var n=e.call(this,t)||this;return n.element=null,n.currentVideoDimensions=null,n.loadingReservationTimerId=NaN,n._playbackStalledObserver=null,n.isUnmounted=!1,n.onLoadStart=function(){n.element&&(n.isLoading=!0,n.props.onLoadStart&&n.props.onLoadStart())},n.onTimeUpdate=function(e){n.props.onTimeUpdate&&n.element&&n.props.onTimeUpdate(e)},n.onCanPlay=function(e){n.isLoading=!1,n.props.onCanPlay&&n.props.onCanPlay(e)},n.onCanPlayThrough=function(e){n.isLoading=!1,n.props.onCanPlayThrough&&n.props.onCanPlayThrough(e)},n.onEmptied=function(e){n.props.onEmptied&&n.props.onEmptied(e)},n.onEnded=function(e){n.props.onEnded&&n.props.onEnded(e)},n.onSuspend=function(e){n.props.onSuspend&&n.props.onSuspend(e)},n.onDurationChange=function(e){n.props.onDurationChange&&n.props.onDurationChange(e)},n.onResize=function(){if(n.element){var e=r(n.element);n.currentVideoDimensions&&!Object(X.isEqual)(n.currentVideoDimensions,e)&&(n.currentVideoDimensions=e,n.props.onChangeVideoDimensions&&n.props.onChangeVideoDimensions(e))}},n.onLoadedMetadata=function(e){n.props.onLoadedMetadata&&n.props.onLoadedMetadata(e)},n.onLoadedData=function(e){n.element&&(n.currentVideoDimensions=r(n.element),n.props.onChangeVideoDimensions&&n.props.onChangeVideoDimensions(n.currentVideoDimensions),n.props.autoplay&&!n.isPlaying()&&n.play()),n.props.onLoadedData&&n.props.onLoadedData(e),n.applyPlaybackRate(!1,!0)},n.onPlayFailed=function(e){n.element&&n.props.onPlayFailed&&n.props.onPlayFailed(e)},n.onPlay=function(e){n.isLoading=!1,n.applyPlaybackRate(!1,!0),n.props.onPlay&&n.props.onPlay(e)},n.onPlaying=function(){n.isLoading=!1},n.onPause=function(e){n.isLoading=!1,n.props.onStop&&n.props.onStop(e)},n.onClick=function(e){e.preventDefault()},n.onPlaybackStalledChange=function(e){n.isLoading=e,n.props.onStalledChange&&n.props.onStalledChange(e)},n.onError=function(e){!n.isUnmounted&&n.props.onError&&n.props.onError(e)},n.onRefUpdated=function(e){n.element=e},n.state={isLoading:!1},n}return Z(t,e),Object.defineProperty(t.prototype,"isLoading",{set:function(e){var t=this;window.clearTimeout(this.loadingReservationTimerId),e?this.loadingReservationTimerId=window.setTimeout((function(){t.updateLoadingState(!0)}),1500):this.updateLoadingState(!1)},enumerable:!0,configurable:!0}),t.prototype.load=function(){this.element&&this.element.load()},t.prototype.play=function(){var e=this,t=this.element;t&&Promise.resolve().then((function(){return t.play()})).catch((function(t){return e.onPlayFailed(t)}))},t.prototype.stop=function(){this.element&&this.element.pause()},t.prototype.getCurrentTime=function(){return this.element?this.element.currentTime:0},t.prototype.isPlaying=function(){return!!this.element&&!this.element.paused},t.prototype.getVideoTagElement=function(){return this.element},t.prototype.disposeMediaElementSource=function(){if(this.element){for(var e=this.element.querySelectorAll("source"),t=e.length;t--;)this.element.removeChild(e[t]);this.element.removeAttribute("src");try{this.element.load()}catch(e){}}},t.prototype.componentDidMount=function(){this.isUnmounted=!1,this.applyVolume(),this.applyPlaybackRate(!0,!0),this.element&&(this._playbackStalledObserver=new Q(this.element,this.generateContainsSeekEvents()),this._playbackStalledObserver.onChangeStalled(this.onPlaybackStalledChange),this._playbackStalledObserver.start())},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0,this._playbackStalledObserver&&this._playbackStalledObserver.stop(),this.disposeMediaElementSource(),this.element=null},t.prototype.componentDidUpdate=function(e,t){this.applyVolume(),this.applyPlaybackRate(!1,!1)},t.prototype.render=function(){return Y.createElement("div",{style:{width:this.props.width,height:this.props.height,position:"relative"}},this.renderNotifyResize(),this.renderLoadingImage(),this.renderVideo())},t.prototype.getRestSecOfBuffer=function(){if(!this.element)return NaN;for(var e=0,t=this.element.buffered,n=0;n<t.length;n++)e=Math.max(e,t.end(n));return e-this.element.currentTime},t.prototype.updateLoadingState=function(e){e!==this.state.isLoading&&this.setState({isLoading:e})},t.prototype.applyVolume=function(){this.element&&this.element.volume!==this.props.volume&&(this.element.volume=this.props.volume)},t.prototype.applyPlaybackRate=function(e,t){void 0===t&&(t=!1),this.element&&(t||this.element.playbackRate!==this.props.playbackRate)&&"number"==typeof this.props.playbackRate&&(e&&(this.element.defaultPlaybackRate=this.props.playbackRate),this.element.playbackRate=this.props.playbackRate)},t.prototype.renderNotifyResize=function(){return Y.createElement(K.NotifyResize,ee({},{notifyOnMount:!1,onResize:this.onResize}))},t.prototype.renderLoadingImage=function(){return this.state.isLoading?Y.createElement("div",{className:te.loadingWrapper},Y.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:te.loading,preserveAspectRatio:"xMidYMid"},Y.createElement("g",null,Y.createElement("circle",{cx:"50",cy:"20",fill:"#cccccc",r:"9",x:"43",y:"43"}),Y.createElement("circle",{cx:"71",cy:"29",fill:"#cccccc",r:"6",x:"43",y:"43"}),Y.createElement("circle",{cx:"80",cy:"50",fill:"#000000",r:"9",x:"43",y:"43"}),Y.createElement("circle",{cx:"71",cy:"71",fill:"#000000",r:"5",x:"43",y:"43"}),Y.createElement("circle",{cx:"50",cy:"80",fill:"#000000",r:"9",x:"43",y:"43"}),Y.createElement("circle",{cx:"29",cy:"71",fill:"#000000",r:"5",x:"43",y:"43"}),Y.createElement("circle",{cx:"20",cy:"50",fill:"#000000",r:"9",x:"43",y:"43"}),Y.createElement("circle",{cx:"29",cy:"29",fill:"#cccccc",r:"6",x:"43",y:"43"})))):null},t.prototype.renderVideo=function(){return Y.createElement("video",ee({},{ref:this.onRefUpdated,height:this.props.isNativePlayerDevice?"auto":this.props.height,width:this.props.isNativePlayerDevice?"auto":this.props.width,autoPlay:this.props.autoplay,controls:this.props.controls,playsInline:!0,poster:this.props.poster,preload:this.props.preload,onCanPlay:this.onCanPlay,onCanPlayThrough:this.onCanPlayThrough,onClick:this.onClick,onDurationChange:this.onDurationChange,onEmptied:this.onEmptied,onEnded:this.onEnded,onError:this.onError,onLoadedData:this.onLoadedData,onLoadedMetadata:this.onLoadedMetadata,onLoadStart:this.onLoadStart,onPause:this.onPause,onPlay:this.onPlay,onPlaying:this.onPlaying,onSuspend:this.onSuspend,onTimeUpdate:this.onTimeUpdate,onRateChange:this.props.onPlaybackRateChanged,muted:void 0!==this.props.isMuted?this.props.isMuted:this.props.volume<=0}),this.renderSource())},t.prototype.renderSource=function(){return this.props.resourceUrl&&this.props.resourceType?Y.createElement("source",{type:this.props.resourceType,src:this.props.resourceUrl}):null},t.prototype.generateContainsSeekEvents=function(){return!!this.props.observer&&(!!this.props.observer.playbackStalled&&(!!this.props.observer.playbackStalled.containsSeekEvents&&this.props.observer.playbackStalled.containsSeekEvents))},t}(Y.Component),re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.video=null,t.onRefUpdated=function(e){t.video=e},t}return re(t,e),t.prototype.load=function(){this.video&&this.video.load()},t.prototype.play=function(){this.video&&this.video.play()},t.prototype.stop=function(){this.video&&this.video.stop()},t.prototype.getCurrentTime=function(){return this.video?this.video.getCurrentTime():0},t.prototype.isPlaying=function(){return!!this.video&&this.video.isPlaying()},t.prototype.getVideoTagElement=function(){return this.video?this.video.getVideoTagElement():null},t.prototype.disposeMediaElementSource=function(){this.video&&this.video.disposeMediaElementSource()},t.prototype.render=function(){return Y.createElement(M.Component,ie({},this.props,{autoplay:this.props.autoplay,preload:this.props.preload||"none",ref:this.onRefUpdated}))},t.prototype.getRestSecOfBuffer=function(){return this.video?this.video.getRestSecOfBuffer():NaN},t}(Y.Component),ae={debug:!1,maxInitialBufferDurationSec:.5,playStartPositionFixTimeoutSec:.2,bufferMonitorIntervalSec:.2,bufferLowThresholdSec:.2,bufferFillThresholdSec:.3,bufferStallThresholdSec:2,bufferStuckThresholdCount:3,maximumDelaySec:2,bufferSkipRemainSec:.5,statsHistoryLimit:50,abrNetworkBandwidthHistorySize:5,essentialDataLoadRetry:5},se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hlsVideo=null,t.fmp4Player=null,t.play=function(){t.hlsVideo&&t.hlsVideo.play()},t.onRefUpdated=function(e){t.hlsVideo=e},t.onMediaPlaylistSwitched=function(e){if(t.fmp4Player){var n=t.fmp4Player.getMediaPlaylistBandwidths();n&&n[e]&&t.props.hlsFmp4PlayerOnMediaPlaylistSwitched&&t.props.hlsFmp4PlayerOnMediaPlaylistSwitched(n[e])}},t}return se(t,e),t.prototype.load=function(){this.hlsVideo&&this.hlsVideo.load()},t.prototype.stop=function(){this.hlsVideo&&this.hlsVideo.stop()},t.prototype.getCurrentTime=function(){return this.hlsVideo?this.hlsVideo.getCurrentTime():0},t.prototype.isPlaying=function(){return!!this.hlsVideo&&this.hlsVideo.isPlaying()},t.prototype.getVideoTagElement=function(){return this.hlsVideo?this.hlsVideo.getVideoTagElement():null},t.prototype.disposeMediaElementSource=function(){this.hlsVideo&&this.hlsVideo.disposeMediaElementSource()},t.prototype.replay=function(){this.clearFmp4Player(),this.initializeHlsFmp4Player()},t.prototype.startLoad=function(e){var t=i(this.props.edgeStream);this.fmp4Player&&t&&this.fmp4Player.load(t)},t.prototype.stopLoad=function(){this.fmp4Player&&this.clearFmp4Player()},t.prototype.getFirstMediaSegmentId=function(){return this.fmp4Player&&this.fmp4Player.getFirstMediaSegmentId()?this.fmp4Player.getFirstMediaSegmentId():null},t.prototype.componentDidMount=function(){this.initializeHlsFmp4Player()},t.prototype.componentWillUnmount=function(){this.fmp4Player&&this.fmp4Player.destroy(),this.fmp4Player=null},t.prototype.componentDidUpdate=function(e,t){var n=i(this.props.edgeStream);n!==i(e.edgeStream)&&(this.clearFmp4Player(),n&&this.initializeHlsFmp4Player())},t.prototype.render=function(){return Y.createElement(oe,ue({},this.props,{resourceType:"",resourceUrl:"",ref:this.onRefUpdated}))},t.prototype.getRestSecOfBuffer=function(){return this.fmp4Player?this.fmp4Player.getRestSecOfBuffer():NaN},t.prototype.initializeHlsFmp4Player=function(){if(this.fmp4Player=new W.HlsFmp4LivePlayer(this.props.hlsFmp4PlayerOptions),this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.PLAYABLE,this.props.hlsFmp4PlayerOnPlayable?this.props.hlsFmp4PlayerOnPlayable:this.play),this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.ERROR,this.props.hlsFmp4PlayerOnError),this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.FATAL,this.props.hlsFmp4PlayerOnFatal),this.props.hlsFmp4PlayerOnBufferStalled&&this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.BUFFER_STALLED,this.props.hlsFmp4PlayerOnBufferStalled),this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.MEDIA_PLAYLIST_SWITCHED,this.onMediaPlaylistSwitched),this.props.hlsFmp4PlayerOnBufferMonitored&&this.fmp4Player.on(W.HlsFmp4LivePlayerEvents.BUFFER_MONITORED,this.props.hlsFmp4PlayerOnBufferMonitored),this.hlsVideo){var e=i(this.props.edgeStream),t=this.hlsVideo.getVideoTagElement();e&&t&&(this.fmp4Player.load(e),this.fmp4Player.attach(t))}},t.prototype.clearFmp4Player=function(){this.fmp4Player&&this.fmp4Player.destroy()},t}(Y.Component),le=n(52),fe={manifestLoadingMaxRetry:5,manifestLoadingRetryDelay:1e3,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetryTimeOut:64e3,levelLoadingMaxRetry:5,levelLoadingRetryDelay:1e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetryTimeOut:64e3,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingTimeOut:6e5,fragLoadingMaxRetryTimeOut:64e3},he=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),de=function(){return(de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hlsVideo=null,t.hlsJs=null,t.isHlsJsBufferStalled=!1,t.hlsFragmentSequenceNb=0,t.lastCurrentTimeAtRecoverMediaError=null,t.onRefUpdated=function(e){t.hlsVideo=e},t}return he(t,e),t.prototype.load=function(){this.hlsVideo&&this.hlsVideo.load()},t.prototype.play=function(){this.hlsVideo&&this.hlsVideo.play()},t.prototype.stop=function(){this.hlsVideo&&this.hlsVideo.stop()},t.prototype.getCurrentTime=function(){return this.hlsVideo?this.hlsVideo.getCurrentTime():0},t.prototype.isPlaying=function(){return!!this.hlsVideo&&this.hlsVideo.isPlaying()},t.prototype.getVideoTagElement=function(){return this.hlsVideo?this.hlsVideo.getVideoTagElement():null},t.prototype.disposeMediaElementSource=function(){this.hlsVideo&&this.hlsVideo.disposeMediaElementSource()},t.prototype.replay=function(){this.clearHlsJs(),this.initializeHlsJs(),this.play(),this.props.hlsJsOnReplay&&this.props.hlsJsOnReplay()},t.prototype.flushBuffer=function(e,t){(void 0===e&&(e=0),void 0===t&&(t=Number.POSITIVE_INFINITY),this.hlsJs)&&this.hlsJs.trigger(z.Events.BUFFER_FLUSHING,{startOffset:e,endOffset:t})},t.prototype.startLoad=function(e){this.hlsJs&&this.hlsJs.startLoad(e)},t.prototype.stopLoad=function(){this.hlsJs&&this.hlsJs.stopLoad()},t.prototype.componentDidMount=function(){this.initializeHlsJs()},t.prototype.componentWillUnmount=function(){this.hlsJs&&this.hlsJs.destroy(),this.hlsVideo=null},t.prototype.componentDidUpdate=function(e,t){var n=i(this.props.edgeStream);n!==i(e.edgeStream)&&(this.clearHlsJs(),n&&this.initializeHlsJs())},t.prototype.render=function(){return Y.createElement(oe,de({},this.props,{resourceType:"",resourceUrl:"",ref:this.onRefUpdated}))},t.prototype.getRestSecOfBuffer=function(){return this.hlsVideo?this.hlsVideo.getRestSecOfBuffer():NaN},t.prototype.initializeHlsJs=function(){var e,t,n=this;if(this.isHlsJsBufferStalled=!1,this.hlsFragmentSequenceNb=0,this.hlsJs=new z(this.props.hlsJsConfig||fe),window.__LiveVideoComponent__={hlsJs:this.hlsJs},this.hlsJs.on(z.Events.ERROR,(function(e,t){n.props.hlsJsOnError(e,t,n.hlsJs);var r=t.details;t.fatal||r!==z.ErrorDetails.BUFFER_STALLED_ERROR||(n.isHlsJsBufferStalled=!0)})),this.hlsJs.on(z.Events.FRAG_LOADED,(function(e,t){n.hlsFragmentSequenceNb=t.frag.sn,n.props.hlsJsOnFragLoaded&&n.props.hlsJsOnFragLoaded(t)})),this.hlsJs.on(z.Events.FRAG_BUFFERED,(function(e,t){n.props.onStatsReceive&&t.stats&&n.props.onStatsReceive(t.stats)})),this.hlsJs.on(z.Events.FRAG_CHANGED,(function(e,t){n.props.hlsJsOnFragChanged&&n.props.hlsJsOnFragChanged(t)})),this.hlsJs.on(z.Events.LEVEL_LOADED,(function(e,t){if(n.props.hlsJsOnLevelLoaded&&n.props.hlsJsOnLevelLoaded(t),n.isHlsJsBufferStalled)n.props.hlsJsOnLevelLoadedAfterBufferStall?n.props.hlsJsOnLevelLoadedAfterBufferStall():n.props.context.autoReplay&&n.replay();else{var r=0!==n.hlsFragmentSequenceNb&&0===t.details.startSN,i=t.details.startSN<=n.hlsFragmentSequenceNb&&n.hlsFragmentSequenceNb<=t.details.endSN;r&&!i&&n.replay()}})),this.hlsJs.on(z.Events.LEVEL_SWITCHED,(function(e,t){n.props.hlsJsOnLevelSwitched&&n.hlsJs&&n.props.hlsJsOnLevelSwitched(n.hlsJs.levels[t.level])})),this.hlsJs.on(z.Events.MEDIA_ATTACHED,(function(){var e=i(n.props.edgeStream);e&&n.hlsJs&&(null!==n.lastCurrentTimeAtRecoverMediaError&&n.hlsVideo?(n.hlsJs.startLoad(n.lastCurrentTimeAtRecoverMediaError),n.hlsVideo.play(),n.lastCurrentTimeAtRecoverMediaError=null):n.hlsJs.loadSource(e))})),a("audio",e=this.hlsJs,t=function(){n.hlsJs&&(n.lastCurrentTimeAtRecoverMediaError=n.hlsJs.streamController.lastCurrentTimeAtRecoverMediaError,n.hlsJs.recoverMediaError())}),a("video",e,t),this.hlsVideo){var r=this.hlsVideo.getVideoTagElement();r&&this.hlsJs.attachMedia(le.findDOMNode(r))}},t.prototype.clearHlsJs=function(){this.hlsJs&&(this.hlsJs.stopLoad(),this.hlsJs.destroy())},t}(Y.Component),ve='application/x-mpegURL; codecs="avc1"',me=5e3,ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hlsVideo=null,t.cancelReload=X.noop,t.onStalledChange=function(e){if(t.props.onStalledChange&&t.props.onStalledChange(e),t.cancelReload(),t.cancelReload=X.noop,e&&t.props.reloadOnStalled){var n=window.setInterval((function(){t.hlsVideo&&(t.hlsVideo.load(),t.hlsVideo.play())}),me);t.cancelReload=function(){return window.clearInterval(n)}}},t.onRefUpdated=function(e){t.hlsVideo=e},t}return ge(t,e),t.prototype.load=function(){this.hlsVideo&&this.hlsVideo.load()},t.prototype.play=function(){this.hlsVideo&&this.hlsVideo.play()},t.prototype.stop=function(){this.hlsVideo&&this.hlsVideo.stop()},t.prototype.getCurrentTime=function(){return this.hlsVideo?this.hlsVideo.getCurrentTime():0},t.prototype.isPlaying=function(){return!!this.hlsVideo&&this.hlsVideo.isPlaying()},t.prototype.getVideoTagElement=function(){return this.hlsVideo?this.hlsVideo.getVideoTagElement():null},t.prototype.disposeMediaElementSource=function(){this.hlsVideo&&this.hlsVideo.disposeMediaElementSource()},t.prototype.removeVideoSourceSrc=function(){var e=this.getVideoTagElement();if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)t[n].removeAttribute("src");e.load()}},t.prototype.replay=function(){this.hlsVideo&&this.hlsVideo.load(),this.play()},t.prototype.componentDidUpdate=function(e,t){if(this.hlsVideo){var n=i(this.props.edgeStream);n&&n!==i(e.edgeStream)&&this.hlsVideo.load()}},t.prototype.componentWillUnmount=function(){this.hlsVideo=null},t.prototype.render=function(){return Y.createElement(oe,ye({},this.props,{onStalledChange:this.onStalledChange,resourceType:ve,resourceUrl:i(this.props.edgeStream),ref:this.onRefUpdated}))},t.prototype.getRestSecOfBuffer=function(){return this.hlsVideo?this.hlsVideo.getRestSecOfBuffer():NaN},t}(Y.Component),be="__nicolive_swf_external_callback",Ee=0,Se=window,Te=function(e){return Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")},we=function(e){var t=-1!==e.indexOf("Gecko")&&-1!==e.indexOf("rv:"),n=e.match(/(msie|MSIE)/)||e.match(/(T|t)rident/);return t||n?"opaque":"direct"},Oe=function(e){try{return(e.description||new e("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")).match(/\d+/g).map((function(e){return parseInt(e,10)}))||[0,0]}catch(e){return[0,0,0]}},Re="11.3.0",Ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=function(){return(Pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},xe=function(){return h(Re)},Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ae(t,e),t.prototype.render=function(){return Y.createElement("object",Pe({},{type:"application/x-shockwave-flash",data:this.props.swfUrl,height:this.props.height,width:this.props.width.toString()}),Y.createElement("param",{name:"allowFullScreen",value:"false"}),Y.createElement("param",{name:"allowScriptAccess",value:"always"}),Y.createElement("param",{name:"bgColor",value:"0x000000"}),Y.createElement("param",{name:"flashvars",value:Te(this.props.flashVars)}),Y.createElement("param",{name:"movie",value:this.props.swfUrl}),Y.createElement("param",{name:"wmode",value:we(window.navigator.userAgent)}))},t}(Y.Component),Me=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),this.resolve=function(e){},this.reject=function(e){}},Le=3e3,ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(){return(Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},De=function(e){function t(t){var n=e.call(this,t)||this;return n.hasInitialized=!1,n.isPlayingVideo=!1,n.swfObject=null,n.swfReady=new Me,n.jsClientName=c({onReady:f((function(){return n.readyHandle()}))}),n.onRefUpdated=function(e){n.swfObject=e&&le.findDOMNode(e)},n.swfReady.promise.then((function(){n.hasInitialized=!0,n.setVolume(n.props.volume),n.props.onReady()})),n}return ke(t,e),t.prototype.play=function(){this.isPlayingVideo=!1,this.hasInitialized||this.props.onError(new Error("swf is not initialized."));var e=this.props.edgeStream;if(e){var t=e.resource;d(t)?""!==t.fmsUrl&&""!==t.streamName?(this.swfObject&&this.swfObject.play(t.fmsUrl,t.streamName),this.isPlayingVideo=!0):this.props.onError(new Error("url or streamname is empty.")):this.props.onError(new Error("resource is not rtmp."))}else this.props.onError(new Error("cannot load edgestream."))},t.prototype.stop=function(){this.swfObject&&this.swfObject.stop(),this.isPlayingVideo=!1},t.prototype.replay=function(){this.swfObject&&this.swfObject.stop(),this.play()},t.prototype.isPlaying=function(){return!!this.swfObject&&this.isPlayingVideo},t.prototype.componentDidMount=function(){if(!this.props.edgeStream)throw new Error("edgeStream is not defined");if(!d(this.props.edgeStream.resource))throw new Error("edgeStream is not RTMP")},t.prototype.componentDidUpdate=function(){this.hasInitialized&&this.setVolume(this.props.volume),this.props.edgeStream||(this.isPlayingVideo=!1)},t.prototype.componentWillUnmount=function(){l(this.jsClientName)},t.prototype.render=function(){return N.isSupportedEnvironment()?this.renderSwfObjectVideo():this.renderFlashInstallLink()},t.prototype.setVolume=function(e){this.swfObject&&this.swfObject.updateVolume(100*e)},t.prototype.readyHandle=function(){this.swfReady.resolve(void 0)},t.prototype.renderSwfObjectVideo=function(){return Y.createElement(N.Component,Ie({},this.props,{ref:this.onRefUpdated,flashVars:Ie(Ie({},this.props.flashVars),{jsClientName:this.jsClientName})}))},t.prototype.renderFlashInstallLink=function(){return Y.createElement("div",{className:"flash-install-link"},Y.createElement("a",{href:"https://get.adobe.com/jp/flashplayer/"},"譛譁ｰ縺ｮFlash繧偵う繝ｳ繧ｹ繝医�繝ｫ縺励※縺上□縺輔＞."))},t}(Y.Component),Ne=n(9),Fe=n(296),Ue=n.n(Fe),je=n(85),Be=n(297);const Ge="NicoResponseSchemaError",He=e=>({code:Ge,rawResponse:e}),Ve={onFulfilled:e=>{const t=e.data;if(null==t.meta)throw He(e);if(function(e){return 200!==e.meta.status}(t))throw p(t.meta,e.config,e.headers);return Object.assign(e,{data:t.data})},onRejected:e=>{if(e.response){const t=e.response.data;throw null==t.meta?He(e.response):p(t.meta,e.config,e.response.headers)}throw e}},ze={onFulfilled:e=>e,onRejected:e=>{throw e.response?e:function(e){return e.code===Ge}(e)?(e.response=e.rawResponse,e):(e.response={status:NaN,statusText:e.name,data:e.message,headers:void 0,config:e.config},e)}},We=e=>{if(!("string"==typeof e||e instanceof String))return e;{const t=e.trim();try{return JSON.parse(t)}catch(e){return t}}};class Ye{constructor(e={},t=[]){this.axios=Ue.a.create(Object.assign({},e,{transformResponse:We}));for(const e of t)null!=e.onRequest&&this.axios.interceptors.request.use(e.onRequest),this.axios.interceptors.response.use(e.onFulfilled,t=>e.onRejected.call({},t,this.axios))}dispatch(e){return Object(Ne.__awaiter)(this,void 0,void 0,(function*(){try{const t=(yield e).data;return je.Either.Right(t)}catch(e){const t=e;if(t.response){const{status:e,statusText:n,data:r}=t.response;return je.Either.Left({status:e,errorCode:n,errorMessage:"string"==typeof r?r:JSON.stringify(r),rawResponse:r})}return Promise.reject(e)}}))}request(e){return this.dispatch(this.axios.request(e))}get(e,t){return this.dispatch(this.axios.get(e,t))}delete(e,t){return this.dispatch(this.axios.delete(e,t))}head(e,t){return this.dispatch(this.axios.head(e,t))}post(e,t,n){return this.dispatch(this.axios.post(e,t,n))}put(e,t,n){return this.dispatch(this.axios.put(e,t,n))}patch(e,t,n){return this.dispatch(this.axios.patch(e,t,n))}}var qe;(qe=Ye||(Ye={})).createStandardClient=(e,t={},n=[])=>new qe(Object.assign({},t,{baseURL:e}),n),qe.createNicoClient=(e="",t={})=>qe.createStandardClient(e,t,[Ve]),qe.createNicoLeftyClient=(e="",t={})=>qe.createStandardClient(e,t,[Ve,ze]);var Ke,Xe=n(38),$e=function(e){Object(Xe.c)(e)?this.state=e:this.state=Object(Xe.d)(e)};!function(e){e.updateProps=function(e,t,n){t.hasResult&&(e.result={messages:t.state.results.map((function(e){return n.result.messages(e)}))}),t.hasError&&(e.error={messages:t.state.errors.map((function(e){return n.error.messages(e)}))})}}(Ke||(Ke={}));(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(Ne.__extends)(t,e),Object.defineProperty(t.prototype,"hasError",{get:function(){return this.state.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasResult",{get:function(){return this.state.results.length>0},enumerable:!1,configurable:!0}),t.prototype.updateError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.state.errors=e},t.prototype.clearErrors=function(){this.state.errors=[]},t.prototype.updateResult=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.state.results=e},t.prototype.clearResults=function(){this.state.results=[]},Object(Ne.__decorate)([Xe.b,Object(Ne.__metadata)("design:type",Boolean),Object(Ne.__metadata)("design:paramtypes",[])],t.prototype,"hasError",null),Object(Ne.__decorate)([Xe.b,Object(Ne.__metadata)("design:type",Boolean),Object(Ne.__metadata)("design:paramtypes",[])],t.prototype,"hasResult",null),Object(Ne.__decorate)([Xe.a,Object(Ne.__metadata)("design:type",Function),Object(Ne.__metadata)("design:paramtypes",[Object]),Object(Ne.__metadata)("design:returntype",void 0)],t.prototype,"updateError",null),Object(Ne.__decorate)([Xe.a,Object(Ne.__metadata)("design:type",Function),Object(Ne.__metadata)("design:paramtypes",[]),Object(Ne.__metadata)("design:returntype",void 0)],t.prototype,"clearErrors",null),Object(Ne.__decorate)([Xe.a,Object(Ne.__metadata)("design:type",Function),Object(Ne.__metadata)("design:paramtypes",[Object]),Object(Ne.__metadata)("design:returntype",void 0)],t.prototype,"updateResult",null),Object(Ne.__decorate)([Xe.a,Object(Ne.__metadata)("design:type",Function),Object(Ne.__metadata)("design:paramtypes",[]),Object(Ne.__metadata)("design:returntype",void 0)],t.prototype,"clearResults",null)})($e),n(171),n(53);var Je=n(119),Qe=n(765),Ze=(function(){function e(t,n){var r=this;this.name=t,this.id=n,this.sessionStorageForfailOver=new Qe,this.find=function(e){var t=r.sessionStorage.getItem(r.createKey(e));return null!=t},this.get=function(e){var t;try{var n=r.sessionStorage.getItem(r.createKey(e));null!==n&&(t=JSON.parse(n))}catch(e){t=void 0}return t},this.set=function(e,t){var n=r.createKey(e),i=JSON.stringify(t);r.sessionStorage.setItem(n,i),r.localStorage.setItem(n,i)},this.remove=function(e){var t=r.createKey(e);r.sessionStorage.removeItem(t),r.localStorage.removeItem(t)},this.restore=function(){var e=r.localStorage,t=r.sessionStorage;t.clear();for(var n=0;n<e.length;++n){var i=e.key(n);if(null!==i){var o=e.getItem(i);null!==o&&t.setItem(i,o)}}},this.localStorage=e.isAvailableStorage("localStorage")?window.localStorage:e.localStorageForfailOver,this.sessionStorage=e.isAvailableStorage("sessionStorage")?window.sessionStorage:this.sessionStorageForfailOver,this.restore()}e.isAvailableStorage=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}},e.prototype.createKey=function(e){return[this.name,this.id,e].join("_")},e.localStorageForfailOver=new Qe}(),n(291),n(298),n(299)),et=n(300),tt=function(){function e(e){this.url=e,this.apiClient=Ye.createStandardClient("",{},[ze])}return e.prototype.getOffer=function(e){return this.apiClient.get(this.generateOfferUrl(e))},e.prototype.start=function(e){var t=JSON.stringify({request:"start",type:e.type,sdp:e.sdp});return this.apiClient.post(this.url,t)},e.prototype.sendFeedback=function(e){var t=e.name,n=e.currentTime,r=e.version,i=e.dateTime,o=e.framesReceived,a=e.framesDecoded,s=e.packetsReceived,u=e.packetsLost,c=JSON.stringify({request:"feedback",statistics:{name:t,version:r,date_time:i,current_video_time:n,frames_decoded:a,frames_received:o,packets_received:s,packets_lost:u}});return this.apiClient.post(this.url,c)},e.prototype.sendIceCandidate=function(e){var t=JSON.stringify({request:"send_ice_candidate",ice_candidate:e});return this.apiClient.post(this.url,t)},e.prototype.completeIceCandidate=function(){var e=JSON.stringify({request:"complete_ice_candidate"});return this.apiClient.post(this.url,e)},e.prototype.pause=function(){var e=JSON.stringify({request:"pause"});return this.apiClient.put(this.url,e)},e.prototype.resume=function(){var e=JSON.stringify({request:"resume"});return this.apiClient.put(this.url,e)},e.prototype.stop=function(){var e=JSON.stringify({request:"stop"});return this.apiClient.put(this.url,e)},e.prototype.generateOfferUrl=function(e){return e&&e>0?U.generate(this.url,"initial_bps_request="+e):this.url},e}(),nt=n(56),rt=["Microsoft Edge","Safari","Firefox","Chrome"],it=new nt.UAParser,ot=it.getBrowser(),at=it.getUA(),st=y(),ut=ot.version,ct=at.match(/Edge\/(\d+).(\d+)$/),lt=ct&&ct.length>=2&&parseInt(ct[2],10)||void 0,ft={"Microsoft Edge":{framesDecoded:{},framesReceived:{},packetsReceived:{mediaType:"audio"},packetsLost:{mediaType:"audio"}},Safari:{framesReceived:{},framesDecoded:{id:"RTCInboundRTPVideoStream"},packetsReceived:{id:"RTCInboundRTPAudioStream"},packetsLost:{id:"RTCInboundRTPAudioStream"}},Firefox:{framesDecoded:{},framesReceived:{},packetsReceived:{kind:"audio"},packetsLost:{kind:"audio"}},Chrome:{framesDecoded:{},framesReceived:{},packetsReceived:{kind:"audio"},packetsLost:{kind:"audio"}}},ht=j.browserName?ft[j.browserName]:void 0,dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(){return(pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},vt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},mt=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};if("Microsoft Edge"===j.browserName){var gt=n(745)(window,j.EdgeMinorVersion);window.RTCPeerConnection=function(e){return new gt(e)},window.RTCPeerConnection.prototype=gt.prototype}var yt=function(e){function t(t){var n=e.call(this,t)||this;return n.video=null,n.dmcApiClient=null,n.feedbackIntervalID=null,n.failCount=0,n.peerConnection=null,n.onRefUpdated=function(e){n.video=e},n}return dt(t,e),t.prototype.load=function(){this.video&&this.video.load()},t.prototype.play=function(){this.video&&this.video.play()},t.prototype.stop=function(){this.video&&this.video.stop()},t.prototype.pauseLoad=function(){return vt(this,void 0,void 0,(function(){var e=this;return mt(this,(function(t){switch(t.label){case 0:return this.dmcApiClient?[4,this.dmcApiClient.pause()]:[3,2];case 1:t.sent().cata((function(t){e.props.onPauseApiError&&e.props.onPauseApiError({status:t.status,errorMessage:JSON.stringify(t.rawResponse)})}),(function(e){return e})),t.label=2;case 2:return[2]}}))}))},t.prototype.resumeLoad=function(){return vt(this,void 0,void 0,(function(){var e=this;return mt(this,(function(t){switch(t.label){case 0:return this.dmcApiClient?[4,this.dmcApiClient.resume()]:[3,2];case 1:t.sent().cata((function(t){e.props.onResumeApiError&&e.props.onResumeApiError({status:t.status,errorMessage:JSON.stringify(t.rawResponse)})}),(function(e){return e})),t.label=2;case 2:return[2]}}))}))},t.prototype.stopLoad=function(){return vt(this,void 0,void 0,(function(){var e=this;return mt(this,(function(t){switch(t.label){case 0:return this.dmcApiClient?[4,this.dmcApiClient.stop()]:[3,2];case 1:t.sent().cata((function(t){e.props.onStopApiError&&e.props.onStopApiError({status:t.status,errorMessage:JSON.stringify(t.rawResponse)})}),(function(e){return e})),t.label=2;case 2:return[2]}}))}))},t.prototype.getCurrentTime=function(){return this.video?this.video.getCurrentTime():0},t.prototype.isPlaying=function(){return!!this.video&&this.video.isPlaying()},t.prototype.getVideoTagElement=function(){return this.video?this.video.getVideoTagElement():null},t.prototype.disposeMediaElementSource=function(){this.video&&this.video.disposeMediaElementSource()},t.prototype.componentDidMount=function(){var e=this;this.startSignalling().catch((function(t){e.props.onSignallingError&&e.props.onSignallingError(t)}))},t.prototype.componentWillUnmount=function(){this.stopFeedback(),this.peerConnection&&this.peerConnection.close()},t.prototype.componentDidUpdate=function(e,t){var n=this,r=_(this.props.edgeStream);r&&r!==_(e.edgeStream)&&this.startSignalling().catch((function(e){n.props.onSignallingError&&n.props.onSignallingError(e)}))},t.prototype.render=function(){return Y.createElement(M.Component,pt({},this.props,{autoplay:this.props.autoplay,preload:this.props.preload||"none",ref:this.onRefUpdated}))},t.prototype.getRestSecOfBuffer=function(){return NaN},t.prototype.startFeedback=function(){var e=this;this.stopFeedback(),this.feedbackIntervalID=window.setInterval((function(){return vt(e,void 0,void 0,(function(){var e,t,n=this;return mt(this,(function(r){switch(r.label){case 0:if(!this.dmcApiClient)return[3,6];e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getStats()];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),this.stopFeedback(),this.props.onGetStatsError&&this.props.onGetStatsError(t),[2];case 4:return[4,this.dmcApiClient.sendFeedback(pt(pt({},e),{name:j.browserName,version:j.browserVersion||"",dateTime:Date.now(),currentTime:this.getCurrentTime()}))];case 5:r.sent().cata((function(e){n.failCount+=1,n.props.context&&n.props.context.feedbackFailLimit&&n.failCount>=n.props.context.feedbackFailLimit&&(n.stopFeedback(),n.props.onFeedbackError&&n.props.onFeedbackError())}),(function(e){return e})),r.label=6;case 6:return[2]}}))}))}),1e3)},t.prototype.stopFeedback=function(){this.feedbackIntervalID&&(this.failCount=0,clearInterval(this.feedbackIntervalID))},t.prototype.getStats=function(){return vt(this,void 0,void 0,(function(){var e,t=this;return mt(this,(function(n){switch(n.label){case 0:if(!this.peerConnection)return[2,Promise.reject(new Error("peerConnection is empty."))];if(!this.peerConnection.getStats)throw new Error("This browser does not support getStats.");return e={framesDecoded:0,framesReceived:0,packetsReceived:0,packetsLost:0},[4,this.peerConnection.getStats()];case 1:return n.sent().forEach((function(n){ht&&Object(X.forEach)(ht,(function(r,i){var o=i,a=t.collectStats(n,o,r);null!==a&&(e[o]=Math.max(a,e[o]))}))})),[2,e]}}))}))},t.prototype.collectStats=function(e,t,n){for(var r in n)if(!(r in e)||-1===e[r].indexOf(n[r]))return 0;return t in e?e[t]:0},t.prototype.startSignalling=function(){return vt(this,void 0,void 0,(function(){var e,t=this;return mt(this,(function(n){switch(n.label){case 0:return(e=_(this.props.edgeStream))?(this.peerConnection&&this.peerConnection.close(),this.stopFeedback(),[4,this.stopLoad()]):[2,Promise.reject(new Error("contentURI is empty."))];case 1:return n.sent(),this.dmcApiClient=new tt(e),[4,this.dmcApiClient.getOffer(this.generateAbrInitialBps())];case 2:return n.sent().cata((function(e){t.props.onOfferApiError&&t.props.onOfferApiError({status:e.status,errorMessage:JSON.stringify(e.rawResponse)})}),(function(e){return vt(t,void 0,void 0,(function(){var t=this;return mt(this,(function(n){switch(n.label){case 0:return[4,this.startPeerConnection(e).catch((function(e){t.props.onSignallingError&&t.props.onSignallingError(e)}))];case 1:return n.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.startPeerConnection=function(e){return vt(this,void 0,void 0,(function(){var t,n,r,i=this;return mt(this,(function(o){switch(o.label){case 0:if(!this.dmcApiClient)return[2,Promise.reject(new Error("dmcApiClient is empty."))];o.label=1;case 1:return o.trys.push([1,7,,8]),t=this,[4,this.createNewPeerConnection()];case 2:return t.peerConnection=o.sent(),this.peerConnection?[4,this.peerConnection.setRemoteDescription(new RTCSessionDescription(e))]:[2,Promise.reject(new Error("peerConnection is empty."))];case 3:return o.sent(),[4,this.peerConnection.createAnswer()];case 4:return n=o.sent(),[4,this.peerConnection.setLocalDescription(n)];case 5:return o.sent(),[4,this.dmcApiClient.start(n)];case 6:return o.sent().cata((function(e){i.props.onStartApiError&&i.props.onStartApiError({status:e.status,errorMessage:JSON.stringify(e.rawResponse)})}),(function(e){i.startFeedback()})),[3,8];case 7:return r=o.sent(),[2,Promise.reject(r)];case 8:return[2]}}))}))},t.prototype.createNewPeerConnection=function(){return vt(this,void 0,void 0,(function(){var e,t,n=this;return mt(this,(function(r){return this.dmcApiClient?(e=this.props.context&&this.props.context.iceServers?this.props.context.iceServers:[],"ontrack"in(t=new RTCPeerConnection({iceServers:e,iceTransportPolicy:"all"}))?t.ontrack=function(e){if("video"===e.track.kind){var t=n.getVideoTagElement();t&&(t.srcObject=e.streams[0],n.play())}}:t.onaddstream=function(e){var t=n.getVideoTagElement();t&&(t.srcObject=e.stream)},t.onicecandidate=function(e){return vt(n,void 0,void 0,(function(){var t=this;return mt(this,(function(n){switch(n.label){case 0:return this.dmcApiClient?e.candidate?[3,2]:[4,this.dmcApiClient.completeIceCandidate()]:[2,Promise.reject(new Error("dmcApiClient is empty."))];case 1:return n.sent().cata((function(e){t.props.onCompleteIceCandidateApiError&&t.props.onCompleteIceCandidateApiError({status:e.status,errorMessage:JSON.stringify(e.rawResponse)})}),(function(e){return e})),[3,4];case 2:return[4,this.dmcApiClient.sendIceCandidate(e.candidate)];case 3:n.sent().cata((function(e){t.props.onSendIceCandidateApiError&&t.props.onSendIceCandidateApiError({status:e.status,errorMessage:JSON.stringify(e.rawResponse)})}),(function(e){return e})),n.label=4;case 4:return this.props.onIceCandidate&&this.props.onIceCandidate(e.candidate),[2]}}))}))},t.oniceconnectionstatechange=function(){n.props.onIceConnectionStateChange&&n.props.onIceConnectionStateChange(t.iceConnectionState)},[2,t]):[2,Promise.reject(new Error("dmcApiClient is empty."))]}))}))},t.prototype.generateAbrInitialBps=function(){if(this.props.edgeStream&&this.props.edgeStream.quality===q.StreamQuality.Abr)return this.props.context&&this.props.context.abrInitialBps?this.props.context.abrInitialBps:1e6},t}(Y.Component),_t=function(e){return u(document)||e&&s()},bt=function(e){return s()&&(e||!u(document))},Et=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},St=function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(o=2&n[0]?i.return:n[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,n[1])).done)return o;switch(i=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Tt=1.3,wt=0,Ot=!1,Rt=35e3,At=!0;n.d(t,"HlsJs",(function(){return z})),n.d(t,"HlsJsVideo",(function(){return I})),n.d(t,"HlsVideo",(function(){return L})),n.d(t,"NativeHlsVideo",(function(){return D})),n.d(t,"RtmpVideo",(function(){return F})),n.d(t,"HlsFmp4Video",(function(){return k})),n.d(t,"WebRtcVideo",(function(){return B})),n.d(t,"isHlsVideoSupported",(function(){return _t})),n.d(t,"useHlsJs",(function(){return bt})),n.d(t,"SwfObjectVideo",(function(){return N})),n.d(t,"Video",(function(){return M})),n.d(t,"addExternalCallback",(function(){return c})),n.d(t,"removeExternalCallback",(function(){return l})),n.d(t,"optimizeSwfCallback",(function(){return f})),n.d(t,"encodeFlashVars",(function(){return Te})),n.d(t,"detectBestWmode",(function(){return we})),n.d(t,"isSupportedVersion",(function(){return h})),n.d(t,"getVideoDimensions",(function(){return r})),n.d(t,"HlsDmcVideo",(function(){return G})),n.d(t,"HlsLimelightVideo",(function(){return H}))},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function s(){}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){var n=Object.create(null);return e&&h.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(h.isValidElement)(e)?t(e):e}(e)})),n}function l(e,t,n){return null!=n[t]?n[t]:e.props[t]}function f(e,t,n){var r=c(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if(Object(h.isValidElement)(a)){var s=o in t,u=o in r,c=t[o],f=Object(h.isValidElement)(c)&&!c.props.in;!u||s&&!f?u||!s||f?u&&s&&Object(h.isValidElement)(c)&&(i[o]=Object(h.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:l(a,"exit",e),enter:l(a,"enter",e)})):i[o]=Object(h.cloneElement)(a,{in:!1}):i[o]=Object(h.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:l(a,"exit",e),enter:l(a,"enter",e)})}})),i}n.r(t);n(76);var h=n(0),d=n.n(h),p=n(52),v=n.n(p),m={disabled:!1},g=d.a.createContext(null),y="unmounted",_="exited",b="entering",E="entered",S=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=_,r.appearStatus=b):i=E:i=t.unmountOnExit||t.mountOnEnter?y:_,r.state={status:i},r.nextCallback=null,r}o(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===y?{status:_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==b&&n!==E&&(t=b):n!==b&&n!==E||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=v.a.findDOMNode(this);t===b?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===_&&this.setState({status:y})},n.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context?this.context.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;!t&&!r||m.disabled?this.safeSetState({status:E},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,i),this.safeSetState({status:b},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:E},(function(){n.props.onEntered(e,i)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n&&!m.disabled?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:_},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:_},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===y)return null;var t=this.props,n=t.children,r=i(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return d.a.createElement(g.Provider,{value:null},n(e,r));var o=d.a.Children.only(n);return(d.a.createElement(g.Provider,{value:null},d.a.cloneElement(o,r)))},t}(d.a.Component);S.contextType=g,S.propTypes={},S.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:s,onEntering:s,onEntered:s,onExit:s,onExiting:s,onExited:s},S.UNMOUNTED=0,S.EXITED=1,S.ENTERING=2,S.ENTERED=3,S.EXITING=4;var T=S,w=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=a(n.className,r):n.setAttribute("class",a(n.className&&n.className.baseVal||"",r)));var n,r}))},O=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=n?"appear":"enter";t.addClass(e,r,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=n?"appear":"enter";t.removeClasses(e,r),t.addClass(e,r,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}o(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(r+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&w(e,r),i&&w(e,i),o&&w(e,o)},n.render=function(){var e=this.props,t=(e.classNames,i(e,["classNames"]));return d.a.createElement(T,r({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(d.a.Component);O.defaultProps={classNames:""},O.propTypes={};var R=O,A=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},P=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(u(u(r)));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}o(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,c(n.children,(function(e){return Object(h.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:l(e,"appear",n),enter:l(e,"enter",n),exit:l(e,"exit",n)})}))):f(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=c(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=r({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=i(e,["component","childFactory"]),o=this.state.contextValue,a=A(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?d.a.createElement(g.Provider,{value:o},a):d.a.createElement(g.Provider,{value:o},d.a.createElement(t,r,a))},t}(d.a.Component);P.propTypes={},P.defaultProps={component:"div",childFactory:function(e){return e}};var x=P,C=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}o(t,e);var n=t.prototype;return n.handleLifecycle=function(e,t,n){var r,i=this.props.children,o=d.a.Children.toArray(i)[t];o.props[e]&&(r=o.props)[e].apply(r,n),this.props[e]&&this.props[e](v.a.findDOMNode(this))},n.render=function(){var e=this.props,t=e.children,n=e.in,r=i(e,["children","in"]),o=d.a.Children.toArray(t),a=o[0],s=o[1];return delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,d.a.createElement(x,r,n?d.a.cloneElement(a,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):d.a.cloneElement(s,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(d.a.Component);C.propTypes={};var M,L,k=C,I="out-in",D="in-out",N=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},F=((M={})[I]=function(e){var t=e.current,n=e.changeState;return d.a.cloneElement(t,{in:!1,onExited:N(t,"onExited",(function(){n(b,null)}))})},M[D]=function(e){var t=e.current,n=e.changeState,r=e.children;return[t,d.a.cloneElement(r,{in:!0,onEntered:N(r,"onEntered",(function(){n(b)}))})]},M),U=((L={})[I]=function(e){var t=e.children,n=e.changeState;return d.a.cloneElement(t,{in:!0,onEntered:N(t,"onEntered",(function(){n(E,d.a.cloneElement(t,{in:!0}))}))})},L[D]=function(e){var t=e.current,n=e.children,r=e.changeState;return[d.a.cloneElement(t,{in:!1,onExited:N(t,"onExited",(function(){r(E,d.a.cloneElement(n,{in:!0}))}))}),d.a.cloneElement(n,{in:!0})]},L),j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={status:E,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}o(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===b&&e.mode===D?{status:b}:!t.current||(n=t.current,r=e.children,n===r||d.a.isValidElement(n)&&d.a.isValidElement(r)&&null!=n.key&&n.key===r.key)?{current:d.a.cloneElement(e.children,{in:!0})}:{status:"exiting"};var n,r},n.render=function(){var e,t=this.props,n=t.children,r=t.mode,i=this.state,o=i.status,a=i.current,s={children:n,current:a,changeState:this.changeState,status:o};switch(o){case b:e=U[r](s);break;case"exiting":e=F[r](s);break;case E:e=a}return d.a.createElement(g.Provider,{value:{isMounting:!this.appeared}},e)},t}(d.a.Component);j.propTypes={},j.defaultProps={mode:I};var B=j;n.d(t,"CSSTransition",(function(){return R})),n.d(t,"ReplaceTransition",(function(){return k})),n.d(t,"SwitchTransition",(function(){return B})),n.d(t,"TransitionGroup",(function(){return x})),n.d(t,"Transition",(function(){return T})),n.d(t,"config",(function(){return m}))}]);