define("modules/clean/loggers/device_type",["require","exports","tslib","modules/core/browser_detection"],(function(e,t,o,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceType=t.DeviceType=void 0,a=o.__importStar(a),(function(e){e.desktop="desktop",e.mobile="mobile",e.tablet="tablet"})(r=t.DeviceType||(t.DeviceType={})),t.getDeviceType=function(){return a.is_supported_mobile_browser()?r.mobile:a.is_tablet()?r.tablet:r.desktop}})),define("modules/clean/photos/batching_thumb_store",["require","exports","tslib","modules/clean/photos/thumb_loading/batching_thumb_loader","modules/clean/photos/thumb_loading/generic_thumb_store","modules/constants/request"],(function(e,t,o,a,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=o.__importStar(s);t.default=function(e){var t=!(!e||!e.allow_http2)&&e.allow_http2,o=s.IS_HTTP2&&t,n=o?void 0:new a.BatchingThumbLoader;return new r.GenericThumbStore(n,!o)}})),define("modules/clean/photos/thumb_loading/batching_thumb_loader",["require","exports","modules/clean/photos/batch_thumb_loader","modules/clean/photos/thumb_loading/utils"],(function(e,t,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchingThumbLoader=void 0;var r=(function(){function e(){this.batch_thumb_loader=new o.BatchThumbLoader({})}return e.prototype.get_request_id=function(){return this.batch_thumb_loader.vend_request_id()},e.prototype.load_image=function(e,t,o,a,r,s){this.batch_thumb_loader.queue_thumb(e,this._thumb_loaded.bind(this,{url:e,request_id:t,success:a,error:r,should_retry:s}),{onrequest:o,request_id:t}),window.setTimeout(this.batch_thumb_loader.flush.bind(this.batch_thumb_loader,10))},e.prototype._thumb_loaded=function(e,t){var o=e.url,r=(e.request_id,e.success),s=e.error,n=e.should_retry;t&&0===t.indexOf("data:")?r(t):a.load_individual_image(o,0,r,s,n)},e.prototype.cancel_thumb=function(e){this.batch_thumb_loader.cancel_thumb(e)},e})();t.BatchingThumbLoader=r})),define("modules/clean/react/takedown_warning",["require","exports","tslib","react","classnames","modules/constants/python","modules/core/i18n"],(function(e,t,o,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TakedownWarning=void 0,a=o.__importDefault(a),r=o.__importDefault(r);t.TakedownWarning=function(e){var t=e.takedownType;return a.default.createElement("div",{className:r.default("notify","server-success")},(function(e){return e===s.TakedownRequestTypes.DMCA?n.intl.formatMessage({id:"z8QPs2",defaultMessage:"Certain files in this folder canâ€™t be shared due to a takedown request in accordance with the DMCA. <a>Learn more</a>"},{a:function(e){return a.default.createElement("a",{target:"_top",href:"/help/210"},e)}}):n.intl.formatMessage({id:"KUyXWm",defaultMessage:"Certain files in this folder are unavailable. For more information <a>contact Dropbox support</a>."},{a:function(e){return a.default.createElement("a",{target:"_top",href:"/ticket"},e)}})})(t))},t.TakedownWarning.displayName="TakedownWarning"})),define("modules/clean/react/thumbnail",["require","exports","tslib","classnames","react","modules/clean/photos/batching_thumb_store","spectrum/file_icon/index","modules/constants/python","modules/core/uri","modules/clean/file_store/utils"],(function(e,t,o,a,r,s,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThumbnailIcon=void 0,a=o.__importDefault(a),r=o.__importDefault(r),s=o.__importDefault(s);var c=s.default(),p=(function(e){function t(t){var o=e.call(this,t)||this;return o.bindingId=null,o.handleImageError=function(){o.setState({src:null})},o.state=o.getStateForTemplateUrl(o.props.file.thumbnail_url_tmpl),o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.bindThumbStore()},t.prototype.componentWillReceiveProps=function(e){var t=e.file.thumbnail_url_tmpl;t!==this.props.file.thumbnail_url_tmpl&&this.setState(this.getStateForTemplateUrl(t))},t.prototype.componentWillUpdate=function(){this.unbindThumbStore()},t.prototype.componentDidUpdate=function(){this.bindThumbStore()},t.prototype.componentWillUnmount=function(){this.unbindThumbStore()},t.prototype.bindThumbStore=function(){var e=this;if(this.state.isLoading&&!this.bindingId){var t=this.state.url;t&&(this.bindingId=c.bind_url(t,{onSuccess:function(){e.setState({isLoading:!1,src:c.get_thumb(t)})},onError:function(){e.setState({isLoading:!1})}}))}},t.prototype.unbindThumbStore=function(){this.bindingId&&(c.unbind_url(this.bindingId),this.bindingId=null)},t.prototype.getStateForTemplateUrl=function(e){var o=null;if(!e)return{isLoading:!1,src:null};var a=t.getThumbnailUrl(e);return a&&(o=c.get_thumb(a)),{isLoading:!!a&&!o,src:o,url:a}},t.getThumbnailUrl=function(e){if(e){var t=l.URI.parse(e);return t.updateQuery("size","178x178"),t.updateQuery("size_mode",i.THUMBNAIL_SIZE_MODE.EXACT.toString()),t.toString()}},t.prototype.render=function(){var e,t=this.props,o=t.alt,s=t.file,i=t.iconSize,l=t.className,c=this.state.src;return c?(e=["icon","thumbnail-image--loaded",l],r.default.createElement("img",{alt:o,className:a.default(e),src:c,onError:this.handleImageError})):(e=["icon","thumbnail-image--failed",l],r.default.createElement(n.FileIcon,{className:a.default(e),path:u.getFilename(s),variant:i}))},t.displayName="ThumbnailIcon",t})(r.default.Component);t.ThumbnailIcon=p})),define("modules/clean/auth/common/error",["require","exports","tslib","dompurify","react"],(function(e,t,o,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthError=void 0,a=o.__importStar(a);var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.shouldComponentUpdate=function(e){return this.hasNewError(e.error)},t.prototype.hasNewError=function(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)},t.prototype.hasMatchingErrorMessage=function(e){var t,o;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(o=this.props.error)||void 0===o?void 0:o.message_text)},t.prototype.render=function(){var e=this.props.error;return e&&e.message_html?r.default.createElement("div",{className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:a.sanitize(e.message_html)}}):e&&e.message_text?r.default.createElement("div",{className:"text-input-error-wrapper"},r.default.createElement("span",{className:"error-message","aria-live":"polite","aria-atomic":"true"},e.message_text,r.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true"},e.clientTimestamp))):r.default.createElement("div",{className:"text-input-error-wrapper"})},t})((r=o.__importDefault(r)).default.Component);t.AuthError=s})),define("modules/clean/auth/common/inputs/checkbox",["require","exports","tslib","dompurify","react","classnames","modules/clean/auth/common/error","modules/clean/auth/common/utils","modules/clean/auth/common/types","dig-components/text_fields","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,o,a,r,s,n,i,l,u,c,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCheckbox=void 0,a=o.__importStar(a),r=o.__importDefault(r),s=o.__importDefault(s);var m=function(e){var t=e.label,o=e.htmlFor,s=e.unsafeLabelHTML;return t?r.default.createElement("label",{htmlFor:o,className:"checkbox_label"},r.default.createElement("span",null,t)):s?r.default.createElement("label",{htmlFor:o,className:"checkbox_label"},r.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.sanitize(s)}})):null},g=function(e,t){var o=e.name,s=e.error,n=e.label,i=e.onChange,l=e.className,g=e.checked,f=s&&(s.message_text||s.message_html);return r.default.createElement("div",{className:"auth__checkbox-row"},r.default.createElement(u.FormRow,{variant:"control"},r.default.createElement(c.Checkbox,{className:l,name:o,id:t,onChange:i,checked:g,"aria-checked":g}),r.default.createElement(m,{htmlFor:t,label:n})),f&&r.default.createElement(u.FormHelperText,{isInvalid:!0},r.default.createElement(p.UIIcon,{src:d.FailLine,size:"small"}),(null==s?void 0:s.message_html)?r.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.sanitize(s.message_html)}}):r.default.createElement("span",null,null==s?void 0:s.message_text)))},f=(function(e){function t(t){var o=e.call(this,t)||this;return o.id=i.generateId(t.name),o}return o.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,a=e.className,i=e.disabled,u=e.error,c=e.inline,p=e.label,d=e.maestroStyle,f=e.name,h=e.onChange,_=e.unsafeLabelHTML,S=e.variant;if(S===l.AuthFormVariant.DIG20)return r.default.createElement(g,o.__assign({},this.props));var b=s.default("checkbox",S,a,{"checkbox-inline":c}),E=r.default.createElement("input",{type:"checkbox",id:this.id,name:f,checked:t,onChange:h,disabled:i,"aria-checked":t});d&&(E=r.default.createElement("label",{className:"maestro_checkbox",htmlFor:this.id},E,r.default.createElement("span",null)));var y=r.default.createElement(n.AuthError,{error:u});return r.default.createElement("div",{className:b},!d&&y,E,r.default.createElement(m,{htmlFor:this.id,label:p,unsafeLabelHTML:_}),d&&y)},t})(r.default.Component);t.AuthCheckbox=f})),define("modules/clean/auth/common/inputs/text",["require","exports","tslib","classnames","react","dompurify","modules/core/i18n","classnames","modules/clean/auth/common/error","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/components/password_strength_meter","dig-components/text_fields","dig-components/icons","dig-components/icons/src","modules/clean/react/input_dig"],(function(e,t,o,a,r,s,n,i,l,u,c,p,d,m,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTextField=void 0,a=o.__importDefault(a),r=o.__importDefault(r),s=o.__importStar(s),i=o.__importDefault(i);var h=function(e){var t=e.error&&(e.error.message_html||e.error.message_text),o=a.default("text-input-input",e.className,{"input-error":!!t,"numeric-input":e.type===u.AuthTextInputType.NUMBER}),s=e.passwordStrengthProps||{},i=n.intl.formatMessage({id:"/uvN/C",defaultMessage:"Good passwords are hard to guess. Use uncommon words or inside jokes, non-standard uPPercasing, creative spelllling, and non-obvious numbers and symbols"});return r.default.createElement("div",{className:"text-input-wrapper"},e.type===u.AuthTextInputType.PASSWORD&&e.measureStrength&&r.default.createElement(p.PasswordStrengthMeter,{password:e.value||"",zxcvbnPostTti:!0,className:e.variant,bubblePosition:s.position,bubbleDescription:s.description||i,bubbleClassName:s.className}),r.default.createElement("input",{id:e.id,type:e.type,className:o,name:e.name,value:e.value,onChange:e.onChange,disabled:e.disabled,autoFocus:e.autoFocus,autoComplete:e.autoComplete?"on":"off","aria-invalid":t?"true":"false",inputMode:e.type===u.AuthTextInputType.NUMBER?"numeric":"text",onKeyDown:e.type===u.AuthTextInputType.NUMBER?function(e){8===e.keyCode||46===e.keyCode||9===e.keyCode||13===e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||144===e.keyCode||37===e.keyCode||39===e.keyCode||e.preventDefault()}:void 0}),!e.value&&r.default.createElement("label",{htmlFor:e.id},e.placeholder))},_=function(e){var t=e.disabled,o=e.name,a=e.placeholder,n=e.error,l=e.onChange,u=e.measureStrength,c=!(!n||!n.message_text&&!n.message_html);return r.default.createElement("div",{className:"auth__input-wrapper"},u?r.default.createElement(f.password,{name:"password",className:i.default("auth__password-input",{"is-invalid":!!c}),measureStrength:!0,placeholder:a,onChange:l}):r.default.createElement(d.TextInput,{disabled:t,isInvalid:!!c,name:o,value:t?a:void 0,onChange:l,placeholder:a,wrapperProps:{className:"auth__input-field"}}),c&&r.default.createElement(d.FormHelperText,{isInvalid:!0},r.default.createElement(m.UIIcon,{src:g.FailLine,size:"small"}),(null==n?void 0:n.message_html)?r.default.createElement("span",{dangerouslySetInnerHTML:{__html:s.sanitize(n.message_html)}}):r.default.createElement("span",null,null==n?void 0:n.message_text)))},S=(function(e){function t(t){var o=e.call(this,t)||this;return o.id=c.generateId(t.name),o}return o.__extends(t,e),t.prototype.render=function(){if(this.props.variant===u.AuthFormVariant.DIG20)return r.default.createElement(_,o.__assign({},this.props));var e=this.props.maestroStyle?null:this.props.className,t=a.default("text-input",this.props.variant,e),s=r.default.createElement(l.AuthError,{error:this.props.error}),n=r.default.createElement("div",{className:t},!this.props.maestroStyle&&s,r.default.createElement(h,{id:this.id,name:this.props.name,onChange:this.props.onChange,value:this.props.value,disabled:this.props.disabled,className:this.props.inputClassName,error:this.props.error,variant:this.props.variant,type:this.props.type,placeholder:this.props.placeholder,measureStrength:this.props.measureStrength,passwordStrengthProps:this.props.passwordStrengthProps,autoComplete:this.props.autoComplete||!1,autoFocus:this.props.autoFocus||!1}),this.props.maestroStyle&&s);if(!this.props.maestroStyle)return n;var i=a.default(this.props.className,{"register-form__name-field":"email"!==this.props.type&&"password"!==this.props.type,"register-form__field":"email"===this.props.type||"password"===this.props.type});return r.default.createElement("div",{className:i},this.props.label&&r.default.createElement("label",{className:"register-form__field-label",htmlFor:this.id},this.props.label),n)},t})(r.default.Component);t.AuthTextField=S})),define("modules/clean/auth/common/stats",["require","exports","tslib","modules/clean/analytics","modules/core/browser","modules/core/browser_detection","modules/core/exception","modules/clean/auth/login/types","modules/clean/metrics/index"],(function(e,t,o,a,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleUXAnalyticsLogger=t.GoogleUXAnalyticsLogger=t.EmailAuthUXAnalyticsLogger=t.AuthUXAnalyticsLogger=t.AuthAMPLogger=t.AuthType=void 0,r=o.__importStar(r),s=o.__importStar(s);var u;(function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.APPLE="apple_auth"})(u=t.AuthType||(t.AuthType={}));var c=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),p=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","user_cancelled_authorize"]);function d(e){return{url:r.get_href(),status:e.status?e.status:void 0}}function m(e){return{url:r.get_href(),remember_me:e.remember_me?e.remember_me.toString():void 0,pair_user:e.pair_user?e.pair_user.toString():void 0,err_msg:e.err_msg?e.err_msg:void 0}}function g(e,t){return e&&t.has(e)?e:"unknown"}function f(){for(var e="other",t=0,o=[[s.chrome,"chrome"],[s.edge,"edge"],[s.mozilla,"firefox"],[s.msie,"msie"],[s.safari,"safari"]];t<o.length;t++){var a=o[t],r=a[0],n=a[1];if(r){e=n;break}}return e}function h(e,t,a){void 0===a&&(a=1);try{l.getMetricsReporter().createStats({ns:"web_auth",name:e},o.__assign(o.__assign({},t),{browser:f()})).record(a)}catch(a){n.reportException({err:a,severity:n.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:o.__assign({metricName:e},t)})}}function _(e,t){a.UXAnalyticsLogger.log(e,t)}t.AuthAMPLogger={logSignupIntent:function(){h("signup/intent",{},1)},logSignupAttempt:function(e){h("signup/attempt",{authType:e},1)},logSignupResponse:function(e,t,o){"funcaptcha_response"!==o?t?h("signup/success",{authType:e},1):(h("signup/success",{authType:e},0),h("signup/failure",{authType:e,error:g(o,c)},1)):h("signup/failure",{authType:e,error:o},1)},logLoginIntent:function(e){h("login/intent",{loginType:e||"normal"},1)},logLoginAttempt:function(e,t){h("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse:function(e,t){var o=u.CREDENTIALS,a=e||"normal";if("funcaptcha_response"!==t)if(t===i.LoginResponseStatus.OK||t===i.LoginResponseStatus.TWOFACTOR)h("login/success",{authType:o,loginType:a},1);else{var r=void 0;switch(t){case i.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:r="tos_required";break;case i.LoginResponseStatus.SSO:r="sso_required";break;case i.LoginResponseStatus.TWOFACTOR_REQUIRED:r="enable_twofactor_required";break;case i.LoginResponseStatus.RATELIMIT:r="rate_limited";break;case i.LoginResponseStatus.EXPIRED:r="login_expired";break;case i.LoginResponseStatus.PASSWORD_EXPIRED:r="password_expired";break;case i.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:r="password_descryption_error";break;case i.LoginResponseStatus.ERROR:r="generic_error";break;case"form_error":r=t;break;default:r="unknown"}h("login/success",{authType:o,loginType:a},0),h("login/failure",{authType:o,loginType:a,error:r},1)}else h("login/failure",{authType:o,loginType:a,error:t},1)},logThirdPartyLoginResponse:function(e,t,o,a){var r=t||"normal";o||"tfa_required"===a?h("login/success",{authType:e,loginType:r},1):(h("login/success",{authType:e,loginType:r},0),h("login/failure",{authType:e,loginType:r,error:g(a,p)},1))},log2faResponse:function(e,t){var o=e||"normal";if(t===i.LoginResponseStatus.OK)h("2fa/success",{loginType:o},1);else{var a=void 0;switch(t){case i.LoginResponseStatus.REQUIRES_ROLE:a="requires_role";break;case i.LoginResponseStatus.EXPIRED:a="twofactor_expired";break;case i.LoginResponseStatus.INVALID_CREDENTIALS:a="invalid_credentials";break;case i.LoginResponseStatus.ERROR:a="generic_error";break;case"u2f_error":case"code_error":a=t;break;default:a="unknown"}h("2fa/success",{loginType:o},0),h("2fa/failure",{loginType:o,error:a},1)}}},t.AuthUXAnalyticsLogger={logSignupModalShown:function(e){_("signup_modal_shown",{url:r.get_href(),kind:e})},logLoginModalShown:function(e){_("login_modal_shown",{url:r.get_href(),kind:e})},logSignupModalDismissed:function(e){_("signup_modal_dismissed",{url:r.get_href(),kind:e})},logLoginModalDismissed:function(e){_("login_modal_dismissed",{url:r.get_href(),kind:e})}},t.EmailAuthUXAnalyticsLogger={logLoginStart:function(){_("email_login_start",{url:r.get_href()})},logSplitSignupContinue:function(){_("email_split_signup_continue",{url:r.get_href()})},logLoginResponse:function(e){switch(e.status){case i.LoginResponseStatus.OK:_("email_login_succeeded",d(e));break;case i.LoginResponseStatus.TWOFACTOR:_("email_login_requires_two_factor",d(e));break;case i.LoginResponseStatus.TWOFACTOR_REQUIRED:case i.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case i.LoginResponseStatus.EXPIRED:case i.LoginResponseStatus.SSO:_("email_login_redirect",d(e));break;default:_("email_login_failed",d(e))}},logLoginError:function(){_("email_login_failed",{url:r.get_href()})},logSignupStart:function(){_("email_signup_start",{url:r.get_href()})},logSignupResponse:function(){_("email_signup_succeeded",{url:r.get_href()})},logSignupError:function(){_("email_signup_failed",{url:r.get_href()})}},t.GoogleUXAnalyticsLogger={logLoginStart:function(){_("google_login_start",{url:r.get_href()})},logLoginResponse:function(e){e.success?_("google_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("google_login_requires_two_factor",m(e)):_("google_login_failed",m(e))},logSignupStart:function(){_("google_signup_start",{url:r.get_href()})},logSignupResponse:function(e){e.success?_("google_signup_succeeded",m(e)):_("google_signup_failed",m(e))}},t.AppleUXAnalyticsLogger={logLoginStart:function(){_("sia_login_start",{url:r.get_href()})},logLoginResponse:function(e){e.success?_("sia_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("sia_login_requires_two_factor",m(e)):"requires_password_on_first_link"===e.err_msg?_("sia_login_requires_password",m(e)):_("sia_login_failed",m(e))}}})),define("modules/clean/auth/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFormVariant=t.AuthButtonVariant=t.AuthTextInputType=void 0,(function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"})(t.AuthTextInputType||(t.AuthTextInputType={})),(function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"})(t.AuthButtonVariant||(t.AuthButtonVariant={})),(function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"})(t.AuthFormVariant||(t.AuthFormVariant={}))})),define("modules/clean/auth/login/2fa/authenticator_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,o,a,r,s,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator2FAForm=void 0,a=o.__importDefault(a),r=o.__importDefault(r),t.Authenticator2FAForm=function(e){var t=r.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},s.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},s.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-authenticator"},s.intl.formatMessage({id:"sufs69",defaultMessage:"Enter the code generated by your authenticator app."})),r.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:s.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&r.default.createElement(u.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},s.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/email_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types"],(function(e,t,o,a,r,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email2FAForm=void 0,a=o.__importDefault(a),r=o.__importDefault(r),t.Email2FAForm=function(e){var t=r.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},s.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-email-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},s.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-email"},s.intl.formatMessage({id:"FuPzY9",defaultMessage:"We sent a code to {email} and any devices youâ€™ve linked to this account. Enter the code to continue."},{span:function(e){return r.default.createElement("span",{className:"tfa-email"},e)},email:e.email})),r.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:s.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.inlineSubmit&&t,r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},s.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"}))))}})),define("modules/clean/auth/login/2fa/phone_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,o,a,r,s,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phone2FAForm=void 0,a=o.__importDefault(a),r=o.__importDefault(r),t.Phone2FAForm=function(e){var t=r.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},s.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return r.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&r.default.createElement("div",{className:"login-header"},s.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),r.default.createElement("div",{className:"login-info two-factor-uses-sms"},s.intl.formatMessage({id:"lWPbUP",defaultMessage:"We sent a code to your phone number ending in <span>{last_two_digits}</span>."},{span:function(e){return r.default.createElement("span",{className:"last-two-digits"},e)},last_two_digits:e.lastTwoDigits})),r.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},r.default.createElement(n.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:s.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:i.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&r.default.createElement(u.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&r.default.createElement("div",{className:"two-factor-need-help"},r.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},s.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"})),r.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},s.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/seckey_form",["require","exports","tslib","react","modules/core/i18n","modules/clean/auth/login/2fa/trust_checkbox","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite","modules/clean/static_urls"],(function(e,t,o,a,r,s,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecKey2FAForm=void 0,a=o.__importDefault(a);var c=function(){return a.default.createElement(i.Image,{src:u.static_url("/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:u.static_url("/static/images/security_keys/insert@2x-vflTxG2RJ.png"),className:"seckey-insert"})},p=function(){return a.default.createElement(i.Image,{src:u.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:u.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif"),className:"seckey-loading-status"})},d=function(e){return a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("p",null,a.default.createElement("span",{style:{fontWeight:"bold"}},r.intl.formatMessage({id:"DljPpW",defaultMessage:"Insert your security key to use it"}))," ",e.securityKeyState===n.SecurityKeyState.LOADING&&a.default.createElement(p,null),e.securityKeyState===n.SecurityKeyState.FOUND&&a.default.createElement(m,null)),r.intl.formatMessage({id:"eonxEJ",defaultMessage:"After inserting, tap your key if it has a button or gold disk."}))},m=function(){return a.default.createElement(l.Sprite,{group:"web",name:"bulletpoint-check",alt:"",className:"seckey-loading-status"})};t.SecKey2FAForm=function(e){return a.default.createElement("form",{className:"two-factor-form clearfix 2fa-seckey-form"},e.displayHeader&&a.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-u2f"},a.default.createElement(c,null),e.securityKeyState!==n.SecurityKeyState.NOT_FOUND&&a.default.createElement(d,{securityKeyState:e.securityKeyState}),a.default.createElement("div",{className:"text-input"},a.default.createElement("div",{className:"text-input-error-wrapper"})),e.securityKeyState===n.SecurityKeyState.NOT_FOUND&&a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("div",{style:{color:"red"}},a.default.createElement("span",{className:"error-msg"},e.error||r.intl.formatMessage({id:"uqQwD8",defaultMessage:"Key not found."}))),a.default.createElement("button",{className:"button-tertiary two-factor-seckey-retry",onClick:e.onRetry},r.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}))),!e.hideTrustCheckbox&&a.default.createElement(s.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),a.default.createElement("div",{className:"two-factor-use-phone-instead"},a.default.createElement("a",{href:"#",onClick:e.onChange2FA},e.secondaryTwoFactorType===n.TwoFactorType.SMS?r.intl.formatMessage({id:"cDmyI0",defaultMessage:"Send SMS instead"}):r.intl.formatMessage({id:"yzAIpy",defaultMessage:"Use mobile authenticator instead"})))))}})),define("modules/clean/auth/login/2fa/trust_checkbox",["require","exports","tslib","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/react/sprite_div","modules/clean/react/tooltip"],(function(e,t,o,a,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyTrustTooltipContent=t.TwoFactorTrustCheckbox=void 0,a=o.__importDefault(a),r=o.__importStar(r),i=o.__importDefault(i),l=o.__importStar(l);var u=function(){return a.default.createElement("div",{className:"two-factor-trusted-info"},r.is_mobile_or_tablet()?s.intl.formatMessage({id:"UkQZnd",defaultMessage:"Trusted devices will never ask you for a security code again. You should only trust this device if you trust everyone who uses it."}):s.intl.formatMessage({id:"UraGyT",defaultMessage:"Trusted computers will never ask you for a security code again. You should only trust this computer if you trust everyone who uses it."}))};t.TestOnlyTrustTooltipContent=u;var c=function(e){return a.default.createElement("div",{className:"tooltip-wrapper info-icon"},a.default.createElement(l.Tooltip,{position:l.TooltipPosition[e.position||"TOP"],tooltip_classname:"twofactor-trust-tooltip",tooltip_contents:a.default.createElement(u,null)},a.default.createElement(i.default,{group:"web",name:"info",alt:s.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),text:r.is_mobile_or_tablet()?s.intl.formatMessage({id:"+79s4f",defaultMessage:"Trust this device"}):s.intl.formatMessage({id:"Ey/8Q8",defaultMessage:"Trust this computer"}),spritePosition:"right"})))};t.TwoFactorTrustCheckbox=function(e){return a.default.createElement(n.AuthCheckbox,{className:"remember-me",name:"trusted",checked:e.checked,inline:!0,disabled:!1,maestroStyle:e.maestroStyle,onChange:e.onChange,variant:e.variant,label:a.default.createElement(c,{position:e.tooltipPosition})})}})),define("modules/clean/auth/login/api",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_as_promised_jquery","api_v2/default_user_client","modules/clean/auth/login/types","modules/clean/viewer","modules/core/exception","modules/core/i18n"],(function(e,t,o,a,r,s,n,i,l){"use strict";function u(){var e=n.Viewer.get_viewer().get_users()[0];return i.assert(null!=e,"Expect user is logged in when pairing"),new r.DefaultUserApiV2Client(e)}function c(e){var t;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"])?{status:s.LoginResponseStatus.ERROR,html_response:!1,message:e.message}:{status:s.LoginResponseStatus.ERROR,html_response:!1,message:l.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function p(e){return o.__awaiter(this,void 0,Promise,(function(){var t,a,r,s,n;return o.__generator(this,(function(o){switch(o.label){case 0:t=e.login_email,a=e.encrypted_password,i.assert(null!=t&&null!=a,"Expect login email and password not null"),r=u(),s={login_email:t,encrypted_password:a,remember_me:e.remember_me},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.ns("team").rpc("account_pair_login",s,{})];case 2:return(n=o.sent()).two_factor_request?[2,n.two_factor_request]:[2,n];case 3:return[2,c(o.sent())];case 4:return[2]}}))}))}function d(e){return o.__awaiter(this,void 0,Promise,(function(){var t,a,r,s;return o.__generator(this,(function(o){switch(o.label){case 0:t=e.checkpoint_token,a=e.code,i.assert(null!=t&&null!=a,"Expect checkpoint token and code not null"),r=u(),s={checkpoint_token:t,code:a,remember_me:e.remember_me},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.ns("team").rpc("account_pair_two_factor_login",s,{})];case 2:return[2,o.sent()];case 3:return[2,c(o.sent())];case 4:return[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.submitTwoFactorForm=t.retryU2fAuthentication=t.resendTwoFactorCode=t.submitCredentialsForm=t.accountPairTwoFactorLogin=t.accountPairLogin=t.checkSsoState=void 0,a=o.__importStar(a),t.checkSsoState=function(e){return new Promise((function(t){return a.WebRequest({url:"/sso_state",data:{email:e},success:function(e){return t(JSON.parse(e))}})}))},t.accountPairLogin=p,t.accountPairTwoFactorLogin=d,t.submitCredentialsForm=function(e,t){var o;switch(e){case"multi":o="/ajax_multi_login";break;case"pairing":o="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":o="/cli_link_nonce";break;case"bidirectional_pair":return p(t);default:o="/ajax_login"}return new Promise((function(e,r){return a.WebRequest({url:o,type:"POST",data:t,success:function(t){e(JSON.parse(t))},error:function(t,o,a){"{"!==a[0]&&-1===a.indexOf(":")?e({status:s.LoginResponseStatus.ERROR,html_response:!1,message:a}):r(JSON.parse(a))}})}))},t.resendTwoFactorCode=function(e,t){return new Promise((function(o,r){return a.WebRequest({url:"/twofactor_resend",data:{backup:e,mobile_push:t},success:o,error:r})}))},t.retryU2fAuthentication=function(){return new Promise((function(e,t){return a.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:e,error:t})}))},t.submitTwoFactorForm=function(e,t){var o;switch(e){case"multi":o="/ajax_multi_verify_code";break;case"pairing":o="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":o="/cli_link_twofactor";break;case"admin":o="/admin/login/twofactor";break;case"bidirectional_pair":return d(t);default:o="/ajax_verify_code"}return new Promise((function(e,r){return a.WebRequest({url:o,type:"POST",data:t,success:function(t){return e(JSON.parse(t))},error:function(e,t,o){return r(JSON.parse(o))}})}))}})),define("modules/clean/auth/login/apple_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/login/login_error"],(function(e,t,o,a,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleLoginButton=void 0,a=o.__importDefault(a),r=o.__importDefault(r),t.AppleLoginButton=function(e){var t=e.buttonProps||{},o=r.default("auth-apple","button-primary",t.className),i=t.text||s.intl.formatMessage({id:"pTMcB4",defaultMessage:"Sign in with Apple"});return a.default.createElement("div",{className:"login-form-container__apple-div"},a.default.createElement("button",{className:o,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"sia_login_start"},a.default.createElement("div",{className:"sign-in-text"},i)),e.error&&a.default.createElement(n.LoginError,{className:"apple-login-error",message:e.error}))}})),define("modules/clean/auth/login/credentials_form",["require","exports","tslib","classnames","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/captcha","modules/clean/auth/login/login_error","modules/clean/auth/login/google_login_button","modules/clean/auth/login/apple_login_button","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite_div","modules/clean/static_urls","modules/clean/react/file_viewer/conversions/conversion_utils"],(function(e,t,o,a,r,s,n,i,l,u,c,p,d,m,g,f,h,_,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,a=o.__importDefault(a),r=o.__importDefault(r),h=o.__importDefault(h);var b=function(e){var t="/forgot",o=e.target;return e.appendEmail&&(t="/forgot?email_from_login="+e.email,o=void 0),r.default.createElement("a",{className:"forgot-password-link",href:t,target:o},e.text||n.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},E=function(e){return r.default.createElement("div",{id:"navisite"},r.default.createElement("br",null),r.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},n.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"})))},y=function(e){return r.default.createElement("div",{className:"sso-optout"},n.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",r.default.createElement("a",{href:"#",onClick:e.onClick},n.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"})))},T=function(){return r.default.createElement("span",{className:"login-loading-indicator ajax-loading"},r.default.createElement(f.Image,{src:_.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:_.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")}))},v=function(){return r.default.createElement("div",{className:"sso-description"},r.default.createElement(h.default,{group:"web",name:"lock",text:n.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"})}))},w=function(e){return r.default.createElement("div",{className:"credentials-form__fields"},r.default.createElement(l.AuthTextField,{value:e.emailValue,className:a.default("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?n.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?n.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):n.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,maestroStyle:e.maestroStyle,name:"login_email",type:u.AuthTextInputType.EMAIL,variant:e.variant}),e.ssoState===g.SsoState.OFF&&r.default.createElement(l.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?n.intl.formatMessage({id:"JtdF1I",defaultMessage:"Your password"}):n.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:a.default("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?n.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:u.AuthTextInputType.PASSWORD}))},L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setCaptchaComponent=function(e){t.captchaComponent=e},t.getCaptchaResponses=function(){return t.props.supportsCaptcha?c.get_captcha_responses(t.captchaComponent):{}},t.handleCaptchaErrors=function(e){return!!t.props.supportsCaptcha&&c.handle_captcha_errors(t.captchaComponent,e)},t.submitRecaptcha=function(){t.props.supportsCaptcha?t.captchaComponent.getWrappedComponent().submit():t.props.onSubmit()},t}return o.__extends(t,e),t.prototype.render=function(){var e,t,o=this.props.rememberMeProps||{},l=this.props.googleLoginProps,f=this.props.appleLoginProps,h=a.default({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&s.is_supported_mobile_browser()}),_=this.props.openLinksInNewTab?"_blank":void 0,L=a.default("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==g.SsoState.OFF,"sso-optional":this.props.ssoState===g.SsoState.OPTIONAL}),C=l&&l.positionBelow,A=l&&!l.positionBelow,R=f&&f.positionBelow,F=f&&!f.positionBelow,N=C||R,O=A||F,I=l?r.default.createElement(d.GoogleLoginButton,{buttonProps:l.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,variant:this.props.variant}):null,M=f?r.default.createElement(m.AppleLoginButton,{buttonProps:f.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick}):null,k=this.props.hideHelp||this.props.ssoState===g.SsoState.REQUIRED?null:r.default.createElement(b,{email:this.props.emailValue,target:_,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),P=r.default.createElement("button",{className:a.default("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===g.SsoState.OFF&&r.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||n.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==g.SsoState.OFF&&r.default.createElement("div",{className:"sso-text"},n.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),D=r.default.createElement("div",{className:"hr-label"},r.default.createElement("span",{className:"hr-label__text"},n.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),x=this.props.variant===u.AuthFormVariant.PAPER_COMPACT,U=S.shouldShowSimplifiedModal(),q=this.props.isPaperLogin;return(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM"})(e||(e={})),N||x?q&&!x?t=e.BELOW_FORM:x||U?t=e.INLINE_WITH_LOGIN_BUTTON:!N||x||U||(t=e.BELOW_FORM):t=e.ON_NEW_LINE,r.default.createElement("div",{className:"login-form-container--subcontainer"},A&&I,F&&M,O&&!this.props.hideCredentialFields&&D,r.default.createElement("form",{className:L,onSubmit:this.props.onLoginClick,method:"POST"},!this.props.hideCredentialFields&&r.default.createElement(w,{disabled:this.props.disabled,emailError:this.props.emailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant}),this.props.loginError&&r.default.createElement(p.LoginError,{message:this.props.loginError}),this.props.supportsCaptcha&&!U&&r.default.createElement(c.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}),r.default.createElement("div",{className:h},this.props.ssoState!==g.SsoState.OFF&&r.default.createElement(v,null),!this.props.hideRememberMe&&r.default.createElement(i.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:o.disabled||this.props.disabled,inline:void 0===o.inline||o.inline,label:o.label||n.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.variant}),t===e.INLINE_WITH_LOGIN_BUTTON&&k,!x&&!this.props.hideCredentialFields&&P,this.props.isSubmitting&&r.default.createElement(T,null),this.props.ssoState===g.SsoState.OPTIONAL&&r.default.createElement(y,{onClick:this.props.onSsoChangeClick}),t===e.ON_NEW_LINE&&r.default.createElement("div",{className:"login-need-help"},k),this.props.showNaviSiteLogin&&r.default.createElement(E,{openLinkInNewTab:this.props.openLinksInNewTab}),x&&P)),N&&!this.props.hideCredentialFields&&!U&&D,C&&I,R&&M,t===e.BELOW_FORM&&r.default.createElement("div",{className:"login-need-help"},k),this.props.supportsCaptcha&&U&&r.default.createElement(c.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}))},t})(r.default.Component);t.LoginCredentialsForm=L})),define("modules/clean/auth/login/form",["require","exports","tslib","classnames","react","modules/core/browser","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/authenticator_form","modules/clean/auth/login/2fa/email_form","modules/clean/marketing_tracker","modules/clean/auth/login/2fa/phone_form","modules/clean/auth/login/2fa/seckey_form","modules/clean/auth/login/api","modules/clean/auth/login/credentials_form","modules/clean/auth/login/sso_utils","modules/clean/auth/login/types","modules/clean/react/components/css","modules/core/i18n","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/auth/authenticator","modules/clean/security/passwords","modules/clean/auth/common/stats","modules/clean/react/fedramp/fedramp_util"],(function(e,t,o,a,r,s,n,i,l,u,c,p,d,m,g,f,h,_,S,b,E,y,T,v,w,L,C,A,R){"use strict";var F;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyLoginStep=t.TestOnlyLoginFormComponent=t.LoginForm=void 0,a=o.__importDefault(a),r=o.__importDefault(r),s=o.__importStar(s),_=o.__importStar(_),v=o.__importDefault(v),L=o.__importStar(L),(function(e){e[e.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",e[e.EMAIL_2FA=1]="EMAIL_2FA",e[e.PHONE_2FA=2]="PHONE_2FA",e[e.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",e[e.SECKEY_2FA=4]="SECKEY_2FA"})(F||(F={})),t.TestOnlyLoginStep=F;var N=(function(e){function t(t){var a,d=e.call(this,t)||this;d.testOnlyGetSsoChecker=function(){return d.ssoChecker},d.setCredentialsFormComponent=function(e){d.credentialsFormComponent=e},d.testOnlyGetCredentialsFormComponent=function(){return d.credentialsFormComponent},d.onInputChange=function(e){var t=e.currentTarget,a={},r=o.__assign({},d.state.localErrors),s=!1;switch(t.name){case"login_email":a.email=t.value,r.email=void 0,s=!0;break;case"login_password":a.password=t.value,r.password=void 0;break;case"remember_me":a.rememberMe=t.checked;break;case"trusted":a.trusted=t.checked;break;case"code":a.twoFactorCode=t.value,r.twoFactor=void 0}a.localErrors=r,d.setState(a,(function(){s&&d.ssoChecker.checkSsoState(a.email,d.onSsoStateUpdate)}))},d.onSsoStateUpdate=function(e,t){e===d.state.email&&d.setState({ssoState:t})},d.onSsoChangeClick=function(){n.assert(d.state.ssoState===E.SsoState.OPTIONAL,"User can change SSO state only when it is optional",{tags:["react-login-form"]}),d.setState({ssoState:E.SsoState.OFF})},d.generateThirdPartyAuthUrl=function(e,t){var o={fname:e.profile.given_name,lname:e.profile.family_name,email:e.profile.email,picture_url:e.profile.picture_url,refresh_token:e.refresh_token,email_sig:e.email_sig,automatic_redirect:t.toString(),cont:d.props.continuationUrl||"/"};return d.props.googleLoginProps&&d.props.googleLoginProps.signupTag&&(o.signup_tag=d.props.googleLoginProps.signupTag),d.props.googleLoginProps&&d.props.googleLoginProps.signupEndpoint&&(o.signup_endpoint=d.props.googleLoginProps.signupEndpoint),String(new u.URI({path:"/third_party_signup"}).updateQuery(o))},d.handleGoogleCallback=function(e){A.AuthAMPLogger.logThirdPartyLoginResponse(A.AuthType.GOOGLE,d.props.type,e.success,e.err_msg),A.GoogleUXAnalyticsLogger.logLoginResponse(e);var t=R.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");if(e.success)d.handleLoginFormEvent(E.LoginFormEvent.GOOGLE_LOGIN_SUCCESS),!1!==d.props.canRedirect?(l.Notify.success(T.intl.formatMessage({id:"Ce9FpX",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),s.redirect(t)):e.is_fedramp_user&&!d.props.forceOnLoginSuccess?(t=R.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||s.get_href()),s.redirect(t)):d.props.onLoginSuccess&&d.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("emails_do_not_match_redirect"===e.err_msg){var a=d.props.googleLoginProps,n=a&&a.customErrorHandlers;if(n&&n.emailsDoNotMatchRedirect)n.emailsDoNotMatchRedirect(e);else{var p=d.generateThirdPartyAuthUrl(e,!0);s.redirect(p)}}else if("emails_do_not_match"===e.err_msg)if("pairing"!==d.props.type&&d.props.variant===c.AuthFormVariant.STANDARD){var m=d.generateThirdPartyAuthUrl(e,!1),g=T.intl.formatMessage({id:"6AHSKo",defaultMessage:"Oops! We couldnâ€™t find a Dropbox account matching that email. <a>Click here to create one.</a>"},{a:function(e){return r.default.createElement("a",{className:"third-party-signup-link",href:m},e)}});d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{googleLogin:g})})}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));else if("tos_required"===e.err_msg){p=new u.URI({path:"/account/complete_registration_page"}).updateQuery({finish_web_auth:"true",remember_me:e.remember_me.toString(),cont:d.props.continuationUrl||"/"});s.redirect(p.toString())}else if("tfa_required"===e.err_msg){p=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(p.toString())}else if("enable_twofactor_required"===e.err_msg){p=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(p.toString())}else if("not_verified"===e.err_msg){p=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(p.toString())}else if("email_not_verified"===e.err_msg){var f=T.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, youâ€™ll need to verify your account with Google {email}"},{email:e.profile.email});l.Notify.error(new i.HTML("<span>"+f+"</span>"),30)}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"google_login_not_allowed"!==e.err_msg&&"sso_required"!==e.err_msg||(d.setState({email:e.profile.email}),d.ssoChecker.checkSsoState(e.profile.email,d.onSsoStateUpdate))},d.onGoogleLoginClick=function(){d.handleLoginFormEvent(E.LoginFormEvent.GOOGLE_LOGIN_CLICK),d.setState({localErrors:{}}),A.AuthAMPLogger.logLoginAttempt(A.AuthType.GOOGLE,d.props.type),A.GoogleUXAnalyticsLogger.logLoginStart();var e=!!d.props.googleLoginProps&&!1!==d.props.googleLoginProps.popup;(new w.ProfileServicesLinkingHandler).auth_service_login_web(v.default.GOOGLE,d.handleGoogleCallback,"login_form",e?w.AuthWindowOption.POP_UP:w.AuthWindowOption.REDIRECT,d.state.rememberMe,d.props.continuationUrl||"/","pairing"===d.props.type)},d.handleAppleCallback=function(e){A.AuthAMPLogger.logThirdPartyLoginResponse(A.AuthType.APPLE,d.props.type,e.success,e.err_msg),A.AppleUXAnalyticsLogger.logLoginResponse(e);var t=R.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");if(e.success)d.handleLoginFormEvent(E.LoginFormEvent.APPLE_LOGIN_SUCCESS),!1!==d.props.canRedirect?(l.Notify.success(T.intl.formatMessage({id:"ZJmJez",defaultMessage:"Sign in successful! Your browser will be redirected in a few seconds."})),s.redirect(t)):e.is_fedramp_user&&!d.props.forceOnLoginSuccess?(t=R.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||s.get_href()),s.redirect(t)):d.props.onLoginSuccess&&d.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("no_email_in_response"===e.err_msg){var o=T.intl.formatMessage({id:"oFA/9f",defaultMessage:"Sign in failed. If youâ€™d like to sign in with Apple again, <a>see how in our help center</a>. You could also sign in with your Dropbox account email and password."},{a:function(e){return'<a href="/help/accounts-billing/settings-sign-in/apple-sign-in-error">'+e+"</a>"}});l.Notify.error(new i.HTML("<span>"+o+"</span>"),30)}else if("tfa_required"===e.err_msg){var a=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(a.toString())}else if("enable_twofactor_required"===e.err_msg){a=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(a.toString())}else if("requires_password_on_first_link"===e.err_msg){a=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});s.redirect(a.toString())}else if("emails_do_not_match"===e.err_msg){o=T.intl.formatMessage({id:"8cKJMG",defaultMessage:"We couldnâ€™t find a Dropbox account matching the email {email}. <a1>Sign up for a new account</a1> or <a2>get help signing in</a2> to an existing account."},{a1:function(e){return'<a href="/individual/plans-comparison?_tk=sia_nomatch_plan_web">'+e+"</a1>"},a2:function(e){return'<a href="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_web">'+e+"</a2>"},email:e.profile.email});l.Notify.error(new i.HTML("<span>"+o+"</span>"),30)}else e.localized_error?l.Notify.error(e.localized_error):l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"apple_login_not_allowed"===e.err_msg&&(d.setState({email:e.profile.email}),d.ssoChecker.checkSsoState(e.profile.email,d.onSsoStateUpdate))},d.onAppleLoginClick=function(){d.handleLoginFormEvent(E.LoginFormEvent.APPLE_LOGIN_CLICK),d.setState({localErrors:{}}),A.AuthAMPLogger.logLoginAttempt(A.AuthType.APPLE,d.props.type),A.AppleUXAnalyticsLogger.logLoginStart();var e=!!d.props.appleLoginProps&&!1!==d.props.appleLoginProps.popup;(new w.ProfileServicesLinkingHandler).auth_service_login_web(v.default.APPLE,d.handleAppleCallback,"login_form",e?w.AuthWindowOption.POP_UP:w.AuthWindowOption.REDIRECT,d.state.rememberMe,d.props.continuationUrl||"/","pairing"===d.props.type)},d.credentialsFormData=function(){var e=o.__assign(o.__assign({login_email:d.state.email,cont:d.props.continuationUrl,remember_me:d.state.rememberMe},d.credentialsFormComponent.getCaptchaResponses()),d.props.additionalData);if(void 0===d.props.encryptionOptions)return Promise.reject(new Error("Must provide encryption options"));var t=d.state.ssoState===E.SsoState.OFF?d.state.password:"";return C.wrapPassword(t,d.props.encryptionOptions).then((function(t){return e.encrypted_password=t,Promise.resolve(e)}))},d.handleLoginSuccess=function(e){if(d.handleLoginFormEvent(E.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==d.props.canRedirect){var t=R.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,d.props.continuationUrl||"/");return s.redirect(t)}if(e.is_fedramp_user&&!d.props.forceOnLoginSuccess){t=R.getFedrampRedirectUrlIfApplicable(!0,d.props.continuationUrl||s.get_href());return s.redirect(t)}return d.props.onLoginSuccess?d.props.onLoginSuccess(e):s.redirect("/")},d.handleSuccessResponse=function(e){switch(d.setState({isSubmitting:!1}),A.AuthAMPLogger.logCredentialsLoginResponse(d.props.type,e.status),A.EmailAuthUXAnalyticsLogger.logLoginResponse(e),e.status){case E.LoginResponseStatus.ERROR:var t=e.html_response?new i.HTML(e.message):e.message;return l.Notify.error(t);case E.LoginResponseStatus.EXPIRED:return s.redirect(e.cont);case E.LoginResponseStatus.OK:var a={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user};d.handleLoginSuccess(a);break;case E.LoginResponseStatus.PASSWORD_EXPIRED:return d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{email:{message_text:T.intl.formatMessage({id:"3EEu7s",defaultMessage:"The password of the account associated with this email has expired. Please login to this account and update its password before pairing."})}})});case E.LoginResponseStatus.RATELIMIT:return d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{email:{message_text:T.intl.formatMessage({id:"7k/CMy",defaultMessage:"Youâ€™ve tried to log in too many times. Please try again in a few minutes."})}})});case E.LoginResponseStatus.TWOFACTOR_REQUIRED:case E.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:return s.redirect(e.cont);case E.LoginResponseStatus.TWOFACTOR:e.checkpoint_token&&d.setState({checkpointToken:e.checkpoint_token}),e.use_email_2fa?d.setState({primaryTwoFactorType:E.TwoFactorType.EMAIL,currentStep:F.EMAIL_2FA}):e.u2f_challenge&&L.canUseAuthenticator(d.generateU2fRequest(e.u2f_challenge))?(d.setState({primaryTwoFactorType:E.TwoFactorType.SEC_KEY,currentStep:F.SECKEY_2FA}),e.last_two_digits?d.setState({lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:E.TwoFactorType.SMS}):d.setState({secondaryTwoFactorType:E.TwoFactorType.AUTHENTICATOR}),d.kickOffU2f(e.u2f_challenge)):e.last_two_digits?d.setState({primaryTwoFactorType:E.TwoFactorType.SMS,lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:void 0,currentStep:F.PHONE_2FA}):d.setState({primaryTwoFactorType:E.TwoFactorType.AUTHENTICATOR,lastTwoDigits:void 0,secondaryTwoFactorType:void 0,currentStep:F.AUTHENTICATOR_2FA});break;case E.LoginResponseStatus.SSO:return s.unsafeRedirect(e.sso_url);case E.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:return s.redirect(e.cont)}},d.handleServerErrors=function(e){if(A.AuthAMPLogger.logCredentialsLoginResponse(d.props.type,e.funcaptcha_response?"funcaptcha_response":"form_error"),d.credentialsFormComponent.handleCaptchaErrors(e))setTimeout((function(){d.isCaptchaReady||p.notifyCaptchaNotLoaded()}),1e4);else{A.EmailAuthUXAnalyticsLogger.logLoginError();var t={};e.login_email?t.email=e.login_email:t.email=void 0,e.login_password?t.password=e.login_password:t.password=void 0,e["failed-login-invalid-email-password"]?t.login=T.intl.formatMessage({id:"kfg1Pg",defaultMessage:"Oops! It looks like you may have forgotten your password. <a>Click here to reset it.</a>"},{a:function(e){return r.default.createElement("a",{href:"/forgot"},e)}}):t.login=void 0,d.setState({localErrors:t}),d.setState({isSubmitting:!1})}},d.onCredentialsFormSubmit=function(){A.EmailAuthUXAnalyticsLogger.logLoginStart(),d.setState({isSubmitting:!0}),d.credentialsFormData().then((function(e){var t=_.submitCredentialsForm(d.props.type,e);t.catch(d.handleServerErrors),t.then(d.handleSuccessResponse)})).catch((function(e){var t,o;e.isBrowserNotSupported?(t="user-error",o=T.intl.formatMessage({id:"rWb8d2",defaultMessage:"Dropbox doesnâ€™t support your browser. For a better experience, upgrade to the latest version of a modern browser like Chrome, Firefox, Edge, or Safari."})):(t="critical",o=T.intl.formatMessage({id:"dNlIBC",defaultMessage:"There was a problem completing this request."})),n.reportException({err:e,severity:t,tags:["react-login-form"]}),d.setState({isSubmitting:!1}),l.Notify.error(o)}))},d.onLoginClick=function(e){e.preventDefault(),A.AuthAMPLogger.logLoginAttempt(A.AuthType.CREDENTIALS,d.props.type),d.handleLoginFormEvent(E.LoginFormEvent.LOGIN_CLICK),d.credentialsFormComponent.submitRecaptcha()},d.handleResendCodeSuccess=function(e){var t;switch(e){case E.TwoFactorResendResponse.OK:return l.Notify.success(T.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}));case E.TwoFactorResendResponse.RATELIMIT:t=T.intl.formatMessage({id:"7k/CMy",defaultMessage:"Youâ€™ve tried to log in too many times. Please try again in a few minutes."});break;case E.TwoFactorResendResponse.UNREACHABLE:t=T.intl.formatMessage({id:"G6HUee",defaultMessage:"We couldnâ€™t reach your phone number. Are you sure itâ€™s correct?"});break;case E.TwoFactorResendResponse.EXPIRED:t=T.intl.formatMessage({id:"l5AyQn",defaultMessage:"Sorry, your phone code has expired. Please log in again."});break;case E.TwoFactorResendResponse.BADCARRIER:t=T.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isnâ€™t supported at this time."});break;case E.TwoFactorResendResponse.INVALIDNUMBER:t=T.intl.formatMessage({id:"1P05hM",defaultMessage:"That isnâ€™t a valid phone number."});break;case E.TwoFactorResendResponse.NOTAMOBILE:t=T.intl.formatMessage({id:"aI/ARD",defaultMessage:"That phone number doesnâ€™t appear to be a valid mobile number."});break;default:return l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{twoFactor:{message_text:t}})})},d.resendCode=function(){var e,t,o,a,r=_.resendTwoFactorCode(null!==(t=null===(e=d.props.additionalData)||void 0===e?void 0:e.backup)&&void 0!==t&&t,null!==(a=null===(o=d.props.additionalData)||void 0===o?void 0:o.mobile_push)&&void 0!==a&&a);r.then(d.handleResendCodeSuccess),r.catch((function(){l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}))},d.handleTwoFactorSuccess=function(e){switch(A.AuthAMPLogger.log2faResponse(d.props.type,e.status),e.status){case E.LoginResponseStatus.OK:d.state.currentStep===F.SECKEY_2FA&&d.setState({securityKeyState:E.SecurityKeyState.FOUND});var t={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user};d.handleLoginSuccess(t);break;case E.LoginResponseStatus.ERROR:l.Notify.error(e.message);break;case E.LoginResponseStatus.REQUIRES_ROLE:case E.LoginResponseStatus.EXPIRED:d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{email:{message_text:e.message}}),currentStep:F.CREDENTIALS_OR_SSO});break;case E.LoginResponseStatus.INVALID_CREDENTIALS:d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{password:{message_text:e.message}}),currentStep:F.CREDENTIALS_OR_SSO});break;default:l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},d.twoFactorFormData=function(){var e=o.__assign({remember_me:d.state.rememberMe,cont:d.props.continuationUrl,code:d.state.twoFactorCode,trusted:d.state.trusted},d.props.additionalData);return d.state.checkpointToken?o.__assign({checkpoint_token:d.state.checkpointToken},e):e},d.submitTwoFactor=function(){d.setState({isSubmitting:!0});var e=_.submitTwoFactorForm(d.props.type,d.twoFactorFormData());e.then(d.handleTwoFactorSuccess),e.catch((function(e){A.AuthAMPLogger.log2faResponse(d.props.type,e.u2f?"u2f_error":e.code?"code_error":"unknown"),d.state.currentStep===F.SECKEY_2FA&&e.u2f?d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{securityKey:e.u2f.message_text}),securityKeyState:E.SecurityKeyState.NOT_FOUND}):e.code?d.setState({localErrors:o.__assign(o.__assign({},d.state.localErrors),{twoFactor:e.code})}):l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})),e.finally((function(){d.setState({isSubmitting:!1})}))},d.onPhone2FASubmit=function(e){e.preventDefault(),d.submitTwoFactor()},d.onAuthenticator2FASubmit=function(e){e.preventDefault(),d.submitTwoFactor()},d.generateU2fRequest=function(e){for(var t=JSON.parse(e),o={challenge_id:t.challenge_id},a=0,r=Object.keys(L.PROTOCOLS);a<r.length;a++){var s=r[a];o[s]=t[s]&&JSON.parse(t[s])}return o},d.kickOffU2f=function(e){return o.__awaiter(d,void 0,void 0,(function(){var t,a,r,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:if(t=this.generateU2fRequest(e),!L.canUseAuthenticator(t))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,L.sign(t)];case 2:return a=o.sent(),this.state.currentStep===F.SECKEY_2FA&&this.setState({twoFactorCode:JSON.stringify(a)},(function(){return s.submitTwoFactor()})),[3,4];case 3:return r=o.sent(),this.state.currentStep===F.SECKEY_2FA&&this.setState({securityKeyState:E.SecurityKeyState.NOT_FOUND}),n.assert(!1,"U2F Error - "+r,{tags:["react-login-form","u2f"]}),[3,4];case 4:return[3,5];case 5:return[2]}}))}))},d.switch2FA=function(){var e;n.assert(d.state.primaryTwoFactorType===E.TwoFactorType.SEC_KEY,"Unexpected two factor choice switch",{tags:["react-login-form"]}),d.state.secondaryTwoFactorType===E.TwoFactorType.SMS?(e=F.PHONE_2FA,d.resendCode()):e=F.AUTHENTICATOR_2FA,d.setState({twoFactorCode:"",primaryTwoFactorType:d.state.secondaryTwoFactorType,secondaryTwoFactorType:void 0,currentStep:e})},d.onRetryU2f=function(){d.setState({securityKeyState:E.SecurityKeyState.LOADING});var e=_.retryU2fAuthentication();e.then(d.kickOffU2f),e.catch((function(){d.setState({securityKeyState:E.SecurityKeyState.NOT_FOUND}),l.Notify.error(T.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}))},d.onCaptchaReady=function(){d.isCaptchaReady=!0},n.assert(!1!==t.canRedirect||!!t.onLoginSuccess,"Need an on login success handler if we cannot redirect the user",{tags:["react-login-form"]}),d.ssoChecker=new b.SsoStateChecker,d.isCaptchaReady=!1;var m=F.CREDENTIALS_OR_SSO,g=void 0,f=void 0,h=void 0;return t.twoFactorOnlyProps&&(t.twoFactorOnlyProps.u2fChallenge&&!(null===(a=t.additionalData)||void 0===a?void 0:a.backup)&&L.canUseAuthenticator(d.generateU2fRequest(t.twoFactorOnlyProps.u2fChallenge))?(m=F.SECKEY_2FA,g=E.TwoFactorType.SEC_KEY,t.twoFactorOnlyProps.lastTwoDigits?(f=E.TwoFactorType.SMS,h=t.twoFactorOnlyProps.lastTwoDigits):f=E.TwoFactorType.AUTHENTICATOR):t.twoFactorOnlyProps.lastTwoDigits?(m=F.PHONE_2FA,g=E.TwoFactorType.SMS,h=t.twoFactorOnlyProps.lastTwoDigits):(m=F.AUTHENTICATOR_2FA,g=E.TwoFactorType.AUTHENTICATOR)),d.state={currentStep:m,email:t.emailProps&&t.emailProps.initialValue||"",isSubmitting:!1,lastTwoDigits:h,localErrors:{},password:"",primaryTwoFactorType:g,secondaryTwoFactorType:f,rememberMe:t.rememberMeCheckboxProps&&t.rememberMeCheckboxProps.checked||!1,securityKeyState:E.SecurityKeyState.LOADING,ssoState:E.SsoState.OFF,trusted:t.twoFactorTrustCheckboxProps&&t.twoFactorTrustCheckboxProps.checked||!1,twoFactorCode:"",checkpointToken:void 0,shouldDisableForm:!0},d}return o.__extends(t,e),t.prototype.trackSuccessfulLogin=function(e,t){if(e===E.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS||e===E.LoginFormEvent.GOOGLE_LOGIN_SUCCESS||e===E.LoginFormEvent.APPLE_LOGIN_SUCCESS){var o=g.getGAEventData(g.MARKETING_LOGIN_EVENT,g.MARKETING_LOGIN_EVENT);g.MarketingTracker.tryPushEvent(g.MARKETING_LOGIN_EVENT,g.EventTypeEnum.Link,o)}},t.prototype.handleLoginFormEvent=function(e,t){this.trackSuccessfulLogin(e,t),this.props.onLoginFormEvent&&this.props.onLoginFormEvent(e,t)},t.prototype.componentDidMount=function(){this.setState({shouldDisableForm:!1}),this.props.twoFactorOnlyProps||A.AuthAMPLogger.logLoginIntent(this.props.type),this.props.twoFactorOnlyProps&&this.props.twoFactorOnlyProps.u2fChallenge&&this.state.currentStep===F.SECKEY_2FA&&this.kickOffU2f(this.props.twoFactorOnlyProps.u2fChallenge),this.state.email&&this.ssoChecker.checkSsoState(this.state.email,this.onSsoStateUpdate)},Object.defineProperty(t.prototype,"shouldDisableForm",{get:function(){return!!this.props.disabled||this.state.shouldDisableForm},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsCaptcha",{get:function(){return!this.props.hideCredentialFields&&!["multi","pairing","cli_link_nonce"].includes(this.props.type)},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t,o,s,n;switch(this.state.currentStep){case F.CREDENTIALS_OR_SSO:n=r.default.createElement(S.LoginCredentialsForm,{ref:this.setCredentialsFormComponent,disabled:this.shouldDisableForm,emailError:this.state.localErrors.email,emailProps:this.props.emailProps||{},emailValue:this.state.email,forgotPasswordProps:this.props.forgotPasswordProps||{},googleLoginError:this.state.localErrors.googleLogin,googleLoginProps:this.props.googleLoginProps,appleLoginError:this.state.localErrors.appleLogin,appleLoginProps:this.props.appleLoginProps,hideCredentialFields:this.props.hideCredentialFields||!1,hideHelp:this.props.hideHelp||!1,hideRememberMe:this.props.hideRememberMe||!1,isPaperLogin:this.props.isPaperLogin||!1,isSubmitting:this.state.isSubmitting,loginButtonProps:this.props.loginButtonProps||{},loginError:this.state.localErrors.login,maestroStyle:this.props.maestroStyle||!1,onGoogleLoginClick:this.onGoogleLoginClick,onAppleLoginClick:this.onAppleLoginClick,onInputChange:this.onInputChange,onLoginClick:this.onLoginClick,openLinksInNewTab:!!this.props.openLinksInNewTab,onSsoChangeClick:this.onSsoChangeClick,onSubmit:this.onCredentialsFormSubmit,onCaptchaReady:this.onCaptchaReady,passwordError:this.state.localErrors.password,passwordProps:this.props.passwordProps||{},passwordValue:this.state.password,rememberMeProps:this.props.rememberMeCheckboxProps||{},rememberMeValue:this.state.rememberMe,showNaviSiteLogin:!!this.props.showNaviSiteLogin,ssoState:this.state.ssoState,supportsCaptcha:this.supportsCaptcha,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case F.PHONE_2FA:n=r.default.createElement(f.Phone2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(e=this.props.twoFactorDisplayHeader)&&void 0!==e&&e,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,lastTwoDigits:this.state.lastTwoDigits||"",maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onResendCodeClick:this.resendCode,onSubmit:this.onPhone2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case F.EMAIL_2FA:n=r.default.createElement(m.Email2FAForm,{displayHeader:null!==(t=this.props.twoFactorDisplayHeader)&&void 0!==t&&t,email:this.state.email,error:this.state.localErrors.twoFactor,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onPhone2FASubmit,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD,onResendCodeClick:this.resendCode});break;case F.AUTHENTICATOR_2FA:n=r.default.createElement(d.Authenticator2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(o=this.props.twoFactorDisplayHeader)&&void 0!==o&&o,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onAuthenticator2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||c.AuthFormVariant.STANDARD});break;case F.SECKEY_2FA:n=r.default.createElement(h.SecKey2FAForm,{displayHeader:null!==(s=this.props.twoFactorDisplayHeader)&&void 0!==s&&s,error:this.state.localErrors.securityKey,hideTrustCheckbox:this.props.hideRememberMe||!1,maestroStyle:this.props.maestroStyle||!1,onChange2FA:this.switch2FA,onInputChange:this.onInputChange,onRetry:this.onRetryU2f,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,secondaryTwoFactorType:this.state.secondaryTwoFactorType,securityKeyState:this.state.securityKeyState,variant:this.props.variant||c.AuthFormVariant.STANDARD})}var i=a.default("login-form-container",this.props.variant,this.props.className,{"login-form-container--centered":this.props.centered,"login-form-container--maestro":this.props.maestroStyle});return r.default.createElement("div",{className:i},r.default.createElement("div",{className:"regular-login-forms"},n))},t})(r.default.Component);t.TestOnlyLoginFormComponent=N,t.LoginForm=y.requireCssWithComponent(N,["/static/css/components/exp_cards-vfls5BO1G.css","/static/css/components/login_form-vflqjm7yP.css","/static/css/legacy_packages/components-vflwFi1IV.css","/static/css/login_or_register-vfln_xSQk.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/spectrum/index.web-vflmHVRF-.css","/static/css/recaptcha_challenge-vflrcf67y.css","/static/css/recaptcha_v2_challenge-vfl5GXpO2.css"])})),define("modules/clean/auth/login/google_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/common/types","modules/clean/auth/login/login_error","dig-components/buttons","modules/clean/react/image","modules/clean/static_urls"],(function(e,t,o,a,r,s,n,i,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLoginButton=void 0,a=o.__importDefault(a),r=o.__importDefault(r);var p=c.static_url("/static/images/growth/biz-setup/gmail-vflKoZim9.svg"),d=function(e){var t=e.onClick,o=e.label,r=e.disabled;return a.default.createElement(l.Button,{className:"setup-button",disabled:r,onClick:t,variant:"outline",size:"large"},a.default.createElement("div",{className:"email-cta-button"},a.default.createElement(u.Image,{className:"email-cta-button__item",src:p}),a.default.createElement("div",{className:"email-cta-button__item"},o)))};t.GoogleLoginButton=function(e){var t=e.buttonProps||{},l=r.default("auth-google","button-primary",t.className),u=e.variant&&e.variant===n.AuthFormVariant.DIG20,c=t.text||s.intl.formatMessage({id:"SgtygT",defaultMessage:"Sign in with Google"});return a.default.createElement("div",{className:"login-form-container__google-div"},u?a.default.createElement(d,o.__assign({},e,{label:c})):a.default.createElement("button",{className:l,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"google_login_start"},a.default.createElement("div",{className:"sign-in-text"},c)),e.error&&a.default.createElement(i.LoginError,{className:"google-login-error",message:e.error}))}})),define("modules/clean/auth/login/login_error",["require","exports","tslib","react","classnames"],(function(e,t,o,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginError=void 0,a=o.__importDefault(a),r=o.__importDefault(r),t.LoginError=function(e){var t=r.default("c-card","c-card--error",e.className);return a.default.createElement("div",{className:t},e.message)}})),define("modules/clean/auth/login/sso_utils",["require","exports","tslib","modules/clean/auth/login/api","modules/clean/auth/login/types"],(function(e,t,o,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoStateChecker=void 0,a=o.__importStar(a);var s=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/,n=function(){var e=this;this.shouldCheckSsoState=function(e){return e.match(s)},this.checkSsoState=function(t,o){e.shouldCheckSsoState(t)?e.CACHE[t]?o(t,e.CACHE[t]):e.INFLIGHT[t]||(e.INFLIGHT[t]=!0,a.checkSsoState(t).then((function(a){switch(a.user_sso_state){case"optional":e.CACHE[t]=r.SsoState.OPTIONAL;break;case"required":e.CACHE[t]=r.SsoState.REQUIRED;break;default:e.CACHE[t]=r.SsoState.OFF}o(t,e.CACHE[t])})).finally((function(){delete e.INFLIGHT[t]}))):o(t,r.SsoState.OFF)},this.CACHE={},this.INFLIGHT={}};t.SsoStateChecker=n})),define("modules/clean/auth/login/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginFormEvent=t.TwoFactorResendResponse=t.LoginResponseStatus=t.SsoState=t.SecurityKeyState=t.TwoFactorType=t.LoginRole=void 0,(function(e){e.ROLE_WORK="work",e.ROLE_PERSONAL="personal",e.ROLE_PHOTOS="photos",e.ROLE_BOTH="both"})(t.LoginRole||(t.LoginRole={})),(function(e){e[e.EMAIL=0]="EMAIL",e[e.SMS=1]="SMS",e[e.AUTHENTICATOR=2]="AUTHENTICATOR",e[e.SEC_KEY=3]="SEC_KEY"})(t.TwoFactorType||(t.TwoFactorType={})),(function(e){e[e.LOADING=0]="LOADING",e[e.FOUND=1]="FOUND",e[e.NOT_FOUND=2]="NOT_FOUND"})(t.SecurityKeyState||(t.SecurityKeyState={})),(function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"})(t.SsoState||(t.SsoState={})),(function(e){e.DEVICE_LIMIT="DEVICE_LIMIT",e.OK="OK",e.SSO="SSO",e.TWOFACTOR="TWOFACTOR",e.TWOFACTOR_REQUIRED="TWOFACTOR_REQUIRED",e.RATELIMIT="RATELIMIT",e.PASSWORD_EXPIRED="PASSWORD_EXPIRED",e.EXPIRED="EXPIRED",e.ERROR="ERROR",e.REQUIRES_ROLE="REQUIRES_ROLE",e.INVALID_CREDENTIALS="INVALID_CREDENTIALS",e.PASSWORD_DECRYPTION_ERROR="PASSWORD_DECRYPTION_ERROR",e.TOS_SIGNATURE_REQUIRED="TOS_SIGNATURE_REQUIRED"})(t.LoginResponseStatus||(t.LoginResponseStatus={})),(function(e){e.OK="OK",e.RATELIMIT="RATELIMIT",e.UNREACHABLE="UNREACHABLE",e.EXPIRED="EXPIRED",e.BADCARRIER="BADCARRIER",e.INVALIDNUMBER="BADCARRIER",e.NOTAMOBILE="BADCARRIER"})(t.TwoFactorResendResponse||(t.TwoFactorResendResponse={})),(function(e){e.LOGIN_CLICK="LOGIN_CLICK",e.LOGIN_IMMEDIATE_SUCCESS="LOGIN_IMMEDIATE_SUCCESS",e.GOOGLE_LOGIN_CLICK="GOOGLE_LOGIN_CLICK",e.GOOGLE_LOGIN_SUCCESS="GOOGLE_LOGIN_SUCCESS",e.APPLE_LOGIN_CLICK="APPLE_LOGIN_CLICK",e.APPLE_LOGIN_SUCCESS="APPLE_LOGIN_SUCCESS"})(t.LoginFormEvent||(t.LoginFormEvent={}))}));
//# sourceMappingURL=pkg-shared_link_folder.min.js-vflV5kpOv.map