define("indexnew:component/feednews/feed.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/config.js","indexnew:static/js/recomlog.js","indexnew:static/js/log.js"],function(e,t,o,i,n,a,s,d,p,l){function c(e){try{u.init(e)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:542})}}var f=n,r=a,m=s,g=d,h=p,v=l,u={init:function(e){try{var t=this;t.page=0,t.data=[],t.lock=!1,t.datalock=!1,t.ajaxlock=!1,t.top=!1,t.sec=!1,t.reload=1,t.options={defaultPageSize:e.defaultPageSize||20,pageSize:e.pageSize||e.defaultPageSize,tabData:e.tabData||[],$tabBoxObj:e.tabBoxObj,$feedBoxObj:e.feedBoxObj,$feedCtx:e.feedCtx,tabSelectClass:e.tabSelectClass||"selected",tabHoverClass:e.tabHoverClass||"hover",scrollDiffer:e.scrollDiffer||500,loadTimes:e.loadTimes||999,tabFixedClass:e.tabFixedClass||"",topBlank:e.topBlank||0,tabMap:e.tabMap,itemMap:e.itemMap,liveItemMap:e.liveItemMap,videoItemMap:e.videoItemMap,miniVideoItemMap:e.miniVideoItemMap,completion:e.completion||!1,liveCompletion:e.liveCompletion||!1,videoCompletion:e.videoCompletion||!1,miniVideoCompletion:e.miniVideoCompletion||!1,alreadyBottom:e.alreadyBottom||!1,unreachBottom:e.unreachBottom||!1,tabClickCallbaack:e.tabClickCallbaack||!1,beforeRender:e.beforeRender||!1,result:e.result||{from:"indexnew_feed",monkey:"recom"},isStatic:e.isStatic},t.hasTab=t.options.tabData.length?!0:!1,t.hasTab&&(t.currentType=e.tabData[0][e.urlTabtype],t.options.urlTabtype=e.urlTabtype),e.data&&(t.options.data=e.data,t.data=e.data,t.dataRender()),e.url&&(t.options.url=e.url,t.options.type=e.type,t.getData()),t.hasTab&&(t.tabRender(),t.bindTabEvent()),t.bindFeedEvent()}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:86})}},getData:function(){try{var e=this;if(e.datalock||e.lock||e.ajaxlock)return!1;e.ajaxlock=!0,e.page++;var t=1===e.page?e.options.defaultPageSize:e.options.pageSize,o={pn:e.page,rn:t,ts:+new Date,app_from:"indexnew_feed"},i={tab:"yingshi_new",video_type:1,nums:1===e.page?20:12,mode:0},n={tab:"funny",video_type:3,nums:1===e.page?20:12,mode:0};f.ajax({url:e.options.url,type:"GET",data:"video"===e.options.type?i:"minivideo"===e.options.type?n:o,dataType:"jsonp",success:function(t){try{if("live"!==e.options.type&&"video"!==e.options.type&&"minivideo"!==e.options.type&&e.options.isStatic&&!t.data.length)return e.ajaxlock=!0,f("#feed_news_wrap .loadingfeed").hide(),void f("#feed_news_wrap .morefeed").html("<span>æ²¡æœ‰æ›´å¤šäº†~</span>").show();if("live"===e.options.type)e.liveDataRender(t);else if("video"===e.options.type)e.videoDataRender(t);else if("minivideo"===e.options.type)f("#feed_news_wrap .loadingfeed").hide(),e.miniVideoDataRender(t);else{if(e.data=t.data,e.qid=t.qid,e.tag=t.tag,!e.data.length&&1===e.reload)return e.reload++,e.page--,e.ajaxlock=!1,void setTimeout(function(){try{e.getData()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:157})}},300);if(0===e.data.length)return e.ajaxlock=!1,e.page--,e.options.completion&&e.options.completion(e.page,e.datalock,e.options.type,e.data),!1;e.dataRender()}}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:169})}},beforeSend:function(){try{e.options.beforeRender&&e.options.beforeRender()}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:172})}}})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:174})}},tabRender:function(){try{var e=this;f.each(e.options.tabData,function(t,o){try{e.options.$tabBoxObj.append(e.options.tabMap(t,o)),0===t&&e.options.$tabBoxObj.find('[data-hook="tab"]').eq(0).addClass(e.options.tabSelectClass)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:184})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:185})}},bindTabEvent:function(){try{var e=this;e.options.$tabBoxObj.find('[data-hook="tab"]').on("click",function(t){function o(){try{e.getData(),e.options.$feedBoxObj.attr("monkey",i.data("monkey")),e.lock=!0,e.options.tabClickCallbaack&&e.options.tabClickCallbaack(i,e.currentType)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:214})}}try{if(t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1,e.lock)return!1;var i=f(this);e.currentType=i.data(e.options.urlTabtype),e.page=0,e.datalock=!1,e.options.$tabBoxObj.children().removeClass(e.options.tabSelectClass),i.addClass(e.options.tabSelectClass);var n=m.getViewport().scrollTop,a=e.options.$feedCtx.offset().top-e.options.topBlank;n>a?f("body,html").animate({scrollTop:a-13},400,function(){try{o()}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feed.js",ln:223})}}):o()}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:227})}}),e.options.$tabBoxObj.find('[data-hook="tab"]').hover(function(){try{var t=f(this).hasClass(e.options.tabSelectClass);t||f(this).addClass(e.options.tabHoverClass)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:234})}},function(){try{f(this).removeClass(e.options.tabHoverClass)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:237})}})}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:238})}},bindFeedEvent:function(){try{var e=this;r.on("viewport.deferchange",e.listenScroll,e)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:243})}},dataRender:function(){try{var e=this;1===e.page&&e.options.$feedBoxObj.html(""),setTimeout(function(){try{var t="",o="",i=[],n=[];f.each(e.data,function(i,a){try{if(o=e.options.itemMap(i,a),!o)return n.push(i),!0;t+=o}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:265})}}),t||v({type:"auto",k:"feed-no-data",v:g.__config__.pageId,t:e.options.type,q:e.qid}),e.options.$feedBoxObj.append(t),e.options.completion&&e.options.completion(e.page,e.datalock,e.options.type,e.data),e.lock=!1,e.ajaxlock=!1,f.each(n,function(t,o){try{e.data[o].isDel=1}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:283})}}),f.each(e.data,function(e,t){try{t.isDel||i.push(t)}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:288})}}),e.options.result.data=i,e.options.result.qid=e.qid,e.options.result.tag=e.tag,h.show({el:e.options.$feedBoxObj,items:e.options.$feedBoxObj.find("li.feed_news_item"),result:e.options.result})}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:320})}},10)}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feed.js",ln:322})}},liveDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="live-inner"></div>'),0===e.errno&&e.data&&e.data.live_list&&"{}"!==JSON.stringify(e.data.live_list)&&"[]"!==JSON.stringify(e.data.live_list)){var o=+e.data.has_more;if(1===t.page&&0===o&&0===e.data.live_list.length)return t.options.$feedBoxObj.find("div.live-inner").html('<h3 class="no-live-data">ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­ï¼Œè¯·ç¨åŽè§‚çœ‹</h3>'),void(t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type));if(0===o){if(t.options.$feedBoxObj.find("li.feed_live_item").length<=10)return t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>å…¶ä»–ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­è¯·ç¨åŽè§‚çœ‹</h3></li>'),void(t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type))}else t.options.$feedBoxObj.find("li.lesslive").remove();var e=e.data.live_list,i="",n=[];f.each(e,function(e,o){try{o.charm_count=t.formatLiveCharm(o.total_charm_count),o.formatname=o.user_name.length>7?o.user_name.substring(0,7)+"...":o.user_name,i+=t.options.liveItemMap(e,o),n.push(o)}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:364})}}),i||v({type:"auto",k:"feed-no-live-data",v:g.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.live-inner").append(i),t.lock=!1,t.ajaxlock=!1,t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>å…¶ä»–ä¸»æ’­æ­£åœ¨ä¼‘æ¯ä¸­è¯·ç¨åŽè§‚çœ‹</h3></li>'),t.options.liveCompletion&&t.options.liveCompletion(t.page,t.datalock,t.options.type))}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feed.js",ln:394})}},videoDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="video-inner"></div>'),0===e.errno&&e.data&&e.data.list&&"{}"!==JSON.stringify(e.data.list)&&"[]"!==JSON.stringify(e.data.list)){if(1===t.page&&0===e.data.list.length)return t.options.$feedBoxObj.find("div.video-inner").html('<h3 class="no-video-data">æš‚æ—¶æ²¡æœ‰è§†é¢‘å“¦~</h3>'),void(t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type));var e=e.data.list,o="";f.each(e,function(e,i){try{o+=t.options.videoItemMap(e,i.content||{})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:418})}}),o||v({type:"auto",k:"feed-no-video-data",v:g.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.video-inner").append(o),t.lock=!1,t.ajaxlock=!1,t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.live-inner").append('<li class="feed_live_item lesslive"><h3>æ²¡æœ‰æ›´å¤šäº†~</h3></li>'),t.options.videoCompletion&&t.options.videoCompletion(t.page,t.datalock,t.options.type))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:448})}},miniVideoDataRender:function(e){try{var t=this;if(1===t.page&&t.options.$feedBoxObj.html('<div class="mini-video-inner"></div>'),0===e.errno&&e.data&&e.data.list.video_list&&"{}"!==JSON.stringify(e.data.list.video_list)&&"[]"!==JSON.stringify(e.data.list.video_list)){if(1===t.page&&0===e.data.list.video_list.length)return t.options.$feedBoxObj.find("div.mini-video-inner").html('<h3 class="no-video-data">æš‚æ—¶æ²¡æœ‰è§†é¢‘å“¦~</h3>'),void(t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type));var e=e.data.list.video_list,o="";f.each(e,function(e,i){try{o+=t.options.miniVideoItemMap(e,i||{})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feed.js",ln:472})}}),o||v({type:"auto",k:"feed-no-mini-video-data",v:g.__config__.pageId,t:t.options.type,q:e.qid}),t.options.$feedBoxObj.find("div.mini-video-inner").append(o),t.lock=!1,t.ajaxlock=!1,t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type)}else e.length||(t.options.$feedBoxObj.find("li.lesslive").remove(),t.options.$feedBoxObj.find("div.mini-video-inner").append('<li class="feed_live_item lesslive"><h3>æ²¡æœ‰æ›´å¤šäº†~</h3></li>'),t.options.miniVideoCompletion&&t.options.miniVideoCompletion(t.page,t.datalock,t.options.type))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feed.js",ln:494})}},formatLiveCharm:function(e){try{var e=+e,t=9999;return e>t?(e/t).toFixed(2)+"ä¸‡":e+""}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"indexnew:component/feednews/feed.js",ln:504})}},listenScroll:function(){try{var e=this,t=m.getViewport().scrollTop,o=e.options.$feedCtx,i=o.offset().top+o.height(),n=f(window).height(),a=200;t+n+a>=i&&e.getData()}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feed.js",ln:537})}}};t.exports=c});
;define("indexnew:component/feednews/feednews.js",["global","module","exports","require","indexnew:static/js/jquery.js","indexnew:component/feednews/feed.js","indexnew:static/js/format.js","indexnew:static/js/store.js","indexnew:static/js/events.js","indexnew:static/js/pageEvents.js","indexnew:static/js/log.js","indexnew:static/js/config.js","indexnew:static/js/cookie.js","indexnew:static/js/browser.js","indexnew:static/js/util.js"],function(e,t,i,n,s,a,o,c,d,l,r,p,m,f,g){var u=s,h=a,w=o,v=c,y=d,x=r,_=p,b=f,k=g,j=parseInt(b.ie,10)<8,T=50,D=97,I=_.get("pageId"),$="hao123-indexnunew16"===I,A="https://dgss2.bdstatic.com/5eR1dDebRNRTm2_p8IuM_a/her/static/indexnew/component/feednews/huangguan.ed44fa1.png",C="https://dgss2.bdstatic.com/5eR1dDebRNRTm2_p8IuM_a/her/static/indexnew/component/feednews/play-btn.72c3579.png",S=['<li class="top-news fadeInDown animated" monkey="topNews">','<span class="first #{only}">','<a href="#{url0}" class="top-new" title="#{title0}">#{title0}</a>',"</span>",'<span class="second">','<a href="#{url1}" class="top-new" title="#{title1}">#{title1}</a>',"</span>","</li>"].join(""),H=['<li class="feed_news_item #{noimg} fadeInDown animated" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>','               <span class="g-ib thumbnail">#{img}</span>','               <div style="#{isVideo}" class="playicon-wrapper">','                   <i class="playicon"></i>','                   <p class="duration"><span>#{duration}</span></p>',"               </div>","           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"       </div>","   </div>","</li>"].join(""),O=['<li class="feed_live_item" monkey="liveitem">','    <a href="http://www.hao123.com/video/news?rid=#{live_id}&zhibo=1" class="item-link">','        <div class="coverimg">','            <img src="#{cover}" />','            <div class="status #{isLiving}">Â·ç›´æ’­ä¸­</div>','            <div class="mask">','                <img class="play-btn" src="#{playbtn}"/>',"            </div>","        </div>",'        <div class="text">','            <span class="title" title="#{user_name}">#{formatname}</span>','            <span class="charm"><img src="#{liveCharmCount}" />#{charm_count}</span>',"        </div>","    </a>","</li>"].join(""),L=['<li class="feed_video_item" monkey="videoitem">','    <a href="https://haokan.baidu.com/v?vid=#{vid}&fr=hao123-tab" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{cover_src}" />','            <div class="duration"><span>#{duration}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span title="æ’­æ”¾é‡">','                   <i class="icon play"></i>#{playcnt}',"               </span>",'               <span title="è¯„è®ºæ•°">','                   <i class="icon comment"></i>#{comment_cnt}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),M=['<li class="mini-video-item" monkey="minivideoitem">','    <a href="https://quanmin.baidu.com/v/#{vid}?source=promo-1024312h-0&tab=promo&tag=hao123tab&pd=1024312h&autoplay=1" class="item-link" title="#{title}">','        <div class="coverimg">','            <img src="#{poster}" />','            <div class="duration"><span>#{time_length}</span></div>',"        </div>",'        <div class="text">','           <div class="fl">','               <span class="title" title="#{title}">#{formatTitle}</span>',"           </div>",'           <div class="sl">','               <span class="play-wrapper" title="æ’­æ”¾é‡">','                   <i class="icon play"></i>#{play_count}',"               </span>",'               <span class="comment-wrapper" title="ä½œè€…æ˜µç§°">','                   <i class="icon comment"></i>#{nick_name}',"               </span>","           </div>","        </div>","    </a>","</li>"].join(""),R=['<li class="feed_news_item #{noimg} fadeInDown animated" #{monkey} #{hook}>','   <div class="item_cont #{noDesc}" #{monkey1}>','       <div class="feednews-header">','           <h3 class="g-ib"><a class="g-hu" title="#{title}" href="#{url}" target="_blank">#{title}</a></h3>',"       </div>",'       <div class="feednews-main">','           <a href="#{url}" target="_blank" alog-text="#{title}">','               <span class="g-ib f-14 description">#{desc}</span>',"           </a>","       </div>",'       <div class="feednews-footer">','           <span class="g-ib author">','               <a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>',"           </span>",'           <span class="g-ib news-dot"></span>','           <span class="g-ib">#{times}</span>',"       </div>","   </div>","</li>"].join(""),B=['<li #{monkey} class="feed_news_item tuji fadeInDown animated">',"<h3>",'<a class="g-ib" title="#{title}" href="#{url}" alog-text="#{title}">#{title}</a>',"</h3>",'<a href="#{url}" alog-text="#{title}">','<img src="#{imgurl1}" />','<img src="#{imgurl2}" />','<img src="#{imgurl3}" />','<span class="g-ib more-img" >ç‚¹å‡»æ›´å¤š</span>',"</a>",'<div class="tip">','<a class="g-gray #{sourceTag}" href="#{sourceurl}">#{source}</a>','<span class="g-ib g-fc2">#{times}</span>',"</div>","</li>"].join(""),H=j?R:H,B=j?R:B,N=['<li class="wm #{isFirst}" data-hook="wm">','<div id="#{id1}" class="cproad1">',"</div>","</li>"].join(""),U='<img src="#{imgurl}" />',q="",E={init:function(e,t,i,n){try{var s=this;s.$feedbox=u("#feed_news_wrap"),s.$refresh=u("a#feed_refresh"),s.newhottop=[],s.hottop=v.get("hottop"),s.$loading=u('[data-hook="loading"]',s.$feedbox),s.$liveLoading=u('[data-hook="liveLoading"]',s.$feedbox),s.$morefeed=u('[data-hook="morefeed"]',s.$feedbox),s.$tabBox=u("#feedTab"),s.index=0,s.topData=[],s.firstload=!1,s.url="live"===t||"video"===t||"minivideo"===t?e:e+t,s.type=t,s.isStatic=i,s.wmSlot=[],s.firstwm=!0,s.top=!1,s.sec=!1,s.cmsAd=n,s.feeder(s),s.bindEvent()}catch(a){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:a.message||a.description,path:"indexnew:component/feednews/feednews.js",ln:216})}},bindEvent:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:217})}},feeder:function(e){try{{new h({url:e.url,type:e.type,isStatic:e.isStatic,defaultPageSize:"live"===e.type?11:10,urlTabtype:"type",result:{from:"indexnew_feed",monkey:"recom"},loadTimes:T,scrollDiffer:500,tabFixedClass:"tabfixed",topBlank:D,feedBoxObj:u("#feed_news_list"),feedCtx:u("#feed_news_wrap"),tabMap:function(e,t){try{var i=['<a href="#" class="g-ib" data-type="#{key}" data-monkey="#{monkey}" data-hook="tab">',"#{title}","</a>"].join("");return w(i,{key:t.type,title:t.title,monkey:t.feedmonkey})}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:281})}},itemMap:function(t,i){try{if((i.top||i.sec_fixed)&&2>t&&(e.topData.push(i),0===t))return"";if(e.topData.length&&1===t&&!e.top){var n=e.mergeTopData(e.topData);return 1===e.topData.length&&(n.only="onlyone"),e.top=!0,w(S,n)}if(i.top||i.sec_fixed)return"";e.index++;var s="",a="g-gray",o=(i.ext.doc_domain,"hasimg"),c="video"===i.dataType?"":"display:none;";i.img0||i.img1?(q=w(U,{imgurl:HAO.httpsTrans(i.img0||i.img1),hottop:i.cms_id?'<span class="hottop">ç½®é¡¶</span>':""}),i.desc&&i.desc.length>90&&(i.desc=i.desc.substr(0,90)+"...")):(q="",o="noimg",i.desc&&i.desc.length>120&&(i.desc=i.desc.substr(0,120)+"..."));var d="";if("video"!==e.type&&e.index%4===0?i.img0&&i.img1&&i.img2?d=w(B,{title:i.title,url:i.url,imgurl1:HAO.httpsTrans(i.img0),imgurl2:HAO.httpsTrans(i.img1),imgurl3:HAO.httpsTrans(i.img2),source:i.source,sourceurl:i.source_url||i.sourceUrl,sourceTag:i.source_url||i.sourceUrl?"haslink":"notlink",times:i.format_time?i.format_time:"",monkey:"answer"===i.dataType?'monkey="answer"':""}):e.index--:s=w(H,{url:i.url,img:q,noimg:o,isVideo:c,title:i.title,desc:i.desc,source:i.source,times:"video"===i.dataType?i.playcnt?k.formatNum(i.playcnt)+"æ¬¡æ’­æ”¾":"":i.format_time?i.format_time:"",sourceUrlColor:a,sourceurl:i.source_url||i.sourceUrl,sourceTag:i.source_url||i.sourceUrl?"haslink":"notlink",monkey:i.cms_id?'monkey="cms"':"video"===i.dataType?'monkey="video"':"answer"===i.dataType?'monkey="answer"':"",monkey1:1===e.index?'monkey="first"':"",hook:i.cms_id?'data-hook="cms"':"",noDesc:i.desc?"":"no-desc",duration:i.duration?k.formatDuration(i.duration):""}),i.cms_id)if(e.hottop){var t=u.inArray(i.cms_id,e.hottop);-1===t?e.newhottop.push(i.cms_id):s=""}else e.newhottop.push(i.cms_id);var l="";return e.preIndex!==e.index&&e.index>=2&&(e.index-2)%4===0&&(l=e.getWmHtml(),e.firstwm=!1),e.preIndex=e.index,s+d+l}catch(r){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:r.message||r.description,path:"indexnew:component/feednews/feednews.js",ln:410})}},liveItemMap:function(e,t){try{return w(O,{user_name:t.user_name,formatname:t.formatname,cover:HAO.httpsTrans(t.cover),live_id:t.live_id,isLiving:1===+t.live_status?"live":"",charm_count:t.charm_count,liveCharmCount:A,playbtn:C})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:430})}},videoItemMap:function(e,t){try{return w(L,{vid:t.vid,cover_src:HAO.httpsTrans(t.cover_src),duration:k.formatDuration(t.duration),title:t.title,formatTitle:t.title.length>25?t.title.slice(0,25)+"...":t.title,playcnt:k.formatNum(t.playcnt),comment_cnt:k.formatNum(t.comment_cnt)})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:449})}},miniVideoItemMap:function(e,t){try{return w(M,{vid:t.vid,poster:HAO.httpsTrans(t.poster),time_length:t.time_length,title:t.title,formatTitle:t.title.length>24?t.title.slice(0,24)+"...":t.title,play_count:t.play_count,nick_name:t.author&&t.author.name})}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:466})}},tabClickCallbaack:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:474})}},beforeRender:function(){try{e.$morefeed.hide(),"live"===e.type||"video"===e.type||"minivideo"===e.type?e.$liveLoading.css("display","block"):e.$loading.css("display","block")}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:487})}},completion:function(t,i,n){try{0!==e.newhottop.length&&(v.set("hottop",e.newhottop),e.newhottop=[]);var s=u("#feed_news_list"),a=u("li",s).length;e.$loading.hide(),4>t&&7>a&&e.$morefeed.css("display","block"),i||(x({type:"auto",k:"indexnew-feed-"+t,v:_.__config__.pageId,t:n}),t>1&&y.emit("hao123.feedbottom.next",n)),t>=1&&!e.firstload&&(e.firstload=!0),y.emit("hao123.feedbottom.update",n);var o="//cpro.baidustatic.com/cpro/ui/c.js",c="",d="";$?(c="//as1.m.hao123.com/common/9hspp.js?ni=ajhojek",d="//as1.m.hao123.com/production/js/p700.js?fasxixgx=g"):(c="//as1.m.hao123.com/site/api/6g5d5.js?nia=ffeoqq",d="//as1.m.hao123.com/production/ui7pr.js?xskpp=obyh"),e.wmSlot&&e.wmSlot.length&&(u.each(e.wmSlot,function(){try{this.container=document.getElementById(this.container),(window.slotbydup=window.slotbydup||[]).push(this)}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:550})}}),e.wmSlot=[]),window.slotbydup&&!window.slotbydup.load&&(window.slotbydup.load=!0,u.getScript(location.protocol+o),u.getScript(location.protocol+c),u.getScript(location.protocol+d))}catch(l){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:l.message||l.description,path:"indexnew:component/feednews/feednews.js",ln:560})}},liveCompletion:function(t,i,n){try{{u("#feed_news_list")}e.$liveLoading.hide(),i||x({type:"auto",k:"indexnew-live-feed-"+t,v:_.__config__.pageId,t:n})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:581})}},videoCompletion:function(t,i,n){try{{u("#feed_news_list")}e.$liveLoading.hide(),i||x({type:"auto",k:"indexnew-video-feed-"+t,v:_.__config__.pageId,t:n})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:602})}},miniVideoCompletion:function(t,i,n){try{{u("#feed_news_list")}e.$liveLoading.hide(),i||x({type:"auto",k:"indexnew-mini-video-feed-"+t,v:_.__config__.pageId,t:n})}catch(s){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:s.message||s.description,path:"indexnew:component/feednews/feednews.js",ln:623})}},alreadyBottom:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:633})}},unreachBottom:function(){try{}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"indexnew:component/feednews/feednews.js",ln:643})}}})}}catch(t){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:t.message||t.description,path:"indexnew:component/feednews/feednews.js",ln:645})}},getWmHtml:function(){try{var e=this;if(e.cmsAd.length&&1===+e.cmsAd[0].ison&&e.firstwm){var t=e.cmsAd[0],i="noimg",n="";return t.imgurl?(i="hasimg",t.desc&&t.desc.length>90&&(t.desc=t.desc.substr(0,90)+"..."),n=w(U,{imgurl:HAO.httpsTrans(t.imgurl)})):t.desc&&t.desc.length>120&&(t.desc=t.desc.substr(0,120)+"..."),w(H,{url:t.url,img:n,noimg:i,isVideo:"display:none;",title:t.title,desc:t.desc,source:t.source||"",times:t.times||"",sourceUrlColor:"g-gray",sourceurl:t.sourceurl||"#",sourceTag:t.sourceurl?"haslink":"notlink",monkey:'monkey="cms"',monkey1:'monkey="bc"',noDesc:t.desc?"":"no-desc"})}var s=e.firstwm?"u3554099":"u3554102";$&&(s=e.firstwm?"u3760748":"u3595050");var a=_.get("cproFeedIndex",-1)+1,o="_"+s+"_"+a;return this.wmSlot.push({id:s,container:o,async:!0}),_.set("cproFeedIndex",a),w(N,{isFirst:e.firstwm&&$?"firstwm":"",id1:o})}catch(c){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:c.message||c.description,path:"indexnew:component/feednews/feednews.js",ln:708})}},mergeTopData:function(e){try{var t={};return e.forEach(function(e,i){try{t["title"+i]=e.title,t["url"+i]=e.url}catch(n){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:n.message||n.description,path:"indexnew:component/feednews/feednews.js",ln:714})}}),t}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"indexnew:component/feednews/feednews.js",ln:716})}}};t.exports=E});