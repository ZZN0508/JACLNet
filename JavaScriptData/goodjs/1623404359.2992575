!function(){"use strict";function e(e){c.push(e),1===c.length&&u()}function t(){for(;c.length;)c[0](),c.shift()}function n(e){this.a=h,this.b=void 0,this.f=[];var t=this;try{e(function(e){a(t,e)},function(e){r(t,e)})}catch(e){r(t,e)}}function i(e){return new n(function(t,n){n(e)})}function o(e){return new n(function(t){t(e)})}function a(e,t){if(e.a===h){if(t===e)throw new TypeError("Promise settled with itself.");var n=!1;try{var i=t&&t.then;if(null!==t&&"object"==typeof t&&"function"==typeof i)return void i.call(t,function(t){n||a(e,t),n=!0},function(t){n||r(e,t),n=!0})}catch(t){return void(n||r(e,t))}e.a=0,e.b=t,s(e)}}function r(e,t){if(e.a===h){if(t===e)throw new TypeError("Promise settled with itself.");e.a=1,e.b=t,s(e)}}function s(t){e(function(){if(t.a!==h)for(;t.f.length;){var e=t.f.shift(),n=e[0],i=e[1],o=e[2],e=e[3];try{0===t.a?o("function"==typeof n?n.call(void 0,t.b):t.b):1===t.a&&("function"==typeof i?o(i.call(void 0,t.b)):e(t.b))}catch(t){e(t)}}})}function l(e){return new n(function(t,n){function i(n){return function(i){r[n]=i,(a+=1)===e.length&&t(r)}}var a=0,r=[];0===e.length&&t(r);for(var s=0;s<e.length;s+=1)o(e[s]).c(i(s),n)})}function d(e){return new n(function(t,n){for(var i=0;i<e.length;i+=1)o(e[i]).c(t,n)})}var c=[];if(window.MutationObserver){var g=document.createElement("div");new MutationObserver(t).observe(g,{attributes:!0});var u=function(){g.setAttribute("x",0)}}else u=function(){setTimeout(t)};var h=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var i=this;return new n(function(n,o){i.f.push([e,t,n,o]),s(i)})},window.Promise||(window.Promise=n,window.Promise.resolve=o,window.Promise.reject=i,window.Promise.race=d,window.Promise.all=l,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g)}(),function adClosure(){function executeHymnal(){!function($){var HymnalLib={version:11,info:function(){window.console&&window.console.log&&HymnalLib.ads.forEach(function(e){console.log(e.design_template+", id: "+e.id,e.getElement().get(0))})}};if("undefined"==typeof window.Hymnal||window.Hymnal.settings.inPreview){var settings={};window.Hymnal&&(settings=Hymnal.settings||{}),window.Hymnal=HymnalLib,window.Hymnal.settings=settings}!function(e){e.defaultSettings=e.defaultSettings||{},e.settings?e.settings=$.extend(_.clone(e.defaultSettings),e.settings):e.settings=e.defaultSettings,e.settings=e.settings||{},window.console=window.console||{log:function(){}},e.loggers=e.loggers||{push:function(){}},e.ConsoleLogger=e.ConsoleLogger||function(){},e.ads=e.ads||[],!e.settings.userCanViewMetrics&&$("#network-bar a[title='Network Admin Dashboard']").length>0&&(e.settings.userCanViewMetrics=!0),e.ChorusEvents=e.ChorusEvents||{AdResponseWithHTML:"Vox.Ad.ResponseWithHTML",AdRequest:"Hymnal.requestAd"}}(HymnalLib),function(e){e.util={},e.util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,t=window.innerWidth;isInIframe()&&window.frameElement&&(t=window.frameElement.parentElement.ownerDocument.body.clientWidth);var n=window.navigator.userAgent,i=e&&t<728||window.location.href.indexOf("mobile=true")>0||document.body.classList.contains("is-small"),o=e&&t>=728,a=!i&&!o,r=i?"mobile":o?"tablet":"desktop",s=!1;if(n.indexOf("Android")>0)for(var l=n.split(";"),d=0,c=l.length;d<c;d++)if(l[d].indexOf("Android")>0){var g=l[d].split(" ");if(parseInt(g[g.length-1].split(".")[0])<3){s=!0;break}}return{screenWidth:function(){return t},profile:function(){return r},isTablet:function(){return o},isMobile:function(){return i},isDesktop:function(){return a},isAndroidLt3:function(){return s}}}(),e.util.inViewport=function(){var t=e.Events.data(),n=null;if(t.inViewport)return!0;if(-1===t.frameTopPos&&-1===t.windowHeight)n=!1;else{var i=t.scrollOffset+t.windowHeight,o=t.scrollOffset,a=t.framePosOnPage,r=t.framePosOnPage+t.frameHeight;n=a>=o&&r<=i,n=n||a<=o&&r>=o,n=n||a<=i&&r>=i}return n},e.util.isPrelude=function(e){var t=-1!==e.design_template.toLowerCase().indexOf("prelude"),n=-1!==e.design_template.toLowerCase().indexOf("apex");return t&&!n},e.util.isAthena=function(e){return-1!==e.design_template.toLowerCase().indexOf("athena")},e.util.isSafeFrame=!!window.$sf,e.util.randomFrom=function(e){return e[Math.floor(Math.random()*e.length)]},e.util.throttle=function(e,t,n){var i=null,o=!1,a=function(){if(i)return void(o=!0);n=n||this,e.call(n),i=setTimeout(function(){var e=o;i=null,o=!1,e&&a.call(n)},t)};return a},e.util.complete=function(e,t){var n=t||this;"complete"===document.readyState?e.call(n):window.addEventListener("load",function(){e.call(n)})}}(HymnalLib),function(e){e.Ad=function(){function t(t){t=t||{},this.type=t.type,this.id=t.id,this.design_template=t.design_template||"",this.brand=t.brand,this.campaignId=t.campaignId,this.campaignName=t.campaignName,this.adName=t.adName,this.slug=t.slug,this.fields=t.fields||{},this.adUnitID=0,this.siteID="",this.network="",this.entryType="",this.adServerVariables={},this.libraryVersion=e.version,this.aspect_ratio=t.aspect_ratio,this.renderInIframe=t.renderInIframe,this.preambleEnabled=t.preambleEnabled,this.preambleMarkup=t.preambleMarkup,this.preambleOverlay=t.preambleOverlay,this.showFeedbackForm=t.showFeedbackForm,this.userFeedbackHidden=!1,this.disableSlotRefresh=t.disableSlotRefresh,this.trackedURLs=[],this.clickthroughUrl=t.clickthroughUrl,this.trackers=t.trackers||[],this.viewRecorded=!1,this.enable_log=!1,this.data=this.data||{},this._elementToReplace=t.elementToReplace&&$(t.elementToReplace),this._designSetupFunction=t.designSetupFunction,this._element=t.element,this.manual_view_impression=!1,this.automatic_clickthrough=!0,this.breakpoints={small:[0,727],medium:[728,949],large:[950,1e6],mobile:[0,727],desktop:[728,1e7]},this.content={all_html:t.html,all_css:t.css},this.settings={testMode:!0===t.testMode,window:t.testWindow||window},this._lifecycleEventListeners=[],this._loggers=[],window.Hymnal&&window.Hymnal.ads&&window.Hymnal.ads.push(this)}return t.cssClasses={viewed:"hymnal-ad-viewed"},t.prototype.addLifecycleEventListener=function(e){this._lifecycleEventListeners.push(e)},t.prototype.addLogger=function(){this.enable_log=!0,this.log("Call to deprecated function. Use 'ad.enable_log = true' to log to console.log (if it exists)")},t.prototype.requestMoatJavascript=function(){this.log("Moat support is removed")},window.console=window.console||{log:function(){}},t.prototype.log=function(e){for(var t="",n=1;n<arguments.length;n++)t+=" "+argument[n];this.enable_log&&window.console.log("HYMNAL | "+this.getSlug()+" | ",e,t)},t.prototype.render=function(){if(adCallbacks.performBeforeRender(this),this._triggerLifecycleEvent("initializing"),this._elementToReplace||(this._elementToReplace=this.findElement()),this._elementToReplace){var t=_.isString(this._elementToReplace)?$(this._elementToReplace).first():this._elementToReplace;this.getConfigurationFromDataAttributes(t),this.determineClickthroughUrl(),this.selectVariant(this.variantID),this.addClassesToHtmlElement(),e.Events.whenLive(this.defineBreakpoint.bind(this)),this.disableSlotRefresh&&e.Events.whenLive(function(){e.Events.requestRefreshEligibility("disable")}),this.addImpressionTrackers(),this.replaceAdServerVariablesInDesignHtml();var n=$(this.content.html);n.attr("data-hymnal-id",this.id);for(var i=t[0],o=0;o<i.attributes.length;o++){var a=i.attributes[o];a.specified&&a.name.startsWith("data-hymnal")&&n.attr(a.name,a.value)}if(t.replaceWith(n),this._element=n,this.content.css){this._head=this._head||$("head");var r=$('<style type="text/css" data-for-hymnal-ad="'+this.getSlug()+'">'+this.content.css+"</style>");this._head.append(r)}if(this._designSetupFunction&&this._designSetupFunction(this.variantID),this.automatic_clickthrough){var s=this;$(this._element).find("#athena-click, .athena-click").click(function(e){e.stopPropagation(),e.preventDefault(),s.clickthrough()})}}var l=!1,d=(e.ConcertConfig.get("partner",null),e.ConcertConfig.get("preambleHidden",!1)),c=e.ConcertConfig.get("preambleTextHidden",!1),g=e.ConcertConfig.get("preambleLogoHidden",!1),u=e.ConcertConfig.get("preambleLogoLink");if(this.userFeedbackHidden=e.ConcertConfig.get("feedbackEnabled",!1),this._element&&this._element.get(0)&&this._element.get(0).classList)var l=this._element.get(0).classList.contains("ad__has-preamble");this.preambleEnabled&&l&&!d&&(this._addConcertPreamble(g,c,this.preambleOverlay),this._concertLogoClickThrough(u)),this.renderInIframe&&e.Moat.trackElement(this._element[0]),this._triggerLifecycleEvent("render"),this._configureStandardEngagementDetection(),this._wrapUrlsWithClickthroughHandler(),adCallbacks.performAfterRender(this)},t.prototype.trackElement=function(t){e.Moat.trackElement(t)},t.prototype.windowIsLandscape=function(){return e.Events.get("windowWidth")>e.Events.get("windowHeight")},t.prototype.defineBreakpoint=function(){if(document.body.classList.contains("in-hymnal-preview"))return this.listenForFakeBreakpointChange();e.Events.onChange("windowWidth",this.updateBreakpoint.bind(this));var t=e.Events.get("windowWidth"),n=[];for(var i in this.breakpoints)t>=this.breakpoints[i][0]&&t<=this.breakpoints[i][1]&&n.push("is-"+i);var o=this.windowIsLandscape()?"is-landscape":"is-portrait";n.push(o),n.forEach(function(e){document.body.classList.add(e)})},t.prototype.updateBreakpoint=function(e,t){var n=[],i=[];for(var o in this.breakpoints)e>=this.breakpoints[o][0]&&e<=this.breakpoints[o][1]?n.push("is-"+o):i.push("is-"+o);var a,r=["is-landscape","is-portrait"];a="string"==typeof t?Math.max(0,r.indexOf(t)):this.windowIsLandscape()?0:1,n.push(r.splice(a,1)[0]),i.push(r[0]);for(var s=Math.max(n.length,i.length),l=0;l<s;l++)i[l]&&document.body.classList.remove(i[l]),n[l]&&document.body.classList.add(n[l])},t.prototype.listenForFakeBreakpointChange=function(){try{var e=window.frameElement.parentElement}catch(t){var e=document.body}e.addEventListener("previewResize",function(e){if(e&&e.detail&&this.breakpoints[e.detail.breakpoint]){var t=this.breakpoints[e.detail.breakpoint][0],n="mobile"===e.detail.breakpoint?"is-portrait":"is-landscape";this.updateBreakpoint(t,n)}}.bind(this))},t.prototype.getConfigurationFromDataAttributes=function(e){this.legacyDfpCombinedUrls=$.trim(e.attr("data-hymnal-ad-config-click-through-url")),this.legacyDfpClickUrl=$.trim(e.attr("data-hymnal-click-through-prefix")),this.dfpClickUrl=$.trim(e.attr("data-hymnal-dfp-click-url")),this.dfpDestUrl=$.trim(e.attr("data-hymnal-dfp-dest-url")),this.adUnitID=e.attr("data-hymnal-ad-unit-id"),this.siteID=e.attr("data-hymnal-site-id"),this.variantID=e.attr("data-hymnal-design-variant-id"),this.lineItemID=e.attr("data-hymnal-dfp-line-item-id"),this.creativeID=e.attr("data-hymnal-dfp-creative-id"),this.configData=e.data(),"undefined"!=typeof this.variantID&&"undefined"!=typeof this.fields[this.variantID]||(this.variantID=Object.keys(this.fields)[0]),this.network=e.attr("data-hymnal-network"),this.entryType=e.attr("data-hymnal-entry-type"),(this.getTestMode()||""===this.network)&&(this.network=this.guessNetworkFromURL()),this.adServerVariables.clickthrough_url=this.clickthroughUrl,this.adServerVariables.ad_unit_id=this.adUnitID,this.adServerVariables.site_id=this.siteID,this.adServerVariables.network=this.network,this.adServerVariables.entry_type=this.entryType},t.prototype._combineUrlsSafely=function(e,t,n){return""===$.trim(e)?t:-1!==e.indexOf(t)||-1!==e.indexOf(encodeURI(t))?e:(n&&"function"==typeof encodeURI&&(t=encodeURI(t)),e+t)},t.prototype.determineClickthroughUrl=function(){var e=this.clickthroughUrl;if(""!==this.legacyDfpCombinedUrls&&(e=this.legacyDfpCombinedUrls,""!==this.legacyDfpClickUrl)){var t=this.legacyDfpCombinedUrls.substring(this.legacyDfpClickUrl.length,this.legacyDfpCombinedUrls.length);e=this._combineUrlsSafely(this.legacyDfpClickUrl,t,!0)}""!==this.dfpClickUrl&&""!==this.dfpDestUrl&&(e=this._combineUrlsSafely(this.dfpClickUrl,this.dfpDestUrl,!1)),window.clickTag&&(e=window.clickTag),this.clickthroughUrl=e,this.adServerVariables.clickthrough_url=this.clickthroughUrl},t.prototype.selectVariant=function(e){var t=(this.content.all_html[e]||"").trim(),n=(this.content.all_css[e]||"").trim();this.content.html=t.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.content.css=n.replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\//g,"/"),this.fields=this.fields[e]},t.prototype.guessNetworkFromURL=function(){for(var e=["verge","polygon","eater","racked","vox","curbed"],t=0;t<e.length;t++)if(location.host.indexOf(e[t])>-1)return e[t];return"sbn"},t.prototype.replaceAdServerVariablesInDesignHtml=function(){for(var e in this.adServerVariables){var t=new RegExp("\\$AD_SERVER\\["+e+"\\]","g");this.content.html=this.content.html.replace(t,this.adServerVariables[e])}},t.prototype._wrapUrlsWithClickthroughHandler=function(){for(var e=$(this._element).find("a[data-wrap-url], a[wrap-url]"),t=0;t<e.length;t++){var n=e.get(t);n.href=this.wrapUrlWithClickTracker(n.href)}},t.prototype.addClassesToHtmlElement=function(){for(var e="",t=["harmony-","hymnal-"],n=[this.network,this.entryType],i=0;i<n.length;i++)if("undefined"!=typeof n[i]&&n[i].length>0)for(var o=0;o<t.length;o++)e+=t[o]+n[i]+" ";this.log("adding classes to html "+e),$("html").addClass(e)},t.prototype.popUp=function(e){var t=this.getElement();if(t){var n=t.find(".hymnal-popup-message-container");0===n.length&&(n=$("<div>").addClass("hymnal-popup-message-container").css({position:"absolute",top:"0",left:"0","z-index":"1000"}).appendTo(t));var i=$("<span>").addClass("hymnal-popup-message").css({display:"none","border-radius":"5px","background-color":"white",color:"#333","float":"left",margin:"8px","margin-bottom":"0px",padding:"3px",clear:"both","user-select":"none",opacity:"0.75"}).text(e);n.append(i),i.fadeIn(),_.delay(function(){i.slideUp(500,function(){i.remove()})},4e3),_.delay(function(){0===n.find(".hymnal-popup-message").length&&n.remove()},5e3)}else window.console&&console.log&&console.log("Ad["+this.getSlug()+"] - "+e+" (pop up message not available)")},t.prototype.addImpressionTrackers=function(){var e=this.trackers.filter(function(e){return"impression"===e.event})[0];if(e)for(var t=e.urls,n=0;n<t.length;n++)this.addTrackerImage(t[n])},t.prototype.addTrackerImage=function(e){if(!(this.trackedURLs.indexOf(e)>=0)){this.trackedURLs.push(e);var t={pattern:/%%CACHEBUSTER%%|%25%25CACHEBUSTER%25%25/,replace:Math.ceil(1e11*Math.random())};this.log("Replacing cachebuster macro with"+t.replace+"in"+e);var n=e.replace(t.pattern,t.replace),i=document.createElement("img");i.setAttribute("src",n),i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("data-tracker-hymnal-ad-id",this.id),i.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;");var o=document.body;o.insertBefore(i,o.firstChild),console&&console.log&&console.log("adding image ",e,this.trackedURLs)}},t.prototype.findElement=function(){var e=$('[data-hymnal-ad-id="'+this.id+'"]');if(0===e.length&&"string"==typeof this.type){var t=this.type.charAt(0).toUpperCase()+this.type.slice(1),n=this.design_template.charAt(0).toUpperCase()+this.design_template.toLowerCase().slice(1),i='[data-cb-ad-id="'+t+'"],[data-cb-ad-id="'+n+'"]';-1!==this.type.toLowerCase().indexOf("athena")&&(i+=',[data-cb-ad-id="Mid body"]');var o=$(i).first();o.length>0&&(e=$("<div>").attr("data-hymnal-ad-id",this.id),o.append(e))}return e=e.length>0?e.first():null},t.prototype.getElement=function(){return this._element},t.prototype.getSlug=function(){if(this.slug)return this.slug;var e=[];return this.brand&&e.push((this.brand||"").toLowerCase().replace(" ","_")),this.id&&e.push(this.id),this.slug=e.join("_"),this.slug},t.prototype.getTestMode=function(){var e=this.settings.window;return!(!e.Hymnal||!e.Hymnal.settings||!0!==e.Hymnal.settings.testMode)||this.settings.testMode},t.prototype.setTestMode=function(e){this.settings.testMode=e},t.prototype.engage=function(e){this.log("Engagement: "+e),this.getTestMode()?this.popUp("Engagement: "+e):_.each(this._engagementEventListeners,function(t){_.isFunction(t)&&t(e)})},t.prototype.clickThrough=t.prototype.clickthrough=function(e){this.engage("clickthrough");var t=this.clickthroughUrl;"string"==typeof e&&(t=this.wrapUrlWithClickTracker(e)),t&&(this.getTestMode()?this.popUp("Open URL: "+t):(this.log("Opening URL in new window: "+t),this.settings.window.open(t,"_blank")))},t.prototype.wrapUrlWithClickTracker=function(e){var t=this.dfpClickUrl,n=!1;if(t&&this.dfpDestUrl){var i=t.indexOf(this.dfpDestUrl);-1!=i&&(t=t.substr(0,i))}return t||(n=!0,t=this.legacyDfpClickUrl),t.length>0?this._combineUrlsSafely(t,e,n):e},t.prototype._addConcertPreamble=function(t,n){if(!this.preambleMarkup)return this.log("Preamble markup unavailable, Concert Preamble will not be added."),!1;var i=document.createElement("div");i.innerHTML=this.preambleMarkup;var o=i.firstElementChild;if(this.getElement().get(0)){var a=this.getElement().get(0);a.insertBefore(o,a.firstElementChild),this.preambleOverlay||(a.style.paddingTop="20px",a.querySelector(".ad__content").style.top="20px")}var r=a.querySelector(".ad__feedback");r&&e.FeedbackForm&&this.showFeedbackForm&&!this.userFeedbackHidden?e.FeedbackForm.InitForm(r):r.classList.add("ad__feedback-disabled"),t&&this._hideConcertLogo(),n&&this._hidePreambleText()},t.prototype._concertLogoClickThrough=function(e){var t=this.getElement().get(0);if(!t||!t.querySelector(".ad__concert-link"))return!1;var n=t.querySelector(".ad__concert-link");e&&(n.href=e),n.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),this.settings.window.open(n.href,"_blank")}.bind(this))},t.prototype._hideConcertLogo=function(){this._hidePreambleElement(".ad__concert-link")},t.prototype._hidePreambleText=function(){this.getElement().get(0).querySelector(".ad__callout-wrapper").classList.add("hide-preamble-after"),this._hidePreambleElement(".ad__callout-wrapper p")},t.prototype._hidePreambleElement=function(e){var t=this.getElement().get(0),n=t.querySelector(e);if(!t||!n)return!1;n.style.display="none"},t.prototype._triggerLifecycleEvent=function(e){this.log("Lifecycle: "+e);var t=this;_.each(this._lifecycleEventListeners,function(n){n(e,t)})},t.prototype._configureStandardEngagementDetection=function(){var n=this.getElement(),i=(this.getSlug(),this),o=function(){i.viewRecorded||(i.engage("view"),n.addClass(t.cssClasses.viewed),i.viewRecorded=!0)};i.manual_view_impression&&(i.log("Suppressing automatic view setup"),o=function(){}),n&&n.length>0&&e.Events.whenLive(function(){e.util.inViewport()?o():e.Events.onScroll(function(){e.util.inViewport()&&!i.viewRecorded&&o()})})},t}()}(HymnalLib),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){e.DefaultEvents||function(){e.DefaultEvents=function(){function e(e){return e=e||{},this._name=e.name,t}var t=function(e,t){var n="hymnal_"+e,i=new CustomEvent(n,{bubbles:!0,detail:{ad:t}});document.dispatchEvent(i)};return e}()}()}(HymnalLib),function(e){e.Prefix||(e.Prefix=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return{css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}())}(HymnalLib),function(e){if("object"!=typeof e&&window.PreviewErrorHandling)return void window.PreviewErrorHandling.javascriptError(new Error("Hymnal must be the Hymnal library"));e.Video=function(){"use strict";function t(){if(I)for(var e=I.textTracks(),t=0;t<e.length;t++){var n=e[t];if("english"===n.label)return n}}function n(e){_?e.call(this):A.push(["load",e])}function i(e){y?e.call(this):A.push(["playbackReady",e])}function o(){return new Promise(function(e){if(I)return e();var t=document.createElement("video");t.setAttribute("class","video-js"),t.setAttribute("data-setup","{}"),t.setAttribute("preload","auto"),(R||H)&&(t.playsInline=!0),R&&(t.autoplay=!0,i(function(){I&&I.muted(!0)})),t.controls=G,t.classList.add("video-js"),t.id=v,b.appendChild(t),e()})}function a(){return new Promise(function(e){I=videojs(v),I.ready(function(){g("load"),I.tech_.hls}),I.on("loadedmetadata",function(){g("metadataloaded")}),I.on("ended",function(){g("played"),g("quartile",this,["100"]),W=0}),I.on("play",function(){S=!1,w=!0,g("play")}),I.on("timeupdate",function(){g("timeupdate",this,[I.currentTime()]);var e=[.25,.5,.75];if(I.currentTime()/k>=e[W]){var t=(100*e[W]).toString();W++,g("quartile",this,[t])}}),I.on("pause",function(){g("pause")}),I.on("fullscreenchange",function(){g("fullscreenChanged",this,[I.isFullscreen()])}),I.on("volumechange",function(){g("volumechange"),g(I.muted()?"mute":"unmute")}),I.on("durationchange",function(){k=I.duration(),g("durationchange")}),e()})}function r(t){var n=t||0;e.Events.onChange("scrollPercent",function(e){!(e<=-.3||e>=1.3)||I.paused()||S||(S=!0,setTimeout(function(){I.pause()},n))})}function s(){var e=!1;if(L)return!0;f.querySelector(".vjs-control-bar").addEventListener(C,function(){e=!0});var t=!1;"touchend"===C&&I.on("touchmove",function(){t=!0}),I.on(C,function(){return t?(t=!1,!0):e?(e=!1,!0):I.paused()&&B?B():!I.paused()&&"touchend"===C&&B?(this.pause(),B()):void 0}),L=!0}function l(){return new Promise(function(e,t){if(!Y.getCurrentVideo())return t("There is no video to load.");n(function(){I.src([{type:"application/x-mpegURL",src:Y.getCurrentVideo().hls},{type:"video/mp4",src:Y.getCurrentVideo().mp4}]),Y.getCurrentVideo().vtt&&I.addRemoteTextTrack({kind:"captions",src:Y.getCurrentVideo().vtt,srclang:"en",label:"english","default":!0},!1),setTimeout(function(){y=!0,g("playbackReady")},0)}),e()})}function d(){c()&&i(function(){var e={id:v,adTagUrl:X,debug:x,adWillPlayMuted:!0,adsRenderingSettings:{}};I.ima(e)})}function c(){return Boolean(X)}function g(e,t,n){t=t||this;for(var i=A.filter(function(t){return t[0]===e&&"function"==typeof t[1]}).map(function(e){return e[1]}),o=0;o<i.length;o++)try{i[o].apply(t,n)}catch(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)}}function u(){b.style.paddingTop=Z+"%"}function h(){if(f.querySelector(v+"_sizing"))return!0;b=document.createElement("div"),b.id=v+"_sizing",b.style.position="relative",f.appendChild(b),u()}function m(){v="hialisha"+Math.random().toString(36).substring(5)}function p(){I.on("loadedmetadata",function(){var t=I.currentSrc(),n=b.closest("[data-hymnal-id]"),i={level1:n.getAttribute("data-hymnal-dfp-advertiser-id")||"",level2:n.getAttribute("data-hymnal-dfp-order-id")||"",level3:n.getAttribute("data-hymnal-dfp-line-item-id")||"",level4:n.getAttribute("data-hymnal-dfp-creative-id")||"",slicer1:n.getAttribute("data-hymnal-ad-id")||"",slicer2:n.getAttribute("data-hymnal-design-variant-id")||""};e.MoatAnalytics.init(N,b,i,k,t)})}var C="ontouchend"in document.documentElement?"touchend":"click",I=!1,f=!1,b=!1,v="",A=[],y=!1,w=!1,Z=56.25,G=!1,W=0,V=1,k=0,R=!1,H=!1,B=null,L=!1,S=!1,E=!1,Y=null,x=!1,X=null,_=!1,F=function(t,n,i){i=void 0!==i?i:{},!t&&window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(new Error("First Hymnal.Video argument must be an HTML element.")),f=t,Y=new e.VideoPlaylist(n),i&&i.autoplay&&(R=i.autoplay,H=!0),i&&i.playsInline&&(H=i.playsInline),i&&i.prerollEnabled&&(E=i.prerollEnabled),i&&i.vastUrl&&(X=i.vastUrl),c()&&(i.controlSettings=i.controlSettings||{},i.controlSettings.hideControlsWrapper=!0),i&&i.vastDebuggingEnabled&&(x=!0),m(),h();var r=new e.VideoJsLoader(c());return e.VideoController.init(this,b,i.controlSettings),o().then(r.loadFiles).then(function(){_=!0,a()}).then(p).then(function(){if(Y.hasMultipleVideos())return!0;l()}).then(d)["catch"](function(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)}),N},N=F.prototype={};return N.addSource=function(e,t){Y.addSource(e,t)},N.setInitialVideo=function(e){if(Y.getVideo(e))Y.setCurrentVideo(e),n(l);else if(window.PreviewErrorHandling){var t="The video "+e+" has not been registered with the player.";window.PreviewErrorHandling.javascriptError(new Error(t))}},N.play=function(e){e&&Y.hasMultipleVideos()&&!Y.isSameAsCurrentVideo(e)&&(Y.setCurrentVideo(e),l()),i(function(){I.play()}.bind(this))},N.pause=function(){I.pause()},N.pauseOnExitViewport=function(e){r(e)},N.isPlaying=function(){return I&&!I.paused()},N.onPlayerLoad=function(e){n(e)},N.onVideoLoad=function(e){i(e)},N.onMetadataLoad=function(e){A.push(["metadataloaded",e])},N.onPause=function(e){A.push(["pause",e])},N.onPlay=function(e){A.push(["play",e])},N.onQuartile=function(e){A.push(["quartile",e])},N.onTimeUpdate=function(e){A.push(["timeupdate",e])},N.getDuration=function(){return k},N.onComplete=function(e){A.push(["played",e])},N.onDone=N.onComplete,N.onFullscreenChanged=function(e){A.push(["fullscreenchange",e])},N.onVolumeChange=function(e){A.push(["volumechange",e])},N.onMute=function(e){A.push(["mute",e])},N.onUnmute=function(e){A.push(["unmute",e])},N.onDurationChange=function(e){A.push(["durationchange",e])},N.toggleFullscreen=function(e){e?I.requestFullscreen():I.exitFullscreen()},N.setVolume=function(e){i(function(){I.volume(e)}.bind(this))},N.getVolume=function(){return y&&!I.muted()?I.volume():0},N.mute=function(){i(function(){V=I.volume(),I.muted(!0)}.bind(this))},N.unMute=function(){i(function(){I.muted(!1),I.volume(V)}.bind(this))},N.unmute=N.unMute,N.replay=function(){i(function(){I.currentTime(0),this.play()}.bind(this))},N.addClickThrough=function(e){B=e,i(s)},N.addClickthrough=N.addClickThrough,N.isVerticalVideo=function(){Z=16/9*100,u()},N.controls=function(e){i(function(){I.controls=e||!I.controls})},N.getVideoId=function(){return Y.getCurrentVideoId()},N.isMuted=function(){return I.muted()},N.hasCaptions=function(){return!!Y.getCurrentVideo().vtt},N.hasCaptionsOn=function(){var e=t();return!!e&&"showing"===e.mode},N.showCaptions=function(){var e=t();e&&(e.mode="showing")},N.hideCaptions=function(){var e=t();e&&(e.mode="hidden")},F}()}(HymnalLib),function(e){function t(e,t,n){n=void 0!==n?n:{};var i=document.createElement("div");i.id="ad__video-controller-v2",
i.innerHTML=['<div id="ad__video-cover-v2"></div>','<div id="ad__controls-left-v2">','<svg id="ad__progress-bar-v2" width="100px" height="100px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="progress-circle" d="M 50,50 m 0,-47 a 47,47 0 1 1 0,94 a 47,47 0 1 1 0,-94" stroke="#FFFFFF" stroke-width="4" fill-opacity="0" stroke-dasharray="295.416" stroke-dashoffset="0"></path></svg>','<button id="ad__play-pause-v2" type="button">','<svg id="play-icon" width="23px" height="28px" viewBox="0 0 23 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Play Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(0.554429, -0.385476)" fill="#FFFFFF"><path d="M12.417663,4.21689931 L24.6382793,24.2936262 C24.9254381,24.765387 24.7757885,25.3806129 24.3040277,25.6677717 C24.1473619,25.7631334 23.9674875,25.8135731 23.7840808,25.8135731 L-0.65715193,25.8135731 C-1.20943668,25.8135731 -1.65715193,25.3658579 -1.65715193,24.8135731 C-1.65715193,24.6301663 -1.60671227,24.450292 -1.51135049,24.2936262 L10.7092659,4.21689931 C10.9964246,3.74513847 11.6116505,3.59548893 12.0834114,3.8826477 C12.2199396,3.96575182 12.3345588,4.0803711 12.417663,4.21689931 Z" transform="translate(11.563464, 14.313573) rotate(-270.000000) translate(-11.563464, -14.313573)"></path></g></g></svg>','<svg id="pause-icon" width="24px" height="25px" viewBox="0 0 24 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Pause Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pause-button" fill="#FFFFFF" fill-rule="nonzero"><rect x="0" y="0" width="8" height="25" rx="1"></rect><rect x="16" y="0" width="8" height="25" rx="1"></rect></g></g></svg>',"</button>","</div>",'<div id="ad__controls-right-v2">','<button id="ad__volume-v2" type="button">','<svg id="volume-icon" width="36px" height="28px" viewBox="0 0 36 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Volume Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-0.053082, -0.754685)" fill="#FFFFFF"><g id="sound-on-icon" transform="translate(23.000000, 2.620742)" fill-rule="nonzero"><path d="M0,2.82107198 C5.2523271,2.82107198 9.51017949,7.07892437 9.51017949,12.3312515 C9.51017949,17.5835786 5.2523271,21.841431 0,21.841431 L0,23.841431 C6.3568966,23.841431 11.5101795,18.6881481 11.5101795,12.3312515 C11.5101795,5.97435487 6.3568966,0.821071975 0,0.821071975 L0,2.82107198 Z"></path><path d="M0,16.421491 C2.25897691,16.421491 4.09023952,14.5902284 4.09023952,12.3312515 C4.09023952,10.0722746 2.25897691,8.24101195 0,8.24101195 L0,16.421491 Z"></path></g><g id="sound-off-icon" transform="translate(23.000000, 8.120742)"><path d="M6.43394777,5.30148101 L10.6279044,1.10752437 C11.0184287,0.717000083 11.6515937,0.717000083 12.042118,1.10752437 C12.4326423,1.49804867 12.4326423,2.13121365 12.042118,2.52173794 L7.84816133,6.71569457 L12.042118,10.9096512 C12.4326423,11.3001755 12.4326423,11.9333405 12.042118,12.3238648 C11.6515937,12.7143891 11.0184287,12.7143891 10.6279044,12.3238648 L6.43394777,8.12990814 L2.23999113,12.3238648 C1.84946684,12.7143891 1.21630186,12.7143891 0.825777569,12.3238648 C0.435253278,11.9333405 0.435253278,11.3001755 0.825777569,10.9096512 L5.01973421,6.71569457 L0.825777569,2.52173794 C0.435253278,2.13121365 0.435253278,1.49804867 0.825777569,1.10752437 C1.21630186,0.717000083 1.84946684,0.717000083 2.23999113,1.10752437 L6.43394777,5.30148101 Z"></path></g><g><path d="M5.87942128,4.62074207 L14.3338651,4.62074207 C14.8861499,4.62074207 15.3338651,5.06845732 15.3338651,5.62074207 L15.3338651,11.3246204 C15.3338651,11.5390699 15.4028042,11.7478391 15.5305084,11.9201185 L23.7623207,23.0252439 C24.0912052,23.4689256 23.9981438,24.0952142 23.5544622,24.4240988 C23.3821827,24.551803 23.1734135,24.6207421 22.958964,24.6207421 L-2.71945424,24.6207421 C-3.27173899,24.6207421 -3.71945424,24.1730268 -3.71945424,23.6207421 C-3.71945424,23.4062926 -3.65051521,23.1975234 -3.52281093,23.0252439 L4.68277797,11.9554952 C4.81048225,11.7832157 4.87942128,11.5744465 4.87942128,11.359997 L4.87942128,5.62074207 C4.87942128,5.06845732 5.32713653,4.62074207 5.87942128,4.62074207 Z" transform="translate(10.119832, 14.620742) rotate(-90.000000) translate(-10.119832, -14.620742)"></path></g></g></g></svg>',"</button>",'<button id="ad__captions-v2" type="button">','<svg id="captions-icon" width="33px" height="26px" viewBox="0 0 33 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Captions Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-0.083802, 0.745315)" fill="#FFFFFF" fill-rule="nonzero"><path d="M2.82314732,3.0493135 L2.82314732,22.1921706 C2.82314732,22.7444554 3.27086257,23.1921706 3.82314732,23.1921706 L29.8231473,23.1921706 C30.3754321,23.1921706 30.8231473,22.7444554 30.8231473,22.1921706 L30.8231473,3.0493135 C30.8231473,2.49702875 30.3754321,2.0493135 29.8231473,2.0493135 L3.82314732,2.0493135 C3.27086257,2.0493135 2.82314732,2.49702875 2.82314732,3.0493135 Z M2.82314732,0.0493134971 L30.8231473,0.0493134971 C31.9277168,0.0493134971 32.8231473,0.944743997 32.8231473,2.0493135 L32.8231473,23.1921706 C32.8231473,24.2967401 31.9277168,25.1921706 30.8231473,25.1921706 L2.82314732,25.1921706 C1.71857782,25.1921706 0.823147316,24.2967401 0.823147316,23.1921706 L0.823147316,2.0493135 C0.823147316,0.944743997 1.71857782,0.0493134971 2.82314732,0.0493134971 Z"></path><g transform="translate(8.823147, 7.120742)"><path d="M7.06928874,7.00321119 C7.06928874,8.79266386 5.48677455,10.2433019 3.53464437,10.2433019 C1.58251419,10.2433019 0,8.79266386 0,7.00321119 C0,6.99684677 2.00181633e-05,3.75039597 5.99999215e-05,3.74404018 C0.0112615005,1.96336744 1.58945719,0.52302984 3.53464437,0.52302984 C5.47995576,0.52302984 7.05822879,1.96355139 7.06923087,3.74438129 L5.5692595,3.75364821 C5.56353485,2.82703996 4.68174532,2.02302984 3.53464437,2.02302984 C2.3876223,2.02302984 1.5058588,2.82693817 1.50003032,3.75347589 C1.50003745,4.15229232 1.50003745,4.15229232 1.50001501,5.3736409 C1.5000025,6.59344039 1.5000025,6.59344039 1.5,7.00321119 C1.5,7.93369376 2.38320884,8.74330186 3.53464437,8.74330186 C4.6860799,8.74330186 5.56928874,7.93369376 5.56928874,7.00321119 L7.06928874,7.00321119 Z"></path><path d="M15.9058997,6.9627818 C15.9058997,8.75223447 14.3233855,10.2028725 12.3712553,10.2028725 C10.4191251,10.2028725 8.83661093,8.75223447 8.83661093,6.9627818 C8.83661093,6.95641739 8.83663095,3.70996658 8.83667093,3.70361079 C8.84787243,1.92293805 10.4260681,0.482600453 12.3712553,0.482600453 C14.3165667,0.482600453 15.8948397,1.923122 15.9058418,3.7039519 L14.4058704,3.71321882 C14.4001458,2.78661058 13.5183562,1.98260045 12.3712553,1.98260045 C11.2242332,1.98260045 10.3424697,2.78650878 10.3366413,3.7130465 C10.3366484,4.11186294 10.3366484,4.11186294 10.3366259,5.33321151 C10.3366134,6.553011 10.3366134,6.553011 10.3366109,6.9627818 C10.3366109,7.89326437 11.2198198,8.70287248 12.3712553,8.70287248 C13.5226908,8.70287248 14.4058997,7.89326437 14.4058997,6.9627818 L15.9058997,6.9627818 Z"></path></g></g></g></svg>',"</button>",'<button id="ad__minmax-v2" type="button">','<svg id="minmax-icon" width="28px" height="29px" viewBox="0 0 28 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Minmax Icon</title><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(0.030119, 0.745315)" fill="#FFFFFF" fill-rule="nonzero"><g id="max-icon" transform="translate(-0.000000, 0.000000)"><path d="M3.44278989,19.0571526 L10.6785305,26.2928932 C11.0690547,26.6834175 11.0690547,27.3165825 10.6785305,27.7071068 C10.2880062,28.0976311 9.65484119,28.0976311 9.26431689,27.7071068 L2.02857632,20.4713662 L2.02857632,27 C2.02857632,27.5522847 1.58086107,28 1.02857632,28 C0.476291575,28 0.028576325,27.5522847 0.028576325,27 L0.028576325,18.9610479 C0.028576325,17.9095556 0.880979247,17.0571526 1.93247154,17.0571526 L9.97142368,17.0571526 C10.5237084,17.0571526 10.9714237,17.5048679 10.9714237,18.0571526 C10.9714237,18.6094374 10.5237084,19.0571526 9.97142368,19.0571526 L3.44278989,19.0571526 Z" transform="translate(5.500000, 22.528576) rotate(-90.000000) translate(-5.500000, -22.528576)"></path><path d="M20.3541815,2.15006988 L27.5899221,9.38581045 C27.9804464,9.77633474 27.9804464,10.4094997 27.5899221,10.800024 C27.1993978,11.1905483 26.5662328,11.1905483 26.1757086,10.800024 L18.939968,3.56428344 L18.939968,10.0929172 C18.939968,10.645202 18.4922527,11.0929172 17.939968,11.0929172 C17.3876832,11.0929172 16.939968,10.645202 16.939968,10.0929172 L16.939968,2.05396509 C16.939968,1.0024728 17.7923709,0.150069876 18.8438632,0.150069876 L26.8828153,0.150069876 C27.4351001,0.150069876 27.8828153,0.597785126 27.8828153,1.15006988 C27.8828153,1.70235463 27.4351001,2.15006988 26.8828153,2.15006988 L20.3541815,2.15006988 Z" transform="translate(22.411392, 5.621494) rotate(-270.000000) translate(-22.411392, -5.621494)"></path></g><g id="min-icon" transform="translate(-0.000000, 0.000000)"><path d="M3.44278989,19.0571526 L10.6785305,26.2928932 C11.0690547,26.6834175 11.0690547,27.3165825 10.6785305,27.7071068 C10.2880062,28.0976311 9.65484119,28.0976311 9.26431689,27.7071068 L2.02857632,20.4713662 L2.02857632,27 C2.02857632,27.5522847 1.58086107,28 1.02857632,28 C0.476291575,28 0.028576325,27.5522847 0.028576325,27 L0.028576325,18.9610479 C0.028576325,17.9095556 0.880979247,17.0571526 1.93247154,17.0571526 L9.97142368,17.0571526 C10.5237084,17.0571526 10.9714237,17.5048679 10.9714237,18.0571526 C10.9714237,18.6094374 10.5237084,19.0571526 9.97142368,19.0571526 L3.44278989,19.0571526 Z" transform="translate(5.500000, 22.528576) rotate(-270.000000) translate(-5.500000, -22.528576)"></path><path d="M20.3541815,2.15006988 L27.5899221,9.38581045 C27.9804464,9.77633474 27.9804464,10.4094997 27.5899221,10.800024 C27.1993978,11.1905483 26.5662328,11.1905483 26.1757086,10.800024 L18.939968,3.56428344 L18.939968,10.0929172 C18.939968,10.645202 18.4922527,11.0929172 17.939968,11.0929172 C17.3876832,11.0929172 16.939968,10.645202 16.939968,10.0929172 L16.939968,2.05396509 C16.939968,1.0024728 17.7923709,0.150069876 18.8438632,0.150069876 L26.8828153,0.150069876 C27.4351001,0.150069876 27.8828153,0.597785126 27.8828153,1.15006988 C27.8828153,1.70235463 27.4351001,2.15006988 26.8828153,2.15006988 L20.3541815,2.15006988 Z" transform="translate(22.411392, 5.621494) rotate(-90.000000) translate(-22.411392, -5.621494)"></path></g></g></g></svg>',"</button>","</div>"].join(""),t.appendChild(i);var o=document.getElementById("ad__video-cover-v2"),a=document.getElementById("ad__controls-left-v2"),r=document.getElementById("ad__controls-right-v2"),s=document.getElementById("progress-circle"),l=document.getElementById("ad__play-pause-v2"),d=document.getElementById("play-icon"),c=document.getElementById("pause-icon"),g=document.getElementById("ad__volume-v2"),u=document.getElementById("sound-on-icon"),h=document.getElementById("sound-off-icon"),m=document.getElementById("ad__captions-v2");n.enableCover&&o.addEventListener("click",function(){e.isPlaying()?(e.pause(),n.enableClickThrough&&n.enableClickThrough()):e.play()}),l.addEventListener("click",function(){e.isPlaying()?e.pause():e.play()}),g.addEventListener("click",function(){e.isMuted()?e.unmute():e.mute()}),m.addEventListener("click",function(){e.hasCaptionsOn()?(e.hideCaptions(),m.style.opacity="0.5"):(e.showCaptions(),m.style.opacity="1")}),e.onPlay(function(){i.style.display="block",d.style.display="none",c.style.display="block",e.isMuted()?(u.style.display="none",h.style.display="block"):(u.style.display="block",h.style.display="none"),e.hasCaptions()||(m.style.display="none"),n.hideControlsWrapper&&(i.style.display="none"),n.hideControls&&(a.style.display="none",r.style.display="none",e.hasCaptionsOn()&&e.hideCaptions())}),e.onPause(function(){d.style.display="block",c.style.display="none"}),e.onTimeUpdate(function(t){var n=s.getAttribute("stroke-dasharray"),i=n/e.getDuration()*t;s.style.strokeDashoffset=n-i,e.isPlaying()||(s.style.strokeDashoffset=getComputedStyle(s).strokeDashoffset)}),e.onMute(function(){u.style.display="none",h.style.display="block"}),e.onUnmute(function(){u.style.display="block",h.style.display="none"})}e.VideoController={init:t}}(HymnalLib),function(e){function t(e){if(H.connectionEstablished)try{e()}catch(e){g(e)}else H.subs.connectionEstablished.push(e);return G()}function n(){return H.data.current}function i(e,t,n){return H.connectionEstablished?(n?H.subs[e].push(I(n,t)):H.subs[e].push(t),this):(G(i,[e,t,n]),this)}function o(e){return"function"==typeof e&&i("scrollOffset",e)}function a(e){if(!H.connectionEstablished)return G(a,[e]),this;if(Z(e))return H.data.current[e];var t="<code>"+e+"</code> is not a known Hymnal.Events property. You can get the following data: <code>"+Object.keys(H.data.current).join(", ")+"</code>";g(new Error(t))}function r(){var e=3!==arguments.length||Array.isArray(arguments[2]),t="";return"string"===(arguments[0],!1)&&(t+="The first argument to Hymnal.Events.onChange should be the name of the value you wish to track. \n"),0!==t.length||Z(arguments[0])||(t+="<code>"+arguments[0]+"</code> is not a known Hymnal.Events property. You can subscribe to changes on: <code>"+Object.keys(H.data.current).join(", ")+"</code> \n"),"function"!=typeof arguments[1]&&(t+="The second argument to Hymnal.Events.onChange should be the function that you want executed when the value changes. \n"),e||(t+="The third argument to Hymnal.Events.onChange should be an array with two values: the floor of the range and the celing of the range. \n"),t.length>0?g(new Error(t)):i.apply(this,arguments)}function s(e,t){if((!e||!t)&&window.console&&window.console.error)return console.error("ShallowQueue requires an event name and a callback to fire"),!1;Z(e)&&(H.subs[e+"Shallow"]=t)}function l(){for(var e=["windowWidth","windowHeight","documentHeight","scrollOffset","frameHeight","frameWidth","frameTopPos","framePosOnPage","scrollPercent","unisonTabBarVisibility","isUnison","scrollDirection"],t=H.data.current={},n=0;n<e.length;n++)t[e[n]]=R}function d(e){if(!e.token)return!1;H.token=e.token,window.addEventListener("message",function(e){var t=e.data.token&&e.data.token===H.token,n=e.data.sender&&"parent"===e.data.sender;if(!t||!n)return!1;if(e.data.type&&"turbo"===e.data.type)b(e.data.params);else{var i=H.data;i.previous?i.previous=i.current:(i.previous=i.current,h()),i.current=e.data.params,y()}})}function c(e){H.subs[e]&&H.subs[e].length&&H.subs[e].forEach(function(t){try{t(H.data.current[e])}catch(e){g(e)}}),H.subs[e+"Shallow"]&&"function"==typeof H.subs[e+"Shallow"]&&(H.subs[e+"Shallow"](),H.subs[e+"Shallow"]=null)}function g(e){H.throwErrorsToPreview?window.PreviewErrorHandling.javascriptError(e):window.console&&window.console.error&&console.log(e)}function u(){if(H.subs.connectionEstablished.length>0){var e=H.subs.connectionEstablished;do{try{e.shift()()}catch(e){g(e)}}while(e.length)}}function h(){for(var e in H.data.current)H.data.current.hasOwnProperty(e)&&(H.subs[e]=[]);H.connectionEstablished=!0,Date.now()>H.timeout&&G(null,null,!0)}function m(){var e=window.location;return e.origin?e.origin:e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}function p(t){var n={sender:"child",token:H.token};t&&(n.func=t),e.settings.inPreview&&(n.inIframe=!0),parent.postMessage(n,m())}function C(){if(H.connectionEstablished)return!0;try{parent&&parent.frameElement}catch(e){return console.log("This hymnal ad is in a sandboxed iframe that is not a safeframe. We can't finish rendering."),V()}return p(),Date.now()<H.timeout?setTimeout(C,50):void 0}function I(e,t){function n(e){if(e>=o&&e<=i)try{t.call(this,e)}catch(e){g(e)}}var i=Math.max(e[0],e[1]),o=Math.min(e[0],e[1]);return n.bind(this)}function f(e){if(!H.connectionEstablished)return G(f,[e]),this;H.data.turbo={cb:e,current:H.data.current.scrollPercent||0,previous:H.data.current.scrollPercent||0},p("turboMode")}function b(e){var t=H.data.turbo;if(t.previous=t.current,t.current=e,t.previous!==t.current)try{t.cb(t.current)}catch(e){g(e)}}function v(t){e.util.isSafeFrame||p(t+"RefreshEligibility")}function A(e,t){var n;switch(e){case"show":n="showUnisonTabBar";break;case"hide":n="hideUnisonTabBar";break;case"reset":n="resetToDefaultUnisonTabBar";break;default:return console.error('Allowed values for requestUnisonTabBar are "show", "hide", "reset".'),!1}t&&s("unisonTabBarVisibility",t),p(n)}function y(){var e=H.data;for(var t in e.current)e.current.hasOwnProperty(t)&&e.previous.hasOwnProperty(t)&&e.current[t]!==e.previous[t]&&c(t)}function w(){var e=$sf.ext.geom().win,t=$sf.ext.geom().self,n=($sf.ext.geom().exp,{windowWidth:e.w,windowHeight:e.h,frameHeight:t.h,frameWidth:t.w,unisonTabBarVisibility:R,isUnison:R,inViewport:t.iv>0,scrollOffset:t.t});for(var i in n)H.data.previous[i]!==n[i]&&(H.data.current[i]=n[i],c(i),H.data.previous[i]=n[i])}function Z(e){return H.data.current.hasOwnProperty(e)}function G(e,t,n){function i(){if(o=!1,Date.now()>=H.timeout&&!n)return!1;if(H.connectionEstablished){if(u(),B.length>0)do{var e=B.shift();e&&e[0].apply(this,e[1])}while(B.length>0);return!0}return setTimeout(i,50)}var o=!0;!H.connectionEstablished&&e&&B.push([e,t]),!H.connectionEstablished&&o&&(H.clearQueue=i()),n&&i()}function W(t){e.util.isSafeFrame||(window.PreviewErrorHandling&&(H.throwErrorsToPreview=!0),l(),d(t),(t.inIframe||e.settings.inPreview)&&C(),e.settings.inPreview&&window.addEventListener("resize",function(){var e=H.data,t={};for(key in e.current)e.current.hasOwnProperty(key)&&(t[key]=e.current[key]);e.previous=t,e.current.frameWidth=window.innerWidth||document.documentElement.clientWidth,e.current.frameHeight=window.innerHeight||document.documentElement.clientHeight,y()}))}function V(){H.data.previous={};var e={windowWidth:window.outerWidth,windowHeight:window.outerHeight,frameHeight:window.innerHeight,frameWidth:window.innerWidth,unisonTabBarVisibility:R,isUnison:R,inViewport:!0,scrollOffset:0};for(var t in e)H.data.previous[t]!==e[t]&&(H.data.current[t]=e[t],c(t),H.data.previous[t]=e[t]);h(),u()}function k(){e.util.isSafeFrame&&(l(),H.data.previous={},w(),h(),$sf.ext.register(1,1,function(e){"geom-update"===e&&w()}))}if(e&&!e.util)return void(window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library"));var R=-1,H={token:null,connectionEstablished:!1,throwErrorsToPreview:!1,events:["resize","scroll"],subs:{connectionEstablished:[]},data:{},timeout:Date.now()+3e3},B=[];e.IframeEventLib=function(e){return W(e),k(e),{data:n,get:a,once:s,onChange:r,onScroll:o,requestUnisonTabBar:A,requestRefreshEligibility:v,whenLive:t,turboMode:f}}}(HymnalLib),function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:self,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var i,o,a=String(t),r=0,s=n,l="";a.charAt(0|r)||(s="=",r%1);l+=s.charAt(63&i>>8-r%1*8)){if((o=a.charCodeAt(r+=.75))>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|o}return l}),t.atob||(t.atob=function(t){var i=String(t).replace(/=+$/,"");if(i.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,a,r=0,s=0,l="";a=i.charAt(s++);~a&&(o=r%4?64*o+a:a,r++%4)?l+=String.fromCharCode(255&o>>(-2*r&6)):0)a=n.indexOf(a);return l})}(),function(e){"function"!=typeof e.closest&&(e.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})}(window.Element.prototype),function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return Boolean(n[i])})}(window.Element.prototype),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),function(e){e.IframeStyleHelper||(e.IframeStyleHelper=function(){function t(t,n,i){if(!e.settings.inPreview){var o='<style type="text/css" data-for-hymnal-ad="'+t.getSlug()+'">'+n+"</style>",a=null;a=i?parent.document.getElementsByTagName("head"):document.getElementsByTagName("head"),$(a).append(o)}}return{addStyles:t}}())}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return void console.error("Hymnal must be the Hymnal library");e.MetricsReporting=function(){function t(){function t(t){if(!o)return!1;var r={action:t,ad_id:o,network:i};a&&(r.variant_id=a),e.settings.inPreview?console.log("[fake] Logging to Phonograph",r):window.phonographEvents.push([n,r])}function r(){var e=document.createElement("script");e.src="https://phonograph2.voxmedia.com/pickup.js",e.type="text/javascript",e.async=!0,document.body.appendChild(e)}"undefined"==typeof window.phonographEvents&&(window.phonographEvents=[],r()),adCallbacks.afterRender(function(){o=this.id,a=this.variantID});var s={};return s.log=function(e){e&&t(e)},s.trackVideo=function(e){e.onPlay(function(){this.log("play")}.bind(this)),e.onQuartile(function(e){this.log(e+"pct_played")}.bind(this)),e.onPause(function(){this.log("pause")}.bind(this))},s}var n="hymnal_event",i=window.location.hostname,o=null,a=null;return t}()}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return void console.error("Hymnal must be the Hymnal library");e.MetricPixels=function(){function e(){}var t=[],n=[],i=function(e){e+=(-1==e.indexOf("?")?"?":"&")+"mp_uniq="+Math.floor(1e4*Math.random());var t=document.createElement("img");t.setAttribute("src",encodeURI(e)),t.setAttribute("height","1"),t.setAttribute("width","1"),t.setAttribute("data-metric-pixels",!0),t.setAttribute("style","position:absolute; top:0; left:0; visibility:hidden;");var n=document.body;n.insertBefore(t,n.firstChild)},o=function(e){return t.filter(function(t){return t[0]==e}).map(function(e){return e[1]})},a=e.prototype={};return a.add=function(e,n){t.push([e,n])},a.log=function(e){n.push(e),o(e).forEach(function(e){i(e)}.bind(this))},a.logNonRepeatable=function(e){-1==n.indexOf(e)&&this.log(e)},a.addVideoTrackers=function(e){e&&e.forEach(function(e){e.urls.forEach(function(t){this.add(e.event,t),this.add(e.event.replace(/_/g,"-"),t)}.bind(this))}.bind(this))},a.trackVideo=function(e){e&&"function"==typeof e.onPlay&&(e.onPlay(function(){this.log("video-start")}.bind(this)),e.onQuartile(function(e){this.log("video-"+e)}.bind(this)),e.onPause(function(){this.log("video-pause")}.bind(this)))},e}()}(HymnalLib),function(e){e.Data||(e.Data=function(e,t){$.getJSON(e).done(t)})}(HymnalLib),function(e){e.ConcertConfig||(e.ConcertConfig=function(){var e="VoxConcertAd",t=function(t,i){return n(t)?window[e][t]:i},n=function(t){return window[e]&&window[e].hasOwnProperty(t)};return{get:t,has:n}}())}(HymnalLib),function(e){function t(){window.addEventListener("message",n)}function n(t){var n=!!t.data&&t.data;try{n=JSON.parse(n)}catch(e){return!0}if(n.key===c.concertKey&&n.token){if("ad"===n.sender)return!1;c.origin=t.origin,c.source=t.source,s||(s=!0,c.token=n.token,l=n.response.api,e.AdSetup.deferToConcierge(),a(),o()),n.response&&n.response.type&&i(n.response)}}function i(e){console.log("received message",e)}function o(){for(;d.length>0;){var e=d.shift();a(e[0],e[1])}}function a(e,t){if(!s)return d.push([e,t]),!0;var n={key:c.concertKey,token:c.token,sender:"ad",func:e,args:t};try{c.source.postMessage(JSON.stringify(n),c.origin)}catch(e){throw new Error("Tried to postMessage to parent window, got error.")}return!0}function r(t){var n={mobile:{query:"(max-width: 727px)",ratio:t.aspectRatios.defaultSmall,heightAdjustment:t.preambleEnabled?20:0},desktop:{query:"(min-width: 728px)",ratio:t.aspectRatios.defaultLarge,heightAdjustment:t.preambleEnabled?20:0}};e.settings.inPreview?a("previewRatios",n):a("registerAspectRatios",n)}if(e&&!e.util)return void(window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library"));var s=!1,l=[],d=[],c={safeFrameKey:"nullValueUntilOverridden",origin:!1,concertKey:"concertAdConfig",token:null,source:null};t(),e.Messenger={registerRatiosWithConcierge:r,sendMessage:a}}(HymnalLib),function(e){function t(e){this.opts=e,this.parent=this.opts.parent;var t=this.parent.getElementsByClassName(this.opts.slides);return this.slides=Array.prototype.slice.call(t),this.totalSlides=e.slidesPresent||this.slides.length,this.scrollElement=this.parent.querySelector("."+this.opts.scrollElement),this.wrapper=this.parent.getElementsByClassName(this.slides[0].parentNode.classList)[0],this.wrapperScroll=this.wrapper.scrollLeft,this.activeSlide=0,this.slideWidth=this.opts.width,this._initSlides(),this._initListeners(),this._initSlides.bind(this)}!!e.Swiper||(t.prototype={_initSlides:function(e){e&&(this.slideWidth=e);var e=(this.slideWidth*this.totalSlides).toString()+"px";this.wrapper.style.width=e},_initListeners:function(){var e=this,t="ontouchstart"in window,n=t?"touchstart":"mousedown",i=t?"touchmove":"mousemove",o=t?"touchend":"mouseup";this.scrollElement.addEventListener(n,function(t){e.updatePos(t,"start")}),this.scrollElement.addEventListener(i,function(t){e.updatePos(t,"move")}),this.scrollElement.addEventListener(o,function(t){e.updatePos(t,"end")}),this.scrollElement.addEventListener("fakeTouch",function(t){e.updatePos(t,"fake")})},toggleTransition:function(t){this.transitionOn=!!t;var n=t?"transform .2s ease-out":"";e.Prefix&&e.Prefix.js&&(this.wrapper.style[e.Prefix.js+"Transition"]=e.Prefix.css+n),this.wrapper.style.transition=n},setTransform:function(t){e.Prefix&&e.Prefix.js&&(this.wrapper.style[e.Prefix.js+"Transform"]="translate3D("+t+"px,0,0)"),this.wrapper.style.transform="translate3D("+t+"px,0,0)"},validSwipe:function(e){var t=e>0?e:-1*e;return t-=this.activeSlide*this.slideWidth,(t=Math.floor(this.slideWidth/t))<3},findSlide:function(e){var t=this.totalSlides-1,n=this.activeSlide;if(this.validSwipe(e.x))switch(e.direction){case"right":n=0===n?n:n-1;break;case"left":n=n===t?n:n+1}return n},snapToSlide:function(e){var t=this.findSlide(e);this.setTransform(-1*t*this.slideWidth),this.activeSlide=t},triggerUpdateEvent:function(){var e=new CustomEvent("slideChange",{detail:this.activeSlide+1});this.parent.dispatchEvent(e)},updatePos:function(t,n){var i;switch(i="fake"===n?t.detail.x:t.pageX?t.pageX:t.changedTouches[0].pageX,n){case"start":this.toggleTransition(),this.onMove=new e.MoveEvent({current:this.activeSlide*this.slideWidth*-1,newVal:i});break;case"move":this.onMove&&(this.preventDefault=!0,this.setTransform(this.onMove.update(i)));break;case"end":this.preventDefault&&(t.preventDefault(),this.preventDefault=!1),this.toggleTransition(!0),this.snapToSlide(this.onMove.end(i)),this.onMove=null,this.triggerUpdateEvent();break;case"fake":this.toggleTransition(!0),this.snapToSlide(t.detail),this.triggerUpdateEvent()}}},e.Swiper=t)}(HymnalLib),/*! opts: {
    current: current pixel offset of slides
    newVal: touchdown event start pixels
    } */
function(e){function t(e){this.opts=e,this.initial=this.opts.current,this.eventBase=this.opts.newVal,this.eventCurrent=0}!!e.MoveEvent||(t.prototype={update:function(e){return this.eventCurrent=this.eventBase-e,this.initial-this.eventCurrent},end:function(e){var t={x:this.update(e),direction:""};return this.initial===this.eventCurrent?t:(this.initial>=0?t.direction=t.x<this.initial?"left":"right":t.direction=t.x>this.initial?"right":"left",t)}},e.MoveEvent=t)}(HymnalLib),function(e){function t(){return!!V.frame}function n(){V.conciergePresent=!0}function i(t){var n="activeSmall",i=t||e.Events.get("windowWidth");if(e.settings.inPreview)try{n=V.parent.classList.contains("small-active")?"activeSmall":"activeLarge"}catch(e){n="activeLarge"}else n=i>727?"activeLarge":"activeSmall";return n}function o(e){var t=i(e),n=V.aspectRatios[t];if(0===V.frame.clientWidth)return!(V.timeout&&!(V.timeout&&Date.now()>V.timeout))&&(V.timeout=V.timeout||Date.now()+1e3,setTimeout(o,300));"activeLarge"===t&&(V.maxHeights.active=V.maxHeights.large,V.maxWidths.active=V.maxWidths.large),"activeSmall"===t&&(V.maxHeights.active=V.maxHeights.small,V.maxWidths.active=V.maxWidths.small),s({width:V.widthOverridden?V.width:"100%",ratio:n})}function a(e){var t=e.ratio||V.aspectRatios[i()];return V.maxHeights.active&&V.parent.clientWidth/t>=V.maxHeights.active&&(e.height=V.maxHeights.active,e.width=e.height*t),V.maxWidths.active&&V.parent.clientWidth>=V.maxWidths.active&&(e.width=V.maxWidths.active,e.height=e.width/t),e}function r(){return window.parent!==window.top}function s(n){return new Promise(function(i,o){if(t()){if(d(),l("before"),(V.maxHeights.active||V.maxWidths.active)&&(n=a(n)),n.width||(n.width=V.frame.width),V.frame.width=n.width,r()&&(parent.window.frameElement.width=n.width,parent.window.frameElement.style.width=n.width),!n.height&&n.ratio?n.height=V.frame.clientWidth/n.ratio:n.height||(n.height=V.frame.height),V.preambleEnabled&&!V.preambleOverlay&&(n.height=n.height+V.preambleHeight),r()&&(parent.window.frameElement.height=n.height+"px",parent.window.frameElement.style.height=n.height+"px"),e.ConcertConfig.get("forceIframeHeight",!1)&&(V.frame.style.height=n.height+"px"),e.ConcertConfig.get("resizeParentDiv",!1)&&g(n),V.frame.height=n.height,n.ratio||u(),"sticky"===V.activePositioning){var s={width:n.width,height:n.height};V.stickyCentered&&(s.width=null),I(s)}V.frame.height==n.height&&V.frame.width==n.width?(V.width=n.width,V.height=n.height,l("after"),W.forEach(function(e){e.call(null,{width:V.width,height:V.height,iframe:V.frame})}),i()):o("Frame sizing was unsuccessful.")}})}function l(t){var n=e.ConcertConfig.get("selectorStyles",!1);Array.isArray(n)&&n.filter(function(e){return(e.when||"after")===t}).forEach(function(e){var t=V.parent.closest(e.selector);if(t)for(var n in e.styles)t.style[n]=c(e.styles[n])})}function d(){var t=e.ConcertConfig.get("selectorClassMutation",!1);Array.isArray(t)&&t.forEach(function(e){var t=V.parent.closest(e.selector);t&&(e.addClass&&t.classList.add.apply(t.classList,e.addClass.replace(/\s/g,"").split(",")),e.removeClass&&t.classList.remove.apply(t.classList,e.removeClass.replace(/\s/g,"").split(",")))})}function c(e){return"function"==typeof e?e.call(this,V):e}function g(e){V.parent.style.height=e.height+"px"}function u(){var e=i();if(V.preambleOverlay)V.aspectRatios[e]=V.frame.clientWidth/V.frame.clientHeight;else{var t=V.frame.clientHeight-V.preambleHeight;V.aspectRatios[e]=V.frame.clientWidth/t}}function h(e,t){"number"==typeof e&&(e=e.toString()+"px");var n=s({height:e});V.heightOverridden=!0,t&&n.then(t)}function m(e,t){"number"==typeof e&&(e=e.toString()+"px");var n=s({width:e});V.widthOverridden=!0,t&&n.then(t)}function p(e){var n=e||"height 0.5s ease";t()&&(V.frame.style.transition=n)}function C(){t()&&(V.frame.style.transition="")}function I(n){return new Promise(function(i,o){var a=!1;t()&&!e.settings.inPreview||(a="Frame cannot be modified."),V.parent.style.cssText=V.parentInlineStyles;for(var r in n)!a&&n.hasOwnProperty(r)&&(V.parent.style[r]=n[r]);a?o(a):(b(),i())})}function f(e){if(!t())return!1;for(var n in e)if(e.hasOwnProperty(n)){var i=window.getComputedStyle(V.parent);V.cachedCSS[n]=i[n]}}function b(){V.activePositioning="fixed"===V.parent.display?"sticky":"standard"}function v(e){"function"==typeof e&&W.push(e)}function A(t,n){t=t||{};var i={position:"fixed",height:V.height,zIndex:6000100};t.vertical?i[t.vertical]="0":i.bottom="0",t.horizontal?(i[t.horizontal]="0",i.width=V.frame.clientWidth.toString()+"px",V.stickyCentered=!1):(e.Events.get("windowWidth"),V.frame.clientWidth,i.left=0,i.right=0,i.margin=0,V.stickyCentered=!0),t.background&&(i.backgroundColor=t.background),t.margin&&(i.margin=t.margin),t.padding&&(i.padding=t.padding),t.timeout&&"number"==typeof t.timeout&&(V.timeout=setTimeout(y,t.timeout)),!Object.keys(V.cachedCSS).length>0&&f(i);var o=I(i);n&&o.then(n)}function y(e){var t=I(V.cachedCSS);V.timeout&&clearTimeout(V.timeout),e&&t.then(e)}function w(){return"sticky"===V.activePositioning}function Z(){V.parent.style.display="none"}function G(t){if(!(e.settings.inPreview||renderInIframe&&isInIframe()))return!1;!t.aspectRatios&&console&&console.error&&console.error("Ad cannot be rendered without aspect ratios");try{V.frame=window.frameElement,V.parent=V.frame.parentElement,V.parentInlineStyles=V.parent.style.cssText}catch(e){V.frame=!1,V.parent=!1,V.parentInlineStyles=!1}t.conciergePresent&&(V.conciergePresent=t.conciergePresent),V.preambleOverlay=t.preambleOverlay,V.preambleEnabled=t.preambleEnabled,V.aspectRatios={defaultLarge:t.aspectRatios.desktop,activeLarge:t.aspectRatios.desktop,defaultSmall:t.aspectRatios.mobile,activeSmall:t.aspectRatios.mobile},V.maxHeights.large=t.maxHeights.desktop||e.ConcertConfig.get("maxHeightLarge",!1),V.maxHeights.small=t.maxHeights.mobile||e.ConcertConfig.get("maxHeightSmall",!1),V.maxWidths.large=e.ConcertConfig.get("maxWidthLarge",!1),V.maxWidths.small=e.ConcertConfig.get("maxWidthSmall",!1),V.preambleOverlay=t.preambleOverlay;var i=e.ConcertConfig.get("setGrandparentStyle",{});if(V.parent&&V.parent.parentElement)for(var a in i)V.parent.parentElement.style[a]=i[a];return e.Messenger.registerRatiosWithConcierge(V),e.Events.whenLive(function(){o(),e.Events.onChange("windowWidth",o),e.settings.inPreview&&window.frameElement&&window.frameElement.parentElement.addEventListener("previewResize",function(e){e&&e.detail&&e.detail.triggerSizeUpdate&&o()})}),{requestHeightChange:h,requestWidthChange:m,enableSizingAnimation:p,disableSizingAnimation:C,requestStickyPositioning:A,requestStandardPositioning:y,sizeDidChange:v,isSticky:w,hideAd:Z,deferToConcierge:n}}if(e&&!e.util)return void(window.console&&window.console.error&&console.error("Hymnal must be the Hymnal library"));var W=[],V={frame:null,parent:null,parentInlineStyles:"",height:0,heightOverridden:!1,width:"100%",widthOverridden:!1,activePositioning:"standard",stickyCentered:!1,cachedCSS:{},conciergePresent:!1,aspectRatios:{defaultSmall:0,activeSmall:0,defaultLarge:0,activeLarge:0},maxHeights:{small:!1,large:!1,active:!1},maxWidths:{small:!1,large:!1,active:!1},preambleOverlay:!1,preambleHeight:20,isLandscape:!1};e.AdDimensionsAndPositioning=G}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return void console.error("Hymnal must be the Hymnal library");if(!e.Moat){var t=[];e.Moat={trackElement:function(e){if(e&&e.parentNode){for(var n,i=0;i<t.length&&!n;i++)e==t[i].elementToTrack&&(n=t[i]);if(!n){n=document.createElement("div"),n.className="voxAdData",n.style.display="none";var o=e.parentNode&&e.parentNode.querySelector("script[src*=moat]");return null!==o?o.parentNode.insertBefore(n,o.nextSibling):e.parentNode.appendChild(n),n.elementToTrack=e,t.push(n),n}}}}}}(HymnalLib),function(e){if("object"!=typeof e&&window.PreviewErrorHandling)return void window.PreviewErrorHandling.javascriptError(new Error("Hymnal must be the Hymnal library"));e.MoatAnalytics=function(){"use strict";function e(){o=t(d,c,g,s,u)}/* Copyright (c) 2011-2016 Moat Inc. All Rights Reserved. */
function t(e,t,n,i,o){var a=document.createElement("script"),r=[];t={adData:{ids:t,duration:n,url:o},dispatchEvent:function(e){this.sendEvent?(r&&(r.push(e),e=r,r=!1),this.sendEvent(e)):r.push(e)}},n="_moatApi"+Math.floor(1e8*Math.random());var s,l;try{s=e.ownerDocument,l=s.defaultView||s.parentWindow}catch(e){s=document,l=window}return l[n]=t,a.type="text/javascript",e&&e.insertBefore(a,e.childNodes[0]||null),a.src="https://z.moatads.com/"+i+"/moatvideo.js#"+n,t}function n(t){o||e();var n=a.getVolume();o?o.dispatchEvent({type:t,adVolume:n}):console.error("ERROR: Something went wrong calling initMoatTracking()")}function i(){a?(a.onQuartile(function(e){"25"==e?n("AdVideoFirstQuartile"):"50"==e?n("AdVideoMidpoint"):"75"==e?n("AdVideoThirdQuartile"):"100"==e?(n("AdVideoComplete"),r=!1,o=!1):console.error("Moat Analytics: Invalid quartile: "+e)}),a.onVolumeChange(function(){n("AdVolumeChange")}),a.onPlay(function(){r||(r=!0,n("AdVideoStart")),n("AdPlaying")}),a.onTimeUpdate(function(){r||(r=!0,n("AdVideoStart"),n("AdPlaying"))}),a.onPause(function(){n("AdPaused")})):console.error("No videoPlayer?")}var o=!1,a=!1,r=!1,s="voxvidint960547728228",l={},d=!1,c=!1,g=!1,u=!1;return l.init=function(e,t,n,o,r){a=e,d=t,c=n,g=o,u=r,i()},l}()}(HymnalLib),function(e){"use strict";if("object"!=typeof e)return void console.error("Hymnal must be the Hymnal library");var t={AD_FORMAT:"dimension3",ADVERTISER:"dimension18",BRIGHTCOVE_ID:"dimension1",DURATION:"dimension2",HYMNAL_ORDER:"dimension19",TEST_VARIANT:"dimension4",SITE:"dimension11",KRUX_USER_ID:"dimension20",LINE_ITEM_ID:"dimension21",CREATIVE_ID:"dimension22"};e.MetricGoogleAnalyticsAccountID="UA-96398693-1",e.MetricGoogleAnalytics=function(){function n(t){h=t||e.MetricGoogleAnalyticsAccountID,u(),__ga("create",h,"auto"),__ga("set","location",r()),s()}function i(){return[p,m].filter(function(e){return e.length>0}).join(" | ")}function o(){try{return e.util.isSafeFrame?document.referrer:window.ChorusAds&&window.ChorusAds.getVariable("network")?window.ChorusAds.getVariable("network")[0]:parent&&parent.ChorusAds&&parent.ChorusAds.getVariable("network")?parent.ChorusAds.getVariable("network")[0]:window.location.host}catch(e){return document.referrer}}function a(){if(window.Krux&&window.Krux.user)return window.Krux.user;try{return parent.Krux.user}catch(e){return""}}function r(){try{return e.util.isSafeFrame?document.referrer:window.location.host}catch(e){return document.referrer}}function s(e){var n={};n[t.AD_FORMAT]=v,n[t.ADVERTISER]=I,n[t.HYMNAL_ORDER]=C,n[t.SITE]=o(),n[t.KRUX_USER_ID]=a(),n[t.LINE_ITEM_ID]=A,n[t.CREATIVE_ID]=y;for(var i in e)t[i]&&(n[t[i]]=e[i]);__ga("set",n)}function l(e){var t=document.querySelector("#eventList");if(!t){var t=document.createElement("ul");t.id="eventList",t.style.cssText="position:absolute;left:0;right:0;top:20px;bottom:50%;background-color:rgba(0,0,0,.4);overflow:scroll;padding-left:30px;z-index:10000;font-size:14px;",document.querySelector(".ad__content").appendChild(t)}var n=document.createElement("li");n.innerHTML="<strong>Sending event:</strong> "+JSON.stringify(e),n.style.color="white",t.appendChild(n)}function d(){var e={};Z&&Z.getVideoId()&&(e[t.BRIGHTCOVE_ID]=Z.getVideoId(),__ga("set",e))}function c(){W=!0,G.length>0&&(G.forEach(function(e){g.apply(this,e)}),G=[])}function g(e,t,n){var o=n||{};d(),o.dimensions&&s(o.dimensions);var a={eventCategory:e,eventAction:"ad:"+t,eventLabel:i(),eventValue:"number"==typeof o.value?parseInt(o.value):undefined,nonInteraction:!!o.nonInteraction};w&&l(a),__ga("send","event",a)}function u(){e.settings&&e.settings.inPreview?(console.log("Using Fake GA in Preview"),window.__ga=function(){for(var e=["Fake GA"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.log.apply(null,e)}):function(e,t,n,i,o,a,r){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,a=t.createElement(n),r=t.getElementsByTagName(n)[0],a.async=1,a.src=i,r.parentNode.insertBefore(a,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","__ga")}var h=null,m=null,p=null,C=null,I=null,f=null,b=null,v=null,A=null,y=null,w=!1,Z=null,G=[],W=!1;window.HymnalMetricsSetup?(m=HymnalMetricsSetup.adId||"",p=HymnalMetricsSetup.adName||"",f=HymnalMetricsSetup.variantId||"",b=HymnalMetricsSetup.adSlug||"",I=HymnalMetricsSetup.clientName||"",C=HymnalMetricsSetup.campaignName||"",v=HymnalMetricsSetup.adFormat||"",A=HymnalMetricsSetup.lineItemId||"",y=HymnalMetricsSetup.creativeId||""):adCallbacks.beforeRender(function(){m=this.id,p=this.adName,f=this.variantID,b=this.slug,I=this.brand,C=this.campaignName,v=this.design_template,A=this.lineItemId,y=this.creativeId});var V=n.prototype={};return V.debug=function(){w=!0},V.log=function(e,t,n){n=n||{},!Z||Z&&W?g(e,t,n):G.push([e,t,n])},V.trackVideo=function(e){var n=[3,6,10,15,20,25,30];e&&"function"==typeof e.onPlay&&Z!==e&&(Z=e,e.onPlay(function(){this.log("video","start")}.bind(this)),e.onQuartile(function(e){this.log("video","quartile-"+e)}.bind(this)),e.onPause(function(){this.log("video","pause")}.bind(this)),e.onMute(function(){this.log("video","mute")}.bind(this)),e.onUnmute(function(){this.log("video","unmute")}.bind(this)),e.onTimeUpdate(function(e){if(e>=n[0]){var t=n.shift();this.log("video","time-"+t+"sec")}}.bind(this)),e.onDurationChange(function(){var n=e.getDuration();if(!isNaN(n)){var i={};i[t.DURATION]=Math.floor(n).toString(),__ga("set",i)}c()}))},n}()}(HymnalLib),function(e){function t(t){if(!t)return!1;if(t.addEventListener("click",function(e){e.stopPropagation()}),h=new e.MetricGoogleAnalytics,g=!!t.querySelector(".branded-content__feedback"),u=t.querySelector(".feedback-form"),m=t.querySelector(".feedback-questions"),formAnswers=t.querySelector(".feedback-answers"),!g){var o=t.querySelector(".ad__feedback__toggle-button"),a=t.querySelector(".feedback-form__close-button"),r=!1;o.addEventListener("click",function(){u.classList.toggle("is-active"),r||(r=!0,window.requestAnimationFrame(n))}),a.addEventListener("click",function(){u.classList.toggle("is-active")})}answers=[].slice.call(formAnswers.querySelectorAll(".feedback-answer")),answers.forEach(function(e){e.addEventListener("click",i)}),document.addEventListener("keyup",function(e){if(!e.defaultPrevented){var t=e.key||e.keyCode;"Escape"!==t&&"Esc"!==t&&27!==t||l(e)}})}function n(){if(p.length){var e=p.shift();m.className="feedback-questions "+e,m.dataset.activeQuestion=e,p.length<1&&(s(),r())}}function i(e){e.preventDefault();var t=document.getElementById("count"),o=m.getAttribute("data-active-question"),a=e.currentTarget,r=a.getAttribute("data-answer"),s=a.getAttribute("data-event-"+o);s&&h.log("feedback",s),a.classList.add("active"),1==p.length?(a.classList.add("stay"),a.removeEventListener("click",i),answers.forEach(function(e){e.className+=" beGone"}),setTimeout(function(){a.classList.add("slideOver-"+r),t.innerHTML="All done!",window.requestAnimationFrame(n)},2e3)):setTimeout(function(){a.classList.remove("active"),window.requestAnimationFrame(n),t.innerHTML="2 of 2"},1500)}function o(e){c=e}function a(){window.requestAnimationFrame(n)}function r(){d=setTimeout(function(){g||u.classList.remove("is-active"),c&&c()},3e3)}function s(){window.addEventListener("click",l),u.addEventListener("click",l)}function l(e){e.stopPropagation(),clearTimeout(d),u.classList.remove("is-active"),c&&c()}var d,c=!1,g=!1,u=!1,h=!1,m=!1,p=["question-1-active","question-2-active","question-3-active"];e.FeedbackForm={InitForm:t,registerExitCallback:o,showNextQuestion:a}}(HymnalLib),function(e){e.VideoPlaylist=function(){"use strict";var e={},t="",n=function(n){return n&&n.hasOwnProperty("mp4")?(e["default"]=n,t="default"):e=n,i},i=n.prototype={};return i.addSource=function(t,n){if(!e[t])return n.hasOwnProperty("hls")&&n.hasOwnProperty("mp4")&&n.hasOwnProperty("vtt")&&n.hasOwnProperty("volume_id")?void(e[t]=n):void console.error("Invalid video source format: missing required fields")},i.hasMultipleVideos=function(){return Object.keys(e).length>1},i.getCurrentVideo=function(){return e[t]},i.setCurrentVideo=function(n){e[n]&&(t=n)},i.isSameAsCurrentVideo=function(n){return e[t]&&e[n].volume_id===e[t].volume_id},i.getVideo=function(t){return e[t]},i.getCurrentVideoId=function(){return t&&e[t]?e[t].volume_id:null},n}()}(HymnalLib),function(e){e.VideoJsLoader=function(){"use strict";function e(){if(l)return n(o,!1),n(s,!1),t(i).then(function(){return t(r)}).then(function(){return t(a)});Promise.resolve()}function t(e){return new Promise(function(t,n){var i=document.createElement("script");i.src=e,i.async=!0,i.onload=function(){t(e)},i.onerror=function(){n(e)},document.body.appendChild(i)})}function n(e,t){var n=document.createElement("link");return n.href=e,n.rel="stylesheet",n.type="text/css",t&&document.head.prepend?document.head.prepend(n):t?document.head.insertBefore(n,document.head.children[0]):document.head.appendChild(n),!0}var i="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-ads-6.3.0.min.js",o="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-ads-5.1.6.min.css",a="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-ima-pre-1.5.0.min.js",r="https://imasdk.googleapis.com/js/sdkloader/ima3.js",s="https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-ima-1.0.4.vox.css",l=!1,d=function(e){return l=e,c},c=d.prototype={};return c.loadFiles=function(){return n("https://hymnal-prod.vox-cdn.com/libraries/videojs/video-6.6.0.min.css",!0),t("https://hymnal-prod.vox-cdn.com/libraries/videojs/video-6.6.0.min.js").then(e).then(function(){return t("https://hymnal-prod.vox-cdn.com/libraries/videojs/videojs-contrib-hls-5.12.2.min.js")})["catch"](function(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)})},d}()}(HymnalLib),function(e){e.Poll||(e.Poll=function(){"use strict";function e(e,t,n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&i(o.responseText,o.status)},"GET"===t?(o.open("GET",e,!0),o.send()):(o.open("POST",e,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(n)))}function t(e){return!new RegExp(/[^a-zA-Z0-9_-]/).test(e)}var n="https://hymnal-prod.vox-cdn.com/polls/",i="https://plink.voxmedia.com/polls/",o=null,a=null,r=function(e){if(!t(e))throw new Error('Poll name is invalid. Must not contain special characters other than "-" or "_".');return o=n+e+".json",a=i+e,s},s=r.prototype={};return s.getResponses=function(t,n){e(o,"GET",!1,function(e,i){200===i?t(JSON.parse(e)):n(e)})},s.sendResponse=function(t,n){e(a+"/new_response","POST",{pollResponse:t},function(e,t){200!==t&&n(e)})},r}())}(HymnalLib),function(Hymnal){Hymnal.Events=Hymnal.IframeEventLib({inIframe:!1,token:eventAPIToken.toString()}),Hymnal.AdSetup=Hymnal.AdDimensionsAndPositioning({aspectRatios:{mobile:.6666666666666666,desktop:1.6898954703832754},maxHeights:{mobile:null,desktop:null},preambleOverlay:!1,preambleEnabled:!1,conciergePresent:window.concertConcierge||concertConciergeLikely});var setupConfig={id:"b302176a-5550-482a-8d62-e9be0489394e",slug:"house_promotions_covid_19_content_link_promo_b302176a-5550-482a-8d62-e9be0489394e",adName:"COVID 19 Content Link Promo",type:"Native Ad",campaign:"house_promotions_vox_com_covid_19_coverage_house_ads_3490",campaignName:"Vox.com COVID 19 Coverage House Ads",brand:"House Promotions",design_template:"Native Ad Content Link",disableSlotRefresh:!1,enableSlotReveal:!1,showFeedbackForm:!1,preambleEnabled:!1,preambleMarkup:'<div class="m-adbar">\n  <div class="ad__callout-wrapper">\n    <a href="http://www.voxmedia.com/pages/concert" class="ad__concert-link">\n      <svg viewBox="0 0 11 16" class="ad__concert-logo"><title>Concert</title><path d="M11,16H5.49A5.47,5.47,0,0,1,.64,8,5.48,5.48,0,0,1,5.49,0H11V5.9H5.49A4.62,4.62,0,0,0,1.63,8a4.62,4.62,0,0,0,3.86,2.1H11V16ZM1.19,8.87a4.48,4.48,0,0,0-.31,1.65,4.6,4.6,0,0,0,4.61,4.59h4.61V11H5.49A5.47,5.47,0,0,1,1.19,8.87Zm4.3-8a4.62,4.62,0,0,0-4.3,6.29,5.45,5.45,0,0,1,4.3-2.09h4.61V0.88H5.49Z"></path></svg>\n    </a>\n    <p>From Our Sponsor</p>\n  </div>\n  <div class="ad__feedback">\n    <button class="ad__feedback__toggle-button">Feedback</button>\n\n    <div class="feedback-form">\n      <div class="feedback-form__positioner">\n\n          <button class="feedback-form__close-button">\n            <p>Close</p>\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n               viewBox="0 0 50 50" xml:space="preserve">\n              <g>\n                <path d="M45.3,47.6c-2,2.3-5.6,2.3-7.8,0l-12.4-14l-12.5,14c-2,2.3-5.6,2.3-7.8,0c-2.3-2-2.3-5.6,0-7.8L17.6,25\n                  L4.7,10.2c-2.3-2-2.3-5.6,0-7.8s5.8-2.3,7.8,0l12.5,14.2L37.5,2.4c2.3-2.3,5.8-2.3,7.8,0c2.3,2.3,2.3,5.8,0,7.8L32.4,25l12.9,14.8\n                  C47.6,42.1,47.6,45.6,45.3,47.6z"/>\n              </g>\n            </svg>\n          </button>\n\n        <div class="feedback-form__content">\n\n          <ul class="feedback-questions" data-active-question="">\n            <li class="feedback-question question-1">How do you feel about this ad?</h3>\n            <li class="feedback-question question-2">How do you feel about this advertiser?</h3>\n            <li class="feedback-question question-3">Thanks for helping us improve your experience!</h3>\n          </ul>\n\n          <ul class="feedback-answers">\n            <li class="feedback-answer bad question-1" data-answer="bad" data-event-question-1-active="ad-bad" data-event-question-2-active="brand-bad">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M77.84,93.35c11.29.29,21,4.23,28.69,12.5a7.21,7.21,0,1,1-10.38,10,24.47,24.47,0,0,0-9.9-6.54,26.45,26.45,0,0,0-12.4-1.06,24.74,24.74,0,0,0-14.08,7.4A7.15,7.15,0,0,1,52,117.43a6.54,6.54,0,0,1-4.71-6.06,6.87,6.87,0,0,1,1.92-5.48A39.35,39.35,0,0,1,66.16,95.18,48.1,48.1,0,0,1,77.84,93.35Z"/>\n                  <path class="right_eye" d="M96.32,56.82,105.55,53a5.12,5.12,0,0,1,7,3.46,10.26,10.26,0,0,1-.51,6.29,10.37,10.37,0,0,1-13.34,5.63,10.08,10.08,0,0,1-4.83-4.2A5.14,5.14,0,0,1,96.32,56.82Z"/>\n                  <path class="left_eye" d="M58.88,56.82,49.65,53a5.12,5.12,0,0,0-7,3.46,10.26,10.26,0,0,0,.51,6.29,10.37,10.37,0,0,0,13.34,5.63,10.08,10.08,0,0,0,4.83-4.2A5.14,5.14,0,0,0,58.88,56.82Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Bad</span>\n            </li>\n            <li class="feedback-answer not_good question-1" data-answer="not-good" data-event-question-1-active="ad-not-good" data-event-question-2-active="brand-not-good">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M77.84,93.35c11.29.29,21,4.23,28.69,12.5a7.21,7.21,0,1,1-10.38,10,24.47,24.47,0,0,0-9.9-6.54,26.45,26.45,0,0,0-12.4-1.06,24.74,24.74,0,0,0-14.08,7.4A7.15,7.15,0,0,1,52,117.43a6.54,6.54,0,0,1-4.71-6.06,6.87,6.87,0,0,1,1.92-5.48A39.35,39.35,0,0,1,66.16,95.18,48.1,48.1,0,0,1,77.84,93.35Z"/>\n                  <path class="right_eye" d="M109.71,59.67l-7.07-7.07a5.12,5.12,0,0,0-7.76.54,10.26,10.26,0,0,0-1.92,6,10.37,10.37,0,0,0,10.19,10.28,10.08,10.08,0,0,0,6.06-2A5.14,5.14,0,0,0,109.71,59.67Z"/>\n                  <path class="left_eye" d="M53.17,52.64,46.1,59.71a5.12,5.12,0,0,0,.54,7.76,10.26,10.26,0,0,0,6,1.92A10.37,10.37,0,0,0,62.93,59.21a10.08,10.08,0,0,0-2-6.06A5.14,5.14,0,0,0,53.17,52.64Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Not Good</span>\n            </li>\n            <li class="feedback-answer okay question-1" data-answer="okay" data-event-question-1-active="ad-okay" data-event-question-2-active="brand-okay">\n              <a class="action" href="#">\n                <svg viewBox="0 0 156.14 156.14">\n                  <g>\n                    <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                    <path class="mouth" d="M51.45,70.47A10.24,10.24,0,1,1,51.6,50a10.24,10.24,0,1,1-.14,20.47Z"/>\n                    <path class="right_eye" d="M104.41,70.47A10.21,10.21,0,1,1,114.7,60.29,10.37,10.37,0,0,1,104.41,70.47Z"/>\n                    <path class="left_eye" d="M102.06,98.88H55.2a6.87,6.87,0,1,0,0,13.74h46.86a6.87,6.87,0,1,0,0-13.74Z"/>\n                    <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                  </g>\n                </svg>\n                <span>Okay</span>\n              </a>\n            </li>\n            <li class="feedback-answer good question-1" data-answer="good" data-event-question-1-active="ad-good" data-event-question-2-active="brand-good">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M78.45,118.15c-11.29-.29-21-4.23-28.69-12.5a7.21,7.21,0,1,1,10.38-10,24.47,24.47,0,0,0,9.9,6.54,26.45,26.45,0,0,0,12.4,1.06,24.74,24.74,0,0,0,14.08-7.4,7.15,7.15,0,0,1,7.74-1.78,6.54,6.54,0,0,1,4.71,6.06A6.87,6.87,0,0,1,107,105.6a39.35,39.35,0,0,1-16.92,10.72A47.74,47.74,0,0,1,78.45,118.15Z"/>\n                  <path class="right_eye" d="M51.92,70.47A10.24,10.24,0,1,1,52.06,50a10.24,10.24,0,1,1-.14,20.47Z"/>\n                  <path class="left_eye" d="M104.88,70.47a10.21,10.21,0,1,1,10.28-10.19A10.37,10.37,0,0,1,104.88,70.47Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Good</span>\n            </li>\n            <li class="feedback-answer great question-1" data-answer="great" data-event-question-1-active="ad-great" data-event-question-2-active="brand-great">\n              <svg viewBox="0 0 156.14 156.14">\n                <g>\n                  <circle class="base" cx="78.07" cy="78.07" r="78.07"/>\n                  <path class="mouth" d="M61.79,60.33a10.28,10.28,0,1,0-20.57-.1A10.21,10.21,0,0,0,51.45,70.47,10.34,10.34,0,0,0,61.79,60.33Z"/>\n                  <path class="right_eye" d="M104.32,50A10.21,10.21,0,1,0,114.7,60.29,10.28,10.28,0,0,0,104.32,50Z"/>\n                  <path class="left_eye" d="M105.36,97.36h-55a3.15,3.15,0,0,0-3.15,3.17,7.26,7.26,0,0,0,2.05,5.12c7.74,8.27,17.4,12.21,28.69,12.5a47.74,47.74,0,0,0,11.68-1.83,39.35,39.35,0,0,0,16.92-10.72,6.86,6.86,0,0,0,1.94-5.08A3.16,3.16,0,0,0,105.36,97.36Z"/>\n                  <path class="check" d="M116.47,49a7.19,7.19,0,0,0-10.41,0L66.69,90.81,50.08,72A7.36,7.36,0,1,0,39.67,82.38L62.43,107.6a5.47,5.47,0,0,0,8,.12l46-48.34A7.19,7.19,0,0,0,116.47,49Z"/>\n                </g>\n              </svg>\n              <span>Great</span>\n            </li>\n          </ul>\n\n          <div class="counter">\n            <span id="count">1 of 2</span>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n',preambleOverlay:!1,aspect_ratio:{mobile:.6666666666666666,desktop:1.6898954703832754},max_height:{mobile:null,desktop:null},renderInIframe:!1,html:{"3db9972df5bfa0ec8ff2a1e0fae3942f":'<div class=\\"m-entry-box native-ad-content-link\\" data-native-ad-id=\\"container\\"><header class=\\"m-block-header\\"><span class=\\"m-block-header__tag preamble\\" data-native-ad-id=\\"preamble_text\\"><a href=\\"$AD_SERVER[clickthrough_url]\\">FROM VOX.COM<\\/a><\\/span><\\/header><div class=\\"m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail\\"><a href=\\"$AD_SERVER[clickthrough_url]\\" data-native-ad-id=\\"thumbnail\\"><img src=\\"https://hymnal-prod.vox-cdn.com/thumbor/61Zkv7zmS91LwBeYGCFuI-W33iE=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/100962/justvox.jpg\\" alt=\\"\\" /><\\/a><\\/div><div class=\\"m-entry-box__body\\"><h3><a data-analytics-link=\\"placeableadunit\\" data-native-ad-id=\\"headline\\" href=\\"$AD_SERVER[click_through_url]\\">The Vox guide to Covid-19 coronavirus<\\/a><\\/h3><p class=\\"m-entry-box__byline p-byline\\" data-native-ad-id=\\"byline\\"><\\/p><p class=\\"m-entry-box__blurb\\" data-native-ad-id=\\"body_text\\"><\\/p><div class=\\"m-entry-box__native-logo\\"><img data-native-ad-id=\\"logo\\" src=\\"\\" alt=\\"\\"><\\/div><\\/div><\\/div>'},css:"",fields:{"3db9972df5bfa0ec8ff2a1e0fae3942f":{html:'<div class="m-entry-box native-ad-content-link" data-native-ad-id="container">\n  <header class="m-block-header">\n    <span class="m-block-header__tag preamble" data-native-ad-id="preamble_text">\n      <a href="$AD_SERVER[clickthrough_url]">$TEMPLATE_TEXT[preamble]</a>\n    </span>\n  </header>\n\n  <div class="m-entry-box__thumb m-entry-box__image--native-ad native-ad-thumbnail">\n    <a href="$AD_SERVER[clickthrough_url]" data-native-ad-id="thumbnail">\n      <img src="$TEMPLATE_IMAGE[thumbnail]" alt="" />\n    </a>\n  </div>\n  <div class="m-entry-box__body">\n    <h3>\n      <a data-analytics-link="placeableadunit" data-native-ad-id="headline" href="$AD_SERVER[click_through_url]">$TEMPLATE_TEXT[title]</a>\n    </h3>\n    <p class="m-entry-box__byline p-byline" data-native-ad-id="byline">$TEMPLATE_TEXT[byline]</p>\n\n    <p class="m-entry-box__blurb" data-native-ad-id="body_text">$TEMPLATE_TEXT[description]</p>\n    <div class="m-entry-box__native-logo">\n      <img data-native-ad-id="logo" src="$TEMPLATE_IMAGE[logo]" alt="$TEMPLATE_TEXT[description]">\n    </div>\n  </div>\n</div>\n',eyebrow:"",preamble_text:"FROM VOX.COM",preamble:"FROM VOX.COM",css:"\n/* all styled on publisher's site, the below is FOR PREVIEW ONLY */\n.m {\n\n  &-entry-box {\n    width: 342px;\n    border:1px solid rgb(224, 224, 224);\n    padding: 10px;\n    overflow: hidden;\n    font-family: Helvetica, Arial, sans-serif;\n    line-height: 1.2;\n\n    * {\n      box-sizing: border-box;\n    }\n  }\n\n  &-block-header {\n    display: table;\n    width: 100%;\n    font-size: 11px;\n    border-bottom: 0;\n    font-weight: 400;\n    font-style: normal;\n  }\n\n  &-block-header__tag {\n    font-weight: normal;\n    color: $TEMPLATE_COLOR[brand_color];\n    border-color: $TEMPLATE_COLOR[brand_color];\n    display: table-cell;\n    text-align: left;\n\n    a {\n      color: #ff3200;\n      text-transform: uppercase;\n      display: inline-block;\n      padding-bottom: 2px;\n      font-size: 11px;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__thumb {\n    float: none;\n    width: 100%;\n    margin-right: 0;\n    margin-top: 0;\n    display: block;\n    max-height: 195px;\n    overflow: hidden;\n    position: relative;\n\n    a {\n      text-decoration: none;\n    }\n\n    img {\n      height: auto;\n      display: inline;\n      width: 100%;\n    }\n  }\n\n  &-entry-box__body {\n    float: none;\n    width: 100%;\n    padding: 10px 0 0;\n    font-size: 14px;\n\n    h3 {\n      font-weight: normal;\n      font-size: 22px;\n      margin: 0 0 10px 0;\n      display: block;\n    }\n\n    a {\n      color: #333;\n      text-decoration: none;\n    }\n  }\n\n  &-entry-box__byline{\n    margin: 0;\n    margin-top: 8px;\n    font-size: 11px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__blurb {\n    margin: 8px 0 0 0;\n    font-size: 13px;\n    font-weight: 400;\n    font-style: normal;\n    line-height: 1.5;\n  }\n\n  &-entry-box__native-logo {\n    margin-top: 10px;\n\n    img {\n    max-width: 100px;\n    max-height: 33px;\n    }\n  }\n\n}\n",js:"// This value intentionally left blank\n",brand_color:"#80c0c0",logo:null,byline:"",tooltip:"",description:"",pull_quote:"",title:"The Vox guide to Covid-19 coronavirus",click_through_url:"https://www.vox.com/coronavirus-covid19?utm_source=vm_housead&utm_medium=vm_housead&utm_campaign=vm_coronavirus_native",thumbnail:"https://hymnal-prod.vox-cdn.com/thumbor/61Zkv7zmS91LwBeYGCFuI-W33iE=/fit-in/600x600/hymnal-prod.vox-cdn.com/uploads/asset/file/100962/justvox.jpg"}},clickthroughUrl:"https://www.vox.com/coronavirus-covid19?utm_source=vm_housead&utm_medium=vm_housead&utm_campaign=vm_coronavirus_native",trackers:[],designSetupFunction:function(variant){var all_variants={"3db9972df5bfa0ec8ff2a1e0fae3942f":"// This value intentionally left blank\n"};try{eval(all_variants[variant])}catch(e){window.PreviewErrorHandling&&window.PreviewErrorHandling.javascriptError(e)}}},ad;isInIframe()?(ad=new Hymnal.Ad(setupConfig),ad.addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()):$(function(){ad=new Hymnal.Ad(setupConfig),ad.addLifecycleEventListener(new Hymnal.DefaultEvents),ad.render()})}(HymnalLib)}(jQuery)}function execHymnal(){var e=adPromises.getBeforeRender();decideAdContext().then(function(t){if(!t)throw bustIframe(),ERROR_ESCAPE_STRING;e.push(loadAdDependencies()),Promise.all(e).then(setupEventsAPI).then(executeHymnal)})["catch"](function(e){"undefined"!=typeof console&&"function"==typeof console.log&&e!==ERROR_ESCAPE_STRING&&(console.log("Ad failed to render: "),console.error(e))})}var renderInIframe=!1,ERROR_ESCAPE_STRING="Silence Error on Rejected Promise to Please Winston",adPromises=function(){"use strict";function e(e){i.push(e)}function t(){return i}function n(t){void 0!==t&&(e(new Promise(function(e,t){return t()})),"undefined"!=typeof console&&"function"==typeof console.error&&console.error("An error prevented the rendering of Hymnal ads",t))}var i=[];return{resolveBeforeRender:e,getBeforeRender:t,stop:n}}(),adCallbacks=function(){"use strict";function e(e){r?e.call(s):o.push(e)}function t(e){r?e.call(s):a.push(e)}function n(e){if(r=!0,s=e,o.length)do{var t=o.shift();"function"==typeof t&&t.call(e||null)}while(o.length>0)}function i(e){if(s=e,a.length)do{var t=a.shift();"function"==typeof t&&t.call(e||null)}while(a.length>0)}var o=[],a=[],r=!1,s=null;return{afterRender:e,beforeRender:t,performAfterRender:n,performBeforeRender:i}}(),isInIframe=function(){"use strict";var e=!1;try{window.frameElement&&"object"==typeof window.frameElement&&(e=!0)}catch(t){e=!1}return e},decideAdContext=function(){return new Promise(function(e){var t=!0;isInIframe()&&(renderInIframe||(t=!1)),e(t)})},movedHymnalToMainFrame=!1,bustIframe=function e(){return new Promise(function(t){function n(e){var t=window.frameElement.ownerDocument.createElement("script");t.innerHTML=e.innerHTML;for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}if(movedHymnalToMainFrame||!window.frameElement)return!1;if("loading"===document.readyState)return document.addEventListener("readystatechange",e),!1;movedHymnalToMainFrame=!0;for(var i=window.frameElement.parentElement,o=2*document.body.childNodes.length;document.body.childNodes.length>0&&o-- >0;){var a=document.body.childNodes[0];if("SCRIPT"===a.nodeName)i.appendChild(n(a)),document.body.removeChild(a);else{i.appendChild(a);for(var r=[],s=0;s<a.childNodes.length;s++){var l=a.childNodes[s];l&&"SCRIPT"===l.nodeName&&r.push(l)}r&&r.forEach(function(e){a.appendChild(n(e)),a.removeChild(e)})}}frameElement.style.display="none",t(!0)})},eventAPIToken="b302176a-5550-482a-8d62-e9be0489394e_"+Math.ceil(1e3*Math.random()),offplatformAMP=function(){"use strict";var e=function(){try{if(!(!!parent.window.context&&!!parent.window.context.pageViewId))return;Hymnal.Events.whenLive(t)}catch(e){}},t=function(){var e=parent.document.querySelector("iframe"),t=parent.window.context.initialIntersection.boundingClientRect;e.width=t.width,e.height=t.height};adCallbacks.beforeRender(e)}(),loadAdDependencies=function(){return new Promise(function(e,t){function n(e){var t=new Promise(function(t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.setAttribute("data-for","hymnal"),a[0].appendChild(n),n.onload=function(){t(n)},n.src=e});t["catch"](adPromises.stop),r.push(t)}function i(){return!0}var o={_:{src:"https://hymnal-prod.vox-cdn.com/libraries/underscore-1.5.1.min.js",test:function(){return"undefined"!=typeof _&&!!_.VERSION}},jQuery:{src:"https://hymnal-prod.vox-cdn.com/libraries/jquery-1.10.2.min.gz.js"}},a=document.getElementsByTagName("head"),r=[];if(a.length>0)for(var s in o)o.hasOwnProperty(s)&&(o[s].test&&(i=o[s].test),"undefined"!=typeof window[s]&&window[s]&&i.call(this)||n(o[s].src));else t("Cannot get head element");r.length?Promise.all(r).then(e):e(!0)})},eventsAPIData={scriptDigest:"7f5203b12e1e12222beeb6d2d63e5917",
parentLibString:"Ly8gVGhpcyBmaWxlIGlzIGluc2VydGVkIGlubGluZSBhbmQgdGhlbiAudG9TdHJpbmcoKSBpcyBjYWxsZWQgb24gaXQKLy8gYW5kIG9ubHkgaWYgd2UgbmVlZCB0byBsaXN0ZW4gdG8gdGhpbmdzIG91dHNpZGUgb2YgYW4gaWZyYW1lCi8vIGRvIHdlIGV2YWwgYW5kIGluc3RhbnRpYXRlIHRoZSBjb2RlCgooZnVuY3Rpb24od2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIHZhciBIeW1uYWxQYXJlbnQgPSB7CiAgICBhZHM6IHt9LAogICAgbGlzdGVuaW5nRm9yTWVzc2FnZXM6IGZhbHNlLAogICAgZ2xvYmFsRGF0YToge30sCiAgICBxdWV1ZVJ1bm5pbmc6IGZhbHNlLAogICAgY2FuY2VsV2F0Y2g6IGZhbHNlLCAvLyBJZiB0aGlzIGlzIHRydWUgdGhlIHNldFRpbWVvdXQgd2lsbCBzdG9wCiAgICB0aHJvdHRsZUludDogMTAwLAogICAgdHVyYm9JbnQ6IDE2LAogICAgLy8gQnkgdG9nZ2xpbmcgYm9vbGVhbnMgd2UgY2FuIGFzc3VyZSB0aGF0IG91ciBldmVudCBoYW5kbGVycwogICAgLy8gZG9uJ3QgYmxvY2sgdGhlIG1haW4gcmVuZGVyIHRocmVhZCBpbiB0aGUgYnJvd3NlcgogICAgLy8gdGh1cyBtYWtpbmcgb3VyIGFkIHZpZXdlcnMgYSBsaXR0bGUgYml0IGhhcHBpZXIKICAgIGV2OiB7CiAgICAgIHNjcm9sbDogZmFsc2UsCiAgICAgIHJlc2l6ZTogZmFsc2UsCiAgICAgIHVuaXNvblRhYkJhclZpc2liaWxpdHk6IGZhbHNlCiAgICB9LAogICAgLy8gQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gYnVpbGQgYSBuZXcgYWQgb2JqZWN0LCBjYWxsZWQgYnkgSW5pdAogICAgY2hpbGRBZDogZnVuY3Rpb24ob3B0cykgewogICAgIHJldHVybiB7CiAgICAgIHNlY3VyZVRva2VuOiBvcHRzLnRva2VuLAogICAgICBtZXNzYWdlVGFyZ2V0OiBudWxsLAogICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsCiAgICAgIGlmcmFtZWQ6IG9wdHMuaW5JZnJhbWUsCiAgICAgIGNvbnRhaW5lckVsOiBudWxsLAogICAgICBkYXRhOiB7fSwKICAgICAgdHVyYm9PbjogZmFsc2UsCiAgICAgIG9yaWdpbjogbnVsbAogICAgIH07CiAgICB9LAoKICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgdGhlIG9ubHkgZnVuY3Rpb24gZXhwb3NlZCBwdWJsaWNseQogICAgLy8gT3B0cyBpcyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHRva2VuIChhZElkLXJhbmRvbU51bWJlcikgYW5kCiAgICAvLyBhIGluSWZyYW1lIGJvb2xlYW4uCiAgICAvLyBDYWxsaW5nIHRoaXMgd2lsbCByZWdpc3RlciBhbiBhZCB0byByZWNlaXZlIG1lc3NhZ2VzIGFzIHRoaXMgbGliIGRpc3BhdGNoZXMgdGhlbQogICAgaW5pdDogZnVuY3Rpb24ob3B0cykgewogICAgICAvLyB3ZSdsbCB1c2UgdGhlIHRva2VuIGFzIHRoZSBrZXkKICAgICAgLy8gc2luY2UgZXZlcnkgbWVzc2FnZSBmcm9tIHRoZSBjaGlsZCB3aWxsIGluY2x1ZGUgdGhlIHRva2VuCiAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dID0gdGhpcy5jaGlsZEFkKG9wdHMpOwoKICAgICAgaWYgKCF0aGlzLmxpc3RlbmluZ0Zvck1lc3NhZ2VzKSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcykpOwogICAgICAgIHRoaXMubGlzdGVuaW5nRm9yTWVzc2FnZXMgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBpZiB0aGVyZSdzIG5vIGlmcmFtZSB0aGUgcGFyZW50IGNhbiBpbml0aWF0ZSB0aGUgbWVzc2FnZXMKICAgICAgLy8gb3RoZXJ3aXNlIHdlIHdhaXQgZm9yIGEgbWVzc2FnZSBmcm9tIHRoZSBmcmFtZSB0byBnZXQgdGhlIHRhcmdldAogICAgICBpZiAoIW9wdHMuaW5JZnJhbWUpIHsKICAgICAgICAvLyB0aGlzIFRpbWVvdXQgaXMgdG8gaGVscCBhdm9pZCBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIHdlIHF1ZXJ5IHRoZSBkb20gYmVmb3JlCiAgICAgICAgLy8gdGhlIGlmcmFtZSBidXN0aW5nIGpzIGlzIGZpbmlzaGVkLgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgIHZhciBpZCA9IG9wdHMudG9rZW4uc3BsaXQoJ18nKVswXTsKICAgICAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dLmNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaHltbmFsLWlkPSInICsgaWQgKyAnIl0nKTsKICAgICAgICAgIGlmICh0aGlzLmFkc1tvcHRzLnRva2VuXS5jb250YWluZXJFbCkgewogICAgICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5tZXNzYWdlVGFyZ2V0ID0gdGhpcy53aW5kb3dMb2NhdGlvbigpOwogICAgICAgICAgICB0aGlzLmFkc1tvcHRzLnRva2VuXS5pc0Nvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyhvcHRzLnRva2VuKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuYWRzW29wdHMudG9rZW5dLmNvbnRhaW5lckVsID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfS5iaW5kKHRoaXMpLCAwKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnF1ZXVlUnVubmluZykgewogICAgICAgIHRoaXMuY3JlYXRlUXVldWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW1lbnQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICBhZERpbWVuc2lvbnM6IGZ1bmN0aW9uKCkgewoKICAgICAgdmFyIGVsZW1lbnRUb01lYXN1cmU7CgogICAgICBpZiAodGhpcy5jb250YWluZXJFbGVtZW50KSB7CiAgICAgICAgZWxlbWVudFRvTWVhc3VyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5jb250YWluZXJFbGVtZW50KVswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50VG9NZWFzdXJlID0gdGhpcy5mcmFtZVRhcmdldC5mcmFtZUVsZW1lbnQKICAgICAgfQoKICAgICAgLy8gTGV0cyBtYWtlIHN1cmUgd2UgY2FuIHJlYWxseSBjYWxsIHRoaXMgaGVyZQogICAgICBpZihlbGVtZW50VG9NZWFzdXJlICYmIHR5cGVvZiBlbGVtZW50VG9NZWFzdXJlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgcmV0dXJuIGVsZW1lbnRUb01lYXN1cmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsgaGVpZ2h0OiAwLCB3aWR0aDogMCwgdG9wOjAgfTsKICAgICAgfQogICAgfSwKCiAgICBjaGVja0ZvckNoYW5nZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICghdGhpcy52aXNPYnNlcnZlcikgewogICAgICAgIHRoaXMudmlzT2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVQYWdlVmlzaWJpbGl0eSgpOwogICAgICB9CgogICAgICB0aGlzLndhdGNoZXIgPSBmYWxzZTsKICAgICAgdmFyIGhhbmRsZXIgPSAnJzsKICAgICAgZm9yICh2YXIgZXZUeXBlIGluIHRoaXMuZXYpIHsKICAgICAgICBpZiAodGhpcy5ldi5oYXNPd25Qcm9wZXJ0eShldlR5cGUpICYmIHRoaXMuZXZbZXZUeXBlXSkgewogICAgICAgICAgLy8gSGFuZGxlciBmdW5jdGlvbnMgYXJlICdvbnNjcm9sbCcsICdvbnJlc2l6ZScsIG9uICd1bmlzb25UYWJCYXJWaXNpYmlsaXR5JwogICAgICAgICAgaGFuZGxlciA9ICdvbicgKyBldlR5cGU7CiAgICAgICAgICAvLyB0aGlzLmV2W2V2VHlwZV0gaXMgZWl0aGVyIGEgYm9vbGVhbiBvciB0aGUgZGV0YWlsIGF0dHJpYnV0ZSBmcm9tIGEgY3VzdG9tIGV2ZW50CiAgICAgICAgICB0aGlzW2hhbmRsZXJdKCB0aGlzLmV2W2V2VHlwZV0gKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmNhbmNlbFdhdGNoKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMud2F0Y2hlcik7CiAgICAgICAgdGhpcy53YXRjaGVyID0gdW5kZWZpbmVkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGhyb3R0bGVkV2F0Y2hlcih0aGlzLmNoZWNrRm9yQ2hhbmdlLCB0aGlzLnRocm90dGxlSW50KTsKICAgICAgfQogICAgfSwKCiAgICBjcmVhdGVRdWV1ZTogZnVuY3Rpb24oKSB7CiAgICAgIGZvciAodmFyIGV2bnQgaW4gdGhpcy5ldikgewogICAgICAgIGlmICh0aGlzLmV2Lmhhc093blByb3BlcnR5KGV2bnQpKSB7CiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldm50LCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMuY2hlY2tGb3JDaGFuZ2UsIHRoaXMudGhyb3R0bGVJbnQpOwogICAgICB0aGlzLnF1ZXVlUnVubmluZyA9IHRydWU7CiAgICB9LAoKICAgIGN1cnJlbnREYXRhOiBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLmFkc1trZXldLmRhdGE7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmdsb2JhbERhdGEpIHsKICAgICAgICBpZiAodGhpcy5nbG9iYWxEYXRhLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgIGRhdGFba2V5XSA9IHRoaXMuZ2xvYmFsRGF0YVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZGF0YTsKICAgIH0sCgogICAgZGVmYXVsdFBhcmFtczogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBkID0gdGhpcy5hZHNba2V5XS5kYXRhOwogICAgICB2YXIgZyA9IHRoaXMuZ2xvYmFsRGF0YTsKICAgICAgLy8gR2xvYmFsIHByb3BlcnRpZXMgYXJlIHNldHVwIG9uY2UgYW5kIHRoZW4gdXBkYXRlZCBvbiBzY3JvbGwvcmVzaXplCiAgICAgIGlmICghZy53aW5kb3dXaWR0aCkgewogICAgICAgIGcud2luZG93V2lkdGggPSB0aGlzLmdldFdpbmRvd1dpZHRoKCk7CiAgICAgIH0KICAgICAgaWYgKCFnLndpbmRvd0hlaWdodCkgewogICAgICAgIGcud2luZG93SGVpZ2h0ID0gdGhpcy5nZXRXaW5kb3dIZWlnaHQoKTsKICAgICAgfQogICAgICBpZiAoIWcuZG9jdW1lbnRIZWlnaHQpIHsKICAgICAgICBnLmRvY3VtZW50SGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7CiAgICAgIH0KICAgICAgaWYgKCFnLnNjcm9sbE9mZnNldCkgewogICAgICAgIGcuc2Nyb2xsT2Zmc2V0ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICB9CgogICAgICBpZiAoIWcuc2Nyb2xsRGlyZWN0aW9uKSB7CiAgICAgICAgZy5zY3JvbGxEaXJlY3Rpb24gPSAiZG93biI7CiAgICAgIH0KICAgICAgLy8gZG9lcyBub3QgbmVlZCB0byBiZSBjaGFuZ2VkIGFmdGVyIHRoaXMgY2FsbAogICAgICBpZiAoIWcuaXNVbmlzb24pIHsKICAgICAgICB2YXIgdW5pc29uID0gZmFsc2U7CiAgICAgICAgaWYgKHdpbmRvdy5DaG9ydXNBZHMgJiYgd2luZG93LkNob3J1c0Fkcy5pc191bmlzb24pIHsKICAgICAgICAgIHVuaXNvbiA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGcuaXNVbmlzb24gPSB1bmlzb247CiAgICAgIH0KCiAgICAgIGlmICghZy51bmlzb25UYWJCYXJWaXNpYmlsaXR5KSB7CiAgICAgICAgZy51bmlzb25UYWJCYXJWaXNpYmlsaXR5ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBmcmFtZURpbXMgPSB0aGlzLmdldEZyYW1lRGltZW5zaW9ucyhrZXkpOwogICAgICBkLmZyYW1lSGVpZ2h0ID0gZnJhbWVEaW1zLmhlaWdodDsKICAgICAgZC5mcmFtZVdpZHRoID0gZnJhbWVEaW1zLndpZHRoOwogICAgICBkLmZyYW1lVG9wUG9zID0gZnJhbWVEaW1zLnRvcDsKICAgICAgZC5mcmFtZVBvc09uUGFnZSA9IHRoaXMuZ2V0ZnJhbWVQb3NPblBhZ2UoZnJhbWVEaW1zLnRvcCk7CiAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZShrZXksICJpbml0aWFsIik7CiAgICAgIHJldHVybiBkOwogICAgfSwKCiAgICBkaXNwYXRjaENoYW5nZTogZnVuY3Rpb24oa2V5LCBldlR5cGUpIHsKICAgICAgdmFyIGRhdGE7CiAgICAgIGlmIChldlR5cGUgJiYgZXZUeXBlID09PSAidHVyYm8iKSB7CiAgICAgICAgZGF0YSA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEgPSB0aGlzLmN1cnJlbnREYXRhKGtleSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgdHlwZTogZXZUeXBlIHx8ICcnLAogICAgICAgIHBhcmFtczogZGF0YSwKICAgICAgICB0b2tlbjogdGhpcy5hZHNba2V5XS5zZWN1cmVUb2tlbiwKICAgICAgICBzZW5kZXI6ICJwYXJlbnQiCiAgICAgIH07CiAgICAgIGlmICh0aGlzLmFkc1trZXldLmlmcmFtZWQgJiYgdGhpcy5hZHNba2V5XS5tZXNzYWdlVGFyZ2V0ICYmIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZSkgewogICAgICAgIHRoaXMuYWRzW2tleV0ubWVzc2FnZVRhcmdldC5wb3N0TWVzc2FnZShwYXJhbXMsIHRoaXMuYWRzW2tleV0ub3JpZ2luKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UocGFyYW1zLCB0aGlzLndpbmRvd0xvY2F0aW9uKCkpOwogICAgICB9CiAgICB9LAoKICAgIHR1cmJvTW9kZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBkID0gdGhpcy5jdXJyZW50RGF0YShrZXkpOwogICAgICB2YXIgZSA9IHRoaXMuZXY7CiAgICAgIHRoaXMuYWRzW2tleV0udHVyYm9PbiA9IHRydWU7CiAgICAgIGlmIChlLnNjcm9sbCB8fCBlLnJlc2l6ZSkgewogICAgICAgIGQuc2Nyb2xsUGVyY2VudCA9IHRoaXMuZ2V0U2Nyb2xsUGVyY2VudGFnZShrZXkpOwoKICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgInR1cmJvIik7CiAgICAgIH0KICAgICAgdGhpcy50aHJvdHRsZWRXYXRjaGVyKHRoaXMudHVyYm9Nb2RlLCB0aGlzLnR1cmJvSW50LCBrZXkpOwogICAgfSwKCiAgICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uKGV2KSB7CiAgICAgIC8vIHNjcm9sbCBhbmQgcmVzaXplIGV2ZW50cyBoYXZlIG5vIGRldGFpbCBrZXkKICAgICAgdGhpcy5ldltldi50eXBlXSA9IGV2LmRldGFpbCA/IGV2LmRldGFpbCA6IHRydWU7CiAgICB9LAoKICAgIGdldEZyYW1lRGltZW5zaW9uczogZnVuY3Rpb24oa2V5KSB7CiAgICAgIGlmICh0aGlzLmFkc1trZXldLmNvbnRhaW5lckVsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWRzW2tleV0uY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSUYgdGhlIGNvbnRhaW5lciBlbCBkb2Vzbid0IGV4aXN0CiAgICAgICAgcmV0dXJuICB7aGVpZ2h0OiAwLCB3aWR0aDogMCwgdG9wOiAwfQogICAgICB9CiAgICB9LAoKICAgIGdldGZyYW1lUG9zT25QYWdlOiBmdW5jdGlvbih0b3ApIHsKICAgICAgcmV0dXJuIE1hdGguYWJzKGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdG9wKTsKICAgIH0sCgogICAgZ2V0QWRNaWRwb2ludDogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBmcmFtZSA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgIHZhciB5ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwogICAgICByZXR1cm4gZnJhbWUudG9wICsgKGZyYW1lLmhlaWdodCAvIDIpICsgeTsKICAgIH0sCgogICAgZ2V0U2Nyb2xsUmFuZ2U6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgZnJhbWUgPSB0aGlzLmN1cnJlbnREYXRhKGtleSk7CiAgICAgIHZhciBsb3dlciA9IE1hdGguZmxvb3IoZnJhbWUuZnJhbWVQb3NPblBhZ2UgLSB3aW5kb3cuaW5uZXJIZWlnaHQpOwogICAgICB2YXIgdXBwZXIgPSBNYXRoLmNlaWwoZnJhbWUuZnJhbWVQb3NPblBhZ2UgKyBmcmFtZS5mcmFtZUhlaWdodCk7CiAgICAgIHJldHVybiBbbG93ZXIsIHVwcGVyXTsKICAgIH0sCgogICAgLy8gZm9ybXVsYSBmcm9tIHRoZSBtYWduaWZpY2VudCBzdGFja2V4Y2hhbmdlCiAgICAvL2h0dHA6Ly9tYXRoLnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy81MTUwOS9ob3ctdG8tY2FsY3VsYXRlLXBlcmNlbnRhZ2Utb2YtdmFsdWUtaW5zaWRlLWFyYml0cmFyeS1yYW5nZQogICAgZ2V0U2Nyb2xsUGVyY2VudGFnZTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBib3VuZHMgPSB0aGlzLmdldFNjcm9sbFJhbmdlKGtleSk7CiAgICAgIHZhciB5ID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0OwoKICAgICAgdmFyIHBjdCA9ICh5IC0gYm91bmRzWzBdKSAvIChib3VuZHNbMV0gLSBib3VuZHNbMF0pOwogICAgICByZXR1cm4gcGN0OwogICAgfSwKCiAgICBnZXRXaW5kb3dXaWR0aDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciB3ID0gd2luZG93LnRvcC5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgLy8gdGhpcyBtYXkgYmUgdHJ1ZSBvbiBtb2JpbGUgZGV2aWNlcyB3aXRoIGhpZ2ggRFBJIHNjcmVlbnMKICAgICAgaWYgKHcgPiBzY3JlZW4ud2lkdGgpIHsKICAgICAgICB3ID0gc2NyZWVuLndpZHRoOwogICAgICB9CiAgICAgIHJldHVybiB3OwogICAgfSwKCiAgICBnZXRXaW5kb3dIZWlnaHQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgaCA9IHdpbmRvdy50b3AuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCiAgICAgIGlmIChoID4gc2NyZWVuLmhlaWdodCkgewogICAgICAgIGggPSBzY3JlZW4uaGVpZ2h0OwogICAgICB9CiAgICAgIHJldHVybiBoOwogICAgfSwKCiAgICBvYnNlcnZlUGFnZVZpc2liaWxpdHk6IGZ1bmN0aW9uKCkgewogICAgICBpZiAodGhpcy52aXNPYnNlcnZlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICB2YXIgcHJlZml4ZXMgPSBbJ2gnLCAnbW96SCcsICdtc0gnLCAnd2Via2l0SCddOwogICAgICB2YXIgaGlkZGVuLCB2aXNpYmlsaXR5Q2hhbmdlCiAgICAgIHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24ocHJlZml4KSB7CiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudFtwcmVmaXggKyAnaWRkZW4nXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBoaWRkZW4gPSBwcmVmaXggKyAnaWRkZW4nOwogICAgICAgICAgaWYgKHByZWZpeCA9PT0gJ2gnKSB7CiAgICAgICAgICAgIHZpc2liaWxpdHlDaGFuZ2UgPSAndmlzaWJpbGl0eWNoYW5nZSc7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2aXNpYmlsaXR5Q2hhbmdlID0gcHJlZml4LnNsaWNlKDAsIC0xKSArICd2aXNpYmlsaXR5Y2hhbmdlJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodHlwZW9mIGRvY3VtZW50W2hpZGRlbl0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHZpc2liaWxpdHlDaGFuZ2UsIGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMudmlzT2JzZXJ2ZXIgPSB0cnVlOwogICAgICAgIGlmIChkb2N1bWVudFtoaWRkZW5dKSB7CiAgICAgICAgICB0aGlzLmNhbmNlbFdhdGNoID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jYW5jZWxXYXRjaCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5jaGVja0ZvckNoYW5nZSgpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCgogICAgdGhyb3R0bGVkV2F0Y2hlcjogZnVuY3Rpb24oY2IsIGludCwga2V5KSB7CiAgICAgIHNldFRpbWVvdXQoY2IuYmluZCh0aGlzKSwgaW50LCBrZXkpOwogICAgfSwKCiAgICBtZXNzYWdlSGFuZGxlcjogZnVuY3Rpb24oZXYpIHsKICAgICAgdmFyIGlzQ2hpbGQgPSBldi5kYXRhLnNlbmRlciAmJiBldi5kYXRhLnNlbmRlciA9PT0gImNoaWxkIjsKICAgICAgdmFyIGFkID0gZXYuZGF0YS50b2tlbiAmJiB0aGlzLmFkc1tldi5kYXRhLnRva2VuXTsKICAgICAgaWYgKCFpc0NoaWxkIHx8ICFhZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBhZC5tZXNzYWdlVGFyZ2V0ID0gZXYuc291cmNlOwogICAgICBhZC5jb250YWluZXJFbCA9IGV2LnNvdXJjZS5mcmFtZUVsZW1lbnQ7CgogICAgICBpZiAoZXYuZGF0YS5pbklmcmFtZSkgewogICAgICAgIGFkLmlmcmFtZWQgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBUaGlzIHdpbGwgYWxyZWFkeSBleGlzdCBpZiB0aGUgYWQgaXMgbm90IGluIGFuIGlmcmFtZQogICAgICBpZiAoIWFkLm9yaWdpbikgewogICAgICAgIGFkLm9yaWdpbiA9IGV2Lm9yaWdpbjsKICAgICAgfQoKICAgICAgLy8gSWYgdGhlIGFkIGlzIGluIGFuIGlmcmFtZSBidXQgd2UgZG9uJ3QgaGF2ZSBhIGNvbnRhaW5lciBlbGVtZW50CiAgICAgIC8vIHRoYXQgcHJvYmFibHkgbWVhbnMgd2UncmUgc2FuZGJveGVkLCBtb3N0IGxpa2VseSBvbiBhIHBhcnRuZXIgbmV0d29yawogICAgICAvLyBsZXQncyBwcmV0ZW5kIHRoYXQgd2UncmUgbm90IGluIGEgaWZyYW1lIGluIHRoYXQgY2FzZS4KICAgICAgaWYgKGFkLmlmcmFtZWQgJiYgIWFkLmNvbnRhaW5lckVsKSB7CiAgICAgICAgYWQuY29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1oeW1uYWwtaWRdJyk7CiAgICAgICAgYWQuaWZyYW1lZCA9IGZhbHNlOwogICAgICAgIGFkLm9yaWdpbiA9IHRoaXMud2luZG93TG9jYXRpb24oKTsKICAgICAgfQoKICAgICAgaWYgKGV2LmRhdGEuZnVuYyAmJiBldi5kYXRhLmZ1bmMgaW4gdGhpcykgewogICAgICAgIHRoaXNbZXYuZGF0YS5mdW5jXShldi5kYXRhLnRva2VuKTsKICAgICAgfQoKICAgICAgaWYgKGV2LmRhdGEuaW50ZXJ2YWwpIHsKICAgICAgICB0aGlzLnRocm90dGxlSW50ID0gZXYuZGF0YS5pbnRlcnZhbDsKICAgICAgfQoKICAgICAgaWYgKCFhZC5pc0Nvbm5lY3RlZCkgewogICAgICAgIHRoaXMuZGVmYXVsdFBhcmFtcyhhZC5zZWN1cmVUb2tlbik7CiAgICAgICAgYWQuaXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucXVldWVSdW5uaW5nKSB7CiAgICAgICAgdGhpcy5jcmVhdGVRdWV1ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoQ2hhbmdlKGFkLnNlY3VyZVRva2VuLCAicmVjZWlwdCIpOwogICAgICB9CiAgICB9LAoKICAgIC8vIGxvb3BzIHRocm91Z2ggYWxsIHJlZ2lzdGVyZWQgYWRzIGFuZCB1cGRhdGVzIGFsbCByZXF1ZXN0ZWQgYXR0cmlidXRlcwogICAgLy8gdGhlbiBkaXNwYXRjaGVzIGNoYW5nZSBtZXNzYWdlcyBmb3IgZXZlcnkgYWQKICAgIC8vIGV2IGlzIHJlcXVpcmVkLCBhdHRycyBpcyBvcHRpb25hbAogICAgdXBkYXRlUmVnaXN0ZXJlZEFkczogZnVuY3Rpb24oZXYsIGF0dHJzKSB7CiAgICAgIHZhciBmcmFtZURpbXM7CiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmFkcykgewogICAgICAgIGlmICghdGhpcy5hZHMuaGFzT3duUHJvcGVydHkoa2V5KSApewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHRvdWNoIHRoZSBkb20gaWYgdGhpcyBpcyBqdXN0IGFuIGV2ZW50IGRpc3BhdGNoCiAgICAgICAgaWYgKGF0dHJzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZyYW1lRGltcyA9IHRoaXMuZ2V0RnJhbWVEaW1lbnNpb25zKGtleSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignZnJhbWVIZWlnaHQnKSA+IC0xICYmCiAgICAgICAgICBmcmFtZURpbXMuaGVpZ2h0ICE9PSB0aGlzLmFkc1trZXldLmRhdGEuZnJhbWVIZWlnaHQpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZUhlaWdodCA9IGZyYW1lRGltcy5oZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignZnJhbWVXaWR0aCcpID4gLTEgJiYKICAgICAgICAgIGZyYW1lRGltcy53aWR0aCAhPT0gdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lV2lkdGgpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZVdpZHRoID0gZnJhbWVEaW1zLndpZHRoOwogICAgICAgIH0KCiAgICAgICAgaWYgKGF0dHJzLmluZGV4T2YoJ2ZyYW1lVG9wUG9zJykgPiAtMSkgewogICAgICAgICAgdGhpcy5hZHNba2V5XS5kYXRhLmZyYW1lVG9wUG9zID0gZnJhbWVEaW1zLnRvcDsKICAgICAgICB9CgogICAgICAgIGlmIChhdHRycy5pbmRleE9mKCdmcmFtZVBvc09uUGFnZScpID4gLTEpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5mcmFtZVBvc09uUGFnZSA9IHRoaXMuZ2V0ZnJhbWVQb3NPblBhZ2UoZnJhbWVEaW1zLnRvcCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXR0cnMuaW5kZXhPZignc2Nyb2xsUGVyY2VudCcpID4gLTEpIHsKICAgICAgICAgIHRoaXMuYWRzW2tleV0uZGF0YS5zY3JvbGxQZXJjZW50ID0gdGhpcy5nZXRTY3JvbGxQZXJjZW50YWdlKGtleSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKGtleSwgZXYpOwogICAgICB9CiAgICB9LAoKICAgIG9uc2Nyb2xsOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ldi5zY3JvbGwgPSBmYWxzZTsKICAgICAgdmFyIGcgPSB0aGlzLmdsb2JhbERhdGE7CiAgICAgIGcuZG9jdW1lbnRIZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgdmFyIGN1cnJlbnRTY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7CiAgICAgIGcuc2Nyb2xsRGlyZWN0aW9uID0gY3VycmVudFNjcm9sbCA+IGcuc2Nyb2xsT2Zmc2V0ICA/ICJkb3duIiA6ICJ1cCI7CiAgICAgIGcuc2Nyb2xsT2Zmc2V0ID0gY3VycmVudFNjcm9sbDsKCiAgICAgIHRoaXMudXBkYXRlUmVnaXN0ZXJlZEFkcygnc2Nyb2xsJywgWydmcmFtZUhlaWdodCcsICdmcmFtZVdpZHRoJywgJ2ZyYW1lVG9wUG9zJywgJ2ZyYW1lUG9zT25QYWdlJywgJ3Njcm9sbFBlcmNlbnQnXSk7CiAgICB9LAoKICAgIG9ucmVzaXplOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5ldi5yZXNpemUgPSBmYWxzZTsKICAgICAgdmFyIGcgPSB0aGlzLmdsb2JhbERhdGE7CiAgICAgIGcud2luZG93V2lkdGggPSB0aGlzLmdldFdpbmRvd1dpZHRoKCk7CiAgICAgIGcud2luZG93SGVpZ2h0ID0gdGhpcy5nZXRXaW5kb3dIZWlnaHQoKTsKICAgICAgZy5kb2N1bWVudEhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OwoKICAgICAgdGhpcy51cGRhdGVSZWdpc3RlcmVkQWRzKCdyZXNpemUnLCBbJ2ZyYW1lSGVpZ2h0JywgJ2ZyYW1lV2lkdGgnLCAnZnJhbWVUb3BQb3MnLCAnZnJhbWVQb3NPblBhZ2UnLCAnc2Nyb2xsUGVyY2VudCddKTsKICAgIH0sCgogICAgLyoKICAgICogVGhpcyBmdW5jdGlvbiBnaXZlcyBhbiBhZCB0aGUgb3B0aW9uIHRvIHVwZGF0ZSBpdHMgcmVmcmVzaCBhYmlsaXR5IGluc2lkZSBpdHMgc2xvdC4KICAgICogVGhlIGRpc3BhdGNoZWQgY3VzdG9tIEV2ZW50IHdpbGwgYmUgdXNlZCBpbiB0aGUgQ2hvcnVzQWRzIG9iamVjdCBmb3VuZCBoZXJlOgogICAgKiBzYm4vYXBwX3VuaXNvbi9mcm9udGVuZC9jb21wb25lbnRzL2FwcHMvY2hvcnVzX2Fkcy9saWIvc2xvdC5qcwogICAgKi8KCiAgICByZWZyZXNoRWxpZ2liaWxpdHlFdmVudDogZnVuY3Rpb24oa2V5LCBkZXRhaWwpIHsKICAgICAgdGhpcy5hZHNba2V5XS5jb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncmVmcmVzaEVsaWdpYmlsaXR5VG9nZ2xlJywgewogICAgICAgIGJ1YmJsZXM6dHJ1ZSwKICAgICAgICBkZXRhaWw6IGRldGFpbAogICAgICB9KSk7CiAgICB9LAoKICAgIGVuYWJsZVJlZnJlc2hFbGlnaWJpbGl0eTogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHRoaXMucmVmcmVzaEVsaWdpYmlsaXR5RXZlbnQoa2V5LCB7cmVmcmVzaDogdHJ1ZX0pOwogICAgfSwKCiAgICBkaXNhYmxlUmVmcmVzaEVsaWdpYmlsaXR5OiBmdW5jdGlvbihrZXkpIHsKICAgICAgdGhpcy5yZWZyZXNoRWxpZ2liaWxpdHlFdmVudChrZXksIHtyZWZyZXNoOiBmYWxzZX0pOwogICAgfSwKCiAgICAvLyB1bmlzb24gdGFiIGJhciBBUEkKCiAgICBvbnVuaXNvblRhYkJhclZpc2liaWxpdHk6IGZ1bmN0aW9uKGRldGFpbCkgewogICAgICAvLyByZXNldCB0aGUgZXZlbnQgY2hlY2tlcgogICAgICB0aGlzLmV2LnVuaXNvblRhYkJhclZpc2liaWxpdHkgPSBmYWxzZTsKICAgICAgdGhpcy5nbG9iYWxEYXRhLnVuaXNvblRhYkJhclZpc2liaWxpdHkgPSBkZXRhaWwudmlzaWJsZTsKICAgICAgdGhpcy51cGRhdGVSZWdpc3RlcmVkQWRzKCd1bmlzb25UYWJCYXJWaXNpYmlsaXR5JywgW10pOwogICAgfSwKCiAgICB1bmlzb25UYWJCYXJFdmVudDogZnVuY3Rpb24oZGV0YWlsKSB7CiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd1bmlzb25UYWJCYXJPdmVycmlkZScsIHtkZXRhaWw6IGRldGFpbH0pKTsKICAgIH0sCgogICAgc2hvd1VuaXNvblRhYkJhcjogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudW5pc29uVGFiQmFyRXZlbnQoe3Zpc2liaWxpdHk6IHRydWV9KTsKICAgIH0sCgogICAgaGlkZVVuaXNvblRhYkJhcjogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudW5pc29uVGFiQmFyRXZlbnQoe3Zpc2liaWxpdHk6IGZhbHNlfSk7CiAgICB9LAoKICAgIHJlc2V0VG9EZWZhdWx0VW5pc29uVGFiQmFyOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy51bmlzb25UYWJCYXJFdmVudCh7cmVzZXQ6IHRydWV9KTsKICAgIH0sCgogICAgd2luZG93TG9jYXRpb246IGZ1bmN0aW9uKCkgewogICAgICB2YXIgbCA9IHdpbmRvdy5sb2NhdGlvbjsKICAgICAgaWYgKCFsLm9yaWdpbil7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiA9IGwucHJvdG9jb2wgKyAiLy8iICsgbC5ob3N0bmFtZSArIChsLnBvcnQgPyAnOicgKyBsLnBvcnQ6ICcnKTsKICAgICAgfQogICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLm9yaWdpbjsKICAgIH0KCiAgfTsKICByZXR1cm4gSHltbmFsUGFyZW50LmluaXQuYmluZChIeW1uYWxQYXJlbnQpOwp9KSh3aW5kb3cpOwo=",inIframe:renderInIframe},setupEventsAPI=function(){return new Promise(function(e,t){var n="window.RegisterHymnalAd"+eventsAPIData.scriptDigest,i=eventsAPIData.parentLibString,o="hymnal__iframe-events-"+eventsAPIData.scriptDigest,a=window.document;(isInIframe()&&renderInIframe||"object"==typeof Hymnal&&Hymnal.settings&&Hymnal.settings.inPreview)&&window.frameElement&&window.frameElement.ownerDocument&&(a=window.frameElement.ownerDocument);var r=a.createElement("script"),s=n+"({inIframe: "+eventsAPIData.inIframe+', token: "'+eventAPIToken+'"});';a.getElementById(o)?r.innerHTML=s:(r.innerHTML=n+"="+atob(i)+" "+s,r.id=o);try{a.body.appendChild(r)}catch(e){t(e)}e()})},concertConciergeLikely=function(){var e=!!window.$sf,t=!0;try{parent&&parent.frameElement}catch(e){t=!1}return!e&&!t}();execHymnal()}();