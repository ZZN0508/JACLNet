(window.monolithJsonpFunction=window.monolithJsonpFunction||[]).push([["7853c2f2"],{10366:function(e,r,t){"use strict";e.exports=function(){}},10367:function(e,r,t){"use strict";function n(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw s}}}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var o=t(10368),s=t(9126);function i(e,r){return r.encode?r.strict?o(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===babelHelpers.typeof(e)?c(Object.keys(e)).sort((function(e,r){return Number(e)-Number(r)})).map((function(r){return e[r]})):e}function l(e){var r=e.indexOf("?");return-1===r?"":e.slice(r+1)}function u(e,r){var t=function(e){var r;switch(e.arrayFormat){case"index":return function(e,t,n){r=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),r?(void 0===n[e]&&(n[e]={}),n[e][r[1]]=t):n[e]=t};case"bracket":return function(e,t,n){r=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),r?void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=[t]:n[e]=t};default:return function(e,r,t){void 0!==t[e]?t[e]=[].concat(t[e],r):t[e]=r}}}(r=Object.assign({arrayFormat:"none"},r)),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;var o,i=n(e.split("&"));try{for(i.s();!(o=i.n()).done;){var l=o.value.replace(/\+/g," ").split("="),u=babelHelpers.slicedToArray(l,2),p=u[0],f=u[1];f=void 0===f?null:s(f),t(s(p),f,a)}}catch(e){i.e(e)}finally{i.f()}return Object.keys(a).sort().reduce((function(e,r){var t=a[r];return Boolean(t)&&"object"===babelHelpers.typeof(t)&&!Array.isArray(t)?e[r]=c(t):e[r]=t,e}),Object.create(null))}r.extract=l,r.parse=u,r.stringify=function(e,r){!1===(r=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},r)).sort&&(r.sort=function(){});var t=function(e){switch(e.arrayFormat){case"index":return function(r,t,n){return null===t?[i(r,e),"[",n,"]"].join(""):[i(r,e),"[",i(n,e),"]=",i(t,e)].join("")};case"bracket":return function(r,t){return null===t?i(r,e):[i(r,e),"[]=",i(t,e)].join("")};default:return function(r,t){return null===t?i(r,e):[i(r,e),"=",i(t,e)].join("")}}}(r);return e?Object.keys(e).sort(r.sort).map((function(a){var o=e[a];if(void 0===o)return"";if(null===o)return i(a,r);if(Array.isArray(o)){var s,c=[],l=n(o.slice());try{for(l.s();!(s=l.n()).done;){var u=s.value;void 0!==u&&c.push(t(a,u,c.length))}}catch(e){l.e(e)}finally{l.f()}return c.join("&")}return i(a,r)+"="+i(o,r)})).filter((function(e){return e.length>0})).join("&"):""},r.parseUrl=function(e,r){return{url:e.split("?")[0]||"",query:u(l(e),r)}}},10368:function(e,r,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},10637:function(e,r,t){"use strict";t.r(r);var n=t(3890),a=t.n(n),o=t(3897),s=t.n(o),i=t(10681),c=t(10799),l=t(10868),u=t(4358),p=t(10947),f="SET_LOGIN",h="SET_RESTORE_TYPE",d="RESET_LOGIN",b="SET_SUCCESS_AUTH_REDIRECT_URL",m="SHOW_CAPTCHA",y="HIDE_CAPTCHA",O="SET_LOGIN_ERROR",g="SET_FORM_ERROR",E="SET_FORM_UNKNOWN_ERROR",P="SET_CAPTCHA_ERROR",v="SET_PASSWORD_ERROR",_="SET_ANTIHACK_ERROR",R="CLEAR_ERRORS_AND_LOADING",A="DELETE_LAST_LOGIN_DATA",T="SET_POPUP_SOURCE",C="RESET_POPUP_SOURCE",S="CLEAR_ERROR",k="GET_CAPTCHA",H="SET_CODE_ERROR",w="SET_CODE_TIMER",j="FETCH_REQUEST",G="FETCH_SUCCESS",I="FETCH_FAILURE",N="AUTH_LOGIN_SUCCESS",L={GO_TO_AUTH_PAGE_CLASSIC:"GO_TO_AUTH_PAGE_CLASSIC",GO_TO_ACTIAGENT_PAGE:"GO_TO_ACTIAGENT_PAGE",GO_TO_ACTIDEALER_PAGE:"GO_TO_ACTIDEALER_PAGE",GO_TO_AUTH_PAGE:"GO_TO_AUTH_PAGE",GO_TO_DEFAULT_PAGE:"GO_TO_DEFAULT_PAGE",GO_TO_DELETED_ACCOUNT_PAGE:"GO_TO_DELETED_ACCOUNT_PAGE",GO_TO_PASSWORD_WAS_RESET_PAGE:"GO_TO_PASSWORD_WAS_RESET_PAGE",GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE:"GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE",GO_TO_CONFIRM_USER_PHONE_PAGE:"GO_TO_CONFIRM_USER_PHONE_PAGE",GO_TO_ANTI_HACK_PAGE:"GO_TO_ANTI_HACK_PAGE",GO_TO_TIME_IS_UP_ERROR_PAGE:"GO_TO_TIME_IS_UP_ERROR_PAGE",GO_TO_ANTIHACK_BY_PHONE_PAGE:"GO_TO_ANTIHACK_BY_PHONE_PAGE",GO_TO_SOCIAL_LOGIN_SUGGEST_PAGE:"GO_TO_SOCIAL_LOGIN_SUGGEST_PAGE",GO_TO_CONFIRM_USER_PHONE_FOR_AUTH_PAGE:"GO_TO_CONFIRM_USER_PHONE_FOR_AUTH_PAGE",GO_TO_2FA_CHECK_PAGE:"GO_TO_2FA_CHECK_PAGE",GO_TO_FOUND_USERS_LIST_PAGE:"GO_TO_FOUND_USERS_LIST_PAGE",GO_TO_USERS_LIST_ERROR_PAGE:"GO_TO_USERS_LIST_ERROR_PAGE",GO_TO_KNOWN_USER_LOGIN_PAGE:"GO_TO_KNOWN_USER_LOGIN_PAGE",GO_TO_REGISTRATION_CHECK_CODE_PAGE:"GO_TO_REGISTRATION_CHECK_CODE_PAGE",GO_TO_REGISTRATION_MAIN_PAGE:"GO_TO_REGISTRATION_MAIN_PAGE",GO_TO_REGISTRATION_SET_PASSWORD_PAGE:"GO_TO_REGISTRATION_SET_PASSWORD_PAGE",GO_TO_REGISTRATION_ERROR_PAGE:"GO_TO_REGISTRATION_ERROR_PAGE",GO_TO_SOCIAL_AUTH_PAGE:"GO_TO_SOCIAL_AUTH_PAGE",GO_TO_SOCIAL_AUTH_ERROR_PAGE:"GO_TO_SOCIAL_AUTH_ERROR_PAGE",GO_TO_SOCIAL_WRONG_ID_ERROR_PAGE:"GO_TO_SOCIAL_WRONG_ID_ERROR_PAGE",GO_TO_PHONE_REGISTRATION:"GO_TO_PHONE_REGISTRATION",GO_TO_BLOCKED_ACCOUNT_PAGE:"GO_TO_BLOCKED_ACCOUNT_PAGE",GO_TO_BLOCKED_PRO_ACCOUNT_PAGE:"GO_TO_BLOCKED_PRO_ACCOUNT_PAGE",GO_TO_EMAIL_RESTORE_REQUIRED_PAGE:"GO_TO_EMAIL_RESTORE_REQUIRED_PAGE",GO_TO_RESTORE_LOGIN_CHECK_PAGE:"GO_TO_RESTORE_LOGIN_CHECK_PAGE",GO_TO_RESTORE_LOGIN_PAGE:"GO_TO_RESTORE_LOGIN_PAGE",GO_TO_RESTORE_RESET_PAGE:"GO_TO_RESTORE_RESET_PAGE",GO_TO_WRONG_HASH_PAGE:"GO_TO_WRONG_HASH_PAGE"},D=[L.GO_TO_AUTH_PAGE,L.GO_TO_DEFAULT_PAGE,L.GO_TO_KNOWN_USER_LOGIN_PAGE,L.GO_TO_REGISTRATION_CHECK_CODE_PAGE,L.GO_TO_REGISTRATION_MAIN_PAGE,L.GO_TO_REGISTRATION_SET_PASSWORD_PAGE,L.GO_TO_SOCIAL_AUTH_PAGE,L.GO_TO_RESTORE_LOGIN_PAGE,L.GO_TO_RESTORE_RESET_PAGE],x=L;function U(e){var r=e.dispatch;return function(e){return function(t){return D.includes(t.type)&&r({type:R}),e(t)}}}var B=t(9103),F=t(10366),q=t.n(F),M=t(4605),z=t.n(M);function K(e){return"/"===e.charAt(0)}function W(e,r){for(var t=r,n=t+1,a=e.length;n<a;t+=1,n+=1)e[t]=e[n];e.pop()}var V=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=e&&e.split("/")||[],n=r&&r.split("/")||[],a=e&&K(e),o=r&&K(r),s=a||o;if(e&&K(e)?n=t:t.length&&(n.pop(),n=n.concat(t)),!n.length)return"/";var i=void 0;if(n.length){var c=n[n.length-1];i="."===c||".."===c||""===c}else i=!1;for(var l=0,u=n.length;u>=0;u--){var p=n[u];"."===p?W(n,u):".."===p?(W(n,u),l++):l&&(W(n,u),l--)}if(!s)for(;l--;l)n.unshift("..");!s||""===n[0]||n[0]&&K(n[0])||n.unshift("");var f=n.join("/");return i&&"/"!==f.substr(-1)&&(f+="/"),f},$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Y=function e(r,t){if(r===t)return!0;if(null==r||null==t)return!1;if(Array.isArray(r))return Array.isArray(t)&&r.length===t.length&&r.every((function(r,n){return e(r,t[n])}));var n=void 0===r?"undefined":$(r);if(n!==(void 0===t?"undefined":$(t)))return!1;if("object"===n){var a=r.valueOf(),o=t.valueOf();if(a!==r||o!==t)return e(a,o);var s=Object.keys(r),i=Object.keys(t);return s.length===i.length&&s.every((function(n){return e(r[n],t[n])}))}return!1},Q=function(e){return"/"===e.charAt(0)?e:"/"+e},J=function(e){return"/"===e.charAt(0)?e.substr(1):e},X=function(e,r){return new RegExp("^"+r+"(\\/|\\?|#|$)","i").test(e)},Z=function(e,r){return X(e,r)?e.substr(r.length):e},ee=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},re=function(e){var r=e.pathname,t=e.search,n=e.hash,a=r||"/";return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(a+="#"===n.charAt(0)?n:"#"+n),a},te=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ne=function(e,r,t,n){var a=void 0;"string"==typeof e?(a=function(e){var r=e||"/",t="",n="",a=r.indexOf("#");-1!==a&&(n=r.substr(a),r=r.substr(0,a));var o=r.indexOf("?");return-1!==o&&(t=r.substr(o),r=r.substr(0,o)),{pathname:r,search:"?"===t?"":t,hash:"#"===n?"":n}}(e)).state=r:(void 0===(a=te({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==r&&void 0===a.state&&(a.state=r));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return t&&(a.key=t),n?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=V(a.pathname,n.pathname)):a.pathname=n.pathname:a.pathname||(a.pathname="/"),a},ae=function(e,r){return e.pathname===r.pathname&&e.search===r.search&&e.hash===r.hash&&e.key===r.key&&Y(e.state,r.state)},oe=function(){var e=null,r=[];return{setPrompt:function(r){return q()(null==e,"A history supports only one prompt at a time"),e=r,function(){e===r&&(e=null)}},confirmTransitionTo:function(r,t,n,a){if(null!=e){var o="function"==typeof e?e(r,t):e;"string"==typeof o?"function"==typeof n?n(o,a):(q()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),a(!0)):a(!1!==o)}else a(!0)},appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return r.push(n),function(){t=!1,r=r.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach((function(e){return e.apply(void 0,t)}))}}},se=!("undefined"==typeof window||!window.document||!window.document.createElement),ie=function(e,r,t){return e.addEventListener?e.addEventListener(r,t,!1):e.attachEvent("on"+r,t)},ce=function(e,r,t){return e.removeEventListener?e.removeEventListener(r,t,!1):e.detachEvent("on"+r,t)},le=function(e,r){return r(window.confirm(e))},ue=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},pe=("function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}),fe="hashchange",he={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+J(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:J,decodePath:Q},slash:{encodePath:Q,decodePath:Q}},de=function(){var e=window.location.href,r=e.indexOf("#");return-1===r?"":e.substring(r+1)},be=function(e){return window.location.hash=e},me=function(e){var r=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,r>=0?r:0)+"#"+e)},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};z()(se,"Hash history needs a DOM");var r=window.history,t=ue(),n=e.getUserConfirmation,a=void 0===n?le:n,o=e.hashType,s=void 0===o?"slash":o,i=e.basename?ee(Q(e.basename)):"",c=he[s],l=c.encodePath,u=c.decodePath,p=function(){var e=u(de());return q()(!i||X(e,i),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+i+'".'),i&&(e=Z(e,i)),ne(e)},f=oe(),h=function(e){pe(I,e),I.length=r.length,f.notifyListeners(I.location,I.action)},d=!1,b=null,m=function(){var e=de(),r=l(e);if(e!==r)me(r);else{var t=p(),n=I.location;if(!d&&ae(n,t))return;if(b===re(t))return;b=null,y(t)}},y=function(e){if(d)d=!1,h();else{f.confirmTransitionTo(e,"POP",a,(function(r){r?h({action:"POP",location:e}):O(e)}))}},O=function(e){var r=I.location,t=v.lastIndexOf(re(r));-1===t&&(t=0);var n=v.lastIndexOf(re(e));-1===n&&(n=0);var a=t-n;a&&(d=!0,T(a))},g=de(),E=l(g);g!==E&&me(E);var P=p(),v=[re(P)],_=function(e){return"#"+l(i+re(e))},R=function(e,r){q()(void 0===r,"Hash history cannot push state; it is ignored");var t="PUSH",n=ne(e,void 0,void 0,I.location);f.confirmTransitionTo(n,t,a,(function(e){if(e){var r=re(n),a=l(i+r);if(de()!==a){b=r,be(a);var o=v.lastIndexOf(re(I.location)),s=v.slice(0,-1===o?0:o+1);s.push(r),v=s,h({action:t,location:n})}else q()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),h()}}))},A=function(e,r){q()(void 0===r,"Hash history cannot replace state; it is ignored");var t="REPLACE",n=ne(e,void 0,void 0,I.location);f.confirmTransitionTo(n,t,a,(function(e){if(e){var r=re(n),a=l(i+r);de()!==a&&(b=r,me(a));var o=v.indexOf(re(I.location));-1!==o&&(v[o]=r),h({action:t,location:n})}}))},T=function(e){q()(t,"Hash history go(n) causes a full page reload in this browser"),r.go(e)},C=function(){return T(-1)},S=function(){return T(1)},k=0,H=function(e){1===(k+=e)?ie(window,fe,m):0===k&&ce(window,fe,m)},w=!1,j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=f.setPrompt(e);return w||(H(1),w=!0),function(){return w&&(w=!1,H(-1)),r()}},G=function(e){var r=f.appendListener(e);return H(1),function(){H(-1),r()}},I={length:r.length,action:"POP",location:P,createHref:_,push:R,replace:A,go:T,goBack:C,goForward:S,block:j,listen:G};return I},Oe=("function"==typeof Symbol&&Symbol.iterator,Object.assign,t(10367)),ge=t.n(Oe);function Ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Pe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ee(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ve(){return{type:m}}function _e(){return{type:y}}function Re(e){return{type:S,payload:{errorType:e}}}function Ae(){return{type:k}}function Te(e){return{type:O,payload:{errorText:e}}}function Ce(e){return{type:f,payload:{login:e}}}function Se(e){return{type:P,payload:{errorText:e}}}function ke(e){return{type:E,payload:{error:e}}}function He(e){return{type:v,payload:{errorText:e}}}function we(e){return{type:H,payload:{errorText:e}}}function je(e){return{type:w,payload:{timer:e}}}function Ge(e){return{type:T,payload:{source:e}}}var Ie,Ne,Le,De=t(6032);function xe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var Ue=ye({hashType:"noslash"}),Be=function(e){return{path:e,thunk:function(e,r){if("undefined"!=typeof window){var t,n=window.localStorage.getItem("restorePasswordEmail");if(window.localStorage.removeItem("restorePasswordEmail"),n)r().common.login||(e(Ce(n)),e((t=De.c,{type:h,payload:{restoreType:t}})))}}}},Fe=(Ie={},babelHelpers.defineProperty(Ie,x.GO_TO_AUTH_PAGE,"/login"),babelHelpers.defineProperty(Ie,x.GO_TO_AUTH_PAGE_CLASSIC,"/login"),Ie),qe=(Ne={},babelHelpers.defineProperty(Ne,x.GO_TO_RESTORE_LOGIN_PAGE,"/restore"),babelHelpers.defineProperty(Ne,x.GO_TO_RESTORE_RESET_PAGE,"/restore/confirm/:hash/:platform/:restoreType"),babelHelpers.defineProperty(Ne,x.GO_TO_DELETED_ACCOUNT_PAGE,"/restore/error/deleted"),babelHelpers.defineProperty(Ne,x.GO_TO_WRONG_HASH_PAGE,"/restore/error/hash"),babelHelpers.defineProperty(Ne,x.GO_TO_BLOCKED_ACCOUNT_PAGE,"/restore/error/blocked/:reasonText"),babelHelpers.defineProperty(Ne,x.GO_TO_BLOCKED_PRO_ACCOUNT_PAGE,"/restore/error/pro-blocked/:proType"),babelHelpers.defineProperty(Ne,x.GO_TO_PASSWORD_WAS_RESET_PAGE,Be("/restorepassword")),babelHelpers.defineProperty(Ne,x.GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE,Be("/restoreweakpassword")),Ne),Me=(Le={},babelHelpers.defineProperty(Le,x.GO_TO_REGISTRATION_MAIN_PAGE,"/registration"),babelHelpers.defineProperty(Le,x.GO_TO_PHONE_REGISTRATION,"/registration/phone"),Le);function ze(e){var r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?xe(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}(babelHelpers.defineProperty({},x.GO_TO_DEFAULT_PAGE,{path:"/",thunk:function(e,r){var t=r().location.pathname,n=window.location.href.endsWith("#");"/"===t&&n&&window.history.replaceState(window.history.state,null,"".concat(window.location.pathname).concat(window.location.search))}}),Fe,{},qe,{},Me);return e.size&&(r=r),Object(B.connectRoutes)(Ue,r,{querySerializer:ge.a})}function Ke(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function We(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ke(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ve={authSuccess:!1,lastLogin:null,remember:!0},$e=t(4223),Ye=function(){return"/captcha?".concat(Date.now())};function Qe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Qe(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Xe={captchaError:"",formError:"",isCaptchaShown:!1,isLoading:!1,login:"",loginError:"",passwordError:"",codeError:"",successAction:"",restoreType:De.d,secondaryRestoreType:void 0,timer:0,antihackByPhone:null,isPasswordReset:!1,weakPasswordMessage:""},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,r=arguments.length>1?arguments[1]:void 0,t=r.payload,n=void 0===t?{}:t,a=Je({},e);n.login&&(a.login=n.login),n.source&&(a.source=n.source);var o=n.isPasswordReset||n.IsWeakPasswordReset;return o&&(a.isPasswordReset=o),n.message&&(a.weakPasswordMessage=n.message),n.restoreType&&(a.restoreType=n.restoreType),n.secondaryRestoreType&&(a.secondaryRestoreType=n.secondaryRestoreType),a};var er,rr={ACTIAGENT_PAGE:"ACTIAGENT_PAGE",ACTIDEALER_PAGE:"ACTIDEALER_PAGE",AUTH_PAGE:"AUTH_PAGE",AUTH_PAGE_CLASSIC:"AUTH_PAGE_CLASSIC",BLOCKED_ACCOUNT_PAGE:"BLOCKED_ACCOUNT_PAGE",BLOCKED_PRO_ACCOUNT_PAGE:"BLOCKED_PRO_ACCOUNT_PAGE",DELETED_ACCOUNT_PAGE:"DELETED_ACCOUNT_PAGE",EMAIL_RESTORE_REQUIRED_PAGE:"EMAIL_RESTORE_REQUIRED_PAGE",FOUND_USERS_LIST_PAGE:"FOUND_USERS_LIST_PAGE",KNOWN_USER_LOGIN_PAGE:"KNOWN_USER_LOGIN_PAGE",PASSWORD_WAS_RESET_PAGE:"PASSWORD_WAS_RESET_PAGE",WEAK_PASSWORD_WAS_RESET_PAGE:"WEAK_PASSWORD_WAS_RESET_PAGE",REGISTRATION_CHECK_CODE_PAGE:"REGISTRATION_CHECK_CODE_PAGE",REGISTRATION_ERROR_PAGE:"REGISTRATION_ERROR_PAGE",USERS_LIST_ERROR_PAGE:"USERS_LIST_ERROR_PAGE",REGISTRATION_MAIN_PAGE:"REGISTRATION_MAIN_PAGE",REGISTRATION_ADD_PHONE_PAGE:"REGISTRATION_ADD_PHONE_PAGE",REGISTRATION_SET_PASSWORD_PAGE:"REGISTRATION_SET_PASSWORD_PAGE",RESTORE_LOGIN_CHECK_PAGE:"RESTORE_LOGIN_CHECK_PAGE",RESTORE_LOGIN_PAGE:"RESTORE_LOGIN_PAGE",RESTORE_RESET_PAGE:"RESTORE_RESET_PAGE",SOCIAL_AUTH_ERROR_PAGE:"SOCIAL_AUTH_ERROR_PAGE",SOCIAL_WRONG_ID_ERROR_PAGE:"SOCIAL_WRONG_ID_ERROR_PAGE",SOCIAL_AUTH_PAGE:"SOCIAL_AUTH_PAGE",WRONG_HASH_PAGE:"WRONG_HASH_PAGE",CONFIRM_USER_PHONE_PAGE:"CONFIRM_USER_PHONE_PAGE",CONFIRM_USER_PHONE_FOR_AUTH_PAGE:"CONFIRM_USER_PHONE_FOR_AUTH_PAGE",ANTI_HACK_PAGE:"ANTI_HACK_PAGE",TIME_IS_UP_ERROR_PAGE:"TIME_IS_UP_ERROR_PAGE",ANTIHACK_BY_PHONE_PAGE:"ANTIHACK_BY_PHONE_PAGE",SOCIAL_LOGIN_SUGGEST_PAGE:"SOCIAL_LOGIN_SUGGEST_PAGE",TWO_FACTOR_AUTH_PAGE:"TWO_FACTOR_AUTH_PAGE"},tr=(er={},babelHelpers.defineProperty(er,x.GO_TO_ACTIAGENT_PAGE,rr.ACTIAGENT_PAGE),babelHelpers.defineProperty(er,x.GO_TO_ACTIDEALER_PAGE,rr.ACTIDEALER_PAGE),babelHelpers.defineProperty(er,x.GO_TO_AUTH_PAGE,rr.AUTH_PAGE),babelHelpers.defineProperty(er,x.GO_TO_AUTH_PAGE_CLASSIC,rr.AUTH_PAGE_CLASSIC),babelHelpers.defineProperty(er,x.GO_TO_BLOCKED_ACCOUNT_PAGE,rr.BLOCKED_ACCOUNT_PAGE),babelHelpers.defineProperty(er,x.GO_TO_BLOCKED_PRO_ACCOUNT_PAGE,rr.BLOCKED_PRO_ACCOUNT_PAGE),babelHelpers.defineProperty(er,x.GO_TO_DELETED_ACCOUNT_PAGE,rr.DELETED_ACCOUNT_PAGE),babelHelpers.defineProperty(er,x.GO_TO_EMAIL_RESTORE_REQUIRED_PAGE,rr.EMAIL_RESTORE_REQUIRED_PAGE),babelHelpers.defineProperty(er,x.GO_TO_FOUND_USERS_LIST_PAGE,rr.FOUND_USERS_LIST_PAGE),babelHelpers.defineProperty(er,x.GO_TO_KNOWN_USER_LOGIN_PAGE,rr.KNOWN_USER_LOGIN_PAGE),babelHelpers.defineProperty(er,x.GO_TO_PASSWORD_WAS_RESET_PAGE,rr.PASSWORD_WAS_RESET_PAGE),babelHelpers.defineProperty(er,x.GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE,rr.WEAK_PASSWORD_WAS_RESET_PAGE),babelHelpers.defineProperty(er,x.GO_TO_REGISTRATION_CHECK_CODE_PAGE,rr.REGISTRATION_CHECK_CODE_PAGE),babelHelpers.defineProperty(er,x.GO_TO_REGISTRATION_ERROR_PAGE,rr.REGISTRATION_ERROR_PAGE),babelHelpers.defineProperty(er,x.GO_TO_USERS_LIST_ERROR_PAGE,rr.USERS_LIST_ERROR_PAGE),babelHelpers.defineProperty(er,x.GO_TO_REGISTRATION_MAIN_PAGE,rr.REGISTRATION_MAIN_PAGE),babelHelpers.defineProperty(er,x.GO_TO_REGISTRATION_SET_PASSWORD_PAGE,rr.REGISTRATION_SET_PASSWORD_PAGE),babelHelpers.defineProperty(er,x.GO_TO_PHONE_REGISTRATION,rr.REGISTRATION_ADD_PHONE_PAGE),babelHelpers.defineProperty(er,x.GO_TO_RESTORE_LOGIN_CHECK_PAGE,rr.RESTORE_LOGIN_CHECK_PAGE),babelHelpers.defineProperty(er,x.GO_TO_RESTORE_LOGIN_PAGE,rr.RESTORE_LOGIN_PAGE),babelHelpers.defineProperty(er,x.GO_TO_RESTORE_RESET_PAGE,rr.RESTORE_RESET_PAGE),babelHelpers.defineProperty(er,x.GO_TO_SOCIAL_AUTH_PAGE,rr.SOCIAL_AUTH_PAGE),babelHelpers.defineProperty(er,x.GO_TO_SOCIAL_AUTH_ERROR_PAGE,rr.SOCIAL_AUTH_ERROR_PAGE),babelHelpers.defineProperty(er,x.GO_TO_SOCIAL_WRONG_ID_ERROR_PAGE,rr.SOCIAL_WRONG_ID_ERROR_PAGE),babelHelpers.defineProperty(er,x.GO_TO_WRONG_HASH_PAGE,rr.WRONG_HASH_PAGE),babelHelpers.defineProperty(er,x.GO_TO_CONFIRM_USER_PHONE_PAGE,rr.CONFIRM_USER_PHONE_PAGE),babelHelpers.defineProperty(er,x.GO_TO_CONFIRM_USER_PHONE_FOR_AUTH_PAGE,rr.CONFIRM_USER_PHONE_FOR_AUTH_PAGE),babelHelpers.defineProperty(er,x.GO_TO_ANTIHACK_BY_PHONE_PAGE,rr.ANTIHACK_BY_PHONE_PAGE),babelHelpers.defineProperty(er,x.GO_TO_ANTI_HACK_PAGE,rr.ANTI_HACK_PAGE),babelHelpers.defineProperty(er,x.GO_TO_2FA_CHECK_PAGE,rr.TWO_FACTOR_AUTH_PAGE),babelHelpers.defineProperty(er,x.GO_TO_TIME_IS_UP_ERROR_PAGE,rr.TIME_IS_UP_ERROR_PAGE),babelHelpers.defineProperty(er,x.GO_TO_SOCIAL_LOGIN_SUGGEST_PAGE,rr.SOCIAL_LOGIN_SUGGEST_PAGE),babelHelpers.defineProperty(er,x.GO_TO_DEFAULT_PAGE,""),babelHelpers.defineProperty(er,B.NOT_FOUND,""),er),nr={name:"",payload:{}};function ar(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function or(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ar(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var sr={hash:"",usersList:[],isRegistrationAvailable:!1,userAccount:void 0},ir={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case N:return r.response.success?We({},e,{authSuccess:!0}):e;case A:return We({},e,{lastLogin:e.lastLogin.filter((function(e){return e.userAuthMemoId!==r.payload.userAuthMemoId}))});case x.GO_TO_ANTIHACK_BY_PHONE_PAGE:case x.GO_TO_CONFIRM_USER_PHONE_PAGE:return We({},e,{remember:r.payload.remember});case x.GO_TO_SOCIAL_LOGIN_SUGGEST_PAGE:return We({},e,{socialAuthAccountSuggest:We({},r.payload)});default:return e}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case f:return Je({},e,{login:r.payload.login,loginError:""});case h:return Je({},e,{restoreType:r.payload.restoreType});case S:return Je({},e,babelHelpers.defineProperty({},r.payload.errorType,""));case d:return Je({},Object($e.a)(["login"])(e),{loginError:""});case k:case m:return Je({},e,{isCaptchaShown:!0,captchaImg:Ye()});case y:return Je({},e,{isCaptchaShown:!1});case O:return Je({},e,{loginError:r.payload.errorText});case P:return Je({},e,{captchaError:e.isCaptchaShown?r.payload.errorText:"",captchaImg:Ye()});case g:return Je({},e,{formError:r.payload.errorText});case E:var t;return Je({},e,{formError:(null===(t=r.payload)||void 0===t?void 0:t.error)||De.b});case _:return Je({},e,{antihackError:r.payload.errorText});case v:return Je({},e,{passwordError:r.payload.errorText});case R:return Je({},e,{isLoading:!1,loginError:"",captchaError:"",formError:"",passwordError:"",antihackError:"",challengeId:"",phoneMask:"",codeError:"",nameError:""});case j:return Je({},e,{isLoading:!0,loginError:"",captchaError:"",formError:"",passwordError:"",nameError:""});case N:case G:var n=r.response,a={isLoading:!1};return n&&n.restoreType&&(a.restoreType=n.restoreType===De.d?De.d:De.c),n&&n.secondaryRestoreType&&(a.secondaryRestoreType=De.p[n.secondaryRestoreType]),n&&n.errors&&n.errors.name&&(a.nameError=n.errors.name),Je({},e,{},a);case I:return Je({},e,{isLoading:!1,formError:De.j});case H:return Je({},e,{codeError:r.payload.errorText});case x.GO_TO_ANTIHACK_BY_PHONE_PAGE:case x.GO_TO_RESTORE_LOGIN_CHECK_PAGE:case x.GO_TO_REGISTRATION_CHECK_CODE_PAGE:case x.GO_TO_CONFIRM_USER_PHONE_PAGE:case w:var o=r.payload.antihackByPhone,s=Je({},e,{timer:r.payload.timer});return o&&(s.antihackByPhone=o),s;case b:return Je({},e,{successAction:r.payload.successAction});case x.GO_TO_DEFAULT_PAGE:return Je({},e,{successAction:""});case x.GO_TO_RESTORE_LOGIN_PAGE:case x.GO_TO_PASSWORD_WAS_RESET_PAGE:case x.GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE:return Ze(e,r);case x.GO_TO_ANTI_HACK_PAGE:var i=r.payload;return Je({},e,{isLoading:!1,antihackError:"",login:i.login,phoneMask:i.phoneMask},i.challengeId&&{challengeId:i.challengeId},{},i.phoneList&&{phoneList:i.phoneList});case x.GO_TO_2FA_CHECK_PAGE:var c=r.payload;return Je({},e,{isLoading:!1,selectedPhone:null==c?void 0:c.selectedPhone},(null==c?void 0:c.phoneList)&&{phoneList:c.phoneList});case T:return Je({},e,{source:r.payload.source});case C:return Je({},e,{source:""});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,r=arguments.length>1?arguments[1]:void 0;return tr.hasOwnProperty(r.type)?{name:tr[r.type],payload:r.payload}:e},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case G:var t=r.response;return t&&t.hash?or({},e,{hash:t.hash}):e;case x.GO_TO_FOUND_USERS_LIST_PAGE:return or({},e,{usersList:r.payload.usersList,isRegistrationAvailable:r.payload.isRegistrationAvailable});case x.GO_TO_SOCIAL_AUTH_PAGE:case x.GO_TO_KNOWN_USER_LOGIN_PAGE:return or({},e,{userAccount:r.payload.userAccount});default:return e}},experiments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}},cr=t(6605);function lr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ur(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?lr(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var pr=function e(r){var t=r.login,n=r.name,a=r.socialProviderId,o=r.avatar,s=r.loginType,i=r.hashedUserId,c=r.socialUserId;babelHelpers.classCallCheck(this,e),this.login=t,this.name=n,this.socialProviderId=a,this.avatar=o,this.loginType=s,this.last=(new Date).getTime(),this.socialUserId=c,this.userAuthMemoId=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return btoa(escape((r||[]).join("").match(/[a-zA-ZР°-СЏРђ-РЇ\d]/gm,"").join(""))).slice(0,50)}(i)},fr=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getAll",value:function(){var r=null;if(!window.localStorage)return r;try{r=JSON.parse(window.localStorage.getItem(e.LAST_LOGIN_STORAGE_KEY))}catch(r){window.localStorage.removeItem(e.LAST_LOGIN_STORAGE_KEY)}if(r&&(!("version"in r)||r.version<3)&&(e.clear(),r=null),!r){var t={data:{},version:3};return e.save(t),t}return r}},{key:"getList",value:function(){var r=e.getAll();if(!r)return null;var t=Object.keys(r.data);return t.length?t.map((function(e){return r.data[e]})):null}},{key:"add",value:function(r){var t=e.getAll(),n=new pr(r);if(!t)return null;r.socialProviderId&&(t.data=Object.keys(t.data).reduce((function(e,n){var a=t.data[n].socialProviderId;return a&&a===r.socialProviderId||(e[n]=t.data[n]),e}),{}));var a=ur({},t,{data:ur({},t.data,babelHelpers.defineProperty({},n.userAuthMemoId,n))});return e.save(a),n}},{key:"save",value:function(r){try{window.localStorage.setItem(e.LAST_LOGIN_STORAGE_KEY,JSON.stringify(r))}catch(e){}}},{key:"clear",value:function(){try{window.localStorage.removeItem(e.LAST_LOGIN_STORAGE_KEY)}catch(e){}}}]),e}();function hr(e,r){var t=e.login,n=e.name,a=e.socialProviderId,o=e.avatar,s=void 0===o?{"176x176":"","256x256":""}:o,i=e.loginType,c=e.hashedUserId,l=e.socialUserId,u=fr.add({name:n,login:t,loginType:i,socialProviderId:a,socialUserId:l,avatar:{"256x256":s["256x256"],"176x176":s["176x176"]},hashedUserId:c});u&&Object(cr.g)({userAuthMemoId:u.userAuthMemoId,loginType:a?"social":i||"",source:r})}function dr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function br(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dr(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}babelHelpers.defineProperty(fr,"LAST_LOGIN_STORAGE_KEY","lastLogin");var mr=l.compose;function yr(e){var r=ze(e.experimentsValues),t=r.reducer,n=r.middleware,a=r.enhancer,o=function(e){var r=fr.getList();return br({},(t={},n=e.experimentsValues,Pe({},t,{experiments:Array.from(n).reduce((function(e,r){var t=babelHelpers.slicedToArray(r,2),n=t[0],a=t[1];return Pe({},e,{},a&&babelHelpers.defineProperty({},n,a))}),{})})),{common:{isExtcaptchaEnabled:e.isExtcaptchaEnabled,captchaImg:Ye()},auth:{lastLogin:r}});var t,n}(e),s=Object(l.combineReducers)(br({},ir,{token:c.b,location:t}));return Object(l.createStore)(s,o,mr(a,Object(l.applyMiddleware)(u.default,p.a,n,U)))}var Or=t(3893),gr=t(4444),Er=t(4218),Pr=t(10679),vr=t(4652),_r=t(4631),Rr=t(4662),Ar=t(4416),Tr=t(4426),Cr=t(4630),Sr=t(10809),kr=t(4419),Hr=t(10369),wr=t.n(Hr);function jr(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Gr=function(e){babelHelpers.inherits(t,e);var r=jr(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",babelHelpers.extends({className:wr.a.root},Object(Sr.f)({marker:"sign-in-link-footer"})),a.a.createElement(kr.a,{size:"m",marker:"sign-in-link-footer/text"},this.props.children))}}]),t}(n.PureComponent);babelHelpers.defineProperty(Gr,"propTypes",{children:s.a.oneOfType([s.a.string,s.a.node,s.a.element])});var Ir=t(10370),Nr=t.n(Ir);function Lr(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Dr=/^.+@.{1,}\..{2,}$/,xr=function(e){babelHelpers.inherits(t,e);var r=Lr(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSubmitForm",(function(e){(0,e.preventDefault)(),n.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeLogin",(function(e){var r=e.value;n.props.loginError&&n.props.clearError("loginError"),n.setState({login:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeCaptcha",(function(e){var r=e.value;n.props.captchaError&&n.props.clearError("captchaError"),n.setState({captcha:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleRefreshCaptcha",(function(){n.props.getCaptcha(),n.setState({captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleCaptchaSuccess",(function(e){var r=n.state,t=r.login,a=r.captcha;(0,n.props.onSendRestoreLogin)({login:t,captcha:a,extcaptchaValue:e})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleToggleLoginType",(function(e){e.event.preventDefault();var r=n.state.innerLoginType===De.c?De.d:De.c;n.props.switchRestoreType(r),n.setState({login:"",innerLoginType:r})})),n.state={login:e.login,captcha:"",innerLoginType:e.restoreType},n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.initCaptcha(this.handleCaptchaSuccess),this.props.openRestoreEvent()}},{key:"componentDidUpdate",value:function(e){(this.props.loginError&&!e.loginError||this.props.formError&&!e.formError)&&this.props.resetCaptcha()}},{key:"render",value:function(){var e=this.props.formError,r=this.state.innerLoginType;return a.a.createElement("div",{"data-marker":"restore-form-container"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{marker:"restore-form",layout:vr.b,title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},noValidate:!0,error:e,onSubmit:this.handleSubmitForm},this.renderLoginField(),this.renderCaptcha(),this.renderButton())),a.a.createElement(Gr,null,a.a.createElement(Tr.a,{size:"m",marker:"restore-form/button",href:"",noVisited:!0,onClick:this.handleToggleLoginType},this.getChangeLoginTypeCaption(r))))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.captchaError,t=e.isCaptchaShown,n=e.captchaImg,o=this.state.captcha;return t?a.a.createElement(Pr.a.Fieldset,{error:r},a.a.createElement(Cr.a,{error:Boolean(r),marker:"restore-form/captcha",value:o,imageSrc:n,onChange:this.handleChangeCaptcha,onRefresh:this.handleRefreshCaptcha})):null}},{key:"renderButton",value:function(){var e=this.props.isLoading,r=this.isButtonDisabled();return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",marker:"restore-form/button",design:"primary",disabled:r,loading:e},"РЎР±СЂРѕСЃРёС‚СЊ С‚РµРєСѓС‰РёР№ РїР°СЂРѕР»СЊ"))}},{key:"renderLoginField",value:function(){var e=this.props.loginError,r=this.state.innerLoginType;return a.a.createElement(Pr.a.Fieldset,{error:e},r===De.c?this.renderInputField():this.renderMaskField())}},{key:"renderInputField",value:function(){var e=this.props.loginError,r=this.state.login;return a.a.createElement(_r.a,{size:"m",error:Boolean(e),autoFocus:!0,className:"ym-hide-content",marker:"restore-form/input",value:r,placeholder:"Р­Р»РµРєС‚СЂРѕРЅРЅР°СЏ РїРѕС‡С‚Р°",name:"login",onChange:this.handleChangeLogin})}},{key:"renderMaskField",value:function(){var e=this.props.loginError,r=this.state.login;return a.a.createElement(Rr.a,{className:"ym-hide-content",size:"m",autoComplete:"on",autoFocus:!0,error:Boolean(e),mask:"phone",marker:"restore-form/input",value:r,placeholder:"+7 ___ ___-__-__",name:"login",onChange:this.handleChangeLogin})}},{key:"getChangeLoginTypeCaption",value:function(e){return e===De.c?"Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ РїРѕ С‚РµР»РµС„РѕРЅСѓ":"Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ РїРѕ СЌР»РµРєС‚СЂРѕРЅРЅРѕР№ РїРѕС‡С‚Рµ"}},{key:"isButtonDisabled",value:function(){var e=this.props.isCaptchaShown,r=this.state,t=r.login,n=r.captcha,a=r.innerLoginType;return!t||t.length<De.g||a===De.d&&t.includes("_")||a===De.c&&!Dr.test(t)||e&&!n}}]),t}(n.PureComponent);babelHelpers.defineProperty(xr,"propTypes",{restoreType:s.a.oneOf(De.q),login:s.a.string,loginError:s.a.string,captchaError:s.a.string,captchaImg:s.a.string,isCaptchaShown:s.a.bool,isLoading:s.a.bool,formError:s.a.string,openRestoreEvent:s.a.func,switchRestoreType:s.a.func,getCaptcha:s.a.func.isRequired,clearError:s.a.func.isRequired,onSendRestoreLogin:s.a.func.isRequired,initCaptcha:s.a.func,captchaExecute:s.a.func,resetCaptcha:s.a.func}),babelHelpers.defineProperty(xr,"defaultProps",{login:"",restoreType:De.d,loginError:"",captchaError:"",formError:"",isCaptchaShown:!1,openRestoreEvent:function(){}});var Ur=t(10687),Br=t(8867);function Fr(){return{type:x.GO_TO_DELETED_ACCOUNT_PAGE}}function qr(e){return{type:x.GO_TO_BLOCKED_ACCOUNT_PAGE,payload:{reasonText:decodeURIComponent(e)}}}function Mr(e){return{type:x.GO_TO_BLOCKED_PRO_ACCOUNT_PAGE,payload:{proType:e}}}function zr(){return{type:x.GO_TO_PHONE_REGISTRATION,payload:{to:"/registration/phone"}}}function Kr(){return{type:x.GO_TO_REGISTRATION_ERROR_PAGE}}function Wr(e){return{type:x.GO_TO_AUTH_PAGE,payload:e}}function Vr(){return{type:x.GO_TO_DEFAULT_PAGE}}function $r(e,r,t,n,a){return{type:x.GO_TO_WEAK_PASSWORD_WAS_RESET_PAGE,payload:{login:e,restoreType:r,secondaryRestoreType:t,message:n,isPasswordReset:a}}}function Yr(e){var r=e.login,t=e.restoreType,n=e.source;return{type:x.GO_TO_RESTORE_LOGIN_PAGE,payload:{login:r,source:n,restoreType:t,to:"/restore"}}}function Qr(e){return{type:x.GO_TO_SOCIAL_AUTH_ERROR_PAGE,payload:{errorText:e}}}function Jr(e){return{type:x.GO_TO_SOCIAL_WRONG_ID_ERROR_PAGE,payload:{errorLink:e}}}function Xr(){return{type:x.GO_TO_REGISTRATION_SET_PASSWORD_PAGE}}function Zr(e,r){return{type:x.GO_TO_FOUND_USERS_LIST_PAGE,payload:{usersList:e,isRegistrationAvailable:r}}}function et(e){return{type:x.GO_TO_ANTI_HACK_PAGE,payload:e}}var rt=function(e){return{type:x.GO_TO_SOCIAL_LOGIN_SUGGEST_PAGE,payload:e}};function tt(e){return{type:x.GO_TO_2FA_CHECK_PAGE,payload:e}}var nt=t(10999);function at(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ot(e){return Object(nt.e)(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?at(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):at(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{src:"registration"}))}function st(e){var r=e.code,t=e.login,n=e.captcha,a=e.extcaptchaValue,o={code:r,login:t};return Object(nt.b)(n,o),Object(nt.c)(a,o),Object(nt.h)("/code/confirm",o)}var it=function(e){var r=e.suggestKey,t=e.provider;return Object(nt.g)("/web/1/social/proceed",{suggestKey:r,provider:t})};function ct(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function lt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ct(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ct(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ut(e){var r=e.login,t=e.password,n=e.captcha,a=e.remember,o=e.extcaptchaValue,s=e.hash,i=e.source,c=e.suggestKey,l={login:r,password:t,remember:a};return o&&(l["e-captcha-response"]=o),n&&(l.captcha=n),s&&(l.hash=s),i&&(l.src=i),c&&(l.suggestKey=c),Object(nt.h)("/auth/login",l)}function pt(e){return Object(nt.e)(lt({},e,{src:"login"}))}function ft(e){var r={login:e.login,remember:e.remember};return Object(nt.h)("/auth/login/complete",r)}function ht(e){var r={challengeId:e.challengeId,passphrase:e.phoneNumber};return Object(nt.h)("/auth/verification",r)}function dt(e){var r={login:e.login};return Object(nt.h)("/request/antihack_by_phone",r)}function bt(e){var r=e.code,t={login:e.login,code:r,challengeId:e.challengeId};return Object(nt.h)("/auth/antihack_by_phone",t)}function mt(e){return Object(nt.e)(lt({},e,{},e.src&&{src:e.src}))}function yt(e){return st({login:e.login,code:e.code})}function Ot(e){var r=e.phone;return Object(nt.g)("/web/1/tfa/request",{phone:r})}function gt(e){var r=e.code;return Object(nt.g)("/web/1/tfa/auth",{code:r})}var Et=function(){return function(){var e=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:j}),e.prev=1,e.next=4,Object(nt.f)("/auth/token");case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:r({type:G,payload:t}),t.token&&t.tokenName&&r(Object(c.a)(t.tokenName,t.token));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(r){return e.apply(this,arguments)}}()};function Pt(e,r,t){return vt.apply(this,arguments)}function vt(){return(vt=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(r,t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(Br.b)(t.successAction)){e.next=5;break}r(Vr()),Object(Br.a)(t.successAction),e.next=9;break;case 5:return e.next=7,Et()(r);case 7:r(Vr()),Object(Br.a)(t.successAction);case 9:r({type:N,response:n});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e){var r=e.login,t=e.captcha,n=e.retry,a=e.extcaptchaValue,o={retry:n,login:r};return t&&(o.captcha=t),a&&(o["e-captcha-response"]=a),Object(nt.h)("/restore/send",o)}function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return Tt(e,r,t)||At(e,r)}function At(e,r){var t,n=!1;return e.captcha&&(n=!0,r(Se(e.captcha))),e.login&&(n=!0,r(Te(e.login))),e.password&&(n=!0,r(He(e.password))),e.passphrase&&(n=!0,r((t=e.passphrase,{type:_,payload:{errorText:t}}))),e.code&&(n=!0,r(we(e.code))),e.isNeedAuthorize&&(n=!0,r({type:x.GO_TO_TIME_IS_UP_ERROR_PAGE})),e.tryAgainError&&(n=!0,r(ke("РџРѕРїСЂРѕР±СѓР№С‚Рµ СЃРЅРѕРІР°"))),n||r(ke()),n}function Tt(e,r,t){return e.isUserBlockedByModerator?(r(qr(e.reasonBlockedText)),!0):e.isUserRemoved?(r(Fr()),!0):e.isActiDealer?(r({type:x.GO_TO_ACTIDEALER_PAGE}),!0):e.isActiAgent?(r({type:x.GO_TO_ACTIAGENT_PAGE}),!0):!!e.isPasswordReset&&(r((n=t.login,a=t.restoreType,o=e.isPasswordReset,{type:x.GO_TO_PASSWORD_WAS_RESET_PAGE,payload:{login:n,restoreType:a,isPasswordReset:o}})),!0);var n,a,o}function Ct(){return(Ct=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(r,t,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:j}),e.prev=1,e.next=4,r(t);case 4:a=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),n({type:I,payload:e.t0}),e.t0;case 11:return a.tokenName&&a.token&&n(Object(c.a)(a.tokenName,a.token)),a.showCaptcha||a.showPhoneCaptcha?n(ve()):n(_e()),a.login&&n(Ce(a.login)),n({type:G,payload:a}),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var St,kt,Ht=function(e,r,t){return Ct.apply(this,arguments)};function wt(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ht(pt,e,t);case 2:(n=r.sent).success?t((a={remember:e.remember,timer:n.timer},o=void 0,s=void 0,o=a.remember,s=a.timer,{type:x.GO_TO_CONFIRM_USER_PHONE_PAGE,payload:{remember:o,timer:s}})):Rt(n.errors,t),n.timer&&t(je(n.timer));case 5:case"end":return r.stop()}var a,o,s}),r)})));return function(e){return r.apply(this,arguments)}}()}function jt(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ht(dt,e,t);case 2:(n=r.sent).success?t((a={remember:e.remember,antihackByPhone:e.antihackByPhone,timer:n.timer},o=void 0,s=void 0,i=void 0,o=a.remember,s=a.timer,i=a.antihackByPhone,{type:x.GO_TO_ANTIHACK_BY_PHONE_PAGE,payload:{remember:o,timer:s,antihackByPhone:i}})):Rt(n.errors,t,e),n.timer&&t(je(n.timer));case 5:case"end":return r.stop()}var a,o,s,i}),r)})));return function(e){return r.apply(this,arguments)}}()}var Gt="vk",It="ok",Nt="apple",Lt="fb",Dt="gp",xt=(St={},babelHelpers.defineProperty(St,Lt,2),babelHelpers.defineProperty(St,It,3),babelHelpers.defineProperty(St,Nt,8),babelHelpers.defineProperty(St,Dt,5),babelHelpers.defineProperty(St,Gt,1),St),Ut=(kt={},babelHelpers.defineProperty(kt,Lt,"Facebook"),babelHelpers.defineProperty(kt,It,"РћРґРЅРѕРєР»Р°СЃСЃРЅРёРєРё"),babelHelpers.defineProperty(kt,Nt,"Apple"),babelHelpers.defineProperty(kt,Dt,"Google"),babelHelpers.defineProperty(kt,Gt,"Р’РљРѕРЅС‚Р°РєС‚Рµ"),kt);function Bt(e){return Object.keys(xt).reduce((function(e,r){return e[xt[r]]=r,e}),{})[e]}function Ft(e){return Ut[e]}function qt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Mt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?qt(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function zt(){return(zt=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(r){var t,n,a,o,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.login,n=r.password,a=r.userInfo,o=void 0===a?{}:a;try{s=Mt({},o,{login:t}),o.linkedSocial&&(s.socialProviderId=xt[o.linkedSocial.type],s.socialUserId=o.linkedSocial.socialUserId),i=o.linkedSocial?De.o.SOCIAL:De.o.AUTH,hr(s,i)}catch(e){}return e.prev=2,c=new window.PasswordCredential({iconURL:o.avatar&&o.avatar["256x256"],name:o.name,id:t,password:n}),e.abrupt("return",navigator.credentials.store(c).then((function(){Object(cr.s)()})));case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",Promise.reject());case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var Kt=function(e){return zt.apply(this,arguments)};function Wt(e){try{window.sessionStorage.setItem("after-login-message",e)}catch(e){}}function Vt(e,r){try{"_securedTouch"in window&&(_securedTouch.login(e),_securedTouch.addTag("registration_time",r))}catch(r){Object(Ur.a)(r,{hashedUserId:e})}}function $t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Yt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?$t(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$t(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Qt=function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n,a,o,s,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ht(ut,e,t);case 3:n=r.sent,r.next=10;break;case 6:return r.prev=6,r.t0=r.catch(0),t(ke()),r.abrupt("return",!0);case 10:if(!n.success){r.next=22;break}return r.prev=11,r.next=14,Kt({login:e.login,password:e.password,userInfo:n.userInfo});case 14:n.message&&Wt(n.message),r.next=19;break;case 17:r.prev=17,r.t1=r.catch(11);case 19:return Pt(t,e,n),Vt(null===(a=n)||void 0===a||null===(o=a.userInfo)||void 0===o?void 0:o.hashedUserId,null===(s=n)||void 0===s||null===(i=s.userInfo)||void 0===i?void 0:i.registrationTime),r.abrupt("return",!1);case 22:if(n.errors){r.next=26;break}return Object(Ur.a)(new Error("".concat(De.o.AUTH,": Server invalid response")),{requestUrl:"/auth/login",requestData:e,response:n}),t(ke()),r.abrupt("return",!0);case 26:r.t2=!0,r.next=r.t2===Boolean(n.errors.isNeedPhoneVerification)?29:r.t2===Boolean(n.errors.antihackByPhone)?32:r.t2===Boolean(n.errors.antihackByEmail)?35:r.t2===Boolean("tfa-check"===n.errors.method)?37:r.t2===Boolean(n.errors.IsWeakPasswordReset)?39:41;break;case 29:return r.next=31,wt(e)(t);case 31:return r.abrupt("return",!1);case 32:return r.next=34,jt(Yt({},e,{antihackByPhone:n.errors.antihackByPhone}))(t);case 34:return r.abrupt("return",!1);case 35:return t(et({login:e.login,challengeId:n.errors.antihackByEmail.challengeId,phoneList:n.errors.antihackByEmail.phoneList})),r.abrupt("return",!1);case 37:return t(tt({login:e.login,phoneList:n.errors.phoneList})),r.abrupt("return",!1);case 39:return t($r(n.login,n.restoreType,n.secondaryRestoreType,n.message,n.errors.IsWeakPasswordReset)),r.abrupt("return",!1);case 41:if(Rt(n.errors,t,{login:e.login,restoreType:n.restoreType,message:n.message})){r.next=44;break}return Object(Ur.a)(new Error("".concat(De.o.AUTH,": Server invalid response")),{requestUrl:"/auth/login",requestData:e,response:n}),r.abrupt("return",!0);case 44:return r.abrupt("return",!0);case 45:case"end":return r.stop()}}),r,null,[[0,6],[11,17]])})));return function(e){return r.apply(this,arguments)}}()};function Jt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Xt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Zt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function en(e){return{types:[j,G,I],fetching:bt(Object($e.a)(["remember"])(e)),callback:function(r,t){r.success?(t(Vr()),Object(Br.a)()):Rt(r.errors,t,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Zt(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{restoreType:r.restoreType||e.restoreType,message:r.message||e.message})),r.timer&&t(je(r.timer))}}}function rn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function tn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rn(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function nn(e){return{types:[j,G,I],fetching:_t(e),callback:function(r,t){var n;t(Ce(e.login)),r.success?t((n=r.timer,{type:x.GO_TO_RESTORE_LOGIN_CHECK_PAGE,payload:{timer:n}})):(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return on(e,r)||an(e,r)}(r.errors,t)||Object(Ur.a)(De.o.RESTORE,"Unknown error",{response:r}),r.showCaptcha?t(ve()):t(_e()))}}}function an(e,r){var t=!1;return e.captcha&&(t=!0,r(Se(e.captcha))),e.login&&(t=!0,r(Te(e.login))),e.password&&(t=!0,r(He(e.password))),e.code&&(t=!0),t||r(ke()),t}function on(e,r){return e.isUserRemoved?(r(Fr()),!0):e.isPhoneUnverified?(r({type:x.GO_TO_EMAIL_RESTORE_REQUIRED_PAGE}),!0):e.isActiDealer?(r(Mr("ActiDealer")),!0):e.isActiAgent?(r(Mr("ActiAgent")),!0):!!e.isUserBlockedByModerator&&(r(qr(e.reasonBlockedText)),!0)}var sn=t(6624);function cn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ln(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?cn(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var un=Object(i.connect)((function(e){return ln({},Object(Er.a)(["login","isCaptchaShown","loginError","captchaError","captchaImg","isLoading","formError","restoreType","source"])(e.common),{openRestoreEvent:cr.p,switchRestoreType:function(e,r){e===De.c?Object(cr.u)():Object(cr.p)(r)}})}),{onSendRestoreLogin:nn,clearErrorsAndLoading:function(){return{type:R}},clearError:Re,getCaptcha:Ae},(function(e,r,t){return ln({},t,{},e,{},r,{openRestoreEvent:function(){return e.openRestoreEvent(e.source)},switchRestoreType:function(t){e.switchRestoreType(t,e.source),r.clearErrorsAndLoading()}})}))(Object(sn.a)(xr)),pn=t(4446),fn=t(4233),hn=t.n(fn),dn=3600,bn=function(e){return(e<10?"0":"")+e};function mn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var yn=function(e){babelHelpers.inherits(t,e);var r=mn(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),(n=r.call(this,e)).state={timerValue:e.timer},n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.startTimer(this.props.timer)}},{key:"componentDidUpdate",value:function(e){this.props.timer!==e.timer&&this.setState({timerValue:this.props.timer})}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.state.timerValue;return e<1||!e?this.props.children:"РџРѕР»СѓС‡РёС‚СЊ РЅРѕРІС‹Р№ РєРѕРґ РјРѕР¶РЅРѕ С‡РµСЂРµР· ".concat(function(e){var r=e.incomingSeconds,t=void 0===r?0:r,n=e.withHours,a=void 0===n||n;if("number"!=typeof t||isNaN(t)||t<0)return"";var o=Math.floor(t/dn),s=Math.floor((t-o*dn)/60),i=Math.floor(t-o*dn-60*s);return o>0||a?"".concat(bn(o),":").concat(bn(s),":").concat(bn(i)):"".concat(bn(s),":").concat(bn(i))}({incomingSeconds:e,withHours:this.props.timer>=86400}))}},{key:"clearTimer",value:function(){clearInterval(this.timerId),this.timerId=0,this.setState({timerValue:0})}},{key:"startTimer",value:function(e){var r=this;this.setState({timerValue:e}),this.timerId=setInterval((function(){var e=r.state.timerValue;e>0?r.setState({timerValue:e-1}):r.clearTimer()}),1e3)}}]),t}(n.PureComponent);babelHelpers.defineProperty(yn,"propTypes",{timer:s.a.number,children:s.a.oneOfType([s.a.string,s.a.node,s.a.element])});var On=t(10371),gn=t.n(On);function En(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Pn=function(e){babelHelpers.inherits(t,e);var r=En(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handlePhoneCodeChange",(function(e){var r=e.value;n.props.codeError&&n.props.clearError("codeError"),n.setState({code:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSubmitCode",(function(e){(0,e.preventDefault)();var r=n.props,t=r.onSendPhoneCode,a=r.login,o=n.state.code;o&&t({login:a,code:o})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleClickResend",(function(e){e.event.preventDefault();var r=n.props,t=r.onResendCode,a=r.login;r.isLoading||t({login:a})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeNumber",(function(){n.props.onChangeNumber(n.props.login,De.d)})),n.state={code:""},n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.onOpen)(e.login)}},{key:"render",value:function(){var e=this.props.formError;return a.a.createElement("div",{className:hn()(Nr.a.container,"ym-hide-content"),"data-marker":"phone-confirm-wrapper"},a.a.createElement(Pr.a,{marker:"phone-confirm",title:{text:"РџРѕРґС‚РІРµСЂРґРёС‚Рµ РЅРѕРјРµСЂ С‚РµР»РµС„РѕРЅР°",align:"center"},layout:vr.b,error:e,description:this.renderPhoneMessage(),onSubmit:this.handleSubmitCode},this.renderInput(),this.renderButtons()))}},{key:"renderPhoneMessage",value:function(){var e=[Nr.a.center,gn.a["phone-code__code-message"]].join(" ");return a.a.createElement("span",{className:e},a.a.createElement(kr.a,{marker:"phone-confirm/code-message"},"Р’В С‚РµС‡РµРЅРёРµ 2В РјРёРЅСѓС‚ РІС‹В РїРѕР»СѓС‡РёС‚Рµ СЃРјСЃ СЃВ РєРѕРґРѕРј РїРѕРґС‚РІРµСЂР¶РґРµРЅРёСЏ РЅР°В РЅРѕРјРµСЂ ",this.props.login))}},{key:"renderInput",value:function(){var e=this.state.code,r=this.getTimerCaption();return a.a.createElement(Pr.a.Fieldset,{error:this.props.codeError?this.props.codeError:"",hint:r},a.a.createElement(_r.a,{size:"m",error:Boolean(this.props.codeError),marker:"phone-confirm/code-input",name:"code",value:e,maxLength:8,autoComplete:"off",placeholder:"РљРѕРґ РїРѕРґС‚РІРµСЂР¶РґРµРЅРёСЏ",onChange:this.handlePhoneCodeChange}))}},{key:"renderButtons",value:function(){var e,r=this.props,t=r.isLoading,n=r.backUrl,o=this.state.code,s=o.length<De.h||!/^\d+$/.test(o)||Boolean(this.props.codeError),i=a.a.createElement(Ar.a,{width:this.props.onChangeNumber?12:6,disabled:s,marker:"phone-confirm/confirm",loading:t,type:"submit",size:"m",design:"primary"},"РџРѕРґС‚РІРµСЂРґРёС‚СЊ");return a.a.createElement("div",{className:hn()((e={},babelHelpers.defineProperty(e,gn.a["phone-code__buttons"],!0),babelHelpers.defineProperty(e,gn.a["phone-code__buttons-wrapper"],!this.props.onChangeNumber),e))},this.props.onChangeNumber?a.a.createElement(pn.a,{spaced:!0,width:12},i,a.a.createElement(Ar.a,{width:12,size:"m",marker:"phone-confirm/change",href:n,type:"button",onClick:this.handleChangeNumber},"РР·РјРµРЅРёС‚СЊ РЅРѕРјРµСЂ")):i)}},{key:"getTimerCaption",value:function(){return this.props.isLoading?a.a.createElement("div",{className:gn.a["empty-line"]}):a.a.createElement(yn,{timer:this.props.timer},a.a.createElement(Tr.a,{href:"",noVisited:!0,className:hn()(gn.a["phone-code__reset-link"],this.props.codeError&&gn.a["phone-code__reset-link_with-error"]),marker:"phone-confirm/new-code",onClick:this.handleClickResend},"РџРѕР»СѓС‡РёС‚СЊ РЅРѕРІС‹Р№ РєРѕРґ"))}}]),t}(n.PureComponent);function vn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(Pn,"propTypes",{login:s.a.string.isRequired,codeError:s.a.string,backUrl:s.a.oneOfType([s.a.string,s.a.object]),isLoading:s.a.bool,formError:s.a.string,timer:s.a.number.isRequired,clearError:s.a.func.isRequired,onSendPhoneCode:s.a.func.isRequired,onChangeNumber:s.a.func,onResendCode:s.a.func.isRequired,onOpen:s.a.func}),babelHelpers.defineProperty(Pn,"defaultProps",{codeError:"",isLoading:!1,backUrl:"",formError:"",onOpen:function(){}});var _n=Object(i.connect)((function(e,r){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?vn(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["isLoading","formError","captchaError","codeError","timer","source"])(e.common),{login:e.common.login||r.login})}),{getCaptcha:Ae,clearError:Re})(Pn),Rn=Object(i.connect)((function(){return{onOpen:function(e){return Object(cr.l)(e,De.o.RESTORE)}}}),{onSendPhoneCode:function(e){return{types:[j,G,I],fetching:(r=e,t={code:r.code},Object(nt.h)("/restore/phone/confirm",t)),callback:function(e,r){if(e.success)r((o=e.hash,{type:x.GO_TO_RESTORE_RESET_PAGE,payload:{hash:o,platform:"desktop",restoreType:"phone"}}));else{var t,n,a=(null==e||null===(t=e.errors)||void 0===t?void 0:t.code)||(null==e||null===(n=e.errors)||void 0===n?void 0:n.login);a&&r(we(a)),an(e.errors,r)||Object(Ur.a)(De.o.RESTORE,"Unknown error",{response:e})}var o;e.timer&&r(je(e.timer))}};var r,t},onResendCode:function(e){return{types:[j,G,I],fetching:_t(tn({},e,{retry:!0})),callback:function(e,r){e.timer&&r(je(e.timer))}}}})(_n),An=t(4671),Tn=t(10835);function Cn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Sn=function(e){babelHelpers.inherits(t,e);var r=Cn(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{isHintShown:!1,password:"",isPasswordValid:!1,passwordComplexityErrors:[]}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleFocusPasswordField",(function(){e.setState({isHintShown:!0})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleBlurPasswordField",(function(){e.setState({isHintShown:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleChangePassword",(function(r){var t=r.value,n=Object(Tn.b)(t);e.setState({password:t,isPasswordValid:0===n.length,passwordComplexityErrors:n})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSubmitForm",(function(r){(0,r.preventDefault)();var t=e.state,n=t.password,a=t.isPasswordValid,o=e.props,s=o.onSendPassword,i=o.hash,c=o.platform,l=o.restoreType,u=o.successAction,p=o.login;n&&a&&s({password:n,hash:i,restoreType:l,platform:c,successAction:u,login:p})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.formError;return a.a.createElement("div",{className:Nr.a.container,"data-marker":"reset-form-container"},a.a.createElement(Pr.a,{marker:"reset-form",layout:vr.b,title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},noValidate:!0,autoComplete:"off",error:e,onSubmit:this.handleSubmitForm},this.renderPasswordField(),this.renderButton()))}},{key:"renderButton",value:function(){var e=this.props.isLoading,r=this.state.isPasswordValid;return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{marker:"reset-form/button",design:"primary",size:"m",disabled:!r,loading:e,title:"РЎРѕС…СЂР°РЅРёС‚СЊ РЅРѕРІС‹Р№ РїР°СЂРѕР»СЊ"},"РЎРѕС…СЂР°РЅРёС‚СЊ РЅРѕРІС‹Р№ РїР°СЂРѕР»СЊ"))}},{key:"renderPasswordField",value:function(){var e=this.props,r=e.passwordError,t=e.login,o=this.state,s=o.password,i=o.isHintShown,c=o.passwordComplexityErrors;return a.a.createElement(Pr.a.Fieldset,{error:r},a.a.createElement(Tn.a,{isOpen:i,password:s,passwordComplexityErrors:c},a.a.createElement(n.Fragment,null,a.a.createElement(An.a,{className:"ym-hide-content",autoComplete:"new-password",name:"password",autoCorrect:"off",autoCapitalize:"off",marker:"reset-form/password",maxLength:"60",error:Boolean(r),value:s,size:"m",placeholder:"РќРѕРІС‹Р№ РїР°СЂРѕР»СЊ",onFocus:this.handleFocusPasswordField,onBlur:this.handleBlurPasswordField,onChange:this.handleChangePassword}),a.a.createElement("input",{"data-marker":"reset-form/username",defaultValue:t,style:{display:"none"},type:"text",name:"username"}))))}}]),t}(n.PureComponent);function kn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(Sn,"propTypes",{passwordError:s.a.string.isRequired,hash:s.a.string.isRequired,platform:s.a.string.isRequired,restoreType:s.a.string.isRequired,isLoading:s.a.bool.isRequired,formError:s.a.string.isRequired,successAction:s.a.string.isRequired,login:s.a.string.isRequired,onSendPassword:s.a.func.isRequired});var Hn=Object(i.connect)((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?kn(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["formError","isLoading","successAction","passwordError","login"])(e.common),{},Object(Er.a)(["hash","platform","restoreType"])(e.location.payload))}),{onSendPassword:function(e){return{types:[j,G,I],fetching:(r=e,t=Object($e.a)(["successAction","login"])(r),Object(nt.h)("/restore/password",t)),callback:function(r,t){if(r.success){if(!r.userInfo&&r.login)return void Qt(tn({},r,{password:e.password,source:"restore_auth",remember:!0}))(t).then((function(n){var a;!0===n&&t((a={login:r.login,password:e.password,source:"restore_auth"},{type:x.GO_TO_AUTH_PAGE_CLASSIC,payload:a}))}));r.userInfo&&e.login&&hr(tn({},r.userInfo,{login:e.login,loginType:r.restoreType}),De.o.RESTORE),Pt(t,e,r)}else an(r.errors,t)}};var r,t}})(Sn),wn=t(9140),jn=t.n(wn),Gn=["href"],In=function(){},Nn=function(e){var r=e.href,t=babelHelpers.objectWithoutProperties(e,Gn);return"object"===babelHelpers.typeof(r)&&(r=r.payload.to),a.a.createElement(Tr.a,babelHelpers.extends({},t,{href:r,noVisited:!0,onDynamicTransition:In}),a.a.createElement(jn.a,{tagName:"span",to:r},t.children))};Nn.propTypes={href:s.a.oneOfType([s.a.string,s.a.object]),children:s.a.oneOfType([s.a.string,s.a.node,s.a.element])};var Ln=Nn;function Dn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var xn=function(e){babelHelpers.inherits(t,e);var r=Dn(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement(Gr,{marker:"sign-in-link-footer-container"},a.a.createElement(Ln,{marker:"sign-in-link-footer/sign-in-link",href:"/login"},"Р’РѕР№РґРёС‚Рµ"),","," ","РµСЃР»Рё РІСЃРїРѕРјРЅРёР»Рё РїР°СЂРѕР»СЊ")}}]),t}(n.PureComponent);function Un(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Bn=function(e){babelHelpers.inherits(t,e);var r=Un(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.isPasswordReset;return a.a.createElement("div",{"data-marker":"check-form-container"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{marker:"check-form",title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},description:this.renderMessage(),layout:vr.b})),!e&&a.a.createElement(xn,null))}},{key:"renderMessage",value:function(){var e=this.props.login;return a.a.createElement(kr.a,{marker:"check-form/message"},a.a.createElement("span",{className:Nr.a.center},"РЎСЃС‹Р»РєР° РґР»СЏВ РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёСЏ РїР°СЂРѕР»СЏ РѕС‚РїСЂР°РІР»РµРЅР° РЅР°В РїРѕС‡С‚Сѓ"," ",a.a.createElement("span",{className:Nr.a.bold},e),"."))}}]),t}(n.PureComponent);function Fn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function qn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}babelHelpers.defineProperty(Bn,"propTypes",{login:s.a.string.isRequired,isPasswordReset:s.a.bool});var Mn=function(e){babelHelpers.inherits(t,e);var r=qn(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleChangeNumber",(function(){e.props.goToRestorePage(),e.props.changeNumberEvent({phone:e.props.login})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,r=e.page,t=e.restoreType,n=e.login,o=e.experimentsValues,s=e.isPasswordReset;switch(r){case rr.RESTORE_LOGIN_PAGE:return a.a.createElement(un,{experimentsValues:o,marker:"restore-form"});case rr.RESTORE_LOGIN_CHECK_PAGE:return t===De.d?a.a.createElement(Rn,{marker:"phone-code",onChangeNumber:this.handleChangeNumber}):a.a.createElement(Bn,{marker:"check-form",login:n,isPasswordReset:s});case rr.RESTORE_RESET_PAGE:return a.a.createElement(Hn,{marker:"reset-form"});default:return a.a.createElement(un,{experimentsValues:o,marker:"restore-form"})}}}]),t}(n.PureComponent);babelHelpers.defineProperty(Mn,"propTypes",{page:s.a.string.isRequired,restoreType:s.a.oneOf(De.q).isRequired,login:s.a.string.isRequired,experimentsValues:s.a.instanceOf(Map),goToRestorePage:s.a.func.isRequired,changeNumberEvent:s.a.func.isRequired,isPasswordReset:s.a.bool});var zn={goToRestorePage:Yr,changeNumberEvent:cr.c},Kn=Object(i.connect)((function(e){return{isPasswordReset:e.common.isPasswordReset,restoreType:e.common.restoreType,login:e.common.login,page:e.page.name}}),zn,(function(e,r,t){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Fn(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{},r,{},t,{goToRestorePage:function(){r.goToRestorePage({source:"restore",login:e.login})}})}))(Mn);function Wn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Vn=function(e){babelHelpers.inherits(t,e);var r=Wn(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"blocked-account-container"},a.a.createElement(Pr.a,{marker:"blocked-account",title:{text:"РџСЂРѕС„РёР»СЊ Р·Р°Р±Р»РѕРєРёСЂРѕРІР°РЅ",align:"center"},description:this.renderMessage(),layout:vr.b}))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"blocked-account/message"},a.a.createElement("span",{className:Nr.a.center},this.props.reasonBlockedText))}}]),t}(n.PureComponent);babelHelpers.defineProperty(Vn,"propTypes",{reasonBlockedText:s.a.string.isRequired});var $n=t(4461),Yn=function(e){var r=e.href;return"object"===babelHelpers.typeof(r)&&(r=e.href.payload.to),a.a.createElement(jn.a,{tagName:"div",to:e.href},a.a.createElement($n.a,babelHelpers.extends({},e,{href:r}),e.children))};Yn.propTypes={href:s.a.oneOfType([s.a.string,s.a.object]),children:s.a.oneOfType([s.a.string,s.a.node,s.a.element])};var Qn=Yn;function Jn(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Xn=function(e){babelHelpers.inherits(t,e);var r=Jn(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.location,r="/registration".concat((null==e?void 0:e.search)?"?"+(null==e?void 0:e.search):"");return a.a.createElement("div",{className:Nr.a.container,"data-marker":"deleted-account"},a.a.createElement(Pr.a,{marker:"deleted-account",title:{text:"РЈС‡С‘С‚РЅР°СЏ Р·Р°РїРёСЃСЊ СѓРґР°Р»РµРЅР°",align:"center"},description:this.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Qn,{size:"m",href:r,design:"primary",marker:"deleted-account/button"},"Р—Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊСЃСЏ"))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"deleted-account/message"},a.a.createElement("span",{className:Nr.a.center},"Р”Р»СЏВ РІС…РѕРґР° Р·Р°СЂРµРіРёСЃС‚СЂРёСЂСѓР№С‚РµСЃСЊ РїРѕРІС‚РѕСЂРЅРѕ."))}}]),t}(n.PureComponent);babelHelpers.defineProperty(Xn,"propTypes",{location:s.a.object});var Zn=Object(i.connect)((function(e){return{location:e.location}}))(Xn);function ea(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ra=function(e){babelHelpers.inherits(t,e);var r=ea(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"pro-blocked-container"},a.a.createElement(Pr.a,{marker:"pro-blocked",title:{text:"РЈС‡С‘С‚РЅР°СЏ Р·Р°РїРёСЃСЊ РЅРµ РїРѕРґС…РѕРґРёС‚",align:"center"},description:this.renderMessage(),layout:vr.b}," "))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"pro-blocked/message"},a.a.createElement("span",{className:Nr.a.center},"Р”Р»СЏВ СЃРјРµРЅС‹ РїР°СЂРѕР»СЏ РІВ ",this.props.proType," РѕР±СЂР°С‚РёС‚РµСЃСЊ РєВ СЃРІРѕРµРјСѓ СЂСѓРєРѕРІРѕРґРёС‚РµР»СЋ."))}}]),t}(n.PureComponent);babelHelpers.defineProperty(ra,"propTypes",{proType:s.a.string.isRequired});var ta=t(6606),na=t(10372),aa=t.n(na);function oa(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var sa=function(e){babelHelpers.inherits(t,e);var r=oa(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleRestoreByEmail",(function(r){r.event.stopPropagation(),e.props.onRestoreByEmailClicked()})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.isPasswordReset;return a.a.createElement("div",{"data-marker":"restore-form"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{marker:"check-form",title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},description:this.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Fieldset,{className:aa.a.fieldset},a.a.createElement(Ar.a,{size:"m",marker:"restore-form/button-restore",design:"primary",type:"button",onClick:this.handleRestoreByEmail},"Р’РѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ РїРѕ СЌР»РµРєС‚СЂРѕРЅРЅРѕР№ РїРѕС‡С‚Рµ")),a.a.createElement(Pr.a.Fieldset,{className:aa.a.fieldset},a.a.createElement($n.a,{size:"m",marker:"restore-form/button-helpcenter",href:ta.d},"РћР±СЂР°С‚РёС‚СЊСЃСЏ РІ СЃР»СѓР¶Р±Сѓ РїРѕРґРґРµСЂР¶РєРё")))),!e&&a.a.createElement(xn,null))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"check-form/message"},a.a.createElement("span",{className:Nr.a.center},"РњС‹ РЅРµВ РјРѕР¶РµРј РІРѕСЃСЃС‚Р°РЅРѕРІРёС‚СЊ РїР°СЂРѕР»СЊ РєВ СѓС‡С‘С‚РЅРѕР№ Р·Р°РїРёСЃРё РїРѕВ РЅРѕРјРµСЂСѓ С‚РµР»РµС„РѕРЅР°."))}}]),t}(n.PureComponent);function ia(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}babelHelpers.defineProperty(sa,"propTypes",{isPasswordReset:s.a.bool,onRestoreByEmailClicked:s.a.func}),babelHelpers.defineProperty(sa,"defaultProps",{onRestoreByEmailClicked:function(){}});var ca=function(e){babelHelpers.inherits(t,e);var r=ia(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"invalid-hash-container"},a.a.createElement(Pr.a,{marker:"invalid-hash",title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},description:this.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ln,{size:"m",href:"/restore",marker:"invalid-hash/button"},"Р—Р°РїСЂРѕСЃРёС‚СЊ РЅРѕРІСѓСЋ СЃСЃС‹Р»РєСѓ"))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"invalid-hash/message"},a.a.createElement("span",{className:Nr.a.center},"РЎСЃС‹Р»РєР° РґР»СЏВ РІРѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёСЏ РґРѕСЃС‚СѓРїР° СѓСЃС‚Р°СЂРµР»Р° РёР»Рё СЃРѕРґРµСЂР¶РёС‚ РѕС€РёР±РєСѓ."))}}]),t}(n.PureComponent);function la(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ua=function(e){babelHelpers.inherits(t,e);var r=la(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"acti-account-container"},a.a.createElement(Pr.a,{marker:"acti-account",title:{text:this.props.title,align:"center"},description:this.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement($n.a,{size:"m",href:this.props.link,design:"primary",marker:"acti-account/button"},this.props.linkText))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"acti-account/message"},a.a.createElement("span",{className:Nr.a.center},this.props.description))}}]),t}(n.PureComponent);babelHelpers.defineProperty(ua,"propTypes",{title:s.a.string.isRequired,link:s.a.string.isRequired,linkText:s.a.string.isRequired,description:s.a.string.isRequired});var pa=function(){return a.a.createElement(ua,{title:"Р”РѕСЃС‚СѓРї Рє ActiDealer",link:"https://actidealer.ru/",linkText:"РџРµСЂРµР№С‚Рё РІ ActiDealer",marker:"acti-dealer",description:"Р’С‹ РїС‹С‚Р°РµС‚РµСЃСЊ РІРѕР№С‚Рё РІ СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ ActiDealer."})},fa=function(){return a.a.createElement(ua,{title:"Р”РѕСЃС‚СѓРї Рє ActiAgent",link:"https://actiagent.ru/",linkText:"РџРµСЂРµР№С‚Рё РІ ActiAgent",marker:"acti-account",description:"Р’С‹ РїС‹С‚Р°РµС‚РµСЃСЊ РІРѕР№С‚Рё РІ СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ ActiAgent."})},ha=t(10373),da=t.n(ha);function ba(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ma=function(e){babelHelpers.inherits(t,e);var r=ba(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleFormSubmit",(function(r){(0,r.preventDefault)(),e.props.onRetryClick()})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"social-auth-error-container"},a.a.createElement(Pr.a,{marker:"social-auth-error",title:{text:this.props.title,align:"center"},description:this.renderMessage(),layout:vr.b,onSubmit:this.handleFormSubmit},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{design:"primary",size:"m",marker:"social-auth-error/button-retry",className:da.a.button},this.props.buttonText))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"social-auth-error/message"},a.a.createElement("span",{className:Nr.a.center},this.props.errorText))}}]),t}(n.PureComponent);function ya(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}babelHelpers.defineProperty(ma,"propTypes",{onRetryClick:s.a.func.isRequired,errorText:s.a.oneOfType([s.a.string,s.a.object]),buttonText:s.a.string,title:s.a.string}),babelHelpers.defineProperty(ma,"defaultProps",{errorText:"РџРѕРІС‚РѕСЂРёС‚Рµ РїРѕРїС‹С‚РєСѓ РІС…РѕРґР° С‡РµСЂРµР· СЃРѕС†РёР°Р»СЊРЅСѓСЋ СЃРµС‚СЊ.",buttonText:"РџРѕРІС‚РѕСЂРёС‚СЊ",title:"РћС€РёР±РєР° РїСЂРё РІС…РѕРґРµ"});var Oa=function(e){babelHelpers.inherits(t,e);var r=ya(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement(ma,{errorText:this.renderMessage(),buttonText:"Р’РµСЂРЅСѓС‚СЊСЃСЏ Рє СЃРїРёСЃРєСѓ",title:"РџСЂРѕС„РёР»Рё РЅРµ СЃРѕРІРїР°РґР°СЋС‚",onRetryClick:this.props.onRetryClick})}},{key:"renderMessage",value:function(){return a.a.createElement(a.a.Fragment,null,"Р—Р°Р№РґРёС‚Рµ РІ ",a.a.createElement("a",{rel:"noreferrer",target:"_blank",href:this.props.errorLink.link},this.props.errorLink.text)," РїРѕРґ СЃРІРѕРёРј РёРјРµРЅРµРј.",a.a.createElement("br",null),"РЎРµР№С‡Р°СЃ С‚Р°Рј РєС‚Рѕ-С‚Рѕ РґСЂСѓРіРѕР№.")}}]),t}(n.PureComponent);babelHelpers.defineProperty(Oa,"propTypes",{onRetryClick:s.a.func.isRequired,errorLink:s.a.shape({link:s.a.string.isRequired,text:s.a.string.isRequired}).isRequired});var ga=t(10374),Ea=t.n(ga);function Pa(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var va=function(e){babelHelpers.inherits(t,e);var r=Pa(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleClickRestore",(function(r){(0,r.preventDefault)(),e.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleReCaptchaSuccess",(function(r){var t=e.props,n=t.login;(0,t.onSendRestoreLogin)({login:n,extcaptchaValue:r})})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.initCaptcha(this.handleReCaptchaSuccess)}},{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"password-was-reset"},a.a.createElement(Pr.a,{marker:"password-was-reset-form",title:{text:"Р’РѕСЃСЃС‚Р°РЅРѕРІР»РµРЅРёРµ РїР°СЂРѕР»СЏ",align:"center"},description:this.renderMessage(),layout:vr.b,onSubmit:this.handleClickRestore},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",design:"primary",loading:this.props.isLoading,marker:"password-was-reset-form/button"},"Р—Р°РґР°С‚СЊ РЅРѕРІС‹Р№ РїР°СЂРѕР»СЊ"))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"password-was-reset-form/message"},a.a.createElement("span",{className:hn()(Nr.a.center,Ea.a.message)},"Р”Р»СЏ РІР°С€РµР№ Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё РјС‹В СЃР±СЂРѕСЃРёР»Рё РїР°СЂРѕР»СЊ РѕС‚В СѓС‡С‘С‚РЅРѕР№ Р·Р°РїРёСЃРё СЃВ ",this.props.restoreType===De.d?"С‚РµР»РµС„РѕРЅРѕРј":"РїРѕС‡С‚РѕР№","В ",a.a.createElement("span",{className:hn()(Nr.a.bold,Ea.a.login)},this.props.login),"."))}}]),t}(n.PureComponent);babelHelpers.defineProperty(va,"propTypes",{restoreType:s.a.oneOf(De.q).isRequired,isLoading:s.a.bool.isRequired,onSendRestoreLogin:s.a.func.isRequired,login:s.a.string.isRequired,captchaExecute:s.a.func,initCaptcha:s.a.func});var _a=Object(i.connect)((function(e){return{login:e.common.login,restoreType:e.common.restoreType,isLoading:e.common.isLoading}}),{onSendRestoreLogin:nn})(Object(sn.a)(va)),Ra=t(10375),Aa=t.n(Ra);function Ta(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ca=function(e){babelHelpers.inherits(t,e);var r=Ta(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleRestore",(function(r){(0,r.preventDefault)(),e.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleReCaptchaSuccess",(function(r){var t=e.props,n=t.login;(0,t.onSendRestoreLogin)({login:n,extcaptchaValue:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleAlternativeRestore",(function(){e.props.onRestoreClick()})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.initCaptcha(this.handleReCaptchaSuccess)}},{key:"render",value:function(){var e=this.props,r=e.restoreType,t=e.secondaryRestoreType;return a.a.createElement("div",{className:Nr.a.container,"data-marker":"weak-password-was-reset"},a.a.createElement(Pr.a,{marker:"weak-password-was-reset-form",title:{text:"РЎСЂР°Р±РѕС‚Р°Р»Р° Р·Р°С‰РёС‚Р° РїСЂРѕС„РёР»СЏ",align:"center"},description:this.renderMessage(),layout:vr.b,onSubmit:this.handleRestore},a.a.createElement(Pr.a.Action,{align:"center",className:Aa.a["button-gap"]},a.a.createElement(Ar.a,{size:"m",design:"primary",loading:this.props.isLoading,marker:"weak-password-was-reset-form/button"},r===De.d?"РџРѕР»СѓС‡РёС‚СЊ РєРѕРґ РїРѕ СЃРјСЃ":"РџРѕР»СѓС‡РёС‚СЊ РµС‰Рµ СЂР°Р·"),Boolean(t)&&a.a.createElement(Ar.a,{size:"m",marker:"weak-password-was-reset-form/alt-button",onClick:this.handleAlternativeRestore},t===De.d?"Р’РѕР№С‚Рё РїРѕ СЃРјСЃ":"Р’РѕР№С‚Рё РїРѕ РїРѕС‡С‚Рµ"))))}},{key:"renderMessage",value:function(){var e=this.props.weakPasswordMessage;return a.a.createElement(kr.a,{marker:"password-was-reset-form/message"},a.a.createElement("span",{className:hn()(Nr.a.center,Aa.a.message)},e))}}]),t}(n.PureComponent);function Sa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(Ca,"propTypes",{restoreType:s.a.oneOf(De.q).isRequired,isLoading:s.a.bool.isRequired,onSendRestoreLogin:s.a.func.isRequired,onRestoreClick:s.a.func.isRequired,login:s.a.string.isRequired,secondaryRestoreType:s.a.oneOf(De.q),captchaExecute:s.a.func,initCaptcha:s.a.func,weakPasswordMessage:s.a.string.isRequired});var ka=Object(i.connect)((function(e){return{login:e.common.login,restoreType:e.common.restoreType,secondaryRestoreType:e.common.secondaryRestoreType,isLoading:e.common.isLoading,weakPasswordMessage:e.common.weakPasswordMessage}}),{onSendRestoreLogin:nn,goToRestoreLoginPage:Yr},(function(e,r,t){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Sa(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sa(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{},r,{},t,{onRestoreClick:function(){r.goToRestoreLoginPage({restoreType:e.secondaryRestoreType}),Object(cr.j)()}})}))(Object(sn.a)(Ca)),Ha=t(10376),wa=t.n(Ha);function ja(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ga=function(e){babelHelpers.inherits(t,e);var r=ja(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleFormSubmit",(function(r){(0,r.preventDefault)(),e.props.onRetryClick()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"marker","time-is-up-error-page"),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":this.marker},a.a.createElement(Pr.a,{marker:"".concat(this.marker,"/form"),title:{text:"Р’СЂРµРјСЏ РёСЃС‚РµРєР»Рѕ",align:"center"},description:this.renderMessage(),layout:vr.b,onSubmit:this.handleFormSubmit},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{design:"primary",size:"m",marker:"".concat(this.marker,"/button-retry"),className:wa.a.button},"РџРѕРІС‚РѕСЂРёС‚СЊ"))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"".concat(this.marker,"/message")},a.a.createElement("span",{className:Nr.a.center},"РџРѕРІС‚РѕСЂРёС‚Рµ РїРѕРїС‹С‚РєСѓ РІС…РѕРґР°."))}}]),t}(n.PureComponent);function Ia(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}babelHelpers.defineProperty(Ga,"propTypes",{onRetryClick:s.a.func.isRequired});var Na=Object.keys(rr),La=function(e){babelHelpers.inherits(t,e);var r=Ia(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,r=e.page,t=e.location,n=e.reasonText,o=e.errorText,s=e.errorLink,i=e.goToLoginPage,c=e.onRestoreByEmailClicked,l=e.login,u=e.isPasswordReset;switch(r){case rr.PASSWORD_WAS_RESET_PAGE:return a.a.createElement(_a,{marker:"password-was-reset"});case rr.WEAK_PASSWORD_WAS_RESET_PAGE:return a.a.createElement(ka,{marker:"weak-password-was-reset"});case rr.BLOCKED_ACCOUNT_PAGE:return a.a.createElement(Vn,{marker:"blocked-account",reasonBlockedText:n,login:l});case rr.DELETED_ACCOUNT_PAGE:return a.a.createElement(Zn,{marker:"deleted-account"});case rr.BLOCKED_PRO_ACCOUNT_PAGE:return a.a.createElement(ra,{marker:"pro-restore-blocked",proType:t.payload.proType});case rr.EMAIL_RESTORE_REQUIRED_PAGE:return a.a.createElement(sa,{marker:"restore-by-email-required",isPasswordReset:u,onRestoreByEmailClicked:c});case rr.ACTIDEALER_PAGE:return a.a.createElement(pa,{marker:"acti-dealer-page"});case rr.ACTIAGENT_PAGE:return a.a.createElement(fa,{marker:"acti-agent-page"});case rr.WRONG_HASH_PAGE:return a.a.createElement(ca,{marker:"invalid-hash"});case rr.SOCIAL_AUTH_ERROR_PAGE:return a.a.createElement(ma,{marker:"social-auth-error-page",errorText:o||void 0,onRetryClick:i});case rr.SOCIAL_WRONG_ID_ERROR_PAGE:return a.a.createElement(Oa,{marker:"social-wrong-id-error-page",errorLink:s,onRetryClick:i});case rr.TIME_IS_UP_ERROR_PAGE:return a.a.createElement(Ga,{marker:"timeIsUpErrorPage",onRetryClick:i});default:return null}}}]),t}(n.PureComponent);babelHelpers.defineProperty(La,"propTypes",{goToLoginPage:s.a.func.isRequired,onRestoreByEmailClicked:s.a.func.isRequired,location:s.a.shape({payload:s.a.object.isRequired}).isRequired,errorLink:s.a.shape({link:s.a.string,text:s.a.string}),page:s.a.oneOf(Na),errorText:s.a.string,reasonText:s.a.string,login:s.a.oneOfType([s.a.string,s.a.number]),isPasswordReset:s.a.bool});var Da=Object(i.connect)((function(e){return{page:e.page.name,location:e.location,reasonText:e.location.payload&&e.location.payload.reasonText||e.auth.loginErrors&&e.auth.loginErrors.reasonBlockedText,errorText:e.page.payload&&e.page.payload.errorText,errorLink:e.page.payload&&e.page.payload.errorLink,login:e.common.login,isPasswordReset:e.common.isPasswordReset}}),{goToLoginPage:Wr,onRestoreByEmailClicked:function(){return Yr({restoreType:De.c,source:"error-page"})}})(La);function xa(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ua=function(e){babelHelpers.inherits(t,e);var r=xa(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement(Gr,{marker:"sign-in-link-footer"},"РЈР¶РµВ РµСЃС‚СЊВ РїСЂРѕС„РёР»СЊ?В ",a.a.createElement(Ln,{marker:"sign-in-link-footer/sign-in-link",href:"/login"},"Р’РѕР№С‚Рё"))}}]),t}(n.PureComponent);function Ba(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Fa=function(e){babelHelpers.inherits(t,e);var r=Ba(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleCaptchaRefresh",(function(){n.props.getCaptcha(),n.setState({captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeLogin",(function(e){var r=e.value;n.props.loginError&&n.props.clearError("loginError"),n.setState({login:r.replace(/\D/gi,"")})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeCaptcha",(function(e){var r=e.value;n.setState({captcha:r}),n.props.captchaError&&n.props.clearError("captchaError")})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFormSubmit",(function(e){(0,e.preventDefault)(),n.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleReCaptchaSuccess",(function(e){var r=n.props,t=r.onRegistrationSubmit,a=r.successAction,o=n.state;t({login:o.login,captcha:o.captcha,extcaptchaValue:e,successAction:a})})),n.state={login:e.login,captcha:""},n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen(),this.props.initCaptcha(this.handleReCaptchaSuccess)}},{key:"componentDidUpdate",value:function(){(this.props.loginError||this.props.captchaError||this.props.formError)&&this.props.isExternalCaptchaEnabled&&this.props.resetCaptcha()}},{key:"render",value:function(){var e=this.props.formError;return a.a.createElement("div",{"data-marker":"registration-main"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{marker:"registration-form",layout:vr.b,title:{text:"Р РµРіРёСЃС‚СЂР°С†РёСЏ",align:"center"},noValidate:!0,error:e||"",onSubmit:this.handleFormSubmit},this.renderLoginField(),this.renderCaptcha(),this.renderButton())),a.a.createElement(Ua,null))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.captchaError,t=e.captchaImg,n=e.isCaptchaShown,o=e.isExternalCaptchaEnabled,s=this.state.captcha;return!o||n?a.a.createElement(Pr.a.Fieldset,{error:r||""},a.a.createElement(Cr.a,{error:Boolean(r),marker:"registration-form/captcha",value:s,imageSrc:t,onChange:this.handleChangeCaptcha,onRefresh:this.handleCaptchaRefresh})):null}},{key:"renderButton",value:function(){var e=this.props,r=e.isLoading,t=e.loginError,n=e.isCaptchaShown,o=e.isExternalCaptchaEnabled,s=this.state,i=s.captcha,c=s.login.length<De.g||Boolean((!o||n)&&!i)||Boolean(t);return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",marker:"registration-form/button",design:"primary",disabled:c,loading:r},"РџСЂРѕРґРѕР»Р¶РёС‚СЊ"))}},{key:"renderLoginField",value:function(){var e=this.props.loginError,r=this.state.login;return a.a.createElement(Pr.a.Fieldset,{error:e||""},a.a.createElement(Rr.a,{size:"m",mask:"phone",error:Boolean(e),marker:"registration-form/input",autoFocus:!0,value:r,placeholder:"Р’РІРµРґРёС‚Рµ С‚РµР»РµС„РѕРЅ",autoComplete:"username",name:"username",className:"ym-hide-content",onChange:this.handleChangeLogin}))}}]),t}(n.PureComponent);function qa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ma(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?qa(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qa(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}babelHelpers.defineProperty(Fa,"propTypes",{login:s.a.string,loginError:s.a.string,captchaError:s.a.string,formError:s.a.string,isLoading:s.a.bool.isRequired,successAction:s.a.string,captchaImg:s.a.string,onOpen:s.a.func.isRequired,getCaptcha:s.a.func.isRequired,clearError:s.a.func.isRequired,onRegistrationSubmit:s.a.func.isRequired,initCaptcha:s.a.func,captchaExecute:s.a.func,resetCaptcha:s.a.func,isExternalCaptchaEnabled:s.a.bool,isCaptchaShown:s.a.bool}),babelHelpers.defineProperty(Fa,"defaultProps",{captchaImg:"",formError:"",login:"",successAction:""});var za=function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:j}),r.prev=1,r.next=4,ot(e);case 4:n=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),t({type:I,payload:r.t0}),r.abrupt("return");case 11:if(t({type:G,response:n}),t(Ce(n.login)),n.showCaptcha?t(ve()):t(_e()),!n.success){r.next=18;break}e.retry||t((a=n.timer,{type:x.GO_TO_REGISTRATION_CHECK_CODE_PAGE,payload:{timer:a}})),r.next=23;break;case 18:if(n.errors){r.next=22;break}return t(ke()),Object(Ur.a)(new Error("".concat(De.o.REGISTRATION,": Server invalid response")),{requestUrl:"/code/request",requestData:e,response:n}),r.abrupt("return");case 22:Wa(n,t);case 23:n.timer&&t(je(n.timer));case 24:case"end":return r.stop()}var a}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},Ka=function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:j}),r.prev=1,r.next=4,o=void 0,o={hash:e.hash},Object(nt.f)("/registration/profiles/list",o);case 4:a=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),t({type:x.GO_TO_USERS_LIST_ERROR_PAGE}),r.abrupt("return");case 11:t({type:G,response:a}),(null===(n=a.profiles)||void 0===n?void 0:n.length)?t(Zr(a.profiles,a.isRegistrationAvailable)):t(Xr());case 13:case"end":return r.stop()}var o}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()};function Wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return e.errors.isInternalError?r(Kr()):e.errors.isUserBlockedByModerator?r(qr(e.errors.reasonBlockedText)):e.errors.captcha?r(Se(e.errors.captcha)):e.errors.login?r(Te(e.errors.login)):e.errors.password?r(He(e.errors.password)):e.errors.code?r(we(e.errors.code)):void 0}function Va(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Boolean(e)&&/^\d+$/gi.test(e.replace(/[\s\+-]/gi,""))}var Ya=Object(i.connect)((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Va(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Va(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["loginError","formError","captchaError","isLoading","successAction","captchaImg","isCaptchaShown"])(e.common),{login:$a(e.common.login)?e.common.login:"",onOpen:cr.o})}),{onRegistrationSubmit:za,getCaptcha:Ae,clearError:Re})(Object(sn.a)(Fa));function Qa(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ja=function(e){babelHelpers.inherits(t,e);var r=Qa(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleCaptchaRefresh",(function(){n.props.getCaptcha(),n.setState({captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeLogin",(function(e){var r=e.value;n.props.loginError&&n.props.clearError("loginError"),n.setState({login:r.replace(/\D/gi,"")})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeCaptcha",(function(e){var r=e.value;n.setState({captcha:r}),n.props.captchaError&&n.props.clearError("captchaError")})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFormSubmit",(function(e){(0,e.preventDefault)();var r=n.state.login.replace(/(\d?)(\d{3})(\d{3})(\d{2})(\d{2})/g,"+$1 $2 $3-$4-$5");n.props.setLogin(r),n.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleReCaptchaSuccess",(function(e){var r=n.props.onCodeRequest,t=n.state;r({login:t.login,captcha:t.captcha,extcaptchaValue:e})})),n.state={login:e.login,captcha:""},n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen(),this.props.initCaptcha(this.handleReCaptchaSuccess)}},{key:"componentDidUpdate",value:function(e){(this.props.loginError||this.props.captchaError||this.props.formError)&&this.props.isExternalCaptchaEnabled&&this.props.resetCaptcha(),this.props.login!==e.login&&this.handleChangeLogin({value:this.props.login})}},{key:"render",value:function(){var e=this.props.formError;return a.a.createElement("div",{"data-marker":"registration-main"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{marker:"registration-form",layout:vr.b,title:{text:this.renderHeading(),align:"center"},noValidate:!0,error:e||"",onSubmit:this.handleFormSubmit},this.renderText(),this.renderLoginField(),this.renderCaptcha(),this.renderButton())))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.captchaError,t=e.isExternalCaptchaEnabled,n=e.captchaImg,o=this.state.captcha;return t?null:a.a.createElement(Pr.a.Fieldset,{error:r||""},a.a.createElement(Cr.a,{error:Boolean(r),marker:"registration-form/captcha",value:o,imageSrc:n,onChange:this.handleChangeCaptcha,onRefresh:this.handleCaptchaRefresh}))}},{key:"renderHeading",value:function(){switch(this.props.source){case"pubpro_items":return"РџРѕРґС‚РІРµСЂРґРёС‚Рµ РЅРѕРјРµСЂ, С‡С‚РѕР±С‹ СЃРјРѕС‚СЂРµС‚СЊ РѕР±СЉСЏРІР»РµРЅРёСЏ";case"review_add_unver_phone":case"review_add":case"rev":return"РџРѕРґС‚РІРµСЂРґРёС‚Рµ РЅРѕРјРµСЂ, С‡С‚РѕР±С‹ РѕСЃС‚Р°РІР»СЏС‚СЊ РѕС‚Р·С‹РІС‹";case"sub":return"РџРѕРґРїРёСЃРєР° РІСЂРµРјРµРЅРЅРѕ РЅРµРґРѕСЃС‚СѓРїРЅР°";case"order":return"РџРѕРґС‚РІРµСЂРґРёС‚Рµ С‚РµР»РµС„РѕРЅ, С‡С‚РѕР±С‹ РѕРїР»Р°С‚РёС‚СЊ Р·Р°РєР°Р·";default:return"РџРѕРґС‚РІРµСЂРґРёС‚Рµ РЅРѕРјРµСЂ С‚РµР»РµС„РѕРЅР°"}}},{key:"renderText",value:function(){switch(this.props.source){case"pubpro_items":return a.a.createElement(kr.a,{className:Nr.a.paragraph},"Р”СЂСѓРіРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё СѓР·РЅР°СЋС‚ РІР°С€ С‚РµР»РµС„РѕРЅ, С‚РѕР»СЊРєРѕ РµСЃР»Рё РІС‹В РґРѕР±Р°РІРёС‚Рµ РµРіРѕ РІ СЃРІРѕРё РїСЂРµРґР»РѕР¶РµРЅРёСЏ.");case"review_add_unver_phone":case"review_add":case"rev":return a.a.createElement(kr.a,{className:Nr.a.paragraph},"Р­С‚Рѕ РЅСѓР¶РЅРѕ РґР»СЏ Р±РѕР»СЊС€РµР№ Р±РµР·РѕРїР°СЃРЅРѕСЃС‚Рё. Р”СЂСѓРіРёРµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё СѓР·РЅР°СЋС‚ РІР°С€В С‚РµР»РµС„РѕРЅ, С‚РѕР»СЊРєРѕ РµСЃР»Рё РІС‹В РґРѕР±Р°РІРёС‚Рµ РµРіРѕ РІ СЃРІРѕРё РѕР±СЉСЏРІР»РµРЅРёСЏ.");case"sub":return a.a.createElement(kr.a,{className:Nr.a.paragraph},"Р’РѕР·РјРѕР¶РЅРѕ, РЅР°С€Рё СЃРёСЃС‚РµРјС‹ СЂР°СЃС†РµРЅРёР»Рё РІР°С€ РїСЂРѕС„РёР»СЊ РєР°РєВ РїРѕРґРѕР·СЂРёС‚РµР»СЊРЅС‹Р№. РўР°РєРѕРµ РёРЅРѕРіРґР° СЃР»СѓС‡Р°РµС‚СЃСЏ, РїСЂРѕСЃС‚РёС‚Рµ Р·Р°В РЅРµСѓРґРѕР±СЃС‚РІР°. РџРѕРїСЂРѕР±СѓР№С‚Рµ РїРѕРґРїРёСЃР°С‚СЊСЃСЏ РїРѕР·Р¶Рµ.");case"order":return null;default:return a.a.createElement(kr.a,{className:Nr.a.paragraph},"Р—Р°РїСЂРѕСЃРёС‚СЊ РЅРѕРјРµСЂ С‚РµР»РµС„РѕРЅР° РјРѕРіСѓС‚В С‚РѕР»СЊРєРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё СЃВ РїРѕРґС‚РІРµСЂР¶РґС‘РЅРЅС‹Рј РЅРѕРјРµСЂРѕРј. РўРµР»РµС„РѕРЅВ РЅРёРєС‚Рѕ РЅРµВ СѓРІРёРґРёС‚, РµСЃР»Рё РЅРµВ СѓРєР°Р¶РµС‚Рµ РµРіРѕ РІВ РѕР±СЉСЏРІР»РµРЅРёСЏС….")}}},{key:"renderButton",value:function(){var e=this.props,r=e.isLoading,t=e.loginError,n=e.isExternalCaptchaEnabled,o=this.state,s=o.captcha,i=o.login.length<De.g||Boolean(!n&&!s)||Boolean(t);return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",marker:"registration-form/button",design:"primary",disabled:i,loading:r},"РџСЂРѕРґРѕР»Р¶РёС‚СЊ"))}},{key:"renderLoginField",value:function(){var e=this.props.loginError,r=this.state.login;return a.a.createElement(Pr.a.Fieldset,{error:e||""},a.a.createElement(Rr.a,{size:"m",mask:"phone",error:Boolean(e),marker:"registration-form/input",autoFocus:!0,value:r,placeholder:"Р’РІРµРґРёС‚Рµ С‚РµР»РµС„РѕРЅ",autoComplete:"username",name:"username",className:"ym-hide-content",onChange:this.handleChangeLogin}))}}]),t}(n.PureComponent);babelHelpers.defineProperty(Ja,"propTypes",{login:s.a.string,loginError:s.a.string,captchaError:s.a.string,formError:s.a.string,isLoading:s.a.bool.isRequired,captchaImg:s.a.string,source:s.a.string,onOpen:s.a.func.isRequired,getCaptcha:s.a.func.isRequired,clearError:s.a.func.isRequired,setLogin:s.a.func.isRequired,onCodeRequest:s.a.func.isRequired,initCaptcha:s.a.func,captchaExecute:s.a.func,resetCaptcha:s.a.func,isExternalCaptchaEnabled:s.a.bool}),babelHelpers.defineProperty(Ja,"defaultProps",{captchaImg:"",formError:"",login:""});var Xa=t(6616);function Za(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ht(mt,e,t);case 3:(n=r.sent).success?t((a={timer:n.timer,login:e.login},o=void 0,s=void 0,o=a.timer,s=a.login,{type:x.GO_TO_CONFIRM_USER_PHONE_FOR_AUTH_PAGE,payload:{timer:o,login:s}})):Rt(n.errors,t),n.timer&&t(je(n.timer)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t(ke());case 11:case"end":return r.stop()}var a,o,s}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}function eo(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ro(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eo(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function to(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Boolean(e)&&/^\d+$/gi.test(e.replace(/[\s\+-]/gi,""))}var no=Object(i.connect)((function(e){return ro({},Object(Er.a)(["loginError","formError","captchaError","isLoading","captchaImg","source"])(e.common),{login:to(e.common.login)?e.common.login:"",location:e.location,onOpen:cr.o})}),{onCodeRequest:Za,setLogin:Ce,getCaptcha:Ae,clearError:Re,setPopupSource:Ge},(function(e,r,t){return ro({},e,{},t,{},r,{onOpen:function(){var t=e.location.query&&(e.location.query.authsrc||e.location.query.s);return t&&r.setPopupSource(Object(Xa.b)(t)),e.onOpen()},onCodeRequest:function(t){return r.onCodeRequest(ro({},t,{},e.source&&{src:Object(Xa.b)(e.source)}))}})}))(Object(sn.a)(Ja));function ao(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var oo=Object(i.connect)((function(){return{onOpen:function(e){return Object(cr.l)(e,De.o.REGISTRATION)}}}),{onSendPhoneCode:function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:j}),r.prev=1,r.next=4,st(e);case 4:n=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),t({type:I,payload:r.t0}),r.abrupt("return");case 11:if(t({type:G,response:n}),!n.success){r.next=16;break}n.isPhoneUsed?t(Ka({hash:n.hash})):t(Xr()),r.next=21;break;case 16:if(n.errors){r.next=20;break}return t(ke()),Object(Ur.a)(new Error("".concat(De.o.REGISTRATION,": Server invalid response")),{requestUrl:"/code/confirm",requestData:e,response:n}),r.abrupt("return");case 20:Wa(n,t);case 21:n.timer&&t(je(n.timer));case 22:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},onResendCode:function(e){return za(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ao(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ao(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{retry:!0}))}})(_n);function so(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var io=function(){},co=function(e){babelHelpers.inherits(t,e);var r=so(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFocusPasswordField",(function(){setTimeout((function(){n.isPasswordInputAutofilled()||n.setState({isHintShown:!0})}),50)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handlePasswordChange",(function(e){var r=e.value,t=Object(Tn.b)(r);n.setState({password:r,isPasswordValid:0===t.length,passwordComplexityErrors:t}),n.props.passwordError&&n.props.clearError("passwordError")})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleCaptchaRefresh",(function(){n.props.getCaptcha(),n.setState({captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeName",(function(e){var r=e.value;n.setState({name:r}),n.props.nameError&&n.props.clearError("nameError")})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleChangeCaptcha",(function(e){var r=e.value;n.setState({captcha:r}),n.props.captchaError&&n.props.clearError("captchaError")})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleFormSubmit",(function(e){(0,e.preventDefault)();var r=n.props,t=r.onRegistrationSubmit,a=r.hash,o=r.successAction,s=r.login,i=n.state,c=i.name,l=i.captcha;t({name:c,password:i.password,captcha:l,hash:a,successAction:o,login:s})})),n.state={name:"",captcha:"",password:e.password,isHintShown:!1,isPasswordValid:!1,passwordComplexityErrors:[]},n.inputPasswordNode=null,n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen(this.props.login)}},{key:"render",value:function(){var e=this.props.formError;return a.a.createElement("div",{"data-marker":"registration-set-password"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Pr.a,{name:"signup",marker:"registration-form",layout:vr.b,title:{text:"Р РµРіРёСЃС‚СЂР°С†РёСЏ",align:"center"},noValidate:!0,autoComplete:"on",error:e,onSubmit:this.handleFormSubmit},this.renderNameField(),this.renderPasswordField(),this.renderCaptcha(),this.renderButton())),a.a.createElement(Ua,null))}},{key:"renderNameField",value:function(){var e=this.state.name;return a.a.createElement(Pr.a.Fieldset,{error:this.props.nameError},a.a.createElement(_r.a,{autoFocus:!0,size:"m",error:Boolean(this.props.nameError),marker:"registration-form/display-name",maxLength:"30",value:e,placeholder:"РРјСЏ РґР»СЏ РїСЂРѕС„РёР»СЏ",name:"display-name",autoComplete:"name",onChange:this.handleChangeName}))}},{key:"renderPasswordField",value:function(){var e=this,r=this.state,t=r.password,n=r.isHintShown,o=r.passwordComplexityErrors;return a.a.createElement(Pr.a.Fieldset,{layout:vr.b,error:this.props.passwordError},a.a.createElement("div",{className:"ym-hide-content"},a.a.createElement("input",{"data-marker":"registration-form/username",value:this.props.login,style:{display:"none"},type:"text",name:"username",onChange:io}),a.a.createElement(Tn.a,{isOpen:n,password:t,passwordComplexityErrors:o},a.a.createElement(An.a,{getInputNode:function(r){return e.inputPasswordNode=r},size:"m",error:Boolean(this.props.passwordError),value:t,placeholder:"РџР°СЂРѕР»СЊ",marker:"registration-form/password",autoComplete:"new-password",name:"password",onFocus:this.handleFocusPasswordField,onChange:this.handlePasswordChange}))))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.captchaError;return e.isCaptchaShown?a.a.createElement(Pr.a.Fieldset,{error:r},a.a.createElement(Cr.a,{error:Boolean(r),marker:"registration-form/captcha",value:this.state.captcha,imageSrc:this.state.captchaImg,onChange:this.handleChangeCaptcha,onRefresh:this.handleCaptchaRefresh})):null}},{key:"renderButton",value:function(){var e=this.props.isLoading,r=this.isSubmitDisabled();return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",marker:"registration-form/register-button",design:"primary",disabled:r,loading:e},"Р—Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊСЃСЏ"))}},{key:"isSubmitDisabled",value:function(){var e=this.props,r=e.isCaptchaShown,t=e.passwordError,n=e.nameError,a=this.state,o=a.captcha,s=a.password,i=a.name,c=a.isPasswordValid;return!s||Boolean(t)||!i||/^\s+$/.test(i)||Boolean(n)||r&&!o||!c}},{key:"isPasswordInputAutofilled",value:function(){var e=!1;try{e=this.inputPasswordNode.matches(":-webkit-autofill")}catch(e){}return e}}]),t}(n.PureComponent);function lo(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(co,"propTypes",{login:s.a.string.isRequired,isLoading:s.a.bool.isRequired,captchaError:s.a.string,password:s.a.string,passwordError:s.a.string,nameError:s.a.string,isCaptchaShown:s.a.bool,formError:s.a.string,hash:s.a.string.isRequired,successAction:s.a.string,onRegistrationSubmit:s.a.func.isRequired,getCaptcha:s.a.func.isRequired,clearError:s.a.func.isRequired,onOpen:s.a.func}),babelHelpers.defineProperty(co,"defaultProps",{captchaError:"",password:"",passwordError:"",nameError:"",isCaptchaShown:!1,formError:"",onOpen:io});var uo=Object(i.connect)((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?lo(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lo(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["formError","passwordError","nameError","isCaptchaShown","isLoading","captchaError","login","successAction"])(e.common),{password:e.registration.password,hash:e.registration.hash,onOpen:cr.m})}),{onRegistrationSubmit:function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:j}),r.prev=1,r.next=4,o=Object($e.a)(["successAction","login"])(e),s=void 0,i=void 0,c=void 0,l=void 0,s=o.name,i=o.password,c=o.captcha,l={hash:o.hash,name:s,password:i},Object(nt.b)(c,l),Object(nt.h)("/registration/complete",l);case 4:n=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),t({type:I,payload:r.t0}),r.abrupt("return");case 11:if(t({type:G,response:n}),n.showCaptcha?t(ve()):t(_e()),!n.success){r.next=18;break}n.userInfo&&hr(Ma({},n.userInfo,{login:e.login}),De.o.REGISTRATION),window.PasswordCredential?(a=new window.PasswordCredential({id:e.login,password:e.password}),navigator.credentials.store(a).then((function(){Object(cr.s)(),Pt(t,e,n)}))):Pt(t,e,n),r.next=23;break;case 18:if(n.errors){r.next=22;break}return t(ke()),Object(Ur.a)(new Error("".concat(De.o.REGISTRATION,": Server invalid response")),{requestUrl:"/registration/complete",requestData:e,response:n}),r.abrupt("return");case 22:Wa(n,t);case 23:case"end":return r.stop()}var o,s,i,c,l}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()},getCaptcha:Ae,clearError:Re})(co);function po(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}var fo=function(e,r){var t;void 0===r&&(r=po);var n,a=[],o=!1;return function(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return o&&t===this&&r(s,a)||(n=e.apply(this,s),o=!0,t=this,a=s),n}},ho=t(9153),bo=t.n(ho),mo=t(4492),yo=t(10377),Oo=t.n(yo);function go(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Eo=function(e){babelHelpers.inherits(t,e);var r=go(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,r=e.className,t=e.size,n=hn()(r,Oo.a.avatar,babelHelpers.defineProperty({},Oo.a["avatar_size_"+t],t));return a.a.createElement("div",babelHelpers.extends({className:n,style:{backgroundImage:"url(".concat(this.props.url,")")}},Object(Sr.f)(this.props)))}}]),t}(n.Component);babelHelpers.defineProperty(Eo,"propTypes",{url:s.a.string.isRequired,className:s.a.string,size:s.a.oneOf(["s","m","l"]),marker:s.a.string}),babelHelpers.defineProperty(Eo,"defaultProps",{className:"",size:"s",marker:"avatar"});var Po=t(10378),vo=t.n(Po);function _o(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ro=function(e){babelHelpers.inherits(t,e);var r=_o(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{isTooltipOpen:!1}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleClick",(function(){e.props.onClick(e.props.user)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleDeleteClick",(function(){e.props.onDeleteClick(e.props.user)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleMouseLeave",(function(){e.setState({isTooltipOpen:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleMouseEnter",(function(){e.setState({isTooltipOpen:!0})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,r=e.user,t=r.avatar,n=(t=void 0===t?{}:t)["256x256"],o=t["176x176"],s=r.name,i=r.description,c=e.title,l=e.onDeleteClick;return a.a.createElement("div",{className:hn()(vo.a.root,babelHelpers.defineProperty({},vo.a.root_hover,Boolean(l))),"data-marker":this.props.marker},a.a.createElement(Tr.a,{marker:"".concat(this.props.marker,"/link"),onClick:this.handleClick},a.a.createElement("div",{className:vo.a["user__description-link"]},a.a.createElement(Eo,{className:vo.a.avatar,url:n||o,size:"s"}),a.a.createElement("div",{className:vo.a["user__description-container"]},a.a.createElement(kr.a,{size:"m",className:vo.a.name},c||s),a.a.createElement("div",{className:vo.a.user__description},a.a.createElement(kr.a,{size:"s"},i))))),Boolean(l)&&a.a.createElement(mo.a,{design:"dark",content:a.a.createElement("div",null,"РЈР±СЂР°С‚СЊ РїСЂРѕС„РёР»СЊ",a.a.createElement("br",null),"СЃ СЌС‚РѕР№ СЃС‚СЂР°РЅРёС†С‹"),placement:"bottom",open:this.state.isTooltipOpen},a.a.createElement("div",{className:vo.a.delete,"data-marker":"".concat(this.props.marker,"/delete"),onClick:this.handleDeleteClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})))}}]),t}(n.PureComponent);babelHelpers.defineProperty(Ro,"propTypes",{user:s.a.shape({avatar:s.a.shape({"256x256":s.a.string,"176x176":s.a.string}),name:s.a.string,description:s.a.string}).isRequired,onClick:s.a.func.isRequired,onDeleteClick:s.a.func,marker:s.a.string,title:s.a.string}),babelHelpers.defineProperty(Ro,"defaultProps",{marker:"user-account"});var Ao=t(10379),To=t.n(Ao);function Co(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function So(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ko=function(e){babelHelpers.inherits(t,e);var r=So(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleLoginAsUser",(function(r){e.props.onLoginAsUser(r)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCreateNewAccount",(function(){e.props.onCreateNewAccount({suggestKey:e.props.suggestKey,provider:e.props.socialProviderId,successAction:e.props.successAction})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",babelHelpers.extends({className:hn()(Nr.a.container,To.a.container)},Object(Sr.f)(this.props)),a.a.createElement(kr.a,babelHelpers.extends({className:hn()(Nr.a.title,To.a["users-list__title"]),size:"xl"},Object(Sr.f)(this.props,"login")),this.props.title),a.a.createElement(kr.a,babelHelpers.extends({className:To.a.description},Object(Sr.f)(this.props,"description")),this.props.description),this.renderUsersList(),this.renderCreateNewUserButton())}},{key:"renderUsersList",value:function(){var e=this,r=this.props.usersList;return a.a.createElement("div",null,r.map((function(r,t){return a.a.createElement("div",babelHelpers.extends({key:bo()({user:r,i:t}),className:To.a["users-list__user"]},Object(Sr.f)(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Co(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Co(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e.props,{markerId:t}),"user")),a.a.createElement(Ro,{user:r,title:r.title,marker:"user",onClick:e.handleLoginAsUser}))})))}},{key:"renderCreateNewUserButton",value:function(){return this.props.isRegistrationAvailable?a.a.createElement(Tr.a,babelHelpers.extends({className:To.a["users-list__add-button"]},Object(Sr.f)(this.props,"button"),{onClick:this.handleCreateNewAccount}),a.a.createElement("span",{className:To.a["users-list__add-button-icon"]}),a.a.createElement("span",babelHelpers.extends({className:To.a["users-list__add-button-link"]},Object(Sr.f)(this.props,"button-text")),"РЎРѕР·РґР°С‚СЊ РЅРѕРІС‹Р№ РїСЂРѕС„РёР»СЊ")):null}}]),t}(n.PureComponent);function Ho(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(ko,"propTypes",{title:s.a.string.isRequired,description:s.a.string.isRequired,usersList:s.a.array.isRequired,isRegistrationAvailable:s.a.bool,suggestKey:s.a.string,socialProviderId:s.a.string,successAction:s.a.string,onCreateNewAccount:s.a.func.isRequired,onLoginAsUser:s.a.func.isRequired,marker:s.a.string}),babelHelpers.defineProperty(ko,"defaultProps",{isRegistrationAvailable:!0,marker:"users-list"});var wo,jo=fo((function(e){return e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ho(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ho(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{title:"Р’РѕР№С‚Рё РєР°Рє ".concat(e.name)})}))})),Go=Object(i.connect)((function(e){return{title:e.common.login,description:"РњС‹".concat("В ","РЅР°С€Р»Рё ",1===e.registration.usersList.length?" СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ ":" СѓС‡С‘С‚РЅС‹Рµ Р·Р°РїРёСЃРё ","\n        СЃ","В ","С‚Р°РєРёРј РЅРѕРјРµСЂРѕРј С‚РµР»РµС„РѕРЅР°."),usersList:jo(e.registration.usersList),isRegistrationAvailable:e.registration.isRegistrationAvailable}}),{onCreateNewAccount:Xr,onLoginAsUser:function(e){return e.login?function(e){return{type:x.GO_TO_KNOWN_USER_LOGIN_PAGE,payload:{userAccount:e}}}(e):function(e){return{type:x.GO_TO_SOCIAL_AUTH_PAGE,payload:{userAccount:e}}}(e)}})(ko),Io=t(10380),No=t.n(Io),Lo=t(10381),Do=t.n(Lo),xo=t(10382),Uo=t.n(xo),Bo=t(10383),Fo=t.n(Bo),qo=t(10384),Mo=t.n(qo),zo=t(10385),Ko=t.n(zo);function Wo(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Vo=(wo={},babelHelpers.defineProperty(wo,Lt,No.a),babelHelpers.defineProperty(wo,Gt,Do.a),babelHelpers.defineProperty(wo,Dt,Uo.a),babelHelpers.defineProperty(wo,It,Fo.a),babelHelpers.defineProperty(wo,Nt,Ko.a),wo),$o=function(e){babelHelpers.inherits(t,e);var r=Wo(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleClick",(function(r){r.preventDefault();var t=xt[e.props.socialNetwork];e.props.onItemClick(t)})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.socialNetwork,r=Vo[e];return a.a.createElement("span",babelHelpers.extends({className:hn()(Mo.a.icon,Mo.a["icon_".concat(e)])},Object(Sr.f)({marker:"social-network-item",markerId:e}),{onClick:this.handleClick}),a.a.createElement("img",{src:r}))}}]),t}(a.a.PureComponent);babelHelpers.defineProperty($o,"propTypes",{socialNetwork:s.a.oneOf([Lt,Dt,It,Gt,Nt]).isRequired,onItemClick:s.a.func}),babelHelpers.defineProperty($o,"defaultProps",{onItemClick:function(){}});var Yo=$o,Qo=t(10386),Jo=t.n(Qo),Xo=t(3900),Zo=t.n(Xo);function es(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var rs={name:"socialAuth",url:"/social/login",popup:{scrollbars:"yes",resizable:"yes"},size:{vk:[590,560],ok:[590,560],fb:[590,560],gp:[590,560],apple:[720,560],default:[720,560]}},ts=function(e){var r,t=Bt(e),n=null!==(r=rs.size[t])&&void 0!==r?r:rs.size.default,a=babelHelpers.slicedToArray(n,2),o=a[0],s=a[1],i=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?es(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):es(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},rs.popup,{width:o,height:s,left:Math.round((screen.availWidth-o)/2),top:Math.round((screen.availHeight-s)/2)});return Object.keys(i).map((function(e){return e+"="+i[e]})).join(",")},ns=function(e){var r=window.open(void 0,rs.name,ts(e));return r.document.title="РџРµСЂРµРЅР°РїСЂР°РІР»РµРЅРёРµ",r.focus(),r};function as(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var os=function(e){var r=function(r){babelHelpers.inherits(o,r);var t,a=as(o);function o(){var e;babelHelpers.classCallCheck(this,o);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return e=a.call.apply(a,[this].concat(t)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSocialAuthOpen",(function(r){var t=r.socialProviderId,n=r.socialUserId,a=r.suggestKey;e.lastSocialAuthProviderId=t,e.props.onSocialAuthOpen(t,e.props.pageType),e.openSocialAuthPopup(t,n,a)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSocialAuthMessage",(function(r){switch(r.data.isSocialAuth&&e.closePopup(),r.data.type){case De.m:hr({name:r.data.payload.username,socialProviderId:e.lastSocialAuthProviderId,socialUserId:r.data.payload.socialUserId,avatar:r.data.payload.avatar,hashedUserId:r.data.payload.hashedUserId},De.o.SOCIAL),r.data.payload.message&&Wt(r.data.payload.message),Object(Br.a)(e.props.successAction);break;case De.k:e.props.onSocialSuggest({title:r.data.payload.title,accountList:r.data.payload.accountList,socialProviderId:e.lastSocialAuthProviderId,suggestKey:r.data.payload.suggestKey});break;case De.l:e.processError(r.data.payload.error);break;case De.n:e.props.onSocialWrongIdError(r.data.payload.errorLink)}})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSocialAuthPopupClose",(function(){e.props.onSocialAuthClose(e.state.lastSocialAuthProviderId),window.removeEventListener("message",e.handleSocialAuthMessage)})),e}return babelHelpers.createClass(o,[{key:"render",value:function(){return n.createElement(e,babelHelpers.extends({},this.props,{onSocialAuthOpen:this.handleSocialAuthOpen}))}},{key:"openSocialAuthPopup",value:function(e,r,t){this.closePopup(),this.openSocialAuthWindow({provider:e,socialUserId:r,suggestKey:t})}},{key:"subscribeToAuthEvents",value:function(){this.authPopup&&(window.addEventListener("message",this.handleSocialAuthMessage),window.addEventListener("close",this.handleSocialAuthPopupClose))}},{key:"processError",value:function(e){console.error(e),this.props.onSocialAuthError(e)}},{key:"openSocialAuthWindow",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(r){var t,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.provider,n=r.socialUserId,a=r.suggestKey,this.authPopup=ns(t),e.next=4,s={provider:t,socialUserId:n,fromHost:document.location.host,suggestKey:a},Object(nt.d)("/web/1/social/redirect",s);case 4:if(!(o=e.sent).error){e.next=9;break}return this.closePopup(),this.props.onSocialAuthError(o.error),e.abrupt("return");case 9:if(o.redirectUrl){e.next=13;break}return this.closePopup(),this.props.onSocialAuthError(),e.abrupt("return");case 13:this.authPopup&&(this.authPopup.location.href=o.redirectUrl),this.subscribeToAuthEvents();case 15:case"end":return e.stop()}var s}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"closePopup",value:function(){this.authPopup&&(this.authPopup.close(),delete this.authPopup)}}]),o}(n.Component);return babelHelpers.defineProperty(r,"defaultProps",{onSocialAuthOpen:function(){},onSocialAuthClose:function(){}}),Zo()(r,e),r.displayName=e.displayName||e.name,r.propTypes=e.propTypes,r.originComponent=e.originComponent||e,r.wrappedComponent=e,Object(i.connect)((function(e){return{isNewSocialAuth:e.common.isNewSocialAuth,successAction:e.common.successAction,onSocialAuthOpen:cr.q}}),{onSocialAuthError:Qr,onSocialWrongIdError:Jr,onSocialSuggest:rt})(Object(c.d)(r))};function ss(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var is=function(e){babelHelpers.inherits(t,e);var r=ss(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSocialAuthClick",(function(r){e.props.onSocialAuthOpen({socialProviderId:r,suggestKey:e.props.suggestKey})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",babelHelpers.extends({className:hn()(Jo.a.root,this.props.className)},Object(Sr.f)({marker:"social-auth"})),this.renderSocialLinks())}},{key:"renderSocialLinks",value:function(){var e=this;return this.props.socialNetworks.map((function(r){return a.a.createElement(Yo,{key:r,marker:"social-network-item",markerId:"social-network-item/item",socialNetwork:r,onItemClick:e.handleSocialAuthClick})}))}}]),t}(n.PureComponent);babelHelpers.defineProperty(is,"propTypes",{className:s.a.string,onSocialAuthOpen:s.a.func,suggestKey:s.a.string,socialNetworks:s.a.array.isRequired}),babelHelpers.defineProperty(is,"defaultProps",{className:"",onSocialAuthOpen:function(){}});var cs=os(is),ls=t(10387),us=t.n(ls);function ps(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var fs=function(e){babelHelpers.inherits(t,e);var r=ps(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen()}},{key:"render",value:function(){var e=this.props,r=e.socialNetworks,t=e.getToken,n=e.successAction,o=e.onSocialAuthError,s=e.showFooter,i=e.onFooterClick,c=e.pageType,l=e.onClose;return a.a.createElement("div",{"data-marker":"social-auth-page"},a.a.createElement("div",{className:hn()(Nr.a.container,us.a.container)},a.a.createElement(kr.a,{className:Nr.a.title,size:"xl",bold:!0},"Р’С…РѕРґ"),a.a.createElement(kr.a,{className:Nr.a.description},"Р’РѕР№РґРёС‚Рµ РІВ СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ С‡РµСЂРµР· РїСЂРёРІСЏР·Р°РЅРЅСѓСЋ СЃРѕС†РёР°Р»СЊРЅСѓСЋ СЃРµС‚СЊ."),a.a.createElement(cs,{socialNetworks:r,getToken:t,suggestKey:this.props.suggestKey,successAction:n,pageType:c,marker:"social-auth",onSocialAuthError:o,onSocialAuthClose:l})),s&&a.a.createElement(Gr,null,a.a.createElement(Tr.a,{marker:"login-form/footer-link",onClick:i},"Р’РѕР№С‚Рё РґСЂСѓРіРёРј СЃРїРѕСЃРѕР±РѕРј")))}}]),t}(n.PureComponent);babelHelpers.defineProperty(fs,"propTypes",{getToken:s.a.func.isRequired,onSocialAuthError:s.a.func.isRequired,socialNetworks:s.a.array.isRequired,successAction:s.a.string,pageType:s.a.string,suggestKey:s.a.string,showFooter:s.a.bool,onFooterClick:s.a.func,onOpen:s.a.func,onClose:s.a.func}),babelHelpers.defineProperty(fs,"defaultProps",{successAction:"",showFooter:!1,pageType:"",onFooterClick:function(){},onOpen:function(){},onClose:function(){}});var hs=t(10388),ds=t.n(hs);function bs(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ms=function(e){babelHelpers.inherits(t,e);var r=bs(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen()}},{key:"render",value:function(){var e=this.props,r=e.socialNetworks,t=e.getToken,n=e.successAction,o=e.onSocialAuthError,s=e.showFooter,i=e.onFooterClick,c=e.pageType,l=e.onClose,u=e.userAccount,p=e.footerText,f=e.userAccount.avatar,h=(f=void 0===f?{}:f)["256x256"],d=f["176x176"];return a.a.createElement("div",{"data-marker":"social-auth-page"},a.a.createElement("div",{className:hn()([Nr.a.container,ds.a.container])},h||d?a.a.createElement("div",{className:ds.a.avatar},a.a.createElement(Eo,{url:h||d,size:"l",className:ds.a.avatar})):null,a.a.createElement("div",{className:Nr.a.title},a.a.createElement(kr.a,{size:"xl"},u.name)),a.a.createElement("div",{className:Nr.a.description},a.a.createElement(kr.a,null,"Р’РѕР№РґРёС‚Рµ РІВ СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ С‡РµСЂРµР· РїСЂРёРІСЏР·Р°РЅРЅСѓСЋ СЃРѕС†РёР°Р»СЊРЅСѓСЋ СЃРµС‚СЊ.")),a.a.createElement(cs,{socialNetworks:r,getToken:t,successAction:n,pageType:c,marker:"social-auth",onSocialAuthError:o,onSocialAuthClose:l})),s&&a.a.createElement(Gr,null,a.a.createElement(Tr.a,{marker:"login-form/footer-link",onClick:i},p)))}}]),t}(n.PureComponent);babelHelpers.defineProperty(ms,"propTypes",{getToken:s.a.func.isRequired,onSocialAuthError:s.a.func.isRequired,socialNetworks:s.a.array.isRequired,successAction:s.a.string,pageType:s.a.string,footerText:s.a.string,showFooter:s.a.bool,onFooterClick:s.a.func,onOpen:s.a.func,onClose:s.a.func,userAccount:s.a.object.isRequired}),babelHelpers.defineProperty(ms,"defaultProps",{successAction:"",footerText:"Р’РѕР№С‚Рё РґСЂСѓРіРёРј СЃРїРѕСЃРѕР±РѕРј",showFooter:!0,pageType:"",onFooterClick:function(){},onOpen:function(){},onClose:function(){}});var ys=function(e){return e.userAccount&&e.userAccount.avatar?a.a.createElement(ms,e):a.a.createElement(fs,e)};function Os(e,r){return e.registration.userAccount&&e.registration.userAccount.social?e.registration.userAccount.social.map((function(e){return e.type})):[Bt(r.socialProviderId)]}ys.propTypes={userAccount:s.a.object};var gs=Object(i.connect)((function(e,r){return{socialNetworks:Os(e,r.userAccount),successAction:e.common.successAction,showFooter:Boolean(r.userAccount)}}),{onSocialAuthError:function(){}})(ys),Es=Object(c.d)(gs),Ps=t(4414),vs=t(10389),_s=t.n(vs);function Rs(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}function As(e){var r=function(e){return e.includes("@")?De.c:De.d}(e);return a.a.createElement("div",{className:hn()(Nr.a.description,_s.a.description)},a.a.createElement(kr.a,{marker:"login-form/description"},"Р”Р»СЏ РІС…РѕРґР° РІ СѓС‡С‘С‚РЅСѓСЋ Р·Р°РїРёСЃСЊ СЃ ",r===De.c?"РїСЂРёРІСЏР·Р°РЅРЅРѕР№ РїРѕС‡С‚РѕР№ ":"РїСЂРёРІСЏР·Р°РЅРЅС‹Рј РЅРѕРјРµСЂРѕРј ",a.a.createElement("br",null),a.a.createElement("b",{className:_s.a.login},e)," РІРІРµРґРёС‚Рµ РїР°СЂРѕР»СЊ."))}var Ts=function(e){babelHelpers.inherits(t,e);var r=Rs(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{passwordPristine:!0,captchaPristine:!0,captcha:"",password:"",remember:!0}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handlePasswordChange",(function(r){var t=r.value;e.props.passwordError&&e.props.clearError("passwordError"),e.setState({password:t,passwordPristine:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleChangeCaptcha",(function(r){var t=r.value;e.props.captchaError&&e.props.clearError("captchaError"),e.setState({captcha:t,captchaPristine:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCaptchaRefresh",(function(){e.props.getCaptcha(),e.setState({captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleExpireChange",(function(r){var t=r.checked;e.setState({remember:t})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleFormSubmit",(function(r){(0,r.preventDefault)(),e.props.captchaExecute()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleReCaptchaSuccess",(function(r){var t=e.props,n=t.successAction,a=t.userAccount.login,o=t.onLogin,s=t.suggestKey,i=e.state;o({login:a,password:i.password,captcha:i.captcha,remember:!0,extcaptchaValue:r,successAction:n,suggestKey:s})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleRestoreClick",(function(){var r=e.props,t=r.onRestoreClicked,n=r.source;t({login:r.userAccount.login,source:n})})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen(),this.props.initCaptcha(this.handleReCaptchaSuccess)}},{key:"componentDidUpdate",value:function(){(this.props.passwordError||this.props.loginError)&&!this.props.isLoading&&this.props.isExternalCaptchaEnabled&&this.props.resetCaptcha()}},{key:"render",value:function(){var e=this.props,r=e.formError,t=e.userAccount,n=e.footerText,o=e.onFooterClick,s=this.props.userAccount.avatar,i=(s=void 0===s?{}:s)["256x256"],c=s["176x176"];return a.a.createElement("div",{"data-marker":"login-form-with-avatar"},a.a.createElement("div",{className:Nr.a.container},a.a.createElement(Eo,{url:i||c,size:"l",className:_s.a.avatar}),a.a.createElement("div",{className:hn()(Nr.a.title,_s.a.username)},a.a.createElement(kr.a,{size:"xl",marker:"login-form/login"},t.name)),As(t.login),a.a.createElement(Pr.a,{marker:"login-form",layout:vr.b,noValidate:!0,error:r,onSubmit:this.handleFormSubmit},this.renderHiddenFakeLoginField(),this.renderPasswordField(),this.renderCaptcha(),this.renderRememberRow(),this.renderButton())),a.a.createElement(Gr,null,a.a.createElement(Tr.a,{noVisited:!0,marker:"login-form/footer-link",onClick:o},n)))}},{key:"renderHiddenFakeLoginField",value:function(){return a.a.createElement("input",{type:"text",name:"login",value:this.props.userAccount.login,readOnly:!0,style:{display:"none"}})}},{key:"renderPasswordField",value:function(){var e=this.state,r=e.passwordPristine,t=e.password,n=Boolean((this.props.passwordError||this.props.loginError)&&r)||Boolean(!r&&!t);return a.a.createElement(Pr.a.Fieldset,{error:n?this.props.passwordError||this.props.loginError:"",layout:vr.b},a.a.createElement(An.a,{className:"ym-hide-content",size:"m",autoFocus:!0,error:n,value:this.state.password,name:"password",autoComplete:"current-password",placeholder:"РџР°СЂРѕР»СЊ",marker:"login-form/password",onChange:this.handlePasswordChange}))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.captchaError;return e.isCaptchaShown?a.a.createElement(Pr.a.Fieldset,{error:r},a.a.createElement(Cr.a,{error:Boolean(r),marker:"login-form/captcha",value:this.state.captcha,imageSrc:this.props.captchaImg,onChange:this.handleChangeCaptcha,onRefresh:this.handleCaptchaRefresh})):null}},{key:"renderRememberRow",value:function(){return a.a.createElement(Pr.a.Fieldset,{layout:vr.b},a.a.createElement("div",{className:_s.a["row_space-between"]},a.a.createElement(Ps.a,{checked:this.state.remember,name:"remember",marker:"login-form/remember",onChange:this.handleExpireChange},"Р—Р°РїРѕРјРЅРёС‚СЊ РїР°СЂРѕР»СЊ"),a.a.createElement(Tr.a,{marker:"login-form/restore",onClick:this.handleRestoreClick},"Р—Р°Р±С‹Р»Рё РїР°СЂРѕР»СЊ?")))}},{key:"renderButton",value:function(){var e=this.props,r=e.isLoading,t=e.isCaptchaShown,n=e.passwordError,o=this.state,s=o.captcha,i=o.password,c=o.passwordPristine,l=!i||c&&Boolean(n)||t&&!s;return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement("div",{className:_s.a["submit-wrapper"]},a.a.createElement(Ar.a,{size:"m",marker:"login-form/submit",design:"primary",width:12,disabled:l,loading:r},"Р’РѕР№С‚Рё")))}}],[{key:"getDerivedStateFromProps",value:function(e){var r={};return!e.passwordError&&!e.loginError||e.isLoading||(r.passwordPristine=!0),e.captchaError&&!e.isLoading&&(r.captcha="",r.captchaPristine=!0),r}}]),t}(n.Component);function Cs(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ss(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Cs(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Cs(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}babelHelpers.defineProperty(Ts,"propTypes",{userAccount:s.a.object.isRequired,formError:s.a.string,passwordError:s.a.string,loginError:s.a.string,captchaError:s.a.string,isCaptchaShown:s.a.bool,isLoading:s.a.bool,footerText:s.a.string,successAction:s.a.string,captchaImg:s.a.string,source:s.a.string,suggestKey:s.a.string,onOpen:s.a.func,clearError:s.a.func.isRequired,getCaptcha:s.a.func.isRequired,onLogin:s.a.func.isRequired,onFooterClick:s.a.func.isRequired,onRestoreClicked:s.a.func.isRequired,initCaptcha:s.a.func,captchaExecute:s.a.func,resetCaptcha:s.a.func,isExternalCaptchaEnabled:s.a.bool}),babelHelpers.defineProperty(Ts,"defaultProps",{formError:"",passwordError:"",loginError:"",captchaError:"",isCaptchaShown:!1,isLoading:!1,successAction:"",footerText:"",captchaImg:"",onOpen:function(){}});var ks={onLogin:Qt,goToFoundUsersList:Zr,clearError:Re,getCaptcha:Ae,onRestoreClicked:Yr},Hs=Object(i.connect)((function(e){return Ss({},Object(Er.a)(["formError","loginError","isCaptchaShown","captchaError","passwordError","captchaImg","isLoading"])(e.common),{userAccount:e.registration.userAccount,isRegistrationAvailable:e.registration.isRegistrationAvailable,usersList:e.registration.usersList,onOpen:cr.n,footerText:"Р’С‹Р±СЂР°С‚СЊ РґСЂСѓРіРѕР№ РїСЂРѕС„РёР»СЊ"})}),ks,(function(e,r,t){return Ss({},e,{},t,{},r,{onFooterClick:function(){return r.goToFoundUsersList(e.usersList,e.isRegistrationAvailable)},onRestoreClicked:function(){return r.onRestoreClicked({source:t.source})}})}))(Object(sn.a)(Ts));function ws(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var js=function(e){babelHelpers.inherits(t,e);var r=ws(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props.location,r="/registration".concat((null==e?void 0:e.search)?"?"+(null==e?void 0:e.search):"");return a.a.createElement("div",{className:Nr.a.container,"data-marker":"registration-error-container"},a.a.createElement(Pr.a,{marker:"registration-error",title:{text:"РћС€РёР±РєР° РїСЂРё СЂРµРіРёСЃС‚СЂР°С†РёРё",align:"center"},description:this.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Qn,{size:"m",href:r,design:"primary",marker:"registration-error/button"},"РџРѕРІС‚РѕСЂРёС‚СЊ"))))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"registration-error/message"},a.a.createElement("span",{className:Nr.a.center},"РќРµВ СѓРґР°Р»РѕСЃСЊ Р·Р°РІРµСЂС€РёС‚СЊ СЂРµРіРёСЃС‚СЂР°С†РёСЋ РёР·-Р·Р° РѕС€РёР±РєРё СЃРµСЂРІРµСЂР°. РџРѕРїСЂРѕР±СѓР№С‚Рµ Р·Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊСЃСЏ РїРѕР·Р¶Рµ."))}}]),t}(n.PureComponent);babelHelpers.defineProperty(js,"propTypes",{location:s.a.object});var Gs=Object(i.connect)((function(e){return{location:e.location}}))(js);function Is(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ns=function(e){babelHelpers.inherits(t,e);var r=Is(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleClick",(function(r){r.preventDefault();var t=e.props,n=t.hash;(0,t.fetchUsersList)({hash:n})})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"users-list-error-container"},a.a.createElement(Pr.a,{marker:"users-list-error",title:{text:"РћС€РёР±РєР°",align:"center"},description:t.renderMessage(),layout:vr.b},a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement(Ar.a,{size:"m",design:"primary",marker:"users-list-error/button",onClick:this.handleClick},"РџРѕРІС‚РѕСЂРёС‚СЊ"))))}}],[{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"users-list-error/message"},a.a.createElement("span",{className:Nr.a.center},"РќРµВ СѓРґР°Р»РѕСЃСЊ Р·Р°РіСЂСѓР·РёС‚СЊ СЃРїРёСЃРѕРє РїСЂРѕС„РёР»РµР№ СЃВ СѓРєР°Р·Р°РЅРЅС‹Рј РЅРѕРјРµСЂРѕРј."))}}]),t}(n.PureComponent);function Ls(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}babelHelpers.defineProperty(Ns,"propTypes",{hash:s.a.string.isRequired,fetchUsersList:s.a.func.isRequired});var Ds=Object.keys(rr).concat(""),xs=function(e){babelHelpers.inherits(t,e);var r=Ls(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"render",value:function(){var e=this.props,r=e.page,t=e.experimentsValues,n=e.hash,o=e.fetchUsersList;switch(r){case rr.REGISTRATION_MAIN_PAGE:return a.a.createElement(Ya,{experimentsValues:t,marker:"registration-main-page"});case rr.REGISTRATION_CHECK_CODE_PAGE:return a.a.createElement(oo,{marker:"registration-phone-code",onChangeNumber:this.props.goToRegistrationMainPage});case rr.REGISTRATION_SET_PASSWORD_PAGE:return a.a.createElement(uo,{marker:"registration-set-password"});case rr.FOUND_USERS_LIST_PAGE:return a.a.createElement(Go,{marker:"registration-found-users-list"});case rr.REGISTRATION_ERROR_PAGE:return a.a.createElement(Gs,{marker:"registration-error-page"});case rr.REGISTRATION_ADD_PHONE_PAGE:return a.a.createElement(no,{experimentsValues:t,marker:"registration-main-page"});case rr.USERS_LIST_ERROR_PAGE:return a.a.createElement(Ns,{marker:"users-list-error-page",hash:n,fetchUsersList:o});case rr.SOCIAL_AUTH_PAGE:return a.a.createElement(Es,{marker:"social-auth-page"});case rr.KNOWN_USER_LOGIN_PAGE:return a.a.createElement(Hs,{marker:"KnownUserLoginPage",source:"registration"});default:return null}}}]),t}(n.PureComponent);babelHelpers.defineProperty(xs,"propTypes",{page:s.a.oneOf(Ds),hash:s.a.string.isRequired,fetchUsersList:s.a.func.isRequired,goToRegistrationMainPage:s.a.func.isRequired,experimentsValues:s.a.instanceOf(Map)});var Us=Object(i.connect)((function(e){return{page:e.page.name,login:e.common.login,hash:e.registration.hash,restoreType:e.common.restoreType,location:e.location,reasonText:e.location.payload&&e.location.payload.reasonText||e.auth.loginErrors&&e.auth.loginErrors.reasonBlockedText}}),{setLogin:Ce,goToRegistrationMainPage:function(){return{type:x.GO_TO_REGISTRATION_MAIN_PAGE,payload:{to:"/registration"}}},goToRegistrationAddPhonePage:zr,fetchUsersList:Ka})(xs);function Bs(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Fs(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Bs(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bs(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var qs=Object(i.connect)((function(e){return{successAction:e.common.successAction,antihackByPhone:e.common.antihackByPhone,remember:e.auth.remember,onOpen:function(e){return Object(cr.l)(e,De.o.AUTH)}}}),{onResendCode:wt,onSendPhoneCode:function(e,r){return{types:[j,G,I],fetching:st(Object($e.a)(["remember"])(e)),callback:function(t,n){t.success?n(function(e){return{types:[j,G,I],fetching:ft(e),callback:function(r,t){r.success?(t(Vr()),Object(Br.a)(e.successAction)):Rt(r.errors,t,{login:e.login,restoreType:r.restoreType,message:r.message})}}}(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Xt(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({successAction:r},e))):Rt(t.errors,n),t.timer&&n(je(t.timer))}}},onResendAntihackCode:jt,onSendAntihackCode:en},(function(e,r,t){return Fs({},Object($e.a)(["successAction","remember"])(e),{},r,{},t,{onSendPhoneCode:function(t){return r.onSendPhoneCode(Fs({},t,{remember:e.remember}),e.successAction)},onResendCode:function(e){return r.onResendCode(Fs({},e,{retry:!0}))},onSendAntihackCode:function(t){return r.onSendAntihackCode(Fs({},t,{remember:e.remember}),e.successAction)},onResendAntihackCode:function(e){return r.onResendAntihackCode(Fs({},e,{retry:!0}))}})}))(_n);function Ms(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function zs(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ms(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ms(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ks=Object(i.connect)((function(e){return{successAction:e.common.successAction,antihackByPhone:e.common.antihackByPhone,remember:e.auth.remember,onOpen:function(e){return Object(cr.l)(e,De.o.AUTH)}}}),{onResendCode:jt,onSendPhoneCode:en},(function(e,r,t){return zs({},Object($e.a)(["successAction","remember"])(e),{},r,{},t,{onSendPhoneCode:function(t){return r.onSendPhoneCode(zs({},t,{challengeId:e.antihackByPhone.challengeId,remember:e.remember}),e.successAction)},onResendCode:function(e){return r.onResendCode(zs({},e,{retry:!0}))}})}))(_n);var Ws=t(10390),Vs=t.n(Ws);function $s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var Ys={onLogin:Qt,goToLoginPage:Wr,clearError:Re,getCaptcha:Ae,onRestoreClicked:Yr},Qs=Object(i.connect)((function(e,r){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?$s(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["formError","loginError","isCaptchaShown","passwordError","captchaError","captchaImg","isLoading"])(e.common),{successAction:e.common.successAction,footerText:r.footerText||"Р’РѕР№С‚Рё РґСЂСѓРіРёРј СЃРїРѕСЃРѕР±РѕРј"})}),Ys)(Object(sn.a)(Ts)),Js=Object.freeze({"Р№":"q","С†":"w","Сѓ":"e","Рє":"r","Рµ":"t","РЅ":"y","Рі":"u","С€":"i","С‰":"o","Р·":"p","С…":"[","СЉ":"]","С„":"a","С‹":"s","РІ":"d","Р°":"f","Рї":"g","СЂ":"h","Рѕ":"j","Р»":"k","Рґ":"l","Р¶":";","СЌ":"'","СЏ":"z","С‡":"x","СЃ":"c","Рј":"v","Рё":"b","С‚":"n","СЊ":"m","Р±":",","СЋ":"."});function Xs(e){return Array.from(e).map((function(e){var r,t,n=e,a=function(e,r){var t=e.toLowerCase();return r[t]}(e,Js);return a&&(t=a,n=(r=e)===r.toLowerCase()?t:t.toUpperCase()),n})).join("")}var Zs=t(10391),ei=t.n(Zs);function ri(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ti(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var ni=function(e){return e&&e.replace(/\s/g,"").length>0},ai=function(e){babelHelpers.inherits(t,e);var r=ti(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{loginPristine:!0,passwordPristine:!0,captchaPristine:!0,remember:!0,login:e.props.login,password:e.props.password,captcha:""}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCaptchaRefresh",(function(){e.props.getCaptcha(),e.setState({captchaPristine:!0,captcha:""})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCaptchaChange",(function(r){var t=r.value;e.props.captchaError&&e.props.clearError("captchaError"),e.setState({captcha:t,captchaPristine:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleLoginChange",(function(r){var t=r.value;e.props.loginError&&e.props.clearError("loginError"),e.setState({login:t,loginPristine:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handlePasswordChange",(function(r){var t=r.value;e.props.passwordError&&e.props.clearError("passwordError"),e.setState({password:Xs(t),passwordPristine:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleExpireChange",(function(r){var t=r.checked;e.setState({remember:t})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleRestoreClick",(function(){e.props.onRestoreClick()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSubmit",(function(r){(0,r.preventDefault)(),e.submit()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCaptchaSuccess",(function(r){var t=e.props.successAction,n=e.state,a=n.login,o=n.password,s=n.captcha,i=n.remember;e.props.onLogin({login:a,password:o,captcha:s,remember:i,extcaptchaValue:r,successAction:t})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"submit",(function(){e.props.isExternalCaptchaEnabled?e.props.captchaExecute():e.handleCaptchaSuccess()})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){(0,this.props.initCaptcha)(this.handleCaptchaSuccess)}},{key:"componentDidUpdate",value:function(e){this.props.isExternalCaptchaEnabled&&(this.props.loginError&&!e.loginError||this.props.passwordError&&!e.passwordError||this.props.formError&&!e.formError)&&this.props.resetCaptcha(),e.login!==this.props.login&&this.setState({login:this.props.login,password:this.props.password||this.state.password})}},{key:"render",value:function(){var e=this.props,r=e.formError,t=e.heading,n=e.description,o=n?a.a.createElement(kr.a,{marker:"auth-form/description",size:"xs",tagName:"span",className:ei.a.description},n):"";return a.a.createElement(Pr.a,{title:{text:t,align:"center"},action:"/profile/login",description:o,error:r,className:ei.a.root,marker:"login-form",onSubmit:this.handleSubmit},a.a.createElement("div",{className:"ym-hide-content"},this.renderLoginField(),this.renderPasswordField(),this.renderRememberField()),this.renderCaptcha(),this.renderSubmit())}},{key:"renderLoginField",value:function(){var e=this.props.loginError,r=this.state,t=r.login,n=r.loginPristine,o=ni(t),s=e&&n||!n&&!o;return a.a.createElement(Pr.a.Fieldset,{error:s?this.props.loginError:"",layout:vr.b},a.a.createElement(_r.a,{value:t,size:"m",error:s,autoFocus:!0,name:"login",placeholder:"РўРµР»РµС„РѕРЅ РёР»Рё СЌР»РµРєС‚СЂРѕРЅРЅР°СЏ РїРѕС‡С‚Р°",marker:"login-form/login",onChange:this.handleLoginChange}))}},{key:"renderPasswordField",value:function(){var e=this.props.passwordError,r=this.state,t=r.passwordPristine,n=r.password,o=ni(n),s=e&&t||!t&&!o;return a.a.createElement(Pr.a.Fieldset,{error:s?e:"",layout:vr.b},a.a.createElement(An.a,{size:"m",error:s,placeholder:"РџР°СЂРѕР»СЊ",value:n,name:"password",autoComplete:"current-password",marker:"login-form/password",onChange:this.handlePasswordChange}))}},{key:"renderRememberField",value:function(){var e=this.state.remember;return a.a.createElement(Pr.a.Fieldset,{layout:vr.b},a.a.createElement("div",{className:ei.a["row_space-between"]},a.a.createElement(Ps.a,{checked:e,name:"remember",marker:"login-form/remember",onChange:this.handleExpireChange},"Р—Р°РїРѕРјРЅРёС‚СЊ РїР°СЂРѕР»СЊ"),a.a.createElement(Tr.a,{marker:"login-form/restore",onClick:this.handleRestoreClick},"Р—Р°Р±С‹Р»Рё РїР°СЂРѕР»СЊ?")))}},{key:"renderCaptcha",value:function(){var e=this.props,r=e.isCaptchaShown,t=e.captchaError,n=e.captchaImg,o=this.state,s=o.captcha,i=o.captchaPristine;return r?a.a.createElement(Pr.a.Fieldset,{error:t&&i?t:"",layout:vr.b},a.a.createElement(Cr.a,{value:s,error:Boolean(t)&&i,imageSrc:n,marker:"login-form/captcha",onRefresh:this.handleCaptchaRefresh,onChange:this.handleCaptchaChange})):null}},{key:"renderSubmit",value:function(){var e=this.shouldDisableSubmitButton();return a.a.createElement(Pr.a.Action,{align:"center",layout:vr.b},a.a.createElement("div",{className:ei.a["auth-form__submit"]},a.a.createElement(Ar.a,{design:"primary",disabled:e,type:"submit",name:"submit",size:"m",width:12,loading:this.props.isLoading,marker:"login-form/submit"},"Р’РѕР№С‚Рё")))}},{key:"shouldDisableSubmitButton",value:function(){var e=this.state,r=e.login,t=e.password,n=e.captcha,a=e.passwordPristine,o=e.loginPristine,s=this.props,i=s.isCaptchaShown,c=s.passwordError,l=s.loginError,u=ni(r),p=ni(t);return!u||!p||c&&a||l&&o||i&&!n}}],[{key:"getDerivedStateFromProps",value:function(e,r){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ri(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ri(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},r);return e.passwordError&&(t.passwordPristine=!0),e.loginError&&(t.loginPristine=!0),e.captchaError&&(t.captchaPristine=!0),t}}]),t}(n.PureComponent);babelHelpers.defineProperty(ai,"propTypes",{isLoading:s.a.bool,login:s.a.string,loginError:s.a.string,captchaError:s.a.string,formError:s.a.string,heading:s.a.string,description:s.a.string,password:s.a.string,passwordError:s.a.string,isCaptchaShown:s.a.bool,successAction:s.a.string,captchaImg:s.a.string,onLogin:s.a.func.isRequired,onRestoreClick:s.a.func,clearError:s.a.func.isRequired,getCaptcha:s.a.func.isRequired,isExternalCaptchaEnabled:s.a.bool.isRequired,initCaptcha:s.a.func.isRequired,captchaExecute:s.a.func.isRequired,resetCaptcha:s.a.func.isRequired}),babelHelpers.defineProperty(ai,"defaultProps",{password:"",heading:"Р’С…РѕРґ",isCaptchaShown:!1,onRestoreClick:function(){}});var oi={messengerAuthOnboarding:new(function(){function e(r,t){babelHelpers.classCallCheck(this,e),this.alias=r,Object.assign(this,t)}return babelHelpers.createClass(e,[{key:"toString",value:function(){return this.alias}}]),e}())("messengerAuthOnboarding",{long_explanation:"long_explanation",short_explanation:"short_explanation"})};function si(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ii(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?si(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):si(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ci={onLogin:Qt,getCaptcha:Ae,clearError:Re,goToRestoreLoginPage:Yr},li=Object(i.connect)((function(e){return ii({},Object(Er.a)(["login","loginError","captchaError","captchaImg","formError","isLoading","successAction","passwordError","isCaptchaShown"])(e.common),{},function(e){var r=e.location.query,t=oi.messengerAuthOnboarding.alias;if((r&&r.s||e.common.source)===De.f&&e.experiments[t]){if(e.experiments[t].label===oi.messengerAuthOnboarding.long_explanation)return{description:"РћС‚РїСЂР°РІР»СЏС‚СЊ СЃРѕРѕР±С‰РµРЅРёСЏ РјРѕРіСѓС‚ С‚РѕР»СЊРєРѕ Р·Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°РЅРЅС‹Рµ РїРѕР»СЊР·РѕРІР°С‚РµР»Рё.",heading:"Р’РѕР№РґРёС‚Рµ"};if(e.experiments[t].label===oi.messengerAuthOnboarding.short_explanation)return{heading:"Р’РѕР№РґРёС‚Рµ, С‡С‚РѕР±С‹ РЅР°РїРёСЃР°С‚СЊВ СЃРѕРѕР±С‰РµРЅРёРµ"}}return{heading:"Р’С…РѕРґ"}}(e))}),ci,(function(e,r,t){return ii({},e,{},r,{},t,{onRestoreClick:function(){r.goToRestoreLoginPage({login:e.login,source:t.source}),Object(cr.j)()}})}))(Object(sn.a)(ai)),ui=t(10392),pi=t.n(ui);function fi(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var hi=[Gt,It,Nt,Lt,Dt],di=function(e){babelHelpers.inherits(t,e);var r=fi(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleRegistrationClick",(function(){e.props.onRegistrationClick()})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen()}},{key:"render",value:function(){var e=this.props,r=e.successAction,t=e.onSocialAuthPopupOpen,n=e.onSocialAuthError,o=e.password,s=e.login,i=e.location,c="/registration".concat((null==i?void 0:i.search)?"?"+(null==i?void 0:i.search):"");return a.a.createElement("div",{"data-marker":"auth-app-root"},a.a.createElement("div",{className:pi.a["login-form"]},a.a.createElement(li,{source:this.props.source,login:s,password:o}),a.a.createElement("span",{className:pi.a["social-auth-text"]},"РёР»Рё РїСЂРѕРґРѕР»Р¶РёС‚СЊ С‡РµСЂРµР·"),a.a.createElement(cs,{socialNetworks:hi,className:pi.a.social_auth,marker:"social-auth-root",successAction:r,onSocialAuthPopupOpen:t,onSocialAuthError:n})),a.a.createElement("div",babelHelpers.extends({className:pi.a["registration-block"]},Object(Sr.f)({marker:"registration-block"})),a.a.createElement("span",{className:pi.a["registration-link"]},a.a.createElement(Ln,{href:c,marker:"registration-link",onClick:this.handleRegistrationClick},"Р—Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊСЃСЏ")),a.a.createElement("div",{className:pi.a.agreement},"РџСЂРё РІС…РѕРґРµ РІС‹ РїРѕРґС‚РІРµСЂР¶РґР°РµС‚Рµ СЃРѕРіР»Р°СЃРёРµ СЃВ ",a.a.createElement(Tr.a,{href:"https://support.avito.ru/articles/200026948",noVisited:!0},a.a.createElement("span",{className:pi.a.agreement__link},"СѓСЃР»РѕРІРёСЏРјРё РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЏ РђРІРёС‚Рѕ")),"В РёВ ",a.a.createElement(Tr.a,{href:"/safety/personal/company",noVisited:!0},a.a.createElement("span",{className:pi.a.agreement__link},"РїРѕР»РёС‚РёРєРѕР№ РѕВ РґР°РЅРЅС‹С… РїРѕР»СЊР·РѕРІР°С‚РµР»РµР№.")))))}}]),t}(n.PureComponent);function bi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}babelHelpers.defineProperty(di,"propTypes",{login:s.a.string,password:s.a.string,source:s.a.string,successAction:s.a.string,location:s.a.object,onSocialAuthError:s.a.func.isRequired,onSocialAuthPopupOpen:s.a.func.isRequired,onOpen:s.a.func.isRequired,onRegistrationClick:s.a.func}),babelHelpers.defineProperty(di,"defaultProps",{login:"",password:"",source:"auth",successAction:"",onRegistrationClick:function(){}});var mi=Object(i.connect)((function(e){return{successAction:e.common.successAction,onSocialAuthPopupOpen:cr.q,location:e.location,source:e.common.source,experiments:e.experiments,onRegistrationClick:cr.i}}),{onSocialAuthError:Qr,setPopupSource:Ge,goToRestoreLoginPage:Yr},(function(e,r,t){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?bi(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object($e.a)(["experimentsValues","source","setPopupSource"])(e),{},r,{},t,{onOpen:function(){var t=e.location.query&&(e.location.query.authsrc||e.location.query.s),n=t||e.source;t&&r.setPopupSource(t),Object(cr.k)(n)}})}))(di),yi=t(10393),Oi=t.n(yi);function gi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ei(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?gi(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Pi(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var vi=function(e){babelHelpers.inherits(t,e);var r=Pi(t);function t(){return babelHelpers.classCallCheck(this,t),r.apply(this,arguments)}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.props.onOpen()}},{key:"render",value:function(){var e=this,r=this.props,t=r.headerText,o=r.logins.sort((function(e,r){return r.last&&e.last?r.last-e.last:1}));return a.a.createElement(n.Fragment,null,a.a.createElement("div",{"data-marker":this.props.marker,className:Oi.a.root},a.a.createElement("div",{className:Oi.a.header},a.a.createElement(kr.a,{size:"xl",tagName:"div",bold:!0,className:Oi.a.title},t||"Р’С…РѕРґ")),a.a.createElement("div",{className:Oi.a.list},o.map((function(r){return a.a.createElement("div",{key:r.userAuthMemoId,className:Oi.a["user-account"]},a.a.createElement(Ro,{user:Ei({},r,{description:(t=r,t&&t.socialProviderId?Ft(Bt(t.socialProviderId)):t.login)}),marker:"".concat(e.props.marker,"/link"),onClick:e.props.onAccountClick,onDeleteClick:e.props.onDeleteAccount}));var t})))),a.a.createElement(Gr,null,a.a.createElement(Tr.a,{marker:"".concat(this.props.marker,"/footer-link"),onClick:this.props.onFooterClick},"Р’РѕР№С‚Рё РІ РґСЂСѓРіРѕР№ РїСЂРѕС„РёР»СЊ")))}}]),t}(n.PureComponent);babelHelpers.defineProperty(vi,"propTypes",{logins:s.a.array,marker:s.a.string,onAccountClick:s.a.func.isRequired,onFooterClick:s.a.func.isRequired,onDeleteAccount:s.a.func,headerText:s.a.string,onOpen:s.a.func}),babelHelpers.defineProperty(vi,"defaultProps",{onOpen:function(){}});function _i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ri(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_i(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Ai(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ti=function(e){babelHelpers.inherits(t,e);var r=Ai(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{login:"",password:"",isSuggestShown:!1,isSmartLockEnabled:!0,selectedAccount:void 0}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleShowList",(function(){e.setState({isSuggestShown:!0,selectedAccount:void 0}),e.props.onFooterClick()})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleDeleteAccount",(function(r){e.props.onDeleteAccount(r)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleCancelSuggest",(function(){e.props.onCancel(),e.setState({selectedAccount:void 0,isSuggestShown:!1,isSmartLockEnabled:!1})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSelectAccount",(function(r){r.socialProviderId?e.props.onSocialAuthOpen({socialProviderId:r.socialProviderId,socialUserId:r.socialUserId}):e.setState({selectedAccount:r}),e.props.onSelectAccount(r)})),e}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.state.isSmartLockEnabled&&this.getCredentialsFromSmartLock(),this.props.lastLogin.length&&this.props.onSuggestPossible({accountsNumber:this.props.lastLogin.length})}},{key:"componentDidUpdate",value:function(e,r){!r.isSmartLockEnabled&&this.state.isSmartLockEnabled&&this.getCredentialsFromSmartLock()}},{key:"render",value:function(){var e=this.state,r=e.isSuggestShown,t=e.selectedAccount,n=this.props.lastLogin;if(this.state.isLoading)return a.a.createElement(mi,{login:this.state.login||"",password:this.state.password||"",usePasswordCredential:!1,marker:"auth-form"});if(this.props.disableSuggest||!r||0===n.length)return a.a.createElement(mi,babelHelpers.extends({},this.props,{login:this.state.login||"",password:this.state.password||"",marker:"auth-form"}));if(t&&!t.socialProviderId){var o=this.props.lastLogin.length>1?"Р’РµСЂРЅСѓС‚СЊСЃСЏ Рє СЃРїРёСЃРєСѓ":void 0,s=this.props.lastLogin.length>1?this.handleShowList:this.handleCancelSuggest;return a.a.createElement(Qs,{userAccount:t,source:"suggest",footerText:o,marker:"auth-with-avatar-page",onFooterClick:s})}return 1!==this.props.lastLogin.length||this.props.lastLogin[0].socialProviderId?a.a.createElement(vi,{logins:n,marker:"user-list-logins",onAccountClick:this.handleSelectAccount,onDeleteAccount:this.handleDeleteAccount,onFooterClick:this.handleCancelSuggest}):a.a.createElement(mi,{login:this.props.lastLogin[0].login,marker:"auth-form"})}},{key:"getCredentialsFromSmartLock",value:function(){var e=this;this.setState({isLoading:!0}),(window.PasswordCredential?navigator.credentials.get({password:!0}).then((function(e){return e&&"password"===e.type?Promise.resolve(e):Promise.reject()})):Promise.reject()).then((function(r){Object(cr.r)(),e.setState({isLoading:!1,isSuggestShown:!1,login:r.id,password:r.password})})).catch((function(){e.setState({isLoading:!1,isSuggestShown:!0})}))}}]),t}(n.Component);babelHelpers.defineProperty(Ti,"propTypes",{lastLogin:s.a.array,disableSuggest:s.a.bool,onSocialAuthOpen:s.a.func.isRequired,onCancel:s.a.func.isRequired,onDeleteAccount:s.a.func.isRequired,onSelectAccount:s.a.func.isRequired,onFooterClick:s.a.func.isRequired,onSuggestPossible:s.a.func.isRequired});var Ci=os(Object(i.connect)((function(e){return{lastLogin:e.auth.lastLogin||[],source:e.common.source,onFooterClick:cr.a,onCancel:cr.e,onSelectAccount:cr.t}}),(function(e){return{onDeleteAccount:function(r){var t;e((t=r.userAuthMemoId,{type:A,payload:{userAuthMemoId:t}})),function(e){var r=fr.getAll();r&&(delete r.data[e],fr.save(r))}(r.userAuthMemoId),Object(cr.d)(r)}}}),(function(e,r,t){return Ri({},e,{},r,{},t,{onSuggestPossible:function(e){Object(cr.h)(Ri({},e))}})}))(Ti)),Si=t(10394),ki=t.n(Si);function Hi(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var wi=function(e){babelHelpers.inherits(t,e);var r=Hi(t);function t(){var e;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"state",{phone:""}),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleChangePhone",(function(r){var t=r.value;e.props.antihackError&&e.props.clearError("antihackError"),e.setState({phone:t.replace(/\s/g,"")})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleSubmitForm",(function(r){(0,r.preventDefault)(),e.props.onSubmit(e.state.phone)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"handleBackClicked",(function(){(0,e.props.onBack)()})),e}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"antihack-page"},a.a.createElement(Pr.a,{marker:"antihack-page/form",layout:vr.b,title:{text:"Р‘РµР·РѕРїР°СЃРЅС‹Р№ РІС…РѕРґ",align:"center"},description:this.renderMessage(),noValidate:!0,error:this.props.formError,onSubmit:this.handleSubmitForm},this.renderPhoneField(),this.props.antihackError&&this.renderError(),this.renderButton()))}},{key:"renderMessage",value:function(){return a.a.createElement(kr.a,{marker:"antihack-page/description"},a.a.createElement("span",{className:hn()(Nr.a.center,ki.a.description)},"РџРѕР¶Р°Р»СѓР№СЃС‚Р°, РІРІРµРґРёС‚Рµ РїРѕСЃР»РµРґРЅРёРµ С‡РµС‚С‹СЂРµ С†РёС„СЂС‹ РЅРѕРјРµСЂР° С‚РµР»РµС„РѕРЅР°."))}},{key:"renderPhoneField",value:function(){var e=this.props,r=e.phoneMask,t=e.antihackError,n=this.state.phone;return a.a.createElement("div",{className:ki.a.root},a.a.createElement(kr.a,{size:"m",marker:"antihack-page/phone-mask"},a.a.createElement("div",{className:ki.a["phone-mask"]},"".concat(r,"В "))),a.a.createElement(Pr.a.Fieldset,null,a.a.createElement("div",{className:ki.a["phone-input"]},a.a.createElement(_r.a,{className:"ym-hide-content",size:"m",textAlign:"left",autoComplete:"off",maxLength:4,inputMode:"numeric",error:Boolean(t),marker:"antihack-page/input",autoFocus:!0,value:n,name:"phone",onChange:this.handleChangePhone}))))}},{key:"renderButton",value:function(){var e=this.props,r=e.isLoading,t=e.antihackError,o=e.hasBackButton,s=this.state.phone,i=!s||s.length<4||Boolean(t);return a.a.createElement(Pr.a.Action,{align:"center"},a.a.createElement("div",{className:ki.a.buttons},o?a.a.createElement(n.Fragment,null,a.a.createElement(Ar.a,{className:ki.a.back,size:"m",fullWidth:!0,marker:"antihack-page/back-button",onClick:this.handleBackClicked},"РќР°Р·Р°Рґ Рє СЃРїРёСЃРєСѓ"),a.a.createElement(Ar.a,{size:"m",fullWidth:!0,marker:"antihack-page/button",design:"primary",disabled:i,loading:r},"РџРѕРґС‚РІРµСЂРґРёС‚СЊ")):a.a.createElement(Ar.a,{size:"m",marker:"antihack-page/button",design:"primary",disabled:i,loading:r},"РџРѕРґС‚РІРµСЂРґРёС‚СЊ")))}},{key:"renderError",value:function(){return a.a.createElement(kr.a,{className:ki.a.error},this.props.antihackError)}}]),t}(n.Component);function ji(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Gi(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ji(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ji(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Ii(e,r){return"".concat(r.replace(/\D/g,"")).concat(e)}babelHelpers.defineProperty(wi,"propTypes",{isLoading:s.a.bool.isRequired,phoneMask:s.a.string.isRequired,onSubmit:s.a.func.isRequired,clearError:s.a.func.isRequired,formError:s.a.string,antihackError:s.a.string,hasBackButton:s.a.bool,onBack:s.a.func}),babelHelpers.defineProperty(wi,"defaultProps",{formError:"",antihackError:""});var Ni=Object(i.connect)((function(e){return Gi({},Object(Er.a)(["isLoading","challengeId","phoneMask","formError","antihackError","login"])(e.common),{phoneMask:(r=e.common.phoneMask||e.common.phoneList[0],r.replace(/[\s-*+]/gi,"").replace(/(\d)(\d{3})(\d{3})/,"+$1В $2В $3В -"))});var r}),{onSubmit:function(e){return{types:[j,G,I],fetching:ht(e),callback:function(r,t){r.success?(t(Vr()),Object(Br.a)(e.successAction)):Rt(r.errors,t,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Jt(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{restoreType:r.restoreType||e.restoreType,message:r.message||e.message}))}}},onBack:et,clearError:Re},(function(e,r,t){return Gi({},e,{},r,{},t,{onSubmit:function(t){return r.onSubmit({login:e.login,restoreType:De.c,challengeId:e.challengeId,phoneNumber:Ii(t,e.phoneMask)})},onBack:function(){r.onBack({login:e.login,challengeId:e.challengeId,phoneMask:null})}})}))(wi),Li=t(4695),Di=t(4697),xi=t(10779),Ui=t(10395),Bi=t.n(Ui),Fi=function(e,r,t){var n=e.indexOf(r),a=n+r.length-1;return n>-1?babelHelpers.toConsumableArray(e).map((function(e,r){return r>=n&&r<=a?t(e):e})):null};function qi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Mi(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var zi=function(e){babelHelpers.inherits(t,e);var r=Mi(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSearch",Object(xi.throttle)((function(e){var r=e.value,t=r.replace(/\D/gi,""),a=n.preparePhones(t),o=n.isSelectedPhoneVisible(a);n.setState(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?qi(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({phones:a,filter:r},!o&&{selectedPhone:void 0}))}),200,!1)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSelectPhone",(function(e){var r=e.value;n.setState({selectedPhone:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSubmitForm",(function(e){var r=n.props.onPhoneChecked,t=n.state.selectedPhone;e.preventDefault(),r(t)})),n.state={phones:n.preparePhones(),selectedPhone:void 0,filter:""},n}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"antihack-list"},a.a.createElement(Pr.a,{marker:"antihack-list/form",layout:vr.b,title:{text:"Р‘РµР·РѕРїР°СЃРЅС‹Р№ РІС…РѕРґ",align:"center"},description:this.renderDescription(),noValidate:!0,onSubmit:this.handleSubmitForm},this.renderSearchInput(),this.renderPhoneList(),this.renderButton()))}},{key:"renderDescription",value:function(){return a.a.createElement(kr.a,{marker:"antihack-list/description"},a.a.createElement("span",{className:Bi.a.description},"Р’С‹Р±РµСЂРёС‚Рµ РѕРґРёРЅ РёР·В РЅРѕРјРµСЂРѕРІ, С‡С‚РѕР±С‹ РІРѕР№С‚Рё РІВ РїСЂРѕС„РёР»СЊ."))}},{key:"renderSearchInput",value:function(){return this.props.phoneList.length<=9?null:a.a.createElement("div",{className:Bi.a.input},a.a.createElement(_r.a,{className:"ym-hide-content",value:this.state.filter,autoFocus:!0,placeholder:"РџРѕРёСЃРє РїРѕ РЅРѕРјРµСЂР°Рј",onChange:this.handleSearch}))}},{key:"renderPhoneList",value:function(){var e=this,r=this.props.phoneList;return a.a.createElement(Di.a,{className:hn()(babelHelpers.defineProperty({},Bi.a.list,r.length>9),"ym-hide-content"),value:this.state.selectedPhone,onChange:this.handleSelectPhone},this.state.phones.map((function(r){return a.a.createElement(Li.a,{key:r.raw,value:r.raw,className:Bi.a.phone},a.a.createElement(kr.a,{size:"m"},e.formatPhoneNumber(r.highlighted)))})),a.a.createElement(Li.a,{value:"no-phone"},a.a.createElement("span",null,"РќРµС‚ РЅСѓР¶РЅРѕРіРѕ С‚РµР»РµС„РѕРЅР°")))}},{key:"renderButton",value:function(){var e=this.state.selectedPhone;return a.a.createElement(Pr.a.Action,{align:"center",className:Bi.a.footer},a.a.createElement(Ar.a,{size:"m",marker:"antihack-list/button",design:"primary",disabled:!e},"РџСЂРѕРґРѕР»Р¶РёС‚СЊ"))}},{key:"preparePhones",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.phoneList;return t.map((function(t){return{highlighted:r?Fi(t,r,e.selectDigit):t,raw:t}})).filter((function(e){return Boolean(e.highlighted)}))}},{key:"formatPhoneNumber",value:function(e){return a.a.createElement(a.a.Fragment,null,"+",e[0]," ",e[1],e[2],e[3]," ",e[4],e[5],e[6],"вЂ‚",e[7]||"в€™","вЂ†",e[8]||"в€™","вЂ‚",e[9]||"в€™","вЂ†",e[10]||"в€™")}},{key:"selectDigit",value:function(e){return a.a.createElement("span",{className:Bi.a["selected-digit"]},e)}},{key:"isSelectedPhoneVisible",value:function(e){var r=this;return e.some((function(e){return e.raw===r.state.selectedPhone}))||"no-phone"===this.state.selectedPhone}}]),t}(n.Component);babelHelpers.defineProperty(zi,"propTypes",{phoneList:s.a.array.isRequired,onPhoneChecked:s.a.func.isRequired});var Ki=zi,Wi=function(e){var r=e.phoneList,t=e.phoneMask,n=e.onPhoneChecked,o=e.login,s=e.challengeId;return t||1===r.length?a.a.createElement(Ni,{hasBackButton:r.length>1}):a.a.createElement(Ki,{phoneList:r,onPhoneChecked:function(e){"no-phone"!==e?n({login:o,challengeId:s,phoneMask:e}):window.location.href="https://support.avito.ru/request/122"}})};Wi.propTypes={phoneList:s.a.array,phoneMask:s.a.string,challengeId:s.a.string,login:s.a.string,onPhoneChecked:s.a.func};var Vi=Object(i.connect)((function(e){return{phoneList:e.common.phoneList,phoneMask:e.common.phoneMask,challengeId:e.common.challengeId,login:e.common.login}}),{onPhoneChecked:et})(Wi);function $i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Yi(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?$i(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Qi=Object(i.connect)((function(e){return{source:e.common.source,login:e.page.payload.login,onOpen:function(e){return Object(cr.l)(e,De.o.AUTH)}}}),{onResendCode:Za,onSendPhoneCode:function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t,n){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ht(yt,e,t);case 3:(a=r.sent).success?((o=n()).common.successAction&&Object(Br.a)(o.common.successAction,e),t(Vr())):Rt(a.errors,t),a.timer&&t(je(a.timer)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t(ke());case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e,t){return r.apply(this,arguments)}}()},onChangeNumber:zr},(function(e,r,t){return Yi({},e,{},t,{},r,{onResendCode:function(t){return r.onResendCode(Yi({},t,{},e.source&&{src:Object(Xa.b)(e.source)}))}})}))(_n),Ji=t(10804);function Xi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Zi(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Xi(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ec=function(e){return e.reduce((function(e,r){return e.push(r.type),e}),[])},rc=fo((function(e){return e.map((function(e){return Zi({},e,{title:e.name,description:e.social?(r=e.social,ec(r).map(Ft)).join(", "):e.login});var r}))})),tc=function(e){var r=e.accountList,t=e.onCreateNewAccount,n=e.title,o=e.getToken,s=e.suggestKey,i=e.socialProviderId,c=e.successAction,l=a.a.useState(null),u=babelHelpers.slicedToArray(l,2),p=u[0],f=u[1];return p?p.social?a.a.createElement(fs,{suggestKey:s,socialNetworks:ec(p.social),getToken:o,onSocialAuthError:function(){}}):a.a.createElement(Qs,{userAccount:p,suggestKey:s,footerText:"Р’РµСЂРЅСѓС‚СЊСЃСЏ Рє СЃРїРёСЃРєСѓ",marker:"auth-with-avatar-page",onFooterClick:function(){return f(null)}}):a.a.createElement(ko,{usersList:rc(r),marker:"user-list-logins",title:n,description:"РџРѕС…РѕР¶Рµ, Сѓ".concat("В ","РІР°СЃ СѓР¶Рµ РµСЃС‚СЊ РїСЂРѕС„РёР»СЊ","В ","вЂ”"," РІРѕР№РґРёС‚Рµ РІ","В ","РЅРµРіРѕ РёР»Рё СЃРѕР·РґР°Р№С‚Рµ РЅРѕРІС‹Р№."),isRegistrationAvailable:!0,suggestKey:s,successAction:c,socialProviderId:i,onLoginAsUser:function(e){return f(e)},onCreateNewAccount:t})};tc.propTypes={accountList:s.a.array,onCreateNewAccount:s.a.func.isRequired,getToken:s.a.func.isRequired,title:s.a.string.isRequired,suggestKey:s.a.string,socialProviderId:s.a.string,successAction:s.a.string};var nc={onCreateNewAccount:function(e){return function(){var r=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:j}),r.prev=1,r.next=4,Ht(it,e,t);case 4:(n=r.sent).success&&(hr({name:n.userInfo.name,socialProviderId:e.provider,socialUserId:n.userInfo.socialUserId,avatar:n.userInfo.avatar,hashedUserId:n.userInfo.hashedUserId},De.o.SOCIAL),Object(Br.a)(e.successAction)),r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(1),t({type:I,payload:r.t0}),r.abrupt("return");case 12:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}},ac=Object(i.connect)((function(e){return Zi({},e.auth.socialAuthAccountSuggest,{successAction:e.common.successAction})}),nc)(Object(c.d)(tc)),oc=t(10396),sc=t.n(oc),ic=function(e,r,t){var n=e.indexOf(r),a=n+r.length-1;return n>-1?babelHelpers.toConsumableArray(e).map((function(e,r){return r>=n&&r<=a?t(e):e})):null};function cc(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function lc(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var uc=function(e){babelHelpers.inherits(t,e);var r=lc(t);function t(e){var n;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSearch",Object(xi.throttle)((function(e){var r=e.value,t=r.replace(/\D/gi,""),a=n.preparePhones(t),o=n.isSelectedPhoneVisible(a);n.setState(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?cc(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cc(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({phones:a,filter:r},!o&&{selectedPhone:void 0}))}),200,!1)),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSelectPhone",(function(e){var r=e.value;n.setState({selectedPhone:r})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSubmitForm",(function(e){var r=n.props.onPhoneChecked,t=n.state.selectedPhone;e.preventDefault(),r(t)})),n.state={phones:n.preparePhones(),selectedPhone:void 0,filter:""},n}return babelHelpers.createClass(t,[{key:"render",value:function(){return a.a.createElement("div",{className:Nr.a.container,"data-marker":"antihack-list"},a.a.createElement(Pr.a,{marker:"antihack-list/form",layout:vr.b,title:{text:"Р‘РµР·РѕРїР°СЃРЅС‹Р№ РІС…РѕРґ",align:"center"},description:this.renderDescription(),noValidate:!0,onSubmit:this.handleSubmitForm},this.renderSearchInput(),this.renderPhoneList(),this.renderButton()))}},{key:"renderDescription",value:function(){return a.a.createElement(kr.a,{marker:"antihack-list/description"},a.a.createElement("span",{className:sc.a.description},"Р’С‹Р±РµСЂРёС‚Рµ РѕРґРёРЅ РёР·В РЅРѕРјРµСЂРѕРІ, С‡С‚РѕР±С‹ РІРѕР№С‚Рё РІВ РїСЂРѕС„РёР»СЊ РїРѕВ СЃРјСЃ."))}},{key:"renderSearchInput",value:function(){return this.props.phoneList.length<=9?null:a.a.createElement("div",{className:sc.a.input},a.a.createElement(_r.a,{className:"ym-hide-content",clearable:!0,value:this.state.filter,autoFocus:!0,placeholder:"РџРѕРёСЃРє РїРѕ РЅРѕРјРµСЂР°Рј",onChange:this.handleSearch}))}},{key:"renderPhoneList",value:function(){var e=this,r=this.props.phoneList,t=this.state.phones;return t.length?a.a.createElement(Di.a,{className:hn()(sc.a.list,babelHelpers.defineProperty({},sc.a.list_overflow,r.length>9),"ym-hide-content"),value:this.state.selectedPhone,onChange:this.handleSelectPhone},t.map((function(r){return a.a.createElement(Li.a,{key:r.raw,value:r.raw,className:sc.a.phone},a.a.createElement(kr.a,{size:"m"},e.formatPhoneNumber(r.highlighted)))}))):a.a.createElement("div",{className:hn()(sc.a["not-found"],sc.a.list,babelHelpers.defineProperty({},sc.a.list_overflow,r.length>9))},"РќРѕРјРµСЂ РЅРµ РЅР°Р№РґРµРЅ")}},{key:"renderButton",value:function(){var e=this.props.isLoading,r=this.state.selectedPhone;return a.a.createElement(Pr.a.Action,{align:"center",className:sc.a.footer},a.a.createElement(Ar.a,{size:"m",marker:"antihack-list/button",design:"primary",loading:e,disabled:!r},"РџСЂРѕРґРѕР»Р¶РёС‚СЊ"))}},{key:"preparePhones",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.phoneList;return t.map((function(t){return{highlighted:r?ic(t,r,e.selectDigit):t,raw:t}})).filter((function(e){return Boolean(e.highlighted)}))}},{key:"formatPhoneNumber",value:function(e){return a.a.createElement(a.a.Fragment,null,"+",e[0]," ",e[1],e[2],e[3]," ",e[4],e[5],e[6],"-",e[7],e[8],"-",e[9],e[10])}},{key:"selectDigit",value:function(e){return a.a.createElement("span",{className:sc.a["selected-digit"]},e)}},{key:"isSelectedPhoneVisible",value:function(e){var r=this;return e.some((function(e){return e.raw===r.state.selectedPhone}))||"no-phone"===this.state.selectedPhone}}]),t}(n.Component);babelHelpers.defineProperty(uc,"propTypes",{phoneList:s.a.array.isRequired,isLoading:s.a.bool,onPhoneChecked:s.a.func.isRequired});var pc=uc;function fc(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var hc=function(e){return a.a.useEffect((function(){e.onResendCode({login:e.login})}),[]),a.a.createElement(Pn,e)};hc.propTypes={login:s.a.string.isRequired,onResendCode:s.a.func.isRequired};var dc=Object(i.connect)((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?fc(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fc(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(Er.a)(["formError","captchaError","codeError","timer"])(e.common))}),{clearError:Re,onSendPhoneCode:function(e){var r=e.code,t=e.login;return function(){var e=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(gt,{code:r},n);case 2:(a=e.sent).success?Pt(n,{login:t},a):Rt(a.errors,n,{login:t}),a.timer&&n(je(a.timer));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},onResendCode:function(e){return function(e){var r=e.phone;return function(){var e=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(Ot,{phone:r},t);case 2:(n=e.sent).success?t(tt({selectedPhone:r,timer:n.timer})):Rt(n.errors,t),n.timer&&t(je(n.timer));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}({phone:e.login})}})(hc),bc=function(e){var r=e.selectedPhone,t=e.phoneList,n=e.isLoading,o=e.goTo2FACheckPage;return r||1===t.length?a.a.createElement(dc,{login:r||t[0],isLoading:n,onChangeNumber:t.length>1?o:null}):a.a.createElement(pc,{isLoading:n,phoneList:t,onPhoneChecked:function(e){o({selectedPhone:e})}})};bc.propTypes={phoneList:s.a.array,isLoading:s.a.bool,selectedPhone:s.a.string,goTo2FACheckPage:s.a.func.isRequired};var mc={goTo2FACheckPage:tt},yc=Object(i.connect)((function(e){return{phoneList:e.common.phoneList,selectedPhone:e.common.selectedPhone,login:e.common.login,isLoading:e.common.isLoading}}),mc)(bc),Oc=["antihackError","captchaError","codeError","formError","loginError","nameError","passwordError"];var gc="surveyAuthRefuse",Ec="surveyRecoverRefuse",Pc="surveyRegRefuse";function vc(e){var r,t,n,a;if(null===(r=window.UXS)||void 0===r?void 0:r.sendEvent){var o=e.page,s=e.location,i=e.hasAnyError,c=e.payloadPage;if(!i)if("ps"===((null===(t=s.query)||void 0===t?void 0:t.authsrc)||(null===(n=s.prev)||void 0===n||null===(a=n.query)||void 0===a?void 0:a.authsrc)||c.source)){var l=function(e){switch(e){case rr.AUTH_PAGE:case rr.AUTH_PAGE_CLASSIC:return gc;case rr.RESTORE_LOGIN_PAGE:case rr.RESTORE_RESET_PAGE:case rr.RESTORE_LOGIN_CHECK_PAGE:case rr.CONFIRM_USER_PHONE_PAGE:return Ec;case rr.CONFIRM_USER_PHONE_FOR_AUTH_PAGE:case rr.REGISTRATION_ADD_PHONE_PAGE:case rr.REGISTRATION_MAIN_PAGE:case rr.REGISTRATION_CHECK_CODE_PAGE:case rr.REGISTRATION_SET_PASSWORD_PAGE:case rr.FOUND_USERS_LIST_PAGE:case rr.SOCIAL_AUTH_PAGE:case rr.KNOWN_USER_LOGIN_PAGE:return Pc;default:return""}}(o);l&&setTimeout((function(){window.UXS.sendEvent(l)}),0)}}}function _c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Rc(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=babelHelpers.getPrototypeOf(e);if(r){var a=babelHelpers.getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return babelHelpers.possibleConstructorReturn(this,t)}}var Ac=Object.keys(rr).concat(""),Tc="undefined"!=typeof window;var Cc=function(e){babelHelpers.inherits(t,e);var r=Rc(t);function t(e){var n,a;return babelHelpers.classCallCheck(this,t),n=r.call(this,e),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleLoginPopup",(function(e){var r=n.props,t=r.onRedirectUrlChange,a=r.page,o=r.goToLoginPage;t(e.detail&&e.detail.redirect||""),a||o(),n.setState({isPortalOpen:!0})})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handleSetLogin",(function(e){n.props.onSetLogin(e.detail.login)})),babelHelpers.defineProperty(babelHelpers.assertThisInitialized(n),"handlePopupClose",(function(){var e,r=n.props,t=r.authSuccess;(0,r.onClose)(),t||(e=n.cancelAction||"").startsWith("authCancelCallback")&&"function"==typeof window[e]&&window[e](),n.cancelAction=""})),n.cancelAction="",n.state={isPortalOpen:Tc&&(a=document.location.hash,["restore","login","registration"].some((function(e){return a.includes(e)}))),experimentsValues:new Map(e.experimentsValues.entries())},n.portalNode=Tc?document.createElement("div"):null,n}return babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){var e=this.props,r=e.query,t=e.onRedirectUrlChange,n=e.page,a=e.goToLoginPage;this.state.isPortalOpen&&!n&&a(),r.next&&t(r.next),Tc&&(document.body.appendChild(this.portalNode),document.addEventListener(De.i,this.handleLoginPopup),document.addEventListener(De.a,this.handleSetLogin))}},{key:"componentWillReceiveProps",value:function(e){var r=this.props,t=r.goToLoginPage,n=r.onRedirectUrlChange,a=e.query,o=e.page,s=e.authSuccess,i=e.location.type,c=this.state.isPortalOpen;a.next&&a.next!==this.props.query.next&&n(a.next),a.cancel&&a.cancel!==this.props.query.cancel&&(this.cancelAction=a.cancel),c||o||i===B.NOT_FOUND||i===x.GO_TO_DEFAULT_PAGE||t(),i!==B.NOT_FOUND&&i!==x.GO_TO_DEFAULT_PAGE||this.setState({isPortalOpen:!1}),!c&&o&&this.setState({isPortalOpen:!0}),!c||o||s||(vc(this.props),this.setState({isPortalOpen:!1}),this.props.onCancel())}},{key:"shouldComponentUpdate",value:function(e,r){return this.state.isPortalOpen!==r.isPortalOpen||this.props.page!==e.page||this.props.experimentsValues!==e.experimentsValues||this.props.isCaptchaShown!==e.isCaptchaShown}},{key:"componentWillUnmount",value:function(){this.props.goToDefaultPage(),Tc&&(document.removeChild(this.portalNode),document.removeEventListener(De.a,this.handleSetLogin))}},{key:"render",value:function(){return this.props.inline&&this.state.isPortalOpen?a.a.createElement("div",{className:Vs.a.root},a.a.createElement("div",{className:Vs.a.inlineContainer},a.a.createElement(Ji.a,babelHelpers.extends({},this.props.captchaParams,{isCaptchaShown:this.props.isCaptchaShown}),this.renderContent()))):this.state.isPortalOpen&&this.portalNode&&Object(Or.createPortal)(a.a.createElement("div",{className:Vs.a.root,"data-marker":"auth-popup"},a.a.createElement(gr.a,{contentClassName:Vs.a.container,marker:"auth-app",responsive:!1,width:"narrow",scrolling:"outside",onClose:this.handlePopupClose},a.a.createElement(Ji.a,babelHelpers.extends({},this.props.captchaParams,{isCaptchaShown:this.props.isCaptchaShown}),this.renderContent()))),this.portalNode)}},{key:"renderContent",value:function(){var e=this.props,r=e.page,t=e.experimentsValues;switch(r){case rr.AUTH_PAGE:return a.a.createElement(Ci,{disableSuggest:this.props.disableSuggest,experimentsValues:t,marker:"auth-form"});case rr.AUTH_PAGE_CLASSIC:return a.a.createElement(mi,{login:this.props.payloadPage.login,password:this.props.payloadPage.password,source:this.props.payloadPage.source,marker:"auth-form"});case rr.TIME_IS_UP_ERROR_PAGE:case rr.PASSWORD_WAS_RESET_PAGE:case rr.WEAK_PASSWORD_WAS_RESET_PAGE:case rr.BLOCKED_ACCOUNT_PAGE:case rr.DELETED_ACCOUNT_PAGE:case rr.BLOCKED_PRO_ACCOUNT_PAGE:case rr.EMAIL_RESTORE_REQUIRED_PAGE:case rr.ACTIDEALER_PAGE:case rr.ACTIAGENT_PAGE:case rr.SOCIAL_AUTH_ERROR_PAGE:case rr.SOCIAL_WRONG_ID_ERROR_PAGE:case rr.WRONG_HASH_PAGE:return a.a.createElement(Da,null);case rr.RESTORE_LOGIN_PAGE:case rr.RESTORE_LOGIN_CHECK_PAGE:case rr.RESTORE_RESET_PAGE:return a.a.createElement(Kn,{experimentsValues:t});case rr.ANTIHACK_BY_PHONE_PAGE:return a.a.createElement(Ks,null);case rr.CONFIRM_USER_PHONE_PAGE:return a.a.createElement(qs,null);case rr.CONFIRM_USER_PHONE_FOR_AUTH_PAGE:return a.a.createElement(Qi,null);case rr.ANTI_HACK_PAGE:return a.a.createElement(Vi,null);case rr.TWO_FACTOR_AUTH_PAGE:return a.a.createElement(yc,null);case rr.REGISTRATION_ADD_PHONE_PAGE:case rr.REGISTRATION_MAIN_PAGE:case rr.REGISTRATION_CHECK_CODE_PAGE:case rr.REGISTRATION_SET_PASSWORD_PAGE:case rr.REGISTRATION_ERROR_PAGE:case rr.USERS_LIST_ERROR_PAGE:case rr.FOUND_USERS_LIST_PAGE:case rr.SOCIAL_AUTH_PAGE:case rr.KNOWN_USER_LOGIN_PAGE:return a.a.createElement(Us,{experimentsValues:t});case rr.SOCIAL_LOGIN_SUGGEST_PAGE:return a.a.createElement(ac,null);default:return a.a.createElement("div",null)}}}]),t}(n.Component);babelHelpers.defineProperty(Cc,"propTypes",{payloadPage:s.a.object,onClose:s.a.func,onCancel:s.a.func,onRedirectUrlChange:s.a.func.isRequired,onSetLogin:s.a.func.isRequired,goToLoginPage:s.a.func.isRequired,goToDefaultPage:s.a.func.isRequired,page:s.a.oneOf(Ac),experimentsValues:s.a.instanceOf(Map),location:s.a.shape({payload:s.a.object.isRequired,type:s.a.string.isRequired,pathname:s.a.string.isRequired,query:s.a.object,prev:s.a.object}).isRequired,authSuccess:s.a.bool,query:s.a.object.isRequired,inline:s.a.bool,disableSuggest:s.a.bool,captchaParams:s.a.shape({isOn:s.a.bool,type:s.a.string}),isCaptchaShown:s.a.bool,hasAnyError:s.a.bool}),babelHelpers.defineProperty(Cc,"defaultProps",{onClose:function(){},onCancel:function(){},experimentsValues:new Map});var Sc={},kc=Object(i.connect)((function(e){return{payloadPage:e.page.payload,query:e.location.query||Sc,location:e.location,page:e.page.name,authSuccess:e.auth.authSuccess,isCaptchaShown:e.common.isCaptchaShown,onCancel:cr.b,hasAnyError:(r=e.common,Oc.some((function(e){return r[e]})))};var r}),{onRedirectUrlChange:function(e){return{type:b,payload:{successAction:e}}},onSetLogin:Ce,goToLoginPage:Wr,goToDefaultPage:Vr,resetLogin:function(){return{type:d}},resetPopupSource:function(){return{type:C}}},(function(e,r,t){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_c(Object(t),!0).forEach((function(r){babelHelpers.defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e,{},r,{},t,{onClose:function(){r.resetLogin(),r.goToDefaultPage(),r.resetPopupSource()}})}))(Cc);t.d(r,"experiments",(function(){return jc}));var Hc=Object(c.c)(i.connect),wc=function(e){var r=yr(e);return a.a.createElement(i.Provider,{store:r},a.a.createElement(Hc,null,a.a.createElement(kc,e)))};wc.propTypes={disableSuggest:s.a.bool,experimentsValues:s.a.instanceOf(Map),captchaParams:s.a.shape({isOn:s.a.bool,type:s.a.string,siteKey:s.a.string})},wc.defaultProps={experimentsValues:new Map};r.default=wc;var jc=oi},8867:function(e,r,t){"use strict";t.d(r,"a",(function(){return n})),t.d(r,"b",(function(){return o}));t(8868);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startsWith("authCallback")&&"function"==typeof window[e]?window[e](r):a(e)}function a(e){var r=e&&decodeURIComponent(e),t=function(e){var r=/^(\/|\?|#|https:\/\/(([-\w\.]*\.)?avito\.(dev|ru))($|\/))/,t=new URL(e,"https://www.avito.ru"),n="https:"===t.protocol&&/\.avito\.ru$/.test(t.host);return e&&n&&r.test(e)}(r);window.location.href=t?r:String(window.location.href).split("#")[0]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("authCallback")}}}]);