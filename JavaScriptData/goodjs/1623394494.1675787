(window.__jsonpFunction__kppdu1nf_q4y7hyuneps__=window.__jsonpFunction__kppdu1nf_q4y7hyuneps__||[]).push([[13],{1377:function(e,t,a){},1378:function(e,t,a){},1379:function(e,t,a){},1380:function(e,t,a){},1381:function(e,t,a){},1382:function(e,t,a){},693:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return L});var n=a(0),i=a.n(n),l=(a(1381),a(11)),c=a(38),s=a(27),o=a(8);const r=Object(l.a)("single-choice-image"),m=({isInactive:e,isActive:t,onChoice:a,data:l,onSetCurrentScreen:c,onCloseInterview:s})=>{const m=Object(n.useCallback)(()=>{a(l.id)},[l.id,a]),u=Object(n.useCallback)(()=>{setTimeout(()=>{Object(o.c)(()=>{void 0!==l.nextScreenId?c(l.nextScreenId):s()})},500)},[l.nextScreenId,s,c]);return i.a.createElement("div",{className:r("item",{isInactive:e}),onPointerDown:m,onPointerUp:u},i.a.createElement("div",{className:r("item-image",{isInactive:e,isActive:t}),style:{backgroundImage:`url(${l.imageSrc})`}}),i.a.createElement("div",{className:r("item-text")},l.title))},u=Object(n.memo)(({data:e,onSetScreen:t,onClose:a,onShow:l,onSubmit:o,viewType:u,publication:b})=>{const d=Boolean(b),[p,v]=Object(c.a)(),[w,g]=Object(n.useState)(null);Object(s.b)({isVisible$:v,onShow(){l(e.answers.map(({id:e})=>e))}});const S=Object(n.useCallback)(e=>{null===w&&(o([e]),g(e))},[w,o]);return i.a.createElement("div",{ref:p,className:r({viewType:u,hasPublication:d})},i.a.createElement("div",{className:r("title")},e.title),e.subtitle?i.a.createElement("div",{className:r("subtitle")},e.subtitle):null,b?i.a.createElement("div",{className:r("publication")},b):null,i.a.createElement("div",{className:r("list")},e.answers.map(e=>i.a.createElement(m,{key:e.id,isInactive:null!==w&&w!==e.id,isActive:w===e.id,onChoice:S,data:e,onSetCurrentScreen:t,onCloseInterview:a}))))});a(1378);var b=a(29),d=a(25);const p=Object(l.a)("message-screen"),v=Object(n.memo)(({data:e,onClose:t,onShow:a,viewType:n})=>{const[l,r]=Object(c.a)();return Object(s.b)({isVisible$:r,onShow(){a([])}}),Object(d.a)(()=>{Object(b.g)(e.autoCloseTimeout)||window.setTimeout(()=>{Object(o.c)(()=>{t()})},e.autoCloseTimeout)}),i.a.createElement("div",{className:p({viewType:n}),ref:l},e.title)});a(1382);var w=a(1167),g=a(1159),S=a(110);const j=Object(l.a)("multi-choice-text"),O=({id:e,isChecked:t,onSetChecked:a,data:l})=>{const c=Object(n.useCallback)(({target:t})=>{a(e,t.checked)},[e,a]),s=i.a.createElement("div",{className:j("item-text")},l.title);return i.a.createElement("div",{className:j("item")},i.a.createElement(w.a,{onChange:c,size:"m",isChecked:t,label:s}))},E=Object(n.memo)(({data:e,onSetScreen:t,onClose:a,onShow:l,onSubmit:o,viewType:r,publication:m})=>{const u="mobile"===r,[d,p]=Object(c.a)();Object(s.b)({isVisible$:p,onShow(){l(e.answers.map(({id:e})=>e))}});const[v,w]=Object(n.useState)({}),[E,h]=Object(n.useState)(!1),C=Object(n.useCallback)((e,t)=>{w(a=>Object.assign({},a,{[e]:t})),h(!1)},[]),k=Object(n.useCallback)(()=>{const n=Object(S.a)(v).filter(e=>v[e]);n.length<e.minAnswersCount?h(!0):(o(n),Object(b.g)(e.submitButton.nextScreenId)?a():t(e.submitButton.nextScreenId))},[v,e.minAnswersCount,e.submitButton.nextScreenId,a,t,o]),y=Object(n.useCallback)(()=>{e.alternativeButton&&(o([]),Object(b.g)(e.alternativeButton.nextScreenId)?a():t(e.alternativeButton.nextScreenId))},[e.alternativeButton,a,t,o]);return i.a.createElement("div",{ref:d,className:j({viewType:r})},i.a.createElement("div",{className:j("title")},e.title),e.subtitle?i.a.createElement("div",{className:j("subtitle")},e.subtitle):null,m?i.a.createElement("div",{className:j("publication")},m):null,i.a.createElement("div",{className:j("list")},e.answers.map((e,t)=>i.a.createElement(O,{id:e.id,isChecked:Boolean(v[e.id]),onSetChecked:C,key:t,data:e}))),i.a.createElement("div",{className:j("button-container")},i.a.createElement("div",{className:j("submit-button-container")},i.a.createElement(g.a,{size:u?"new-xl":"new-l",viewType:"yellow",widthType:u?"wide":void 0,onClick:k,disabled:E,className:j("button")},i.a.createElement("span",{className:j("button-text")},E?e.minAnswersError:e.submitButton.text))),e.alternativeButton?i.a.createElement("div",{className:j("alternative-button-container")},i.a.createElement(g.a,{size:u?"new-xl":"new-l",viewType:u?"regular":"transparent",widthType:u?"wide":void 0,onClick:y,className:j("button")},i.a.createElement("span",{className:j("button-text")},e.alternativeButton.text))):null))});a(1379);var h=a(1296),C=(a(1380),a(16)),k=a(517),y=a(671);const N=Object(C.a)("poll-options"),_=({id:e,active:t,prepare:a,imageSrc:l,imageActiveSrc:c,onPointerDown:s,onPointerMove:o})=>{const r=Object(n.useCallback)(()=>{s(e)},[e,s]),m=Object(n.useCallback)(()=>{o(e)},[e,o]),u=Object(n.useCallback)(e=>(e.preventDefault(),e.stopPropagation(),!1),[]),b=Object(n.useMemo)(()=>l&&c?t&&c?{backgroundImage:`url(${c})`}:{backgroundImage:`url(${l})`}:{},[t,c,l]);return i.a.createElement("div",{className:N("item",{active:t,prepare:a}),style:b,onPointerDown:r,onPointerMove:m,onContextMenu:u})},T=Object(n.memo)(({className:e,initialValue:t=-1,isSingleChoice:a,items:l,onChange:c,isMobile:s})=>{const[o,r]=Object(n.useState)(t),[m,u]=Object(n.useState)(t),[b,d]=Object(n.useState)(!1);Object(y.a)(()=>{b||o===m||(c(o),u(o))},[b,o]);const p=Object(k.a)(()=>{d(!1)}),v=Object(n.useCallback)(e=>{b&&r(e)},[b]),w=Object(n.useCallback)(e=>{r(e),d(!0),window.addEventListener("pointerup",p,{once:!0})},[p]),g=Object(n.useCallback)(()=>{b&&(d(!1),r(m))},[b,m]);return i.a.createElement("div",{className:C.a.mix(N({isMobile:s,isSingleChoice:a,active:!1}),e),onPointerLeave:g},l.map((e,t)=>{const n=a?t===o:t<=o,l=n&&!b,c=n&&b;return i.a.createElement(_,{id:t,key:t,active:l,prepare:c,imageSrc:e.imageSrc,imageActiveSrc:e.imageActiveSrc,onPointerDown:w,onPointerMove:v})}))}),x=Object(n.memo)(({size:e})=>i.a.createElement("div",{style:{height:e}})),I=Object(l.a)("gradation-stars"),f=({answers:e,onSetScreen:t,onSubmit:a,onClose:n})=>{const l=Object(h.a)(i=>{const l=e[i];l&&(a([l.id]),Object(b.g)(l.nextScreenId)?n():t(l.nextScreenId))},350);return i.a.createElement(T,{className:I("poll-options"),items:e,onChange:l})},B=Object(n.memo)(({data:e,publication:t,viewType:a,onClose:l,onShow:o,onSubmit:r,onSetScreen:m})=>{const u="mobile"===a,d=Boolean(t),[p,v]=Object(c.a)();Object(s.b)({isVisible$:v,onShow(){o(e.answers.map(({id:e})=>e))}});const w=Object(n.useCallback)(()=>{e.skipButton&&(r([]),Object(b.g)(e.skipButton.nextScreenId)?l():m(e.skipButton.nextScreenId))},[e.skipButton,l,m,r]);return i.a.createElement("div",{ref:p,className:I({viewType:a,hasPublication:d})},i.a.createElement("div",{className:I("title")},e.title),e.subtitle&&i.a.createElement("div",{className:I("subtitle")},e.subtitle),t?i.a.createElement("div",{className:I("publication")},t):i.a.createElement(x,{size:4}),i.a.createElement("div",{className:I("list")},i.a.createElement(f,{answers:e.answers,onClose:l,onSubmit:r,onSetScreen:m})),e.skipButton&&i.a.createElement("div",{className:I("button-container")},i.a.createElement(g.a,{size:u?"new-xl":"new-l",viewType:"regular",onClick:w,widthType:u?"wide":void 0,className:I("button")},i.a.createElement("span",{className:I("button-text")},e.skipButton.text))))});a(1377);var P=a(1311),M=a(1299),A=a(218),$=a(236),z=a(90),D=a(95);const V=Object(l.a)("publication"),F=Object(n.memo)(({title:e,type:t,source:a,image:n,video:l,link:c,host:s,mainColor:o,items:r=[],viewType:m,isClickable:u=!0})=>{const b="gif"===t,d="gallery"===t,p=r.filter(e=>"image"===e.type),v=null==l?void 0:l.duration,{title:w}=a,g=d?p[0].image.link:n,S=d?p[0].mainColor:o,j=d&&2===p.length,O=d&&1===p.length,E=i.a.createElement("div",{className:V("image",{type:t,isOnlyTwoImages:j,isOnlyOneImages:O}),style:{backgroundImage:g?`url(${g})`:"",backgroundColor:S}},b?i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{shifts:6,className:V("cover"),rightBottom:v?i.a.createElement(A.a,{time:v,className:V("duration")}):null}),i.a.createElement(z.a,{className:V("play-icon"),icon:$.a,size:"m"})):null),h=e?i.a.createElement(M.a,{className:V("title"),lines:3,lineHeight:18},e):null,C=i.a.createElement(M.a,{className:V("publisher-title"),lines:1,lineHeight:18},w),k=p.length-1,y=p.slice(1,3),N=d&&Boolean(y.length)?i.a.createElement("div",{className:V("image-gallery")},y.map((e,t)=>i.a.createElement("div",{key:e.image.link,className:V("image-gallery-item",{isOnlyTwoImages:j}),style:{backgroundImage:`url(${e.image.link})`,backgroundColor:e.mainColor}},t===y.length-1&&k>2?i.a.createElement("span",{className:V("gallery-count")},"+",k-2):null))):null,_=i.a.createElement(i.a.Fragment,null,E,N,i.a.createElement("div",{className:V("description")},h,C));return u?i.a.createElement(D.b,{className:V({viewType:m,isClickable:u}),host:s,href:c,rel:"noopener noreferrer"},_):i.a.createElement("div",{className:V({viewType:m})},_)});var R=a(23),q=a(72);const H=(e,t)=>{const a=((e,t,a)=>(n,i)=>e(n,Object.assign({},i,{statEvents:t,bulkParams:a})))(e,t.statEvents,t.bulkParams);return{show:e=>a("interview_show",{bulkReplaceMap:{__answer_ids__:e.join()}}),submit:e=>a("interview_submit",{bulkReplaceMap:{__answer_ids__:e.join()}}),close:()=>a("interview_close")}},L=Object(n.memo)(({screen:e,onSetScreen:t,onClose:a,viewType:l})=>{const{host:c}=Object(o.g)(e=>({host:e.params.host||""})),s=Object(n.useRef)(!1),r=Object(R.b)(),m=Object(n.useMemo)(()=>H(r,e),[r,e]),b=Object(n.useCallback)(()=>{s.current=!0,a()},[a]);Object(q.a)(()=>{s.current||m.close()});const d="publication"in e&&e.publication?i.a.createElement(F,{type:e.publication.type,title:e.publication.title,source:e.publication.source,image:e.publication.image,link:e.publication.link,video:e.publication.video,items:e.publication.items,mainColor:e.publication.mainColor,isClickable:e.publication.itemIsClickable,host:c,viewType:l}):void 0;return i.a.createElement("div",{key:e.id},"message"===e.type?i.a.createElement(v,{data:e,onShow:m.show,onClose:b,viewType:l}):"gradation_stars"===e.type?i.a.createElement(B,{data:e,publication:d,onSetScreen:t,onSubmit:m.submit,onShow:m.show,onClose:b,viewType:l}):"single_choice_image"===e.type?i.a.createElement(u,{data:e,publication:d,onSetScreen:t,onSubmit:m.submit,onShow:m.show,onClose:b,viewType:l}):"multi_choice_text"===e.type?i.a.createElement(E,{data:e,publication:d,onSubmit:m.submit,onShow:m.show,onSetScreen:t,onClose:b,viewType:l}):null)})}}]);