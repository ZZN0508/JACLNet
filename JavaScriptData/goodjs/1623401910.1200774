(window.QJP=window.QJP||[]).push([["login_signup_lazy"],{"13SJ":function(e,t,n){"use strict";n("5s+n");t.a=function(e,t){return void 0===t&&(t=5e3),new Promise(((n,a)=>{var r=new Image,o=window.setTimeout((()=>{a(new Error("Domain "+e+" timed out"))}),t);r.onabort=()=>{clearTimeout(o),a(new Error("Domain "+e+" aborted"))},r.onerror=()=>{clearTimeout(o),a(new Error("Domain "+e+" errored"))},r.onload=()=>{clearTimeout(o),n()},r.src=e+"/favicon.ico"}))}},"1OmC":function(e,t,n){"use strict";n.r(t)},"4mzY":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));n("4mDm"),n("3bBZ");var a=n("nrsj"),r=n("baRz"),o=n("accy"),i=n("7wDT"),l=n("qqKc"),s=n("8Tsp"),c=n("bc/W"),u=n("t1Ez"),d=n("9WHe"),m=n("X890"),p=n("q1tI"),g=n.n(p),b=n("Ri2w"),h="account-exists-form",O=Object(r.styled)("div")({name:"UserInfo",class:"u1rga0ux"}),E=Object(r.styled)("div")({name:"Username",class:"u1u9n40t"});function f(e){var{existingUsernames:t,includeCloseButton:n,invalid:r,isOpen:f,isSubmitting:_,maskedEmail:v,onPasswordChange:S,onClickForgotPassword:C,onClickUseOtherAccount:y,onClose:j,onClickLogin:A,passwordValidationError:w,profileImage:k,passwordValue:L,preventCloseOnOverlayClick:B}=e,[N,M]=Object(p.useState)(),[P,I]=Object(p.useState)(),F=1===t.length&&!!v&&!!k,U=F?g.a.createElement(g.a.Fragment,null,g.a.createElement(u.a,{id:"global.login_modal.existing_account.please_use_password"}),g.a.createElement(O,null,k?g.a.createElement(o.b,{imageURL:k,size:o.a.Xlarge}):null,g.a.createElement(E,null,t[0]),v),g.a.createElement("form",{id:h,onSubmit:e=>{e.preventDefault(),A(t[0])}},g.a.createElement(c.b,null,g.a.createElement(i.a,{autoComplete:"current-password",autoFocus:!0,errorMessage:w,id:"password",invalid:r,label:Object(a.a)("global.login_modal.login_form.password_label_lowercase"),name:m.e.PASSWORD,onChange:S,placeholder:Object(a.a)("global.login_modal.login_form.password_placeholder"),type:"password",value:L}),g.a.createElement(l.f,{onClick:C,text:Object(a.a)("global.login_modal.forgot_password")})))):g.a.createElement(g.a.Fragment,null,g.a.createElement(u.a,{id:"global.login_modal.existing_account.please_use_magic_link"}),t.map((e=>g.a.createElement("div",{key:e},g.a.createElement(l.f,{onClick:()=>(e=>{M(void 0),I(void 0),Object(b.g)("/magic-login",{username:e}).then((e=>{e.success?M(e.email):I(e.errors.generic||Object(a.a)("errors.generic.request_failed"))})).catch((e=>{I(Object(a.a)("errors.generic.request_failed")),d.a.error("magic_link_form_generic_error",e)}))})(e),text:e})))),N?g.a.createElement("div",null,Object(a.a)("global.magic_link_modal.success_message",{email:N})):null,P?g.a.createElement("div",null,P):null);return g.a.createElement(s.a,{body:U,includeCloseButton:n,isOpen:f,limitHeight:!1,onClose:j,primaryAction:F?{size:"large",form:h,text:Object(a.a)("global.login_modal.login_form.submit_button"),loading:_,type:"submit"}:void 0,secondaryAction:F?{text:Object(a.a)("global.login_modal.existing_account.use_other_account"),onClick:y}:void 0,shouldCloseOnOverlayClick:!B,title:Object(a.a)("global.login_modal.existing_account.account_exists")})}n("5iMq")},"5iMq":function(e,t,n){"use strict";n.r(t)},"6BWV":function(e,t,n){"use strict";n.r(t)},ErDr:function(e,t,n){"use strict";n.r(t)},J9WF:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var a=n("NWnA"),r=n("X890"),o=(n("E9XD"),n("93Hy")),i=n.n(o),l={[r.a.CHANGE_INPUT]:(e,t)=>{var{payload:n}=t;return i()(e,(e=>{var{name:t,value:a,type:r}=n,o="checkbox"===r?n.checked:a;e.form[t]=o,e.validationErrorsByInputName[t]=null}))},[r.a.RESET_SUBMISSION]:e=>i()(e,(e=>{e.wasSubmitted=!1})),[r.a.SUBMIT_FORM]:e=>i()(e,(e=>{e.wasSubmitted=!0,e.validationErrorsByInputName={[r.d]:[]}})),[r.a.SUBMIT_FORM_ASYNC_FAILURE]:(e,t)=>{var{payload:n}=t;return i()(e,(e=>{e.validationErrorsByInputName=n.reduce(((e,t)=>(-1!==t.type.indexOf(r.e.USERNAME)?e[r.e.USERNAME]=t.message:-1!==t.type.indexOf(r.e.PASSWORD)?e[r.e.PASSWORD]=t.message:e[r.d].push(t),e)),e.validationErrorsByInputName),e.numFailedAttempts+=1}))},[r.a.REQUEST_USERNAME]:e=>i()(e,(e=>{e.hasMultipleAccounts=!0}))},s=n("WExX"),c={form:{[r.e.PASSWORD]:"",[r.e.USERNAME]:""},hasMultipleAccounts:!1,numFailedAttempts:0,openedAuthModal:null,validationErrorsByInputName:{[r.d]:[]},wasSubmitted:!1};function u(){var e=Object(s.createReducer)(c,l);a.a.register({[r.f]:e})}},LkIj:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return g}));n("E9XD");var a=n("NWnA"),r=n("X890"),o=n("peh1"),i=Object(a.c)(r.f),l=Object(o.createSelector)(i,(e=>e.form)),s=Object(o.createSelector)(i,(e=>e.validationErrorsByInputName)),c=Object(o.createSelector)(i,(e=>Object.keys(e.validationErrorsByInputName).reduce(((t,n)=>(e.validationErrorsByInputName[n]?t[n]=!0:t[n]=!(!e.validationErrorsByInputName[n]&&e.focusInputName===n)&&null,t)),{}))),u=Object(o.createSelector)(i,(e=>e.numFailedAttempts)),d=Object(o.createSelector)(l,(e=>e[r.e.USERNAME])),m=Object(o.createSelector)(i,(e=>e.wasSubmitted)),p=Object(o.createSelector)(i,(e=>e.hasMultipleAccounts)),g=Object(o.createSelector)(s,(e=>{var t;return!(null==(t=e[r.d])||!t.length)}))},UQ0i:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return P}));var a=n("pVnL"),r=n.n(a),o=(n("4mDm"),n("3bBZ"),n("nrsj")),i=n("baRz"),l=n("6MTt"),s=n("h4KR"),c=n("efxM"),u=n("TAwQ"),d=n("t1Ez"),m=n("dxfC"),p=n("zK28"),g=n("q1tI"),b=n.n(g),h=n("0RqGD"),O=n("pNr3"),E=n("bc/W"),f=n("78K5"),_=n("Nxgj"),v=n("mGzj"),S=n("T3U7"),C=n("dHOp"),y=Object(i.styled)("div")({name:"Buttons",class:"b1r6bd1m"}),j=Object(i.styled)("div")({name:"Button",class:"bq40tjb"});class A extends b.a.PureComponent{constructor(){super(...arguments),this.onSocialSignupButtonClick=e=>{Object(S.a)("signup_form_"+e+"_button_clicked")}}renderFacebookButton(){return Object(h.b)()?b.a.createElement(O.c,{onClick:()=>this.onSocialSignupButtonClick("facebook"),provider:O.b.FACEBOOK,urlParams:this.props.socialLoginParams}):b.a.createElement(f.a,{facebookLoginUrl:Object(C.b)(this.props.socialLoginParams),label:Object(o.a)("global.sign_up_modal.sign_up_cta.continue_with_facebook"),onClick:()=>this.onSocialSignupButtonClick("facebook"),variant:"small"})}renderGoogleButton(){return Object(h.b)()?b.a.createElement(O.c,{onClick:()=>this.onSocialSignupButtonClick("google"),provider:O.b.GOOGLE,urlParams:this.props.socialLoginParams}):b.a.createElement(_.a,{googleLoginUrl:Object(C.c)(this.props.socialLoginParams),label:Object(o.a)("global.sign_up_modal.sign_up_cta.continue_with_google"),onClick:()=>this.onSocialSignupButtonClick("google"),variant:"small"})}renderDivider(){return Object(h.b)()?b.a.createElement(E.a,null,b.a.createElement(d.a,{id:"global.sign_up_modal.divider_label"})):b.a.createElement(v.a,{key:"divider"},b.a.createElement(d.a,{id:"global.sign_up_modal.email_divider_label"}))}render(){return b.a.createElement(b.a.Fragment,null,b.a.createElement(y,null,b.a.createElement(j,null,this.renderGoogleButton()),this.props.shouldRenderFacebookLoginButton?b.a.createElement(j,null,this.renderFacebookButton()):null),this.renderDivider())}}n("a/yz");n("5s+n");var w=n("13SJ"),k=n("xNal"),L=n("og3H");function B(e){return null===k.b.read(L.l.SIGNUP__HIDE_FB_BUTTON)&&k.b.write(L.l.SIGNUP__HIDE_FB_BUTTON,e,{duration:.020833333333333332}),"1"===e}var N=Object(i.styled)("h2")({name:"Title",class:"t1mrp3o2"}),M=Object(i.styled)("div")({name:"Subtitle",class:"s1tfo7zy"});class P extends b.a.PureComponent{constructor(){super(...arguments),this.state={hideFbButton:!1,submitDisabled:!0,submitLoading:!1},this.handleClose=()=>{var e;this.setState({submitDisabled:!0}),null!=(e=this.props.actions)&&e.onClose&&!this.getIsContinuingOauth()&&this.props.actions.onClose()},this.handleFormComplete=()=>this.setState({submitDisabled:!1}),this.handleFormUpdate=()=>this.setState({submitDisabled:!0}),this.handleFormSubmitError=()=>this.setState({submitLoading:!1}),this.handleFormSubmit=()=>{var e;this.setState({submitLoading:!0}),null==(e=this.form)||e.handleSubmit()},this.handleOpenLogin=()=>{var e;this.setState({submitDisabled:!0}),null!=(e=this.props.actions)&&e.onOpenLogin?this.props.actions.onOpenLogin():QWait("Quizlet.loginModal",(()=>p.a.openLoginModal()))},this.shouldShowFullpageModal=()=>this.props.isOpen&&!this.getIsContinuingOauth()&&!this.props.excludeFromFullpageExperiment&&"experiment"===l.b.getVariationAndEnroll("FullPageSignupV2[default,growth]"),this.shouldShowAssemblifiedModal=()=>this.props.isOpen&&Object(h.b)()}componentDidMount(){this.props.isOpen&&Object(S.a)("sign_up_modal_opened"),function(){try{var e=k.b.read(L.l.SIGNUP__HIDE_FB_BUTTON);return null!==e?Promise.resolve("1"===e):Object(w.a)("https://facebook.com").then((()=>B("0"))).catch((()=>B("1")))}catch(t){return Promise.resolve(!1)}}().then((e=>{this.setState({hideFbButton:e})}))}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&Object(S.a)("sign_up_modal_opened")}getSocialLoginParams(){return this.props.signupOrigin?{customParams:{screenName:Object(C.d)(),signupOrigin:this.props.signupOrigin},redirect:this.props.redir}:{}}getIsContinuingOauth(){var e;return null==(e=this.props.signupFormData)?void 0:e.forOauth}getIncludeCloseButton(){return this.props.includeCloseButton&&!this.getIsContinuingOauth()}getPreventCloseOnOverlayClick(){return this.props.preventCloseOnOverlayClick||this.getIsContinuingOauth()}renderCtas(){return b.a.createElement(A,{shouldRenderFacebookLoginButton:this.shouldRenderFacebookLoginButton(),socialLoginParams:this.getSocialLoginParams()})}renderSignupForm(e){return b.a.createElement(u.a,r()({couponCode:this.props.couponCode,marketingOptInEnabled:this.props.marketingOptInEnabled,redir:this.props.redir,ref:e=>{this.form=e},screenName:Object(C.d)(),signupMetadata:this.props.signupMetadata,signupOrigin:this.props.signupOrigin},this.props.signupFormData,{onComplete:this.handleFormComplete,onOpenLogin:this.handleOpenLogin,onSubmitError:this.handleFormSubmitError,onValidatableFieldChange:this.handleFormUpdate,withSubmitButton:e.withSubmitButton}))}renderValueProp(){if(this.props.header)return null;var e,t=l.b.getVariationAndEnroll("SignupFormValueProp[default,growth]");if(!t||"control"===t)return null;switch(t){case"v1":e=Object(o.a)("global.sign_up_modal.title_v1");break;case"v2":e=Object(o.a)("global.sign_up_modal.title_v2");break;default:e=null}return b.a.createElement(b.a.Fragment,null,e?b.a.createElement(N,null,e):null,b.a.createElement(M,null,b.a.createElement(d.a,{id:"global.sign_up_modal.subtitle"})))}renderBody(e){return b.a.createElement(b.a.Fragment,null,!this.shouldShowFullpageModal()&&this.renderValueProp(),this.getIsContinuingOauth()?null:this.renderCtas(),this.renderSignupForm(e))}render(){if(this.shouldShowFullpageModal())return b.a.createElement(c.b,{currentTab:c.a.Signup,includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,onClose:this.handleClose,onOpenLoginFromSignup:this.handleOpenLogin,preventCloseOnOverlayClick:this.getPreventCloseOnOverlayClick(),redir:this.props.redir},this.renderBody({withSubmitButton:!0}));if(this.shouldShowAssemblifiedModal()){var e=this.getIsContinuingOauth()?void 0:{text:Object(o.a)("global.sign_up_modal.already_have_account_log_in"),onClick:this.handleOpenLogin};return b.a.createElement(s.a,{body:this.renderBody({withSubmitButton:!1}),includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,limitHeight:!1,onClose:this.handleClose,primaryAction:{text:Object(o.a)("global.sign_up_modal.button_text"),disabled:this.state.submitDisabled,loading:this.state.submitLoading,onClick:this.handleFormSubmit},secondaryAction:e,shouldCloseOnOverlayClick:!this.getPreventCloseOnOverlayClick(),title:this.props.header})}return b.a.createElement("div",{className:"SignupPromptModalNew"},b.a.createElement(m.a,{headerContent:this.props.header,headerContentSize:this.props.header?4:3,headerContentVariant:this.props.header?"thin":null,includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,onClose:this.handleClose,preventCloseOnOverlayClick:this.getPreventCloseOnOverlayClick()},this.renderBody({withSubmitButton:!0})))}shouldRenderFacebookLoginButton(){return!this.state.hideFbButton}}P.defaultProps={includeCloseButton:!0,excludeFromFullpageExperiment:!1},n("buYA")},UlXw:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var a=n("pVnL"),r=n.n(a),o=(n("4mDm"),n("3bBZ"),n("JTJg"),n("nrsj")),i=n("baRz"),l=n("7wDT"),s=n("brLV"),c=n("qqKc"),u=n("8Tsp"),d=n("nXOR"),m=n("9WHe"),p=n("X890"),g=n("q1tI"),b=n.n(g),h=n("Ri2w"),O=Object(i.styled)("div")({name:"ModalBody",class:"m1hr8iqx"}),E=Object(i.styled)("div")({name:"SecondaryOption",class:"s1lsip4c"}),f=Object(i.styled)("section")({name:"MagicLinkError",class:"mqsgtqg"});function _(e){var{isOpen:t,onClose:n,onInputChange:a,onSubmit:i,email:_,loading:v,loginValidationError:S}=e,C="multiple-accounts-form",[y,j]=Object(g.useState)(""),[A,w]=Object(g.useState)(S);Object(g.useEffect)((()=>{w(S)}),[S]);var[k,L]=Object(g.useState)(!1),[B,N]=Object(g.useState)(!1),[M,P]=Object(g.useState)(""),I=()=>{w(""),P("")},F=()=>{I(),j(""),N(!1),L(!1)},U=e=>{e.preventDefault(),y&&(y.includes("@")?w(Object(o.a)("errors.auth.username_not_email")):(F(),i()))},R=e=>{j(e.target.value),a(e)},x=()=>{L(!0),I(),Object(h.g)("/magic-login",{username:_}).then((e=>{L(!1),e.success?N(!0):P(e.errors.generic||Object(o.a)("errors.generic.request_failed"))})).catch((e=>{L(!1),P(Object(o.a)("errors.generic.request_failed")),m.a.error("magic_link_form_generic_error",e)}))},T=()=>{F(),n()},D=e=>b.a.createElement(O,null,b.a.createElement("form",{id:C,onSubmit:U},b.a.createElement(l.a,{autoComplete:"username",errorMessage:A,invalid:!!A,label:Object(o.a)("global.multiple_accounts_modal.username_label"),name:p.e.USERNAME,onChange:R,type:"text"})),e?null:b.a.createElement(E,null,b.a.createElement(c.f,{onClick:x,text:Object(o.a)("global.login_modal.magic_link_button")})),M&&b.a.createElement(f,null,b.a.createElement(s.a,null,M))),W={subtitle:Object(o.a)("global.magic_link_modal.spam_message"),title:Object(o.a)("global.magic_link_modal.success_message",{email:_})},V=e=>B?W:(e=>({body:D(e),primaryAction:{disabled:!y,form:C,loading:v||!e&&k,size:"large",text:Object(o.a)("global.multiple_accounts_modal.submit_button"),type:"submit"},secondaryAction:e?{loading:k,onClick:x,text:Object(o.a)("global.login_modal.magic_link_button")}:void 0,subtitle:Object(o.a)("global.multiple_accounts_modal.subtitle"),title:Object(o.a)("global.multiple_accounts_modal.title")}))(e);return b.a.createElement(d.a,{below:"s"},(e=>b.a.createElement(u.a,r()({},V(e),{includeCloseButtonBackground:!1,isOpen:t,justifyCenter:!e,limitHeight:!1,mobileVariant:"bottomSheet",onClose:T}))))}n("1OmC")},WExX:function(e,t,n){n("zKZe"),n("JTJg"),function(e){"use strict";function t(e){return null==e}function n(e){throw new Error("Argument "+e+" is empty.")}function a(e){return"function"==typeof e&&"getType"in e}function r(e){throw new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if(null==e.getType)throw new Error("Argument contains array with invalid element at index "+t+', it should be an action-creator instance from "typesafe-actions"')}function i(e){return"string"==typeof e||"symbol"==typeof e}function l(e){return!i(e)}function s(e){throw new Error("Argument "+e+" is invalid, it should be an action type of type: string | symbol")}function c(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if("string"!=typeof e&&"symbol"!=typeof e)throw new Error("Argument contains array with invalid element at index "+t+", it should be of type: string | symbol")}function u(e,a,o,i){return t(e)&&n(1),l(e)&&r(1),{type:e,payload:a,meta:o,error:i}}function d(e,a){return t(e)&&n(1),l(e)&&s(1),Object.assign((function(){var t=null!=a?a.apply(void 0,arguments):void 0;return Object.assign({type:e},t)}),{getType:function(){return e},toString:function(){return e}})}function m(e,a,r){return t(e)&&n(1),l(e)&&s(1),function(){return d(e,(function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];return null==a&&null==r||(e=null!=a?a.apply(void 0,arguments):void 0,t=null!=r?r.apply(void 0,arguments):void 0),Object.assign({},void 0!==e&&{payload:e},{},void 0!==t&&{meta:t})}))}}function p(e){return t(e)&&n(1),a(e)||r(1),e.getType()}function g(e,a){t(e)&&n(1),l(e)&&s(1);var r=null!=a?a(e):function(){return{type:e}};return Object.assign(r,{getType:function(){return e},toString:function(){return e}})}var b={createAction:function(e,t){var n=null==t?function(){return u(e)}:t(u.bind(null,e));return Object.assign(n,{getType:function(){return e},toString:function(){return e}})},createCustomAction:g,createStandardAction:function(e){return t(e)&&n(1),l(e)&&s(1),Object.assign((function(){return g(e,(function(e){return function(t,n){return{type:e,payload:t,meta:n}}}))}),{map:function(t){return g(e,(function(e){return function(n,a){return Object.assign(t(n,a),{type:e})}}))}})}};e.action=u,e.createAction=m,e.createAsyncAction=function(e,t,n,a){return function(){var r=[e,t,n,a].map((function(e,t){return Array.isArray(e)?m(e[0],e[1],e[2])():"string"==typeof e||"symbol"==typeof e?m(e)():void(t<3&&function(e){throw new Error("Argument "+e+' is invalid, it should be an action type of "string | symbol" or a tuple of "[string | symbol, Function, Function?]"')}(t))}));return{request:r[0],success:r[1],failure:r[2],cancel:r[3]}}},e.createCustomAction=d,e.createReducer=function e(t,n){void 0===n&&(n={});var r=Object.assign({},n),o=function(n,o){var l=Array.isArray(n)?n:[n],s={};return l.map((function(e,t){return a(e)?p(e):i(e)?e:function(e){throw new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}(t+1)})).forEach((function(e){return s[e]=o})),e(t,Object.assign({},r,{},s))};return Object.assign((function(e,n){if(void 0===e&&(e=t),r.hasOwnProperty(n.type)){var a=r[n.type];if("function"!=typeof a)throw Error('Reducer under "'+n.type+'" key is not a valid reducer');return a(e,n)}return e}),{handlers:Object.assign({},r),handleAction:o,handleType:o})},e.deprecated=b,e.getType=p,e.isActionOf=function(e,a){t(e)&&n(1);var r=Array.isArray(e)?e:[e];r.forEach(o);var i=function(e){return r.some((function(t){return e.type===t.getType()}))};return void 0===a?i:i(a)},e.isOfType=function(e,a){t(e)&&n(1);var r=Array.isArray(e)?e:[e];r.forEach(c);var o=function(e){return r.includes(e.type)};return void 0===a?o:o(a)}}(t)},X890:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a}));var a,r="generic",o=250,i="login_multiple_accounts_found",l="login",s={PASSWORD:"password",USERNAME:"username"};!function(e){e.CHANGE_INPUT="LOGIN.CHANGE_INPUT",e.RESET_SUBMISSION="LOGIN.RESET_SUBMISSION",e.SUBMIT_FORM="LOGIN.SUBMIT_FORM",e.SUBMIT_FORM_ASYNC_FAILURE="LOGIN.SUBMIT_FORM_ASYNC_FAILURE",e.OPEN_AUTH_MODAL="LOGIN.OPEN_AUTH_MODAL",e.CLOSE_AUTH_MODAL="LOGIN.CLOSE_AUTH_MODAL",e.REQUEST_USERNAME="LOGIN.REQUEST_USERNAME"}(a||(a={}))},"a/yz":function(e,t,n){"use strict";n.r(t)},buYA:function(e,t,n){"use strict";n.r(t)},efxM:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return _}));var a,r=n("nrsj"),o=n("baRz"),i=n("r7gd"),l=n("LszE"),s=n("dxfC"),c=n("zK28"),u=n("q1tI"),d=n.n(u),m=n("T3U7"),p=n("v+BM"),g=Object(o.styled)("section")({name:"Content",class:"cosdz4w"}),b=Object(o.styled)("div")({name:"Sidebar",class:"s1oaxobu",vars:{"s1oaxobu-0":[e=>e.isLogin?i.g.$100:i.d.$100]}}),h=Object(o.styled)("div")({name:"AuthForm",class:"avsxyiq"}),O=Object(o.styled)("div")({name:"AuthFormContent",class:"a1pcnvbg"}),E=Object(o.styled)("div")({name:"AuthFormTabs",class:"auu3mjs"}),f=Object(o.styled)("h3")({name:"AuthFormTab",class:"a1cdxe01",vars:{"a1cdxe01-1":[e=>e.isActive?i.e.$200:i.f.$500]}});function _(e){var{children:t,currentTab:n,includeCloseButton:o,isOpen:i,onClose:u,onOpenLoginFromSignup:_,preventCloseOnOverlayClick:v,redir:S}=e,C=d.a.createElement("svg",{className:"anqpypq"},d.a.createElement("noscript",null),d.a.createElement("use",{xlinkHref:"#accents_underline"}),d.a.createElement("noscript",null)),y=d.a.createElement(E,{role:"tablist"},d.a.createElement(f,{isActive:n===a.Signup,onClick:()=>{n!==a.Signup&&(Object(m.a)("auth-modal-tab-click",a.Signup),Object(p.a)("signup-tab-on-login-modal",c.a.actionString,{redir:S}))},role:"tab"},Object(r.a)("global.header.sign_up.button"),n===a.Signup?C:null),d.a.createElement(f,{isActive:n===a.Login,onClick:()=>{n!==a.Login&&(Object(m.a)("auth-modal-tab-click",a.Login),_?_():QWait("Quizlet.loginModal",(()=>c.a.openLoginModal({includeCloseButton:o,preventCloseOnOverlayClick:v,redir:S}))))},role:"tab"},Object(r.a)("global.header.log_in.button"),n===a.Login?C:null));return d.a.createElement(s.a,{className:"SignupPromptModalNew--fullPageExperiment",includeCloseButton:o,isOpen:i,onClose:u,preventCloseOnOverlayClick:v,variant:"xl"},d.a.createElement(g,null,d.a.createElement(b,{isLogin:n===a.Login},d.a.createElement(l.a,{className:"srk79j3"})),d.a.createElement(h,null,d.a.createElement(O,null,y,t))))}!function(e){e.Signup="signup",e.Login="login"}(a||(a={})),n("v0OC")},gTWh:function(e,t,n){"use strict";n.r(t);n("JTJg");var a=n("nrsj"),r=n("baRz"),o=n("6MTt"),i=n("7wDT"),l=n("qqKc"),s=n("pNr3"),c=n("8Tsp"),u=n("efxM"),d=n("Epfs"),m=n("bc/W"),p=n("bvRJ"),g=n("PqcE"),b=n("q1tI"),h=n.n(b);function O(e){var{label:t,onClick:n}=e;return h.a.createElement(g.a,{icon:h.a.createElement(p.a,{icon:"apple"}),label:t,onClick:n,variant:"default"})}O.defaultProps={label:Object(a.a)("userinfo_header.apple_login_button")};var E=n("78K5"),f=n("Nxgj"),_=n("t1Ez"),v=n("nXOR"),S=n("S41V"),C=n("Pxp3"),y=n("vlgG"),j=n("a08m"),A=n("ZlgO"),w=n("fkqS"),k=n("E/Xc"),L=n("dxfC"),B=n("DLQF"),N=n("OpqZ"),M=n("rpuy"),P=n("zK28"),I=(n("4mDm"),n("5s+n"),n("3bBZ"),n("mr8R")),F=Object(I.a)((()=>Promise.all([n.e("common"),n.e("login_signup_lazy")]).then(n.bind(null,"4mzY")))),U=Object(I.a)((()=>Promise.all([n.e("common"),n.e("login_signup_lazy")]).then(n.bind(null,"UlXw")))),R=n("X890"),x=n("0RqGD"),T=n("dHOp"),D="global-signup-modal-facebook",W="global-signup-modal-google",V="global-signup-modal-apple",q=Object(r.styled)("div")({name:"SocialLoginOptions",class:"s119jyio"}),G=Object(r.styled)("div")({name:"SocialLoginOption",class:"s13k26rr"}),z=Object(r.styled)("div")({name:"FormFields",class:"fjm13bn"}),H=Object(r.styled)("div")({name:"LoginValidationErrors",class:"l1y5hdj2"});class X extends b.PureComponent{constructor(e){super(e),this.getUsernamePlaceholder=()=>"experiment"===o.b.getVariationAndEnroll("LoginWithEmail")?Object(a.a)("global.login_modal.login_form.username_email_placeholder"):Object(a.a)("global.login_modal.login_form.username_placeholder"),this.handleSubmit=e=>{null==e||e.preventDefault(),this.props.actions.onSubmit(this.getLoginUrl())},this.handleInputChange=e=>{this.props.actions.onChange(e.target);var t=e.target.value;t.includes("@")&&this.setState({email:t})},this.shouldRenderSubmitButton=()=>!Object(x.b)()||"experiment"===o.b.getVariationAndEnroll("FullPageSignupV2[default,growth]"),e.username&&e.actions.onChange({name:R.e.USERNAME,value:e.username}),this.state={email:"",showAccountExistsModal:e.existingUsernames.length>0}}getLoginUrl(){return"/login?redir="+encodeURIComponent(this.props.redir+window.location.hash)}renderBelowForm(){return h.a.createElement(N.a,null,h.a.createElement(S.a,{width:.5},h.a.createElement("div",{className:"LoginPromptModal-logoutReminder"},h.a.createElement(M.a,null,h.a.createElement(_.a,{id:"global.login_modal.remember_to_log_out"})))),h.a.createElement(S.a,{width:.5},this.props.onOpenMagicLink&&h.a.createElement("div",{className:"LoginPromptModal-magicLinkWrapper"},h.a.createElement(N.a,null,h.a.createElement(j.a,{onClick:this.props.onOpenMagicLink},h.a.createElement(_.a,{id:"global.login_modal.magic_link_button"}))))))}renderAssemblyFields(){var e=this.props.validationErrorsByInputName[R.e.USERNAME],t=this.props.validationErrorsByInputName[R.e.PASSWORD];return h.a.createElement(h.a.Fragment,null,h.a.createElement(m.b,null,h.a.createElement(i.a,{autoComplete:"username",autoCorrect:"off",autoFocus:!this.props.username,errorMessage:e,id:"username",invalid:this.props.invalidStateByInputName[R.e.USERNAME],label:Object(a.a)("global.login_modal.login_form.username_label_lowercase"),name:R.e.USERNAME,onChange:this.handleInputChange,placeholder:this.getUsernamePlaceholder(),spellCheck:!1,type:"text",value:this.props.form[R.e.USERNAME]})),h.a.createElement(m.b,null,h.a.createElement(i.a,{autoComplete:"current-password",autoFocus:!!this.props.username,errorMessage:t,id:"password",invalid:this.props.invalidStateByInputName[R.e.PASSWORD],label:Object(a.a)("global.login_modal.login_form.password_label_lowercase"),name:R.e.PASSWORD,onChange:this.handleInputChange,placeholder:Object(a.a)("global.login_modal.login_form.password_placeholder"),type:"password",value:this.props.form[R.e.PASSWORD]})),h.a.createElement(l.f,{onClick:this.props.onOpenMagicLink,text:Object(a.a)("global.login_modal.forgot_password")}))}renderFields(){var e=this.props.validationErrorsByInputName[R.e.USERNAME]||h.a.createElement(_.a,{id:"global.login_modal.login_form.username_label"}),t=this.props.validationErrorsByInputName[R.e.PASSWORD]||h.a.createElement(_.a,{id:"global.login_modal.login_form.password_label"});return h.a.createElement(h.a.Fragment,null,this.props.hasGenericValidationErrors?h.a.createElement(N.a,null,this.renderValidationErrors()):null,h.a.createElement(y.a,{autoComplete:"username",autoCorrect:"off",autoFocus:!this.props.username,id:"username",invalid:this.props.invalidStateByInputName[R.e.USERNAME],label:e,name:R.e.USERNAME,onChange:this.handleInputChange,placeholder:this.getUsernamePlaceholder(),spellCheck:!1,type:"text",value:this.props.form[R.e.USERNAME]}),h.a.createElement(y.a,{autoComplete:"current-password",autoFocus:!!this.props.username,id:"password",invalid:this.props.invalidStateByInputName[R.e.PASSWORD],label:t,labelDetail:h.a.createElement("div",{className:"LoginPromptModal-forgotPasswordLinkWrapper"},h.a.createElement(j.a,{to:"/forgotten"},h.a.createElement(_.a,{id:"global.login_modal.forgot_password_link"}))),name:R.e.PASSWORD,onChange:this.handleInputChange,placeholder:Object(a.a)("global.login_modal.login_form.password_placeholder"),type:"password",value:this.props.form[R.e.PASSWORD]}))}renderSubmitButton(){var e=Object(x.b)()?h.a.createElement(l.b,{isFullWidth:!0,loading:this.props.isSubmitting,text:Object(a.a)("global.login_modal.login_form.submit_button"),type:"submit"}):h.a.createElement(k.a,{"aria-label":Object(a.a)("global.login_modal.login_form.submit_button"),hero:!0,loading:this.props.isSubmitting,type:"submit",width:"fill"},h.a.createElement("span",null,Object(a.a)("global.login_modal.login_form.submit_button")));return Object(m.c)(e)}renderLoginForm(){return h.a.createElement("form",{action:this.getLoginUrl(),className:"LoginPromptModal-form","data-testid":"login-form",method:"post",onSubmit:this.handleSubmit},h.a.createElement(z,null,Object(x.b)()?this.renderAssemblyFields():this.renderFields()),Object(x.b)()&&this.props.hasGenericValidationErrors&&h.a.createElement(H,null,h.a.createElement(d.a,{messages:this.props.validationErrorsByInputName[R.d].map((e=>e.message))})),this.shouldRenderSubmitButton()&&this.renderSubmitButton())}renderSignUpCTA(){return h.a.createElement("div",{className:"LoginPromptModal-signUpCTAContainer"},h.a.createElement(C.a,{className:"LoginPromptModal-signUpCTA"},h.a.createElement("span",{className:"LoginPromptModal-signUpCTAMessage"},h.a.createElement(_.a,{id:"global.login_modal.new_to_quizlet"})," ",h.a.createElement(j.a,{onClick:this.props.onOpenSignup},h.a.createElement(_.a,{id:"global.login_modal.sign_up_cta"})))))}renderAssemblySocialLoginOptions(){var e=e=>({customParams:{signupOrigin:e,screenName:P.a.actionString},redirect:this.props.redir});return h.a.createElement(h.a.Fragment,null,h.a.createElement(v.a,{below:"s"},(t=>{var n=t?s.a.DEFAULT:s.a.SMALL;return h.a.createElement(q,null,h.a.createElement(G,null,h.a.createElement(s.c,{provider:s.b.GOOGLE,urlParams:e(W),variant:n})),h.a.createElement(G,null,h.a.createElement(s.c,{provider:s.b.FACEBOOK,urlParams:e(D),variant:n})),h.a.createElement(G,null,h.a.createElement(s.c,{provider:s.b.APPLE,urlParams:{signupOrigin:V,screenName:P.a.actionString,redir:this.props.redir},variant:n})))})),h.a.createElement(m.a,null,h.a.createElement(_.a,{id:"global.sign_up_modal.divider_label"})))}renderSocialLoginOptions(){return Object(x.b)()?this.renderAssemblySocialLoginOptions():h.a.createElement("div",{className:"LoginPromptModal-socialButtons"},h.a.createElement(N.a,null,h.a.createElement(f.a,{googleLoginUrl:Object(T.c)({customParams:{signupOrigin:W,screenName:P.a.actionString},redirect:this.props.redir}),label:Object(a.a)("global.login_modal.google_button")})),h.a.createElement(N.a,null,h.a.createElement(E.a,{facebookLoginUrl:Object(T.b)({customParams:{signupOrigin:D,screenName:P.a.actionString},redirect:this.props.redir}),label:Object(a.a)("global.login_modal.facebook_button")})),h.a.createElement(N.a,null,h.a.createElement(O,{label:Object(a.a)("global.login_modal.apple_button"),onClick:()=>Object(T.e)({signupOrigin:V,screenName:P.a.actionString,redir:this.props.redir})})))}renderValidationErrors(){var e=this.props.validationErrorsByInputName[R.d].map((e=>h.a.createElement(w.a,{key:e.message},e.message)));return h.a.createElement(B.a,{boxed:!0,uppercaseDeprecated:!0,variant:"alert"},h.a.createElement(A.a,null,e))}renderAccountExistsModal(){return h.a.createElement(F,{existingUsernames:this.props.existingUsernames,includeCloseButton:this.props.includeCloseButton,invalid:this.props.invalidStateByInputName[R.e.PASSWORD],isOpen:this.props.isOpen&&this.state.showAccountExistsModal,isSubmitting:this.props.isSubmitting,maskedEmail:this.props.maskedEmail,onClickForgotPassword:e=>{this.setState({showAccountExistsModal:!1}),this.props.onOpenMagicLink&&this.props.onOpenMagicLink(e)},onClickLogin:e=>{this.props.actions.onChange({name:R.e.USERNAME,value:e}),this.handleSubmit()},onClickUseOtherAccount:()=>{this.props.actions.onChange({name:R.e.USERNAME,value:void 0}),this.props.actions.onChange({name:R.e.PASSWORD,value:void 0}),this.setState({showAccountExistsModal:!1})},onClose:()=>{var e,t;return null==(e=(t=this.props).onClose)?void 0:e.call(t)},onPasswordChange:this.handleInputChange,passwordValidationError:this.props.validationErrorsByInputName[R.e.PASSWORD],passwordValue:this.props.form[R.e.PASSWORD],preventCloseOnOverlayClick:this.props.preventCloseOnOverlayClick,profileImage:this.props.profileImage})}render(){if(this.state.showAccountExistsModal)return this.renderAccountExistsModal();if(this.props.hasMultipleAccounts)return h.a.createElement(U,{email:this.state.email,isOpen:this.props.isOpen,loading:this.props.isSubmitting,loginValidationError:this.props.validationErrorsByInputName[R.e.USERNAME]||this.props.validationErrorsByInputName[R.e.PASSWORD],onClose:()=>{var e,t;return null==(e=(t=this.props).onClose)?void 0:e.call(t)},onInputChange:this.handleInputChange,onSubmit:this.handleSubmit});var e=h.a.createElement(h.a.Fragment,null,this.renderSocialLoginOptions(),this.renderLoginForm(),Object(x.b)()?null:this.renderBelowForm(),this.props.onOpenSignup?this.renderSignUpCTA():null);return this.props.excludeFromFullpageExperiment||"experiment"!==o.b.getVariationAndEnroll("FullPageSignupV2[default,growth]")?Object(x.b)()?h.a.createElement(c.a,{body:e,includeCloseButton:this.props.includeCloseButton,isOpen:this.props.isOpen,limitHeight:!1,onClose:()=>{var e,t;return null==(e=(t=this.props).onClose)?void 0:e.call(t)},primaryAction:{text:Object(a.a)("global.login_modal.login_form.submit_button"),loading:this.props.isSubmitting,onClick:()=>this.handleSubmit()},shouldCloseOnOverlayClick:!this.props.preventCloseOnOverlayClick,title:this.props.header}):h.a.createElement("div",{className:"LoginPromptModal"},h.a.createElement(L.a,{headerContent:this.props.header,includeCloseButton:this.props.includeCloseButton,isOpen:this.props.isOpen,onClose:this.props.onClose,preventCloseOnOverlayClick:this.props.preventCloseOnOverlayClick},e)):h.a.createElement(u.b,{currentTab:u.a.Login,includeCloseButton:this.props.includeCloseButton,isOpen:this.props.isOpen,onClose:this.props.onClose,preventCloseOnOverlayClick:this.props.preventCloseOnOverlayClick,redir:this.props.redir},e)}}X.defaultProps={header:Object(x.b)()?Object(a.a)("global.login_modal.welcome_back"):Object(a.a)("global.login_modal.login_header"),includeCloseButton:!0,redir:window.location.href,excludeFromFullpageExperiment:!1,existingUsernames:[]},n("ErDr");var K=n("Ef4P"),Q=n("S40T"),J=n("9WHe"),Y=n("LkIj"),Z=n("WExX"),$=n("Ri2w"),ee=n("fdo3"),te=e=>Object(Z.action)(R.a.CHANGE_INPUT,e),ne=()=>Object(Z.action)(R.a.RESET_SUBMISSION),ae=e=>Object(Z.action)(R.a.SUBMIT_FORM_ASYNC_FAILURE,e),re=e=>(t,n)=>{var r=n();t(Object(Z.action)(R.a.SUBMIT_FORM)),Object($.g)(e,Object(Y.a)(r)).then((e=>{var n;e.success?Object(ee.a)(e.path):(null!=(n=e.errors)&&n.length&&e.errors[0].type===R.b&&t(Object(Z.action)(R.a.REQUEST_USERNAME)),t(ae(e.errors||[])),window.setTimeout((()=>t(ne())),Object(Y.e)(r)*R.c))})).catch((e=>{var n;n=e.name===$.b.name?Object(a.a)("errors.auth.ajax_error"):e.message===$.c||e.message===$.a||e.error&&e.error.code===Q.Http.TooManyRequests?Object(a.a)("errors.auth.login_attempts_above_rate_limit"):"number"==typeof e.timeout?Object(a.a)("errors.auth.ajax_timeout"):Object(a.a)("errors.auth.ajax_error"),window.setTimeout((()=>{t(ne())}),Object(Y.e)(r)*R.c),t(ae([{type:R.d,message:n}])),e.message===$.a?J.a.warn("login_form_generic_error",e):J.a.error("login_form_generic_error",e)}))},oe=n("Vg22"),ie=n("pn57"),le=n("peh1"),se=Object(le.createStructuredSelector)({form:Y.a,hasGenericValidationErrors:Y.b,hasMultipleAccounts:Y.c,invalidStateByInputName:Y.d,isSubmitting:Y.h,validationErrorsByInputName:Y.g});t.default=Object(oe.connect)(se,(e=>({actions:Object(ie.bindActionCreators)({onChange:te,onSubmit:re},e)})),null,{context:K.a})(X)},mQyy:function(e,t,n){"use strict";n.r(t);var a=n("Bm/d"),r=n("Ef4P"),o=n("LkIj"),i=n("Vg22");t.default=Object(i.connect)(((e,t)=>({username:t.username||Object(o.f)(e)})),null,null,{context:r.a})(a.a)},pNr3:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b}));var a=n("pVnL"),r=n.n(a),o=n("nrsj"),i=n("UbNW"),l=n("q1tI"),s=n.n(l),c=n("Nacp");function u(e){return s.a.createElement(c.a,r()({},e,{className:"AssemblyVerticalButton",hasBorder:!0,onPress:e.onClick,topIconInfo:{icon:e.icon}}))}n("6BWV");var d,m,p=n("nXOR"),g=n("dHOp");function b(e){var t={[d.FACEBOOK]:{labelLong:Object(o.a)("global.social_button.facebook.long"),labelShort:Object(o.a)("global.social_button.facebook.short"),icon:"facebook-round"},[d.GOOGLE]:{labelLong:Object(o.a)("global.social_button.google.long"),labelShort:Object(o.a)("global.social_button.google.short"),icon:"google-multicolor"},[d.APPLE]:{labelLong:Object(o.a)("global.social_button.apple.long"),labelShort:Object(o.a)("global.social_button.apple.short"),icon:"apple"}},n=()=>{null==e.onClick||e.onClick(),e.provider===d.APPLE&&Object(g.e)(e.urlParams)},a=()=>{switch(e.provider){case d.FACEBOOK:return Object(g.b)(e.urlParams);case d.GOOGLE:return Object(g.c)(e.urlParams);case d.APPLE:default:return}};return s.a.createElement(p.a,{below:"s"},(o=>{var l={isFullWidth:!0,linkTo:a(),onClick:n,size:e.size||(o?"large":"xlarge")};return e.variant===m.SMALL?s.a.createElement(u,r()({},l,{icon:t[e.provider].icon,text:t[e.provider].labelShort})):s.a.createElement(i.a,r()({},l,{leftIcon:t[e.provider].icon,text:t[e.provider].labelLong}))}))}!function(e){e.FACEBOOK="facebook",e.GOOGLE="google",e.APPLE="apple"}(d||(d={})),function(e){e.DEFAULT="default",e.SMALL="small"}(m||(m={}))},v0OC:function(e,t,n){"use strict";n.r(t)}}]);