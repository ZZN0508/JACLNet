(function(a){a.wafer.ready(function(){if(window.NodeList&&!NodeList.prototype.forEach){NodeList.prototype.forEach=Array.prototype.forEach;}var j=document.getElementById("pphw-triggerbtn");var c=document.createElement("canvas");var i=!!(c.getContext&&c.getContext("2d"));if(!i||!j){return;}var r=j.classList.remove("D(n)");j.classlist=r;var n=document.querySelector("#pphw-panel");var B=document.querySelector("#header-search-input");var s=document.querySelector("#header-clear-search");var x=document.querySelector("#handwrite-tooltip");var t=x.querySelector("#pphw-writepad-loading");var b=x.querySelector("#pphw-writepad-iframe");var C=x.querySelector("#pphw-label-select-btn");var d=C.querySelectorAll("button");var w=x.querySelector("#pphw-qmarkbtn");var m=x.querySelector("#pphw-closebtn");var o=x.querySelector("#pphw-undobtn");var l=x.querySelector("#pphw-cleanbtn");var p=n.getAttribute("data-intl")||"zh_TW";var u=b.getAttribute("data-src")||"https://s.yimg.com/pv/hw-html5-iframe/index-20170907022622.html";var q=null;try{q=new URL(u);}catch(v){q=document.createElement("a");q.href=u;}var A=q?[q.protocol,"//",q.hostname,q.port&&q.port!=="80"&&q.port!=="443"?(":"+q.port):""].join(""):"";var h=0;var z=function(){b.contentWindow.postMessage(JSON.stringify({payload:p,type:"hw:intl"}),A);};var g=function(){if(!h){d.forEach(function(e){e.removeAttribute("disabled");});o.removeAttribute("disabled");l.removeAttribute("disabled");h=1;}};var k=function(){if(h){d.forEach(function(e){e.setAttribute("disabled","disabled");});o.setAttribute("disabled","disabled");l.setAttribute("disabled","disabled");h=0;}};var y=function(e){if(!e||e===""){return false;}window.open(e,"","heigth=768,width=1024,resizable=1");};w.addEventListener("click",function(E){var D=w.getAttribute("data-link")||"http://tw.help.cc.yahoo.com/help_cp.html?product=40\u0026catyname=%A4%E2%BCg%BF%E9%A4J";y(D);});m.addEventListener("click",function(D){x.classList.remove("active");});o.addEventListener("click",function(D){b.contentWindow.postMessage(JSON.stringify({type:"hw:undo"}),A);k();});l.addEventListener("click",function(D){b.contentWindow.postMessage(JSON.stringify({type:"hw:clean"}),A);k();});C.addEventListener("click",function(E){B.value+=E.target.innerHTML;B.setAttribute("data-fr-override-by-handwriting","");var D;if(typeof Event==="function"){D=new Event("focus",{bubbles:true,cancelable:true,view:window});}else{D=document.createEvent("Event");D.initEvent("focus",true,true);}B.dispatchEvent(D);b.contentWindow.postMessage(JSON.stringify({type:"hw:clean"}),A);if(s){s.classList.remove("D(n)");s.classList.add("D(b)");}});B.addEventListener("keyup",function(D){if(s){if(B.value){s.classList.remove("D(n)");s.classList.add("D(b)");}else{s.classList.remove("D(b)");s.classList.add("D(n)");}}});var f=false;j.addEventListener("click",function(E){var D=b.getAttribute("src")!=="about:blank";if(!f&&!D){b.setAttribute("src",u);f=true;}});window.addEventListener("message",function(D){if(D.source===window||!/\.yimg\.com$/.test(D.origin)){return;}try{var G=JSON.parse(D.data);var F;switch(G.type){case"hw:ready":z();t.style.display="none";break;case"hw:candidates":d.forEach(function(H,e){F=String(G.payload&&G.payload[e]);H.innerHTML=(F.length===1)?F:"";});g();break;case"hw:empty":d.forEach(function(H,e){H.innerHTML="";});k();break;}}catch(E){}});});})(window);/* Copyright (c) 2021, Yahoo! Inc.  All rights reserved. */